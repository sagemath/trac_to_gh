# Issue 18017: osx R spkg error: expected ',' or '}' before '__attribute__'

Issue created by migration from https://trac.sagemath.org/ticket/18254

Original creator: buck

Original creation time: 2015-04-20 02:24:35

CC:  vbraun

The sage-support discussion is here:  https://groups.google.com/forum/#!topic/sage-support/9m5N0KUqkWo

I'm on OS X 10.10.3. I've removed homebrew from any part of the build. I've updated sage to the develop branch.

The error still persists: ([full output](http://www.google.com/url?q=http%3A%2F%2Fpaste.pound-python.org%2Fshow%2FCSFQbBf722doPeyrXxJi%2F&sa=D&sntz=1&usg=AFQjCNE3nLaYMBJtas9IBEsp7q23P8Odug))



```
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib     -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
In file included from /usr/include/Availability.h:153:0,
                 from /usr/include/stdio.h:65,
                 from ../../../../include/Rinternals.h:37,
                 from ../../../include/Defn.h:80,
                 from devQuartz.c:30:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
```





I suspect this needs another patch to fix up inappropriate objective-c in the C code, similar to what was done for [dispatch/object.h](https://github.com/sagemath/sage/blob/master/build/pkgs/gcc/spkg-install#L77,L78), but I might be off base.


---

Comment by buck created at 2015-04-20 02:38:12

Just to make double-sure, I tried one more time with an essentially empty environment from the develop branch. I get the same error:


```
$ env
PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/texbin
PWD=/Users/buck/trees/mine/sage
HOME=/Users/buck
SHLVL=1
_=/usr/bin/env

$ ./src/bin/sage-spkg r 2>&1 | tee r.log.3
Found local metadata for r-3.1.2.p0
Found local sources at /Users/buck/trees/mine/sage/upstream/r-3.1.2.tar.gz
Checksum: 93809368e5735a630611633ac1fa99010020c5d6 vs 93809368e5735a630611633ac1fa99010020c5d6
r-3.1.2.p0
====================================================
Setting up build directory for r-3.1.2.p0
Finished set up
****************************************************
Host system:
Darwin YELP-BUCK.lan 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/buck/trees/mine/sage/local/libexec/gcc/x86_64-apple-darwin14.3.0/4.9.2/lto-wrapper
Target: x86_64-apple-darwin14.3.0
Configured with: ../src/configure --prefix=/Users/buck/trees/mine/sage/local --with-local-prefix=/Users/buck/trees/mine/sage/local --with-gmp=/Users/buck/trees/mine/sage/local --with-mpfr=/Users/buck/trees/mine/sage/local --with-mpc=/Users/buck/trees/mine/sage/local --with-system-zlib --disable-multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm --without-isl --without-cloog  
Thread model: posix
gcc version 4.9.2 (GCC) 
****************************************************
Copying fake java and javac compiler on OS X
Configuring R without ATLAS for OS X
patching file src/scripts/R.sh.in
<snip>
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib     -fPIC  -g -O2   -c devPS.c -o devPS.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib     -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
In file included from /usr/include/Availability.h:153:0,
                 from /usr/include/stdio.h:65,
                 from ../../../../include/Rinternals.h:37,
                 from ../../../include/Defn.h:80,
                 from devQuartz.c:30:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
                                         ^
devQuartz.c: In function 'RQuartz_Font':
devQuartz.c:646:13: warning: 'ATSFontFindFromName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:803) [-Wdeprecated-declarations]
             atsFont = ATSFontFindFromName(cfFontName, kATSOptionFlagsDefault);
             ^
devQuartz.c:648:17: warning: 'ATSFontFindFromPostScriptName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:820) [-Wdeprecated-declarations]
                 atsFont = ATSFontFindFromPostScriptName(cfFontName, kATSOptionFlagsDefault);
                 ^
devQuartz.c:675:17: warning: 'ATSFontFindFromName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:803) [-Wdeprecated-declarations]
                 atsFont = ATSFontFindFromName(cfFontName, kATSOptionFlagsDefault);
                 ^
devQuartz.c:676:17: warning: 'ATSFontFindFromPostScriptName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:820) [-Wdeprecated-declarations]
                 if (!atsFont) atsFont = ATSFontFindFromPostScriptName(cfFontName, kATSOptionFlagsDefault);
                 ^
devQuartz.c:682:25: warning: 'ATSFontFindFromName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:803) [-Wdeprecated-declarations]
                         atsFont = ATSFontFindFromName(cfFontName, kATSOptionFlagsDefault);
                         ^
devQuartz.c:688:29: warning: 'ATSFontFindFromName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:803) [-Wdeprecated-declarations]
                             atsFont = ATSFontFindFromName(cfFontName, kATSOptionFlagsDefault);
                             ^
devQuartz.c:696:25: warning: 'ATSFontFindFromName' is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Headers/ATSFont.h:803) [-Wdeprecated-declarations]
                         atsFont = ATSFontFindFromName(cfFontName, kATSOptionFlagsDefault);
                         ^
devQuartz.c:715:5: warning: 'CGFontCreateWithPlatformFont' is deprecated (declared at /System/Library/Frameworks/CoreGraphics.framework/Headers/CGFont.h:61) [-Wdeprecated-declarations]
     return CGFontCreateWithPlatformFont(&atsFont);
     ^
devQuartz.c: In function 'RQuartz_Text':
devQuartz.c:997:5: warning: 'CGContextShowGlyphsWithAdvances' is deprecated (declared at /System/Library/Frameworks/CoreGraphics.framework/Headers/CGContext.h:1023) [-Wdeprecated-declarations]
     CGContextShowGlyphsWithAdvances(ctx,glyphs, g_adv, len);
     ^
make[5]: *** [devQuartz.o] Error 1
make[4]: *** [mksrc] Error 1
make[3]: *** [all] Error 2
make[2]: *** [R] Error 1
make[1]: *** [R] Error 1
make: *** [R] Error 1
Error building R.

real	4m58.277s
user	4m10.787s
sys	0m42.757s
************************************************************************
Error installing package r-3.1.2.p0
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /Users/buck/trees/mine/sage/logs/pkgs/r-3.1.2.p0.log
Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/Users/buck/trees/mine/sage/local/var/tmp/sage/build/r-3.1.2.p0 and type 'make' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '/Users/buck/trees/mine/sage/local/var/tmp/sage/build/r-3.1.2.p0' && '/Users/buck/trees/mine/sage/sage' --sh)
When you are done debugging, you can type "exit" to leave the subshell.
************************************************************************
```



---

Comment by vbraun created at 2015-04-20 03:02:22

Those are warnings, not errors. The buildbot log shows the same warnings ( http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20full/builds/42/steps/compile_1/logs/r-project). Do you have `-Werror` or something like that in CFLAGS/CXXFLAGS/...? This looks like a problem with your environment variables.


---

Comment by buck created at 2015-04-20 03:16:06

`@`vbraun: I showed all my environment above:


```
$ env
PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/texbin
PWD=/Users/buck/trees/mine/sage
HOME=/Users/buck
SHLVL=1
_=/usr/bin/env
```


There's definitely an error:


```
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib     -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
In file included from /usr/include/Availability.h:153:0,
                 from /usr/include/stdio.h:65,
                 from ../../../../include/Rinternals.h:37,
                 from ../../../include/Defn.h:80,
                 from devQuartz.c:30:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41:
error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
                                         ^
...
Error installing package r-3.1.2.p0
```



---

Comment by buck created at 2015-04-20 03:20:18

The error I've pointed out does not show in your buildbot log.


---

Comment by buck created at 2015-04-20 03:34:56

On osx 10.10, `__OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0)` expands to `__attribute__((availability(macosx,introduced=10.10)))`, which helps explain the error message..

I expect the difference is that your buildbot is not 10.10.


---

Comment by jhpalmieri created at 2015-04-20 05:50:02

I'm guessing that this has to do with Xcode, and in particular the fact that its most recent version is broken.


---

Comment by vbraun created at 2015-04-20 12:51:24

Sage sets `MACOSX_DEPLOYMENT_TARGET=10.9` on 10.10 to work around Apple's broken toolchain so the conditional should be false. Though the error is about what is *before* the `__OSX_AVAILABLE_STARTING`. What are the relevant lines in your Availability.h?

I thought we had established that he is using Xcode < 6.3 on the mailinglist? With Xcode 6.3 he should't have gotten this far, the compilation pretty much dies immediately.


---

Comment by vbraun created at 2015-04-20 12:52:13

PS: The buildbot most certainly is on OSX 10.10.3


---

Comment by jhpalmieri created at 2015-04-20 14:58:54

On a machine on which I upgraded Xcode, I run into the same problem, and that machine built Sage fine before the upgrade.


---

Comment by buck created at 2015-04-20 15:42:13

Here's the gcc version you asked for:


```
$ which gcc
/usr/bin/gcc

$ gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 6.1.0 (clang-602.0.49) (based on LLVM 3.6.0svn)
Target: x86_64-apple-darwin14.3.0
Thread model: posix
```


The XCode GUI reports "Version 6.3 (6D570)".


---

Attachment

Availability.h from Xcode 6.3


---

Attachment

AvailabilityInternal.h from Xcode 6.3


---

Comment by buck created at 2015-04-20 15:47:12

I've attached the entire files just in case I've gotten it wrong, but I believe these are the relevant lines.

Availability.h:

```
162 #elif defined(__MAC_OS_X_VERSION_MIN_REQUIRED)
163     #define __OSX_AVAILABLE_STARTING(_osx, _ios) __AVAILABILITY_INTERNAL##_osx
```


AvailabilityInternal.h:

```
5513 #define __AVAILABILITY_INTERNAL__MAC_10_10
                  __attribute__((availability(macosx,introduced=10.10)))
```



---

Comment by vbraun created at 2015-04-20 15:53:02

Xcode 6.3 isn't going to work (#18156). Propose to close as duplicate.


---

Comment by vbraun created at 2015-04-20 15:53:06

Changing status from new to needs_review.


---

Comment by buck created at 2015-04-20 16:08:28

While both these issues may be caused by xcode-6.3, they look like separate bugs, separate pieces of work to me.

I upgraded my Xcode at the recommendation of one of the guys at sage days :(
Shall I downgrade to 6.2?


---

Comment by vbraun created at 2015-04-20 16:13:11

yes, downgrade to 6.2


---

Comment by buck created at 2015-04-20 18:55:05

I've downgraded to 6.2, with no change in behavior D:


```
$ gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)
Target: x86_64-apple-darwin14.3.0
Thread model: posix
```


The GUI reports "Version 6.2 (6C131e)".

The error looks exactly the same to me, but here it is, for completeness:

```
$ ./src/bin/sage-spkg
Found local metadata for r-3.1.2.p0
Found local sources at /Users/buck/trees/mine/sage/upstream/r-3.1.2.tar.gz
Checksum: 93809368e5735a630611633ac1fa99010020c5d6 vs 93809368e5735a630611633ac1fa99010020c5d6
r-3.1.2.p0
====================================================
Setting up build directory for r-3.1.2.p0
Finished set up
****************************************************
Host system:
Darwin MacBookPro-7831C1F266DE.local 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/buck/trees/mine/sage/local/libexec/gcc/x86_64-apple-darwin14.3.0/4.9.2/lto-wrapper
Target: x86_64-apple-darwin14.3.0
Configured with: ../src/configure --prefix=/Users/buck/trees/mine/sage/local --with-local-prefix=/Users/buck/trees/mine/sage/local --with-gmp=/Users
/buck/trees/mine/sage/local --with-mpfr=/Users/buck/trees/mine/sage/local --with-mpc=/Users/buck/trees/mine/sage/local --with-system-zlib --disable-
multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm --without-isl --without-cloog
Thread model: posix
gcc version 4.9.2 (GCC)
****************************************************
Copying fake java and javac compiler on OS X
Configuring R without ATLAS for OS X
patching file src/scripts/R.sh.in
patching file configure
<snip>
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib     -fPIC  -
g -O2   -c devQuartz.c -o devQuartz.o
In file included from /usr/include/Availability.h:153:0,
                 from /usr/include/stdio.h:65,
                 from ../../../../include/Rinternals.h:37,
                 from ../../../include/Defn.h:80,
                 from devQuartz.c:30:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: error: expected ',' or '}' before '__attr
ibute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
                                         ^
<snip>
```



---

Comment by vbraun created at 2015-04-20 19:32:51

Did you compile from scratch (make distclean && make)?


---

Comment by jhpalmieri created at 2015-04-20 20:13:27

I know you weren't asking me, but a further data point: I did not compile from scratch. On one machine, I had updated to OS X 10.10.3 and the most recent Xcode, and I got this error. On a second machine, I just updated to OS X 10.10.3 but did not update Xcode, and I was able to install R (with `sage -f r`) successfully. Now on that same machine I'm also trying a build from scratch, but from the experiments so far, it really looks like a manifestation of a problem with the most recent Xcode.

Note that I have not yet tried upgrading Xcode and then downgrading it.


---

Comment by buck created at 2015-04-20 22:24:52

I've made distclean, and still get the same dang behavior D:


```
Found local metadata for r-3.1.2.p0
Found local sources at /Users/buck/trees/mine/sage/upstream/r-3.1.2.tar.gz
Checksum: 93809368e5735a630611633ac1fa99010020c5d6 vs 93809368e5735a630611633ac1fa99010020c5d6
r-3.1.2.p0
====================================================
Setting up build directory for r-3.1.2.p0
Finished set up
****************************************************
Host system:
Darwin 140-sfoeng50-54.clients.corp.yelpcorp.com 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~
5/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/buck/trees/mine/sage/local/libexec/gcc/x86_64-apple-darwin14.3.0/4.9.2/lto-wrapper
Target: x86_64-apple-darwin14.3.0
Configured with: ../src/configure --prefix=/Users/buck/trees/mine/sage/local --with-local-prefix=/Users/buck/trees/mine/sage/local --wit
h-gmp=/Users/buck/trees/mine/sage/local --with-mpfr=/Users/buck/trees/mine/sage/local --with-mpc=/Users/buck/trees/mine/sage/local --wit
h-system-zlib --disable-multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm --without-isl --without-cloog
Thread model: posix
gcc version 4.9.2 (GCC)
****************************************************
Copying fake java and javac compiler on OS X
Configuring R without ATLAS for OS X
<snip>
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib
    -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
In file included from /usr/include/Availability.h:153:0,
                 from /usr/include/stdio.h:65,
                 from ../../../../include/Rinternals.h:37,
                 from ../../../include/Defn.h:80,
                 from devQuartz.c:30:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: 
error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
```



---

Comment by jhpalmieri created at 2015-04-20 22:37:10

Whereas I downloaded a fresh 6.7.beta1 tarball and built it successfully on the machine running OS X 10.10.3 and Xcode 6.2. On another machine on which I've installed Xcode 6.3, I may try downgrading that to see if I can build there.


---

Comment by buck created at 2015-04-20 22:50:16

I asked gcc for an expansion of the file in question and got this:


```
# 309 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h" 3
enum {
  kFSEventStreamEventFlagNone = 0x00000000,
# 330 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h" 3
  kFSEventStreamEventFlagMustScanSubDirs = 0x00000001,
# 345 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h" 3
  kFSEventStreamEventFlagUserDropped = 0x00000002,
<snip>
  kFSEventStreamEventFlagItemIsSymlink = 0x00040000,
  kFSEventStreamEventFlagOwnEvent = 0x00080000,
  kFSEventStreamEventFlagItemIsHardlink __attribute__((weak_import)) = 0x00100000,
  kFSEventStreamEventFlagItemIsLastHardlink __attribute__((weak_import)) = 0x00200000,
};
```


`@`jhpalmieri Show me what you get for this command?

`gcc -E /System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h | grep kFSEventStreamEventFlagNone -B20 -A150 | grep -v '^$' | sed -n '/enum {/,/}/p'`


---

Comment by buck created at 2015-04-20 23:45:30

Unsetting `MACOSX_DEPLOYMENT_TARGET` makes the .o file build fine...

Reproduction procedure:


```
cd 'local/var/tmp/sage/build/r-3.1.2.p0' && '../../../../../../sage' --sh
cd src/src/library/grDevices/src
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
#syntax error explosion
env | grep MACOSX
#MACOSX_DEPLOYMENT_TARGET=10.9
unset MACOSX_DEPLOYMENT_TARGET
env | grep MACOSX
#no output
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/extra/zlib -fPIC  -g -O2   -c devQuartz.c -o devQuartz.o
#several warnings, but no error
```



---

Comment by jhpalmieri created at 2015-04-21 00:08:07

Replying to [comment:21 buck]:
> `@`jhpalmieri Show me what you get for this command?
> 
> `gcc -E /System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h | grep kFSEventStreamEventFlagNone -B20 -A150 | grep -v '^$' | sed -n '/enum {/,/}/p'`

```
enum {
  kFSEventStreamEventFlagNone = 0x00000000,
# 330 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagMustScanSubDirs = 0x00000001,
# 345 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagUserDropped = 0x00000002,
  kFSEventStreamEventFlagKernelDropped = 0x00000004,
  kFSEventStreamEventFlagEventIdsWrapped = 0x00000008,
# 367 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagHistoryDone = 0x00000010,
# 380 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagRootChanged = 0x00000020,
# 395 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagMount = 0x00000040,
# 408 "/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h"
  kFSEventStreamEventFlagUnmount = 0x00000080,
  kFSEventStreamEventFlagItemCreated __attribute__((availability(macosx,introduced=10.7))) = 0x00000100,
  kFSEventStreamEventFlagItemRemoved __attribute__((availability(macosx,introduced=10.7))) = 0x00000200,
  kFSEventStreamEventFlagItemInodeMetaMod __attribute__((availability(macosx,introduced=10.7))) = 0x00000400,
  kFSEventStreamEventFlagItemRenamed __attribute__((availability(macosx,introduced=10.7))) = 0x00000800,
  kFSEventStreamEventFlagItemModified __attribute__((availability(macosx,introduced=10.7))) = 0x00001000,
  kFSEventStreamEventFlagItemFinderInfoMod __attribute__((availability(macosx,introduced=10.7))) = 0x00002000,
  kFSEventStreamEventFlagItemChangeOwner __attribute__((availability(macosx,introduced=10.7))) = 0x00004000,
  kFSEventStreamEventFlagItemXattrMod __attribute__((availability(macosx,introduced=10.7))) = 0x00008000,
  kFSEventStreamEventFlagItemIsFile __attribute__((availability(macosx,introduced=10.7))) = 0x00010000,
  kFSEventStreamEventFlagItemIsDir __attribute__((availability(macosx,introduced=10.7))) = 0x00020000,
  kFSEventStreamEventFlagItemIsSymlink __attribute__((availability(macosx,introduced=10.7))) = 0x00040000,
  kFSEventStreamEventFlagOwnEvent __attribute__((availability(macosx,introduced=10.9))) = 0x00080000
};
enum {
    kFSEventStreamEventIdSinceNow = 0xFFFFFFFFFFFFFFFFULL
};
```



---

Comment by buck created at 2015-04-21 00:13:53

Replying to [comment:23 jhpalmieri]:
> Replying to [comment:21 buck]:
> > `@`jhpalmieri Show me what you get for this command?
> > 
> > `gcc -E /System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h | grep kFSEventStreamEventFlagNone -B20 -A150 | grep -v '^$' | sed -n '/enum {/,/}/p'`
> {{{
> enum {
>   kFSEventStreamEventFlagOwnEvent __attribute__((availability(macosx,introduced=10.9))) = 0x00080000
> };
> }}}

This looks entirely different from mine. Describe this environment for me? It looks like 10.9.


---

Comment by jhpalmieri created at 2015-04-21 01:08:32

It is running 10.10, according to "About my Mac" and `uname`:

```
$ uname -v
Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64
```

I have Xcode 6.2. No homebrew or anything similar. What else would you like to know?


---

Comment by jhpalmieri created at 2015-04-21 05:27:38

Do you have Xcode installed, or just the command line tools? Here's what happened on one machine:

- I had Xcode 6.3 installed. Sage would not build and I saw the above error.
- I downloaded the older version of the command-line tools, installed it, and tried again. Still no luck.
- Then I deleted the Xcode app and things now work.

So try deleting the Xcode app and see if that helps.


---

Comment by vbraun created at 2015-04-21 12:25:26

Also note that xcode and clt (command line tools) are separate packages and you can easily have different versions installed...


---

Comment by jhpalmieri created at 2015-04-21 16:37:55

Replying to [comment:27 vbraun]:
> Also note that xcode and clt (command line tools) are separate packages and you can easily have different versions installed...

Although in my case, it seems that there is some shadowing (if that is the right word) if you have Xcode 6.3 and an earlier version of the command line tools.


---

Comment by buck created at 2015-04-21 17:12:21

`@`vbraun: Where's the ticket that induced you (plural) to twiddle the `MACOSX_DEPLOYMENT_TARGET` ?


---

Comment by buck created at 2015-04-21 17:24:50

It's this one: http://trac.sagemath.org/ticket/17204

That ticket doesn't describe how to reproduce the relevant issue, or how to check my libtool version. The version I find doesn't seem to be in the same scheme as the one mentioned (2.4.3).

```
$ libtool -V
Apple Inc. version cctools-862
```


I'm interested because this patch *seems to* work, and I'm trying to see if I've thereby regressed #17204:


```diff
diff --git a/src/bin/sage-env b/src/bin/sage-env
index 43f265b..8b26eda 100644
--- a/src/bin/sage-env
+++ b/src/bin/sage-env
@@ -268,17 +268,10 @@ fi

 # Mac OS X-specific setup
 if [ `uname` = "Darwin" ]; then
-    # set MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can
+    # unset MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can
     # cause lots of random "Abort trap" issues on OSX. see trac
     # #7095 for an example.
-    MACOSX_VERSION=`uname -r | awk -F. '{print $1}'`
-    MACOSX_DEPLOYMENT_TARGET=10.$[$MACOSX_VERSION-4]
-    if [ $MACOSX_DEPLOYMENT_TARGET = '10.10' ]; then
-        # Workaround for the libtool version detection bug
-        # See http://trac.sagemath.org/ticket/17204
-        MACOSX_DEPLOYMENT_TARGET=10.9
-    fi
-    export MACOSX_DEPLOYMENT_TARGET
+    unset MACOSX_DEPLOYMENT_TARGET
 fi

 # Compile-time path for libraries.  This is the equivalent of
```



---

Comment by buck created at 2015-04-21 17:29:43

It seems like this bug has the reproduction information I was looking for: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63610

Because I was able to `make distclean && make` with no issues whatsoever, I think the libtool problem is gone, and the workaround should be removed, since it is the source of this bug at hand.


---

Comment by buck created at 2015-04-21 17:40:34

Sorry for the spam, but I keep learning things. =X

Even if the libtool issue still exists, the above patch would avoid it.
It's an implementation of the alternative workaround suggested by gcc dev Jack Howarth at https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63610#c9


---

Comment by buck created at 2015-04-21 17:52:30

New commits:


---

Comment by vbraun created at 2015-04-21 18:34:00

There is nothing bogus about setting an earlier MACOSX_DEPLOYMENT_TARGET, its commonly used to make binaries that *in addition* run on older versions. 

Autotool-based projects are supposed to ship their own copy of libtool, not use the system libtool.


---

Comment by buck created at 2015-04-21 18:47:21

Well... that patch is bogus then.

It's still mysterious that unsetting it "solves" this problem.


---

Comment by vbraun created at 2015-04-22 00:06:42

Have you tried an earlier MACOSX_DEPLOYMENT_TARGET, maybe 10.8? We just have to find a combination that circumvents all bugs in Xcode...


---

Comment by buck created at 2015-04-22 04:11:47

I tried with `MACOSX_DEPLOYMENT_TARGET=10.10` and got a segfault, so I guess that bug is still around.

Why is `unset MACOSX_DEPLOYMENT_TARGET` a non-starter? 

I'll try 10.8...


---

Comment by buck created at 2015-04-22 04:19:38

I've verified that anything other than `MACOSX_DEPLOYMENT_TARGET=10.10` throws the OP error.

Can I change the if-10.10 to do an unset?


---

Comment by buck created at 2015-04-22 04:35:19

I've pared it down to this minimal reproduction:


```
$ echo '#include <ApplicationServices/ApplicationServices.h>' | MACOSX_DEPLOYMENT_TARGET=10.10 gcc -c -xc -
(it works, no output)

$ echo '#include <ApplicationServices/ApplicationServices.h>' | MACOSX_DEPLOYMENT_TARGET=10.9 gcc -c -xc -
In file included from /usr/include/Availability.h:153:0,
                 from /System/Library/Frameworks/ApplicationServices.framework/Headers/ApplicationServices.h:19,
                 from <stdin>:1:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
                                         ^
```



---

Comment by buck created at 2015-04-22 05:08:48

This only reproduces with GNU gcc, not with /usr/bin/gcc.

gcc bug?


---

Comment by buck created at 2015-04-22 05:17:14

Even-more-minimal reproduction:


```
$ echo 'enum {a = 1, b __attribute__((availability(macosx,introduced=10.10))) = 1};' | /usr/bin/gcc -c -xc -
(no output, it works)

$ echo 'enum {a = 1, b __attribute__((availability(macosx,introduced=10.10))) = 1};' | gcc -c -xc -
<stdin>:1:16: error: expected ',' or '}' before '__attribute__'
```



---

Comment by jhpalmieri created at 2015-04-22 06:00:13

On a machine running 10.10.3 and Xcode 6.2, if I use `unset MACOSX_DEPLOYMENT_TARGET`, Sage builds but I get a lot of doctest errors:

```
----------------------------------------------------------------------
sage -t --long src/sage/plot/graphics.py  # Killed due to abort
sage -t --long src/sage/matrix/matrix2.pyx  # Killed due to abort
sage -t --long src/sage/schemes/elliptic_curves/height.py  # Killed due to abort
sage -t --long src/sage/crypto/mq/sr.py  # 5 doctests failed
sage -t --long src/sage/libs/ppl.pyx  # Killed due to abort
sage -t --long src/sage/symbolic/integration/integral.py  # Killed due to abort
sage -t --long src/sage/schemes/projective/projective_morphism.py  # Killed due to abort
sage -t --long src/sage/modular/modsym/ambient.py  # Killed due to abort
sage -t --long src/sage/schemes/elliptic_curves/ell_finite_field.py  # Killed due to abort
sage -t --long src/sage/functions/prime_pi.pyx  # Killed due to abort
sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # Killed due to abort
sage -t --long src/sage/tests/french_book/calculus_doctest.py  # Killed due to abort
sage -t --long src/sage/interfaces/maxima_lib.py  # Killed due to abort
sage -t --long src/sage/coding/code_constructions.py  # Killed due to abort
sage -t --long src/sage/groups/generic.py  # Killed due to abort
sage -t --long src/sage/matrix/matrix_modn_dense_template.pxi  # Killed due to abort
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # 1 doctest failed
sage -t --long src/sage/matrix/matrix_cyclo_dense.pyx  # Killed due to abort
sage -t --long src/sage/calculus/functional.py  # Killed due to abort
sage -t --long src/doc/en/thematic_tutorials/coding_theory.rst  # Killed due to abort
sage -t --long src/sage/functions/min_max.py  # Killed due to abort
sage -t --long src/sage/rings/polynomial/pbori.pyx  # Killed due to abort
sage -t --long src/sage/rings/algebraic_closure_finite_field.py  # Killed due to abort
sage -t --long src/sage/functions/trig.py  # Killed due to abort
sage -t --long src/doc/de/tutorial/tour_advanced.rst  # Killed due to abort
sage -t --long src/doc/en/tutorial/tour_advanced.rst  # Killed due to abort
sage -t --long src/doc/ru/tutorial/tour_advanced.rst  # Killed due to abort
sage -t --long src/sage/modular/modsym/modsym.py  # Killed due to abort
sage -t --long src/doc/pt/tutorial/tour_advanced.rst  # Killed due to abort
sage -t --long src/doc/fr/tutorial/tour_advanced.rst  # Killed due to abort
sage -t --long src/sage/modular/abvar/homology.py  # Killed due to abort
sage -t --long src/sage/symbolic/function.pyx  # Killed due to abort
sage -t --long src/sage/algebras/finite_dimensional_algebras/finite_dimensional_algebra.py  # Killed due to\
 abort
sage -t --long src/sage/tests/french_book/linalg_doctest.py  # Killed due to abort
sage -t --long src/sage/rings/finite_rings/element_base.pyx  # Killed due to abort
----------------------------------------------------------------------
```

A typical such error says

```
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```



---

Comment by buck created at 2015-04-22 06:13:00

`@`jhpalmieri That looks like the abort errors mentioned in sage-env. It says to look at #7095

One workaround is to configure R with `--with-aqua=no`, but I don't know if that's acceptable. I don't know what aqua is or what R might use it for.


---

Comment by vbraun created at 2015-04-22 12:10:40

I'm pretty sure that some old libtool versions still linger in third-party tarballs, so we'll need MACOSX_DEPLOYMENT_TARGET <= 10.9 for a while.


---

Comment by vbraun created at 2015-04-22 12:26:10

Disabling aqua (=OSX gui), at least until Apple publishes a working Xcode, is fine with me.


---

Comment by jhpalmieri created at 2015-04-22 17:28:04

I'm confused about the goal here. As far as I can tell, if you have Xcode 6.3, Sage won't build, and the problem won't be with `R`, but with `gcc`. If you delete Xcode 6.3 and install version 6.2 of the command-line tools, Sage will build. Is this reproducible by anyone else? If so, what problem are we trying to solve with this ticket?


---

Comment by buck created at 2015-04-22 17:45:36

You're mistaken. I've been running 6.2 this whole time.


---

Comment by buck created at 2015-04-22 17:48:03

I wish any of you were on IRC. This would all go so much more quickly.


---

Attachment

my xcode and clt versions


---

Comment by jhpalmieri created at 2015-04-22 18:11:43

The next question is whether anyone else can replicate your problems. By the way, does it help to delete the Xcode app and just install the command-line tools (via the link described in the top-voted answer to http://stackoverflow.com/questions/29529455/missing-c-header-debug-after-updating-osx-command-line-tools-6-3)?

Edit: you originally had installed Xcode 6.3. I wonder if there are any traces of that left somewhere?


---

Comment by jhpalmieri created at 2015-04-24 18:35:04

With the change

```diff
diff --git a/build/pkgs/r/spkg-install b/build/pkgs/r/spkg-install
index 2bb904d..4bad9c8 100755
--- a/build/pkgs/r/spkg-install
+++ b/build/pkgs/r/spkg-install
@@ -84,6 +84,13 @@ if [ "$UNAME" = "Darwin" ]; then
     R_CONFIGURE="--enable-R-framework=no $R_CONFIGURE"
 fi
 
+# OS X 10.10 and/or Xcode 6.3 broke the R installation. See
+# http://trac.sagemath.org/ticket/18254.
+if { uname -sr | grep 'Darwin 14\.' ;} &>/dev/null; then
+    echo "OS X 10.10: Configuring R without aqua support."
+    R_CONFIGURE="--with-aqua=no $R_CONFIGURE"
+fi
+
 if [ "$UNAME" = "CYGWIN" ]; then
     # Cygwin libm does not provide "long double" functions
     # and we do not install Cephes on Cygwin at the moment
```

along with the workaround for gcc at #18156, `R` builds and passes its test suite, and Sage passes all tests, too. (This is with command line tools 6.3.1.)


---

Comment by vbraun created at 2015-04-24 21:58:01

There is a new R release at #18229, does it change anything?


---

Comment by jhpalmieri created at 2015-04-24 22:56:15

Replying to [comment:52 vbraun]:
> There is a new R release at #18229, does it change anything?

Yes. Without the change here, I get the same failure. With the change here, I get a new failure:

```
gcc -std=gnu99 -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/include -DNDEBUG      -fPIC  -g -O2   -c init.c -o init.o
gcc -std=gnu99 -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/include -DNDEBUG      -fPIC  -g -O2   -c threeDplot.c -o threeDplot.o
gcc -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/lib -L/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/ -o lattice.so init.o threeDplot.o -L/Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/lib -lR -Wl,-framework -Wl,CoreFoundation
installing to /Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/library/lattice/libs
** R
** data
*** moving datasets to lazyload DB
dyld: lazy symbol binding failed: Symbol not found: _BZ2_bzReadOpen
  Referenced from: /Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/lib/libR.dylib
  Expected in: flat namespace

dyld: Symbol not found: _BZ2_bzReadOpen
  Referenced from: /Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/lib/libR.dylib
  Expected in: flat namespace

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/var/tmp/sage/build/r-3.2.0.p0/src/bin/INSTALL: line 34:  9807 Done                    echo 'tools:::.install_packages()'
      9808 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES= LC_COLLATE=C "${R_HOME}/bin/R" $myArgs --slave --args ${args}
make[5]: *** [lattice.ts] Error 1
make[4]: *** [recommended-packages] Error 2
make[3]: *** [stamp-recommended] Error 2
Error building vignettes.
```



---

Comment by fbissey created at 2015-04-25 11:22:42

Got there too. Like in #18254 libR.dylib is underlinked but somehow R.bin linked OK.

```
 otool -L /Users/fbissey/build/sage-6.6.beta5/local/var/tmp/sage/build/r-3.2.0.p0/src/lib/libR.dylib
/Users/fbissey/build/sage-6.6.beta5/local/var/tmp/sage/build/r-3.2.0.p0/src/lib/libR.dylib:
	libR.dylib (compatibility version 3.2.0, current version 3.2.0)
	libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libgfortran.3.dylib (compatibility version 4.0.0, current version 4.0.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libquadmath.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1153.18.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libreadline.6.dylib (compatibility version 6.0.0, current version 6.3.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.8)
	/usr/lib/libicucore.A.dylib (compatibility version 1.0.0, current version 53.1.0)
	/usr/lib/libiconv.2.dylib (compatibility version 7.0.0, current version 7.0.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libgomp.1.dylib (compatibility version 2.0.0, current version 2.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1213.0.0)
	/Users/fbissey/build/sage-6.6.beta5/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
```

libbz2 is missing. A gross hack that should get us past this would be to configure with `--without-system-bzlib` to force the use of the internal copy but it is quite curious we miss that linking on some platforms.


---

Comment by fbissey created at 2015-04-25 11:58:51

`--without-system-bzlib` did the trick. I also noticed that with r-3.1.2 bzip2 was not properly detected during configuration on my mac and therefore the internal copy was used in that case too.


---

Comment by jhpalmieri created at 2015-04-25 19:33:58

That works for me, too. All tests pass.


---

Comment by buck created at 2015-04-26 03:55:16

Let's make the new R version and its attendant patch a separate issue and ship the patch shown in comment:51.


---

Comment by buck created at 2015-04-26 04:08:14

New commits:


---

Comment by git created at 2015-04-26 04:08:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by buck created at 2015-04-26 04:14:59

As for upstream, I've gotten some good response on the osx-dev forums:

https://devforums.apple.com/message/1128923#1128923

tl;dr: Fixing this upstream involves enhancements to one of both gcc and clang:
    * clang: the macros in Availability.h need an "ENUM" variant (like we have for the CF and NS availability macros) to cover this case
    * gcc: implement clang's extension http://clang.llvm.org/docs/LanguageExtensions.html#attributes-on-enumerators


---

Comment by buck created at 2015-04-26 04:50:32

Apple says they don't care about GNU-gcc bugs. Is there a good reason to use gnu-gcc for all of this?


```
Apple Developer Relations24-Apr-2015 02:40 PM
 
Engineering has determined that this is an issue for a third party to resolve.

We do not support GNU gcc.

If you have questions regarding the resolution of this issue, please update your bug report with them.

We are closing this report.

Please be sure to regularly check new Apple releases for any updates that might affect this issue.
 
Buck Golemon21-Apr-2015 10:54 PM
 
This is related to the fact that clang supports "enumeration attributes" but GNU gcc does not.
http://clang.llvm.org/docs/LanguageExtensions.html#attributes-on-enumerators
https://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html#Attribute-Syntax

I've opened a public question on the matter at: http://stackoverflow.com/questions/29788547/gcc-attribute-for-enum-members
 
Buck Golemon21-Apr-2015 10:03 PM
 
Summary:
Under GNU gcc, there's a syntax error in ApplicationServices.h if $MACOSX_DEPLOYMENT_TARGET has any value less than 10.10.

Steps to Reproduce:
```
$ echo '#include <ApplicationServices/ApplicationServices.h>' | MACOSX_DEPLOYMENT_TARGET=10.10 gcc -c -xc -
(it works, no output)

$ echo '#include <ApplicationServices/ApplicationServices.h>' | MACOSX_DEPLOYMENT_TARGET=10.9 gcc -c -xc -
In file included from /usr/include/Availability.h:153:0,
                 from /System/Library/Frameworks/ApplicationServices.framework/Headers/ApplicationServices.h:19,
                 from <stdin>:1:
/System/Library/Frameworks/CoreServices.framework/Frameworks/FSEvents.framework/Headers/FSEvents.h:486:41: error: expected ',' or '}' before '__attribute__'
   kFSEventStreamEventFlagItemIsHardlink __OSX_AVAILABLE_STARTING(__MAC_10_10, __IPHONE_9_0) = 0x00100000,
                                         ^
```


Expected Results:
successful compilation

Actual Results:
compilation fails with a syntax error

Version:
osx 10.10.3 (14D131)
xcode Version 6.2 (6C131e)
gcc --version: gcc (GCC) 4.9.2

Notes:
Downstream ticket: http://trac.sagemath.org/ticket/18254

Configuration:


Attachments:

```



---

Comment by fbissey created at 2015-04-26 06:09:25

Summary of why we use gcc instead of clang.
 * We need a fortran compiler so we build gcc anyway
 * A lot of packages shipped with sage won't compile with clang
 * it is too hard to use clang for some and gcc for some other
 * some of the package broken with clang my be in the too hard basket

I expect one way or another most packages in sage will eventually compile with clang. I for one will work on this once gentoo-prefix on OS X finally gets its toolchain issues sorted and default to clang.


---

Comment by jhpalmieri created at 2015-04-26 15:45:23

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2015-04-26 15:45:23

Let's merge this. The change was first suggested [comment:44 in comment 44], so I've made buck the author.


---

Comment by vbraun created at 2015-04-27 00:16:07

Merge or close as invalid? Can you set the milestone if you actually want to merge the branch?


---

Comment by jhpalmieri created at 2015-04-27 01:09:43

Sorry. I think you set the milestone a while ago, and no one reset it to match the new branch.


---

Comment by vbraun created at 2015-04-27 04:16:13

Resolution: fixed
