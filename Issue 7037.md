# Issue 7037: libm4ri thinks the C compiler is broken

Issue created by migration from https://trac.sagemath.org/ticket/7037

Original creator: drkirkby

Original creation time: 2009-09-27 15:40:28

Assignee: tbd

Using

    * Solaris 10 update 7 on SPARC
    * sage-4.1.2.alpha2
    * Sun Studio 12.1
    * An updated configure script to allow the Sun compiler to be used http://sagetrac.org/sage_trac/ticket/7021 

CC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:


```
checking for style of include used by make... GNU
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name...
configure: error: in `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/libm4ri-20090617/src':
configure: error: C compiler cannot create executables
See `config.log' for more details.
Error configuring libm4ri
```



---

Comment by malb created at 2009-11-18 15:53:32

Can you provide the config.log?


---

Comment by drkirkby created at 2009-11-18 16:18:27

I will do. I can't immediately, as 

 * I'm not at home, and the machine with Sun Studio is power not on. 

It will take me some time to reach the point of failure. I'll try phoning my wife and getting the machine put on, then try a build. 

Dave


---

Comment by drkirkby created at 2009-11-18 17:01:15

I rang my wife, who booted up the Blade 2000 - the only SPARC machine I have able to build Sage in a semi-sensible time frame. 

I started a build, using the Sun compilers, and done a grep on install.log on 4 lines, which are generated by various configure scripts. All report below the C compiler works, has a default output of a.out, is not the GNU compiler etc. You can see the output is very different with M4RI. I need to go out now, but later will show the output of M4RI and attach config.log. 

Sorry must go now. 




```
drkirkby@swan:[~/sage-4.2] $ egrep "checking whether we are using the GNU C compiler|checking whether the C compiler works|checking for gcc|checking for C compiler default output file" install.log
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... (cached) /opt/xxxsunstudio12.1/bin/cc
checking whether we are using the GNU C compiler... (cached) no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
```



---

Comment by drkirkby created at 2009-11-23 00:53:31

I report this to Martin Albrecht  - see #7375 for a discussion. We finally got a solution to this, so a fix should soon be in Sage.


---

Comment by mhansen created at 2009-11-29 05:28:00

Resolution: fixed


---

Comment by mhansen created at 2009-11-29 05:28:00

Fixed by #7375.
