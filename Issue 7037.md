# Issue 7037: libm4ri thinks the C compiler is broken

archive/issues_007037.json:
```json
{
    "body": "Assignee: tbd\n\nUsing\n\n* Solaris 10 update 7 on SPARC\n* sage-4.1.2.alpha2\n* Sun Studio 12.1\n* An updated configure script to allow the Sun compiler to be used http://sagetrac.org/sage_trac/ticket/7021 \n\nCC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:\n\n\n```\nchecking for style of include used by make... GNU\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name...\nconfigure: error: in `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/libm4ri-20090617/src':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details.\nError configuring libm4ri\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/7037\n\n",
    "created_at": "2009-09-27T15:40:28Z",
    "labels": [
        "build",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3",
    "title": "libm4ri thinks the C compiler is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7037",
    "user": "drkirkby"
}
```
Assignee: tbd

Using

* Solaris 10 update 7 on SPARC
* sage-4.1.2.alpha2
* Sun Studio 12.1
* An updated configure script to allow the Sun compiler to be used http://sagetrac.org/sage_trac/ticket/7021 

CC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:


```
checking for style of include used by make... GNU
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name...
configure: error: in `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/libm4ri-20090617/src':
configure: error: C compiler cannot create executables
See `config.log' for more details.
Error configuring libm4ri
```


Issue created by migration from https://trac.sagemath.org/ticket/7037





---

archive/issue_comments_058262.json:
```json
{
    "body": "Can you provide the config.log?",
    "created_at": "2009-11-18T15:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58262",
    "user": "malb"
}
```

Can you provide the config.log?



---

archive/issue_comments_058263.json:
```json
{
    "body": "I will do. I can't immediately, as \n\n* I'm not at home, and the machine with Sun Studio is power not on. \n\nIt will take me some time to reach the point of failure. I'll try phoning my wife and getting the machine put on, then try a build. \n\nDave",
    "created_at": "2009-11-18T16:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58263",
    "user": "drkirkby"
}
```

I will do. I can't immediately, as 

* I'm not at home, and the machine with Sun Studio is power not on. 

It will take me some time to reach the point of failure. I'll try phoning my wife and getting the machine put on, then try a build. 

Dave



---

archive/issue_comments_058264.json:
```json
{
    "body": "I rang my wife, who booted up the Blade 2000 - the only SPARC machine I have able to build Sage in a semi-sensible time frame. \n\nI started a build, using the Sun compilers, and done a grep on install.log on 4 lines, which are generated by various configure scripts. All report below the C compiler works, has a default output of a.out, is not the GNU compiler etc. You can see the output is very different with M4RI. I need to go out now, but later will show the output of M4RI and attach config.log. \n\nSorry must go now. \n\n\n\n\n```\ndrkirkby@swan:[~/sage-4.2] $ egrep \"checking whether we are using the GNU C compiler|checking whether the C compiler works|checking for gcc|checking for C compiler default output file\" install.log\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... (cached) /opt/xxxsunstudio12.1/bin/cc\nchecking whether we are using the GNU C compiler... (cached) no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\n```\n",
    "created_at": "2009-11-18T17:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58264",
    "user": "drkirkby"
}
```

I rang my wife, who booted up the Blade 2000 - the only SPARC machine I have able to build Sage in a semi-sensible time frame. 

I started a build, using the Sun compilers, and done a grep on install.log on 4 lines, which are generated by various configure scripts. All report below the C compiler works, has a default output of a.out, is not the GNU compiler etc. You can see the output is very different with M4RI. I need to go out now, but later will show the output of M4RI and attach config.log. 

Sorry must go now. 




```
drkirkby@swan:[~/sage-4.2] $ egrep "checking whether we are using the GNU C compiler|checking whether the C compiler works|checking for gcc|checking for C compiler default output file" install.log
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... (cached) /opt/xxxsunstudio12.1/bin/cc
checking whether we are using the GNU C compiler... (cached) no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
```




---

archive/issue_comments_058265.json:
```json
{
    "body": "I report this to Martin Albrecht  - see #7375 for a discussion. We finally got a solution to this, so a fix should soon be in Sage.",
    "created_at": "2009-11-23T00:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58265",
    "user": "drkirkby"
}
```

I report this to Martin Albrecht  - see #7375 for a discussion. We finally got a solution to this, so a fix should soon be in Sage.



---

archive/issue_comments_058266.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-11-29T05:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58266",
    "user": "mhansen"
}
```

Resolution: fixed



---

archive/issue_comments_058267.json:
```json
{
    "body": "Fixed by #7375.",
    "created_at": "2009-11-29T05:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7037#issuecomment-58267",
    "user": "mhansen"
}
```

Fixed by #7375.
