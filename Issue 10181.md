# Issue 10181: long doctest wrongly tagged "# long" instead of "#long time"

Issue created by migration from https://trac.sagemath.org/ticket/10182

Original creator: cremona

Original creation time: 2010-10-28 13:25:31

Assignee: mvngu

Keywords: doctest long tag

In plot/plot.py:

```
  sage: p = polar_plot(maple_leaf, -pi/4, 3*pi/2,color="red",plot_points=1000) #long
```

should be tagged "#long time"

This is one of many similar places;  the others will be put on a separate ticket,  This ticket should be very easy for a beginner to fix, since all they have to do is change "# long" to "# long time" in one file.

There should be timing tests before and after for testing this file with "sage -t", with and without "-long".


---

Attachment


---

Comment by damek created at 2010-11-04 19:51:39

Changing status from new to needs_review.


---

Comment by mvngu created at 2010-11-05 04:13:00

All instances of "#long" should be changed to "# long time". Here is a list of all places that need changing:


```
[mvngu@sage plot]$ pwd
/dev/shm/mvngu/sage-4.6.1.alpha0/devel/sage-main/sage/plot
[mvngu@sage plot]$ grep '#long' plot.py  
            sage: sum([plot(z*sin(x), 0, 10).plot3d(z) for z in range(6)]) #long
            sage: p = polar_plot(maple_leaf, -pi/4, 3*pi/2, color="red",plot_points=1000) #long
            sage: p.show(gridlines=( [-3,-2.75,..,3], xrange(-1,5,2) )) #long
```


This is using Sage 4.6.1.alpha0.


---

Comment by mvngu created at 2010-11-05 04:13:00

Changing status from needs_review to needs_work.


---

Attachment


---

Comment by damek created at 2010-11-05 04:42:57

Changing status from needs_work to needs_review.


---

Comment by cremona created at 2010-11-05 09:24:58

NB I deliberately put just one instance on this ticket and the others at #10183 (at mvngu's suggestion possibly?!) to make this ticket a one-liner for a beginner.

If the newst patch fixes lots more, that's great -- but then #10183 needs changing or even closing too.


---

Comment by benjaminfjones created at 2010-11-07 17:41:29

(first time reviewer)
I checked the patch using sage-4.6 built from source on Mac OS X 10.6.4). It looks good. I Checked the patched file plot.py, that looks good too. I checked the test times before and after patching:

Before patch:
sage -t  "devel/sage/sage/plot/plot.py"                     
         [61.5 s]
sage -t --long "devel/sage/sage/plot/plot.py"               
         [61.9 s]

After patch: 
sage -t  "devel/sage/sage/plot/plot.py"                     
         [51.2 s]
sage -t --long "devel/sage/sage/plot/plot.py"               
         [61.7 s]

So the changes had the desired effect, but I'll let someone more experienced look this over and change the ticket status if appropriate.


---

Comment by cremona created at 2010-11-07 17:58:11

Changing status from needs_review to positive_review.


---

Comment by cremona created at 2010-11-07 17:58:11

Sorry for my confusing post above;  it certainly makes sense to fix all three instances in this one file, which is exactly what the third patch does.

I checked that the patch applies cleanly to 4.6.1.alpha0 (it does) and that the before & after timings are similar to those reported by Benjamin.

I did not test any other files;  since no actual code was touched that is not necessary.

Hence a positive review!  I am putting "damek" as author as I don't know his/her real name (it is not at http://trac.sagemath.org/sage_trac) and Benjamin Jones as reviewer.


---

Comment by damek created at 2010-11-07 18:52:22

Benjamin,

Would you also like to review patch 10183? It is very similar to this patch. 

Damek


---

Comment by jdemeyer created at 2010-11-10 22:21:28

Resolution: fixed
