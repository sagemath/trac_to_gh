# Issue 23310: Add isl and barvinok packages

archive/issues_023310.json:
```json
{
    "body": "CC:  @videlec @mkoeppe vinklein\n\nSven Verdoolaege's [`isl`](http://isl.gforge.inria.fr/) and [`barvinok`](http://barvinok.gforge.inria.fr/) are excellent packages for lattice points in polytopes etc. \n\nPython bindings to `isl` are available:\n\nhttps://pypi.python.org/pypi/islpy\n\nIt can be installed into sage using pip. It will bring its own copy of `isl`. [Documentation](https://documen.tician.de/islpy/index.html)\n\nThe `islpy` package also claims  to provide bindings for `barvinok` (haven't tested).  To enable:\n\n```\n./sage -pip install --verbose --install-option --conf:'USE_BARVINOK=True' --install-option --conf:'USE_SHIPPED_ISL=False' --install-option --conf:'USE_SHIPPED_IMATH=False' islpy\n```\n\nTo do this, we would need `isl` and `barvinok` packages (or just `barvinok`, as \"Since release 0.30, the barvinok distribution includes the isl library.\") \n\nRelated Python library: [islplot](https://github.com/tobig/islplot)\n\nResources: \n- http://polycomp.gforge.inria.fr/\n\nIssue created by migration from https://trac.sagemath.org/ticket/23547\n\n",
    "created_at": "2017-07-29T04:40:52Z",
    "labels": [
        "packages: experimental",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Add isl and barvinok packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23310",
    "user": "@mkoeppe"
}
```
CC:  @videlec @mkoeppe vinklein

Sven Verdoolaege's [`isl`](http://isl.gforge.inria.fr/) and [`barvinok`](http://barvinok.gforge.inria.fr/) are excellent packages for lattice points in polytopes etc. 

Python bindings to `isl` are available:

https://pypi.python.org/pypi/islpy

It can be installed into sage using pip. It will bring its own copy of `isl`. [Documentation](https://documen.tician.de/islpy/index.html)

The `islpy` package also claims  to provide bindings for `barvinok` (haven't tested).  To enable:

```
./sage -pip install --verbose --install-option --conf:'USE_BARVINOK=True' --install-option --conf:'USE_SHIPPED_ISL=False' --install-option --conf:'USE_SHIPPED_IMATH=False' islpy
```

To do this, we would need `isl` and `barvinok` packages (or just `barvinok`, as "Since release 0.30, the barvinok distribution includes the isl library.") 

Related Python library: [islplot](https://github.com/tobig/islplot)

Resources: 
- http://polycomp.gforge.inria.fr/

Issue created by migration from https://trac.sagemath.org/ticket/23547





---

archive/issue_comments_326190.json:
```json
{
    "body": "Replying to [ticket:23547 mkoeppe]:\n> It will bring its own copy of `isl`.\n\nI don't think this is acceptable.",
    "created_at": "2017-07-29T08:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326190",
    "user": "@jdemeyer"
}
```

Replying to [ticket:23547 mkoeppe]:
> It will bring its own copy of `isl`.

I don't think this is acceptable.



---

archive/issue_comments_326191.json:
```json
{
    "body": "I succeeded installing the barvinok program in my Sage installation doing\n\n```\n$ git clone git://repo.or.cz/barvinok.git\n$ cd barvinok\n$ sage -sh\n(sage-sh) $ ./get_submodules.sh\n(sage-sh) $ sh autogen.sh\n(sage-sh) $ ./configure NTL_GMP_LIP=on --prefix=$SAGE_LOCAL --with-gmp-prefix=$SAGE_LOCAL --with-ntl-prefix=$SAGE_LOCAL\n(sage-sh) $ make\n(sage-sh) $ make install\n```\n\nI think that for cleaner packaging all submodules (isl, pet, polylib) should actually be independent packages.",
    "created_at": "2017-08-19T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326191",
    "user": "@videlec"
}
```

I succeeded installing the barvinok program in my Sage installation doing

```
$ git clone git://repo.or.cz/barvinok.git
$ cd barvinok
$ sage -sh
(sage-sh) $ ./get_submodules.sh
(sage-sh) $ sh autogen.sh
(sage-sh) $ ./configure NTL_GMP_LIP=on --prefix=$SAGE_LOCAL --with-gmp-prefix=$SAGE_LOCAL --with-ntl-prefix=$SAGE_LOCAL
(sage-sh) $ make
(sage-sh) $ make install
```

I think that for cleaner packaging all submodules (isl, pet, polylib) should actually be independent packages.



---

archive/issue_comments_326192.json:
```json
{
    "body": "Changing component from packages: experimental to packages: optional.",
    "created_at": "2018-11-13T20:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326192",
    "user": "@videlec"
}
```

Changing component from packages: experimental to packages: optional.



---

archive/issue_comments_326193.json:
```json
{
    "body": "With the current branch at `82f0f8afd6` I do obtain compilation errors. I might have done something wrong. Problem discussed on [isl-development mailing list](https://groups.google.com/forum/#!topic/isl-development/2u9L21TDGuQ).\n----\nNew commits:",
    "created_at": "2018-11-13T21:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326193",
    "user": "@videlec"
}
```

With the current branch at `82f0f8afd6` I do obtain compilation errors. I might have done something wrong. Problem discussed on [isl-development mailing list](https://groups.google.com/forum/#!topic/isl-development/2u9L21TDGuQ).
----
New commits:



---

archive/issue_comments_326194.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-11-16T13:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326194",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_326195.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-11-16T13:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326195",
    "user": "@videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_326196.json:
```json
{
    "body": "The three spkg-check does pass on my computer... more testing needed.",
    "created_at": "2018-11-16T13:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326196",
    "user": "@videlec"
}
```

The three spkg-check does pass on my computer... more testing needed.



---

archive/issue_comments_326197.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-11-16T13:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326197",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_326198.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-11-16T13:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326198",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_326199.json:
```json
{
    "body": "Ticket installed and compiled on OSX.\n\nThe output of barvinok tests is pretty strange with repetition of 'o' and '.' characters.\n\n\n```\n$ sage -f -c barvinok\n...\n[barvinok-0.41.1] ./tests/supporting1 --specialization=df --primal --index=10 ok\n[barvinok-0.41.1] ./tests/supporting1 --specialization=todd --primal --index=10 ok\n[barvinok-0.41.1] ./tests/supporting2 --specialization=random --index=10o.......ooooooooooooooooooooooooo ok................................\n[barvinok-0.41.1] ./tests/supporting2 --specialization=bf --index=10oooooooooooooooooooooooooooooooooooooooooo\n[barvinok-0.41.1]  ok\n[barvinok-0.41.1] ./tests/supporting2 --specialization=df --index=10./tests/ehrhart/g13.in\n[barvinok-0.41.1]  ok\n[barvinok-0.41.1] ./tests/supporting2 --specialization=todd --index=10..........ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\n[barvinok-0.41.1]  ok\n...\n```\n",
    "created_at": "2018-11-21T16:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326199",
    "user": "@vinklein"
}
```

Ticket installed and compiled on OSX.

The output of barvinok tests is pretty strange with repetition of 'o' and '.' characters.


```
$ sage -f -c barvinok
...
[barvinok-0.41.1] ./tests/supporting1 --specialization=df --primal --index=10 ok
[barvinok-0.41.1] ./tests/supporting1 --specialization=todd --primal --index=10 ok
[barvinok-0.41.1] ./tests/supporting2 --specialization=random --index=10o.......ooooooooooooooooooooooooo ok................................
[barvinok-0.41.1] ./tests/supporting2 --specialization=bf --index=10oooooooooooooooooooooooooooooooooooooooooo
[barvinok-0.41.1]  ok
[barvinok-0.41.1] ./tests/supporting2 --specialization=df --index=10./tests/ehrhart/g13.in
[barvinok-0.41.1]  ok
[barvinok-0.41.1] ./tests/supporting2 --specialization=todd --index=10..........ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
[barvinok-0.41.1]  ok
...
```




---

archive/issue_comments_326200.json:
```json
{
    "body": "Checks tests are successful for the three packages on OSX.",
    "created_at": "2018-11-21T16:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326200",
    "user": "@vinklein"
}
```

Checks tests are successful for the three packages on OSX.



---

archive/issue_comments_326201.json:
```json
{
    "body": "Installation tested on Ubuntu 16.04. `sage -f -c barvinok` works. Positive review.",
    "created_at": "2018-11-21T23:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326201",
    "user": "@seblabbe"
}
```

Installation tested on Ubuntu 16.04. `sage -f -c barvinok` works. Positive review.



---

archive/issue_comments_326202.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-21T23:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326202",
    "user": "@seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_326203.json:
```json
{
    "body": "Bravo! Merci!",
    "created_at": "2018-11-22T09:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326203",
    "user": "@videlec"
}
```

Bravo! Merci!



---

archive/issue_comments_326204.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-23T21:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326204",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_326205.json:
```json
{
    "body": "Note that `isl>=0.20` breaks compiling of `gcc` (fix in #26735), so this presumably makes `make isl && make gcc` fail, even on computers with system `isl<0.20`. (I have system `isl=0.20` already, so I can't test that this is the case.)",
    "created_at": "2018-11-26T00:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23310#issuecomment-326205",
    "user": "@Konrad127123"
}
```

Note that `isl>=0.20` breaks compiling of `gcc` (fix in #26735), so this presumably makes `make isl && make gcc` fail, even on computers with system `isl<0.20`. (I have system `isl=0.20` already, so I can't test that this is the case.)
