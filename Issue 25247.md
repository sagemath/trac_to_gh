# Issue 25247: abs dramatically wrong on real ball

Issue created by migration from https://trac.sagemath.org/ticket/25484

Original creator: vdelecroix

Original creation time: 2018-05-31 15:53:18

CC:  tmonteil mmezzarobba

Keywords: MathExp2018


```
sage: RBF(0.0, 0.1).abs().endpoints()
(-0.100000000093133, 0.100000000093133)
```


There is a global `abs` inherited from `Element` that calls the Python `abs`...


---

Comment by mmezzarobba created at 2018-05-31 17:52:22

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2018-05-31 17:52:22

What is wrong here? That's a correct result!

And:

```
~/docs/vrac/c$ cat arb_abs.c 
#include <stdio.h>
#include <arb.h>

int main(void) {
    arb_t a;
    arb_init(a);
    arb_set_str(a, "0.0 +/- 0.1", 53);
    arb_print(a); putchar('\n');
    arb_abs(a, a);
    arb_print(a); putchar('\n');
    arb_clear(a);
    exit(0);
}
~/docs/vrac/c$ gcc arb_abs.c -lflint-arb && ./a.out
(0) +/- (858993461 * 2^-33)
(0) +/- (858993461 * 2^-33)
```



---

Comment by vdelecroix created at 2018-06-01 07:10:38

Why the result of `arb_abs` not non-negative? In the extreme case presented in the ticket description, the radius can be divided by 2... and the behavior is annoying if you have to compute e.g. L1-norm.


---

Comment by mmezzarobba created at 2018-06-01 07:47:36

Replying to [comment:2 vdelecroix]:
> Why the result of `arb_abs` not non-negative?

Ask Fredrik! But taking the absolute value of the center and leaving the radius untouched looks very reasonable to me...

> In the extreme case presented in the ticket description, the radius can be divided by 2... and the behavior is annoying if you have to compute e.g. L1-norm.

Use `above_abs()`.


---

Comment by vdelecroix created at 2018-06-01 07:56:11

Changing status from needs_review to needs_work.


---

Comment by mmezzarobba created at 2018-09-27 07:25:38

Replying to [ticket:25484 vdelecroix]:
> The function `above_abs` and `below_abs` are close to what should be used in this context (but they are not returning balls).

Yes they are.
