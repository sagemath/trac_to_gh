# Issue 17200: integer arrays

archive/issues_017200.json:
```json
{
    "body": "CC:  bransingh @KPanComputes mkamalakshya @tscrim\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17437\n\n",
    "created_at": "2014-12-03T06:20:10Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "integer arrays",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17200",
    "user": "https://github.com/amritanshu-prasad"
}
```
CC:  bransingh @KPanComputes mkamalakshya @tscrim



Issue created by migration from https://trac.sagemath.org/ticket/17437





---

archive/issue_comments_228474.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-12-04T02:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228474",
    "user": "https://github.com/kcrisman"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_228475.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2014-12-04T02:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228475",
    "user": "https://github.com/kcrisman"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_228476.json:
```json
{
    "body": "Hey Amri!  Can you describe what exactly this is and why we need it?  What I mean is what situation this is helpful for.\n\nI'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?  Also, I feel like this should be much more general - maybe a class of such things or something.  Not to mention categories ;-) though I won't tell you aren't using them if you don't.\n----\nNew commits:",
    "created_at": "2014-12-04T02:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228476",
    "user": "https://github.com/kcrisman"
}
```

Hey Amri!  Can you describe what exactly this is and why we need it?  What I mean is what situation this is helpful for.

I'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?  Also, I feel like this should be much more general - maybe a class of such things or something.  Not to mention categories ;-) though I won't tell you aren't using them if you don't.
----
New commits:



---

archive/issue_comments_228477.json:
```json
{
    "body": "Set assignee to @amritanshu-prasad.",
    "created_at": "2014-12-04T03:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228477",
    "user": "https://github.com/amritanshu-prasad"
}
```

Set assignee to @amritanshu-prasad.



---

archive/issue_comments_228478.json:
```json
{
    "body": "Changing keywords from \"\" to \"integer arrays\".",
    "created_at": "2014-12-04T03:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228478",
    "user": "https://github.com/amritanshu-prasad"
}
```

Changing keywords from "" to "integer arrays".



---

archive/issue_comments_228479.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]: This is really really preliminary. I have very rough working python code with me, which I am trying to adapt for Sage. I put it up here so that some others (mentioned in the cc:) can also help me.\n\nSome of the things here are really general (like accessing entries from lists of lists of ... of lists), so maybe they should be implemented more generally. Other stuff (like the enumerator) is really specific to integer arrays.\n\n> Hey Amri!  Can you describe what exactly this is and why we need it?  What I mean is what situation this is helpful for.\n> \n> I'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?  Also, I feel like this should be much more general - maybe a class of such things or something.  Not to mention categories ;-) though I won't tell you aren't using them if you don't.\n> ----\n> New commits:\n> \n>|| [c8d93b3](http://git.sagemath.org/sage.git/commit/?id=c8d93b37bcc758ee840a3ae26ba47de0ff8a5796) || `partial work on integer arrays` ||",
    "created_at": "2014-12-04T03:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228479",
    "user": "https://github.com/amritanshu-prasad"
}
```

Replying to [comment:2 kcrisman]: This is really really preliminary. I have very rough working python code with me, which I am trying to adapt for Sage. I put it up here so that some others (mentioned in the cc:) can also help me.

Some of the things here are really general (like accessing entries from lists of lists of ... of lists), so maybe they should be implemented more generally. Other stuff (like the enumerator) is really specific to integer arrays.

> Hey Amri!  Can you describe what exactly this is and why we need it?  What I mean is what situation this is helpful for.
> 
> I'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?  Also, I feel like this should be much more general - maybe a class of such things or something.  Not to mention categories ;-) though I won't tell you aren't using them if you don't.
> ----
> New commits:
> 
>|| [c8d93b3](http://git.sagemath.org/sage.git/commit/?id=c8d93b37bcc758ee840a3ae26ba47de0ff8a5796) || `partial work on integer arrays` ||



---

archive/issue_comments_228480.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]:\n> I'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?\nThis looks very much like a duplicate of [http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html) indeed. And Numpy arrays can take arbitrary objects.",
    "created_at": "2014-12-04T16:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228480",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:2 kcrisman]:
> I'm surprised there isn't something 'built-in'.  Is there something like this with floats or RDFs in e.g. Numpy?
This looks very much like a duplicate of [http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html) indeed. And Numpy arrays can take arbitrary objects.



---

archive/issue_comments_228481.json:
```json
{
    "body": "Like integer matrices, these are certain combinatorial objects and \"integer\" is really \"non-negative integer\" and usually there are other constraints like max entry or a fixed sum. From a quick look-over, it doesn't look like there's anything that is that general purpose (although perhaps generalizes stuff from `IntegerMatrices`).",
    "created_at": "2014-12-04T18:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228481",
    "user": "https://github.com/tscrim"
}
```

Like integer matrices, these are certain combinatorial objects and "integer" is really "non-negative integer" and usually there are other constraints like max entry or a fixed sum. From a quick look-over, it doesn't look like there's anything that is that general purpose (although perhaps generalizes stuff from `IntegerMatrices`).



---

archive/issue_comments_228482.json:
```json
{
    "body": "Replying to [comment:6 tscrim]:\n> Like integer matrices, these are certain combinatorial objects and \"integer\" is really \"non-negative integer\" and usually there are other constraints like max entry or a fixed sum. From a quick look-over, it doesn't look like there's anything that is that general purpose (although perhaps generalizes stuff from `IntegerMatrices`).\n\nOK, so that sounds like it should be a wrapper to provide combinatorial methods and interfacing with parent and category infrastructure (if it's worth the overhead). The underlying datastructure should probably be a numpy.array, though, rather than a tuple of integer arrays. Numpy offers a lot of functionality to overcome the row-major (or column-major) problems one usually encounters.",
    "created_at": "2014-12-04T19:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228482",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:6 tscrim]:
> Like integer matrices, these are certain combinatorial objects and "integer" is really "non-negative integer" and usually there are other constraints like max entry or a fixed sum. From a quick look-over, it doesn't look like there's anything that is that general purpose (although perhaps generalizes stuff from `IntegerMatrices`).

OK, so that sounds like it should be a wrapper to provide combinatorial methods and interfacing with parent and category infrastructure (if it's worth the overhead). The underlying datastructure should probably be a numpy.array, though, rather than a tuple of integer arrays. Numpy offers a lot of functionality to overcome the row-major (or column-major) problems one usually encounters.



---

archive/issue_comments_228483.json:
```json
{
    "body": "Replying to [comment:7 nbruin]:\n> OK, so that sounds like it should be a wrapper to provide combinatorial methods and interfacing with parent and category infrastructure (if it's worth the overhead). The underlying datastructure should probably be a numpy.array, though, rather than a tuple of integer arrays.\n\n+1.\n\nYou could still do all the combinatorial stuff using `numpy` arrays (or something else) under the hood.\n\nI think there are too many of these \"reinvent-the-wheel\" classes in Sage (You mention `IntegerMatrix`, which is probably a good example).",
    "created_at": "2014-12-04T19:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228483",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 nbruin]:
> OK, so that sounds like it should be a wrapper to provide combinatorial methods and interfacing with parent and category infrastructure (if it's worth the overhead). The underlying datastructure should probably be a numpy.array, though, rather than a tuple of integer arrays.

+1.

You could still do all the combinatorial stuff using `numpy` arrays (or something else) under the hood.

I think there are too many of these "reinvent-the-wheel" classes in Sage (You mention `IntegerMatrix`, which is probably a good example).



---

archive/issue_comments_228484.json:
```json
{
    "body": "Replying to [comment:8 jdemeyer]:\n> You could still do all the combinatorial stuff using `numpy` arrays (or something else) under the hood.\n> \n> I think there are too many of these \"reinvent-the-wheel\" classes in Sage (You mention `IntegerMatrix`, which is probably a good example).\n\nIn principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?",
    "created_at": "2014-12-04T19:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228484",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:8 jdemeyer]:
> You could still do all the combinatorial stuff using `numpy` arrays (or something else) under the hood.
> 
> I think there are too many of these "reinvent-the-wheel" classes in Sage (You mention `IntegerMatrix`, which is probably a good example).

In principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?



---

archive/issue_comments_228485.json:
```json
{
    "body": "Replying to [comment:9 tscrim]:\n> In principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?\n\nA lazy one? sure.",
    "created_at": "2014-12-04T20:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228485",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:9 tscrim]:
> In principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?

A lazy one? sure.



---

archive/issue_comments_228486.json:
```json
{
    "body": "Replying to [comment:10 nbruin]:\n> Replying to [comment:9 tscrim]:\n> > In principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?\n> \n> A lazy one? sure.\n\nI was thinking this module would be lazily imported. However as soon as you want to construct an element of the parent, it would trigger the numpy import, and I'm wondering if you think it is worth the (relatively) large import and using a large complicated (at least I imagine it is) class for ~20 lines of code?",
    "created_at": "2014-12-04T20:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228486",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:10 nbruin]:
> Replying to [comment:9 tscrim]:
> > In principle, I agree. However, do we really want to trigger an import of (all of) numpy just to have an array with a few already built features that are easy to redo?
> 
> A lazy one? sure.

I was thinking this module would be lazily imported. However as soon as you want to construct an element of the parent, it would trigger the numpy import, and I'm wondering if you think it is worth the (relatively) large import and using a large complicated (at least I imagine it is) class for ~20 lines of code?



---

archive/issue_comments_228487.json:
```json
{
    "body": "Replying to [comment:11 tscrim]:\n> I was thinking this module would be lazily imported. However as soon as you want to construct an element of the parent, it would trigger the numpy import, and I'm wondering if you think it is worth the (relatively) large import and using a large complicated (at least I imagine it is) class for ~20 lines of code?\nYes, the `numpy` import is worth it.\n\nFirst of all, you mention \"20 lines of code\", but that's the current code. Probably somebody will eventually want to enlarge the functionality or will want to speed up the code, possibly duplicating more and more stuff that's already done.\n\nSecond, importing `numpy` isn't that bad. Importing `numpy` is still faster than importing all of Sage in the first place.",
    "created_at": "2014-12-04T21:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228487",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 tscrim]:
> I was thinking this module would be lazily imported. However as soon as you want to construct an element of the parent, it would trigger the numpy import, and I'm wondering if you think it is worth the (relatively) large import and using a large complicated (at least I imagine it is) class for ~20 lines of code?
Yes, the `numpy` import is worth it.

First of all, you mention "20 lines of code", but that's the current code. Probably somebody will eventually want to enlarge the functionality or will want to speed up the code, possibly duplicating more and more stuff that's already done.

Second, importing `numpy` isn't that bad. Importing `numpy` is still faster than importing all of Sage in the first place.



---

archive/issue_comments_228488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-04T10:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228489.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-04T10:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228489",
    "user": "https://github.com/amritanshu-prasad"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_228490.json:
```json
{
    "body": "I implemented it using numpy arrays and mixed integer linear programming. Turned out to be much more elegant from the programming perspective. I am getting some issues with the documentation (module-level). Please check. The documentation includes a couple of lines on why I need it (and others may need it). Another reason for taking this approach is that it will be easier to build on this patch in the future.",
    "created_at": "2016-11-04T10:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228490",
    "user": "https://github.com/amritanshu-prasad"
}
```

I implemented it using numpy arrays and mixed integer linear programming. Turned out to be much more elegant from the programming perspective. I am getting some issues with the documentation (module-level). Please check. The documentation includes a couple of lines on why I need it (and others may need it). Another reason for taking this approach is that it will be easier to build on this patch in the future.



---

archive/issue_comments_228491.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-11-04T10:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228491",
    "user": "https://github.com/amritanshu-prasad"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_228492.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-04T16:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228493.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-11-04T16:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228493",
    "user": "https://github.com/amritanshu-prasad"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_228494.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-26T09:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228494",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_228495.json:
```json
{
    "body": "some python2 prints => needs work",
    "created_at": "2021-03-26T09:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228495",
    "user": "https://github.com/fchapoton"
}
```

some python2 prints => needs work



---

archive/issue_comments_228496.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17200#issuecomment-228496",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.
