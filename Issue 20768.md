# Issue 20768: update pari to new upstream snapshot

archive/issues_020768.json:
```json
{
    "body": "CC:  @jdemeyer @vbraun @defeo @kiwifb jpflori\n\nThere is a critical bug in the current snapshot of pari (see #21000).\n\nIssue created by migration from https://trac.sagemath.org/ticket/21005\n\n",
    "created_at": "2016-07-11T21:11:03Z",
    "labels": [
        "interfaces",
        "blocker",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "update pari to new upstream snapshot",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20768",
    "user": "@videlec"
}
```
CC:  @jdemeyer @vbraun @defeo @kiwifb jpflori

There is a critical bug in the current snapshot of pari (see #21000).

Issue created by migration from https://trac.sagemath.org/ticket/21005





---

archive/issue_comments_286913.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-11T21:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286913",
    "user": "@videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_286914.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-11T21:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286914",
    "user": "@videlec"
}
```

New commits:



---

archive/issue_comments_286915.json:
```json
{
    "body": "Changing component from interfaces to packages: standard.",
    "created_at": "2016-07-11T21:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286915",
    "user": "@videlec"
}
```

Changing component from interfaces to packages: standard.



---

archive/issue_comments_286916.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-11T21:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286916",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_286917.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-11T22:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286917",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286918.json:
```json
{
    "body": "Positive review if you fill in your name...",
    "created_at": "2016-07-11T22:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286918",
    "user": "@vbraun"
}
```

Positive review if you fill in your name...



---

archive/issue_comments_286919.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-11T23:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286919",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286920.json:
```json
{
    "body": "I have some trouble with auto generated functions. Some of them disappeared and break doctests (like `padicprec`).",
    "created_at": "2016-07-11T23:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286920",
    "user": "@videlec"
}
```

I have some trouble with auto generated functions. Some of them disappeared and break doctests (like `padicprec`).



---

archive/issue_comments_286921.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-12T04:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286921",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286922.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-12T04:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286922",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286923.json:
```json
{
    "body": "positive_review from my part if this passes `make ptestlong`.",
    "created_at": "2016-07-13T18:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286923",
    "user": "@jdemeyer"
}
```

positive_review from my part if this passes `make ptestlong`.



---

archive/issue_comments_286924.json:
```json
{
    "body": "PDF build fails because of pound sign\n\n```\nsrc/sage/libs/pari/auto_gen.pxi:        defined by the equation :math:`\\#E(\\mathbb{F}_q) = q+1 - t`.\n```\n\nthen\n\n```\n[docpdf] Overfull \\hbox (623.6548pt too wide) in paragraph at lines 21949--21949\n[docpdf] [] \n[docpdf] [278] [279] [280] [281]\n[docpdf] ! You can't use `macro parameter character #' in math mode.\n[docpdf] l.22319 dividing \\(#\n[docpdf]                     E(\\mathbb{F}_q)\\).\n[docpdf] ? \n[docpdf] ! Emergency stop.\n[docpdf] l.22319 dividing \\(#\n[docpdf]                     E(\\mathbb{F}_q)\\).\n[docpdf] !  ==> Fatal error occurred, no output PDF file produced!\n[docpdf] Transcript written on libs.log.\n[docpdf] Makefile:68: recipe for target 'libs.pdf' failed\n[docpdf] make[2]: *** [libs.pdf] Error 1\n[docpdf] make[2]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/share/doc/sage/latex/en/reference/libs'\n```\n",
    "created_at": "2016-07-13T22:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286924",
    "user": "@vbraun"
}
```

PDF build fails because of pound sign

```
src/sage/libs/pari/auto_gen.pxi:        defined by the equation :math:`\#E(\mathbb{F}_q) = q+1 - t`.
```

then

```
[docpdf] Overfull \hbox (623.6548pt too wide) in paragraph at lines 21949--21949
[docpdf] [] 
[docpdf] [278] [279] [280] [281]
[docpdf] ! You can't use `macro parameter character #' in math mode.
[docpdf] l.22319 dividing \(#
[docpdf]                     E(\mathbb{F}_q)\).
[docpdf] ? 
[docpdf] ! Emergency stop.
[docpdf] l.22319 dividing \(#
[docpdf]                     E(\mathbb{F}_q)\).
[docpdf] !  ==> Fatal error occurred, no output PDF file produced!
[docpdf] Transcript written on libs.log.
[docpdf] Makefile:68: recipe for target 'libs.pdf' failed
[docpdf] make[2]: *** [libs.pdf] Error 1
[docpdf] make[2]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/share/doc/sage/latex/en/reference/libs'
```




---

archive/issue_comments_286925.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-13T22:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286925",
    "user": "@vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286926.json:
```json
{
    "body": "Too bad... everything is fine from the `sage_setup.autogen.pari` side. It generates the perfectly valid formula `:math:`\\#E(\\mathbb{F}_q)``. But then from the log message above it seems that sphinx (?) convert it to `(\\(#E(\\mathbb{F}_q\\)` which is indeed wrong.",
    "created_at": "2016-07-14T14:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286926",
    "user": "@videlec"
}
```

Too bad... everything is fine from the `sage_setup.autogen.pari` side. It generates the perfectly valid formula `:math:`\#E(\mathbb{F}_q)``. But then from the log message above it seems that sphinx (?) convert it to `(\(#E(\mathbb{F}_q\)` which is indeed wrong.



---

archive/issue_comments_286927.json:
```json
{
    "body": "No, wrong line. The generated formula is \n\n```\n          dividing :math:`#E(\\mathbb{F}_q)`.        \n```\n\nwhich is invalid TeX.",
    "created_at": "2016-07-23T23:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286927",
    "user": "@vbraun"
}
```

No, wrong line. The generated formula is 

```
          dividing :math:`#E(\mathbb{F}_q)`.        
```

which is invalid TeX.



---

archive/issue_comments_286928.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-24T21:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286928",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_286929.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-24T21:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286929",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286930.json:
```json
{
    "body": "There must have been a reason for the `\\S` in the regular expression... I will check if I can find it.",
    "created_at": "2016-07-25T09:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286930",
    "user": "@jdemeyer"
}
```

There must have been a reason for the `\S` in the regular expression... I will check if I can find it.



---

archive/issue_comments_286931.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-25T09:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286931",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286932.json:
```json
{
    "body": "Fixing this...",
    "created_at": "2016-07-25T12:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286932",
    "user": "@jdemeyer"
}
```

Fixing this...



---

archive/issue_comments_286933.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-25T13:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286933",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_286934.json:
```json
{
    "body": "This version gives better results, needs_review.\n\nWhy is this a blocker by the way?",
    "created_at": "2016-07-25T13:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286934",
    "user": "@jdemeyer"
}
```

This version gives better results, needs_review.

Why is this a blocker by the way?



---

archive/issue_comments_286935.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-25T13:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286935",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286936.json:
```json
{
    "body": "Replying to [comment:20 jdemeyer]:\n> Why is this a blocker by the way?\n\n#21000 is a major bug to be fixed.",
    "created_at": "2016-07-25T16:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286936",
    "user": "@videlec"
}
```

Replying to [comment:20 jdemeyer]:
> Why is this a blocker by the way?

#21000 is a major bug to be fixed.



---

archive/issue_comments_286937.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-25T18:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286937",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_286938.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-07-26T07:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286938",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_286939.json:
```json
{
    "body": "There are a bunch of failures of the form\n\n```\nFile \"src/sage/rings/qqbar.py\", line 4536, in sage.rings.qqbar.AlgebraicReal._floor_ceil\nFailed example:\n    [one_half.round(), (-one_half).round()] # long time\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 499, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 862, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.qqbar.AlgebraicReal._floor_ceil[7]>\", line 1, in <module>\n        [one_half.round(), (-one_half).round()] # long time\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 4602, in round\n        return self._floor_ceil(lambda x: x.round())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 4547, in _floor_ceil\n        return method(self._rational_())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 4640, in _rational_\n        self.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7063, in exactify\n        right.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7062, in exactify\n        left.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7062, in exactify\n        left.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7062, in exactify\n        left.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7062, in exactify\n        left.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7062, in exactify\n        left.exactify()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 3270, in exactify\n        self._set_descr(self._descr.exactify())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 7064, in exactify\n        gen = left._exact_field().union(right._exact_field())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 2409, in union\n        red_elt, red_back, red_pol = do_polred(newpol_sage_y)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py\", line 1712, in do_polred\n        new_poly, elt_back = poly._pari_().polredbest(flag=1)\n      File \"sage/libs/pari/auto_gen.pxi\", line 15978, in sage.libs.pari.gen.gen_auto.polredbest (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/pari/gen.c:82406)\n        sig_on()\n      File \"sage/libs/pari/handle_error.pyx\", line 181, in sage.libs.pari.handle_error._pari_err_handle (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:3102)\n        raise PariError(errnum, pari_error_string, pari_instance.new_gen_noclear(E))\n    PariError: impossible inverse in Fl_inv: Mod(2120213466, 2148532227)\n**********************************************************************\n1 item had failures:\n   2 of   9 in sage.rings.qqbar.AlgebraicReal._floor_ceil\n    [1333 tests, 2 failures, 172.84 s]\n```\n",
    "created_at": "2016-07-26T07:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286939",
    "user": "@vbraun"
}
```

There are a bunch of failures of the form

```
File "src/sage/rings/qqbar.py", line 4536, in sage.rings.qqbar.AlgebraicReal._floor_ceil
Failed example:
    [one_half.round(), (-one_half).round()] # long time
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 499, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 862, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.qqbar.AlgebraicReal._floor_ceil[7]>", line 1, in <module>
        [one_half.round(), (-one_half).round()] # long time
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 4602, in round
        return self._floor_ceil(lambda x: x.round())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 4547, in _floor_ceil
        return method(self._rational_())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 4640, in _rational_
        self.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7063, in exactify
        right.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7062, in exactify
        left.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7062, in exactify
        left.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7062, in exactify
        left.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7062, in exactify
        left.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7062, in exactify
        left.exactify()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 3270, in exactify
        self._set_descr(self._descr.exactify())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 7064, in exactify
        gen = left._exact_field().union(right._exact_field())
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 2409, in union
        red_elt, red_back, red_pol = do_polred(newpol_sage_y)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/qqbar.py", line 1712, in do_polred
        new_poly, elt_back = poly._pari_().polredbest(flag=1)
      File "sage/libs/pari/auto_gen.pxi", line 15978, in sage.libs.pari.gen.gen_auto.polredbest (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/pari/gen.c:82406)
        sig_on()
      File "sage/libs/pari/handle_error.pyx", line 181, in sage.libs.pari.handle_error._pari_err_handle (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:3102)
        raise PariError(errnum, pari_error_string, pari_instance.new_gen_noclear(E))
    PariError: impossible inverse in Fl_inv: Mod(2120213466, 2148532227)
**********************************************************************
1 item had failures:
   2 of   9 in sage.rings.qqbar.AlgebraicReal._floor_ceil
    [1333 tests, 2 failures, 172.84 s]
```




---

archive/issue_comments_286940.json:
```json
{
    "body": "Replying to [comment:21 vdelecroix]:\n> Replying to [comment:20 jdemeyer]:\n> > Why is this a blocker by the way?\n> \n> #21000 is a major bug to be fixed.\n\nOrdinary bugs usually are not blockers. Anyway, I let the release manager decide...",
    "created_at": "2016-07-26T07:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286940",
    "user": "@jdemeyer"
}
```

Replying to [comment:21 vdelecroix]:
> Replying to [comment:20 jdemeyer]:
> > Why is this a blocker by the way?
> 
> #21000 is a major bug to be fixed.

Ordinary bugs usually are not blockers. Anyway, I let the release manager decide...



---

archive/issue_comments_286941.json:
```json
{
    "body": "Obviously depends on the severity of the bug ;-)\n\nIn any case, as long as no working upstream Pari release surfaces we don't have a choice.",
    "created_at": "2016-07-26T11:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286941",
    "user": "@vbraun"
}
```

Obviously depends on the severity of the bug ;-)

In any case, as long as no working upstream Pari release surfaces we don't have a choice.



---

archive/issue_comments_286942.json:
```json
{
    "body": "I am now trying the current PARI master.",
    "created_at": "2016-07-26T12:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286942",
    "user": "@jdemeyer"
}
```

I am now trying the current PARI master.



---

archive/issue_comments_286943.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-26T12:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286943",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286944.json:
```json
{
    "body": "Note to the reviewer: the changed output from `elllocalred()` is harmless: the old transformations were invertible over `ZZ`, so they didn't really change the model of the curve. PARI now gives the trivial transformation `[1,0,0,0]` in these cases.",
    "created_at": "2016-07-26T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286944",
    "user": "@jdemeyer"
}
```

Note to the reviewer: the changed output from `elllocalred()` is harmless: the old transformations were invertible over `ZZ`, so they didn't really change the model of the curve. PARI now gives the trivial transformation `[1,0,0,0]` in these cases.



---

archive/issue_comments_286945.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-26T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286945",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286946.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-26T19:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286946",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286947.json:
```json
{
    "body": "I got timeout in qqbar.py\n\nNamely, on the current beta\n\n```\nsage: x = polygen(QQ)\nsage: a = AA.polynomial_root(x^5 - (1-2^(-80)), RIF((0,2)))\nsage: b = AA.polynomial_root(x^5 - (1+2^(-80)), RIF((0,2)))\nsage: two = (a+b)^5 - 5*(a^4*b+a*b^4) - 10*(a^3*b^2+a^2*b^3) \nsage: one_half = 1/two\nsage: %time one_half.round()\nCPU times: user 4.08 s, sys: 8 ms, total: 4.08 s\nWall time: 4.08 s\n1\n```\n\nand with the updated pari release\n\n```\nsage: %time one_half.round()  # hangs forever...\n```\n",
    "created_at": "2016-07-26T19:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286947",
    "user": "@videlec"
}
```

I got timeout in qqbar.py

Namely, on the current beta

```
sage: x = polygen(QQ)
sage: a = AA.polynomial_root(x^5 - (1-2^(-80)), RIF((0,2)))
sage: b = AA.polynomial_root(x^5 - (1+2^(-80)), RIF((0,2)))
sage: two = (a+b)^5 - 5*(a^4*b+a*b^4) - 10*(a^3*b^2+a^2*b^3) 
sage: one_half = 1/two
sage: %time one_half.round()
CPU times: user 4.08 s, sys: 8 ms, total: 4.08 s
Wall time: 4.08 s
1
```

and with the updated pari release

```
sage: %time one_half.round()  # hangs forever...
```




---

archive/issue_comments_286948.json:
```json
{
    "body": "Relevant part of the traceback after Ctrl-C\n\n```\n.../sage/rings/qqbar.pyc in union(self, other)\n   2408 \n-> 2409         red_elt, red_back, red_pol = do_polred(newpol_sage_y)\n   2410 \n.../sage/rings/qqbar.pyc in do_polred(poly)\n   1711     \"\"\"\n-> 1712     new_poly, elt_back = poly._pari_().polredbest(flag=1)\n   1713 \n.../sage/libs/pari/auto_gen.pxi in sage.libs.pari.gen.gen_auto.polredbest (build/cythonized/sage/libs/pari/gen.c:82406)()\n  15975         cdef GEN _T = T.g\n> 15976         sig_on()\n  15977         cdef GEN _ret = polredbest(_T, flag)\n  15978         return pari_instance.new_gen(_ret)\nsrc/cysignals/signals.pyx in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1125)()\n```\n",
    "created_at": "2016-07-26T19:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286948",
    "user": "@videlec"
}
```

Relevant part of the traceback after Ctrl-C

```
.../sage/rings/qqbar.pyc in union(self, other)
   2408 
-> 2409         red_elt, red_back, red_pol = do_polred(newpol_sage_y)
   2410 
.../sage/rings/qqbar.pyc in do_polred(poly)
   1711     """
-> 1712     new_poly, elt_back = poly._pari_().polredbest(flag=1)
   1713 
.../sage/libs/pari/auto_gen.pxi in sage.libs.pari.gen.gen_auto.polredbest (build/cythonized/sage/libs/pari/gen.c:82406)()
  15975         cdef GEN _T = T.g
> 15976         sig_on()
  15977         cdef GEN _ret = polredbest(_T, flag)
  15978         return pari_instance.new_gen(_ret)
src/cysignals/signals.pyx in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1125)()
```




---

archive/issue_comments_286949.json:
```json
{
    "body": "You're sure that you updated to my branch, right?",
    "created_at": "2016-07-27T07:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286949",
    "user": "@jdemeyer"
}
```

You're sure that you updated to my branch, right?



---

archive/issue_comments_286950.json:
```json
{
    "body": "Replying to [comment:31 vdelecroix]:\n> I got timeout in qqbar.py\n\nConfirmed...\n\nI guess I only ran non-long doctests, that's why I didn't see this.",
    "created_at": "2016-07-27T09:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286950",
    "user": "@jdemeyer"
}
```

Replying to [comment:31 vdelecroix]:
> I got timeout in qqbar.py

Confirmed...

I guess I only ran non-long doctests, that's why I didn't see this.



---

archive/issue_comments_286951.json:
```json
{
    "body": "In `gp`:\n\nWithout this ticket:\n\n```\ngp> polredbest(y^25 - 10*y^20 + 913438523331814323877303020447676887284957839359415*y^15 + 5480631139990885943263818122686061323709747036156170*y^10 + 6674959487252844007484442831779850358133451632359059274944514138501172824941815657498046774640640705*y^5 - 32)\ntime = 10,360 ms.\n%1 = y^25 - 10*y^20 + 913438523331814323877303020447676887284957839359415*y^15 + 5480631139990885943263818122686061323709747036156170*y^10 + 6674959487252844007484442831779850358133451632359059274944514138501172824941815657498046774640640705*y^5 - 32\n```\n\n\nWith this ticket, it seems to hang.",
    "created_at": "2016-07-27T09:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286951",
    "user": "@jdemeyer"
}
```

In `gp`:

Without this ticket:

```
gp> polredbest(y^25 - 10*y^20 + 913438523331814323877303020447676887284957839359415*y^15 + 5480631139990885943263818122686061323709747036156170*y^10 + 6674959487252844007484442831779850358133451632359059274944514138501172824941815657498046774640640705*y^5 - 32)
time = 10,360 ms.
%1 = y^25 - 10*y^20 + 913438523331814323877303020447676887284957839359415*y^15 + 5480631139990885943263818122686061323709747036156170*y^10 + 6674959487252844007484442831779850358133451632359059274944514138501172824941815657498046774640640705*y^5 - 32
```


With this ticket, it seems to hang.



---

archive/issue_comments_286952.json:
```json
{
    "body": "I submitted an upstream bug for this.",
    "created_at": "2016-07-27T09:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286952",
    "user": "@jdemeyer"
}
```

I submitted an upstream bug for this.



---

archive/issue_comments_286953.json:
```json
{
    "body": "I'll prepare a new tarball...",
    "created_at": "2016-07-27T12:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286953",
    "user": "@jdemeyer"
}
```

I'll prepare a new tarball...



---

archive/issue_comments_286954.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-27T12:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286954",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_286955.json:
```json
{
    "body": "Here it is, totally untested though...",
    "created_at": "2016-07-27T12:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286955",
    "user": "@jdemeyer"
}
```

Here it is, totally untested though...



---

archive/issue_comments_286956.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-27T12:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286956",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286957.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-27T12:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286957",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286958.json:
```json
{
    "body": "\n```\n[pari-2.8-2971-gccd5bdf.p0] PROBLEMS WERE NOTED. The following files list them in diff format: \n[pari-2.8-2971-gccd5bdf.p0] Directory: /usr/local/src/sage-config/local/var/tmp/sage/build/pari-2.8-2971-gccd5bdf.p0/src/Olinux-x86_64\n[pari-2.8-2971-gccd5bdf.p0]     ell-sta.dif\n[pari-2.8-2971-gccd5bdf.p0]     ell-dyn.dif\n[pari-2.8-2971-gccd5bdf.p0] Makefile:353: recipe for target 'test-all' failed\n```\n",
    "created_at": "2016-07-27T12:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286958",
    "user": "@jdemeyer"
}
```


```
[pari-2.8-2971-gccd5bdf.p0] PROBLEMS WERE NOTED. The following files list them in diff format: 
[pari-2.8-2971-gccd5bdf.p0] Directory: /usr/local/src/sage-config/local/var/tmp/sage/build/pari-2.8-2971-gccd5bdf.p0/src/Olinux-x86_64
[pari-2.8-2971-gccd5bdf.p0]     ell-sta.dif
[pari-2.8-2971-gccd5bdf.p0]     ell-dyn.dif
[pari-2.8-2971-gccd5bdf.p0] Makefile:353: recipe for target 'test-all' failed
```




---

archive/issue_comments_286959.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-27T15:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286959",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_286960.json:
```json
{
    "body": "Updated again, untested.",
    "created_at": "2016-07-27T15:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286960",
    "user": "@jdemeyer"
}
```

Updated again, untested.



---

archive/issue_comments_286961.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-27T15:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286961",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286962.json:
```json
{
    "body": "I am launching test on librae...",
    "created_at": "2016-07-27T15:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286962",
    "user": "@videlec"
}
```

I am launching test on librae...



---

archive/issue_comments_286963.json:
```json
{
    "body": "not able to build\n\n```\n[sagelib-7.3.beta9] [  1/232] Cythonizing sage/libs/pari/gen.pyx\n[sagelib-7.3.beta9] \n[sagelib-7.3.beta9] Error compiling Cython file:\n[sagelib-7.3.beta9] ------------------------------------------------------------\n[sagelib-7.3.beta9] ...\n[sagelib-7.3.beta9]         \"\"\"\n[sagelib-7.3.beta9]         cdef GEN _L = L.g\n[sagelib-7.3.beta9]         if not precision:\n[sagelib-7.3.beta9]             precision = default_bitprec()\n[sagelib-7.3.beta9]         sig_on()\n[sagelib-7.3.beta9]         cdef long _ret = lfunorderzero(_L, m, precision)\n[sagelib-7.3.beta9]                                      ^\n[sagelib-7.3.beta9] ------------------------------------------------------------\n[sagelib-7.3.beta9] \n[sagelib-7.3.beta9] sage/libs/pari/auto_gen.pxi:11107:38: Call with wrong number of arguments (expected 2, got 3)\n[sagelib-7.3.beta9] Traceback (most recent call last):\n[sagelib-7.3.beta9]   File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/Cython-0.24.1-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 1055, in cythonize_one_helper\n[sagelib-7.3.beta9]     return cythonize_one(*m)\n[sagelib-7.3.beta9]   File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/Cython-0.24.1-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 1037, in cythonize_one\n[sagelib-7.3.beta9]     raise CompileError(None, pyx_file)\n[sagelib-7.3.beta9] CompileError: sage/libs/pari/gen.pyx\n```\n",
    "created_at": "2016-07-27T16:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286963",
    "user": "@videlec"
}
```

not able to build

```
[sagelib-7.3.beta9] [  1/232] Cythonizing sage/libs/pari/gen.pyx
[sagelib-7.3.beta9] 
[sagelib-7.3.beta9] Error compiling Cython file:
[sagelib-7.3.beta9] ------------------------------------------------------------
[sagelib-7.3.beta9] ...
[sagelib-7.3.beta9]         """
[sagelib-7.3.beta9]         cdef GEN _L = L.g
[sagelib-7.3.beta9]         if not precision:
[sagelib-7.3.beta9]             precision = default_bitprec()
[sagelib-7.3.beta9]         sig_on()
[sagelib-7.3.beta9]         cdef long _ret = lfunorderzero(_L, m, precision)
[sagelib-7.3.beta9]                                      ^
[sagelib-7.3.beta9] ------------------------------------------------------------
[sagelib-7.3.beta9] 
[sagelib-7.3.beta9] sage/libs/pari/auto_gen.pxi:11107:38: Call with wrong number of arguments (expected 2, got 3)
[sagelib-7.3.beta9] Traceback (most recent call last):
[sagelib-7.3.beta9]   File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/Cython-0.24.1-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 1055, in cythonize_one_helper
[sagelib-7.3.beta9]     return cythonize_one(*m)
[sagelib-7.3.beta9]   File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/Cython-0.24.1-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 1037, in cythonize_one
[sagelib-7.3.beta9]     raise CompileError(None, pyx_file)
[sagelib-7.3.beta9] CompileError: sage/libs/pari/gen.pyx
```




---

archive/issue_comments_286964.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-27T16:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286964",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286965.json:
```json
{
    "body": "Not so bad ;-)\n\n```\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_element.pyx\", line 2306, in sage.rings.number_field.number_field_element.NumberFieldElement.__invert__\nWarning, slow doctest:\n    beta = ~alpha # long time (about 1:45min on a 2014 MacBook Pro, this used to cause a crash in Sage 7.2)\nTest ran for 111.36 s\n    [1038 tests, 130.77 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n",
    "created_at": "2016-07-27T20:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286965",
    "user": "@videlec"
}
```

Not so bad ;-)

```
**********************************************************************
File "src/sage/rings/number_field/number_field_element.pyx", line 2306, in sage.rings.number_field.number_field_element.NumberFieldElement.__invert__
Warning, slow doctest:
    beta = ~alpha # long time (about 1:45min on a 2014 MacBook Pro, this used to cause a crash in Sage 7.2)
Test ran for 111.36 s
    [1038 tests, 130.77 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```




---

archive/issue_comments_286966.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-27T20:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286966",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_286967.json:
```json
{
    "body": "PDF docs still fail",
    "created_at": "2016-07-27T22:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286967",
    "user": "@vbraun"
}
```

PDF docs still fail



---

archive/issue_comments_286968.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-07-27T22:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286968",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_286969.json:
```json
{
    "body": "Indeed\n\n```\n[docpdf] ! Undefined control sequence.\n[docpdf] l.27579 of \\(\\Hom\n[docpdf]                  _G(\\Delta, V)\\), and let \\(p = [a,b] \\in \\Delta\\) be a path...\n[docpdf] \n\n[docpdf] ? ! Undefined control sequence.\n[docpdf] l.27586 the fixed basis of \\(\\Hom\n[docpdf]                                  _G(\\Delta,V)\\) chosen in \\(M\\); if \\(M\\) was\n\n[docpdf] ? [338]\n[docpdf] Overfull \\vbox (1.36996pt too high) detected at line 27680\n[docpdf] [339]\n[docpdf] ! Undefined control sequence.\n[docpdf] l.27726 of the fixed basis of \\(\\Hom\n[docpdf]                                     _G(\\Delta,\\mathbb{Q})\\) chosen in \\(M\\)).\n\n[docpdf] ? [340] [341]\n[docpdf] ! Undefined control sequence.\n[docpdf] l.27871 ...odular symbols, the \\(G\\)-module \\(\\Hom\n[docpdf]                                                   _G(Div^0(\\mathbb{P}^1\n```\n",
    "created_at": "2016-07-28T13:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286969",
    "user": "@videlec"
}
```

Indeed

```
[docpdf] ! Undefined control sequence.
[docpdf] l.27579 of \(\Hom
[docpdf]                  _G(\Delta, V)\), and let \(p = [a,b] \in \Delta\) be a path...
[docpdf] 

[docpdf] ? ! Undefined control sequence.
[docpdf] l.27586 the fixed basis of \(\Hom
[docpdf]                                  _G(\Delta,V)\) chosen in \(M\); if \(M\) was

[docpdf] ? [338]
[docpdf] Overfull \vbox (1.36996pt too high) detected at line 27680
[docpdf] [339]
[docpdf] ! Undefined control sequence.
[docpdf] l.27726 of the fixed basis of \(\Hom
[docpdf]                                     _G(\Delta,\mathbb{Q})\) chosen in \(M\)).

[docpdf] ? [340] [341]
[docpdf] ! Undefined control sequence.
[docpdf] l.27871 ...odular symbols, the \(G\)-module \(\Hom
[docpdf]                                                   _G(Div^0(\mathbb{P}^1
```




---

archive/issue_comments_286970.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-28T16:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286970",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286971.json:
```json
{
    "body": "The four last commits make available a `\\Hom` macro that is reasonable to have in Sage. I was able to compile the pdf documentation by adding a `\\Frob` macro. But I do not like it so much having it has a globally defined macro: the name \"Frob\" is ambiguous.",
    "created_at": "2016-07-28T16:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286971",
    "user": "@videlec"
}
```

The four last commits make available a `\Hom` macro that is reasonable to have in Sage. I was able to compile the pdf documentation by adding a `\Frob` macro. But I do not like it so much having it has a globally defined macro: the name "Frob" is ambiguous.



---

archive/issue_comments_286972.json:
```json
{
    "body": "Changing priority from blocker to major.",
    "created_at": "2016-07-28T16:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286972",
    "user": "@videlec"
}
```

Changing priority from blocker to major.



---

archive/issue_comments_286973.json:
```json
{
    "body": "Since this is postponed to sage-7.4 it makes sense to let it as major. However, the bug from #21000 is pretty annoying.",
    "created_at": "2016-07-28T16:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286973",
    "user": "@videlec"
}
```

Since this is postponed to sage-7.4 it makes sense to let it as major. However, the bug from #21000 is pretty annoying.



---

archive/issue_comments_286974.json:
```json
{
    "body": "Note that pari announced a stable release for soon:\n\n```\nWe have made available a prerelease of PARI 2.8.0 (alpha).\n\nPlease test the prerelease tarball:\n<http://pari.math.u-bordeaux.fr/pub/pari/snapshots/pari-2.8.0-pre1.alpha.tar.gz>\n\nThe expected release date is set to the 12/08/2016.\n```\n\nIsn't it worth it to wait the stable pari release for Sage (with moreover contains bug fixes compared to what we ship)?",
    "created_at": "2016-08-01T22:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286974",
    "user": "@videlec"
}
```

Note that pari announced a stable release for soon:

```
We have made available a prerelease of PARI 2.8.0 (alpha).

Please test the prerelease tarball:
<http://pari.math.u-bordeaux.fr/pub/pari/snapshots/pari-2.8.0-pre1.alpha.tar.gz>

The expected release date is set to the 12/08/2016.
```

Isn't it worth it to wait the stable pari release for Sage (with moreover contains bug fixes compared to what we ship)?



---

archive/issue_comments_286975.json:
```json
{
    "body": "Well this ticket is now marked for sage 7.4 so the stable release will happen before we get to 7.4 if I am reading the date correctly as 12th of Aug 2016.\n\nBut seriously, I doubt a stable release will satisfy sage's pari usage for very long. I am expecting Jeroen to move to the next pari development branch not long after the release unless something spectacular happens :)",
    "created_at": "2016-08-01T22:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286975",
    "user": "@kiwifb"
}
```

Well this ticket is now marked for sage 7.4 so the stable release will happen before we get to 7.4 if I am reading the date correctly as 12th of Aug 2016.

But seriously, I doubt a stable release will satisfy sage's pari usage for very long. I am expecting Jeroen to move to the next pari development branch not long after the release unless something spectacular happens :)



---

archive/issue_comments_286976.json:
```json
{
    "body": "I meant getting back the milestone to `7.3` (Volker did the change, see [comment:52]).\n\nI hope `12/08/2016` is the 12-th of august and not the 8-th of december ;-) If we do ship pari-2.8, at least Sage-7.4 would match a stable pari release.",
    "created_at": "2016-08-01T22:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286976",
    "user": "@videlec"
}
```

I meant getting back the milestone to `7.3` (Volker did the change, see [comment:52]).

I hope `12/08/2016` is the 12-th of august and not the 8-th of december ;-) If we do ship pari-2.8, at least Sage-7.4 would match a stable pari release.



---

archive/issue_comments_286977.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-01T22:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286977",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286978.json:
```json
{
    "body": "I am currently testing the branch at 512df36",
    "created_at": "2016-08-01T22:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286978",
    "user": "@videlec"
}
```

I am currently testing the branch at 512df36



---

archive/issue_comments_286979.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-01T22:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286979",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_286980.json:
```json
{
    "body": "Ok. For the pdfdoc a naive substitution `\"`@`[startlword]Hom`@`[endlword]\" -> \"\\\\text{Hom}\"` and `\"`@`[startlword]Frob`@`[endlword]\" -> \"\\text{Frob}\"` was enough. I guess it is better that way than the approach from my previous commits (\u200b1ef03c4, \u200bb7a9144, \u200b5b88019, \u200b4a866cc).",
    "created_at": "2016-08-01T23:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286980",
    "user": "@videlec"
}
```

Ok. For the pdfdoc a naive substitution `"`@`[startlword]Hom`@`[endlword]" -> "\\text{Hom}"` and `"`@`[startlword]Frob`@`[endlword]" -> "\text{Frob}"` was enough. I guess it is better that way than the approach from my previous commits (​1ef03c4, ​b7a9144, ​5b88019, ​4a866cc).



---

archive/issue_comments_286981.json:
```json
{
    "body": "At least the html doc and the pdf doc build and tests pass in `sage/libs/pari/`!",
    "created_at": "2016-08-01T23:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286981",
    "user": "@videlec"
}
```

At least the html doc and the pdf doc build and tests pass in `sage/libs/pari/`!



---

archive/issue_comments_286982.json:
```json
{
    "body": "Upstream is preparing a release(!) of PARI version 2.8.0.\n\nGiven that this ticket is no longer a blocker, I would actually suggest to wait for that release and package that.\n\nEdit: never mind, I see you already posted this above",
    "created_at": "2016-08-02T07:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286982",
    "user": "@jdemeyer"
}
```

Upstream is preparing a release(!) of PARI version 2.8.0.

Given that this ticket is no longer a blocker, I would actually suggest to wait for that release and package that.

Edit: never mind, I see you already posted this above



---

archive/issue_comments_286983.json:
```json
{
    "body": "Replying to [comment:59 fbissey]:\n> I am expecting Jeroen to move to the next pari development branch not long after the release unless something spectacular happens :)\n\nExactly. The last non-bugfix release of PARI (version 2.7.0) was 21 march 2014. More than 2 years between releases is a really long time, especially because PARI is quite actively developed.",
    "created_at": "2016-08-02T12:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286983",
    "user": "@jdemeyer"
}
```

Replying to [comment:59 fbissey]:
> I am expecting Jeroen to move to the next pari development branch not long after the release unless something spectacular happens :)

Exactly. The last non-bugfix release of PARI (version 2.7.0) was 21 march 2014. More than 2 years between releases is a really long time, especially because PARI is quite actively developed.



---

archive/issue_comments_286984.json:
```json
{
    "body": "Did anybody run full doctests already with this new PARI? I did not do that yet.",
    "created_at": "2016-08-03T10:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286984",
    "user": "@jdemeyer"
}
```

Did anybody run full doctests already with this new PARI? I did not do that yet.



---

archive/issue_comments_286985.json:
```json
{
    "body": "OK. I will run `make ptestlong`.",
    "created_at": "2016-08-03T12:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286985",
    "user": "@jdemeyer"
}
```

OK. I will run `make ptestlong`.



---

archive/issue_comments_286986.json:
```json
{
    "body": "Works fine for me. Let's wait until 2.8.0 is really released and then this is good to go I hope...",
    "created_at": "2016-08-03T19:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286986",
    "user": "@jdemeyer"
}
```

Works fine for me. Let's wait until 2.8.0 is really released and then this is good to go I hope...



---

archive/issue_comments_286987.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-14T18:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286987",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_286988.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-14T19:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286988",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_286989.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-14T19:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286989",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_286990.json:
```json
{
    "body": "Passes all tests.",
    "created_at": "2016-08-14T20:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286990",
    "user": "@jdemeyer"
}
```

Passes all tests.



---

archive/issue_comments_286991.json:
```json
{
    "body": "Does it pass `make bench` properly for you? I have annoying formatting issues like\n\n```\n*** ../src/test/32/polyser      2016-04-09 02:36:45.000000000 +1200\n--- gp.out      2016-08-15 09:17:49.995201272 +1200\n***************\n*** 19,25 ****\n  xx\n  ? factorpadic(apol,7,8)\n  \n! [(1 + O(7^8))*y + (6 + 2*7^2 + 2*7^3 + 3*7^4 + 2*7^5 + 6*7^6 + O(7^8)) 1]\n  \n  [(1 + O(7^8))*y^2 + (1 + 6*7 + 4*7^2 + 4*7^3 + 3*7^4 + 4*7^5 + 6*7^7 + O(7^8\n  ))*y + (6 + 5*7 + 3*7^2 + 6*7^3 + 7^4 + 3*7^5 + 2*7^6 + 5*7^7 + O(7^8)) 1]\n--- 19,26 ----\n  xx\n  ? factorpadic(apol,7,8)\n  \n! [                                                                           \n!   (1 + O(7^8))*y + (6 + 2*7^2 + 2*7^3 + 3*7^4 + 2*7^5 + 6*7^6 + O(7^8)) 1]\n  \n  [(1 + O(7^8))*y^2 + (1 + 6*7 + 4*7^2 + 4*7^3 + 3*7^4 + 4*7^5 + 6*7^7 + O(7^8\n  ))*y + (6 + 5*7 + 3*7^2 + 6*7^3 + 7^4 + 3*7^5 + 2*7^6 + 5*7^7 + O(7^8)) 1]\n***************\n*** 150,153 ****\n  name\n  ? if(getheap()!=HEAP,getheap())\n  ? print(\"Total time spent: \",gettime);\n! Total time spent: 0\n--- 151,154 ----\n  name\n  ? if(getheap()!=HEAP,getheap())\n  ? print(\"Total time spent: \",gettime);\n! Total time spent: 10\n```\n",
    "created_at": "2016-08-14T21:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286991",
    "user": "@kiwifb"
}
```

Does it pass `make bench` properly for you? I have annoying formatting issues like

```
*** ../src/test/32/polyser      2016-04-09 02:36:45.000000000 +1200
--- gp.out      2016-08-15 09:17:49.995201272 +1200
***************
*** 19,25 ****
  xx
  ? factorpadic(apol,7,8)
  
! [(1 + O(7^8))*y + (6 + 2*7^2 + 2*7^3 + 3*7^4 + 2*7^5 + 6*7^6 + O(7^8)) 1]
  
  [(1 + O(7^8))*y^2 + (1 + 6*7 + 4*7^2 + 4*7^3 + 3*7^4 + 4*7^5 + 6*7^7 + O(7^8
  ))*y + (6 + 5*7 + 3*7^2 + 6*7^3 + 7^4 + 3*7^5 + 2*7^6 + 5*7^7 + O(7^8)) 1]
--- 19,26 ----
  xx
  ? factorpadic(apol,7,8)
  
! [                                                                           
!   (1 + O(7^8))*y + (6 + 2*7^2 + 2*7^3 + 3*7^4 + 2*7^5 + 6*7^6 + O(7^8)) 1]
  
  [(1 + O(7^8))*y^2 + (1 + 6*7 + 4*7^2 + 4*7^3 + 3*7^4 + 4*7^5 + 6*7^7 + O(7^8
  ))*y + (6 + 5*7 + 3*7^2 + 6*7^3 + 7^4 + 3*7^5 + 2*7^6 + 5*7^7 + O(7^8)) 1]
***************
*** 150,153 ****
  name
  ? if(getheap()!=HEAP,getheap())
  ? print("Total time spent: ",gettime);
! Total time spent: 0
--- 151,154 ----
  name
  ? if(getheap()!=HEAP,getheap())
  ? print("Total time spent: ",gettime);
! Total time spent: 10
```




---

archive/issue_comments_286992.json:
```json
{
    "body": "I tested in Sage with `SAGE_CHECK=yes` which runs the full testsuite and it passed.",
    "created_at": "2016-08-15T07:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286992",
    "user": "@jdemeyer"
}
```

I tested in Sage with `SAGE_CHECK=yes` which runs the full testsuite and it passed.



---

archive/issue_comments_286993.json:
```json
{
    "body": "Apart from that, it also passes `make bench` outside of Sage.\n\nMaybe report your problem upstream?",
    "created_at": "2016-08-15T07:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286993",
    "user": "@jdemeyer"
}
```

Apart from that, it also passes `make bench` outside of Sage.

Maybe report your problem upstream?



---

archive/issue_comments_286994.json:
```json
{
    "body": "For me, this ticket is good. If Vincent (or anybody else) agrees, we can set this ticket to positive_review.",
    "created_at": "2016-08-15T07:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286994",
    "user": "@jdemeyer"
}
```

For me, this ticket is good. If Vincent (or anybody else) agrees, we can set this ticket to positive_review.



---

archive/issue_comments_286995.json:
```json
{
    "body": "I always have problems of formatting with the tests in sage-on-gentoo. But `make bench` has been ok before, The full testsuite usually reports failure because my output is formatted in 132 columns (guess) while pari seems to expect it to be formatted in 80 columns.\nThose bizarre line jump in `make bench` are new.\n\nOtherwise I am ok with the ticket, but I thought we were waiting for 2.8.0 final.",
    "created_at": "2016-08-15T07:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286995",
    "user": "@kiwifb"
}
```

I always have problems of formatting with the tests in sage-on-gentoo. But `make bench` has been ok before, The full testsuite usually reports failure because my output is formatted in 132 columns (guess) while pari seems to expect it to be formatted in 80 columns.
Those bizarre line jump in `make bench` are new.

Otherwise I am ok with the ticket, but I thought we were waiting for 2.8.0 final.



---

archive/issue_comments_286996.json:
```json
{
    "body": "the doc building is slightly worse... (but at least it fixes some bug)",
    "created_at": "2016-08-19T19:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286996",
    "user": "@videlec"
}
```

the doc building is slightly worse... (but at least it fixes some bug)



---

archive/issue_comments_286997.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-19T19:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286997",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_286998.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-21T13:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20768#issuecomment-286998",
    "user": "@vbraun"
}
```

Resolution: fixed
