# Issue 18928: Error in augmentation for mod 2 matrices

Issue created by migration from Trac.

Original creator: jhpalmieri

Original creation time: 2015-09-08 19:03:47


```
sage: reduce(lambda x,y: x.augment(y), [identity_matrix(GF(2), 1).sparse_matrix()], Matrix(GF(2), 1, 0))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-29-60d532a77af9> in <module>()
----> 1 reduce(lambda x,y: x.augment(y), [identity_matrix(GF(Integer(2)), Integer(1)).sparse_matrix()], Matrix(GF(Integer(2)), Integer(1), Integer(0)))

<ipython-input-29-60d532a77af9> in <lambda>(x, y)
----> 1 reduce(lambda x,y: x.augment(y), [identity_matrix(GF(Integer(2)), Integer(1)).sparse_matrix()], Matrix(GF(Integer(2)), Integer(1), Integer(0)))

/Users/palmieri/Desktop/Sage_stuff/git/sage/src/sage/matrix/matrix_mod2_dense.pyx in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.augment (build/cythonized/sage/matrix/matrix_mod2_dense.c:11113)()
   1576             right = right.column()
   1577 
-> 1578         cdef Matrix_mod2_dense other = right
   1579 
   1580         if self._nrows != other._nrows:

TypeError: Cannot convert sage.matrix.matrix_modn_sparse.Matrix_modn_sparse to sage.matrix.matrix_mod2_dense.Matrix_mod2_dense
```

This arises if you construct a `FiniteDimensionalAlgebra` over `GF(2)` using a list of sparse matrices, and then run `.is_unitary()` on it:

```
sage: A = FiniteDimensionalAlgebra(GF(2), [identity_matrix(GF(2), 1).sparse_matrix()])
sage: A.is_unitary()
  (same error)
```



---

Comment by vdelecroix created at 2015-09-11 19:34:48

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2015-09-11 19:34:48

New commits:


---

Comment by jhpalmieri created at 2015-09-11 21:53:51

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2015-09-11 21:53:51

That fixes the problem for me, thanks!


---

Comment by vbraun created at 2015-09-12 09:53:31

Resolution: fixed
