# Issue 17050: K.is_subring(K) not implemented for some fields K

archive/issues_017050.json:
```json
{
    "body": "This seems like it should be an easy special case `if self == foo` right before we raise the `NotImplementedError`.\n\nA few examples:\n\n\n```\nsage: QQbar.is_subring(QQbar)\n...\nNotImplementedError\n```\n\n\n\n```\nsage: RR.is_subring(RR)\n...\nNotImplementedError\n```\n\n\n\n```\nsage: CC.is_subring(CC)\n...\nNotImplementedError\n```\n\n\n\n```\nsage: K.<a> = NumberField(x^3-x+1/10)\nsage: K.is_ring()\nTrue\nsage: K.is_subring(K)\n...\nNotImplementedError\n```\n\n\n\n```\nsage: R.<x> = RR[]\nsage: R\nUnivariate Polynomial Ring in x over Real Field with 53 bits of precision\nsage: R.is_ring()\nTrue\nsage: R.is_subring(R)\n...\nNotImplementedError\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17287\n\n",
    "created_at": "2014-11-04T13:38:32Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "K.is_subring(K) not implemented for some fields K",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17050",
    "user": "https://github.com/orlitzky"
}
```
This seems like it should be an easy special case `if self == foo` right before we raise the `NotImplementedError`.

A few examples:


```
sage: QQbar.is_subring(QQbar)
...
NotImplementedError
```



```
sage: RR.is_subring(RR)
...
NotImplementedError
```



```
sage: CC.is_subring(CC)
...
NotImplementedError
```



```
sage: K.<a> = NumberField(x^3-x+1/10)
sage: K.is_ring()
True
sage: K.is_subring(K)
...
NotImplementedError
```



```
sage: R.<x> = RR[]
sage: R
Univariate Polynomial Ring in x over Real Field with 53 bits of precision
sage: R.is_ring()
True
sage: R.is_subring(R)
...
NotImplementedError
```



Issue created by migration from https://trac.sagemath.org/ticket/17287





---

archive/issue_comments_226440.json:
```json
{
    "body": "Changing keywords from \"\" to \"beginner\".",
    "created_at": "2015-09-06T13:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226440",
    "user": "https://github.com/orlitzky"
}
```

Changing keywords from "" to "beginner".



---

archive/issue_comments_226441.json:
```json
{
    "body": "Let me own this ticket for the next 10 days, i plan to use this for a formation about how to contribute to Sage.",
    "created_at": "2015-09-09T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226441",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Let me own this ticket for the next 10 days, i plan to use this for a formation about how to contribute to Sage.



---

archive/issue_comments_226442.json:
```json
{
    "body": "Set assignee to tmonteil.",
    "created_at": "2015-09-09T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226442",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Set assignee to tmonteil.



---

archive/issue_comments_226443.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-31T05:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226443",
    "user": "https://trac.sagemath.org/admin/accounts/users/ajagekar.akshay"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226444.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-31T05:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226444",
    "user": "https://trac.sagemath.org/admin/accounts/users/ajagekar.akshay"
}
```

New commits:



---

archive/issue_comments_226445.json:
```json
{
    "body": "So far so good! Whenever we fix a bug in sage, we like to add some tests to make sure that the bug is really fixed and won't come back again. In the description of this ticket, I found a few examples that used to fail but which now work. Can you add tests for those?\n\nYou can see what a test looks like by looking at the commented code right above your fix:\n\n\n```\nEXAMPLES::\n\n    sage: ZZ.is_subring(QQ)\n    True\n    sage: ZZ.is_subring(GF(19))\n    False\n```\n\n\nI would suggest adding a new section called \"TESTS\" and placing the new tests there. The structure of our documentation strings is described in full at http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings. Here's what the first test would look like:\n\n\n```\nTESTS:\n\nEvery ring is a subring of itself, :trac:`17287`::\n\n    sage: QQbar.is_subring(QQbar)\n    True\n```\n\n\nThe :trac: thing is a special sort of link to this ticket, described in http://doc.sagemath.org/html/en/developer/sage_manuals.html#chapter-sage-manuals-links. Then you can add the other examples from the description below that. When you're done adding them, don't forget to run `sage -b` to build the changes (even though you only changed a comment). Then you can run the tests for that file with `sage -t`. Like,\n\n\n```\n$ sage -t sage/rings/ring.pyx \nRunning doctests with ID 2016-01-31-09-08-05-2b1b6a12.\nGit branch: develop\nUsing --optional=mpir,python2,sage\nDoctesting 1 file.\nsage -t --warn-long 72.5 sage/rings/ring.pyx\n    [387 tests, 4.63 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 4.9 seconds\n    cpu time: 3.5 seconds\n    cumulative wall time: 4.6 seconds\n```\n\n\nAnd it takes forever, but at least once, someone should run `make ptestlong` to test the entire sage library with the change in place.",
    "created_at": "2016-01-31T14:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226445",
    "user": "https://github.com/orlitzky"
}
```

So far so good! Whenever we fix a bug in sage, we like to add some tests to make sure that the bug is really fixed and won't come back again. In the description of this ticket, I found a few examples that used to fail but which now work. Can you add tests for those?

You can see what a test looks like by looking at the commented code right above your fix:


```
EXAMPLES::

    sage: ZZ.is_subring(QQ)
    True
    sage: ZZ.is_subring(GF(19))
    False
```


I would suggest adding a new section called "TESTS" and placing the new tests there. The structure of our documentation strings is described in full at http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings. Here's what the first test would look like:


```
TESTS:

Every ring is a subring of itself, :trac:`17287`::

    sage: QQbar.is_subring(QQbar)
    True
```


The :trac: thing is a special sort of link to this ticket, described in http://doc.sagemath.org/html/en/developer/sage_manuals.html#chapter-sage-manuals-links. Then you can add the other examples from the description below that. When you're done adding them, don't forget to run `sage -b` to build the changes (even though you only changed a comment). Then you can run the tests for that file with `sage -t`. Like,


```
$ sage -t sage/rings/ring.pyx 
Running doctests with ID 2016-01-31-09-08-05-2b1b6a12.
Git branch: develop
Using --optional=mpir,python2,sage
Doctesting 1 file.
sage -t --warn-long 72.5 sage/rings/ring.pyx
    [387 tests, 4.63 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 4.9 seconds
    cpu time: 3.5 seconds
    cumulative wall time: 4.6 seconds
```


And it takes forever, but at least once, someone should run `make ptestlong` to test the entire sage library with the change in place.



---

archive/issue_comments_226446.json:
```json
{
    "body": "Great that some newcomer work on it! However, my impression is that this test should be for trivial cases. My fear in using equality is that this might take a while if the equality is hard to decide. Here i guess we want a fast shortcut for trivial cases, that is when `self is other` (which should solve the present use cases since most rings have unique representation).",
    "created_at": "2016-01-31T15:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226446",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Great that some newcomer work on it! However, my impression is that this test should be for trivial cases. My fear in using equality is that this might take a while if the equality is hard to decide. Here i guess we want a fast shortcut for trivial cases, that is when `self is other` (which should solve the present use cases since most rings have unique representation).



---

archive/issue_comments_226447.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-31T15:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226447",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_226448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T18:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226449.json:
```json
{
    "body": "According to suggestions I have made some changes and also added some tests for examples that previously failed.",
    "created_at": "2016-01-31T18:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226449",
    "user": "https://trac.sagemath.org/admin/accounts/users/ajagekar.akshay"
}
```

According to suggestions I have made some changes and also added some tests for examples that previously failed.



---

archive/issue_comments_226450.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-31T18:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226450",
    "user": "https://trac.sagemath.org/admin/accounts/users/ajagekar.akshay"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_226451.json:
```json
{
    "body": "Looks good, thanks! I have one more nitpick.\n\nIn the docstrings, the double-colons are used to indicate that \"the thing after this is a test.\" So you will see,\n\n\n```\nEXAMPLES::\n\n    sage: ZZ.is_subring(QQ)\n    True\n```\n\n\nand\n\n\n```\n\nTESTS:\n\nBlah blah blah::\n\n    sage: x == x\n    True\n```\n\n\nbut in the second case, the \"TESTS:\" doesn't need two trailing colons.\n\nFinally, these two lines can probably go:\n\n\n```\nsage: R\nUnivariate Polynomial Ring in x over Real Field with 53 bits of precision\n```\n\n\nThey don't really test anything useful. I think I included them in the description just to demonstrate that `R` is a ring.",
    "created_at": "2016-01-31T19:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226451",
    "user": "https://github.com/orlitzky"
}
```

Looks good, thanks! I have one more nitpick.

In the docstrings, the double-colons are used to indicate that "the thing after this is a test." So you will see,


```
EXAMPLES::

    sage: ZZ.is_subring(QQ)
    True
```


and


```

TESTS:

Blah blah blah::

    sage: x == x
    True
```


but in the second case, the "TESTS:" doesn't need two trailing colons.

Finally, these two lines can probably go:


```
sage: R
Univariate Polynomial Ring in x over Real Field with 53 bits of precision
```


They don't really test anything useful. I think I included them in the description just to demonstrate that `R` is a ring.



---

archive/issue_comments_226452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T19:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226453.json:
```json
{
    "body": "I corrected the typo and removed unnecessary test.",
    "created_at": "2016-01-31T19:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226453",
    "user": "https://trac.sagemath.org/admin/accounts/users/ajagekar.akshay"
}
```

I corrected the typo and removed unnecessary test.



---

archive/issue_comments_226454.json:
```json
{
    "body": "Everything looks good, thanks!",
    "created_at": "2016-02-04T19:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226454",
    "user": "https://github.com/orlitzky"
}
```

Everything looks good, thanks!



---

archive/issue_comments_226455.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-04T19:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226455",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226456.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-05T19:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17050#issuecomment-226456",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_016481.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-05T19:33:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17050",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17050#event-16481"
}
```
