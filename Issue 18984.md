# Issue 18984: Some new (n,2^k,1)-BIBD

Issue created by migration from https://trac.sagemath.org/ticket/19221

Original creator: ncohen

Original creation time: 2015-09-16 10:40:00

CC:  vdelecroix dimpase

This ticket implements a new construction of BIBD from a desarguesian projective plane. This gives us the (232,8,1)-BIBD needed for the database of strongly regular graphs, as well as some others.

Nathann


---

Comment by ncohen created at 2015-09-16 10:40:38

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-09-16 10:40:38

New commits:


---

Comment by git created at 2015-09-16 15:29:49

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-09-17 00:28:31

In `OA_and_oval` I proposed a standard method to build oval and hyperoval and you complained about coordinates ([here](http://trac.sagemath.org/ticket/16552#comment:4)). Now you are doing the very same for hyperovals thing but specialized in a function... not mentioning the fact that #16552 is stuck.

Moreover, why do you need GAP to build a hyperoval? These are rather trivial to construct (look at Colbourn-Dinitz, p. 709).


---

Comment by vdelecroix created at 2015-09-17 00:28:31

Changing status from needs_review to needs_info.


---

Attachment

Hyperovals in GF(2^n)


---

Comment by vdelecroix created at 2015-09-17 00:50:35

See [hyperoval.py](http://trac.sagemath.org/attachment/ticket/19221/hyperoval.py) for a much simpler way of building hyperovals in GF(2<sup>n</sup>).


---

Comment by dimpase created at 2015-09-17 03:37:26

Nathann builds a maximal n-arc, whereas a hyperoval is a maximal 2-arc.


---

Comment by dimpase created at 2015-09-17 03:47:24

Replying to [comment:3 vdelecroix]:
> In `OA_and_oval` I proposed a standard method to build oval and hyperoval and you complained about coordinates ([here](http://trac.sagemath.org/ticket/16552#comment:4)). Now you are doing the very same for hyperovals thing but specialized in a function... not mentioning the fact that #16552 is stuck.
> 
> Moreover, why do you need GAP to build a hyperoval? These are rather trivial to construct (look at Colbourn-Dinitz, p. 709).

Denniston's construction needs an irreducible binary quadratic form GF(q), for q power of 2. It is not 100% trivial, IMHO (well, I am not a number theorist), and 
GAP knows how to do it, that's why.


---

Comment by vdelecroix created at 2015-09-17 10:11:37

Replying to [comment:5 dimpase]:
> Nathann builds a maximal n-arc, whereas a hyperoval is a maximal 2-arc.

I see thanks for the clarification!

Though, the complaints about coordinates (as in [#16552 comment:4](http://trac.sagemath.org/ticket/16552#comment:4)) is still valid. If we change the way the Sage Desarguesian plane is labeled, this code will not be valid anymore.


---

Comment by ncohen created at 2015-09-17 10:26:25

> Though, the complaints about coordinates (as in [#16552 comment:4](http://trac.sagemath.org/ticket/16552#comment:4)) is still valid. If we change the way the Sage Desarguesian plane is labeled, this code will not be valid anymore.

I had had in on my computer for the last 10 minutes, but no way to push it yet. Oddly I can access web pages and ssh, but git doesn't want to hear anything.


---

Comment by git created at 2015-09-17 10:32:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-09-17 10:37:26

Changing status from needs_info to needs_review.


---

Comment by git created at 2015-09-17 10:40:45

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-09-17 12:44:49

I feel better this way. I think I might recycle #16552 for gathering all known constructions of maximal arcs in Desarguesian projective planes.


---

Comment by vdelecroix created at 2015-09-17 12:44:49

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2015-09-18 04:17:05

hmm, I have done an analogous change to ProjectiveGeometryDesign in #19226, but I called coordinates "coordinates", not "labels", and I have chosen no coordinates as the default. How about we unify this? 

I also do not understand how an invasive change of changing the behaviour to use   by default coordinates for the DesarguesianProjectivePlaneDesign was done without an appropriate deprecation...


---

Comment by dimpase created at 2015-09-18 04:17:05

Changing status from positive_review to needs_info.


---

Comment by dimpase created at 2015-09-18 04:32:01

I also don't understand why there is a separate implementation of DesarguesianProjectivePlaneDesign(q), which can be replaced by ProjectiveGeometryDesign(2,1,q). How about just making DesarguesianProjectivePlaneDesign into an alias to the latter?


---

Comment by ncohen created at 2015-09-18 06:20:27

> hmm, I have done an analogous change to ProjectiveGeometryDesign in #19226, but I called coordinates "coordinates", not "labels", and I have chosen no coordinates as the default. How about we unify this? 


1) 'labels' occurs is many Sage methods, and so I chose this term as users will after a time 'get used' to it. 'coordinates' is also meaningful in the context of projective planes, but will not be meaningful for all functions that [will/will not] add labels. And I would like to avoid this:
`Graph.is_tree(certificate=True),is_prime(get_data=True),Graph.is_strongly_regular(parameters=True),IncidenceStructrure.is_t_design(return_parameters=True)`. In terms of interface, I think that 'certificate' everywhere would have been better.

For the choice of coordinates, I made the usual choice: from most user-friendly to least user-friendly. Like we have a 'check' argument (enabled by default) that can be diabled if needed, like `Graph.edges()` returns edge labels are `Graph.edges(labels=False)` does not.

> I also do not understand how an invasive change of changing the behaviour to use   by default coordinates for the DesarguesianProjectivePlaneDesign was done without an appropriate deprecation...

Because it apparently does not break anything that was claimed previously by its documentation. Also, because it is clearly an improvement.

> I also don't understand why there is a separate implementation of DesarguesianProjectivePlaneDesign(q), which can be replaced by ProjectiveGeometryDesign(2,1,q). How about just making DesarguesianProjectivePlaneDesign into an alias to the latter?

If I remember correctly, the explanation to that lies in the running times.

Nathann


---

Comment by ncohen created at 2015-09-18 12:01:54

Please set to `positive_review` if your doubts have been cleared.

Nathann


---

Comment by ncohen created at 2015-09-18 12:01:54

Changing status from needs_info to needs_review.


---

Comment by vbraun created at 2015-09-18 13:03:18

Resolution: fixed


---

Comment by ncohen created at 2015-09-18 13:05:43

Okayyyyyyy... That settles it I guess `XD`


---

Comment by vbraun created at 2015-09-18 14:38:45

When I merged it, this was positive review. Please figure out what you want to do first


---

Comment by vbraun created at 2015-09-18 14:38:45

Resolution changed from fixed to 


---

Comment by vbraun created at 2015-09-18 14:38:45

Changing status from closed to new.


---

Comment by vbraun created at 2015-09-18 14:38:54

Changing status from new to needs_info.


---

Comment by ncohen created at 2015-09-18 14:41:59

Well, I personally don't mind if this gets merged. Dima asked something about it afterwards, let's see if he still wonders about it.


---

Comment by dimpase created at 2015-09-18 16:35:41

Volker, it's clearly a workflow bug that your "merge" is not recorded anywhere on the ticket. Just because different reviewers might have different opinions, and they need to converge on a consensus. IMHO an open ticket must be a fair game for its status change.


---

Comment by vbraun created at 2015-09-18 16:39:57

As I said it before, the bug is that people still can make changes after "positive review". Really you should open a new ticket. If you have different opinions then talk about it before setting it to positive review. The only alternative is that the ticket is immediately closed when I merge it, in which case you don't get to change away from positive review either.


---

Comment by dimpase created at 2015-09-18 16:54:38

Replying to [comment:15 ncohen]:
> > hmm, I have done an analogous change to ProjectiveGeometryDesign in #19226, but I called coordinates "coordinates", not "labels", and I have chosen no coordinates as the default. How about we unify this? 
> 
> 
> 1) 'labels' occurs is many Sage methods, and so I chose this term as users will after a time 'get used' to it. 'coordinates' is also meaningful in the context of projective planes, but will not be meaningful for all functions that [will/will not] add labels. And I would like to avoid this:

but `labels` are meant to be user-defineable. Calling a set of labels chosen by the implementation `labels` is unhelpful and uninformative, to say the least.


> `Graph.is_tree(certificate=True),is_prime(get_data=True),Graph.is_strongly_regular(parameters=True),IncidenceStructrure.is_t_design(return_parameters=True)`. In terms of interface, I think that 'certificate' everywhere would have been better.
> 
> For the choice of coordinates, I made the usual choice: from most user-friendly to least user-friendly. Like we have a 'check' argument (enabled by default) that can be diabled if needed, like `Graph.edges()` returns edge labels are `Graph.edges(labels=False)` does not.
> 
> > I also do not understand how an invasive change of changing the behaviour to use   by default coordinates for the DesarguesianProjectivePlaneDesign was done without an appropriate deprecation...
> 
> Because it apparently does not break anything that was claimed previously by its documentation. Also, because it is clearly an improvement. 

well, as you know, even Sage library code used the implementation's labellings in some 
places, instead of doing this via ground_set()...

> 
> > I also don't understand why there is a separate implementation of DesarguesianProjectivePlaneDesign(q), which can be replaced by ProjectiveGeometryDesign(2,1,q). How about just making DesarguesianProjectivePlaneDesign into an alias to the latter?
> 
> If I remember correctly, the explanation to that lies in the running times.
Indeed, it's 50 times faster on PG(2,16). I wonder why...


---

Comment by ncohen created at 2015-09-18 17:05:09

> but `labels` are meant to be user-defineable

Whaaaat? I don't know what makes you think that. `labels=False` makes sense to me. There is nothing in that word that says 'user-defineable' or anything. If you want to change the labels, `.relabel` is there for you.

> Calling a set of labels chosen by the implementation `labels` is unhelpful and uninformative, to say the least.

It just means that the structure is not integer-labelled. Any way I cannot care less: if you chose to overlook that all our functions will have as many ways to call the same thing (labels, coordinate, ... do you see this end?) then I will not fight again, it's your win anytime because you are the reviewer and by Sage's laws you can make my life hell until I give up.

So add a commit.

> > If I remember correctly, the explanation to that lies in the running times.
> Indeed, it's 50 times faster on PG(2,16). I wonder why...

Surprising. Might be because we are multiplying the elements of the ground set using Sage, which is always slow for ... well, everything. Perhaps the way `PG` is called changed in the meantime, I do not remember. If you feel bad about it you can write a ticket, it's always good to see speed improvements.

Nathann


---

Comment by dimpase created at 2015-09-18 17:07:45

Replying to [comment:23 vbraun]:
> As I said it before, the bug is that people still can make changes after "positive review". Really you should open a new ticket. 

There should be some grace period, at least, then. Say, 24 hours sounds reasonable (unless it's a blocker etc). Opening a new ticket is not very practical, as things to discuss are then not there...

> If you have different opinions then talk about it before setting it to positive review.

yes, but the ticket was set to positive review at something like 5am my present (PST) time.

> The only alternative is that the ticket is immediately closed when I merge it, in which case you don't get to change away from positive review either.


---

Comment by dimpase created at 2015-09-18 17:19:51

Replying to [comment:25 ncohen]:
> > but `labels` are meant to be user-defineable
> 
> Whaaaat? I don't know what makes you think that. `labels=False` makes sense to me. There is nothing in that word that says 'user-defineable' or anything. If you want to change the labels, `.relabel` is there for you.

well, `.relabel()` does relabel things in a user-defineable way (at least it has this option).



> 
> > Calling a set of labels chosen by the implementation `labels` is unhelpful and uninformative, to say the least.
> 
> It just means that the structure is not integer-labelled. Any way I cannot care less: if you chose to overlook that all our functions will have as many ways to call the same thing (labels, coordinate, ... do you see this end?) then I will not fight again, it's your win anytime because you are the reviewer and by Sage's laws you can make my life hell until I give up. 

I merely say that `coordinates` is more informative name for this parameter.
Do you agree? If yes, I will change this on #19226, to make it uniform with ProjectiveGeometryDesign.


> 
> So add a commit.

this ticket is closed, as you know. How about #19226?

> 
> > > If I remember correctly, the explanation to that lies in the running times.
> > Indeed, it's 50 times faster on PG(2,16). I wonder why...
> 
> Surprising. Might be because we are multiplying the elements of the ground set using Sage, which is always slow for ... well, everything. Perhaps the way `PG` is called changed in the meantime, I do not remember. If you feel bad about it you can write a ticket, it's always good to see speed improvements.

probably it's because it handles the case of 1-dimensional subspaces by generic code, which does linear algebra on matrices...


---

Comment by ncohen created at 2015-09-18 17:23:47

> well, `.relabel()` does relabel things in a user-defineable way (at least it has this option).

Yeah. That's why it is called *re*label. Saying that an object is labelled or unlabelled is not exactly new, is it? That's the meaning that it has in the function I defined.

> I merely say that `coordinates` is more informative name for this parameter.
> Do you agree? If yes, I will change this on #19226, to make it uniform with ProjectiveGeometryDesign.

I agree that it is more informative, and I disagree that it is what should be used here. Because of the reason I mentionned earlier, i.e. having the same thing that goes under different names in different functions.

> this ticket is closed, as you know. How about #19226?

I am not sure. I have no idea if it was merged or not in the end, to be honest. It is in `needs_info`, and I think that Volker 'unmerged it' because of the conversation you just had.

Nathann


---

Comment by dimpase created at 2015-09-18 17:29:31

Are there any (combinatorial/graph theory) constructors in Sage with parameter `labels=` ?


---

Comment by ncohen created at 2015-09-18 17:31:56

> Are there any (combinatorial/graph theory) constructors in Sage with parameter `labels=` ?

Don't know exactly. I was thinking of adding one in `posets.BooleanLattice`. You also have the 'digraphs.DeBruijn(vertices="strings")', which I forgot in the list of the names that get adapted to every specific situation. Probably others, I don't know.

Nathann


---

Comment by dimpase created at 2015-09-18 17:39:36

Replying to [comment:30 ncohen]:
> > Are there any (combinatorial/graph theory) constructors in Sage with parameter `labels=` ?
> 
> Don't know exactly. I was thinking of adding one in `posets.BooleanLattice`. You also have the `digraphs.DeBruijn(vertices="strings")`, which I forgot in the list of the names that get adapted to every specific situation. Probably others, I don't k now.


`vertices="blah"` is a good one, it's right to the point. Perhaps `point_coordinates=T/F` would be even better than `coordinates=T/F` in our case. But `labels=T/F` is not clear at all: indeed what is being labelled, and how, can only be read in the docs...


---

Comment by ncohen created at 2015-09-18 17:41:42

> `vertices="blah"` is a good one, it's right to the point. Perhaps `point_coordinates=T/F` would be even better than `coordinates=T/F` in our case. But `labels=T/F` is not clear at all: indeed what is being labelled, and how, can only be read in the docs...

It's probably just that I am dead tired of typing `G.is_strongly_regular(parameters=True)`, just before getting an error because it should be `return_parameters=True` and to do the very same mistake in the other direction with `is_t_design`. I do this 10 times a day at least, no joke.

Add a commit. I won't fight for that.

Nathann


---

Comment by dimpase created at 2015-09-18 17:47:24

let's get this closed; I'll do the changes we just discussed on #19226.


---

Comment by dimpase created at 2015-09-18 17:47:24

Changing status from needs_info to positive_review.


---

Comment by ncohen created at 2015-09-18 17:48:10

NONONONO, in another ticket. #19226 already does sufficiently many things.


---

Comment by dimpase created at 2015-09-18 17:51:24

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-09-18 18:28:27

Replying to [comment:32 ncohen]:
> It's probably just that I am dead tired of typing `G.is_strongly_regular(parameters=True)`, just before getting an error because it should be `return_parameters=True` and to do the very same mistake in the other direction with `is_t_design`. I do this 10 times a day at least, no joke.

The solution is to have proper names for methods, not random (and not tab-discoverable) keyword arguments to change the output to contradict the method name:

```
sage: obj.is_foo(parameters=True)
(42, 'cherry')
```

What does that tell me without reading the docs? Nothing. VS:

```
sage: obj.enumerated_fruit()
(42, 'cherry')
```



---

Comment by dimpase created at 2015-09-18 18:36:56

and implementation-wise, it's matter of adding aliases:
(say, `G.parameters_strong_regularity := G.is_strongly_regular(parameters=True)`), etc.


---

Comment by dimpase created at 2015-09-18 19:09:01

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-09-18 20:00:53

> The solution is to have proper names for methods, not random (and not tab-discoverable) keyword arguments to change the output to contradict the method name:

Probably. What should we do?

`designs.DesarguesianProjectivePlaneWithHomogeneousCoordinates`?

Look great.

Nathann


---

Comment by ncohen created at 2015-09-18 20:02:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-09-19 18:40:47

Resolution: fixed
