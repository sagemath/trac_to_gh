# Issue 31208: cython: Upgrade to 0.29.22

Issue created by migration from https://trac.sagemath.org/ticket/31445

Original creator: mkoeppe

Original creation time: 2021-03-01 19:28:34

CC:  tscrim arojas fbissey




---

Comment by mkoeppe created at 2021-03-23 00:52:23

cython 0.29.22 issues future-warnings:

```
  warning: sage/groups/perm_gps/partn_ref2/refinement_generic.pxd:38:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
  warning: sage/groups/perm_gps/partn_ref2/refinement_generic.pxd:38:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
```



---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-05-24 23:41:07

New commits:


---

Comment by mkoeppe created at 2021-05-24 23:49:41

Does someone already have patches to fix the deprecation warnings that Cython 0.29.23 issues?


---

Comment by git created at 2021-08-11 23:45:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-08-12 00:01:00

List of warnings:

```
    warning: sage/groups/perm_gps/partn_ref2/refinement_generic.pxd:38:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/matrix/matrix_modn_dense_template.pxi:189:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/matrix/matrix_modn_dense_template.pxi:257:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/matrix/matrix_modn_dense_template.pxi:258:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/matrix/matrix_modn_dense_template.pxi:278:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/matrix/matrix_modn_dense_template.pxi:300:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/numerical/backends/generic_sdp_backend.pxd:34:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/numerical/linear_tensor_element.pxd:4:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/rings/laurent_series_ring_element.pxd:4:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/rings/padics/CR_template.pxi:1218:14: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/rings/polynomial/laurent_polynomial.pxd:15:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/rings/power_series_mpoly.pxd:5:10: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
    warning: sage/rings/puiseux_series_ring_element.pxd:5:11: cpdef variables will not be supported in Cython 3; currently they are no different from cdef variables
```



---

Comment by git created at 2021-08-12 00:11:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-08-12 00:11:41

Changing status from new to needs_review.


---

Comment by fbissey created at 2021-08-12 00:18:01

My first reaction was that it wasn't many in your list. I have grepped sage source code for "cpdef" and it comes out at 3624 lines across 444 files. Why would the one you change be the only ones producing warnings?


---

Comment by mkoeppe created at 2021-08-12 00:19:24

Functions defined with `cpdef` do not need changing, only variables.


---

Comment by fbissey created at 2021-08-12 00:24:23

OK, that weeds a lot of things. I still have 51 warnings currently which is much more than what you patch.

I will test the patch to see if I still see some afterwards.


---

Comment by mkoeppe created at 2021-08-12 00:25:41

My list of warnings above has been run through `sort -u`; many appear multiple times


---

Comment by fbissey created at 2021-08-12 00:33:08

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2021-08-12 00:33:08

Replying to [comment:16 mkoeppe]:
> My list of warnings above has been run through `sort -u`; many appear multiple times

Indeed, that reduces the number to 13 which matches your list. It looks very good now.


---

Comment by mkoeppe created at 2021-08-12 01:23:17

Thank you!


---

Comment by vbraun created at 2021-08-29 09:37:44

Resolution: fixed
