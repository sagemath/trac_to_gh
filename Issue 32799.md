# Issue 32799: random doctest failure in src/sage/crypto/util.py

Issue created by migration from https://trac.sagemath.org/ticket/33036

Original creator: lorenz

Original creation time: 2021-12-17 07:12:29

Part of #32544:

```
sage -t --long --random-seed=88125173308017227407627450515947596866 src/sage/crypto/util.py
**********************************************************************
File "src/sage/crypto/util.py", line 359, in sage.crypto.util.carmichael_lambda
Failed example:
    P == ones
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  32 in sage.crypto.util.carmichael_lambda
    [113 tests, 1 failure, 0.07 s]
```

(From a doctest in #32502.)


---

Comment by lorenz created at 2021-12-17 07:38:52

Changing status from new to needs_review.


---

Comment by mjo created at 2021-12-20 13:48:06

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2021-12-20 13:48:06

LGTM, presumably working mod-1 messes things up?


---

Comment by lorenz created at 2021-12-21 03:37:46

Exactly, the test does something along the lines of `[power_mod(...,n) for ...] == [1,1,1,...]` which fails for `n==1` because the left side is all zeroes.


---

Comment by vbraun created at 2022-01-01 00:23:05

Resolution: fixed
