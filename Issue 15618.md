# Issue 15618: Disable PARI algorithm for weierstrass_p in positive characteristic

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2014-02-24 12:39:24

CC:  cremona pbruin

This is needed for #15767.


---

Comment by git created at 2014-02-24 14:10:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2014-02-24 14:40:18

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-02-24 14:40:18

New commits:


---

Comment by pbruin created at 2014-02-24 16:36:04

An argument to be substituted for `%s` is missing in the following line:

```
raise ValueError("for computing the Weierstrass p-function via pari, the characteristic (%s) of the underlying field must be zero")
```



---

Comment by git created at 2014-02-24 19:35:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-02-24 21:51:28

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2014-02-24 22:04:06

In the meantime, Karim Belabas fixed the elliptic functions in PARI for base fields of positive characteristic.  Maybe we should just change the test for the characteristic in the case `algorithm='pari'` accordingly?


---

Comment by pbruin created at 2014-02-25 01:59:28

I did some further cleaning up on a new branch `u/pbruin/15855-weierstrass_p_cleanup`.  The test for `p >= prec + 3` can also be done at the beginning, since _p_ really arise in the denominators of the series, we are not just dividing by it as an intermediate step of the algorithm.  With this patch, we don't insist on characteristic 0 when `algorithm='pari'`, but neither do we use PARI by default.  If you agree with the changes in this branch and it still good as a dependency of #15767, you can put it in the branch field.

We probably have to check if everything still works after the latest PARI fix, hence `needs_info`.


---

Comment by pbruin created at 2014-02-25 01:59:28

Changing status from positive_review to needs_info.


---

Comment by jdemeyer created at 2014-02-25 08:20:35

Alternatively, repurpose this ticket as a cleanup ticket and leave the algorithm choice as it was.


---

Comment by jdemeyer created at 2014-02-25 08:38:48

Replying to [comment:10 jdemeyer]:
> Alternatively, repurpose this ticket as a cleanup ticket and leave the algorithm choice as it was.
Peter, let me know if this sounds like a good idea, then I will implement it.


---

Comment by pbruin created at 2014-02-25 10:45:13

Replying to [comment:11 jdemeyer]:
> Replying to [comment:10 jdemeyer]:
> > Alternatively, repurpose this ticket as a cleanup ticket and leave the algorithm choice as it was.
> Peter, let me know if this sounds like a good idea, then I will implement it.
Yes, if PARI's `ellwp()` works as intended again, I think that is the best plan.


---

Comment by git created at 2014-03-03 22:07:07

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2014-03-03 22:23:24

Changing status from needs_info to needs_review.


---

Comment by pbruin created at 2014-03-05 22:32:07

The last part of the new changelog entry in `ell_wp.py` is no longer accurate.  Besides that, positive review.

(Maybe the additional change proposed in comment:9 isn't the best one; perhaps there are elliptic curves where more coefficients of the series are well defined, in which case a `NotImplementedError` is better than an algorithm-independent `ValueError`.)


---

Comment by git created at 2014-03-06 08:31:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-03-06 08:31:40

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2014-03-06 08:31:40

Replying to [comment:16 pbruin]:
> The last part of the new changelog entry in `ell_wp.py` is no longer accurate.  Besides that, positive review.
Done.

> (Maybe the additional change proposed in comment:9 isn't the best one; perhaps there are elliptic curves where more coefficients of the series are well defined, in which case a `NotImplementedError` is better than an algorithm-independent `ValueError`.)
I have no idea, I don't know the mathematics well enough.


---

Comment by vbraun created at 2014-03-11 16:15:37

Resolution: fixed
