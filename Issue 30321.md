# Issue 30321: Implement the conjugate of a set partition

Issue created by migration from https://trac.sagemath.org/ticket/30558

Original creator: zabrocki

Original creation time: 2020-09-11 19:08:05

CC:  saliola aschilling

Implement the notion of the conjugate of a set partition defined in "On Conjugates for Set Partitions and Integer Compositions" by David Callan for the combinatorial class `SetPartition`


---

Comment by zabrocki created at 2020-09-11 21:59:07

New commits:


---

Comment by zabrocki created at 2020-09-11 21:59:07

Changing status from new to needs_review.


---

Comment by aschilling created at 2020-09-12 05:23:39

Changing status from needs_review to positive_review.


---

Comment by aschilling created at 2020-09-12 05:23:39

Changing keywords from "" to "set partitions, conjugate".


---

Comment by chapoton created at 2020-09-12 06:15:57

too late, but this is a bit ugly

```
if len(initials)+len(singletons)==0:
```

and could have been

```
if not initials and not singletons:
```



---

Comment by slelievre created at 2020-09-12 10:35:34

It might be fine to reopen; otherwise fix it in a follow-up ticket.

Along with pep8 and maybe these other small things:


```diff
-            return (support+[support[0]])[support.index(a)+1]
+            return support[(support.index(a)+1) % len(support)]
```



```diff
-            support = sorted([a for S in sp for a in S])
+            support = sorted(a for S in sp for a in S)
```



```diff
-        support = sorted([a for S in self for a in S])
+        support = sorted(a for S in self for a in S)
```



---

Comment by git created at 2020-09-12 11:23:23

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-09-12 11:23:23

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-09-12 12:02:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2020-09-12 15:36:51

Actually, this corner case also needs to be fixed:

```
    sage: s = SetPartitions(0).list()[0]                                                                                                                                
    sage: s.conjugate()                                                                                                                                                 
    ---------------------------------------------------------------------------
    ValueError                                Traceback (most recent call last)
```



---

Comment by git created at 2020-09-12 15:55:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2020-09-12 16:48:54

Add a doc test to the corner cases too!


---

Comment by git created at 2020-09-12 16:58:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slelievre created at 2020-09-12 20:08:22

Frédéric, any final formatting touch?

Then back to positive review?


---

Comment by aschilling created at 2020-09-13 00:00:59

Yes, you can set it back to positive review!


---

Comment by chapoton created at 2020-09-13 06:12:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-11-07 16:22:34

Resolution: fixed
