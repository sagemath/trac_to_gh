# Issue 31322: Make ModularFormRings manipulate formal objects

archive/issues_031322.json:
```json
{
    "body": "CC:  @davidayotte\n\nCurrently, `ModularFormRings` is manipulating truncated q-series. It is desirable to be able to manipulate the ring of modular forms. In other words, being able to define `E4 + E6` and access its homogeneous components.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31559\n\n",
    "created_at": "2021-03-25T18:08:57Z",
    "labels": [
        "modular forms",
        "major",
        "enhancement"
    ],
    "title": "Make ModularFormRings manipulate formal objects",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31322",
    "user": "vdelecroix"
}
```
CC:  @davidayotte

Currently, `ModularFormRings` is manipulating truncated q-series. It is desirable to be able to manipulate the ring of modular forms. In other words, being able to define `E4 + E6` and access its homogeneous components.

Issue created by migration from https://trac.sagemath.org/ticket/31559





---

archive/issue_comments_447795.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-27T02:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447795",
    "user": "mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_447796.json:
```json
{
    "body": "Set assignee to @DavidAyotte.",
    "created_at": "2021-06-10T20:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447796",
    "user": "@DavidAyotte"
}
```

Set assignee to @DavidAyotte.



---

archive/issue_comments_447797.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-06-10T20:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447797",
    "user": "@DavidAyotte"
}
```

New commits:



---

archive/issue_comments_447798.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-11T14:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447798",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447799.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-15T01:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447799",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447800.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-16T21:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447800",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447801.json:
```json
{
    "body": "In the constructor I would either allow a list of modular forms or a dictionary. In both situations there should be a check that the data is consistent. And in the case it is a dictionary, you would better not write\n\n```\n    self.__mf_dict = mf_dict\n```\n\nbecause this uses the dictionary provided in the input. This dictionary can be modified outside of the scope of the class and corrupt the data in a scenario such as\n\n```\nsage: d = {}\nsage: f = M(d)\nsage: d[3] = 'hello'  # data corruption\n```\n\n\nWhy do you have a method `_dictionary` and not use directly `__mf_dict`. This add one level of indirection for no purpose that I can see.\n\nWhen you iterate over the keys and values of a dictionary it is best to use the `items()` method as in\n\n```\ndef __neg__(self):\n    GM = self.__class__\n    minus_self = {k:-v for k,v in self.__mf_dict.items()}\n    return GM(self.parent(), minus_self)\n```\n\n\nYou should always take care of removing the entries in the dictionary whose values are zero (in the constructor and after a binary operation). Otherwise a method such as `is_homogeneous` gets completely wrong.\n\nUse `__neg__` and not `_neg_` (this method does not go through corecion).\n\nIn `__getitem__` you would better return the zero of the base ring and not the python integer `0`.\n\nDon't write `x.__getitem__(k)` but `x[k]`. The latter is much faster in general.\n\nRather than\n\n```\ndef weights(self):\n    wts = list(self._dictionnary().keys())\n    wts.sort()\n    return wts\n```\n\nyou could use\n\n```\ndef weights(self):\n    return sorted(self.__mf_dict)\n```\n\n\nInstead of\n\n```\ndef is_homogeneous(self):\n    if len(self._dictionnary())>1:\n        return False\n    return True\n```\n\nyou could use\n\n```\ndef is_homogeneous(self):\n    return len(self.__mf_dict) <= 1\n```\n\n\nFor the documentation, it is `INPUT` and not `INPUTS`. And the items afterwards should not be indented.\n\nIt would be better to inherit from `ModuleElement` (not doing this causes trouble with the coercion model). Once done, implement the method `_lmul_` for scalar multiplications (it should be possible to do `integer x (element of the ring of modular forms)`.\n\nAnother method that is lacking is `__bool__` (for the zero test). Once the dictionary is clean (ie no zero value) you could simply do\n\n```\ndef __bool__(self):\n    return bool(self.__mf_dict)\n```\n\nAlso write methods `is_zero` and `is_one` that are standard ones for rings.",
    "created_at": "2021-06-22T07:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447801",
    "user": "vdelecroix"
}
```

In the constructor I would either allow a list of modular forms or a dictionary. In both situations there should be a check that the data is consistent. And in the case it is a dictionary, you would better not write

```
    self.__mf_dict = mf_dict
```

because this uses the dictionary provided in the input. This dictionary can be modified outside of the scope of the class and corrupt the data in a scenario such as

```
sage: d = {}
sage: f = M(d)
sage: d[3] = 'hello'  # data corruption
```


Why do you have a method `_dictionary` and not use directly `__mf_dict`. This add one level of indirection for no purpose that I can see.

When you iterate over the keys and values of a dictionary it is best to use the `items()` method as in

```
def __neg__(self):
    GM = self.__class__
    minus_self = {k:-v for k,v in self.__mf_dict.items()}
    return GM(self.parent(), minus_self)
```


You should always take care of removing the entries in the dictionary whose values are zero (in the constructor and after a binary operation). Otherwise a method such as `is_homogeneous` gets completely wrong.

Use `__neg__` and not `_neg_` (this method does not go through corecion).

In `__getitem__` you would better return the zero of the base ring and not the python integer `0`.

Don't write `x.__getitem__(k)` but `x[k]`. The latter is much faster in general.

Rather than

```
def weights(self):
    wts = list(self._dictionnary().keys())
    wts.sort()
    return wts
```

you could use

```
def weights(self):
    return sorted(self.__mf_dict)
```


Instead of

```
def is_homogeneous(self):
    if len(self._dictionnary())>1:
        return False
    return True
```

you could use

```
def is_homogeneous(self):
    return len(self.__mf_dict) <= 1
```


For the documentation, it is `INPUT` and not `INPUTS`. And the items afterwards should not be indented.

It would be better to inherit from `ModuleElement` (not doing this causes trouble with the coercion model). Once done, implement the method `_lmul_` for scalar multiplications (it should be possible to do `integer x (element of the ring of modular forms)`.

Another method that is lacking is `__bool__` (for the zero test). Once the dictionary is clean (ie no zero value) you could simply do

```
def __bool__(self):
    return bool(self.__mf_dict)
```

Also write methods `is_zero` and `is_one` that are standard ones for rings.



---

archive/issue_comments_447802.json:
```json
{
    "body": "If `qexp` is simply an alias of `q_expansion` write `qexp = q_expansion`. The documentation of `q_expansion` could mention the fact that such an alias exists.\n\nThe method `_repr_` could be simplified to\n\n```\ndef _repr_(self):\n    return str(self.q_expansion())\n```\n\n\nSince now `ModularFormsRing` inherit from `Parent` you could use the test suite. You should add the following test in the constructor `ModularFormsRing.__init__`\n\n```\nTESTS::\n\n    sage: M = ModularFormsRing(1)\n    sage: TestSuite(M).run()\n```\n\nThis test suite should also be run with other groups (~~especially non-congruence once~~) and other base rings.\n\nThe coercion is not tested, right? You should add various tests for\n\n```\n(modular form) + (element of ModularFormsRing)\n(element of ModularFormsRing) + (modular form)\n(scalar) + (element of ModularFormsRing)\n(element of ModularFormsRing) + (scalar)\n```\n\n\nTo determine coercions, one alternative could be to rely on what is implemented for modular forms. Namely the `ModularFormsRing` should have a method to obtain the modular forms of a given weight (something like `M.graded_component(self, weight)`. It would then be possible to use coercions with respect to whatever is the result of this method.",
    "created_at": "2021-06-22T07:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447802",
    "user": "vdelecroix"
}
```

If `qexp` is simply an alias of `q_expansion` write `qexp = q_expansion`. The documentation of `q_expansion` could mention the fact that such an alias exists.

The method `_repr_` could be simplified to

```
def _repr_(self):
    return str(self.q_expansion())
```


Since now `ModularFormsRing` inherit from `Parent` you could use the test suite. You should add the following test in the constructor `ModularFormsRing.__init__`

```
TESTS::

    sage: M = ModularFormsRing(1)
    sage: TestSuite(M).run()
```

This test suite should also be run with other groups (~~especially non-congruence once~~) and other base rings.

The coercion is not tested, right? You should add various tests for

```
(modular form) + (element of ModularFormsRing)
(element of ModularFormsRing) + (modular form)
(scalar) + (element of ModularFormsRing)
(element of ModularFormsRing) + (scalar)
```


To determine coercions, one alternative could be to rely on what is implemented for modular forms. Namely the `ModularFormsRing` should have a method to obtain the modular forms of a given weight (something like `M.graded_component(self, weight)`. It would then be possible to use coercions with respect to whatever is the result of this method.



---

archive/issue_comments_447803.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-23T16:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447803",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447804.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-25T16:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447804",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447805.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-26T14:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447805",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T15:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447806",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T17:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447807",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447808.json:
```json
{
    "body": "Looks good. Could you set to ~~positive review~~ **needs review** so that we can also have an opinion from patchbots?\n\n`is_zero` would better be implemented as `return not self`.\n\nRather than `self[0] == 1` I would rather use `self._forms_dictionary[0].is_one()` which has less indirections.\n\nYour `__getitem__` is too laxist. You could access `F['a']` or `F[(1,2,3)]`.\n\nI am not sure we want to support rich comparison involving anything else than `==` or `!=`. What would be the meaning of `F < G`?\n\n(just a remark) Technically speaking, it is conceivable to do binary operations on modular forms with different groups. It is a well defined modular forms for the intersection of the two groups (which is still finite index).\n\nYour one element looks wrong. The dictionary should be `{0: self.base_ring().one()}`.",
    "created_at": "2021-06-29T22:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447808",
    "user": "vdelecroix"
}
```

Looks good. Could you set to ~~positive review~~ **needs review** so that we can also have an opinion from patchbots?

`is_zero` would better be implemented as `return not self`.

Rather than `self[0] == 1` I would rather use `self._forms_dictionary[0].is_one()` which has less indirections.

Your `__getitem__` is too laxist. You could access `F['a']` or `F[(1,2,3)]`.

I am not sure we want to support rich comparison involving anything else than `==` or `!=`. What would be the meaning of `F < G`?

(just a remark) Technically speaking, it is conceivable to do binary operations on modular forms with different groups. It is a well defined modular forms for the intersection of the two groups (which is still finite index).

Your one element looks wrong. The dictionary should be `{0: self.base_ring().one()}`.



---

archive/issue_comments_447809.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-30T02:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447809",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447810.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-30T02:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447810",
    "user": "@DavidAyotte"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_447811.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-30T13:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447811",
    "user": "@DavidAyotte"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_447812.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-30T14:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447812",
    "user": "vdelecroix"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_447813.json:
```json
{
    "body": "As an author, you are not supposed to switch the ticket to positive review.",
    "created_at": "2021-06-30T14:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447813",
    "user": "vdelecroix"
}
```

As an author, you are not supposed to switch the ticket to positive review.



---

archive/issue_comments_447814.json:
```json
{
    "body": "That is my fault, I meant \"needs review\" instead of \"positive review\". Sorry.",
    "created_at": "2021-06-30T14:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447814",
    "user": "vdelecroix"
}
```

That is my fault, I meant "needs review" instead of "positive review". Sorry.



---

archive/issue_comments_447815.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-30T15:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447815",
    "user": "@DavidAyotte"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447816.json:
```json
{
    "body": "No problem. I will leave it in \"needs review\" to see what the patchbots says.",
    "created_at": "2021-06-30T15:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447816",
    "user": "@DavidAyotte"
}
```

No problem. I will leave it in "needs review" to see what the patchbots says.



---

archive/issue_comments_447817.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-30T17:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447817",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447818.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T15:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447818",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447819.json:
```json
{
    "body": "\n```\nsage: M = ModularFormsRing(Gamma1(6))\nsage: f = M.0\nsage: g = M.1\nsage: f*g\nTraceback (most recent call last):\n...\nValueError: the group and/or the base ring of at least one modular form (q + 5*q^3 + 22*q^4 + 6*q^5 + O(q^6)) is not consistant with the base space\n```\n\n\nGot this error while working on #32135. This happens because, in the example above, the form `f*g` has trivial character hence it lives in M(Gamma0(6)).",
    "created_at": "2021-07-09T01:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447819",
    "user": "@DavidAyotte"
}
```


```
sage: M = ModularFormsRing(Gamma1(6))
sage: f = M.0
sage: g = M.1
sage: f*g
Traceback (most recent call last):
...
ValueError: the group and/or the base ring of at least one modular form (q + 5*q^3 + 22*q^4 + 6*q^5 + O(q^6)) is not consistant with the base space
```


Got this error while working on #32135. This happens because, in the example above, the form `f*g` has trivial character hence it lives in M(Gamma0(6)).



---

archive/issue_comments_447820.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-09T01:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447820",
    "user": "@DavidAyotte"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_447821.json:
```json
{
    "body": "After searching a bit in the code, I think that I found the origin of this error. It comes from the method `__mul__` of the class `ModularFormElement` (in `sage/modular/modform/element.py`). Here's the description of the method:\n\n\n```\ndef __mul__(self, other):\n        r\"\"\"\n        Calculate the product self * other.\n\n        This tries to determine the\n        characters of self and other, in order to avoid having to compute a\n        (potentially very large) Gamma1 space. Note that this might lead to\n        a modular form that is defined with respect to a larger subgroup than\n        the factors are.\n```\n\n\nThis is illustrated by this example:\n\n```\nsage: f = ModularForms(Gamma1(3), 5).0\nsage: f*f\n1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)\nsage: (f*f).parent()\nModular Forms space of dimension 4 for Congruence Subgroup Gamma0(3) of weight 10 over Rational Field\n```\n\n\nThis poses a problem as it is not always possible to add two forms with different groups:\n\n\n```\nsage: M1 = ModularForms(Gamma1(8), 8); M1\nModular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field\nsage: M0 = ModularForms(Gamma0(8), 8); M0\nModular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field\nsage: f = M1.0\nsage: g = M0.0\nsage: f+g\nTraceback (most recent call last):\n...\nTypeError: unsupported operand parent(s) for +: 'Modular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field' and 'Modular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field'\n```\n\n\nSince the code of this ticket relies a lot on operations like these, one \"easy fix\" I can think of right now is to simply do not allow the creation of `GradedModularFormElement` for the congruence subgroups Gamma1(N) (by returning a `NotImplementedError`). Another fix (other ticket) would be to define some coercions between the two spaces so that it is possible to add two forms with compatible groups.",
    "created_at": "2021-07-09T03:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447821",
    "user": "@DavidAyotte"
}
```

After searching a bit in the code, I think that I found the origin of this error. It comes from the method `__mul__` of the class `ModularFormElement` (in `sage/modular/modform/element.py`). Here's the description of the method:


```
def __mul__(self, other):
        r"""
        Calculate the product self * other.

        This tries to determine the
        characters of self and other, in order to avoid having to compute a
        (potentially very large) Gamma1 space. Note that this might lead to
        a modular form that is defined with respect to a larger subgroup than
        the factors are.
```


This is illustrated by this example:

```
sage: f = ModularForms(Gamma1(3), 5).0
sage: f*f
1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)
sage: (f*f).parent()
Modular Forms space of dimension 4 for Congruence Subgroup Gamma0(3) of weight 10 over Rational Field
```


This poses a problem as it is not always possible to add two forms with different groups:


```
sage: M1 = ModularForms(Gamma1(8), 8); M1
Modular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field
sage: M0 = ModularForms(Gamma0(8), 8); M0
Modular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field
sage: f = M1.0
sage: g = M0.0
sage: f+g
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for +: 'Modular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field' and 'Modular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field'
```


Since the code of this ticket relies a lot on operations like these, one "easy fix" I can think of right now is to simply do not allow the creation of `GradedModularFormElement` for the congruence subgroups Gamma1(N) (by returning a `NotImplementedError`). Another fix (other ticket) would be to define some coercions between the two spaces so that it is possible to add two forms with compatible groups.



---

archive/issue_comments_447822.json:
```json
{
    "body": "I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.\n\nOne workaround would be to implement the following conversion\n\n```\nsage: G = Gamma1(3)\nsage: M = ModularForms(Gamma1(3), 5)\nsage: f = M.0\nsage: M(f * f)  # should work\nTraceback (most recent call last):\n...\nTypeError: entries must be a list of length 2\n```\n",
    "created_at": "2021-07-09T08:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447822",
    "user": "vdelecroix"
}
```

I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.

One workaround would be to implement the following conversion

```
sage: G = Gamma1(3)
sage: M = ModularForms(Gamma1(3), 5)
sage: f = M.0
sage: M(f * f)  # should work
Traceback (most recent call last):
...
TypeError: entries must be a list of length 2
```




---

archive/issue_comments_447823.json:
```json
{
    "body": "Replying to [comment:28 vdelecroix]:\n> I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.\n> \n> One workaround would be to implement the following conversion\n> {{{\n> sage: G = Gamma1(3)\n> sage: M = ModularForms(Gamma1(3), 5)\n> sage: f = M.0\n> sage: M(f * f)  # should work\n> Traceback (most recent call last):\n> ...\n> TypeError: entries must be a list of length 2\n> }}}\n\nThe reason why it does not work in your example is because the form `f * f` is of weight 10 while the space `M` is of weight 5. I think that you meant to write this:\n\n\n```\nsage: f = ModularForms(Gamma1(3), 5).0\nsage: M1 = ModularForms(Gamma1(3), 10)\nsage: F2 = M1(f * f); F2   # this works!\n1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)\nsage: F2.parent()\nModular Forms space of dimension 4 for Congruence Subgroup Gamma1(3) of weight 10 over Rational Field\n```\n \n\n**EDIT: ** the above example only works if the two spaces have the same dimension:\n\n\n```\nsage: M0 = ModularForms(Gamma0(8), 10); M0\nModular Forms space of dimension 11 for Congruence Subgroup Gamma0(8) of weight 10 over Rational Field\nsage: M1 = ModularForms(Gamma1(8), 10); M1\nModular Forms space of dimension 21 for Congruence Subgroup Gamma1(8) of weight 10 over Rational Field\nsage: f = M0.0\nsage: M1(f)\nTraceback (most recent call last):\n...\nTypeError: entries must be a list of length 21\n```\n\n\nHowever, it is possible to convert it to a form over Gamma1 by using q-expansion with enough precision:\n\n\n```\nsage: fq = f.qexp(42)\nsage: M1(fq)\nq + O(q^6)\n```\n",
    "created_at": "2021-07-09T13:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447823",
    "user": "@DavidAyotte"
}
```

Replying to [comment:28 vdelecroix]:
> I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.
> 
> One workaround would be to implement the following conversion
> {{{
> sage: G = Gamma1(3)
> sage: M = ModularForms(Gamma1(3), 5)
> sage: f = M.0
> sage: M(f * f)  # should work
> Traceback (most recent call last):
> ...
> TypeError: entries must be a list of length 2
> }}}

The reason why it does not work in your example is because the form `f * f` is of weight 10 while the space `M` is of weight 5. I think that you meant to write this:


```
sage: f = ModularForms(Gamma1(3), 5).0
sage: M1 = ModularForms(Gamma1(3), 10)
sage: F2 = M1(f * f); F2   # this works!
1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)
sage: F2.parent()
Modular Forms space of dimension 4 for Congruence Subgroup Gamma1(3) of weight 10 over Rational Field
```
 

**EDIT: ** the above example only works if the two spaces have the same dimension:


```
sage: M0 = ModularForms(Gamma0(8), 10); M0
Modular Forms space of dimension 11 for Congruence Subgroup Gamma0(8) of weight 10 over Rational Field
sage: M1 = ModularForms(Gamma1(8), 10); M1
Modular Forms space of dimension 21 for Congruence Subgroup Gamma1(8) of weight 10 over Rational Field
sage: f = M0.0
sage: M1(f)
Traceback (most recent call last):
...
TypeError: entries must be a list of length 21
```


However, it is possible to convert it to a form over Gamma1 by using q-expansion with enough precision:


```
sage: fq = f.qexp(42)
sage: M1(fq)
q + O(q^6)
```




---

archive/issue_comments_447824.json:
```json
{
    "body": "There are several places with trailing whitespaces (ie whitespaces before the end of line character). Usually, editors have options to remove them automatically.",
    "created_at": "2021-07-12T15:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447824",
    "user": "vdelecroix"
}
```

There are several places with trailing whitespaces (ie whitespaces before the end of line character). Usually, editors have options to remove them automatically.



---

archive/issue_comments_447825.json:
```json
{
    "body": "In `GradedModularFormElement.__init__` the dosctring block inside the `TESTS` is not indented.",
    "created_at": "2021-07-12T15:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447825",
    "user": "vdelecroix"
}
```

In `GradedModularFormElement.__init__` the dosctring block inside the `TESTS` is not indented.



---

archive/issue_comments_447826.json:
```json
{
    "body": "In the main documentation of `GradedModularFormElement` there must be simple examples illustrating both input kinds\n- a dictionary {k_1:f_1, k_2:f_2, ..., k_n:f_n}\n- or a list [f_1, f_2,..., f_n]",
    "created_at": "2021-07-12T15:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447826",
    "user": "vdelecroix"
}
```

In the main documentation of `GradedModularFormElement` there must be simple examples illustrating both input kinds
- a dictionary {k_1:f_1, k_2:f_2, ..., k_n:f_n}
- or a list [f_1, f_2,..., f_n]



---

archive/issue_comments_447827.json:
```json
{
    "body": "Here I would rather use a `TypeError`\n\n```\n            raise ValueError('the defining data structure should be a list or a dictionary')\n```\n",
    "created_at": "2021-07-12T15:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447827",
    "user": "vdelecroix"
}
```

Here I would rather use a `TypeError`

```
            raise ValueError('the defining data structure should be a list or a dictionary')
```




---

archive/issue_comments_447828.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-12T15:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447828",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447829.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-12T16:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447829",
    "user": "@DavidAyotte"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447830.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T00:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447830",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447831.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T14:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447831",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447832.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T01:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447832",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447833.json:
```json
{
    "body": "In the docstring of `GradedModularFormElement.__init__` you wrote ```parents``` and ```forms_data``` whereas the argument names are `parent, forms_datas`. Moreover, I don't think you are allowed to use `datas` at all in english (singular is `datum`).",
    "created_at": "2021-07-14T09:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447833",
    "user": "vdelecroix"
}
```

In the docstring of `GradedModularFormElement.__init__` you wrote ```parents``` and ```forms_data``` whereas the argument names are `parent, forms_datas`. Moreover, I don't think you are allowed to use `datas` at all in english (singular is `datum`).



---

archive/issue_comments_447834.json:
```json
{
    "body": "- In the same docstring the dictionary is quoted but not the list.\n\n- The class deserves a documentation. In particular the line `An element of a graded ring of modular forms.` should move from `__init__` to the main docstring (just below the class name).\n\n- Currently there is no error if you ask for negative degrees : `f[-1]` returns `0`\n\n- There is a remaining TODO written as a comment in the file ` #TODO: fix the error E4 + QQ(0)`. Could you either expand it or remove it?\n\n- Is `_rmul_` really necessary? The left and right actions of scalars are the same.\n\n- This is a bug\n  {{{\nsage: M.zero().weight()\nTraceback (most recent call last):\n...\nStopIteration: \n}}}\n\n- there is a trailing whitespace in the documentation of `ModularFormSpace._pushout_`",
    "created_at": "2021-07-14T09:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447834",
    "user": "vdelecroix"
}
```

- In the same docstring the dictionary is quoted but not the list.

- The class deserves a documentation. In particular the line `An element of a graded ring of modular forms.` should move from `__init__` to the main docstring (just below the class name).

- Currently there is no error if you ask for negative degrees : `f[-1]` returns `0`

- There is a remaining TODO written as a comment in the file ` #TODO: fix the error E4 + QQ(0)`. Could you either expand it or remove it?

- Is `_rmul_` really necessary? The left and right actions of scalars are the same.

- This is a bug
  {{{
sage: M.zero().weight()
Traceback (most recent call last):
...
StopIteration: 
}}}

- there is a trailing whitespace in the documentation of `ModularFormSpace._pushout_`



---

archive/issue_comments_447835.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T13:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447835",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447836.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc2021, modular forms rings\".",
    "created_at": "2021-07-14T13:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447836",
    "user": "@DavidAyotte"
}
```

Changing keywords from "" to "gsoc2021, modular forms rings".



---

archive/issue_comments_447837.json:
```json
{
    "body": "What about renaming `find_generators.py` in `ring.py`. It would make more sense to me. If you like it, the file `find_generators.py` must remain with proper deprecation warnings.",
    "created_at": "2021-07-15T08:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447837",
    "user": "vdelecroix"
}
```

What about renaming `find_generators.py` in `ring.py`. It would make more sense to me. If you like it, the file `find_generators.py` must remain with proper deprecation warnings.



---

archive/issue_comments_447838.json:
```json
{
    "body": "For the string representation of the parent, I would change it to something closer to polynomials\n\n```\nsage: QQ['x']\nUnivariate Polynomial Ring in x over Rational Field\n```\n\nFor example `Ring of Modular Forms for %s over %s`.",
    "created_at": "2021-07-15T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447838",
    "user": "vdelecroix"
}
```

For the string representation of the parent, I would change it to something closer to polynomials

```
sage: QQ['x']
Univariate Polynomial Ring in x over Rational Field
```

For example `Ring of Modular Forms for %s over %s`.



---

archive/issue_comments_447839.json:
```json
{
    "body": "The test suite must be run on the parent. Currently it fails\n\n```\nsage: M = ModularFormsRing(Gamma1(4))\nsage: TestSuite(M).run()\n...\nThe following tests failed: _test_associativity, _test_distributivity, _test_prod\n```\n",
    "created_at": "2021-07-15T09:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447839",
    "user": "vdelecroix"
}
```

The test suite must be run on the parent. Currently it fails

```
sage: M = ModularFormsRing(Gamma1(4))
sage: TestSuite(M).run()
...
The following tests failed: _test_associativity, _test_distributivity, _test_prod
```




---

archive/issue_comments_447840.json:
```json
{
    "body": "In order to make the test suite less trivial you can also redefine `.some_elements()`\n\n```\nsage: M.some_elements()\n[1 + 24*q^2 + 24*q^4 + O(q^6)]\n```\n",
    "created_at": "2021-07-15T09:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447840",
    "user": "vdelecroix"
}
```

In order to make the test suite less trivial you can also redefine `.some_elements()`

```
sage: M.some_elements()
[1 + 24*q^2 + 24*q^4 + O(q^6)]
```




---

archive/issue_comments_447841.json:
```json
{
    "body": "This is a bug (related to the failure of the test suite above)\n\n```\nsage: M = ModularFormsRing(Gamma1(4))\nsage: a = M.gen(0)\nsage: a*a\nTraceback (most recent call last):\n...\nValueError: the group and/or the base ring of at least one modular form (1 + 48*q^2 + 624*q^4 + O(q^6)) is not consistant with the base space\n```\n",
    "created_at": "2021-07-15T09:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447841",
    "user": "vdelecroix"
}
```

This is a bug (related to the failure of the test suite above)

```
sage: M = ModularFormsRing(Gamma1(4))
sage: a = M.gen(0)
sage: a*a
Traceback (most recent call last):
...
ValueError: the group and/or the base ring of at least one modular form (1 + 48*q^2 + 624*q^4 + O(q^6)) is not consistant with the base space
```




---

archive/issue_comments_447842.json:
```json
{
    "body": "The function `def find_generators(*args):` wrongly raises a `NotImplementedError`. Could you replace it with a proper deprecation warning so that we can remove it in some later version of sage?",
    "created_at": "2021-07-15T09:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447842",
    "user": "vdelecroix"
}
```

The function `def find_generators(*args):` wrongly raises a `NotImplementedError`. Could you replace it with a proper deprecation warning so that we can remove it in some later version of sage?



---

archive/issue_comments_447843.json:
```json
{
    "body": "Thank you very much Vincent for your comments. I think that moving `find_generators.py` in `ring.py` is a good idea. ~~This means that I would move all its content in the file `ring.py`?~~\n\nYou indeed found a bug related to the conversion between two modular forms space. I have fixed it but while doing so, I found another bug related with the base ring of the modular forms ring. I'm working on this right now and hopefully I will be able to push the changes shortly.",
    "created_at": "2021-07-15T14:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447843",
    "user": "@DavidAyotte"
}
```

Thank you very much Vincent for your comments. I think that moving `find_generators.py` in `ring.py` is a good idea. ~~This means that I would move all its content in the file `ring.py`?~~

You indeed found a bug related to the conversion between two modular forms space. I have fixed it but while doing so, I found another bug related with the base ring of the modular forms ring. I'm working on this right now and hopefully I will be able to push the changes shortly.



---

archive/issue_comments_447844.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447844",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447845.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T16:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447845",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447846.json:
```json
{
    "body": "I moved the file `find_generators.py` in the last commit (1b9332e). I also tried to implement the deprecation framework following this guide: \n\nhttps://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation.\n\nHowever, I don't think it was a success because there is now one doctest that does not pass when I run the following command:\n\n```\n./sage -t src/sage/modular/modform/find_generators.py\n```\n\n\n\n```\nFile \"src/sage/rings/find_generators.py\", line 189, in sage.rings.find_generators.ModularFormsRing.__init__\nFailed example:\n    ModularFormsRing(Gamma1(13))\nExpected:\n    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field\nGot:\n    doctest:warning\n    ...\n    DeprecationWarning:\n    Importing ModularFormsRing from here is deprecated. If you need to use it, please import it directly from sage.rings.find_generators\n    See https://trac.sagemath.org/31559 for details.\n    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.rings.find_generators.ModularFormsRing.__init__\n    [117 tests, 1 failure, 2.24 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/rings/find_generators.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\n\nI haven't figured out why this happens yet. Do you have an idea of what is the problem?",
    "created_at": "2021-07-15T16:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447846",
    "user": "@DavidAyotte"
}
```

I moved the file `find_generators.py` in the last commit (1b9332e). I also tried to implement the deprecation framework following this guide: 

https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation.

However, I don't think it was a success because there is now one doctest that does not pass when I run the following command:

```
./sage -t src/sage/modular/modform/find_generators.py
```



```
File "src/sage/rings/find_generators.py", line 189, in sage.rings.find_generators.ModularFormsRing.__init__
Failed example:
    ModularFormsRing(Gamma1(13))
Expected:
    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field
Got:
    doctest:warning
    ...
    DeprecationWarning:
    Importing ModularFormsRing from here is deprecated. If you need to use it, please import it directly from sage.rings.find_generators
    See https://trac.sagemath.org/31559 for details.
    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field
**********************************************************************
1 item had failures:
   1 of  15 in sage.rings.find_generators.ModularFormsRing.__init__
    [117 tests, 1 failure, 2.24 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/rings/find_generators.py  # 1 doctest failed
----------------------------------------------------------------------
```


I haven't figured out why this happens yet. Do you have an idea of what is the problem?



---

archive/issue_comments_447847.json:
```json
{
    "body": "The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like\n\n```\nsage: ModularFormsRing(Gamma1(13))\ndoctest:warning\n...\nDeprecationWarning: Importing ModularFormsRing from here is deprecated...\n```\n",
    "created_at": "2021-07-27T08:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447847",
    "user": "vdelecroix"
}
```

The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like

```
sage: ModularFormsRing(Gamma1(13))
doctest:warning
...
DeprecationWarning: Importing ModularFormsRing from here is deprecated...
```




---

archive/issue_comments_447848.json:
```json
{
    "body": "Replying to [comment:54 vdelecroix]:\n> The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like\n> {{{\n> sage: ModularFormsRing(Gamma1(13))\n> doctest:warning\n> ...\n> DeprecationWarning: Importing ModularFormsRing from here is deprecated...\n> }}}\n\n\nWhat confuses me is that if I run the following command:\n\n\n```\nsage -t src/sage/rings/find_generators.py\n```\n\n\nI get the same error. Does this means that `ModularFormsRing` is imported from the old module?",
    "created_at": "2021-07-27T13:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447848",
    "user": "@DavidAyotte"
}
```

Replying to [comment:54 vdelecroix]:
> The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like
> {{{
> sage: ModularFormsRing(Gamma1(13))
> doctest:warning
> ...
> DeprecationWarning: Importing ModularFormsRing from here is deprecated...
> }}}


What confuses me is that if I run the following command:


```
sage -t src/sage/rings/find_generators.py
```


I get the same error. Does this means that `ModularFormsRing` is imported from the old module?



---

archive/issue_comments_447849.json:
```json
{
    "body": "The file that contains the tests does not matter. The problem is the file that imports `ModularFormsRing` in the sage namespace\n\n```diff\ndiff --git a/src/sage/rings/all.py b/src/sage/rings/all.py\nindex 50f0a4e..a2a5923 100644\n--- a/src/sage/rings/all.py\n+++ b/src/sage/rings/all.py\n@@ -166,3 +166,6 @@ from .asymptotic.all import *\n \n # Register classes in numbers abc\n from . import numbers_abc\n+\n+# Rings of modular forms\n+from .find_generators import ModularFormsRing\n```\n",
    "created_at": "2021-07-28T14:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447849",
    "user": "vdelecroix"
}
```

The file that contains the tests does not matter. The problem is the file that imports `ModularFormsRing` in the sage namespace

```diff
diff --git a/src/sage/rings/all.py b/src/sage/rings/all.py
index 50f0a4e..a2a5923 100644
--- a/src/sage/rings/all.py
+++ b/src/sage/rings/all.py
@@ -166,3 +166,6 @@ from .asymptotic.all import *
 
 # Register classes in numbers abc
 from . import numbers_abc
+
+# Rings of modular forms
+from .find_generators import ModularFormsRing
```




---

archive/issue_comments_447850.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-28T14:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447850",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_447851.json:
```json
{
    "body": "If you look at the diff, you will notice that a lot of files do not have newlines at the end.",
    "created_at": "2021-07-28T14:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447851",
    "user": "vdelecroix"
}
```

If you look at the diff, you will notice that a lot of files do not have newlines at the end.



---

archive/issue_comments_447852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-28T18:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447852",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447853.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-28T18:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447853",
    "user": "@DavidAyotte"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447854.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-28T19:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447854",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_447855.json:
```json
{
    "body": "There is no need to duplicate the `TestSuite` three times. All these would better appear together inside an EXAMPLES or TESTS block.\n\n```\n+            sage: M = ModularFormsRing(1)\n+            sage: TestSuite(M).run()\n+            sage: M15 = ModularFormsRing(Gamma1(5))\n+            sage: TestSuite(M15).run()\n+            sage: M013 = ModularFormsRing(Gamma0(13))\n+            sage: TestSuite(M013).run()\n```\n\nthen\n\n```\n+            sage: TestSuite(ModularFormsRing(1)).run()\n+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()\n+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()\n```\n\nand finally\n\n```\n+            sage: TestSuite(ModularFormsRing(1)).run()\n+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()\n+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()\n```\n",
    "created_at": "2021-07-28T19:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447855",
    "user": "vdelecroix"
}
```

There is no need to duplicate the `TestSuite` three times. All these would better appear together inside an EXAMPLES or TESTS block.

```
+            sage: M = ModularFormsRing(1)
+            sage: TestSuite(M).run()
+            sage: M15 = ModularFormsRing(Gamma1(5))
+            sage: TestSuite(M15).run()
+            sage: M013 = ModularFormsRing(Gamma0(13))
+            sage: TestSuite(M013).run()
```

then

```
+            sage: TestSuite(ModularFormsRing(1)).run()
+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()
+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()
```

and finally

```
+            sage: TestSuite(ModularFormsRing(1)).run()
+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()
+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()
```




---

archive/issue_comments_447856.json:
```json
{
    "body": "The documentation of GradedModularFormElement is not helpful for the user\n`The element class for ``ModularFormsRing```. You should expand a bit on what this is. Also, in this docstring it should also be advertized that the elements should not be built directly by calling the class constructor but rather via the parent.",
    "created_at": "2021-07-28T19:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447856",
    "user": "vdelecroix"
}
```

The documentation of GradedModularFormElement is not helpful for the user
`The element class for ``ModularFormsRing```. You should expand a bit on what this is. Also, in this docstring it should also be advertized that the elements should not be built directly by calling the class constructor but rather via the parent.



---

archive/issue_comments_447857.json:
```json
{
    "body": "In the documentation of `weights_list()` I would emphasize that the return value for zero is the empty list. In particular, it does not correspond to what you get via `weight()`. Maybe this is annoying?",
    "created_at": "2021-07-28T19:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447857",
    "user": "vdelecroix"
}
```

In the documentation of `weights_list()` I would emphasize that the return value for zero is the empty list. In particular, it does not correspond to what you get via `weight()`. Maybe this is annoying?



---

archive/issue_comments_447858.json:
```json
{
    "body": "Why the file `find_generators.py` is duplicated in both `sage/rings/` and `sage/modular/modform/`!?",
    "created_at": "2021-07-28T19:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447858",
    "user": "vdelecroix"
}
```

Why the file `find_generators.py` is duplicated in both `sage/rings/` and `sage/modular/modform/`!?



---

archive/issue_comments_447859.json:
```json
{
    "body": "Also in [comment:44] I proposed to rename `find_generators.py` into `ring.py`. You did agree in [comment:50] to make it but this was not done.",
    "created_at": "2021-07-28T19:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447859",
    "user": "vdelecroix"
}
```

Also in [comment:44] I proposed to rename `find_generators.py` into `ring.py`. You did agree in [comment:50] to make it but this was not done.



---

archive/issue_comments_447860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-29T15:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447860",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447861.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-29T17:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447861",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447862.json:
```json
{
    "body": "There are still two files `sage/modular/modform/ring.py` and `sage/modular/modform/find_generators.py` containing the same code. What you provided is not working and is also not tested : when the import is triggered from `find_generators` there should be a warning.\n\nDid you look at a file in the sage source code that implements these deprecated imports? For example `sage/rings/invariant_theory.py`. This is what should be done. And doctests must be added.",
    "created_at": "2021-07-29T18:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447862",
    "user": "vdelecroix"
}
```

There are still two files `sage/modular/modform/ring.py` and `sage/modular/modform/find_generators.py` containing the same code. What you provided is not working and is also not tested : when the import is triggered from `find_generators` there should be a warning.

Did you look at a file in the sage source code that implements these deprecated imports? For example `sage/rings/invariant_theory.py`. This is what should be done. And doctests must be added.



---

archive/issue_comments_447863.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-31T15:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447863",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447864.json:
```json
{
    "body": "Hello Vincent, I hope that what I did now is correct. I followed the example you gave me. It is now much clearer in my head. Prior to this, I was looking at the guide \n\nhttps://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation \n\nand I think that some improvements could be made to make it clearer (I will probably do them later when I have time).",
    "created_at": "2021-07-31T15:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447864",
    "user": "@DavidAyotte"
}
```

Hello Vincent, I hope that what I did now is correct. I followed the example you gave me. It is now much clearer in my head. Prior to this, I was looking at the guide 

https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation 

and I think that some improvements could be made to make it clearer (I will probably do them later when I have time).



---

archive/issue_comments_447865.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-31T15:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447865",
    "user": "@DavidAyotte"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447866.json:
```json
{
    "body": "Looks better. Could you move the test for the deprecation inside `find_generators.py`. It would be better in the latter rather than `ring.py`.",
    "created_at": "2021-08-01T15:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447866",
    "user": "vdelecroix"
}
```

Looks better. Could you move the test for the deprecation inside `find_generators.py`. It would be better in the latter rather than `ring.py`.



---

archive/issue_comments_447867.json:
```json
{
    "body": "Why do you put twice the same doctest\n\n```\nfrom sage.modular.modform.find_generators import find_generators\nfind_generators(ModularFormsRing(1))\n```\n",
    "created_at": "2021-08-01T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447867",
    "user": "vdelecroix"
}
```

Why do you put twice the same doctest

```
from sage.modular.modform.find_generators import find_generators
find_generators(ModularFormsRing(1))
```




---

archive/issue_comments_447868.json:
```json
{
    "body": "The documentation of a class goes in the main docstring not in the `__init__` docstring. That is\n\n```\nclass A(object):\n    r\"\"\"\n    This is my class A\n\n    EXAMPLES:\n\n    This is useful as it is the first letter of the alphabet::\n\n        sage: a = A()\n    \"\"\"\n    def __init__(self, a, b):\n        r\"\"\"\n        INPUT:\n        \n        - ``a`` - an a\n\n        - ``b`` - a b\n        \"\"\"\n```\n",
    "created_at": "2021-08-01T15:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447868",
    "user": "vdelecroix"
}
```

The documentation of a class goes in the main docstring not in the `__init__` docstring. That is

```
class A(object):
    r"""
    This is my class A

    EXAMPLES:

    This is useful as it is the first letter of the alphabet::

        sage: a = A()
    """
    def __init__(self, a, b):
        r"""
        INPUT:
        
        - ``a`` - an a

        - ``b`` - a b
        """
```




---

archive/issue_comments_447869.json:
```json
{
    "body": "Ok, I'll move the deprecation tests inside `find_generators`. It does make more sense. Considering the \"same doctest\", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:\n\n\n```\n            sage: from sage.modular.modform.RING import find_generators\n            sage: find_generators(ModularFormsRing(1))\n            doctest:warning\n            ...\n            DeprecationWarning: find_generators is deprecated. Please use sage.modular.modform.ring.generators instead.\n            See https://trac.sagemath.org/31559 for details.\n\n        ::\n\n            sage: from sage.modular.modform.FIND_GENERATORS import find_generators\n            sage: find_generators(ModularFormsRing(1))\n            doctest:warning\n            ...\n            DeprecationWarning: Importing find_generators from here is deprecated. If you need to use it, please import it directly from sage.modular.modform.ring\n            See https://trac.sagemath.org/31559 for details.\n```\n\n\nConsidering the placement of the documentation of the class, I did it like this because that's how it was done before I started working on this ticket, but I will change it, thank you for pointing it out!",
    "created_at": "2021-08-01T15:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447869",
    "user": "@DavidAyotte"
}
```

Ok, I'll move the deprecation tests inside `find_generators`. It does make more sense. Considering the "same doctest", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:


```
            sage: from sage.modular.modform.RING import find_generators
            sage: find_generators(ModularFormsRing(1))
            doctest:warning
            ...
            DeprecationWarning: find_generators is deprecated. Please use sage.modular.modform.ring.generators instead.
            See https://trac.sagemath.org/31559 for details.

        ::

            sage: from sage.modular.modform.FIND_GENERATORS import find_generators
            sage: find_generators(ModularFormsRing(1))
            doctest:warning
            ...
            DeprecationWarning: Importing find_generators from here is deprecated. If you need to use it, please import it directly from sage.modular.modform.ring
            See https://trac.sagemath.org/31559 for details.
```


Considering the placement of the documentation of the class, I did it like this because that's how it was done before I started working on this ticket, but I will change it, thank you for pointing it out!



---

archive/issue_comments_447870.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-01T15:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447870",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447871.json:
```json
{
    "body": "Replying to [comment:73 gh-DavidAyotte]:\n> Considering the \"same doctest\", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:\n> <...>\n\nIndeed. I read too quickly! Sorry.",
    "created_at": "2021-08-01T18:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447871",
    "user": "vdelecroix"
}
```

Replying to [comment:73 gh-DavidAyotte]:
> Considering the "same doctest", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:
> <...>

Indeed. I read too quickly! Sorry.



---

archive/issue_comments_447872.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-02T13:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447872",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447873.json:
```json
{
    "body": "In last commit, I moved some doctests inside the `__init__` method of `GradedModularFormElement` class because it was lacking doctests.",
    "created_at": "2021-08-02T13:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447873",
    "user": "@DavidAyotte"
}
```

In last commit, I moved some doctests inside the `__init__` method of `GradedModularFormElement` class because it was lacking doctests.



---

archive/issue_comments_447874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-02T16:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447874",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447875.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-03T14:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447875",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_447876.json:
```json
{
    "body": "All right. Let us move forward.",
    "created_at": "2021-08-03T14:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447876",
    "user": "vdelecroix"
}
```

All right. Let us move forward.



---

archive/issue_comments_447877.json:
```json
{
    "body": "The `index.rst` file was not updated after renaming `find_generator.py` into `ring.py` and so the documentation does not show up in the reference manual. I'm fixing this.",
    "created_at": "2021-08-23T19:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447877",
    "user": "@DavidAyotte"
}
```

The `index.rst` file was not updated after renaming `find_generator.py` into `ring.py` and so the documentation does not show up in the reference manual. I'm fixing this.



---

archive/issue_comments_447878.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-08-23T19:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447878",
    "user": "@DavidAyotte"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_447879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-23T19:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447879",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_447880.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-23T19:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447880",
    "user": "@DavidAyotte"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447881.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-26T06:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447881",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_447882.json:
```json
{
    "body": "thanks",
    "created_at": "2021-08-26T06:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447882",
    "user": "vdelecroix"
}
```

thanks



---

archive/issue_comments_447883.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-31T22:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31322#issuecomment-447883",
    "user": "vbraun"
}
```

Resolution: fixed
