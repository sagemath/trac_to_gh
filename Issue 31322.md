# Issue 31322: Make ModularFormRings manipulate formal objects

Issue created by migration from https://trac.sagemath.org/ticket/31559

Original creator: vdelecroix

Original creation time: 2021-03-25 18:08:57

CC:  @davidayotte

Currently, `ModularFormRings` is manipulating truncated q-series. It is desirable to be able to manipulate the ring of modular forms. In other words, being able to define `E4 + E6` and access its homogeneous components.


---

Comment by mkoeppe created at 2021-03-27 02:13:38

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by @DavidAyotte created at 2021-06-10 20:19:58

Set assignee to @DavidAyotte.


---

Comment by @DavidAyotte created at 2021-06-10 20:19:58

New commits:


---

Comment by git created at 2021-06-11 14:24:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-15 01:48:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-16 21:34:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-06-22 07:28:51

In the constructor I would either allow a list of modular forms or a dictionary. In both situations there should be a check that the data is consistent. And in the case it is a dictionary, you would better not write

```
    self.__mf_dict = mf_dict
```

because this uses the dictionary provided in the input. This dictionary can be modified outside of the scope of the class and corrupt the data in a scenario such as

```
sage: d = {}
sage: f = M(d)
sage: d[3] = 'hello'  # data corruption
```


Why do you have a method `_dictionary` and not use directly `__mf_dict`. This add one level of indirection for no purpose that I can see.

When you iterate over the keys and values of a dictionary it is best to use the `items()` method as in

```
def __neg__(self):
    GM = self.__class__
    minus_self = {k:-v for k,v in self.__mf_dict.items()}
    return GM(self.parent(), minus_self)
```


You should always take care of removing the entries in the dictionary whose values are zero (in the constructor and after a binary operation). Otherwise a method such as `is_homogeneous` gets completely wrong.

Use `__neg__` and not `_neg_` (this method does not go through corecion).

In `__getitem__` you would better return the zero of the base ring and not the python integer `0`.

Don't write `x.__getitem__(k)` but `x[k]`. The latter is much faster in general.

Rather than

```
def weights(self):
    wts = list(self._dictionnary().keys())
    wts.sort()
    return wts
```

you could use

```
def weights(self):
    return sorted(self.__mf_dict)
```


Instead of

```
def is_homogeneous(self):
    if len(self._dictionnary())>1:
        return False
    return True
```

you could use

```
def is_homogeneous(self):
    return len(self.__mf_dict) <= 1
```


For the documentation, it is `INPUT` and not `INPUTS`. And the items afterwards should not be indented.

It would be better to inherit from `ModuleElement` (not doing this causes trouble with the coercion model). Once done, implement the method `_lmul_` for scalar multiplications (it should be possible to do `integer x (element of the ring of modular forms)`.

Another method that is lacking is `__bool__` (for the zero test). Once the dictionary is clean (ie no zero value) you could simply do

```
def __bool__(self):
    return bool(self.__mf_dict)
```

Also write methods `is_zero` and `is_one` that are standard ones for rings.


---

Comment by vdelecroix created at 2021-06-22 07:37:23

If `qexp` is simply an alias of `q_expansion` write `qexp = q_expansion`. The documentation of `q_expansion` could mention the fact that such an alias exists.

The method `_repr_` could be simplified to

```
def _repr_(self):
    return str(self.q_expansion())
```


Since now `ModularFormsRing` inherit from `Parent` you could use the test suite. You should add the following test in the constructor `ModularFormsRing.__init__`

```
TESTS::

    sage: M = ModularFormsRing(1)
    sage: TestSuite(M).run()
```

This test suite should also be run with other groups (~~especially non-congruence once~~) and other base rings.

The coercion is not tested, right? You should add various tests for

```
(modular form) + (element of ModularFormsRing)
(element of ModularFormsRing) + (modular form)
(scalar) + (element of ModularFormsRing)
(element of ModularFormsRing) + (scalar)
```


To determine coercions, one alternative could be to rely on what is implemented for modular forms. Namely the `ModularFormsRing` should have a method to obtain the modular forms of a given weight (something like `M.graded_component(self, weight)`. It would then be possible to use coercions with respect to whatever is the result of this method.


---

Comment by git created at 2021-06-23 16:30:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-25 16:51:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-26 14:24:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-29 15:22:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-29 17:39:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-06-29 22:09:10

Looks good. Could you set to ~~positive review~~ **needs review** so that we can also have an opinion from patchbots?

`is_zero` would better be implemented as `return not self`.

Rather than `self[0] == 1` I would rather use `self._forms_dictionary[0].is_one()` which has less indirections.

Your `__getitem__` is too laxist. You could access `F['a']` or `F[(1,2,3)]`.

I am not sure we want to support rich comparison involving anything else than `==` or `!=`. What would be the meaning of `F < G`?

(just a remark) Technically speaking, it is conceivable to do binary operations on modular forms with different groups. It is a well defined modular forms for the intersection of the two groups (which is still finite index).

Your one element looks wrong. The dictionary should be `{0: self.base_ring().one()}`.


---

Comment by git created at 2021-06-30 02:37:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-06-30 02:38:03

Changing status from new to needs_review.


---

Comment by @DavidAyotte created at 2021-06-30 13:00:43

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2021-06-30 14:56:38

Changing status from positive_review to needs_work.


---

Comment by vdelecroix created at 2021-06-30 14:56:55

As an author, you are not supposed to switch the ticket to positive review.


---

Comment by vdelecroix created at 2021-06-30 14:57:19

That is my fault, I meant "needs review" instead of "positive review". Sorry.


---

Comment by @DavidAyotte created at 2021-06-30 15:12:41

Changing status from needs_work to needs_review.


---

Comment by @DavidAyotte created at 2021-06-30 15:12:41

No problem. I will leave it in "needs review" to see what the patchbots says.


---

Comment by git created at 2021-06-30 17:05:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-05 15:08:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-09 01:01:10


```
sage: M = ModularFormsRing(Gamma1(6))
sage: f = M.0
sage: g = M.1
sage: f*g
Traceback (most recent call last):
...
ValueError: the group and/or the base ring of at least one modular form (q + 5*q^3 + 22*q^4 + 6*q^5 + O(q^6)) is not consistant with the base space
```


Got this error while working on #32135. This happens because, in the example above, the form `f*g` has trivial character hence it lives in M(Gamma0(6)).


---

Comment by @DavidAyotte created at 2021-07-09 01:01:10

Changing status from needs_review to needs_work.


---

Comment by @DavidAyotte created at 2021-07-09 03:29:07

After searching a bit in the code, I think that I found the origin of this error. It comes from the method `__mul__` of the class `ModularFormElement` (in `sage/modular/modform/element.py`). Here's the description of the method:


```
def __mul__(self, other):
        r"""
        Calculate the product self * other.

        This tries to determine the
        characters of self and other, in order to avoid having to compute a
        (potentially very large) Gamma1 space. Note that this might lead to
        a modular form that is defined with respect to a larger subgroup than
        the factors are.
```


This is illustrated by this example:

```
sage: f = ModularForms(Gamma1(3), 5).0
sage: f*f
1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)
sage: (f*f).parent()
Modular Forms space of dimension 4 for Congruence Subgroup Gamma0(3) of weight 10 over Rational Field
```


This poses a problem as it is not always possible to add two forms with different groups:


```
sage: M1 = ModularForms(Gamma1(8), 8); M1
Modular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field
sage: M0 = ModularForms(Gamma0(8), 8); M0
Modular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field
sage: f = M1.0
sage: g = M0.0
sage: f+g
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for +: 'Modular Forms space of dimension 17 for Congruence Subgroup Gamma1(8) of weight 8 over Rational Field' and 'Modular Forms space of dimension 9 for Congruence Subgroup Gamma0(8) of weight 8 over Rational Field'
```


Since the code of this ticket relies a lot on operations like these, one "easy fix" I can think of right now is to simply do not allow the creation of `GradedModularFormElement` for the congruence subgroups Gamma1(N) (by returning a `NotImplementedError`). Another fix (other ticket) would be to define some coercions between the two spaces so that it is possible to add two forms with compatible groups.


---

Comment by vdelecroix created at 2021-07-09 08:14:40

I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.

One workaround would be to implement the following conversion

```
sage: G = Gamma1(3)
sage: M = ModularForms(Gamma1(3), 5)
sage: f = M.0
sage: M(f * f)  # should work
Traceback (most recent call last):
...
TypeError: entries must be a list of length 2
```



---

Comment by @DavidAyotte created at 2021-07-09 13:54:02

Replying to [comment:28 vdelecroix]:
> I don't quite like the behaviour of `*` on modular forms. But it is not the time to change it.
> 
> One workaround would be to implement the following conversion
> {{{
> sage: G = Gamma1(3)
> sage: M = ModularForms(Gamma1(3), 5)
> sage: f = M.0
> sage: M(f * f)  # should work
> Traceback (most recent call last):
> ...
> TypeError: entries must be a list of length 2
> }}}

The reason why it does not work in your example is because the form `f * f` is of weight 10 while the space `M` is of weight 5. I think that you meant to write this:


```
sage: f = ModularForms(Gamma1(3), 5).0
sage: M1 = ModularForms(Gamma1(3), 10)
sage: F2 = M1(f * f); F2   # this works!
1 - 180*q^2 - 480*q^3 + 8100*q^4 + 35712*q^5 + O(q^6)
sage: F2.parent()
Modular Forms space of dimension 4 for Congruence Subgroup Gamma1(3) of weight 10 over Rational Field
}}} 

**EDIT: ** the above example only works if the two spaces have the same dimension:

{{{
sage: M0 = ModularForms(Gamma0(8), 10); M0
Modular Forms space of dimension 11 for Congruence Subgroup Gamma0(8) of weight 10 over Rational Field
sage: M1 = ModularForms(Gamma1(8), 10); M1
Modular Forms space of dimension 21 for Congruence Subgroup Gamma1(8) of weight 10 over Rational Field
sage: f = M0.0
sage: M1(f)
Traceback (most recent call last):
...
TypeError: entries must be a list of length 21
}}}

However, it is possible to convert it to a form over Gamma1 by using q-expansion with enough precision:

{{{
sage: fq = f.qexp(42)
sage: M1(fq)
q + O(q^6)
}}}


---

Comment by vdelecroix created at 2021-07-12 15:20:59

There are several places with trailing whitespaces (ie whitespaces before the end of line character). Usually, editors have options to remove them automatically.


---

Comment by vdelecroix created at 2021-07-12 15:24:37

In `GradedModularFormElement.__init__` the dosctring block inside the `TESTS` is not indented.


---

Comment by vdelecroix created at 2021-07-12 15:26:37

In the main documentation of `GradedModularFormElement` there must be simple examples illustrating both input kinds
- a dictionary {k_1:f_1, k_2:f_2, ..., k_n:f_n}
- or a list [f_1, f_2,..., f_n]


---

Comment by vdelecroix created at 2021-07-12 15:27:22

Here I would rather use a `TypeError`

```
            raise ValueError('the defining data structure should be a list or a dictionary')
```



---

Comment by git created at 2021-07-12 15:47:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-12 16:25:35

Changing status from needs_work to needs_review.


---

Comment by git created at 2021-07-13 00:17:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-13 14:34:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-14 01:23:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-07-14 09:07:18

In the docstring of `GradedModularFormElement.__init__` you wrote ```parents``` and ```forms_data``` whereas the argument names are `parent, forms_datas`. Moreover, I don't think you are allowed to use `datas` at all in english (singular is `datum`).


---

Comment by vdelecroix created at 2021-07-14 09:18:51

- In the same docstring the dictionary is quoted but not the list.

- The class deserves a documentation. In particular the line `An element of a graded ring of modular forms.` should move from `__init__` to the main docstring (just below the class name).

- Currently there is no error if you ask for negative degrees : `f[-1]` returns `0`

- There is a remaining TODO written as a comment in the file ` #TODO: fix the error E4 + QQ(0)`. Could you either expand it or remove it?

- Is `_rmul_` really necessary? The left and right actions of scalars are the same.

- This is a bug
  {{{
sage: M.zero().weight()
Traceback (most recent call last):
...
StopIteration: 
}}}

- there is a trailing whitespace in the documentation of `ModularFormSpace._pushout_`


---

Comment by git created at 2021-07-14 13:31:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-14 13:48:10

Changing keywords from "" to "gsoc2021, modular forms rings".


---

Comment by vdelecroix created at 2021-07-15 08:46:11

What about renaming `find_generators.py` in `ring.py`. It would make more sense to me. If you like it, the file `find_generators.py` must remain with proper deprecation warnings.


---

Comment by vdelecroix created at 2021-07-15 08:48:40

For the string representation of the parent, I would change it to something closer to polynomials

```
sage: QQ['x']
Univariate Polynomial Ring in x over Rational Field
```

For example `Ring of Modular Forms for %s over %s`.


---

Comment by vdelecroix created at 2021-07-15 09:00:24

The test suite must be run on the parent. Currently it fails

```
sage: M = ModularFormsRing(Gamma1(4))
sage: TestSuite(M).run()
...
The following tests failed: _test_associativity, _test_distributivity, _test_prod
```



---

Comment by vdelecroix created at 2021-07-15 09:01:49

In order to make the test suite less trivial you can also redefine `.some_elements()`

```
sage: M.some_elements()
[1 + 24*q^2 + 24*q^4 + O(q^6)]
```



---

Comment by vdelecroix created at 2021-07-15 09:03:11

This is a bug (related to the failure of the test suite above)

```
sage: M = ModularFormsRing(Gamma1(4))
sage: a = M.gen(0)
sage: a*a
Traceback (most recent call last):
...
ValueError: the group and/or the base ring of at least one modular form (1 + 48*q^2 + 624*q^4 + O(q^6)) is not consistant with the base space
```



---

Comment by vdelecroix created at 2021-07-15 09:05:42

The function `def find_generators(*args):` wrongly raises a `NotImplementedError`. Could you replace it with a proper deprecation warning so that we can remove it in some later version of sage?


---

Comment by @DavidAyotte created at 2021-07-15 14:41:53

Thank you very much Vincent for your comments. I think that moving `find_generators.py` in `ring.py` is a good idea. ~~This means that I would move all its content in the file `ring.py`?~~

You indeed found a bug related to the conversion between two modular forms space. I have fixed it but while doing so, I found another bug related with the base ring of the modular forms ring. I'm working on this right now and hopefully I will be able to push the changes shortly.


---

Comment by git created at 2021-07-15 15:18:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-15 16:33:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-15 16:44:15

I moved the file `find_generators.py` in the last commit (1b9332e). I also tried to implement the deprecation framework following this guide: 

https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation.

However, I don't think it was a success because there is now one doctest that does not pass when I run the following command:

```
./sage -t src/sage/modular/modform/find_generators.py
```



```
File "src/sage/rings/find_generators.py", line 189, in sage.rings.find_generators.ModularFormsRing.__init__
Failed example:
    ModularFormsRing(Gamma1(13))
Expected:
    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field
Got:
    doctest:warning
    ...
    DeprecationWarning:
    Importing ModularFormsRing from here is deprecated. If you need to use it, please import it directly from sage.rings.find_generators
    See https://trac.sagemath.org/31559 for details.
    Ring of Modular Forms for Congruence Subgroup Gamma1(13) over Rational Field
**********************************************************************
1 item had failures:
   1 of  15 in sage.rings.find_generators.ModularFormsRing.__init__
    [117 tests, 1 failure, 2.24 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/rings/find_generators.py  # 1 doctest failed
----------------------------------------------------------------------
```


I haven't figured out why this happens yet. Do you have an idea of what is the problem?


---

Comment by vdelecroix created at 2021-07-27 08:46:06

The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like

```
sage: ModularFormsRing(Gamma1(13))
doctest:warning
...
DeprecationWarning: Importing ModularFormsRing from here is deprecated...
```



---

Comment by @DavidAyotte created at 2021-07-27 13:19:08

Replying to [comment:54 vdelecroix]:
> The error message is rather explicit. Importing `ModularFormsRing` from `find_generators.py` is deprecated. If you want to make a doctest for this you can write something like
> {{{
> sage: ModularFormsRing(Gamma1(13))
> doctest:warning
> ...
> DeprecationWarning: Importing ModularFormsRing from here is deprecated...
> }}}


What confuses me is that if I run the following command:


```
sage -t src/sage/rings/find_generators.py
```


I get the same error. Does this means that `ModularFormsRing` is imported from the old module?


---

Comment by vdelecroix created at 2021-07-28 14:51:22

The file that contains the tests does not matter. The problem is the file that imports `ModularFormsRing` in the sage namespace

```diff
diff --git a/src/sage/rings/all.py b/src/sage/rings/all.py
index 50f0a4e..a2a5923 100644
--- a/src/sage/rings/all.py
+++ b/src/sage/rings/all.py
@@ -166,3 +166,6 @@ from .asymptotic.all import *
 
 # Register classes in numbers abc
 from . import numbers_abc
+
+# Rings of modular forms
+from .find_generators import ModularFormsRing
```



---

Comment by vdelecroix created at 2021-07-28 14:51:43

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2021-07-28 14:51:43

If you look at the diff, you will notice that a lot of files do not have newlines at the end.


---

Comment by git created at 2021-07-28 18:35:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-28 18:38:36

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2021-07-28 19:18:35

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2021-07-28 19:18:35

There is no need to duplicate the `TestSuite` three times. All these would better appear together inside an EXAMPLES or TESTS block.

```
+            sage: M = ModularFormsRing(1)
+            sage: TestSuite(M).run()
+            sage: M15 = ModularFormsRing(Gamma1(5))
+            sage: TestSuite(M15).run()
+            sage: M013 = ModularFormsRing(Gamma0(13))
+            sage: TestSuite(M013).run()
```

then

```
+            sage: TestSuite(ModularFormsRing(1)).run()
+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()
+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()
```

and finally

```
+            sage: TestSuite(ModularFormsRing(1)).run()
+            sage: TestSuite(ModularFormsRing(Gamma0(6))).run()
+            sage: TestSuite(ModularFormsRing(Gamma1(4))).run()
```



---

Comment by vdelecroix created at 2021-07-28 19:21:51

The documentation of GradedModularFormElement is not helpful for the user
`The element class for ``ModularFormsRing```. You should expand a bit on what this is. Also, in this docstring it should also be advertized that the elements should not be built directly by calling the class constructor but rather via the parent.


---

Comment by vdelecroix created at 2021-07-28 19:25:23

In the documentation of `weights_list()` I would emphasize that the return value for zero is the empty list. In particular, it does not correspond to what you get via `weight()`. Maybe this is annoying?


---

Comment by vdelecroix created at 2021-07-28 19:28:25

Why the file `find_generators.py` is duplicated in both `sage/rings/` and `sage/modular/modform/`!?


---

Comment by vdelecroix created at 2021-07-28 19:29:21

Also in [comment:44] I proposed to rename `find_generators.py` into `ring.py`. You did agree in [comment:50] to make it but this was not done.


---

Comment by git created at 2021-07-29 15:03:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-29 17:26:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-07-29 18:27:28

There are still two files `sage/modular/modform/ring.py` and `sage/modular/modform/find_generators.py` containing the same code. What you provided is not working and is also not tested : when the import is triggered from `find_generators` there should be a warning.

Did you look at a file in the sage source code that implements these deprecated imports? For example `sage/rings/invariant_theory.py`. This is what should be done. And doctests must be added.


---

Comment by git created at 2021-07-31 15:22:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-31 15:38:42

Hello Vincent, I hope that what I did now is correct. I followed the example you gave me. It is now much clearer in my head. Prior to this, I was looking at the guide 

https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation 

and I think that some improvements could be made to make it clearer (I will probably do them later when I have time).


---

Comment by @DavidAyotte created at 2021-07-31 15:38:42

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2021-08-01 15:11:51

Looks better. Could you move the test for the deprecation inside `find_generators.py`. It would be better in the latter rather than `ring.py`.


---

Comment by vdelecroix created at 2021-08-01 15:12:35

Why do you put twice the same doctest

```
from sage.modular.modform.find_generators import find_generators
find_generators(ModularFormsRing(1))
```



---

Comment by vdelecroix created at 2021-08-01 15:15:10

The documentation of a class goes in the main docstring not in the `__init__` docstring. That is

```
class A(object):
    r"""
    This is my class A

    EXAMPLES:

    This is useful as it is the first letter of the alphabet::

        sage: a = A()
    """
    def __init__(self, a, b):
        r"""
        INPUT:
        
        - ``a`` - an a

        - ``b`` - a b
        """
```



---

Comment by @DavidAyotte created at 2021-08-01 15:29:10

Ok, I'll move the deprecation tests inside `find_generators`. It does make more sense. Considering the "same doctest", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:


```
            sage: from sage.modular.modform.RING import find_generators
            sage: find_generators(ModularFormsRing(1))
            doctest:warning
            ...
            DeprecationWarning: find_generators is deprecated. Please use sage.modular.modform.ring.generators instead.
            See https://trac.sagemath.org/31559 for details.

        ::

            sage: from sage.modular.modform.FIND_GENERATORS import find_generators
            sage: find_generators(ModularFormsRing(1))
            doctest:warning
            ...
            DeprecationWarning: Importing find_generators from here is deprecated. If you need to use it, please import it directly from sage.modular.modform.ring
            See https://trac.sagemath.org/31559 for details.
```


Considering the placement of the documentation of the class, I did it like this because that's how it was done before I started working on this ticket, but I will change it, thank you for pointing it out!


---

Comment by git created at 2021-08-01 15:53:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-08-01 18:40:33

Replying to [comment:73 gh-DavidAyotte]:
> Considering the "same doctest", in the first one I am testing the deprecated function name (as you suggested in comment 49) and in the second one I am testing the deprecation import warning:
> <...>

Indeed. I read too quickly! Sorry.


---

Comment by git created at 2021-08-02 13:11:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-08-02 13:14:43

In last commit, I moved some doctests inside the `__init__` method of `GradedModularFormElement` class because it was lacking doctests.


---

Comment by git created at 2021-08-02 16:04:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-08-03 14:25:14

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2021-08-03 14:25:14

All right. Let us move forward.


---

Comment by @DavidAyotte created at 2021-08-23 19:20:16

The `index.rst` file was not updated after renaming `find_generator.py` into `ring.py` and so the documentation does not show up in the reference manual. I'm fixing this.


---

Comment by @DavidAyotte created at 2021-08-23 19:20:16

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-08-23 19:21:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-08-23 19:21:53

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2021-08-26 06:52:02

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2021-08-26 06:52:02

thanks


---

Comment by vbraun created at 2021-08-31 22:00:54

Resolution: fixed
