# Issue 15154: Implementing the Foata bijection on permutations

archive/issues_015154.json:
```json
{
    "body": "CC:  jessicapalencia tscrim sage-combinat\n\nKeywords: days54, combinat\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15391\n\n",
    "created_at": "2013-11-09T22:34:20Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "Implementing the Foata bijection on permutations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15154",
    "user": "MariaMonks"
}
```
CC:  jessicapalencia tscrim sage-combinat

Keywords: days54, combinat



Issue created by migration from https://trac.sagemath.org/ticket/15391





---

archive/issue_comments_194545.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-11-14T23:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194545",
    "user": "MariaMonks"
}
```

New commits:



---

archive/issue_comments_194546.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-14T23:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194546",
    "user": "MariaMonks"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_194547.json:
```json
{
    "body": "Changing keywords from \"days54, combinat\" to \"days54, combinat, findstat02\".",
    "created_at": "2013-11-14T23:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194547",
    "user": "MariaMonks"
}
```

Changing keywords from "days54, combinat" to "days54, combinat, findstat02".



---

archive/issue_comments_194548.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-15T21:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194548",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194549.json:
```json
{
    "body": "Hi Maria, The code looks good. A couple of the doc tests failed, though. After you edit the permutation.py file, you can run the doc tests by typing from the command line:\nsage -bt permutation.py\n\n(the -b builds sage and the -t runs the doc tests in the file you specify)\n\nThis rebuilds sage with your code inserted and runs the doc tests. I fixed the syntax on your doc tests so that they work and pushed the changes to trac. You can see the diff by clicking on (commits) in the branch field above. Or you can pull the changes to your local machine to test them out. If you are happy with my changes, you may set the ticket to positive review.",
    "created_at": "2013-11-15T21:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194549",
    "user": "jessicapalencia"
}
```

Hi Maria, The code looks good. A couple of the doc tests failed, though. After you edit the permutation.py file, you can run the doc tests by typing from the command line:
sage -bt permutation.py

(the -b builds sage and the -t runs the doc tests in the file you specify)

This rebuilds sage with your code inserted and runs the doc tests. I fixed the syntax on your doc tests so that they work and pushed the changes to trac. You can see the diff by clicking on (commits) in the branch field above. Or you can pull the changes to your local machine to test them out. If you are happy with my changes, you may set the ticket to positive review.



---

archive/issue_comments_194550.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-16T01:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194550",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194551.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-16T02:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194551",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194552.json:
```json
{
    "body": "Hi Maria,\n\nnice work. If you're fine with my changes, set this to positive_review. Unfortunately, a (trivial, I hope) conflict resolution might become necessary once my #15174 is merged into Sage.\n\nGreets,\\\\\nDarij",
    "created_at": "2013-11-16T02:08:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194552",
    "user": "darij"
}
```

Hi Maria,

nice work. If you're fine with my changes, set this to positive_review. Unfortunately, a (trivial, I hope) conflict resolution might become necessary once my #15174 is merged into Sage.

Greets,\\
Darij



---

archive/issue_comments_194553.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-19T20:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194553",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194554.json:
```json
{
    "body": "I've updated it to the latest `5.13.beta3`, simplified the logic and made some additional tweaks. I'm happy with it, so it's up to someone else to check my changes and set a positive review.",
    "created_at": "2013-11-19T21:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194554",
    "user": "tscrim"
}
```

I've updated it to the latest `5.13.beta3`, simplified the logic and made some additional tweaks. I'm happy with it, so it's up to someone else to check my changes and set a positive review.



---

archive/issue_comments_194555.json:
```json
{
    "body": "Hi all,\n\nSorry, I'm new to this.  How do I see the changed file all in one place?  Do I pull something from the repository?  I just want to check it over before setting it to positive review.  Thanks for all your tweaks!\n\nMaria",
    "created_at": "2013-11-21T19:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194555",
    "user": "MariaMonks"
}
```

Hi all,

Sorry, I'm new to this.  How do I see the changed file all in one place?  Do I pull something from the repository?  I just want to check it over before setting it to positive review.  Thanks for all your tweaks!

Maria



---

archive/issue_comments_194556.json:
```json
{
    "body": "Hi Maria,\n\nI was just looking at it now too. Yes, you should switch to your local branch and pull the changes from the trac server. I believe the commands are:\n\ngit fetch origin\n\npull --ff-only\n\nJessica",
    "created_at": "2013-11-21T19:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194556",
    "user": "jessicapalencia"
}
```

Hi Maria,

I was just looking at it now too. Yes, you should switch to your local branch and pull the changes from the trac server. I believe the commands are:

git fetch origin

pull --ff-only

Jessica



---

archive/issue_comments_194557.json:
```json
{
    "body": "After you pull, you can look at the new code, but if you want to test the features in Sage, you need to build sage:\n\nsage -bt permutation.py\n\nBut for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)\n\nAnyway, once you're happy with it, you can set it to positive review.",
    "created_at": "2013-11-21T21:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194557",
    "user": "jessicapalencia"
}
```

After you pull, you can look at the new code, but if you want to test the features in Sage, you need to build sage:

sage -bt permutation.py

But for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)

Anyway, once you're happy with it, you can set it to positive review.



---

archive/issue_comments_194558.json:
```json
{
    "body": "Replying to [comment:12 jessicapalencia]:\n> But for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)\n\nYes, it's expected. The recent bump changes some low-level `.pxi` or similar such file that everything depends on, so a big recompile occurs. I got annoyed by this and merged the latest beta version into all my branches. Although this should improve significantly with #15430 (and ccache I think...) in the sense that we shouldn't need to do the recompile, or at least it will be significantly sped up, when changing between branches which change cython files.",
    "created_at": "2013-11-22T02:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194558",
    "user": "tscrim"
}
```

Replying to [comment:12 jessicapalencia]:
> But for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)

Yes, it's expected. The recent bump changes some low-level `.pxi` or similar such file that everything depends on, so a big recompile occurs. I got annoyed by this and merged the latest beta version into all my branches. Although this should improve significantly with #15430 (and ccache I think...) in the sense that we shouldn't need to do the recompile, or at least it will be significantly sped up, when changing between branches which change cython files.



---

archive/issue_comments_194559.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-11-22T19:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194559",
    "user": "MariaMonks"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_194560.json:
```json
{
    "body": "Ok, all the changes look good, and I set it to positive review.  (And yes, I also had to leave sage to rebuild overnight.) What happens next?",
    "created_at": "2013-11-22T19:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194560",
    "user": "MariaMonks"
}
```

Ok, all the changes look good, and I set it to positive review.  (And yes, I also had to leave sage to rebuild overnight.) What happens next?



---

archive/issue_comments_194561.json:
```json
{
    "body": "In the case of no conflict, it gets merged into Sage 6.0 more or less automatically (unless the patchbot finds errors in the patch). \n\nIf some conflict arises (this might happen due to #15174 and other mercurial stuff that will probably get merged before this one), the release manager will reset this ticket to needs_work, and someone will have to make a merge commit to bring this patch up to date. \"Someone\" can be any of us, as resolving this kind of conflict (bugfixes in old methods vs. introduction of a new method) should be very easy. (Maybe the release manager will do it himself.)\n\nGood work, Maria! (Already using the method...)",
    "created_at": "2013-11-22T22:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194561",
    "user": "darij"
}
```

In the case of no conflict, it gets merged into Sage 6.0 more or less automatically (unless the patchbot finds errors in the patch). 

If some conflict arises (this might happen due to #15174 and other mercurial stuff that will probably get merged before this one), the release manager will reset this ticket to needs_work, and someone will have to make a merge commit to bring this patch up to date. "Someone" can be any of us, as resolving this kind of conflict (bugfixes in old methods vs. introduction of a new method) should be very easy. (Maybe the release manager will do it himself.)

Good work, Maria! (Already using the method...)



---

archive/issue_comments_194562.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-20T15:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15154#issuecomment-194562",
    "user": "vbraun"
}
```

Resolution: fixed
