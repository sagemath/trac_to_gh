# Issue 15154: Implementing the Foata bijection on permutations

Issue created by migration from Trac.

Original creator: MariaMonks

Original creation time: 2013-11-09 22:34:20

CC:  jessicapalencia tscrim sage-combinat

Keywords: days54, combinat




---

Comment by MariaMonks created at 2013-11-14 23:36:48

New commits:


---

Comment by MariaMonks created at 2013-11-14 23:36:48

Changing status from new to needs_review.


---

Comment by MariaMonks created at 2013-11-14 23:37:55

Changing keywords from "days54, combinat" to "days54, combinat, findstat02".


---

Comment by git created at 2013-11-15 21:35:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jessicapalencia created at 2013-11-15 21:42:14

Hi Maria, The code looks good. A couple of the doc tests failed, though. After you edit the permutation.py file, you can run the doc tests by typing from the command line:
sage -bt permutation.py

(the -b builds sage and the -t runs the doc tests in the file you specify)

This rebuilds sage with your code inserted and runs the doc tests. I fixed the syntax on your doc tests so that they work and pushed the changes to trac. You can see the diff by clicking on (commits) in the branch field above. Or you can pull the changes to your local machine to test them out. If you are happy with my changes, you may set the ticket to positive review.


---

Comment by git created at 2013-11-16 01:50:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-11-16 02:06:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2013-11-16 02:08:28

Hi Maria,

nice work. If you're fine with my changes, set this to positive_review. Unfortunately, a (trivial, I hope) conflict resolution might become necessary once my #15174 is merged into Sage.

Greets,\\
Darij


---

Comment by git created at 2013-11-19 20:57:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2013-11-19 21:04:33

I've updated it to the latest `5.13.beta3`, simplified the logic and made some additional tweaks. I'm happy with it, so it's up to someone else to check my changes and set a positive review.


---

Comment by MariaMonks created at 2013-11-21 19:51:14

Hi all,

Sorry, I'm new to this.  How do I see the changed file all in one place?  Do I pull something from the repository?  I just want to check it over before setting it to positive review.  Thanks for all your tweaks!

Maria


---

Comment by jessicapalencia created at 2013-11-21 19:54:54

Hi Maria,

I was just looking at it now too. Yes, you should switch to your local branch and pull the changes from the trac server. I believe the commands are:

git fetch origin

pull --ff-only

Jessica


---

Comment by jessicapalencia created at 2013-11-21 21:06:04

After you pull, you can look at the new code, but if you want to test the features in Sage, you need to build sage:

sage -bt permutation.py

But for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)

Anyway, once you're happy with it, you can set it to positive review.


---

Comment by tscrim created at 2013-11-22 02:41:06

Replying to [comment:12 jessicapalencia]:
> But for me, it's taking a long time to build, probably because it's upgrading to a new beta version. (Is this to be expected, Travis?)

Yes, it's expected. The recent bump changes some low-level `.pxi` or similar such file that everything depends on, so a big recompile occurs. I got annoyed by this and merged the latest beta version into all my branches. Although this should improve significantly with #15430 (and ccache I think...) in the sense that we shouldn't need to do the recompile, or at least it will be significantly sped up, when changing between branches which change cython files.


---

Comment by MariaMonks created at 2013-11-22 19:22:16

Changing status from needs_review to positive_review.


---

Comment by MariaMonks created at 2013-11-22 19:23:29

Ok, all the changes look good, and I set it to positive review.  (And yes, I also had to leave sage to rebuild overnight.) What happens next?


---

Comment by darij created at 2013-11-22 22:23:45

In the case of no conflict, it gets merged into Sage 6.0 more or less automatically (unless the patchbot finds errors in the patch). 

If some conflict arises (this might happen due to #15174 and other mercurial stuff that will probably get merged before this one), the release manager will reset this ticket to needs_work, and someone will have to make a merge commit to bring this patch up to date. "Someone" can be any of us, as resolving this kind of conflict (bugfixes in old methods vs. introduction of a new method) should be very easy. (Maybe the release manager will do it himself.)

Good work, Maria! (Already using the method...)


---

Comment by vbraun created at 2013-12-20 15:50:53

Resolution: fixed
