# Issue 23913: Factory function for famous lattices

Issue created by migration from Trac.

Original creator: pmenegat

Original creation time: 2017-11-03 13:38:22

Write a method for the `IntegralLattice` class for generating the root lattices A_n, D_n, E_n, euclidian lattice, U with standard basis.

Example:

```
IntegralLattice("A",3)
IntegralLattice("U")
IntegralLattice(4)
```



---

Comment by pmenegat created at 2017-11-03 13:41:14

Set assignee to pmenegat.


---

Comment by pmenegat created at 2017-11-03 13:41:14

Changing type from PLEASE CHANGE to enhancement.


---

Comment by pmenegat created at 2017-11-03 13:41:14

Changing component from PLEASE CHANGE to quadratic forms.


---

Comment by pmenegat created at 2017-11-03 19:05:58

New commits:


---

Comment by pmenegat created at 2017-11-03 19:05:58

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-11-03 21:13:48

For the ADE latttices, I think you should follow the `CartanType` format of `['A', 2]` or `"A2"`. We should also think a little long-term about how the root/weight lattice code in `src/combinat/root_system/` will interact with the `IntegralLattice` code.


---

Comment by pmenegat created at 2017-11-04 11:48:06

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-11-04 12:01:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pmenegat created at 2017-11-04 12:02:17

Changing status from needs_work to needs_review.


---

Comment by sbrandhorst created at 2017-11-07 18:21:58

Last 10 new commits:


---

Comment by git created at 2017-11-07 18:28:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-11-07 18:35:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-11-07 18:46:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2017-11-07 18:48:24

I did some trivial modifications of the documentation.
Positive review if you are happy with my changes.


---

Comment by sbrandhorst created at 2017-11-07 18:49:44

The reason to merge in #23699 is that it adds `IntegralLattice` to the global namespace and the documentation. Thus we can clean up the docstrings with this ticket.


---

Comment by git created at 2017-11-07 19:40:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-11-07 19:51:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2017-11-07 19:53:17

The doc builds and looks fine.


---

Comment by tscrim created at 2017-11-07 23:06:40

I got rid of the input `IntegralLattice("A",3)` because you made the code unnecessarily complicated by supporting that, where it is more natural for the input to be something that is recognizable by `CartanType`/`CartanMatrix`/etc. Moreover, the code previously had a bug:

```
sage: H5 = Matrix(ZZ, 2, [2,1,1,-2])
sage: IntegralLattice(H5, Matrix([1,1]))
Lattice of degree 2 and rank 2 over Integer Ring
Basis matrix:
[1 0]
[0 1]
Inner product matrix:
[ 2  1]
[ 1 -2]
sage: IntegralLattice(H5, basis=Matrix([1,1]))
Lattice of degree 2 and rank 1 over Integer Ring
Basis matrix:
[1 1]
Inner product matrix:
[ 2  1]
[ 1 -2]
```

whereas you claimed in the doc that they were the same. So if my changes look good (and this example is now correct and valid), then positive review.
----
New commits:


---

Comment by pmenegat created at 2017-11-10 09:27:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-09 12:20:45

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-12-09 12:20:45

Doctests fail with #24096


---

Comment by tscrim created at 2017-12-09 12:51:53

You (should) just need to make this change:

```diff
-from sage.matrix.matrix import is_Matrix
+from sage.structure.element import is_Matrix
```



---

Comment by git created at 2017-12-09 14:49:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2017-12-09 14:52:08

O.K. Let's see what patchbot has to say.


---

Comment by tscrim created at 2017-12-09 23:58:04

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-12-13 17:38:40

Resolution: fixed
