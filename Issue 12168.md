# Issue 12168: the optional polymake doctests are seriously misformatted so never run

Issue created by migration from https://trac.sagemath.org/ticket/12340

Original creator: was

Original creation time: 2012-01-21 21:36:11

Assignee: mvngu


```
sage: search_src('polymake')
```

reveals many tests marked `# optional: needs polymake`.
These will *NOT* get run by doing

```
sage -t -only_optional=polymake geometry/polytope.py
```


They should be formatted as

```
#optional - polymake
```


By the way, this test works fine without polymake is installed, because it doesn't do anything, so improve that by adding another test right after this that actually exercise the optional package.

```
sage: P = polymake.convex_hull([[1,0,0,0], [1,0,0,1], [1,0,1,0], [1,0,1,1],  [1,1,0,0], [1,1,0,1], [1,1,1,0], [1,1,1,1]])
```




---

Comment by was created at 2012-01-21 21:37:33

By the way, this code is from my commit 271, i.e., ancient history, before there was an infrastructure for how optional package tests worked.  But it would be good to update this.


---

Comment by benjaminfjones created at 2012-05-26 03:48:34

I'm working on this, looks like polymake appears in `geometry/polytope.py`, `rings/polynomial/groebner_fan.py`, and `rings/polynomial/multi_polynomial.pyx`.


---

Attachment

mark doctests requiring polymake correctly


---

Comment by benjaminfjones created at 2012-05-26 06:45:07

Changing status from new to needs_review.


---

Comment by benjaminfjones created at 2012-05-26 06:45:07

I could add doctests to a bunch of functions here, but I can't get the the polymake spkg to build on pretty much any platform, see #5488. But in the meantime, the attached patch corrects the optional doctests.


---

Comment by mhansen created at 2012-05-27 23:09:20

Looks good to me.


---

Comment by mhansen created at 2012-05-27 23:09:20

Changing status from needs_review to positive_review.


---

Comment by mhansen created at 2012-05-27 23:13:15

Changing keywords from "" to "sd40.5".


---

Comment by jdemeyer created at 2012-06-05 06:45:54

Resolution: fixed
