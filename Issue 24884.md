# Issue 24884: fix edge color format in graphviz_string

archive/issues_024884.json:
```json
{
    "body": "CC:  slabbe nthiery\n\ngraphviz color format should be one of the following\n- HSV triple such as `\".08396, 0.4862,0.8549\"`\n- RBG triple such as `#DA70D6`\n- name such as `orchid`\nAs a consequence the following is broken\n\n```\nsage: G = Graph([(0,1)])\nsage: G.set_latex_options(edge_colors={(0,1): (0.3, 0.9, 0.0)})\nsage: view(G)\n```\n\nTo make it coherent with matplotlib options as in\n\n```\nsage: plot(x, color=(0.3, 0.9, 0))\n```\n\nwe convert 3-tuples in RGB format using the `to_hex` function from matplotlib.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25121\n\n",
    "created_at": "2018-04-08T18:51:18Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "fix edge color format in graphviz_string",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24884",
    "user": "vdelecroix"
}
```
CC:  slabbe nthiery

graphviz color format should be one of the following
- HSV triple such as `".08396, 0.4862,0.8549"`
- RBG triple such as `#DA70D6`
- name such as `orchid`
As a consequence the following is broken

```
sage: G = Graph([(0,1)])
sage: G.set_latex_options(edge_colors={(0,1): (0.3, 0.9, 0.0)})
sage: view(G)
```

To make it coherent with matplotlib options as in

```
sage: plot(x, color=(0.3, 0.9, 0))
```

we convert 3-tuples in RGB format using the `to_hex` function from matplotlib.

Issue created by migration from https://trac.sagemath.org/ticket/25121





---

archive/issue_comments_349690.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-04-08T19:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349690",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_349691.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-08T19:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349691",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_349692.json:
```json
{
    "body": "Why do you do this?\n\n```\n+to_hex = None   # overriden when needed in graphviz_string\n```\n\n\nto gain some time at start up?\n\n```\nsage: %time from matplotlib.colors import to_hex\nCPU times: user 60 ms, sys: 12 ms, total: 72 ms\nWall time: 70.7 ms\n```\n\n\nThen why not lazy import it?",
    "created_at": "2018-04-09T09:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349692",
    "user": "slabbe"
}
```

Why do you do this?

```
+to_hex = None   # overriden when needed in graphviz_string
```


to gain some time at start up?

```
sage: %time from matplotlib.colors import to_hex
CPU times: user 60 ms, sys: 12 ms, total: 72 ms
Wall time: 70.7 ms
```


Then why not lazy import it?



---

archive/issue_comments_349693.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-11T15:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349693",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349694.json:
```json
{
    "body": "Good suggestion! Thanks.",
    "created_at": "2018-04-11T15:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349694",
    "user": "vdelecroix"
}
```

Good suggestion! Thanks.



---

archive/issue_comments_349695.json:
```json
{
    "body": "Adding `format='dot2tex'` in the description otherwise `view(G)` just works and does not illustrate the problem.",
    "created_at": "2018-04-12T08:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349695",
    "user": "slabbe"
}
```

Adding `format='dot2tex'` in the description otherwise `view(G)` just works and does not illustrate the problem.



---

archive/issue_comments_349696.json:
```json
{
    "body": "\n```\nsage -tp --optional=dot2tex,sage,graphviz --show-skipped src/sage/graphs/generic_graph.py\n```\n\nlooks good.\n\nI added a very small change. If you agree, change this ticket to positive review.\n----\nNew commits:",
    "created_at": "2018-04-12T08:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349696",
    "user": "slabbe"
}
```


```
sage -tp --optional=dot2tex,sage,graphviz --show-skipped src/sage/graphs/generic_graph.py
```

looks good.

I added a very small change. If you agree, change this ticket to positive review.
----
New commits:



---

archive/issue_comments_349697.json:
```json
{
    "body": "Changing keywords from \"\" to \"thursdaysbdx\".",
    "created_at": "2018-04-12T08:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349697",
    "user": "slabbe"
}
```

Changing keywords from "" to "thursdaysbdx".



---

archive/issue_comments_349698.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-12T16:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349698",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349699.json:
```json
{
    "body": "Merci S\u00e9bastien!",
    "created_at": "2018-04-12T16:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349699",
    "user": "vdelecroix"
}
```

Merci SÃ©bastien!



---

archive/issue_comments_349700.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-12T11:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24884#issuecomment-349700",
    "user": "vbraun"
}
```

Resolution: fixed
