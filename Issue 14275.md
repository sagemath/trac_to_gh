# Issue 14275: Catch CDD errors during polyhedron construction

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-04-23 12:08:34

Assignee: mhampton

As reported on https://groups.google.com/d/msg/sage-support/lsUODuV47kc/7O0CLf1_ywMJ, numerically unstable input is not treated correctly in CDD and it errors out instead. This patch detects the error and converts it into a ValueError


---

Comment by vbraun created at 2013-04-23 12:09:32

Initial patch


---

Attachment


---

Comment by vbraun created at 2013-04-23 12:09:56

Changing status from new to needs_review.


---

Comment by dimpase created at 2013-04-23 13:46:00

Could you also add in the doctest

```
Polyhedron(point_list,base_ring=QQ)
```

and 

```
Polyhedron(point_list,backend='ppl',base_ring=QQ)
```

to give people more hints how to avoid that error?

By the way, is there any reason for having `cdd` as the default backend? On this example it's more than 10 times slower than `ppl`.


---

Comment by ncohen created at 2013-04-23 14:11:38

HMmmmmmmm... And isn't there something wrong with the "verbose" keywords you add to "init_from_Vrepresentation" and "init_from_Hrepresentation" ? You add them to the method, but you don't use them in the code that follows ! `O_o`

Nathann


---

Comment by vbraun created at 2013-04-23 16:17:57

cdd is the only backend for floating-point numbers, and therefore the default. Does anybody know a better floating-point implementation?

The `verbose` keyword argument just wasn't patched through correctly.


---

Comment by dimpase created at 2013-04-23 17:02:39

reviewer patch


---

Attachment

Replying to [comment:4 vbraun]:
> cdd is the only backend for floating-point numbers, and therefore the default. Does anybody know a better floating-point implementation?
> 
> The `verbose` keyword argument just wasn't patched through correctly.

do you mean to say that something needs to be fixed in your patch?


---

Comment by vbraun created at 2013-04-23 18:43:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-04-23 18:43:47

No, I was just trying to explain why my patch adds the `verbose` keyword argument in some places.

Positive review to the reviewer patch.


---

Comment by dimpase created at 2013-04-24 00:30:25

Replying to [comment:6 vbraun]:
> No, I was just trying to explain why my patch adds the `verbose` keyword argument in some places.
> 
> Positive review to the reviewer patch.
all looks good to me, positive review.


---

Comment by ncohen created at 2013-04-24 06:36:45

What I don't get is why you would add a `verbose` arguments to methods that never use the `verbose` variable in their code `O_o`

Nathann


---

Comment by vbraun created at 2013-04-24 09:25:42

Both `Polyhedron_ppl` and `Polyhedron_cdd` derive from Polyhedron_base`. They both override `_init_from_Vrepresentation`. One of them doesn't (yet) do anything if you pass `verbose=True`, but it should still accept the argument so that you can use the two derived classes interchangeably.


---

Comment by jdemeyer created at 2013-04-28 10:34:40

Resolution: fixed
