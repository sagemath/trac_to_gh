# Issue 14150: simplicial complexes: add_face doesn't clear enough cached data

Issue created by migration from Trac.

Original creator: jhpalmieri

Original creation time: 2013-03-25 05:51:32

Assignee: tbd

CC:  tscrim

Running `add_face` on a simplicial complex doesn't clear various data related to homology calculations:

```
sage: T = SimplicialComplex([range(1,5)]).n_skeleton(1)
sage: T.homology()
{0: 0, 1: Z x Z x Z}
sage: T.add_face([1,2,3])
sage: T.homology() # should be free of rank 2
{0: 0, 1: Z x Z x Z, 2: 0}
sage: SimplicialComplex(T.facets()).homology()
{0: 0, 1: Z x Z, 2: 0}
```

See also [http://ask.sagemath.org/question/2391/homology-of-simplicial-complexes](http://ask.sagemath.org/question/2391/homology-of-simplicial-complexes).


---

Comment by jhpalmieri created at 2013-03-25 05:53:23

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-03-26 22:51:51

Changing component from PLEASE CHANGE to geometry.


---

Comment by jhpalmieri created at 2013-03-26 23:49:46

Changing component from geometry to algebraic topology.


---

Comment by tscrim created at 2013-03-27 16:21:08

Could you make `self.__contractible = {}` to `self.__contractible = None` to be consistent with the initial state (I also think this will result in a speedup for larger complexes since I think it will know to compute a large contractible subcomplex)? Other than that, I think this looks good. Thanks.


---

Comment by jhpalmieri created at 2013-03-27 17:44:06

Good point, thanks. Fixed now.


---

Attachment


---

Comment by tscrim created at 2013-03-27 18:05:56

Thank you.


---

Comment by tscrim created at 2013-03-27 18:05:56

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-03-28 17:57:01

Resolution: fixed
