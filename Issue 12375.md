# Issue 12375: Single variable inequalities in MixedIntegerLinearProgram should set the min and max automatically

archive/issues_012375.json:
```json
{
    "body": "Assignee: @nathanncohen\n\nCC:  @dimpase\n\nKeywords: MixedIntegerLinearProgram\n\nCurrently single variable inequalities in `MixedIntegerLinearProgram` are more or less \"ignored.\" So if one enters something like\n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: b = p.new_variable()\nsage: p.add_constraint( -1 <= b[0] )\nsage: p.add_constraint( b[0] <= 2 )\nsage: p.show()\nMaximization:\n \nConstraints:\n  x_0 <= 2.0\nVariables:\n  x_0 is a continuous variable (min=0.0, max=+oo)\n```\nAs evident from the above code, the min and the max of the variable have not been changed and so the lower bound on `b[0]` will be simply ignored by the optimization.\n\nThe method `add_constraint` should automatically set the min and the max if it detects that there is only one variable in the constraint.\n\nThis ticket also depends on a proper fix for #12546 so that constraints can be added as\n\n```\nsage: p.add_constraint( -1 <=  b[0] <= 2 )\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/12547\n\n",
    "created_at": "2012-02-20T07:42:27Z",
    "labels": [
        "component: linear programming",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Single variable inequalities in MixedIntegerLinearProgram should set the min and max automatically",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12375",
    "user": "https://github.com/ppurka"
}
```
Assignee: @nathanncohen

CC:  @dimpase

Keywords: MixedIntegerLinearProgram

Currently single variable inequalities in `MixedIntegerLinearProgram` are more or less "ignored." So if one enters something like

```
sage: p = MixedIntegerLinearProgram()
sage: b = p.new_variable()
sage: p.add_constraint( -1 <= b[0] )
sage: p.add_constraint( b[0] <= 2 )
sage: p.show()
Maximization:
 
Constraints:
  x_0 <= 2.0
Variables:
  x_0 is a continuous variable (min=0.0, max=+oo)
```
As evident from the above code, the min and the max of the variable have not been changed and so the lower bound on `b[0]` will be simply ignored by the optimization.

The method `add_constraint` should automatically set the min and the max if it detects that there is only one variable in the constraint.

This ticket also depends on a proper fix for #12546 so that constraints can be added as

```
sage: p.add_constraint( -1 <=  b[0] <= 2 )
```

Issue created by migration from https://trac.sagemath.org/ticket/12547





---

archive/issue_comments_145672.json:
```json
{
    "body": "Hellooooooooooo !!\n\nThis problem has already been reported in #12091. Besides, there is *no reason on earth why Sage should change lower bounds because of constraints*. This would be *VERY* bad. I mean, which kind of behaviour is that ? If you add two constraints, one loser than the first, the solver should only remember the losest one ? Or only when it is \"one variable\" and \"its lower bound\" ?\n\nThe thing about constraints is that they are generated from a specific problem. If for some unknown reason the constraints generated are of the form \"b[i] >= -2\" the LP would now let b[i] have negative values, and that's just NOT what was intended.\n\nPlus it's not really like this is some specificity of Sage. ALL (no exceptions) LP solvers work this way. \n\nNathann",
    "created_at": "2012-02-20T08:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145672",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooooooo !!

This problem has already been reported in #12091. Besides, there is *no reason on earth why Sage should change lower bounds because of constraints*. This would be *VERY* bad. I mean, which kind of behaviour is that ? If you add two constraints, one loser than the first, the solver should only remember the losest one ? Or only when it is "one variable" and "its lower bound" ?

The thing about constraints is that they are generated from a specific problem. If for some unknown reason the constraints generated are of the form "b[i] >= -2" the LP would now let b[i] have negative values, and that's just NOT what was intended.

Plus it's not really like this is some specificity of Sage. ALL (no exceptions) LP solvers work this way. 

Nathann



---

archive/issue_comments_145673.json:
```json
{
    "body": "Well, I previously used Mathematica and constraints there [can be given in this form](http://www.wolframalpha.com/input/?i=NMinimize%5B%7Bx%2C+-2+%3C%3D+x+%3C%3D+-1%7D%2C+%7Bx%7D%5D).\n\nI felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.",
    "created_at": "2012-02-20T13:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145673",
    "user": "https://github.com/ppurka"
}
```

Well, I previously used Mathematica and constraints there [can be given in this form](http://www.wolframalpha.com/input/?i=NMinimize%5B%7Bx%2C+-2+%3C%3D+x+%3C%3D+-1%7D%2C+%7Bx%7D%5D).

I felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.



---

archive/issue_comments_145674.json:
```json
{
    "body": "> I felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.\n\n\nWell, I never claimed that Sage's way was the best `:-)`\nActually, there are many different ways to add constraints... With inequalities, or with the min/max arguments of the add_constraint method. We can also create other if it is easier.\nThe thing is that there are many cases (the Graph library is full of them) where LP are generated from a graph, so this should stay possible. And also that changing the lower bounds the way would suggested was dangerous in many cases.. But that's all, I earn no money if we keep the current implementation of add_constraint, so we're free to do whatever we want with them `:-)`\n\nNathann",
    "created_at": "2012-02-20T14:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145674",
    "user": "https://github.com/nathanncohen"
}
```

> I felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.


Well, I never claimed that Sage's way was the best `:-)`
Actually, there are many different ways to add constraints... With inequalities, or with the min/max arguments of the add_constraint method. We can also create other if it is easier.
The thing is that there are many cases (the Graph library is full of them) where LP are generated from a graph, so this should stay possible. And also that changing the lower bounds the way would suggested was dangerous in many cases.. But that's all, I earn no money if we keep the current implementation of add_constraint, so we're free to do whatever we want with them `:-)`

Nathann



---

archive/issue_events_033866.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33866"
}
```



---

archive/issue_events_033867.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33867"
}
```



---

archive/issue_events_033868.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33868"
}
```



---

archive/issue_events_033869.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33869"
}
```



---

archive/issue_events_033870.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33870"
}
```



---

archive/issue_comments_145675.json:
```json
{
    "body": "Agree with Nathann, close as wontfix.\n\nSage should not magically change a constraint like `x[0] >= 2` to change the minimum of `x[0]`. Constraints and minima/maxima of variables are independent things and should stay independent. Moreover, the proposal here is incompatible with `p.remove_constraint()`.",
    "created_at": "2014-08-05T06:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145675",
    "user": "https://github.com/jdemeyer"
}
```

Agree with Nathann, close as wontfix.

Sage should not magically change a constraint like `x[0] >= 2` to change the minimum of `x[0]`. Constraints and minima/maxima of variables are independent things and should stay independent. Moreover, the proposal here is incompatible with `p.remove_constraint()`.



---

archive/issue_events_033871.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-08-05T06:34:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33871"
}
```



---

archive/issue_events_033872.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-08-05T06:34:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33872"
}
```



---

archive/issue_comments_145676.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-05T06:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145676",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_145677.json:
```json
{
    "body": "Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored. This ticket is indeed invalid now.",
    "created_at": "2014-08-06T05:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145677",
    "user": "https://github.com/ppurka"
}
```

Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored. This ticket is indeed invalid now.



---

archive/issue_comments_145678.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-06T14:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145678",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_033873.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-20T20:34:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12375#event-33873"
}
```



---

archive/issue_comments_145679.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-20T20:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145679",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_145680.json:
```json
{
    "body": "Resolution changed from fixed to wontfix",
    "created_at": "2014-08-20T20:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145680",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to wontfix



---

archive/issue_comments_145681.json:
```json
{
    "body": "Replying to [comment:8 ppurka]:\n> Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored.\n\nFrom reading the ticket description, that wasn't the main issue of this ticket, that was just once sentence at the end. To clarify this, I removed that sentence and re-closed this ticket as \"wontfix\" instead.",
    "created_at": "2014-08-20T20:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12375#issuecomment-145681",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:8 ppurka]:
> Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored.

From reading the ticket description, that wasn't the main issue of this ticket, that was just once sentence at the end. To clarify this, I removed that sentence and re-closed this ticket as "wontfix" instead.
