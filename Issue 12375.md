# Issue 12375: Single variable inequalities in MixedIntegerLinearProgram should set the min and max automatically

Issue created by migration from https://trac.sagemath.org/ticket/12547

Original creator: ppurka

Original creation time: 2012-02-20 07:42:27

Assignee: ncohen

CC:  dimpase

Keywords: MixedIntegerLinearProgram

Currently single variable inequalities in `MixedIntegerLinearProgram` are more or less "ignored." So if one enters something like

```
sage: p = MixedIntegerLinearProgram()
sage: b = p.new_variable()
sage: p.add_constraint( -1 <= b[0] )
sage: p.add_constraint( b[0] <= 2 )
sage: p.show()
Maximization:
 
Constraints:
  x_0 <= 2.0
Variables:
  x_0 is a continuous variable (min=0.0, max=+oo)
```

As evident from the above code, the min and the max of the variable have not been changed and so the lower bound on `b[0]` will be simply ignored by the optimization.

The method `add_constraint` should automatically set the min and the max if it detects that there is only one variable in the constraint.

This ticket also depends on a proper fix for #12546 so that constraints can be added as

```
sage: p.add_constraint( -1 <=  b[0] <= 2 )
```



---

Comment by ncohen created at 2012-02-20 08:32:16

Hellooooooooooo !!

This problem has already been reported in #12091. Besides, there is *no reason on earth why Sage should change lower bounds because of constraints*. This would be *VERY* bad. I mean, which kind of behaviour is that ? If you add two constraints, one loser than the first, the solver should only remember the losest one ? Or only when it is "one variable" and "its lower bound" ?

The thing about constraints is that they are generated from a specific problem. If for some unknown reason the constraints generated are of the form "b[i] >= -2" the LP would now let b[i] have negative values, and that's just NOT what was intended.

Plus it's not really like this is some specificity of Sage. ALL (no exceptions) LP solvers work this way. 

Nathann


---

Comment by ppurka created at 2012-02-20 13:39:34

Well, I previously used Mathematica and constraints there [can be given in this form](http://www.wolframalpha.com/input/?i=NMinimize%5B%7Bx%2C+-2+%3C%3D+x+%3C%3D+-1%7D%2C+%7Bx%7D%5D).

I felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.


---

Comment by ncohen created at 2012-02-20 14:23:40

> I felt it was a more user-friendly way of taking input since you essentially just write the inequations as you would write on paper.

Well, I never claimed that Sage's way was the best `:-)`
Actually, there are many different ways to add constraints... With inequalities, or with the min/max arguments of the add_constraint method. We can also create other if it is easier.
The thing is that there are many cases (the Graph library is full of them) where LP are generated from a graph, so this should stay possible. And also that changing the lower bounds the way would suggested was dangerous in many cases.. But that's all, I earn no money if we keep the current implementation of add_constraint, so we're free to do whatever we want with them `:-)`

Nathann


---

Comment by jdemeyer created at 2014-08-05 06:34:18

Agree with Nathann, close as wontfix.

Sage should not magically change a constraint like `x[0] >= 2` to change the minimum of `x[0]`. Constraints and minima/maxima of variables are independent things and should stay independent. Moreover, the proposal here is incompatible with `p.remove_constraint()`.


---

Comment by jdemeyer created at 2014-08-05 06:34:18

Changing status from new to needs_review.


---

Comment by ppurka created at 2014-08-06 05:43:06

Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored. This ticket is indeed invalid now.


---

Comment by jdemeyer created at 2014-08-06 14:33:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-20 20:34:52

Resolution: fixed


---

Comment by jdemeyer created at 2014-08-20 20:37:04

Resolution changed from fixed to wontfix


---

Comment by jdemeyer created at 2014-08-20 20:43:38

Replying to [comment:8 ppurka]:
> Actually, #12091 has fixed the main issue in this ticket - that constraints were getting ignored.
From reading the ticket description, that wasn't the main issue of this ticket, that was just once sentence at the end. To clarify this, I removed that sentence and re-closed this ticket as "wontfix" instead.
