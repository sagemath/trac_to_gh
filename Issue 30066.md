# Issue 30066: Graphs: two families of distance-regular graphs

Issue created by migration from https://trac.sagemath.org/ticket/30303

Original creator: @Ivo-Maffei

Original creation time: 2020-08-06 13:03:25

CC:  dimpase

Keywords: drg, dual_polar_spaces

We introduce two families of distance-regular graphs related to dual polar spaces.


---

Comment by @Ivo-Maffei created at 2020-08-06 13:05:26

Changing status from new to needs_review.


---

Comment by @Ivo-Maffei created at 2020-08-06 13:05:26

Last 10 new commits:


---

Comment by dcoudert created at 2020-08-07 08:58:31

Why are you using `const int m` ? any particular reason ?

you must add tests to check the validity of input parameters.

Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.

a few pep8 issues like
- `(2*m-2,q)` -> `(2 * m - 2, q)`
- `({m},{q})` -> `({m}, {q})`
- `(%d,%d,%d)"%(e,m,q)` -> `(%d, %d, %d)"%(e, m, q)`


---

Comment by git created at 2020-08-07 12:32:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @Ivo-Maffei created at 2020-08-07 12:43:12

Replying to [comment:3 dcoudert]:
> Why are you using `const int m` ? any particular reason ?
The idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.
However, I believe that types are great as they give the reader useful info.

> you must add tests to check the validity of input parameters.
Do you mean doctests or checks inside the functions?
For the latter there shouldn't be any need as errors will get raised from the functions used inside.

> Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
> And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.
These are good things to know and I updated the code. Is there any benefit in using them?


> a few pep8 issues
I think I got them all fixed now.


---

Comment by git created at 2020-08-07 12:47:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-08-07 14:19:55

Replying to [comment:5 gh-Ivo-Maffei]:
> Replying to [comment:3 dcoudert]:
> > Why are you using `const int m` ? any particular reason ?
> The idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.
> However, I believe that types are great as they give the reader useful info.

I agree that this way the type of input is checked, but I don't think you can expect any speed up here.
 
 
> > you must add tests to check the validity of input parameters.
> Do you mean doctests or checks inside the functions?
> For the latter there shouldn't be any need as errors will get raised from the functions used inside.

I mean in the function, but if your are sure that functions called inside this method will raise errors in all cases, then it should be ok.
 
 
> > Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
> > And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.
> These are good things to know and I updated the code. Is there any benefit in using them?

`for v in G` is equivalent to `for v in G.vertex_iterator()`. So it iterates over the vertices without assumption on the order of the vertices.
So far, `G.vertices()` returns a (sorted) list of vertices. So when you call `for v in G.vertices(sort=False):`, you first build the list of vertices and then iterate over it. It's equivalent to `for v in list(G)` or `for v in list(G.vertex_iterator())`. Building this list is a waste of space and time here.

This is different for edges as now `G.edges()` returns an object of type `EdgesView` enabling to iterate over the edges without building the list. So `for e in G.edges(sort=False)` and `for e in G.edge_iterator()` are now similar. In the future, `G.edge_iterator()` will certainly also return a `EdgesView`.

 
I don't have gap installed on my laptop yet, so I let Dima check that every think is ok :P


---

Comment by dimpase created at 2020-08-11 08:41:12

Can we have naming scheme and location of DualPolarOrthogonalGraph (to be renamed OrthogonalDualPolarGraph) consistent with UnitaryDualPolarGraph and SymplecticDualPolarGraph,
which are in `sage/graphs/generators/classical_geometries.py` ?


---

Comment by @Ivo-Maffei created at 2020-08-11 09:28:29

Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?


---

Comment by git created at 2020-08-11 10:19:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-08-11 10:28:39

Replying to [comment:9 gh-Ivo-Maffei]:
> Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?

No, I  think it's OK with UstimenkoGraph as it is now.


---

Comment by dimpase created at 2020-08-11 12:42:49

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-08-11 12:42:49

looks good, thanks.


---

Comment by vbraun created at 2020-08-14 22:23:26

Resolution: fixed
