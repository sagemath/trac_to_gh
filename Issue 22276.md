# Issue 22276: package polymake beta

archive/issues_022276.json:
```json
{
    "body": "CC:  @videlec @mkoeppe\n\nKeywords: days84, polymake\n\nWith my configuration, the configure script of polymake 3.0 is not working, probably due to a new version of perl:\n\n\n```\n$ ./configure \nchecking C++ compiler ... ok (g++ is GCC 6.3.0)\nchecking C++ library ... ok (GNU stdlibc++ 20170218, C++ 201402)\ndetermining architecture ... Undefined subroutine &Polymake::Configure::platform_name called at support/configure.pl line 538.\n```\n\n\nLet's package the beta version of polymake.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22513\n\n",
    "created_at": "2017-03-04T10:58:32Z",
    "labels": [
        "component: packages: experimental",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "package polymake beta",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22276",
    "user": "https://github.com/mo271"
}
```
CC:  @videlec @mkoeppe

Keywords: days84, polymake

With my configuration, the configure script of polymake 3.0 is not working, probably due to a new version of perl:


```
$ ./configure 
checking C++ compiler ... ok (g++ is GCC 6.3.0)
checking C++ library ... ok (GNU stdlibc++ 20170218, C++ 201402)
determining architecture ... Undefined subroutine &Polymake::Configure::platform_name called at support/configure.pl line 538.
```


Let's package the beta version of polymake.

Issue created by migration from https://trac.sagemath.org/ticket/22513





---

archive/issue_comments_309331.json:
```json
{
    "body": "The tar ball, which should be put in the folder `upstream` can be found here: [http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2](http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2)",
    "created_at": "2017-03-05T09:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309331",
    "user": "https://github.com/mo271"
}
```

The tar ball, which should be put in the folder `upstream` can be found here: [http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2](http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2)



---

archive/issue_comments_309332.json:
```json
{
    "body": "Before you deleted the branch, I pulled it and built successfully on Mac OS.",
    "created_at": "2017-03-05T10:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309332",
    "user": "https://github.com/mkoeppe"
}
```

Before you deleted the branch, I pulled it and built successfully on Mac OS.



---

archive/issue_comments_309333.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-05T10:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309333",
    "user": "https://github.com/mo271"
}
```

New commits:



---

archive/issue_comments_309334.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-05T11:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309334",
    "user": "https://github.com/mo271"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_309335.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-05T11:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309335",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309336.json:
```json
{
    "body": "This package *completely* breaks pypolymake. Don't you want to make a different package?",
    "created_at": "2017-03-05T11:58:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309336",
    "user": "https://github.com/videlec"
}
```

This package *completely* breaks pypolymake. Don't you want to make a different package?



---

archive/issue_comments_309337.json:
```json
{
    "body": "Moreover, it is not nice to package yourself upstream. I pushed Moritz to make this package for testing purposes. I am very much against its inclusion in Sage.",
    "created_at": "2017-03-05T12:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309337",
    "user": "https://github.com/videlec"
}
```

Moreover, it is not nice to package yourself upstream. I pushed Moritz to make this package for testing purposes. I am very much against its inclusion in Sage.



---

archive/issue_comments_309338.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-03-05T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309338",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_309339.json:
```json
{
    "body": "OK, I agree",
    "created_at": "2017-03-05T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309339",
    "user": "https://github.com/mkoeppe"
}
```

OK, I agree



---

archive/issue_comments_309340.json:
```json
{
    "body": "Also, the Singular build seems to fail with this beta version of polymake installed.",
    "created_at": "2017-03-05T15:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309340",
    "user": "https://github.com/mkoeppe"
}
```

Also, the Singular build seems to fail with this beta version of polymake installed.



---

archive/issue_comments_309341.json:
```json
{
    "body": "Replying to [comment:11 mkoeppe]:\n> Also, the Singular build seems to fail with this beta version of polymake installed.\n\nFor the record, this can be fixed with\n\n```diff\ndiff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install\nindex 373bd0852b..b172b0ec1f 100755\n--- a/build/pkgs/singular/spkg-install\n+++ b/build/pkgs/singular/spkg-install\n@@ -93,6 +93,7 @@ config()\n                 --with-ntl=\"$SAGE_LOCAL\" \\\n                 --with-flint=\"$SAGE_LOCAL\" \\\n                 --enable-gfanlib \\\n+                --disable-polymake \\\n                 --enable-Singular \\\n                 --enable-factory \\\n                 --disable-doc \\\n```\n",
    "created_at": "2017-03-07T09:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309341",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:11 mkoeppe]:
> Also, the Singular build seems to fail with this beta version of polymake installed.

For the record, this can be fixed with

```diff
diff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install
index 373bd0852b..b172b0ec1f 100755
--- a/build/pkgs/singular/spkg-install
+++ b/build/pkgs/singular/spkg-install
@@ -93,6 +93,7 @@ config()
                 --with-ntl="$SAGE_LOCAL" \
                 --with-flint="$SAGE_LOCAL" \
                 --enable-gfanlib \
+                --disable-polymake \
                 --enable-Singular \
                 --enable-factory \
                 --disable-doc \
```




---

archive/issue_comments_309342.json:
```json
{
    "body": "(this fix to Singular is #22606.)",
    "created_at": "2017-03-28T17:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309342",
    "user": "https://github.com/mkoeppe"
}
```

(this fix to Singular is #22606.)



---

archive/issue_comments_309343.json:
```json
{
    "body": "This new version also breaks #22683. Apparently polymake has changed its mind about some important properties:\n\n```\n    TypeError: initial check failed: dimension mismatch between LINEALITY_SPACE and CONE_AMBIENT_DIM\n```\n",
    "created_at": "2017-03-28T17:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309343",
    "user": "https://github.com/mkoeppe"
}
```

This new version also breaks #22683. Apparently polymake has changed its mind about some important properties:

```
    TypeError: initial check failed: dimension mismatch between LINEALITY_SPACE and CONE_AMBIENT_DIM
```




---

archive/issue_comments_309344.json:
```json
{
    "body": "Polymake 3.1 was just released. We should repurpose this ticket for the upgrade.\n\nVincent -- objections to upgrading (if it builds OK) even if pypolymake is not ready yet for that version?",
    "created_at": "2017-03-28T17:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309344",
    "user": "https://github.com/mkoeppe"
}
```

Polymake 3.1 was just released. We should repurpose this ticket for the upgrade.

Vincent -- objections to upgrading (if it builds OK) even if pypolymake is not ready yet for that version?



---

archive/issue_comments_309345.json:
```json
{
    "body": "A possible upstream issue: \n[Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)",
    "created_at": "2017-03-28T18:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309345",
    "user": "https://github.com/mkoeppe"
}
```

A possible upstream issue: 
[Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)



---

archive/issue_comments_309346.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> A possible upstream issue: \n> [Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)\n\nIt was easy to work around this in #22658.\n----\nNew commits:",
    "created_at": "2017-03-29T02:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309346",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:19 mkoeppe]:
> A possible upstream issue: 
> [Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)

It was easy to work around this in #22658.
----
New commits:



---

archive/issue_comments_309347.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-29T02:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309347",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309348.json:
```json
{
    "body": "Simon worked well: all tests of the interface (#22452) pass with this new version of polymake!",
    "created_at": "2017-03-29T09:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309348",
    "user": "https://github.com/videlec"
}
```

Simon worked well: all tests of the interface (#22452) pass with this new version of polymake!



---

archive/issue_comments_309349.json:
```json
{
    "body": "(hopefully the beta branch of pypolymake should be close to be working with polymake 3.1)",
    "created_at": "2017-03-29T09:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309349",
    "user": "https://github.com/videlec"
}
```

(hopefully the beta branch of pypolymake should be close to be working with polymake 3.1)



---

archive/issue_comments_309350.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-29T09:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309350",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-30T22:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309351",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
