# Issue 22276: package polymake beta

archive/issues_022276.json:
```json
{
    "body": "CC:  vdelecroix mkoeppe\n\nKeywords: days84, polymake\n\nWith my configuration, the configure script of polymake 3.0 is not working, probably due to a new version of perl:\n\n\n```\n$ ./configure \nchecking C++ compiler ... ok (g++ is GCC 6.3.0)\nchecking C++ library ... ok (GNU stdlibc++ 20170218, C++ 201402)\ndetermining architecture ... Undefined subroutine &Polymake::Configure::platform_name called at support/configure.pl line 538.\n```\n\n\nLet's package the beta version of polymake.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22513\n\n",
    "created_at": "2017-03-04T10:58:32Z",
    "labels": [
        "packages: experimental",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "package polymake beta",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22276",
    "user": "moritz"
}
```
CC:  vdelecroix mkoeppe

Keywords: days84, polymake

With my configuration, the configure script of polymake 3.0 is not working, probably due to a new version of perl:


```
$ ./configure 
checking C++ compiler ... ok (g++ is GCC 6.3.0)
checking C++ library ... ok (GNU stdlibc++ 20170218, C++ 201402)
determining architecture ... Undefined subroutine &Polymake::Configure::platform_name called at support/configure.pl line 538.
```


Let's package the beta version of polymake.

Issue created by migration from https://trac.sagemath.org/ticket/22513





---

archive/issue_comments_309679.json:
```json
{
    "body": "The tar ball, which should be put in the folder `upstream` can be found here: [http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2](http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2)",
    "created_at": "2017-03-05T09:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309679",
    "user": "moritz"
}
```

The tar ball, which should be put in the folder `upstream` can be found here: [http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2](http://page.mi.fu-berlin.de/moritz/pkgs/polymake-3.1-beta2.tar.bz2)



---

archive/issue_comments_309680.json:
```json
{
    "body": "Before you deleted the branch, I pulled it and built successfully on Mac OS.",
    "created_at": "2017-03-05T10:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309680",
    "user": "mkoeppe"
}
```

Before you deleted the branch, I pulled it and built successfully on Mac OS.



---

archive/issue_comments_309681.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-05T10:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309681",
    "user": "moritz"
}
```

New commits:



---

archive/issue_comments_309682.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-05T11:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309682",
    "user": "moritz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_309683.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-05T11:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309683",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309684.json:
```json
{
    "body": "This package *completely* breaks pypolymake. Don't you want to make a different package?",
    "created_at": "2017-03-05T11:58:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309684",
    "user": "vdelecroix"
}
```

This package *completely* breaks pypolymake. Don't you want to make a different package?



---

archive/issue_comments_309685.json:
```json
{
    "body": "Moreover, it is not nice to package yourself upstream. I pushed Moritz to make this package for testing purposes. I am very much against its inclusion in Sage.",
    "created_at": "2017-03-05T12:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309685",
    "user": "vdelecroix"
}
```

Moreover, it is not nice to package yourself upstream. I pushed Moritz to make this package for testing purposes. I am very much against its inclusion in Sage.



---

archive/issue_comments_309686.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-03-05T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309686",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_309687.json:
```json
{
    "body": "OK, I agree",
    "created_at": "2017-03-05T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309687",
    "user": "mkoeppe"
}
```

OK, I agree



---

archive/issue_comments_309688.json:
```json
{
    "body": "Also, the Singular build seems to fail with this beta version of polymake installed.",
    "created_at": "2017-03-05T15:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309688",
    "user": "mkoeppe"
}
```

Also, the Singular build seems to fail with this beta version of polymake installed.



---

archive/issue_comments_309689.json:
```json
{
    "body": "Replying to [comment:11 mkoeppe]:\n> Also, the Singular build seems to fail with this beta version of polymake installed.\n\nFor the record, this can be fixed with\n\n```diff\ndiff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install\nindex 373bd0852b..b172b0ec1f 100755\n--- a/build/pkgs/singular/spkg-install\n+++ b/build/pkgs/singular/spkg-install\n@@ -93,6 +93,7 @@ config()\n                 --with-ntl=\"$SAGE_LOCAL\" \\\n                 --with-flint=\"$SAGE_LOCAL\" \\\n                 --enable-gfanlib \\\n+                --disable-polymake \\\n                 --enable-Singular \\\n                 --enable-factory \\\n                 --disable-doc \\\n```\n",
    "created_at": "2017-03-07T09:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309689",
    "user": "vdelecroix"
}
```

Replying to [comment:11 mkoeppe]:
> Also, the Singular build seems to fail with this beta version of polymake installed.

For the record, this can be fixed with

```diff
diff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install
index 373bd0852b..b172b0ec1f 100755
--- a/build/pkgs/singular/spkg-install
+++ b/build/pkgs/singular/spkg-install
@@ -93,6 +93,7 @@ config()
                 --with-ntl="$SAGE_LOCAL" \
                 --with-flint="$SAGE_LOCAL" \
                 --enable-gfanlib \
+                --disable-polymake \
                 --enable-Singular \
                 --enable-factory \
                 --disable-doc \
```




---

archive/issue_comments_309690.json:
```json
{
    "body": "(this fix to Singular is #22606.)",
    "created_at": "2017-03-28T17:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309690",
    "user": "mkoeppe"
}
```

(this fix to Singular is #22606.)



---

archive/issue_comments_309691.json:
```json
{
    "body": "This new version also breaks #22683. Apparently polymake has changed its mind about some important properties:\n\n```\n    TypeError: initial check failed: dimension mismatch between LINEALITY_SPACE and CONE_AMBIENT_DIM\n```\n",
    "created_at": "2017-03-28T17:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309691",
    "user": "mkoeppe"
}
```

This new version also breaks #22683. Apparently polymake has changed its mind about some important properties:

```
    TypeError: initial check failed: dimension mismatch between LINEALITY_SPACE and CONE_AMBIENT_DIM
```




---

archive/issue_comments_309692.json:
```json
{
    "body": "Polymake 3.1 was just released. We should repurpose this ticket for the upgrade.\n\nVincent -- objections to upgrading (if it builds OK) even if pypolymake is not ready yet for that version?",
    "created_at": "2017-03-28T17:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309692",
    "user": "mkoeppe"
}
```

Polymake 3.1 was just released. We should repurpose this ticket for the upgrade.

Vincent -- objections to upgrading (if it builds OK) even if pypolymake is not ready yet for that version?



---

archive/issue_comments_309693.json:
```json
{
    "body": "A possible upstream issue: \n[Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)",
    "created_at": "2017-03-28T18:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309693",
    "user": "mkoeppe"
}
```

A possible upstream issue: 
[Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)



---

archive/issue_comments_309694.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> A possible upstream issue: \n> [Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)\n\nIt was easy to work around this in #22658.\n----\nNew commits:",
    "created_at": "2017-03-29T02:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309694",
    "user": "mkoeppe"
}
```

Replying to [comment:19 mkoeppe]:
> A possible upstream issue: 
> [Polymake 3.1: Empty polytope has dimension 1](https://forum.polymake.org/viewtopic.php?f=8&t=545)

It was easy to work around this in #22658.
----
New commits:



---

archive/issue_comments_309695.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-29T02:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309695",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309696.json:
```json
{
    "body": "Simon worked well: all tests of the interface (#22452) pass with this new version of polymake!",
    "created_at": "2017-03-29T09:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309696",
    "user": "vdelecroix"
}
```

Simon worked well: all tests of the interface (#22452) pass with this new version of polymake!



---

archive/issue_comments_309697.json:
```json
{
    "body": "(hopefully the beta branch of pypolymake should be close to be working with polymake 3.1)",
    "created_at": "2017-03-29T09:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309697",
    "user": "vdelecroix"
}
```

(hopefully the beta branch of pypolymake should be close to be working with polymake 3.1)



---

archive/issue_comments_309698.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-29T09:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309698",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309699.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-30T22:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22276",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22276#issuecomment-309699",
    "user": "vbraun"
}
```

Resolution: fixed
