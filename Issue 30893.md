# Issue 30893: Latte error raising does not work

Issue created by migration from https://trac.sagemath.org/ticket/31130

Original creator: @kliem

Original creation time: 2020-12-29 09:33:24

From #31046:


```
sage: P = Polyhedron(rays=[[1,0],[0,1]])                                                                                                                                            
sage: P._volume_latte()                                                                                                                                                             
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-abc8351118c1> in <module>
----> 1 P._volume_latte()

~/Applications/sage/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py in _volume_latte(self, verbose, algorithm, **kwargs)
   7888             raise ValueError("LattE integrale cannot be applied over inexact rings")
   7889         else:
-> 7890             return integrate(self.cdd_Hrepresentation(), algorithm=algorithm, cdd=True, verbose=verbose, **kwargs)
   7891 
   7892     def _volume_normaliz(self, measure='induced'):

~/Applications/sage/local/lib/python3.8/site-packages/sage/interfaces/latte.py in integrate(arg, polynomial, algorithm, raw_output, verbose, **kwds)
    372             err = ", see error message above"
    373         else:
--> 374             err = ":\n" + err
    375         raise RuntimeError("LattE integrale program failed (exit code {})".format(ret_code) + err.strip())
    376 

TypeError: can only concatenate str (not "bytes") to str
```


Latte probably raises an error here, which we fail to communicate. The `RuntimeError` was never tested.


---

Comment by @kliem created at 2020-12-29 09:56:30

New commits:


---

Comment by @kliem created at 2020-12-29 09:56:30

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-12-29 09:56:43

Changing keywords from "" to "latte, runtime error".


---

Comment by mkoeppe created at 2020-12-29 18:17:53

Changing status from needs_review to positive_review.


---

Comment by git created at 2020-12-29 20:57:28

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-12-29 20:57:28

Changing status from positive_review to needs_review.


---

Comment by @kliem created at 2020-12-29 20:59:16

Thanks and sorry: The second doctest that I added did not contain an error message and therefore is working fine with and without this ticket.

I replaced by the doctest from this ticket that includes an error message now (and wasn't working before).


---

Comment by mkoeppe created at 2020-12-29 21:10:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-01-04 22:37:05

Resolution: fixed


---

Comment by chapoton created at 2021-03-05 07:54:37

what about #31046 now ? can it be closed ?


---

Comment by @kliem created at 2021-03-05 08:02:24

I don't think so. #31046 reports some doctest failures. But we don't know which ones, because there is no proper error message. Now that this ticket is closed, we can hope that we can a proper report of this message.

Well, we could also close #31046 and wait until the error shows up again.
