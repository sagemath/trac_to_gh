# Issue 20866: Update rubiks' patches to conform to same format as other patches

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2016-07-27 08:15:01

CC:  embray




---

Comment by git created at 2016-07-27 08:18:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-07-27 08:19:50

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-07-27 08:32:51

I am not really convinced that the non-patched `Makefile`s are fine. Surely, the person who patched them must have had a reason for it. There is for example this comment in `build/pkgs/rubiks/patches/dietz-solver-Makefile`:

```
# This Makefile was seriously broken.
# CC was set to g++. Since it was compiling C++ files,
# CXX should have been used.
# LINK was set to g++, so I changed that to LD
# CFLAGS was set to -O2. I've removed that, so it can be set
# in spkg-install.
# In any case, it should have been CXXFLAGS
# LFLAGS and INCLUDES were both empty
# David Kirkby, 29th Sept 2009
```



---

Comment by embray created at 2016-07-27 09:15:41

Compare to the current source.  For the makefiles I removed from the patch there is no longer any difference from upstream (which has probably been patched).


---

Comment by embray created at 2016-07-27 09:19:38

Actually scratch that, I was confused.  I don't think those patches were supposed to be removed.  You can update the commit to not remove the makefile patches (just the full makefile copies).


---

Comment by mkoeppe created at 2016-08-03 20:46:35

With the branch on this ticket, `sage -f rubiks` and `sage -t src/sage/interfaces/rubik.py` go through (on Mac OS X). 

What is considered upstream for this package? Should there be an `spkg-src`? 
The links in http://doc.sagemath.org/html/en/reference/interfaces/sage/interfaces/rubik.html
and in `SPKG.txt` are broken.


---

Comment by embray created at 2016-08-16 13:56:16

I think all this needs to is roll back the removal of 

* build/pkgs/rubiks/patches/dietz-cu2-Makefile.patch	
* build/pkgs/rubiks/patches/dietz-mcube-Makefile.patch	
* build/pkgs/rubiks/patches/dietz-solver-Makefile.patch

from the commit.  They shouldn't have been removed.


---

Comment by mkoeppe created at 2016-08-16 17:23:08

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-09-14 12:06:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-09-14 12:08:20

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2016-09-14 12:08:20

This now works for me. If you're happy with this, then you can it to positive_review.


---

Comment by mkoeppe created at 2016-09-14 15:28:03

comment 8.


---

Comment by jdemeyer created at 2016-09-14 17:24:23

Replying to [comment:13 mkoeppe]:
> comment 8.

I don't really care about that. It's unrelated to this ticket anyway.


---

Comment by mkoeppe created at 2016-09-14 19:17:10

Replying to [comment:14 jdemeyer]:
> I don't really care about that. It's unrelated to this ticket anyway.

Fine, I've created a new ticket #21493 for that.


---

Comment by mkoeppe created at 2016-09-14 19:19:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-09-17 15:25:42

Resolution: fixed


---

Comment by embray created at 2016-09-22 15:27:55

Thanks!
