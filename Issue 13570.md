# Issue 13570: Irreducible Cartan types created as reducibles

archive/issues_013570.json:
```json
{
    "body": "Assignee: joyner\n\nCC:  sage-combinat nthiery\n\nKeywords: CartanType Reducible Irreducible\n\n\n```\n    sage: c = CartanType([[\"A\",2]])\n    sage: c.is_irreducible()      \n    False\n```\n\n\nAs a consequence, e.g. the cartan_matrix() method fails too.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13774\n\n",
    "created_at": "2012-11-28T21:18:55Z",
    "labels": [
        "group theory",
        "minor",
        "bug"
    ],
    "title": "Irreducible Cartan types created as reducibles",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13570",
    "user": "JesusTorrado"
}
```
Assignee: joyner

CC:  sage-combinat nthiery

Keywords: CartanType Reducible Irreducible


```
    sage: c = CartanType([["A",2]])
    sage: c.is_irreducible()      
    False
```


As a consequence, e.g. the cartan_matrix() method fails too.

Issue created by migration from https://trac.sagemath.org/ticket/13774





---

archive/issue_comments_167864.json:
```json
{
    "body": "Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167864",
    "user": "JesusTorrado"
}
```

Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31



---

archive/issue_comments_167865.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167865",
    "user": "JesusTorrado"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_167866.json:
```json
{
    "body": "You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:\n\n```\nFixed in :trac:`13774`::\n\n    sage: c = CartanType([[\"A\",2]])\n    sage: c.is_irreducible()\n    True\n    sage: c = CartanType([\"A2\"])\n    sage: c.is_irreducible()\n    True\n```\n\nI don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.",
    "created_at": "2012-11-28T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167866",
    "user": "jhpalmieri"
}
```

You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:

```
Fixed in :trac:`13774`::

    sage: c = CartanType([["A",2]])
    sage: c.is_irreducible()
    True
    sage: c = CartanType(["A2"])
    sage: c.is_irreducible()
    True
```

I don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.



---

archive/issue_comments_167867.json:
```json
{
    "body": "Replying to [comment:3 jhpalmieri]:\n> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]\n\nI thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?",
    "created_at": "2012-11-28T22:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167867",
    "user": "JesusTorrado"
}
```

Replying to [comment:3 jhpalmieri]:
> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]

I thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?



---

archive/issue_comments_167868.json:
```json
{
    "body": "\n```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 15973.8 seconds\n```\n",
    "created_at": "2012-11-29T08:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167868",
    "user": "JesusTorrado"
}
```


```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15973.8 seconds
```




---

archive/issue_comments_167869.json:
```json
{
    "body": "Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by tscrim created at 2013-04-06 18:54:08\n\nI've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.",
    "created_at": "2013-04-06T18:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167869",
    "user": "tscrim"
}
```

Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by tscrim created at 2013-04-06 18:54:08

I've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.



---

archive/issue_comments_167870.json:
```json
{
    "body": "Changing component from group theory to combinatorics.",
    "created_at": "2013-04-06T18:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167870",
    "user": "tscrim"
}
```

Changing component from group theory to combinatorics.



---

archive/issue_comments_167871.json:
```json
{
    "body": "(Rebased) Branch version. I just need someone to double-check my review changes.\n----\nNew commits:",
    "created_at": "2013-12-27T17:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167871",
    "user": "tscrim"
}
```

(Rebased) Branch version. I just need someone to double-check my review changes.
----
New commits:



---

archive/issue_comments_167872.json:
```json
{
    "body": "Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.",
    "created_at": "2014-03-07T05:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167872",
    "user": "darij"
}
```

Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.



---

archive/issue_comments_167873.json:
```json
{
    "body": "I can still reproduce it:\n\n```\n\n# This is the expected behavior\n\nsage: c = CartanType([['A',2], ['D',4]]); c\nA2xD4\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n[ 2 -1| 0  0  0  0]\n[-1  2| 0  0  0  0]\n[-----+-----------]\n[ 0  0| 2 -1  0  0]\n[ 0  0|-1  2 -1 -1]\n[ 0  0| 0 -1  2  0]\n[ 0  0| 0 -1  0  2]\nsage: c = CartanType(['A',2]); c\n['A', 2]\nsage: c.cartan_matrix()\n[ 2 -1]\n[-1  2]\n\n# This is wrong\n\nsage: c = CartanType([['A',2]]); c\nA2\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).\n```\n",
    "created_at": "2014-03-07T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167873",
    "user": "tscrim"
}
```

I can still reproduce it:

```

# This is the expected behavior

sage: c = CartanType([['A',2], ['D',4]]); c
A2xD4
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
[ 2 -1| 0  0  0  0]
[-1  2| 0  0  0  0]
[-----+-----------]
[ 0  0| 2 -1  0  0]
[ 0  0|-1  2 -1 -1]
[ 0  0| 0 -1  2  0]
[ 0  0| 0 -1  0  2]
sage: c = CartanType(['A',2]); c
['A', 2]
sage: c.cartan_matrix()
[ 2 -1]
[-1  2]

# This is wrong

sage: c = CartanType([['A',2]]); c
A2
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).
```




---

archive/issue_comments_167874.json:
```json
{
    "body": "Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?",
    "created_at": "2014-03-07T16:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167874",
    "user": "darij"
}
```

Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?



---

archive/issue_comments_167875.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-07T20:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167875",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_167876.json:
```json
{
    "body": "Done.",
    "created_at": "2014-03-07T20:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167876",
    "user": "tscrim"
}
```

Done.



---

archive/issue_comments_167877.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-15T17:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167877",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_167878.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167878",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_167879.json:
```json
{
    "body": "Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167879",
    "user": "darij"
}
```

Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)



---

archive/issue_comments_167880.json:
```json
{
    "body": "Thanks Darij.",
    "created_at": "2014-03-15T17:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167880",
    "user": "tscrim"
}
```

Thanks Darij.



---

archive/issue_comments_167881.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-21T17:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167881",
    "user": "vbraun"
}
```

Resolution: fixed
