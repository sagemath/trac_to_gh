# Issue 13570: Irreducible Cartan types created as reducibles

archive/issues_013570.json:
```json
{
    "body": "Assignee: joyner\n\nCC:  sage-combinat @nthiery\n\nKeywords: CartanType Reducible Irreducible\n\n```\n    sage: c = CartanType([[\"A\",2]])\n    sage: c.is_irreducible()      \n    False\n```\n\nAs a consequence, e.g. the cartan_matrix() method fails too.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13774\n\n",
    "created_at": "2012-11-28T21:18:55Z",
    "labels": [
        "component: group theory",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Irreducible Cartan types created as reducibles",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13570",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```
Assignee: joyner

CC:  sage-combinat @nthiery

Keywords: CartanType Reducible Irreducible

```
    sage: c = CartanType([["A",2]])
    sage: c.is_irreducible()      
    False
```

As a consequence, e.g. the cartan_matrix() method fails too.

Issue created by migration from https://trac.sagemath.org/ticket/13774





---

archive/issue_comments_167616.json:
```json
{
    "body": "Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167616",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31



---

archive/issue_comments_167617.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167617",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_167618.json:
```json
{
    "body": "You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:\n\n```\nFixed in :trac:`13774`::\n\n    sage: c = CartanType([[\"A\",2]])\n    sage: c.is_irreducible()\n    True\n    sage: c = CartanType([\"A2\"])\n    sage: c.is_irreducible()\n    True\n```\nI don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.",
    "created_at": "2012-11-28T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167618",
    "user": "https://github.com/jhpalmieri"
}
```

You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:

```
Fixed in :trac:`13774`::

    sage: c = CartanType([["A",2]])
    sage: c.is_irreducible()
    True
    sage: c = CartanType(["A2"])
    sage: c.is_irreducible()
    True
```
I don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.



---

archive/issue_comments_167619.json:
```json
{
    "body": "Replying to [comment:3 jhpalmieri]:\n> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]\n\n\nI thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?",
    "created_at": "2012-11-28T22:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167619",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Replying to [comment:3 jhpalmieri]:
> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]


I thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?



---

archive/issue_comments_167620.json:
```json
{
    "body": "```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 15973.8 seconds\n```",
    "created_at": "2012-11-29T08:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167620",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15973.8 seconds
```



---

archive/issue_comments_167621.json:
```json
{
    "body": "Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by @tscrim created at 2013-04-06 18:54:08\n\nI've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.",
    "created_at": "2013-04-06T18:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167621",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by @tscrim created at 2013-04-06 18:54:08

I've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.



---

archive/issue_comments_167622.json:
```json
{
    "body": "Changing component from group theory to combinatorics.",
    "created_at": "2013-04-06T18:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167622",
    "user": "https://github.com/tscrim"
}
```

Changing component from group theory to combinatorics.



---

archive/issue_events_038622.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13570#event-38622"
}
```



---

archive/issue_comments_167623.json:
```json
{
    "body": "(Rebased) Branch version. I just need someone to double-check my review changes.\n\n---\nNew commits:",
    "created_at": "2013-12-27T17:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167623",
    "user": "https://github.com/tscrim"
}
```

(Rebased) Branch version. I just need someone to double-check my review changes.

---
New commits:



---

archive/issue_events_038623.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13570#event-38623"
}
```



---

archive/issue_events_038624.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13570#event-38624"
}
```



---

archive/issue_comments_167624.json:
```json
{
    "body": "Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.",
    "created_at": "2014-03-07T05:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167624",
    "user": "https://github.com/darijgr"
}
```

Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.



---

archive/issue_comments_167625.json:
```json
{
    "body": "I can still reproduce it:\n\n```\n\n# This is the expected behavior\n\nsage: c = CartanType([['A',2], ['D',4]]); c\nA2xD4\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n[ 2 -1| 0  0  0  0]\n[-1  2| 0  0  0  0]\n[-----+-----------]\n[ 0  0| 2 -1  0  0]\n[ 0  0|-1  2 -1 -1]\n[ 0  0| 0 -1  2  0]\n[ 0  0| 0 -1  0  2]\nsage: c = CartanType(['A',2]); c\n['A', 2]\nsage: c.cartan_matrix()\n[ 2 -1]\n[-1  2]\n\n# This is wrong\n\nsage: c = CartanType([['A',2]]); c\nA2\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).\n```",
    "created_at": "2014-03-07T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167625",
    "user": "https://github.com/tscrim"
}
```

I can still reproduce it:

```

# This is the expected behavior

sage: c = CartanType([['A',2], ['D',4]]); c
A2xD4
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
[ 2 -1| 0  0  0  0]
[-1  2| 0  0  0  0]
[-----+-----------]
[ 0  0| 2 -1  0  0]
[ 0  0|-1  2 -1 -1]
[ 0  0| 0 -1  2  0]
[ 0  0| 0 -1  0  2]
sage: c = CartanType(['A',2]); c
['A', 2]
sage: c.cartan_matrix()
[ 2 -1]
[-1  2]

# This is wrong

sage: c = CartanType([['A',2]]); c
A2
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).
```



---

archive/issue_comments_167626.json:
```json
{
    "body": "Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?",
    "created_at": "2014-03-07T16:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167626",
    "user": "https://github.com/darijgr"
}
```

Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?



---

archive/issue_comments_167627.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-07T20:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_167628.json:
```json
{
    "body": "Done.",
    "created_at": "2014-03-07T20:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167628",
    "user": "https://github.com/tscrim"
}
```

Done.



---

archive/issue_comments_167629.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-15T17:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_167630.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167630",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_167631.json:
```json
{
    "body": "Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167631",
    "user": "https://github.com/darijgr"
}
```

Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)



---

archive/issue_comments_167632.json:
```json
{
    "body": "Thanks Darij.",
    "created_at": "2014-03-15T17:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167632",
    "user": "https://github.com/tscrim"
}
```

Thanks Darij.



---

archive/issue_comments_167633.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-21T17:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13570#issuecomment-167633",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_038625.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-21T17:47:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13570",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13570#event-38625"
}
```
