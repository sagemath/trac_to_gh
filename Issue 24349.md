# Issue 24349: packges whose type is "script" must have executable spkg-install

Issue created by migration from https://trac.sagemath.org/ticket/24586

Original creator: tmonteil

Original creation time: 2018-01-22 23:24:20

CC:  embray

It is all in the title. Fixed for `r_jupyter` in #24585, `pyopenssl` is OK, `texlive` remains:


```
sage -i texlive

[...]

cd '/opt/sagemath/sage-source' && \
    source '/opt/sagemath/sage-source/src/bin/sage-env' && \
    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/texlive/spkg-install' /opt/sagemath/sage-source/logs/pkgs/texlive.log
[texlive] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/texlive/spkg-install: Permission denied
Makefile:2984: recipe for target 'texlive' failed
```




---

Comment by tmonteil created at 2018-01-22 23:40:00

Changing status from new to needs_review.


---

Comment by tmonteil created at 2018-01-22 23:40:00

New commits:


---

Comment by tmonteil created at 2018-01-22 23:46:44

Apparently, `texlive` script is broken anyway, see also #21922.


---

Comment by embray created at 2018-01-23 11:39:10

I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).

I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.


---

Comment by embray created at 2018-01-23 11:39:10

Changing status from needs_review to needs_work.


---

Comment by embray created at 2018-01-23 11:40:32

Additionally if wanted to add some explicit marker that there is no "source tarball" for the package that would be fine too.


---

Comment by jdemeyer created at 2018-01-25 18:03:38

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2018-01-25 18:03:38

At least this fixes something, why not merge it?


---

Comment by embray created at 2018-01-26 16:29:08

I guess. I can open an issue for my further suggestions.


---

Comment by vbraun created at 2018-01-27 15:59:41

Resolution: fixed


---

Comment by mkoeppe created at 2020-03-15 02:55:36

Replying to [comment:4 embray]:
> I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).
> 
> I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.

#29287 makes roughly these proposed changes (but without the soft transition using deprecation).
