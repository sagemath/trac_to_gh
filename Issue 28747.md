# Issue 28747: gfan - clash of log2 macro with standard library

Issue created by migration from https://trac.sagemath.org/ticket/28984

Original creator: mkoeppe

Original creation time: 2020-01-11 01:35:45

CC:  rws fbissey dimpase vbraun isuruf

Same error as reported and fixed here:

241194 â€“ math/gfan: fix build on 13.0-CURRENT

https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=241194

https://bz-attachments.freebsd.org/attachment.cgi?id=208243


---

Attachment


---

Comment by fbissey created at 2020-01-11 02:42:39

Currently sage's and sage's dependency C++ code is compiled with -std=c++11 unless overridden. This is autoconf macro's fault. So it won't be visible inside vanilla sage for the time being. But it is very important on distros. Also we should note that singular has a copy of "libgfan" based on the same code. There is probably an enforcement of c++11 in singular at the present time but the offending code may be there as well.

Has upstream been contacted?


---

Comment by mkoeppe created at 2020-01-11 02:55:59

Replying to [comment:2 fbissey]:
> Has upstream been contacted?
I haven't contacted upstream.


---

Comment by isuruf created at 2020-03-29 04:11:13

I'm using the following hack in conda-forge. https://github.com/conda-forge/gfan-feedstock/blob/master/recipe/build.sh#L9


---

Comment by mkoeppe created at 2020-03-29 14:48:15

Changing priority from major to critical.


---

Comment by mkoeppe created at 2020-03-30 01:55:16

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-03-30 01:55:16

That works.
----
New commits:


---

Comment by isuruf created at 2020-03-30 02:07:25

LGTM


---

Comment by isuruf created at 2020-03-30 02:07:25

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-30 04:53:44

Thanks!


---

Comment by vbraun created at 2020-04-09 22:45:11

Resolution: fixed
