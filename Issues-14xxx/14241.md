# Issue 14241: Patch to FLINT fails to apply because of double path separator // in filenames

archive/issues_014037.json:
```json
{
    "body": "Assignee: tbd\n\nKeywords: spkg FreeBSD\n\nThe flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.\n\n---\n\n**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14241\n\n",
    "closed_at": "2013-03-13T11:05:55Z",
    "created_at": "2013-03-07T12:51:56Z",
    "labels": [
        "component: packages: standard",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Patch to FLINT fails to apply because of double path separator // in filenames",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14241",
    "user": "https://github.com/tkluck"
}
```
Assignee: tbd

Keywords: spkg FreeBSD

The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.

---

**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)


Issue created by migration from https://trac.sagemath.org/ticket/14241





---

archive/issue_comments_175274.json:
```json
{
    "body": "ROFL.\n\n\n\n\nPlease don't attach binary files to tickets, but instead provide links to them...",
    "created_at": "2013-03-07T13:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175274",
    "user": "https://github.com/nexttime"
}
```

ROFL.




Please don't attach binary files to tickets, but instead provide links to them...



---

archive/issue_comments_175275.json:
```json
{
    "body": "Replying to [comment:1 leif]:\n> Please don't attach binary files to tickets, but instead provide links to them...\n\n\nThere's even https://code.google.com/p/spkg-upload/ btw. for that reason... ;-)",
    "created_at": "2013-03-07T13:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175275",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:1 leif]:
> Please don't attach binary files to tickets, but instead provide links to them...


There's even https://code.google.com/p/spkg-upload/ btw. for that reason... ;-)



---

archive/issue_comments_175276.json:
```json
{
    "body": "Here's a link:\nhttp://www.infty.nl/misc/flint-1.5.2.p3.spkg\n\nOff topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)",
    "created_at": "2013-03-07T13:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175276",
    "user": "https://github.com/tkluck"
}
```

Here's a link:
http://www.infty.nl/misc/flint-1.5.2.p3.spkg

Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)



---

archive/issue_comments_175277.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-07T13:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175277",
    "user": "https://github.com/tkluck"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175278.json:
```json
{
    "body": "Replying to [comment:3 tkluck]:\n> Here's a link:\n> http://www.infty.nl/misc/flint-1.5.2.p3.spkg\n\n\nThanks, I'll then delete the attached one.  (You can still attach a diff for reference / review.)\n\n\n\n\n> Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)\n\n\nYes.  At the very least, we should split off the (hopefully) vanilla `src/` tree from Sage's part.\n\n(Even worse, Jeroen's merger script currently keeps modifying some \"unchanged\", already released spkgs from beta to beta.  The differences are subtle changes in the metadata due to needless repackaging, but of course mtimes and md5sums differ afterwards.  But you have to download and unpack them to check/see this...)",
    "created_at": "2013-03-07T13:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175278",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:3 tkluck]:
> Here's a link:
> http://www.infty.nl/misc/flint-1.5.2.p3.spkg


Thanks, I'll then delete the attached one.  (You can still attach a diff for reference / review.)




> Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)


Yes.  At the very least, we should split off the (hopefully) vanilla `src/` tree from Sage's part.

(Even worse, Jeroen's merger script currently keeps modifying some "unchanged", already released spkgs from beta to beta.  The differences are subtle changes in the metadata due to needless repackaging, but of course mtimes and md5sums differ afterwards.  But you have to download and unpack them to check/see this...)



---

archive/issue_comments_175279.json:
```json
{
    "body": "Changing keywords from \"\" to \"spkg\".",
    "created_at": "2013-03-07T13:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175279",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "" to "spkg".



---

archive/issue_comments_175280.json:
```json
{
    "body": "Ooops, just noticed http://www.infty.nl/misc/flint-1.5.2.p3.spkg is a plain `tar` file.",
    "created_at": "2013-03-07T14:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175280",
    "user": "https://github.com/nexttime"
}
```

Ooops, just noticed http://www.infty.nl/misc/flint-1.5.2.p3.spkg is a plain `tar` file.



---

archive/issue_comments_175281.json:
```json
{
    "body": "Spkg looks ok, except that the changelog entry (and the commit message) should contain the ticket number (`#14241`).\n\nI'd also use (bzip2) compression, although it'll (currently) get repackaged upon merging, as mentioned above.",
    "created_at": "2013-03-07T14:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175281",
    "user": "https://github.com/nexttime"
}
```

Spkg looks ok, except that the changelog entry (and the commit message) should contain the ticket number (`#14241`).

I'd also use (bzip2) compression, although it'll (currently) get repackaged upon merging, as mentioned above.



---

archive/issue_comments_175282.json:
```json
{
    "body": "I uploaded a new version (md5sum 74149705ef0a7972c3573c62921204ae) including the trac number. It's not a plain tar file and I don't think it was? It's gzipped though, not bzip (just tar -czf).\n\nI also added the exported tip as an attachment for your reviewing pleasure.",
    "created_at": "2013-03-07T15:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175282",
    "user": "https://github.com/tkluck"
}
```

I uploaded a new version (md5sum 74149705ef0a7972c3573c62921204ae) including the trac number. It's not a plain tar file and I don't think it was? It's gzipped though, not bzip (just tar -czf).

I also added the exported tip as an attachment for your reviewing pleasure.



---

archive/issue_comments_175283.json:
```json
{
    "body": "Attachment [trac_14241_path_separator_flint.patch](tarball://root/attachments/some-uuid/ticket14241/trac_14241_path_separator_flint.patch) by @nexttime created at 2013-03-07 16:05:57\n\nOk.\n\nFWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175283",
    "user": "https://github.com/nexttime"
}
```

Attachment [trac_14241_path_separator_flint.patch](tarball://root/attachments/some-uuid/ticket14241/trac_14241_path_separator_flint.patch) by @nexttime created at 2013-03-07 16:05:57

Ok.

FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.



---

archive/issue_comments_175284.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175284",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175285.json:
```json
{
    "body": "Changing keywords from \"spkg\" to \"spkg FreeBSD\".",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175285",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "spkg" to "spkg FreeBSD".



---

archive/issue_comments_175286.json:
```json
{
    "body": "Changing priority from major to trivial.",
    "created_at": "2013-03-07T16:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175286",
    "user": "https://github.com/nexttime"
}
```

Changing priority from major to trivial.



---

archive/issue_events_040267.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-03-07T16:07:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-40267"
}
```



---

archive/issue_comments_175287.json:
```json
{
    "body": "Replying to [comment:11 leif]:\n> FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.\n\nYeah, I agree. This is the first time I use bsd, too, and I'm having a hard time adjusting in general. I guess portability is good, though.\n\nThanks for reviewing!",
    "created_at": "2013-03-07T16:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175287",
    "user": "https://github.com/tkluck"
}
```

Replying to [comment:11 leif]:
> FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.

Yeah, I agree. This is the first time I use bsd, too, and I'm having a hard time adjusting in general. I guess portability is good, though.

Thanks for reviewing!



---

archive/issue_events_040268.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-07T22:56:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-40268"
}
```



---

archive/issue_events_040269.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-07T22:56:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-40269"
}
```



---

archive/issue_events_040270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-13T11:05:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-40270"
}
```



---

archive/issue_comments_175288.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-03-13T11:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-175288",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
