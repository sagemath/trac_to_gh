# Issue 14241: Patch to FLINT fails to apply because of double path separator // in filenames

archive/issues_014037.json:
```json
{
    "body": "The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.\n\n---\n\n**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)\n\n\n**Keywords:** spkg FreeBSD\n\n**Reviewer:** Leif Leonhardy\n\n**Author:** Timo Kluck\n\n**Merged:** sage-5.9.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/14241\n\n",
    "closed_at": "2013-03-13T11:05:55Z",
    "created_at": "2013-03-07T12:51:56Z",
    "labels": [
        "component: packages: standard",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Patch to FLINT fails to apply because of double path separator // in filenames",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14241",
    "user": "https://github.com/tkluck"
}
```
The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.

---

**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)


**Keywords:** spkg FreeBSD

**Reviewer:** Leif Leonhardy

**Author:** Timo Kluck

**Merged:** sage-5.9.beta0

Issue created by migration from https://trac.sagemath.org/ticket/14241





---

archive/issue_comments_210993.json:
```json
{
    "body": "<a id='comment:1'></a>\nROFL.\n\n\n\n\nPlease don't attach binary files to tickets, but instead provide links to them...",
    "created_at": "2013-03-07T13:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210993",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>
ROFL.




Please don't attach binary files to tickets, but instead provide links to them...



---

archive/issue_comments_210994.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [leif](#comment%3A1):\n> Please don't attach binary files to tickets, but instead provide links to them...\n\n\nThere's even https://code.google.com/p/spkg-upload/ btw. for that reason... ;-)",
    "created_at": "2013-03-07T13:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210994",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>
Replying to [leif](#comment%3A1):
> Please don't attach binary files to tickets, but instead provide links to them...


There's even https://code.google.com/p/spkg-upload/ btw. for that reason... ;-)



---

archive/issue_comments_210995.json:
```json
{
    "body": "<a id='comment:3'></a>\nHere's a link:\nhttp://www.infty.nl/misc/flint-1.5.2.p3.spkg\n\nOff topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)",
    "created_at": "2013-03-07T13:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210995",
    "user": "https://github.com/tkluck"
}
```

<a id='comment:3'></a>
Here's a link:
http://www.infty.nl/misc/flint-1.5.2.p3.spkg

Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)



---

archive/issue_comments_210996.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-03-07T13:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210996",
    "user": "https://github.com/tkluck"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_210997.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [tkluck](#comment%3A3):\n> Here's a link:\n> http://www.infty.nl/misc/flint-1.5.2.p3.spkg\n\n\nThanks, I'll then delete the attached one.  (You can still attach a diff for reference / review.)\n\n\n\n\n> Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)\n\n\nYes.  At the very least, we should split off the (hopefully) vanilla `src/` tree from Sage's part.\n\n(Even worse, Jeroen's merger script currently keeps modifying some \"unchanged\", already released spkgs from beta to beta.  The differences are subtle changes in the metadata due to needless repackaging, but of course mtimes and md5sums differ afterwards.  But you have to download and unpack them to check/see this...)",
    "created_at": "2013-03-07T13:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210997",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
Replying to [tkluck](#comment%3A3):
> Here's a link:
> http://www.infty.nl/misc/flint-1.5.2.p3.spkg


Thanks, I'll then delete the attached one.  (You can still attach a diff for reference / review.)




> Off topic: this goes to show how badly the packaging system needs an overhaul. There shouldn't be any need to upload a binary file for this, since it's just a text patch to the package metadata. Fortunately, people are working on that... :-)


Yes.  At the very least, we should split off the (hopefully) vanilla `src/` tree from Sage's part.

(Even worse, Jeroen's merger script currently keeps modifying some "unchanged", already released spkgs from beta to beta.  The differences are subtle changes in the metadata due to needless repackaging, but of course mtimes and md5sums differ afterwards.  But you have to download and unpack them to check/see this...)



---

archive/issue_comments_210998.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix: see the attached spkg.\n+The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.\n+\n+---\n+\n+**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)\n+\n``````\n",
    "created_at": "2013-03-07T13:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210998",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix: see the attached spkg.
+The flint spkg fails in the patch phase on FreeBSD, because the patch file for `longlong.h` uses `//` as a path separator instead of `/`. This is very easy to fix.
+
+---
+
+**New spkg:** [http://www.infty.nl/misc/flint-1.5.2.p3.spkg](http://www.infty.nl/misc/flint-1.5.2.p3.spkg)
+
``````




---

archive/issue_comments_210999.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"spkg\".",
    "created_at": "2013-03-07T13:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-210999",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "" to "spkg".



---

archive/issue_comments_211000.json:
```json
{
    "body": "<a id='comment:8'></a>\nOoops, just noticed http://www.infty.nl/misc/flint-1.5.2.p3.spkg is a plain `tar` file.",
    "created_at": "2013-03-07T14:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211000",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Ooops, just noticed http://www.infty.nl/misc/flint-1.5.2.p3.spkg is a plain `tar` file.



---

archive/issue_comments_211001.json:
```json
{
    "body": "<a id='comment:9'></a>\nSpkg looks ok, except that the changelog entry (and the commit message) should contain the ticket number (`#14241`).\n\nI'd also use (bzip2) compression, although it'll (currently) get repackaged upon merging, as mentioned above.",
    "created_at": "2013-03-07T14:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211001",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>
Spkg looks ok, except that the changelog entry (and the commit message) should contain the ticket number (`#14241`).

I'd also use (bzip2) compression, although it'll (currently) get repackaged upon merging, as mentioned above.



---

archive/issue_comments_211002.json:
```json
{
    "body": "**Reviewer:** Leif Leonhardy",
    "created_at": "2013-03-07T14:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211002",
    "user": "https://github.com/nexttime"
}
```

**Reviewer:** Leif Leonhardy



---

archive/issue_comments_211003.json:
```json
{
    "body": "<a id='comment:10'></a>\nI uploaded a new version (md5sum 74149705ef0a7972c3573c62921204ae) including the trac number. It's not a plain tar file and I don't think it was? It's gzipped though, not bzip (just tar -czf).\n\nI also added the exported tip as an attachment for your reviewing pleasure.",
    "created_at": "2013-03-07T15:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211003",
    "user": "https://github.com/tkluck"
}
```

<a id='comment:10'></a>
I uploaded a new version (md5sum 74149705ef0a7972c3573c62921204ae) including the trac number. It's not a plain tar file and I don't think it was? It's gzipped though, not bzip (just tar -czf).

I also added the exported tip as an attachment for your reviewing pleasure.



---

archive/attachments_019228.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14241_path_separator_flint.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14241/trac_14241_path_separator_flint.patch",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_211004.json:
```json
{
    "body": "<a id='comment:11'></a>\nOk.\n\nFWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211004",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
Ok.

FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.



---

archive/issue_comments_211005.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211005",
    "user": "https://github.com/nexttime"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_046081.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "rename": {
        "from": "flint fails to patch because of double path separator // in patch",
        "to": "Patch to FLINT fails to apply because of double path separator // in filenames"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-46081"
}
```



---

archive/issue_comments_211006.json:
```json
{
    "body": "**Changing keywords** from \"spkg\" to \"spkg FreeBSD\".",
    "created_at": "2013-03-07T16:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211006",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "spkg" to "spkg FreeBSD".



---

archive/issue_events_046082.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-03-07T16:07:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-46082"
}
```



---

archive/issue_comments_211007.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [leif](#comment%3A11):\n> FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.\n\nYeah, I agree. This is the first time I use bsd, too, and I'm having a hard time adjusting in general. I guess portability is good, though.\n\nThanks for reviewing!",
    "created_at": "2013-03-07T16:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211007",
    "user": "https://github.com/tkluck"
}
```

<a id='comment:13'></a>
Replying to [leif](#comment%3A11):
> FWIW, as the filenames do not *start* with `//`, I think FreeBSD's `patch` is broken here, but never mind.

Yeah, I agree. This is the first time I use bsd, too, and I'm having a hard time adjusting in general. I guess portability is good, though.

Thanks for reviewing!



---

archive/issue_events_046083.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-07T22:56:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-46083"
}
```



---

archive/issue_events_046084.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-07T22:56:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "milestone": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-46084"
}
```



---

archive/issue_comments_211008.json:
```json
{
    "body": "**Merged:** sage-5.9.beta0",
    "created_at": "2013-03-13T11:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14241#issuecomment-211008",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.9.beta0



---

archive/issue_events_046085.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-13T11:05:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14241#event-46085"
}
```
