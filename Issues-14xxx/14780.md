# Issue 14780: allow embedding python tuples in SR

archive/issues_014576.json:
```json
{
    "body": "Attached patch allows embedding Python tuples in symbolic expressions:\n\n```\nsage: t = SR._force_tuple((1, 2, x, x+1, x+2))\nsage: t\n(1, 2, x, x + 1, x + 2)\nsage: t.subs(x = 2*x^2)\n(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)\nsage: t.op[0]\n1\nsage: t.op[2]\nx\n```\n \nIncludes pynac 0.3.2 update for explicit template instantiatitons\n\nhttp://boxen.math.washington.edu/home/vbraun/upstream/pynac-0.3.2.tar.bz2\n\n\nAssignee: @burcin\n\nCC:  @eviatarbach\n\nKeywords: sd48\n\nBranch/Commit: aa7287f676a96f486af609ea36554820e0b3d7bc\n\nReviewer: Volker Braun, Jean-Pierre Flori\n\nAuthor: Burcin Erocal, Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14780\n\n",
    "closed_at": "2014-03-31T14:59:23Z",
    "created_at": "2013-06-19T22:28:40Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "allow embedding python tuples in SR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14780",
    "user": "https://github.com/burcin"
}
```
Attached patch allows embedding Python tuples in symbolic expressions:

```
sage: t = SR._force_tuple((1, 2, x, x+1, x+2))
sage: t
(1, 2, x, x + 1, x + 2)
sage: t.subs(x = 2*x^2)
(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)
sage: t.op[0]
1
sage: t.op[2]
x
```
 
Includes pynac 0.3.2 update for explicit template instantiatitons

http://boxen.math.washington.edu/home/vbraun/upstream/pynac-0.3.2.tar.bz2


Assignee: @burcin

CC:  @eviatarbach

Keywords: sd48

Branch/Commit: aa7287f676a96f486af609ea36554820e0b3d7bc

Reviewer: Volker Braun, Jean-Pierre Flori

Author: Burcin Erocal, Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14780





---

archive/issue_comments_197422.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-22T03:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197422",
    "user": "https://github.com/burcin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_197423.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd48\".",
    "created_at": "2013-06-22T03:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197423",
    "user": "https://github.com/burcin"
}
```

Changing keywords from "" to "sd48".



---

archive/issue_comments_197424.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -11,6 +11,9 @@\n sage: t.op[2]\n x\n ```\n+ \n+Apply: [attachment:trac_14780-embed_tuples_in_SR.patch]\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2013-06-22T03:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197424",
    "user": "https://github.com/burcin"
}
```

Description changed:
```diff
--- 
+++ 
@@ -11,6 +11,9 @@
 sage: t.op[2]
 x
 ```
+ 
+Apply: [attachment:trac_14780-embed_tuples_in_SR.patch]
+
 
 Comment: 1
 
```




---

archive/issue_comments_197425.json:
```json
{
    "body": "<a id='comment:2'></a>We were discussing an optional `recursive=[True|False]` keyword argument at SD48. Are you still going to implement this? Similar for the unpacking at #14802.",
    "created_at": "2013-06-23T15:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197425",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>We were discussing an optional `recursive=[True|False]` keyword argument at SD48. Are you still going to implement this? Similar for the unpacking at #14802.



---

archive/issue_comments_197426.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 vbraun]:\n> We were discussing an optional `recursive=[True|False]` keyword argument at SD48. Are you still going to implement this?\n\n\nI replaced the attached patch. New version supports `recursive=[True|False]`.",
    "created_at": "2013-06-24T18:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197426",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'></a>Replying to [comment:2 vbraun]:
> We were discussing an optional `recursive=[True|False]` keyword argument at SD48. Are you still going to implement this?


I replaced the attached patch. New version supports `recursive=[True|False]`.



---

archive/issue_comments_197427.json:
```json
{
    "body": "Attachment [trac_14780-embed_tuples_in_SR.patch](tarball://root/attachments/some-uuid/ticket14780/trac_14780-embed_tuples_in_SR.patch) by @burcin created at 2013-06-26 03:57:32",
    "created_at": "2013-06-26T03:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197427",
    "user": "https://github.com/burcin"
}
```

Attachment [trac_14780-embed_tuples_in_SR.patch](tarball://root/attachments/some-uuid/ticket14780/trac_14780-embed_tuples_in_SR.patch) by @burcin created at 2013-06-26 03:57:32



---

archive/issue_comments_197428.json:
```json
{
    "body": "<a id='comment:4'></a>Looks good to me",
    "created_at": "2013-06-27T15:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197428",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>Looks good to me



---

archive/issue_comments_197429.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-27T15:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197429",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_042396.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:48:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14780#event-42396"
}
```



---

archive/issue_comments_197430.json:
```json
{
    "body": "<a id='comment:6'></a>On buildbot machine redhawk (Ubuntu 10.04 x86_64):\n\n```\nsage -t --long devel/sage/sage/symbolic/ring.pyx\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 312, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject((1, 2, x, x+1, x+2)); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[2]>\", line 1, in <module>\n        t = SR._force_pyobject((Integer(1), Integer(2), x, x+Integer(1), x+Integer(2))); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 314, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x = 2*x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[3]>\", line 1, in <module>\n        t.subs(x = Integer(2)*x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 323, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject([1, 2, x, x+1, x+2]); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[6]>\", line 1, in <module>\n        t = SR._force_pyobject([Integer(1), Integer(2), x, x+Integer(1), x+Integer(2)]); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 325, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x = 2*x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[7]>\", line 1, in <module>\n        t.subs(x = Integer(2)*x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 327, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    SR._force_pyobject((QQ, RR, CC))\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[8]>\", line 1, in <module>\n        SR._force_pyobject((QQ, RR, CC))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 329, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject((QQ, (x, x + 1, x + 2), CC)); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[9]>\", line 1, in <module>\n        t = SR._force_pyobject((QQ, (x, x + Integer(1), x + Integer(2)), CC)); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 331, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x=x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[10]>\", line 1, in <module>\n        t.subs(x=x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 338, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[12]>\", line 1, in <module>\n        t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 341, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x=x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[13]>\", line 1, in <module>\n        t.subs(x=x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 259, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)\n      File \"ring.pyx\", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)\n    TypeError: std::bad_cast\n**********************************************************************\n```",
    "created_at": "2013-07-31T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197430",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>On buildbot machine redhawk (Ubuntu 10.04 x86_64):

```
sage -t --long devel/sage/sage/symbolic/ring.pyx
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 312, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject((1, 2, x, x+1, x+2)); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[2]>", line 1, in <module>
        t = SR._force_pyobject((Integer(1), Integer(2), x, x+Integer(1), x+Integer(2))); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 314, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x = 2*x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[3]>", line 1, in <module>
        t.subs(x = Integer(2)*x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 323, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject([1, 2, x, x+1, x+2]); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[6]>", line 1, in <module>
        t = SR._force_pyobject([Integer(1), Integer(2), x, x+Integer(1), x+Integer(2)]); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 325, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x = 2*x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[7]>", line 1, in <module>
        t.subs(x = Integer(2)*x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 327, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    SR._force_pyobject((QQ, RR, CC))
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[8]>", line 1, in <module>
        SR._force_pyobject((QQ, RR, CC))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 329, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject((QQ, (x, x + 1, x + 2), CC)); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[9]>", line 1, in <module>
        t = SR._force_pyobject((QQ, (x, x + Integer(1), x + Integer(2)), CC)); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 331, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x=x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[10]>", line 1, in <module>
        t.subs(x=x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 338, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[12]>", line 1, in <module>
        t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 341, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x=x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[13]>", line 1, in <module>
        t.subs(x=x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.12.beta0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 259, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4624)
      File "ring.pyx", line 661, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7574)
    TypeError: std::bad_cast
**********************************************************************
```



---

archive/issue_comments_197431.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-07-31T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197431",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_197432.json:
```json
{
    "body": "<a id='comment:7'></a>Hmm... this works for me with `sage-5.13.beta2` on Ubuntu 12.04 LTS, 32-bit with a AMD Athlon(tm) 64 X2 Dual Core Processor 4600+ x2. Also it works for the patchbot(s) running x86_64 architectures. This might also work now since I think we've upgraded cython between now and the last time this was tested... So I'm going to set this back to positive review.",
    "created_at": "2013-12-09T02:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197432",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Hmm... this works for me with `sage-5.13.beta2` on Ubuntu 12.04 LTS, 32-bit with a AMD Athlon(tm) 64 X2 Dual Core Processor 4600+ x2. Also it works for the patchbot(s) running x86_64 architectures. This might also work now since I think we've upgraded cython between now and the last time this was tested... So I'm going to set this back to positive review.



---

archive/issue_comments_197433.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-12-09T02:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197433",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_197434.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-12-10T08:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197434",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_197435.json:
```json
{
    "body": "<a id='comment:8'></a>On the buildbot machine `redhawk` (Ubuntu 10.04 x86_64):\n\n```\nsage -t --long devel/sage/sage/symbolic/ring.pyx\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 317, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject((1, 2, x, x+1, x+2)); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[2]>\", line 1, in <module>\n        t = SR._force_pyobject((Integer(1), Integer(2), x, x+Integer(1), x+Integer(2))); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 319, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x = 2*x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[3]>\", line 1, in <module>\n        t.subs(x = Integer(2)*x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 328, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject([1, 2, x, x+1, x+2]); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[6]>\", line 1, in <module>\n        t = SR._force_pyobject([Integer(1), Integer(2), x, x+Integer(1), x+Integer(2)]); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 330, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x = 2*x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[7]>\", line 1, in <module>\n        t.subs(x = Integer(2)*x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 332, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    SR._force_pyobject((QQ, RR, CC))\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[8]>\", line 1, in <module>\n        SR._force_pyobject((QQ, RR, CC))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 334, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t = SR._force_pyobject((QQ, (x, x + 1, x + 2), CC)); t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[9]>\", line 1, in <module>\n        t = SR._force_pyobject((QQ, (x, x + Integer(1), x + Integer(2)), CC)); t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 336, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x=x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[10]>\", line 1, in <module>\n        t.subs(x=x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 343, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[12]>\", line 1, in <module>\n        t\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\nFile \"devel/sage/sage/symbolic/ring.pyx\", line 346, in sage.symbolic.ring.SymbolicRing._force_pyobject\nFailed example:\n    t.subs(x=x^2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[13]>\", line 1, in <module>\n        t.subs(x=x**Integer(2))\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py\", line 451, in __call__\n        self.oldhook(obj)\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)\n      File \"expression.pyx\", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)\n      File \"ring.pyx\", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)\n    TypeError: std::bad_cast\n**********************************************************************\n```",
    "created_at": "2013-12-10T08:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197435",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>On the buildbot machine `redhawk` (Ubuntu 10.04 x86_64):

```
sage -t --long devel/sage/sage/symbolic/ring.pyx
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 317, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject((1, 2, x, x+1, x+2)); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[2]>", line 1, in <module>
        t = SR._force_pyobject((Integer(1), Integer(2), x, x+Integer(1), x+Integer(2))); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 319, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x = 2*x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[3]>", line 1, in <module>
        t.subs(x = Integer(2)*x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 328, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject([1, 2, x, x+1, x+2]); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[6]>", line 1, in <module>
        t = SR._force_pyobject([Integer(1), Integer(2), x, x+Integer(1), x+Integer(2)]); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 330, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x = 2*x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[7]>", line 1, in <module>
        t.subs(x = Integer(2)*x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 332, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    SR._force_pyobject((QQ, RR, CC))
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[8]>", line 1, in <module>
        SR._force_pyobject((QQ, RR, CC))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 334, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t = SR._force_pyobject((QQ, (x, x + 1, x + 2), CC)); t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[9]>", line 1, in <module>
        t = SR._force_pyobject((QQ, (x, x + Integer(1), x + Integer(2)), CC)); t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 336, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x=x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[10]>", line 1, in <module>
        t.subs(x=x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 343, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[12]>", line 1, in <module>
        t
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
File "devel/sage/sage/symbolic/ring.pyx", line 346, in sage.symbolic.ring.SymbolicRing._force_pyobject
Failed example:
    t.subs(x=x^2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.ring.SymbolicRing._force_pyobject[13]>", line 1, in <module>
        t.subs(x=x**Integer(2))
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "/scratch/buildbot/sage/redhawk-1/redhawk_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/misc/displayhook.py", line 451, in __call__
        self.oldhook(obj)
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1921)
      File "expression.pyx", line 521, in sage.symbolic.expression.Expression._repr_ (sage/symbolic/expression.cpp:4629)
      File "ring.pyx", line 666, in sage.symbolic.ring.SymbolicRing._repr_element_ (sage/symbolic/ring.cpp:7670)
    TypeError: std::bad_cast
**********************************************************************
```



---

archive/issue_comments_197436.json:
```json
{
    "body": "<a id='comment:10'></a>New commits:",
    "created_at": "2013-12-22T22:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197436",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>New commits:



---

archive/issue_comments_197437.json:
```json
{
    "body": "<a id='comment:11'></a>Backtrace (with gdb \"catch throw\"):\n\n```\n(gdb) bt\n#0  0x00007ffff3c17dc0 in __cxa_throw () from /usr/lib/libstdc++.so.6\n#1  0x00007ffff3c16ba2 in __cxa_bad_cast () from /usr/lib/libstdc++.so.6\n#2  0x00007fffcdecb9fc in GiNaC::print_memfun_handler<GiNaC::container<std::vector>, GiNaC::print_context>::operator()(GiNaC::basic const&, GiNaC::print_context const&, unsigned int) const ()\n   from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#3  0x00007fffcde90928 in GiNaC::print_functor::operator()(GiNaC::basic const&, GiNaC::print_context const&, unsigned int) const () from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#4  0x00007fffcde8cb92 in GiNaC::basic::print_dispatch(GiNaC::class_info<GiNaC::registered_class_options> const&, GiNaC::print_context const&, unsigned int) const () from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#5  0x00007fffcde8c756 in GiNaC::basic::print(GiNaC::print_context const&, unsigned int) const ()\n   from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#6  0x00007fffcdebc2e9 in GiNaC::ex::print(GiNaC::print_context const&, unsigned int) const ()\n   from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#7  0x00007fffcdf9ea66 in GiNaC::operator<<(std::ostream&, GiNaC::ex const&) ()\n   from /home/vbraun/Sage/git/local/lib/libpynac.so.0\n#8  0x00007fffcd654e9a in _to_PyString<GiNaC::ex> (x=<optimized out>)\n    at /home/vbraun/Sage/git/local/include/csage/ccobject.h:105\n```",
    "created_at": "2013-12-22T22:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197437",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>Backtrace (with gdb "catch throw"):

```
(gdb) bt
#0  0x00007ffff3c17dc0 in __cxa_throw () from /usr/lib/libstdc++.so.6
#1  0x00007ffff3c16ba2 in __cxa_bad_cast () from /usr/lib/libstdc++.so.6
#2  0x00007fffcdecb9fc in GiNaC::print_memfun_handler<GiNaC::container<std::vector>, GiNaC::print_context>::operator()(GiNaC::basic const&, GiNaC::print_context const&, unsigned int) const ()
   from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#3  0x00007fffcde90928 in GiNaC::print_functor::operator()(GiNaC::basic const&, GiNaC::print_context const&, unsigned int) const () from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#4  0x00007fffcde8cb92 in GiNaC::basic::print_dispatch(GiNaC::class_info<GiNaC::registered_class_options> const&, GiNaC::print_context const&, unsigned int) const () from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#5  0x00007fffcde8c756 in GiNaC::basic::print(GiNaC::print_context const&, unsigned int) const ()
   from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#6  0x00007fffcdebc2e9 in GiNaC::ex::print(GiNaC::print_context const&, unsigned int) const ()
   from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#7  0x00007fffcdf9ea66 in GiNaC::operator<<(std::ostream&, GiNaC::ex const&) ()
   from /home/vbraun/Sage/git/local/lib/libpynac.so.0
#8  0x00007fffcd654e9a in _to_PyString<GiNaC::ex> (x=<optimized out>)
    at /home/vbraun/Sage/git/local/include/csage/ccobject.h:105
```



---

archive/issue_comments_197438.json:
```json
{
    "body": "<a id='comment:12'></a>I suspect that this is a case of http://gcc.gnu.org/faq.html#dso\n\nYou can't (without wonky workarounds) use RTTI across shared libraries. We instantiate GiNaC templates in Sage, and `std::dynamic_cast` does not consider those the same as instantiations in the pynac shared library. Toughts?",
    "created_at": "2013-12-23T12:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197438",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>I suspect that this is a case of http://gcc.gnu.org/faq.html#dso

You can't (without wonky workarounds) use RTTI across shared libraries. We instantiate GiNaC templates in Sage, and `std::dynamic_cast` does not consider those the same as instantiations in the pynac shared library. Toughts?



---

archive/issue_comments_197439.json:
```json
{
    "body": "<a id='comment:13'></a>Possibly, but why does it only seem to fail on that specific machine? I would think if that really were the case, then it should fail across different machines, or at least different versions of Ubuntu...",
    "created_at": "2013-12-23T18:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197439",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Possibly, but why does it only seem to fail on that specific machine? I would think if that really were the case, then it should fail across different machines, or at least different versions of Ubuntu...



---

archive/issue_comments_197440.json:
```json
{
    "body": "<a id='comment:14'></a>Some compiler/linker combination may leave unused instantiations around, or instantiate too much. Its possible to only be triggered on some machines...",
    "created_at": "2013-12-23T18:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197440",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>Some compiler/linker combination may leave unused instantiations around, or instantiate too much. Its possible to only be triggered on some machines...



---

archive/issue_events_042397.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14780#event-42397"
}
```



---

archive/issue_events_042398.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14780#event-42398"
}
```



---

archive/issue_comments_197441.json:
```json
{
    "body": "<a id='comment:16'></a>All tests pass on 6.2.base2 on an AMD Phenom II X6 1055T with OpenSuSE. Does the problem on the one machine still persist?",
    "created_at": "2014-02-21T17:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197441",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>All tests pass on 6.2.base2 on an AMD Phenom II X6 1055T with OpenSuSE. Does the problem on the one machine still persist?



---

archive/issue_comments_197442.json:
```json
{
    "body": "<a id='comment:17'></a>Afaik nothing changed, so it'll still fail on Sparc. If you want to help we can get you an account. Or start a post on sage-devel to remove Sparc from the list of first-class supported platforms. IMHO it would be way more useful to spend time on ARM and POWER7 than on a long-dead platform that is plagued by linker bugs.",
    "created_at": "2014-02-21T22:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197442",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>Afaik nothing changed, so it'll still fail on Sparc. If you want to help we can get you an account. Or start a post on sage-devel to remove Sparc from the list of first-class supported platforms. IMHO it would be way more useful to spend time on ARM and POWER7 than on a long-dead platform that is plagued by linker bugs.



---

archive/issue_comments_197443.json:
```json
{
    "body": "<a id='comment:18'></a>So let's wait for answers to https://groups.google.com/forum/#!topic/sage-devel/8fkkRn4JJrw",
    "created_at": "2014-02-22T09:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197443",
    "user": "https://github.com/rwst"
}
```

<a id='comment:18'></a>So let's wait for answers to https://groups.google.com/forum/#!topic/sage-devel/8fkkRn4JJrw



---

archive/issue_comments_197444.json:
```json
{
    "body": "<a id='comment:19'></a>FYI I have no bad_cast issue on a sparc/Solaris machine (UST2+) using FSF GCC 4.7.3 and the Sun linker.\n\n```\n$ uname -a\nSunOS blabliblu 5.10 Generic_139555-08 sun4v sparc SUNW,T5140\n$ gcc -v\nUtilisation des specs internes.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/infres/post/flori/local32+i1/libexec/gcc/sparc-sun-solaris2.10/4.7.3/lto-wrapper\nTarget: sparc-sun-solaris2.10\nConfigur\u00e9 avec: ../gcc-4.7.3/configure --prefix=/infres/post/flori/local32+i1/ --with-local-prefix=/infres/post/flori/local32+i1/ --with-gmp=/infres/post/flori/local32+i1/ --with-mpfr=/infres/post/flori/local32+i1/ --with-mpc=/infres/post/flori/local32+i1/ --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --program-suffix=-4.7.3 --enable-languages=c,c++,fortran,lto\nMod\u00e8le de thread: posix\ngcc version 4.7.3 (GCC)\n$ ld -V\nld: Software Generation Utilities - Solaris Link Editors: 5.10-1.493\n$ \n```\n\nBut as I'm looking at this ticket, I see `redhawk` is mentioned as the problematic machine and this isn't a sparc machine...\n\n```\njpflori@redhawk:~$ uname -a\nLinux redhawk 2.6.32-44-server #98-Ubuntu SMP Mon Sep 24 17:41:33 UTC 2012 x86_64 GNU/Linux\n```\nSo was the problem occuring on another machine? (mark?)",
    "created_at": "2014-02-25T09:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197444",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>FYI I have no bad_cast issue on a sparc/Solaris machine (UST2+) using FSF GCC 4.7.3 and the Sun linker.

```
$ uname -a
SunOS blabliblu 5.10 Generic_139555-08 sun4v sparc SUNW,T5140
$ gcc -v
Utilisation des specs internes.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/infres/post/flori/local32+i1/libexec/gcc/sparc-sun-solaris2.10/4.7.3/lto-wrapper
Target: sparc-sun-solaris2.10
Configur avec: ../gcc-4.7.3/configure --prefix=/infres/post/flori/local32+i1/ --with-local-prefix=/infres/post/flori/local32+i1/ --with-gmp=/infres/post/flori/local32+i1/ --with-mpfr=/infres/post/flori/local32+i1/ --with-mpc=/infres/post/flori/local32+i1/ --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --program-suffix=-4.7.3 --enable-languages=c,c++,fortran,lto
Modle de thread: posix
gcc version 4.7.3 (GCC)
$ ld -V
ld: Software Generation Utilities - Solaris Link Editors: 5.10-1.493
$ 
```

But as I'm looking at this ticket, I see `redhawk` is mentioned as the problematic machine and this isn't a sparc machine...

```
jpflori@redhawk:~$ uname -a
Linux redhawk 2.6.32-44-server #98-Ubuntu SMP Mon Sep 24 17:41:33 UTC 2012 x86_64 GNU/Linux
```
So was the problem occuring on another machine? (mark?)



---

archive/issue_comments_197445.json:
```json
{
    "body": "<a id='comment:20'></a>So, rereading this, it was *not on a Sparc machine but a specific Ubuntu one. Can someone test this on a new Ubuntu installation? If it works then even if another specific Ubuntu version fails there should not be anything holding up this ticket any longer.",
    "created_at": "2014-03-06T15:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197445",
    "user": "https://github.com/rwst"
}
```

<a id='comment:20'></a>So, rereading this, it was *not on a Sparc machine but a specific Ubuntu one. Can someone test this on a new Ubuntu installation? If it works then even if another specific Ubuntu version fails there should not be anything holding up this ticket any longer.



---

archive/issue_comments_197446.json:
```json
{
    "body": "<a id='comment:21'></a>From comment:8, the Ubuntu version is the LTS one from 4 years ago.\nThere's been one two years ago and will be a new one next month, so I would be in favor of ignoring the redhawk problem (and maybe update the system there to 12.04, or even 14.04 when its out).",
    "created_at": "2014-03-06T15:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197446",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>From comment:8, the Ubuntu version is the LTS one from 4 years ago.
There's been one two years ago and will be a new one next month, so I would be in favor of ignoring the redhawk problem (and maybe update the system there to 12.04, or even 14.04 when its out).



---

archive/issue_comments_197447.json:
```json
{
    "body": "<a id='comment:22'></a>Just for what it's worth, could you try adding\n\n```\nimport ctypes   \nflags = sys.getdlopenflags()\nsys.setdlopenflags(flags | ctypes.RTLD_GLOBAL)\n```\nto `src/sage/all.py` and retest on `redhawk`?",
    "created_at": "2014-03-07T14:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197447",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:22'></a>Just for what it's worth, could you try adding

```
import ctypes   
flags = sys.getdlopenflags()
sys.setdlopenflags(flags | ctypes.RTLD_GLOBAL)
```
to `src/sage/all.py` and retest on `redhawk`?



---

archive/issue_comments_197448.json:
```json
{
    "body": "<a id='comment:23'></a>Setting `RTLD_GLOBAL` fixes the `std::bad_cast` on redhawk, interestingly. But it also leads to segfaults elsewhere...",
    "created_at": "2014-03-11T15:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197448",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>Setting `RTLD_GLOBAL` fixes the `std::bad_cast` on redhawk, interestingly. But it also leads to segfaults elsewhere...



---

archive/issue_comments_197449.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 vbraun]:\n> Setting `RTLD_GLOBAL` fixes the `std::bad_cast` on redhawk, interestingly. But it also leads to segfaults elsewhere...\n\nYeah, I guess it could have been expected and that it is not a completely random choice that Python does not set it by default as it might expect to load a bunch of libraries and get symbols conflicts.\nThough the fact that it is set by default on Darwin does not really point in that direction...\n\nWhat about linking sage/symbolic/ring.pyx/so with libpynac.so? that is modify module_list.py to achieve that.",
    "created_at": "2014-03-11T15:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197449",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>Replying to [comment:23 vbraun]:
> Setting `RTLD_GLOBAL` fixes the `std::bad_cast` on redhawk, interestingly. But it also leads to segfaults elsewhere...

Yeah, I guess it could have been expected and that it is not a completely random choice that Python does not set it by default as it might expect to load a bunch of libraries and get symbols conflicts.
Though the fact that it is set by default on Darwin does not really point in that direction...

What about linking sage/symbolic/ring.pyx/so with libpynac.so? that is modify module_list.py to achieve that.



---

archive/issue_comments_197450.json:
```json
{
    "body": "<a id='comment:25'></a>Building with `SAGE_INSTALL_GCC` seems to work... do we have a simple way to shitlist certain compilers by now?",
    "created_at": "2014-03-11T22:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197450",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>Building with `SAGE_INSTALL_GCC` seems to work... do we have a simple way to shitlist certain compilers by now?



---

archive/issue_comments_197451.json:
```json
{
    "body": "<a id='comment:26'></a>I think so, look into the magic which decides when to automatically install GCC in !`build/install`.\n\nSome combinations are already \"forbidden\".",
    "created_at": "2014-03-11T23:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197451",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>I think so, look into the magic which decides when to automatically install GCC in !`build/install`.

Some combinations are already "forbidden".



---

archive/issue_comments_197452.json:
```json
{
    "body": "<a id='comment:27'></a>Rebuild from scratch on redhawk and now all tests pass even without `SAGE_INSTALL_GCC` (??)",
    "created_at": "2014-03-12T07:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197452",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>Rebuild from scratch on redhawk and now all tests pass even without `SAGE_INSTALL_GCC` (??)



---

archive/issue_comments_197453.json:
```json
{
    "body": "<a id='comment:28'></a>Recompiled, doctests fail grrr...",
    "created_at": "2014-03-13T02:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197453",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>Recompiled, doctests fail grrr...



---

archive/issue_comments_197454.json:
```json
{
    "body": "<a id='comment:29'></a>Did you try the linking trick?\nIt seems I have access to redhawk, I'll give it a shot anyway.",
    "created_at": "2014-03-14T10:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197454",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>Did you try the linking trick?
It seems I have access to redhawk, I'll give it a shot anyway.



---

archive/issue_comments_197455.json:
```json
{
    "body": "<a id='comment:30'></a>Doesn't change anything.\nAnd trying to link libcsage.so with pynac makes sage crash at startup.",
    "created_at": "2014-03-14T14:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197455",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>Doesn't change anything.
And trying to link libcsage.so with pynac makes sage crash at startup.



---

archive/issue_comments_197456.json:
```json
{
    "body": "<a id='comment:31'></a>It does already link against libpynac due to the magic\n\n```\n# distutils: libraries = pynac gmp\n```\nin `ginac.pxd`",
    "created_at": "2014-03-15T03:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197456",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>It does already link against libpynac due to the magic

```
# distutils: libraries = pynac gmp
```
in `ginac.pxd`



---

archive/issue_comments_197457.json:
```json
{
    "body": "<a id='comment:32'></a>I'm playing around with marking the pynac templates external in the Sage library (C++11 feature, but unofficial in gcc for a while now). This is one way to avoid the clash. The problems seems that, on redhawk, `GiNaC::exprseq` a.k.a. `GiNaC::container<std::vector>` is not completely instantiated inside `libpynac.so`:\n\n```\nvbraun@redhawk:~/test/pynac/sage$ readelf -sW local/lib/libpynac.so  | grep _ZN5GiNaC9containerISt6vectorEC.Ev\n  2014: 0000000000169620   162 FUNC    WEAK   DEFAULT   12 _ZN5GiNaC9containerISt6vectorEC2Ev\n  3594: 0000000000169620   162 FUNC    WEAK   DEFAULT   12 _ZN5GiNaC9containerISt6vectorEC2Ev\n```\nvs. on my laptop:\n\n```\n$ readelf -sW local/lib/libpynac.so  | grep _ZN5GiNaC9containerISt6vectorEC.Ev\n   468: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC2Ev\n  7994: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC1Ev\n  4012: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC2Ev\n  5629: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC1Ev\n```\nIf you know gcc name mangling by heart (and I don't blame you if you don't) then the `C1` is the full constructor while `C2` is only the base object constructor. If you use `c++filt` then that distinction is not shown (!).  \n\nSo after marking that template external in `ginac_wrap.h`, Sage still works on my lapop but fails on redhawk since the full constructor is never instantiated. I think we should just push explicit instantiation of all necessary templates into pynac, this will probably fix the bug here.",
    "created_at": "2014-03-15T17:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197457",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>I'm playing around with marking the pynac templates external in the Sage library (C++11 feature, but unofficial in gcc for a while now). This is one way to avoid the clash. The problems seems that, on redhawk, `GiNaC::exprseq` a.k.a. `GiNaC::container<std::vector>` is not completely instantiated inside `libpynac.so`:

```
vbraun@redhawk:~/test/pynac/sage$ readelf -sW local/lib/libpynac.so  | grep _ZN5GiNaC9containerISt6vectorEC.Ev
  2014: 0000000000169620   162 FUNC    WEAK   DEFAULT   12 _ZN5GiNaC9containerISt6vectorEC2Ev
  3594: 0000000000169620   162 FUNC    WEAK   DEFAULT   12 _ZN5GiNaC9containerISt6vectorEC2Ev
```
vs. on my laptop:

```
$ readelf -sW local/lib/libpynac.so  | grep _ZN5GiNaC9containerISt6vectorEC.Ev
   468: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC2Ev
  7994: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC1Ev
  4012: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC2Ev
  5629: 000000000017c46e   147 FUNC    WEAK   DEFAULT   11 _ZN5GiNaC9containerISt6vectorEC1Ev
```
If you know gcc name mangling by heart (and I don't blame you if you don't) then the `C1` is the full constructor while `C2` is only the base object constructor. If you use `c++filt` then that distinction is not shown (!).  

So after marking that template external in `ginac_wrap.h`, Sage still works on my lapop but fails on redhawk since the full constructor is never instantiated. I think we should just push explicit instantiation of all necessary templates into pynac, this will probably fix the bug here.



---

archive/issue_comments_197458.json:
```json
{
    "body": "<a id='comment:33'></a>Implemented in https://bitbucket.org/vbraun/pynac/commits/af5e2c913c4399459a955b7604547941a36df88e\n\nThis does fix the issue on redhawk...",
    "created_at": "2014-03-16T04:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197458",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>Implemented in https://bitbucket.org/vbraun/pynac/commits/af5e2c913c4399459a955b7604547941a36df88e

This does fix the issue on redhawk...



---

archive/issue_comments_197459.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-17T21:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197460.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-19T05:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197461.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Attached patch allows embedding Python tuples in symbolic expressions:\n+\n+```\n+sage: t = SR._force_tuple((1, 2, x, x+1, x+2))\n+sage: t\n+(1, 2, x, x + 1, x + 2)\n+sage: t.subs(x = 2*x^2)\n+(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)\n+sage: t.op[0]\n+1\n+sage: t.op[2]\n+x\n+```\n+ \n+Updated tarball http://boxen.math.washington.edu/home/vbraun/upstream/pynac-4c798d4cb4b5.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2014-03-19T05:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197461",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Attached patch allows embedding Python tuples in symbolic expressions:
+
+```
+sage: t = SR._force_tuple((1, 2, x, x+1, x+2))
+sage: t
+(1, 2, x, x + 1, x + 2)
+sage: t.subs(x = 2*x^2)
+(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)
+sage: t.op[0]
+1
+sage: t.op[2]
+x
+```
+ 
+Updated tarball http://boxen.math.washington.edu/home/vbraun/upstream/pynac-4c798d4cb4b5.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_comments_197462.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-20T14:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197463.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+Attached patch allows embedding Python tuples in symbolic expressions:\n+\n+```\n+sage: t = SR._force_tuple((1, 2, x, x+1, x+2))\n+sage: t\n+(1, 2, x, x + 1, x + 2)\n+sage: t.subs(x = 2*x^2)\n+(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)\n+sage: t.op[0]\n+1\n+sage: t.op[2]\n+x\n+```\n+ \n+Includes pynac 0.3.2 update for explicit template instantiatitons\n+\n+http://boxen.math.washington.edu/home/vbraun/upstream/pynac-0.3.2.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2014-03-20T14:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197463",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+Attached patch allows embedding Python tuples in symbolic expressions:
+
+```
+sage: t = SR._force_tuple((1, 2, x, x+1, x+2))
+sage: t
+(1, 2, x, x + 1, x + 2)
+sage: t.subs(x = 2*x^2)
+(1, 2, 2*x^2, 2*x^2 + 1, 2*x^2 + 2)
+sage: t.op[0]
+1
+sage: t.op[2]
+x
+```
+ 
+Includes pynac 0.3.2 update for explicit template instantiatitons
+
+http://boxen.math.washington.edu/home/vbraun/upstream/pynac-0.3.2.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_comments_197464.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-20T14:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197464",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_197465.json:
```json
{
    "body": "<a id='comment:40'></a>Jean-Pierre, are you still reviewing this ticket?",
    "created_at": "2014-03-25T15:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197465",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>Jean-Pierre, are you still reviewing this ticket?



---

archive/issue_comments_197466.json:
```json
{
    "body": "<a id='comment:41'></a>Uh... I wasn't even aware there was a 0.3.2 version of pynac!?",
    "created_at": "2014-03-28T16:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197466",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:41'></a>Uh... I wasn't even aware there was a 0.3.2 version of pynac!?



---

archive/issue_comments_197467.json:
```json
{
    "body": "<a id='comment:42'></a>Well now there is ;-)  See also pynac-devel...",
    "created_at": "2014-03-28T17:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197467",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:42'></a>Well now there is ;-)  See also pynac-devel...



---

archive/issue_comments_197468.json:
```json
{
    "body": "<a id='comment:43'></a>How is the LT_VERSION_INFO problem?",
    "created_at": "2014-03-28T18:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197468",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:43'></a>How is the LT_VERSION_INFO problem?



---

archive/issue_comments_197469.json:
```json
{
    "body": "<a id='comment:44'></a>I don't know what you are talking about. I'm not aware of any libtool versioning problem, but if there is then it has nothing to do with this ticket.",
    "created_at": "2014-03-28T18:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197469",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>I don't know what you are talking about. I'm not aware of any libtool versioning problem, but if there is then it has nothing to do with this ticket.



---

archive/issue_comments_197470.json:
```json
{
    "body": "<a id='comment:45'></a>I was away from the internet for one week.\nI'll review that at worst on monday.",
    "created_at": "2014-03-29T06:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197470",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>I was away from the internet for one week.
I'll review that at worst on monday.



---

archive/issue_comments_197471.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 jpflori]:\n> I was away from the internet for one week.\n\n\nOMG thats terrible! How did you survive? ;-)",
    "created_at": "2014-03-29T11:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197471",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>Replying to [comment:45 jpflori]:
> I was away from the internet for one week.


OMG thats terrible! How did you survive? ;-)



---

archive/issue_comments_197472.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:43 Snark]:\n> How is the LT_VERSION_INFO problem?\n\nStill here I guess...\nSee last post in https://groups.google.com/d/msg/pynac-devel/nNiFSb1VyKw/F7RJso8RjvwJ",
    "created_at": "2014-03-30T14:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197472",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:47'></a>Replying to [comment:43 Snark]:
> How is the LT_VERSION_INFO problem?

Still here I guess...
See last post in https://groups.google.com/d/msg/pynac-devel/nNiFSb1VyKw/F7RJso8RjvwJ



---

archive/issue_comments_197473.json:
```json
{
    "body": "<a id='comment:48'></a>I had a look at the changes in Sage and in Pynac and both look fine (though I cannot completely ensure that some dark magic use of C++ features could still break the templating stuff).\n\nIt also compiles fine and passes long tests on a ppc system.\n\nThe only change in my branch is a typo correction.\n\n---\nNew commits:",
    "created_at": "2014-03-31T12:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197473",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>I had a look at the changes in Sage and in Pynac and both look fine (though I cannot completely ensure that some dark magic use of C++ features could still break the templating stuff).

It also compiles fine and passes long tests on a ppc system.

The only change in my branch is a typo correction.

---
New commits:



---

archive/issue_comments_197474.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-31T12:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197474",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_197475.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-31T14:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14780#issuecomment-197475",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_042399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-31T14:59:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14780",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14780#event-42399"
}
```
