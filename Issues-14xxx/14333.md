# Issue 14333: singular-3-1-6 is out

archive/issues_014129.json:
```json
{
    "body": "[http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html)\n\n---\n\nSage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as \"interface to iiMake_proc changed\" (in the \"Internal changes\" section) -- impacts sage.\nThe API for `iiMake_proc` changed from\n\n```\nsleftv * iiMake_proc(idhdl pn, package pack, sleftv* sl);\n```\nto\n\n```\nBOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);\n```\n\n---\n\nProbably also take care of #12442.\n\nUse git branch.\n\nUpstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2)\n\n**CC:**  jpflori\n\n**Keywords:** spkg, sd53\n\n**Branch:** [u/jpflori/ticket/14333](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/14333)\n\n**Commit:** [dd469911d19ed7080fecdb90f8773c487c744a9b](https://github.com/sagemath/sagetrac-mirror/commit/dd469911d19ed7080fecdb90f8773c487c744a9b)\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Burcin Erocal\n\n**Dependencies:** #13770\n\nIssue created by migration from https://trac.sagemath.org/ticket/14333\n\n",
    "closed_at": "2014-02-01T15:16:57Z",
    "created_at": "2013-03-22T07:54:49Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "singular-3-1-6 is out",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14333",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```
[http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html)

---

Sage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as "interface to iiMake_proc changed" (in the "Internal changes" section) -- impacts sage.
The API for `iiMake_proc` changed from

```
sleftv * iiMake_proc(idhdl pn, package pack, sleftv* sl);
```
to

```
BOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);
```

---

Probably also take care of #12442.

Use git branch.

Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2)

**CC:**  jpflori

**Keywords:** spkg, sd53

**Branch:** [u/jpflori/ticket/14333](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/14333)

**Commit:** [dd469911d19ed7080fecdb90f8773c487c744a9b](https://github.com/sagemath/sagetrac-mirror/commit/dd469911d19ed7080fecdb90f8773c487c744a9b)

**Reviewer:** Jean-Pierre Flori

**Author:** Burcin Erocal

**Dependencies:** #13770

Issue created by migration from https://trac.sagemath.org/ticket/14333





---

archive/issue_comments_212413.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-Sage should probably upgrade to this version ; it won't be painless though, since my experiments show that what in the changelog is lightly documented as \"interface to iiMake_proc changed\" (in the \"Internal changes\" section) -- impacts sage.\n+[http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html)\n+\n+---\n+\n+Sage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as \"interface to iiMake_proc changed\" (in the \"Internal changes\" section) -- impacts sage.\n \n To be more precise, in sage/libs/singular/function.pyx, there is the following code:\n \n``````\n",
    "created_at": "2013-03-22T13:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212413",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-Sage should probably upgrade to this version ; it won't be painless though, since my experiments show that what in the changelog is lightly documented as "interface to iiMake_proc changed" (in the "Internal changes" section) -- impacts sage.
+[http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-6.html)
+
+---
+
+Sage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as "interface to iiMake_proc changed" (in the "Internal changes" section) -- impacts sage.
 
 To be more precise, in sage/libs/singular/function.pyx, there is the following code:
 
``````




---

archive/issue_comments_212414.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"spkg\".",
    "created_at": "2013-03-22T13:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212414",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "" to "spkg".



---

archive/issue_comments_212415.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe patch from #14295 would have to get updated as well (as there's now one more instance of calling `floor()` with an `int`; they also added some *superfluous* casts, so the patch probably wouldn't apply anyway).",
    "created_at": "2013-03-22T13:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212415",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>
The patch from #14295 would have to get updated as well (as there's now one more instance of calling `floor()` with an `int`; they also added some *superfluous* casts, so the patch probably wouldn't apply anyway).



---

archive/issue_comments_212416.json:
```json
{
    "body": "<a id='comment:3'></a>\nWasn't that patch already updated before you submitted it on upstream's trac?",
    "created_at": "2013-03-22T14:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212416",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:3'></a>
Wasn't that patch already updated before you submitted it on upstream's trac?



---

archive/issue_comments_212417.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [Snark](#comment%3A3):\n> Wasn't that patch already updated before you submitted it on upstream's trac?\n\n\nPardon?\n\n(I haven't submitted *a patch* upstream, but only a [bug report](http://www.singular.uni-kl.de:8002/trac/ticket/479).  The patch from #14295 is of course against 3-1-5, our current version, not 3-1-6.)",
    "created_at": "2013-03-22T15:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212417",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
Replying to [Snark](#comment%3A3):
> Wasn't that patch already updated before you submitted it on upstream's trac?


Pardon?

(I haven't submitted *a patch* upstream, but only a [bug report](http://www.singular.uni-kl.de:8002/trac/ticket/479).  The patch from #14295 is of course against 3-1-5, our current version, not 3-1-6.)



---

archive/issue_comments_212418.json:
```json
{
    "body": "<a id='comment:5'></a>\nOh, sorry, indeed.",
    "created_at": "2013-03-22T15:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212418",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:5'></a>
Oh, sorry, indeed.



---

archive/issue_comments_212419.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'm modifying the ticket priority since it fixes some problems with multivariate polynomial factorization (#14658).",
    "created_at": "2013-05-29T10:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212419",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'></a>
I'm modifying the ticket priority since it fixes some problems with multivariate polynomial factorization (#14658).



---

archive/issue_comments_212420.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [burcin](#comment%3A7):\n> I'm modifying the ticket priority since it fixes some problems with multivariate polynomial factorization (#14658).\n\n\nUpgrading Singular is still (hopefully) an enhancement, not a defect.  (Unless you change the ticket's subject...)",
    "created_at": "2013-05-30T17:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212420",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Replying to [burcin](#comment%3A7):
> I'm modifying the ticket priority since it fixes some problems with multivariate polynomial factorization (#14658).


Upgrading Singular is still (hopefully) an enhancement, not a defect.  (Unless you change the ticket's subject...)



---

archive/issue_comments_212421.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,3 +17,8 @@\n ```\n BOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);\n ```\n+\n+---\n+\n+Probably also take care of #12442.\n+\n``````\n",
    "created_at": "2013-06-03T21:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212421",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,3 +17,8 @@
 ```
 BOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);
 ```
+
+---
+
+Probably also take care of #12442.
+
``````




---

archive/issue_comments_212422.json:
```json
{
    "body": "<a id='comment:10'></a>\nJust to make you aware of #14737.",
    "created_at": "2013-06-13T15:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212422",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Just to make you aware of #14737.



---

archive/issue_comments_212423.json:
```json
{
    "body": "<a id='comment:11'></a>\nIt would also be nice to backport the fix needed by NTL 6.0.0: see #14876 and https://groups.google.com/d/msg/libsingular-devel/aiMvEnN8qyg/cIFUsOXxK_MJ",
    "created_at": "2013-07-11T11:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212423",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
It would also be nice to backport the fix needed by NTL 6.0.0: see #14876 and https://groups.google.com/d/msg/libsingular-devel/aiMvEnN8qyg/cIFUsOXxK_MJ



---

archive/issue_events_047121.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47121"
}
```



---

archive/issue_comments_212424.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,16 +3,12 @@\n ---\n \n Sage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as \"interface to iiMake_proc changed\" (in the \"Internal changes\" section) -- impacts sage.\n-\n-To be more precise, in sage/libs/singular/function.pyx, there is the following code:\n+The API for `iiMake_proc` changed from\n \n ```\n-    cdef leftv* handle_call(self, Converter argument_list, ring *_ring=NULL):\n-        if _ring != currRing: rChangeCurrRing(_ring)\n-        return iiMake_proc(self.proc_idhdl, NULL, argument_list.args)\n+sleftv * iiMake_proc(idhdl pn, package pack, sleftv* sl);\n ```\n-\n-but the new api for iiMake_proc is:\n+to\n \n ```\n BOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);\n``````\n",
    "created_at": "2013-08-26T12:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212424",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,16 +3,12 @@
 ---
 
 Sage should probably upgrade to this version; it won't be painless though, since my experiments show that what in the changelog is lightly documented as "interface to iiMake_proc changed" (in the "Internal changes" section) -- impacts sage.
-
-To be more precise, in sage/libs/singular/function.pyx, there is the following code:
+The API for `iiMake_proc` changed from
 
 ```
-    cdef leftv* handle_call(self, Converter argument_list, ring *_ring=NULL):
-        if _ring != currRing: rChangeCurrRing(_ring)
-        return iiMake_proc(self.proc_idhdl, NULL, argument_list.args)
+sleftv * iiMake_proc(idhdl pn, package pack, sleftv* sl);
 ```
-
-but the new api for iiMake_proc is:
+to
 
 ```
 BOOLEAN iiMake_proc(idhdl pn, package pack, sleftv* sl);
``````




---

archive/issue_comments_212425.json:
```json
{
    "body": "<a id='comment:14'></a>\nI'm looking into this...",
    "created_at": "2013-08-26T20:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212425",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
I'm looking into this...



---

archive/issue_comments_212426.json:
```json
{
    "body": "**Dependencies:** #13770",
    "created_at": "2013-08-26T20:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212426",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #13770



---

archive/issue_comments_212427.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,3 +18,4 @@\n \n Probably also take care of #12442.\n \n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg)\n``````\n",
    "created_at": "2013-08-26T20:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212427",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,3 +18,4 @@
 
 Probably also take care of #12442.
 
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg)
``````




---

archive/attachments_019344.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14333-singular_function_interface.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14333/trac_14333-singular_function_interface.patch",
    "created_at": "2013-09-28T17:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_212428.json:
```json
{
    "body": "",
    "created_at": "2013-09-28T17:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212428",
    "user": "https://github.com/burcin"
}
```





---

archive/issue_comments_212429.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,4 +18,4 @@\n \n Probably also take care of #12442.\n \n-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg)\n+**spkg**: [http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg](http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg)\n``````\n",
    "created_at": "2013-09-28T17:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212429",
    "user": "https://github.com/burcin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,4 +18,4 @@
 
 Probably also take care of #12442.
 
-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-6.p0.spkg)
+**spkg**: [http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg](http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg)
``````




---

archive/issue_comments_212430.json:
```json
{
    "body": "**Author:** Burcin Erocal",
    "created_at": "2013-09-28T17:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212430",
    "user": "https://github.com/burcin"
}
```

**Author:** Burcin Erocal



---

archive/issue_comments_212431.json:
```json
{
    "body": "<a id='comment:16'></a>\nI uploaded a patch to take care of the API change.\n\nNew (preliminary) spkg adds two commits from singular git ([1](https://github.com/Singular/Sources/commit/ddb348e97a991972e5dfee690a66663ba0418f40) and [2](https://github.com/Singular/Sources/commit/561842a06ad4b44f3b85b28ac35e7946eaba9a30)) to add compatibility with NTL 6 (#14867) and some template instantiation errors from gcc 4.7. I didn't check if the NTL stuff works.",
    "created_at": "2013-09-28T17:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212431",
    "user": "https://github.com/burcin"
}
```

<a id='comment:16'></a>
I uploaded a patch to take care of the API change.

New (preliminary) spkg adds two commits from singular git ([1](https://github.com/Singular/Sources/commit/ddb348e97a991972e5dfee690a66663ba0418f40) and [2](https://github.com/Singular/Sources/commit/561842a06ad4b44f3b85b28ac35e7946eaba9a30)) to add compatibility with NTL 6 (#14867) and some template instantiation errors from gcc 4.7. I didn't check if the NTL stuff works.



---

archive/issue_comments_212432.json:
```json
{
    "body": "**Changing keywords** from \"spkg\" to \"spkg, sd53\".",
    "created_at": "2013-09-28T17:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212432",
    "user": "https://github.com/burcin"
}
```

**Changing keywords** from "spkg" to "spkg, sd53".



---

archive/issue_comments_212433.json:
```json
{
    "body": "<a id='comment:17'></a>\nIt seems some doc in the patches section needs updating, e.g. the line about cygwin-makefile should be deleted.\n\nWe could also trigger FLINT support on as Sage now ships FLINT 2.3.",
    "created_at": "2013-10-01T12:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212433",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:17'></a>
It seems some doc in the patches section needs updating, e.g. the line about cygwin-makefile should be deleted.

We could also trigger FLINT support on as Sage now ships FLINT 2.3.



---

archive/issue_events_047122.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2013-10-01T12:06:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47122"
}
```



---

archive/issue_events_047123.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2013-10-01T12:06:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47123"
}
```



---

archive/issue_comments_212434.json:
```json
{
    "body": "<a id='comment:18'></a>\nI was not able to compile this. After putting in http://www.singular.uni-kl.de:8002/trac/ticket/499 it compiled. However, then Sage crashes at boot and said ImportError: /home/jm58660/sage-5.12/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol:         \n_Z21nc_p_Minus_mm_Mult_qqP8spolyrecS0_S0_RiiS0_P9sip_sring",
    "created_at": "2013-10-09T10:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212434",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'></a>
I was not able to compile this. After putting in http://www.singular.uni-kl.de:8002/trac/ticket/499 it compiled. However, then Sage crashes at boot and said ImportError: /home/jm58660/sage-5.12/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol:         
_Z21nc_p_Minus_mm_Mult_qqP8spolyrecS0_S0_RiiS0_P9sip_sring



---

archive/issue_comments_212435.json:
```json
{
    "body": "<a id='comment:19'></a>\nFYI: There is still bug in Singular 3.1.6. At least this one sometimes (say once for every five tries) fails to factorize:\n\n```\n(-4*c*d + 8*d^2 + 12*f^2 + 8*a)*(8*b*c - 12*c + 4*f)*(3*a*c + 3*b*c - \n3*a*d + 33*d^2 - 3*f)*(-4*a*b - 4*b*d + 140*d^2 - 4*d*f - 4*a)*(4*a*b - \n8*b*d - 12*d^2 - 12*c*f - 8)*(-21*b*c - 3*b*d - 222*d^2 - 6*d*f - \n39*f)*(16*a*d + 128*b*d - 2)*(8*b*c + 4*c^2 - 4*b*f + 12*f)*(4*a*b + 4*b*c \n- 2*a*f + 6*f^2 - 2*b)*(-48*b^2 + 8*c*d + 144*c)*(-3*b^2 + 4*c^2 - b*d + \nf^2 + 3*a)*(4*c^2 + 4*b*d - 4*d^2 + 12*a*f)\n```\n\nI have already reported this, and version 4.0 should contain correction.",
    "created_at": "2013-10-30T12:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212435",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'></a>
FYI: There is still bug in Singular 3.1.6. At least this one sometimes (say once for every five tries) fails to factorize:

```
(-4*c*d + 8*d^2 + 12*f^2 + 8*a)*(8*b*c - 12*c + 4*f)*(3*a*c + 3*b*c - 
3*a*d + 33*d^2 - 3*f)*(-4*a*b - 4*b*d + 140*d^2 - 4*d*f - 4*a)*(4*a*b - 
8*b*d - 12*d^2 - 12*c*f - 8)*(-21*b*c - 3*b*d - 222*d^2 - 6*d*f - 
39*f)*(16*a*d + 128*b*d - 2)*(8*b*c + 4*c^2 - 4*b*f + 12*f)*(4*a*b + 4*b*c 
- 2*a*f + 6*f^2 - 2*b)*(-48*b^2 + 8*c*d + 144*c)*(-3*b^2 + 4*c^2 - b*d + 
f^2 + 3*a)*(4*c^2 + 4*b*d - 4*d^2 + 12*a*f)
```

I have already reported this, and version 4.0 should contain correction.



---

archive/issue_comments_212436.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [jmantysalo](#comment%3A19):\n\n> I have already reported this, and version 4.0 should contain correction.\n\n\nChanging our libSingular interface to be compatible with version 4.0 is a major effort. We should backport the fix or find out the corresponding patch in the Singular master branch and add it to the spkg.\n\nJori, I haven't seen any responses to the email you sent to `singular@mathematik.uni-kl.de`. Do you have the commit id for the fix by any chance?",
    "created_at": "2013-10-30T14:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212436",
    "user": "https://github.com/burcin"
}
```

<a id='comment:20'></a>
Replying to [jmantysalo](#comment%3A19):

> I have already reported this, and version 4.0 should contain correction.


Changing our libSingular interface to be compatible with version 4.0 is a major effort. We should backport the fix or find out the corresponding patch in the Singular master branch and add it to the spkg.

Jori, I haven't seen any responses to the email you sent to `singular@mathematik.uni-kl.de`. Do you have the commit id for the fix by any chance?



---

archive/issue_comments_212437.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [burcin](#comment%3A20):\n\n> Jori, I haven't seen any responses to the email you sent to `singular@mathematik.uni-kl.de`. Do you have the commit id for the fix by any chance?\n\n\nI have received answers from Martin Lee. Three weeks ago he wrote \"I hope that we will release a new version of Singular in the next weeks\". Unfortunately I don't have id nor code; I don't know if fix for this is released at all, Martin just said that this is easy to fix.",
    "created_at": "2013-10-30T15:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212437",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'></a>
Replying to [burcin](#comment%3A20):

> Jori, I haven't seen any responses to the email you sent to `singular@mathematik.uni-kl.de`. Do you have the commit id for the fix by any chance?


I have received answers from Martin Lee. Three weeks ago he wrote "I hope that we will release a new version of Singular in the next weeks". Unfortunately I don't have id nor code; I don't know if fix for this is released at all, Martin just said that this is easy to fix.



---

archive/issue_comments_212438.json:
```json
{
    "body": "<a id='comment:22'></a>\nChanging the libSingular interface might be a major effort, but backporting fixes from upstream is probably not a minor effort either... the best spkg is a \"./configure && make && make install\"!",
    "created_at": "2013-10-30T15:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212438",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:22'></a>
Changing the libSingular interface might be a major effort, but backporting fixes from upstream is probably not a minor effort either... the best spkg is a "./configure && make && make install"!



---

archive/issue_comments_212439.json:
```json
{
    "body": "<a id='comment:23'></a>\nIs there any reason not to update to 3-1-6 (and this ticket is still in the \"new\" status)?\nUnless 3-1-7 gets really released in the next few days?\nOk there are bugs in Singular but they were already here and should be dealt with other tickets.\nStucking with the current version we have prevent other packages to be updated (at least NTL).",
    "created_at": "2013-10-30T16:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212439",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:23'></a>
Is there any reason not to update to 3-1-6 (and this ticket is still in the "new" status)?
Unless 3-1-7 gets really released in the next few days?
Ok there are bugs in Singular but they were already here and should be dealt with other tickets.
Stucking with the current version we have prevent other packages to be updated (at least NTL).



---

archive/issue_comments_212440.json:
```json
{
    "body": "<a id='comment:24'></a>\nHum, ticket:14333#comment:18 might need some investigation/work...",
    "created_at": "2013-10-30T16:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212440",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>
Hum, ticket:14333#comment:18 might need some investigation/work...



---

archive/issue_comments_212441.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jpflori](#comment%3A24):\n> Hum, ticket:14333#comment:18 might need some investigation/work...\n\n\nThat is probably caused by running Sage without rebuilding the library. `sage -b` should fix it.",
    "created_at": "2013-10-30T16:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212441",
    "user": "https://github.com/burcin"
}
```

<a id='comment:25'></a>
Replying to [jpflori](#comment%3A24):
> Hum, ticket:14333#comment:18 might need some investigation/work...


That is probably caused by running Sage without rebuilding the library. `sage -b` should fix it.



---

archive/issue_comments_212442.json:
```json
{
    "body": "<a id='comment:26'></a>\nIt seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?",
    "created_at": "2013-12-23T16:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212442",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>
It seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?



---

archive/issue_comments_212443.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jpflori](#comment%3A26):\n> It seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?\n\n\nI am switching to `needs_review`. Singular 4-0-0 was released on Friday. I don't know if they plan to make bug-fix releases on the 3-1 series any more.\n\nAs I wrote before, it would be a major effort to port the libsingular interface to 4-0-0. I don't have time to do that in the near future.",
    "created_at": "2013-12-23T19:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212443",
    "user": "https://github.com/burcin"
}
```

<a id='comment:27'></a>
Replying to [jpflori](#comment%3A26):
> It seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?


I am switching to `needs_review`. Singular 4-0-0 was released on Friday. I don't know if they plan to make bug-fix releases on the 3-1 series any more.

As I wrote before, it would be a major effort to port the libsingular interface to 4-0-0. I don't have time to do that in the near future.



---

archive/issue_comments_212444.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-12-23T19:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212444",
    "user": "https://github.com/burcin"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_212445.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [burcin](#comment%3A27):\n> Replying to [jpflori](#comment%3A26):\n> > It seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?\n\n> \n> I am switching to `needs_review`. Singular 4-0-0 was released on Friday. I don't know if they plan to make bug-fix releases on the 3-1 series any more.\n> \n\nOk thanks for the details.\ni may be dumb but once more I did not find anything on the singular website (or at least the first thing that Google pointed at) about 4-0-0.\nNote that there is indeed something here:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/\nIs there another hidden channel where annoucements are made?\n> As I wrote before, it would be a major effort to port the libsingular interface to 4-0-0. I don't have time to do that in the near future.\n\nOk, so let's go for the 3-1-x upgrade.\nI'll port the latest spkg to the new layout.",
    "created_at": "2013-12-23T19:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212445",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>
Replying to [burcin](#comment%3A27):
> Replying to [jpflori](#comment%3A26):
> > It seems 3-1-7 is not out yet, so any other reason not to put that to needs_review Burcin?

> 
> I am switching to `needs_review`. Singular 4-0-0 was released on Friday. I don't know if they plan to make bug-fix releases on the 3-1 series any more.
> 

Ok thanks for the details.
i may be dumb but once more I did not find anything on the singular website (or at least the first thing that Google pointed at) about 4-0-0.
Note that there is indeed something here:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/
Is there another hidden channel where annoucements are made?
> As I wrote before, it would be a major effort to port the libsingular interface to 4-0-0. I don't have time to do that in the near future.

Ok, so let's go for the 3-1-x upgrade.
I'll port the latest spkg to the new layout.



---

archive/issue_comments_212446.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/14333](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/14333)",
    "created_at": "2013-12-23T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212446",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Branch:** [u/jpflori/ticket/14333](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/14333)



---

archive/issue_comments_212447.json:
```json
{
    "body": "<a id='comment:29'></a>\nI'm ok with Burcin changes: it's mostly patches cleanup, integration of a few backported patches and modification for the new API as documented in the ticket description.\nI also removed the description of old patches which was still there.\n\nIf someone could check I did not screw up the new layout transition I guess it can go in.\n(Note that the version should be 3-1-6 but the new scripts don't support it when extraction version number, so as was done for 3-1-5, I put 3.1.6 everywhere.)\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd46991\">dd46991</a></td><td><code>Remove description of deleted patches.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/536a31f\">536a31f</a></td><td><code>Update Singular function interface to API changes in Singular 3.1.6.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1753f06\">1753f06</a></td><td><code>Update Singular to version 3-1-6.</code></td></tr></table>\n",
    "created_at": "2013-12-23T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212447",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
I'm ok with Burcin changes: it's mostly patches cleanup, integration of a few backported patches and modification for the new API as documented in the ticket description.
I also removed the description of old patches which was still there.

If someone could check I did not screw up the new layout transition I guess it can go in.
(Note that the version should be 3-1-6 but the new scripts don't support it when extraction version number, so as was done for 3-1-5, I put 3.1.6 everywhere.)

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd46991">dd46991</a></td><td><code>Remove description of deleted patches.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/536a31f">536a31f</a></td><td><code>Update Singular function interface to API changes in Singular 3.1.6.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1753f06">1753f06</a></td><td><code>Update Singular to version 3-1-6.</code></td></tr></table>




---

archive/issue_comments_212448.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,4 +18,6 @@\n \n Probably also take care of #12442.\n \n-**spkg**: [http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg](http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg)\n+Use git branch.\n+\n+Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg)\n``````\n",
    "created_at": "2013-12-23T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212448",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,4 +18,6 @@
 
 Probably also take care of #12442.
 
-**spkg**: [http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg](http://sage.math.washington.edu/home/burcin/singular-3-1-6.p0.spkg)
+Use git branch.
+
+Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg)
``````




---

archive/issue_comments_212449.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2013-12-23T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212449",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_212450.json:
```json
{
    "body": "**Commit:** [dd469911d19ed7080fecdb90f8773c487c744a9b](https://github.com/sagemath/sagetrac-mirror/commit/dd469911d19ed7080fecdb90f8773c487c744a9b)",
    "created_at": "2013-12-23T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212450",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Commit:** [dd469911d19ed7080fecdb90f8773c487c744a9b](https://github.com/sagemath/sagetrac-mirror/commit/dd469911d19ed7080fecdb90f8773c487c744a9b)



---

archive/issue_comments_212451.json:
```json
{
    "body": "<a id='comment:30'></a>\nLooks OK to me, we should get it in.",
    "created_at": "2013-12-30T09:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212451",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'></a>
Looks OK to me, we should get it in.



---

archive/issue_comments_212452.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-12-30T09:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212452",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_212453.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,4 +20,4 @@\n \n Use git branch.\n \n-Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg)\n+Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2)\n``````\n",
    "created_at": "2013-12-31T12:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14333#issuecomment-212453",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,4 +20,4 @@
 
 Use git branch.
 
-Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.spkg)
+Upstream tarball at: [http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2](http://sage.math.washington.edu/home/jpflori/upstream/singular-3.1.6.tar.bz2)
``````




---

archive/issue_events_047124.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47124"
}
```



---

archive/issue_events_047125.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47125"
}
```



---

archive/issue_events_047126.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-01T15:16:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14333",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14333#event-47126"
}
```
