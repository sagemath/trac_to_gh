# Issue 14492: Modular group cohomology, version 2.1.4

archive/issues_014288.json:
```json
{
    "assignees": [],
    "body": "Because of several backward incompatible internal changes in Sage (e.g., removing SAGE_DATA and moving it to SAGE_SHARE), the current version of the optional group cohomology package `p_group_cohomology` did not work.\n\nMoreover, tmp_dir used to return a string, but now it also creates a directory; for this reason, many tests failed.\n\nAnd also some random generators (in GAP?) seem to have changed. For this reason, some ring presentations have changed (i.e., the rings are isomorphic, but a different presentation is obtained with an old or with a new Sage version). Hence, doctests needed to change.\n\nIn any case: The new group cohomology spkg copes with these changes. However, it will therefore *not* work with old Sage versions.\n\n__Further implementation changes__\n\n* Since this spkg *is* the upstream source, the source code is still contained in the mercurial repository. Change: Now, mercurial queues are used (this made it a bit easier for me to manage the changes while developing).\n* urllib2 is used, which to me seems to work a bit better than urllib.\n* The new version uses `os.path.join` and `os.path.split`, rather than string concatenation using a non-portable path separator `'/'`.\n* The old version had a bug related with pickling: In order to keep the data base created by a user separate from the data base that is shared by all users of an installation, soft links were used. But when one saves new data into a file that used to be the name of a soft link, one should unlink the link first. This is fixed in the new version.\n* The protocol output has changed. In a typical cohomology computation, several cohomology rings are involved (the ring to-be-computed, the cohomology ring of a Sylow subgroup, or of a maximal elementary abelian subgroup, etc). The new protocol output tells in which ring the current computation happens.\n\n__Change of algorithms__\n\nThe first change: If no new relation has been found in degree n-1, then a *complete* Gr\u00f6bner basis of the relation ideal is computed, even if a completeness criterion can not be applied yet. This simple change reduces the computation time for the mod-3 cohomology of J3 by several days.\n\nThe second change: By mistake, the old version would attempt to prove completeness with the Hilbert-Poincar\u00e9 criterion, even if the Symonds criterion has already shown that the ring is incomplete. Now, the Hilbert-Poincar\u00e9 criterion is only used if the Symonds criterion has not been conclusive.\n\nThe third change: In the old version, it was first tested that the current ring approximation contains parameters for the complete cohomology ring, and then such parameters have been constructed using the relations in the ring approximation. These relations can be rather complicated. Therefore, we now compute parameters via restriction to maximal elementary abelian subgroups. It is known that a set of elements of the ring approximation yields parameters for the cohomology ring, if and only if the cohomology of the maximal elementary abelian subgroups is finite over the restriction of these elements.\n\nHence, we can detect parameters even if the ring approximation is far from being complete, and we can compute in rings that are much easier to deal with. By consequence, it is now in most cases possible to prove completeness by the Symonds criterion, which relies on the explicit construction of parameters in small degrees. Our other criteria, which are able to use an *existence proof* for parameters of small degrees (without the need of their explicit construction) are of course still part of the package, but it became difficult to show examples in which they are actually used.\n\n__New features__\n\nThere is no substantially new functionality. However, depending on how fast the reviewing goes, I could imagine to soon add a method so that `gap(H)` returns an algebra in the GAP interface, isomorphic to a cohomology ring H.\n\n__Documentation__\n\nThe documentation can be built locally. It should look as [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)\n\n__SPKG__\n\n[p_group_cohomology-2.1.4.spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.4.spkg)\n  \n\nCC:  david.green@uni-jena.de @jhpalmieri\n\nKeywords: **group cohomology**\n\nReviewer: **Volker Braun, Jeroen Demeyer**\n\nAuthor: **Simon King**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14492_\n\n",
    "closed_at": "2013-05-19T12:07:52Z",
    "created_at": "2013-04-26T09:35:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Modular group cohomology, version 2.1.4",
    "type": "issue",
    "updated_at": "2013-05-19T12:07:52Z",
    "url": "https://github.com/sagemath/sage/issues/14492",
    "user": "https://github.com/simon-king-jena"
}
```
Because of several backward incompatible internal changes in Sage (e.g., removing SAGE_DATA and moving it to SAGE_SHARE), the current version of the optional group cohomology package `p_group_cohomology` did not work.

Moreover, tmp_dir used to return a string, but now it also creates a directory; for this reason, many tests failed.

And also some random generators (in GAP?) seem to have changed. For this reason, some ring presentations have changed (i.e., the rings are isomorphic, but a different presentation is obtained with an old or with a new Sage version). Hence, doctests needed to change.

In any case: The new group cohomology spkg copes with these changes. However, it will therefore *not* work with old Sage versions.

__Further implementation changes__

* Since this spkg *is* the upstream source, the source code is still contained in the mercurial repository. Change: Now, mercurial queues are used (this made it a bit easier for me to manage the changes while developing).
* urllib2 is used, which to me seems to work a bit better than urllib.
* The new version uses `os.path.join` and `os.path.split`, rather than string concatenation using a non-portable path separator `'/'`.
* The old version had a bug related with pickling: In order to keep the data base created by a user separate from the data base that is shared by all users of an installation, soft links were used. But when one saves new data into a file that used to be the name of a soft link, one should unlink the link first. This is fixed in the new version.
* The protocol output has changed. In a typical cohomology computation, several cohomology rings are involved (the ring to-be-computed, the cohomology ring of a Sylow subgroup, or of a maximal elementary abelian subgroup, etc). The new protocol output tells in which ring the current computation happens.

__Change of algorithms__

The first change: If no new relation has been found in degree n-1, then a *complete* Gröbner basis of the relation ideal is computed, even if a completeness criterion can not be applied yet. This simple change reduces the computation time for the mod-3 cohomology of J3 by several days.

The second change: By mistake, the old version would attempt to prove completeness with the Hilbert-Poincaré criterion, even if the Symonds criterion has already shown that the ring is incomplete. Now, the Hilbert-Poincaré criterion is only used if the Symonds criterion has not been conclusive.

The third change: In the old version, it was first tested that the current ring approximation contains parameters for the complete cohomology ring, and then such parameters have been constructed using the relations in the ring approximation. These relations can be rather complicated. Therefore, we now compute parameters via restriction to maximal elementary abelian subgroups. It is known that a set of elements of the ring approximation yields parameters for the cohomology ring, if and only if the cohomology of the maximal elementary abelian subgroups is finite over the restriction of these elements.

Hence, we can detect parameters even if the ring approximation is far from being complete, and we can compute in rings that are much easier to deal with. By consequence, it is now in most cases possible to prove completeness by the Symonds criterion, which relies on the explicit construction of parameters in small degrees. Our other criteria, which are able to use an *existence proof* for parameters of small degrees (without the need of their explicit construction) are of course still part of the package, but it became difficult to show examples in which they are actually used.

__New features__

There is no substantially new functionality. However, depending on how fast the reviewing goes, I could imagine to soon add a method so that `gap(H)` returns an algebra in the GAP interface, isomorphic to a cohomology ring H.

__Documentation__

The documentation can be built locally. It should look as [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)

__SPKG__

[p_group_cohomology-2.1.4.spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.4.spkg)
  

CC:  david.green@uni-jena.de @jhpalmieri

Keywords: **group cohomology**

Reviewer: **Volker Braun, Jeroen Demeyer**

Author: **Simon King**

_Issue created by migration from https://trac.sagemath.org/ticket/14492_





---

archive/issue_events_188127.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T09:35:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188127"
}
```



---

archive/issue_events_188128.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T09:35:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188128"
}
```



---

archive/issue_events_188129.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T09:35:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188129"
}
```



---

archive/issue_events_188130.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T09:35:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188130"
}
```



---

archive/issue_comments_177581.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI did not test the package on OS X yet, but only on my `openSuse` laptop.\n\nThe new package version should be able to compute the mod-3 cohomology of the third Janko group without manual intervention, but the verification will take a couple of more days.\n\nIn any case, it needs review!",
    "created_at": "2013-04-26T09:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177581",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">Comment 1</div>

I did not test the package on OS X yet, but only on my `openSuse` laptop.

The new package version should be able to compute the mod-3 cohomology of the third Janko group without manual intervention, but the verification will take a couple of more days.

In any case, it needs review!



---

archive/issue_events_188131.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T09:37:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188131"
}
```



---

archive/issue_comments_177582.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -28,6 +28,10 @@\n \n There is no substantially new functionality. However, depending on how fast the reviewing goes, I could imagine to soon add a method so that `gap(H)` returns an algebra in the GAP interface, isomorphic to a cohomology ring H.\n \n+__Documentation__\n+\n+The documentation can be built locally. It should look as [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)\n+\n __SPKG__\n \n [p_group_cohomology-2.1.4.spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.4.spkg)\n``````\n",
    "created_at": "2013-04-26T09:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177582",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -28,6 +28,10 @@
 
 There is no substantially new functionality. However, depending on how fast the reviewing goes, I could imagine to soon add a method so that `gap(H)` returns an algebra in the GAP interface, isomorphic to a cohomology ring H.
 
+__Documentation__
+
+The documentation can be built locally. It should look as [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)
+
 __SPKG__
 
 [p_group_cohomology-2.1.4.spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.4.spkg)
``````




---

archive/issue_comments_177583.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI get this error with the doctests:\n\n```\n$ sage -bt local/lib/python/site-packages/pGroupCohomology/\n...\nFile \"local/lib/python/site-packages/pGroupCohomology/factory.py\", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db\nFailed example:\n    CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: You requested a computation from scratch. Please remove .../8gp3\nGot:\n    <BLANKLINE>\n```\nMaybe something wrong with the temp directory? The actual functionality seems to work, though.",
    "created_at": "2013-04-26T13:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177583",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">Comment 3</div>

I get this error with the doctests:

```
$ sage -bt local/lib/python/site-packages/pGroupCohomology/
...
File "local/lib/python/site-packages/pGroupCohomology/factory.py", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db
Failed example:
    CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: You requested a computation from scratch. Please remove .../8gp3
Got:
    <BLANKLINE>
```
Maybe something wrong with the temp directory? The actual functionality seems to work, though.



---

archive/issue_comments_177584.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nHm. This should work. But there is something much more urgent concerning \"should work\":\n\nI tested the package on my laptop by running the test script explicitly, which worked. But When I run it as part of the installation procedure (i.e., by `export SAGE_CHECK=yes` before `sage -i ...`), I get a *total* failure! There was not even a single test that passed.\n\nReason:\n\n```\nsage-runtests: error: no such option: -o\nlist index out of range\nUsage: sage -t [options] filenames\n```\n\nI don't know where the \"-o\" comes from. To be investigated.",
    "created_at": "2013-04-26T14:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177584",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">Comment 4</div>

Hm. This should work. But there is something much more urgent concerning "should work":

I tested the package on my laptop by running the test script explicitly, which worked. But When I run it as part of the installation procedure (i.e., by `export SAGE_CHECK=yes` before `sage -i ...`), I get a *total* failure! There was not even a single test that passed.

Reason:

```
sage-runtests: error: no such option: -o
list index out of range
Usage: sage -t [options] filenames
```

I don't know where the "-o" comes from. To be investigated.



---

archive/issue_events_188132.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T14:01:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188132"
}
```



---

archive/issue_events_188133.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T14:01:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188133"
}
```



---

archive/issue_comments_177585.json:
```json
{
    "body": "Work Issues: **Fix test script**",
    "created_at": "2013-04-26T14:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177585",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Fix test script**



---

archive/issue_comments_177586.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@vbraun](#comment%3A3):\n> I get this error with the doctests:\n> \n> ```\n> $ sage -bt local/lib/python/site-packages/pGroupCohomology/\n> ...\n> File \"local/lib/python/site-packages/pGroupCohomology/factory.py\", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db\n> Failed example:\n>     CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     RuntimeError: You requested a computation from scratch. Please remove .../8gp3\n> Got:\n>     <BLANKLINE>\n> ```\n> Maybe something wrong with the temp directory? The actual functionality seems to work, though.\n\nAha. So, here I check against an error that is supposed to occur in certain settings. Hm.\n\nI don't understand why the result is just a blank line, not the error that is actually due in this case. The line preceding this test removes the existing cohomology ring from memory but not from disk; and a computation from scratch should then fail, because it does not like to find the data in a location in which new data are supposed to be written.",
    "created_at": "2013-04-26T14:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177586",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@vbraun](#comment%3A3):
> I get this error with the doctests:
> 
> ```
> $ sage -bt local/lib/python/site-packages/pGroupCohomology/
> ...
> File "local/lib/python/site-packages/pGroupCohomology/factory.py", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db
> Failed example:
>     CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)
> Expected:
>     Traceback (most recent call last):
>     ...
>     RuntimeError: You requested a computation from scratch. Please remove .../8gp3
> Got:
>     <BLANKLINE>
> ```
> Maybe something wrong with the temp directory? The actual functionality seems to work, though.

Aha. So, here I check against an error that is supposed to occur in certain settings. Hm.

I don't understand why the result is just a blank line, not the error that is actually due in this case. The line preceding this test removes the existing cohomology ring from memory but not from disk; and a computation from scratch should then fail, because it does not like to find the data in a location in which new data are supposed to be written.



---

archive/issue_comments_177587.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI think here is the problem:\n\n```\n    Res = os.popen('sage -t -optional -long '+f.name).read()\n```\nCould it be that in the most recent Sage version one should instead write `sage -t --optional --long`?",
    "created_at": "2013-04-26T14:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177587",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">Comment 6</div>

I think here is the problem:

```
    Res = os.popen('sage -t -optional -long '+f.name).read()
```
Could it be that in the most recent Sage version one should instead write `sage -t --optional --long`?



---

archive/issue_comments_177588.json:
```json
{
    "body": "Changed work issues from **Fix test script** to none",
    "created_at": "2013-04-26T14:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177588",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Fix test script** to none



---

archive/issue_events_188134.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T14:15:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188134"
}
```



---

archive/issue_events_188135.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-26T14:15:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188135"
}
```



---

archive/issue_comments_177589.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nOK, I have just posted a new spkg which uses double-minus for the command line options, and just started re-installation and test.",
    "created_at": "2013-04-26T14:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177589",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

OK, I have just posted a new spkg which uses double-minus for the command line options, and just started re-installation and test.



---

archive/issue_comments_177590.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nNo. Still *all* tests fail. This is with sage-5.9.rc0.",
    "created_at": "2013-04-26T14:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177590",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">Comment 8</div>

No. Still *all* tests fail. This is with sage-5.9.rc0.



---

archive/issue_comments_177591.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nThe failures that I get for *every* single test looks like this:\n\n```\npGroupCohomology.resolution.makeSpecialGroupData:\nRunning doctests with ID 2013-04-26-16-31-00-2eee1fc7.\nDoctesting 1 file.\nsage -t /home/simon/.sage/temp/linux-sqwp.site/11900/dir_vpH6Jb/file_5.py\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.0 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\n```\n\nSo, does this look like an error in the doctest framework? I can reproduce it when I directly run the spkg-check script under sage-5.9.rc0.\n\nI tried to run the tests verbously, but it didn't help, the tests won't even start, but no reason is given.",
    "created_at": "2013-04-26T16:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177591",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">Comment 9</div>

The failures that I get for *every* single test looks like this:

```
pGroupCohomology.resolution.makeSpecialGroupData:
Running doctests with ID 2013-04-26-16-31-00-2eee1fc7.
Doctesting 1 file.
sage -t /home/simon/.sage/temp/linux-sqwp.site/11900/dir_vpH6Jb/file_5.py
    [0 tests, 0.00 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.0 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds
```

So, does this look like an error in the doctest framework? I can reproduce it when I directly run the spkg-check script under sage-5.9.rc0.

I tried to run the tests verbously, but it didn't help, the tests won't even start, but no reason is given.



---

archive/issue_comments_177592.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThe tests of each function are written into a temporary file. One of the files looks like this:\n\n```\n# -*- coding: utf-8 -*-\nr\"\"\"\n        Return a hash value of self\n\n        TESTS:\n\n        The example produces files. For safety reasons, we choose files\n        in a temporary directory; it will be removed as soon as Sage is quit::\n\n            sage: tmp_root = tmp_dir()\n            sage: from pGroupCohomology import CohomologyRing\n            sage: CohomologyRing.set_user_db(tmp_root)\n            sage: H = CohomologyRing(8,3)\n            sage: H.make()\n            sage: C = H.2\n            sage: hash(C)==hash(copy(C))   # indirect doctest\n            True\n            sage: hash(C)==hash(loads(dumps(C)))\n            True\n            sage: D = {C:1, C^2:2}\n            sage: D[copy(C)]\n            1\n            sage: D[copy(C)*C]\n            2\n\n\"\"\"\n```\nwithout a line break at the end. I am testing now if the missing line break is to blame.",
    "created_at": "2013-04-26T17:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177592",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">Comment 10</div>

The tests of each function are written into a temporary file. One of the files looks like this:

```
# -*- coding: utf-8 -*-
r"""
        Return a hash value of self

        TESTS:

        The example produces files. For safety reasons, we choose files
        in a temporary directory; it will be removed as soon as Sage is quit::

            sage: tmp_root = tmp_dir()
            sage: from pGroupCohomology import CohomologyRing
            sage: CohomologyRing.set_user_db(tmp_root)
            sage: H = CohomologyRing(8,3)
            sage: H.make()
            sage: C = H.2
            sage: hash(C)==hash(copy(C))   # indirect doctest
            True
            sage: hash(C)==hash(loads(dumps(C)))
            True
            sage: D = {C:1, C^2:2}
            sage: D[copy(C)]
            1
            sage: D[copy(C)*C]
            2

"""
```
without a line break at the end. I am testing now if the missing line break is to blame.



---

archive/issue_comments_177593.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nNo, adding the line break did change nothing.",
    "created_at": "2013-04-26T17:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177593",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

No, adding the line break did change nothing.



---

archive/issue_comments_177594.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nOne could say that I was misusing the \"# optional\" tag: The tests were supposed to be part of the test suite, but the tag was only in order to tell the *user* (not to tell the *test bot*): \"If you don't have internet access then this test is supposed to fail; don't worry\".\n\nIn the new version, that I just put on-line, the tag is replaced by \"# needs internet access\", which is informative to the user in case of an error, but will not interfere with the test framework.",
    "created_at": "2013-04-26T19:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177594",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">Comment 12</div>

One could say that I was misusing the "# optional" tag: The tests were supposed to be part of the test suite, but the tag was only in order to tell the *user* (not to tell the *test bot*): "If you don't have internet access then this test is supposed to fail; don't worry".

In the new version, that I just put on-line, the tag is replaced by "# needs internet access", which is informative to the user in case of an error, but will not interfere with the test framework.



---

archive/issue_comments_177595.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAnd I forgot to mention one thing: In contrast to previous versions of the spkg, it is now not required to have internet access for running the test suite. The only exceptions are the tests of two methods whose actual purpose is internet access.",
    "created_at": "2013-04-26T19:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177595",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">Comment 13</div>

And I forgot to mention one thing: In contrast to previous versions of the spkg, it is now not required to have internet access for running the test suite. The only exceptions are the tests of two methods whose actual purpose is internet access.



---

archive/issue_comments_177596.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nIn spkg-check, `SAGE_NUMBER_THREADS` should be changed to `SAGE_NUM_THREADS`.",
    "created_at": "2013-04-26T20:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177596",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">Comment 14</div>

In spkg-check, `SAGE_NUMBER_THREADS` should be changed to `SAGE_NUM_THREADS`.



---

archive/issue_comments_177597.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@jhpalmieri](#comment%3A14):\n> In spkg-check, `SAGE_NUMBER_THREADS` should be changed to `SAGE_NUM_THREADS`.\n\nThank you for spotting this! I have already been wondering why setting `MAKE=\"make -j4\"` had no effect on the number of parallel threads in the tests.",
    "created_at": "2013-04-26T20:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177597",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@jhpalmieri](#comment%3A14):
> In spkg-check, `SAGE_NUMBER_THREADS` should be changed to `SAGE_NUM_THREADS`.

Thank you for spotting this! I have already been wondering why setting `MAKE="make -j4"` had no effect on the number of parallel threads in the tests.



---

archive/issue_comments_177598.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nOK, fixed, and setting `MAKE=\"make -j2\"` is now enough to start tests in parallel.",
    "created_at": "2013-04-26T20:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177598",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">Comment 16</div>

OK, fixed, and setting `MAKE="make -j2"` is now enough to start tests in parallel.



---

archive/issue_comments_177599.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOn my OS X 10.8 machine, all tests passed!",
    "created_at": "2013-04-26T22:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177599",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">Comment 17</div>

On my OS X 10.8 machine, all tests passed!



---

archive/issue_comments_177600.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@vbraun](#comment%3A3):\n> I get this error with the doctests:\n> \n> ```\n> $ sage -bt local/lib/python/site-packages/pGroupCohomology/\n> ...\n> File \"local/lib/python/site-packages/pGroupCohomology/factory.py\", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db\n> Failed example:\n>     CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     RuntimeError: You requested a computation from scratch. Please remove .../8gp3\n> Got:\n>     <BLANKLINE>\n> ```\n\nIs it reproducible?",
    "created_at": "2013-04-27T07:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177600",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@vbraun](#comment%3A3):
> I get this error with the doctests:
> 
> ```
> $ sage -bt local/lib/python/site-packages/pGroupCohomology/
> ...
> File "local/lib/python/site-packages/pGroupCohomology/factory.py", line 897, in pGroupCohomology.factory.CohomologyRingFactory._get_p_group_from_cache_or_db
> Failed example:
>     CohomologyRing._get_p_group_from_cache_or_db('8gp3',(8,3), from_scratch=True)
> Expected:
>     Traceback (most recent call last):
>     ...
>     RuntimeError: You requested a computation from scratch. Please remove .../8gp3
> Got:
>     <BLANKLINE>
> ```

Is it reproducible?



---

archive/issue_comments_177601.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@jhpalmieri](#comment%3A17):\n> On my OS X 10.8 machine, all tests passed!\n\nAnd on my `openSuse` laptop, all tests passed both with sage-5.8 and sage-5.9.rc0.",
    "created_at": "2013-04-27T07:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177601",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@jhpalmieri](#comment%3A17):
> On my OS X 10.8 machine, all tests passed!

And on my `openSuse` laptop, all tests passed both with sage-5.8 and sage-5.9.rc0.



---

archive/issue_comments_177602.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nA question: At some point I had a syntax error in the code. Of course, the code did not compile---but `sage -i ...` still reported a successful installation. So, I could imagine that my spkg-install script is not correctly propagating the error.\n\nCould you have a look if spkg-install is doing something wrong?",
    "created_at": "2013-04-27T07:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177602",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">Comment 20</div>

A question: At some point I had a syntax error in the code. Of course, the code did not compile---but `sage -i ...` still reported a successful installation. So, I could imagine that my spkg-install script is not correctly propagating the error.

Could you have a look if spkg-install is doing something wrong?



---

archive/issue_comments_177603.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI still get the `from_scratch=True` error, and its completely reproducible. Installation works fine (and the doctests that actually perform computations seem to be working, too). I'll attach a more complete log.",
    "created_at": "2013-04-27T09:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177603",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">Comment 21</div>

I still get the `from_scratch=True` error, and its completely reproducible. Installation works fine (and the doctests that actually perform computations seem to be working, too). I'll attach a more complete log.



---

archive/issue_comments_177604.json:
```json
{
    "body": "Attachment: **[factory-doctests.txt](https://github.com/sagemath/sage/files/ticket14492/factory-doctests.txt)**\n\nDoctest output",
    "created_at": "2013-04-27T09:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177604",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[factory-doctests.txt](https://github.com/sagemath/sage/files/ticket14492/factory-doctests.txt)**

Doctest output



---

archive/issue_comments_177605.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@vbraun](#comment%3A21):\n> I still get the `from_scratch=True` error, and its completely reproducible. Installation works fine (and the doctests that actually perform computations seem to be working, too). I'll attach a more complete log.\n\nAha, now I think I understand what is happening!\n\nThe output looks as if you did not run the test suite (by `export SAGE_CHECK=yes` before installing the package), but you did run `sage -t` on the source files (or on their copies in local/lib/python/site-packages).\n\nThe test suite considers each doc string separately. Hence, it recursively finds out which modules, classes functions and methods are defined, extracts the doc of one item after the other, each time writing one doc string into a temporary file, and running sage -t on this temporary file. But it is *not* supposed to run sage -t on, say, `pGroupcCohomology/factory.py`.\n\nReason: The doc tests are supposed to demonstrate how the different sub-problems of cohomology computations are done. Hence, in the vast majority of cases, we want a computation from scratch. But if the first test puts a result into the cache, then the second test might be disturbed.\n\nExample: One test creates the computational set-up for the cohomology of the `SmallGroup(8,3)` (that's the dihedral group) from scratch, but does *not* complete the computation. This test will create an item in the cache that is only computed out to degree zero. Another test might then demonstrate that some *completely* computed cohomology rings can be found in the data base, accessible by, say, `CohomologyRing(8,3)`.\n\nHowever, the factory `CohomologyRing` would first try to find the result in the cache, before accessing the data base on disk or in internet. Hence, it will return the degree-zero approximation of the ring. This explains why you got\n\n```\n45\t    print H0\n46\tExpected:\n47\t    Cohomology ring of Dihedral group of order 8 with coefficients in GF(2)\n48\t    <BLANKLINE>\n49\t    Computation complete\n50\t    Minimal list of generators:\n51\t    [c_2_2: 2-Cocycle in H^*(D8; GF(2)),\n52\t     b_1_0: 1-Cocycle in H^*(D8; GF(2)),\n53\t     b_1_1: 1-Cocycle in H^*(D8; GF(2))]\n54\t    Minimal list of algebraic relations:\n55\t    [b_1_0*b_1_1]\n56\tGot:\n57\t    <BLANKLINE>\n58\t    Cohomology ring of Dihedral group of order 8 with coefficients in GF(2)\n59\t    <BLANKLINE>\n60\t    Computed up to degree 0\n61\t    Minimal list of generators:\n62\t    []\n63\t    Minimal list of algebraic relations:\n64\t    []\n65\t    <BLANKLINE>\n66\t\n```",
    "created_at": "2013-04-27T10:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177605",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@vbraun](#comment%3A21):
> I still get the `from_scratch=True` error, and its completely reproducible. Installation works fine (and the doctests that actually perform computations seem to be working, too). I'll attach a more complete log.

Aha, now I think I understand what is happening!

The output looks as if you did not run the test suite (by `export SAGE_CHECK=yes` before installing the package), but you did run `sage -t` on the source files (or on their copies in local/lib/python/site-packages).

The test suite considers each doc string separately. Hence, it recursively finds out which modules, classes functions and methods are defined, extracts the doc of one item after the other, each time writing one doc string into a temporary file, and running sage -t on this temporary file. But it is *not* supposed to run sage -t on, say, `pGroupcCohomology/factory.py`.

Reason: The doc tests are supposed to demonstrate how the different sub-problems of cohomology computations are done. Hence, in the vast majority of cases, we want a computation from scratch. But if the first test puts a result into the cache, then the second test might be disturbed.

Example: One test creates the computational set-up for the cohomology of the `SmallGroup(8,3)` (that's the dihedral group) from scratch, but does *not* complete the computation. This test will create an item in the cache that is only computed out to degree zero. Another test might then demonstrate that some *completely* computed cohomology rings can be found in the data base, accessible by, say, `CohomologyRing(8,3)`.

However, the factory `CohomologyRing` would first try to find the result in the cache, before accessing the data base on disk or in internet. Hence, it will return the degree-zero approximation of the ring. This explains why you got

```
45	    print H0
46	Expected:
47	    Cohomology ring of Dihedral group of order 8 with coefficients in GF(2)
48	    <BLANKLINE>
49	    Computation complete
50	    Minimal list of generators:
51	    [c_2_2: 2-Cocycle in H^*(D8; GF(2)),
52	     b_1_0: 1-Cocycle in H^*(D8; GF(2)),
53	     b_1_1: 1-Cocycle in H^*(D8; GF(2))]
54	    Minimal list of algebraic relations:
55	    [b_1_0*b_1_1]
56	Got:
57	    <BLANKLINE>
58	    Cohomology ring of Dihedral group of order 8 with coefficients in GF(2)
59	    <BLANKLINE>
60	    Computed up to degree 0
61	    Minimal list of generators:
62	    []
63	    Minimal list of algebraic relations:
64	    []
65	    <BLANKLINE>
66	
```



---

archive/issue_comments_177606.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@simon-king-jena](#comment%3A22):\n> The test suite considers each doc string separately. Hence, it recursively finds out which modules, classes functions and methods are defined, extracts the doc of one item after the other, each time writing one doc string into a temporary file, and running sage -t on this temporary file.\n\nPS: And it would complain if a function or a method has no doc string or no test in the doc string or a test that does not contain the name of the function/method.",
    "created_at": "2013-04-27T10:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177606",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@simon-king-jena](#comment%3A22):
> The test suite considers each doc string separately. Hence, it recursively finds out which modules, classes functions and methods are defined, extracts the doc of one item after the other, each time writing one doc string into a temporary file, and running sage -t on this temporary file.

PS: And it would complain if a function or a method has no doc string or no test in the doc string or a test that does not contain the name of the function/method.



---

archive/issue_comments_177607.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2013-04-27T11:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177607",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_188136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-04-27T11:20:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188136"
}
```



---

archive/issue_events_188137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-04-27T11:20:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188137"
}
```



---

archive/issue_comments_177608.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nFair enough. If you want to merge this into the sage library at one point then the doctests will have to run independently, but I guess that'll still take some time.",
    "created_at": "2013-04-27T11:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177608",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>

Fair enough. If you want to merge this into the sage library at one point then the doctests will have to run independently, but I guess that'll still take some time.



---

archive/issue_comments_177609.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@vbraun](#comment%3A24):\n> Fair enough. If you want to merge this into the sage library at one point then the doctests will have to run independently, but I guess that'll still take some time.\n\nIt can not be part of the sage library, since it strongly depends on the Small Groups library, which can only be in an optional package, since it is not GPL.\n\nBut before you set it to positive review: Could you see if my spkg-install script is correct? As I have stated above, it happened to me (in preliminary versions) that there was a compilation error, but the installation script happily unpacked the data base and finished by claiming that installation of the package was successful.",
    "created_at": "2013-04-27T11:59:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177609",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@vbraun](#comment%3A24):
> Fair enough. If you want to merge this into the sage library at one point then the doctests will have to run independently, but I guess that'll still take some time.

It can not be part of the sage library, since it strongly depends on the Small Groups library, which can only be in an optional package, since it is not GPL.

But before you set it to positive review: Could you see if my spkg-install script is correct? As I have stated above, it happened to me (in preliminary versions) that there was a compilation error, but the installation script happily unpacked the data base and finished by claiming that installation of the package was successful.



---

archive/issue_comments_177610.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nDo you actually need anything fancy from the SGL or just the list of the first N groups? I'm getting more annoyed about this stupid licensing issue, so I'll probably write a GPL replacement at one point ;-)\n\nThe `spkg_install` looks good to me.",
    "created_at": "2013-04-28T11:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177610",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">Comment 26</div>

Do you actually need anything fancy from the SGL or just the list of the first N groups? I'm getting more annoyed about this stupid licensing issue, so I'll probably write a GPL replacement at one point ;-)

The `spkg_install` looks good to me.



---

archive/issue_comments_177611.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@vbraun](#comment%3A26):\n> Do you actually need anything fancy from the SGL or just the list of the first N groups?\n\nI guess the main reason for using it is: Get a concise identifier of a group with a fixed set of generators.\n\nIf I want to know the cohomology of a group G, then I need to consider restrictions to \"interesting\" subgroups: Maximal p-elementary abelian subgroups; Sylow p-subgroup; normalizer in G of the centre of a Sylow p-subgroup; intersection of two conjugates of a Sylow p-subgroup; ...\n\nIf I know the small groups library address of the interesting group, then I can easily look up in my data base whether the cohomology of this particular group has already been computed. Otherwise, I needed to compute the cohomology of multiple isomorphic copies of one group repeatedly.\n\nMathematically, it would of course be possible to lift the dependency on the small groups library. In fact, if the address in the small groups library can not be found, then a \"descriptive\" name (that describes the construction of this group) is chosen to access the data base. So, in these cases, my code is independent of the small groups libary.\n\nMaking it totally independent would require...\n* to rewrite a couple of constructions; this would, in particular, be needed if the use of the small groups library should become optional.\n* to totally rewrite the code that accesses my data bases; but actually I would like to use a \"real\" data base (sql?), so that rewriting will sooner or later be needed anyway.\n* to rewrite almost *all* doctests. Since all functions and methods are tested, this would be a long and very annoying task.\n\n> The `spkg_install` looks good to me.\n\nSo, there is no reason why I saw it happily continue to install the package after a compilation error? Strange.",
    "created_at": "2013-04-28T12:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177611",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@vbraun](#comment%3A26):
> Do you actually need anything fancy from the SGL or just the list of the first N groups?

I guess the main reason for using it is: Get a concise identifier of a group with a fixed set of generators.

If I want to know the cohomology of a group G, then I need to consider restrictions to "interesting" subgroups: Maximal p-elementary abelian subgroups; Sylow p-subgroup; normalizer in G of the centre of a Sylow p-subgroup; intersection of two conjugates of a Sylow p-subgroup; ...

If I know the small groups library address of the interesting group, then I can easily look up in my data base whether the cohomology of this particular group has already been computed. Otherwise, I needed to compute the cohomology of multiple isomorphic copies of one group repeatedly.

Mathematically, it would of course be possible to lift the dependency on the small groups library. In fact, if the address in the small groups library can not be found, then a "descriptive" name (that describes the construction of this group) is chosen to access the data base. So, in these cases, my code is independent of the small groups libary.

Making it totally independent would require...
* to rewrite a couple of constructions; this would, in particular, be needed if the use of the small groups library should become optional.
* to totally rewrite the code that accesses my data bases; but actually I would like to use a "real" data base (sql?), so that rewriting will sooner or later be needed anyway.
* to rewrite almost *all* doctests. Since all functions and methods are tested, this would be a long and very annoying task.

> The `spkg_install` looks good to me.

So, there is no reason why I saw it happily continue to install the package after a compilation error? Strange.



---

archive/issue_comments_177612.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nThe `spkg_install` seems to handle errors. If you had the log then we could investigate further ;-)",
    "created_at": "2013-04-28T14:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177612",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">Comment 28</div>

The `spkg_install` seems to handle errors. If you had the log then we could investigate further ;-)



---

archive/issue_comments_177613.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nFor the following test, I added the command \"bla\" into cohomology.pyx, right after \"import os\". The attempt to install the resulting spkg was reported to be successful, even though of course there is an error:\n\n```\n...\ngcc -pthread -shared -L/home/simon/SAGE/prerelease/sage-5.9.rc0/local/lib build/temp.linux-x86_64-2.7/pGroupCohomology/resolution.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/aufloesung.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/aufnahme.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/djgerr.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/fileplus.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/nBuchberger.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/pgroup.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/pincl.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/slice.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/urbild.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/uvr.o -L/home/simon/SAGE/prerelease/sage-5.9.rc0/local/lib -lmtx -lcsage -lpython2.7 -o build/lib.linux-x86_64-2.7/pGroupCohomology/resolution.so\ncythoning pGroupCohomology/cohomology.pyx to pGroupCohomology/cohomology.c\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n\n###########################################################\n## Imports\n\nimport os\nbla\n  ^\n------------------------------------------------------------\n\npGroupCohomology/cohomology.pyx:44:3: undeclared name not builtin: bla\nbuilding 'pGroupCohomology.cohomology' extension\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/simon/SAGE/prerelease/sage-5.9.rc0/local/include/csage -I/home/simon/SAGE/prerelease/sage-5.9.rc0/devel/sage -Imtx2.2.4/src -IpGroupCohomology/c_sources -IpGroupCohomology -I/home/simon/SAGE/prerelease/sage-5.9.rc0/local/include/python2.7 -c pGroupCohomology/cohomology.c -o build/temp.linux-x86_64-2.7/pGroupCohomology/cohomology.o\npGroupCohomology/cohomology.c:1:2: error: #error Do not use this file, it is the result of a failed Cython compilation.\nerror: command 'gcc' failed with exit status 1\n\nreal    0m51.516s\nuser    0m18.015s\nsys     0m3.186s\nSuccessfully installed p_group_cohomology-2.1.4\nDeleting temporary build directory\n```\nSo, perhaps this is not a problem of my script but a problem of the script of Sage that is called by \"sage -i\".",
    "created_at": "2013-04-28T16:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177613",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">Comment 29</div>

For the following test, I added the command "bla" into cohomology.pyx, right after "import os". The attempt to install the resulting spkg was reported to be successful, even though of course there is an error:

```
...
gcc -pthread -shared -L/home/simon/SAGE/prerelease/sage-5.9.rc0/local/lib build/temp.linux-x86_64-2.7/pGroupCohomology/resolution.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/aufloesung.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/aufnahme.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/djgerr.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/fileplus.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/nBuchberger.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/pgroup.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/pincl.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/slice.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/urbild.o build/temp.linux-x86_64-2.7/pGroupCohomology/c_sources/uvr.o -L/home/simon/SAGE/prerelease/sage-5.9.rc0/local/lib -lmtx -lcsage -lpython2.7 -o build/lib.linux-x86_64-2.7/pGroupCohomology/resolution.so
cythoning pGroupCohomology/cohomology.pyx to pGroupCohomology/cohomology.c

Error compiling Cython file:
------------------------------------------------------------
...

###########################################################
## Imports

import os
bla
  ^
------------------------------------------------------------

pGroupCohomology/cohomology.pyx:44:3: undeclared name not builtin: bla
building 'pGroupCohomology.cohomology' extension
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/simon/SAGE/prerelease/sage-5.9.rc0/local/include/csage -I/home/simon/SAGE/prerelease/sage-5.9.rc0/devel/sage -Imtx2.2.4/src -IpGroupCohomology/c_sources -IpGroupCohomology -I/home/simon/SAGE/prerelease/sage-5.9.rc0/local/include/python2.7 -c pGroupCohomology/cohomology.c -o build/temp.linux-x86_64-2.7/pGroupCohomology/cohomology.o
pGroupCohomology/cohomology.c:1:2: error: #error Do not use this file, it is the result of a failed Cython compilation.
error: command 'gcc' failed with exit status 1

real    0m51.516s
user    0m18.015s
sys     0m3.186s
Successfully installed p_group_cohomology-2.1.4
Deleting temporary build directory
```
So, perhaps this is not a problem of my script but a problem of the script of Sage that is called by "sage -i".



---

archive/issue_comments_177614.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nInstead of setting `$MAKE` to `make` (which you should **never** do), build with `$MAKE -j1`:\n\n```\n$MAKE -j1\nif [ $? -ne 0 ]; then\n   echo \"Error building pGroupCohomology.\"\n   exit 1\nfi\n\n$MAKE -j1 install\nif [ $? -ne 0 ]; then\n   echo \"Error installing pGroupCohomology.\"\n   exit 1\nfi\n```",
    "created_at": "2013-04-29T11:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177614",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

Instead of setting `$MAKE` to `make` (which you should **never** do), build with `$MAKE -j1`:

```
$MAKE -j1
if [ $? -ne 0 ]; then
   echo "Error building pGroupCohomology."
   exit 1
fi

$MAKE -j1 install
if [ $? -ne 0 ]; then
   echo "Error installing pGroupCohomology."
   exit 1
fi
```



---

archive/issue_comments_177615.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nThere is no error check for\n\n```\npython setup.py install\n```\nPerhaps this is why success is reported if Cython fails?",
    "created_at": "2013-04-29T11:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177615",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

There is no error check for

```
python setup.py install
```
Perhaps this is why success is reported if Cython fails?



---

archive/issue_comments_177616.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@vbraun](#comment%3A28):\n> If you had the log then we could investigate further ;-) \n\nStill no full log has been reported...",
    "created_at": "2013-04-29T12:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@vbraun](#comment%3A28):
> If you had the log then we could investigate further ;-) 

Still no full log has been reported...



---

archive/issue_comments_177617.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nAlso: please try with sage-5.9.rc0 or later, since that includes a new version of Cython (#14452).",
    "created_at": "2013-04-29T12:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177617",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

Also: please try with sage-5.9.rc0 or later, since that includes a new version of Cython (#14452).



---

archive/issue_comments_177618.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> Replying to [@vbraun](#comment%3A28):\n> > If you had the log then we could investigate further ;-) \n\n> Still no full log has been reported...\n\nThe part that failed has been reported.",
    "created_at": "2013-04-29T12:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177618",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jdemeyer](#comment%3A32):
> Replying to [@vbraun](#comment%3A28):
> > If you had the log then we could investigate further ;-) 

> Still no full log has been reported...

The part that failed has been reported.



---

archive/issue_comments_177619.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@jdemeyer](#comment%3A33):\n> Also: please try with sage-5.9.rc0 or later, since that includes a new version of Cython (#14452).\n\nIt was with sage-5.9.rc0",
    "created_at": "2013-04-29T12:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177619",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@jdemeyer](#comment%3A33):
> Also: please try with sage-5.9.rc0 or later, since that includes a new version of Cython (#14452).

It was with sage-5.9.rc0



---

archive/issue_comments_177620.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nReplying to [@simon-king-jena](#comment%3A34):\n> The part that failed has been reported.\n\nI agree, but never underestimate the amount of useful information thrown away when posting only part of a log file.",
    "created_at": "2013-04-29T12:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177620",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

Replying to [@simon-king-jena](#comment%3A34):
> The part that failed has been reported.

I agree, but never underestimate the amount of useful information thrown away when posting only part of a log file.



---

archive/issue_comments_177621.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> There is no error check for\n> \n> ```\n> python setup.py install\n> ```\n> Perhaps this is why success is reported if Cython fails?\n\nI thought this could be it. However, if I put the following into an spkg, then the error is correctly reported, even though the exit code of setup.py is not checked:\n\nspkg-install:\n\n```\n#!/usr/bin/env bash\n\nif [ \"$SAGE_LOCAL\" = \"\" ]; then\n   echo \"SAGE_LOCAL undefined ... exiting\";\n   echo \"Maybe run 'sage -sh'?\"\n   exit 1\nfi\n\n# test whether we are on an intel mac\nif [ `uname` = \"Darwin\" -a \"$SAGE64\" = \"yes\" ]; then\n   echo \"64 bit MacIntel\"\n   DARWIN64=-m64; export DARWIN64;\nelse\n   DARWIN64=\"\"; export DARWIN64;\nfi\n\ncd src\n\nDISTUTILS_DEBUG='debug'\npython setup.py install\n```\nsrc/setup.py\n\n```python\nfrom distutils.core import setup\nfrom distutils.extension import Extension\nfrom Cython.Distutils import build_ext\n\nimport shutil\nimport os\nimport subprocess\n\nsetup(\n  name = \"bad\",\n  version = \"0.0\",\n  author = \"Simon A. King\",\n  author_email = \"simon.king@uni-jena.de\",\n  maintainer = \"Simon A. King\", \n  maintainer_email = \"simon.king@uni-jena.de\",\n  description = \"A bad example\",\n  ext_modules=[ \n    Extension(\"bad\",\n              sources = [\"bad.pyx\"],\n              ),\n  ],\n  cmdclass = {'build_ext': build_ext}\n)\n```\nsrc/bad.pyx\n\n```python\nimport os\nbad\n```\n\nIf I remove the last line of src/bad.pyx, then the mock package does install, and I can then do\n\n```\nsage: from bad import os\n```",
    "created_at": "2013-04-29T12:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177621",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@jdemeyer](#comment%3A31):
> There is no error check for
> 
> ```
> python setup.py install
> ```
> Perhaps this is why success is reported if Cython fails?

I thought this could be it. However, if I put the following into an spkg, then the error is correctly reported, even though the exit code of setup.py is not checked:

spkg-install:

```
#!/usr/bin/env bash

if [ "$SAGE_LOCAL" = "" ]; then
   echo "SAGE_LOCAL undefined ... exiting";
   echo "Maybe run 'sage -sh'?"
   exit 1
fi

# test whether we are on an intel mac
if [ `uname` = "Darwin" -a "$SAGE64" = "yes" ]; then
   echo "64 bit MacIntel"
   DARWIN64=-m64; export DARWIN64;
else
   DARWIN64=""; export DARWIN64;
fi

cd src

DISTUTILS_DEBUG='debug'
python setup.py install
```
src/setup.py

```python
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

import shutil
import os
import subprocess

setup(
  name = "bad",
  version = "0.0",
  author = "Simon A. King",
  author_email = "simon.king@uni-jena.de",
  maintainer = "Simon A. King", 
  maintainer_email = "simon.king@uni-jena.de",
  description = "A bad example",
  ext_modules=[ 
    Extension("bad",
              sources = ["bad.pyx"],
              ),
  ],
  cmdclass = {'build_ext': build_ext}
)
```
src/bad.pyx

```python
import os
bad
```

If I remove the last line of src/bad.pyx, then the mock package does install, and I can then do

```
sage: from bad import os
```



---

archive/issue_comments_177622.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@simon-king-jena](#comment%3A37):\n> even though the exit code of setup.py is not checked.\n\nThe exit code is checked implicitly in `spkg/bin/sage-spkg` because it's simply the last command in the script. Try putting `echo Hello` or something after `python setup.py install` to see the difference.",
    "created_at": "2013-04-29T12:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177622",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@simon-king-jena](#comment%3A37):
> even though the exit code of setup.py is not checked.

The exit code is checked implicitly in `spkg/bin/sage-spkg` because it's simply the last command in the script. Try putting `echo Hello` or something after `python setup.py install` to see the difference.



---

archive/issue_comments_177623.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nSomething else: the line\n\n```\nDISTUTILS_DEBUG='debug'\n```\nhas no effect since the variable `DISTUTILS_DEBUG` is not exported.",
    "created_at": "2013-04-29T12:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177623",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

Something else: the line

```
DISTUTILS_DEBUG='debug'
```
has no effect since the variable `DISTUTILS_DEBUG` is not exported.



---

archive/issue_events_188138.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-29T12:43:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188138"
}
```



---

archive/issue_events_188139.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-29T12:43:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188139"
}
```



---

archive/issue_comments_177624.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@jdemeyer](#comment%3A38):\n> Replying to [@simon-king-jena](#comment%3A37):\n> > even though the exit code of setup.py is not checked.\n\n> The exit code is checked implicitly in `spkg/bin/sage-spkg` because it's simply the last command in the script. Try putting `echo Hello` or something after `python setup.py install` to see the difference.\n\nGreat, that's it!\n\nSo, I put it to \"needs work\" until I fixed it.",
    "created_at": "2013-04-29T12:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177624",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@jdemeyer](#comment%3A38):
> Replying to [@simon-king-jena](#comment%3A37):
> > even though the exit code of setup.py is not checked.

> The exit code is checked implicitly in `spkg/bin/sage-spkg` because it's simply the last command in the script. Try putting `echo Hello` or something after `python setup.py install` to see the difference.

Great, that's it!

So, I put it to "needs work" until I fixed it.



---

archive/issue_events_188140.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-29T12:54:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188140"
}
```



---

archive/issue_events_188141.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-04-29T12:54:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188141"
}
```



---

archive/issue_comments_177625.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nOK, should be fixed now.",
    "created_at": "2013-04-29T12:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177625",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:41" align="right">Comment 41</div>

OK, should be fixed now.



---

archive/issue_comments_177626.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\n\"Should be fixed\" means: When I broke the code on purpose, then it correctly failed to install. I am now trying to install the unbroken spkg again.",
    "created_at": "2013-04-29T12:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177626",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:42" align="right">Comment 42</div>

"Should be fixed" means: When I broke the code on purpose, then it correctly failed to install. I am now trying to install the unbroken spkg again.



---

archive/issue_comments_177627.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nI wouldn't like to revert the status to \"positive review\" myself. Could someone see if the potential trouble with spkg-install has been fixed?",
    "created_at": "2013-05-06T07:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177627",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">Comment 43</div>

I wouldn't like to revert the status to "positive review" myself. Could someone see if the potential trouble with spkg-install has been fixed?



---

archive/issue_comments_177628.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nThe error checking looks good.\n\nYou might want to add some stuff (like `doc/`) to `.hgignore`. Also, you probably don't want to keep `spkg-check.orig` around.",
    "created_at": "2013-05-06T15:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177628",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">Comment 44</div>

The error checking looks good.

You might want to add some stuff (like `doc/`) to `.hgignore`. Also, you probably don't want to keep `spkg-check.orig` around.



---

archive/issue_events_188142.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-06T15:20:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188142"
}
```



---

archive/issue_events_188143.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-06T15:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188143"
}
```



---

archive/issue_comments_177629.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nThere is a lot of garbage in the spkg (check out `hg status`).\n\nIn `spkg-install`, there is still the messing with `$MAKE` and this redundant line:\n\n```\nDISTUTILS_DEBUG='debug'\n```",
    "created_at": "2013-05-06T15:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177629",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">Comment 45</div>

There is a lot of garbage in the spkg (check out `hg status`).

In `spkg-install`, there is still the messing with `$MAKE` and this redundant line:

```
DISTUTILS_DEBUG='debug'
```



---

archive/issue_comments_177630.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nAs John mentioned, replace\n\n```\nNCPUS = os.environ.get('SAGE_NUMBER_THREADS')\nif not NCPUS:\n    NCPUS = int(multiprocessing.cpu_count()/3)+1\nelse:\n    try:\n        NCPUS = int(NCPUS)\n    except:\n        NCPUS = int(multiprocessing.cpu_count()/3)+1\n```\nby\n\n```\nNCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))\n```\nand adjust the documentation accordingly.",
    "created_at": "2013-05-06T15:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177630",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">Comment 46</div>

As John mentioned, replace

```
NCPUS = os.environ.get('SAGE_NUMBER_THREADS')
if not NCPUS:
    NCPUS = int(multiprocessing.cpu_count()/3)+1
else:
    try:
        NCPUS = int(NCPUS)
    except:
        NCPUS = int(multiprocessing.cpu_count()/3)+1
```
by

```
NCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))
```
and adjust the documentation accordingly.



---

archive/issue_comments_177631.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nIt seems to me that `spkg-check` is essentially reinventing the doctest framework. Why aren't you using the standard Sage doctest framework?",
    "created_at": "2013-05-06T15:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177631",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">Comment 47</div>

It seems to me that `spkg-check` is essentially reinventing the doctest framework. Why aren't you using the standard Sage doctest framework?



---

archive/issue_comments_177632.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nIn `spkg-install`, replace\n\n```\n$SAGE_ROOT/sage -gap\n```\nby\n\n```\ngap\n```",
    "created_at": "2013-05-06T15:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177632",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">Comment 48</div>

In `spkg-install`, replace

```
$SAGE_ROOT/sage -gap
```
by

```
gap
```



---

archive/issue_comments_177633.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@jdemeyer](#comment%3A45):\n> There is a lot of garbage in the spkg (check out `hg status`).\n\nReally??? Actually I already wondered about Volker's comment about spkg-check.orig. Anyway, I just posted a version that should be garbage free.\n\n> In `spkg-install`, there is still the messing with `$MAKE`\n\nYou mean: Defining `MAKE` temporarily as `make`? How should it be done to temporarily disallow `make -jN` with `N>1`?\n\n> and this redundant line:\n> \n> ```\n> DISTUTILS_DEBUG='debug'\n> ```\n\nSo, I can remove it? Actually I can't recall where I copied this line from (probably it came from another spkg...)",
    "created_at": "2013-05-06T15:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177633",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@jdemeyer](#comment%3A45):
> There is a lot of garbage in the spkg (check out `hg status`).

Really??? Actually I already wondered about Volker's comment about spkg-check.orig. Anyway, I just posted a version that should be garbage free.

> In `spkg-install`, there is still the messing with `$MAKE`

You mean: Defining `MAKE` temporarily as `make`? How should it be done to temporarily disallow `make -jN` with `N>1`?

> and this redundant line:
> 
> ```
> DISTUTILS_DEBUG='debug'
> ```

So, I can remove it? Actually I can't recall where I copied this line from (probably it came from another spkg...)



---

archive/issue_comments_177634.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@jdemeyer](#comment%3A46):\n> As John mentioned, replace\n> \n> ```\n> NCPUS = os.environ.get('SAGE_NUMBER_THREADS')\n> if not NCPUS:\n>     NCPUS = int(multiprocessing.cpu_count()/3)+1\n> else:\n>     try:\n>         NCPUS = int(NCPUS)\n>     except:\n>         NCPUS = int(multiprocessing.cpu_count()/3)+1\n> ```\n> by\n> \n> ```\n> NCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))\n> ```\n> and adjust the documentation accordingly.\n\nBut I did!!! Very strange.",
    "created_at": "2013-05-06T15:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177634",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@jdemeyer](#comment%3A46):
> As John mentioned, replace
> 
> ```
> NCPUS = os.environ.get('SAGE_NUMBER_THREADS')
> if not NCPUS:
>     NCPUS = int(multiprocessing.cpu_count()/3)+1
> else:
>     try:
>         NCPUS = int(NCPUS)
>     except:
>         NCPUS = int(multiprocessing.cpu_count()/3)+1
> ```
> by
> 
> ```
> NCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))
> ```
> and adjust the documentation accordingly.

But I did!!! Very strange.



---

archive/issue_comments_177635.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nWhat's the point of the empty directories\n\n```\nsrc/lib\nsrc/bin\n```\n\nIf they are truly required in the spkg, at least remove them from `.hgignore` (you probably want to ship them empty!)",
    "created_at": "2013-05-06T15:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177635",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">Comment 51</div>

What's the point of the empty directories

```
src/lib
src/bin
```

If they are truly required in the spkg, at least remove them from `.hgignore` (you probably want to ship them empty!)



---

archive/issue_comments_177636.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nOK, I see `SAGE_NUM_THREADS` now in `spkg-check`. Still, you could replace\n\n```\nNCPUS = os.environ.get('SAGE_NUM_THREADS')\nif not NCPUS:\n    NCPUS = int(multiprocessing.cpu_count()/3)+1\nelse:\n    try:\n        NCPUS = int(NCPUS)\n    except:\n        NCPUS = int(multiprocessing.cpu_count()/3)+1\n```\nby the one-liner\n\n```\nNCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))\n```\n\n(or replace the whole file by a call to the doctest framework).",
    "created_at": "2013-05-06T15:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177636",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">Comment 52</div>

OK, I see `SAGE_NUM_THREADS` now in `spkg-check`. Still, you could replace

```
NCPUS = os.environ.get('SAGE_NUM_THREADS')
if not NCPUS:
    NCPUS = int(multiprocessing.cpu_count()/3)+1
else:
    try:
        NCPUS = int(NCPUS)
    except:
        NCPUS = int(multiprocessing.cpu_count()/3)+1
```
by the one-liner

```
NCPUS = int(os.environ.get('SAGE_NUM_THREADS', 1))
```

(or replace the whole file by a call to the doctest framework).



---

archive/issue_comments_177637.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nReplying to [@simon-king-jena](#comment%3A49):\n\n> Really??? Actually I already wondered about Volker's comment about spkg-check.orig. Anyway, I just posted a version that should be garbage free.\n\nProbably you posted the wrong version last time.\n\n> You mean: Defining `MAKE` temporarily as `make`? How should it be done to temporarily disallow `make -jN` with `N>1`?\n\nReplace\n\n```\n# MeatAxe would fail to build parallely. Therefore, although it is probably bad style:\nOLD_MAKE=\"$MAKE\";\nMAKE=make; export MAKE;\n\ncd src\n\n$MAKE\nif [ $? -ne 0 ]; then\n   echo \"Error building pGroupCohomology.\"\n   exit 1\nfi\n\n$MAKE install\nif [ $? -ne 0 ]; then\n   echo \"Error installing pGroupCohomology.\"\n   exit 1\nfi\n\n#rm pGroupCohomology/*.c\nMAKE=\"$OLDMAKE\"; export MAKE;\n```\nby\n\n```\ncd src\n\n# MeatAxe fails to build in parallel, so we build with only 1 thread:\n$MAKE -j1\nif [ $? -ne 0 ]; then\n   echo \"Error building pGroupCohomology.\"\n   exit 1\nfi\n\n$MAKE -j1 install\nif [ $? -ne 0 ]; then\n   echo \"Error installing pGroupCohomology.\"\n   exit 1\nfi\n```\n\n> > and this redundant line:\n> > \n> > ```\n> > DISTUTILS_DEBUG='debug'\n> > ```\n\n> \n> So, I can remove it?\n\nYes, it doesn't do anything since the variable isn't exported.",
    "created_at": "2013-05-06T15:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177637",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">Comment 53</div>

Replying to [@simon-king-jena](#comment%3A49):

> Really??? Actually I already wondered about Volker's comment about spkg-check.orig. Anyway, I just posted a version that should be garbage free.

Probably you posted the wrong version last time.

> You mean: Defining `MAKE` temporarily as `make`? How should it be done to temporarily disallow `make -jN` with `N>1`?

Replace

```
# MeatAxe would fail to build parallely. Therefore, although it is probably bad style:
OLD_MAKE="$MAKE";
MAKE=make; export MAKE;

cd src

$MAKE
if [ $? -ne 0 ]; then
   echo "Error building pGroupCohomology."
   exit 1
fi

$MAKE install
if [ $? -ne 0 ]; then
   echo "Error installing pGroupCohomology."
   exit 1
fi

#rm pGroupCohomology/*.c
MAKE="$OLDMAKE"; export MAKE;
```
by

```
cd src

# MeatAxe fails to build in parallel, so we build with only 1 thread:
$MAKE -j1
if [ $? -ne 0 ]; then
   echo "Error building pGroupCohomology."
   exit 1
fi

$MAKE -j1 install
if [ $? -ne 0 ]; then
   echo "Error installing pGroupCohomology."
   exit 1
fi
```

> > and this redundant line:
> > 
> > ```
> > DISTUTILS_DEBUG='debug'
> > ```

> 
> So, I can remove it?

Yes, it doesn't do anything since the variable isn't exported.



---

archive/issue_comments_177638.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@jdemeyer](#comment%3A47):\n> It seems to me that `spkg-check` is essentially reinventing the doctest framework. Why aren't you using the standard Sage doctest framework?\n\nOriginally, my main reason has been to run the tests on a per-method basis, not on a per-file basis. This concerns\n- running tests in parallel, \n- the summary of test failures (I would like that the test suite ends with a list of methods whose tests fail or which appear not to be tested)\n- execution time for each test\n\nAlso I originally wanted to work around some bugs in the sage-coverage script: Sometimes the coverage script could not correctly determine the functions defined in a module.\n\nIt could be that in the last three years the doctest and coverage framework of Sage has improved.",
    "created_at": "2013-05-06T15:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177638",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@jdemeyer](#comment%3A47):
> It seems to me that `spkg-check` is essentially reinventing the doctest framework. Why aren't you using the standard Sage doctest framework?

Originally, my main reason has been to run the tests on a per-method basis, not on a per-file basis. This concerns
- running tests in parallel, 
- the summary of test failures (I would like that the test suite ends with a list of methods whose tests fail or which appear not to be tested)
- execution time for each test

Also I originally wanted to work around some bugs in the sage-coverage script: Sometimes the coverage script could not correctly determine the functions defined in a module.

It could be that in the last three years the doctest and coverage framework of Sage has improved.



---

archive/issue_comments_177639.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nI don't know why, but when I try to implement your suggestions, the package installation totally breaks :/",
    "created_at": "2013-05-06T16:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177639",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:55" align="right">Comment 55</div>

I don't know why, but when I try to implement your suggestions, the package installation totally breaks :/



---

archive/issue_comments_177640.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nI just tested: Meataxe does not build with `MAKE=\"make -j2`, even if you then say `$MAKE -j1`. Apparently, `$MAKE` is called internally, in some of the makefiles of `MeatAxe`. Since I patch these makefiles, it could be that I am to blame...",
    "created_at": "2013-05-06T16:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177640",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:56" align="right">Comment 56</div>

I just tested: Meataxe does not build with `MAKE="make -j2`, even if you then say `$MAKE -j1`. Apparently, `$MAKE` is called internally, in some of the makefiles of `MeatAxe`. Since I patch these makefiles, it could be that I am to blame...



---

archive/issue_comments_177641.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nARRGH! I call `$MAKE` in src/Makefile. So, forbidding to build in parallel should be done there.",
    "created_at": "2013-05-06T16:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177641",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:57" align="right">Comment 57</div>

ARRGH! I call `$MAKE` in src/Makefile. So, forbidding to build in parallel should be done there.



---

archive/issue_comments_177642.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@simon-king-jena](#comment%3A57):\n> ARRGH! I call `$MAKE` in src/Makefile.\n\nIn that case, there is a simple solution: change the `Makefile` to use\n\n```\n$(MAKE) -j1 ...\n```",
    "created_at": "2013-05-07T06:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177642",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@simon-king-jena](#comment%3A57):
> ARRGH! I call `$MAKE` in src/Makefile.

In that case, there is a simple solution: change the `Makefile` to use

```
$(MAKE) -j1 ...
```



---

archive/issue_comments_177643.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nReplying to [@simon-king-jena](#comment%3A54):\n> It could be that in the last three years the doctest and coverage framework of Sage has improved.\n\nThey certainly did. I think everything in your list now works correctly, except for the per-method testing and modulo the fact that doctests and coverage are a different script.\n\nI least I understand your motivation now, perhaps you should document this in the `spkg-check` file (\"for historical reasons, this reimplements part of the doctest and coverage scripts, but these could (should?) be replaced by calls to the standard doctest and coverage frameworks.\")",
    "created_at": "2013-05-07T06:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177643",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">Comment 59</div>

Replying to [@simon-king-jena](#comment%3A54):
> It could be that in the last three years the doctest and coverage framework of Sage has improved.

They certainly did. I think everything in your list now works correctly, except for the per-method testing and modulo the fact that doctests and coverage are a different script.

I least I understand your motivation now, perhaps you should document this in the `spkg-check` file ("for historical reasons, this reimplements part of the doctest and coverage scripts, but these could (should?) be replaced by calls to the standard doctest and coverage frameworks.")



---

archive/issue_comments_177644.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@jdemeyer](#comment%3A58):\n> Replying to [@simon-king-jena](#comment%3A57):\n> > ARRGH! I call `$MAKE` in src/Makefile.\n\n> In that case, there is a simple solution: change the `Makefile` to use\n> \n> ```\n> $(MAKE) -j1 ...\n> ```\n\nI wish it were so easy... I tried this yesterday, but it didn't work.",
    "created_at": "2013-05-07T08:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177644",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@jdemeyer](#comment%3A58):
> Replying to [@simon-king-jena](#comment%3A57):
> > ARRGH! I call `$MAKE` in src/Makefile.

> In that case, there is a simple solution: change the `Makefile` to use
> 
> ```
> $(MAKE) -j1 ...
> ```

I wish it were so easy... I tried this yesterday, but it didn't work.



---

archive/issue_comments_177645.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nReplying to [@jdemeyer](#comment%3A59):\n> Replying to [@simon-king-jena](#comment%3A54):\n> > It could be that in the last three years the doctest and coverage framework of Sage has improved.\n\n> They certainly did. I think everything in your list now works correctly, except for the per-method testing and modulo the fact that doctests and coverage are a different script.\n\nComputing group cohomology is difficult. Therefore, this package does a lot of effort to recycle previous computations. But in the tests, I typically need to use a fresh computation, for otherwise I couldn't demonstrate the effect of the method being tested.\n\nTherefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.\n\n> I least I understand your motivation now, perhaps you should document this in the `spkg-check` file\n\nOK.",
    "created_at": "2013-05-07T08:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177645",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:61" align="right">Comment 61</div>

Replying to [@jdemeyer](#comment%3A59):
> Replying to [@simon-king-jena](#comment%3A54):
> > It could be that in the last three years the doctest and coverage framework of Sage has improved.

> They certainly did. I think everything in your list now works correctly, except for the per-method testing and modulo the fact that doctests and coverage are a different script.

Computing group cohomology is difficult. Therefore, this package does a lot of effort to recycle previous computations. But in the tests, I typically need to use a fresh computation, for otherwise I couldn't demonstrate the effect of the method being tested.

Therefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.

> I least I understand your motivation now, perhaps you should document this in the `spkg-check` file

OK.



---

archive/issue_comments_177646.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nI found another place where MAKE is used. As it turns out, it is enough to add -j1 there and *only* there.\n\nMoreover, it seems that we can now build `MeatAxe` and David Green's programs with -O3 optimization. In previous versions, building `MeatAxe` with -O1 used to be faster than -O3, and David Green's programs did not work when building `MeatAxe` with -O3.\n\nBut now, it seems to work, presumably due to changes in gcc. I think it would make sense to test whether -O3 brings brings better speed, too.",
    "created_at": "2013-05-07T09:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177646",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:62" align="right">Comment 62</div>

I found another place where MAKE is used. As it turns out, it is enough to add -j1 there and *only* there.

Moreover, it seems that we can now build `MeatAxe` and David Green's programs with -O3 optimization. In previous versions, building `MeatAxe` with -O1 used to be faster than -O3, and David Green's programs did not work when building `MeatAxe` with -O3.

But now, it seems to work, presumably due to changes in gcc. I think it would make sense to test whether -O3 brings brings better speed, too.



---

archive/issue_comments_177647.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nReplying to [@simon-king-jena](#comment%3A62):\n> I think it would make sense to test whether -O3 brings brings better speed, too.\n\nYou might want to try `-O2` and `-Os` too.",
    "created_at": "2013-05-07T10:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177647",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">Comment 63</div>

Replying to [@simon-king-jena](#comment%3A62):
> I think it would make sense to test whether -O3 brings brings better speed, too.

You might want to try `-O2` and `-Os` too.



---

archive/issue_comments_177648.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nReplying to [@simon-king-jena](#comment%3A61):\n> Therefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.\n\nSuggestion (absolutely not a requirement for this ticket): simply add a command to clear the cache before every test.",
    "created_at": "2013-05-07T10:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177648",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:64" align="right">Comment 64</div>

Replying to [@simon-king-jena](#comment%3A61):
> Therefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.

Suggestion (absolutely not a requirement for this ticket): simply add a command to clear the cache before every test.



---

archive/issue_comments_177649.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nReplying to [@jdemeyer](#comment%3A64):\n> Replying to [@simon-king-jena](#comment%3A61):\n> > Therefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.\n\n> Suggestion (absolutely not a requirement for this ticket): simply add a command to clear the cache before every test.\n\nSure, this would be one possible solution (for version 3.0). Question: Would it be possible to ask the doctest framework to put this clean-up function in front of every docstring? Or would I need to insert this function myself?",
    "created_at": "2013-05-07T10:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177649",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:65" align="right">Comment 65</div>

Replying to [@jdemeyer](#comment%3A64):
> Replying to [@simon-king-jena](#comment%3A61):
> > Therefore, testing on a per module basis won't be easy. I suggest that I will try to find a solution for version 3.0 of the spkg.

> Suggestion (absolutely not a requirement for this ticket): simply add a command to clear the cache before every test.

Sure, this would be one possible solution (for version 3.0). Question: Would it be possible to ask the doctest framework to put this clean-up function in front of every docstring? Or would I need to insert this function myself?



---

archive/issue_comments_177650.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nReplying to [@jdemeyer](#comment%3A63):\n> Replying to [@simon-king-jena](#comment%3A62):\n> > I think it would make sense to test whether -O3 brings brings better speed, too.\n\n> You might want to try `-O2` and `-Os` too.\n\nI am currently waiting for `pGroupCohomology.factory.unit_test64` to finish with `-O3`, and will later try to compare the result with the other options.\n\nQuestion: Is it OK to hard-code `OO=\"-O3\"` in the Makefile? Or shall this be at the choice of the user? Is there a default optimization level used by Sage when installing an spkg?",
    "created_at": "2013-05-07T10:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177650",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:66" align="right">Comment 66</div>

Replying to [@jdemeyer](#comment%3A63):
> Replying to [@simon-king-jena](#comment%3A62):
> > I think it would make sense to test whether -O3 brings brings better speed, too.

> You might want to try `-O2` and `-Os` too.

I am currently waiting for `pGroupCohomology.factory.unit_test64` to finish with `-O3`, and will later try to compare the result with the other options.

Question: Is it OK to hard-code `OO="-O3"` in the Makefile? Or shall this be at the choice of the user? Is there a default optimization level used by Sage when installing an spkg?



---

archive/issue_comments_177651.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nFirst timing, with `-O3`:\n\n```\n...\n#267: Walltime  59:31.94 min\n      CPU-time  28:07.53 min\n      Singular   2:54.90 min\n      Gap-time   0:40.17 min\n```",
    "created_at": "2013-05-07T10:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177651",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:67" align="right">Comment 67</div>

First timing, with `-O3`:

```
...
#267: Walltime  59:31.94 min
      CPU-time  28:07.53 min
      Singular   2:54.90 min
      Gap-time   0:40.17 min
```



---

archive/issue_comments_177652.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nRemark on the timing: As much as I know, the huge difference between CPU and wall time comes from reading and writing to disk. If I am not mistaken, this does not count for CPU time, but plays a substantial role here.",
    "created_at": "2013-05-07T10:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177652",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:68" align="right">Comment 68</div>

Remark on the timing: As much as I know, the huge difference between CPU and wall time comes from reading and writing to disk. If I am not mistaken, this does not count for CPU time, but plays a substantial role here.



---

archive/issue_comments_177653.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nWhen installing the `-O2` version, I noticed that `-O3` is still used on the Cython files (but it is `-O2` on the files of David Green and of `MeatAxe`).\n\nQuestion: How can I ask for using `-O2` when compiling Cython generated code?",
    "created_at": "2013-05-07T10:58:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177653",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:69" align="right">Comment 69</div>

When installing the `-O2` version, I noticed that `-O3` is still used on the Cython files (but it is `-O2` on the files of David Green and of `MeatAxe`).

Question: How can I ask for using `-O2` when compiling Cython generated code?



---

archive/issue_comments_177654.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nSecond timing, with `-O2`:\n\n```\n...\n#267: Walltime  54:26.91 min\n      CPU-time  25:50.69 min\n      Singular   2:57.31 min\n      Gap-time   0:40.97 min\n```",
    "created_at": "2013-05-07T12:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177654",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:70" align="right">Comment 70</div>

Second timing, with `-O2`:

```
...
#267: Walltime  54:26.91 min
      CPU-time  25:50.69 min
      Singular   2:57.31 min
      Gap-time   0:40.97 min
```



---

archive/issue_comments_177655.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nReplying to [@simon-king-jena](#comment%3A66):\n\n> Question: Is it OK to hard-code `OO=\"-O3\"` in the Makefile? Or shall this be at the choice of the user?\n\nIdeally, it should be at the choice of the user. The easiest solution is probably to use\n\n```\n$(CC) $(OO) $(CFLAGS) somefile.c -o somefile.o\n```\nin the `Makefile`. However, I wouldn't require this for positive review.\n\n> Is there a default optimization level used by Sage when installing an spkg?\n\nNo, every package handles this independently.",
    "created_at": "2013-05-07T12:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177655",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">Comment 71</div>

Replying to [@simon-king-jena](#comment%3A66):

> Question: Is it OK to hard-code `OO="-O3"` in the Makefile? Or shall this be at the choice of the user?

Ideally, it should be at the choice of the user. The easiest solution is probably to use

```
$(CC) $(OO) $(CFLAGS) somefile.c -o somefile.o
```
in the `Makefile`. However, I wouldn't require this for positive review.

> Is there a default optimization level used by Sage when installing an spkg?

No, every package handles this independently.



---

archive/issue_comments_177656.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nReplying to [@simon-king-jena](#comment%3A69):\n> Question: How can I ask for using `-O2` when compiling Cython generated code?\n\nI think you would need to edit `devel/sage/module_list.py`",
    "created_at": "2013-05-07T12:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177656",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">Comment 72</div>

Replying to [@simon-king-jena](#comment%3A69):
> Question: How can I ask for using `-O2` when compiling Cython generated code?

I think you would need to edit `devel/sage/module_list.py`



---

archive/issue_comments_177657.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nReplying to [@jdemeyer](#comment%3A72):\n> Replying to [@simon-king-jena](#comment%3A69):\n> > Question: How can I ask for using `-O2` when compiling Cython generated code?\n\n> I think you would need to edit `devel/sage/module_list.py`\n\nOK, so, for my package, I should look into setup.py, then...\n\nTiming with `-O1`:\n\n```\n#267: Walltime  55:21.78 min\n      CPU-time  26:29.22 min\n      Singular   2:52.77 min\n      Gap-time   0:39.63 min\n```\n\nSo, currently, `-O2` seems best. But we still have `-Os`...",
    "created_at": "2013-05-07T13:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177657",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:73" align="right">Comment 73</div>

Replying to [@jdemeyer](#comment%3A72):
> Replying to [@simon-king-jena](#comment%3A69):
> > Question: How can I ask for using `-O2` when compiling Cython generated code?

> I think you would need to edit `devel/sage/module_list.py`

OK, so, for my package, I should look into setup.py, then...

Timing with `-O1`:

```
#267: Walltime  55:21.78 min
      CPU-time  26:29.22 min
      Singular   2:52.77 min
      Gap-time   0:39.63 min
```

So, currently, `-O2` seems best. But we still have `-Os`...



---

archive/issue_comments_177658.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@simon-king-jena](#comment%3A73):\n> OK, so, for my package, I should look into setup.py, then...\n\nExactly, you should add\n\n```\nextra_compile_args=[\"-O2\"]\n```\nfor the modules you want.",
    "created_at": "2013-05-07T13:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177658",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@simon-king-jena](#comment%3A73):
> OK, so, for my package, I should look into setup.py, then...

Exactly, you should add

```
extra_compile_args=["-O2"]
```
for the modules you want.



---

archive/issue_comments_177659.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nLast timing (`-Os`):\n\n```\n#267: Walltime  55:35.73 min\n      CPU-time  26:30.57 min\n      Singular   2:54.52 min\n      Gap-time   0:40.40 min\n```\n\nAnd the winner is `-O2` for the non-Cython part.",
    "created_at": "2013-05-07T14:51:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177659",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:75" align="right">Comment 75</div>

Last timing (`-Os`):

```
#267: Walltime  55:35.73 min
      CPU-time  26:30.57 min
      Singular   2:54.52 min
      Gap-time   0:40.40 min
```

And the winner is `-O2` for the non-Cython part.



---

archive/issue_comments_177660.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nArgh. Forgot to re-compile the package... So, the last timing was another example of `-O1`.",
    "created_at": "2013-05-07T14:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177660",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:76" align="right">Comment 76</div>

Argh. Forgot to re-compile the package... So, the last timing was another example of `-O1`.



---

archive/issue_comments_177661.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nBy the way, it is good to see that the two timings with `-O1` are almost the same. Here it is with `-Os`:\n\n```\n...\n#267: Walltime  57:08.61 min\n      CPU-time  27:15.55 min\n      Singular   2:46.68 min\n      Gap-time   0:40.22 min\n```\n\nTomorrow, I'll see what happens when choosing different options for the Cython part of the code.",
    "created_at": "2013-05-07T18:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177661",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:77" align="right">Comment 77</div>

By the way, it is good to see that the two timings with `-O1` are almost the same. Here it is with `-Os`:

```
...
#267: Walltime  57:08.61 min
      CPU-time  27:15.55 min
      Singular   2:46.68 min
      Gap-time   0:40.22 min
```

Tomorrow, I'll see what happens when choosing different options for the Cython part of the code.



---

archive/issue_comments_177662.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\n`OO=-O2` and `extra_compile_args=['-O3']`:\n\n```\n...\n#267: Walltime  46:29.31 min\n      CPU-time  22:45.55 min\n      Singular   2:49.84 min\n      Gap-time   0:40.10 min\n```",
    "created_at": "2013-05-07T21:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177662",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:78" align="right">Comment 78</div>

`OO=-O2` and `extra_compile_args=['-O3']`:

```
...
#267: Walltime  46:29.31 min
      CPU-time  22:45.55 min
      Singular   2:49.84 min
      Gap-time   0:40.10 min
```



---

archive/issue_comments_177663.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nHere are the remaining timings.\n\n`OO=-O2`, `extra_compile_args=['-O2']`:\n\n```\n...\n#267: Walltime  50:08.55 min\n      CPU-time  24:06.87 min\n      Singular   2:51.00 min\n      Gap-time   0:40.32 min\n```\n\n`OO=-O2`, `extra_compile_args=['-O1']`:\n\n```\n...\n#267: Walltime  51:33.45 min\n      CPU-time  24:48.10 min\n      Singular   2:49.59 min\n      Gap-time   0:39.57 min\n```\n\n`OO=-O2`, `extra_compile_args=['-Os']`:\n\n```\n...\n#267: Walltime  54:59.40 min\n      CPU-time  26:07.43 min\n      Singular   2:50.38 min\n      Gap-time   0:40.53 min\n```\n\nSo, at least on my laptop, it seems like a good idea to use -O2 on `MeatAxe` and David Green's programs, while -O3 seems best on the Cython code.\n\nI will now try to incorporate all your remarks and update my spkg accordingly.",
    "created_at": "2013-05-08T15:15:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177663",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:79" align="right">Comment 79</div>

Here are the remaining timings.

`OO=-O2`, `extra_compile_args=['-O2']`:

```
...
#267: Walltime  50:08.55 min
      CPU-time  24:06.87 min
      Singular   2:51.00 min
      Gap-time   0:40.32 min
```

`OO=-O2`, `extra_compile_args=['-O1']`:

```
...
#267: Walltime  51:33.45 min
      CPU-time  24:48.10 min
      Singular   2:49.59 min
      Gap-time   0:39.57 min
```

`OO=-O2`, `extra_compile_args=['-Os']`:

```
...
#267: Walltime  54:59.40 min
      CPU-time  26:07.43 min
      Singular   2:50.38 min
      Gap-time   0:40.53 min
```

So, at least on my laptop, it seems like a good idea to use -O2 on `MeatAxe` and David Green's programs, while -O3 seems best on the Cython code.

I will now try to incorporate all your remarks and update my spkg accordingly.



---

archive/issue_comments_177664.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nI just posted an updated spkg, which addresses the following:\n\n* Fine tuning of compiler options. Caveat: I am not sure if it could be overridden by the user, but I think I should not care at this point.\n* spkg-install should exit with an error if setup.py throws an error, [comment:38](#comment%3A38)\n* Remove DISTUTILS_DEBUG, do not mess with MAKE, [comment:45](#comment%3A45) et al.\n* Use gap, not `$SAGE_ROOT/sage -gap`, [comment:48](#comment%3A48)\n* An empty src/lib and src/bin should not be shipped, [comment:51](#comment%3A51)\n* Improve use of SAGE_NUM_THREADS, [comment:52](#comment%3A52)\n* A note in spkg-check commenting on the reasons for replicating sage -t, [comment:59](#comment%3A59)\n\nIt could be that I should improve the Makefiles, but I hope this can be left for the next version.",
    "created_at": "2013-05-08T15:42:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177664",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:80" align="right">Comment 80</div>

I just posted an updated spkg, which addresses the following:

* Fine tuning of compiler options. Caveat: I am not sure if it could be overridden by the user, but I think I should not care at this point.
* spkg-install should exit with an error if setup.py throws an error, [comment:38](#comment%3A38)
* Remove DISTUTILS_DEBUG, do not mess with MAKE, [comment:45](#comment%3A45) et al.
* Use gap, not `$SAGE_ROOT/sage -gap`, [comment:48](#comment%3A48)
* An empty src/lib and src/bin should not be shipped, [comment:51](#comment%3A51)
* Improve use of SAGE_NUM_THREADS, [comment:52](#comment%3A52)
* A note in spkg-check commenting on the reasons for replicating sage -t, [comment:59](#comment%3A59)

It could be that I should improve the Makefiles, but I hope this can be left for the next version.



---

archive/issue_events_188144.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-08T15:42:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188144"
}
```



---

archive/issue_events_188145.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-08T15:42:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188145"
}
```



---

archive/issue_comments_177665.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nPS: The latest changes are provided by the patch `reviewer-2.1.4.patch` in the package.",
    "created_at": "2013-05-08T15:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177665",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:81" align="right">Comment 81</div>

PS: The latest changes are provided by the patch `reviewer-2.1.4.patch` in the package.



---

archive/issue_events_188146.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-09T18:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188146"
}
```



---

archive/issue_events_188147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-09T18:19:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188147"
}
```



---

archive/issue_comments_177666.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nspkg looks good.",
    "created_at": "2013-05-09T18:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177666",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:82" align="right">Comment 82</div>

spkg looks good.



---

archive/issue_comments_177667.json:
```json
{
    "body": "Changed reviewer from **Volker Braun** to **Volker Braun, Jeroen Demeyer**",
    "created_at": "2013-05-09T18:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177667",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Volker Braun** to **Volker Braun, Jeroen Demeyer**



---

archive/issue_comments_177668.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nIt has turned out that, with the increased optimization level, the package won't build with old compiler versions (e.g., not with gcc 4.4.5).\n\nSince this spkg version does not seem to be copied to the \"official\" list of optional spkgs: Is there still time to add a test that makes sure to install the package only when it works with the available gcc? In later versions (but not in 2.1.4 yet), I could imagine to make the optimization level depend on the available compiler.",
    "created_at": "2013-05-12T21:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177668",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:83" align="right">Comment 83</div>

It has turned out that, with the increased optimization level, the package won't build with old compiler versions (e.g., not with gcc 4.4.5).

Since this spkg version does not seem to be copied to the "official" list of optional spkgs: Is there still time to add a test that makes sure to install the package only when it works with the available gcc? In later versions (but not in 2.1.4 yet), I could imagine to make the optimization level depend on the available compiler.



---

archive/issue_comments_177669.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nI did preserve a copy of the spkg that has been reviewed here. But I am now posting a new version that tests whether some underlying programs appear to work. If they don't, I am printing a hint concerning gcc version, and exit with an error.\n\nIf you think that this should better be done on a new ticket, then I'll do so. But I think it would be simpler to keep it here, because p_group_cohomology-2.1.4.spkg has not been put in the official repository of optional packages, yet.",
    "created_at": "2013-05-12T21:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177669",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:84" align="right">Comment 84</div>

I did preserve a copy of the spkg that has been reviewed here. But I am now posting a new version that tests whether some underlying programs appear to work. If they don't, I am printing a hint concerning gcc version, and exit with an error.

If you think that this should better be done on a new ticket, then I'll do so. But I think it would be simpler to keep it here, because p_group_cohomology-2.1.4.spkg has not been put in the official repository of optional packages, yet.



---

archive/issue_events_188148.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T21:54:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188148"
}
```



---

archive/issue_events_188149.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T21:54:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188149"
}
```



---

archive/issue_events_188150.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:00:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188150"
}
```



---

archive/issue_events_188151.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188151"
}
```



---

archive/issue_comments_177670.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nIt seems to work (i.e., to fail) correctly.\n\nWhen installing the updated spkg version in a Sage version that was built with gcc 4.4.5, it ends with\n\n```\n...\nTesting makeNontips\nmakeNontips -ORLL 2 /mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/present/src/test\nsh: maketab: not found\nsh: maketab: not found\np002.zzz: No such file or directory\nmake[1]: *** [makeNontips] Gleitkomma-Ausnahme\nmake[1]: *** Datei \u00bbmakeNontips\u00ab wird gel\u00f6scht\nmake[1]: Leaving directory `/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin'\nmake: *** [all] Fehler 2\nError building pGroupCohomology.\nYou are using gcc 4.4.5\nIf this is older than gcc 4.6, then please consider upgrading your system-wide gcc,\nor install Sage with its gcc spkg.\nIf your gcc version is more recent, then please inform the author.\n\nreal    0m14.620s\nuser    0m12.601s\nsys     0m1.112s\n************************************************************************\nError installing package p_group_cohomology-2.1.4\n************************************************************************\n...\n```\n\nBut it installs fine on a system with gcc 4.6.\n\nIf you think that we can include this last minute change, then please review it. Otherwise, please tell me to put back the previous spkg.",
    "created_at": "2013-05-12T22:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177670",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:85" align="right">Comment 85</div>

It seems to work (i.e., to fail) correctly.

When installing the updated spkg version in a Sage version that was built with gcc 4.4.5, it ends with

```
...
Testing makeNontips
makeNontips -ORLL 2 /mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/present/src/test
sh: maketab: not found
sh: maketab: not found
p002.zzz: No such file or directory
make[1]: *** [makeNontips] Gleitkomma-Ausnahme
make[1]: *** Datei »makeNontips« wird gelöscht
make[1]: Leaving directory `/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin'
make: *** [all] Fehler 2
Error building pGroupCohomology.
You are using gcc 4.4.5
If this is older than gcc 4.6, then please consider upgrading your system-wide gcc,
or install Sage with its gcc spkg.
If your gcc version is more recent, then please inform the author.

real    0m14.620s
user    0m12.601s
sys     0m1.112s
************************************************************************
Error installing package p_group_cohomology-2.1.4
************************************************************************
...
```

But it installs fine on a system with gcc 4.6.

If you think that we can include this last minute change, then please review it. Otherwise, please tell me to put back the previous spkg.



---

archive/issue_comments_177671.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nSorry, one small file is still missing.",
    "created_at": "2013-05-12T22:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177671",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:86" align="right">Comment 86</div>

Sorry, one small file is still missing.



---

archive/issue_events_188152.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:09:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188152"
}
```



---

archive/issue_events_188153.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:09:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188153"
}
```



---

archive/issue_comments_177672.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nOK, the spkg is updated. I verified that it does build on two systems with gcc 4.6 resp. 4.7.2, but correctly refuses to build with gcc 4.4.5, reporting a segmentation fault in `makeNontips`, namely\n\n```\nTesting makeNontips\n/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin/maketab 2\nMAKETAB Revision 1.2 (1997/09/11)\nWriting tables to p002.zzz\nmakeNontips -ORLL 2 /mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/present/src/test\nmake[1]: *** [makeNontips] Speicherzugriffsfehler\nmake[1]: *** Datei \u00bbmakeNontips\u00ab wird gel\u00f6scht\nmake[1]: Leaving directory `/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin'\nmake: *** [all] Fehler 2\nError building pGroupCohomology.\nYou are using gcc 4.4.5\nIf this is older than gcc 4.6, then please consider upgrading your system-wide gcc,\nor install Sage with its gcc spkg.\nIf your gcc version is more recent, then please inform the author.\n```\n\nThe difference to the previous test is this: The test is now creating the previously missing data file p002.zzz before calling `makeNontips`.",
    "created_at": "2013-05-12T22:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177672",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:87" align="right">Comment 87</div>

OK, the spkg is updated. I verified that it does build on two systems with gcc 4.6 resp. 4.7.2, but correctly refuses to build with gcc 4.4.5, reporting a segmentation fault in `makeNontips`, namely

```
Testing makeNontips
/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin/maketab 2
MAKETAB Revision 1.2 (1997/09/11)
Writing tables to p002.zzz
makeNontips -ORLL 2 /mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/present/src/test
make[1]: *** [makeNontips] Speicherzugriffsfehler
make[1]: *** Datei »makeNontips« wird gelöscht
make[1]: Leaving directory `/mnt/local/king/SAGE/prereleases/sage-5.9.rc0.system-gcc/spkg/build/p_group_cohomology-2.1.4/src/bin'
make: *** [all] Fehler 2
Error building pGroupCohomology.
You are using gcc 4.4.5
If this is older than gcc 4.6, then please consider upgrading your system-wide gcc,
or install Sage with its gcc spkg.
If your gcc version is more recent, then please inform the author.
```

The difference to the previous test is this: The test is now creating the previously missing data file p002.zzz before calling `makeNontips`.



---

archive/issue_events_188154.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:51:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188154"
}
```



---

archive/issue_events_188155.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-12T22:51:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188155"
}
```



---

archive/issue_comments_177673.json:
```json
{
    "body": "Changed author from **SimonKing** to **Simon King**",
    "created_at": "2013-05-17T12:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177673",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **SimonKing** to **Simon King**



---

archive/issue_events_188156.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T12:17:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188156"
}
```



---

archive/issue_events_188157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T12:17:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188157"
}
```



---

archive/issue_comments_177674.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nIt doesn't seem to work, due to the file `makeNontips` being missing:\n\n```\necho \"Testing makeNontips\"\nTesting makeNontips\n/mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/bin/maketab 2\nMAKETAB Revision 1.2 (1997/09/11)\nWriting tables to p002.zzz\nmakeNontips -ORLL 2 /mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/present/src/test\nmake[1]: makeNontips: Command not found\nmake[1]: *** [makeNontips] Error 127\nmake[1]: Leaving directory `/mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/bin'\nmake: *** [all] Error 2\nError building pGroupCohomology.\nYou are using gcc 4.8.0\nIf this is older than gcc 4.6, then please consider upgrading your system-wide gcc,\nor install Sage with its gcc spkg.\nIf your gcc version is more recent, then please inform the author.\n```",
    "created_at": "2013-05-17T12:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177674",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:89" align="right">Comment 89</div>

It doesn't seem to work, due to the file `makeNontips` being missing:

```
echo "Testing makeNontips"
Testing makeNontips
/mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/bin/maketab 2
MAKETAB Revision 1.2 (1997/09/11)
Writing tables to p002.zzz
makeNontips -ORLL 2 /mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/present/src/test
make[1]: makeNontips: Command not found
make[1]: *** [makeNontips] Error 127
make[1]: Leaving directory `/mazur/release/merger/sage-5.10.beta0/spkg/build/p_group_cohomology-2.1.4/src/bin'
make: *** [all] Error 2
Error building pGroupCohomology.
You are using gcc 4.8.0
If this is older than gcc 4.6, then please consider upgrading your system-wide gcc,
or install Sage with its gcc spkg.
If your gcc version is more recent, then please inform the author.
```



---

archive/issue_comments_177675.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nPerhaps you meant\n\n```\n./makeNontips\n```\ninstead of\n\n```\nmakeNontips\n```",
    "created_at": "2013-05-17T12:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177675",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:90" align="right">Comment 90</div>

Perhaps you meant

```
./makeNontips
```
instead of

```
makeNontips
```



---

archive/issue_comments_177676.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nReplying to [@jdemeyer](#comment%3A90):\n> Perhaps you meant\n> \n> ```\n> ./makeNontips\n> ```\n> instead of\n> \n> ```\n> makeNontips\n> ```\n\nI have updated my spkg accordingly.\n\nCould you try it again? I guess the problem on my machine has been that there was a `makeNontips` in the path (either broken or working, hence, the Makefile correctly detected the problem, but based on a previous installation).",
    "created_at": "2013-05-17T12:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177676",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:91" align="right">Comment 91</div>

Replying to [@jdemeyer](#comment%3A90):
> Perhaps you meant
> 
> ```
> ./makeNontips
> ```
> instead of
> 
> ```
> makeNontips
> ```

I have updated my spkg accordingly.

Could you try it again? I guess the problem on my machine has been that there was a `makeNontips` in the path (either broken or working, hence, the Makefile correctly detected the problem, but based on a previous installation).



---

archive/issue_events_188158.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-17T12:42:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188158"
}
```



---

archive/issue_events_188159.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-17T12:42:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188159"
}
```



---

archive/issue_comments_177677.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nSeems to work now.",
    "created_at": "2013-05-17T18:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177677",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:93" align="right">Comment 93</div>

Seems to work now.



---

archive/issue_events_188160.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T18:55:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188160"
}
```



---

archive/issue_events_188161.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T18:55:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188161"
}
```



---

archive/issue_comments_177678.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\ni've put the spkg on the server.",
    "created_at": "2013-05-19T10:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14492#issuecomment-177678",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:94" align="right">Comment 94</div>

i've put the spkg on the server.



---

archive/issue_events_188162.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T12:07:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188162"
}
```



---

archive/issue_events_188163.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T12:07:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14492",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14492#event-188163"
}
```
