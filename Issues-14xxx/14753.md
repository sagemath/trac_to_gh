# Issue 14753: Revert ATLAS package

archive/issues_014549.json:
```json
{
    "body": "There are some problems with generic binaries (`SAGE_FAT_BINARY=yes`) in the new ATLAS spkg. In order not to delay the release of Sage 5.10 any longer, I will revert #10508.\n\nFixing the issues below (and upgrading ATLAS to 3.10.x) is #14754.\n\nOn cicero (Fedora 16 i686), the build fails: [http://build.sagemath.org/sage/builders/Skynet%20cicero%20%28Fedora%2016%20i686%29%20bin/builds/90/steps/shell_5/logs/atlas](http://build.sagemath.org/sage/builders/Skynet%20cicero%20%28Fedora%2016%20i686%29%20bin/builds/90/steps/shell_5/logs/atlas)\n\nNote the use of `-DATL_3DNow` and lots of \"Illegal instruction\" messages, proving that this likely is not a generic binary, unlike what it should be.\n\nOn arando (Ubuntu 13.04 i686), the build works but there is doctest failure:\n\n```\nsage -t devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"devel/sage/sage/matrix/matrix_double_dense.pyx\", line 3823, in sage.matrix.matrix_double_dense.Matrix_double_dense.is_positive_definite\nFailed example:\n    H.is_positive_definite()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\n\nAssignee: @jdemeyer\n\nReviewer: Jeroen Demeyer\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.10\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14753\n\n",
    "closed_at": "2013-06-17T12:32:03Z",
    "created_at": "2013-06-17T12:03:27Z",
    "labels": [
        "component: packages: standard",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Revert ATLAS package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14753",
    "user": "https://github.com/jdemeyer"
}
```
There are some problems with generic binaries (`SAGE_FAT_BINARY=yes`) in the new ATLAS spkg. In order not to delay the release of Sage 5.10 any longer, I will revert #10508.

Fixing the issues below (and upgrading ATLAS to 3.10.x) is #14754.

On cicero (Fedora 16 i686), the build fails: [http://build.sagemath.org/sage/builders/Skynet%20cicero%20%28Fedora%2016%20i686%29%20bin/builds/90/steps/shell_5/logs/atlas](http://build.sagemath.org/sage/builders/Skynet%20cicero%20%28Fedora%2016%20i686%29%20bin/builds/90/steps/shell_5/logs/atlas)

Note the use of `-DATL_3DNow` and lots of "Illegal instruction" messages, proving that this likely is not a generic binary, unlike what it should be.

On arando (Ubuntu 13.04 i686), the build works but there is doctest failure:

```
sage -t devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "devel/sage/sage/matrix/matrix_double_dense.pyx", line 3823, in sage.matrix.matrix_double_dense.Matrix_double_dense.is_positive_definite
Failed example:
    H.is_positive_definite()
Expected:
    True
Got:
    False
**********************************************************************
```

Assignee: @jdemeyer

Reviewer: Jeroen Demeyer

Author: Jeroen Demeyer

Merged: sage-5.10

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14753





---

archive/issue_comments_184426.json:
```json
{
    "body": "Attachment [14753_revert_atlas.patch](tarball://root/attachments/some-uuid/ticket14753/14753_revert_atlas.patch) by @jdemeyer created at 2013-06-17 12:12:30",
    "created_at": "2013-06-17T12:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14753#issuecomment-184426",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [14753_revert_atlas.patch](tarball://root/attachments/some-uuid/ticket14753/14753_revert_atlas.patch) by @jdemeyer created at 2013-06-17 12:12:30



---

archive/issue_comments_184427.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [14753_revert_atlas_docs.patch](tarball://root/attachments/some-uuid/ticket14753/14753_revert_atlas_docs.patch) by @jdemeyer created at 2013-06-17 12:27:44",
    "created_at": "2013-06-17T12:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14753#issuecomment-184427",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>Attachment [14753_revert_atlas_docs.patch](tarball://root/attachments/some-uuid/ticket14753/14753_revert_atlas_docs.patch) by @jdemeyer created at 2013-06-17 12:27:44



---

archive/issue_events_042297.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-17T12:27:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "milestone": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14753#event-42297"
}
```



---

archive/issue_comments_184428.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-17T12:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14753#issuecomment-184428",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_042298.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-17T12:32:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14753#event-42298"
}
```



---

archive/issue_comments_184429.json:
```json
{
    "body": "<a id='comment:5'></a>The fact that 3DNow is used was discussed at #13706.\n\nOf course we can remove that.\n\nJeroen: could you try to modify spkg-install: replace\n\n```\nisa_ext = ('3DNow',)\n```\nby\n\n```\nisa_ext = ()\n```\non line 404 (in some version of the p0 spkg I have access to right now.)\nIt's in the configure_base function, the part about \"Generic configuration on Intel i386 compatible CPUs\"; and then try to rebuild on cicero? (I have no access to it)",
    "created_at": "2013-06-17T12:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14753#issuecomment-184429",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>The fact that 3DNow is used was discussed at #13706.

Of course we can remove that.

Jeroen: could you try to modify spkg-install: replace

```
isa_ext = ('3DNow',)
```
by

```
isa_ext = ()
```
on line 404 (in some version of the p0 spkg I have access to right now.)
It's in the configure_base function, the part about "Generic configuration on Intel i386 compatible CPUs"; and then try to rebuild on cicero? (I have no access to it)



---

archive/issue_comments_184430.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:5 jpflori]:\n> The fact that 3DNow is used was discussed at #13706.\n> \n> Of course we can remove that.\n> \n> Jeroen: could you try to modify spkg-install: replace\n> \n> ```\n> isa_ext = ('3DNow',)\n> ```\n> by\n> \n> ```\n> isa_ext = ()\n> ```\n> on line 404 (in some version of the p0 spkg I have access to right now.)\n> It's in the configure_base function, the part about \"Generic configuration on Intel i386 compatible CPUs\"; and then try to rebuild on cicero? (I have no access to it)\n\nI posted a spkg at #14754 doing that, I'll try it on cicero (a single-core Pentium 4 machine).\n\nIn any case, this will not change my decision to revert #10508. I want to release Sage 5.10 as soon as possible.",
    "created_at": "2013-06-17T12:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14753#issuecomment-184430",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:5 jpflori]:
> The fact that 3DNow is used was discussed at #13706.
> 
> Of course we can remove that.
> 
> Jeroen: could you try to modify spkg-install: replace
> 
> ```
> isa_ext = ('3DNow',)
> ```
> by
> 
> ```
> isa_ext = ()
> ```
> on line 404 (in some version of the p0 spkg I have access to right now.)
> It's in the configure_base function, the part about "Generic configuration on Intel i386 compatible CPUs"; and then try to rebuild on cicero? (I have no access to it)

I posted a spkg at #14754 doing that, I'll try it on cicero (a single-core Pentium 4 machine).

In any case, this will not change my decision to revert #10508. I want to release Sage 5.10 as soon as possible.
