# Issue 14846: CycleIndexSeries derivative, integral, exponential methods are not combinatorial

archive/issues_014642.json:
```json
{
    "body": "The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are not combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!\n\nIn addition to being confusing, this discrepancy has the potential to hinder work using the *CycleIndexSeries* class. The combinatorial operation of cycle index differentiation is very useful in enumerative work.\n\nAll that said, the existing *exponential* and *derivative* methods are used for algebraic magic tricks in some of the existing code, so it's important not to take it away altogether.\n\nThe attached patch makes the following changes:\n\n* Adds *_lps_derivative*, *_lps_integral*, and *_lps_exponential* methods to *CycleIndexSeries* which call up using *super*.\n\n* Refactors the internal code which previously used *exponential* and *derivative* to use *_lps_exponential* and *_lps_derivative* instead.\n\n* Implements a new *derivative* method which computes the combinatorial derivative of a cycle index series.\n\n* Implements a new *pointing* method which implements a related combinatorial operation.\n\n* Implements a new *integral* method which raises a *NotImplementedError* to prevent any user confusion (since, as explained in the docstring, there may be infinitely many very distinct cycle indices with a given derivative).\n\n* Implements a new *exponential* method which returns the composition E(self) for E the cycle index series of *SetSpecies*. \n\n* Implements a new *logarithm* method which returns the composition \u03a9(self) for \u03a9 the cycle index series implemented in *CombinatorialLogarithmSeries*.\n\nDocstrings and doctests are included for everything but the _lps_* methods, which just call up to ``super``. I'm not sure what a doctest for these would even look like, but I'm open to suggestions.\n\nAssignee: agd\n\nKeywords: LazyPowerSeries, species\n\nBranch/Commit: ab9c7d161b8318bc5edffb3bb3dd66bc5c503318\n\nWork_Issues: documentation\n\nReviewer: Martin Rubey\n\nAuthor: Andrew Gainer-Dewar\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14846\n\n",
    "closed_at": "2015-08-13T18:35:25Z",
    "created_at": "2013-07-01T16:13:26Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "CycleIndexSeries derivative, integral, exponential methods are not combinatorial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14846",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```
The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are not combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!

In addition to being confusing, this discrepancy has the potential to hinder work using the *CycleIndexSeries* class. The combinatorial operation of cycle index differentiation is very useful in enumerative work.

All that said, the existing *exponential* and *derivative* methods are used for algebraic magic tricks in some of the existing code, so it's important not to take it away altogether.

The attached patch makes the following changes:

* Adds *_lps_derivative*, *_lps_integral*, and *_lps_exponential* methods to *CycleIndexSeries* which call up using *super*.

* Refactors the internal code which previously used *exponential* and *derivative* to use *_lps_exponential* and *_lps_derivative* instead.

* Implements a new *derivative* method which computes the combinatorial derivative of a cycle index series.

* Implements a new *pointing* method which implements a related combinatorial operation.

* Implements a new *integral* method which raises a *NotImplementedError* to prevent any user confusion (since, as explained in the docstring, there may be infinitely many very distinct cycle indices with a given derivative).

* Implements a new *exponential* method which returns the composition E(self) for E the cycle index series of *SetSpecies*. 

* Implements a new *logarithm* method which returns the composition Ω(self) for Ω the cycle index series implemented in *CombinatorialLogarithmSeries*.

Docstrings and doctests are included for everything but the _lps_* methods, which just call up to ``super``. I'm not sure what a doctest for these would even look like, but I'm open to suggestions.

Assignee: agd

Keywords: LazyPowerSeries, species

Branch/Commit: ab9c7d161b8318bc5edffb3bb3dd66bc5c503318

Work_Issues: documentation

Reviewer: Martin Rubey

Author: Andrew Gainer-Dewar

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14846





---

archive/issue_comments_198741.json:
```json
{
    "body": "<a id='comment:1'></a>For the patchbot:\n\napply trac_14846_cis_deriv_int_exp_methods.patch",
    "created_at": "2013-07-01T16:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198741",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:1'></a>For the patchbot:

apply trac_14846_cis_deriv_int_exp_methods.patch



---

archive/issue_comments_198742.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-01T16:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198742",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_198743.json:
```json
{
    "body": "<a id='comment:3'></a>I have uploaded a new version of the patch which makes a small change: rather than building the terms of the *derivative* of a *CycleIndexSeries* using an opaque list concatenation, I have used the *CycleIndexSeriesRing.term* method.",
    "created_at": "2013-07-17T17:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198743",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:3'></a>I have uploaded a new version of the patch which makes a small change: rather than building the terms of the *derivative* of a *CycleIndexSeries* using an opaque list concatenation, I have used the *CycleIndexSeriesRing.term* method.



---

archive/issue_comments_198744.json:
```json
{
    "body": "<a id='comment:5'></a>Please make it clear whether the patch or the git branch should be merged. In the latter case, change the milestone to sage-6.0.",
    "created_at": "2013-08-19T06:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198744",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Please make it clear whether the patch or the git branch should be merged. In the latter case, change the milestone to sage-6.0.



---

archive/issue_comments_198745.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!\n+The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are not combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!\n \n In addition to being confusing, this discrepancy has the potential to hinder work using the *CycleIndexSeries* class. The combinatorial operation of cycle index differentiation is very useful in enumerative work.\n \n```\n",
    "created_at": "2013-08-29T15:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198745",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!
+The *CycleIndexSeries* class inherits *derivative*, *integral*, and *exponential* methods from its parent class *LazyPowerSeries*. However, these operations (which are perfectly reasonable at the *LazyPowerSeries* level) are not combinatorially natural. In fact, there is a differentiation operator on cycle index series, but it's something entirely different, and anti-differentiation is in general impossible!
 
 In addition to being confusing, this discrepancy has the potential to hinder work using the *CycleIndexSeries* class. The combinatorial operation of cycle index differentiation is very useful in enumerative work.
 
```




---

archive/issue_comments_198746.json:
```json
{
    "body": "<a id='comment:8'></a>Rebased patch to apply over 5.12.beta4.",
    "created_at": "2013-09-03T16:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198746",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:8'></a>Rebased patch to apply over 5.12.beta4.



---

archive/issue_comments_198747.json:
```json
{
    "body": "<a id='comment:9'></a>Attachment [trac_14846_cis_deriv_int_exp_methods.patch](tarball://root/attachments/some-uuid/ticket14846/trac_14846_cis_deriv_int_exp_methods.patch) by @fchapoton created at 2013-10-24 10:14:31\n\nCould you please add doctests to the three _lps functions ?",
    "created_at": "2013-10-24T10:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198747",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>Attachment [trac_14846_cis_deriv_int_exp_methods.patch](tarball://root/attachments/some-uuid/ticket14846/trac_14846_cis_deriv_int_exp_methods.patch) by @fchapoton created at 2013-10-24 10:14:31

Could you please add doctests to the three _lps functions ?



---

archive/issue_comments_198748.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-10-24T10:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198748",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_198749.json:
```json
{
    "body": "<a id='comment:10'></a>Skeletal doctests added for the three _lps_* functions. I have no idea whether this is the *right* way to test this sort of method, but at least it's *a* test.\n\nAdditionally, I've switched back over to using Git to manage this\u2014the old Mercurial workflow is just too confusing. How do I tell the build bot to ignore the attachments and only use the branch?",
    "created_at": "2013-11-23T17:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198749",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:10'></a>Skeletal doctests added for the three _lps_* functions. I have no idea whether this is the *right* way to test this sort of method, but at least it's *a* test.

Additionally, I've switched back over to using Git to manage this—the old Mercurial workflow is just too confusing. How do I tell the build bot to ignore the attachments and only use the branch?



---

archive/issue_events_042637.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/agd",
    "created_at": "2013-11-23T17:01:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42637"
}
```



---

archive/issue_comments_198750.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-11-23T17:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198750",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_042638.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42638"
}
```



---

archive/issue_events_042639.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42639"
}
```



---

archive/issue_comments_198751.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-25T19:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198752.json:
```json
{
    "body": "<a id='comment:14'></a>Hi Andrew,\n\nI'd suggest to really remove access to the three inherited methods, and rewrite the methods that use _lps_exponential accordingly:\n\n* in set_species, we really want to return the \"true\" exponential cycle index series\n* in partition_species, the \"true\" exponential of the \"true\" exponential - 1\n* in subset_species, the square of the \"true\" exponential\n\nFinally, the implementation of the \"true\" exponential can be taken from what's in set_species in sage 6.0.\n\nAs far as I can see, the other two methods _lps_derivative and _lps_integral are not used anywhere.\n\nThis might have a speed penalty, but I'd worry about that only if it's serious.  I think it's not a good idea to make the cycle index series depend on the species code, as in the proposed patch.\n\nI would perhaps also put the definition for the combinatorial logarithm into the same file.  I think at some point we should reorganise the files in the species directory..\n\nMartin",
    "created_at": "2013-12-31T22:49:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198752",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:14'></a>Hi Andrew,

I'd suggest to really remove access to the three inherited methods, and rewrite the methods that use _lps_exponential accordingly:

* in set_species, we really want to return the "true" exponential cycle index series
* in partition_species, the "true" exponential of the "true" exponential - 1
* in subset_species, the square of the "true" exponential

Finally, the implementation of the "true" exponential can be taken from what's in set_species in sage 6.0.

As far as I can see, the other two methods _lps_derivative and _lps_integral are not used anywhere.

This might have a speed penalty, but I'd worry about that only if it's serious.  I think it's not a good idea to make the cycle index series depend on the species code, as in the proposed patch.

I would perhaps also put the definition for the combinatorial logarithm into the same file.  I think at some point we should reorganise the files in the species directory..

Martin



---

archive/issue_comments_198753.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-01T02:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198754.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks for the suggestions!\n\nReplying to [comment:14 mantepse]:\n> I'd suggest to really remove access to the three inherited methods, and rewrite the methods that use _lps_exponential accordingly:\n\n\nSounds good to me. Done, in the latest push.\n\n> * in set_species, we really want to return the \"true\" exponential cycle index series\n> * in partition_species, the \"true\" exponential of the \"true\" exponential - 1\n> * in subset_species, the square of the \"true\" exponential\n\n\nI have rewritten all of these to use algebraic operations on the exponential CIS.\n\n> As far as I can see, the other two methods _lps_derivative and _lps_integral are not used anywhere.\n\n\nSeems to be true. I just included them for completeness. They're gone now.\n \n> This might have a speed penalty, but I'd worry about that only if it's serious.  I think it's not a good idea to make the cycle index series depend on the species code, as in the proposed patch.\n\n\nActually, I think the new way should actually be *faster*, there's just one instance of the exponential series which gets cached and handed around.\n\n> I would perhaps also put the definition for the combinatorial logarithm into the same file.\n\n\nOnce I wrote the other stuff, this seemed very reasonable, so I've done that as well.",
    "created_at": "2014-01-01T02:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198754",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:16'></a>Thanks for the suggestions!

Replying to [comment:14 mantepse]:
> I'd suggest to really remove access to the three inherited methods, and rewrite the methods that use _lps_exponential accordingly:


Sounds good to me. Done, in the latest push.

> * in set_species, we really want to return the "true" exponential cycle index series
> * in partition_species, the "true" exponential of the "true" exponential - 1
> * in subset_species, the square of the "true" exponential


I have rewritten all of these to use algebraic operations on the exponential CIS.

> As far as I can see, the other two methods _lps_derivative and _lps_integral are not used anywhere.


Seems to be true. I just included them for completeness. They're gone now.
 
> This might have a speed penalty, but I'd worry about that only if it's serious.  I think it's not a good idea to make the cycle index series depend on the species code, as in the proposed patch.


Actually, I think the new way should actually be *faster*, there's just one instance of the exponential series which gets cached and handed around.

> I would perhaps also put the definition for the combinatorial logarithm into the same file.


Once I wrote the other stuff, this seemed very reasonable, so I've done that as well.



---

archive/issue_comments_198755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-01T21:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198755",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198756.json:
```json
{
    "body": "<a id='comment:18'></a>Reviewer name must be full name. Also please fill in your name on the trac.sagemath.org homepage.",
    "created_at": "2014-01-06T04:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198756",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Reviewer name must be full name. Also please fill in your name on the trac.sagemath.org homepage.



---

archive/issue_comments_198757.json:
```json
{
    "body": "Changing keywords from \"\" to \"LazyPowerSeries, species\".",
    "created_at": "2014-01-14T20:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198757",
    "user": "https://github.com/mantepse"
}
```

Changing keywords from "" to "LazyPowerSeries, species".



---

archive/issue_comments_198758.json:
```json
{
    "body": "<a id='comment:21'></a>One (minor) issue is the removal of combinatorial_logarithm.py which might need to be deprecated.  I've also done a \"rebase\" of this on top of #15673 which makes the code a little bit cleaner.  This is in branch \"u/mhansen/ticket/14846\" .  Ideally, I'd prefer to have #15673 go in first since the rebase/merge of this ticket is easier than the other way around.\n\nSee http://git.sagemath.org/sage.git/log/?h=u/mhansen/ticket/14846",
    "created_at": "2014-01-15T16:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198758",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:21'></a>One (minor) issue is the removal of combinatorial_logarithm.py which might need to be deprecated.  I've also done a "rebase" of this on top of #15673 which makes the code a little bit cleaner.  This is in branch "u/mhansen/ticket/14846" .  Ideally, I'd prefer to have #15673 go in first since the rebase/merge of this ticket is easier than the other way around.

See http://git.sagemath.org/sage.git/log/?h=u/mhansen/ticket/14846



---

archive/issue_comments_198759.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2014-01-15T16:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198759",
    "user": "https://github.com/mwhansen"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_events_042640.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42640"
}
```



---

archive/issue_events_042641.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42641"
}
```



---

archive/issue_comments_198760.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2014-02-09T19:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_198761.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T20:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198761",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_198762.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:21 mhansen]:\n> One (minor) issue is the removal of combinatorial_logarithm.py which might need to be deprecated.  \n\n\nAh, yes, this is an important point. I sometimes forget that other people might have used my code\u2026 =D\n\n> I've also done a \"rebase\" of this on top of #15673 which makes the code a little bit cleaner.  This is in branch \"u/mhansen/ticket/14846\" .  Ideally, I'd prefer to have #15673 go in first since the rebase/merge of this ticket is easier than the other way around.\n\n\nI don't yet understand everything that's happening with #15673, but I'm starting to take a look at it. I'm definitely open to the idea, though\u2014better series code will make all our work easier! I've taken a look at your rebased version of this, and have a few thoughts up-front:\n\n* In the docstring for the deprecated `CombinatorialLogarithmSeries()`, you point the reader to `CycleIndexSeriesRing(R).exponential()`, but in fact this should be to `CycleIndexSeriesRing(R).omega()`.\n\n* Relatedly, I'd argue that the `CycleIndexSeriesRing(R).omega()` and `CycleIndexSeriesRing(R).exponential()` methods should instead be named `logarithm_series()` and `exponential_series()`. In the first place, the \u03a9 notation is not totally standard (it's used by Labelle, but other authors have called this virtual species \"Con\" or other things); in the second, I think it's conceptually important to emphasize that these objects are //series// and not //operations//, since the operations are implemented as `CycleIndexSeries().exponential()` and `CycleIndexSeries().logarithm()` respectively. (Of course, the documentation should mention the relationship between the two!)\n\n* `CycleIndexSeriesRing.LogarithmStream` appears to be internal, so the docstring of `CycleIndexSeries.logarithm()` should refer instead to `CycleIndexSeriesRing.logarithm_series`.\n\nI've updated the ticket branch to use your code with these changes. I've also set a dependency on #15673. (Evidently, I bungled the ticket modifications a bit, but I think it's all sorted now.)\n\n---\nNew commits:\n> |                                                                                                                                          |                                                              |\n> |------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n> |[6989f3f](http://git.sagemath.org/sage.git/commit/?id=6989f3f5240b91bfb3d9cdfe62612bddf5e9adfd)|`Merge remote-tracking branch 'origin/develop' into cis-deriv`|\n> |[2d3b466](http://git.sagemath.org/sage.git/commit/?id=2d3b46683d9cd567a75a9c737f248fd95b69354b)|`Merge remote-tracking branch 'origin/u/mhansen/ticket/14846' into cis-deriv`|\n> |[4efe9b0](http://git.sagemath.org/sage.git/commit/?id=4efe9b08164bf688e15ef3729858a4eb2996e7c2)|`Rename CycleIndexSeriesRing.omega() to logarithm_series`|\n> |[334c095](http://git.sagemath.org/sage.git/commit/?id=334c0956250038eae2d6efc915231e650b13be79)|`Rename CycleIndexSeriesRing().exponential() to exponential_series()`|",
    "created_at": "2014-02-09T20:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198762",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:25'></a>Replying to [comment:21 mhansen]:
> One (minor) issue is the removal of combinatorial_logarithm.py which might need to be deprecated.  


Ah, yes, this is an important point. I sometimes forget that other people might have used my code… =D

> I've also done a "rebase" of this on top of #15673 which makes the code a little bit cleaner.  This is in branch "u/mhansen/ticket/14846" .  Ideally, I'd prefer to have #15673 go in first since the rebase/merge of this ticket is easier than the other way around.


I don't yet understand everything that's happening with #15673, but I'm starting to take a look at it. I'm definitely open to the idea, though—better series code will make all our work easier! I've taken a look at your rebased version of this, and have a few thoughts up-front:

* In the docstring for the deprecated `CombinatorialLogarithmSeries()`, you point the reader to `CycleIndexSeriesRing(R).exponential()`, but in fact this should be to `CycleIndexSeriesRing(R).omega()`.

* Relatedly, I'd argue that the `CycleIndexSeriesRing(R).omega()` and `CycleIndexSeriesRing(R).exponential()` methods should instead be named `logarithm_series()` and `exponential_series()`. In the first place, the Ω notation is not totally standard (it's used by Labelle, but other authors have called this virtual species "Con" or other things); in the second, I think it's conceptually important to emphasize that these objects are //series// and not //operations//, since the operations are implemented as `CycleIndexSeries().exponential()` and `CycleIndexSeries().logarithm()` respectively. (Of course, the documentation should mention the relationship between the two!)

* `CycleIndexSeriesRing.LogarithmStream` appears to be internal, so the docstring of `CycleIndexSeries.logarithm()` should refer instead to `CycleIndexSeriesRing.logarithm_series`.

I've updated the ticket branch to use your code with these changes. I've also set a dependency on #15673. (Evidently, I bungled the ticket modifications a bit, but I think it's all sorted now.)

---
New commits:
> |                                                                                                                                          |                                                              |
> |------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
> |[6989f3f](http://git.sagemath.org/sage.git/commit/?id=6989f3f5240b91bfb3d9cdfe62612bddf5e9adfd)|`Merge remote-tracking branch 'origin/develop' into cis-deriv`|
> |[2d3b466](http://git.sagemath.org/sage.git/commit/?id=2d3b46683d9cd567a75a9c737f248fd95b69354b)|`Merge remote-tracking branch 'origin/u/mhansen/ticket/14846' into cis-deriv`|
> |[4efe9b0](http://git.sagemath.org/sage.git/commit/?id=4efe9b08164bf688e15ef3729858a4eb2996e7c2)|`Rename CycleIndexSeriesRing.omega() to logarithm_series`|
> |[334c095](http://git.sagemath.org/sage.git/commit/?id=334c0956250038eae2d6efc915231e650b13be79)|`Rename CycleIndexSeriesRing().exponential() to exponential_series()`|



---

archive/issue_comments_198763.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-10T15:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198763",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198764.json:
```json
{
    "body": "<a id='comment:28'></a>Cool, your changes look good to me!",
    "created_at": "2014-02-10T15:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198764",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:28'></a>Cool, your changes look good to me!



---

archive/issue_events_042642.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42642"
}
```



---

archive/issue_events_042643.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42643"
}
```



---

archive/issue_comments_198765.json:
```json
{
    "body": "<a id='comment:30'></a>While #15673 looks like it will bring some much-needed improvements to the algebraic machinery of species in Sage, it also looks like it's going to take a while to implement. I've been fielding questions from other researchers who would like to use the code in #14347, which definitely depends on this one, so I'd be very grateful if we could move forward on this one now. I will, of course, be happy to revisit the issue in the context of #15673 once that situation stabilizes!",
    "created_at": "2014-08-01T14:20:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198765",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:30'></a>While #15673 looks like it will bring some much-needed improvements to the algebraic machinery of species in Sage, it also looks like it's going to take a while to implement. I've been fielding questions from other researchers who would like to use the code in #14347, which definitely depends on this one, so I'd be very grateful if we could move forward on this one now. I will, of course, be happy to revisit the issue in the context of #15673 once that situation stabilizes!



---

archive/issue_events_042644.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42644"
}
```



---

archive/issue_events_042645.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42645"
}
```



---

archive/issue_comments_198766.json:
```json
{
    "body": "<a id='comment:32'></a>I agree.  I wonder what happened to #16137.",
    "created_at": "2014-08-13T09:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198766",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:32'></a>I agree.  I wonder what happened to #16137.



---

archive/issue_events_042646.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-23T19:48:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42646"
}
```



---

archive/issue_events_042647.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-23T19:48:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42647"
}
```



---

archive/issue_comments_198767.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-29T22:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_198768.json:
```json
{
    "body": "<a id='comment:35'></a>Since #15673 seems to have died on the vine, I have rebuilt the code for this commit on top of current mainline Sage 6.7. All doctests in `combinat/species` pass.",
    "created_at": "2015-05-29T22:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198768",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

<a id='comment:35'></a>Since #15673 seems to have died on the vine, I have rebuilt the code for this commit on top of current mainline Sage 6.7. All doctests in `combinat/species` pass.



---

archive/issue_events_042648.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/agd",
    "created_at": "2015-05-31T22:40:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42648"
}
```



---

archive/issue_events_042649.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/agd",
    "created_at": "2015-05-31T22:40:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42649"
}
```



---

archive/issue_comments_198769.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-31T22:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198769",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_198770.json:
```json
{
    "body": "<a id='comment:37'></a>I played with the code and the examples, and found myself happy.  For example,\n\n```\nsage: T = CombinatorialSpecies()\nsage: X = species.SingletonSpecies()\nsage: E = species.SetSpecies()\nsage: T.define(X*E(T))\nsage: s = T.cycle_index_series()\nsage: oeis(s.logarithm().generating_series().counts(12))\n0: A133297: a(n) = n!*Sum_{k=1..n} (-1)^(k+1)*n^(n-k-1)/(n-k)!.\nsage: oeis(s.pointing().generating_series().counts(12)[1:])\n0: A000312: Number of labeled mappings from n points to themselves (endofunctions): n^n.\n1: A177885: (1-n)^(n-1).\n2: A086783: Discriminant of the polynomial x^n - 1.\nsage: oeis(s.pointing().isotype_generating_series().counts(12)[1:])\n0: A000107: Number of rooted trees with n nodes and a single labeled node; pointed rooted trees; vertebrates.\n```\n\nThanks for the code and thanks for the patience!",
    "created_at": "2015-08-12T15:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198770",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:37'></a>I played with the code and the examples, and found myself happy.  For example,

```
sage: T = CombinatorialSpecies()
sage: X = species.SingletonSpecies()
sage: E = species.SetSpecies()
sage: T.define(X*E(T))
sage: s = T.cycle_index_series()
sage: oeis(s.logarithm().generating_series().counts(12))
0: A133297: a(n) = n!*Sum_{k=1..n} (-1)^(k+1)*n^(n-k-1)/(n-k)!.
sage: oeis(s.pointing().generating_series().counts(12)[1:])
0: A000312: Number of labeled mappings from n points to themselves (endofunctions): n^n.
1: A177885: (1-n)^(n-1).
2: A086783: Discriminant of the polynomial x^n - 1.
sage: oeis(s.pointing().isotype_generating_series().counts(12)[1:])
0: A000107: Number of rooted trees with n nodes and a single labeled node; pointed rooted trees; vertebrates.
```

Thanks for the code and thanks for the patience!



---

archive/issue_comments_198771.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-12T15:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198771",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198772.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-13T18:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14846#issuecomment-198772",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_042650.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-13T18:35:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14846",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14846#event-42650"
}
```
