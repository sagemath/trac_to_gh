# Issue 14412: Bug in DiGraph.longest_path

archive/issues_014208.json:
```json
{
    "assignees": [],
    "body": "Reported by Nicolas Thiery :\n\n```\n        sage: l = [(0, 1), (0, 3), (2, 0)]\n        sage: G = DiGraph(l)\n        sage: G.longest_path().edges()\n        []\n```\n\nAssignee: **@jasongrout, @nathanncohen, @rlmill**\n\nCC:  @nthiery\n\nReviewer: **Nicolas M. Thi\u00e9ry**\n\nAuthor: **Nathann Cohen**\n\nMerged: **sage-5.10.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14412_\n\n",
    "closed_at": "2013-05-07T09:06:14Z",
    "created_at": "2013-04-04T16:40:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in DiGraph.longest_path",
    "type": "issue",
    "updated_at": "2013-05-07T09:06:14Z",
    "url": "https://github.com/sagemath/sage/issues/14412",
    "user": "https://github.com/nathanncohen"
}
```
Reported by Nicolas Thiery :

```
        sage: l = [(0, 1), (0, 3), (2, 0)]
        sage: G = DiGraph(l)
        sage: G.longest_path().edges()
        []
```

Assignee: **@jasongrout, @nathanncohen, @rlmill**

CC:  @nthiery

Reviewer: **Nicolas M. Thi√©ry**

Author: **Nathann Cohen**

Merged: **sage-5.10.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/14412_





---

archive/issue_events_186932.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T16:40:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186932"
}
```



---

archive/issue_events_186933.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T16:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186933"
}
```



---

archive/issue_events_186934.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T16:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186934"
}
```



---

archive/issue_events_186935.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T16:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186935"
}
```



---

archive/issue_comments_175979.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nMost stupig bug ever. I fixed it without noticing what I did, and it turns out that `DiGraph.incoming_edges()` can be called without any argument, which has no sensible meaning at all. Turns out that the code should have been calling `incoming_edges(v)` but called `incoming_edges()` instead `-_-`\n\nNeeds a review !\n\nNathann\n\n(I also moved a \"solver\" argument from one place to another, as this is the way things are done nowadays with the LP backends)",
    "created_at": "2013-04-04T17:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175979",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'>Comment 1:</a>
Most stupig bug ever. I fixed it without noticing what I did, and it turns out that `DiGraph.incoming_edges()` can be called without any argument, which has no sensible meaning at all. Turns out that the code should have been calling `incoming_edges(v)` but called `incoming_edges()` instead `-_-`

Needs a review !

Nathann

(I also moved a "solver" argument from one place to another, as this is the way things are done nowadays with the LP backends)



---

archive/issue_events_186936.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T17:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186936"
}
```



---

archive/issue_events_186937.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T17:09:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186937"
}
```



---

archive/issue_events_186938.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T17:09:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186938"
}
```



---

archive/issue_comments_175980.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\n(this patch also rewrites many lines using `<=` instead of `min/max` arguments. Easier to read.)\n\nNathann",
    "created_at": "2013-04-04T17:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175980",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'>Comment 3:</a>
(this patch also rewrites many lines using `<=` instead of `min/max` arguments. Easier to read.)

Nathann



---

archive/issue_events_186939.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T17:32:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186939"
}
```



---

archive/issue_events_186940.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-04T17:32:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186940"
}
```



---

archive/issue_comments_175981.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nHi Nathann,\n\nI just went through your patch, and it looks good. Thanks!\n\nSo positive review assuming all tests pass. I am going to kick to bot.",
    "created_at": "2013-04-12T20:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175981",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'>Comment 4:</a>
Hi Nathann,

I just went through your patch, and it looks good. Thanks!

So positive review assuming all tests pass. I am going to kick to bot.



---

archive/issue_events_186941.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-04-30T12:28:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186941"
}
```



---

archive/issue_events_186942.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-04-30T12:28:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186942"
}
```



---

archive/issue_comments_175982.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThis breaks the function \"a_long_simple_root\", see bot report",
    "created_at": "2013-04-30T12:28:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175982",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'>Comment 5:</a>
This breaks the function "a_long_simple_root", see bot report



---

archive/issue_comments_175983.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n> This breaks the function \"a_long_simple_root\", see bot report\n\nThat's crazy `O_o`\n\nNathann",
    "created_at": "2013-04-30T12:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175983",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'>Comment 6:</a>
> This breaks the function "a_long_simple_root", see bot report

That's crazy `O_o`

Nathann



---

archive/issue_comments_175984.json:
```json
{
    "body": "Attachment: **[trac_14412.patch.gz](https://github.com/sagemath/sage/files/ticket14412/trac_14412.patch.gz)**",
    "created_at": "2013-04-30T12:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175984",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_14412.patch.gz](https://github.com/sagemath/sage/files/ticket14412/trac_14412.patch.gz)**



---

archive/issue_comments_175985.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nFixed ! I also had the pleasure to read things like that in `root_lattice_realizations.py`...\n\n```\nCaveat: this may be break in affine type `A_{2n}^{(2)}`\nCaveat: meaningful/broken for non irreducible?\n.. TODO:: This implementation is only valid in the root or weight lattice \n```\n\nIt's a long way.... `>_<`\n\nNathann",
    "created_at": "2013-04-30T12:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175985",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'>Comment 7:</a>
Fixed ! I also had the pleasure to read things like that in `root_lattice_realizations.py`...

```
Caveat: this may be break in affine type `A_{2n}^{(2)}`
Caveat: meaningful/broken for non irreducible?
.. TODO:: This implementation is only valid in the root or weight lattice 
```

It's a long way.... `>_<`

Nathann



---

archive/issue_events_186943.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-30T12:43:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186943"
}
```



---

archive/issue_events_186944.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-30T12:43:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186944"
}
```



---

archive/issue_comments_175986.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@nathanncohen](#comment%3A7):\n> Fixed !\n\nThanks! I checked it, and it's good.\n\n> I also had the pleasure to read things like that in `root_lattice_realizations.py`...\n> \n> ```\n> Caveat: this may be break in affine type `A_{2n}^{(2)}`\n> Caveat: meaningful/broken for non irreducible?\n> .. TODO:: This implementation is only valid in the root or weight lattice \n> ```\n> \n> It's a long way.... `>_<`\n\nYes, the limitations of the algorithms are precisely documented. This in particular to prompt creative people to find better algorithms that will work in a more general setting (it's non trivial).\n\nAmiti\u00e9s.",
    "created_at": "2013-04-30T15:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175986",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@nathanncohen](#comment%3A7):
> Fixed !

Thanks! I checked it, and it's good.

> I also had the pleasure to read things like that in `root_lattice_realizations.py`...
> 
> ```
> Caveat: this may be break in affine type `A_{2n}^{(2)}`
> Caveat: meaningful/broken for non irreducible?
> .. TODO:: This implementation is only valid in the root or weight lattice 
> ```
> 
> It's a long way.... `>_<`

Yes, the limitations of the algorithms are precisely documented. This in particular to prompt creative people to find better algorithms that will work in a more general setting (it's non trivial).

Amiti√©s.



---

archive/issue_events_186945.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-04-30T15:03:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186945"
}
```



---

archive/issue_events_186946.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-04-30T15:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186946"
}
```



---

archive/issue_comments_175987.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nYoooooooooooo !\n\n> Yes, the limitations of the algorithms are precisely documented. This in particular to prompt creative people to find better algorithms that will work in a more general setting (it's non trivial).\n\n(with birds singing in the background) it is indeed a delight to see this small piece of software grow everyday, becoming more powerful and accurate. Wouldn't it be nice though if those cases raised an exception ? Some forgetful users may not read the documentation. Some functions that use this one may not contain the warning in their docstring. Our innocent users may be led to believe that this method and those that may depend on it always returns correct results even though its docstring states the opposite.\n\nAnd (without birds singing in the background) : it's not \"other people's job\" to add these tests in a code they did not write.\n\nNicolas. C'est dangereux ces trucs, tu sais bien... C'est des choses qu'on fait dans son code perso, pas dans du code qu'on partage.\n\nNathann",
    "created_at": "2013-04-30T15:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175987",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'>Comment 10:</a>
Yoooooooooooo !

> Yes, the limitations of the algorithms are precisely documented. This in particular to prompt creative people to find better algorithms that will work in a more general setting (it's non trivial).

(with birds singing in the background) it is indeed a delight to see this small piece of software grow everyday, becoming more powerful and accurate. Wouldn't it be nice though if those cases raised an exception ? Some forgetful users may not read the documentation. Some functions that use this one may not contain the warning in their docstring. Our innocent users may be led to believe that this method and those that may depend on it always returns correct results even though its docstring states the opposite.

And (without birds singing in the background) : it's not "other people's job" to add these tests in a code they did not write.

Nicolas. C'est dangereux ces trucs, tu sais bien... C'est des choses qu'on fait dans son code perso, pas dans du code qu'on partage.

Nathann



---

archive/issue_comments_175988.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry**",
    "created_at": "2013-05-01T20:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175988",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Nicolas M. Thi√©ry**



---

archive/issue_comments_175989.json:
```json
{
    "body": "Merged: **sage-5.10.beta2**",
    "created_at": "2013-05-07T09:06:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14412#issuecomment-175989",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta2**



---

archive/issue_events_186947.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-07T09:06:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186947"
}
```



---

archive/issue_events_186948.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-07T09:06:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14412",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14412#event-186948"
}
```
