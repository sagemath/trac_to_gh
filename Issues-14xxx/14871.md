# Issue 14871: method blocks_and_cuts_tree of a graph

archive/issues_014667.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "This ticket provides the blocks_and_cuts_tree of a graph.\n\nThis is easy to do using the existing blocks_and_cut_vertices method.\n\nCC:  @nathanncohen\n\nKeywords: **tree**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nMerged: **sage-5.12.beta1**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14871_\n\n",
    "closed_at": "2013-08-16T21:14:24Z",
    "created_at": "2013-07-09T14:58:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "method blocks_and_cuts_tree of a graph",
    "type": "issue",
    "updated_at": "2013-08-16T21:14:24Z",
    "url": "https://github.com/sagemath/sage/issues/14871",
    "user": "https://github.com/fchapoton"
}
```
This ticket provides the blocks_and_cuts_tree of a graph.

This is easy to do using the existing blocks_and_cut_vertices method.

CC:  @nathanncohen

Keywords: **tree**

Reviewer: **Nathann Cohen**

Author: **Frédéric Chapoton**

Merged: **sage-5.12.beta1**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/14871_





---

archive/issue_events_209500.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209500"
}
```



---

archive/issue_events_209501.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209501"
}
```



---

archive/issue_events_209502.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209502"
}
```



---

archive/issue_events_209503.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209503"
}
```



---

archive/issue_events_209504.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209504"
}
```



---

archive/issue_events_209505.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "subject": "https://github.com/fchapoton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209505"
}
```



---

archive/issue_events_209506.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "subject": "https://github.com/fchapoton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209506"
}
```



---

archive/issue_events_209507.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2013-07-09T14:58:45Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "subject": "https://github.com/fchapoton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209507"
}
```



---

archive/issue_comments_182233.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHmmm.. What would you think of implementing this feature as an option to `blocks_and_cut_vertices` then ? It could be renamed to `blocks_and_cuts` and return what `blocks_and_cut_vertices` does, or your tree instead, depending on the flags ?\n\nNathann",
    "created_at": "2013-07-09T15:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182233",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

Hmmm.. What would you think of implementing this feature as an option to `blocks_and_cut_vertices` then ? It could be renamed to `blocks_and_cuts` and return what `blocks_and_cut_vertices` does, or your tree instead, depending on the flags ?

Nathann



---

archive/issue_comments_182234.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI can do this if you prefer, sure. But will it really be simpler ? \n\nGain : one method less\n\nLoss : a more complicated method, with more parameters\n\nI hesitate..",
    "created_at": "2013-07-09T15:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182234",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

I can do this if you prefer, sure. But will it really be simpler ? 

Gain : one method less

Loss : a more complicated method, with more parameters

I hesitate..



---

archive/issue_events_209508.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T15:10:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209508"
}
```



---

archive/issue_comments_182235.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYeah, I know... Having two is simpler.\n\nI just don't like it, and I don't have any good argument for it. Sorry for that `:-/`\n\nCould you add some documentation saying what the tree actually returns ? I would have expected the output graph to be a block graph (http://en.wikipedia.org/wiki/Block_graph), i.e. the graph that you obtain from the input by adding an edge between any two vertices contained in the same block.\n\nWhat you do makes sense, but it would be nice to say that the new graph has different vertices, some of which representing the blocks some other vertices from the graph.\n\nI cannot see your code without thinking of \n\n```\nsage: g = Graph(); \nsage: g.add_path([0,(1,2),1,2]);\nsage: g.blocks_and_cuts_tree().is_tree()\nFalse\n```\n\nI know it's a stupid use case... What do you think ?\n\nNathann",
    "created_at": "2013-07-09T15:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182235",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Yeah, I know... Having two is simpler.

I just don't like it, and I don't have any good argument for it. Sorry for that `:-/`

Could you add some documentation saying what the tree actually returns ? I would have expected the output graph to be a block graph (http://en.wikipedia.org/wiki/Block_graph), i.e. the graph that you obtain from the input by adding an edge between any two vertices contained in the same block.

What you do makes sense, but it would be nice to say that the new graph has different vertices, some of which representing the blocks some other vertices from the graph.

I cannot see your code without thinking of 

```
sage: g = Graph(); 
sage: g.add_path([0,(1,2),1,2]);
sage: g.blocks_and_cuts_tree().is_tree()
False
```

I know it's a stupid use case... What do you think ?

Nathann



---

archive/issue_events_209509.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-09T15:23:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209509"
}
```



---

archive/issue_events_209510.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-09T15:23:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209510"
}
```



---

archive/issue_events_209511.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T15:53:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209511"
}
```



---

archive/issue_events_209512.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-09T15:53:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209512"
}
```



---

archive/issue_comments_182236.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nnew patch with better doc. \n\nDo you think I should handle your code-breaking use-case ? I would rather keep the code simple.",
    "created_at": "2013-07-09T15:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182236",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

new patch with better doc. 

Do you think I should handle your code-breaking use-case ? I would rather keep the code simple.



---

archive/issue_comments_182237.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> new patch with better doc. \n\nThanks !\n\n> Do you think I should handle your code-breaking use-case ? I would rather keep the code simple.\n\nIt would be nice indeed. What do you use this graph for, however ? Would the other definition of a \"block tree\" I gave above work for you ? It would be a way to avoid the problem, but if this tree does something you need that this other definition would not provide...\n\nI also think that it would be better to have a simple code `^^;`\n\nNathann",
    "created_at": "2013-07-09T16:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182237",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> new patch with better doc. 

Thanks !

> Do you think I should handle your code-breaking use-case ? I would rather keep the code simple.

It would be nice indeed. What do you use this graph for, however ? Would the other definition of a "block tree" I gave above work for you ? It would be a way to avoid the problem, but if this tree does something you need that this other definition would not provide...

I also think that it would be better to have a simple code `^^;`

Nathann



---

archive/issue_comments_182238.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_14871_blocks_cuts_tree.patch.gz](https://github.com/sagemath/sage/files/ticket14871/trac_14871_blocks_cuts_tree.patch.gz)**\n\nok, here is a new patch.\n\nI am not really **using** these trees in this way (attached to the block/cut decomposition  of graphs), but they have a role in what I am doing. And no other variant would be correct.",
    "created_at": "2013-07-09T19:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182238",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_14871_blocks_cuts_tree.patch.gz](https://github.com/sagemath/sage/files/ticket14871/trac_14871_blocks_cuts_tree.patch.gz)**

ok, here is a new patch.

I am not really **using** these trees in this way (attached to the block/cut decomposition  of graphs), but they have a role in what I am doing. And no other variant would be correct.



---

archive/issue_comments_182239.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHellooooooooo !!\n\n> ok, here is a new patch.\n\nWell, with these names for blocks and vertices we should be fine `:-)`\n\n> I am not really **using** these trees in this way (attached to the block/cut decomposition  of graphs), but they have a role in what I am doing. And no other variant would be correct.\n\nOkayy.. Anyway it is nice to be able to visualise this easily. And we will be able to change it eventually if we think of a better design.\n\n`Thaaaaaaaaaaaaanks` !\n\nNathann",
    "created_at": "2013-07-10T09:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182239",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

Hellooooooooo !!

> ok, here is a new patch.

Well, with these names for blocks and vertices we should be fine `:-)`

> I am not really **using** these trees in this way (attached to the block/cut decomposition  of graphs), but they have a role in what I am doing. And no other variant would be correct.

Okayy.. Anyway it is nice to be able to visualise this easily. And we will be able to change it eventually if we think of a better design.

`Thaaaaaaaaaaaaanks` !

Nathann



---

archive/issue_events_209513.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-10T09:54:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209513"
}
```



---

archive/issue_events_209514.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-10T09:54:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209514"
}
```



---

archive/issue_comments_182240.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2013-07-10T09:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182240",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_182241.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nArgggggg... I just noticed that these two functions have nothing to do in generic_graph.py. They should be in graph.py `:-/`\n\nAnyway. One of these days I really should go through all of them and move them where they belong `^^;`\n\nNathann",
    "created_at": "2013-07-10T09:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182241",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Argggggg... I just noticed that these two functions have nothing to do in generic_graph.py. They should be in graph.py `:-/`

Anyway. One of these days I really should go through all of them and move them where they belong `^^;`

Nathann



---

archive/issue_events_209515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:14:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209515"
}
```



---

archive/issue_events_209516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:14:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14871#event-209516"
}
```



---

archive/issue_comments_182242.json:
```json
{
    "body": "Merged: **sage-5.12.beta1**",
    "created_at": "2013-08-16T21:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14871",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14871#issuecomment-182242",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.12.beta1**
