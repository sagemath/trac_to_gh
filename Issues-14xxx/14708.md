# Issue 14708: Graph constructor forgets vertex labels

archive/issues_014504.json:
```json
{
    "body": "\n```\nsage: g = Graph()\nsage: g.add_vertex(0)\nsage: g.set_vertex(0, 'foo')\nsage: g.get_vertices()\n{0: 'foo'}\nsage: Graph(g).get_vertices()\n{0: None}\n```\nEdge labels are remembered, though:\n\n```\nsage: g.add_vertex(1)\nsage: g.add_edge(0,1, 'bar')\nsage: g.edges()\n[(0, 1, 'bar')]\nsage: Graph(g).edges()\n[(0, 1, 'bar')]\n```\n\nAssignee: jason, ncohen, rlm\n\nBranch/Commit: [e494dc55503e4d12af7d4bc4e60ac52b25840be9](https://github.com/sagemath/sagetrac-mirror/commit/e494dc55503e4d12af7d4bc4e60ac52b25840be9)\n\nReviewer: David Coudert\n\nAuthor: Rithesh K\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14708\n\n",
    "closed_at": "2019-04-27T17:44:34Z",
    "created_at": "2013-06-09T20:53:28Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Graph constructor forgets vertex labels",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14708",
    "user": "https://github.com/vbraun"
}
```

```
sage: g = Graph()
sage: g.add_vertex(0)
sage: g.set_vertex(0, 'foo')
sage: g.get_vertices()
{0: 'foo'}
sage: Graph(g).get_vertices()
{0: None}
```
Edge labels are remembered, though:

```
sage: g.add_vertex(1)
sage: g.add_edge(0,1, 'bar')
sage: g.edges()
[(0, 1, 'bar')]
sage: Graph(g).edges()
[(0, 1, 'bar')]
```

Assignee: jason, ncohen, rlm

Branch/Commit: [e494dc55503e4d12af7d4bc4e60ac52b25840be9](https://github.com/sagemath/sagetrac-mirror/commit/e494dc55503e4d12af7d4bc4e60ac52b25840be9)

Reviewer: David Coudert

Author: Rithesh K

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14708





---

archive/issue_comments_234889.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'm also totally confused about what `set_vertex()` is supposed to achieve. Vertices are already some object. Then you can associate another object to the vertex object. How is that different to just using a pair `(object1, object2)` as vertex?",
    "created_at": "2013-06-10T13:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234889",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
I'm also totally confused about what `set_vertex()` is supposed to achieve. Vertices are already some object. Then you can associate another object to the vertex object. How is that different to just using a pair `(object1, object2)` as vertex?



---

archive/issue_comments_234890.json:
```json
{
    "body": "<a id='comment:2'></a>\nSomewhat related:\n\n```\nsage: g = Graph()\nsage: g.set_vertex('foo', 'bar')\nsage: g.get_vertices()\n{}\n```\nOk, I would have expected a ValueError when calling `set_vertex()`. But fine, lets continue...\n\n```\nsage: g.add_vertex('foo')\nsage: g.get_vertices()\n{'foo': 'bar'}\n```\nwat?",
    "created_at": "2013-06-10T13:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234890",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
Somewhat related:

```
sage: g = Graph()
sage: g.set_vertex('foo', 'bar')
sage: g.get_vertices()
{}
```
Ok, I would have expected a ValueError when calling `set_vertex()`. But fine, lets continue...

```
sage: g.add_vertex('foo')
sage: g.get_vertices()
{'foo': 'bar'}
```
wat?



---

archive/issue_comments_234891.json:
```json
{
    "body": "<a id='comment:3'></a>\nI think that these \"vertex labels\" are meant to associate non-hashable values to a vertex (whose name must be hashable).\n\nI never used it, I also think that it is useless (just use an external dictionary..) and that we would be better without it.\n\nNathann",
    "created_at": "2013-06-11T12:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234891",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
I think that these "vertex labels" are meant to associate non-hashable values to a vertex (whose name must be hashable).

I never used it, I also think that it is useless (just use an external dictionary..) and that we would be better without it.

Nathann



---

archive/issue_events_048467.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48467"
}
```



---

archive/issue_events_048468.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48468"
}
```



---

archive/issue_events_048469.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48469"
}
```



---

archive/issue_events_048470.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48470"
}
```



---

archive/issue_events_048471.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48471"
}
```



---

archive/issue_events_048472.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48472"
}
```



---

archive/issue_events_048473.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48473"
}
```



---

archive/issue_comments_234892.json:
```json
{
    "body": "Changing stopgaps from \"\" to \"wrongAnswerMarker\"",
    "created_at": "2016-07-09T15:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234892",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

Changing stopgaps from "" to "wrongAnswerMarker"



---

archive/issue_comments_234893.json:
```json
{
    "body": "<a id='comment:9'></a>\nI would like to address the issue raised in the comments section.\n\nThis is the source code for the ***set_vertex()*** function for generic graphs\n\n```python\ndef set_vertex(self, vertex, object):\n    if hasattr(self, '_assoc') is False:\n        self._assoc = {}\n\n    self._assoc[vertex] = object\n```\n\nSince _assoc is a dictionary, even if the vertex isn't added beforehand (as in the example demonstrated in the comments section), the dictionary adds an entry into it. For example,\n\n```python\n>>> vert = {}\n>>> vert['foo'] = 'bar'\n>>> vert\n{'foo': 'bar'}\n```\n\nBut we are adding a new vertex only on the call of the method ***_backend.add_vertex()*** in the graph. Hence, on calling the method ***get_vertices()***, 'foo' was not displayed.\n\nBut remember that **_alloc** already has the dictionary entry {*foo*: *bar*}. So once the method ***add_vertex('foo')*** is called, the entry *foo* is added to the list of vertices in the graph, and so on calling get_vertices, the entry {*foo*: *bar*} is displayed.",
    "created_at": "2019-03-02T18:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234893",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:9'></a>
I would like to address the issue raised in the comments section.

This is the source code for the ***set_vertex()*** function for generic graphs

```python
def set_vertex(self, vertex, object):
    if hasattr(self, '_assoc') is False:
        self._assoc = {}

    self._assoc[vertex] = object
```

Since _assoc is a dictionary, even if the vertex isn't added beforehand (as in the example demonstrated in the comments section), the dictionary adds an entry into it. For example,

```python
>>> vert = {}
>>> vert['foo'] = 'bar'
>>> vert
{'foo': 'bar'}
```

But we are adding a new vertex only on the call of the method ***_backend.add_vertex()*** in the graph. Hence, on calling the method ***get_vertices()***, 'foo' was not displayed.

But remember that **_alloc** already has the dictionary entry {*foo*: *bar*}. So once the method ***add_vertex('foo')*** is called, the entry *foo* is added to the list of vertices in the graph, and so on calling get_vertices, the entry {*foo*: *bar*} is displayed.



---

archive/issue_comments_234894.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe issue in the comments is addressed in [https://trac.sagemath.org/ticket/27399](https://trac.sagemath.org/ticket/27399)",
    "created_at": "2019-03-02T18:56:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234894",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:10'></a>
The issue in the comments is addressed in [https://trac.sagemath.org/ticket/27399](https://trac.sagemath.org/ticket/27399)



---

archive/issue_comments_234895.json:
```json
{
    "body": "<a id='comment:11'></a>\nAre you also planning to work on the other issue: copy of vertex labels when calling `Graph(g)` or `DiGraph(g)` ?\n\nIf so, there is a minor improvement to do in `get_vertices`: no need to build the list of vertices. So\n\n```diff\n-        if verts is None:\n-            verts = list(self)\n+        if verts is None:\n+            verts = self\n```",
    "created_at": "2019-03-06T17:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234895",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>
Are you also planning to work on the other issue: copy of vertex labels when calling `Graph(g)` or `DiGraph(g)` ?

If so, there is a minor improvement to do in `get_vertices`: no need to build the list of vertices. So

```diff
-        if verts is None:
-            verts = list(self)
+        if verts is None:
+            verts = self
```



---

archive/issue_comments_234896.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis solution did not work. The problem still persist\n\n```\nsage: g.set_vertex(0, 'foo')\nsage: g.get_vertices()\n{0: 'foo', 1: None, 2: None, 3: None, 4: None}\nsage: Graph(g).get_vertices()\n{0: None, 1: None, 2: None, 3: None, 4: None}\n```\nI think the problem is in not communicating the labels of vertices in `g` to `Graph(g)`.\n\nIf we look at the `.set_vertex` method, we have\n\n```\nself._assoc[vertex] = object\n```\nwhich, I believe, is not being transferred to Graph(g). On the other hand, in the `.set_edge_label` method, we have\n\n```\nself._backend.set_edge_label(u, v, l, self._directed)\n```\nI am not yet sure how these two different implementations affect Graph(g), but edge labels are retained in Graph(g) but not vertex labels",
    "created_at": "2019-03-06T19:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234896",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:12'></a>
This solution did not work. The problem still persist

```
sage: g.set_vertex(0, 'foo')
sage: g.get_vertices()
{0: 'foo', 1: None, 2: None, 3: None, 4: None}
sage: Graph(g).get_vertices()
{0: None, 1: None, 2: None, 3: None, 4: None}
```
I think the problem is in not communicating the labels of vertices in `g` to `Graph(g)`.

If we look at the `.set_vertex` method, we have

```
self._assoc[vertex] = object
```
which, I believe, is not being transferred to Graph(g). On the other hand, in the `.set_edge_label` method, we have

```
self._backend.set_edge_label(u, v, l, self._directed)
```
I am not yet sure how these two different implementations affect Graph(g), but edge labels are retained in Graph(g) but not vertex labels



---

archive/issue_comments_234897.json:
```json
{
    "body": "<a id='comment:13'></a>\nAnd this is one more thing I've found: if `g` has multiple edges and loops, then `Graph(g)` allows loops but not multiple edges. But `Graph(g.edges())` allows both (with a warning to set `multiedges` flag to `True`).\n\n```\nsage: g = digraphs.DeBruijn(2,2)\nsage: g1 = Graph(g)\nsage: g1.edges()\n[('00', '00', '0'),\n ('00', '01', '1'),\n ('00', '10', '0'),\n ('01', '10', '0'),\n ('01', '11', '1'),\n ('10', '11', '0'),\n ('11', '11', '1')]\nsage: g2 = Graph(g.edges())\nsage: g2.edges()\n[('00', '00', '0'),\n ('00', '01', '1'),\n ('00', '10', '0'),\n ('01', '10', '0'),\n ('01', '10', '1'),\n ('01', '11', '1'),\n ('10', '11', '0'),\n ('11', '11', '1')]\n```",
    "created_at": "2019-03-06T19:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234897",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:13'></a>
And this is one more thing I've found: if `g` has multiple edges and loops, then `Graph(g)` allows loops but not multiple edges. But `Graph(g.edges())` allows both (with a warning to set `multiedges` flag to `True`).

```
sage: g = digraphs.DeBruijn(2,2)
sage: g1 = Graph(g)
sage: g1.edges()
[('00', '00', '0'),
 ('00', '01', '1'),
 ('00', '10', '0'),
 ('01', '10', '0'),
 ('01', '11', '1'),
 ('10', '11', '0'),
 ('11', '11', '1')]
sage: g2 = Graph(g.edges())
sage: g2.edges()
[('00', '00', '0'),
 ('00', '01', '1'),
 ('00', '10', '0'),
 ('01', '10', '0'),
 ('01', '10', '1'),
 ('01', '11', '1'),
 ('10', '11', '0'),
 ('11', '11', '1')]
```



---

archive/issue_comments_234898.json:
```json
{
    "body": "<a id='comment:14'></a>\nWhen calling `Graph(g)`, the constructor gives the same settings for loops and multiple edges to the resulting graph than `g`, and here, the digraph `g` has loops but no multiple edges. Hence the returned graph has no multiple edges.\n\nWhen a list of edges is given as input, we get a deprecation warning and the constructor sets parameter for multiple edges to True if necessary, but this behavior will soon be changed to False unless the user specifies `multiedges=True`.",
    "created_at": "2019-03-07T07:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234898",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
When calling `Graph(g)`, the constructor gives the same settings for loops and multiple edges to the resulting graph than `g`, and here, the digraph `g` has loops but no multiple edges. Hence the returned graph has no multiple edges.

When a list of edges is given as input, we get a deprecation warning and the constructor sets parameter for multiple edges to True if necessary, but this behavior will soon be changed to False unless the user specifies `multiedges=True`.



---

archive/issue_comments_234899.json:
```json
{
    "body": "<a id='comment:15'></a>\nOh ok Sir. Anything suggestions on comment 13?",
    "created_at": "2019-03-07T15:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234899",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:15'></a>
Oh ok Sir. Anything suggestions on comment 13?



---

archive/issue_comments_234900.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [gh-Rithesh17](#comment%3A15):\n> Oh ok Sir. Anything suggestions on comment 13?\n\n\nThe current behavior is the right one. So nothing to do for #comment:13.\n\nThere is however something to do for #comment:11",
    "created_at": "2019-03-07T15:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234900",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
Replying to [gh-Rithesh17](#comment%3A15):
> Oh ok Sir. Anything suggestions on comment 13?


The current behavior is the right one. So nothing to do for #comment:13.

There is however something to do for #comment:11



---

archive/issue_comments_234901.json:
```json
{
    "body": "<a id='comment:17'></a>\nSorry Sir. I meant any suggestion on comment 12.",
    "created_at": "2019-03-07T15:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234901",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:17'></a>
Sorry Sir. I meant any suggestion on comment 12.



---

archive/issue_comments_234902.json:
```json
{
    "body": "<a id='comment:18'></a>\nCheck the `Graph` and `DiGraph` constructors.",
    "created_at": "2019-03-08T17:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234902",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'></a>
Check the `Graph` and `DiGraph` constructors.



---

archive/issue_comments_234903.json:
```json
{
    "body": "<a id='comment:19'></a>\nI went through the `__init__` constructa of both `Graph` and `DiGraph` classes and found this line in both of them:\n\n```python\nself.add_vertices(data.vertex_iterator())\nself.add_edges(data.edge_iterator())\n```\nNow in the `vertex_iterator` there is no field for the labels\n\n```sage\nsage: g = digraphs.DeBruijn(2,2)\nsage: for v in g.vertex_iterator():\n....:     print(v)\n....:     \n11\n10\n00\n01\n```\nBut the labels are displayed in the case of `edge_iterator`\n\n```sage\nsage: for v in g.edge_iterator():\n....:     print(v)\n....:     \n('11', '10', '0')\n('11', '11', '1')\n('10', '00', '0')\n('10', '01', '1')\n('00', '00', '0')\n('00', '01', '1')\n('01', '10', '0')\n('01', '11', '1')\n```\nIf we need to modify into the `vertex_iterator` method. we must change the back-end code.\n\n```python\ndef vertex_iterator(self, vertices=None):\n    return self._backend.iterator_verts(vertices)\n```\nI'll have to look into the Pyrex file `basic/c_graph.pyx` to modify `_backend.iterator_verts(vertices)`, but can I do it? I generally would not like to touch the backend files because there could be many more methods using it",
    "created_at": "2019-03-09T10:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234903",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:19'></a>
I went through the `__init__` constructa of both `Graph` and `DiGraph` classes and found this line in both of them:

```python
self.add_vertices(data.vertex_iterator())
self.add_edges(data.edge_iterator())
```
Now in the `vertex_iterator` there is no field for the labels

```sage
sage: g = digraphs.DeBruijn(2,2)
sage: for v in g.vertex_iterator():
....:     print(v)
....:     
11
10
00
01
```
But the labels are displayed in the case of `edge_iterator`

```sage
sage: for v in g.edge_iterator():
....:     print(v)
....:     
('11', '10', '0')
('11', '11', '1')
('10', '00', '0')
('10', '01', '1')
('00', '00', '0')
('00', '01', '1')
('01', '10', '0')
('01', '11', '1')
```
If we need to modify into the `vertex_iterator` method. we must change the back-end code.

```python
def vertex_iterator(self, vertices=None):
    return self._backend.iterator_verts(vertices)
```
I'll have to look into the Pyrex file `basic/c_graph.pyx` to modify `_backend.iterator_verts(vertices)`, but can I do it? I generally would not like to touch the backend files because there could be many more methods using it



---

archive/issue_comments_234904.json:
```json
{
    "body": "<a id='comment:20'></a>\nPlease don't change the backend.\n\nWhat you must do is simply add `self.set_vertices(data.get_vertices())` at the right place in the `__init__` methods.",
    "created_at": "2019-03-09T10:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234904",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>
Please don't change the backend.

What you must do is simply add `self.set_vertices(data.get_vertices())` at the right place in the `__init__` methods.



---

archive/issue_comments_234905.json:
```json
{
    "body": "<a id='comment:21'></a>\nYeah. That's a simpler solution.\n\nI had to also modify `to_undirected` method in DiGraphs and `to_directed` method in Graphs to support vertex labels. And now it is working.\n\n```\nsage: g = Graph()\nsage: g.add_vertex(0)\nsage: g.set_vertex(0, 'foo')\nsage: g.get_vertices()\n{0: 'foo'}\nsage: Graph(g).get_vertices()\n{0: 'foo'}\n```\nDo I need to add a doctest for this?",
    "created_at": "2019-03-09T11:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234905",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:21'></a>
Yeah. That's a simpler solution.

I had to also modify `to_undirected` method in DiGraphs and `to_directed` method in Graphs to support vertex labels. And now it is working.

```
sage: g = Graph()
sage: g.add_vertex(0)
sage: g.set_vertex(0, 'foo')
sage: g.get_vertices()
{0: 'foo'}
sage: Graph(g).get_vertices()
{0: 'foo'}
```
Do I need to add a doctest for this?



---

archive/issue_comments_234906.json:
```json
{
    "body": "<a id='comment:22'></a>\nYes, you need to add a doctest with a pointer to this ticket, i.e., `:trac:`14708``",
    "created_at": "2019-03-09T17:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234906",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>
Yes, you need to add a doctest with a pointer to this ticket, i.e., `:trac:`14708``



---

archive/issue_comments_234907.json:
```json
{
    "body": "Changing author from \"\" to \"Rithesh K\"",
    "created_at": "2019-03-11T05:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234907",
    "user": "https://github.com/Rithesh17"
}
```

Changing author from "" to "Rithesh K"



---

archive/issue_comments_234908.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-Rithesh17/vertex-labels-in-graph-digraph\"",
    "created_at": "2019-03-11T05:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234908",
    "user": "https://github.com/Rithesh17"
}
```

Changing branch from "" to "u/gh-Rithesh17/vertex-labels-in-graph-digraph"



---

archive/issue_comments_234909.json:
```json
{
    "body": "<a id='comment:23'></a>\nNew commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[5f40353](https://github.com/sagemath/sagetrac-mirror/commit/5f40353c94f2710ef7bbeee631daf8fb79a5693f)|`error in vertex labelling in Graph() and DiGraph() modified`|",
    "created_at": "2019-03-11T05:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234909",
    "user": "https://github.com/Rithesh17"
}
```

<a id='comment:23'></a>
New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[5f40353](https://github.com/sagemath/sagetrac-mirror/commit/5f40353c94f2710ef7bbeee631daf8fb79a5693f)|`error in vertex labelling in Graph() and DiGraph() modified`|



---

archive/issue_comments_234910.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-11T05:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234910",
    "user": "https://github.com/Rithesh17"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_234911.json:
```json
{
    "body": "Changing commit from \"\" to \"5f40353c94f2710ef7bbeee631daf8fb79a5693f\"",
    "created_at": "2019-03-11T05:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234911",
    "user": "https://github.com/Rithesh17"
}
```

Changing commit from "" to "5f40353c94f2710ef7bbeee631daf8fb79a5693f"



---

archive/issue_comments_234912.json:
```json
{
    "body": "<a id='comment:24'></a>\nCan you change the first example in digraph.py to only `DiGraph`, so\n\n```diff\n-            sage: g = Graph()\n+            sage: g = DiGraph()\n```\nAlso, add ` (:trac:`14708`)` to each of the added doctests.",
    "created_at": "2019-03-11T08:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234912",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>
Can you change the first example in digraph.py to only `DiGraph`, so

```diff
-            sage: g = Graph()
+            sage: g = DiGraph()
```
Also, add ` (:trac:`14708`)` to each of the added doctests.



---

archive/issue_comments_234913.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2019-03-11T08:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234913",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_234914.json:
```json
{
    "body": "Changing commit from \"5f40353c94f2710ef7bbeee631daf8fb79a5693f\" to \"e494dc55503e4d12af7d4bc4e60ac52b25840be9\"",
    "created_at": "2019-03-11T09:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5f40353c94f2710ef7bbeee631daf8fb79a5693f" to "e494dc55503e4d12af7d4bc4e60ac52b25840be9"



---

archive/issue_comments_234915.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[e494dc5](https://github.com/sagemath/sagetrac-mirror/commit/e494dc55503e4d12af7d4bc4e60ac52b25840be9)|`error in vertex labelling in Graph() and DiGraph() modified`|",
    "created_at": "2019-03-11T09:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[e494dc5](https://github.com/sagemath/sagetrac-mirror/commit/e494dc55503e4d12af7d4bc4e60ac52b25840be9)|`error in vertex labelling in Graph() and DiGraph() modified`|



---

archive/issue_comments_234916.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-22T10:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234916",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_234917.json:
```json
{
    "body": "<a id='comment:26'></a>\nJust tested it over 8.8.beta3. LGTM.",
    "created_at": "2019-04-22T10:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234917",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>
Just tested it over 8.8.beta3. LGTM.



---

archive/issue_events_048474.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-22T10:04:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48474"
}
```



---

archive/issue_events_048475.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-22T10:04:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48475"
}
```



---

archive/issue_comments_234918.json:
```json
{
    "body": "Changing stopgaps from \"wrongAnswerMarker\" to \"\"",
    "created_at": "2019-04-22T10:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234918",
    "user": "https://github.com/dcoudert"
}
```

Changing stopgaps from "wrongAnswerMarker" to ""



---

archive/issue_comments_234919.json:
```json
{
    "body": "Changing branch from \"u/gh-Rithesh17/vertex-labels-in-graph-digraph\" to \"e494dc55503e4d12af7d4bc4e60ac52b25840be9\"",
    "created_at": "2019-04-27T17:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234919",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-Rithesh17/vertex-labels-in-graph-digraph" to "e494dc55503e4d12af7d4bc4e60ac52b25840be9"



---

archive/issue_comments_234920.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-27T17:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14708#issuecomment-234920",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048476.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-27T17:44:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14708",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14708#event-48476"
}
```
