# Issue 14596: Make a new optional spkg for pari's databases

archive/issues_014392.json:
```json
{
    "assignees": [],
    "body": "Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).\n\nA little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg)\n\n**apply**: [attachment: 14596_database_pari.patch](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)\n\nKeywords: **pari optional spkg**\n\nReviewer: **John Cremona**\n\nAuthor: **Jeroen Demeyer**\n\nMerged: **sage-5.10.beta4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14596_\n\n",
    "closed_at": "2013-05-20T08:52:27Z",
    "created_at": "2013-05-16T08:23:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make a new optional spkg for pari's databases",
    "type": "issue",
    "updated_at": "2013-05-20T09:53:21Z",
    "url": "https://github.com/sagemath/sage/issues/14596",
    "user": "https://github.com/JohnCremona"
}
```
Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).

A little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg)

**apply**: [attachment: 14596_database_pari.patch](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)

Keywords: **pari optional spkg**

Reviewer: **John Cremona**

Author: **Jeroen Demeyer**

Merged: **sage-5.10.beta4**

_Issue created by migration from https://trac.sagemath.org/ticket/14596_





---

archive/issue_events_189679.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-05-16T08:23:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189679"
}
```



---

archive/issue_events_189680.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-05-16T08:23:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189680"
}
```



---

archive/issue_events_189681.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-05-16T08:23:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189681"
}
```



---

archive/issue_events_189682.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-05-16T08:23:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189682"
}
```



---

archive/issue_comments_179426.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nHow about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?\n\nUpstream package list: [http://pari.math.u-bordeaux.fr/packages.html](http://pari.math.u-bordeaux.fr/packages.html)",
    "created_at": "2013-05-16T08:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179426",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">Comment 1</div>

How about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?

Upstream package list: [http://pari.math.u-bordeaux.fr/packages.html](http://pari.math.u-bordeaux.fr/packages.html)



---

archive/issue_events_189683.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T08:38:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "title_is": "Make a new optional spkg for pari's databases",
    "title_was": "Make a new optional spkg for pari's large seadata data",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189683"
}
```



---

archive/issue_comments_179427.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nReplying to [@jdemeyer](#comment%3A1):\n> How about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?\n> \n> Upstream package list: [http://pari.math.u-bordeaux.fr/packages.html](http://pari.math.u-bordeaux.fr/packages.html)\n\nWe may as well I suppose, though elldata is another 33MB and only duplicates (partially) our own optional database.  However, why should someone not be able to use a fully functional gp with all extras from Sage?  Let's do it.  In the first instance, let's just make the spkg and make no changes at all to the Sage library.",
    "created_at": "2013-05-16T09:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179427",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">Comment 2</div>

Replying to [@jdemeyer](#comment%3A1):
> How about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?
> 
> Upstream package list: [http://pari.math.u-bordeaux.fr/packages.html](http://pari.math.u-bordeaux.fr/packages.html)

We may as well I suppose, though elldata is another 33MB and only duplicates (partially) our own optional database.  However, why should someone not be able to use a fully functional gp with all extras from Sage?  Let's do it.  In the first instance, let's just make the spkg and make no changes at all to the Sage library.



---

archive/issue_comments_179428.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nReplying to [@JohnCremona](#comment%3A2):\n> We may as well I suppose, though elldata is another 33MB and only duplicates (partially) our own optional database.\n\nYes, it duplicates your database, but in PARI format as opposed to Sage format.",
    "created_at": "2013-05-16T09:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179428",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">Comment 3</div>

Replying to [@JohnCremona](#comment%3A2):
> We may as well I suppose, though elldata is another 33MB and only duplicates (partially) our own optional database.

Yes, it duplicates your database, but in PARI format as opposed to Sage format.



---

archive/issue_comments_179429.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2013-05-16T09:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179429",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_179430.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI'll work on this.",
    "created_at": "2013-05-16T09:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179430",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

I'll work on this.



---

archive/issue_comments_179431.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-It would be useful to have an optional spkg to make it easy to install the optional pari large seadata package.  This is used in point counting on elliptic curves over large prime fields (primes over 350 bits), and consists of data precomputed by David Kohel for his Magma Echidna package.\n+Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).\n \n-One merely has to download http://pari.math.u-bordeaux.fr/pub/pari/packages/seadata.tgz and unpack it into SAGE_ROOT/local/share/pari/seadata so the spkg will be very easy.\n-\n-A little harder would be to catch cases where the default installation fails and output a helpful message to the user suggesting that installing this additional package would be a good idea.  At 19MB we probably do not want to include this as standard, since there may be some Sage users who will never want to count points on elliptic curves.\n+A little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.\n``````\n",
    "created_at": "2013-05-16T09:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179431",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-It would be useful to have an optional spkg to make it easy to install the optional pari large seadata package.  This is used in point counting on elliptic curves over large prime fields (primes over 350 bits), and consists of data precomputed by David Kohel for his Magma Echidna package.
+Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).
 
-One merely has to download http://pari.math.u-bordeaux.fr/pub/pari/packages/seadata.tgz and unpack it into SAGE_ROOT/local/share/pari/seadata so the spkg will be very easy.
-
-A little harder would be to catch cases where the default installation fails and output a helpful message to the user suggesting that installing this additional package would be a good idea.  At 19MB we probably do not want to include this as standard, since there may be some Sage users who will never want to count points on elliptic curves.
+A little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.
``````




---

archive/issue_comments_179432.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@jdemeyer](#comment%3A1):\n> How about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?\n\nI wouldn't put all of them into one huge Sage package (unfortunately we don't have meta packages [yet]); I was even thinking of omitting `sea0` (and `sea2`) from `databases_pari_seadata[-large].spkg`, say.",
    "created_at": "2013-05-16T10:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179432",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@jdemeyer](#comment%3A1):
> How about shipping *all* PARI databases in one package (including `elldata`, `seadata`, `galpol` and `nftables`), analogous to how it's done for GAP?

I wouldn't put all of them into one huge Sage package (unfortunately we don't have meta packages [yet]); I was even thinking of omitting `sea0` (and `sea2`) from `databases_pari_seadata[-large].spkg`, say.



---

archive/issue_comments_179433.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nP.S.:  We could also provide a few *functions* in Sage to (download and) install the necessary parts.",
    "created_at": "2013-05-16T10:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179433",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">Comment 7</div>

P.S.:  We could also provide a few *functions* in Sage to (download and) install the necessary parts.



---

archive/issue_comments_179434.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@nexttime](#comment%3A7):\n> P.S.:  We could also provide a few *functions* in Sage to (download and) install the necessary parts.\n\nI think this is too complicated.  Only seadata and elldata are of any size, and they are not that big, and this will be optional.\n\nre PS: no, we should avoid functions which only work when Sage is running on an online machine.  It could hardly be simpler than\n\n```\nsage: install_package(\"pari-optional-packages\")\n``` \nanyway!",
    "created_at": "2013-05-16T11:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179434",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@nexttime](#comment%3A7):
> P.S.:  We could also provide a few *functions* in Sage to (download and) install the necessary parts.

I think this is too complicated.  Only seadata and elldata are of any size, and they are not that big, and this will be optional.

re PS: no, we should avoid functions which only work when Sage is running on an online machine.  It could hardly be simpler than

```
sage: install_package("pari-optional-packages")
``` 
anyway!



---

archive/issue_comments_179435.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@JohnCremona](#comment%3A8):\n> re PS: no, we should avoid functions which only work when Sage is running on an online machine.\n\nWell, we could e.g. build PARI's `elldata` from your data shipped with Sage (or the larger Sage optional package [if it is already installed]).\n\nI.e., not all functions would need internet access (although installing from a local/near copy would work as well anyway).  And the main point of the \"no internet access\" rule is that it should not *unexpectedly* happen, which certainly isn't the case when you attempt to install something (without previously having downloaded it).   \n\n\n\n\n> It could hardly be simpler than\n> \n> ```\n> sage: install_package(\"pari-optional-packages\")\n> ``` \n> anyway!\n\nOh, that [always] works without internet access? ;-)",
    "created_at": "2013-05-16T11:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179435",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@JohnCremona](#comment%3A8):
> re PS: no, we should avoid functions which only work when Sage is running on an online machine.

Well, we could e.g. build PARI's `elldata` from your data shipped with Sage (or the larger Sage optional package [if it is already installed]).

I.e., not all functions would need internet access (although installing from a local/near copy would work as well anyway).  And the main point of the "no internet access" rule is that it should not *unexpectedly* happen, which certainly isn't the case when you attempt to install something (without previously having downloaded it).   




> It could hardly be simpler than
> 
> ```
> sage: install_package("pari-optional-packages")
> ``` 
> anyway!

Oh, that [always] works without internet access? ;-)



---

archive/issue_comments_179436.json:
```json
{
    "body": "Attachment: **[14596_database_pari.patch.gz](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)**",
    "created_at": "2013-05-17T10:40:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179436",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[14596_database_pari.patch.gz](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)**



---

archive/issue_comments_179437.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).\n \n A little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg)\n+\n+**apply**: [attachment: 14596_database_pari.patch](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)\n``````\n",
    "created_at": "2013-05-17T10:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179437",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 Package all optional PARI databases (except `galdata` which is standard and including in Sage's PARI spkg).
 
 A little harder would be to catch cases where the default installation fails to compute some `ellap()` and output a helpful message to the user suggesting that installing this additional package would be a good idea.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/database_pari-20130516.spkg)
+
+**apply**: [attachment: 14596_database_pari.patch](https://github.com/sagemath/sage/files/ticket14596/14596_database_pari.patch.gz)
``````




---

archive/issue_events_189684.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T10:41:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189684"
}
```



---

archive/issue_comments_179438.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nAny chance for a review? The `spkg-install` is totally trivial (just copy some files), so a review can be easy.\n\nI know that a lot of improvements are still possible, but this should do the job.",
    "created_at": "2013-05-17T18:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179438",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

Any chance for a review? The `spkg-install` is totally trivial (just copy some files), so a review can be easy.

I know that a lot of improvements are still possible, but this should do the job.



---

archive/issue_comments_179439.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\n`spkg-check` looks a bit funny.   First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode (without any additional message referring to the database(s) subject to installation).\n\n\n\n\nSince this is an optional spkg, I'd not rely on `SAGE_SRC` (and `SAGE_SHARE`, which you don't use [yet]) being defined, both being relatively new, but use `${SAGE_SRC:-${SAGE_ROOT}/devel/sage}` etc. instead, or do\n\n```sh\n[[ -z \"$SAGE_SRC\" ]] && SAGE_SRC=\"${SAGE_ROOT}/devel/sage\"\n\n[[ -z \"$SAGE_SHARE\" ]] && SAGE_SHARE=\"${SAGE_LOCAL}/share\"\n```\n\n(Then I'd use `\"${SAGE_SHARE}/pari/\" as the destination directory.)\n\nI'd also rather use `gp` in `spkg-check`, or do some simpler sanity check on the installed files.",
    "created_at": "2013-05-17T19:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179439",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">Comment 12</div>

`spkg-check` looks a bit funny.   First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode (without any additional message referring to the database(s) subject to installation).




Since this is an optional spkg, I'd not rely on `SAGE_SRC` (and `SAGE_SHARE`, which you don't use [yet]) being defined, both being relatively new, but use `${SAGE_SRC:-${SAGE_ROOT}/devel/sage}` etc. instead, or do

```sh
[[ -z "$SAGE_SRC" ]] && SAGE_SRC="${SAGE_ROOT}/devel/sage"

[[ -z "$SAGE_SHARE" ]] && SAGE_SHARE="${SAGE_LOCAL}/share"
```

(Then I'd use `"${SAGE_SHARE}/pari/" as the destination directory.)

I'd also rather use `gp` in `spkg-check`, or do some simpler sanity check on the installed files.



---

archive/issue_comments_179440.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nOh, we even have `GP_DATA_DIR` defined in `sage-env`.",
    "created_at": "2013-05-17T19:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179440",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">Comment 13</div>

Oh, we even have `GP_DATA_DIR` defined in `sage-env`.



---

archive/issue_comments_179441.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@nexttime](#comment%3A12):\n> First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode\n\n3 true statements, but is any of them a problem?",
    "created_at": "2013-05-17T19:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179441",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@nexttime](#comment%3A12):
> First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode

3 true statements, but is any of them a problem?



---

archive/issue_comments_179442.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nAlso, the `cp` (without `-f`) will fail if the user decided to make the already installed databases read-only (which IMHO isn't *that* unreasonable).",
    "created_at": "2013-05-17T20:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179442",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">Comment 15</div>

Also, the `cp` (without `-f`) will fail if the user decided to make the already installed databases read-only (which IMHO isn't *that* unreasonable).



---

archive/issue_comments_179443.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@jdemeyer](#comment%3A14):\n> Replying to [@nexttime](#comment%3A12):\n> > First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode\n\n> 3 true statements, but is any of them a problem?\n\nWell, why use `-p`?  Why verbose?  Especially the combination seems weird.\n\n(Hopefully the doctesting framework doesn't parse the `--long` into a number of threads, don't know.)\n\nIf installing it with `SAGE_CHECK=yes` (probably not specifically set for that installation) requires the Sage library (or likewise, perhaps `gp`), you can't (successfully) install it in advance.\n\nIMHO unnecessary pitfalls.",
    "created_at": "2013-05-17T20:39:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179443",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@jdemeyer](#comment%3A14):
> Replying to [@nexttime](#comment%3A12):
> > First, it depends on the Sage library, second, it uses `-tp`, and even runs the tests in verbose mode

> 3 true statements, but is any of them a problem?

Well, why use `-p`?  Why verbose?  Especially the combination seems weird.

(Hopefully the doctesting framework doesn't parse the `--long` into a number of threads, don't know.)

If installing it with `SAGE_CHECK=yes` (probably not specifically set for that installation) requires the Sage library (or likewise, perhaps `gp`), you can't (successfully) install it in advance.

IMHO unnecessary pitfalls.



---

archive/issue_comments_179444.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@nexttime](#comment%3A15):\n> Also, the `cp` (without `-f`) will fail if the user decided to make the already installed databases read-only\n\nSure, and it **should** fail in such a case.",
    "created_at": "2013-05-17T22:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179444",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@nexttime](#comment%3A15):
> Also, the `cp` (without `-f`) will fail if the user decided to make the already installed databases read-only

Sure, and it **should** fail in such a case.



---

archive/issue_comments_179445.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@nexttime](#comment%3A16):\n> Well, why use `-p`?\n\nBecause I expect\n\n```\nenv SAGE_CHECK=yes MAKE=\"make -j20\" ./sage -i database_pari\n```\nto use 20 threads, both for installing (which is pointless for this spkg) and for testing.\n\n> Why verbose?\n\nBecause one test takes an annoyingly long time (about 2 minutes), and with `--verbose` you will at least see something happening, at least the message \"# long time\" should be seen. But I can certainly change this if it means positive_review.\n\n> Hopefully the doctesting framework doesn't parse the `--long` into a number of threads\n\nNo, it doesn't.\n\n> If installing it with `SAGE_CHECK=yes` requires the Sage library (or likewise, perhaps `gp`), you can't (successfully) install it in advance.\n\nAnother true statement... many optional packages cannot be installed \"in advance\", so why would this be a problem?",
    "created_at": "2013-05-17T22:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179445",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@nexttime](#comment%3A16):
> Well, why use `-p`?

Because I expect

```
env SAGE_CHECK=yes MAKE="make -j20" ./sage -i database_pari
```
to use 20 threads, both for installing (which is pointless for this spkg) and for testing.

> Why verbose?

Because one test takes an annoyingly long time (about 2 minutes), and with `--verbose` you will at least see something happening, at least the message "# long time" should be seen. But I can certainly change this if it means positive_review.

> Hopefully the doctesting framework doesn't parse the `--long` into a number of threads

No, it doesn't.

> If installing it with `SAGE_CHECK=yes` requires the Sage library (or likewise, perhaps `gp`), you can't (successfully) install it in advance.

Another true statement... many optional packages cannot be installed "in advance", so why would this be a problem?



---

archive/issue_comments_179446.json:
```json
{
    "body": "spkg contents",
    "created_at": "2013-05-17T22:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179446",
    "user": "https://github.com/jdemeyer"
}
```

spkg contents



---

archive/issue_comments_179447.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nAttachment: **[database_pari-20130516.diff.gz](https://github.com/sagemath/sage/files/ticket14596/database_pari-20130516.diff.gz)**\n\nI made a few small changes: removed `--verbose` testing, use `GP_DATA_DIR` environment variable, check that all used variables are defined.",
    "created_at": "2013-05-18T07:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179447",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

Attachment: **[database_pari-20130516.diff.gz](https://github.com/sagemath/sage/files/ticket14596/database_pari-20130516.diff.gz)**

I made a few small changes: removed `--verbose` testing, use `GP_DATA_DIR` environment variable, check that all used variables are defined.



---

archive/issue_comments_179448.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nI checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did \"make ptestlong\" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.\n\nI don't know why this happened but it is clearly not the fault of anything on this ticket.",
    "created_at": "2013-05-19T17:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179448",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:20" align="right">Comment 20</div>

I checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did "make ptestlong" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.

I don't know why this happened but it is clearly not the fault of anything on this ticket.



---

archive/issue_comments_179449.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@JohnCremona](#comment%3A20):\n> I checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did \"make ptestlong\" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.\n> \n> I don't know why this happened but it is clearly not the fault of anything on this ticket.\n\nAll tests pass, and I also tested installing the spkg with SAGE_CHECK=yes, and doctesting the patched file before and after installing the spkg.  Positive review.",
    "created_at": "2013-05-19T18:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179449",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@JohnCremona](#comment%3A20):
> I checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did "make ptestlong" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.
> 
> I don't know why this happened but it is clearly not the fault of anything on this ticket.

All tests pass, and I also tested installing the spkg with SAGE_CHECK=yes, and doctesting the patched file before and after installing the spkg.  Positive review.



---

archive/issue_comments_179450.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@JohnCremona](#comment%3A20):\n> I checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did \"make ptestlong\" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.\n\nPerhaps you can send me the file `logs/install.log` so I can have a look for a possible explanation.",
    "created_at": "2013-05-19T20:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179450",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@JohnCremona](#comment%3A20):
> I checked that the spkg builds ok and the patch applies to sage-5.10.beta3.  Unfortunately when I then did "make ptestlong" it decided that it needed to build GCC from scratch (which was not the case when I built Sage originally) and after that it needed to rebuild all the rest of Sage (roughly) so the test has not even started yet a couple of hours later.

Perhaps you can send me the file `logs/install.log` so I can have a look for a possible explanation.



---

archive/issue_events_189685.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T20:01:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189685"
}
```



---

archive/issue_events_189686.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T20:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189686"
}
```



---

archive/issue_comments_179451.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2013-05-19T20:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179451",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_179452.json:
```json
{
    "body": "Merged: **sage-5.10.beta4**",
    "created_at": "2013-05-20T08:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179452",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta4**



---

archive/issue_events_189687.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-20T08:52:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189687"
}
```



---

archive/issue_events_189688.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-20T08:52:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14596#event-189688"
}
```



---

archive/issue_comments_179453.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nspkg is on the mirror and on its way around the planet :)",
    "created_at": "2013-05-20T09:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14596#issuecomment-179453",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:25" align="right">Comment 25</div>

spkg is on the mirror and on its way around the planet :)
