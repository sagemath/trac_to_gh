# Issue 14071: Lazy imports with deprecation

archive/issues_014071.json:
```json
{
    "body": "Assignee: @jasongrout\n\nIt's annoying when other people move something around in the Sage library and it's no longer available in the previous location to be imported.  Sage currently has some mechanisms for alleviating this problem (`sage.misc.superceded.deprecated_callable_import` and `sage.structure.sage_object.register_unpickle_override` for example).  This ticket adds another option: lazily import the old name so that a deprecation warning is issued whenever it is referred to.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14275\n\n",
    "closed_at": "2014-04-04T15:55:31Z",
    "created_at": "2013-03-14T21:30:00Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Lazy imports with deprecation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14071",
    "user": "https://github.com/roed314"
}
```
Assignee: @jasongrout

It's annoying when other people move something around in the Sage library and it's no longer available in the previous location to be imported.  Sage currently has some mechanisms for alleviating this problem (`sage.misc.superceded.deprecated_callable_import` and `sage.structure.sage_object.register_unpickle_override` for example).  This ticket adds another option: lazily import the old name so that a deprecation warning is issued whenever it is referred to.

Issue created by migration from https://trac.sagemath.org/ticket/14275





---

archive/issue_comments_175931.json:
```json
{
    "body": "Attachment [14275.patch](tarball://root/attachments/some-uuid/ticket14275/14275.patch) by @roed314 created at 2013-03-14 21:32:15",
    "created_at": "2013-03-14T21:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175931",
    "user": "https://github.com/roed314"
}
```

Attachment [14275.patch](tarball://root/attachments/some-uuid/ticket14275/14275.patch) by @roed314 created at 2013-03-14 21:32:15



---

archive/issue_comments_175932.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-14T21:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175932",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175933.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-04-03T16:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175933",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_175934.json:
```json
{
    "body": "Hey David,\n\nThe doctest is failing because the mismatch of the trac numbers. Also could you add a doctest with a message as well?\n\nThanks,\n\nTravis",
    "created_at": "2013-04-03T16:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175934",
    "user": "https://github.com/tscrim"
}
```

Hey David,

The doctest is failing because the mismatch of the trac numbers. Also could you add a doctest with a message as well?

Thanks,

Travis



---

archive/issue_comments_175935.json:
```json
{
    "body": "The way I see it, deprecation only makes sense for stuff that is imported into the global namespace. Anything that is not directly accessible from the command line is, by definition, an implementation detail. And once you require backwards compatibility for implementation details it basically becomes impossible to change anything. So there is no point in deprecating import locations.",
    "created_at": "2013-04-22T13:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175935",
    "user": "https://github.com/vbraun"
}
```

The way I see it, deprecation only makes sense for stuff that is imported into the global namespace. Anything that is not directly accessible from the command line is, by definition, an implementation detail. And once you require backwards compatibility for implementation details it basically becomes impossible to change anything. So there is no point in deprecating import locations.



---

archive/issue_events_040388.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14071#event-40388"
}
```



---

archive/issue_events_040389.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14071#event-40389"
}
```



---

archive/issue_events_040390.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14071#event-40390"
}
```



---

archive/issue_comments_175936.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-09T18:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175936",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_175937.json:
```json
{
    "body": "This could be used to remove things from the global namespace but the class itself doesn't change.\n\n---\nNew commits:",
    "created_at": "2014-03-09T18:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175937",
    "user": "https://github.com/tscrim"
}
```

This could be used to remove things from the global namespace but the class itself doesn't change.

---
New commits:



---

archive/issue_comments_175938.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-09T18:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_175939.json:
```json
{
    "body": "Comment from the sage-combinat thread :\n\nthe way it is implemented you add a \"deprecation\" \nfeature to lazy import. But lazy imports can be used a lot, so \nwouldn't it be better to instead add a \"lazy\" feature to \n\"deprecation_function_alias\" ? \n\nNathann",
    "created_at": "2014-04-03T14:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175939",
    "user": "https://github.com/nathanncohen"
}
```

Comment from the sage-combinat thread :

the way it is implemented you add a "deprecation" 
feature to lazy import. But lazy imports can be used a lot, so 
wouldn't it be better to instead add a "lazy" feature to 
"deprecation_function_alias" ? 

Nathann



---

archive/issue_comments_175940.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-04-03T14:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175940",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_175941.json:
```json
{
    "body": "No, because then we'd have to import `deprecated_function_alias` (which doesn't currently accept a message too) and import the original object just to do something like\n\n```\nx = deprecation_function_alias(14275, x)\n```\nOtherwise we completely change the syntax and functionality to include `lazy_import`. Both of which are asinine.",
    "created_at": "2014-04-03T17:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175941",
    "user": "https://github.com/tscrim"
}
```

No, because then we'd have to import `deprecated_function_alias` (which doesn't currently accept a message too) and import the original object just to do something like

```
x = deprecation_function_alias(14275, x)
```
Otherwise we completely change the syntax and functionality to include `lazy_import`. Both of which are asinine.



---

archive/issue_comments_175942.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-04-03T17:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175942",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_175943.json:
```json
{
    "body": "Ahahaahha. Well, for as long as you know that the two reasons you gave me are bad reasons and can be easily avoided, all is fine. It is not so bad.\n\nGood to go !\n\nNathann",
    "created_at": "2014-04-03T20:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175943",
    "user": "https://github.com/nathanncohen"
}
```

Ahahaahha. Well, for as long as you know that the two reasons you gave me are bad reasons and can be easily avoided, all is fine. It is not so bad.

Good to go !

Nathann



---

archive/issue_comments_175944.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-03T20:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175944",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175945.json:
```json
{
    "body": "Thanks Nathann.",
    "created_at": "2014-04-03T21:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175945",
    "user": "https://github.com/tscrim"
}
```

Thanks Nathann.



---

archive/issue_comments_175946.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-04T15:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14071#issuecomment-175946",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_040391.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-04T15:55:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14071",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14071#event-40391"
}
```
