# Issue 14116: update polymake interface to 2.14-rc1

archive/issues_013912.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mhampton"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nI've written a new interface for polymake using its shared library interface, while trying to stay backward compatible with what there was before.\n\nI've classified this as a defect, since the current interface doesn't work anymore.\n\nhttp://www.polymake.org/lib/exe/fetch.php/download/polymake-2.14r1-minimal.tar.bz2\n\nDepends on #13768\nDepends on #13767\n\nCC:  @williamstein @mkoeppe\n\nComponent: **geometry**\n\nWork Issues: **source tar link, fix doctests, info for how to install, add doctests**\n\nAuthor: **Timo Kluck**\n\nBranch/Commit: **[public/ticket/14416](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14416) @ [`50f6da9`](https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f)**\n\nReviewer: **Karl-Dieter Crisman, Fr\u00e9d\u00e9ric Chapoton, Matthias K\u00f6ppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14116_\n\n",
    "closed_at": "2017-07-13T07:54:31Z",
    "created_at": "2013-02-14T11:17:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update polymake interface to 2.14-rc1",
    "type": "issue",
    "updated_at": "2017-07-13T07:54:31Z",
    "url": "https://github.com/sagemath/sage/issues/14116",
    "user": "https://github.com/tkluck"
}
```
<div id="comment:0"></div>

I've written a new interface for polymake using its shared library interface, while trying to stay backward compatible with what there was before.

I've classified this as a defect, since the current interface doesn't work anymore.

http://www.polymake.org/lib/exe/fetch.php/download/polymake-2.14r1-minimal.tar.bz2

Depends on #13768
Depends on #13767

CC:  @williamstein @mkoeppe

Component: **geometry**

Work Issues: **source tar link, fix doctests, info for how to install, add doctests**

Author: **Timo Kluck**

Branch/Commit: **[public/ticket/14416](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14416) @ [`50f6da9`](https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f)**

Reviewer: **Karl-Dieter Crisman, Frédéric Chapoton, Matthias Köppe**

_Issue created by migration from https://trac.sagemath.org/ticket/14116_





---

archive/issue_events_196728.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-02-14T11:17:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196728"
}
```



---

archive/issue_events_196729.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-02-14T11:17:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196729"
}
```



---

archive/issue_events_196730.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-02-14T11:17:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196730"
}
```



---

archive/issue_events_196731.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-02-14T11:17:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196731"
}
```



---

archive/issue_events_196732.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2013-02-14T11:17:55Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "subject": "https://github.com/tkluck",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196732"
}
```



---

archive/issue_comments_168004.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_14116_polymake_upgrade.patch.gz](https://github.com/sagemath/sage/files/ticket14116/trac_14116_polymake_upgrade.patch.gz)**\n\nA related effort is https://bitbucket.org/burcin/pypolymake",
    "created_at": "2013-02-14T16:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168004",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_14116_polymake_upgrade.patch.gz](https://github.com/sagemath/sage/files/ticket14116/trac_14116_polymake_upgrade.patch.gz)**

A related effort is https://bitbucket.org/burcin/pypolymake



---

archive/issue_comments_168005.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNeeds to be rebased to #13432.",
    "created_at": "2013-06-14T14:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168005",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

Needs to be rebased to #13432.



---

archive/issue_comments_168006.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nUploading rebased patch next.  But:\n\n```\nCompiling sage/geometry/polymake/polymake.pyx because it changed.\nCythonizing sage/geometry/polymake/polymake.pyx\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    def save(self, filename):\n        self.thisptr.save(<string><char*>filename)\n\n    def __getattr__(self, propertyname):\n        propertyname = propertyname.upper()\n        return <str>get_property_wrapper(self.thisptr[0], <string><char*>propertyname).c_str()\n                                                                                           ^\n------------------------------------------------------------\n\nsage/geometry/polymake/polymake.pyx:247:92: default encoding required for conversion from 'char const *' to 'str object'\n```\nThis is presumably related to your comment about getting rid of `std::string cpp_string = <string><char*>python_string` stuff; the Cython in Sage is now 5.19.\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n                    p = i.numerator() if callable(i.numerator) else i.numerator\n                    q = i.denominator() if callable(i.denominator) else i.denominator\n                    entries.push_back(Rational(p,q))\n                else:\n                    entries.push_back(<Rational><int>i)\n            matrix = new Matrix[Rational](rows, cols, entries.begin())\n                                                                  ^\n------------------------------------------------------------\n\nsage/geometry/polymake/polymake.pyx:268:67: Cannot assign type 'iterator' to 'vector[Rational]'\n```\nNo idea, though the message seems like it would be clear to someone who knew Cython.",
    "created_at": "2013-06-14T14:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168006",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

Uploading rebased patch next.  But:

```
Compiling sage/geometry/polymake/polymake.pyx because it changed.
Cythonizing sage/geometry/polymake/polymake.pyx

Error compiling Cython file:
------------------------------------------------------------
...
    def save(self, filename):
        self.thisptr.save(<string><char*>filename)

    def __getattr__(self, propertyname):
        propertyname = propertyname.upper()
        return <str>get_property_wrapper(self.thisptr[0], <string><char*>propertyname).c_str()
                                                                                           ^
------------------------------------------------------------

sage/geometry/polymake/polymake.pyx:247:92: default encoding required for conversion from 'char const *' to 'str object'
```
This is presumably related to your comment about getting rid of `std::string cpp_string = <string><char*>python_string` stuff; the Cython in Sage is now 5.19.

```
Error compiling Cython file:
------------------------------------------------------------
...
                    p = i.numerator() if callable(i.numerator) else i.numerator
                    q = i.denominator() if callable(i.denominator) else i.denominator
                    entries.push_back(Rational(p,q))
                else:
                    entries.push_back(<Rational><int>i)
            matrix = new Matrix[Rational](rows, cols, entries.begin())
                                                                  ^
------------------------------------------------------------

sage/geometry/polymake/polymake.pyx:268:67: Cannot assign type 'iterator' to 'vector[Rational]'
```
No idea, though the message seems like it would be clear to someone who knew Cython.



---

archive/issue_comments_168007.json:
```json
{
    "body": "Attachment: **[trac_14116-polymake-upgrade-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14116/trac_14116-polymake-upgrade-rebased.patch.gz)**",
    "created_at": "2013-06-14T14:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168007",
    "user": "https://github.com/kcrisman"
}
```

Attachment: **[trac_14116-polymake-upgrade-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14116/trac_14116-polymake-upgrade-rebased.patch.gz)**



---

archive/issue_comments_168008.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nkcrisman: I'm considering replacing my own work by what Burcin has done with pypolymake. He works around some cython issues in a much nicer way. Have you looked at that, too?",
    "created_at": "2013-06-14T14:22:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168008",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:4" align="right">comment:4</div>

kcrisman: I'm considering replacing my own work by what Burcin has done with pypolymake. He works around some cython issues in a much nicer way. Have you looked at that, too?



---

archive/issue_events_196733.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T14:35:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196733"
}
```



---

archive/issue_events_196734.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T14:35:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196734"
}
```



---

archive/issue_comments_168009.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> Have you looked at that, too?\n\nNo.  It's not exactly clear to me what to do (though [this seems likely](http://forum.polymake.org/viewtopic.php?f=9&t=178)), and the forums suggest that it doesn't have as much functionality as the interface here, though I may be misinterpreting that.  It would be nice to have it in an spkg form, though I understand that is different from the lmonade philosophy.\n\nAlso note [this polymake user's attempt](http://forum.polymake.org/viewtopic.php?f=9&t=178#p773), though apparently they later just used pypolymake.  I assume that user is not yourself?",
    "created_at": "2013-06-14T14:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168009",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

> Have you looked at that, too?

No.  It's not exactly clear to me what to do (though [this seems likely](http://forum.polymake.org/viewtopic.php?f=9&t=178)), and the forums suggest that it doesn't have as much functionality as the interface here, though I may be misinterpreting that.  It would be nice to have it in an spkg form, though I understand that is different from the lmonade philosophy.

Also note [this polymake user's attempt](http://forum.polymake.org/viewtopic.php?f=9&t=178#p773), though apparently they later just used pypolymake.  I assume that user is not yourself?



---

archive/issue_comments_168010.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIn particular, the following things seems like hacks:\n\n```\nln -s /usr/local/sage-4.7.1/devel/sage/c_lib/include /usr/local/sage-4.7.1/local/include/sage\n```\nand this apparently required patch\n\n```diff\ndiff --git a/sage-env b/sage-env\n--- a/sage-env\n+++ b/sage-env\n@@ -219,6 +219,9 @@\n     mkdir -p \"$MPLCONFIGDIR\"\n fi\n \n+LD_PRELOAD=\"$SAGE_LOCAL/lib/libpolymake.so\"\n+export LD_PRELOAD\n+\n LD_LIBRARY_PATH=\"$SAGE_ROOT/local/lib/:$LD_LIBRARY_PATH\" && export LD_LIBRARY_PATH\n # The following is needed for openmpi:\n LD_LIBRARY_PATH=\"$SAGE_ROOT/local/lib/openmpi:$LD_LIBRARY_PATH\" && export LD_LIBRARY_PATH\n```\nwhich I'll point out would no longer apply directly, as the `LD_LIBRARY_PATH` code has changed, though one could just add the lines, of course.  And of course `sage-env` doesn't live in `local/bin` any more, but in `spkg/bin`.",
    "created_at": "2013-06-14T14:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168010",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

In particular, the following things seems like hacks:

```
ln -s /usr/local/sage-4.7.1/devel/sage/c_lib/include /usr/local/sage-4.7.1/local/include/sage
```
and this apparently required patch

```diff
diff --git a/sage-env b/sage-env
--- a/sage-env
+++ b/sage-env
@@ -219,6 +219,9 @@
     mkdir -p "$MPLCONFIGDIR"
 fi
 
+LD_PRELOAD="$SAGE_LOCAL/lib/libpolymake.so"
+export LD_PRELOAD
+
 LD_LIBRARY_PATH="$SAGE_ROOT/local/lib/:$LD_LIBRARY_PATH" && export LD_LIBRARY_PATH
 # The following is needed for openmpi:
 LD_LIBRARY_PATH="$SAGE_ROOT/local/lib/openmpi:$LD_LIBRARY_PATH" && export LD_LIBRARY_PATH
```
which I'll point out would no longer apply directly, as the `LD_LIBRARY_PATH` code has changed, though one could just add the lines, of course.  And of course `sage-env` doesn't live in `local/bin` any more, but in `spkg/bin`.



---

archive/issue_comments_168011.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI just pushed some initial work to\n\nhttps://github.com/tkluck/sage/tree/polymake-upgrade\n\nIt integrates pypolymake with Sage, while keeping backwards compatibility with the old interface. Additionally, it adds an interface allowing you to specify polytopes by Sage expressions.\n\nI'm having some trouble getting the doctests to work, since polymake has a habit of \"spamming\" stderr. (Actually, it outputs citation information, which is worthwhile. We do need to deal with it, though.) Also, trying to be backwards compatible both with Sage and with pypolymake leads to ugliness such as having both `n_points` and `num_points` methods.\n\nI'm doing development in the new integrated git repository, which is supposed to replace the mercurial repositories sometime this Summer. Here are instructions for reviewing my branch. They include cloning the repository and building Sage from source, so this takes a lot of time. I will also make mercurial patches available for review at some point.\n\n```\n$ # clone the repository\n$ git clone git://github.com/tkluck/sage.git\n$ cd sage\n$ git checkout -t polymake-upgrade\n$ # get the upstream package for polymake\n$ cd upstream\n$ wget http://polymake.org/lib/exe/fetch.php/download/polymake-2.12-rc3.tar.bz2\n$ mv polymake-2.12{-rc3,}.tar.bz2\n$ cd ..\n$ # build sage\n$ MAKE=\"make -j4\" make\n$ # install the polymake package\n$ ./sage -i polymake\n$ # build the polymake interface, now that the package is available\n$ ./sage -b\n```",
    "created_at": "2013-06-16T10:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168011",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:7" align="right">comment:7</div>

I just pushed some initial work to

https://github.com/tkluck/sage/tree/polymake-upgrade

It integrates pypolymake with Sage, while keeping backwards compatibility with the old interface. Additionally, it adds an interface allowing you to specify polytopes by Sage expressions.

I'm having some trouble getting the doctests to work, since polymake has a habit of "spamming" stderr. (Actually, it outputs citation information, which is worthwhile. We do need to deal with it, though.) Also, trying to be backwards compatible both with Sage and with pypolymake leads to ugliness such as having both `n_points` and `num_points` methods.

I'm doing development in the new integrated git repository, which is supposed to replace the mercurial repositories sometime this Summer. Here are instructions for reviewing my branch. They include cloning the repository and building Sage from source, so this takes a lot of time. I will also make mercurial patches available for review at some point.

```
$ # clone the repository
$ git clone git://github.com/tkluck/sage.git
$ cd sage
$ git checkout -t polymake-upgrade
$ # get the upstream package for polymake
$ cd upstream
$ wget http://polymake.org/lib/exe/fetch.php/download/polymake-2.12-rc3.tar.bz2
$ mv polymake-2.12{-rc3,}.tar.bz2
$ cd ..
$ # build sage
$ MAKE="make -j4" make
$ # install the polymake package
$ ./sage -i polymake
$ # build the polymake interface, now that the package is available
$ ./sage -b
```



---

archive/issue_comments_168012.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHow about \n* Move the whole stuff to `sage/libs/polymake`\n* Don't care about backward compatibility, the polymake library interface (like the PPL library interface) is not supposed to be the user-facing part\n* Integrate polymake as one of the backends for polyhedra in Sage (and only this will be in sage/geometry)\n* the `PolymakeProxy` can go away, the polyhedron backend will raise an error if polymake is not installed.",
    "created_at": "2013-06-17T14:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168012",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

How about 
* Move the whole stuff to `sage/libs/polymake`
* Don't care about backward compatibility, the polymake library interface (like the PPL library interface) is not supposed to be the user-facing part
* Integrate polymake as one of the backends for polyhedra in Sage (and only this will be in sage/geometry)
* the `PolymakeProxy` can go away, the polyhedron backend will raise an error if polymake is not installed.



---

archive/issue_comments_168013.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlso, why do we need to hardcode the RPATH? This will break during relocation, fyi.",
    "created_at": "2013-06-17T14:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168013",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Also, why do we need to hardcode the RPATH? This will break during relocation, fyi.



---

archive/issue_comments_168014.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks for your comments, Volker. I removed hardcoding the RPATH, which seems to have been a leftover from early debugging. I also agree with your idea about eventually making polymake just a backend for the polyhedron class.\n\nIn anticipation, I did as you suggested and moved the library interface code to `sage/libs/polymake`. I have not made steps to integrate it with the existing polyhedron class and I have also not removed the backward compatibility, including the `PolymakeProxy` thing.\n\nI'm not sure if we need to do all this integration work before upgrading polymake and merging this into Sage. Currently, the object `polymake` is part of the global namespace on startup, and it is broken. This fixes it.",
    "created_at": "2013-06-18T12:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168014",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks for your comments, Volker. I removed hardcoding the RPATH, which seems to have been a leftover from early debugging. I also agree with your idea about eventually making polymake just a backend for the polyhedron class.

In anticipation, I did as you suggested and moved the library interface code to `sage/libs/polymake`. I have not made steps to integrate it with the existing polyhedron class and I have also not removed the backward compatibility, including the `PolymakeProxy` thing.

I'm not sure if we need to do all this integration work before upgrading polymake and merging this into Sage. Currently, the object `polymake` is part of the global namespace on startup, and it is broken. This fixes it.



---

archive/issue_comments_168015.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCan you actually attach your patch? ;-)\n\nThere is also a note about Cython 0.17pre that is useless now. Can you remove it while you are at it?\n\nI agree that we don't have to do everything on this ticket. But which base rings does polymake support, and which ones are wrapped here? The polymake web page says something about quadratic field extensions which might be interesting...",
    "created_at": "2013-06-18T14:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168015",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

Can you actually attach your patch? ;-)

There is also a note about Cython 0.17pre that is useless now. Can you remove it while you are at it?

I agree that we don't have to do everything on this ticket. But which base rings does polymake support, and which ones are wrapped here? The polymake web page says something about quadratic field extensions which might be interesting...



---

archive/issue_comments_168016.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe code is up at github:\nhttps://github.com/tkluck/sage/tree/polymake-upgrade\n\nI'll make this into a mercurial patch at some point, but I haven't yet. These kind of updates (simultaneously updating a package and its library interface) are exactly the kind of thing the integrated repository was setup to do.",
    "created_at": "2013-06-18T15:06:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168016",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:12" align="right">comment:12</div>

The code is up at github:
https://github.com/tkluck/sage/tree/polymake-upgrade

I'll make this into a mercurial patch at some point, but I haven't yet. These kind of updates (simultaneously updating a package and its library interface) are exactly the kind of thing the integrated repository was setup to do.



---

archive/issue_comments_168017.json:
```json
{
    "body": "Branch: **[u/tkluck/ticket/14116](https://github.com/sagemath/sagetrac-mirror/tree/u/tkluck/ticket/14116)**",
    "created_at": "2013-07-20T14:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168017",
    "user": "https://github.com/tkluck"
}
```

Branch: **[u/tkluck/ticket/14116](https://github.com/sagemath/sagetrac-mirror/tree/u/tkluck/ticket/14116)**



---

archive/issue_comments_168018.json:
```json
{
    "body": "Changed dependencies from **#13768, #13767** to none",
    "created_at": "2013-07-20T14:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168018",
    "user": "https://github.com/tkluck"
}
```

Changed dependencies from **#13768, #13767** to none



---

archive/issue_comments_168019.json:
```json
{
    "body": "Dependencies: **#13768, #13767**",
    "created_at": "2013-07-20T14:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168019",
    "user": "https://github.com/tkluck"
}
```

Dependencies: **#13768, #13767**



---

archive/issue_comments_168020.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nreinstate dependencies after they got lost by using the new dev-scripts.",
    "created_at": "2013-07-20T14:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168020",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:14" align="right">comment:14</div>

reinstate dependencies after they got lost by using the new dev-scripts.



---

archive/issue_events_196735.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-07T19:39:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196735"
}
```



---

archive/issue_events_196736.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-07T19:39:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196736"
}
```



---

archive/issue_comments_168021.json:
```json
{
    "body": "Commit: **[`eebd8ec`](https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9)**",
    "created_at": "2014-09-07T19:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168021",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`eebd8ec`](https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9)**



---

archive/issue_comments_168022.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cbe8aebe81f8bf360145bb7b291994e947ffe0f\"><code>6cbe8ae</code></a></td><td><code>Fix wrong doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e511e061677ab360355b55d8b06adec0dbb2fce1\"><code>e511e06</code></a></td><td><code>Fix failing of doctests due to credits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3fda3b2edd425056119c03373020b771b236a47\"><code>b3fda3b</code></a></td><td><code>some initial work on the GRAPH property</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/315bd1280d63dcae6a3511afb061cc7480be1e75\"><code>315bd12</code></a></td><td><code>Some initial work to make pickling possible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a30b030f90ecc80c2c7a7f347367e4b47b9e222e\"><code>a30b030</code></a></td><td><code>move polymake interface to sage.libs.polymake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f049b0bec61391c76cfcbeddba8bb3f977169f54\"><code>f049b0b</code></a></td><td><code>name of module is sage.libs.polymake.polymake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab0dddf2eb57af3d28cdcdfd9f4690c6e1c30a1\"><code>7ab0ddd</code></a></td><td><code>catch some possible c++ exceptions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c20845f2e2045a2d582bbc380080c1236d3bd1f\"><code>7c20845</code></a></td><td><code>make load work, and thereby pickling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2ebcf45b755741b9b7bc7e06b9388067efe1ed2\"><code>e2ebcf4</code></a></td><td><code>coordinates should be a tuple, not a generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9\"><code>eebd8ec</code></a></td><td><code>should have tracked __init__.py file for polymake</code></td></tr></table>\n",
    "created_at": "2014-09-07T19:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168022",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15"></div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cbe8aebe81f8bf360145bb7b291994e947ffe0f"><code>6cbe8ae</code></a></td><td><code>Fix wrong doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e511e061677ab360355b55d8b06adec0dbb2fce1"><code>e511e06</code></a></td><td><code>Fix failing of doctests due to credits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3fda3b2edd425056119c03373020b771b236a47"><code>b3fda3b</code></a></td><td><code>some initial work on the GRAPH property</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/315bd1280d63dcae6a3511afb061cc7480be1e75"><code>315bd12</code></a></td><td><code>Some initial work to make pickling possible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a30b030f90ecc80c2c7a7f347367e4b47b9e222e"><code>a30b030</code></a></td><td><code>move polymake interface to sage.libs.polymake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f049b0bec61391c76cfcbeddba8bb3f977169f54"><code>f049b0b</code></a></td><td><code>name of module is sage.libs.polymake.polymake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab0dddf2eb57af3d28cdcdfd9f4690c6e1c30a1"><code>7ab0ddd</code></a></td><td><code>catch some possible c++ exceptions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c20845f2e2045a2d582bbc380080c1236d3bd1f"><code>7c20845</code></a></td><td><code>make load work, and thereby pickling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2ebcf45b755741b9b7bc7e06b9388067efe1ed2"><code>e2ebcf4</code></a></td><td><code>coordinates should be a tuple, not a generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9"><code>eebd8ec</code></a></td><td><code>should have tracked __init__.py file for polymake</code></td></tr></table>




---

archive/issue_comments_168023.json:
```json
{
    "body": "Changed branch from **[u/tkluck/ticket/14116](https://github.com/sagemath/sagetrac-mirror/tree/u/tkluck/ticket/14116)** to **[public/ticket/14416](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14416)**",
    "created_at": "2014-09-07T19:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168023",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/tkluck/ticket/14116](https://github.com/sagemath/sagetrac-mirror/tree/u/tkluck/ticket/14116)** to **[public/ticket/14416](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14416)**



---

archive/issue_comments_168024.json:
```json
{
    "body": "Changed commit from **[`eebd8ec`](https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9)** to **[`e14a9f2`](https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a)**",
    "created_at": "2014-09-07T19:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168024",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`eebd8ec`](https://github.com/sagemath/sagetrac-mirror/commit/eebd8ec51e4082905710325aeb3c09d019838bb9)** to **[`e14a9f2`](https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a)**



---

archive/issue_comments_168025.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nmerge with 6.4.beta2\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a\"><code>e14a9f2</code></a></td><td><code>Merging with 6.4.beta2</code></td></tr></table>\n",
    "created_at": "2014-09-07T19:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168025",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

merge with 6.4.beta2

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a"><code>e14a9f2</code></a></td><td><code>Merging with 6.4.beta2</code></td></tr></table>




---

archive/issue_comments_168026.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFr\u00e9d\u00e9ric, have you actually successfully installed polymake and used this, or did you just do community service in updating this to a git branch?  Just curious.",
    "created_at": "2014-11-20T14:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168026",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

Frédéric, have you actually successfully installed polymake and used this, or did you just do community service in updating this to a git branch?  Just curious.



---

archive/issue_comments_168027.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nTimo, did you want to update to a new-style spkg, or was that Fr\u00e9d\u00e9ric?  In which case *someone* would have to provide a link here to what to put in the `upstream/` folder.",
    "created_at": "2014-11-20T19:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168027",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

Timo, did you want to update to a new-style spkg, or was that Frédéric?  In which case *someone* would have to provide a link here to what to put in the `upstream/` folder.



---

archive/issue_comments_168028.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI am trying the new interface, but can't get Sage to build the pyx file.\n\n```\n$ touch src/sage/libs/polymake/polymake.pyx \n$ ./sage -br\n<stuff not involving that file>\nsage:\n```\nand of course that causes problems with \n\n```\nsage: P = polymake.convex_hull([[1,0,0,0], [1,0,0,1], [1,0,1,0], [1,0,1,1],  [1,1,0,0], [1,1,0,1], [1,1,1,0], [1,1,1,1]])\n```\nor\n\n```\nsage: from sage.libs.polymake import polymake\n```\nwhich don't work for this reason.",
    "created_at": "2014-11-20T19:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168028",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

I am trying the new interface, but can't get Sage to build the pyx file.

```
$ touch src/sage/libs/polymake/polymake.pyx 
$ ./sage -br
<stuff not involving that file>
sage:
```
and of course that causes problems with 

```
sage: P = polymake.convex_hull([[1,0,0,0], [1,0,0,1], [1,0,1,0], [1,0,1,1],  [1,1,0,0], [1,1,0,1], [1,1,1,0], [1,1,1,1]])
```
or

```
sage: from sage.libs.polymake import polymake
```
which don't work for this reason.



---

archive/issue_comments_168029.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAh, I think the problem is that I had to do it from the command line and `sage -sh`.\n\n```\nsage: sage.misc.package.is_package_installed('polymake')\nFalse\n```\nFixing that 'by hand', it WORKS!!!",
    "created_at": "2014-11-20T20:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168029",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

Ah, I think the problem is that I had to do it from the command line and `sage -sh`.

```
sage: sage.misc.package.is_package_installed('polymake')
False
```
Fixing that 'by hand', it WORKS!!!



---

archive/issue_comments_168030.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-11-20T20:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168030",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman, Frédéric Chapoton**



---

archive/issue_comments_168031.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nTwo concrete things:\n* Please make ALL TESTS here optional.  Because they pretty much all fail if you don't have polymake, not just the part that imports polymake.\n* Exactly one (!) test failure.\n\n```\n**********************************************************************\nFile \"src/sage/libs/polymake/polymake.pyx\", line 76, in sage.libs.polymake.polymake\nFailed example:\n    n.graph()                         # optional - polymake\nException raised:\n    ValueError: invalid value for an input string property\n```\n  I don't know what this is about, however.",
    "created_at": "2014-11-20T20:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168031",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Two concrete things:
* Please make ALL TESTS here optional.  Because they pretty much all fail if you don't have polymake, not just the part that imports polymake.
* Exactly one (!) test failure.

```
**********************************************************************
File "src/sage/libs/polymake/polymake.pyx", line 76, in sage.libs.polymake.polymake
Failed example:
    n.graph()                         # optional - polymake
Exception raised:
    ValueError: invalid value for an input string property
```
  I don't know what this is about, however.



---

archive/issue_events_196737.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-11-20T20:05:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196737"
}
```



---

archive/issue_comments_168032.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think that we need the following for a positive review.\n* Fix the doctest issues in the previous comment.\n* Provide a source tarball.\n* Provide explicit instructions for how to acquire any prereqs for polymake (notably any Perl ones)\n* Lots and lots of functions have no doctests.  :-(\n\nThis also definitely should close #5488.",
    "created_at": "2014-11-20T20:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168032",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

I think that we need the following for a positive review.
* Fix the doctest issues in the previous comment.
* Provide a source tarball.
* Provide explicit instructions for how to acquire any prereqs for polymake (notably any Perl ones)
* Lots and lots of functions have no doctests.  :-(

This also definitely should close #5488.



---

archive/issue_comments_168033.json:
```json
{
    "body": "Work Issues: **source tar link, fix doctests, info for how to install, add doctests**",
    "created_at": "2014-11-20T20:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168033",
    "user": "https://github.com/kcrisman"
}
```

Work Issues: **source tar link, fix doctests, info for how to install, add doctests**



---

archive/issue_events_196738.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-11-20T20:13:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196738"
}
```



---

archive/issue_events_196739.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-11-20T20:13:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196739"
}
```



---

archive/issue_comments_168034.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nTry the source package at http://sage.math.washington.edu/home/kcrisman/polymake-2.12.tar.gz - possibly with Mac tar annoying warnings, sorry.  If putting this in `upstream` works then we are in good shape.  I'll note I do get a different set of checksums, so that may have to be fixed.    Where did those come from?  **Someone** must have had the `src` for that!\n\nBy the way - to William - this should enable polymake installation within Sage easy in the cloud (modulo a Perl module or two).",
    "created_at": "2014-11-20T21:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168034",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:23" align="right">comment:23</div>

Try the source package at http://sage.math.washington.edu/home/kcrisman/polymake-2.12.tar.gz - possibly with Mac tar annoying warnings, sorry.  If putting this in `upstream` works then we are in good shape.  I'll note I do get a different set of checksums, so that may have to be fixed.    Where did those come from?  **Someone** must have had the `src` for that!

By the way - to William - this should enable polymake installation within Sage easy in the cloud (modulo a Perl module or two).



---

archive/issue_comments_168035.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16f785656c8554b50d2fb42b8e8dab69341d8b60\"><code>16f7856</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.5.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c\"><code>faa22c6</code></a></td><td><code>trac #14116 some work on documentation</code></td></tr></table>\n",
    "created_at": "2014-11-25T13:48:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168035",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16f785656c8554b50d2fb42b8e8dab69341d8b60"><code>16f7856</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.5.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c"><code>faa22c6</code></a></td><td><code>trac #14116 some work on documentation</code></td></tr></table>




---

archive/issue_comments_168036.json:
```json
{
    "body": "Changed commit from **[`e14a9f2`](https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a)** to **[`faa22c6`](https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c)**",
    "created_at": "2014-11-25T13:48:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e14a9f2`](https://github.com/sagemath/sagetrac-mirror/commit/e14a9f2e18d3e091ceaf7a922ca5e2ff91effb7a)** to **[`faa22c6`](https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c)**



---

archive/issue_comments_168037.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHow can I manually install the package to test it ?\n\nLooking at the developer manual, I have copied the tar in my `upstream` dir and then tried `sage -i polymake`, but that fails by trying to upload the sources from the web. \n\nWhat should I do ?",
    "created_at": "2014-11-27T12:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168037",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

How can I manually install the package to test it ?

Looking at the developer manual, I have copied the tar in my `upstream` dir and then tried `sage -i polymake`, but that fails by trying to upload the sources from the web. 

What should I do ?



---

archive/issue_comments_168038.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI think if you put the tar in the `upstream` and then do `sage -f polymake-x.y.z` it should work.  the `sage -i` will try the 'official' (and broken) optional package.",
    "created_at": "2014-12-01T16:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168038",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

I think if you put the tar in the `upstream` and then do `sage -f polymake-x.y.z` it should work.  the `sage -i` will try the 'official' (and broken) optional package.



---

archive/issue_comments_168039.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks, but alas, no, this does not work..\n\n```\nsage -i  polymake-2.12\nFound local metadata for polymake-2.12\nAttempting to download package polymake-2.12\n...\nIOError: [Errno 404] Not Found: '//www.sagemath.org/packages/upstream/polymake/'\nError: failed to download package polymake-2.12\n```",
    "created_at": "2014-12-01T17:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168039",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks, but alas, no, this does not work..

```
sage -i  polymake-2.12
Found local metadata for polymake-2.12
Attempting to download package polymake-2.12
...
IOError: [Errno 404] Not Found: '//www.sagemath.org/packages/upstream/polymake/'
Error: failed to download package polymake-2.12
```



---

archive/issue_comments_168040.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nRead carefully.  Put the tar file I uploaded in [comment:23](#comment%3A23) in `$SAGE_ROOT/upstream`, then\n\n```\nsage -f polymake-2.12\n```\nAt least, I hope this will work.  See also #13768.",
    "created_at": "2014-12-01T20:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168040",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

Read carefully.  Put the tar file I uploaded in [comment:23](#comment%3A23) in `$SAGE_ROOT/upstream`, then

```
sage -f polymake-2.12
```
At least, I hope this will work.  See also #13768.



---

archive/issue_comments_168041.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOoops, sorry for misreading the `-f`.\n\nStill not working. I have got your polymake-2.12.tar.gz in my $SAGE_ROOT/upstream\n\nand nothing among `sage (-i or -f) (polymake or polymake-2.12)` works\n\nI have tried both on a clean develop and on the branch here.",
    "created_at": "2014-12-01T20:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168041",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

Ooops, sorry for misreading the `-f`.

Still not working. I have got your polymake-2.12.tar.gz in my $SAGE_ROOT/upstream

and nothing among `sage (-i or -f) (polymake or polymake-2.12)` works

I have tried both on a clean develop and on the branch here.



---

archive/issue_comments_168042.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nCan you give me the error message when you do `sage -f polymake-2.12`?  Maybe something is corrupted in the upload.",
    "created_at": "2014-12-02T13:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168042",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:30" align="right">comment:30</div>

Can you give me the error message when you do `sage -f polymake-2.12`?  Maybe something is corrupted in the upload.



---

archive/issue_comments_168043.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n\n```\nls -lg upstream/po*\n-rw-r--r-- 1 users  1565069 oct.  17  2013 upstream/polybori-0.8.3.tar.bz2\n-rw-r--r-- 1 users 14504274 nov.  27 13:27 upstream/polymake-2.12.tar.gz\n-rw-r--r-- 1 users    41376 oct.  17  2013 upstream/polytopes_db-20120220.tar.bz2\n```\n\n```\nsage -f polymake-2.12\nFound local metadata for polymake-2.12\nAttempting to download package polymake-2.12\n>>> Trying to download http://www.sagemath.org/packages/upstream/polymake/\n[Traceback (most recent call last):\n  File \"<stdin>\", line 35, in <module>\n  File \"/homes/doua/chapoton/sage/local/lib/python/urllib.py\", line 240, in retrieve\n    fp = self.open(url, data)\n  File \"/homes/doua/chapoton/sage/local/lib/python/urllib.py\", line 208, in open\n    return getattr(self, name)(url)\n  File \"/homes/doua/chapoton/sage/local/lib/python/urllib.py\", line 359, in open_http\n    return self.http_error(url, fp, errcode, errmsg, headers)\n  File \"/homes/doua/chapoton/sage/local/lib/python/urllib.py\", line 376, in http_error\n    return self.http_error_default(url, fp, errcode, errmsg, headers)\n  File \"<stdin>\", line 17, in http_error_default\nIOError: [Errno 404] Not Found: '//www.sagemath.org/packages/upstream/polymake/'\nError: failed to download package polymake-2.12\n\n```",
    "created_at": "2014-12-02T14:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168043",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>


```
ls -lg upstream/po*
-rw-r--r-- 1 users  1565069 oct.  17  2013 upstream/polybori-0.8.3.tar.bz2
-rw-r--r-- 1 users 14504274 nov.  27 13:27 upstream/polymake-2.12.tar.gz
-rw-r--r-- 1 users    41376 oct.  17  2013 upstream/polytopes_db-20120220.tar.bz2
```

```
sage -f polymake-2.12
Found local metadata for polymake-2.12
Attempting to download package polymake-2.12
>>> Trying to download http://www.sagemath.org/packages/upstream/polymake/
[Traceback (most recent call last):
  File "<stdin>", line 35, in <module>
  File "/homes/doua/chapoton/sage/local/lib/python/urllib.py", line 240, in retrieve
    fp = self.open(url, data)
  File "/homes/doua/chapoton/sage/local/lib/python/urllib.py", line 208, in open
    return getattr(self, name)(url)
  File "/homes/doua/chapoton/sage/local/lib/python/urllib.py", line 359, in open_http
    return self.http_error(url, fp, errcode, errmsg, headers)
  File "/homes/doua/chapoton/sage/local/lib/python/urllib.py", line 376, in http_error
    return self.http_error_default(url, fp, errcode, errmsg, headers)
  File "<stdin>", line 17, in http_error_default
IOError: [Errno 404] Not Found: '//www.sagemath.org/packages/upstream/polymake/'
Error: failed to download package polymake-2.12

```



---

archive/issue_comments_168044.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nHuh.  It really shouldn't try to do that.  Did you use the branch on this ticket?  Otherwise it would assume it's an old-style spkg, I believe, in which case this error message would make sense.",
    "created_at": "2014-12-02T14:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168044",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:32" align="right">comment:32</div>

Huh.  It really shouldn't try to do that.  Did you use the branch on this ticket?  Otherwise it would assume it's an old-style spkg, I believe, in which case this error message would make sense.



---

archive/issue_comments_168045.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nYes, I am doing that sitting on the branch here, having built this branch.",
    "created_at": "2014-12-02T14:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168045",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:33" align="right">comment:33</div>

Yes, I am doing that sitting on the branch here, having built this branch.



---

archive/issue_comments_168046.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOk, I'll see if I can find some time to try this on sage.math or some other system.  I suspect it's due to the packaging etc.",
    "created_at": "2014-12-02T15:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168046",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:34" align="right">comment:34</div>

Ok, I'll see if I can find some time to try this on sage.math or some other system.  I suspect it's due to the packaging etc.



---

archive/issue_comments_168047.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nOkay, I can confirm this problem.  Looking into it.",
    "created_at": "2014-12-02T15:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168047",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:35" align="right">comment:35</div>

Okay, I can confirm this problem.  Looking into it.



---

archive/issue_comments_168048.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI think the problem is that now the checksum file includes a line about where the tarball lives - see also [here](http://www.sagemath.org/doc/developer/packaging.html#checksums).\n\nFor now, try applying\n\n```diff\ndiff --git a/build/pkgs/polymake/checksums.ini b/build/pkgs/polymake/checksums.i\nindex e219804..75aba08 100644\n--- a/build/pkgs/polymake/checksums.ini\n+++ b/build/pkgs/polymake/checksums.ini\n@@ -1,3 +1,4 @@\n-sha1=a990ea31a68740cbf1aba02d49ec23ef589c173d\n-md5=f07ecafc7a946001c38cdd20e6434b09\n-cksum=1918099647\n+tarball=polymake-VERSION.tar.gz\n+sha1=6488bde98cc4f50f4c327ee55fae1140e2f1c1be\n+md5=b3351c8b772177a198ac0e905f07de99\n+cksum=1659608855\n```\nAs noted, there are various odd Perl dependencies, see [here](http://polymake.org/doku.php/howto/install) for some Linux details.",
    "created_at": "2014-12-02T15:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168048",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:36" align="right">comment:36</div>

I think the problem is that now the checksum file includes a line about where the tarball lives - see also [here](http://www.sagemath.org/doc/developer/packaging.html#checksums).

For now, try applying

```diff
diff --git a/build/pkgs/polymake/checksums.ini b/build/pkgs/polymake/checksums.i
index e219804..75aba08 100644
--- a/build/pkgs/polymake/checksums.ini
+++ b/build/pkgs/polymake/checksums.ini
@@ -1,3 +1,4 @@
-sha1=a990ea31a68740cbf1aba02d49ec23ef589c173d
-md5=f07ecafc7a946001c38cdd20e6434b09
-cksum=1918099647
+tarball=polymake-VERSION.tar.gz
+sha1=6488bde98cc4f50f4c327ee55fae1140e2f1c1be
+md5=b3351c8b772177a198ac0e905f07de99
+cksum=1659608855
```
As noted, there are various odd Perl dependencies, see [here](http://polymake.org/doku.php/howto/install) for some Linux details.



---

archive/issue_comments_168049.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThanks. This now starts the installation, which fails later because of some Perl warnings. As I am not root on the machine on which I tried, I will have to try later on my own machine.",
    "created_at": "2014-12-02T16:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168049",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:37" align="right">comment:37</div>

Thanks. This now starts the installation, which fails later because of some Perl warnings. As I am not root on the machine on which I tried, I will have to try later on my own machine.



---

archive/issue_comments_168050.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOkay.  You should be able to ignore the\n\n```\nWARNING: perl module Term::ReadLine::Gnu required for polymake not found on your machine.\n```\nwarning, we just won't be able to guarantee using polymake as a command-line option without that (and on Mac that is very tricky, probably much less so on Linux).  Something like\n\n```\nsudo perl -MCPAN -e 'install XML::LibXSLT'\n```\nshould suffice for the xml stuff, assuming you have the other prereqs they recommend, I guess.",
    "created_at": "2014-12-02T16:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168050",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:38" align="right">comment:38</div>

Okay.  You should be able to ignore the

```
WARNING: perl module Term::ReadLine::Gnu required for polymake not found on your machine.
```
warning, we just won't be able to guarantee using polymake as a command-line option without that (and on Mac that is very tricky, probably much less so on Linux).  Something like

```
sudo perl -MCPAN -e 'install XML::LibXSLT'
```
should suffice for the xml stuff, assuming you have the other prereqs they recommend, I guess.



---

archive/issue_comments_168051.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI get the same build failure on my own machine (after installing all of polymake dependencies) and on the machine of my department, namely:\n\n```\n\nIn file included from /usr/lib/perl/5.18/CORE/perl.h:3482:0,\n                 from /home/chapoton/sage/local/var/tmp/sage/build/polymake-2.12/src/include/core/polymake/perl/Ext.h:22,\n                 from Ext.xs:18:\nExt.xs: In function 'pm_perl_get_cx_curpad':\n/usr/lib/perl/5.18/CORE/av.h:62:26: error: 'PADLIST' has no member named 'sv_u'\n #define AvARRAY(av) ((av)->sv_u.svu_array)\n                          ^\nExt.xs:45:17: note: in expansion of macro 'AvARRAY'\n    return (SV**)AvARRAY(((AV**)AvARRAY(CvPADLIST(cv)))[d+1]);\n                 ^\nExt.xs:45:32: note: in expansion of macro 'AvARRAY'\n    return (SV**)AvARRAY(((AV**)AvARRAY(CvPADLIST(cv)))[d+1]);\n                                ^\nmake[2]: *** [Ext.o] Error 1\n\n```",
    "created_at": "2014-12-02T18:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168051",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">comment:39</div>

I get the same build failure on my own machine (after installing all of polymake dependencies) and on the machine of my department, namely:

```

In file included from /usr/lib/perl/5.18/CORE/perl.h:3482:0,
                 from /home/chapoton/sage/local/var/tmp/sage/build/polymake-2.12/src/include/core/polymake/perl/Ext.h:22,
                 from Ext.xs:18:
Ext.xs: In function 'pm_perl_get_cx_curpad':
/usr/lib/perl/5.18/CORE/av.h:62:26: error: 'PADLIST' has no member named 'sv_u'
 #define AvARRAY(av) ((av)->sv_u.svu_array)
                          ^
Ext.xs:45:17: note: in expansion of macro 'AvARRAY'
    return (SV**)AvARRAY(((AV**)AvARRAY(CvPADLIST(cv)))[d+1]);
                 ^
Ext.xs:45:32: note: in expansion of macro 'AvARRAY'
    return (SV**)AvARRAY(((AV**)AvARRAY(CvPADLIST(cv)))[d+1]);
                                ^
make[2]: *** [Ext.o] Error 1

```



---

archive/issue_comments_168052.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThis is almost certainly because you have too *new* (!) of a Perl - see [this report](http://forum.polymake.org/viewtopic.php?f=10&t=338#p1129).  See also e.g. http://forum.polymake.org/viewtopic.php?f=8&p=942#p942 which is really annoying, these things happen a lot.\n\nIt seems pretty likely that the 2.13 version should fix this.  I will see if that still builds on my 10.7 Mac.\n\nSee also http://www.polymake.org/doku.php/workshop1214 which points out that Mac 10.10 compatibility is not yet achieved, probably partly for some related reason.   Basically, polymake is definitely still in \"optional\" territory, if not experimental still!",
    "created_at": "2014-12-02T19:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168052",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:40" align="right">comment:40</div>

This is almost certainly because you have too *new* (!) of a Perl - see [this report](http://forum.polymake.org/viewtopic.php?f=10&t=338#p1129).  See also e.g. http://forum.polymake.org/viewtopic.php?f=8&p=942#p942 which is really annoying, these things happen a lot.

It seems pretty likely that the 2.13 version should fix this.  I will see if that still builds on my 10.7 Mac.

See also http://www.polymake.org/doku.php/workshop1214 which points out that Mac 10.10 compatibility is not yet achieved, probably partly for some related reason.   Basically, polymake is definitely still in "optional" territory, if not experimental still!



---

archive/issue_comments_168053.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nTry this instead of the previous, and the package at  \u200bhttp://sage.math.washington.edu/home/kcrisman/polymake-2.13.tar.gz .  I'm currently seeing how/whether this performs right on my machine.\n\n```diff\ndiff --git a/build/pkgs/polymake/checksums.ini b/build/pkgs/polymake/checksums.i\nindex e219804..a45c75e 100644\n--- a/build/pkgs/polymake/checksums.ini\n+++ b/build/pkgs/polymake/checksums.ini\n@@ -1,3 +1,4 @@\n-sha1=a990ea31a68740cbf1aba02d49ec23ef589c173d\n-md5=f07ecafc7a946001c38cdd20e6434b09\n-cksum=1918099647\n+tarball=polymake-VERSION.tar.gz\n+sha1=72f32a1e0b8a9f8d8e12ef7563c481de1d44cd67\n+md5=92da21355405790c6c816304569a7b12\n+cksum=890996601\ndiff --git a/build/pkgs/polymake/package-version.txt b/build/pkgs/polymake/packa\nindex 3e162f0..ae656d4 100644\n--- a/build/pkgs/polymake/package-version.txt\n+++ b/build/pkgs/polymake/package-version.txt\n@@ -1 +1 @@\n-2.12\n+2.13\ndiff --git a/build/pkgs/polymake/spkg-install b/build/pkgs/polymake/spkg-install\nindex ce6723d..c7a52d1 100755\n--- a/build/pkgs/polymake/spkg-install\n+++ b/build/pkgs/polymake/spkg-install\n@@ -9,7 +9,7 @@ fi\n cd src\n \n ./configure --prefix=\"$SAGE_LOCAL\" --with-boost=\"$SAGE_LOCAL\" --with-gmp=\"$SAGE\n-            --with-mpfr=\"$SAGE_LOCAL\" --with-readline=\"$SAGE_LOCAL\" --with-fink\n+            --with-mpfr=\"$SAGE_LOCAL\" --with-readline=\"$SAGE_LOCAL\" --without-f\n if [ $? -ne 0 ]; then\n     echo \"Failed to configure.\"\n     exit 1\n```",
    "created_at": "2014-12-02T19:34:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168053",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:41" align="right">comment:41</div>

Try this instead of the previous, and the package at  ​http://sage.math.washington.edu/home/kcrisman/polymake-2.13.tar.gz .  I'm currently seeing how/whether this performs right on my machine.

```diff
diff --git a/build/pkgs/polymake/checksums.ini b/build/pkgs/polymake/checksums.i
index e219804..a45c75e 100644
--- a/build/pkgs/polymake/checksums.ini
+++ b/build/pkgs/polymake/checksums.ini
@@ -1,3 +1,4 @@
-sha1=a990ea31a68740cbf1aba02d49ec23ef589c173d
-md5=f07ecafc7a946001c38cdd20e6434b09
-cksum=1918099647
+tarball=polymake-VERSION.tar.gz
+sha1=72f32a1e0b8a9f8d8e12ef7563c481de1d44cd67
+md5=92da21355405790c6c816304569a7b12
+cksum=890996601
diff --git a/build/pkgs/polymake/package-version.txt b/build/pkgs/polymake/packa
index 3e162f0..ae656d4 100644
--- a/build/pkgs/polymake/package-version.txt
+++ b/build/pkgs/polymake/package-version.txt
@@ -1 +1 @@
-2.12
+2.13
diff --git a/build/pkgs/polymake/spkg-install b/build/pkgs/polymake/spkg-install
index ce6723d..c7a52d1 100755
--- a/build/pkgs/polymake/spkg-install
+++ b/build/pkgs/polymake/spkg-install
@@ -9,7 +9,7 @@ fi
 cd src
 
 ./configure --prefix="$SAGE_LOCAL" --with-boost="$SAGE_LOCAL" --with-gmp="$SAGE
-            --with-mpfr="$SAGE_LOCAL" --with-readline="$SAGE_LOCAL" --with-fink
+            --with-mpfr="$SAGE_LOCAL" --with-readline="$SAGE_LOCAL" --without-f
 if [ $? -ne 0 ]; then
     echo "Failed to configure."
     exit 1
```



---

archive/issue_comments_168054.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThis doesn't work for me, though.  Aargh.",
    "created_at": "2014-12-02T20:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168054",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:42" align="right">comment:42</div>

This doesn't work for me, though.  Aargh.



---

archive/issue_comments_168055.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\non my department's machine, I got that:\n\n```\nUnrecognized option --with-readline=/homes/doua/cha/sage/local;\nTry ./configure --help for detailed information\nFailed to configure.\n```\n\nand the configure is still beleaving it is in 6.4.rc2",
    "created_at": "2014-12-04T10:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168055",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">comment:43</div>

on my department's machine, I got that:

```
Unrecognized option --with-readline=/homes/doua/cha/sage/local;
Try ./configure --help for detailed information
Failed to configure.
```

and the configure is still beleaving it is in 6.4.rc2



---

archive/issue_comments_168056.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb\"><code>c52e798</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.7</code></td></tr></table>\n",
    "created_at": "2015-05-22T20:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168056",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb"><code>c52e798</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.7</code></td></tr></table>




---

archive/issue_comments_168057.json:
```json
{
    "body": "Changed commit from **[`faa22c6`](https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c)** to **[`c52e798`](https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb)**",
    "created_at": "2015-05-22T20:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168057",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`faa22c6`](https://github.com/sagemath/sagetrac-mirror/commit/faa22c6b6e5cd42bd138d8fca06cd8f03d8a601c)** to **[`c52e798`](https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb)**



---

archive/issue_events_196740.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-17T12:08:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196740"
}
```



---

archive/issue_events_196741.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-17T12:08:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196741"
}
```



---

archive/issue_comments_168058.json:
```json
{
    "body": "Changed commit from **[`c52e798`](https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb)** to **[`50f6da9`](https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f)**",
    "created_at": "2015-10-28T20:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168058",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c52e798`](https://github.com/sagemath/sagetrac-mirror/commit/c52e7981f859febc7ca6eca2eff51d36450532bb)** to **[`50f6da9`](https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f)**



---

archive/issue_comments_168059.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f\"><code>50f6da9</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.10.b1</code></td></tr></table>\n",
    "created_at": "2015-10-28T20:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50f6da95b155a9739c546b2f0fcd5f6edd09546f"><code>50f6da9</code></a></td><td><code>Merge branch 'public/ticket/14416' into 6.10.b1</code></td></tr></table>




---

archive/issue_comments_168060.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n I've written a new interface for polymake using its shared library interface, while trying to stay backward compatible with what there was before.\n \n I've classified this as a defect, since the current interface doesn't work anymore.\n+\n+http://www.polymake.org/lib/exe/fetch.php/download/polymake-2.14r1-minimal.tar.bz2\n``````\n",
    "created_at": "2015-10-28T20:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168060",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 I've written a new interface for polymake using its shared library interface, while trying to stay backward compatible with what there was before.
 
 I've classified this as a defect, since the current interface doesn't work anymore.
+
+http://www.polymake.org/lib/exe/fetch.php/download/polymake-2.14r1-minimal.tar.bz2
``````




---

archive/issue_events_196742.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-06T13:05:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "title_is": "update polymake interface to 2.14-rc1",
    "title_was": "update polymake interface to 2.12-rc3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196742"
}
```



---

archive/issue_events_196743.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-06T13:05:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196743"
}
```



---

archive/issue_events_196744.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-06T13:05:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196744"
}
```



---

archive/issue_events_196745.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-12-30T18:14:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196745"
}
```



---

archive/issue_events_196746.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-12-30T18:14:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196746"
}
```



---

archive/issue_comments_168061.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nNew tentative at #20892 for polymake-3.0",
    "created_at": "2016-06-27T21:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168061",
    "user": "https://github.com/videlec"
}
```

<div id="comment:50" align="right">comment:50</div>

New tentative at #20892 for polymake-3.0



---

archive/issue_comments_168062.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nMatthias, are you going to repurpose this and use some of it for the updated interface now that you have things working in #20892 for upgrading polymake?",
    "created_at": "2016-06-29T00:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168062",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:51" align="right">comment:51</div>

Matthias, are you going to repurpose this and use some of it for the updated interface now that you have things working in #20892 for upgrading polymake?



---

archive/issue_comments_168063.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI think Vincent may be working on it; and it sounds like it will be on a new ticket rather than this one here.",
    "created_at": "2016-06-29T00:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168063",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

I think Vincent may be working on it; and it sounds like it will be on a new ticket rather than this one here.



---

archive/issue_comments_168064.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI am indeed working on the Cython interface to polymake. I should come out with a minimal version by the end of the week.",
    "created_at": "2016-06-29T06:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168064",
    "user": "https://github.com/videlec"
}
```

<div id="comment:53" align="right">comment:53</div>

I am indeed working on the Cython interface to polymake. I should come out with a minimal version by the end of the week.



---

archive/issue_comments_168065.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI'm proposing to close this outdated ticket because newer efforts have made it obsolete.",
    "created_at": "2017-03-29T20:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168065",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

I'm proposing to close this outdated ticket because newer efforts have made it obsolete.



---

archive/issue_events_196747.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T20:42:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196747"
}
```



---

archive/issue_events_196748.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T20:42:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196748"
}
```



---

archive/issue_events_196749.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T20:42:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196749"
}
```



---

archive/issue_comments_168066.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nSounds reasonable - just be sure to point to the tickets which overtake it here :)",
    "created_at": "2017-03-30T01:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168066",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:55" align="right">comment:55</div>

Sounds reasonable - just be sure to point to the tickets which overtake it here :)



---

archive/issue_comments_168067.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nThat's:\n- #22452: Create a Polymake pexpect interface\n- #22658: Support interface coercion polymake(X) for Polyhedron\n- #22683: backend_polymake for Polyhedron\nand, in a separate effort,\n- #21170: package pypolymake",
    "created_at": "2017-03-30T02:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168067",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

That's:
- #22452: Create a Polymake pexpect interface
- #22658: Support interface coercion polymake(X) for Polyhedron
- #22683: backend_polymake for Polyhedron
and, in a separate effort,
- #21170: package pypolymake



---

archive/issue_events_196750.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-03-30T03:15:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196750"
}
```



---

archive/issue_events_196751.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-03-30T03:15:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196751"
}
```



---

archive/issue_comments_168068.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman, Fr\u00e9d\u00e9ric Chapoton** to **Karl-Dieter Crisman, Fr\u00e9d\u00e9ric Chapoton, Matthias K\u00f6ppe**",
    "created_at": "2017-03-30T03:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168068",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Karl-Dieter Crisman, Frédéric Chapoton** to **Karl-Dieter Crisman, Frédéric Chapoton, Matthias Köppe**



---

archive/issue_events_196752.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196752"
}
```



---

archive/issue_events_196753.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196753"
}
```



---

archive/issue_events_196754.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196754"
}
```



---

archive/issue_events_196755.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14116#event-196755"
}
```



---

archive/issue_comments_168069.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nClosing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14116#issuecomment-168069",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).
