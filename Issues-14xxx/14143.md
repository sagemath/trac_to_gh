# Issue 14143: Alcove model in affine cartan type

archive/issues_013939.json:
```json
{
    "body": "Extending the alcove path model implementation to affine type.  \n\nApply:\n\n- [attachment:trac_14143-alcove-path-al.3.patch]\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @tscrim @anneschilling\n\n**Keywords:** alcove model, days45\n\n**Reviewer:** Anne Schilling\n\n**Author:** Arthur Lubovsky\n\n**Merged:** sage-5.11.beta2\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14143\n\n",
    "closed_at": "2013-06-19T12:25:41Z",
    "created_at": "2013-02-17T15:37:36Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Alcove model in affine cartan type",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14143",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```
Extending the alcove path model implementation to affine type.  

Apply:

- [attachment:trac_14143-alcove-path-al.3.patch]

**Assignee:** sage-combinat

**CC:**  sage-combinat @tscrim @anneschilling

**Keywords:** alcove model, days45

**Reviewer:** Anne Schilling

**Author:** Arthur Lubovsky

**Merged:** sage-5.11.beta2

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14143





---

archive/issue_comments_221954.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe second patch replaces the first, but there does not appear to be a way to do that if one forgets to click \"replace patch with the same name\" when submitting the patch initially.\n\nEdit: The third patch is the  latest one. It would be nice to be able to remove the first two.",
    "created_at": "2013-02-18T14:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221954",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:1'></a>
The second patch replaces the first, but there does not appear to be a way to do that if one forgets to click "replace patch with the same name" when submitting the patch initially.

Edit: The third patch is the  latest one. It would be nice to be able to remove the first two.



---

archive/issue_comments_221955.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-The current implementation of the alcove model doesn't work in affine cartan type. \n+Extending the alcove path model implementation to affine type.  \n``````\n",
    "created_at": "2013-02-18T14:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221955",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-The current implementation of the alcove model doesn't work in affine cartan type. 
+Extending the alcove path model implementation to affine type.  
``````




---

archive/issue_comments_221956.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-03-08T20:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221956",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_221957.json:
```json
{
    "body": "<a id='comment:2'></a>\nAttachment [trac_14143-alcove-path-al.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.patch) by alubovsky created at 2013-03-08 20:54:43",
    "created_at": "2013-03-08T20:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221957",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:2'></a>
Attachment [trac_14143-alcove-path-al.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.patch) by alubovsky created at 2013-03-08 20:54:43



---

archive/issue_comments_221958.json:
```json
{
    "body": "Attachment [trac_14143-alcove-path-al.2.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.2.patch) by alubovsky created at 2013-03-09 09:57:19",
    "created_at": "2013-03-09T09:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221958",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

Attachment [trac_14143-alcove-path-al.2.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.2.patch) by alubovsky created at 2013-03-09 09:57:19



---

archive/issue_comments_221959.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Arthur,\n\nI just did a trivial rebase of your patch in the queue: it did not apply on all.py due to the addition of CrystalOfProjectedLevelZeroLSPaths yesterday.\n\nBy the way: there is no reason to import CrystalOfAlcovePathsElement in the global name space. So I removed that. Also your patch removes the former ClassicalCrystalOfAlcovePaths. This is good since the new version is more general; however a deprecation link should inserted.\n\nSee: http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation\n\nCheers,\n                                       Nicolas",
    "created_at": "2013-03-13T13:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221959",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:3'></a>
Hi Arthur,

I just did a trivial rebase of your patch in the queue: it did not apply on all.py due to the addition of CrystalOfProjectedLevelZeroLSPaths yesterday.

By the way: there is no reason to import CrystalOfAlcovePathsElement in the global name space. So I removed that. Also your patch removes the former ClassicalCrystalOfAlcovePaths. This is good since the new version is more general; however a deprecation link should inserted.

See: http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation

Cheers,
                                       Nicolas



---

archive/issue_comments_221960.json:
```json
{
    "body": "<a id='comment:4'></a>\nHi Arthur,\n\nThanks for your patch on alcove paths. Here are some further comments that would be good to incorporate!\n\n- Please specify what the default value of `good_zero_arrows` is. Do you want to merge this experimental code into main sage, or rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?\n\n- \"Littlewood paths\" in the documentation of sage.combinat.crystals.alcove_path.CrystalOfAlcovePaths should be \"Littelmann paths\"\n\n- \"We verify the alcove path crystal with the LS path crystal\" should probably be \"We verify that the alcove path crystal is isomorphic to the LS path crystal\".\n\n- The interface for the LS paths has changed and now the preferred way is to input an actual weight rather than the coefficients of the fundamental weights. The advantage is that weights are typed whereas a list of coefficients is not. Do you think you could have a look at LS paths and make the user interface for Alcove paths consistent with it? I think this would be good for the users!\n\n- Since you mention Demazure 0-arrows in your documentation, please define what they are!\n\n- For the method `vertices` please explain how you compute all crystal elements without the crystal operators (since you say that they cannot all be reached by crystal operators; so you must have an alternative way!).\n\n- For the method :meth:`digraph_fast` perhaps give an example of how the speed compares to the usual digraph method and max_depth setting. You can do this with %timeit for example.\n\n- Why is the method static sign(root) in alcove paths and not in root_systems? The same question holds for max_level.\n\n- Typo in :meth:`words`:  \"finte Cartan types\" -> \"finite Cartan types\"\n\n- Please explain the inputs of sage.combinat.crystals.alcove_path.compare_graphs(g1, g2, node1, node2).\n\n- I get some doctest failures:\n\n```\nsage -t alcove_path.py\n**********************************************************************\nFile \"alcove_path.py\", line 637, in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon\nFailed example:\n    [c.epsilon(1) for c in C]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon[1]>\", line 1, in <module>\n        [c.epsilon(Integer(1)) for c in C]\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py\", line 647, in epsilon\n        return super(CrystalOfAlcovePathsElement, self).epsilon(i)\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/misc/abstract_method.py\", line 224, in __get__\n        raise NotImplementedError(repr(self))\n    NotImplementedError: <abstract method epsilon at 0x10a74ab90>\n**********************************************************************\nFile \"alcove_path.py\", line 639, in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon\nFailed example:\n    [c.epsilon(2) for c in C]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon[2]>\", line 1, in <module>\n        [c.epsilon(Integer(2)) for c in C]\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py\", line 647, in epsilon\n        return super(CrystalOfAlcovePathsElement, self).epsilon(i)\n      File \"/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/misc/abstract_method.py\", line 224, in __get__\n        raise NotImplementedError(repr(self))\n    NotImplementedError: <abstract method epsilon at 0x10a74ab90>\n**********************************************************************\n1 item had failures:\n   2 of   4 in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon\n    [212 tests, 2 failures, 97.16 s]\n----------------------------------------------------------------------\nsage -t alcove_path.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 97.4 seconds\n    cpu time: 94.8 seconds\n    cumulative wall time: 97.2 seconds\n```\n\nSo much for now!\n\nAnne",
    "created_at": "2013-05-09T19:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221960",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:4'></a>
Hi Arthur,

Thanks for your patch on alcove paths. Here are some further comments that would be good to incorporate!

- Please specify what the default value of `good_zero_arrows` is. Do you want to merge this experimental code into main sage, or rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?

- "Littlewood paths" in the documentation of sage.combinat.crystals.alcove_path.CrystalOfAlcovePaths should be "Littelmann paths"

- "We verify the alcove path crystal with the LS path crystal" should probably be "We verify that the alcove path crystal is isomorphic to the LS path crystal".

- The interface for the LS paths has changed and now the preferred way is to input an actual weight rather than the coefficients of the fundamental weights. The advantage is that weights are typed whereas a list of coefficients is not. Do you think you could have a look at LS paths and make the user interface for Alcove paths consistent with it? I think this would be good for the users!

- Since you mention Demazure 0-arrows in your documentation, please define what they are!

- For the method `vertices` please explain how you compute all crystal elements without the crystal operators (since you say that they cannot all be reached by crystal operators; so you must have an alternative way!).

- For the method :meth:`digraph_fast` perhaps give an example of how the speed compares to the usual digraph method and max_depth setting. You can do this with %timeit for example.

- Why is the method static sign(root) in alcove paths and not in root_systems? The same question holds for max_level.

- Typo in :meth:`words`:  "finte Cartan types" -> "finite Cartan types"

- Please explain the inputs of sage.combinat.crystals.alcove_path.compare_graphs(g1, g2, node1, node2).

- I get some doctest failures:

```
sage -t alcove_path.py
**********************************************************************
File "alcove_path.py", line 637, in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon
Failed example:
    [c.epsilon(1) for c in C]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon[1]>", line 1, in <module>
        [c.epsilon(Integer(1)) for c in C]
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py", line 647, in epsilon
        return super(CrystalOfAlcovePathsElement, self).epsilon(i)
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/misc/abstract_method.py", line 224, in __get__
        raise NotImplementedError(repr(self))
    NotImplementedError: <abstract method epsilon at 0x10a74ab90>
**********************************************************************
File "alcove_path.py", line 639, in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon
Failed example:
    [c.epsilon(2) for c in C]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon[2]>", line 1, in <module>
        [c.epsilon(Integer(2)) for c in C]
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py", line 647, in epsilon
        return super(CrystalOfAlcovePathsElement, self).epsilon(i)
      File "/Applications/sage-5.9/local/lib/python2.7/site-packages/sage/misc/abstract_method.py", line 224, in __get__
        raise NotImplementedError(repr(self))
    NotImplementedError: <abstract method epsilon at 0x10a74ab90>
**********************************************************************
1 item had failures:
   2 of   4 in sage.combinat.crystals.alcove_path.CrystalOfAlcovePathsElement.epsilon
    [212 tests, 2 failures, 97.16 s]
----------------------------------------------------------------------
sage -t alcove_path.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 97.4 seconds
    cpu time: 94.8 seconds
    cumulative wall time: 97.2 seconds
```

So much for now!

Anne



---

archive/issue_comments_221961.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Anne,\n\n    If it's not mentioned below, I addressed it in the new patch on combinat queue.\n\n- Do you want to merge this experimental code into main sage, or\n  rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?\n\n    A patch would probably be ideal. Would it then permanently live \n    at the very bottom of the queue? Or just something available in\n    private (which may be easier to implement).\n\n  - The interface for the LS paths has changed and now the preferred way is\n  to input an actual weight rather than the coefficients of the fundamental\n  weights. The advantage is that weights are typed whereas a list of\n  coefficients is not. Do you think you could have a look at LS paths and\n  make the user interface for Alcove paths consistent with it? I think this\n  would be good for the users!\n   \n    Still need to do this part.  It's a bit tricky and I don't have much\n    time at the moment.  When I find some time...  I guess in order to\n    stay compatible with the old ClassicalCrystalOfAlcovePaths code I have\n    to do the same implementation as the LS paths code, instead of just\n    changing the parameters by hand. \n\n  - Why is the method static sign(root) in alcove paths and not in\n  root_systems? The same question holds for max_level.\n\n    root_systems already has a is_positive_root method, sign is just\n    something convenient for my purposes. Should I rename it to _sign?\n    max_level is something specific to the alcove model. Can be renamed to\n    _max_level. Since that is part of a private class\n    (doesn't get imported into sage) I don't see the point.\n\n\n    FYI, On line 284, TestSuite(C).run() (in the affine case( is now\n    taking around 150sec, which it didn't used to (I added a #long time). \n    Not sure why this is happening.\n\nArthur",
    "created_at": "2013-05-14T06:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221961",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:5'></a>
Hi Anne,

    If it's not mentioned below, I addressed it in the new patch on combinat queue.

- Do you want to merge this experimental code into main sage, or
  rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?

    A patch would probably be ideal. Would it then permanently live 
    at the very bottom of the queue? Or just something available in
    private (which may be easier to implement).

  - The interface for the LS paths has changed and now the preferred way is
  to input an actual weight rather than the coefficients of the fundamental
  weights. The advantage is that weights are typed whereas a list of
  coefficients is not. Do you think you could have a look at LS paths and
  make the user interface for Alcove paths consistent with it? I think this
  would be good for the users!
   
    Still need to do this part.  It's a bit tricky and I don't have much
    time at the moment.  When I find some time...  I guess in order to
    stay compatible with the old ClassicalCrystalOfAlcovePaths code I have
    to do the same implementation as the LS paths code, instead of just
    changing the parameters by hand. 

  - Why is the method static sign(root) in alcove paths and not in
  root_systems? The same question holds for max_level.

    root_systems already has a is_positive_root method, sign is just
    something convenient for my purposes. Should I rename it to _sign?
    max_level is something specific to the alcove model. Can be renamed to
    _max_level. Since that is part of a private class
    (doesn't get imported into sage) I don't see the point.


    FYI, On line 284, TestSuite(C).run() (in the affine case( is now
    taking around 150sec, which it didn't used to (I added a #long time). 
    Not sure why this is happening.

Arthur



---

archive/issue_comments_221962.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi Arthur,\n\nThanks for your work on this!\n\n> - Do you want to merge this experimental code into main sage, or\n>   rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?\n> \n>     A patch would probably be ideal. Would it then permanently live \n>     at the very bottom of the queue? Or just something available in\n>     private (which may be easier to implement).\n\n\nYes, it could be a patch somewhere in the sage-combinat queue (after the \"Needs Review\" section). Although, the queue will disappear soon anyway, but if you want to share the code with others, it might be best to have a patch for it!\n\n>  - The interface for the LS paths has changed and now the preferred way is\n>  to input an actual weight rather than the coefficients of the fundamental\n>  weights. The advantage is that weights are typed whereas a list of\n>  coefficients is not. Do you think you could have a look at LS paths and\n>  make the user interface for Alcove paths consistent with it? I think this\n>  would be good for the users!\n>    \n>     Still need to do this part.  It's a bit tricky and I don't have much\n>     time at the moment.  When I find some time...  I guess in order to\n>     stay compatible with the old ClassicalCrystalOfAlcovePaths code I have\n>     to do the same implementation as the LS paths code, instead of just\n>     changing the parameters by hand. \n\n\nLook at __classcall_private__ line 121 in littelmann_path.py and __init__ line 158. That allows both inputs and hence you would stay compatible with the old code!\n\n>  - Why is the method static sign(root) in alcove paths and not in\n>  root_systems? The same question holds for max_level.\n\n> \n>     root_systems already has a is_positive_root method, sign is just\n>     something convenient for my purposes. Should I rename it to _sign?\n>     max_level is something specific to the alcove model. Can be renamed to\n>     _max_level. Since that is part of a private class\n>     (doesn't get imported into sage) I don't see the point.\n\n\nOk, then please make them underscore methods!\n\n>     FYI, On line 284, TestSuite(C).run() (in the affine case( is now\n>     taking around 150sec, which it didn't used to (I added a #long time). \n>     Not sure why this is happening.\n\n\nYes, I noticed that for me the code also took a long time to run! Perhaps some profiling would be a good idea to see what is taking up so much time.\n\nBest,\n\nAnne",
    "created_at": "2013-05-14T14:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221962",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:6'></a>
Hi Arthur,

Thanks for your work on this!

> - Do you want to merge this experimental code into main sage, or
>   rather separate it out into a personal patch that can be used by yourself and your collaborators (and me :-) )?
> 
>     A patch would probably be ideal. Would it then permanently live 
>     at the very bottom of the queue? Or just something available in
>     private (which may be easier to implement).


Yes, it could be a patch somewhere in the sage-combinat queue (after the "Needs Review" section). Although, the queue will disappear soon anyway, but if you want to share the code with others, it might be best to have a patch for it!

>  - The interface for the LS paths has changed and now the preferred way is
>  to input an actual weight rather than the coefficients of the fundamental
>  weights. The advantage is that weights are typed whereas a list of
>  coefficients is not. Do you think you could have a look at LS paths and
>  make the user interface for Alcove paths consistent with it? I think this
>  would be good for the users!
>    
>     Still need to do this part.  It's a bit tricky and I don't have much
>     time at the moment.  When I find some time...  I guess in order to
>     stay compatible with the old ClassicalCrystalOfAlcovePaths code I have
>     to do the same implementation as the LS paths code, instead of just
>     changing the parameters by hand. 


Look at __classcall_private__ line 121 in littelmann_path.py and __init__ line 158. That allows both inputs and hence you would stay compatible with the old code!

>  - Why is the method static sign(root) in alcove paths and not in
>  root_systems? The same question holds for max_level.

> 
>     root_systems already has a is_positive_root method, sign is just
>     something convenient for my purposes. Should I rename it to _sign?
>     max_level is something specific to the alcove model. Can be renamed to
>     _max_level. Since that is part of a private class
>     (doesn't get imported into sage) I don't see the point.


Ok, then please make them underscore methods!

>     FYI, On line 284, TestSuite(C).run() (in the affine case( is now
>     taking around 150sec, which it didn't used to (I added a #long time). 
>     Not sure why this is happening.


Yes, I noticed that for me the code also took a long time to run! Perhaps some profiling would be a good idea to see what is taking up so much time.

Best,

Anne



---

archive/issue_comments_221963.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Anne, \n\n    I've removed the 'good_zero_arrows' option, as requested.  \n    It may be easiest to put back in once sage moves to git, so I\n    would rather do that.  \n\n    The interface is changed to that of LS paths, using the \n    'preferred way'.\n\n    Requested methods are now private.\n\n    I've briefly ran a profiler on TestSuite(C).run() (now line 277).\n    It seems to be calling the usual processor intensive methods more\n    than before.  Perhaps it is searching deeper in this affine\n    crystal?  This may or may not be related, but doc testing for LS\n    paths code is also taking quite a bit longer than before. \n                                                                                                    \n    I've pushed the changes to combinat, but didn't make a patch.\n    This ticket already has too many patches ( my fault ).\n\nthanks\nArthur",
    "created_at": "2013-05-25T04:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221963",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:7'></a>
Hi Anne, 

    I've removed the 'good_zero_arrows' option, as requested.  
    It may be easiest to put back in once sage moves to git, so I
    would rather do that.  

    The interface is changed to that of LS paths, using the 
    'preferred way'.

    Requested methods are now private.

    I've briefly ran a profiler on TestSuite(C).run() (now line 277).
    It seems to be calling the usual processor intensive methods more
    than before.  Perhaps it is searching deeper in this affine
    crystal?  This may or may not be related, but doc testing for LS
    paths code is also taking quite a bit longer than before. 
                                                                                                    
    I've pushed the changes to combinat, but didn't make a patch.
    This ticket already has too many patches ( my fault ).

thanks
Arthur



---

archive/issue_comments_221964.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi Arthur,\n\nThanks for your work on this! You can click on \"Replace existing attachment of the same name\" to avoid creating a new patch each time you upload changes. Putting the patch on trac for the final stages helps insofar as the patchbot runs tests.\n\nAlso, your patch on the sage-combinat queue needs a proper \"export\" head.\n\nBest,\n\nAnne",
    "created_at": "2013-06-01T23:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221964",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:8'></a>
Hi Arthur,

Thanks for your work on this! You can click on "Replace existing attachment of the same name" to avoid creating a new patch each time you upload changes. Putting the patch on trac for the final stages helps insofar as the patchbot runs tests.

Also, your patch on the sage-combinat queue needs a proper "export" head.

Best,

Anne



---

archive/issue_comments_221965.json:
```json
{
    "body": "<a id='comment:9'></a>\nHi Arthur, again,\n\nThere were some small glitches in the documentation which I fixed in a review patch on the sage-combinat queue. If you are happy with those, please fold it into your patch.\n\nAlso, you mentioned that CrystalOfAlcovePath now has the same entries as LittelmannPath. However, you did not change the documentation of the input to reflect this. Could you please do so? Also, you will need to add some examples such as\n\n```\n    sage: R = RootSystem(['A',2])\n    sage: P = R.weight_lattice()\n    sage: La = P.fundamental_weights()\n    sage: CrystalOfAlcovePaths(La[1])\n    Highest weight crystal of alcove paths of type ['A', 2] and weight Lambda[1]\n    sage: C = CrystalOfAlcovePaths(La[1])\n    sage: B = CrystalOfAlcovePaths(['A',2],[1,0])\n    sage: B==C\n    True\n```\n\nIs the following really the correct behavior? Do you want alcove paths crystal labeled by level zero weights to be highest weight crystals?\n\n```\nsage: R = RootSystem(['A',2,1])\nsage: P = R.weight_lattice()\nsage: La = P.fundamental_weights()\nsage: C = CrystalOfAlcovePaths(La[1]-La[0])\nsage: C\nHighest weight crystal of alcove paths of type ['A', 2, 1] and weight -Lambda[0] + Lambda[1]\n```\n\nBest,\n\nAnne",
    "created_at": "2013-06-01T23:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221965",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:9'></a>
Hi Arthur, again,

There were some small glitches in the documentation which I fixed in a review patch on the sage-combinat queue. If you are happy with those, please fold it into your patch.

Also, you mentioned that CrystalOfAlcovePath now has the same entries as LittelmannPath. However, you did not change the documentation of the input to reflect this. Could you please do so? Also, you will need to add some examples such as

```
    sage: R = RootSystem(['A',2])
    sage: P = R.weight_lattice()
    sage: La = P.fundamental_weights()
    sage: CrystalOfAlcovePaths(La[1])
    Highest weight crystal of alcove paths of type ['A', 2] and weight Lambda[1]
    sage: C = CrystalOfAlcovePaths(La[1])
    sage: B = CrystalOfAlcovePaths(['A',2],[1,0])
    sage: B==C
    True
```

Is the following really the correct behavior? Do you want alcove paths crystal labeled by level zero weights to be highest weight crystals?

```
sage: R = RootSystem(['A',2,1])
sage: P = R.weight_lattice()
sage: La = P.fundamental_weights()
sage: C = CrystalOfAlcovePaths(La[1]-La[0])
sage: C
Highest weight crystal of alcove paths of type ['A', 2, 1] and weight -Lambda[0] + Lambda[1]
```

Best,

Anne



---

archive/issue_comments_221966.json:
```json
{
    "body": "<a id='comment:10'></a>\nHi Anne,\n\n    I mostly fixed the patch header.  I'm not sure how to add the Node\n    Id to the header (It should be automatic, but it's not working for \nme. I'm using the hgrc from\n    http://wiki.sagemath.org/combinat/MercurialStepByStep )\n\n    Patch is updated on trac server.\n\n    You are correct.  I only want dominant integral weights.  It  \n    should now raise a ValueError.  Some examples of LS paths style\n    inputs are added as requested.  Please let me know if more are needed.\n\n    I also replaced the word level with height as was suggested by you \n    some time ago, as level has another meaning, (as in LevelZeroLSpaths)\n\n\nArthur",
    "created_at": "2013-06-10T07:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221966",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:10'></a>
Hi Anne,

    I mostly fixed the patch header.  I'm not sure how to add the Node
    Id to the header (It should be automatic, but it's not working for 
me. I'm using the hgrc from
    http://wiki.sagemath.org/combinat/MercurialStepByStep )

    Patch is updated on trac server.

    You are correct.  I only want dominant integral weights.  It  
    should now raise a ValueError.  Some examples of LS paths style
    inputs are added as requested.  Please let me know if more are needed.

    I also replaced the word level with height as was suggested by you 
    some time ago, as level has another meaning, (as in LevelZeroLSpaths)


Arthur



---

archive/issue_comments_221967.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Extending the alcove path model implementation to affine type.  \n+\n+Apply:\n+\n+- [attachment:trac_14143-alcove-path-al.3.patch]\n``````\n",
    "created_at": "2013-06-12T04:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221967",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Extending the alcove path model implementation to affine type.  
+
+Apply:
+
+- [attachment:trac_14143-alcove-path-al.3.patch]
``````




---

archive/issue_comments_221968.json:
```json
{
    "body": "**Changing reviewer** from \"Anne Schilling,\" to \"Anne Schilling\".",
    "created_at": "2013-06-12T04:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221968",
    "user": "https://github.com/anneschilling"
}
```

**Changing reviewer** from "Anne Schilling," to "Anne Schilling".



---

archive/issue_comments_221969.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi Arthur,\n\nThanks for making the changes!\n\n>     I mostly fixed the patch header.  I'm not sure how to add the Node\n>     Id to the header (It should be automatic, but it's not working for \n>     me. I'm using the hgrc from\n>     http://wiki.sagemath.org/combinat/MercurialStepByStep )\n\n\nThe header looks ok to me now. I usually do\n\n```\nhg qrefresh -e\n```\nand then edit the header to put the line #14143. Then you need to do\n\n```\nhg export trac_14143.... /home/arthur/trac_14143...\n```\nwhere ... stands for the rest of the name and then upload to trac.\n\nI will look at your changes more closely soon and will report back if I find anything else.\n\nGreetings from Tel Aviv,\n\nAnne\n> \n>     Patch is updated on trac server.\n> \n>     You are correct.  I only want dominant integral weights.  It  \n>     should now raise a ValueError.  Some examples of LS paths style\n>     inputs are added as requested.  Please let me know if more are needed.\n> \n>     I also replaced the word level with height as was suggested by you \n>     some time ago, as level has another meaning, (as in LevelZeroLSpaths)\n> \n> \n> Arthur\n",
    "created_at": "2013-06-12T04:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221969",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:12'></a>
Hi Arthur,

Thanks for making the changes!

>     I mostly fixed the patch header.  I'm not sure how to add the Node
>     Id to the header (It should be automatic, but it's not working for 
>     me. I'm using the hgrc from
>     http://wiki.sagemath.org/combinat/MercurialStepByStep )


The header looks ok to me now. I usually do

```
hg qrefresh -e
```
and then edit the header to put the line #14143. Then you need to do

```
hg export trac_14143.... /home/arthur/trac_14143...
```
where ... stands for the rest of the name and then upload to trac.

I will look at your changes more closely soon and will report back if I find anything else.

Greetings from Tel Aviv,

Anne
> 
>     Patch is updated on trac server.
> 
>     You are correct.  I only want dominant integral weights.  It  
>     should now raise a ValueError.  Some examples of LS paths style
>     inputs are added as requested.  Please let me know if more are needed.
> 
>     I also replaced the word level with height as was suggested by you 
>     some time ago, as level has another meaning, (as in LevelZeroLSpaths)
> 
> 
> Arthur




---

archive/issue_events_046097.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "rename": {
        "from": "alcove model in affine cartan type",
        "to": "Alcove model in affine cartan type"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14143#event-46097"
}
```



---

archive/issue_comments_221970.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi Arthur,\n\nI left another review patch on the sage-combinat server. If you are happy with my changes, please fold that review patch and upload again. Then we are very close to a positive review!\n\nAnne",
    "created_at": "2013-06-12T13:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221970",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:14'></a>
Hi Arthur,

I left another review patch on the sage-combinat server. If you are happy with my changes, please fold that review patch and upload again. Then we are very close to a positive review!

Anne



---

archive/issue_comments_221971.json:
```json
{
    "body": "<a id='comment:15'></a>\nHi Anne,\n\n     Review patch is folded, new patch is uploaded.\n\nArthur",
    "created_at": "2013-06-12T16:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221971",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:15'></a>
Hi Anne,

     Review patch is folded, new patch is uploaded.

Arthur



---

archive/issue_comments_221972.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-06-12T19:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221972",
    "user": "https://github.com/anneschilling"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_221973.json:
```json
{
    "body": "<a id='comment:17'></a>\nCongratulations, Dr. Lubovsky (in two meanings!).\n\nAnne",
    "created_at": "2013-06-12T19:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221973",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:17'></a>
Congratulations, Dr. Lubovsky (in two meanings!).

Anne



---

archive/issue_events_046098.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-13T07:19:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14143#event-46098"
}
```



---

archive/issue_comments_221974.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-06-14T07:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221974",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_221975.json:
```json
{
    "body": "<a id='comment:19'></a>\nNever use a bare\n\n```\nexcept:\n```\nAlways catch *specific* exceptions, or, if you really want a catch-all, use\n\n```\nexcept StandardError:\n```",
    "created_at": "2013-06-14T07:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221975",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Never use a bare

```
except:
```
Always catch *specific* exceptions, or, if you really want a catch-all, use

```
except StandardError:
```



---

archive/issue_comments_221976.json:
```json
{
    "body": "<a id='comment:20'></a>\nThere are problems with the documentation:\n\n```\ndochtml.log:[combinat ] /mazur/release/merger/sage-5.11.beta2/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py:docstring of sage.combinat.crystals.alcove_path.compare_graphs:4: WARNING: Inline interpreted text or phrase reference start-string without end-string.\ndochtml.log:[combinat ] /mazur/release/merger/sage-5.11.beta2/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py:docstring of sage.combinat.crystals.alcove_path.compare_graphs:5: WARNING: Inline literal start-string without end-string.\n```\n\nI also recommend you to use the new doctest continuations (`....:` instead of `...`), as follows:\n\n```\nsage: for e in g.edges():  # long time \n....:     if e[0].phi(0) == 1 and e[2] == 0:\n....:         g.delete_edge(e)\n```",
    "created_at": "2013-06-14T09:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221976",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
There are problems with the documentation:

```
dochtml.log:[combinat ] /mazur/release/merger/sage-5.11.beta2/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py:docstring of sage.combinat.crystals.alcove_path.compare_graphs:4: WARNING: Inline interpreted text or phrase reference start-string without end-string.
dochtml.log:[combinat ] /mazur/release/merger/sage-5.11.beta2/local/lib/python2.7/site-packages/sage/combinat/crystals/alcove_path.py:docstring of sage.combinat.crystals.alcove_path.compare_graphs:5: WARNING: Inline literal start-string without end-string.
```

I also recommend you to use the new doctest continuations (`....:` instead of `...`), as follows:

```
sage: for e in g.edges():  # long time 
....:     if e[0].phi(0) == 1 and e[2] == 0:
....:         g.delete_edge(e)
```



---

archive/issue_comments_221977.json:
```json
{
    "body": "<a id='comment:21'></a>\nSorry about the errors, should be fixed now.",
    "created_at": "2013-06-14T16:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221977",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:21'></a>
Sorry about the errors, should be fixed now.



---

archive/issue_comments_221978.json:
```json
{
    "body": "<a id='comment:22'></a>\nHi Arthur,\n\nDid you actually fold my review patch? Looking at the patch I still see some issues with the documentation that I had fixed in the review patch I had posted on the sage-combinat queue.\n\nAnne",
    "created_at": "2013-06-14T20:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221978",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:22'></a>
Hi Arthur,

Did you actually fold my review patch? Looking at the patch I still see some issues with the documentation that I had fixed in the review patch I had posted on the sage-combinat queue.

Anne



---

archive/issue_comments_221979.json:
```json
{
    "body": "Attachment [trac_14143-alcove-path-al.3.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.3.patch) by alubovsky created at 2013-06-14 23:35:37",
    "created_at": "2013-06-14T23:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221979",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

Attachment [trac_14143-alcove-path-al.3.patch](tarball://root/attachments/some-uuid/ticket14143/trac_14143-alcove-path-al.3.patch) by alubovsky created at 2013-06-14 23:35:37



---

archive/issue_comments_221980.json:
```json
{
    "body": "<a id='comment:23'></a>\nHi Anne, \n\n       You are correct.  Even though I folded your patch, I mistakenly\n       discarded the changes afterwards.  My apologies!  The latest\n       version of the patch has your changes applied.\n\nArthur",
    "created_at": "2013-06-14T23:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221980",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:23'></a>
Hi Anne, 

       You are correct.  Even though I folded your patch, I mistakenly
       discarded the changes afterwards.  My apologies!  The latest
       version of the patch has your changes applied.

Arthur



---

archive/issue_comments_221981.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2013-06-15T05:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221981",
    "user": "https://github.com/anneschilling"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_221982.json:
```json
{
    "body": "**Merged:** sage-5.11.beta2",
    "created_at": "2013-06-19T12:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221982",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.11.beta2



---

archive/issue_comments_221983.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-06-19T12:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14143#issuecomment-221983",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_events_046099.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:25:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14143",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14143#event-46099"
}
```
