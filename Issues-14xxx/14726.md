# Issue 14726: build system for src/c_lib

archive/issues_014522.json:
```json
{
    "body": "this patch implements a gnu build system for c_lib. no existing files are touched.\nIT is indended to be merged into the git transition repo.\n\nthe glue code at toplevel is under construction. but if desired, it may be possible to hook it into the current static toplevel makefile.\n\n(this build system might finally be merged with the python module build system. this is currently not necessary and would just complicate things due to the directory structure.)\n\n**Assignee:** felixs\n\n**CC:**  @jondo\n\n**Keywords:** build system, c_lib, gsoc\n\n**Branch:** [u/felixs/14726](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/14726)\n\n**Commit:** [510f8b702c0b871a321dc19be17d53701adfd004](https://github.com/sagemath/sagetrac-mirror/commit/510f8b702c0b871a321dc19be17d53701adfd004)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Felix Salfelder\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14726\n\n",
    "closed_at": "2015-07-17T20:10:41Z",
    "created_at": "2013-06-12T08:14:07Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "build system for src/c_lib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14726",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
this patch implements a gnu build system for c_lib. no existing files are touched.
IT is indended to be merged into the git transition repo.

the glue code at toplevel is under construction. but if desired, it may be possible to hook it into the current static toplevel makefile.

(this build system might finally be merged with the python module build system. this is currently not necessary and would just complicate things due to the directory structure.)

**Assignee:** felixs

**CC:**  @jondo

**Keywords:** build system, c_lib, gsoc

**Branch:** [u/felixs/14726](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/14726)

**Commit:** [510f8b702c0b871a321dc19be17d53701adfd004](https://github.com/sagemath/sagetrac-mirror/commit/510f8b702c0b871a321dc19be17d53701adfd004)

**Reviewer:** François Bissey

**Author:** Felix Salfelder

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14726





---

archive/issue_comments_235616.json:
```json
{
    "body": "Attachment [0001-csage-build-system.patch](tarball://root/attachments/some-uuid/ticket14726/0001-csage-build-system.patch) by felixs created at 2013-06-12 08:14:55\n\nbuild system piece",
    "created_at": "2013-06-12T08:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235616",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Attachment [0001-csage-build-system.patch](tarball://root/attachments/some-uuid/ticket14726/0001-csage-build-system.patch) by felixs created at 2013-06-12 08:14:55

build system piece



---

archive/issue_comments_235617.json:
```json
{
    "body": "**Changing author** from \"felixs\" to \"Felix Salfelder\".",
    "created_at": "2013-06-12T11:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235617",
    "user": "https://github.com/nexttime"
}
```

**Changing author** from "felixs" to "Felix Salfelder".



---

archive/issue_comments_235618.json:
```json
{
    "body": "<a id='comment:1'></a>\nFelix, if you buy a new harddrive, would you mind also buying a new shift key?\n\n(I'd also appreciate that for the news groups posts, at least the longer ones.)",
    "created_at": "2013-06-12T11:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235618",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>
Felix, if you buy a new harddrive, would you mind also buying a new shift key?

(I'd also appreciate that for the news groups posts, at least the longer ones.)



---

archive/issue_comments_235619.json:
```json
{
    "body": "**Changing dependencies** from \"none\" to \"\".",
    "created_at": "2013-06-12T11:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235619",
    "user": "https://github.com/nexttime"
}
```

**Changing dependencies** from "none" to "".



---

archive/issue_comments_235620.json:
```json
{
    "body": "<a id='comment:2'></a>\nMay be we could test drive this in sage-on-gentoo. We already build the thing separately after all.",
    "created_at": "2013-06-27T10:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235620",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
May be we could test drive this in sage-on-gentoo. We already build the thing separately after all.



---

archive/issue_comments_235621.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [fbissey](#comment%3A2):\n> May be we could test drive this in sage-on-gentoo. We already build the thing separately after all.\n\n\nGood idea.\n\nthis is included within the \"WIP\" branch at git://github.com/felix-salfelder/sage.git.\n\nI think for distributions != sage, it should already be possible to build all parts of sagelib at once. there's a \"build system\" at the root of sagelib (i.e. src), which is meant to put together the pieces (currently just AC_CONFIG_SUBDIRS). if you feel adventurous, please have a look.",
    "created_at": "2013-06-27T10:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235621",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:3'></a>
Replying to [fbissey](#comment%3A2):
> May be we could test drive this in sage-on-gentoo. We already build the thing separately after all.


Good idea.

this is included within the "WIP" branch at git://github.com/felix-salfelder/sage.git.

I think for distributions != sage, it should already be possible to build all parts of sagelib at once. there's a "build system" at the root of sagelib (i.e. src), which is meant to put together the pieces (currently just AC_CONFIG_SUBDIRS). if you feel adventurous, please have a look.



---

archive/issue_comments_235622.json:
```json
{
    "body": "<a id='comment:4'></a>\nInteresting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?",
    "created_at": "2013-06-27T10:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235622",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
Interesting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?



---

archive/issue_comments_235623.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [fbissey](#comment%3A4):\n> Interesting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?\n\n\n`make dist`. if it doesnt work, it should in the end.\n\nnot that currently, the build system for the python part is missing (#14834), i'll push it as soon as I have a functional alpha.",
    "created_at": "2013-06-27T11:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235623",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:5'></a>
Replying to [fbissey](#comment%3A4):
> Interesting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?


`make dist`. if it doesnt work, it should in the end.

not that currently, the build system for the python part is missing (#14834), i'll push it as soon as I have a functional alpha.



---

archive/issue_comments_235624.json:
```json
{
    "body": "**Commit:** [de0e13624cdf6ccb91a2488152cf125622215802](https://github.com/sagemath/sagetrac-mirror/commit/de0e13624cdf6ccb91a2488152cf125622215802)",
    "created_at": "2013-08-23T10:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235624",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Commit:** [de0e13624cdf6ccb91a2488152cf125622215802](https://github.com/sagemath/sagetrac-mirror/commit/de0e13624cdf6ccb91a2488152cf125622215802)



---

archive/issue_comments_235625.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [fbissey](#comment%3A4):\n> Is there an easy of creating a tarball stripped of the git repo?\n\n\ni will provide current tarballs at http://tool.em.cs.uni-frankfurt.de/~felix/sagelib.\n\nThe part that corresponds to this ticket is ready. please comment/rewiew.",
    "created_at": "2013-08-23T10:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235625",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:7'></a>
Replying to [fbissey](#comment%3A4):
> Is there an easy of creating a tarball stripped of the git repo?


i will provide current tarballs at http://tool.em.cs.uni-frankfurt.de/~felix/sagelib.

The part that corresponds to this ticket is ready. please comment/rewiew.



---

archive/issue_comments_235626.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-08-23T10:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235626",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_235627.json:
```json
{
    "body": "**Branch:** [u/felixs/csage_build_system](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/csage_build_system)",
    "created_at": "2013-08-23T10:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235627",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Branch:** [u/felixs/csage_build_system](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/csage_build_system)



---

archive/issue_comments_235628.json:
```json
{
    "body": "**Changing branch** from \"[u/felixs/csage_build_system](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/csage_build_system)\" to \"[u/felixs/14726](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/14726)\".",
    "created_at": "2013-09-03T08:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235628",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing branch** from "[u/felixs/csage_build_system](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/csage_build_system)" to "[u/felixs/14726](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/14726)".



---

archive/issue_comments_235629.json:
```json
{
    "body": "**Changing commit** from \"[de0e13624cdf6ccb91a2488152cf125622215802](https://github.com/sagemath/sagetrac-mirror/commit/de0e13624cdf6ccb91a2488152cf125622215802)\" to \"[510f8b702c0b871a321dc19be17d53701adfd004](https://github.com/sagemath/sagetrac-mirror/commit/510f8b702c0b871a321dc19be17d53701adfd004)\".",
    "created_at": "2013-09-03T08:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235629",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing commit** from "[de0e13624cdf6ccb91a2488152cf125622215802](https://github.com/sagemath/sagetrac-mirror/commit/de0e13624cdf6ccb91a2488152cf125622215802)" to "[510f8b702c0b871a321dc19be17d53701adfd004](https://github.com/sagemath/sagetrac-mirror/commit/510f8b702c0b871a321dc19be17d53701adfd004)".



---

archive/issue_comments_235630.json:
```json
{
    "body": "<a id='comment:10'></a>\nNeeds to be rebased.",
    "created_at": "2013-12-19T11:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235630",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Needs to be rebased.



---

archive/issue_comments_235631.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-12-19T11:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235631",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_235632.json:
```json
{
    "body": "<a id='comment:11'></a>\nI also disagree with the fact that autotools should become a standard package. Autotools are meant to be used by package maintainers, not by end users.",
    "created_at": "2013-12-19T11:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235632",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
I also disagree with the fact that autotools should become a standard package. Autotools are meant to be used by package maintainers, not by end users.



---

archive/issue_comments_235633.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jdemeyer](#comment%3A11):\n> I also disagree with the fact that autotools should become a standard package.\n\n\nwhat exactly do you disagree with? are packages that are required for development `standard` packages?\n\nwhat would be the problem with development requiring autotools (alternatives?).\n\n> Autotools are meant to be used by package maintainers, not by end users.\n\n\nno. autotools is meant to be used by developers only, and that's the whole point. (and yes, not by end users).",
    "created_at": "2013-12-19T13:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235633",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:12'></a>
Replying to [jdemeyer](#comment%3A11):
> I also disagree with the fact that autotools should become a standard package.


what exactly do you disagree with? are packages that are required for development `standard` packages?

what would be the problem with development requiring autotools (alternatives?).

> Autotools are meant to be used by package maintainers, not by end users.


no. autotools is meant to be used by developers only, and that's the whole point. (and yes, not by end users).



---

archive/issue_comments_235634.json:
```json
{
    "body": "<a id='comment:13'></a>\nI would say there are 3 levels:\n1. package maintainers\n2. normal developers\n3. end users\nonly package maintainers should need autotools.",
    "created_at": "2013-12-19T13:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235634",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
I would say there are 3 levels:
1. package maintainers
2. normal developers
3. end users
only package maintainers should need autotools.



---

archive/issue_comments_235635.json:
```json
{
    "body": "<a id='comment:14'></a>\nwhat is a `normal` developer? do you imply that a package maintainer is a different sort of developer?\n\nusually (in my world?) no package maintainer will ever want to tinker with a build system (or other source code) if she doesn't have to. unlike make, autotools is written/designed exclusively for developers.\n\nso clearly, 1. and 2. need to be exchanged, if a `normal` developer is a developer (?). \n\nare we lost in terminology? it doesn't really look that complicated... Look out for the term `software development person` and `developer` in [http://en.wikipedia.org/wiki/GNU_build_system#Usage](http://en.wikipedia.org/wiki/GNU_build_system#Usage).",
    "created_at": "2013-12-19T13:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235635",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:14'></a>
what is a `normal` developer? do you imply that a package maintainer is a different sort of developer?

usually (in my world?) no package maintainer will ever want to tinker with a build system (or other source code) if she doesn't have to. unlike make, autotools is written/designed exclusively for developers.

so clearly, 1. and 2. need to be exchanged, if a `normal` developer is a developer (?). 

are we lost in terminology? it doesn't really look that complicated... Look out for the term `software development person` and `developer` in [http://en.wikipedia.org/wiki/GNU_build_system#Usage](http://en.wikipedia.org/wiki/GNU_build_system#Usage).



---

archive/issue_comments_235636.json:
```json
{
    "body": "<a id='comment:15'></a>\nOK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.",
    "created_at": "2013-12-19T14:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235636",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
OK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.



---

archive/issue_comments_235637.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jdemeyer](#comment%3A15):\n> OK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.\n\n\nyes. you shouldn't. and that should be achievable.\n\nyou will of course need autotools to expand the build system, if you don't start with a dist tarball or anything similar. is building-from-git (as opposed to building-from-tarball) not considered a development task?\n\nis this finally what comment 11 is about?",
    "created_at": "2013-12-19T15:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235637",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:16'></a>
Replying to [jdemeyer](#comment%3A15):
> OK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.


yes. you shouldn't. and that should be achievable.

you will of course need autotools to expand the build system, if you don't start with a dist tarball or anything similar. is building-from-git (as opposed to building-from-tarball) not considered a development task?

is this finally what comment 11 is about?



---

archive/issue_comments_235638.json:
```json
{
    "body": "<a id='comment:17'></a>\nObsolete `src/c_lib` is gone.",
    "created_at": "2015-07-01T10:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235638",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
Obsolete `src/c_lib` is gone.



---

archive/issue_comments_235639.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2015-07-01T10:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235639",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_048545.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-07-01T10:30:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14726#event-48545"
}
```



---

archive/issue_comments_235640.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2015-07-01T10:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235640",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_235641.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-07-17T20:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14726#issuecomment-235641",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_048546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:10:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14726",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14726#event-48546"
}
```
