# Issue 14132: documentation for matrix( ) mentions ncols and nrows

archive/issues_013928.json:
```json
{
    "body": "matrix( ncols=...,nrows=... ) does not create a matrix (even a sparse one) with the according number of columns and rows, contrary to what's described here\n\nhttp://sagemath.org/doc/reference/sage/matrix/constructor.html\n\n---\n\nEDIT. \n\nThis ticket brings to the fore, the some anomalies in the matrix constructor class. This is basically about how we handle edge cases.\n\nWork Issues. \n\n(1) Implementation Issues. \n\n    (*) the keywords `nrows` and `ncols` are not working as desired. \n\n(2) Documentation Issues. \n\n   (*) **'Annotated List of Examples**'. Right now, there are a bunch of examples out there. They are not all<sup>TM</sup> - not even most of - the possible ways to use the `matrix` command. \n\n   (*) \"The ring defaults to ZZ if it is not specified or cannot be determined from the entries.\" Clearly not happening: \n\n```\nsage: matrix(nrows=2, ncols=3)\n[]\nsage: matrix(2,3)\n[0 0 0]\n[0 0 0]\nsage: matrix(ZZ, nrows=2, ncols=3)\n[0 0 0]\n[0 0 0]\n```\n\n  (*) \"If the numbers of rows and columns are not specified and cannot be determined, then an empty 0x0 matrix is returned.\" There are two issues: \n\n```\nsage: matrix(ZZ, ncols=3)         \n[]\n```\n\nAs the example illustrates, the \"and\" should be really an \"or\". \"an empty matrix\" should be the empty matrix. \n\n  (*) \"The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols.\" All examples are of the kind described after \"or\". We should add examples of the first kind. (Doing that would have uncovered the implementation issues.)\n\nAssignee: mvngu\n\nCC:  @rbeezer @jasongrout\n\nKeywords: matrix ncols nrows\n\nStatus: needs_info\n\nIssue created by migration from https://trac.sagemath.org/ticket/14132\n\n",
    "created_at": "2013-02-15T16:53:21Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "documentation for matrix( ) mentions ncols and nrows",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14132",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```
matrix( ncols=...,nrows=... ) does not create a matrix (even a sparse one) with the according number of columns and rows, contrary to what's described here

http://sagemath.org/doc/reference/sage/matrix/constructor.html

---

EDIT. 

This ticket brings to the fore, the some anomalies in the matrix constructor class. This is basically about how we handle edge cases.

Work Issues. 

(1) Implementation Issues. 

    (*) the keywords `nrows` and `ncols` are not working as desired. 

(2) Documentation Issues. 

   (*) **'Annotated List of Examples**'. Right now, there are a bunch of examples out there. They are not all<sup>TM</sup> - not even most of - the possible ways to use the `matrix` command. 

   (*) "The ring defaults to ZZ if it is not specified or cannot be determined from the entries." Clearly not happening: 

```
sage: matrix(nrows=2, ncols=3)
[]
sage: matrix(2,3)
[0 0 0]
[0 0 0]
sage: matrix(ZZ, nrows=2, ncols=3)
[0 0 0]
[0 0 0]
```

  (*) "If the numbers of rows and columns are not specified and cannot be determined, then an empty 0x0 matrix is returned." There are two issues: 

```
sage: matrix(ZZ, ncols=3)         
[]
```

As the example illustrates, the "and" should be really an "or". "an empty matrix" should be the empty matrix. 

  (*) "The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols." All examples are of the kind described after "or". We should add examples of the first kind. (Doing that would have uncovered the implementation issues.)

Assignee: mvngu

CC:  @rbeezer @jasongrout

Keywords: matrix ncols nrows

Status: needs_info

Issue created by migration from https://trac.sagemath.org/ticket/14132





---

archive/issue_comments_184962.json:
```json
{
    "body": "<a id='comment:1'></a>Hello!! \n\nI am not sure I understand what the problem is. The manual claims that setting some values to the parameters `nrows` and `ncols` will create a `nrows x ncols` matrix. And, Sage does, no?: \n\n```\nsage: matrix(2,3)             \n[0 0 0]\n[0 0 0]\n```\n\nWould you please help me understand what the issue is? ~KnS",
    "created_at": "2013-02-20T17:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184962",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:1'></a>Hello!! 

I am not sure I understand what the problem is. The manual claims that setting some values to the parameters `nrows` and `ncols` will create a `nrows x ncols` matrix. And, Sage does, no?: 

```
sage: matrix(2,3)             
[0 0 0]
[0 0 0]
```

Would you please help me understand what the issue is? ~KnS



---

archive/issue_comments_184963.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-02-20T17:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184963",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_184964.json:
```json
{
    "body": "<a id='comment:3'></a>A misinterpreation on my side. I blame the (once again) awful/nonexisting formalisation of documentation, though (which is hardly the fault of the authors but rather owing to that abominable piece of so-proclaimed *software*, \"Sphinx\").\n\nThe prose part of the documentation does indeed say \"*The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols.*\", below, then, lists\n\n**ring** - the base ring for the entries of the matrix.\n\n**nrows** - the number of rows in the matrix..\n\n**ncols** - the number of columns in the matrix.\n\n**sparse** - create a sparse matrix. This defaults to True when the entries are given as a dictionary, otherwise defaults to False.\n\n...as if those were any sort of keywords, although they aren't even mentioned in the function header, which, by the most intelligent design of \"Sphinx\" and Python's state of formalisation, only goes\n\n*Matrix(*args, * *kwds)*",
    "created_at": "2013-02-20T17:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184964",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```

<a id='comment:3'></a>A misinterpreation on my side. I blame the (once again) awful/nonexisting formalisation of documentation, though (which is hardly the fault of the authors but rather owing to that abominable piece of so-proclaimed *software*, "Sphinx").

The prose part of the documentation does indeed say "*The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols.*", below, then, lists

**ring** - the base ring for the entries of the matrix.

**nrows** - the number of rows in the matrix..

**ncols** - the number of columns in the matrix.

**sparse** - create a sparse matrix. This defaults to True when the entries are given as a dictionary, otherwise defaults to False.

...as if those were any sort of keywords, although they aren't even mentioned in the function header, which, by the most intelligent design of "Sphinx" and Python's state of formalisation, only goes

*Matrix(*args, * *kwds)*



---

archive/issue_comments_184965.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-02-20T17:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184965",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_184966.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 ManDay]:\n> A misinterpreation on my side. I blame the (once again) awful/nonexisting formalisation of documentation, though (which is hardly the fault of the authors but rather owing to that abominable piece of so-proclaimed *software*, \"Sphinx\").\n> \n\n\nOops! But that is fine! I will set this to sage-invalid. Is that OK with you, or you think something could be done about this? May be a top-level \"how to refer to the docs?\" ;-)\n\nPlease note that you'd set a ticket to needs_review only if there is a patch to review. Tickets without patches, such as this, don't yet need a review.",
    "created_at": "2013-02-20T17:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184966",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:4'></a>Replying to [comment:3 ManDay]:
> A misinterpreation on my side. I blame the (once again) awful/nonexisting formalisation of documentation, though (which is hardly the fault of the authors but rather owing to that abominable piece of so-proclaimed *software*, "Sphinx").
> 


Oops! But that is fine! I will set this to sage-invalid. Is that OK with you, or you think something could be done about this? May be a top-level "how to refer to the docs?" ;-)

Please note that you'd set a ticket to needs_review only if there is a patch to review. Tickets without patches, such as this, don't yet need a review.



---

archive/issue_comments_184967.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-02-20T17:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184967",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_184968.json:
```json
{
    "body": "<a id='comment:6'></a>Given that completely purposeless list of non-keywords, it seems obvious to me that this list should either be removed or - much more reasonably - what's been described as prose in the text, put to significance in the actual function header, such as:\n\nMatrix( ring, nrows, ncols, * *kwds )",
    "created_at": "2013-02-20T17:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184968",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```

<a id='comment:6'></a>Given that completely purposeless list of non-keywords, it seems obvious to me that this list should either be removed or - much more reasonably - what's been described as prose in the text, put to significance in the actual function header, such as:

Matrix( ring, nrows, ncols, * *kwds )



---

archive/issue_comments_184969.json:
```json
{
    "body": "<a id='comment:7'></a>OK, I explored this a bit: here are my observations. \n\n(1) `nrows`, `ncols` ARE keywords! And, so this is not a bug in the documentation as far as I can see. But, the documentation needs to enhanced: although the documentation claims that these parameters can be set, there is no example illustrating this. IMHO, we should add examples. Also, the problem is as described in the description. \n\n(2) The bug is very strange! \n\n```\nsage: matrix(nrows=2, ncols=3)\n[]\nsage: matrix(2,3)\n[0 0 0]\n[0 0 0]\nsage: matrix(ZZ, nrows=2, ncols=3)\n[0 0 0]\n[0 0 0]\nsage: matrix(ZZ, ncols=3)         \n[]\n```\n\nI'll add some examples and lines from the documentation that the examples contradict! I am tempted to make this \"blocker\" given that a basic things such as this is buggy (although these are only edges, we need to have them documented better). \n\n---\n\nI am also ccing Jason who completely rewrote this part of sage.",
    "created_at": "2013-03-16T21:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184969",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:7'></a>OK, I explored this a bit: here are my observations. 

(1) `nrows`, `ncols` ARE keywords! And, so this is not a bug in the documentation as far as I can see. But, the documentation needs to enhanced: although the documentation claims that these parameters can be set, there is no example illustrating this. IMHO, we should add examples. Also, the problem is as described in the description. 

(2) The bug is very strange! 

```
sage: matrix(nrows=2, ncols=3)
[]
sage: matrix(2,3)
[0 0 0]
[0 0 0]
sage: matrix(ZZ, nrows=2, ncols=3)
[0 0 0]
[0 0 0]
sage: matrix(ZZ, ncols=3)         
[]
```

I'll add some examples and lines from the documentation that the examples contradict! I am tempted to make this "blocker" given that a basic things such as this is buggy (although these are only edges, we need to have them documented better). 

---

I am also ccing Jason who completely rewrote this part of sage.



---

archive/issue_comments_184970.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,46 @@\n matrix( ncols=...,nrows=... ) does not create a matrix (even a sparse one) with the according number of columns and rows, contrary to what's described here\n \n http://sagemath.org/doc/reference/sage/matrix/constructor.html\n+\n+---\n+\n+EDIT. \n+\n+This ticket brings to the fore, the some anomalies in the matrix constructor class. This is basically about how we handle edge cases.\n+\n+Work Issues. \n+\n+(1) Implementation Issues. \n+\n+    (*) the keywords `nrows` and `ncols` are not working as desired. \n+\n+(2) Documentation Issues. \n+\n+   (*) **'Annotated List of Examples**'. Right now, there are a bunch of examples out there. They are not all<sup>TM</sup> - not even most of - the possible ways to use the `matrix` command. \n+\n+   (*) \"The ring defaults to ZZ if it is not specified or cannot be determined from the entries.\" Clearly not happening: \n+\n+```\n+sage: matrix(nrows=2, ncols=3)\n+[]\n+sage: matrix(2,3)\n+[0 0 0]\n+[0 0 0]\n+sage: matrix(ZZ, nrows=2, ncols=3)\n+[0 0 0]\n+[0 0 0]\n+```\n+\n+  (*) \"If the numbers of rows and columns are not specified and cannot be determined, then an empty 0x0 matrix is returned.\" There are two issues: \n+\n+```\n+sage: matrix(ZZ, ncols=3)         \n+[]\n+```\n+\n+As the example illustrates, the \"and\" should be really an \"or\". \"an empty matrix\" should be the empty matrix. \n+\n+  (*) \"The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols.\" All examples are of the kind described after \"or\". We should add examples of the first kind. (Doing that would have uncovered the implementation issues.)\n \n Comment: 1\n \n``````\n",
    "created_at": "2013-03-16T21:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184970",
    "user": "https://github.com/KPanComputes"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,46 @@
 matrix( ncols=...,nrows=... ) does not create a matrix (even a sparse one) with the according number of columns and rows, contrary to what's described here
 
 http://sagemath.org/doc/reference/sage/matrix/constructor.html
+
+---
+
+EDIT. 
+
+This ticket brings to the fore, the some anomalies in the matrix constructor class. This is basically about how we handle edge cases.
+
+Work Issues. 
+
+(1) Implementation Issues. 
+
+    (*) the keywords `nrows` and `ncols` are not working as desired. 
+
+(2) Documentation Issues. 
+
+   (*) **'Annotated List of Examples**'. Right now, there are a bunch of examples out there. They are not all<sup>TM</sup> - not even most of - the possible ways to use the `matrix` command. 
+
+   (*) "The ring defaults to ZZ if it is not specified or cannot be determined from the entries." Clearly not happening: 
+
+```
+sage: matrix(nrows=2, ncols=3)
+[]
+sage: matrix(2,3)
+[0 0 0]
+[0 0 0]
+sage: matrix(ZZ, nrows=2, ncols=3)
+[0 0 0]
+[0 0 0]
+```
+
+  (*) "If the numbers of rows and columns are not specified and cannot be determined, then an empty 0x0 matrix is returned." There are two issues: 
+
+```
+sage: matrix(ZZ, ncols=3)         
+[]
+```
+
+As the example illustrates, the "and" should be really an "or". "an empty matrix" should be the empty matrix. 
+
+  (*) "The ring, number of rows, and number of columns of the matrix can be specified by setting the ring, nrows, or ncols parameters or by passing them as the first arguments to the function in the order ring, nrows, ncols." All examples are of the kind described after "or". We should add examples of the first kind. (Doing that would have uncovered the implementation issues.)
 
 Comment: 1
 
``````




---

archive/issue_comments_184971.json:
```json
{
    "body": "<a id='comment:8'></a>A (slightly) related note: There's another issue with passing a matrix into `matrix()` which is done in #14314.\n\nAs for your examples in (2), I would call the first one a bug and should return the same as the following two. I think the last one should raise an exception since there is insufficient data, but I'd be okay with it returning a 3x3 matrix.",
    "created_at": "2013-03-20T21:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14132#issuecomment-184971",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>A (slightly) related note: There's another issue with passing a matrix into `matrix()` which is done in #14314.

As for your examples in (2), I would call the first one a bug and should return the same as the following two. I think the last one should raise an exception since there is insufficient data, but I'd be okay with it returning a 3x3 matrix.



---

archive/issue_events_039871.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39871"
}
```



---

archive/issue_events_039872.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39872"
}
```



---

archive/issue_events_039873.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39873"
}
```



---

archive/issue_events_039874.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39874"
}
```



---

archive/issue_events_039875.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39875"
}
```



---

archive/issue_events_039876.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39876"
}
```



---

archive/issue_events_039877.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14132",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14132#event-39877"
}
```
