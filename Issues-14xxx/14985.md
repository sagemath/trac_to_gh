# Issue 14985: Let zlib 1.2.8 build on Cygwin

archive/issues_014748.json:
```json
{
    "body": "The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.\n\nUse:\n* http://boxen.math.washington.edu/home/jpflori/spkg/zlib-1.2.8.p0.spkg\n\n\nCC:  @jdemeyer @tscrim\n\nKeywords: cygwin zlib spkg\n\nUpstream: Not yet reported upstream; Will do shortly.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jean-Pierre Flori\n\nMerged: sage-5.11.rc1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14985\n\n",
    "closed_at": "2013-08-10T06:38:34Z",
    "created_at": "2013-07-30T20:29:12Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Let zlib 1.2.8 build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14985",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.

Use:
* http://boxen.math.washington.edu/home/jpflori/spkg/zlib-1.2.8.p0.spkg


CC:  @jdemeyer @tscrim

Keywords: cygwin zlib spkg

Upstream: Not yet reported upstream; Will do shortly.

Reviewer: Travis Scrimshaw

Author: Jean-Pierre Flori

Merged: sage-5.11.rc1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14985





---

archive/issue_comments_235775.json:
```json
{
    "body": "<a id='comment:1'></a>See http://trac.sagemath.org/ticket/14661#comment:6 for the original report.",
    "created_at": "2013-07-30T20:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235775",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>See http://trac.sagemath.org/ticket/14661#comment:6 for the original report.



---

archive/issue_comments_235776.json:
```json
{
    "body": "<a id='comment:2'></a>See https://github.com/madler/zlib/issues/45 on upstream bugtracker.",
    "created_at": "2013-07-30T20:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235776",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:2'></a>See https://github.com/madler/zlib/issues/45 on upstream bugtracker.



---

archive/issue_comments_235777.json:
```json
{
    "body": "<a id='comment:3'></a>Maybe we could make this a blocker for 5.11?\nNote that different fixes are already proposed on the upstream bugtracker, so that crafting an spkg will not take ages.\n\nI'm sorry I had no time to test the 5.10 rc's on Cygwin and let that go in...\nlet's try to release a 5.11 version compilable on Cygwin(32)!",
    "created_at": "2013-07-31T22:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235777",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>Maybe we could make this a blocker for 5.11?
Note that different fixes are already proposed on the upstream bugtracker, so that crafting an spkg will not take ages.

I'm sorry I had no time to test the 5.10 rc's on Cygwin and let that go in...
let's try to release a 5.11 version compilable on Cygwin(32)!



---

archive/issue_comments_235778.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2013-07-31T22:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235778",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_235779.json:
```json
{
    "body": "Attachment [1.2.7-zlib-symbols.patch](tarball://root/attachments/some-uuid/ticket14985/1.2.7-zlib-symbols.patch) by jpflori created at 2013-08-01 09:53:56\n\nCygwin's folk patch",
    "created_at": "2013-08-01T09:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235779",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [1.2.7-zlib-symbols.patch](tarball://root/attachments/some-uuid/ticket14985/1.2.7-zlib-symbols.patch) by jpflori created at 2013-08-01 09:53:56

Cygwin's folk patch



---

archive/issue_comments_235780.json:
```json
{
    "body": "<a id='comment:4'></a>Such a patch prevents the definition of gzopen_w on Windows, but he, the Cygwin's folk does not care, and we don't support MSVC so, we can do just the same I guess.",
    "created_at": "2013-08-01T09:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235780",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>Such a patch prevents the definition of gzopen_w on Windows, but he, the Cygwin's folk does not care, and we don't support MSVC so, we can do just the same I guess.



---

archive/issue_comments_235781.json:
```json
{
    "body": "Attachment [zlib-1.2.8.p0.diff](tarball://root/attachments/some-uuid/ticket14985/zlib-1.2.8.p0.diff) by jpflori created at 2013-08-06 21:17:47\n\nSpkg diff, for review only.",
    "created_at": "2013-08-06T21:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235781",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [zlib-1.2.8.p0.diff](tarball://root/attachments/some-uuid/ticket14985/zlib-1.2.8.p0.diff) by jpflori created at 2013-08-06 21:17:47

Spkg diff, for review only.



---

archive/issue_comments_235782.json:
```json
{
    "body": "Changing author from \"\" to \"Jean-Pierre Flori\"",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235782",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing author from "" to "Jean-Pierre Flori"



---

archive/issue_comments_235783.json:
```json
{
    "body": "Changing keywords from \"\" to \"cygwin zlib spkg\".",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235783",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "cygwin zlib spkg".



---

archive/issue_comments_235784.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235784",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_235785.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.\n+\n+Use:\n+* http://boxen.math.washington.edu/home/jpflori/jpflori/zlib-1.2.8.p0.spkg\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235785",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
 The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.
+
+Use:
+* http://boxen.math.washington.edu/home/jpflori/jpflori/zlib-1.2.8.p0.spkg
+
 
 Comment: 1
 
``````




---

archive/issue_comments_235786.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235786",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing priority from major to critical.



---

archive/issue_comments_235787.json:
```json
{
    "body": "<a id='comment:5'></a>I've upped a spkg using the same fix as Cygwin.",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235787",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>I've upped a spkg using the same fix as Cygwin.



---

archive/issue_comments_235788.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. No feedback yet.\" to \"Not yet reported upstream; Will do shortly.\"",
    "created_at": "2013-08-06T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235788",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "Reported upstream. No feedback yet." to "Not yet reported upstream; Will do shortly."



---

archive/issue_comments_235789.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n+The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.\n+\n+Use:\n+* http://boxen.math.washington.edu/home/jpflori/zlib-1.2.8.p0.spkg\n \n \n Comment: 1\n``````\n",
    "created_at": "2013-08-06T21:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235789",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
+The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.
+
+Use:
+* http://boxen.math.washington.edu/home/jpflori/zlib-1.2.8.p0.spkg
 
 
 Comment: 1
``````




---

archive/issue_comments_235790.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n+The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.\n+\n+Use:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/zlib-1.2.8.p0.spkg\n \n \n Comment: 1\n``````\n",
    "created_at": "2013-08-06T21:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235790",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
+The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.
+
+Use:
+* http://boxen.math.washington.edu/home/jpflori/spkg/zlib-1.2.8.p0.spkg
 
 
 Comment: 1
``````




---

archive/issue_comments_235791.json:
```json
{
    "body": "<a id='comment:8'></a>Cannot test on a real install till tomorrow...",
    "created_at": "2013-08-06T21:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235791",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>Cannot test on a real install till tomorrow...



---

archive/issue_comments_235792.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-07T00:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235792",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_235793.json:
```json
{
    "body": "<a id='comment:10'></a>It built for me both on cygwin 32 and 64.",
    "created_at": "2013-08-07T00:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235793",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>It built for me both on cygwin 32 and 64.



---

archive/issue_comments_235794.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2013-08-07T00:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235794",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_events_043028.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T07:57:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14985#event-43028"
}
```



---

archive/issue_comments_235795.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-10T06:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235795",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_043029.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-10T06:38:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14985#event-43029"
}
```



---

archive/issue_comments_235796.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.11.rc1\"",
    "created_at": "2013-08-10T06:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14985",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14985#issuecomment-235796",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.11.rc1"
