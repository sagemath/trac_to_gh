# Issue 14029: Exit Sage ungracefully upon SIGQUIT

archive/issues_013825.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.\n\nDepends on #13908\nDepends on #13996\n\nCC:  @nexttime @pjbruin\n\nReviewer: **Peter Bruin**\n\nAuthor: **Jeroen Demeyer**\n\nMerged: **sage-5.13.beta2**\n\nComponent: **c_lib**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14029_\n\n",
    "closed_at": "2013-10-31T19:16:16Z",
    "created_at": "2013-01-28T15:49:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20c%20lib",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.13",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Exit Sage ungracefully upon SIGQUIT",
    "type": "issue",
    "updated_at": "2013-10-31T19:16:16Z",
    "url": "https://github.com/sagemath/sage/issues/14029",
    "user": "https://github.com/jdemeyer"
}
```
When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.

Depends on #13908
Depends on #13996

CC:  @nexttime @pjbruin

Reviewer: **Peter Bruin**

Author: **Jeroen Demeyer**

Merged: **sage-5.13.beta2**

Component: **c_lib**

_Issue created by migration from https://trac.sagemath.org/ticket/14029_





---

archive/issue_events_197181.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:49:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197181"
}
```



---

archive/issue_events_197182.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20c%20lib",
    "label_color": "000080",
    "label_name": "c: c lib",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197182"
}
```



---

archive/issue_events_197183.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197183"
}
```



---

archive/issue_events_197184.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197184"
}
```



---

archive/issue_events_197185.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:49:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197185"
}
```



---

archive/issue_events_197186.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T15:50:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "title_is": "Exit Sage ungracefully upon SIGQUIT",
    "title_was": "SIGQUIT: exit Sage ungracefully with traceback",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197186"
}
```



---

archive/issue_comments_166475.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, not raise an exception.\n+When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.\n``````\n",
    "created_at": "2013-01-28T15:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166475",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, not raise an exception.
+When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.
``````




---

archive/issue_comments_166476.json:
```json
{
    "body": "Changed dependencies from **#13908** to **#13908, #13996**",
    "created_at": "2013-01-28T16:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166476",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13908** to **#13908, #13996**



---

archive/issue_comments_166477.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2013-01-28T16:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166477",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_197187.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-28T20:52:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197187"
}
```



---

archive/issue_comments_166478.json:
```json
{
    "body": "Attachment: **[14029_SIGQUIT.patch.gz](https://github.com/sagemath/sage/files/ticket14029/14029_SIGQUIT.patch.gz)**",
    "created_at": "2013-05-13T12:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166478",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[14029_SIGQUIT.patch.gz](https://github.com/sagemath/sage/files/ticket14029/14029_SIGQUIT.patch.gz)**



---

archive/issue_events_197188.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197188"
}
```



---

archive/issue_events_197189.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197189"
}
```



---

archive/issue_events_197190.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-10-29T19:24:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197190"
}
```



---

archive/issue_events_197191.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-10-29T19:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197191"
}
```



---

archive/issue_comments_166479.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis looks like a useful feature to me.  The patch looks good and behaves as expected, and all doctests pass.\n\nThe fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.\n\nAnyway, the issues in the above paragraph are only slightly annoying and should probably be addressed elsewhere than in this ticket (if at all), so no reason against a positive review.",
    "created_at": "2013-10-29T19:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166479",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:7" align="right">comment:7</div>

This looks like a useful feature to me.  The patch looks good and behaves as expected, and all doctests pass.

The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.

Anyway, the issues in the above paragraph are only slightly annoying and should probably be addressed elsewhere than in this ticket (if at all), so no reason against a positive review.



---

archive/issue_comments_166480.json:
```json
{
    "body": "Reviewer: **Peter Bruin**",
    "created_at": "2013-10-29T19:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166480",
    "user": "https://github.com/pjbruin"
}
```

Reviewer: **Peter Bruin**



---

archive/issue_comments_166481.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@pjbruin](#comment:7):\n> The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.\n\nThat's right indeed. It seems that, once GDB gets hold of a process, there is no easy way to get out.",
    "created_at": "2013-10-29T22:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166481",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@pjbruin](#comment:7):
> The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.

That's right indeed. It seems that, once GDB gets hold of a process, there is no easy way to get out.



---

archive/issue_comments_166482.json:
```json
{
    "body": "Merged: **sage-5.13.beta2**",
    "created_at": "2013-10-31T19:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14029#issuecomment-166482",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.13.beta2**



---

archive/issue_events_197192.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-31T19:16:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197192"
}
```



---

archive/issue_events_197193.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-31T19:16:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14029",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14029#event-197193"
}
```
