# Issue 14029: Exit Sage ungracefully upon SIGQUIT

archive/issues_013825.json:
```json
{
    "body": "When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.\n\nAssignee: @jdemeyer\n\nCC:  @nexttime @pjbruin\n\nReviewer: Peter Bruin\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.13.beta2\n\nDependencies: #13908, #13996\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14029\n\n",
    "closed_at": "2013-10-31T19:16:16Z",
    "created_at": "2013-01-28T15:49:07Z",
    "labels": [
        "component: c_lib"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Exit Sage ungracefully upon SIGQUIT",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14029",
    "user": "https://github.com/jdemeyer"
}
```
When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.

Assignee: @jdemeyer

CC:  @nexttime @pjbruin

Reviewer: Peter Bruin

Author: Jeroen Demeyer

Merged: sage-5.13.beta2

Dependencies: #13908, #13996

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14029





---

archive/issue_comments_214331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, not raise an exception.\n+When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.\n \n Dependencies: #13908\n \n``````\n",
    "created_at": "2013-01-28T15:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214331",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, not raise an exception.
+When Sage is somehow totally stuck, one can still quit Sage using `SIGQUIT` (`CTRL-\` on the keyboard).  It would be useful if this would give a nice traceback.  In other words: treat `SIGQUIT` like `SIGSEGV`, except that it should always exit Sage, never raise an exception.
 
 Dependencies: #13908
 
``````




---

archive/issue_comments_214332.json:
```json
{
    "body": "Changing dependencies from \"#13908\" to \"#13908, #13996\"",
    "created_at": "2013-01-28T16:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214332",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#13908" to "#13908, #13996"



---

archive/issue_comments_214333.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2013-01-28T16:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214333",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_214334.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-28T20:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214334",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_214335.json:
```json
{
    "body": "Attachment [14029_SIGQUIT.patch](tarball://root/attachments/some-uuid/ticket14029/14029_SIGQUIT.patch) by @jdemeyer created at 2013-05-13 12:21:57",
    "created_at": "2013-05-13T12:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214335",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [14029_SIGQUIT.patch](tarball://root/attachments/some-uuid/ticket14029/14029_SIGQUIT.patch) by @jdemeyer created at 2013-05-13 12:21:57



---

archive/issue_events_039449.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14029#event-39449"
}
```



---

archive/issue_comments_214336.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-29T19:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214336",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_214337.json:
```json
{
    "body": "<a id='comment:7'></a>This looks like a useful feature to me.  The patch looks good and behaves as expected, and all doctests pass.\n\nThe fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.\n\nAnyway, the issues in the above paragraph are only slightly annoying and should probably be addressed elsewhere than in this ticket (if at all), so no reason against a positive review.",
    "created_at": "2013-10-29T19:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214337",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:7'></a>This looks like a useful feature to me.  The patch looks good and behaves as expected, and all doctests pass.

The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.

Anyway, the issues in the above paragraph are only slightly annoying and should probably be addressed elsewhere than in this ticket (if at all), so no reason against a positive review.



---

archive/issue_comments_214338.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Peter Bruin\"",
    "created_at": "2013-10-29T19:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214338",
    "user": "https://github.com/pjbruin"
}
```

Changing reviewer from "" to "Peter Bruin"



---

archive/issue_comments_214339.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 pbruin]:\n> The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.\n\n\nThat's right indeed. It seems that, once GDB gets hold of a process, there is no easy way to get out.",
    "created_at": "2013-10-29T22:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214339",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:7 pbruin]:
> The fact that `sage-CSI` is run does mean that if GDB is available, it now takes about 10 seconds before you are back at the shell.  Pressing `^\` a second time does not immediately interrupt `sage-CSI`.  I'm not sure why; is the `^\` somehow intercepted by GDB?  Pressing `^C` during these 10 seconds does generate a Python `KeyboardInterrupt` in `sage-CSI`, but does not immediately get you back to the shell either.


That's right indeed. It seems that, once GDB gets hold of a process, there is no easy way to get out.



---

archive/issue_comments_214340.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.13.beta2\"",
    "created_at": "2013-10-31T19:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214340",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.13.beta2"



---

archive/issue_events_039450.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-31T19:16:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14029#event-39450"
}
```



---

archive/issue_comments_214341.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-31T19:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14029#issuecomment-214341",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
