# Issue 14556: The maxima spkg has cruft dating back to days of clisp use

archive/issues_014352.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg) ([spkg diff p2](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz) + [spkg diff p3](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz))\n\n**sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library\n\nCC:  @kiwifb\n\nKeywords: **noreadline**\n\nReviewer: **Jeroen Demeyer, Julien Puydt**\n\nAuthor: **Julien Puydt, Jeroen Demeyer**\n\nMerged: **sage-5.10.beta5**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14556_\n\n",
    "closed_at": "2013-05-26T19:49:02Z",
    "created_at": "2013-05-08T18:57:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "The maxima spkg has cruft dating back to days of clisp use",
    "type": "issue",
    "updated_at": "2013-05-30T10:49:59Z",
    "url": "https://github.com/sagemath/sage/issues/14556",
    "user": "https://github.com/SnarkBoojum"
}
```
The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg) ([spkg diff p2](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz) + [spkg diff p3](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz))

**sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library

CC:  @kiwifb

Keywords: **noreadline**

Reviewer: **Jeroen Demeyer, Julien Puydt**

Author: **Julien Puydt, Jeroen Demeyer**

Merged: **sage-5.10.beta5**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/14556_





---

archive/issue_events_204139.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-08T18:57:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204139"
}
```



---

archive/issue_events_204140.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-08T18:57:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204140"
}
```



---

archive/issue_events_204141.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-08T18:57:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204141"
}
```



---

archive/issue_events_204142.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-08T18:57:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204142"
}
```



---

archive/issue_events_204143.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-08T18:57:37Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "subject": "https://github.com/SnarkBoojum",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204143"
}
```



---

archive/issue_comments_176303.json:
```json
{
    "body": "Replying to [ticket:14556 Snark]:\n> I might work on it myself, but first I must ask on which maxima spkg I should base my work on\n\n[http://boxen.math.washington.edu/home/release/sage-5.10.beta2/sage-5.10.beta2/spkg/standard/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/release/sage-5.10.beta2/sage-5.10.beta2/spkg/standard/maxima-5.29.1.p1.spkg)",
    "created_at": "2013-05-08T21:52:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176303",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:14556 Snark]:
> I might work on it myself, but first I must ask on which maxima spkg I should base my work on

[http://boxen.math.washington.edu/home/release/sage-5.10.beta2/sage-5.10.beta2/spkg/standard/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/release/sage-5.10.beta2/sage-5.10.beta2/spkg/standard/maxima-5.29.1.p1.spkg)



---

archive/issue_comments_176304.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n The maxima spkg creates a maxima-noreadline executable, which is an old hack. This should go away.\n-\n-I might work on it myself, but first I must ask on which maxima spkg I should base my work on (a question which will disappear with the git transition...)\n``````\n",
    "created_at": "2013-05-08T21:52:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176304",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 The maxima spkg creates a maxima-noreadline executable, which is an old hack. This should go away.
-
-I might work on it myself, but first I must ask on which maxima spkg I should base my work on (a question which will disappear with the git transition...)
``````




---

archive/issue_comments_176305.json:
```json
{
    "body": "Patch to the sage library",
    "created_at": "2013-05-09T12:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176305",
    "user": "https://github.com/SnarkBoojum"
}
```

Patch to the sage library



---

archive/issue_comments_176306.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[trac_14556_sagelib.patch.gz](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz)**\n\nThe two attached patches should fix this ticket.",
    "created_at": "2013-05-09T13:01:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176306",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[trac_14556_sagelib.patch.gz](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz)**

The two attached patches should fix this ticket.



---

archive/issue_events_204144.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-09T13:01:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204144"
}
```



---

archive/issue_comments_176307.json:
```json
{
    "body": "Changed keywords from none to **noreadline**",
    "created_at": "2013-05-11T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176307",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **noreadline**



---

archive/issue_comments_176308.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-The maxima spkg creates a maxima-noreadline executable, which is an old hack. This should go away.\n+The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.\n+\n``````\n",
    "created_at": "2013-05-11T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176308",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-The maxima spkg creates a maxima-noreadline executable, which is an old hack. This should go away.
+The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.
+
``````




---

archive/issue_comments_176309.json:
```json
{
    "body": "Author: **Julien Puydt**",
    "created_at": "2013-05-11T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176309",
    "user": "https://github.com/nexttime"
}
```

Author: **Julien Puydt**



---

archive/issue_comments_176310.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYou should also provide a \"pre-patched\" new spkg, with `SPKG.txt` updated as well.",
    "created_at": "2013-05-11T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176310",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

You should also provide a "pre-patched" new spkg, with `SPKG.txt` updated as well.



---

archive/issue_comments_176311.json:
```json
{
    "body": "Patch to the maxima spkg",
    "created_at": "2013-05-11T14:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176311",
    "user": "https://github.com/SnarkBoojum"
}
```

Patch to the maxima spkg



---

archive/issue_comments_176312.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[trac_14556_maxima.patch.gz](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz)**\n\nI updated the patch, and the patched spkg can be found [here](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg)",
    "created_at": "2013-05-11T14:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176312",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[trac_14556_maxima.patch.gz](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz)**

I updated the patch, and the patched spkg can be found [here](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg)



---

archive/issue_comments_176313.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.\n \n+**spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))\n``````\n",
    "created_at": "2013-05-16T07:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176313",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.
 
+**spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))
``````




---

archive/issue_comments_176314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.\n \n **spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))\n+\n+**sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library\n``````\n",
    "created_at": "2013-05-16T18:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176314",
    "user": "https://github.com/SnarkBoojum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.
 
 **spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))
+
+**sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library
``````




---

archive/issue_comments_176315.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.\n \n-**spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg) ([spkg diff p2](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz) + [spkg diff p3](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz))\n \n **sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library\n``````\n",
    "created_at": "2013-05-24T11:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176315",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The maxima spkg creates a `maxima-noreadline` script, which is an old hack. This should go away.
 
-**spkg**: [http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg](http://boxen.math.washington.edu/home/jpuydt/maxima-5.29.1.p2.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz))
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p3.spkg) ([spkg diff p2](https://github.com/sagemath/sage/files/ticket14556/trac_14556_maxima.patch.gz) + [spkg diff p3](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz))
 
 **sagelib**: [patch](https://github.com/sagemath/sage/files/ticket14556/trac_14556_sagelib.patch.gz) for the sage library
``````




---

archive/issue_comments_176316.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2013-05-24T11:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176316",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_176317.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[maxima-5.29.1.p3.diff.gz](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz)**\n\nPositive review to your changes.\n\nHowever, I added some more small changes to the maxima spkg, please review.",
    "created_at": "2013-05-24T11:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176317",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[maxima-5.29.1.p3.diff.gz](https://github.com/sagemath/sage/files/ticket14556/maxima-5.29.1.p3.diff.gz)**

Positive review to your changes.

However, I added some more small changes to the maxima spkg, please review.



---

archive/issue_comments_176318.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReviewed, with nothing bad to say.",
    "created_at": "2013-05-25T06:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176318",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:9" align="right">comment:9</div>

Reviewed, with nothing bad to say.



---

archive/issue_events_204145.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-25T06:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204145"
}
```



---

archive/issue_events_204146.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-25T06:58:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204146"
}
```



---

archive/issue_comments_176319.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Julien Puydt**",
    "created_at": "2013-05-25T06:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176319",
    "user": "https://github.com/SnarkBoojum"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Julien Puydt**



---

archive/issue_comments_176320.json:
```json
{
    "body": "Changed author from **Julien Puydt** to **Julien Puydt, Jeroen Demeyer**",
    "created_at": "2013-05-25T06:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176320",
    "user": "https://github.com/SnarkBoojum"
}
```

Changed author from **Julien Puydt** to **Julien Puydt, Jeroen Demeyer**



---

archive/issue_events_204147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204147"
}
```



---

archive/issue_events_204148.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14556#event-204148"
}
```



---

archive/issue_comments_176321.json:
```json
{
    "body": "Merged: **sage-5.10.beta5**",
    "created_at": "2013-05-26T19:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176321",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta5**



---

archive/issue_comments_176322.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nDid anyone actually try upgrading with this?  From beta4 - and don't try to tell me that was just a beta ;-)\n\n```\ntest -d binary-ecl || mkdir binary-ecl\necl -norc -eval '(progn (load \"../lisp-utils/defsystem.lisp\") (funcall (intern (symbol-name :operate-on-system) :mk) \"maxima\" :compile :verbose t) (build-maxima-lib))' -$\n;;; Loading \"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/../lisp-utils/defsystem.lisp\"\n;;; Loading #P\"/Users/.../sage-5.10.beta3/local/lib/ecl/cmp.fas\"\n;;; Loading \"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima.system\"\n\n;  - Compiling defsystem \"maxima\"\n;    - Compiling module \"package\"\n;      - Compiling source file\n;        \"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp\"\n;;;\n;;; Compiling /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp.\n;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n;;;\n;;; End of Pass 1.\n;;; Internal error:\n;;;   ** Unable to find include directory\n;      - Binary file binary-ecl/maxima-package.fas is old or does not exist.\n;        Compile (and load) source file /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp instead? y\n;      - Should I bother you if this happens again? y\n;      - Compiling source file\n;        \"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp\"\n;;;\n;;; Compiling /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp.\n;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n;;;\n;;; End of Pass 1.\n;;; Internal error:\n;;;   ** Unable to find include directory\n;      - Loading binary file \"binary-ecl/maxima-package.fas\" An error occurred during initialization:\nFilesystem error with pathname #P\"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/maxima-package.fas\".\nEither\n 1) the file does not exist, or\n 2) we are not allowed to access the file, or\n 3) the pathname points to a broken symbolic link..\nmake[3]: *** [binary-ecl/maxima] Error 1\nmake[2]: *** [all-recursive] Error 1\n***********************************************************\nError: Failed to build Maxima.\n***********************************************************\n```",
    "created_at": "2013-05-28T02:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176322",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

Did anyone actually try upgrading with this?  From beta4 - and don't try to tell me that was just a beta ;-)

```
test -d binary-ecl || mkdir binary-ecl
ecl -norc -eval '(progn (load "../lisp-utils/defsystem.lisp") (funcall (intern (symbol-name :operate-on-system) :mk) "maxima" :compile :verbose t) (build-maxima-lib))' -$
;;; Loading "/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/../lisp-utils/defsystem.lisp"
;;; Loading #P"/Users/.../sage-5.10.beta3/local/lib/ecl/cmp.fas"
;;; Loading "/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima.system"

;  - Compiling defsystem "maxima"
;    - Compiling module "package"
;      - Compiling source file
;        "/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp"
;;;
;;; Compiling /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp.
;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
;;;
;;; End of Pass 1.
;;; Internal error:
;;;   ** Unable to find include directory
;      - Binary file binary-ecl/maxima-package.fas is old or does not exist.
;        Compile (and load) source file /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp instead? y
;      - Should I bother you if this happens again? y
;      - Compiling source file
;        "/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp"
;;;
;;; Compiling /Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/maxima-package.lisp.
;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
;;;
;;; End of Pass 1.
;;; Internal error:
;;;   ** Unable to find include directory
;      - Loading binary file "binary-ecl/maxima-package.fas" An error occurred during initialization:
Filesystem error with pathname #P"/Users/.../sage-5.10.beta3/spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/maxima-package.fas".
Either
 1) the file does not exist, or
 2) we are not allowed to access the file, or
 3) the pathname points to a broken symbolic link..
make[3]: *** [binary-ecl/maxima] Error 1
make[2]: *** [all-recursive] Error 1
***********************************************************
Error: Failed to build Maxima.
***********************************************************
```



---

archive/issue_comments_176323.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'd also be skeptical of removing the OS X workaround unless we're sure that really doesn't cause problems on any Mac platforms.  Though I wouldn't be surprised if it turned out to be unnecessary with the latest ECL - I think that message dates to clisp, maybe that was part of the issue.",
    "created_at": "2013-05-28T02:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176323",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

I'd also be skeptical of removing the OS X workaround unless we're sure that really doesn't cause problems on any Mac platforms.  Though I wouldn't be surprised if it turned out to be unnecessary with the latest ECL - I think that message dates to clisp, maybe that was part of the issue.



---

archive/issue_comments_176324.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI don't think that was a clisp workaround but I could be wrong. So building from scratch on OS X works but upgrading doesn't?",
    "created_at": "2013-05-28T02:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176324",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

I don't think that was a clisp workaround but I could be wrong. So building from scratch on OS X works but upgrading doesn't?



---

archive/issue_comments_176325.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n> So building from scratch on OS X works but upgrading doesn't?\n\nI don't know.  I only just now got back online after the US holiday weekend and tried upgrading.  I assume Jeroen built from scratch before merging, however, but he probably only tests upgrades from major to major release on every platform... anyway, it's quite reproducible with this setup on my 10.7 Intel machine.",
    "created_at": "2013-05-28T02:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176325",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:15" align="right">comment:15</div>

> So building from scratch on OS X works but upgrading doesn't?

I don't know.  I only just now got back online after the US holiday weekend and tried upgrading.  I assume Jeroen built from scratch before merging, however, but he probably only tests upgrades from major to major release on every platform... anyway, it's quite reproducible with this setup on my 10.7 Intel machine.



---

archive/issue_comments_176326.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.",
    "created_at": "2013-05-28T02:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176326",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

It is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.



---

archive/issue_comments_176327.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWell, unless something else got (unintentionally) messed up in the spkg , the only relevant change *is* the removal of redirecting `stdout` and `stderr` to files on MacOS X, in Jeroen's `.p3`.",
    "created_at": "2013-05-28T03:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176327",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Well, unless something else got (unintentionally) messed up in the spkg , the only relevant change *is* the removal of redirecting `stdout` and `stderr` to files on MacOS X, in Jeroen's `.p3`.



---

archive/issue_comments_176328.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment:13):\n> I'd also be skeptical of removing the OS X workaround\n\nFair enough, but partially the reason for removal was that it was an undocumented fix. I really dislike \"workarounds\" without any reference to a ticket or clues what the problem is. And I even looked on the ticket numbers from the spkg, but couldn't find any reference to this problem on any Trac ticket.",
    "created_at": "2013-05-28T06:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176328",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment:13):
> I'd also be skeptical of removing the OS X workaround

Fair enough, but partially the reason for removal was that it was an undocumented fix. I really dislike "workarounds" without any reference to a ticket or clues what the problem is. And I even looked on the ticket numbers from the spkg, but couldn't find any reference to this problem on any Trac ticket.



---

archive/issue_comments_176329.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI spent some time with hgview to scan the hg repo of the maxima spkg. This is in the initial commit on 23/07/2007 by wstein\n\n```\nif [ `uname` = \"Darwin\" ]; then\n   echo \"Now building maxima; this takes a few minutes\"\n   echo \"Since we're using OS X and there is a very weird\"\n   echo \"bug with buffered output while building maxima,\"\n   echo \"you will not be able to see the output of the build\"\n   echo \"as it occurs.  Don't worry, the build process did\"\n   echo \"not hang.\"\n   make > output.log\nelse\n   make\nfi\n```\nAnd the second commit of the repo has the following change, also by wstein on 2/11/2007\n\n```\n@@ -31,8 +39,10 @@\n    echo \"you will not be able to see the output of the build\"\n    echo \"as it occurs.  Don't worry, the build process did\"\n    echo \"not hang.\"\n-   make > output.log\n+   make >> \"$CUR\"/output.log  2>> \"$CUR\"/error.log\n else\n+\n+\n    make\n fi\n check_error \"Failed to make Maxima.\" \n```\nneither have trac tickets. trac tickets are vaguely mentioned in the commit message on occasion in 2008 and 2009, they are regulary in commit message in 2010 and the first time SPKG.txt quote a trac ticket is 13/02/2011. When did Jeroen become the release manager already???\n\nThat was some archeology. The work around has been in the spkg since 2007. maxima on a gentoo prefix on OS X doesn't have any buffering problems at build time.",
    "created_at": "2013-05-28T09:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176329",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

I spent some time with hgview to scan the hg repo of the maxima spkg. This is in the initial commit on 23/07/2007 by wstein

```
if [ `uname` = "Darwin" ]; then
   echo "Now building maxima; this takes a few minutes"
   echo "Since we're using OS X and there is a very weird"
   echo "bug with buffered output while building maxima,"
   echo "you will not be able to see the output of the build"
   echo "as it occurs.  Don't worry, the build process did"
   echo "not hang."
   make > output.log
else
   make
fi
```
And the second commit of the repo has the following change, also by wstein on 2/11/2007

```
@@ -31,8 +39,10 @@
    echo "you will not be able to see the output of the build"
    echo "as it occurs.  Don't worry, the build process did"
    echo "not hang."
-   make > output.log
+   make >> "$CUR"/output.log  2>> "$CUR"/error.log
 else
+
+
    make
 fi
 check_error "Failed to make Maxima." 
```
neither have trac tickets. trac tickets are vaguely mentioned in the commit message on occasion in 2008 and 2009, they are regulary in commit message in 2010 and the first time SPKG.txt quote a trac ticket is 13/02/2011. When did Jeroen become the release manager already???

That was some archeology. The work around has been in the spkg since 2007. maxima on a gentoo prefix on OS X doesn't have any buffering problems at build time.



---

archive/issue_comments_176330.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> It is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.\n\nThe rest of the log is completely ordinary, same as always.  At this point I'm just asking for someone else to test upgrading for this spkg.\n\nIndeed,\n\n```\n$ ls spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/\nmaxima-package.c\tmaxima-package.data\tmaxima-package.eclh\n```\n\nAs to the removal of the buffering fix thingie, I'm not worried about it as long as Jeroen has indeed tested it on a variety of machines, which sounds like it is the case.  I agree that commits from 2007 made by William are likely to be suspect and undocumented ;-)",
    "created_at": "2013-05-28T12:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176330",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

> It is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.

The rest of the log is completely ordinary, same as always.  At this point I'm just asking for someone else to test upgrading for this spkg.

Indeed,

```
$ ls spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/
maxima-package.c	maxima-package.data	maxima-package.eclh
```

As to the removal of the buffering fix thingie, I'm not worried about it as long as Jeroen has indeed tested it on a variety of machines, which sounds like it is the case.  I agree that commits from 2007 made by William are likely to be suspect and undocumented ;-)



---

archive/issue_comments_176331.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@kcrisman](#comment:20):\n> > It is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.\n\n> The rest of the log is completely ordinary, same as always.  At this point I'm just asking for someone else to test upgrading for this spkg.\n> \n> Indeed,\n> \n> ```\n> $ ls spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/\n> maxima-package.c\tmaxima-package.data\tmaxima-package.eclh\n> ```\n\nWeirdly, now as I try to reinstall the p1 spkg, I get the same problem! Of course, it doesn't show up on the screen, but in error.log it's there, and the `binary-ecl` folder has the same three files.\n\nIs it possible we have to touch ecl first so that it upgrades when upgrading this?  I don't see why, but I'll try that next.",
    "created_at": "2013-05-28T13:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176331",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@kcrisman](#comment:20):
> > It is quite weird. But I assume this is material for a new ticket now, is it the full log for maxima? If you have more before that I think we should inspect it.

> The rest of the log is completely ordinary, same as always.  At this point I'm just asking for someone else to test upgrading for this spkg.
> 
> Indeed,
> 
> ```
> $ ls spkg/build/maxima-5.29.1.p3/src/src/binary-ecl/
> maxima-package.c	maxima-package.data	maxima-package.eclh
> ```

Weirdly, now as I try to reinstall the p1 spkg, I get the same problem! Of course, it doesn't show up on the screen, but in error.log it's there, and the `binary-ecl` folder has the same three files.

Is it possible we have to touch ecl first so that it upgrades when upgrading this?  I don't see why, but I'll try that next.



---

archive/issue_comments_176332.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> Weirdly, now as I try to reinstall the p1 spkg, I get the same problem! Of course, it doesn't show up on the screen, but in error.log it's there, and the `binary-ecl` folder has the same three files.\n> \n> Is it possible we have to touch ecl first so that it upgrades when upgrading this?  I don't see why, but I'll try that next.\n\nApparently this (reinstalling ecl) solves the problem.  I strongly suggest that someone else verify this before Sage 5.10 is released.",
    "created_at": "2013-05-28T13:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176332",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

> Weirdly, now as I try to reinstall the p1 spkg, I get the same problem! Of course, it doesn't show up on the screen, but in error.log it's there, and the `binary-ecl` folder has the same three files.
> 
> Is it possible we have to touch ecl first so that it upgrades when upgrading this?  I don't see why, but I'll try that next.

Apparently this (reinstalling ecl) solves the problem.  I strongly suggest that someone else verify this before Sage 5.10 is released.



---

archive/issue_comments_176333.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe ecl/maxima building problem again. ecl has been updated in beta2 so it shouldn't have been a problem updating from beta4. Did you move sage at some point before upgrading?",
    "created_at": "2013-05-29T00:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176333",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

The ecl/maxima building problem again. ecl has been updated in beta2 so it shouldn't have been a problem updating from beta4. Did you move sage at some point before upgrading?



---

archive/issue_comments_176334.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYes, because I had upgraded several times in a row and then renamed the folder.\n\nI'll be mostly offline for a few days now, so I won't be able to reproduce this, but I am pretty certain that somehow this was the issue.",
    "created_at": "2013-05-29T00:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176334",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Yes, because I had upgraded several times in a row and then renamed the folder.

I'll be mostly offline for a few days now, so I won't be able to reproduce this, but I am pretty certain that somehow this was the issue.



---

archive/issue_comments_176335.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\necl/maxima build issue confirmed. It seems that the following doesn't work:\n\n1. build `ecl`\n2. move Sage tree\n3. build `maxima`",
    "created_at": "2013-05-30T09:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176335",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

ecl/maxima build issue confirmed. It seems that the following doesn't work:

1. build `ecl`
2. move Sage tree
3. build `maxima`



---

archive/issue_comments_176336.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAgain... we already dealt with that in the past. In any case it shouldn't be related to this ticket. It is really an ecl issue not a maxima one. The maxima bump just made it apparent.",
    "created_at": "2013-05-30T10:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176336",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Again... we already dealt with that in the past. In any case it shouldn't be related to this ticket. It is really an ecl issue not a maxima one. The maxima bump just made it apparent.



---

archive/issue_comments_176337.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nFollow-up: #11359.",
    "created_at": "2013-05-30T10:49:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14556#issuecomment-176337",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Follow-up: #11359.
