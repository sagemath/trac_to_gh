# Issue 14014: Update matrix groups to new Parents, libGAP.

archive/issues_013810.json:
```json
{
    "assignees": [
        "https://github.com/wdjoyner"
    ],
    "body": "This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.\n\n* Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)\n* Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n* Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n* Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n* Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)\n* Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)\n* Apply [attachment: trac_14014-review-ts.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)\n\nFollow-up: #14039.\n\nDepends on #14187\nDepends on #14323\nDepends on #14284\nDepends on #14640\n\nCC:  @roed314 @dimpase @seblabbe\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Volker Braun**\n\nMerged: **sage-5.11.beta0**\n\nComponent: **group theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14014_\n\n",
    "closed_at": "2013-06-06T12:32:15Z",
    "created_at": "2013-01-25T20:36:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.11",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update matrix groups to new Parents, libGAP.",
    "type": "issue",
    "updated_at": "2013-06-06T12:32:15Z",
    "url": "https://github.com/sagemath/sage/issues/14014",
    "user": "https://github.com/vbraun"
}
```
This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.

* Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)
* Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
* Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
* Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
* Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)
* Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)
* Apply [attachment: trac_14014-review-ts.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)

Follow-up: #14039.

Depends on #14187
Depends on #14323
Depends on #14284
Depends on #14640

CC:  @roed314 @dimpase @seblabbe

Reviewer: **Travis Scrimshaw**

Author: **Volker Braun**

Merged: **sage-5.11.beta0**

Component: **group theory**

_Issue created by migration from https://trac.sagemath.org/ticket/14014_





---

archive/issue_events_195063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T20:36:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195063"
}
```



---

archive/issue_events_195064.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T20:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "c: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195064"
}
```



---

archive/issue_events_195065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T20:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195065"
}
```



---

archive/issue_events_195066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T20:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195066"
}
```



---

archive/issue_events_195067.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2013-01-25T20:36:15Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "subject": "https://github.com/vbraun",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195067"
}
```



---

archive/issue_comments_166074.json:
```json
{
    "body": "Dependencies: **#14015**",
    "created_at": "2013-01-25T21:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166074",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#14015**



---

archive/issue_comments_166075.json:
```json
{
    "body": "Changed dependencies from **#14015** to none",
    "created_at": "2013-02-12T15:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166075",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#14015** to none



---

archive/issue_comments_166076.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n \n+\n+Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)\n+\n+\n+\n+\n+Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg\n+\n``````\n",
    "created_at": "2013-03-02T02:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166076",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 
+
+Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)
+
+
+
+
+Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg
+
``````




---

archive/issue_comments_166077.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2013-03-02T04:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166077",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_166078.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n-\n+This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.\n \n Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)\n \n+* Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg\n+* Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)\n+* Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n \n-\n-\n-Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg\n-\n``````\n",
    "created_at": "2013-03-02T04:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166078",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
-
+This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.
 
 Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)
 
+* Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg
+* Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)
+* Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
 
-
-
-Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg
-
``````




---

archive/issue_events_195068.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-03-02T04:57:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195068"
}
```



---

archive/issue_comments_166079.json:
```json
{
    "body": "Dependencies: **#14187**",
    "created_at": "2013-03-02T05:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166079",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#14187**



---

archive/issue_comments_166080.json:
```json
{
    "body": "Initial patch",
    "created_at": "2013-03-02T09:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166080",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_166081.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,5 @@\n \n * Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg\n * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)\n+* Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n-\n``````\n",
    "created_at": "2013-03-02T09:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166081",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,5 @@
 
 * Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg
 * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)
+* Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
-
``````




---

archive/issue_comments_166082.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[trac_14014_deletions.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)**\n\nSplit into bit-sized pieces ;-)",
    "created_at": "2013-03-02T09:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166082",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[trac_14014_deletions.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)**

Split into bit-sized pieces ;-)



---

archive/issue_comments_166083.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,4 @@\n * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)\n * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n+* Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n``````\n",
    "created_at": "2013-03-02T09:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166083",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,4 @@
 * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)
 * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
+* Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
``````




---

archive/issue_comments_166084.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2013-03-02T09:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166084",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **David Roe**



---

archive/issue_comments_166085.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nis there a trac ticket for `libgap-4.5.7.p2.spkg` ?",
    "created_at": "2013-03-04T07:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166085",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

is there a trac ticket for `libgap-4.5.7.p2.spkg` ?



---

archive/issue_comments_166086.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDoes it handle GAP's BlockMatrix ? This would allow a seamless interface between Sage's sparse matrices and GAP, as BlockMatrix\ncan be used as a sparse matrix:\n\n```\ngap> n:=10^16;\n10000000000000000\ngap> a:=BlockMatrix([[1,2,[[5]]]],n,n);\n<block matrix of dimensions (10000000000000000*1)x(10000000000000000*1)>\ngap> \n```",
    "created_at": "2013-03-04T14:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166086",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Does it handle GAP's BlockMatrix ? This would allow a seamless interface between Sage's sparse matrices and GAP, as BlockMatrix
can be used as a sparse matrix:

```
gap> n:=10^16;
10000000000000000
gap> a:=BlockMatrix([[1,2,[[5]]]],n,n);
<block matrix of dimensions (10000000000000000*1)x(10000000000000000*1)>
gap> 
```



---

archive/issue_comments_166087.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis is the track ticket for libgap-4.5.7.p2.spkg. It does not handle GAP's blockmatrix special, that is, they currently become dense matrices in Sage. Please open another ticket for feature requests.",
    "created_at": "2013-03-10T03:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166087",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

This is the track ticket for libgap-4.5.7.p2.spkg. It does not handle GAP's blockmatrix special, that is, they currently become dense matrices in Sage. Please open another ticket for feature requests.



---

archive/issue_comments_166088.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,5 @@\n * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n+\n+Follow-up: #14039.\n``````\n",
    "created_at": "2013-03-15T21:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166088",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,5 @@
 * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
 * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
+
+Follow-up: #14039.
``````




---

archive/issue_comments_166089.json:
```json
{
    "body": "Changed dependencies from **#14187** to **#14187, #14323**",
    "created_at": "2013-03-21T10:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166089",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#14187** to **#14187, #14323**



---

archive/issue_comments_166090.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nMoving the spkg-update to #14323.",
    "created_at": "2013-03-21T10:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166090",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Moving the spkg-update to #14323.



---

archive/issue_comments_166091.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,5 @@\n This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.\n \n-Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)\n-\n-* Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg\n * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)\n * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n``````\n",
    "created_at": "2013-03-21T10:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166091",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,5 @@
 This patch adds support for cyclotomics and matrices to LibGAP. And rewrites the matrix groups on top of that.
 
-Requires updated libGAP spkg (signal handler fix only, see https://bitbucket.org/vbraun/libgap/commits/3f4ebd64fc1219858802173cd86b7910040fef36)
-
-* Replace the libgap spkg with http://www.stp.dias.ie/~vbraun/Sage/spkg/libgap-4.5.7.p2.spkg
 * Apply [attachment: trac_14014_libgap_cyclotomic_matrix.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)
 * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
``````




---

archive/issue_comments_166092.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI started to look at `sage/groups/libgap_wrapper.pyx`, and wonder what the following two lines would do:\n\n```\nsage: G.<a,b> =FreeGroup()\nsage: G\nFree Group on generators {a, b}\n```\nthere was a doctest like this, marked `\"# indirect doctest\"`, but it's removed by this patch. Shouldn't one just remove the\n`\"# indirect doctest\"`? Or does `G` stand from something weird now?\n\nCan we have a bit longer explanation of what happens on this ticket. Do matrix groups get libGAP as the default backend, while the old one remains available as `G.gap()` ?",
    "created_at": "2013-03-25T03:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166092",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

I started to look at `sage/groups/libgap_wrapper.pyx`, and wonder what the following two lines would do:

```
sage: G.<a,b> =FreeGroup()
sage: G
Free Group on generators {a, b}
```
there was a doctest like this, marked `"# indirect doctest"`, but it's removed by this patch. Shouldn't one just remove the
`"# indirect doctest"`? Or does `G` stand from something weird now?

Can we have a bit longer explanation of what happens on this ticket. Do matrix groups get libGAP as the default backend, while the old one remains available as `G.gap()` ?



---

archive/issue_comments_166093.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIs it assumed in libGAP that GAP long integers are GMP/MPIR integers? For there is the following comment in the patch, in `sage/libs/gap/element.pyx`, lines 1150-2:\n\n```\n An immediate integer is one that is stored as a C integer, and \n is subject to the usual size limits. Larger integers are \n stored in GAP as GMP integers.\n```\n\n\nOr it actually just calls the appropriate GAP long integer functions?\nNote that GAP itself allows for different  long integer backends, e.g. it has its own implementation of them, used exclusively before version 4.5, although Sage does not use this.\n\nWhatever it is, it should be possible to discover without reading the full source.",
    "created_at": "2013-03-25T04:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166093",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Is it assumed in libGAP that GAP long integers are GMP/MPIR integers? For there is the following comment in the patch, in `sage/libs/gap/element.pyx`, lines 1150-2:

```
 An immediate integer is one that is stored as a C integer, and 
 is subject to the usual size limits. Larger integers are 
 stored in GAP as GMP integers.
```


Or it actually just calls the appropriate GAP long integer functions?
Note that GAP itself allows for different  long integer backends, e.g. it has its own implementation of them, used exclusively before version 4.5, although Sage does not use this.

Whatever it is, it should be possible to discover without reading the full source.



---

archive/issue_comments_166094.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nfor some reason I get \n\n```\nsage -t --long sage/groups/matrix_gps/morphism.py\n**********************************************************************\nFile \"sage/groups/matrix_gps/morphism.py\", line 319, in sage.groups.matrix_gps.morphism.MatrixGroupMorphism_im_gens._call_\nFailed example:\n    f(O)  # long time\nExpected:\n    Matrix group over Rational Field with 6 generators: \n     [[[1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 1]], [[1, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 1]], [[1, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1]], [[0, 0, 0, 0, -1, 0], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [-1, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 1]], [[0, 0, 0, 0, 0, 1], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [1, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, -1], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [-1, 0, 0, 0, 0, 0]]]\nGot:\n    Matrix group over Rational Field with 6 generators\n**********************************************************************\n1 item had failures:\n   1 of  19 in sage.groups.matrix_gps.morphism.MatrixGroupMorphism_im_gens._call_\n    [67 tests, 1 failure, 53.2 s]\n```\nIs it just me, a side effect of some crap in patch queue?",
    "created_at": "2013-03-25T05:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166094",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

for some reason I get 

```
sage -t --long sage/groups/matrix_gps/morphism.py
**********************************************************************
File "sage/groups/matrix_gps/morphism.py", line 319, in sage.groups.matrix_gps.morphism.MatrixGroupMorphism_im_gens._call_
Failed example:
    f(O)  # long time
Expected:
    Matrix group over Rational Field with 6 generators: 
     [[[1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 1]], [[1, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 1]], [[1, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1]], [[0, 0, 0, 0, -1, 0], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [-1, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 1]], [[0, 0, 0, 0, 0, 1], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [1, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, -1], [0, 1, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0], [-1, 0, 0, 0, 0, 0]]]
Got:
    Matrix group over Rational Field with 6 generators
**********************************************************************
1 item had failures:
   1 of  19 in sage.groups.matrix_gps.morphism.MatrixGroupMorphism_im_gens._call_
    [67 tests, 1 failure, 53.2 s]
```
Is it just me, a side effect of some crap in patch queue?



---

archive/issue_comments_166095.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSomething I don't get happens in `sage/groups/matrix_gps/orthogonal.py`.\nYou changed docstring to say\n\n```\nThe general orthogonal group `GO(n,R)` consists of all orthogonal \n `n\\times n` matrices over the ring `R`.\n```\nbut it doesn't always work, as for finite fileds it's still the same GAP backend:\n\n```\nsage: GO(6,GF(3))\n...\nValueError: must have e=-1 or e=1 for even degree\n```\n\nIMHO, speaking about `the orthogonal group over a ring` is not right. Generally speaking one would have lots of inequivalent bilinear scalar products to choose from, leading to different groups. Even in physics, where the Lorenz group is an example of this...\n\nIn fact, the behaviour of even dimension orthogonal groups over a field is not so special in the finite field case. This is just a manifestation of the fact that there are two Dynkin diagrams (or Lie algebras) giving such groups, namely B_n (you get e=-1) and D_n (you get e=1).",
    "created_at": "2013-03-25T05:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166095",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

Something I don't get happens in `sage/groups/matrix_gps/orthogonal.py`.
You changed docstring to say

```
The general orthogonal group `GO(n,R)` consists of all orthogonal 
 `n\times n` matrices over the ring `R`.
```
but it doesn't always work, as for finite fileds it's still the same GAP backend:

```
sage: GO(6,GF(3))
...
ValueError: must have e=-1 or e=1 for even degree
```

IMHO, speaking about `the orthogonal group over a ring` is not right. Generally speaking one would have lots of inequivalent bilinear scalar products to choose from, leading to different groups. Even in physics, where the Lorenz group is an example of this...

In fact, the behaviour of even dimension orthogonal groups over a field is not so special in the finite field case. This is just a manifestation of the fact that there are two Dynkin diagrams (or Lie algebras) giving such groups, namely B_n (you get e=-1) and D_n (you get e=1).



---

archive/issue_comments_166096.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n### [comment:14](#comment:14)\n\nThis is the `_repr_` doctests, which previously was incorrectly\nlabelled as indirect doctest. In fact, it just showed the output that\nwas generated in a derived class. I replaced it with an explict\ndoctest that actually tests `ParentLibGAP._repr_`.\n\nMy goal is to replace the GAP interface with LibGAP everywhere. During the transition the `gap()` method will return the wrapped object, which may be in the GAP interface or in LibGAP. \n\n### [comment:15](#comment:15)\n\nI just want to allow the GMP backend for long integers, I don't think\nwe gain anything from trying to support the old home-grown one. Though\nat this point you can still use both, the conversion from long\nintegers to Sage is done via strings. But I'd like to change that in\nthe future and directly access the GMP limbs.\n\nThe libgap before this ticket doesn't handle long its correctly\nbecause I didn't understand what GAP docs mean by \"immediate\nintegers\". This is why I wrote the explanatory comment.\n\n### [comment:16](#comment:16)\n\nThat file has been renamed to just `morphism.py`, if you have all\npatches you might have to run `sage -sync-build`\n\n### [comment:17](#comment:17)\n\nI agree that there is no unique bilinear scalar form, though I would\ncall **the** orthogonal group (in absence of any further qualifiers)\nover a ring the one with the standard (identity matrix) bilinear\nform. In particular since the orthogonal groups for other bilinear\nforms have sometimes other names, as you said. The next paragraph\nexplains how the notation for finite fields differ, so I think thats\nclear enough:\n\n```\nThe general orthogonal group `GO(n,R)` consists of all orthogonal \n`n\\times n` matrices over the ring `R`.  \n\nIn the case of a finite field and if the degree `n` is even, then \nthere are two inequivalent quadratic forms and a third parameter \n``e`` must be specified to disambiguate these two possibilities. \n```\nMy aim was to start the docstring with a friendly\nparagraph that says what GO/SO is before hitting the user with the finite\nfield technicalities.",
    "created_at": "2013-03-25T10:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166096",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

### [comment:14](#comment:14)

This is the `_repr_` doctests, which previously was incorrectly
labelled as indirect doctest. In fact, it just showed the output that
was generated in a derived class. I replaced it with an explict
doctest that actually tests `ParentLibGAP._repr_`.

My goal is to replace the GAP interface with LibGAP everywhere. During the transition the `gap()` method will return the wrapped object, which may be in the GAP interface or in LibGAP. 

### [comment:15](#comment:15)

I just want to allow the GMP backend for long integers, I don't think
we gain anything from trying to support the old home-grown one. Though
at this point you can still use both, the conversion from long
integers to Sage is done via strings. But I'd like to change that in
the future and directly access the GMP limbs.

The libgap before this ticket doesn't handle long its correctly
because I didn't understand what GAP docs mean by "immediate
integers". This is why I wrote the explanatory comment.

### [comment:16](#comment:16)

That file has been renamed to just `morphism.py`, if you have all
patches you might have to run `sage -sync-build`

### [comment:17](#comment:17)

I agree that there is no unique bilinear scalar form, though I would
call **the** orthogonal group (in absence of any further qualifiers)
over a ring the one with the standard (identity matrix) bilinear
form. In particular since the orthogonal groups for other bilinear
forms have sometimes other names, as you said. The next paragraph
explains how the notation for finite fields differ, so I think thats
clear enough:

```
The general orthogonal group `GO(n,R)` consists of all orthogonal 
`n\times n` matrices over the ring `R`.  

In the case of a finite field and if the degree `n` is even, then 
there are two inequivalent quadratic forms and a third parameter 
``e`` must be specified to disambiguate these two possibilities. 
```
My aim was to start the docstring with a friendly
paragraph that says what GO/SO is before hitting the user with the finite
field technicalities.



---

archive/issue_comments_166097.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@vbraun](#comment:18):\n> ### [comment:15](#comment:15)\n> \n> I just want to allow the GMP backend for long integers, I don't think\n> we gain anything from trying to support the old home-grown one. \n\nI agree, I'm just asking for a bit more explanation there.\n\n> Though\n> at this point you can still use both, the conversion from long\n> integers to Sage is done via strings. But I'd like to change that in\n> the future and directly access the GMP limbs.\n> \n> The libgap before this ticket doesn't handle long its correctly\n> because I didn't understand what GAP docs mean by \"immediate\n> integers\". This is why I wrote the explanatory comment.\n> \n> ### [comment:16](#comment:16)\n> \n> That file has been renamed to just `morphism.py`, if you have all\n> patches you might have to run `sage -sync-build`\n\nHmm, I tried, and it didn't help. I'll build a pristine installation of Sage and test this there.\n\nNo, no luck on this one. I just built 5.9.beta1, installed the  libgap spkg from #14323, and applied the patches from #14187 and from this ticket, and still have the same failure \n> \n> ### [comment:17](#comment:17)\n> \n> I agree that there is no unique bilinear scalar form, though I would\n> call **the** orthogonal group (in absence of any further qualifiers)\n> over a ring the one with the standard (identity matrix) bilinear\n> form. \n\nActually, it's not even correct to talk about bilinear forms; one should talk about quadratic forms, \nin case you do not want to exclude the case of fields of characteristic 2 (it's more or less a coincidence that\nin other characteristics the automorphisms of the associate bilinear form coincide with the (linear) automorphisms of the quadratic form. \n\nAs well, in characteristic 2 orthogonal matrices have little to do with orthogonal groups; indeed they fix the quadratic form `f(X)=<X,X>`, but this form is (sesqu)linear, i.e. `f(aX+bY)=<aX+bY,aX+bY>=a^2 <X,X>+b^2<Y,Y>+2<aX,bY>= a<sup>2<X,X>+b</sup>2<Y,Y>`, and this is not a one one cares much about. The ones which are interesting cannot even be diagonalized.\n\nAnd what happens for rings in general is much more mysterious, even for ZZ. I don't know much about this topic, but number theorists might start pulling their hairs out upon reading this part; already binary quadratic forms over ZZ are a big topic.\n\n> In particular since the orthogonal groups for other bilinear\n> forms have sometimes other names, as you said. The next paragraph\n> explains how the notation for finite fields differ, so I think thats\n> clear enough:\n> \n> ```\n> The general orthogonal group `GO(n,R)` consists of all orthogonal \n> `n\\times n` matrices over the ring `R`.  \n> \n> In the case of a finite field and if the degree `n` is even, then \n> there are two inequivalent quadratic forms and a third parameter \n> ``e`` must be specified to disambiguate these two possibilities. \n> ```\n> My aim was to start the docstring with a friendly\n> paragraph that says what GO/SO is before hitting the user with the finite\n> field technicalities.\n\nOne has to start with a correct paragraph (see above). It's also strange to see that 'in case of finite fields' clarification. Orthogonal groups over fields are a family of classical groups, which are the same as the D_n and B_n groups \"of Lie type\". And for the latter there will be two different groups for n even, something like this. Another way to talk about them is to talk about automorphism groups of nondegenerate quadratic forms, and for each class of equivalent forms one will have its \"own\" orthogonal group.",
    "created_at": "2013-03-25T13:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166097",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@vbraun](#comment:18):
> ### [comment:15](#comment:15)
> 
> I just want to allow the GMP backend for long integers, I don't think
> we gain anything from trying to support the old home-grown one. 

I agree, I'm just asking for a bit more explanation there.

> Though
> at this point you can still use both, the conversion from long
> integers to Sage is done via strings. But I'd like to change that in
> the future and directly access the GMP limbs.
> 
> The libgap before this ticket doesn't handle long its correctly
> because I didn't understand what GAP docs mean by "immediate
> integers". This is why I wrote the explanatory comment.
> 
> ### [comment:16](#comment:16)
> 
> That file has been renamed to just `morphism.py`, if you have all
> patches you might have to run `sage -sync-build`

Hmm, I tried, and it didn't help. I'll build a pristine installation of Sage and test this there.

No, no luck on this one. I just built 5.9.beta1, installed the  libgap spkg from #14323, and applied the patches from #14187 and from this ticket, and still have the same failure 
> 
> ### [comment:17](#comment:17)
> 
> I agree that there is no unique bilinear scalar form, though I would
> call **the** orthogonal group (in absence of any further qualifiers)
> over a ring the one with the standard (identity matrix) bilinear
> form. 

Actually, it's not even correct to talk about bilinear forms; one should talk about quadratic forms, 
in case you do not want to exclude the case of fields of characteristic 2 (it's more or less a coincidence that
in other characteristics the automorphisms of the associate bilinear form coincide with the (linear) automorphisms of the quadratic form. 

As well, in characteristic 2 orthogonal matrices have little to do with orthogonal groups; indeed they fix the quadratic form `f(X)=<X,X>`, but this form is (sesqu)linear, i.e. `f(aX+bY)=<aX+bY,aX+bY>=a^2 <X,X>+b^2<Y,Y>+2<aX,bY>= a<sup>2<X,X>+b</sup>2<Y,Y>`, and this is not a one one cares much about. The ones which are interesting cannot even be diagonalized.

And what happens for rings in general is much more mysterious, even for ZZ. I don't know much about this topic, but number theorists might start pulling their hairs out upon reading this part; already binary quadratic forms over ZZ are a big topic.

> In particular since the orthogonal groups for other bilinear
> forms have sometimes other names, as you said. The next paragraph
> explains how the notation for finite fields differ, so I think thats
> clear enough:
> 
> ```
> The general orthogonal group `GO(n,R)` consists of all orthogonal 
> `n\times n` matrices over the ring `R`.  
> 
> In the case of a finite field and if the degree `n` is even, then 
> there are two inequivalent quadratic forms and a third parameter 
> ``e`` must be specified to disambiguate these two possibilities. 
> ```
> My aim was to start the docstring with a friendly
> paragraph that says what GO/SO is before hitting the user with the finite
> field technicalities.

One has to start with a correct paragraph (see above). It's also strange to see that 'in case of finite fields' clarification. Orthogonal groups over fields are a family of classical groups, which are the same as the D_n and B_n groups "of Lie type". And for the latter there will be two different groups for n even, something like this. Another way to talk about them is to talk about automorphism groups of nondegenerate quadratic forms, and for each class of equivalent forms one will have its "own" orthogonal group.



---

archive/issue_comments_166098.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNo luck on the comment 16 problem. I just built 5.9.beta1, installed the  libgap spkg from #14323, and applied the patches from #14187 and from this ticket, did `sage -synch-build` and `sage -b `and still have the same failure on `sage/groups/matrix_gps/morphism.py`.\nI have \n\n```\ndima@arando:~/sage/sage-5.9.beta1/devel/sage$ hg qapp\ntrac_14187_lazy_import_test.patch\ntrac_14187_lazy_everywhere.patch\ntrac_14014_libgap_cyclotomic_matrix.patch\ntrac_14014_deletions.patch\ntrac_14014_parents_for_matrix_groups.patch\ntrac_14014_parents_group_dependents.patch\n```\nand `libgap-4.5.7.p2` from #14323. (It's on arando from the buildbot, by the way).",
    "created_at": "2013-03-25T16:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166098",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

No luck on the comment 16 problem. I just built 5.9.beta1, installed the  libgap spkg from #14323, and applied the patches from #14187 and from this ticket, did `sage -synch-build` and `sage -b `and still have the same failure on `sage/groups/matrix_gps/morphism.py`.
I have 

```
dima@arando:~/sage/sage-5.9.beta1/devel/sage$ hg qapp
trac_14187_lazy_import_test.patch
trac_14187_lazy_everywhere.patch
trac_14014_libgap_cyclotomic_matrix.patch
trac_14014_deletions.patch
trac_14014_parents_for_matrix_groups.patch
trac_14014_parents_group_dependents.patch
```
and `libgap-4.5.7.p2` from #14323. (It's on arando from the buildbot, by the way).



---

archive/issue_comments_166099.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nUpdated patch fixes the problem from [comment:16](#comment:16), which hides behind a `# long time`. \n\nI also updated the orthogonal matrix docstrings, hopefully it is now correct even in characteristic two.",
    "created_at": "2013-03-25T23:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166099",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

Updated patch fixes the problem from [comment:16](#comment:16), which hides behind a `# long time`. 

I also updated the orthogonal matrix docstrings, hopefully it is now correct even in characteristic two.



---

archive/issue_comments_166100.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@vbraun](#comment:21):\n> Updated patch fixes the problem from [comment:16](#comment:16), which hides behind a `# long time`. \n> \n\nline 329 of morphism.py should be\n\n```\n            <BLANKLINE>\n```\nnot the empty line. now this doctest is still broken.",
    "created_at": "2013-03-26T03:43:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166100",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@vbraun](#comment:21):
> Updated patch fixes the problem from [comment:16](#comment:16), which hides behind a `# long time`. 
> 

line 329 of morphism.py should be

```
            <BLANKLINE>
```
not the empty line. now this doctest is still broken.



---

archive/issue_comments_166101.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThere are also doctest failures in `sage/categories/groups.py`, `sage/combinat/backtrack.py`, `sage/combinat/partition.py`. Did you look at these?\n\n\nIn `sage/combinat/root_system/weyl_group.py`. In the latter the fix is trivial: replace [] by ():\n\n```\nsage -t --long devel/sage/sage/combinat/root_system/weyl_group.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/weyl_group.py\", line 311, in sage.combinat.root_system.weyl_group.WeylGroup.gens\nFailed example:\n    G.gens()\nExpected:\n    [\n    [0 1 0 0]  [1 0 0 0]  [1 0 0 0]\n    [1 0 0 0]  [0 0 1 0]  [0 1 0 0]\n    [0 0 1 0]  [0 1 0 0]  [0 0 0 1]\n    [0 0 0 1], [0 0 0 1], [0 0 1 0]\n    ]\nGot:\n    (\n    [0 1 0 0]  [1 0 0 0]  [1 0 0 0]\n    [1 0 0 0]  [0 0 1 0]  [0 1 0 0]\n    [0 0 1 0]  [0 1 0 0]  [0 0 0 1]\n    [0 0 0 1], [0 0 0 1], [0 0 1 0]\n    )\n```\n\nAlso `devel/sage/sage/libs/gap/libgap.pyx` (forgot to lazify):\n\n```\nsage -t --long devel/sage/sage/libs/gap/libgap.pyx\n**********************************************************************\nFile \"devel/sage/sage/libs/gap/libgap.pyx\", line 460, in sage.libs.gap.libgap.Gap.__init__\nFailed example:\n    type(libgap)\nExpected:\n    <class 'sage.libs.gap.libgap.Gap'>\nGot:\n    <type 'sage.misc.lazy_import.LazyImport'>\n```\nAnd a number of similar failures in `devel/sage/sage/misc/lazy_import.pyx`.\n\nI also get timeouts in `sage/sage/combinat/backtrack.py` and `sage/modular/arithgroup/arithgroup_perm.py`.",
    "created_at": "2013-03-26T07:13:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166101",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

There are also doctest failures in `sage/categories/groups.py`, `sage/combinat/backtrack.py`, `sage/combinat/partition.py`. Did you look at these?


In `sage/combinat/root_system/weyl_group.py`. In the latter the fix is trivial: replace [] by ():

```
sage -t --long devel/sage/sage/combinat/root_system/weyl_group.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/weyl_group.py", line 311, in sage.combinat.root_system.weyl_group.WeylGroup.gens
Failed example:
    G.gens()
Expected:
    [
    [0 1 0 0]  [1 0 0 0]  [1 0 0 0]
    [1 0 0 0]  [0 0 1 0]  [0 1 0 0]
    [0 0 1 0]  [0 1 0 0]  [0 0 0 1]
    [0 0 0 1], [0 0 0 1], [0 0 1 0]
    ]
Got:
    (
    [0 1 0 0]  [1 0 0 0]  [1 0 0 0]
    [1 0 0 0]  [0 0 1 0]  [0 1 0 0]
    [0 0 1 0]  [0 1 0 0]  [0 0 0 1]
    [0 0 0 1], [0 0 0 1], [0 0 1 0]
    )
```

Also `devel/sage/sage/libs/gap/libgap.pyx` (forgot to lazify):

```
sage -t --long devel/sage/sage/libs/gap/libgap.pyx
**********************************************************************
File "devel/sage/sage/libs/gap/libgap.pyx", line 460, in sage.libs.gap.libgap.Gap.__init__
Failed example:
    type(libgap)
Expected:
    <class 'sage.libs.gap.libgap.Gap'>
Got:
    <type 'sage.misc.lazy_import.LazyImport'>
```
And a number of similar failures in `devel/sage/sage/misc/lazy_import.pyx`.

I also get timeouts in `sage/sage/combinat/backtrack.py` and `sage/modular/arithgroup/arithgroup_perm.py`.



---

archive/issue_comments_166102.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe new doctesting framework doesn't seem to work with some of the `lazy_import` improvements in #14187. So  let's just forget about `trac_14187_lazy_everywhere.patch` for now. I also updated the other patch on #14187, as explained there.\n\nWith that and the updated patches all doctests pass (normal&long) again on sage-5.9.beta1",
    "created_at": "2013-03-26T14:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166102",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">comment:24</div>

The new doctesting framework doesn't seem to work with some of the `lazy_import` improvements in #14187. So  let's just forget about `trac_14187_lazy_everywhere.patch` for now. I also updated the other patch on #14187, as explained there.

With that and the updated patches all doctests pass (normal&long) again on sage-5.9.beta1



---

archive/issue_comments_166103.json:
```json
{
    "body": "Changed dependencies from **#14187, #14323** to **#14187, #14323, #14284**",
    "created_at": "2013-03-28T16:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166103",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#14187, #14323** to **#14187, #14323, #14284**



---

archive/issue_comments_166104.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nNeeds to be rebased for the upcoming sage-5.9.beta2 due to #14284",
    "created_at": "2013-03-28T16:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166104",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

Needs to be rebased for the upcoming sage-5.9.beta2 due to #14284



---

archive/issue_comments_166105.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,6 @@\n * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n+* Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)\n \n Follow-up: #14039.\n``````\n",
    "created_at": "2013-03-29T13:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166105",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,6 @@
 * Apply [attachment: trac_14014_deletions.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_deletions.patch.gz)
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
 * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
+* Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)
 
 Follow-up: #14039.
``````




---

archive/issue_comments_166106.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe last patch improves the iterator for matrix groups, see also http://tracker.gap-system.org/issues/369.\n\nNow all tests pass again on sage-5.9.beta2, including the new category code that checks consistency between `__iter__()` and  `list()`.",
    "created_at": "2013-03-29T13:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166106",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

The last patch improves the iterator for matrix groups, see also http://tracker.gap-system.org/issues/369.

Now all tests pass again on sage-5.9.beta2, including the new category code that checks consistency between `__iter__()` and  `list()`.



---

archive/issue_comments_166107.json:
```json
{
    "body": "Updated patch",
    "created_at": "2013-04-25T14:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166107",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_166108.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAttachment: **[trac_14014_parents_group_dependents.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)**\n\nRebased for the updated patch in #14187",
    "created_at": "2013-04-25T14:05:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166108",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

Attachment: **[trac_14014_parents_group_dependents.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)**

Rebased for the updated patch in #14187



---

archive/issue_comments_166109.json:
```json
{
    "body": "Attachment: **[trac_14014_parents_for_matrix_groups.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)**\n\nUpdated patch",
    "created_at": "2013-05-02T12:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166109",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_14014_parents_for_matrix_groups.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)**

Updated patch



---

archive/issue_comments_166110.json:
```json
{
    "body": "Updated patch",
    "created_at": "2013-05-02T12:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166110",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_166111.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAttachment: **[trac_14014_libgap_cyclotomic_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)**\n\nPatches rebased for sage-5.10.beta1",
    "created_at": "2013-05-02T13:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166111",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

Attachment: **[trac_14014_libgap_cyclotomic_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_libgap_cyclotomic_matrix.patch.gz)**

Patches rebased for sage-5.10.beta1



---

archive/issue_events_195069.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-14T05:16:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195069"
}
```



---

archive/issue_events_195070.json:
```json
{
    "actor": "https://github.com/SnarkBoojum",
    "created_at": "2013-05-14T05:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195070"
}
```



---

archive/issue_comments_166112.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\ntrac_14014_iterator.patch doesn't apply correctly in sage-5.10.beta2",
    "created_at": "2013-05-14T05:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166112",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:29" align="right">comment:29</div>

trac_14014_iterator.patch doesn't apply correctly in sage-5.10.beta2



---

archive/issue_comments_166113.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nWorks for me. Are you sure? The patchbot gets the order wrong as usual...\n\nPatchbot:\nApply trac_14014_libgap_cyclotomic_matrix.patch, trac_14014_deletions.patch, trac_14014_parents_for_matrix_groups.patch, trac_14014_parents_group_dependents.patch, trac_14014_iterator.patch",
    "created_at": "2013-05-14T08:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166113",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

Works for me. Are you sure? The patchbot gets the order wrong as usual...

Patchbot:
Apply trac_14014_libgap_cyclotomic_matrix.patch, trac_14014_deletions.patch, trac_14014_parents_for_matrix_groups.patch, trac_14014_parents_group_dependents.patch, trac_14014_iterator.patch



---

archive/issue_comments_166114.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAh, I got the order wrong ; they apply with only small fuzz now.\n\nNotice that I'm trying this with the packages and the patch from #14039 (with big fuzz) ; the compilation goes well, but I have failures in sage.games.quantumino:\n\n```\nRunning doctests with ID 2013-05-14-13-08-28-8b625de0.\nDoctesting 1 file.\nsage -t --long devel/sage/sage/games/quantumino.py\n**********************************************************************\nFile \"devel/sage/sage/games/quantumino.py\", line 82, in sage.games.quantumino\nFailed example:\n    for p in s: p                                   # long time (<1s)\nExpected:\n    Polyomino: [(0, 0, 0), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 2, 0)], Color: d\neeppink\n    Polyomino: [(0, 0, 1), (0, 1, 0), (0, 1, 1), (0, 2, 1), (1, 2, 1)], Color: d\neeppink\n    Polyomino: [(0, 2, 0), (0, 3, 0), (0, 4, 0), (1, 4, 0), (1, 4, 1)], Color: g\nreen\n    Polyomino: [(0, 3, 1), (1, 3, 1), (2, 2, 0), (2, 2, 1), (2, 3, 1)], Color: g\nreen\n    Polyomino: [(1, 3, 0), (2, 3, 0), (2, 4, 0), (2, 4, 1), (3, 4, 0)], Color: r\ned\n    Polyomino: [(1, 0, 1), (2, 0, 1), (2, 1, 0), (2, 1, 1), (3, 1, 1)], Color: r\ned\n    Polyomino: [(2, 0, 0), (3, 0, 0), (3, 0, 1), (3, 1, 0), (4, 0, 0)], Color: g\nray\n    Polyomino: [(3, 2, 0), (4, 0, 1), (4, 1, 0), (4, 1, 1), (4, 2, 0)], Color: p\nurple\n    Polyomino: [(3, 2, 1), (3, 3, 0), (3, 3, 1), (4, 2, 1), (4, 3, 1)], Color: y\nellow\n    Polyomino: [(3, 4, 1), (3, 5, 1), (4, 3, 0), (4, 4, 0), (4, 4, 1)], Color: b\nlue\n    Polyomino: [(0, 4, 1), (0, 5, 0), (0, 5, 1), (0, 6, 1), (1, 5, 0)], Color: m\nidnightblue\n    Polyomino: [(0, 6, 0), (0, 7, 0), (0, 7, 1), (1, 7, 0), (2, 7, 0)], Color: d\narkblue\n    Polyomino: [(1, 7, 1), (2, 6, 0), (2, 6, 1), (2, 7, 1), (3, 6, 0)], Color: b\nlue\n    Polyomino: [(1, 5, 1), (1, 6, 0), (1, 6, 1), (2, 5, 0), (2, 5, 1)], Color: y\nellow\n    Polyomino: [(3, 6, 1), (3, 7, 0), (3, 7, 1), (4, 5, 1), (4, 6, 1)], Color: p\nurple\n    Polyomino: [(3, 5, 0), (4, 5, 0), (4, 6, 0), (4, 7, 0), (4, 7, 1)], Color: o\nrange\nGot:\n    Polyomino: [(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 2, 0), (1, 1, 0)], Color: d\neeppink\n    Polyomino: [(0, 1, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: d\neeppink\n    Polyomino: [(0, 2, 1), (0, 3, 1), (0, 4, 0), (0, 4, 1), (1, 4, 0)], Color: g\nreen\n    Polyomino: [(0, 3, 0), (1, 3, 0), (2, 2, 1), (2, 3, 0), (2, 3, 1)], Color: g\nreen\n    Polyomino: [(1, 3, 1), (1, 4, 1), (2, 4, 0), (2, 4, 1), (2, 5, 1)], Color: r\ned\n    Polyomino: [(1, 0, 0), (2, 0, 0), (2, 0, 1), (2, 1, 1), (3, 0, 1)], Color: r\ned\n    Polyomino: [(2, 1, 0), (2, 2, 0), (3, 2, 0), (3, 2, 1), (3, 3, 1)], Color: b\nlue\n    Polyomino: [(3, 0, 0), (3, 1, 0), (4, 0, 0), (4, 0, 1), (4, 1, 0)], Color: y\nellow    Polyomino: [(3, 1, 1), (4, 1, 1), (4, 2, 0), (4, 2, 1), (4, 3, 0)], Color: p\nurple\n    Polyomino: [(3, 3, 0), (3, 4, 0), (3, 4, 1), (4, 3, 1), (4, 4, 1)], Color: yellow\n    Polyomino: [(3, 5, 1), (4, 4, 0), (4, 5, 0), (4, 5, 1), (4, 6, 0)], Color: midnightblue\n    Polyomino: [(2, 6, 1), (2, 7, 1), (3, 7, 0), (3, 7, 1), (4, 7, 0)], Color: purple\n    Polyomino: [(3, 5, 0), (3, 6, 0), (3, 6, 1), (4, 6, 1), (4, 7, 1)], Color: blue\n    Polyomino: [(0, 5, 0), (0, 5, 1), (0, 6, 0), (1, 5, 0), (2, 5, 0)], Color: darkblue\n    Polyomino: [(0, 7, 0), (0, 7, 1), (1, 7, 0), (2, 6, 0), (2, 7, 0)], Color: orange\n    Polyomino: [(0, 6, 1), (1, 5, 1), (1, 6, 0), (1, 6, 1), (1, 7, 1)], Color: gray\n**********************************************************************\n**********************************************************************\nFile \"devel/sage/sage/games/quantumino.py\", line 485, in sage.games.quantumino.Q\nuantuminoSolver.solve\nFailed example:\n    for p in s: p                                  # long time (fast)\nExpected:\n    Polyomino: [(0, 0, 0), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 2, 0)], Color: deeppink\n    Polyomino: [(0, 0, 1), (0, 1, 0), (0, 1, 1), (0, 2, 1), (1, 2, 1)], Color: deeppink\n    Polyomino: [(0, 2, 0), (0, 3, 0), (0, 4, 0), (1, 4, 0), (1, 4, 1)], Color: green\n    Polyomino: [(0, 3, 1), (1, 3, 1), (2, 2, 0), (2, 2, 1), (2, 3, 1)], Color: green\n    Polyomino: [(1, 3, 0), (2, 3, 0), (2, 4, 0), (2, 4, 1), (3, 4, 0)], Color: red\n    Polyomino: [(1, 0, 1), (2, 0, 0), (2, 0, 1), (2, 1, 0), (3, 0, 1)], Color: midnightblue\n    Polyomino: [(0, 4, 1), (0, 5, 0), (0, 5, 1), (0, 6, 0), (1, 5, 0)], Color: red\n    Polyomino: [(2, 1, 1), (3, 0, 0), (3, 1, 0), (3, 1, 1), (4, 0, 0)], Color: blue\n    Polyomino: [(3, 2, 0), (4, 0, 1), (4, 1, 0), (4, 1, 1), (4, 2, 0)], Color: purple\n    Polyomino: [(3, 2, 1), (3, 3, 0), (4, 2, 1), (4, 3, 0), (4, 3, 1)], Color: yellow\n    Polyomino: [(3, 3, 1), (3, 4, 1), (4, 4, 0), (4, 4, 1), (4, 5, 0)], Color: blue\n    Polyomino: [(0, 6, 1), (0, 7, 0), (0, 7, 1), (1, 5, 1), (1, 6, 1)], Color: purple\n    Polyomino: [(1, 6, 0), (1, 7, 0), (1, 7, 1), (2, 7, 0), (3, 7, 0)], Color: darkblue\n    Polyomino: [(2, 5, 0), (2, 6, 0), (3, 6, 0), (4, 6, 0), (4, 6, 1)], Color: orange\n    Polyomino: [(2, 5, 1), (3, 5, 0), (3, 5, 1), (3, 6, 1), (4, 5, 1)], Color: gray\n    Polyomino: [(2, 6, 1), (2, 7, 1), (3, 7, 1), (4, 7, 0), (4, 7, 1)], Color: orange\nGot:\n    Polyomino: [(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 2, 0), (1, 1, 0)], Color: deeppink\n    Polyomino: [(0, 1, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: deeppink\n    Polyomino: [(0, 2, 1), (0, 3, 1), (0, 4, 0), (0, 4, 1), (1, 4, 0)], Color: green\n    Polyomino: [(0, 3, 0), (1, 3, 0), (2, 2, 1), (2, 3, 0), (2, 3, 1)], Color: green\n    Polyomino: [(1, 3, 1), (1, 4, 1), (2, 4, 0), (2, 4, 1), (2, 5, 1)], Color: red\n    Polyomino: [(1, 0, 0), (2, 0, 0), (2, 0, 1), (2, 1, 1), (3, 0, 1)], Color: red\n    Polyomino: [(3, 0, 0), (4, 0, 0), (4, 0, 1), (4, 1, 0), (4, 2, 0)], Color: darkblue\n    Polyomino: [(2, 1, 0), (2, 2, 0), (3, 1, 0), (3, 1, 1), (4, 1, 1)], Color: purple\n    Polyomino: [(3, 2, 0), (3, 3, 0), (3, 3, 1), (3, 4, 0), (4, 3, 0)], Color: gray\n    Polyomino: [(3, 2, 1), (4, 2, 1), (4, 3, 1), (4, 4, 0), (4, 4, 1)], Color: orange\n    Polyomino: [(3, 4, 1), (3, 5, 1), (4, 5, 0), (4, 5, 1), (4, 6, 0)], Color: blue\n    Polyomino: [(3, 6, 0), (3, 7, 0), (4, 6, 1), (4, 7, 0), (4, 7, 1)], Color: yellow\n    Polyomino: [(1, 5, 0), (2, 5, 0), (2, 6, 0), (2, 6, 1), (3, 5, 0)], Color: midnightblue\n    Polyomino: [(1, 7, 0), (2, 7, 0), (2, 7, 1), (3, 6, 1), (3, 7, 1)], Color: purple\n    Polyomino: [(0, 5, 1), (0, 6, 1), (0, 7, 0), (0, 7, 1), (1, 5, 1)], Color: orange\n    Polyomino: [(0, 5, 0), (0, 6, 0), (1, 6, 0), (1, 6, 1), (1, 7, 1)], Color: blue\n**********************************************************************\n2 items had failures:\n   1 of  19 in sage.games.quantumino\n   1 of  13 in sage.games.quantumino.QuantuminoSolver.solve\n    [74 tests, 2 failures, 63.04 s]\n----------------------------------------------------------------------\nsage -t --long devel/sage/sage/games/quantumino.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 63.1 seconds\n    cpu time: 62.9 seconds\n    cumulative wall time: 63.0 seconds\n```\n(the other failures are in the quadratic forms and appear also with the base sage since 5.9)",
    "created_at": "2013-05-14T11:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166114",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:31" align="right">comment:31</div>

Ah, I got the order wrong ; they apply with only small fuzz now.

Notice that I'm trying this with the packages and the patch from #14039 (with big fuzz) ; the compilation goes well, but I have failures in sage.games.quantumino:

```
Running doctests with ID 2013-05-14-13-08-28-8b625de0.
Doctesting 1 file.
sage -t --long devel/sage/sage/games/quantumino.py
**********************************************************************
File "devel/sage/sage/games/quantumino.py", line 82, in sage.games.quantumino
Failed example:
    for p in s: p                                   # long time (<1s)
Expected:
    Polyomino: [(0, 0, 0), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 2, 0)], Color: d
eeppink
    Polyomino: [(0, 0, 1), (0, 1, 0), (0, 1, 1), (0, 2, 1), (1, 2, 1)], Color: d
eeppink
    Polyomino: [(0, 2, 0), (0, 3, 0), (0, 4, 0), (1, 4, 0), (1, 4, 1)], Color: g
reen
    Polyomino: [(0, 3, 1), (1, 3, 1), (2, 2, 0), (2, 2, 1), (2, 3, 1)], Color: g
reen
    Polyomino: [(1, 3, 0), (2, 3, 0), (2, 4, 0), (2, 4, 1), (3, 4, 0)], Color: r
ed
    Polyomino: [(1, 0, 1), (2, 0, 1), (2, 1, 0), (2, 1, 1), (3, 1, 1)], Color: r
ed
    Polyomino: [(2, 0, 0), (3, 0, 0), (3, 0, 1), (3, 1, 0), (4, 0, 0)], Color: g
ray
    Polyomino: [(3, 2, 0), (4, 0, 1), (4, 1, 0), (4, 1, 1), (4, 2, 0)], Color: p
urple
    Polyomino: [(3, 2, 1), (3, 3, 0), (3, 3, 1), (4, 2, 1), (4, 3, 1)], Color: y
ellow
    Polyomino: [(3, 4, 1), (3, 5, 1), (4, 3, 0), (4, 4, 0), (4, 4, 1)], Color: b
lue
    Polyomino: [(0, 4, 1), (0, 5, 0), (0, 5, 1), (0, 6, 1), (1, 5, 0)], Color: m
idnightblue
    Polyomino: [(0, 6, 0), (0, 7, 0), (0, 7, 1), (1, 7, 0), (2, 7, 0)], Color: d
arkblue
    Polyomino: [(1, 7, 1), (2, 6, 0), (2, 6, 1), (2, 7, 1), (3, 6, 0)], Color: b
lue
    Polyomino: [(1, 5, 1), (1, 6, 0), (1, 6, 1), (2, 5, 0), (2, 5, 1)], Color: y
ellow
    Polyomino: [(3, 6, 1), (3, 7, 0), (3, 7, 1), (4, 5, 1), (4, 6, 1)], Color: p
urple
    Polyomino: [(3, 5, 0), (4, 5, 0), (4, 6, 0), (4, 7, 0), (4, 7, 1)], Color: o
range
Got:
    Polyomino: [(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 2, 0), (1, 1, 0)], Color: d
eeppink
    Polyomino: [(0, 1, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: d
eeppink
    Polyomino: [(0, 2, 1), (0, 3, 1), (0, 4, 0), (0, 4, 1), (1, 4, 0)], Color: g
reen
    Polyomino: [(0, 3, 0), (1, 3, 0), (2, 2, 1), (2, 3, 0), (2, 3, 1)], Color: g
reen
    Polyomino: [(1, 3, 1), (1, 4, 1), (2, 4, 0), (2, 4, 1), (2, 5, 1)], Color: r
ed
    Polyomino: [(1, 0, 0), (2, 0, 0), (2, 0, 1), (2, 1, 1), (3, 0, 1)], Color: r
ed
    Polyomino: [(2, 1, 0), (2, 2, 0), (3, 2, 0), (3, 2, 1), (3, 3, 1)], Color: b
lue
    Polyomino: [(3, 0, 0), (3, 1, 0), (4, 0, 0), (4, 0, 1), (4, 1, 0)], Color: y
ellow    Polyomino: [(3, 1, 1), (4, 1, 1), (4, 2, 0), (4, 2, 1), (4, 3, 0)], Color: p
urple
    Polyomino: [(3, 3, 0), (3, 4, 0), (3, 4, 1), (4, 3, 1), (4, 4, 1)], Color: yellow
    Polyomino: [(3, 5, 1), (4, 4, 0), (4, 5, 0), (4, 5, 1), (4, 6, 0)], Color: midnightblue
    Polyomino: [(2, 6, 1), (2, 7, 1), (3, 7, 0), (3, 7, 1), (4, 7, 0)], Color: purple
    Polyomino: [(3, 5, 0), (3, 6, 0), (3, 6, 1), (4, 6, 1), (4, 7, 1)], Color: blue
    Polyomino: [(0, 5, 0), (0, 5, 1), (0, 6, 0), (1, 5, 0), (2, 5, 0)], Color: darkblue
    Polyomino: [(0, 7, 0), (0, 7, 1), (1, 7, 0), (2, 6, 0), (2, 7, 0)], Color: orange
    Polyomino: [(0, 6, 1), (1, 5, 1), (1, 6, 0), (1, 6, 1), (1, 7, 1)], Color: gray
**********************************************************************
**********************************************************************
File "devel/sage/sage/games/quantumino.py", line 485, in sage.games.quantumino.Q
uantuminoSolver.solve
Failed example:
    for p in s: p                                  # long time (fast)
Expected:
    Polyomino: [(0, 0, 0), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 2, 0)], Color: deeppink
    Polyomino: [(0, 0, 1), (0, 1, 0), (0, 1, 1), (0, 2, 1), (1, 2, 1)], Color: deeppink
    Polyomino: [(0, 2, 0), (0, 3, 0), (0, 4, 0), (1, 4, 0), (1, 4, 1)], Color: green
    Polyomino: [(0, 3, 1), (1, 3, 1), (2, 2, 0), (2, 2, 1), (2, 3, 1)], Color: green
    Polyomino: [(1, 3, 0), (2, 3, 0), (2, 4, 0), (2, 4, 1), (3, 4, 0)], Color: red
    Polyomino: [(1, 0, 1), (2, 0, 0), (2, 0, 1), (2, 1, 0), (3, 0, 1)], Color: midnightblue
    Polyomino: [(0, 4, 1), (0, 5, 0), (0, 5, 1), (0, 6, 0), (1, 5, 0)], Color: red
    Polyomino: [(2, 1, 1), (3, 0, 0), (3, 1, 0), (3, 1, 1), (4, 0, 0)], Color: blue
    Polyomino: [(3, 2, 0), (4, 0, 1), (4, 1, 0), (4, 1, 1), (4, 2, 0)], Color: purple
    Polyomino: [(3, 2, 1), (3, 3, 0), (4, 2, 1), (4, 3, 0), (4, 3, 1)], Color: yellow
    Polyomino: [(3, 3, 1), (3, 4, 1), (4, 4, 0), (4, 4, 1), (4, 5, 0)], Color: blue
    Polyomino: [(0, 6, 1), (0, 7, 0), (0, 7, 1), (1, 5, 1), (1, 6, 1)], Color: purple
    Polyomino: [(1, 6, 0), (1, 7, 0), (1, 7, 1), (2, 7, 0), (3, 7, 0)], Color: darkblue
    Polyomino: [(2, 5, 0), (2, 6, 0), (3, 6, 0), (4, 6, 0), (4, 6, 1)], Color: orange
    Polyomino: [(2, 5, 1), (3, 5, 0), (3, 5, 1), (3, 6, 1), (4, 5, 1)], Color: gray
    Polyomino: [(2, 6, 1), (2, 7, 1), (3, 7, 1), (4, 7, 0), (4, 7, 1)], Color: orange
Got:
    Polyomino: [(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 2, 0), (1, 1, 0)], Color: deeppink
    Polyomino: [(0, 1, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: deeppink
    Polyomino: [(0, 2, 1), (0, 3, 1), (0, 4, 0), (0, 4, 1), (1, 4, 0)], Color: green
    Polyomino: [(0, 3, 0), (1, 3, 0), (2, 2, 1), (2, 3, 0), (2, 3, 1)], Color: green
    Polyomino: [(1, 3, 1), (1, 4, 1), (2, 4, 0), (2, 4, 1), (2, 5, 1)], Color: red
    Polyomino: [(1, 0, 0), (2, 0, 0), (2, 0, 1), (2, 1, 1), (3, 0, 1)], Color: red
    Polyomino: [(3, 0, 0), (4, 0, 0), (4, 0, 1), (4, 1, 0), (4, 2, 0)], Color: darkblue
    Polyomino: [(2, 1, 0), (2, 2, 0), (3, 1, 0), (3, 1, 1), (4, 1, 1)], Color: purple
    Polyomino: [(3, 2, 0), (3, 3, 0), (3, 3, 1), (3, 4, 0), (4, 3, 0)], Color: gray
    Polyomino: [(3, 2, 1), (4, 2, 1), (4, 3, 1), (4, 4, 0), (4, 4, 1)], Color: orange
    Polyomino: [(3, 4, 1), (3, 5, 1), (4, 5, 0), (4, 5, 1), (4, 6, 0)], Color: blue
    Polyomino: [(3, 6, 0), (3, 7, 0), (4, 6, 1), (4, 7, 0), (4, 7, 1)], Color: yellow
    Polyomino: [(1, 5, 0), (2, 5, 0), (2, 6, 0), (2, 6, 1), (3, 5, 0)], Color: midnightblue
    Polyomino: [(1, 7, 0), (2, 7, 0), (2, 7, 1), (3, 6, 1), (3, 7, 1)], Color: purple
    Polyomino: [(0, 5, 1), (0, 6, 1), (0, 7, 0), (0, 7, 1), (1, 5, 1)], Color: orange
    Polyomino: [(0, 5, 0), (0, 6, 0), (1, 6, 0), (1, 6, 1), (1, 7, 1)], Color: blue
**********************************************************************
2 items had failures:
   1 of  19 in sage.games.quantumino
   1 of  13 in sage.games.quantumino.QuantuminoSolver.solve
    [74 tests, 2 failures, 63.04 s]
----------------------------------------------------------------------
sage -t --long devel/sage/sage/games/quantumino.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 63.1 seconds
    cpu time: 62.9 seconds
    cumulative wall time: 63.0 seconds
```
(the other failures are in the quadratic forms and appear also with the base sage since 5.9)



---

archive/issue_comments_166115.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI fixed the quantumin one. I don't get any doctest failures in quadratic forms.",
    "created_at": "2013-05-14T11:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166115",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

I fixed the quantumin one. I don't get any doctest failures in quadratic forms.



---

archive/issue_comments_166116.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOk, now it compiles and passes all tests except the quadratic forms ones (and those fail on this box anyway).\n\nI'm not sure I can give a positive review though: the patches change the result of many tests, and I have no idea if they really replace a correct value by another correct value...",
    "created_at": "2013-05-14T14:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166116",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:33" align="right">comment:33</div>

Ok, now it compiles and passes all tests except the quadratic forms ones (and those fail on this box anyway).

I'm not sure I can give a positive review though: the patches change the result of many tests, and I have no idea if they really replace a correct value by another correct value...



---

archive/issue_comments_166117.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nMost of the doctests are unchanged, they just moved around when reorganizing the code. The ones that do change are generally trivial, like the order of group elements returned. Only very few are non-trivial (like the quantumino one), and there the corresponding Sage module already does checks. Has anybody ever verified by hand that the quantumino puzzle has 5484 distinct solutions?",
    "created_at": "2013-05-14T14:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166117",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

Most of the doctests are unchanged, they just moved around when reorganizing the code. The ones that do change are generally trivial, like the order of group elements returned. Only very few are non-trivial (like the quantumino one), and there the corresponding Sage module already does checks. Has anybody ever verified by hand that the quantumino puzzle has 5484 distinct solutions?



---

archive/issue_events_195071.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-14T17:05:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195071"
}
```



---

archive/issue_events_195072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-14T17:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195072"
}
```



---

archive/issue_comments_166118.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHey Volker,\n\nWith some of the patches merged in `5.10.beta4` (I'm pretty sure it's #4327), the patchbot is saying there is a (trivial) doctest failure in `root_lattice_realization.py`. It should be because the order of the group elements changed.\n\nAlso in `groups/matrix_gps/catalog.py`, could you give the file a proper title line (the first docstring line) in case at some point we include the file in the documentation?\n\nVolker, do you remember what other tests were non-trivial changes? I'm cc-ing Sebastien Labbe since the quantumino code was originally written by him.\n\nThanks,\n\nTravis",
    "created_at": "2013-05-24T20:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166118",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:36" align="right">comment:36</div>

Hey Volker,

With some of the patches merged in `5.10.beta4` (I'm pretty sure it's #4327), the patchbot is saying there is a (trivial) doctest failure in `root_lattice_realization.py`. It should be because the order of the group elements changed.

Also in `groups/matrix_gps/catalog.py`, could you give the file a proper title line (the first docstring line) in case at some point we include the file in the documentation?

Volker, do you remember what other tests were non-trivial changes? I'm cc-ing Sebastien Labbe since the quantumino code was originally written by him.

Thanks,

Travis



---

archive/issue_comments_166119.json:
```json
{
    "body": "Changed dependencies from **#14187, #14323, #14284** to **#14187, #14323, #14284, #14640**",
    "created_at": "2013-05-25T11:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166119",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#14187, #14323, #14284** to **#14187, #14323, #14284, #14640**



---

archive/issue_comments_166120.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI've fixed the text output to doctest graphics in #14640. In particular this takes care of the doctest failure in `root_lattice_realization` by printing sorted plot objects.\n\nRediffed last patch for fuzz.",
    "created_at": "2013-05-25T11:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166120",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

I've fixed the text output to doctest graphics in #14640. In particular this takes care of the doctest failure in `root_lattice_realization` by printing sorted plot objects.

Rediffed last patch for fuzz.



---

archive/issue_comments_166121.json:
```json
{
    "body": "Attachment: **[trac_14014_iterator.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)**\n\nUpdated patch",
    "created_at": "2013-05-25T11:33:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166121",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_14014_iterator.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)**

Updated patch



---

archive/issue_comments_166122.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI don't think there are any non-trival doctest changes. In particular I don't do any non-trivial group theory, everything is punted to GAP and the GAP output is then used. The enumeration of group elements changed as required by the new category consistency check between `__iter__` and `list()` so there is no mystery that individual group elements arrive in different order now. The total number is still the same so unless there is some HUGE bug in GAP this is an equally correct answer.",
    "created_at": "2013-05-25T11:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166122",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>

I don't think there are any non-trival doctest changes. In particular I don't do any non-trivial group theory, everything is punted to GAP and the GAP output is then used. The enumeration of group elements changed as required by the new category consistency check between `__iter__` and `list()` so there is no mystery that individual group elements arrive in different order now. The total number is still the same so unless there is some HUGE bug in GAP this is an equally correct answer.



---

archive/issue_comments_166123.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nSo then the change the quantumino output should be correct. The change just seems non-trivial to me. Sebastien, could you take a look at it just as a double-check?\n\nVolker, a few more things on the patch.\n\n* `matrix_gps/pickling_overrides.py` is missing a doctest for the last `__setstate__()`.\n* Would it be possible to not import `libs.gap*` at startup?\n* (more trivial), could you change the line continuation on line 260 of `matrix_gps/finitely_generated.py` to the new `....:`?\n\nThanks,\n\nTravis",
    "created_at": "2013-05-25T16:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166123",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

So then the change the quantumino output should be correct. The change just seems non-trivial to me. Sebastien, could you take a look at it just as a double-check?

Volker, a few more things on the patch.

* `matrix_gps/pickling_overrides.py` is missing a doctest for the last `__setstate__()`.
* Would it be possible to not import `libs.gap*` at startup?
* (more trivial), could you change the line continuation on line 260 of `matrix_gps/finitely_generated.py` to the new `....:`?

Thanks,

Travis



---

archive/issue_comments_166124.json:
```json
{
    "body": "Attachment: **[trac_14014_misc.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)**\n\nInitial patch",
    "created_at": "2013-05-25T17:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166124",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_14014_misc.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)**

Initial patch



---

archive/issue_comments_166125.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,6 @@\n * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)\n * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n * Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)\n+* Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)\n \n Follow-up: #14039.\n``````\n",
    "created_at": "2013-05-25T17:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166125",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,6 @@
 * Apply [attachment: trac_14014_parents_for_matrix_groups.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_for_matrix_groups.patch.gz)
 * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
 * Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)
+* Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)
 
 Follow-up: #14039.
``````




---

archive/issue_comments_166126.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nLibgap is not imported upon startup (it would raise an error if you tried).",
    "created_at": "2013-05-25T17:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166126",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">comment:41</div>

Libgap is not imported upon startup (it would raise an error if you tried).



---

archive/issue_comments_166127.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,6 @@\n * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)\n * Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)\n * Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)\n+* Apply [attachment: trac_14014-review-ts.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)\n \n Follow-up: #14039.\n``````\n",
    "created_at": "2013-05-28T07:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166127",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,6 @@
 * Apply [attachment: trac_14014_parents_group_dependents.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_parents_group_dependents.patch.gz)
 * Apply [attachment: trac_14014_iterator.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_iterator.patch.gz)
 * Apply [attachment: trac_14014_misc.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014_misc.patch.gz)
+* Apply [attachment: trac_14014-review-ts.patch](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)
 
 Follow-up: #14039.
``````




---

archive/issue_comments_166128.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHey Volker,\n\nI was talking about the modules `libs.gap.*`, in particular the one which triggers the rest is `libs.gap.element`. However by lazily importing this, I ended up getting errors, so I don't think we can get around this (plus it's not really a big import or a significant slowdown to startup time). I'd guess this is related to #14357, but it's definitely not worth holding this ticket up.\n\nAnyways, I've uploaded a small reviewer patch which does some minor to trivial docstring changes to methods that are being moved around by this patch. If you're happy with my tweaks, I think we can set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-05-28T07:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166128",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Hey Volker,

I was talking about the modules `libs.gap.*`, in particular the one which triggers the rest is `libs.gap.element`. However by lazily importing this, I ended up getting errors, so I don't think we can get around this (plus it's not really a big import or a significant slowdown to startup time). I'd guess this is related to #14357, but it's definitely not worth holding this ticket up.

Anyways, I've uploaded a small reviewer patch which does some minor to trivial docstring changes to methods that are being moved around by this patch. If you're happy with my tweaks, I think we can set this to positive review.

Best,

Travis



---

archive/issue_comments_166129.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nLet me clarify: Importing libgap is rather slow right now since it does not use the cached GAP workspace. But the matrix groups that use libgap are already lazily imported, so libgap is not loaded on startup even if some files have a non-lazy libgap import. #14187 ensures that an error will be printed if you were to actually import libgap during startup.",
    "created_at": "2013-05-28T09:50:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166129",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:43" align="right">comment:43</div>

Let me clarify: Importing libgap is rather slow right now since it does not use the cached GAP workspace. But the matrix groups that use libgap are already lazily imported, so libgap is not loaded on startup even if some files have a non-lazy libgap import. #14187 ensures that an error will be printed if you were to actually import libgap during startup.



---

archive/issue_comments_166130.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI agree that there are some unnecessary modules imported (though not libgap as a whole), I created #14652 to deal with them.",
    "created_at": "2013-05-28T11:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166130",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">comment:44</div>

I agree that there are some unnecessary modules imported (though not libgap as a whole), I created #14652 to deal with them.



---

archive/issue_comments_166131.json:
```json
{
    "body": "Changed reviewer from **David Roe** to **Travis Scrimshaw**",
    "created_at": "2013-05-28T11:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166131",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **David Roe** to **Travis Scrimshaw**



---

archive/issue_events_195073.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T11:47:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195073"
}
```



---

archive/issue_events_195074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T11:47:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195074"
}
```



---

archive/issue_comments_166132.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nreviewer patch looks good to me",
    "created_at": "2013-05-28T11:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166132",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">comment:45</div>

reviewer patch looks good to me



---

archive/issue_events_195075.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-28T11:48:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195075"
}
```



---

archive/issue_events_195076.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-28T11:48:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195076"
}
```



---

archive/issue_comments_166133.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nDocumentation trouble:\n\n```\ndochtml.log:[groups   ] /mazur/release/merger/sage-5.11.beta0/devel/sage/doc/en/reference/groups/sage/groups/matrix_gps/matrix_group_morphism.rst:11: WARNING: autodoc can't import/find module 'sage.groups.matrix_gps.matrix_group_morphism', it reported error: \"No module named matrix_group_morphism\", please check your spelling and sys.path\n```\n\nNote also the patchbot saying (but I don't know how reliable this is):\n\n```\nWith 99.9% confidence, startup time increased by at least 0.1%\n```",
    "created_at": "2013-05-28T17:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166133",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Documentation trouble:

```
dochtml.log:[groups   ] /mazur/release/merger/sage-5.11.beta0/devel/sage/doc/en/reference/groups/sage/groups/matrix_gps/matrix_group_morphism.rst:11: WARNING: autodoc can't import/find module 'sage.groups.matrix_gps.matrix_group_morphism', it reported error: "No module named matrix_group_morphism", please check your spelling and sys.path
```

Note also the patchbot saying (but I don't know how reliable this is):

```
With 99.9% confidence, startup time increased by at least 0.1%
```



---

archive/issue_events_195077.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-28T17:56:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195077"
}
```



---

archive/issue_events_195078.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-28T17:56:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195078"
}
```



---

archive/issue_comments_166134.json:
```json
{
    "body": "Attachment: **[trac_14014-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)**",
    "created_at": "2013-05-28T21:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166134",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_14014-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket14014/trac_14014-review-ts.patch.gz)**



---

archive/issue_events_195079.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-28T22:05:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195079"
}
```



---

archive/issue_events_195080.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-28T22:05:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195080"
}
```



---

archive/issue_comments_166135.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nNew version of the review patch which fixes the doc issue. The file was renamed but not changed in the rst file.",
    "created_at": "2013-05-28T22:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166135",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

New version of the review patch which fixes the doc issue. The file was renamed but not changed in the rst file.



---

archive/issue_comments_166136.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nAlso, the slightly slower startup time will be addressed in #14652",
    "created_at": "2013-05-29T12:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166136",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">comment:49</div>

Also, the slightly slower startup time will be addressed in #14652



---

archive/issue_comments_166137.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@vbraun](#comment:34):\n> Only very few are non-trivial (like the quantumino one)\n\nI checked the patch fixing non-trivial doctest for the quantumino code, and it is ok. The ordering of the matrices changed the ordering of rotated copies of polyominos, which changed the ordering of the rows passed to the dlx solver, which explains the doctest update for the list of rows indices (a solution is given as a subset of rows).\n\n>, and there the corresponding Sage module already does checks. Has anybody ever verified by hand that the quantumino puzzle has 5484 distinct solutions?\n\nThe related doctest is the following one :\n\n```\n    sage: q = QuantuminoSolver(0)\n    sage: T = q.tiling_solver()\n    sage: rows = T.rows()                            # not tested (10 s)\n    sage: len(rows)                                  # not tested (but fast)\n    5484\n```\n\nThis is not the number of solutions. 5484 is the number of rows (of a matrix) given to the dlx solver. The number of solutions of the Quantumino game when one block is chosen aside is counted in the order of `10^9`. On my machine I estimated the following line to take one month :\n\n```\n    sage: T.number_of_solutions()\n```\n\nI never run it enough time to get the result...",
    "created_at": "2013-06-02T21:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166137",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@vbraun](#comment:34):
> Only very few are non-trivial (like the quantumino one)

I checked the patch fixing non-trivial doctest for the quantumino code, and it is ok. The ordering of the matrices changed the ordering of rotated copies of polyominos, which changed the ordering of the rows passed to the dlx solver, which explains the doctest update for the list of rows indices (a solution is given as a subset of rows).

>, and there the corresponding Sage module already does checks. Has anybody ever verified by hand that the quantumino puzzle has 5484 distinct solutions?

The related doctest is the following one :

```
    sage: q = QuantuminoSolver(0)
    sage: T = q.tiling_solver()
    sage: rows = T.rows()                            # not tested (10 s)
    sage: len(rows)                                  # not tested (but fast)
    5484
```

This is not the number of solutions. 5484 is the number of rows (of a matrix) given to the dlx solver. The number of solutions of the Quantumino game when one block is chosen aside is counted in the order of `10^9`. On my machine I estimated the following line to take one month :

```
    sage: T.number_of_solutions()
```

I never run it enough time to get the result...



---

archive/issue_comments_166138.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nThanks for checking this Sebastien.",
    "created_at": "2013-06-05T14:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166138",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:51" align="right">comment:51</div>

Thanks for checking this Sebastien.



---

archive/issue_comments_166139.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n\n```\nsage: T.number_of_solutions()   # very long time\n```",
    "created_at": "2013-06-05T14:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166139",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">comment:52</div>


```
sage: T.number_of_solutions()   # very long time
```



---

archive/issue_events_195081.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-06T12:32:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195081"
}
```



---

archive/issue_events_195082.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-06T12:32:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14014#event-195082"
}
```



---

archive/issue_comments_166140.json:
```json
{
    "body": "Merged: **sage-5.11.beta0**",
    "created_at": "2013-06-06T12:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14014",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14014#issuecomment-166140",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.11.beta0**
