# Issue 14619: Test if a graph is distance-regular

archive/issues_014415.json:
```json
{
    "body": "Nothing more that what the title says !\n\nNathann\n\nApply:\n* [attachment:14619.patch]\n* [attachment:14619-rev.patch]\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  @dimpase azi @lobiCode\n\n**Keywords:** distance\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Nathann Cohen\n\n**Merged:** sage-5.12.beta5\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14619\n\n",
    "closed_at": "2013-09-04T08:06:22Z",
    "created_at": "2013-05-20T12:59:36Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Test if a graph is distance-regular",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14619",
    "user": "https://github.com/nathanncohen"
}
```
Nothing more that what the title says !

Nathann

Apply:
* [attachment:14619.patch]
* [attachment:14619-rev.patch]

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  @dimpase azi @lobiCode

**Keywords:** distance

**Reviewer:** Frédéric Chapoton

**Author:** Nathann Cohen

**Merged:** sage-5.12.beta5

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14619





---

archive/issue_comments_232887.json:
```json
{
    "body": "<a id='comment:1'></a>\nNetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?\n\nAlso is there a chance we would want to have a certificate for this function as well?",
    "created_at": "2013-05-20T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232887",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:1'></a>
NetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?

Also is there a chance we would want to have a certificate for this function as well?



---

archive/issue_comments_232888.json:
```json
{
    "body": "<a id='comment:2'></a>\nYoooooooooo !\n\n> NetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?\n\n\nOh ? Well, I would be surprised if NetworkX could beat us for these distance functions\n\n> Also is there a chance we would want to have a certificate for this function as well?\n\n\nI don't see one. What could be a good certificate ? `O_o`\n\nNathann",
    "created_at": "2013-05-20T13:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232888",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
Yoooooooooo !

> NetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?


Oh ? Well, I would be surprised if NetworkX could beat us for these distance functions

> Also is there a chance we would want to have a certificate for this function as well?


I don't see one. What could be a good certificate ? `O_o`

Nathann



---

archive/issue_comments_232889.json:
```json
{
    "body": "<a id='comment:3'></a>\nYeah. Precisely `:-P`\n\n```\nsage: import networkx                 \nsage: g = graphs.CubeGraph(9)         \nsage: gn = g.networkx_graph()         \nsage: %time g.is_distance_regular()   \nCPU times: user 0.03 s, sys: 0.00 s, total: 0.03 s\nWall time: 0.04 s\nTrue\nsage: networkx.is_distance_regular(gn)\nTrue\nsage: %time networkx.is_distance_regular(gn)\nCPU times: user 2.18 s, sys: 0.02 s, total: 2.20 s\nWall time: 2.20 s\nTrue\n```\n\nNathann",
    "created_at": "2013-05-20T13:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232889",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
Yeah. Precisely `:-P`

```
sage: import networkx                 
sage: g = graphs.CubeGraph(9)         
sage: gn = g.networkx_graph()         
sage: %time g.is_distance_regular()   
CPU times: user 0.03 s, sys: 0.00 s, total: 0.03 s
Wall time: 0.04 s
True
sage: networkx.is_distance_regular(gn)
True
sage: %time networkx.is_distance_regular(gn)
CPU times: user 2.18 s, sys: 0.02 s, total: 2.20 s
Wall time: 2.20 s
True
```

Nathann



---

archive/issue_comments_232890.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-05-20T13:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232890",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_232891.json:
```json
{
    "body": "<a id='comment:5'></a>\nNice!\n\nWell for the certificate.. Perhaps not really a certificate but a distance partition.",
    "created_at": "2013-05-20T13:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232891",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:5'></a>
Nice!

Well for the certificate.. Perhaps not really a certificate but a distance partition.



---

archive/issue_comments_232892.json:
```json
{
    "body": "<a id='comment:6'></a>\n> Well for the certificate.. Perhaps not really a certificate but a distance partition.\n\n\nA distance partition ? `O_o`\n\nWhat do you mean ? You can already get the distribution of distances with ``parameters=True``, but I don't see what else we could return...\n\nNathann",
    "created_at": "2013-05-20T13:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232892",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
> Well for the certificate.. Perhaps not really a certificate but a distance partition.


A distance partition ? `O_o`

What do you mean ? You can already get the distribution of distances with ``parameters=True``, but I don't see what else we could return...

Nathann



---

archive/issue_comments_232893.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [azi](#comment%3A1):\n> NetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?\n> \n> Also is there a chance we would want to have a certificate for this function as well?\n\n\nwhat do you mean by \"certificate\"?\n\nThere is in fact an algebraic certificate of distance regularity, that is, the adjacency matrix A_k of the distance k graph of the original graph G is a polynomial in A_1 (the adjacency matrix of G). And these polynomials can be computed from the \"intersection arrays\". But that's a long story.",
    "created_at": "2013-05-20T13:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232893",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
Replying to [azi](#comment%3A1):
> NetworkX should have a pretty decent test for distance regular graphs. Could you perhaps just verify the performance of yours vs NetworkX?
> 
> Also is there a chance we would want to have a certificate for this function as well?


what do you mean by "certificate"?

There is in fact an algebraic certificate of distance regularity, that is, the adjacency matrix A_k of the distance k graph of the original graph G is a polynomial in A_1 (the adjacency matrix of G). And these polynomials can be computed from the "intersection arrays". But that's a long story.



---

archive/issue_comments_232894.json:
```json
{
    "body": "<a id='comment:8'></a>\n> what do you mean by \"certificate\"?\n\n\nWell, usually it is some short data which proves that the result returned is valid. Formally, I think that it is only defined for NP-Hard problems, but well...\n\n> There is in fact an algebraic certificate of distance regularity, that is, the adjacency matrix A_k of the distance k graph of the original graph G is a polynomial in A_1 (the adjacency matrix of G). And these polynomials can be computed from the \"intersection arrays\". But that's a long story.\n\n\nWell, that would fit the definition I guess. But I wouldn't know what to make of it `:-P`\n\nNathann",
    "created_at": "2013-05-20T13:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232894",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
> what do you mean by "certificate"?


Well, usually it is some short data which proves that the result returned is valid. Formally, I think that it is only defined for NP-Hard problems, but well...

> There is in fact an algebraic certificate of distance regularity, that is, the adjacency matrix A_k of the distance k graph of the original graph G is a polynomial in A_1 (the adjacency matrix of G). And these polynomials can be computed from the "intersection arrays". But that's a long story.


Well, that would fit the definition I guess. But I wouldn't know what to make of it `:-P`

Nathann



---

archive/issue_comments_232895.json:
```json
{
    "body": "<a id='comment:9'></a>\nFrom what I know the guys doing distance-regular graphs they use to write \"bubbles.\" They pick a vertex v which is the first \"bubble\", then they take the neighborhood of v to be the second bubble and then the neighbors at distance 3 from $v$ and so on...",
    "created_at": "2013-05-20T16:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232895",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:9'></a>
From what I know the guys doing distance-regular graphs they use to write "bubbles." They pick a vertex v which is the first "bubble", then they take the neighborhood of v to be the second bubble and then the neighbors at distance 3 from $v$ and so on...



---

archive/issue_comments_232896.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [azi](#comment%3A9):\n> From what I know the guys doing distance-regular graphs they use to write \"bubbles.\" They pick a vertex v which is the first \"bubble\", then they take the neighborhood of v to be the second bubble and then the neighbors at distance 3 from $v$ and so on... \n\n\nsure, one not only wants to know whether the graph is distance regular, but also its parameters\n(analog of k, lambda, mu for strongly regular graphs). E.g. GRAPE, a GAP package, does the following:\nhttp://www.maths.qmul.ac.uk/~leonard/grape/manual/CHAP004.htm#SECT002\n(see `GlobalParameters()`).\nAnd you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?",
    "created_at": "2013-05-20T22:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232896",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
Replying to [azi](#comment%3A9):
> From what I know the guys doing distance-regular graphs they use to write "bubbles." They pick a vertex v which is the first "bubble", then they take the neighborhood of v to be the second bubble and then the neighbors at distance 3 from $v$ and so on... 


sure, one not only wants to know whether the graph is distance regular, but also its parameters
(analog of k, lambda, mu for strongly regular graphs). E.g. GRAPE, a GAP package, does the following:
http://www.maths.qmul.ac.uk/~leonard/grape/manual/CHAP004.htm#SECT002
(see `GlobalParameters()`).
And you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?



---

archive/issue_comments_232897.json:
```json
{
    "body": "<a id='comment:11'></a>\nYoooooooooo !\n\n> And you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?\n\n\nIt is already available in the patch\n\n```\nsage: graphs.CubeGraph(4).is_distance_regular(parameters = True)\n{1: 4, 2: 6, 3: 4, 4: 1}\n```\n\nnathann",
    "created_at": "2013-05-21T07:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232897",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
Yoooooooooo !

> And you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?


It is already available in the patch

```
sage: graphs.CubeGraph(4).is_distance_regular(parameters = True)
{1: 4, 2: 6, 3: 4, 4: 1}
```

nathann



---

archive/issue_comments_232898.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [ncohen](#comment%3A11):\n> Yoooooooooo !\n> \n> > And you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?\n\n> \n> It is already available in the patch\n> \n> ```\n> sage: graphs.CubeGraph(4).is_distance_regular(parameters = True)\n> {1: 4, 2: 6, 3: 4, 4: 1}\n> ```\n> \n\n\nand how about `local parameters`: i.e. computing parameters w.r.t. just 1 vertex?\nThis would also allow to return a certificate of non-distance-regularity, i.e. either a vertex for which parameters don't exist, or two vertices with different parameters (for the latter, you can test on complete bipartite graphs with parts of unequal size).",
    "created_at": "2013-05-21T07:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232898",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
Replying to [ncohen](#comment%3A11):
> Yoooooooooo !
> 
> > And you have this kind of info when checking distance regularity anyway, so why not have a corresponding function?

> 
> It is already available in the patch
> 
> ```
> sage: graphs.CubeGraph(4).is_distance_regular(parameters = True)
> {1: 4, 2: 6, 3: 4, 4: 1}
> ```
> 


and how about `local parameters`: i.e. computing parameters w.r.t. just 1 vertex?
This would also allow to return a certificate of non-distance-regularity, i.e. either a vertex for which parameters don't exist, or two vertices with different parameters (for the latter, you can test on complete bipartite graphs with parts of unequal size).



---

archive/issue_comments_232899.json:
```json
{
    "body": "<a id='comment:13'></a>\n> and how about `local parameters`: i.e. computing parameters w.r.t. just 1 vertex?\n> This would also allow to return a certificate of non-distance-regularity, i.e. either a vertex for which parameters don't exist, or two vertices with different parameters (for the latter, you can test on complete bipartite graphs with parts of unequal size).\n\n\nOh. Well, we do not have a \"distance all vertices\" method at Python level, which would return the kind of information you want, though we have it in the backends\n\nhttp://www.sagemath.org/doc/reference/graphs/sage/graphs/base/c_graph.html#sage.graphs.base.c_graph.CGraphBackend.shortest_path_all_vertices\n\nWe could return as a NO-certificate a pair of vertices that do not have the same \"local parameters\", as you say. And I would probably change the output so that it returns a pair, `(True/False, certificate)` instead.\n\nDo you think that it would be useful to expose this `distance_all_vertices` method at Python level ? And/or only `shortest_path_all_vertices` ? I don't really like it myself, but if you think that it would be useful ...\n\nNathann",
    "created_at": "2013-05-21T08:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232899",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
> and how about `local parameters`: i.e. computing parameters w.r.t. just 1 vertex?
> This would also allow to return a certificate of non-distance-regularity, i.e. either a vertex for which parameters don't exist, or two vertices with different parameters (for the latter, you can test on complete bipartite graphs with parts of unequal size).


Oh. Well, we do not have a "distance all vertices" method at Python level, which would return the kind of information you want, though we have it in the backends

http://www.sagemath.org/doc/reference/graphs/sage/graphs/base/c_graph.html#sage.graphs.base.c_graph.CGraphBackend.shortest_path_all_vertices

We could return as a NO-certificate a pair of vertices that do not have the same "local parameters", as you say. And I would probably change the output so that it returns a pair, `(True/False, certificate)` instead.

Do you think that it would be useful to expose this `distance_all_vertices` method at Python level ? And/or only `shortest_path_all_vertices` ? I don't really like it myself, but if you think that it would be useful ...

Nathann



---

archive/issue_events_047989.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14619#event-47989"
}
```



---

archive/issue_comments_232900.json:
```json
{
    "body": "<a id='comment:15'></a>\nok, looks almost good to me (with my rather basic cython understanding)\n\na few details:\n\n* needs to be rebased (HUNK)\n* a typo in the doc `;;` instead of `::`\n* the function does not give the correct result for the connected graph with 2 vertices\n* you should say in the doc that distance-regular means **regular** + the distance condition\n* missing spaces before and after `==`",
    "created_at": "2013-08-29T12:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232900",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
ok, looks almost good to me (with my rather basic cython understanding)

a few details:

* needs to be rebased (HUNK)
* a typo in the doc `;;` instead of `::`
* the function does not give the correct result for the connected graph with 2 vertices
* you should say in the doc that distance-regular means **regular** + the distance condition
* missing spaces before and after `==`



---

archive/issue_comments_232901.json:
```json
{
    "body": "<a id='comment:16'></a>\nYoooooooooooooo !!\n\n> * needs to be rebased (HUNK)\n\n\nDone !\n\n> * a typo in the doc `;;` instead of `::`\n\n\nDone !\n\n> * the function does not give the correct result for the connected graph with 2 vertices\n\n\nDone ! It was enough to change the `<= 2` to a `<= 1` in the beginning `;-)`\n\n> * you should say in the doc that distance-regular means **regular** + the distance condition\n\n\nWell, regularity is implied by distance regularity, for if a graph is distance-regular all vertices have \"the same number of vertices at distance 1\" (i.e. neighbors). I made that clear in an additional sentence of documentation.\n\n> * missing spaces before and after `==`\n\n\nFixed. In the whole file.\n\nI also noticed that there was an ugly segfault produced when the graph was disconnected. In this case, the \"distance\" between the two vertices is reported as 65536, but I try to write that in a the 65536th cell of a C array that may be much shorter. I began to write a proper fix to only run this method on connected graphs, and the method would have called itself on each connected component if the graph was not connected from the beginning, but I gave up this approach as it wouldd have added 15 lines of \"details\" to a code which isn't that clear already. Hence I chosed the lazy approach, which thanks to branch prediction in our CPU may not be that bad.\n\nAnd it can be changed, if this is a problem later on.\n\nHere it is ! Former rebased patch, and the answer to your remarks.\n\nThaaaaaaaaaanks !\n\nNathann",
    "created_at": "2013-08-29T12:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232901",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Yoooooooooooooo !!

> * needs to be rebased (HUNK)


Done !

> * a typo in the doc `;;` instead of `::`


Done !

> * the function does not give the correct result for the connected graph with 2 vertices


Done ! It was enough to change the `<= 2` to a `<= 1` in the beginning `;-)`

> * you should say in the doc that distance-regular means **regular** + the distance condition


Well, regularity is implied by distance regularity, for if a graph is distance-regular all vertices have "the same number of vertices at distance 1" (i.e. neighbors). I made that clear in an additional sentence of documentation.

> * missing spaces before and after `==`


Fixed. In the whole file.

I also noticed that there was an ugly segfault produced when the graph was disconnected. In this case, the "distance" between the two vertices is reported as 65536, but I try to write that in a the 65536th cell of a C array that may be much shorter. I began to write a proper fix to only run this method on connected graphs, and the method would have called itself on each connected component if the graph was not connected from the beginning, but I gave up this approach as it wouldd have added 15 lines of "details" to a code which isn't that clear already. Hence I chosed the lazy approach, which thanks to branch prediction in our CPU may not be that bad.

And it can be changed, if this is a problem later on.

Here it is ! Former rebased patch, and the answer to your remarks.

Thaaaaaaaaaanks !

Nathann



---

archive/issue_comments_232902.json:
```json
{
    "body": "<a id='comment:17'></a>\nalmost good to go. I would like this function to appear in the doc !",
    "created_at": "2013-08-29T15:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232902",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
almost good to go. I would like this function to appear in the doc !



---

archive/issue_comments_232903.json:
```json
{
    "body": "<a id='comment:18'></a>\n> almost good to go. I would like this function to appear in the doc !\n\n\nYeah ?... Well it does, doesn't it ?\n\nNathann",
    "created_at": "2013-08-29T15:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232903",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
> almost good to go. I would like this function to appear in the doc !


Yeah ?... Well it does, doesn't it ?

Nathann



---

archive/issue_comments_232904.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"distance\".",
    "created_at": "2013-08-29T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232904",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "distance".



---

archive/issue_comments_232905.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n Nothing more that what the title says !\n \n Nathann\n+\n+Apply:\n+* [attachment:trac_14619.patch]\n+* [attachment:trac_14619-rev.patch]\n``````\n",
    "created_at": "2013-08-29T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232905",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 Nothing more that what the title says !
 
 Nathann
+
+Apply:
+* [attachment:trac_14619.patch]
+* [attachment:trac_14619-rev.patch]
``````




---

archive/issue_comments_232906.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-08-29T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232906",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_232907.json:
```json
{
    "body": "<a id='comment:19'></a>\nok, I have found it in undirected graphs documentation\n\nI am giving a positive review, not waiting for the bot to do its job.",
    "created_at": "2013-08-29T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232907",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>
ok, I have found it in undirected graphs documentation

I am giving a positive review, not waiting for the bot to do its job.



---

archive/issue_comments_232908.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2013-08-29T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232908",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_232909.json:
```json
{
    "body": "<a id='comment:20'></a>\nCool. Thaaaaaaaaaaaaaaaaaanks ! `:-)`\n\nNathann",
    "created_at": "2013-08-29T16:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232909",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
Cool. Thaaaaaaaaaaaaaaaaaanks ! `:-)`

Nathann



---

archive/issue_comments_232910.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,5 @@\n Nathann\n \n Apply:\n-* [attachment:trac_14619.patch]\n-* [attachment:trac_14619-rev.patch]\n+* [attachment: trac_14619.patch]\n+* [attachment: trac_14619-rev.patch]\n``````\n",
    "created_at": "2013-08-29T16:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232910",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,5 @@
 Nathann
 
 Apply:
-* [attachment:trac_14619.patch]
-* [attachment:trac_14619-rev.patch]
+* [attachment: trac_14619.patch]
+* [attachment: trac_14619-rev.patch]
``````




---

archive/issue_comments_232911.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,5 @@\n Nathann\n \n Apply:\n-* [attachment: trac_14619.patch]\n-* [attachment: trac_14619-rev.patch]\n+* [attachment:trac_14619.patch]\n+* [attachment:trac_14619-rev.patch]\n``````\n",
    "created_at": "2013-08-30T08:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232911",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,5 @@
 Nathann
 
 Apply:
-* [attachment: trac_14619.patch]
-* [attachment: trac_14619-rev.patch]
+* [attachment:trac_14619.patch]
+* [attachment:trac_14619-rev.patch]
``````




---

archive/issue_comments_232912.json:
```json
{
    "body": "<a id='comment:23'></a>\nThere is something wrong with the filenames of these patches, there are some weird characters at the end. The same issue also happened with the \"part5\" patch of #14980. Please find out why and fix it.",
    "created_at": "2013-08-30T08:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232912",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
There is something wrong with the filenames of these patches, there are some weird characters at the end. The same issue also happened with the "part5" patch of #14980. Please find out why and fix it.



---

archive/issue_comments_232913.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-08-30T08:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232913",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_232914.json:
```json
{
    "body": "**Work_Issues:** patch filenames",
    "created_at": "2013-08-30T08:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232914",
    "user": "https://github.com/jdemeyer"
}
```

**Work_Issues:** patch filenames



---

archive/attachments_019719.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "14619.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14619/14619.patch",
    "created_at": "2013-08-30T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_232915.json:
```json
{
    "body": "",
    "created_at": "2013-08-30T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232915",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/attachments_019720.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "14619-rev.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14619/14619-rev.patch",
    "created_at": "2013-08-30T08:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_232916.json:
```json
{
    "body": "",
    "created_at": "2013-08-30T08:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232916",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/issue_comments_232917.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,5 @@\n Nathann\n \n Apply:\n-* [attachment:trac_14619.patch]\n-* [attachment:trac_14619-rev.patch]\n+* [attachment:14619.patch]\n+* [attachment:14619-rev.patch]\n``````\n",
    "created_at": "2013-08-30T08:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232917",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,5 @@
 Nathann
 
 Apply:
-* [attachment:trac_14619.patch]
-* [attachment:trac_14619-rev.patch]
+* [attachment:14619.patch]
+* [attachment:14619-rev.patch]
``````




---

archive/issue_comments_232918.json:
```json
{
    "body": "<a id='comment:24'></a>\nIt seems to be a very rare bug that happens when a file is named \"trac_14619.patch\". No idea on earth of what is happening.\n\nI \"fixed\" it.\n\nNathann",
    "created_at": "2013-08-30T08:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232918",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
It seems to be a very rare bug that happens when a file is named "trac_14619.patch". No idea on earth of what is happening.

I "fixed" it.

Nathann



---

archive/issue_comments_232919.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2013-08-30T08:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232919",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_232920.json:
```json
{
    "body": "**Changing work_issues** from \"patch filenames\" to \"\".",
    "created_at": "2013-08-30T08:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232920",
    "user": "https://github.com/nathanncohen"
}
```

**Changing work_issues** from "patch filenames" to "".



---

archive/issue_events_047990.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-09-04T08:06:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14619#event-47990"
}
```



---

archive/issue_comments_232921.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-09-04T08:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232921",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_232922.json:
```json
{
    "body": "**Merged:** sage-5.12.beta5",
    "created_at": "2013-09-04T08:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232922",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.beta5



---

archive/issue_comments_232923.json:
```json
{
    "body": "<a id='comment:26'></a>\nI just checked this out, and the definition is not right.\nWith such a definition e.g. every vertex-transitive graph is \ndistance-regular, and this is clearly nonsense! I wish I had time to look at this 6 months ago :-(\n\nCf. http://permalink.gmane.org/gmane.comp.mathematics.sage.support/33339\nwhere this was pointed out...",
    "created_at": "2014-02-24T18:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232923",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
I just checked this out, and the definition is not right.
With such a definition e.g. every vertex-transitive graph is 
distance-regular, and this is clearly nonsense! I wish I had time to look at this 6 months ago :-(

Cf. http://permalink.gmane.org/gmane.comp.mathematics.sage.support/33339
where this was pointed out...



---

archive/issue_comments_232924.json:
```json
{
    "body": "<a id='comment:27'></a>\nAn example of a graph on 12 vertices which satisfies the wrong definition here, but is not distance-regular, can be constructed using GRAPE (a package of GAP included in Sage). It's vertex-transitive (and even edge-transitive) bipartite graph of diameter 3, which is not distance-regular. Some vertices (e.g. 1 and 6) at distance 2 from each other have 4 common neighbours, and some (e.g. 1 and 2) only 2 common neighbours, whereas this must be a constant across all distance 2 pairs.\nHere is the adjacency list (say for a doctest) of this graph (vertices from 1 to 12):\n\n```\n[ [   8,   9,  10,  11 ],\n  [   7,   9,  10,  12 ],\n  [   7,   8,  11,  12 ],\n  [   7,   8,  11,  12 ],\n  [   7,   9,  10,  12 ],\n  [   8,   9,  10,  11 ],\n  [   2,   3,   4,   5 ],\n  [   1,   3,   4,   6 ],\n  [   1,   2,   5,   6 ],\n  [   1,   2,   5,   6 ],\n  [   1,   3,   4,   6 ],\n  [   2,   3,   4,   5 ] ]\n```\n\nand this is the GAP computation\n\n```\n$ sage -gap\n...\ngap> LoadPackage(\"grape\");\ngap> gamma := JohnsonGraph(4,2);;                                     \ngap> B:=BipartiteDouble(gamma);; \ngap> GlobalParameters(B);\n[ [ 0, 0, 4 ], [ 1, 0, 3 ], [ -1, 0, -1 ], [ 4, 0, 0 ] ]\ngap> a:=AutGroupGraph(B);;\ngap> Orbits(a,[1..12]);\n[ [ 1, 2, 7, 5, 3, 8, 12, 4, 6, 11, 9, 10 ] ]\ngap> ha:=Stabilizer(a,1);;\ngap> Orbits(ha,[1..12]);\n[ [ 1 ], [ 2, 5, 3, 4 ], [ 6 ], [ 7, 12 ], [ 8, 9, 10, 11 ] ]\ngap> List([1..12],x->Adjacency(B,x));\n[ [ 8, 9, 10, 11 ], [ 7, 9, 10, 12 ], [ 7, 8, 11, 12 ], [ 7, 8, 11, 12 ], [ 7, 9, 10, 12 ], [ 8, 9, 10, 11 ], [ 2, 3, 4, 5 ], [ 1, 3, 4, 6 ], \n  [ 1, 2, 5, 6 ], [ 1, 2, 5, 6 ], [ 1, 3, 4, 6 ], [ 2, 3, 4, 5 ] ]\n```",
    "created_at": "2014-02-24T19:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232924",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
An example of a graph on 12 vertices which satisfies the wrong definition here, but is not distance-regular, can be constructed using GRAPE (a package of GAP included in Sage). It's vertex-transitive (and even edge-transitive) bipartite graph of diameter 3, which is not distance-regular. Some vertices (e.g. 1 and 6) at distance 2 from each other have 4 common neighbours, and some (e.g. 1 and 2) only 2 common neighbours, whereas this must be a constant across all distance 2 pairs.
Here is the adjacency list (say for a doctest) of this graph (vertices from 1 to 12):

```
[ [   8,   9,  10,  11 ],
  [   7,   9,  10,  12 ],
  [   7,   8,  11,  12 ],
  [   7,   8,  11,  12 ],
  [   7,   9,  10,  12 ],
  [   8,   9,  10,  11 ],
  [   2,   3,   4,   5 ],
  [   1,   3,   4,   6 ],
  [   1,   2,   5,   6 ],
  [   1,   2,   5,   6 ],
  [   1,   3,   4,   6 ],
  [   2,   3,   4,   5 ] ]
```

and this is the GAP computation

```
$ sage -gap
...
gap> LoadPackage("grape");
gap> gamma := JohnsonGraph(4,2);;                                     
gap> B:=BipartiteDouble(gamma);; 
gap> GlobalParameters(B);
[ [ 0, 0, 4 ], [ 1, 0, 3 ], [ -1, 0, -1 ], [ 4, 0, 0 ] ]
gap> a:=AutGroupGraph(B);;
gap> Orbits(a,[1..12]);
[ [ 1, 2, 7, 5, 3, 8, 12, 4, 6, 11, 9, 10 ] ]
gap> ha:=Stabilizer(a,1);;
gap> Orbits(ha,[1..12]);
[ [ 1 ], [ 2, 5, 3, 4 ], [ 6 ], [ 7, 12 ], [ 8, 9, 10, 11 ] ]
gap> List([1..12],x->Adjacency(B,x));
[ [ 8, 9, 10, 11 ], [ 7, 9, 10, 12 ], [ 7, 8, 11, 12 ], [ 7, 8, 11, 12 ], [ 7, 9, 10, 12 ], [ 8, 9, 10, 11 ], [ 2, 3, 4, 5 ], [ 1, 3, 4, 6 ], 
  [ 1, 2, 5, 6 ], [ 1, 2, 5, 6 ], [ 1, 3, 4, 6 ], [ 2, 3, 4, 5 ] ]
```



---

archive/issue_comments_232925.json:
```json
{
    "body": "<a id='comment:28'></a>\nsee #15864 for a fix.",
    "created_at": "2014-02-27T10:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-232925",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
see #15864 for a fix.
