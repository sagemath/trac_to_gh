# Issue 14878: Doctest fix for: very slow taylor expansion for composite functions

archive/issues_014674.json:
```json
{
    "assignees": [],
    "body": "Pynac-0.7.0 uses Flint to get univariate series expansions. For comparison,\n\n```\n                                             now     previously\nsin(x*sin(x*sin(x*sin(x)))).series(x,8)     50-55\u00b5s    13.7s\nsin(x*sin(x*sin(x*sin(x)))).series(x,12)      69\u00b5s      >1min\nsin(x*exp(x)).series(x,100)                  3.7ms     11.3s\nsin(x*exp(x)).series(x,500)                  215ms       n/a\n(sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a\n```\n\nExtensive tests are added with #21730 under `tests/`. Pre-Pynac 0.7.0 the tests need 11s vs 0.2s with pynac-0.7.0.\n\nPrevious ticket description:\n\nThe following\n\n```\nf=sin(x*sin(x*sin(x*sin(x))))\nf.series(x,8)\n```\ntakes something like 30s, which seems a bit too much. Maybe there is some bottleneck somewhere ?\nOn the other hand, \n\n```\nf.taylor(x,0,8)\n```\nis faster, but not lightning fast.\n\nIn the same spirit, one could try\n\n```\nsage: x=PowerSeriesRing(QQ,'x').gen()\nsage: sin(x)\nTraceback (most recent call last):\n...\nTypeError: cannot coerce arguments: no canonical coercion from Power Series Ring in x over Rational Field to Symbolic Ring\n```\nIt would be good if one could apply symbolic functions to power series and get power series when possible.\n\n\nDepends on #21827\n\nAssignee: **@burcin**\n\nKeywords: **taylor expansion, symbolic function**\n\nBranch/Commit: **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Ralf Stephan**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14878_\n\n",
    "closed_at": "2016-11-15T23:25:14Z",
    "created_at": "2013-07-11T14:29:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Doctest fix for: very slow taylor expansion for composite functions",
    "type": "issue",
    "updated_at": "2016-11-15T23:25:14Z",
    "url": "https://github.com/sagemath/sage/issues/14878",
    "user": "https://github.com/fchapoton"
}
```
Pynac-0.7.0 uses Flint to get univariate series expansions. For comparison,

```
                                             now     previously
sin(x*sin(x*sin(x*sin(x)))).series(x,8)     50-55µs    13.7s
sin(x*sin(x*sin(x*sin(x)))).series(x,12)      69µs      >1min
sin(x*exp(x)).series(x,100)                  3.7ms     11.3s
sin(x*exp(x)).series(x,500)                  215ms       n/a
(sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a
```

Extensive tests are added with #21730 under `tests/`. Pre-Pynac 0.7.0 the tests need 11s vs 0.2s with pynac-0.7.0.

Previous ticket description:

The following

```
f=sin(x*sin(x*sin(x*sin(x))))
f.series(x,8)
```
takes something like 30s, which seems a bit too much. Maybe there is some bottleneck somewhere ?
On the other hand, 

```
f.taylor(x,0,8)
```
is faster, but not lightning fast.

In the same spirit, one could try

```
sage: x=PowerSeriesRing(QQ,'x').gen()
sage: sin(x)
Traceback (most recent call last):
...
TypeError: cannot coerce arguments: no canonical coercion from Power Series Ring in x over Rational Field to Symbolic Ring
```
It would be good if one could apply symbolic functions to power series and get power series when possible.


Depends on #21827

Assignee: **@burcin**

Keywords: **taylor expansion, symbolic function**

Branch/Commit: **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**

Reviewer: **Frédéric Chapoton**

Author: **Ralf Stephan**

_Issue created by migration from https://trac.sagemath.org/ticket/14878_





---

archive/issue_events_187355.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-11T14:29:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187355"
}
```



---

archive/issue_events_187356.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-11T14:29:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187356"
}
```



---

archive/issue_events_187357.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-11T14:29:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187357"
}
```



---

archive/issue_events_187358.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-11T14:29:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187358"
}
```



---

archive/issue_events_187359.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-07-11T14:31:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "title_is": "very slow taylor expansion for composite functions",
    "title_was": "very slow taylor epansion for composite functions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187359"
}
```



---

archive/issue_comments_184830.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBeing able to apply functions to power series would be useful.\n\nFor anyone looking to implement this, note that flint can now natively evaluate elementary functions over `Q[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` and `(Z/nZ)[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` (using `fmpq_poly_sin_series` in this case).",
    "created_at": "2013-07-11T16:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184830",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:2'>Comment 2:</a>
Being able to apply functions to power series would be useful.

For anyone looking to implement this, note that flint can now natively evaluate elementary functions over `Q[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` and `(Z/nZ)[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` (using `fmpq_poly_sin_series` in this case).



---

archive/issue_comments_184831.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nsome timings:\n\n```\nsage: %timeit f.taylor(x,0,8)\n100 loops, best of 3: 6.46 ms per loop\nsage: %timeit f.series(x,8)\n1 loops, best of 3: 42.1 s per loop\n```",
    "created_at": "2013-07-12T07:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184831",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>Comment 3:</a>
some timings:

```
sage: %timeit f.taylor(x,0,8)
100 loops, best of 3: 6.46 ms per loop
sage: %timeit f.series(x,8)
1 loops, best of 3: 42.1 s per loop
```



---

archive/issue_comments_184832.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,12 @@\n f.series(x,8)\n ```\n takes something like 30s, which seems a bit too much. Maybe there is some bottleneck somewhere ?\n+On the other hand, \n+\n+```\n+f.taylor(x,0,8)\n+```\n+is faster, but not lightning fast.\n \n In the same spirit, one could try\n \n``````\n",
    "created_at": "2013-07-12T07:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184832",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,12 @@
 f.series(x,8)
 ```
 takes something like 30s, which seems a bit too much. Maybe there is some bottleneck somewhere ?
+On the other hand, 
+
+```
+f.taylor(x,0,8)
+```
+is faster, but not lightning fast.
 
 In the same spirit, one could try
 
``````




---

archive/issue_events_187360.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187360"
}
```



---

archive/issue_events_187361.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187361"
}
```



---

archive/issue_comments_184833.json:
```json
{
    "body": "Replying to [ticket:14878 chapoton]:\n> Maybe there is some bottleneck somewhere ?\n\nGiNaC's series expansion code seems to be designed for very small orders only. It is incredibly inefficient otherwise:\n\n```\nginsh - GiNaC Interactive Shell (ginac V1.6.2)\n  __,  _______  Copyright (C) 1999-2011 Johannes Gutenberg University Mainz,\n (__) *       | Germany.  This is free software with ABSOLUTELY NO WARRANTY.\n  ._) i N a C | You are welcome to redistribute it under certain conditions.\n<-------------' For details type `warranty;'.\n\nType ?? for a list of help topics.\n> time(series(sin(x*sin(x*sin(x*sin(x)))), x==0, 8));\n2.352s                                                                          \n> time(series(sin(x*sin(x*sin(x*sin(x)))), x==0, 12));                         \n40.104s                                                                         \n```\n\nJudging by the number of calls to `gcd`/`lcm` reported by `%prun f.series(x==0, k)` for successive `k`, the number of operations in \u211a seems to grow at least exponentially with `k`, and perhaps like `k!` (while it should be something like `O(k\u00b3)` in a naive implementation, and essentially linear in a careful one).\n\nI think that's the heart of the problem, and the difference between the timings with sage and with ginsh is pynac overhead (which should of course be minimized, but only costs a constant factor).",
    "created_at": "2014-03-05T12:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184833",
    "user": "https://github.com/mezzarobba"
}
```

Replying to [ticket:14878 chapoton]:
> Maybe there is some bottleneck somewhere ?

GiNaC's series expansion code seems to be designed for very small orders only. It is incredibly inefficient otherwise:

```
ginsh - GiNaC Interactive Shell (ginac V1.6.2)
  __,  _______  Copyright (C) 1999-2011 Johannes Gutenberg University Mainz,
 (__) *       | Germany.  This is free software with ABSOLUTELY NO WARRANTY.
  ._) i N a C | You are welcome to redistribute it under certain conditions.
<-------------' For details type `warranty;'.

Type ?? for a list of help topics.
> time(series(sin(x*sin(x*sin(x*sin(x)))), x==0, 8));
2.352s                                                                          
> time(series(sin(x*sin(x*sin(x*sin(x)))), x==0, 12));                         
40.104s                                                                         
```

Judging by the number of calls to `gcd`/`lcm` reported by `%prun f.series(x==0, k)` for successive `k`, the number of operations in ℚ seems to grow at least exponentially with `k`, and perhaps like `k!` (while it should be something like `O(k³)` in a naive implementation, and essentially linear in a careful one).

I think that's the heart of the problem, and the difference between the timings with sage and with ginsh is pynac overhead (which should of course be minimized, but only costs a constant factor).



---

archive/issue_events_187362.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187362"
}
```



---

archive/issue_events_187363.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187363"
}
```



---

archive/issue_events_187364.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187364"
}
```



---

archive/issue_events_187365.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187365"
}
```



---

archive/issue_events_187366.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-17T18:01:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187366"
}
```



---

archive/issue_events_187367.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-17T18:01:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187367"
}
```



---

archive/issue_comments_184834.json:
```json
{
    "body": "Branch: **[u/chapoton/14878](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14878)**",
    "created_at": "2015-10-08T19:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184834",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/14878](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14878)**



---

archive/issue_events_187368.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-10-08T19:58:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187368"
}
```



---

archive/issue_events_187369.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-10-08T19:58:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187369"
}
```



---

archive/issue_comments_184835.json:
```json
{
    "body": "Commit: **[20163eb](https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795)**",
    "created_at": "2015-10-08T19:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184835",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[20163eb](https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795)**



---

archive/issue_comments_184836.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795\">20163eb</a></td><td><code>trac #14878 sin for power series, step1</code></td></tr></table>\n",
    "created_at": "2015-10-08T19:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184836",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'>Comment 9:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795">20163eb</a></td><td><code>trac #14878 sin for power series, step1</code></td></tr></table>




---

archive/issue_comments_184837.json:
```json
{
    "body": "Changed commit from **[20163eb](https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795)** to **[ed55e28](https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a)**",
    "created_at": "2015-10-09T06:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184837",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20163eb](https://github.com/sagemath/sagetrac-mirror/commit/20163eb42cc3095b6112bb9ff24d129b5ad7c795)** to **[ed55e28](https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a)**



---

archive/issue_comments_184838.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a\">ed55e28</a></td><td><code>trac #14878 step 2, cos for multi-variable power series</code></td></tr></table>\n",
    "created_at": "2015-10-09T06:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184838",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a">ed55e28</a></td><td><code>trac #14878 step 2, cos for multi-variable power series</code></td></tr></table>




---

archive/issue_comments_184839.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a0921cae51e4fbc1e302c30a87792a78ba36a9a\">0a0921c</a></td><td><code>Merge branch 'u/chapoton/14878' into 7.1.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a\">2e093f6</a></td><td><code>trac #14878 now sin and cos for all power series</code></td></tr></table>\n",
    "created_at": "2016-01-27T20:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184839",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a0921cae51e4fbc1e302c30a87792a78ba36a9a">0a0921c</a></td><td><code>Merge branch 'u/chapoton/14878' into 7.1.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a">2e093f6</a></td><td><code>trac #14878 now sin and cos for all power series</code></td></tr></table>




---

archive/issue_comments_184840.json:
```json
{
    "body": "Changed commit from **[ed55e28](https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a)** to **[2e093f6](https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a)**",
    "created_at": "2016-01-27T20:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184840",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ed55e28](https://github.com/sagemath/sagetrac-mirror/commit/ed55e282a55ecbe91aede9a2f15322a42b1af84a)** to **[2e093f6](https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a)**



---

archive/issue_comments_184841.json:
```json
{
    "body": "Changed commit from **[2e093f6](https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a)** to none",
    "created_at": "2016-02-05T20:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184841",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[2e093f6](https://github.com/sagemath/sagetrac-mirror/commit/2e093f60af2e54d05970902b1e0e2836425a632a)** to none



---

archive/issue_comments_184842.json:
```json
{
    "body": "Changed branch from **[u/chapoton/14878](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14878)** to none",
    "created_at": "2016-02-05T20:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184842",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/14878](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14878)** to none



---

archive/issue_comments_184843.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nbranch transfered to #20017",
    "created_at": "2016-02-05T20:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184843",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'>Comment 12:</a>
branch transfered to #20017



---

archive/issue_comments_184844.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThe relevant Pynac ticket is https://github.com/pynac/pynac/issues/116",
    "created_at": "2016-02-15T07:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184844",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'>Comment 13:</a>
The relevant Pynac ticket is https://github.com/pynac/pynac/issues/116



---

archive/issue_comments_184845.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2016-02-15T07:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184845",
    "user": "https://github.com/rwst"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_184846.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2016-10-15T14:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184846",
    "user": "https://github.com/rwst"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_184847.json:
```json
{
    "body": "Dependencies: **pynac-0.7.0**",
    "created_at": "2016-10-15T14:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184847",
    "user": "https://github.com/rwst"
}
```

Dependencies: **pynac-0.7.0**



---

archive/issue_events_187370.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-15T14:41:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187370"
}
```



---

archive/issue_events_187371.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-15T14:41:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187371"
}
```



---

archive/issue_comments_184848.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Pynac-0.7.0 uses Flint to get univariate series expansions. For comparison,\n+\n+```\n+                                             now     previously\n+sin(x*sin(x*sin(x*sin(x)))).series(x,8)     50-55\u00b5s    13.7s\n+sin(x*sin(x*sin(x*sin(x)))).series(x,12)      69\u00b5s      >1min\n+sin(x*exp(x)).series(x,100)                  3.7ms     11.3s\n+sin(x*exp(x)).series(x,500)                  215ms       n/a\n+(sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a\n+```\n+\n+This ticket should add extensive tests, probably a file under `test/`. It can take some cases from Symengine.\n+\n+Previous ticket description:\n+\n The following\n \n ```\n@@ -22,3 +37,4 @@\n TypeError: cannot coerce arguments: no canonical coercion from Power Series Ring in x over Rational Field to Symbolic Ring\n ```\n It would be good if one could apply symbolic functions to power series and get power series when possible.\n+\n``````\n",
    "created_at": "2016-10-15T14:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184848",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Pynac-0.7.0 uses Flint to get univariate series expansions. For comparison,
+
+```
+                                             now     previously
+sin(x*sin(x*sin(x*sin(x)))).series(x,8)     50-55µs    13.7s
+sin(x*sin(x*sin(x*sin(x)))).series(x,12)      69µs      >1min
+sin(x*exp(x)).series(x,100)                  3.7ms     11.3s
+sin(x*exp(x)).series(x,500)                  215ms       n/a
+(sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a
+```
+
+This ticket should add extensive tests, probably a file under `test/`. It can take some cases from Symengine.
+
+Previous ticket description:
+
 The following
 
 ```
@@ -22,3 +37,4 @@
 TypeError: cannot coerce arguments: no canonical coercion from Power Series Ring in x over Rational Field to Symbolic Ring
 ```
 It would be good if one could apply symbolic functions to power series and get power series when possible.
+
``````




---

archive/issue_comments_184849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n (sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a\n ```\n \n-This ticket should add extensive tests, probably a file under `test/`. It can take some cases from Symengine.\n+This ticket should add extensive tests, probably a file under `tests/`. It can take some cases from Symengine.\n \n Previous ticket description:\n \n``````\n",
    "created_at": "2016-10-15T15:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184849",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 (sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a
 ```
 
-This ticket should add extensive tests, probably a file under `test/`. It can take some cases from Symengine.
+This ticket should add extensive tests, probably a file under `tests/`. It can take some cases from Symengine.
 
 Previous ticket description:
 
``````




---

archive/issue_comments_184850.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n (sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a\n ```\n \n-This ticket should add extensive tests, probably a file under `tests/`. It can take some cases from Symengine.\n+Extensive tests are added with #21730 under `tests/`. Pre-Pynac 0.7.0 the tests need 11s vs 0.2s with pynac-0.7.0.\n \n Previous ticket description:\n \n``````\n",
    "created_at": "2016-10-20T15:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184850",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 (sin(x+x^2)*cos(x+x^2)).series(x,1000)       2.86s       n/a
 ```
 
-This ticket should add extensive tests, probably a file under `tests/`. It can take some cases from Symengine.
+Extensive tests are added with #21730 under `tests/`. Pre-Pynac 0.7.0 the tests need 11s vs 0.2s with pynac-0.7.0.
 
 Previous ticket description:
 
``````




---

archive/issue_comments_184851.json:
```json
{
    "body": "Branch: **[u/rws/very_slow_taylor_expansion_for_composite_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/very_slow_taylor_expansion_for_composite_functions)**",
    "created_at": "2016-10-20T15:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184851",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/very_slow_taylor_expansion_for_composite_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/very_slow_taylor_expansion_for_composite_functions)**



---

archive/issue_comments_184852.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6\">ebaf2c4</a></td><td><code>add doctests</code></td></tr></table>\n",
    "created_at": "2016-10-20T15:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184852",
    "user": "https://github.com/rwst"
}
```

<a id='comment:18'>Comment 18:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6">ebaf2c4</a></td><td><code>add doctests</code></td></tr></table>




---

archive/issue_comments_184853.json:
```json
{
    "body": "Commit: **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**",
    "created_at": "2016-10-20T15:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184853",
    "user": "https://github.com/rwst"
}
```

Commit: **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**



---

archive/issue_events_187372.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-20T15:17:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "title_is": "Doctest fix for: very slow taylor expansion for composite functions",
    "title_was": "very slow taylor expansion for composite functions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187372"
}
```



---

archive/issue_events_187373.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-20T15:17:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187373"
}
```



---

archive/issue_comments_184854.json:
```json
{
    "body": "Changed dependencies from **pynac-0.7.0** to **#21827**",
    "created_at": "2016-11-10T07:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184854",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **pynac-0.7.0** to **#21827**



---

archive/issue_comments_184855.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2016-11-11T21:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184855",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_184856.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nok, looks good to me. Thanks for your work. Please add your name as author.",
    "created_at": "2016-11-11T21:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184856",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'>Comment 20:</a>
ok, looks good to me. Thanks for your work. Please add your name as author.



---

archive/issue_events_187374.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-11-11T21:39:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187374"
}
```



---

archive/issue_events_187375.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-11-11T21:39:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187375"
}
```



---

archive/issue_comments_184857.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2016-11-12T07:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184857",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_184858.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, in a later stable release.** to none",
    "created_at": "2016-11-12T07:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184858",
    "user": "https://github.com/rwst"
}
```

Changed upstream from **Fixed upstream, in a later stable release.** to none



---

archive/issue_comments_184859.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nThanks too.",
    "created_at": "2016-11-12T07:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184859",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'>Comment 21:</a>
Thanks too.



---

archive/issue_comments_184860.json:
```json
{
    "body": "Changed branch from **[u/rws/very_slow_taylor_expansion_for_composite_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/very_slow_taylor_expansion_for_composite_functions)** to **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**",
    "created_at": "2016-11-15T23:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14878#issuecomment-184860",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/very_slow_taylor_expansion_for_composite_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/very_slow_taylor_expansion_for_composite_functions)** to **[ebaf2c4](https://github.com/sagemath/sagetrac-mirror/commit/ebaf2c4e031c16b836004f47fbbf62c624016bf6)**



---

archive/issue_events_187376.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-15T23:25:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187376"
}
```



---

archive/issue_events_187377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "69b249485f4ad7314918faa02dace7adb81a012e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-15T23:25:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14878",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14878#event-187377"
}
```
