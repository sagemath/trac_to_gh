# Issue 14028: Fix "except:" statements

archive/issues_013824.json:
```json
{
    "body": "Replace\n\n```\nexcept:\n```\nby\n\n```\nexcept StandardError:\n```\n(or an other exception where it makes sense)\n\nAlso fix some dubious `except KeyboardInterrupt` which caused for example\n\n```\nInterrupting Gap...\nTraceback (most recent call last):\n  File \"/home/jdemeyer/slow5.py\", line 11, in <module>\n    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print \"Time: CPU %.2f s, Wall: %.2f s\"%(misc.cputime(__time__), misc.walltime(__wall__))\n  File \"/home/jdemeyer/slow5.py\", line 9, in test\n    assert G.order() == Gamma(n).index() / g.index()\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 415, in order\n    return self.cardinality()\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 398, in cardinality\n    g = self._gap_()\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 228, in _gap_\n    raise NotImplementedError, \"Matrix group over %s not implemented.\"%self.__R\nNotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.\n```\nor\n\n```\nInterrupting Gap...\nTraceback (most recent call last):\n  File \"/home/jdemeyer/slow5.py\", line 11, in <module>\n    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print \"Time: CPU %.2f s, Wall: %.2f s\"%(misc.cputime(__time__), misc.walltime(__wall__))\n  File \"/home/jdemeyer/slow5.py\", line 9, in test\n    assert G.order() == Gamma(n).index() / g.index()\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 415, in order\n    return self.cardinality()\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 400, in cardinality\n    return integer.Integer(gap(self).Size())\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 590, in __call__\n    return self._obj.parent().function_call(self._name, [self._obj] + list(args), kwds)\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 899, in function_call\n    return self.new('last')\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 266, in new\n    return self(code)\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 201, in __call__\n    return cls(self, x, name=name)\n  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1285, in __init__\n    raise TypeError, x\nTypeError: Ctrl-c pressed while running Gap\n```\n(note the `TypeError`!)\n\n**Assignee:** @jasongrout\n\n**Reviewer:** Volker Braun\n\n**Author:** Jeroen Demeyer\n\n**Merged:** sage-5.7.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/14028\n\n",
    "closed_at": "2013-01-31T09:19:33Z",
    "created_at": "2013-01-28T14:25:25Z",
    "labels": [
        "component: misc",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Fix \"except:\" statements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14028",
    "user": "https://github.com/jdemeyer"
}
```
Replace

```
except:
```
by

```
except StandardError:
```
(or an other exception where it makes sense)

Also fix some dubious `except KeyboardInterrupt` which caused for example

```
Interrupting Gap...
Traceback (most recent call last):
  File "/home/jdemeyer/slow5.py", line 11, in <module>
    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print "Time: CPU %.2f s, Wall: %.2f s"%(misc.cputime(__time__), misc.walltime(__wall__))
  File "/home/jdemeyer/slow5.py", line 9, in test
    assert G.order() == Gamma(n).index() / g.index()
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 415, in order
    return self.cardinality()
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 398, in cardinality
    g = self._gap_()
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 228, in _gap_
    raise NotImplementedError, "Matrix group over %s not implemented."%self.__R
NotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.
```
or

```
Interrupting Gap...
Traceback (most recent call last):
  File "/home/jdemeyer/slow5.py", line 11, in <module>
    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print "Time: CPU %.2f s, Wall: %.2f s"%(misc.cputime(__time__), misc.walltime(__wall__))
  File "/home/jdemeyer/slow5.py", line 9, in test
    assert G.order() == Gamma(n).index() / g.index()
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 415, in order
    return self.cardinality()
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 400, in cardinality
    return integer.Integer(gap(self).Size())
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 590, in __call__
    return self._obj.parent().function_call(self._name, [self._obj] + list(args), kwds)
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 899, in function_call
    return self.new('last')
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 266, in new
    return self(code)
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 201, in __call__
    return cls(self, x, name=name)
  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1285, in __init__
    raise TypeError, x
TypeError: Ctrl-c pressed while running Gap
```
(note the `TypeError`!)

**Assignee:** @jasongrout

**Reviewer:** Volker Braun

**Author:** Jeroen Demeyer

**Merged:** sage-5.7.beta2

Issue created by migration from https://trac.sagemath.org/ticket/14028





---

archive/issue_comments_205714.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,3 +8,4 @@\n ```\n except StandardError:\n ```\n+(or an other exception where it makes sense)\n``````\n",
    "created_at": "2013-01-28T14:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205714",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,3 +8,4 @@
 ```
 except StandardError:
 ```
+(or an other exception where it makes sense)
``````




---

archive/issue_events_045869.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "rename": {
        "from": "Fix bare \"except:\" statements",
        "to": "Fix \"except:\" statements"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14028#event-45869"
}
```



---

archive/issue_comments_205715.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,3 +9,21 @@\n except StandardError:\n ```\n (or an other exception where it makes sense)\n+\n+Also fix some dubious `except KeyboardInterrupt` which caused for example\n+\n+```\n+Interrupting Gap...\n+Traceback (most recent call last):\n+  File \"/home/jdemeyer/slow5.py\", line 11, in <module>\n+    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print \"Time: CPU %.2f s, Wall: %.2f s\"%(misc.cputime(__time__), misc.walltime(__wall__))\n+  File \"/home/jdemeyer/slow5.py\", line 9, in test\n+    assert G.order() == Gamma(n).index() / g.index()\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 415, in order\n+    return self.cardinality()\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 398, in cardinality\n+    g = self._gap_()\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 228, in _gap_\n+    raise NotImplementedError, \"Matrix group over %s not implemented.\"%self.__R\n+NotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.\n+```\n``````\n",
    "created_at": "2013-01-28T14:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205715",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,3 +9,21 @@
 except StandardError:
 ```
 (or an other exception where it makes sense)
+
+Also fix some dubious `except KeyboardInterrupt` which caused for example
+
+```
+Interrupting Gap...
+Traceback (most recent call last):
+  File "/home/jdemeyer/slow5.py", line 11, in <module>
+    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print "Time: CPU %.2f s, Wall: %.2f s"%(misc.cputime(__time__), misc.walltime(__wall__))
+  File "/home/jdemeyer/slow5.py", line 9, in test
+    assert G.order() == Gamma(n).index() / g.index()
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 415, in order
+    return self.cardinality()
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 398, in cardinality
+    g = self._gap_()
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 228, in _gap_
+    raise NotImplementedError, "Matrix group over %s not implemented."%self.__R
+NotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.
+```
``````




---

archive/issue_comments_205716.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -27,3 +27,29 @@\n     raise NotImplementedError, \"Matrix group over %s not implemented.\"%self.__R\n NotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.\n ```\n+or\n+\n+```\n+Interrupting Gap...\n+Traceback (most recent call last):\n+  File \"/home/jdemeyer/slow5.py\", line 11, in <module>\n+    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print \"Time: CPU %.2f s, Wall: %.2f s\"%(misc.cputime(__time__), misc.walltime(__wall__))\n+  File \"/home/jdemeyer/slow5.py\", line 9, in test\n+    assert G.order() == Gamma(n).index() / g.index()\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 415, in order\n+    return self.cardinality()\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py\", line 400, in cardinality\n+    return integer.Integer(gap(self).Size())\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 590, in __call__\n+    return self._obj.parent().function_call(self._name, [self._obj] + list(args), kwds)\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 899, in function_call\n+    return self.new('last')\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 266, in new\n+    return self(code)\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 201, in __call__\n+    return cls(self, x, name=name)\n+  File \"/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1285, in __init__\n+    raise TypeError, x\n+TypeError: Ctrl-c pressed while running Gap\n+```\n+(note the `TypeError`!)\n``````\n",
    "created_at": "2013-01-28T14:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205716",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -27,3 +27,29 @@
     raise NotImplementedError, "Matrix group over %s not implemented."%self.__R
 NotImplementedError: Matrix group over Ring of integers modulo 2 not implemented.
 ```
+or
+
+```
+Interrupting Gap...
+Traceback (most recent call last):
+  File "/home/jdemeyer/slow5.py", line 11, in <module>
+    __time__=misc.cputime(); __wall__=misc.walltime(); test(); print "Time: CPU %.2f s, Wall: %.2f s"%(misc.cputime(__time__), misc.walltime(__wall__))
+  File "/home/jdemeyer/slow5.py", line 9, in test
+    assert G.order() == Gamma(n).index() / g.index()
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 415, in order
+    return self.cardinality()
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/groups/matrix_gps/matrix_group.py", line 400, in cardinality
+    return integer.Integer(gap(self).Size())
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 590, in __call__
+    return self._obj.parent().function_call(self._name, [self._obj] + list(args), kwds)
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 899, in function_call
+    return self.new('last')
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 266, in new
+    return self(code)
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 201, in __call__
+    return cls(self, x, name=name)
+  File "/usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1285, in __init__
+    raise TypeError, x
+TypeError: Ctrl-c pressed while running Gap
+```
+(note the `TypeError`!)
``````




---

archive/issue_comments_205717.json:
```json
{
    "body": "<a id='comment:4'></a>\nIts pretty much a no-brainer. Ready for review?",
    "created_at": "2013-01-28T17:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205717",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
Its pretty much a no-brainer. Ready for review?



---

archive/issue_comments_205718.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vbraun](#comment%3A4):\n> Its pretty much a no-brainer. Ready for review?\n\nNot sure.  The following is fairly reproducible when interrupting GAP:\n\n```\nInterrupting Gap...\nException RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored\n[...ad infinitum...]\n```\nThe backtrace at this point (thanks to #14029) is attached.",
    "created_at": "2013-01-28T20:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205718",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Replying to [vbraun](#comment%3A4):
> Its pretty much a no-brainer. Ready for review?

Not sure.  The following is fairly reproducible when interrupting GAP:

```
Interrupting Gap...
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded while calling a Python object',) in  ignored
[...ad infinitum...]
```
The backtrace at this point (thanks to #14029) is attached.



---

archive/attachments_018940.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage_crash_IAI1or.log",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14028/sage_crash_IAI1or.log",
    "created_at": "2013-01-28T20:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.log",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_205719.json:
```json
{
    "body": "",
    "created_at": "2013-01-28T20:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205719",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_205720.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe problem was removing the statement\n\n```\nself._session_number = -1\n```\n\nNew patch attached which should fix this.  I also changed a few more instances of\n\n```\nexcept StandardError:\n```\nto\n\n```\nexcept BaseException:\n```\nin cases where the except-clause was doing cleanup + re-raise.",
    "created_at": "2013-01-29T11:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205720",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
The problem was removing the statement

```
self._session_number = -1
```

New patch attached which should fix this.  I also changed a few more instances of

```
except StandardError:
```
to

```
except BaseException:
```
in cases where the except-clause was doing cleanup + re-raise.



---

archive/attachments_018941.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "14028_bare_except.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14028/14028_bare_except.patch",
    "created_at": "2013-01-29T11:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_205721.json:
```json
{
    "body": "",
    "created_at": "2013-01-29T11:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205721",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_205722.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-01-29T13:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205722",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_205723.json:
```json
{
    "body": "<a id='comment:7'></a>\nPasses all long doctests, so ready for review.",
    "created_at": "2013-01-29T13:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205723",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Passes all long doctests, so ready for review.



---

archive/issue_comments_205724.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-01-30T11:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205724",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_205725.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2013-01-30T11:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205725",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_205726.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks good to me.",
    "created_at": "2013-01-30T11:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205726",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
Looks good to me.



---

archive/issue_events_045870.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-31T09:19:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14028#event-45870"
}
```



---

archive/issue_comments_205727.json:
```json
{
    "body": "**Merged:** sage-5.7.beta2",
    "created_at": "2013-01-31T09:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14028#issuecomment-205727",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.7.beta2
