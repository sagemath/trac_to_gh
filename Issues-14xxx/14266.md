# Issue 14266: Pretty Console Output --> ascii art

archive/issues_014062.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "My patch creates a simple ascii-art module to manipule several structure: list,dict,tuple, linear expression:\n\n```\nsage: R = NonCommutativeSymmetricFunctions(QQ).R()\nsage: R[1]**5\nR  + R   + R   + R    + R   + R    + R    + R     + R   + R    +\n *    **     *    ***     *     **      *    ****     *     **  \n *    *     **    *       *    **     ***    *        *     *   \n *    *     *     *      **    *      *               *    **   \n *    *     *            *                           **\n *\n\n R    + R     + R    + R     + R     + R\n    *     ***      *      **       *    *****\n   **    **        *    ***     ****\n  **             ***\n```\n\n---\n\nApply:\n\n- [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)\n- [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)\n- [attachment: trac_14266_terminal_width.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)\n\nDepends on #8703\nDepends on #14203\nDepends on #14574\n\nCC:  @nthiery @VivianePons\n\nKeywords: **ascii-art**\n\nReviewer: **Volker Braun, Travis Scrimshaw**\n\nAuthor: **Jean-Baptiste Priez**\n\nMerged: **sage-5.11.beta0**\n\nComponent: **user interface**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14266_\n\n",
    "closed_at": "2013-06-06T12:32:20Z",
    "created_at": "2013-03-13T15:25:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.11",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pretty Console Output --> ascii art",
    "type": "issue",
    "updated_at": "2013-06-22T11:50:00Z",
    "url": "https://github.com/sagemath/sage/issues/14266",
    "user": "https://github.com/sagetrac-elixyre"
}
```
My patch creates a simple ascii-art module to manipule several structure: list,dict,tuple, linear expression:

```
sage: R = NonCommutativeSymmetricFunctions(QQ).R()
sage: R[1]**5
R  + R   + R   + R    + R   + R    + R    + R     + R   + R    +
 *    **     *    ***     *     **      *    ****     *     **  
 *    *     **    *       *    **     ***    *        *     *   
 *    *     *     *      **    *      *               *    **   
 *    *     *            *                           **
 *

 R    + R     + R    + R     + R     + R
    *     ***      *      **       *    *****
   **    **        *    ***     ****
  **             ***
```

---

Apply:

- [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)
- [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)
- [attachment: trac_14266_terminal_width.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)

Depends on #8703
Depends on #14203
Depends on #14574

CC:  @nthiery @VivianePons

Keywords: **ascii-art**

Reviewer: **Volker Braun, Travis Scrimshaw**

Author: **Jean-Baptiste Priez**

Merged: **sage-5.11.beta0**

Component: **user interface**

_Issue created by migration from https://trac.sagemath.org/ticket/14266_





---

archive/issue_events_199174.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-03-13T15:25:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199174"
}
```



---

archive/issue_events_199175.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-03-13T15:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "0000b0",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199175"
}
```



---

archive/issue_events_199176.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-03-13T15:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199176"
}
```



---

archive/issue_events_199177.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2013-03-13T15:25:27Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "subject": "https://github.com/sagetrac-elixyre",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199177"
}
```



---

archive/issue_comments_170724.json:
```json
{
    "body": "patch",
    "created_at": "2013-03-13T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170724",
    "user": "https://github.com/sagetrac-elixyre"
}
```

patch



---

archive/issue_comments_170725.json:
```json
{
    "body": "Attachment: **[pretty_console_print-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/pretty_console_print-EliX-jbp.patch.gz)**\n\nseveral examples (some not in the patch)",
    "created_at": "2013-03-13T15:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170725",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Attachment: **[pretty_console_print-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/pretty_console_print-EliX-jbp.patch.gz)**

several examples (some not in the patch)



---

archive/issue_comments_170726.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[pcp_monkey_patch.py.gz](https://github.com/sagemath/sage/files/ticket14266/pcp_monkey_patch.py.gz)**\n\nWhats the difference between `_repr_`, `_pretty_repr_normal_`, and `_pretty_repr_term_`? I think there should be only one `_repr_`, using ascii art unconditionally if printing the object benefits from it. Why would you want to turn it off? I don't see the need for a different display handler, we aleady have one that does handle ascii art.",
    "created_at": "2013-03-13T16:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170726",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[pcp_monkey_patch.py.gz](https://github.com/sagemath/sage/files/ticket14266/pcp_monkey_patch.py.gz)**

Whats the difference between `_repr_`, `_pretty_repr_normal_`, and `_pretty_repr_term_`? I think there should be only one `_repr_`, using ascii art unconditionally if printing the object benefits from it. Why would you want to turn it off? I don't see the need for a different display handler, we aleady have one that does handle ascii art.



---

archive/issue_comments_170727.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI implement `_pretty_repr_` to introduce a special ascii-art method (like in mupad) and I prefere let the method `_repr_` to allow differents use. In general case, we can copy the ouput and re-use it in terminal (it is very usefull I think).\nThen I put a method `_pretty_repr_term_` like we have `_repr_term_` for a linear expression.\n\nI saw your handle ascii art and I try to send you a mail to merge that.... (no??).",
    "created_at": "2013-03-13T16:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170727",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:2" align="right">comment:2</div>

I implement `_pretty_repr_` to introduce a special ascii-art method (like in mupad) and I prefere let the method `_repr_` to allow differents use. In general case, we can copy the ouput and re-use it in terminal (it is very usefull I think).
Then I put a method `_pretty_repr_term_` like we have `_repr_term_` for a linear expression.

I saw your handle ascii art and I try to send you a mail to merge that.... (no??).



---

archive/issue_comments_170728.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI saw your email but #14040 has already been merged. What I'm saying is, there should be more integration into the existing framework and less reinventing the wheel. Also nobody wants an ugly representation. You can't copy/paste matrices either. To get an input that recreates the object, we already have\n\n```\nsage: m = matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])\nsage: m\n[0 0 0]\n[0 0 0]\n[1 0 0]\n[0 1 0]\n[0 0 1]\nsage: sage_input(m)\nmatrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])\n```",
    "created_at": "2013-03-13T16:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170728",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

I saw your email but #14040 has already been merged. What I'm saying is, there should be more integration into the existing framework and less reinventing the wheel. Also nobody wants an ugly representation. You can't copy/paste matrices either. To get an input that recreates the object, we already have

```
sage: m = matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
sage: m
[0 0 0]
[0 0 0]
[1 0 0]
[0 1 0]
[0 0 1]
sage: sage_input(m)
matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
```



---

archive/issue_comments_170729.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHow about a %magic to switch to the sage input representation to the displayhook, e.g.:\n\n```\nsage: %sage_input on\nsage: m = matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])\nsage: m\nmatrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])\n```\nor perhaps both (if `sage_input` differs from `_repr_`)",
    "created_at": "2013-03-13T16:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170729",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

How about a %magic to switch to the sage input representation to the displayhook, e.g.:

```
sage: %sage_input on
sage: m = matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
sage: m
matrix(ZZ, [[0, 0, 0], [0, 0, 0], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
```
or perhaps both (if `sage_input` differs from `_repr_`)



---

archive/issue_comments_170730.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't reinventing the wheel... Then I prefere a nice LaTeX representation too but with some objects the LaTeX compilation is very slow.\nThen thanks to the method\n\n```\nsage: sage_input(m)\n```\nI didn't know but... after try...\n\n```\nsage: R = NonCommutativeSymmetricFunctions(QQ).R()\nsage: a = R[1]**3; a\nR  + R   + R   + R\n *    **     *    ***\n *    *     **\n *\nsage: %pcp\n'Pretty Console Print' is uninstalled\nsage: sage_input(a)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-10-7eccf1bd1684> in <module>()\n----> 1 sage_input(a)\n\n/home/priezjea/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/misc/sage_input.pyc in sage_input(x, preparse, verify, allow_locals)\n    252     if not verify:\n    253         sib = SageInputBuilder(allow_locals=allow_locals, preparse=preparse)\n--> 254         return sib.result(sib(x))\n    255 \n    256     # In verify mode, we actually compute and verify the answer with\n\n/home/priezjea/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/misc/sage_input.pyc in __call__(self, x, coerced)\n    540             return SIE_literal_stringrep(self, loc_name)\n    541         else:\n--> 542             raise ValueError, \"Can't convert %r to sage_input form\"%x\n    543 \n    544     def preparse(self):\n\nValueError: Can't convert R[1, 1, 1] + R[1, 2] + R[2, 1] + R[3] to sage_input form\n```\n\nand \n\n```\nsage: R[1]**3\nR[1, 1, 1] + R[1, 2] + R[2, 1] + R[3]\n```\ncan be easily be copy.\n\nSo I don't say I invented something... I just purpose something to work (In my case) easily with linear combination.",
    "created_at": "2013-03-13T16:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170730",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't reinventing the wheel... Then I prefere a nice LaTeX representation too but with some objects the LaTeX compilation is very slow.
Then thanks to the method

```
sage: sage_input(m)
```
I didn't know but... after try...

```
sage: R = NonCommutativeSymmetricFunctions(QQ).R()
sage: a = R[1]**3; a
R  + R   + R   + R
 *    **     *    ***
 *    *     **
 *
sage: %pcp
'Pretty Console Print' is uninstalled
sage: sage_input(a)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-10-7eccf1bd1684> in <module>()
----> 1 sage_input(a)

/home/priezjea/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/misc/sage_input.pyc in sage_input(x, preparse, verify, allow_locals)
    252     if not verify:
    253         sib = SageInputBuilder(allow_locals=allow_locals, preparse=preparse)
--> 254         return sib.result(sib(x))
    255 
    256     # In verify mode, we actually compute and verify the answer with

/home/priezjea/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/misc/sage_input.pyc in __call__(self, x, coerced)
    540             return SIE_literal_stringrep(self, loc_name)
    541         else:
--> 542             raise ValueError, "Can't convert %r to sage_input form"%x
    543 
    544     def preparse(self):

ValueError: Can't convert R[1, 1, 1] + R[1, 2] + R[2, 1] + R[3] to sage_input form
```

and 

```
sage: R[1]**3
R[1, 1, 1] + R[1, 2] + R[2, 1] + R[3]
```
can be easily be copy.

So I don't say I invented something... I just purpose something to work (In my case) easily with linear combination.



---

archive/issue_comments_170731.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSo the bug is that `NonCommutativeSymmetricFunctions` doesn't define its own Sage input representation (define `_sage_input_`). The ascii art should be the default (and only) print representation.",
    "created_at": "2013-03-13T16:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170731",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

So the bug is that `NonCommutativeSymmetricFunctions` doesn't define its own Sage input representation (define `_sage_input_`). The ascii art should be the default (and only) print representation.



---

archive/issue_events_199178.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-03-13T16:47:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "title_is": "Fix sage_input and pretty print for NonCommutativeSymmetricFunctions, others.",
    "title_was": "Simple Ascii-Art",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199178"
}
```



---

archive/issue_comments_170732.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI like the idea of a magic function \"%sage_input on\". And if every thing is ascii-art... I have some question:\n\n1 - The `_repr_` method return (and must return) a string and it is too poor to produce an efficient and usefull ascii-art output. We could image use some baseline notion or ... My opinion is an ascii-art output must be a special class like PrettyConsoleRepr or whatever which can be improve by heritage. (That is not available with string.) --> That why my opinion is we don't have to use `_repr_` but anything else.\n\n2 - How to use your code to get (easily) a list, a dict or whatever of some objects with an ascii-art output ? Your code implement only a hack for Matrix (or it was before...) no? --> If it is true my code suggests a solution (may be a bad one...)\n\n(Sorry for my very bad english)",
    "created_at": "2013-03-14T16:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170732",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:7" align="right">comment:7</div>

I like the idea of a magic function "%sage_input on". And if every thing is ascii-art... I have some question:

1 - The `_repr_` method return (and must return) a string and it is too poor to produce an efficient and usefull ascii-art output. We could image use some baseline notion or ... My opinion is an ascii-art output must be a special class like PrettyConsoleRepr or whatever which can be improve by heritage. (That is not available with string.) --> That why my opinion is we don't have to use `_repr_` but anything else.

2 - How to use your code to get (easily) a list, a dict or whatever of some objects with an ascii-art output ? Your code implement only a hack for Matrix (or it was before...) no? --> If it is true my code suggests a solution (may be a bad one...)

(Sorry for my very bad english)



---

archive/issue_comments_170733.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI am a bit new on this discussion, but I want to add my contribution.\n\nI think having `` _pretty_repr_`` as a plus for combinatorial objects is a good idea and useful. It is not the same as ``_repr_``. \n\nFirst, you don't want to change the repr of every combinatorial objects to have pretty prints, this will just break everything every where. (I am thinking of trees, Dyck paths, partitions...). Most objects already had a way being pretty printed, it was just not centralized and could not be used in linear combinations.\n\nI actually think having the two ``_repr_`` and ``_pretty_repr_`` is useful. I have started to work with Jean-Baptiste's patch and depending on what I want to do with the output, I use both the pretty prints and usal prints.",
    "created_at": "2013-03-15T09:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170733",
    "user": "https://github.com/VivianePons"
}
```

<div id="comment:8" align="right">comment:8</div>

I am a bit new on this discussion, but I want to add my contribution.

I think having `` _pretty_repr_`` as a plus for combinatorial objects is a good idea and useful. It is not the same as ``_repr_``. 

First, you don't want to change the repr of every combinatorial objects to have pretty prints, this will just break everything every where. (I am thinking of trees, Dyck paths, partitions...). Most objects already had a way being pretty printed, it was just not centralized and could not be used in linear combinations.

I actually think having the two ``_repr_`` and ``_pretty_repr_`` is useful. I have started to work with Jean-Baptiste's patch and depending on what I want to do with the output, I use both the pretty prints and usal prints.



---

archive/issue_comments_170734.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@vbraun](#comment:1):\n> Whats the difference between `_repr_`, `_pretty_repr_normal_`, and `_pretty_repr_term_`? I think there should be only one `_repr_`, using ascii art unconditionally if printing the object benefits from it. Why would you want to turn it off? I don't see the need for a different display handler, we aleady have one that does handle ascii art. \n\nThere is definitely a need for a configurable display. In combinatorics\ndepending on the context we really need to be able to be able to print various\nobject in several different ways: The simplest example is\npartitions. Sometimes you need to see:\n   (3,3,2,1,1)\nsometime you need\n\n```\n   ###\n   ###\n   ##\n   #\n   #\n```\nor if you are french\n\n```\n   #\n   #\n   ##\n   ###\n   ###\n```\nAnother example is graphs. Currently we only have\n   Graph on 6 vertices\nProbably many user will rather have\n   Graph on 6 vertices with 5 edges\nOr to see the incidence matrix...\n\nSo I definitely see a need for configurable output.\n\nFlorent",
    "created_at": "2013-03-20T13:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170734",
    "user": "https://github.com/hivert"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@vbraun](#comment:1):
> Whats the difference between `_repr_`, `_pretty_repr_normal_`, and `_pretty_repr_term_`? I think there should be only one `_repr_`, using ascii art unconditionally if printing the object benefits from it. Why would you want to turn it off? I don't see the need for a different display handler, we aleady have one that does handle ascii art. 

There is definitely a need for a configurable display. In combinatorics
depending on the context we really need to be able to be able to print various
object in several different ways: The simplest example is
partitions. Sometimes you need to see:
   (3,3,2,1,1)
sometime you need

```
   ###
   ###
   ##
   #
   #
```
or if you are french

```
   #
   #
   ##
   ###
   ###
```
Another example is graphs. Currently we only have
   Graph on 6 vertices
Probably many user will rather have
   Graph on 6 vertices with 5 edges
Or to see the incidence matrix...

So I definitely see a need for configurable output.

Florent



---

archive/issue_comments_170735.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI don't agree with your partition example: It should just print ascii-art (with some cutoff if the tableau gets too large) and provide a method to get the tuple-of-integers. Which you need anyways. And the French should get along with the program and get used to the same notation as the rest of the world ;-)\n\nSeriously, we should first of all think about sane defaults that are as expressive as possible without being overly verbose. Just making everything configurable is a lame cop-out where you  admit that you couldn't be bothered thinking about good defaults. If you want to see some other representation then you can always add an extra method. Why do you want a %magic to always print graphs as incidence matrix if you can just call the `incidence_matrix()` method?",
    "created_at": "2013-03-20T15:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170735",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

I don't agree with your partition example: It should just print ascii-art (with some cutoff if the tableau gets too large) and provide a method to get the tuple-of-integers. Which you need anyways. And the French should get along with the program and get used to the same notation as the rest of the world ;-)

Seriously, we should first of all think about sane defaults that are as expressive as possible without being overly verbose. Just making everything configurable is a lame cop-out where you  admit that you couldn't be bothered thinking about good defaults. If you want to see some other representation then you can always add an extra method. Why do you want a %magic to always print graphs as incidence matrix if you can just call the `incidence_matrix()` method?



---

archive/issue_comments_170736.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI would recommend using the `GlobalOptions` that was setup in #13605 (you can look in `partition.py` or `tableau.py` for examples) to choose been what type of output you want on a global level. I also have some fairly generic code for ascii printing lists of arrays (it's currently sitting inside of #13872 and have been calling the specialized display functions `_repr_diagram()`), which is what you'd want since you'd want to call `partition._repr_` to be consistent with the options specified there. I could separate that out into a separate ticket or copy/paste it here if you'd like.",
    "created_at": "2013-03-20T21:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170736",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

I would recommend using the `GlobalOptions` that was setup in #13605 (you can look in `partition.py` or `tableau.py` for examples) to choose been what type of output you want on a global level. I also have some fairly generic code for ascii printing lists of arrays (it's currently sitting inside of #13872 and have been calling the specialized display functions `_repr_diagram()`), which is what you'd want since you'd want to call `partition._repr_` to be consistent with the options specified there. I could separate that out into a separate ticket or copy/paste it here if you'd like.



---

archive/issue_comments_170737.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@vbraun](#comment:10):\n> I don't agree with your partition example: It should just print ascii-art (with some cutoff if the tableau gets too large) and provide a method to get the tuple-of-integers. Which you need anyways. And the French should get along with the program and get used to the same notation as the rest of the world ;-)\n\nUnforunately, I seems that many combinatorialist agree with me. Please se the beginning of the `sage/combinat/partitions.py` files. There is a `PartitionOptions` dictionary which allows one to configure various thing including the output.",
    "created_at": "2013-03-21T10:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170737",
    "user": "https://github.com/hivert"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@vbraun](#comment:10):
> I don't agree with your partition example: It should just print ascii-art (with some cutoff if the tableau gets too large) and provide a method to get the tuple-of-integers. Which you need anyways. And the French should get along with the program and get used to the same notation as the rest of the world ;-)

Unforunately, I seems that many combinatorialist agree with me. Please se the beginning of the `sage/combinat/partitions.py` files. There is a `PartitionOptions` dictionary which allows one to configure various thing including the output.



---

archive/issue_comments_170738.json:
```json
{
    "body": "new ascii art version.\n\nThat one is compatible with the Braun's displayhook.\n\nIt uses sympy to rewrite expression (or try to rewrite)::\n\n```\nsage: integral(exp(x^2)/(x+1), x)\n\u2320\n\u23ae  \u239b 2\u239e\n\u23ae  \u239dx \u23a0\n\u23ae \u212f\n\u23ae \u2500\u2500\u2500\u2500\u2500 dx\n\u23ae x + 1\n\u2321\n```\n(FIXME:: For that I have to use utf-8 output for that I use a hack in *sage/all_cmdline.py*...)\n\n\nI implement several pretty_repr for combinatorial object and plug that for free_module::\n\n```\nsage: R = NonCommutativeSymmetricFunctions(QQ).ribbon()\nsage: Tableaux.global_options(convention=\"french\")\nsage: R[3,1,1]\nR\n ***\n   *\n   *\nsage: R[3,1,1] * R[2,1,2]\nR      + R\n ***      ***\n   *        *\n   *        ***\n   **         *\n    *         **\n    **\nsage: F = QSym.F()\nsage: F[2,1,2]\nF\n **\n  *\n  **\n```\nThe AsciiArt module (old PrettyConsolRepr) purpose a 'new' option of baseline.",
    "created_at": "2013-04-10T22:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170738",
    "user": "https://github.com/sagetrac-elixyre"
}
```

new ascii art version.

That one is compatible with the Braun's displayhook.

It uses sympy to rewrite expression (or try to rewrite)::

```
sage: integral(exp(x^2)/(x+1), x)
⌠
⎮  ⎛ 2⎞
⎮  ⎝x ⎠
⎮ ℯ
⎮ ───── dx
⎮ x + 1
⌡
```
(FIXME:: For that I have to use utf-8 output for that I use a hack in *sage/all_cmdline.py*...)


I implement several pretty_repr for combinatorial object and plug that for free_module::

```
sage: R = NonCommutativeSymmetricFunctions(QQ).ribbon()
sage: Tableaux.global_options(convention="french")
sage: R[3,1,1]
R
 ***
   *
   *
sage: R[3,1,1] * R[2,1,2]
R      + R
 ***      ***
   *        *
   *        ***
   **         *
    *         **
    **
sage: F = QSym.F()
sage: F[2,1,2]
F
 **
  *
  **
```
The AsciiArt module (old PrettyConsolRepr) purpose a 'new' option of baseline.



---

archive/issue_comments_170739.json:
```json
{
    "body": "Attachment: **[trac_14266_pretty_console_print-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_pretty_console_print-EliX-jbp.patch.gz)**\n\nnew ascii art version",
    "created_at": "2013-04-10T22:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170739",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Attachment: **[trac_14266_pretty_console_print-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_pretty_console_print-EliX-jbp.patch.gz)**

new ascii art version



---

archive/issue_events_199179.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-04-10T22:51:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199179"
}
```



---

archive/issue_events_199180.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-04-10T22:51:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "title_is": "Pretty Console Output --> ascii art",
    "title_was": "Fix sage_input and pretty print for NonCommutativeSymmetricFunctions, others.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199180"
}
```



---

archive/issue_comments_170740.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooks pretty nice! I'm fine with the functionality, but the documentation needs to be improved. Especially since you want to provide other developers a framework to enable ascii art output. \n\nSome of the names are awkward in English. Pretty console representation means that the console is pretty, not the repr(esentation). It would be nice (and it would make writing doctests easier) if we install a global function analogous to `repr()` to get the ascii art representation. I would suggest we call it `display()` and the magic `%display` (instead of `%pcp`, unless you want to use it as a pun on the hallucinogenic drug).\n\nSimilarly, I don't like `__pretty_repr__`. Its not a variant of `__repr__` with pretty output since it returns a specialized object instead of a string. Its also not a Python builtin, so Sage coding style would use only single underscores. How about we call it `_ascii_art_()`? Similarly, `set_display` instead of `set_pretty_repr`.\n\nAlso, since this should be a general framework we should add a default `_ascii_art_` method (with suitable documentation to benefit developers) to `SageObject`. For example (in `sage_object.pyx`):\n\n```\n    def _ascii_art_(self):\n        '''\n        Return an ASCII art representation.\n\n        To implement multi-line ASCII art output in a derived class\n        you must override this method. Unlike :meth:`_repr_`, which is\n        sometimes used for the hash key, the output of\n        :meth:`_ascii_art_` may depend on settings and is allowed to\n        change during runtime. For example,\n        :meth:`~sage.combinat.tableau.Tableaux.set_display` can be\n        used to switch the ASCII art of tableaux between different\n        mathematical conventions.\n\n        OUTPUT:\n\n        An :class:`~sage.misc.ascii_art.AsciiArt` object, see\n        :mod:`sage.misc.ascii_art` for details.\n\n        EXAMPLES:\n\n        You can use the :func:`~sage.misc.ascii_art.display` function\n        to get the ASCII art representation of any object in Sage::\n\n            sage: display(integral(exp(x^2)/(x+1), x))\n            \u2320         \n            \u23ae  \u239b 2\u239e   \n            \u23ae  \u239dx \u23a0   \n            \u23ae \u212f       \n            \u23ae \u2500\u2500\u2500\u2500\u2500 dx\n            \u23ae x + 1   \n            \u2321\n\n        Alternatively, you can use the `%display on/off` magic to\n        switch all output to ASCII art and back::\n        \n            sage: tab = StandardTableaux(3)[2];  tab\n            [[1, 2], [3]]\n            sage: %display on\n            sage: tab\n            1  2\n            3\n            sage: Tableau.set_display(\"normal\")\n            sage: tab\n            +---+\n            | 3 |\n            +---+---+\n            | 1 | 2 |\n            +---+---+\n            sage: %display off\n\n        TESTS::\n\n            sage: 1._ascii_art_()\n            1\n            sage: type(_)\n            sage.misc.ascii_art.AsciiArt\n        '''\n        from sage.misc.ascii_art import AsciiArt\n        return AsciiArt(repr(self))\n```\n\nFinally, `__every__` function must be documented and doctested. Please follow http://www.sagemath.org/doc/developer/conventions.html#docstring-markup-with-rest-and-sphinx for the markup. For example, we use an `OUTPUT:` block instead of `@postcondition`.",
    "created_at": "2013-04-11T09:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170740",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

Looks pretty nice! I'm fine with the functionality, but the documentation needs to be improved. Especially since you want to provide other developers a framework to enable ascii art output. 

Some of the names are awkward in English. Pretty console representation means that the console is pretty, not the repr(esentation). It would be nice (and it would make writing doctests easier) if we install a global function analogous to `repr()` to get the ascii art representation. I would suggest we call it `display()` and the magic `%display` (instead of `%pcp`, unless you want to use it as a pun on the hallucinogenic drug).

Similarly, I don't like `__pretty_repr__`. Its not a variant of `__repr__` with pretty output since it returns a specialized object instead of a string. Its also not a Python builtin, so Sage coding style would use only single underscores. How about we call it `_ascii_art_()`? Similarly, `set_display` instead of `set_pretty_repr`.

Also, since this should be a general framework we should add a default `_ascii_art_` method (with suitable documentation to benefit developers) to `SageObject`. For example (in `sage_object.pyx`):

```
    def _ascii_art_(self):
        '''
        Return an ASCII art representation.

        To implement multi-line ASCII art output in a derived class
        you must override this method. Unlike :meth:`_repr_`, which is
        sometimes used for the hash key, the output of
        :meth:`_ascii_art_` may depend on settings and is allowed to
        change during runtime. For example,
        :meth:`~sage.combinat.tableau.Tableaux.set_display` can be
        used to switch the ASCII art of tableaux between different
        mathematical conventions.

        OUTPUT:

        An :class:`~sage.misc.ascii_art.AsciiArt` object, see
        :mod:`sage.misc.ascii_art` for details.

        EXAMPLES:

        You can use the :func:`~sage.misc.ascii_art.display` function
        to get the ASCII art representation of any object in Sage::

            sage: display(integral(exp(x^2)/(x+1), x))
            ⌠         
            ⎮  ⎛ 2⎞   
            ⎮  ⎝x ⎠   
            ⎮ ℯ       
            ⎮ ───── dx
            ⎮ x + 1   
            ⌡

        Alternatively, you can use the `%display on/off` magic to
        switch all output to ASCII art and back::
        
            sage: tab = StandardTableaux(3)[2];  tab
            [[1, 2], [3]]
            sage: %display on
            sage: tab
            1  2
            3
            sage: Tableau.set_display("normal")
            sage: tab
            +---+
            | 3 |
            +---+---+
            | 1 | 2 |
            +---+---+
            sage: %display off

        TESTS::

            sage: 1._ascii_art_()
            1
            sage: type(_)
            sage.misc.ascii_art.AsciiArt
        '''
        from sage.misc.ascii_art import AsciiArt
        return AsciiArt(repr(self))
```

Finally, `__every__` function must be documented and doctested. Please follow http://www.sagemath.org/doc/developer/conventions.html#docstring-markup-with-rest-and-sphinx for the markup. For example, we use an `OUTPUT:` block instead of `@postcondition`.



---

archive/issue_comments_170741.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@vbraun](#comment:15):\n> Some of the names are awkward in English. Pretty console representation means that the console is pretty, not the repr(esentation). It would be nice (and it would make writing doctests easier) if we install a global function analogous to `repr()` to get the ascii art representation. I would suggest we call it `display()` and the magic `%display` (instead of `%pcp`, unless you want to use it as a pun on the hallucinogenic drug).\n\nI'm not a big fan of `%display`, it's somewhat vague as a true/false. How about `%ascii_art` or have `%display` accept a string input such as `\"ascii_art\"` incase we end up with more display types later on? (I think if you see ascii art, you're trippin' on some `%pcp` O_o )\n\n> \n> Similarly, I don't like `__pretty_repr__`. Its not a variant of `__repr__` with pretty output since it returns a specialized object instead of a string. Its also not a Python builtin, so Sage coding style would use only single underscores. How about we call it `_ascii_art_()`? Similarly, `set_display` instead of `set_pretty_repr`.\n\nI like the `_ascii_art_()`. However I would rather this be converted into using the `GlobalOptions` framework instead of a separate function and attribute (tableaux already has this, and I can do it for Dyck paths if preferred). We can also use this for partitions as well.\n\n> Also, since this should be a general framework we should add a default `_ascii_art_` method (with suitable documentation to benefit developers) to `SageObject`.\n\n+1\n\n`@`Jean-Baptiste\n\nI would also like to see `AsciiArt` inherit from `SageObject` as well, and subsequently use `_repr_` instead of `__repr__` (1 underscore instead of 2). Also I would like to see the trailing whitespace removed from the new lines you've added, but this is not too important. (I like your ascii art in the beginning, too bad it's not of a sage [okay, I'm done with bad puns for now, promise].)\n\nThanks,\n\nTravis",
    "created_at": "2013-04-11T12:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170741",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@vbraun](#comment:15):
> Some of the names are awkward in English. Pretty console representation means that the console is pretty, not the repr(esentation). It would be nice (and it would make writing doctests easier) if we install a global function analogous to `repr()` to get the ascii art representation. I would suggest we call it `display()` and the magic `%display` (instead of `%pcp`, unless you want to use it as a pun on the hallucinogenic drug).

I'm not a big fan of `%display`, it's somewhat vague as a true/false. How about `%ascii_art` or have `%display` accept a string input such as `"ascii_art"` incase we end up with more display types later on? (I think if you see ascii art, you're trippin' on some `%pcp` O_o )

> 
> Similarly, I don't like `__pretty_repr__`. Its not a variant of `__repr__` with pretty output since it returns a specialized object instead of a string. Its also not a Python builtin, so Sage coding style would use only single underscores. How about we call it `_ascii_art_()`? Similarly, `set_display` instead of `set_pretty_repr`.

I like the `_ascii_art_()`. However I would rather this be converted into using the `GlobalOptions` framework instead of a separate function and attribute (tableaux already has this, and I can do it for Dyck paths if preferred). We can also use this for partitions as well.

> Also, since this should be a general framework we should add a default `_ascii_art_` method (with suitable documentation to benefit developers) to `SageObject`.

+1

`@`Jean-Baptiste

I would also like to see `AsciiArt` inherit from `SageObject` as well, and subsequently use `_repr_` instead of `__repr__` (1 underscore instead of 2). Also I would like to see the trailing whitespace removed from the new lines you've added, but this is not too important. (I like your ascii art in the beginning, too bad it's not of a sage [okay, I'm done with bad puns for now, promise].)

Thanks,

Travis



---

archive/issue_comments_170742.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt would be even better if default `_ascii_art_` was deTeXed `_latex_`, rather than just `_repr_`.\n\nI played with `tex2mail` a bit and it was quite nice, although I never got to trying to include it into Sage.",
    "created_at": "2013-04-11T21:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170742",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:17" align="right">comment:17</div>

It would be even better if default `_ascii_art_` was deTeXed `_latex_`, rather than just `_repr_`.

I played with `tex2mail` a bit and it was quite nice, although I never got to trying to include it into Sage.



---

archive/issue_comments_170743.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@novoselt](#comment:17):\n> It would be even better if default `_ascii_art_` was deTeXed `_latex_`, rather than just `_repr_`.\n> I played with `tex2mail` a bit and it was quite nice, although I never got to trying to include it into Sage.\n\nThere are other implementations of that idea, for example AsciiTeX. But that's not what this ticket is about.",
    "created_at": "2013-04-12T08:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170743",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@novoselt](#comment:17):
> It would be even better if default `_ascii_art_` was deTeXed `_latex_`, rather than just `_repr_`.
> I played with `tex2mail` a bit and it was quite nice, although I never got to trying to include it into Sage.

There are other implementations of that idea, for example AsciiTeX. But that's not what this ticket is about.



---

archive/issue_comments_170744.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment:16):\n> I'm not a big fan of `%display`, it's somewhat vague as a true/false. How about `%ascii_art` or have `%display` accept a string input such as `\"ascii_art\"` incase we end up with more display types later on?\n\nSounds good to me. `%display ascii_art` and `%display repr`, perhaps with aliases `on`/`off` for the lazy.",
    "created_at": "2013-04-12T08:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170744",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment:16):
> I'm not a big fan of `%display`, it's somewhat vague as a true/false. How about `%ascii_art` or have `%display` accept a string input such as `"ascii_art"` incase we end up with more display types later on?

Sounds good to me. `%display ascii_art` and `%display repr`, perhaps with aliases `on`/`off` for the lazy.



---

archive/issue_comments_170745.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachment: **[trac_14266_ascii_art_module-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_module-EliX-jbp.patch.gz)**\n\nNew version with several tests for lot of methods... with `AsciiArt` inherit `SageObject `.\nI purpose to use `%display ascii_art` and `display repr` to select one use.\n\nI hope I don't forget anything.\n\nEnjoy.\n\nThanks,\nJean-Baptiste",
    "created_at": "2013-04-29T15:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170745",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachment: **[trac_14266_ascii_art_module-EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_module-EliX-jbp.patch.gz)**

New version with several tests for lot of methods... with `AsciiArt` inherit `SageObject `.
I purpose to use `%display ascii_art` and `display repr` to select one use.

I hope I don't forget anything.

Enjoy.

Thanks,
Jean-Baptiste



---

archive/issue_comments_170746.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI see you are developing your own whitespace style. Unfortunately, its a slap in Guido Rossum's face. Can you have a look at pep8 ( http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)? \n\n```\ndef display_magic_function( self, mode = 'ascii_art'):  # no\ndef display_magic_function(self, mode='ascii_art'):     # yes\n```",
    "created_at": "2013-05-01T05:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170746",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

I see you are developing your own whitespace style. Unfortunately, its a slap in Guido Rossum's face. Can you have a look at pep8 ( http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)? 

```
def display_magic_function( self, mode = 'ascii_art'):  # no
def display_magic_function(self, mode='ascii_art'):     # yes
```



---

archive/issue_comments_170747.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIt is unreadable for you or/and you want and I must code like that???",
    "created_at": "2013-05-02T07:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170747",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:22" align="right">comment:22</div>

It is unreadable for you or/and you want and I must code like that???



---

archive/issue_comments_170748.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIt is not totally unreadable, but reading code that does not follow a consistent styles does require additional mental resources that are better used elsewhere. As annoying as it seems to be on the outset, there have been scientific studies that have found evidence for the benefits of a consistent code style. All large software projects have one, and Sage uses the Python code style.",
    "created_at": "2013-05-02T07:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170748",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

It is not totally unreadable, but reading code that does not follow a consistent styles does require additional mental resources that are better used elsewhere. As annoying as it seems to be on the outset, there have been scientific studies that have found evidence for the benefits of a consistent code style. All large software projects have one, and Sage uses the Python code style.



---

archive/issue_comments_170749.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[trac_14266_ascii_art_module-EliX-jbp (1).patch.gz](https://github.com/sagemath/sage/files/ticket14266/1cca7cfc1b525f5187482fc28dd36f8e.gz)**\n\nI hope it's ok now...",
    "created_at": "2013-05-02T08:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170749",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[trac_14266_ascii_art_module-EliX-jbp (1).patch.gz](https://github.com/sagemath/sage/files/ticket14266/1cca7cfc1b525f5187482fc28dd36f8e.gz)**

I hope it's ok now...



---

archive/issue_comments_170750.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWhat do you mean by \n\n```\n.. TODO::\n\n    revenir dessus..\n```\nThat method looks fine to me. Is there anything left that you want to change?",
    "created_at": "2013-05-02T14:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170750",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

What do you mean by 

```
.. TODO::

    revenir dessus..
```
That method looks fine to me. Is there anything left that you want to change?



---

archive/issue_comments_170751.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSorry I forgot to delete this message. It was when I adapted the text to the code... I have nothing to change.",
    "created_at": "2013-05-02T14:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170751",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:26" align="right">comment:26</div>

Sorry I forgot to delete this message. It was when I adapted the text to the code... I have nothing to change.



---

archive/issue_comments_170752.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nA few more things:\n\n* There's still a few functions without doctests (this includes `_private_methods`).\n* Bullet points needs a blankline before them, in particular, the authors block should be\n\n```\nAUTHORS:\n\n- Jean-Baptiste ...\n```\n* Any block should be in all caps, such as `EXAMPLES::`\n* I'd prefer using triple double-quotes rather than triple single-quotes for consistancy, but this is not a big issue\n* Your commit message should have the description on the first line:\n\n```\ntrac_14266: new version of ascii art module and magic function associated.\n```\n* Very minor and I won't let it hold the patch up, but try not to include any extra trailing whitespace.\n\nThanks.",
    "created_at": "2013-05-02T14:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170752",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

A few more things:

* There's still a few functions without doctests (this includes `_private_methods`).
* Bullet points needs a blankline before them, in particular, the authors block should be

```
AUTHORS:

- Jean-Baptiste ...
```
* Any block should be in all caps, such as `EXAMPLES::`
* I'd prefer using triple double-quotes rather than triple single-quotes for consistancy, but this is not a big issue
* Your commit message should have the description on the first line:

```
trac_14266: new version of ascii art module and magic function associated.
```
* Very minor and I won't let it hold the patch up, but try not to include any extra trailing whitespace.

Thanks.



---

archive/issue_comments_170753.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nIn fact, do not include the trac ticket number in the commit message. Jeroen's merger script will put the correct number there automatically. Just\n\n```\nNew version of ascii art module and associated magic functions\n```",
    "created_at": "2013-05-02T14:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170753",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

In fact, do not include the trac ticket number in the commit message. Jeroen's merger script will put the correct number there automatically. Just

```
New version of ascii art module and associated magic functions
```



---

archive/issue_comments_170754.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@tscrim](#comment:27):\n> A few more things:\n> \n> * There's still a few functions without doctests (this includes `_private_methods`).\n\nI added some test... but sometime when the method it just a capsule:\n\n```\ndef meth(self):\n    return self.other_meth()\n```\nor something similar, I just put `see :meth:other_meth`.\n\n> * Bullet points needs a blankline before them, in particular, the authors block should be\n> \n> ```\n> AUTHORS:\n> \n> - Jean-Baptiste ...\n> ```\n\nI think it's okay now.\n\n> * Any block should be in all caps, such as `EXAMPLES::`\n\nI hope it's okay too.\n> * I'd prefer using triple double-quotes rather than triple single-quotes for consistancy, but this is not a big issue\n\nI try to do that when it's not my files and I think (but I don't verify) it is consistant in mine.\n> * Your commit message should have the description on the first line:\n> \n> ```\n> New version of ascii art module and magic function associated.\n> ```\n\nIn the last patch I put that and this one must work on 5.9.\n\nThanks,\nJean-Baptiste",
    "created_at": "2013-05-06T10:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170754",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@tscrim](#comment:27):
> A few more things:
> 
> * There's still a few functions without doctests (this includes `_private_methods`).

I added some test... but sometime when the method it just a capsule:

```
def meth(self):
    return self.other_meth()
```
or something similar, I just put `see :meth:other_meth`.

> * Bullet points needs a blankline before them, in particular, the authors block should be
> 
> ```
> AUTHORS:
> 
> - Jean-Baptiste ...
> ```

I think it's okay now.

> * Any block should be in all caps, such as `EXAMPLES::`

I hope it's okay too.
> * I'd prefer using triple double-quotes rather than triple single-quotes for consistancy, but this is not a big issue

I try to do that when it's not my files and I think (but I don't verify) it is consistant in mine.
> * Your commit message should have the description on the first line:
> 
> ```
> New version of ascii art module and magic function associated.
> ```

In the last patch I put that and this one must work on 5.9.

Thanks,
Jean-Baptiste



---

archive/issue_comments_170755.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAttachment: **[trac_14266_ascii_art_module-EliX-jbp.2.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_module-EliX-jbp.2.patch.gz)**\n\nI don't like your approach for changing the output, you are monkey-patching sage.misc.displayhook to change its behavior from another module. Thats usually a no-no in production code (unless you cannot control the source that you are patching, which is not the case here). The problem is that if anybody is going to edit sage.misc.displayhook later on, they will inadvertently break your construction since noting in the source code of the displayhook knowns that this is not the actual code that is used when Sage is running. The standard solution to associating state with a function is to use a functionoid, that is, a class with a `__call__` method:\n\n```\nclass FormatObj():\n    def __init__(self):\n        self._display = False\n\n    def set_ascii_art(self, ascii_art):\n        self._display = bool(ascii_art)\n\n    def __call__(self, obj):\n        if self._display:\n             ...\n        else:\n             ....\n\nformat_obj = FormatObj()\n```\nAs a bonus, your code then wouldn't need layers of indirection `format_obj` -> `pretty_format` -> `simple_format_obj`.",
    "created_at": "2013-05-06T10:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170755",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

Attachment: **[trac_14266_ascii_art_module-EliX-jbp.2.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_module-EliX-jbp.2.patch.gz)**

I don't like your approach for changing the output, you are monkey-patching sage.misc.displayhook to change its behavior from another module. Thats usually a no-no in production code (unless you cannot control the source that you are patching, which is not the case here). The problem is that if anybody is going to edit sage.misc.displayhook later on, they will inadvertently break your construction since noting in the source code of the displayhook knowns that this is not the actual code that is used when Sage is running. The standard solution to associating state with a function is to use a functionoid, that is, a class with a `__call__` method:

```
class FormatObj():
    def __init__(self):
        self._display = False

    def set_ascii_art(self, ascii_art):
        self._display = bool(ascii_art)

    def __call__(self, obj):
        if self._display:
             ...
        else:
             ....

format_obj = FormatObj()
```
As a bonus, your code then wouldn't need layers of indirection `format_obj` -> `pretty_format` -> `simple_format_obj`.



---

archive/issue_comments_170756.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI will try to do that but I'm not really sure to understand the good way...\n\nI have an other problem. I think I don't load `display_magic_func.py` at the good place and that fail all tests.",
    "created_at": "2013-05-06T10:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170756",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:31" align="right">comment:31</div>

I will try to do that but I'm not really sure to understand the good way...

I have an other problem. I think I don't load `display_magic_func.py` at the good place and that fail all tests.



---

archive/issue_comments_170757.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe `%display` magic should be defined in `sage.misc.sage_extenison` with an `@line_magic` like the other magics. You shouldn't have to add anything to `sage.all_cmdline`.",
    "created_at": "2013-05-06T14:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170757",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

The `%display` magic should be defined in `sage.misc.sage_extenison` with an `@line_magic` like the other magics. You shouldn't have to add anything to `sage.all_cmdline`.



---

archive/issue_comments_170758.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@sagetrac-elixyre](#comment:29):\n> Replying to [@tscrim](#comment:27):\n> > A few more things:\n> > \n> > * There's still a few functions without doctests (this includes `_private_methods`).\n\n> \n> I added some test... but sometime when the method it just a capsule:\n> \n> ```\n> def meth(self):\n>     return self.other_meth()\n> ```\n> or something similar, I just put `see :meth:other_meth`.\n\nThe need doc*tests* not just docstings (there are still non-trivial methods without tests). However if they are simple wrappers like that, just make it an alias:\n\n```\nother_meth = meth\n```\n\n> > * I'd prefer using triple double-quotes rather than triple single-quotes for consistency, but this is not a big issue\n\n> I try to do that when it's not my files and I think (but I don't verify) it is consistent in mine.\n\nThis is not done in other files you've modified (ex. `tableau.py`), and again, to be consistent with the project as whole, I would recommended using double quotes. However in new files you've created, this is a very minor issue to me (i.e. I won't let it hold up a positive review).\n\nThanks,\n\nTravis",
    "created_at": "2013-05-06T15:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170758",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@sagetrac-elixyre](#comment:29):
> Replying to [@tscrim](#comment:27):
> > A few more things:
> > 
> > * There's still a few functions without doctests (this includes `_private_methods`).

> 
> I added some test... but sometime when the method it just a capsule:
> 
> ```
> def meth(self):
>     return self.other_meth()
> ```
> or something similar, I just put `see :meth:other_meth`.

The need doc*tests* not just docstings (there are still non-trivial methods without tests). However if they are simple wrappers like that, just make it an alias:

```
other_meth = meth
```

> > * I'd prefer using triple double-quotes rather than triple single-quotes for consistency, but this is not a big issue

> I try to do that when it's not my files and I think (but I don't verify) it is consistent in mine.

This is not done in other files you've modified (ex. `tableau.py`), and again, to be consistent with the project as whole, I would recommended using double quotes. However in new files you've created, this is a very minor issue to me (i.e. I won't let it hold up a positive review).

Thanks,

Travis



---

archive/issue_comments_170759.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAttachment: **[trac_14266_ascii_art_13_05_14_EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_14_EliX-jbp.patch.gz)**\n\nI make some modifications to use correctly displayhook.\n\nI have several problems for make tests: I use the fact to be in a terminal to take the width of the window... excepted in test context it seems to be differents...\n\n```\nFile \"ascii_art.py\", line 25, in sage.misc.ascii_art\nFailed example:\n    ascii_art(integrate(n^2/(pi*x),x))\nExpected:\n     2       \n    n *log(x)\n    ---------\n        pi   \nGot:\n    stty: stdin isn't a terminal\n     2       \n    n *log(x)\n    ---------\n        pi \n```\n\nThere is an other points, if we use utf8 in the terminal, it is not utf8 during the tests...\n\nWhy don't pass sage to utf8?\n\nThanks,\nJean-Baptiste",
    "created_at": "2013-05-14T12:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170759",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:34" align="right">comment:34</div>

Attachment: **[trac_14266_ascii_art_13_05_14_EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_14_EliX-jbp.patch.gz)**

I make some modifications to use correctly displayhook.

I have several problems for make tests: I use the fact to be in a terminal to take the width of the window... excepted in test context it seems to be differents...

```
File "ascii_art.py", line 25, in sage.misc.ascii_art
Failed example:
    ascii_art(integrate(n^2/(pi*x),x))
Expected:
     2       
    n *log(x)
    ---------
        pi   
Got:
    stty: stdin isn't a terminal
     2       
    n *log(x)
    ---------
        pi 
```

There is an other points, if we use utf8 in the terminal, it is not utf8 during the tests...

Why don't pass sage to utf8?

Thanks,
Jean-Baptiste



---

archive/issue_comments_170760.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThe doctesting should be mostly utf-8 clean, I think. See also #14153. What exactly is the problem?\n\nThe stty: stdin isn't a terminal comes because the controlling terminal isn't a terminal for doctests. You should set a fixed width (probably 80) independent of the actual terminal size during doctests, something like this:\n\n```\ndef terminal_width():\n    import os, sys\n    from sage.doctest import DOCTEST_MODE\n    isatty = os.isatty(sys.stdout.fileno())\n    if DOCTEST_MODE or not isatty:\n        return 80\n    import fcntl, termios, struct\n    rc = fcntl.ioctl(int(0), termios.TIOCGWINSZ,\n                     struct.pack('HHHH', sys.stdout.fileno(), 0, 0, 0))\n    h, w, hp, wp = struct.unpack('HHHH', rc)\n    return w\n```\n\nThe \"pcp\" abbreviation is still floating around in a few places, can you replace those?",
    "created_at": "2013-05-14T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170760",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">comment:35</div>

The doctesting should be mostly utf-8 clean, I think. See also #14153. What exactly is the problem?

The stty: stdin isn't a terminal comes because the controlling terminal isn't a terminal for doctests. You should set a fixed width (probably 80) independent of the actual terminal size during doctests, something like this:

```
def terminal_width():
    import os, sys
    from sage.doctest import DOCTEST_MODE
    isatty = os.isatty(sys.stdout.fileno())
    if DOCTEST_MODE or not isatty:
        return 80
    import fcntl, termios, struct
    rc = fcntl.ioctl(int(0), termios.TIOCGWINSZ,
                     struct.pack('HHHH', sys.stdout.fileno(), 0, 0, 0))
    h, w, hp, wp = struct.unpack('HHHH', rc)
    return w
```

The "pcp" abbreviation is still floating around in a few places, can you replace those?



---

archive/issue_comments_170761.json:
```json
{
    "body": "Attachment: **[trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)**",
    "created_at": "2013-05-15T08:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170761",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Attachment: **[trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)**



---

archive/issue_comments_170762.json:
```json
{
    "body": "Dependencies: **#8703**",
    "created_at": "2013-05-15T08:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170762",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Dependencies: **#8703**



---

archive/issue_comments_170763.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHi,\n\nI'm really bad with mercurial but it seems to be good...\n\n- Tests works,\n- normally, all methods and functions pass test\n\nI made that module for see quickly trees in terminal so I added `_ascii_art` methods for trees. (depends of #8703).\n\nAnd all \"pcp\" abbreviation are disappear.\n\nThanks,\n\nJean-Baptiste",
    "created_at": "2013-05-15T08:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170763",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:36" align="right">comment:36</div>

Hi,

I'm really bad with mercurial but it seems to be good...

- Tests works,
- normally, all methods and functions pass test

I made that module for see quickly trees in terminal so I added `_ascii_art` methods for trees. (depends of #8703).

And all "pcp" abbreviation are disappear.

Thanks,

Jean-Baptiste



---

archive/issue_comments_170764.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nLooks great! I just have some minor nitpicks:\n* You can actually doctest `_terminal_width()`, it should return 80 in doctest mode.\n* The `revenir dessus` is still there\n* There is a big chunk of commented-out code in `misc/sage_extension.py`, you probably want to delete that, too.\n* Catch-all `except:` statements are not allowed in Sage (the user might have pressed Ctrl-C and a KeyboardException was raised). Jeroen's merger script will check for that...\n\nApart from that it is good to go.",
    "created_at": "2013-05-16T09:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170764",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Looks great! I just have some minor nitpicks:
* You can actually doctest `_terminal_width()`, it should return 80 in doctest mode.
* The `revenir dessus` is still there
* There is a big chunk of commented-out code in `misc/sage_extension.py`, you probably want to delete that, too.
* Catch-all `except:` statements are not allowed in Sage (the user might have pressed Ctrl-C and a KeyboardException was raised). Jeroen's merger script will check for that...

Apart from that it is good to go.



---

archive/issue_events_199181.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-16T09:07:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199181"
}
```



---

archive/issue_comments_170765.json:
```json
{
    "body": "Changed dependencies from **#8703** to **#8703 #14203**",
    "created_at": "2013-05-16T23:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170765",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#8703** to **#8703 #14203**



---

archive/issue_comments_170766.json:
```json
{
    "body": "Reviewer: **Volker Braun, Travis Scrimshaw**",
    "created_at": "2013-05-16T23:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170766",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Volker Braun, Travis Scrimshaw**



---

archive/issue_comments_170767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,10 @@\n    **    **        *    ***     ****\n   **             ***\n ```\n+\n+---\n+\n+Apply:\n+\n+- [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)\n+- [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)\n``````\n",
    "created_at": "2013-05-16T23:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170767",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,10 @@
    **    **        *    ***     ****
   **             ***
 ```
+
+---
+
+Apply:
+
+- [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)
+- [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)
``````




---

archive/issue_comments_170768.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI've uploaded a review patch which makes a variety of changes, including:\n\n- basing this on #14203\n- removed internal functions which are called only once in `*_tree.py`\n- used the global options in `tableau.py`\n- renamed method in `dyck_word.py`\n- docstring formatting fixes\n- takes care of Volker's comments\n\nVolker, would you be willing review my review patch?\n\nThanks,\n\nTravis",
    "created_at": "2013-05-16T23:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170768",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

I've uploaded a review patch which makes a variety of changes, including:

- basing this on #14203
- removed internal functions which are called only once in `*_tree.py`
- used the global options in `tableau.py`
- renamed method in `dyck_word.py`
- docstring formatting fixes
- takes care of Volker's comments

Volker, would you be willing review my review patch?

Thanks,

Travis



---

archive/issue_comments_170769.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nPatchbot:\n\nApply trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-16T23:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170769",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:40" align="right">comment:40</div>

Patchbot:

Apply trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170770.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI get two test failures on sage-5.10.beta3:\n\n```\nsage -t --long devel/sage/sage/doctest/sources.py  # 1 doctest failed\nsage -t --long devel/sage/sage/misc/ascii_art.py  # 1 doctest failed\n```",
    "created_at": "2013-05-17T00:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170770",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">comment:41</div>

I get two test failures on sage-5.10.beta3:

```
sage -t --long devel/sage/sage/doctest/sources.py  # 1 doctest failed
sage -t --long devel/sage/sage/misc/ascii_art.py  # 1 doctest failed
```



---

archive/issue_comments_170771.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nFixed:\n\n```\nsage -t --long misc/ascii_art.py\n    [116 tests, 4.35 s]\nsage -t --long doctest/sources.py\n    [327 tests, 122.27 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\nI also removed all trailing whitespace from `misc/ascii_art.py` and fixed some minor docstring issues.",
    "created_at": "2013-05-17T02:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170771",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Fixed:

```
sage -t --long misc/ascii_art.py
    [116 tests, 4.35 s]
sage -t --long doctest/sources.py
    [327 tests, 122.27 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```
I also removed all trailing whitespace from `misc/ascii_art.py` and fixed some minor docstring issues.



---

archive/issue_comments_170772.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\napply trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-17T09:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170772",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:43" align="right">comment:43</div>

apply trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170773.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nTravis, your patch only applies with fuzz 2. Can you rebase it against the newest Sage beta?",
    "created_at": "2013-05-17T09:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170773",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">comment:44</div>

Travis, your patch only applies with fuzz 2. Can you rebase it against the newest Sage beta?



---

archive/issue_comments_170774.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nDone. (There is probably a minor conflict over one of the tableau patches I had above it in my queue.)",
    "created_at": "2013-05-17T14:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170774",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

Done. (There is probably a minor conflict over one of the tableau patches I had above it in my queue.)



---

archive/issue_comments_170775.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nFor patchbot:\n\nApply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-17T20:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170775",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:46" align="right">comment:46</div>

For patchbot:

Apply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170776.json:
```json
{
    "body": "Changed dependencies from **#8703 #14203** to **#8703 #14203 #14574**",
    "created_at": "2013-05-17T20:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170776",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#8703 #14203** to **#8703 #14203 #14574**



---

archive/issue_comments_170777.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI found that the fuzz was due to #14574, and is now based off of that patch.\n\nFor patchbot:\n\nApply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-17T20:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170777",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">comment:47</div>

I found that the fuzz was due to #14574, and is now based off of that patch.

For patchbot:

Apply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170778.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThe patchbot seems to have a bug that prevents it from seeing the first patch. I mentioned it to Robert.",
    "created_at": "2013-05-17T20:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170778",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:48" align="right">comment:48</div>

The patchbot seems to have a bug that prevents it from seeing the first patch. I mentioned it to Robert.



---

archive/issue_comments_170779.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nApply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-18T07:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170779",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:49" align="right">comment:49</div>

Apply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170780.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nWait, now the patch applies without #14574 but when I add the new dependency then I get fuzz 2.",
    "created_at": "2013-05-18T09:34:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170780",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:50" align="right">comment:50</div>

Wait, now the patch applies without #14574 but when I add the new dependency then I get fuzz 2.



---

archive/issue_comments_170781.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nMaybe I uploaded the patch before I refreshed it...try this one. If not, then I guess we'll just remove #14574 as a dependency.\n\nApply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch",
    "created_at": "2013-05-18T21:52:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170781",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:51" align="right">comment:51</div>

Maybe I uploaded the patch before I refreshed it...try this one. If not, then I guess we'll just remove #14574 as a dependency.

Apply: trac_14266_ascii_art_13_05_15_EliX-jbp.patch trac_14266-ascii_art-review-ts.patch



---

archive/issue_comments_170782.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nNow the review patch doesn't apply at all. Removing #14574  is also not an option since that patch has already been reviewed.",
    "created_at": "2013-05-18T22:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170782",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">comment:52</div>

Now the review patch doesn't apply at all. Removing #14574  is also not an option since that patch has already been reviewed.



---

archive/issue_comments_170783.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nSorry, accidentally applied against beta2 instead of beta3. The reviewer patch actually applies, but still only with fuzz 2.",
    "created_at": "2013-05-18T22:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170783",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Sorry, accidentally applied against beta2 instead of beta3. The reviewer patch actually applies, but still only with fuzz 2.



---

archive/issue_comments_170784.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nOkay, this one should apply cleanly. If it doesn't, I'll give you my immortal soul. :P",
    "created_at": "2013-05-21T18:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170784",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:54" align="right">comment:54</div>

Okay, this one should apply cleanly. If it doesn't, I'll give you my immortal soul. :P



---

archive/issue_comments_170785.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nUh-oh, I still get fuzz 2 with sage-5.10.beta4. One immortal soul, please :-P",
    "created_at": "2013-05-21T18:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170785",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:55" align="right">comment:55</div>

Uh-oh, I still get fuzz 2 with sage-5.10.beta4. One immortal soul, please :-P



---

archive/issue_comments_170786.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nNow I'll have to go steal it back. It should me take precisely as long as I need to install `5.4.beta4` to get it to you.",
    "created_at": "2013-05-21T18:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170786",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">comment:56</div>

Now I'll have to go steal it back. It should me take precisely as long as I need to install `5.4.beta4` to get it to you.



---

archive/issue_comments_170787.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nDone. Sorry it took so long, I had to beat a guy at a fiddle contest for my immortal soul.",
    "created_at": "2013-05-22T00:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170787",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:57" align="right">comment:57</div>

Done. Sorry it took so long, I had to beat a guy at a fiddle contest for my immortal soul.



---

archive/issue_events_199182.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-22T10:46:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199182"
}
```



---

archive/issue_events_199183.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-22T10:46:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199183"
}
```



---

archive/issue_comments_170788.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nLooks good! You can have your soul back ;-)",
    "created_at": "2013-05-22T10:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170788",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:58" align="right">comment:58</div>

Looks good! You can have your soul back ;-)



---

archive/issue_comments_170789.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI think most (all?) of the `# not tested: works only in interactive shell` examples can actually be tested using a `pexpect` interface, for example `sage0`. I'm not going to set the ticket to needs_work for this, but it could be addressed in the future.",
    "created_at": "2013-05-22T12:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170789",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

I think most (all?) of the `# not tested: works only in interactive shell` examples can actually be tested using a `pexpect` interface, for example `sage0`. I'm not going to set the ticket to needs_work for this, but it could be addressed in the future.



---

archive/issue_comments_170790.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nHey Volker,\n\nThanks for doing the review and for returning my immortal soul. :D\n\nHey Jeroen,\n\nI'm not quite sure what you mean, could you elaborate/give an example?\n\nThanks,\n\nTravis",
    "created_at": "2013-05-22T15:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170790",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">comment:60</div>

Hey Volker,

Thanks for doing the review and for returning my immortal soul. :D

Hey Jeroen,

I'm not quite sure what you mean, could you elaborate/give an example?

Thanks,

Travis



---

archive/issue_events_199184.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-27T06:30:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199184"
}
```



---

archive/issue_events_199185.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-27T06:30:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199185"
}
```



---

archive/issue_comments_170791.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nNeeds to be rebased for sage-5.10.beta5",
    "created_at": "2013-05-27T14:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170791",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:62" align="right">comment:62</div>

Needs to be rebased for sage-5.10.beta5



---

archive/issue_comments_170792.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nDoctest example:\n\n```\nsage: sage0.eval(\"%display ascii_art\")\n''\nsage: sage0.eval(\"var('i')\")\n'i'\nsage: print sage0.eval(\"sum(factorial(i)*x^i, i, 0, 10)\")\n10           9          8         7        6        5       4      3 \n3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x  \n\n     2        \n+ 2*x  + x + 1\n```",
    "created_at": "2013-05-27T15:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170792",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Doctest example:

```
sage: sage0.eval("%display ascii_art")
''
sage: sage0.eval("var('i')")
'i'
sage: print sage0.eval("sum(factorial(i)*x^i, i, 0, 10)")
10           9          8         7        6        5       4      3 
3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x  

     2        
+ 2*x  + x + 1
```



---

archive/issue_comments_170793.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nOr, even better, use a test shell (does not require a separately spawned Sage session):\n\n```\nsage: from sage.misc.interpreter import get_test_shell\nsage: shell = get_test_shell()\nsage: shell.run_cell('%display ascii_art')\nsage: shell.run_cell('var(\"i\")')\nsage: shell.run_cell('sum(factorial(i)*x^i, i, 0, 10)')\n```\nand so on.",
    "created_at": "2013-05-27T15:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170793",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:64" align="right">comment:64</div>

Or, even better, use a test shell (does not require a separately spawned Sage session):

```
sage: from sage.misc.interpreter import get_test_shell
sage: shell = get_test_shell()
sage: shell.run_cell('%display ascii_art')
sage: shell.run_cell('var("i")')
sage: shell.run_cell('sum(factorial(i)*x^i, i, 0, 10)')
```
and so on.



---

archive/issue_comments_170794.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@vbraun](#comment:62):\n> Needs to be rebased for sage-5.10.beta5\n\nAre you sure? It applies perfectly fine on a first trial of sage-5.10.rc0",
    "created_at": "2013-05-27T20:21:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170794",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@vbraun](#comment:62):
> Needs to be rebased for sage-5.10.beta5

Are you sure? It applies perfectly fine on a first trial of sage-5.10.rc0



---

archive/issue_events_199186.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-27T21:00:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199186"
}
```



---

archive/issue_events_199187.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-27T21:00:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199187"
}
```



---

archive/issue_comments_170795.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nAttachment: **[trac_14266-ascii_art-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)**\n\nI've uploaded a new version of the review patch which uses the test shell. Since this changes doctests, and we (might) need to be rebased to `5.10.beta5` (which I'm building right now), I'm setting this back to needs review.",
    "created_at": "2013-05-27T21:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170795",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:66" align="right">comment:66</div>

Attachment: **[trac_14266-ascii_art-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)**

I've uploaded a new version of the review patch which uses the test shell. Since this changes doctests, and we (might) need to be rebased to `5.10.beta5` (which I'm building right now), I'm setting this back to needs review.



---

archive/issue_events_199188.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-27T21:01:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199188"
}
```



---

archive/issue_events_199189.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-27T21:01:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199189"
}
```



---

archive/issue_comments_170796.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nOk, applies to plain sage-5.10.beta5. It does conflict with #14523, though.\n\nChanges look good to me.",
    "created_at": "2013-05-27T21:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170796",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:68" align="right">comment:68</div>

Ok, applies to plain sage-5.10.beta5. It does conflict with #14523, though.

Changes look good to me.



---

archive/issue_events_199190.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-27T21:11:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199190"
}
```



---

archive/issue_events_199191.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-27T21:11:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199191"
}
```



---

archive/issue_comments_170797.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI just noticed that the sympy output is dependent on the terminal width:\n\n```\nsage -t sage/misc/ascii_art.py\n**********************************************************************\nFile \"sage/misc/ascii_art.py\", line 45, in sage.misc.ascii_art\nFailed example:\n    shell.run_cell('sum(factorial(i)*x^i, i, 0, 10)')\nExpected:\n             10           9          8         7        6        5       4      3\n    3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x\n    <BLANKLINE>\n         2\n    + 2*x  + x + 1\nGot:\n             10           9          8         7        6        5       4      3      2        \n    3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x  + 2*x  + x + 1\n**********************************************************************\nFile \"sage/misc/ascii_art.py\", line 67, in sage.misc.ascii_art\n```",
    "created_at": "2013-05-28T10:24:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170797",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:69" align="right">comment:69</div>

I just noticed that the sympy output is dependent on the terminal width:

```
sage -t sage/misc/ascii_art.py
**********************************************************************
File "sage/misc/ascii_art.py", line 45, in sage.misc.ascii_art
Failed example:
    shell.run_cell('sum(factorial(i)*x^i, i, 0, 10)')
Expected:
             10           9          8         7        6        5       4      3
    3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x
    <BLANKLINE>
         2
    + 2*x  + x + 1
Got:
             10           9          8         7        6        5       4      3      2        
    3628800*x   + 362880*x  + 40320*x  + 5040*x  + 720*x  + 120*x  + 24*x  + 6*x  + 2*x  + x + 1
**********************************************************************
File "sage/misc/ascii_art.py", line 67, in sage.misc.ascii_art
```



---

archive/issue_events_199192.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T10:24:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199192"
}
```



---

archive/issue_events_199193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T10:24:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199193"
}
```



---

archive/issue_comments_170798.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,3 +22,4 @@\n \n - [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)\n - [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)\n+- [attachment: trac_14266_terminal_width.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)\n``````\n",
    "created_at": "2013-05-28T10:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170798",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,3 +22,4 @@
 
 - [attachment: trac_14266_ascii_art_13_05_15_EliX-jbp.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_13_05_15_EliX-jbp.patch.gz)
 - [attachment: trac_14266-ascii_art-review-ts.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266-ascii_art-review-ts.patch.gz)
+- [attachment: trac_14266_terminal_width.patch](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)
``````




---

archive/issue_events_199194.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T10:57:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199194"
}
```



---

archive/issue_events_199195.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-05-28T10:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199195"
}
```



---

archive/issue_comments_170799.json:
```json
{
    "body": "Attachment: **[trac_14266_terminal_width.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)**\n\nInitial patch",
    "created_at": "2013-05-28T10:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170799",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_14266_terminal_width.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_terminal_width.patch.gz)**

Initial patch



---

archive/issue_comments_170800.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nLast patch disables sympy terminal width detection during doctesting.\n\nIf you are happy with it, set ticket to positive review.\n\nPatchbot: \n\napply trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch, trac_14266_terminal_width.patch",
    "created_at": "2013-05-28T10:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170800",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:71" align="right">comment:71</div>

Last patch disables sympy terminal width detection during doctesting.

If you are happy with it, set ticket to positive review.

Patchbot: 

apply trac_14266_ascii_art_13_05_15_EliX-jbp.patch, trac_14266-ascii_art-review-ts.patch, trac_14266_terminal_width.patch



---

archive/issue_events_199196.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-28T14:42:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199196"
}
```



---

archive/issue_events_199197.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-28T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199197"
}
```



---

archive/issue_comments_170801.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nLooks good to me. Thanks Volker.",
    "created_at": "2013-05-28T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170801",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:72" align="right">comment:72</div>

Looks good to me. Thanks Volker.



---

archive/issue_comments_170802.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@tscrim](#comment:72):\n> Looks good to me. Thanks Volker.\n\nBeware though that trac_14266_terminal_width.patch introduces trailing whitespace.",
    "created_at": "2013-05-29T16:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170802",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@tscrim](#comment:72):
> Looks good to me. Thanks Volker.

Beware though that trac_14266_terminal_width.patch introduces trailing whitespace.



---

archive/issue_comments_170803.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nIf you don't like trailing whitespace then feel free to work on commit hooks that check for it.",
    "created_at": "2013-05-29T17:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170803",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:74" align="right">comment:74</div>

If you don't like trailing whitespace then feel free to work on commit hooks that check for it.



---

archive/issue_comments_170804.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@vbraun](#comment:74):\n> If you don't like trailing whitespace then feel free to work on commit hooks that check for it.\n\nThe sage dev scripts will strip them away for us. Which is how I actually detected this for I got a conflict when importing stuff into sage-git ... Do whatever you wish here; I just thought I might as well report the information.",
    "created_at": "2013-05-29T17:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170804",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@vbraun](#comment:74):
> If you don't like trailing whitespace then feel free to work on commit hooks that check for it.

The sage dev scripts will strip them away for us. Which is how I actually detected this for I got a conflict when importing stuff into sage-git ... Do whatever you wish here; I just thought I might as well report the information.



---

archive/issue_comments_170805.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nIn case anyone cares, here is the version without trailing whitespaces I put in the Sage-Combinat queue to ease my playing with importing into git.\n\nhttp://combinat.sagemath.org/patches/file/tip/trac_14266_terminal_width.patch",
    "created_at": "2013-05-29T18:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170805",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:76" align="right">comment:76</div>

In case anyone cares, here is the version without trailing whitespaces I put in the Sage-Combinat queue to ease my playing with importing into git.

http://combinat.sagemath.org/patches/file/tip/trac_14266_terminal_width.patch



---

archive/issue_events_199198.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-06T12:32:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199198"
}
```



---

archive/issue_events_199199.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-06T12:32:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14266#event-199199"
}
```



---

archive/issue_comments_170806.json:
```json
{
    "body": "Merged: **sage-5.11.beta0**",
    "created_at": "2013-06-06T12:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170806",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.11.beta0**



---

archive/issue_comments_170807.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nthe ascii_art doesn't work with notebook.\nI purpose this patch but it is may be not a good solution.",
    "created_at": "2013-06-22T11:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170807",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:78" align="right">comment:78</div>

the ascii_art doesn't work with notebook.
I purpose this patch but it is may be not a good solution.



---

archive/issue_comments_170808.json:
```json
{
    "body": "Attachment: **[trac_14266_ascii_art_with_notebook.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_with_notebook.patch.gz)**",
    "created_at": "2013-06-22T11:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14266#issuecomment-170808",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Attachment: **[trac_14266_ascii_art_with_notebook.patch.gz](https://github.com/sagemath/sage/files/ticket14266/trac_14266_ascii_art_with_notebook.patch.gz)**
