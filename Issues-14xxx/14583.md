# Issue 14583: Permutation('()') and Permutation(''), each in its own way, fail to return the identity in S_0

archive/issues_014379.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "I brought this up in #8392 but was told to post it as a new ticket.\n\n```\nsage: Permutation([])  # This is be the identity permutation in S_0.\n[]\nsage: Permutation([]).cycle_string()    # OK.\n'()'\nsage: Permutation('()')    # This should give the S_0 identity back -- but it doesn't.\n[1]\nsage: Permutation('')     # Does this maybe? No.\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-29-3df27d9d4d7a> in <module>()\n----> 1 Permutation('')\n\n/home/darij/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in Permutation(l, check_input)\n    430         cycle_list = []\n    431         for c in cycles:\n--> 432             cycle_list.append(map(int, c.split(\",\")))\n    433 \n    434         return from_cycles(max([max(c) for c in cycle_list]), cycle_list)\n\nValueError: invalid literal for int() with base 10: ''\nsage: Permutation(())       # What about this?\n[1]\n\n```\n\nA corner case it is, but I think it should be done right...\n\nThis is now fixed in the attached patch.\n\n* Apply: [attachment: trac_14583-s0-v2.patch](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)\n\nCC:  @sagetrac-sage-combinat @tscrim @nthiery\n\nKeywords: **combinat**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Darij Grinberg**\n\nMerged: **sage-5.10.beta4**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14583_\n\n",
    "closed_at": "2013-05-19T08:37:54Z",
    "created_at": "2013-05-15T02:56:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Permutation('()') and Permutation(''), each in its own way, fail to return the identity in S_0",
    "type": "issue",
    "updated_at": "2013-05-19T08:37:54Z",
    "url": "https://github.com/sagemath/sage/issues/14583",
    "user": "https://github.com/darijgr"
}
```
I brought this up in #8392 but was told to post it as a new ticket.

```
sage: Permutation([])  # This is be the identity permutation in S_0.
[]
sage: Permutation([]).cycle_string()    # OK.
'()'
sage: Permutation('()')    # This should give the S_0 identity back -- but it doesn't.
[1]
sage: Permutation('')     # Does this maybe? No.
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-29-3df27d9d4d7a> in <module>()
----> 1 Permutation('')

/home/darij/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in Permutation(l, check_input)
    430         cycle_list = []
    431         for c in cycles:
--> 432             cycle_list.append(map(int, c.split(",")))
    433 
    434         return from_cycles(max([max(c) for c in cycle_list]), cycle_list)

ValueError: invalid literal for int() with base 10: ''
sage: Permutation(())       # What about this?
[1]

```

A corner case it is, but I think it should be done right...

This is now fixed in the attached patch.

* Apply: [attachment: trac_14583-s0-v2.patch](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)

CC:  @sagetrac-sage-combinat @tscrim @nthiery

Keywords: **combinat**

Reviewer: **Nathann Cohen**

Author: **Darij Grinberg**

Merged: **sage-5.10.beta4**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/14583_





---

archive/issue_events_206488.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-15T02:56:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206488"
}
```



---

archive/issue_events_206489.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-15T02:56:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206489"
}
```



---

archive/issue_events_206490.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-15T02:56:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206490"
}
```



---

archive/issue_events_206491.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-15T02:56:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206491"
}
```



---

archive/issue_events_206492.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2013-05-15T02:56:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "subject": "https://github.com/darijgr",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206492"
}
```



---

archive/issue_comments_176777.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,17 @@\n I brought this up in #8392 but was told to post it as a new ticker.\n \n-{{{sage: Permutation([])  # This is be the identity permutation in S_0.\n+```\n+sage: Permutation([])  # This is be the identity permutation in S_0.\n []\n sage: Permutation([]).cycle_string()    # OK.\n '()'\n sage: Permutation('()')    # This should give the S_0 identity back -- but it doesn't.\n [1]\n sage: Permutation('')     # Does this maybe? No.\n-\n----\n+---------------------------------------------------------------------------\n ValueError                                Traceback (most recent call last)\n <ipython-input-29-3df27d9d4d7a> in <module>()\n-\n----\n+----> 1 Permutation('')\n \n /home/darij/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in Permutation(l, check_input)\n     430         cycle_list = []\n@@ -24,6 +23,7 @@\n ValueError: invalid literal for int() with base 10: ''\n sage: Permutation(())       # What about this?\n [1]\n-}}}\n+\n+```\n \n A corner case it is, but I think it should be done right...\n``````\n",
    "created_at": "2013-05-15T02:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176777",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,17 @@
 I brought this up in #8392 but was told to post it as a new ticker.
 
-{{{sage: Permutation([])  # This is be the identity permutation in S_0.
+```
+sage: Permutation([])  # This is be the identity permutation in S_0.
 []
 sage: Permutation([]).cycle_string()    # OK.
 '()'
 sage: Permutation('()')    # This should give the S_0 identity back -- but it doesn't.
 [1]
 sage: Permutation('')     # Does this maybe? No.
-
----
+---------------------------------------------------------------------------
 ValueError                                Traceback (most recent call last)
 <ipython-input-29-3df27d9d4d7a> in <module>()
-
----
+----> 1 Permutation('')
 
 /home/darij/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in Permutation(l, check_input)
     430         cycle_list = []
@@ -24,6 +23,7 @@
 ValueError: invalid literal for int() with base 10: ''
 sage: Permutation(())       # What about this?
 [1]
-}}}
+
+```
 
 A corner case it is, but I think it should be done right...
``````




---

archive/issue_comments_176778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I brought this up in #8392 but was told to post it as a new ticker.\n+I brought this up in #8392 but was told to post it as a new ticket.\n \n ```\n sage: Permutation([])  # This is be the identity permutation in S_0.\n``````\n",
    "created_at": "2013-05-15T02:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176778",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I brought this up in #8392 but was told to post it as a new ticker.
+I brought this up in #8392 but was told to post it as a new ticket.
 
 ```
 sage: Permutation([])  # This is be the identity permutation in S_0.
``````




---

archive/issue_comments_176779.json:
```json
{
    "body": "Attachment: **[trac_14583-s0-v1.patch.gz](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v1.patch.gz)**\n\nfixes for a couple of these bugs (not sure there aren't any others)",
    "created_at": "2013-05-15T03:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176779",
    "user": "https://github.com/darijgr"
}
```

Attachment: **[trac_14583-s0-v1.patch.gz](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v1.patch.gz)**

fixes for a couple of these bugs (not sure there aren't any others)



---

archive/issue_comments_176780.json:
```json
{
    "body": "Author: **Darij Grinberg**",
    "created_at": "2013-05-15T03:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176780",
    "user": "https://github.com/darijgr"
}
```

Author: **Darij Grinberg**



---

archive/issue_events_206493.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-15T03:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206493"
}
```



---

archive/issue_comments_176781.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,3 +27,5 @@\n ```\n \n A corner case it is, but I think it should be done right...\n+\n+This is now fixed in the attached patch.\n``````\n",
    "created_at": "2013-05-15T03:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176781",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,3 +27,5 @@
 ```
 
 A corner case it is, but I think it should be done right...
+
+This is now fixed in the attached patch.
``````




---

archive/issue_comments_176782.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHelloooooooooooooooooooo !!\n\nMake sense ! Though shouldn't `if len(flattened_and_sorted) == 0:` in `from_cycles` return the identity on `n` elements instead ? If the user asked for `n` elements, after all...\n\nNathann",
    "created_at": "2013-05-15T07:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176782",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Helloooooooooooooooooooo !!

Make sense ! Though shouldn't `if len(flattened_and_sorted) == 0:` in `from_cycles` return the identity on `n` elements instead ? If the user asked for `n` elements, after all...

Nathann



---

archive/issue_events_206494.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-15T07:54:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206494"
}
```



---

archive/issue_events_206495.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-15T07:54:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206495"
}
```



---

archive/issue_comments_176783.json:
```json
{
    "body": "Attachment: **[trac_14583-s0-v2.patch.gz](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)**\n\nnew version",
    "created_at": "2013-05-16T03:01:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176783",
    "user": "https://github.com/darijgr"
}
```

Attachment: **[trac_14583-s0-v2.patch.gz](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)**

new version



---

archive/issue_comments_176784.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOf course! Thanks for catching this one.\n\nI fixed this and a few more trifles in the present version.",
    "created_at": "2013-05-16T03:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176784",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:5" align="right">comment:5</div>

Of course! Thanks for catching this one.

I fixed this and a few more trifles in the present version.



---

archive/issue_comments_176785.json:
```json
{
    "body": "Reviewer: **ncohen**",
    "created_at": "2013-05-16T03:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176785",
    "user": "https://github.com/darijgr"
}
```

Reviewer: **ncohen**



---

archive/issue_events_206496.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-16T03:03:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206496"
}
```



---

archive/issue_events_206497.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-05-16T03:03:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206497"
}
```



---

archive/issue_comments_176786.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,3 +29,5 @@\n A corner case it is, but I think it should be done right...\n \n This is now fixed in the attached patch.\n+\n+* Apply: [attachment: trac_14583-s0-v2.patch](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)\n``````\n",
    "created_at": "2013-05-16T03:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176786",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,3 +29,5 @@
 A corner case it is, but I think it should be done right...
 
 This is now fixed in the attached patch.
+
+* Apply: [attachment: trac_14583-s0-v2.patch](https://github.com/sagemath/sage/files/ticket14583/trac_14583-s0-v2.patch.gz)
``````




---

archive/issue_events_206498.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-16T08:57:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206498"
}
```



---

archive/issue_events_206499.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-16T08:57:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206499"
}
```



---

archive/issue_comments_176787.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe patch makes sense, and passes all tests !\n\nNathann",
    "created_at": "2013-05-16T08:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176787",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

The patch makes sense, and passes all tests !

Nathann



---

archive/issue_comments_176788.json:
```json
{
    "body": "Changed reviewer from **ncohen** to **Nathann Cohen**",
    "created_at": "2013-05-16T08:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176788",
    "user": "https://github.com/nathanncohen"
}
```

Changed reviewer from **ncohen** to **Nathann Cohen**



---

archive/issue_comments_176789.json:
```json
{
    "body": "Merged: **sage-5.10.beta4**",
    "created_at": "2013-05-19T08:37:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14583#issuecomment-176789",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta4**



---

archive/issue_events_206500.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T08:37:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206500"
}
```



---

archive/issue_events_206501.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T08:37:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14583",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14583#event-206501"
}
```
