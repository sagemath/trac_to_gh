# Issue 14541: Family over enumerated set has wrong category

archive/issues_014337.json:
```json
{
    "assignees": [
        "https://github.com/nthiery"
    ],
    "body": "This happens with Sage 5.10beta3:\n\n```\nsage: P=Permutations()\nsage: print P.category()\nCategory of sets\nsage: print P.cardinality()\n+Infinity\nsage: F=Family(Permutations(), lambda i:i)\nsage: print F.category()\nCategory of finite enumerated sets\n```\n\nBut clearly `F` is not finite...\n\nAnother bug, (also fixed in the attached patch):\n\n```\nsage: Family(CartesianProduct(ZZ,ZZ),lambda (x,y) : (x+y,x-y)).cardinality()\n...\nTypeError: cardinality does not fit into a Python int.\n```\n\nupdate: following example is still wrong (see second comment)\n\n```\nsage: X=CombinatorialFreeModule(ZZ,ZZ)\nsage: print X\nFree module generated by Integer Ring over Integer Ring\nsage: print X.basis().category()\nCategory of enumerated sets\nsage: TX = tensor((X,))\nsage: print TX.basis().cardinality()\n+Infinity\nsage: print TX.basis().category()\nCategory of finite enumerated sets\n```\n\nComponent: **categories**\n\nKeywords: **Family, Category of finite enumerated sets, CartesianProduct**\n\nBranch/Commit: **[u/ncohen/14541](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14541) @ [`fd3d6d5`](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d51a3251999e327cf18c38f3389b2ee2a1b)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14541_\n\n",
    "created_at": "2013-05-06T19:00:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Family over enumerated set has wrong category",
    "type": "issue",
    "updated_at": "2022-08-10T23:11:01Z",
    "url": "https://github.com/sagemath/sage/issues/14541",
    "user": "https://github.com/cnassau"
}
```
This happens with Sage 5.10beta3:

```
sage: P=Permutations()
sage: print P.category()
Category of sets
sage: print P.cardinality()
+Infinity
sage: F=Family(Permutations(), lambda i:i)
sage: print F.category()
Category of finite enumerated sets
```

But clearly `F` is not finite...

Another bug, (also fixed in the attached patch):

```
sage: Family(CartesianProduct(ZZ,ZZ),lambda (x,y) : (x+y,x-y)).cardinality()
...
TypeError: cardinality does not fit into a Python int.
```

update: following example is still wrong (see second comment)

```
sage: X=CombinatorialFreeModule(ZZ,ZZ)
sage: print X
Free module generated by Integer Ring over Integer Ring
sage: print X.basis().category()
Category of enumerated sets
sage: TX = tensor((X,))
sage: print TX.basis().cardinality()
+Infinity
sage: print TX.basis().category()
Category of finite enumerated sets
```

Component: **categories**

Keywords: **Family, Category of finite enumerated sets, CartesianProduct**

Branch/Commit: **[u/ncohen/14541](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14541) @ [`fd3d6d5`](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d51a3251999e327cf18c38f3389b2ee2a1b)**

_Issue created by migration from https://trac.sagemath.org/ticket/14541_





---

archive/issue_events_203901.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2013-05-06T19:00:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203901"
}
```



---

archive/issue_events_203902.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2013-05-06T19:00:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203902"
}
```



---

archive/issue_events_203903.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2013-05-06T19:00:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203903"
}
```



---

archive/issue_events_203904.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2013-05-06T19:00:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203904"
}
```



---

archive/issue_events_203905.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-06T19:00:45Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "subject": "https://github.com/cnassau",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203905"
}
```



---

archive/issue_comments_176122.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks for the report!\n\nHmm, that's annoying indeed. This stems from the fact that `Permutations` still uses the old CombinatorialClass, and for those it's not so easy to detect easily whether they are known to be finite.\n\nAs a workaround, line 832 of Family, when the input is a CombinatorialClass, we could ask whether x.cardinality() != infinity. The risk is to trigger the enumeration of the elements of the combinatorial class which might take a while ... Or check if cardinality actually is implemented (i.e. is not the default _cardinality_from_iterator), and if yes call it.\n\nOf course, the proper fix would be to revamp permutations to be an enumerated set like has been done recently for tableaux.\n\nWould you be willing to handle any of the above?",
    "created_at": "2013-05-06T22:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176122",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks for the report!

Hmm, that's annoying indeed. This stems from the fact that `Permutations` still uses the old CombinatorialClass, and for those it's not so easy to detect easily whether they are known to be finite.

As a workaround, line 832 of Family, when the input is a CombinatorialClass, we could ask whether x.cardinality() != infinity. The risk is to trigger the enumeration of the elements of the combinatorial class which might take a while ... Or check if cardinality actually is implemented (i.e. is not the default _cardinality_from_iterator), and if yes call it.

Of course, the proper fix would be to revamp permutations to be an enumerated set like has been done recently for tableaux.

Would you be willing to handle any of the above?



---

archive/issue_comments_176123.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI actually don't care about `Permutations()` a lot - I just picked those to come up with an easily reproducible problem. I should have given this example:\n\n```\nsage: X=CombinatorialFreeModule(ZZ,ZZ)\nsage: print X\nFree module generated by Integer Ring over Integer Ring\nsage: print X.basis().category()\nCategory of enumerated sets\nsage: TX = tensor((X,))\nsage: print TX.basis().category()\nCategory of finite enumerated sets\n```\n\nI believe I fixed this in #13979 for Sage 5.7.b4 (which was neither merged nor even considered).",
    "created_at": "2013-05-07T09:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176123",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:2" align="right">comment:2</div>

I actually don't care about `Permutations()` a lot - I just picked those to come up with an easily reproducible problem. I should have given this example:

```
sage: X=CombinatorialFreeModule(ZZ,ZZ)
sage: print X
Free module generated by Integer Ring over Integer Ring
sage: print X.basis().category()
Category of enumerated sets
sage: TX = tensor((X,))
sage: print TX.basis().category()
Category of finite enumerated sets
```

I believe I fixed this in #13979 for Sage 5.7.b4 (which was neither merged nor even considered).



---

archive/issue_comments_176124.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@nthiery](#comment%3A1):\n> As a workaround, line 832 of Family, when the input is a CombinatorialClass, we could ask whether x.cardinality() != infinity. The risk is to trigger the enumeration of the elements of the combinatorial class which might take a while ... Or check if cardinality actually is implemented (i.e. is not the default _cardinality_from_iterator), and if yes call it.\n\nThis sounds like a solution that might fix the issue that I'm seeing with my (still nascent) Steenrod algebra module package. I'll try to prepare a patch along these lines.",
    "created_at": "2013-05-07T10:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176124",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@nthiery](#comment%3A1):
> As a workaround, line 832 of Family, when the input is a CombinatorialClass, we could ask whether x.cardinality() != infinity. The risk is to trigger the enumeration of the elements of the combinatorial class which might take a while ... Or check if cardinality actually is implemented (i.e. is not the default _cardinality_from_iterator), and if yes call it.

This sounds like a solution that might fix the issue that I'm seeing with my (still nascent) Steenrod algebra module package. I'll try to prepare a patch along these lines.



---

archive/issue_comments_176125.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[14541.patch.gz](https://github.com/sagemath/sage/files/ticket14541/14541.patch.gz)**\n\nThe attached patch changes the category initialization of `LazyFamily` objects: if the keys `K` are an instance of `CombinatorialClass` the category choice now depends on \"`K.cardinality() < Infinity`\" in the obvious way.\n\n(I have not tried to inspect the keys `K` further, because I could not find a `CombinatorialClass` without custom `cardinality` method.)\n\nI have also added another exception to `LazyFamily.cardinality()`: the code used to check for `AttributeError` and `NotImplementedError`, but `CartesianProduct(...).__len__` raises a `TypeError` instead. I've added a doctest that fails otherwise.",
    "created_at": "2013-05-07T15:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176125",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[14541.patch.gz](https://github.com/sagemath/sage/files/ticket14541/14541.patch.gz)**

The attached patch changes the category initialization of `LazyFamily` objects: if the keys `K` are an instance of `CombinatorialClass` the category choice now depends on "`K.cardinality() < Infinity`" in the obvious way.

(I have not tried to inspect the keys `K` further, because I could not find a `CombinatorialClass` without custom `cardinality` method.)

I have also added another exception to `LazyFamily.cardinality()`: the code used to check for `AttributeError` and `NotImplementedError`, but `CartesianProduct(...).__len__` raises a `TypeError` instead. I've added a doctest that fails otherwise.



---

archive/issue_comments_176126.json:
```json
{
    "body": "Changed keywords from **Family, Category of finite enumerated sets** to **Family, Category of finite enumerated sets, CartesianProduct**",
    "created_at": "2013-05-07T15:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176126",
    "user": "https://github.com/cnassau"
}
```

Changed keywords from **Family, Category of finite enumerated sets** to **Family, Category of finite enumerated sets, CartesianProduct**



---

archive/issue_events_203906.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2013-05-07T15:09:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203906"
}
```



---

archive/issue_comments_176127.json:
```json
{
    "body": "Author: **Christian Nassau**",
    "created_at": "2013-05-07T15:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176127",
    "user": "https://github.com/cnassau"
}
```

Author: **Christian Nassau**



---

archive/issue_comments_176128.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This happens with Sage 5.10beta1:\n+This happens with Sage 5.10beta3:\n \n ```\n sage: P=Permutations()\n@@ -12,3 +12,12 @@\n ```\n \n But clearly `F` is not finite...\n+\n+Another bug, (also fixed in the attached patch):\n+\n+```\n+sage: Family(CartesianProduct(ZZ,ZZ),lambda (x,y) : (x+y,x-y)).cardinality()\n+...\n+TypeError: cardinality does not fit into a Python int.\n+```\n+\n``````\n",
    "created_at": "2013-05-15T18:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176128",
    "user": "https://github.com/cnassau"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This happens with Sage 5.10beta1:
+This happens with Sage 5.10beta3:
 
 ```
 sage: P=Permutations()
@@ -12,3 +12,12 @@
 ```
 
 But clearly `F` is not finite...
+
+Another bug, (also fixed in the attached patch):
+
+```
+sage: Family(CartesianProduct(ZZ,ZZ),lambda (x,y) : (x+y,x-y)).cardinality()
+...
+TypeError: cardinality does not fit into a Python int.
+```
+
``````




---

archive/issue_events_203907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203907"
}
```



---

archive/issue_events_203908.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203908"
}
```



---

archive/issue_comments_176129.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe bug reported has been fixed in the meantime by #14772 : permutations do not use `CombinatorialClass` anymore.\nThis does not fix the general problem however, and indeed one should not force the computation of the cardinality of this set unless this operations has been explicitly requested.\n\nThus, I upload a git branch which just removes `CombinatorialClass` from the list of exceptions. There is apparently no reason why all instances of `CombinatorialClass` should represent finite sets.\n\n(and I personally don't even see why an uncountable set should be said to be \"enumerable\", but that's another problem)\n\nNathann",
    "created_at": "2013-12-25T20:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176129",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

The bug reported has been fixed in the meantime by #14772 : permutations do not use `CombinatorialClass` anymore.
This does not fix the general problem however, and indeed one should not force the computation of the cardinality of this set unless this operations has been explicitly requested.

Thus, I upload a git branch which just removes `CombinatorialClass` from the list of exceptions. There is apparently no reason why all instances of `CombinatorialClass` should represent finite sets.

(and I personally don't even see why an uncountable set should be said to be "enumerable", but that's another problem)

Nathann



---

archive/issue_comments_176130.json:
```json
{
    "body": "Branch: **[u/ncohen/14541](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14541)**",
    "created_at": "2013-12-25T21:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176130",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/14541](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14541)**



---

archive/issue_comments_176131.json:
```json
{
    "body": "Changed author from **Christian Nassau** to **Christian Nassau, Nathann Cohen**",
    "created_at": "2013-12-25T21:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176131",
    "user": "https://github.com/nathanncohen"
}
```

Changed author from **Christian Nassau** to **Christian Nassau, Nathann Cohen**



---

archive/issue_comments_176132.json:
```json
{
    "body": "Commit: **[`fd3d6d5`](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d51a3251999e327cf18c38f3389b2ee2a1b)**",
    "created_at": "2013-12-25T21:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176132",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`fd3d6d5`](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d51a3251999e327cf18c38f3389b2ee2a1b)**



---

archive/issue_comments_176133.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d5\"><code>fd3d6d5</code></a></td><td><code>trac #14541: Family over enumerated set has wrong category</code></td></tr></table>\n",
    "created_at": "2013-12-25T21:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176133",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd3d6d5"><code>fd3d6d5</code></a></td><td><code>trac #14541: Family over enumerated set has wrong category</code></td></tr></table>




---

archive/issue_events_203909.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203909"
}
```



---

archive/issue_events_203910.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203910"
}
```



---

archive/issue_events_203911.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203911"
}
```



---

archive/issue_events_203912.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203912"
}
```



---

archive/issue_comments_176134.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\npatchbot:\n\n```\nsage -t --long src/sage/combinat/free_module.py  # 1 doctest failed\n```",
    "created_at": "2014-05-13T06:22:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176134",
    "user": "https://github.com/rwst"
}
```

<div id="comment:14" align="right">comment:14</div>

patchbot:

```
sage -t --long src/sage/combinat/free_module.py  # 1 doctest failed
```



---

archive/issue_events_203913.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T06:22:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203913"
}
```



---

archive/issue_events_203914.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T06:22:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203914"
}
```



---

archive/issue_comments_176135.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOkay  Ralf, I don't know how to fix that. I give up. If you understand category code please give it a try, I don't.\n\nNathann",
    "created_at": "2014-05-13T07:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176135",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Okay  Ralf, I don't know how to fix that. I give up. If you understand category code please give it a try, I don't.

Nathann



---

archive/issue_events_203915.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203915"
}
```



---

archive/issue_events_203916.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203916"
}
```



---

archive/issue_comments_176136.json:
```json
{
    "body": "Stopgaps: **wrongAnswerMarker**",
    "created_at": "2016-07-09T14:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176136",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Stopgaps: **wrongAnswerMarker**



---

archive/issue_comments_176137.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,3 +21,17 @@\n TypeError: cardinality does not fit into a Python int.\n ```\n \n+update: following example is still wrong (see second comment)\n+\n+```\n+sage: X=CombinatorialFreeModule(ZZ,ZZ)\n+sage: print X\n+Free module generated by Integer Ring over Integer Ring\n+sage: print X.basis().category()\n+Category of enumerated sets\n+sage: TX = tensor((X,))\n+sage: print TX.basis().cardinality()\n++Infinity\n+sage: print TX.basis().category()\n+Category of finite enumerated sets\n+```\n``````\n",
    "created_at": "2016-07-09T14:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176137",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,3 +21,17 @@
 TypeError: cardinality does not fit into a Python int.
 ```
 
+update: following example is still wrong (see second comment)
+
+```
+sage: X=CombinatorialFreeModule(ZZ,ZZ)
+sage: print X
+Free module generated by Integer Ring over Integer Ring
+sage: print X.basis().category()
+Category of enumerated sets
+sage: TX = tensor((X,))
+sage: print TX.basis().cardinality()
++Infinity
+sage: print TX.basis().category()
+Category of finite enumerated sets
+```
``````




---

archive/issue_comments_176138.json:
```json
{
    "body": "Changed stopgaps from **wrongAnswerMarker** to none",
    "created_at": "2016-07-09T16:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176138",
    "user": "https://github.com/tscrim"
}
```

Changed stopgaps from **wrongAnswerMarker** to none



---

archive/issue_events_203917.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-07-09T16:20:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203917"
}
```



---

archive/issue_events_203918.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-07-09T16:20:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203918"
}
```



---

archive/issue_comments_176139.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe first and second issues are fixed\n\n```\nsage: F = Family(Permutations(), lambda i: i)\nsage: F.category()\nCategory of infinite enumerated sets\nsage: Family(cartesian_product([ZZ,ZZ]),lambda (x,y) : (x+y,x-y)).cardinality()\n+Infinity\n```\nHowever, the last issue is still outstanding:\n\n```\nsage: X=CombinatorialFreeModule(ZZ,ZZ)\nsage: X.basis().category()\nCategory of infinite enumerated sets\nsage: TX = tensor((X,))\nsage: TX.basis().cardinality()\n+Infinity\nsage: TX.basis().category()\nCategory of finite enumerated sets\n```\nThis seems to be due to falling into a default of finite (enumerated) sets instead of just pulling the information from the category of the keys:\n\n```\nsage: TX.basis().keys()\nImage of Cartesian product of Integer Ring by <type 'tuple'>\nsage: TX.basis().keys().category()\nCategory of sets\n```\n\nAlso, the stopgap field is to be used for ticket(s) for the stopgaps.",
    "created_at": "2016-07-09T16:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176139",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

The first and second issues are fixed

```
sage: F = Family(Permutations(), lambda i: i)
sage: F.category()
Category of infinite enumerated sets
sage: Family(cartesian_product([ZZ,ZZ]),lambda (x,y) : (x+y,x-y)).cardinality()
+Infinity
```
However, the last issue is still outstanding:

```
sage: X=CombinatorialFreeModule(ZZ,ZZ)
sage: X.basis().category()
Category of infinite enumerated sets
sage: TX = tensor((X,))
sage: TX.basis().cardinality()
+Infinity
sage: TX.basis().category()
Category of finite enumerated sets
```
This seems to be due to falling into a default of finite (enumerated) sets instead of just pulling the information from the category of the keys:

```
sage: TX.basis().keys()
Image of Cartesian product of Integer Ring by <type 'tuple'>
sage: TX.basis().keys().category()
Category of sets
```

Also, the stopgap field is to be used for ticket(s) for the stopgaps.



---

archive/issue_comments_176140.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe remaining issue is a dup of #18849",
    "created_at": "2022-08-10T19:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176140",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

The remaining issue is a dup of #18849



---

archive/issue_events_203919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-10T19:30:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203919"
}
```



---

archive/issue_events_203920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-10T19:30:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203920"
}
```



---

archive/issue_events_203921.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-10T19:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14541#event-203921"
}
```



---

archive/issue_comments_176141.json:
```json
{
    "body": "Changed author from **Christian Nassau, Nathann Cohen** to none",
    "created_at": "2022-08-10T23:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14541#issuecomment-176141",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Christian Nassau, Nathann Cohen** to none
