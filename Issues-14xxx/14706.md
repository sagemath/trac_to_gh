# Issue 14706: Upgrade R to version 3.0.2

archive/issues_014502.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)\n\n### r-3.0.2.p0 (Jean-Pierre Flori, 30 October 2013)\n* #14706: update to 3.0.2.\n* Remove sqrtl.patch which is now upstream.\n* Move old install on OS X.\n* Fix visibility of symbols in built-in libintl.\n\n### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n* #14706: Use --disable-long-double on Cygwin rather than patching.\n* Add sqrtl.patch from upstream to make --disable-long-double work.\n\n### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)\n* #14706: Drop-in replacement of upstream sources.\n\n---\n\n**Apply:** [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)\n\nCC:  @SnarkBoojum\n\nKeywords: **r-project spkg**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer, John Palmieri**\n\nAuthor: **Emmanuel Charpentier, Jean-Pierre Flori**\n\nMerged: **sage-5.13.beta4**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14706_\n\n",
    "closed_at": "2013-11-24T09:22:54Z",
    "created_at": "2013-06-08T19:19:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.13",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade R to version 3.0.2",
    "type": "issue",
    "updated_at": "2014-07-25T20:05:59Z",
    "url": "https://github.com/sagemath/sage/issues/14706",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)

### r-3.0.2.p0 (Jean-Pierre Flori, 30 October 2013)
* #14706: update to 3.0.2.
* Remove sqrtl.patch which is now upstream.
* Move old install on OS X.
* Fix visibility of symbols in built-in libintl.

### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
* #14706: Use --disable-long-double on Cygwin rather than patching.
* Add sqrtl.patch from upstream to make --disable-long-double work.

### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)
* #14706: Drop-in replacement of upstream sources.

---

**Apply:** [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)

CC:  @SnarkBoojum

Keywords: **r-project spkg**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer, John Palmieri**

Author: **Emmanuel Charpentier, Jean-Pierre Flori**

Merged: **sage-5.13.beta4**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/14706_





---

archive/issue_events_208713.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-08T19:19:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208713"
}
```



---

archive/issue_events_208714.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-08T19:19:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208714"
}
```



---

archive/issue_events_208715.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-08T19:19:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208715"
}
```



---

archive/issue_events_208716.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-08T19:19:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208716"
}
```



---

archive/issue_events_208717.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-08T19:19:55Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "subject": "https://github.com/EmmanuelCharpentier",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208717"
}
```



---

archive/issue_comments_178841.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor the record:  Removing `-L$SAGE_LOCAL/lib` from `LDFLAGS` (#13443) recently broke building R on CentOS, cf. [https://github.com/sagemath/sage/issues/13443#comment:12](https://github.com/sagemath/sage/issues/13443#comment:12) and sage-devel.",
    "created_at": "2013-06-08T19:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178841",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

For the record:  Removing `-L$SAGE_LOCAL/lib` from `LDFLAGS` (#13443) recently broke building R on CentOS, cf. [https://github.com/sagemath/sage/issues/13443#comment:12](https://github.com/sagemath/sage/issues/13443#comment:12) and sage-devel.



---

archive/issue_comments_178842.json:
```json
{
    "body": "Changed keywords from **r-project** to **r-project spkg**",
    "created_at": "2013-06-08T19:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178842",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **r-project** to **r-project spkg**



---

archive/issue_comments_178843.json:
```json
{
    "body": "Replying to [ticket:14706 charpent]:\n> This ticket is a place where I plan to send new updates to the R version used in Sage (R is, in principle, updated every six months). So I intend to open, close, reopen... as long as newer versions **do not entail any substantial modification** beyond dropping new R source in place and fixing the expected version numbers in the r.py doctest. Any further problems should be reported in **specific** tickets. As a new R version arrives (and Real Life (TM) allowing), I'll start from the last accepted patch for this spkg...\n> \n> This is routine work (i. e. even I can do it:-), but using an up-to-date R interpreter is a *sine qua no*n for reporting problems to R core, so it probably has to be done for Sage users to get answers from R core.\n\nI honestly don't understand anything of this ticket description. What is this ticket about???",
    "created_at": "2013-06-08T19:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178843",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:14706 charpent]:
> This ticket is a place where I plan to send new updates to the R version used in Sage (R is, in principle, updated every six months). So I intend to open, close, reopen... as long as newer versions **do not entail any substantial modification** beyond dropping new R source in place and fixing the expected version numbers in the r.py doctest. Any further problems should be reported in **specific** tickets. As a new R version arrives (and Real Life (TM) allowing), I'll start from the last accepted patch for this spkg...
> 
> This is routine work (i. e. even I can do it:-), but using an up-to-date R interpreter is a *sine qua no*n for reporting problems to R core, so it probably has to be done for Sage users to get answers from R core.

I honestly don't understand anything of this ticket description. What is this ticket about???



---

archive/issue_comments_178844.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jdemeyer](#comment:3):\n> I honestly don't understand anything of this ticket description. What is this ticket about???\n\nAtm upgrading R to 3.0.1 it seems...",
    "created_at": "2013-06-08T20:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178844",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jdemeyer](#comment:3):
> I honestly don't understand anything of this ticket description. What is this ticket about???

Atm upgrading R to 3.0.1 it seems...



---

archive/issue_events_208718.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-08T20:08:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208718"
}
```



---

archive/issue_comments_178845.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n* **Status**\u00a0changed from\u00a0*new*\u00a0to\u00a0*needs_review*\n\n1) New spkg : available on Google drive (https://docs.google.com/file/d/0B1gfn4_V_wm3clctVFFhUnlINVU/edit?usp=sharing)\n\n2) What this ticket is about :\n\na) Having an up-to-date R is a sine qua non to get answers from R Core.\n\nb) R in Sage is rarely up to date (more talented Sage developers work on more important issues).\n\nc) Therefore, R-in-Sage users have trouble communicating with R Core\n\nd) I am able to create \"drop-in replacements\" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...\n\ne) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades.\n\nIs that clearer ?",
    "created_at": "2013-06-08T20:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178845",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:5" align="right">comment:5</div>

* **Status** changed from *new* to *needs_review*

1) New spkg : available on Google drive (https://docs.google.com/file/d/0B1gfn4_V_wm3clctVFFhUnlINVU/edit?usp=sharing)

2) What this ticket is about :

a) Having an up-to-date R is a sine qua non to get answers from R Core.

b) R in Sage is rarely up to date (more talented Sage developers work on more important issues).

c) Therefore, R-in-Sage users have trouble communicating with R Core

d) I am able to create "drop-in replacements" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...

e) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades.

Is that clearer ?



---

archive/issue_comments_178846.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n-This ticket is a place where I plan to send new updates to the R version used in Sage (R is, in principle, updated every six months). So I intend to open, close, reopen... as long as newer versions **do not entail any substantial modification** beyond dropping new R source in place and fixing the expected version numbers in the r.py doctest. Any further problems should be reported in **specific** tickets. As a new R version arrives (and Real Life (TM) allowing), I'll start from the last accepted patch for this spkg...\n+a) Having an up-to-date R is a sine qua non to get answers from R Core.\n \n-This is routine work (i. e. even I can do it:-), but using an up-to-date R interpreter is a *sine qua no*n for reporting problems to R core, so it probably has to be done for Sage users to get answers from R core.\n+b) R in Sage is rarely up to date (more talented Sage developers work on more important issues).\n+\n+c) Therefore, R-in-Sage users have trouble communicating with R Core\n+\n+d) I am able to create \"drop-in replacements\" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...\n+\n+e) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades. \n``````\n",
    "created_at": "2013-06-08T20:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178846",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
-This ticket is a place where I plan to send new updates to the R version used in Sage (R is, in principle, updated every six months). So I intend to open, close, reopen... as long as newer versions **do not entail any substantial modification** beyond dropping new R source in place and fixing the expected version numbers in the r.py doctest. Any further problems should be reported in **specific** tickets. As a new R version arrives (and Real Life (TM) allowing), I'll start from the last accepted patch for this spkg...
+a) Having an up-to-date R is a sine qua non to get answers from R Core.
 
-This is routine work (i. e. even I can do it:-), but using an up-to-date R interpreter is a *sine qua no*n for reporting problems to R core, so it probably has to be done for Sage users to get answers from R core.
+b) R in Sage is rarely up to date (more talented Sage developers work on more important issues).
+
+c) Therefore, R-in-Sage users have trouble communicating with R Core
+
+d) I am able to create "drop-in replacements" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...
+
+e) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades. 
``````




---

archive/issue_comments_178847.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1 @@\n-a) Having an up-to-date R is a sine qua non to get answers from R Core.\n \n-b) R in Sage is rarely up to date (more talented Sage developers work on more important issues).\n-\n-c) Therefore, R-in-Sage users have trouble communicating with R Core\n-\n-d) I am able to create \"drop-in replacements\" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...\n-\n-e) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades. \n``````\n",
    "created_at": "2013-06-08T20:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178847",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1 @@
-a) Having an up-to-date R is a sine qua non to get answers from R Core.
 
-b) R in Sage is rarely up to date (more talented Sage developers work on more important issues).
-
-c) Therefore, R-in-Sage users have trouble communicating with R Core
-
-d) I am able to create "drop-in replacements" of the R spkg, thus giving R-in-Sage users an up-to-date R, thus allowing them to get answers from R Core...
-
-e) Since this is routine work that few people seem to tackle, and since it is in my limited ability range, I'll try to do it after R upstream upgrades. 
``````




---

archive/issue_events_208719.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-08T20:15:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "title_is": "Upgrade R to version 3.0.1",
    "title_was": "r-project : because it's that time of the semester, again...",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208719"
}
```



---

archive/issue_comments_178848.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@EmmanuelCharpentier](#comment:5):\n> Is that clearer ?\n\nWhy not just say \"Upgrade R to version 3.0.1\" like leif said?\n\nFor the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...\n\nAlso: fill in your real name as Author.",
    "created_at": "2013-06-08T20:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178848",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@EmmanuelCharpentier](#comment:5):
> Is that clearer ?

Why not just say "Upgrade R to version 3.0.1" like leif said?

For the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...

Also: fill in your real name as Author.



---

archive/issue_events_208720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-08T20:17:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208720"
}
```



---

archive/issue_events_208721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-08T20:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208721"
}
```



---

archive/issue_comments_178849.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment:8):\n> For the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...\n\nThere's btw. [http://spkg-upload.googlecode.com](http://spkg-upload.googlecode.com)...",
    "created_at": "2013-06-08T20:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178849",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment:8):
> For the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...

There's btw. [http://spkg-upload.googlecode.com](http://spkg-upload.googlecode.com)...



---

archive/issue_comments_178850.json:
```json
{
    "body": "Author: **Emmanuel Charpentier**",
    "created_at": "2013-06-08T20:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178850",
    "user": "https://github.com/nexttime"
}
```

Author: **Emmanuel Charpentier**



---

archive/issue_comments_178851.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n... and feel free to add yourself to the [list of developers on the Sage wiki](http://trac.sagemath.org/sage_trac/wiki#AccountNamesMappedtoRealNames).",
    "created_at": "2013-06-08T20:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178851",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

... and feel free to add yourself to the [list of developers on the Sage wiki](http://trac.sagemath.org/sage_trac/wiki#AccountNamesMappedtoRealNames).



---

archive/issue_events_208722.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-09T08:10:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208722"
}
```



---

archive/issue_events_208723.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-09T08:10:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208723"
}
```



---

archive/issue_events_208724.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2013-06-09T08:10:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "title_is": "Upgrade R to new upstream version",
    "title_was": "Upgrade R to version 3.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208724"
}
```



---

archive/issue_comments_178852.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+I intend to use this ticket to allow for **routine** periodic upgrades to the R spkg by \"drop-in\" o the new R source tree.\n``````\n",
    "created_at": "2013-06-09T08:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178852",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+I intend to use this ticket to allow for **routine** periodic upgrades to the R spkg by "drop-in" o the new R source tree.
``````




---

archive/issue_comments_178853.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment:8):\n\n> Replying to [@EmmanuelCharpentier](#comment:5)  :\n> > Is that clearer ?\n\n> Why not just say \"Upgrade R to version 3.0.1\" like leif said?\n\nBecause I intend to re-open/re-close it as upstream  spits out new versions... I see no point in cluttering the ticket stream with identical repeats of the same trivial point...\n> For the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...\n\nUpload in progress as I write this (I hadn't yet credentials for spkg-uploads)\n> Also: fill in your real name as Author.\n\nIf you say so...",
    "created_at": "2013-06-09T08:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178853",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment:8):

> Replying to [@EmmanuelCharpentier](#comment:5)  :
> > Is that clearer ?

> Why not just say "Upgrade R to version 3.0.1" like leif said?

Because I intend to re-open/re-close it as upstream  spits out new versions... I see no point in cluttering the ticket stream with identical repeats of the same trivial point...
> For the spkg, I really need a URL to the spkg, not some link to some website where I have to click on something...

Upload in progress as I write this (I hadn't yet credentials for spkg-uploads)
> Also: fill in your real name as Author.

If you say so...



---

archive/issue_comments_178854.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSpkg uploaded to spkg-uploads :\n\nhttps://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=",
    "created_at": "2013-06-09T08:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178854",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:12" align="right">comment:12</div>

Spkg uploaded to spkg-uploads :

https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=



---

archive/issue_comments_178855.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@EmmanuelCharpentier](#comment:11):\n> Because I intend to re-open/re-close it as upstream  spits out new versions...\n\nThat's not allowed.  A closed ticket also serves as a reference for when a particular package was merged in a particular Sage version, and the comments show any issues which appeared. If different upgrades would happen on one ticket, that would be a mess.\n\nStandard practice is to create a new ticket for every upgrade. However, as long as the new package is not yet merged into Sage, you can change the ticket. Imagine that R 3.0.2 comes out today, you can change this ticket to upgrade to R 3.0.2 (since this ticket isn't merged yet).",
    "created_at": "2013-06-09T10:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178855",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@EmmanuelCharpentier](#comment:11):
> Because I intend to re-open/re-close it as upstream  spits out new versions...

That's not allowed.  A closed ticket also serves as a reference for when a particular package was merged in a particular Sage version, and the comments show any issues which appeared. If different upgrades would happen on one ticket, that would be a mess.

Standard practice is to create a new ticket for every upgrade. However, as long as the new package is not yet merged into Sage, you can change the ticket. Imagine that R 3.0.2 comes out today, you can change this ticket to upgrade to R 3.0.2 (since this ticket isn't merged yet).



---

archive/issue_comments_178856.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-I intend to use this ticket to allow for **routine** periodic upgrades to the R spkg by \"drop-in\" o the new R source tree.\n+**spkg**: [https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=](https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=)\n``````\n",
    "created_at": "2013-06-09T10:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178856",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-I intend to use this ticket to allow for **routine** periodic upgrades to the R spkg by "drop-in" o the new R source tree.
+**spkg**: [https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=](https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=)
``````




---

archive/issue_comments_178857.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-**spkg**: [https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=](https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=)\n+**spkg**: [https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg](https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg)\n``````\n",
    "created_at": "2013-06-09T10:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178857",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-**spkg**: [https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=](https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=)
+**spkg**: [https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg](https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg)
``````




---

archive/issue_comments_178858.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@EmmanuelCharpentier](#comment:12):\n> Spkg uploaded to spkg-uploads :\n> \n> https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=\n\nCould you please rename the file to r-3.0.1**.**p0.spkg?\n\n(IIRC, renaming isn't possible there, so that would mean: rename your local file, (re)upload it, and delete the old one there.)",
    "created_at": "2013-06-09T13:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178858",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@EmmanuelCharpentier](#comment:12):
> Spkg uploaded to spkg-uploads :
> 
> https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=

Could you please rename the file to r-3.0.1**.**p0.spkg?

(IIRC, renaming isn't possible there, so that would mean: rename your local file, (re)upload it, and delete the old one there.)



---

archive/issue_comments_178859.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nexttime](#comment:16):\n> Replying to [@EmmanuelCharpentier](#comment:12):\n> > Spkg uploaded to spkg-uploads :\n> > \n> > https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=\n\n> \n> Could you please rename the file to r-3.0.1**.**p0.spkg?\n> \n> (IIRC, renaming isn't possible there, so that would mean: rename your local file, (re)upload it, and delete the old one there.)\n\nOh, forgot:\n\nYou'd of course have to repackage the spkg with the proper folder name first.",
    "created_at": "2013-06-09T15:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178859",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nexttime](#comment:16):
> Replying to [@EmmanuelCharpentier](#comment:12):
> > Spkg uploaded to spkg-uploads :
> > 
> > https://code.google.com/p/spkg-upload/downloads/detail?name=r-3.0.1-p0.spkg&can=2&q=

> 
> Could you please rename the file to r-3.0.1**.**p0.spkg?
> 
> (IIRC, renaming isn't possible there, so that would mean: rename your local file, (re)upload it, and delete the old one there.)

Oh, forgot:

You'd of course have to repackage the spkg with the proper folder name first.



---

archive/issue_comments_178860.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n... and change the changelog entry in `SPKG.txt` accordingly.\n\nRemove `SPKG.txt~`, and commit your changes...\n\n\n\n\nHaven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).\n\nEDIT: 27 MB that is, more than +33%",
    "created_at": "2013-06-09T15:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178860",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

... and change the changelog entry in `SPKG.txt` accordingly.

Remove `SPKG.txt~`, and commit your changes...




Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).

EDIT: 27 MB that is, more than +33%



---

archive/issue_comments_178861.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nexttime](#comment:18):\n> Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).\n\nThere's a lot of redundant stuff in different src directories:\n\n```sh\n$ diff -qr --report r-3.0.1-p0/src/src/ r-3.0.1-p0/src/R-3.0.1/src/ | grep identical | wc -l\n1502\n```",
    "created_at": "2013-06-09T16:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178861",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nexttime](#comment:18):
> Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).

There's a lot of redundant stuff in different src directories:

```sh
$ diff -qr --report r-3.0.1-p0/src/src/ r-3.0.1-p0/src/R-3.0.1/src/ | grep identical | wc -l
1502
```



---

archive/issue_events_208725.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T16:04:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208725"
}
```



---

archive/issue_events_208726.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T16:04:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208726"
}
```



---

archive/issue_comments_178862.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI.e., `r-3.0.1-p0/src/R-3.0.1/src/` is a proper subset of `r-3.0.1-p0/src/src/`.",
    "created_at": "2013-06-09T16:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178862",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

I.e., `r-3.0.1-p0/src/R-3.0.1/src/` is a proper subset of `r-3.0.1-p0/src/src/`.



---

archive/issue_comments_178863.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nexttime](#comment:20):\n> I.e., `r-3.0.1-p0/src/R-3.0.1/src/` is a proper subset of `r-3.0.1-p0/src/src/`.\n\nYep, `src/` is not vanilla:\n\n```sh\n$ diff -qr upstream/R-3.0.1/ r-3.0.1-p0/src/\nOnly in r-3.0.1-p0/src/: R-3.0.1\n```",
    "created_at": "2013-06-09T16:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178863",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nexttime](#comment:20):
> I.e., `r-3.0.1-p0/src/R-3.0.1/src/` is a proper subset of `r-3.0.1-p0/src/src/`.

Yep, `src/` is not vanilla:

```sh
$ diff -qr upstream/R-3.0.1/ r-3.0.1-p0/src/
Only in r-3.0.1-p0/src/: R-3.0.1
```



---

archive/issue_comments_178864.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFixed, untested spkg for testing is here:\n\n[http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)\n\n```\n27M\tr-3.0.1-p0.spkg\n22M\tr-3.0.1.p0.spkg\n```\n\n(Haven't committed the changes to `SPKG.txt`.)",
    "created_at": "2013-06-09T16:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178864",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Fixed, untested spkg for testing is here:

[http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)

```
27M	r-3.0.1-p0.spkg
22M	r-3.0.1.p0.spkg
```

(Haven't committed the changes to `SPKG.txt`.)



---

archive/issue_comments_178865.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nP.S.: The `SPKG.txt` changelog entry should also contain the ticket number, which I haven't added (yet).",
    "created_at": "2013-06-09T16:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178865",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

P.S.: The `SPKG.txt` changelog entry should also contain the ticket number, which I haven't added (yet).



---

archive/issue_comments_178866.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nexttime](#comment:18):\n> ... and change the changelog entry in `SPKG.txt` accordingly.\n> \n> Remove `SPKG.txt~`, and commit your changes...\n\nWups ! Done (and uploaded)... I oversaw the relevant part of the developer's guide (had to upload Mercurial : this can't be done from Sage AFAICT).\n\n> Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).\n> \n> EDIT: 27 MB that is, more than +33%\n\nNo explanation : R-3.0.1 is  a tag larger than R-2.15.2 but by about 2 MB. Your guess is about as good as mine...",
    "created_at": "2013-06-09T16:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178866",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nexttime](#comment:18):
> ... and change the changelog entry in `SPKG.txt` accordingly.
> 
> Remove `SPKG.txt~`, and commit your changes...

Wups ! Done (and uploaded)... I oversaw the relevant part of the developer's guide (had to upload Mercurial : this can't be done from Sage AFAICT).

> Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).
> 
> EDIT: 27 MB that is, more than +33%

No explanation : R-3.0.1 is  a tag larger than R-2.15.2 but by about 2 MB. Your guess is about as good as mine...



---

archive/issue_comments_178867.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nexttime](#comment:19): comments 19 to 23\n\nLeif, you're too fast for me ! your changes might hve been overwrittent by mine, or vice-versa...\n\n> Replying to [@nexttime](#comment:18):\n> > Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).\n\n> \n> There's a lot of redundant stuff in different src directories:\n> \n> ```sh\n> $ diff -qr --report r-3.0.1-p0/src/src/ r-3.0.1-p0/src/R-3.0.1/src/ | grep identical | wc -l\n> 1502\n> ```\n\nI must have had a thinko (mental typo)...\n\nOK : shall I go back to this file, or will you take over ? We can't both try to do the same...",
    "created_at": "2013-06-09T16:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178867",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nexttime](#comment:19): comments 19 to 23

Leif, you're too fast for me ! your changes might hve been overwrittent by mine, or vice-versa...

> Replying to [@nexttime](#comment:18):
> > Haven't yet investigated why, but the new spkg is also **much** larger than the previous one (27 MB vs. 20 MB).

> 
> There's a lot of redundant stuff in different src directories:
> 
> ```sh
> $ diff -qr --report r-3.0.1-p0/src/src/ r-3.0.1-p0/src/R-3.0.1/src/ | grep identical | wc -l
> 1502
> ```

I must have had a thinko (mental typo)...

OK : shall I go back to this file, or will you take over ? We can't both try to do the same...



---

archive/issue_comments_178868.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@EmmanuelCharpentier](#comment:25):\n> OK : shall I go back to this file, or will you take over ? We can't both try to do the same...\n\nWell, did you make any further changes besides\n\n```diff\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -45,6 +45,9 @@\n \n == Changelog ==\n \n+=== r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013) ===\n+ * Drop-in replacement of upstream sources.\n+\n === r-2.15.2.p2 (John H. Palmieri, 17 March 2013) ===\n  * #9668: fix hardcoding of paths in R by defining R_SHARE_DIR,\n    R_INCLUDE_DIR, and R_DOC_DIR relative to R_HOME_DIR, or rather, by\n```\n(and removing the temporary editor file, restoring vanilla upstream in `src/`)?\n\nI can add the ticket number to the changelog and commit the changes, then we have a clean spkg ready for review / testing.",
    "created_at": "2013-06-09T16:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178868",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@EmmanuelCharpentier](#comment:25):
> OK : shall I go back to this file, or will you take over ? We can't both try to do the same...

Well, did you make any further changes besides

```diff
diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -45,6 +45,9 @@
 
 == Changelog ==
 
+=== r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013) ===
+ * Drop-in replacement of upstream sources.
+
 === r-2.15.2.p2 (John H. Palmieri, 17 March 2013) ===
  * #9668: fix hardcoding of paths in R by defining R_SHARE_DIR,
    R_INCLUDE_DIR, and R_DOC_DIR relative to R_HOME_DIR, or rather, by
```
(and removing the temporary editor file, restoring vanilla upstream in `src/`)?

I can add the ticket number to the changelog and commit the changes, then we have a clean spkg ready for review / testing.



---

archive/issue_comments_178869.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nexttime](#comment:26):\n> I can add the ticket number to the changelog and commit the changes, then we have a clean spkg ready for review / testing.\n\nOk, did so.\n\n```\nchangeset:   63:4e5b35a04f0f\ntag:         tip\nuser:        Leif Leonhardy <not.really@online.de>\ndate:        Sun Jun 09 10:08:09 2013 -0700\nfiles:       .hgtags\ndescription:\nAdded tag r-3.0.1.p0 for changeset 1965338a1840\n\n\nchangeset:   62:1965338a1840\ntag:         r-3.0.1.p0\nuser:        Emmanuel Charpentier <emm.charpentier@free.fr>\ndate:        Sun Jun 09 10:07:32 2013 -0700\nfiles:       SPKG.txt\ndescription:\n#14706 (r-3.0.1.p0): Upgrade to new upstream version 3.0.1\n\n=== r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013) ===\n * #14706: Drop-in replacement of upstream sources.\n\n\nchangeset:   61:a9186d48ab63\nuser:        Jeroen Demeyer <jdemeyer@cage.ugent.be>\ndate:        Thu Apr 25 13:00:29 2013 +0000\nfiles:       .hgtags\ndescription:\nAdded tag r-2.15.2.p2 for changeset 485622df5b13\n```",
    "created_at": "2013-06-09T17:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178869",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nexttime](#comment:26):
> I can add the ticket number to the changelog and commit the changes, then we have a clean spkg ready for review / testing.

Ok, did so.

```
changeset:   63:4e5b35a04f0f
tag:         tip
user:        Leif Leonhardy <not.really@online.de>
date:        Sun Jun 09 10:08:09 2013 -0700
files:       .hgtags
description:
Added tag r-3.0.1.p0 for changeset 1965338a1840


changeset:   62:1965338a1840
tag:         r-3.0.1.p0
user:        Emmanuel Charpentier <emm.charpentier@free.fr>
date:        Sun Jun 09 10:07:32 2013 -0700
files:       SPKG.txt
description:
#14706 (r-3.0.1.p0): Upgrade to new upstream version 3.0.1

=== r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013) ===
 * #14706: Drop-in replacement of upstream sources.


changeset:   61:a9186d48ab63
user:        Jeroen Demeyer <jdemeyer@cage.ugent.be>
date:        Thu Apr 25 13:00:29 2013 +0000
files:       .hgtags
description:
Added tag r-2.15.2.p2 for changeset 485622df5b13
```



---

archive/issue_comments_178870.json:
```json
{
    "body": "Diff between the previous spkg and the 3.0.1.p0.  For reference / review only.",
    "created_at": "2013-06-09T17:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178870",
    "user": "https://github.com/nexttime"
}
```

Diff between the previous spkg and the 3.0.1.p0.  For reference / review only.



---

archive/issue_events_208727.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T17:20:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208727"
}
```



---

archive/issue_events_208728.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T17:20:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208728"
}
```



---

archive/issue_comments_178871.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAttachment: **[r-2.15.2.p2-3.0.1.p0.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz)**",
    "created_at": "2013-06-09T17:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178871",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:28" align="right">comment:28</div>

Attachment: **[r-2.15.2.p2-3.0.1.p0.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz)**



---

archive/issue_comments_178872.json:
```json
{
    "body": "Reviewer: **Leif Leonhardy**",
    "created_at": "2013-06-09T17:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178872",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Leif Leonhardy**



---

archive/issue_comments_178873.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n-**spkg**: [https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg](https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg)\n+**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)\n+\n+**md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`\n+\n+\n+### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)\n+* #14706: Drop-in replacement of upstream sources.\n+\n+---\n+\n+**Apply:**\n+* [attachment: trac_%2314706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)\n+\n``````\n",
    "created_at": "2013-06-09T17:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178873",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,13 @@
-**spkg**: [https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg](https://spkg-upload.googlecode.com/files/r-3.0.1-p0.spkg)
+**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)
+
+**md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`
+
+
+### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)
+* #14706: Drop-in replacement of upstream sources.
+
+---
+
+**Apply:**
+* [attachment: trac_%2314706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)
+
``````




---

archive/issue_comments_178874.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)\n+**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg) ([diff](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz))\n \n **md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`\n \n@@ -9,5 +9,5 @@\n ---\n \n **Apply:**\n-* [attachment: trac_%2314706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)\n+* [attachment: trac_#14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/f5a185f9de28abb667cd9c300503dcb0.gz)\n \n``````\n",
    "created_at": "2013-06-09T17:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178874",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg)
+**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg) ([diff](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz))
 
 **md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`
 
@@ -9,5 +9,5 @@
 ---
 
 **Apply:**
-* [attachment: trac_%2314706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)
+* [attachment: trac_#14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/f5a185f9de28abb667cd9c300503dcb0.gz)
 
``````




---

archive/issue_comments_178875.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHmmm, trac apparently doesn't like `#` in attachment filenames very much; it's IMHO a bad idea to use such anyway.",
    "created_at": "2013-06-09T17:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178875",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

Hmmm, trac apparently doesn't like `#` in attachment filenames very much; it's IMHO a bad idea to use such anyway.



---

archive/issue_comments_178876.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,5 @@\n ---\n \n **Apply:**\n-* [attachment: trac_#14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/f5a185f9de28abb667cd9c300503dcb0.gz)\n+* [https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)\n \n``````\n",
    "created_at": "2013-06-09T17:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178876",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,5 @@
 ---
 
 **Apply:**
-* [attachment: trac_#14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/f5a185f9de28abb667cd9c300503dcb0.gz)
+* [https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)
 
``````




---

archive/issue_events_208729.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T17:28:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208729"
}
```



---

archive/issue_events_208730.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-06-09T17:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208730"
}
```



---

archive/issue_comments_178877.json:
```json
{
    "body": "Changed upstream from **None of the above - read trac for reasoning.** to none",
    "created_at": "2013-06-09T17:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178877",
    "user": "https://github.com/nexttime"
}
```

Changed upstream from **None of the above - read trac for reasoning.** to none



---

archive/issue_comments_178878.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nP.P.S.:\n\nWe should IMHO still address the readline / `LDFLAGS` issue (unless R meanwhile supports `--with-readline=<prefix>`);  that should be done in a `.p1` based on the `.p0`.",
    "created_at": "2013-06-09T17:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178878",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

P.P.S.:

We should IMHO still address the readline / `LDFLAGS` issue (unless R meanwhile supports `--with-readline=<prefix>`);  that should be done in a `.p1` based on the `.p0`.



---

archive/issue_comments_178879.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@nexttime](#comment:33):\n> P.P.S.:\n> \n> We should IMHO still address the readline / `LDFLAGS` issue (unless R meanwhile supports `--with-readline=<prefix>`);  that should be done in a `.p1` based on the `.p0`.\n\nHmmm... I do not know CentOS, but it sounds more like a CentOS configuration problem. Diferent assumptions about pre-loaded libraries ? I'm afraid that my knowledge of the relevant documents is a bit insufficient for this hunt... \n\nPS : I'll delete my (incorrect) spkg from spkg-uploads now.",
    "created_at": "2013-06-09T18:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178879",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@nexttime](#comment:33):
> P.P.S.:
> 
> We should IMHO still address the readline / `LDFLAGS` issue (unless R meanwhile supports `--with-readline=<prefix>`);  that should be done in a `.p1` based on the `.p0`.

Hmmm... I do not know CentOS, but it sounds more like a CentOS configuration problem. Diferent assumptions about pre-loaded libraries ? I'm afraid that my knowledge of the relevant documents is a bit insufficient for this hunt... 

PS : I'll delete my (incorrect) spkg from spkg-uploads now.



---

archive/issue_comments_178880.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@nexttime](#comment:33):\n> ... unless R meanwhile supports `--with-readline=<prefix>`\n\nIt doesn't:\n\n```sh\n## Readline.\n\n# Check whether --with-readline was given.\nif test \"${with_readline+set}\" = set; then :\n  withval=$with_readline; if test \"${withval}\" = no; then\n  use_readline=no\nelse\n  use_readline=yes\nfi\n\nelse\n  use_readline=yes\nfi\n```",
    "created_at": "2013-06-09T18:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178880",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@nexttime](#comment:33):
> ... unless R meanwhile supports `--with-readline=<prefix>`

It doesn't:

```sh
## Readline.

# Check whether --with-readline was given.
if test "${with_readline+set}" = set; then :
  withval=$with_readline; if test "${withval}" = no; then
  use_readline=no
else
  use_readline=yes
fi

else
  use_readline=yes
fi
```



---

archive/issue_comments_178881.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@nexttime](#comment:33):\n> We should IMHO still address the readline / `LDFLAGS` issue\n\nSee [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.",
    "created_at": "2013-06-09T19:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178881",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@nexttime](#comment:33):
> We should IMHO still address the readline / `LDFLAGS` issue

See [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.



---

archive/issue_comments_178882.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nNew spkg builds for me (and passes its test suite with some \"noise\") on Linux x86_64, GCC 4.8.0, Sage 5.10.rc1.\n\nDoctests in `sage/interfaces/r.py` also pass with the attached patch.",
    "created_at": "2013-06-09T19:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178882",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:37" align="right">comment:37</div>

New spkg builds for me (and passes its test suite with some "noise") on Linux x86_64, GCC 4.8.0, Sage 5.10.rc1.

Doctests in `sage/interfaces/r.py` also pass with the attached patch.



---

archive/issue_comments_178883.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@nexttime](#comment:36):\n> Replying to [@nexttime](#comment:33):\n> > We should IMHO still address the readline / `LDFLAGS` issue\n\n> \n> See [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.\n\nOk, this is IMHO rather unrelated to R, or more precisely, a general problem, caused by **ap**pending `$SAGE_LOCAL/lib` to `LIBRARY_PATH` instead of prepending, so I'll open a separate ticket for that.",
    "created_at": "2013-06-09T20:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178883",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@nexttime](#comment:36):
> Replying to [@nexttime](#comment:33):
> > We should IMHO still address the readline / `LDFLAGS` issue

> 
> See [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.

Ok, this is IMHO rather unrelated to R, or more precisely, a general problem, caused by **ap**pending `$SAGE_LOCAL/lib` to `LIBRARY_PATH` instead of prepending, so I'll open a separate ticket for that.



---

archive/issue_comments_178884.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@nexttime](#comment:38):\n> Replying to [@nexttime](#comment:36):\n> > Replying to [@nexttime](#comment:33):\n> > > We should IMHO still address the readline / `LDFLAGS` issue\n\n> > \n> > See [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.\n\n> \n> Ok, this is IMHO rather unrelated to R, or more precisely, a general problem, caused by **ap**pending `$SAGE_LOCAL/lib` to `LIBRARY_PATH` instead of prepending.\n\nOr maybe not (just).  Dropping `-L${SAGE_LOCAL}/lib` and abusing `LIBRARY_PATH` simply doesn't work, since GCC may add system folders to the library search path **before** those specified in `LIBRARY_PATH`.\n\nIt's rather luck that the error so far showed up on CentOS only; others appear to have either no or compatible readline versions installed system-wide.",
    "created_at": "2013-06-09T20:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178884",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@nexttime](#comment:38):
> Replying to [@nexttime](#comment:36):
> > Replying to [@nexttime](#comment:33):
> > > We should IMHO still address the readline / `LDFLAGS` issue

> > 
> > See [http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1](http://groups.google.com/group/sage-devel/browse_thread/thread/5803a1cc05fe8a6e/e927d932b5d650e1#e927d932b5d650e1) ff. for the CentOS error report.

> 
> Ok, this is IMHO rather unrelated to R, or more precisely, a general problem, caused by **ap**pending `$SAGE_LOCAL/lib` to `LIBRARY_PATH` instead of prepending.

Or maybe not (just).  Dropping `-L${SAGE_LOCAL}/lib` and abusing `LIBRARY_PATH` simply doesn't work, since GCC may add system folders to the library search path **before** those specified in `LIBRARY_PATH`.

It's rather luck that the error so far showed up on CentOS only; others appear to have either no or compatible readline versions installed system-wide.



---

archive/issue_events_208731.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-10T08:59:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208731"
}
```



---

archive/issue_events_208732.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-10T08:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208732"
}
```



---

archive/issue_comments_178885.json:
```json
{
    "body": "Work Issues: **long double use on Cygwin**",
    "created_at": "2013-06-10T08:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178885",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **long double use on Cygwin**



---

archive/issue_comments_178886.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.",
    "created_at": "2013-06-10T08:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178886",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:40" align="right">comment:40</div>

I think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.



---

archive/issue_comments_178887.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jpflori](#comment:40):\n> I think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.\n\nCan you create a `.p1` and test that on Cygwin?\n\n(Interestingly, the patches still apply, modulo offsets for the patch to `configure`, which IMHO aren't worth fixing, since that just bloats Mercurial history).\n\nAnd if so, also change `--with-readline=...` to `--with-readline=yes`, with a remark that only yes/no is supported.\n\n[P.S.: Just noticed the Cygwin patch is indeed very unlikely to no longer apply... B) ]",
    "created_at": "2013-06-10T13:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178887",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jpflori](#comment:40):
> I think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.

Can you create a `.p1` and test that on Cygwin?

(Interestingly, the patches still apply, modulo offsets for the patch to `configure`, which IMHO aren't worth fixing, since that just bloats Mercurial history).

And if so, also change `--with-readline=...` to `--with-readline=yes`, with a remark that only yes/no is supported.

[P.S.: Just noticed the Cygwin patch is indeed very unlikely to no longer apply... B) ]



---

archive/issue_comments_178888.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@nexttime](#comment:41):\n> Replying to [@jpflori](#comment:40):\n> > I think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.\n\n> \n> Can you create a `.p1` and test that on Cygwin?\n\n(I mean I could do that as well, but that doesn't make *much* sense, since I cannot test it.)",
    "created_at": "2013-06-10T13:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178888",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@nexttime](#comment:41):
> Replying to [@jpflori](#comment:40):
> > I think there is now a --disable-long-double option to pass to configure which should be used on Cygwin rather than our patch which at some point will surely miss some parts of R code.

> 
> Can you create a `.p1` and test that on Cygwin?

(I mean I could do that as well, but that doesn't make *much* sense, since I cannot test it.)



---

archive/issue_comments_178889.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nP.P.S.:  Are `long double` functions a general problem on Cygwin?  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...",
    "created_at": "2013-06-10T13:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178889",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:43" align="right">comment:43</div>

P.P.S.:  Are `long double` functions a general problem on Cygwin?  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...



---

archive/issue_comments_178890.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@nexttime](#comment:43):\n> P.P.S.:  Are `long double` functions a general problem on Cygwin?\n\nYes, Cygwin libm has no long double functions.\n>  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...\n\nThat's the point, we want to disable all uses of long double in R, I cannot say that the only place it is currently used in 3.0.1 is with this logl() call, nor if that will be the case in future version of R.\nSo using --disable-long-double is safer.\nOr we should reenable Cephes on Cygwin to provide long double functions but I cannot say if that will be easy or not.",
    "created_at": "2013-06-10T15:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178890",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@nexttime](#comment:43):
> P.P.S.:  Are `long double` functions a general problem on Cygwin?

Yes, Cygwin libm has no long double functions.
>  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...

That's the point, we want to disable all uses of long double in R, I cannot say that the only place it is currently used in 3.0.1 is with this logl() call, nor if that will be the case in future version of R.
So using --disable-long-double is safer.
Or we should reenable Cephes on Cygwin to provide long double functions but I cannot say if that will be easy or not.



---

archive/issue_comments_178891.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@jpflori](#comment:44):\n> Replying to [@nexttime](#comment:43):\n> >  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...\n\n> That's the point, we want to disable all uses of long double in R\n\nThat was my question (whether doing so was intended; the basic operations on long doubles are provided by GCC / libgcc) ... ;-)\n\n\n\n\nAre you going to create a new spkg?",
    "created_at": "2013-06-10T16:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178891",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@jpflori](#comment:44):
> Replying to [@nexttime](#comment:43):
> >  For R, we currently just rename `logl()`, so using `--disable-long-double` may have other impacts I don't know...

> That's the point, we want to disable all uses of long double in R

That was my question (whether doing so was intended; the basic operations on long doubles are provided by GCC / libgcc) ... ;-)




Are you going to create a new spkg?



---

archive/issue_comments_178892.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI'll try tonight.",
    "created_at": "2013-06-10T16:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178892",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:46" align="right">comment:46</div>

I'll try tonight.



---

archive/issue_comments_178893.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nSpkg at:\n* http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg\nbut it doesn't build because it seems an sqrtl function is still used.",
    "created_at": "2013-06-10T21:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178893",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:47" align="right">comment:47</div>

Spkg at:
* http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg
but it doesn't build because it seems an sqrtl function is still used.



---

archive/issue_comments_178894.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nNew spkg currently uploading with a new patch to fix --disable-long-double.",
    "created_at": "2013-06-10T22:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178894",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:48" align="right">comment:48</div>

New spkg currently uploading with a new patch to fix --disable-long-double.



---

archive/issue_comments_178895.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThe patch does not work, I'll try to fix it tomorrow.",
    "created_at": "2013-06-10T22:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178895",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:49" align="right">comment:49</div>

The patch does not work, I'll try to fix it tomorrow.



---

archive/issue_comments_178896.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nAccording to http://developer.r-project.org/R_svnlog_2013, there is:\n\n```\nr62832 | ripley | 2013-05-29 11:26:12 -0400 (Wed, 29 May 2013) | 1 line\nChanged paths:\n   M /trunk/src/library/stats/src/cov.c\n\navoid sqrtl (PR#15326)\n```\nJust have to find a way to get the commit without mirroring the R svn.",
    "created_at": "2013-06-11T08:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178896",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:50" align="right">comment:50</div>

According to http://developer.r-project.org/R_svnlog_2013, there is:

```
r62832 | ripley | 2013-05-29 11:26:12 -0400 (Wed, 29 May 2013) | 1 line
Changed paths:
   M /trunk/src/library/stats/src/cov.c

avoid sqrtl (PR#15326)
```
Just have to find a way to get the commit without mirroring the R svn.



---

archive/issue_comments_178897.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nUpstream bug report here:\nhttps://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15326",
    "created_at": "2013-06-11T08:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178897",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

Upstream bug report here:
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15326



---

archive/issue_comments_178898.json:
```json
{
    "body": "Changed work issues from **long double use on Cygwin** to none",
    "created_at": "2013-06-11T09:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178898",
    "user": "https://github.com/jpflori"
}
```

Changed work issues from **long double use on Cygwin** to none



---

archive/issue_comments_178899.json:
```json
{
    "body": "Changed author from **Emmanuel Charpentier** to **Emmanuel Charpentier, Jean-Pierre Flori**",
    "created_at": "2013-06-11T09:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178899",
    "user": "https://github.com/jpflori"
}
```

Changed author from **Emmanuel Charpentier** to **Emmanuel Charpentier, Jean-Pierre Flori**



---

archive/issue_events_208733.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-11T09:44:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "title_is": "Upgrade R to version 3.0.1",
    "title_was": "Upgrade R to new upstream version",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208733"
}
```



---

archive/issue_comments_178900.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nOk, new spkg with upstream fix.\nNo Cygwin install on my hand right now, I'll test it tonight, but it really seems ok.\n\nNot sure the license info is correct.",
    "created_at": "2013-06-11T09:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178900",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:52" align="right">comment:52</div>

Ok, new spkg with upstream fix.
No Cygwin install on my hand right now, I'll test it tonight, but it really seems ok.

Not sure the license info is correct.



---

archive/issue_events_208734.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-11T09:44:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208734"
}
```



---

archive/issue_events_208735.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-11T09:44:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208735"
}
```



---

archive/issue_comments_178901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n-**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg) ([diff](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz))\n+**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg)\n \n-**md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`\n-\n+### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n+* #14706: Use --disable-long-double on Cygwin rather than patching.\n+* Add sqrtl.patch from upstream to make --disable-long-double work.\n \n ### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)\n * #14706: Drop-in replacement of upstream sources.\n``````\n",
    "created_at": "2013-06-11T09:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178901",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
-**New spkg**: [http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/r-3.0.1.p0.spkg) ([diff](https://github.com/sagemath/sage/files/ticket14706/r-2.15.2.p2-3.0.1.p0.diff.gz))
+**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg)
 
-**md5sum:** `901288faaec274ab8d6bb5e1d40e6761  r-3.0.1.p0.spkg`
-
+### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
+* #14706: Use --disable-long-double on Cygwin rather than patching.
+* Add sqrtl.patch from upstream to make --disable-long-double work.
 
 ### r-3.0.1.p0 (Emmanuel Charpentier, 8 June 2013)
 * #14706: Drop-in replacement of upstream sources.
``````




---

archive/issue_comments_178902.json:
```json
{
    "body": "Attachment: **[14706_R_3.0.1.patch.gz](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)**",
    "created_at": "2013-06-11T11:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178902",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[14706_R_3.0.1.patch.gz](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)**



---

archive/issue_comments_178903.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,4 @@\n \n ---\n \n-**Apply:**\n-* [https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)\n-\n+**Apply:** [attachment: 14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)\n``````\n",
    "created_at": "2013-06-11T11:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178903",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,4 @@
 
 ---
 
-**Apply:**
-* [https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz](https://github.com/sagemath/sage/files/ticket14706/78534496dbabe47d51f7d3eff125a87a.gz)
-
+**Apply:** [attachment: 14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)
``````




---

archive/issue_comments_178904.json:
```json
{
    "body": "Attachment: **[r-3.0.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-3.0.1.p1.diff.gz)**\n\nSpkg diff, for review only.",
    "created_at": "2013-06-11T11:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178904",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[r-3.0.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-3.0.1.p1.diff.gz)**

Spkg diff, for review only.



---

archive/issue_comments_178905.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg)\n+**New spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg)\n \n ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n * #14706: Use --disable-long-double on Cygwin rather than patching.\n``````\n",
    "created_at": "2013-06-11T11:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178905",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.1.p1.spkg)
+**New spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg)
 
 ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
 * #14706: Use --disable-long-double on Cygwin rather than patching.
``````




---

archive/issue_comments_178906.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nCommitted spkg changes.",
    "created_at": "2013-06-11T11:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178906",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

Committed spkg changes.



---

archive/issue_comments_178907.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThanks, I have some trouble correctly running hg addremove...",
    "created_at": "2013-06-11T12:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178907",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:55" align="right">comment:55</div>

Thanks, I have some trouble correctly running hg addremove...



---

archive/issue_comments_178908.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nJust want to approve of the long double fix, I think that is the right thing for now.  I'm excited that this might get in.",
    "created_at": "2013-06-11T15:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178908",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:56" align="right">comment:56</div>

Just want to approve of the long double fix, I think that is the right thing for now.  I'm excited that this might get in.



---

archive/issue_comments_178909.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nOkay, let's go for it.",
    "created_at": "2013-06-11T15:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178909",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

Okay, let's go for it.



---

archive/issue_events_208736.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-11T15:09:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208736"
}
```



---

archive/issue_events_208737.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-11T15:09:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208737"
}
```



---

archive/issue_comments_178910.json:
```json
{
    "body": "Changed reviewer from **Leif Leonhardy** to **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer**",
    "created_at": "2013-06-11T15:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178910",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Leif Leonhardy** to **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer**



---

archive/issue_comments_178911.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nNote: that doesn't mean I *tested* it (on Cygwin or anywhere else), just that *if* JP et al. did test it, then I can confirm that this is the 'right' way to deal with this in our Cygwin experience.",
    "created_at": "2013-06-11T15:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178911",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:58" align="right">comment:58</div>

Note: that doesn't mean I *tested* it (on Cygwin or anywhere else), just that *if* JP et al. did test it, then I can confirm that this is the 'right' way to deal with this in our Cygwin experience.



---

archive/issue_comments_178912.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@jpflori](#comment:52):\n> Not sure the license info is correct.\n\nAFAICS, R is (meanwhile) GNU GPLv2 **or** GPLv3 (but not v2+; some parts are LGPL'ed).\n\n(I don't see any related change to `SPKG.txt`, which stated \"GPL 2 (2.15.2 release)\".)",
    "created_at": "2013-06-11T16:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178912",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@jpflori](#comment:52):
> Not sure the license info is correct.

AFAICS, R is (meanwhile) GNU GPLv2 **or** GPLv3 (but not v2+; some parts are LGPL'ed).

(I don't see any related change to `SPKG.txt`, which stated "GPL 2 (2.15.2 release)".)



---

archive/issue_comments_178913.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@nexttime](#comment:59):\n> Replying to [@jpflori](#comment:52):\n> > Not sure the license info is correct.\n\n> \n> AFAICS, R is (meanwhile) GNU GPLv2 **or** GPLv3 (but not v2+; some parts are LGPL'ed).\n\n```\nCHANGES IN R VERSION 2.13.1:\n\n  ...\n\n  LICENCE:\n\n    o No parts of R are now licensed solely under GPL-2.  The licences\n      for packages rpart and survival have been changed, which means\n      that the licence terms for R as distributed are GPL-2 | GPL-3.\n\n```\n(from `NEWS`)",
    "created_at": "2013-06-11T16:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178913",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@nexttime](#comment:59):
> Replying to [@jpflori](#comment:52):
> > Not sure the license info is correct.

> 
> AFAICS, R is (meanwhile) GNU GPLv2 **or** GPLv3 (but not v2+; some parts are LGPL'ed).

```
CHANGES IN R VERSION 2.13.1:

  ...

  LICENCE:

    o No parts of R are now licensed solely under GPL-2.  The licences
      for packages rpart and survival have been changed, which means
      that the licence terms for R as distributed are GPL-2 | GPL-3.

```
(from `NEWS`)



---

archive/issue_comments_178914.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nI can confirm it now compiles on Cygwin (32 bits).",
    "created_at": "2013-06-11T21:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178914",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:61" align="right">comment:61</div>

I can confirm it now compiles on Cygwin (32 bits).



---

archive/issue_comments_178915.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nOK, made this change to the spkg:\n\n```diff\njdemeyer@boxen:~/spkg/r-3.0.1.p1$ hg diff\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -11,7 +11,7 @@\n (taken from http://www.r-project.org/)\n \n == License ==\n- * GPL 2 (2.15.2 release)\n+ * GPL v2 or GPL v3\n \n == SPKG Maintainers ==\n \n```",
    "created_at": "2013-06-12T07:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178915",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

OK, made this change to the spkg:

```diff
jdemeyer@boxen:~/spkg/r-3.0.1.p1$ hg diff
diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -11,7 +11,7 @@
 (taken from http://www.r-project.org/)
 
 == License ==
- * GPL 2 (2.15.2 release)
+ * GPL v2 or GPL v3
 
 == SPKG Maintainers ==
 
```



---

archive/issue_comments_178916.json:
```json
{
    "body": "Merged: **sage-5.11.beta1**",
    "created_at": "2013-06-15T12:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178916",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.11.beta1**



---

archive/issue_events_208738.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-15T12:21:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208738"
}
```



---

archive/issue_events_208739.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-15T12:21:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208739"
}
```



---

archive/issue_comments_178917.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThere are some problems with upgrading on OS X:\n\n```\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c text.c -o text.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c init.c -o init.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c Rmd5.c -o Rmd5.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c md5.c -o md5.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c signals.c -o signals.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c install.c -o install.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c getfmts.c -o getfmts.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c http.c -o http.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c gramLatex.c -o gramLatex.o\ngcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c gramRd.c -o gramRd.o\ngcc -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o tools.so text.o init.o Rmd5.o md5.o signals.o install.o getfmts.o http.o gramLatex.o gramRd.o -L../../../../lib -lR -dylib_file libRblas.dylib:../../../../lib/libRblas.dylib -Wl,-framework -Wl,CoreFoundation\nmake[8]: `Makedeps' is up to date.\nmkdir ../../../../library/tools/libs\ndyld: Library not loaded: libR.dylib\n  Referenced from: /Users/dehayebuildbot/build/sage/dehaye/dehaye_upgrade_5.4.1/build/sage-5.11.beta1/spkg/build/r-3.0.1.p1/src/bin/exec/R\n  Reason: Incompatible library version: R requires version 3.0.0 or later, but libR.dylib provides version 2.14.0\n/bin/sh: line 1: 83314 Done                    echo \"tools:::.install_package_description('.', '\"../../../library/tools\"')\"\n     83315 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL ../../../bin/R --vanilla --slave > /dev/null\nmake[5]: *** [all] Error 133\nmake[4]: *** [R] Error 1\nmake[3]: *** [R] Error 1\nmake[2]: *** [R] Error 1\nError building R.\n```",
    "created_at": "2013-06-16T09:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178917",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:64" align="right">comment:64</div>

There are some problems with upgrading on OS X:

```
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c text.c -o text.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c init.c -o init.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c Rmd5.c -o Rmd5.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c md5.c -o md5.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c signals.c -o signals.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c install.c -o install.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c getfmts.c -o getfmts.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c http.c -o http.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c gramLatex.c -o gramLatex.o
gcc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I../../../../src/main     -fPIC  -g -O2   -c gramRd.c -o gramRd.o
gcc -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o tools.so text.o init.o Rmd5.o md5.o signals.o install.o getfmts.o http.o gramLatex.o gramRd.o -L../../../../lib -lR -dylib_file libRblas.dylib:../../../../lib/libRblas.dylib -Wl,-framework -Wl,CoreFoundation
make[8]: `Makedeps' is up to date.
mkdir ../../../../library/tools/libs
dyld: Library not loaded: libR.dylib
  Referenced from: /Users/dehayebuildbot/build/sage/dehaye/dehaye_upgrade_5.4.1/build/sage-5.11.beta1/spkg/build/r-3.0.1.p1/src/bin/exec/R
  Reason: Incompatible library version: R requires version 3.0.0 or later, but libR.dylib provides version 2.14.0
/bin/sh: line 1: 83314 Done                    echo "tools:::.install_package_description('.', '"../../../library/tools"')"
     83315 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL ../../../bin/R --vanilla --slave > /dev/null
make[5]: *** [all] Error 133
make[4]: *** [R] Error 1
make[3]: *** [R] Error 1
make[2]: *** [R] Error 1
Error building R.
```



---

archive/issue_comments_178918.json:
```json
{
    "body": "Changed merged from **sage-5.11.beta1** to none",
    "created_at": "2013-06-16T09:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178918",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-5.11.beta1** to none



---

archive/issue_comments_178919.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nThe solution seems to be to remove `local/lib/R` before rebuilding R.",
    "created_at": "2013-06-16T09:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178919",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

The solution seems to be to remove `local/lib/R` before rebuilding R.



---

archive/issue_comments_178920.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@jdemeyer](#comment:65):\n> The solution seems to be to remove `local/lib/R` before rebuilding R.\n\nMaybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?",
    "created_at": "2013-06-16T15:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178920",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@jdemeyer](#comment:65):
> The solution seems to be to remove `local/lib/R` before rebuilding R.

Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?



---

archive/issue_comments_178921.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@jhpalmieri](#comment:66):\n> Replying to [@jdemeyer](#comment:65):\n> > The solution seems to be to remove `local/lib/R` before rebuilding R.\n\n> \n> Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?\n\nOr mess with `DYLD_LIBRARY_PATH`... (in `spkg-install`, during the build of R, that is)",
    "created_at": "2013-06-16T16:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178921",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@jhpalmieri](#comment:66):
> Replying to [@jdemeyer](#comment:65):
> > The solution seems to be to remove `local/lib/R` before rebuilding R.

> 
> Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?

Or mess with `DYLD_LIBRARY_PATH`... (in `spkg-install`, during the build of R, that is)



---

archive/issue_comments_178922.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@nexttime](#comment:67):\n> Replying to [@jhpalmieri](#comment:66):\n> > Replying to [@jdemeyer](#comment:65):\n> > > The solution seems to be to remove `local/lib/R` before rebuilding R.\n\n> > \n> > Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?\n\n> \n> Or mess with `DYLD_LIBRARY_PATH`... (in `spkg-install`, during the build of R, that is)\n\nInstead of prepending some path of the R *build tree*, perhaps better simply remove `$SAGE_LOCAL/lib/R` from `[DY]LD_LIBRARY_PATH`...",
    "created_at": "2013-06-16T16:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178922",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@nexttime](#comment:67):
> Replying to [@jhpalmieri](#comment:66):
> > Replying to [@jdemeyer](#comment:65):
> > > The solution seems to be to remove `local/lib/R` before rebuilding R.

> > 
> > Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?

> 
> Or mess with `DYLD_LIBRARY_PATH`... (in `spkg-install`, during the build of R, that is)

Instead of prepending some path of the R *build tree*, perhaps better simply remove `$SAGE_LOCAL/lib/R` from `[DY]LD_LIBRARY_PATH`...



---

archive/issue_comments_178923.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@jhpalmieri](#comment:66):\n> Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?\n\nI would vote for the simple solution of simply removing `local/lib/R`. Why make it more complicated than that?",
    "created_at": "2013-06-16T19:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178923",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@jhpalmieri](#comment:66):
> Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?

I would vote for the simple solution of simply removing `local/lib/R`. Why make it more complicated than that?



---

archive/issue_comments_178924.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@jdemeyer](#comment:69):\n> Replying to [@jhpalmieri](#comment:66):\n> > Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?\n\n> I would vote for the simple solution of simply removing `local/lib/R`. Why make it more complicated than that?\n\nWell, temporarily renaming isn't much harder (you only have to make sure the previous state gets restored in case installation fails, and, less important, to delete the old installation in case of success).\n\nDeleting the old installation before building the new version has succeeded is ... -- bad.",
    "created_at": "2013-06-16T19:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178924",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@jdemeyer](#comment:69):
> Replying to [@jhpalmieri](#comment:66):
> > Maybe rename it instead, then rebuild R. If the build is successful, delete the old version, and if the build fails, restore the old one?

> I would vote for the simple solution of simply removing `local/lib/R`. Why make it more complicated than that?

Well, temporarily renaming isn't much harder (you only have to make sure the previous state gets restored in case installation fails, and, less important, to delete the old installation in case of success).

Deleting the old installation before building the new version has succeeded is ... -- bad.



---

archive/issue_comments_178925.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nP.S.:  But I'd prefer to simply remove the old R lib dir from `[DY]LD_LIBRARY_PATH` -- it doesn't make any sense to have it there when (a new) R (version) gets built, other than potentially causing problems.",
    "created_at": "2013-06-16T19:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178925",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:71" align="right">comment:71</div>

P.S.:  But I'd prefer to simply remove the old R lib dir from `[DY]LD_LIBRARY_PATH` -- it doesn't make any sense to have it there when (a new) R (version) gets built, other than potentially causing problems.



---

archive/issue_comments_178926.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@nexttime](#comment:71):\n> P.S.:  But I'd prefer to simply remove the old R lib dir from `[DY]LD_LIBRARY_PATH` -- it doesn't make any sense to have it there when (a new) R (version) gets built, other than potentially causing problems.\n\nP.P.S.:  I would even guess that's an upstream bug; R at least used to mess around with `LD_LIBRARY_PATH` -- presumably also to avoid such problems (which don't happen on Linux); they probably just missed `DYLD_LIBRARY_PATH` on Darwin...",
    "created_at": "2013-06-16T19:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178926",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@nexttime](#comment:71):
> P.S.:  But I'd prefer to simply remove the old R lib dir from `[DY]LD_LIBRARY_PATH` -- it doesn't make any sense to have it there when (a new) R (version) gets built, other than potentially causing problems.

P.P.S.:  I would even guess that's an upstream bug; R at least used to mess around with `LD_LIBRARY_PATH` -- presumably also to avoid such problems (which don't happen on Linux); they probably just missed `DYLD_LIBRARY_PATH` on Darwin...



---

archive/issue_comments_178927.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nI'm not sure its an upstream bug after a quick look at R sources, maybe just us messing around with DYLD_LIBRARY_PATH.",
    "created_at": "2013-07-10T14:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178927",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:73" align="right">comment:73</div>

I'm not sure its an upstream bug after a quick look at R sources, maybe just us messing around with DYLD_LIBRARY_PATH.



---

archive/issue_comments_178928.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nMessing around with the dynamic library mechanism does not seem to be such a great idea. \u00a0The 3.0.1.p1 patch gives (on Debian amd64 testing) an executable which is unable to install some packages using external libraries ( among them tcl/tk, curl, sqlite3 and more important, cpp libraries). I had oddles of trouble trying to install packages depending on\u00a0RcppArmadillo. Reverting to the 3.0.1.p0 patch solved this problem.\n\nI'd be sorely tempted to change the status to \"needs work\" ... if I knew how to do this.\n\nI'd like to recommend :\n\n1. to keep the (simple) fix to get the 3.0.1 sources (which, AFAIU, compile fine on Unices and Mac OS X) and leave the dynamic library gizmoes alone, and\n2. to open ***another*** ticket for the dynamic library issues, which, if I understand the history, aim to compile this cleanly on cygwin.\n\n\n\nHTH,\n\n          Emmanuel Charpentier",
    "created_at": "2013-07-15T15:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178928",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:74" align="right">comment:74</div>

Messing around with the dynamic library mechanism does not seem to be such a great idea.  The 3.0.1.p1 patch gives (on Debian amd64 testing) an executable which is unable to install some packages using external libraries ( among them tcl/tk, curl, sqlite3 and more important, cpp libraries). I had oddles of trouble trying to install packages depending on RcppArmadillo. Reverting to the 3.0.1.p0 patch solved this problem.

I'd be sorely tempted to change the status to "needs work" ... if I knew how to do this.

I'd like to recommend :

1. to keep the (simple) fix to get the 3.0.1 sources (which, AFAIU, compile fine on Unices and Mac OS X) and leave the dynamic library gizmoes alone, and
2. to open ***another*** ticket for the dynamic library issues, which, if I understand the history, aim to compile this cleanly on cygwin.



HTH,

          Emmanuel Charpentier



---

archive/issue_comments_178929.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@EmmanuelCharpentier](#comment:74):\n> Messing around with the dynamic library mechanism does not seem to be such a great idea. \u00a0The 3.0.1.p1 patch gives (on Debian amd64 testing) an executable which is unable to install some packages using external libraries ( among them tcl/tk, curl, sqlite3 and more important, cpp libraries). I had oddles of trouble trying to install packages depending on\u00a0RcppArmadillo. Reverting to the 3.0.1.p0 patch solved this problem.\n> \n> I'd be sorely tempted to change the status to \"needs work\" ... if I knew how to do this.\n> \n> I'd like to recommend :\n> \n> 1. to keep the (simple) fix to get the 3.0.1 sources (which, AFAIU, compile fine on Unices and Mac OS X) and leave the dynamic library gizmoes alone, and\n> 2. to open ***another*** ticket for the dynamic library issues, which, if I understand the history, aim to compile this cleanly on cygwin.\n> \n> \n> \n> HTH,\n> \n>           Emmanuel Charpentier\n\nThat's really strange.\n\nThe difference between the p0 and the p1 has nothing to do with *LD_LIBRARY_PATH.\nIt merely triggers an upstream compilation option on Cygwin only.\nNot on any other OS (unless uname on that os contains CYGWIN which would be strange outside of Cygwin).\nJust have a look at [attachment: r-3.0.1.p1.diff](https://github.com/sagemath/sage/files/ticket14706/r-3.0.1.p1.diff.gz)...\n\nNor has the diff between the p0 and the previous 2.* R version.\n\nThe *LD_LIBRARY_PATH comes from $SAGE_ROOT/spkg/bin/sage-env (or $SAGE_LOCAL, too lazy to check) or R itself, not from the spkg scripts.\nIf you're not convinced, just grep them.",
    "created_at": "2013-07-15T16:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178929",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@EmmanuelCharpentier](#comment:74):
> Messing around with the dynamic library mechanism does not seem to be such a great idea.  The 3.0.1.p1 patch gives (on Debian amd64 testing) an executable which is unable to install some packages using external libraries ( among them tcl/tk, curl, sqlite3 and more important, cpp libraries). I had oddles of trouble trying to install packages depending on RcppArmadillo. Reverting to the 3.0.1.p0 patch solved this problem.
> 
> I'd be sorely tempted to change the status to "needs work" ... if I knew how to do this.
> 
> I'd like to recommend :
> 
> 1. to keep the (simple) fix to get the 3.0.1 sources (which, AFAIU, compile fine on Unices and Mac OS X) and leave the dynamic library gizmoes alone, and
> 2. to open ***another*** ticket for the dynamic library issues, which, if I understand the history, aim to compile this cleanly on cygwin.
> 
> 
> 
> HTH,
> 
>           Emmanuel Charpentier

That's really strange.

The difference between the p0 and the p1 has nothing to do with *LD_LIBRARY_PATH.
It merely triggers an upstream compilation option on Cygwin only.
Not on any other OS (unless uname on that os contains CYGWIN which would be strange outside of Cygwin).
Just have a look at [attachment: r-3.0.1.p1.diff](https://github.com/sagemath/sage/files/ticket14706/r-3.0.1.p1.diff.gz)...

Nor has the diff between the p0 and the previous 2.* R version.

The *LD_LIBRARY_PATH comes from $SAGE_ROOT/spkg/bin/sage-env (or $SAGE_LOCAL, too lazy to check) or R itself, not from the spkg scripts.
If you're not convinced, just grep them.



---

archive/issue_events_208740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208740"
}
```



---

archive/issue_events_208741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208741"
}
```



---

archive/issue_events_208742.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-09-06T20:04:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208742"
}
```



---

archive/issue_comments_178930.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThis will (trivially only) conflict with #13686.",
    "created_at": "2013-09-06T20:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178930",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:77" align="right">comment:77</div>

This will (trivially only) conflict with #13686.



---

archive/issue_events_208743.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-09-06T20:04:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208743"
}
```



---

archive/issue_events_208744.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-09-06T20:04:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208744"
}
```



---

archive/issue_comments_178931.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nCurrently R doesn't build on sage.math, dying with \n\n```\n../../lib/libR.so: undefined reference to `rl_sort_completion_matches'\n```\nCan we clean this ticket up? \n\nJust a few comments from cursory reading this ticket:\n\n* Delete anything that can interfere with installation at the beginning of `spkg-install` (yes one could try to catch errors, but we don't have a framework for testing that so it won't ever work)\n\n* try to mess with library paths as little as possible.\n\n* Cygwin issues can go to a different ticket.",
    "created_at": "2013-10-07T09:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178931",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:79" align="right">comment:79</div>

Currently R doesn't build on sage.math, dying with 

```
../../lib/libR.so: undefined reference to `rl_sort_completion_matches'
```
Can we clean this ticket up? 

Just a few comments from cursory reading this ticket:

* Delete anything that can interfere with installation at the beginning of `spkg-install` (yes one could try to catch errors, but we don't have a framework for testing that so it won't ever work)

* try to mess with library paths as little as possible.

* Cygwin issues can go to a different ticket.



---

archive/issue_comments_178932.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nWhat was done in this ticket was really trivial.\nBasically:\n* drop in replacement of the upstram sources,\n* a trivial fix for the Cygwin fixes (basically using the now upstream provided option rather than our custon patch + add an upstream patch not in the current stable version to fix the new upstream option; this has really no reason to affect any other systems than Cygwin unless it makes your computer proner to attracting gamma rays) so I don't see any reason not to keep them in.\n\nSo if R is now broken, its surely because of some hell with *LDLIBRARY_PATH either on Sage sideor on R side itself (as R seems to be as bad as Sage as far as hacking LDLIBRARY_PATH is concerned).\n\nI agree that cleaning up the spkg-install would be a good idea as well.\n\nAlso note that R 3.0.2 was released a few days ago, so maybe the patch fixing the disable_long-double option is now included.",
    "created_at": "2013-10-07T09:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178932",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:80" align="right">comment:80</div>

What was done in this ticket was really trivial.
Basically:
* drop in replacement of the upstram sources,
* a trivial fix for the Cygwin fixes (basically using the now upstream provided option rather than our custon patch + add an upstream patch not in the current stable version to fix the new upstream option; this has really no reason to affect any other systems than Cygwin unless it makes your computer proner to attracting gamma rays) so I don't see any reason not to keep them in.

So if R is now broken, its surely because of some hell with *LDLIBRARY_PATH either on Sage sideor on R side itself (as R seems to be as bad as Sage as far as hacking LDLIBRARY_PATH is concerned).

I agree that cleaning up the spkg-install would be a good idea as well.

Also note that R 3.0.2 was released a few days ago, so maybe the patch fixing the disable_long-double option is now included.



---

archive/issue_comments_178933.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nJust to clarify, both the R in sage-5.12.rc1 as well as the one on this ticket fail to compile on sage.math.",
    "created_at": "2013-10-07T09:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178933",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:81" align="right">comment:81</div>

Just to clarify, both the R in sage-5.12.rc1 as well as the one on this ticket fail to compile on sage.math.



---

archive/issue_comments_178934.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI guess the readline problem is:\n* http://lists.gnu.org/archive/html/bug-readline/2013-07/msg00017.html",
    "created_at": "2013-10-07T10:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178934",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:82" align="right">comment:82</div>

I guess the readline problem is:
* http://lists.gnu.org/archive/html/bug-readline/2013-07/msg00017.html



---

archive/issue_comments_178935.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nThere is a new readline release beta:\n* http://permalink.gmane.org/gmane.comp.gnu.readline/406\nI guess its worth giving it a try...",
    "created_at": "2013-10-07T10:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178935",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:83" align="right">comment:83</div>

There is a new readline release beta:
* http://permalink.gmane.org/gmane.comp.gnu.readline/406
I guess its worth giving it a try...



---

archive/issue_comments_178936.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nIts not a bug in readline (that would be huge and immediatly fail). The R-project guys are just confused about the readelf output on their mailinglist (hint: `--wide` won't truncate output). The issue is here:\n\n```\ngcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../src/extra/pcre -I../../src/extra  -I../../src/extra/xz/api -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -fopenmp -fpic  -g -O2   -c Rmain.c -o Rmain.o\ngcc -std=gnu99 -Wl,--export-dynamic -fopenmp   -o R.bin Rmain.o  -L../../lib -lR -lRblas\n../../lib/libR.so: undefined reference to `rl_sort_completion_matches'\n``` \nThere is no `-lreadline`, so it shouldn't work.",
    "created_at": "2013-10-07T11:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178936",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:84" align="right">comment:84</div>

Its not a bug in readline (that would be huge and immediatly fail). The R-project guys are just confused about the readelf output on their mailinglist (hint: `--wide` won't truncate output). The issue is here:

```
gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../src/extra/pcre -I../../src/extra  -I../../src/extra/xz/api -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -fopenmp -fpic  -g -O2   -c Rmain.c -o Rmain.o
gcc -std=gnu99 -Wl,--export-dynamic -fopenmp   -o R.bin Rmain.o  -L../../lib -lR -lRblas
../../lib/libR.so: undefined reference to `rl_sort_completion_matches'
``` 
There is no `-lreadline`, so it shouldn't work.



---

archive/issue_comments_178937.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nYup, that sounds more sensible :)",
    "created_at": "2013-10-07T11:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178937",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:85" align="right">comment:85</div>

Yup, that sounds more sensible :)



---

archive/issue_comments_178938.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-**New spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg)\n+**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)\n+\n+### r-3.0.2.p0 (Jean-Pierre Flori, 7 October 2013)\n+* #14706: update to 3.0.2.\n+* Remove sqrtl.patch which is now upstream.\n \n ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n * #14706: Use --disable-long-double on Cygwin rather than patching.\n``````\n",
    "created_at": "2013-10-07T21:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178938",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-**New spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-3.0.1.p1.spkg)
+**New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)
+
+### r-3.0.2.p0 (Jean-Pierre Flori, 7 October 2013)
+* #14706: update to 3.0.2.
+* Remove sqrtl.patch which is now upstream.
 
 ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
 * #14706: Use --disable-long-double on Cygwin rather than patching.
``````




---

archive/issue_comments_178939.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nI've updated a trivially updated spkg, could you give it a shot?\nAnd post or link the failing log?\n\nIt doesn't seem the failing line you mentioned changed.\n(Note that the line I get is slightly different, I don't get the -lRblas.)\nBefore that line at least, on my install, when libR.so is built, -lreadline is correctly passed, so maybe this changed for 3.0.2.\n\nAt this point, I changed nothing to deal with a potentially conflicting old version of R 2.x as mentioned earlier on this ticket.",
    "created_at": "2013-10-07T21:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178939",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:86" align="right">comment:86</div>

I've updated a trivially updated spkg, could you give it a shot?
And post or link the failing log?

It doesn't seem the failing line you mentioned changed.
(Note that the line I get is slightly different, I don't get the -lRblas.)
Before that line at least, on my install, when libR.so is built, -lreadline is correctly passed, so maybe this changed for 3.0.2.

At this point, I changed nothing to deal with a potentially conflicting old version of R 2.x as mentioned earlier on this ticket.



---

archive/issue_comments_178940.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nGroumpf, I just gave 5.13.beta1 (I know its not stabilized...) on sage.math and it succesfully built the shipped R 2.x spkg.\nStrange.",
    "created_at": "2013-10-07T22:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178940",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:87" align="right">comment:87</div>

Groumpf, I just gave 5.13.beta1 (I know its not stabilized...) on sage.math and it succesfully built the shipped R 2.x spkg.
Strange.



---

archive/issue_comments_178941.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nNo problem with 3.0.2 spkg on sage.math for me (on top of 5.13.beta1, Sage's GCC was built)...\nStrangely I don't get the -lRblas flag.\n\nVolker: Could you post your logs?",
    "created_at": "2013-10-08T07:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178941",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:88" align="right">comment:88</div>

No problem with 3.0.2 spkg on sage.math for me (on top of 5.13.beta1, Sage's GCC was built)...
Strangely I don't get the -lRblas flag.

Volker: Could you post your logs?



---

archive/issue_comments_178942.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nSame behavior for me on sage.math on top of 5.12.rc1 (with Sage's GCC built) with the provided 2.x spkg and the new 3.0.2 one.\nStill no -lRblas and no error.\nSo I cannot do much about Volker's problem without further info...\n\nIt would also be nice if Emmanuel could confirm the error on OS X is still there.",
    "created_at": "2013-10-08T11:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178942",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:89" align="right">comment:89</div>

Same behavior for me on sage.math on top of 5.12.rc1 (with Sage's GCC built) with the provided 2.x spkg and the new 3.0.2 one.
Still no -lRblas and no error.
So I cannot do much about Volker's problem without further info...

It would also be nice if Emmanuel could confirm the error on OS X is still there.



---

archive/issue_events_208745.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-10-08T11:14:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208745"
}
```



---

archive/issue_events_208746.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-10-08T11:14:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208746"
}
```



---

archive/issue_events_208747.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-10-08T11:16:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "title_is": "Upgrade R to version 3.0.2",
    "title_was": "Upgrade R to version 3.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208747"
}
```



---

archive/issue_comments_178943.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nSorry, should have been more clear: I'm trying to compile the current git master. It still fails with 3.0.2.p0.\n\nBuild log is here: http://boxen.math.washington.edu/home/vbraun/logs/r-3.0.2.p0.log",
    "created_at": "2013-10-08T12:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178943",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:91" align="right">comment:91</div>

Sorry, should have been more clear: I'm trying to compile the current git master. It still fails with 3.0.2.p0.

Build log is here: http://boxen.math.washington.edu/home/vbraun/logs/r-3.0.2.p0.log



---

archive/issue_comments_178944.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nI tried the master branch from https://github.com/sagemath/sage.git and had no problems with r-2.x and 3.x...\n\nWhich repo/branch did you use?",
    "created_at": "2013-10-08T15:45:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178944",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:92" align="right">comment:92</div>

I tried the master branch from https://github.com/sagemath/sage.git and had no problems with r-2.x and 3.x...

Which repo/branch did you use?



---

archive/issue_comments_178945.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nHere is a difference in the log of your and my r-3.0.2 builds\n\n```\n428,432c431,432\n< checking for dgemm_ in -L/home/jpflori/build/sage.git/local/lib -lf77blas -latlas... yes\n< checking whether double complex BLAS can be used... yes\n< checking whether the BLAS is complete... yes\n< checking for dpstrf_... no\n< checking for dpstrf_ in -L/home/jpflori/build/sage.git/local/lib -llapack -lcblas... yes\n---\n> checking for dgemm_ in -L/home/vbraun/Sage/git/local/lib -lf77blas -latlas... yes\n> checking whether double complex BLAS can be used... no\n```\nI guess this is at the root of the \"-lRblas\" you get and I don't.\nWhat version of ATLAS or BLAS did you use?\nNot sure it will then lead us to the readline problem.",
    "created_at": "2013-10-08T21:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178945",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:93" align="right">comment:93</div>

Here is a difference in the log of your and my r-3.0.2 builds

```
428,432c431,432
< checking for dgemm_ in -L/home/jpflori/build/sage.git/local/lib -lf77blas -latlas... yes
< checking whether double complex BLAS can be used... yes
< checking whether the BLAS is complete... yes
< checking for dpstrf_... no
< checking for dpstrf_ in -L/home/jpflori/build/sage.git/local/lib -llapack -lcblas... yes
---
> checking for dgemm_ in -L/home/vbraun/Sage/git/local/lib -lf77blas -latlas... yes
> checking whether double complex BLAS can be used... no
```
I guess this is at the root of the "-lRblas" you get and I don't.
What version of ATLAS or BLAS did you use?
Not sure it will then lead us to the readline problem.



---

archive/issue_comments_178946.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nOk, it seems from your log at http://boxen.math.washington.edu/home/vbraun/Sage/git/logs/pkgs/atlas-3.10.1.p5.log that you used the system ATLAS.\nI'll do the same.",
    "created_at": "2013-10-08T21:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178946",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:94" align="right">comment:94</div>

Ok, it seems from your log at http://boxen.math.washington.edu/home/vbraun/Sage/git/logs/pkgs/atlas-3.10.1.p5.log that you used the system ATLAS.
I'll do the same.



---

archive/issue_comments_178947.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nComparing the previously succesful libR.so (with Sage's ATLAS) and the new one (with system-wide ATLAS), the former is using:\n\n```\nlibreadline.so.6 => /home/jpflori/build/sage.git/local/lib/libreadline.so.6 (0x00007fe83965c000)\n```\nwhereas the latter is using\n\n```\nlibreadline.so.5 => /lib/libreadline.so.5 (0x00007f9a46b59000)\n```",
    "created_at": "2013-10-08T22:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178947",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:95" align="right">comment:95</div>

Comparing the previously succesful libR.so (with Sage's ATLAS) and the new one (with system-wide ATLAS), the former is using:

```
libreadline.so.6 => /home/jpflori/build/sage.git/local/lib/libreadline.so.6 (0x00007fe83965c000)
```
whereas the latter is using

```
libreadline.so.5 => /lib/libreadline.so.5 (0x00007f9a46b59000)
```



---

archive/issue_comments_178948.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nIn the working case, when libR.so is built the gcc command includes:\n\n```\n-L/home/jpflori/build/sage.git/local/lib -lf77blas -latlas -lgfortran -lm -lquadmath   -lreadline  -lrt -ldl -lm\n```\nwhereas in the other case it includes:\n\n```\n-L../../lib -lRblas -lgfortran -lm -lquadmath   -lreadline  -lrt -ldl -lm\n```\nThe \"-L\" stuff is here because it is passed through --with-blas to configure, and I guess gets dropped and replace in the latter case because R does not like the systm wide ATLAS.\n\nNow what's strange is that we pass --with-readline=\"$SAGE_LOCAL\" to configure but it does not seem to care about the location we give it.",
    "created_at": "2013-10-08T22:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178948",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:96" align="right">comment:96</div>

In the working case, when libR.so is built the gcc command includes:

```
-L/home/jpflori/build/sage.git/local/lib -lf77blas -latlas -lgfortran -lm -lquadmath   -lreadline  -lrt -ldl -lm
```
whereas in the other case it includes:

```
-L../../lib -lRblas -lgfortran -lm -lquadmath   -lreadline  -lrt -ldl -lm
```
The "-L" stuff is here because it is passed through --with-blas to configure, and I guess gets dropped and replace in the latter case because R does not like the systm wide ATLAS.

Now what's strange is that we pass --with-readline="$SAGE_LOCAL" to configure but it does not seem to care about the location we give it.



---

archive/issue_comments_178949.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nIndeed, R configure does not give a * about what we give to --with-readline (unless its no).\n\nSo we should explicitely pass $SAGE_LOCAL through LDFLAGS I guess.",
    "created_at": "2013-10-08T22:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178949",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:97" align="right">comment:97</div>

Indeed, R configure does not give a * about what we give to --with-readline (unless its no).

So we should explicitely pass $SAGE_LOCAL through LDFLAGS I guess.



---

archive/issue_comments_178950.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nIt seems enough indeed.",
    "created_at": "2013-10-08T23:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178950",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:98" align="right">comment:98</div>

It seems enough indeed.



---

archive/issue_comments_178951.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nAs far as OS X is concerned, could some of you check if reverting https://github.com/sagemath/sage/files/ticket1939/Sage-2.10.1.rc0-fix-rpy-import-on-OSX.patch.gz helps in some way?",
    "created_at": "2013-10-09T22:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178951",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:99" align="right">comment:99</div>

As far as OS X is concerned, could some of you check if reverting https://github.com/sagemath/sage/files/ticket1939/Sage-2.10.1.rc0-fix-rpy-import-on-OSX.patch.gz helps in some way?



---

archive/issue_comments_178952.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI guess this is only a problem on OS X because of\n\n```\nR_LD_LIBRARY_PATH_save=${R_LD_LIBRARY_PATH}\nR_LD_LIBRARY_PATH=\ncase \"${host_os}\" in\n  darwin*)\n    ## Darwin provides a full path in the ID of each library such \n    ## that the linker can add library's path to the binary at link time.\n    ## This allows the dyld to find libraries even without xx_LIBRARY_PATH.\n    ## No paths should be added to R_LD_LIBRARY_PATH (which in turn\n    ## changes DYLD_LIBRARY_PATH), because they override the system\n    ## look-up sequence. Such automatic override has proven to break things\n    ## like system frameworks (e.g. ImageIO or OpenGL framework).\n    ;;\n  *)\n    for arg in ${LDFLAGS}; do\n      case \"${arg}\" in\n        -L*)\n\t  lib=`echo ${arg} | sed \"s/^-L//\"`\n\t  R_SH_VAR_ADD(R_LD_LIBRARY_PATH, [${lib}], [${PATH_SEPARATOR}])\n\t  ;;\n      esac\n    done\n    ;;\nesac\n```\nand this could be fishy as well because it look somehow contradictory with the above\n\n```\ncase \"${host_os}\" in\n  darwin*)\n    ## In order to allow the R build to be relocatable, we strip paths\n    ## from all shlibs and rely on DYLD_LIBRARY_PATH. Unfortunately\n    ## Darwin linker ignores it at build-time and doesn't use -L to\n    ## resolve dylib dependencies, so libRblas will not be found unless\n    ## we tell ld where it lives. I don't know of any more elegant solution :/\n    if test \"x${use_blas_shlib}\" = xyes; then\n      LIBR=\"${LIBR} -dylib_file libRblas.dylib:\\$(R_HOME)/lib\\$(R_ARCH)/libRblas.dylib\"\n    fi\n  ;;\nesac\nAC_SUBST(LIBR)\n```\nin configure.ac.",
    "created_at": "2013-10-09T22:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178952",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:0" align="right">comment:0</div>

I guess this is only a problem on OS X because of

```
R_LD_LIBRARY_PATH_save=${R_LD_LIBRARY_PATH}
R_LD_LIBRARY_PATH=
case "${host_os}" in
  darwin*)
    ## Darwin provides a full path in the ID of each library such 
    ## that the linker can add library's path to the binary at link time.
    ## This allows the dyld to find libraries even without xx_LIBRARY_PATH.
    ## No paths should be added to R_LD_LIBRARY_PATH (which in turn
    ## changes DYLD_LIBRARY_PATH), because they override the system
    ## look-up sequence. Such automatic override has proven to break things
    ## like system frameworks (e.g. ImageIO or OpenGL framework).
    ;;
  *)
    for arg in ${LDFLAGS}; do
      case "${arg}" in
        -L*)
	  lib=`echo ${arg} | sed "s/^-L//"`
	  R_SH_VAR_ADD(R_LD_LIBRARY_PATH, [${lib}], [${PATH_SEPARATOR}])
	  ;;
      esac
    done
    ;;
esac
```
and this could be fishy as well because it look somehow contradictory with the above

```
case "${host_os}" in
  darwin*)
    ## In order to allow the R build to be relocatable, we strip paths
    ## from all shlibs and rely on DYLD_LIBRARY_PATH. Unfortunately
    ## Darwin linker ignores it at build-time and doesn't use -L to
    ## resolve dylib dependencies, so libRblas will not be found unless
    ## we tell ld where it lives. I don't know of any more elegant solution :/
    if test "x${use_blas_shlib}" = xyes; then
      LIBR="${LIBR} -dylib_file libRblas.dylib:\$(R_HOME)/lib\$(R_ARCH)/libRblas.dylib"
    fi
  ;;
esac
AC_SUBST(LIBR)
```
in configure.ac.



---

archive/issue_comments_178953.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI guess the real problem on OS X is that as shown above, R does not modify DYLD_LIBRARY_PATH, but rather DYLD_FALLBACK_LIBRARY_PATH through etc/ldpaths in R.sh, whereas Sage modifies directly DYLD_LIBRARY_PATH.\nSee\n\n```\n## We already added -L's from LDFLAGS (except on Darwin): \n## seem to be doing it again\nfor arg in ${LDFLAGS} ${FLIBS} ${BLAS_LIBS} ${LAPACK_LIBS} ${X_LIBS} \\\n           ${TCLTK_LIBS}; do\n  case \"${arg}\" in\n    -L*)\n      lib=`echo ${arg} | sed \"s/^-L//\"`\n      r_want_lib=true\n      ## don't add anything for Darwin\n      case \"${host_os}\" in darwin*) r_want_lib=false ;; esac\n      ## Do not add non-existent directories.\n      test -d \"${lib}\" || r_want_lib=false\n      if test x\"${r_want_lib}\" = xtrue; then\n        ## Canonicalize (/usr/lib/gcc-lib/i486-linux/3.3.4/../../..).\n        lib=`cd \"${lib}\" && ${GETWD}`\n        ## Do not add something twice, or default paths.\n        r_save_IFS=\"${IFS}\"; IFS=\"${PATH_SEPARATOR}\"\n        for dir in ${R_LD_LIBRARY_PATH}${IFS}${r_ld_library_defaults}; do\n          if test x\"${dir}\" = x\"${lib}\"; then\n            r_want_lib=false\n            break\n          fi\n        done\n        IFS=\"${r_save_IFS}\"\n        if test x\"${r_want_lib}\" = xtrue; then\n          R_SH_VAR_ADD(R_LD_LIBRARY_PATH, [${lib}], [${PATH_SEPARATOR}])\n        fi\n      fi\n      ;;\n  esac\ndone\nfi\n```\nat the end of configure.ac.\n\nSo when R is not installed, at installation time, when R is run, no libR.dylib is found in DYLD_LIBRARY_PATH, but it is in the FALLBACK variant.\nBut when R is already installed, then libR.dylib is found in DYLD_LIBRARY_PATH and that's potentially a wrong version...",
    "created_at": "2013-10-10T00:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178953",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1" align="right">comment:1</div>

I guess the real problem on OS X is that as shown above, R does not modify DYLD_LIBRARY_PATH, but rather DYLD_FALLBACK_LIBRARY_PATH through etc/ldpaths in R.sh, whereas Sage modifies directly DYLD_LIBRARY_PATH.
See

```
## We already added -L's from LDFLAGS (except on Darwin): 
## seem to be doing it again
for arg in ${LDFLAGS} ${FLIBS} ${BLAS_LIBS} ${LAPACK_LIBS} ${X_LIBS} \
           ${TCLTK_LIBS}; do
  case "${arg}" in
    -L*)
      lib=`echo ${arg} | sed "s/^-L//"`
      r_want_lib=true
      ## don't add anything for Darwin
      case "${host_os}" in darwin*) r_want_lib=false ;; esac
      ## Do not add non-existent directories.
      test -d "${lib}" || r_want_lib=false
      if test x"${r_want_lib}" = xtrue; then
        ## Canonicalize (/usr/lib/gcc-lib/i486-linux/3.3.4/../../..).
        lib=`cd "${lib}" && ${GETWD}`
        ## Do not add something twice, or default paths.
        r_save_IFS="${IFS}"; IFS="${PATH_SEPARATOR}"
        for dir in ${R_LD_LIBRARY_PATH}${IFS}${r_ld_library_defaults}; do
          if test x"${dir}" = x"${lib}"; then
            r_want_lib=false
            break
          fi
        done
        IFS="${r_save_IFS}"
        if test x"${r_want_lib}" = xtrue; then
          R_SH_VAR_ADD(R_LD_LIBRARY_PATH, [${lib}], [${PATH_SEPARATOR}])
        fi
      fi
      ;;
  esac
done
fi
```
at the end of configure.ac.

So when R is not installed, at installation time, when R is run, no libR.dylib is found in DYLD_LIBRARY_PATH, but it is in the FALLBACK variant.
But when R is already installed, then libR.dylib is found in DYLD_LIBRARY_PATH and that's potentially a wrong version...



---

archive/issue_comments_178954.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n **New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)\n \n-### r-3.0.2.p0 (Jean-Pierre Flori, 7 October 2013)\n+### r-3.0.2.p0 (Jean-Pierre Flori, 30 October 2013)\n * #14706: update to 3.0.2.\n * Remove sqrtl.patch which is now upstream.\n+* Move old install on OS X.\n \n ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n * #14706: Use --disable-long-double on Cygwin rather than patching.\n@@ -13,4 +14,4 @@\n \n ---\n \n-**Apply:** [attachment: 14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)\n+**Apply:** [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)\n``````\n",
    "created_at": "2013-10-30T16:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178954",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
 **New spkg**: [http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg](http://boxen.math.washington.edu/home/jpflori/spkg/r-3.0.2.p0.spkg)
 
-### r-3.0.2.p0 (Jean-Pierre Flori, 7 October 2013)
+### r-3.0.2.p0 (Jean-Pierre Flori, 30 October 2013)
 * #14706: update to 3.0.2.
 * Remove sqrtl.patch which is now upstream.
+* Move old install on OS X.
 
 ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
 * #14706: Use --disable-long-double on Cygwin rather than patching.
@@ -13,4 +14,4 @@
 
 ---
 
-**Apply:** [attachment: 14706_R_3.0.1.patch](https://github.com/sagemath/sage/files/ticket14706/14706_R_3.0.1.patch.gz)
+**Apply:** [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)
``````




---

archive/issue_comments_178955.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nUpdated spkg to deal with the OS X issue.\nUse spkg at same address.\n\nApply:\n* [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)",
    "created_at": "2013-10-30T16:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178955",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

Updated spkg to deal with the OS X issue.
Use spkg at same address.

Apply:
* [attachment: trac_14706-version.patch](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)



---

archive/issue_events_208748.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-10-30T16:31:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208748"
}
```



---

archive/issue_events_208749.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-10-30T16:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208749"
}
```



---

archive/issue_comments_178956.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNote I've only tested this on Ubuntu, no access to OS X (now and later as well).",
    "created_at": "2013-10-30T16:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178956",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

Note I've only tested this on Ubuntu, no access to OS X (now and later as well).



---

archive/issue_comments_178957.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis builds and all tests pass on OS X 10.8.5 (Mountain Lion).",
    "created_at": "2013-10-30T18:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178957",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

This builds and all tests pass on OS X 10.8.5 (Mountain Lion).



---

archive/issue_comments_178958.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n(This failed to build on OS X 10.9 (Mavericks), but the current R spkg fails, too. So this should not be an obstacle to a positive review for this ticket.)",
    "created_at": "2013-10-30T23:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178958",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

(This failed to build on OS X 10.9 (Mavericks), but the current R spkg fails, too. So this should not be an obstacle to a positive review for this ticket.)



---

archive/issue_comments_178959.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI guess you actually tried to update from R 2.x to R 3.x and not a build from scratch with the spkg replaced?\n\nSo you might give a positive review as the OS X issue was the only thing which made this go from positive_review back to needs_work?",
    "created_at": "2013-11-07T13:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178959",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

I guess you actually tried to update from R 2.x to R 3.x and not a build from scratch with the spkg replaced?

So you might give a positive review as the OS X issue was the only thing which made this go from positive_review back to needs_work?



---

archive/issue_comments_178960.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI don't remember what I did before, probably upgraded an existing installation. Earlier today I started with a new Sage tarball, put in the new R spkg and applied the patch. All tests passed again.",
    "created_at": "2013-11-07T19:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178960",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

I don't remember what I did before, probably upgraded an existing installation. Earlier today I started with a new Sage tarball, put in the new R spkg and applied the patch. All tests passed again.



---

archive/issue_events_208750.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2013-11-07T19:20:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208750"
}
```



---

archive/issue_events_208751.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2013-11-07T19:20:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208751"
}
```



---

archive/issue_comments_178961.json:
```json
{
    "body": "Changed reviewer from **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer** to **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer, John Palmieri**",
    "created_at": "2013-11-07T19:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178961",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer** to **Leif Leonhardy, Karl-Dieter Crisman, Jeroen Demeyer, John Palmieri**



---

archive/issue_comments_178962.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nJust now I successfully took an existing Sage build and updated just the R spkg. That went well, and all tests passed. I found it a little odd that the rpy spkg wasn't rebuilt (it tried to install it and exited, saying `Package rpy2-2.0.8.p0 is already installed`). I hope that the rpy spkg just relies on information like where R has been installed, not specific version information.",
    "created_at": "2013-11-07T21:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178962",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Just now I successfully took an existing Sage build and updated just the R spkg. That went well, and all tests passed. I found it a little odd that the rpy spkg wasn't rebuilt (it tried to install it and exited, saying `Package rpy2-2.0.8.p0 is already installed`). I hope that the rpy spkg just relies on information like where R has been installed, not specific version information.



---

archive/issue_comments_178963.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@jhpalmieri](#comment:108):\n> Just now I successfully took an existing Sage build and updated just the R spkg. That went well, and all tests passed. I found it a little odd that the rpy spkg wasn't rebuilt (it tried to install it and exited, saying `Package rpy2-2.0.8.p0 is already installed`). I would definitely say this is not an issue with the R spkg, but with Sage build system.",
    "created_at": "2013-11-07T22:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178963",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@jhpalmieri](#comment:108):
> Just now I successfully took an existing Sage build and updated just the R spkg. That went well, and all tests passed. I found it a little odd that the rpy spkg wasn't rebuilt (it tried to install it and exited, saying `Package rpy2-2.0.8.p0 is already installed`). I would definitely say this is not an issue with the R spkg, but with Sage build system.



---

archive/issue_events_208752.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T07:32:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208752"
}
```



---

archive/issue_events_208753.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T07:32:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208753"
}
```



---

archive/issue_comments_178964.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nThis fails to install on Solaris SPARC:\n\n```\nLoading required package: Matrix\nError in dyn.load(file, DLLpath = DLLpath, ...) : \n  unable to load shared object '/home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix/libs/Matrix.so':\n  ld.so.1: R: fatal: relocation error: file /home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix/libs/Matrix.so: symbol libintl_dngettext: referenced symbol not found\nError : require(Matrix) is not TRUE\nERROR: installing package indices failed\n* removing '/home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix'\nmake[5]: *** [Matrix.ts] Error 1\n```\n\nFull log: [http://build.sagemath.org/sage/builders/Skynet%20mark%20%28SunOS%205.10-32%29/builds/361/steps/shell_5/logs/r](http://build.sagemath.org/sage/builders/Skynet%20mark%20%28SunOS%205.10-32%29/builds/361/steps/shell_5/logs/r)",
    "created_at": "2013-11-12T07:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178964",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

This fails to install on Solaris SPARC:

```
Loading required package: Matrix
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  unable to load shared object '/home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix/libs/Matrix.so':
  ld.so.1: R: fatal: relocation error: file /home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix/libs/Matrix.so: symbol libintl_dngettext: referenced symbol not found
Error : require(Matrix) is not TRUE
ERROR: installing package indices failed
* removing '/home/buildbot/build/sage/mark-1/mark_full/build/sage-5.13.beta3/spkg/build/r-3.0.2.p0/src/library/Matrix'
make[5]: *** [Matrix.ts] Error 1
```

Full log: [http://build.sagemath.org/sage/builders/Skynet%20mark%20%28SunOS%205.10-32%29/builds/361/steps/shell_5/logs/r](http://build.sagemath.org/sage/builders/Skynet%20mark%20%28SunOS%205.10-32%29/builds/361/steps/shell_5/logs/r)



---

archive/issue_comments_178965.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLooks like what's reported here:\n* http://osol.wikidot.com/logentry:software\nAnother madness of Solaris shipping a bunch of different versions of the same libs.",
    "created_at": "2013-11-12T10:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178965",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1" align="right">comment:1</div>

Looks like what's reported here:
* http://osol.wikidot.com/logentry:software
Another madness of Solaris shipping a bunch of different versions of the same libs.



---

archive/issue_comments_178966.json:
```json
{
    "body": "Attachment: **[r-3.0.2.p0.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-3.0.2.p0.diff.gz)**\n\nSpkg diff, for review only.",
    "created_at": "2013-11-12T16:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178966",
    "user": "https://github.com/jpflori"
}
```

Attachment: **[r-3.0.2.p0.diff.gz](https://github.com/sagemath/sage/files/ticket14706/r-3.0.2.p0.diff.gz)**

Spkg diff, for review only.



---

archive/issue_comments_178967.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHopefully, I fixed the problem.\nThe Matrix module wants to use the gettext dngettext function.\nOn usual system this is provided by the system libc or the system libintl.\nOn Solaris the system libintl does not provide it so R decides to build its own libintl (in src/extra/intl) but with symbols hidden by default (-fvisibility-hidden) and only publicize a few of them, but not dngettext.\nSo I treated that last function as the few others one already visible.\n\nspkg at same address.\ndiff updated.",
    "created_at": "2013-11-12T16:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178967",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

Hopefully, I fixed the problem.
The Matrix module wants to use the gettext dngettext function.
On usual system this is provided by the system libc or the system libintl.
On Solaris the system libintl does not provide it so R decides to build its own libintl (in src/extra/intl) but with symbols hidden by default (-fvisibility-hidden) and only publicize a few of them, but not dngettext.
So I treated that last function as the few others one already visible.

spkg at same address.
diff updated.



---

archive/issue_events_208754.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-12T16:31:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208754"
}
```



---

archive/issue_events_208755.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-12T16:31:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208755"
}
```



---

archive/issue_comments_178968.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n * #14706: update to 3.0.2.\n * Remove sqrtl.patch which is now upstream.\n * Move old install on OS X.\n+* Fix visibility of symbols in built-in libintl.\n \n ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)\n * #14706: Use --disable-long-double on Cygwin rather than patching.\n``````\n",
    "created_at": "2013-11-12T16:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178968",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 * #14706: update to 3.0.2.
 * Remove sqrtl.patch which is now upstream.
 * Move old install on OS X.
+* Fix visibility of symbols in built-in libintl.
 
 ### r-3.0.1.p1 (Jean-Pierre Flori, 10 June 2013)
 * #14706: Use --disable-long-double on Cygwin rather than patching.
``````




---

archive/issue_comments_178969.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n* Non-standard location readline problem reported as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15556\n* Solaris gettext problem as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15555",
    "created_at": "2013-11-12T20:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178969",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

* Non-standard location readline problem reported as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15556
* Solaris gettext problem as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15555



---

archive/issue_comments_178970.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2013-11-12T20:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178970",
    "user": "https://github.com/jpflori"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_events_208756.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-14T11:15:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208756"
}
```



---

archive/issue_events_208757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-14T11:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208757"
}
```



---

archive/issue_comments_178971.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNitpick about the library patch: the second `r.version()` should be `r_version()`. By the way, I wouldn't mind deprecating `r_version()` since I really don't see the point. It would be consistent with the deprecation of `gap_version()`.",
    "created_at": "2013-11-14T11:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178971",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Nitpick about the library patch: the second `r.version()` should be `r_version()`. By the way, I wouldn't mind deprecating `r_version()` since I really don't see the point. It would be consistent with the deprecation of `gap_version()`.



---

archive/issue_comments_178972.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[trac_14706-version.patch.gz](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)**\n\nPatch updated.\n\nSure, I have nothing agains deprecating r_version which seems not so useful.\nBut I won't have time to do it right now and this is not really the scope of this ticket, so two good reasons to do that in a follow-up ticket.",
    "created_at": "2013-11-14T14:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178972",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[trac_14706-version.patch.gz](https://github.com/sagemath/sage/files/ticket14706/trac_14706-version.patch.gz)**

Patch updated.

Sure, I have nothing agains deprecating r_version which seems not so useful.
But I won't have time to do it right now and this is not really the scope of this ticket, so two good reasons to do that in a follow-up ticket.



---

archive/issue_events_208758.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-14T14:09:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208758"
}
```



---

archive/issue_events_208759.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-14T14:09:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208759"
}
```



---

archive/issue_comments_178973.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSee the discussion at #13686 as well (and perhaps elsewhere?) on the R version function issue.",
    "created_at": "2013-11-14T14:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178973",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

See the discussion at #13686 as well (and perhaps elsewhere?) on the R version function issue.



---

archive/issue_events_208760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-14T15:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208760"
}
```



---

archive/issue_events_208761.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-14T15:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208761"
}
```



---

archive/issue_comments_178974.json:
```json
{
    "body": "Merged: **sage-5.13.beta4**",
    "created_at": "2013-11-24T09:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178974",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.13.beta4**



---

archive/issue_events_208762.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-24T09:22:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208762"
}
```



---

archive/issue_events_208763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-24T09:22:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14706#event-208763"
}
```



---

archive/issue_comments_178975.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nShouldn't `r-3.0.2` be available from http://www.sagemath.org/packages/upstream/r/r-3.0.2.tar so that the build system of the git master branch can download it automatically?",
    "created_at": "2013-11-27T10:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178975",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:9" align="right">comment:9</div>

Shouldn't `r-3.0.2` be available from http://www.sagemath.org/packages/upstream/r/r-3.0.2.tar so that the build system of the git master branch can download it automatically?



---

archive/issue_comments_178976.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI've no idea who is in charge of maintaining packages/upstream, nor if it's automatically updated when Mercurial releases are merged into the git repo, nor how we should upload future tarballs when we're in git-only mode (in particular note that some tarball are not upstream one's, maybe all dependencies should now have spkg-src which automate the creation of the tarballs --- vanilla or not).",
    "created_at": "2013-11-27T10:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178976",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:0" align="right">comment:0</div>

I've no idea who is in charge of maintaining packages/upstream, nor if it's automatically updated when Mercurial releases are merged into the git repo, nor how we should upload future tarballs when we're in git-only mode (in particular note that some tarball are not upstream one's, maybe all dependencies should now have spkg-src which automate the creation of the tarballs --- vanilla or not).



---

archive/issue_comments_178977.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nOk, thanks for your reply. I also added a comment on the issue at [#14480 comment:51](https://github.com/sagemath/sage/issues/14480#comment:51), so hopefully someone who knows where to find the right version can upload it!",
    "created_at": "2013-11-27T10:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178977",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:121" align="right">comment:121</div>

Ok, thanks for your reply. I also added a comment on the issue at [#14480 comment:51](https://github.com/sagemath/sage/issues/14480#comment:51), so hopefully someone who knows where to find the right version can upload it!



---

archive/issue_comments_178978.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI've posted on sage-git where it might receive more attention:\n* https://groups.google.com/d/msg/sage-git/wyM7OSZcw2E/gbVNVq0KaKIJ",
    "created_at": "2013-11-27T10:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178978",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

I've posted on sage-git where it might receive more attention:
* https://groups.google.com/d/msg/sage-git/wyM7OSZcw2E/gbVNVq0KaKIJ



---

archive/issue_comments_178979.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@jpflori](#comment:113):\n> * Non-standard location readline problem reported as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15556\n\nUpstream answered: you're the first one to report that in 15 years, unless you provide a patch we don't care.\n> * Solaris gettext problem as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15555\n\nThis has been fixed in R trunk.",
    "created_at": "2013-12-25T16:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178979",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@jpflori](#comment:113):
> * Non-standard location readline problem reported as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15556

Upstream answered: you're the first one to report that in 15 years, unless you provide a patch we don't care.
> * Solaris gettext problem as https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15555

This has been fixed in R trunk.



---

archive/issue_comments_178980.json:
```json
{
    "body": "Attachment: **[arm-r-3.0.2.p0.log](https://github.com/sagemath/sage/files/ticket14706/arm-r-3.0.2.p0.log)**\n\nlog on an ARM system",
    "created_at": "2014-01-17T13:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178980",
    "user": "https://github.com/dimpase"
}
```

Attachment: **[arm-r-3.0.2.p0.log](https://github.com/sagemath/sage/files/ticket14706/arm-r-3.0.2.p0.log)**

log on an ARM system



---

archive/issue_comments_178981.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI am trying to build Sage 6.0 on a ARM system I just got access to, and it fails with a strange error. See the corr. attachment for the full log.\n\n```\nbegin installing recommended package lattice\n* installing *source* package 'lattice' ...\n** package 'lattice' successfully unpacked and MD5 sums checked\n** libs\nmake[6]: Entering directory `/tmp/Rtmpu7TiBm/R.INSTALL74b515accca6/lattice/src'\ngcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src\n/include -DNDEBUG      -fpic  -g -O2   -c init.c -o init.o\ngcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src\n/include -DNDEBUG      -fpic  -g -O2   -c threeDplot.c -o threeDplot.o\ngcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o latticeSHLIB_EXT \ninit.o threeDplot.o SHLIB_LIBADD -L/home/dimpase/sage/sage/local/var/tmp/sage/bu\nild/r-3.0.2.p0/src/lib -lR\ngcc: error: SHLIB_LIBADD: No such file or directory\nmake[6]: *** [latticeSHLIB_EXT] Error 1\nmake[6]: Leaving directory `/tmp/Rtmpu7TiBm/R.INSTALL74b515accca6/lattice/src'\nERROR: compilation failed for package 'lattice'\n* removing '/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/library/lattice'\nmake[5]: *** [lattice.ts] Error 1\n```",
    "created_at": "2014-01-17T13:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178981",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

I am trying to build Sage 6.0 on a ARM system I just got access to, and it fails with a strange error. See the corr. attachment for the full log.

```
begin installing recommended package lattice
* installing *source* package 'lattice' ...
** package 'lattice' successfully unpacked and MD5 sums checked
** libs
make[6]: Entering directory `/tmp/Rtmpu7TiBm/R.INSTALL74b515accca6/lattice/src'
gcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src
/include -DNDEBUG      -fpic  -g -O2   -c init.c -o init.o
gcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src
/include -DNDEBUG      -fpic  -g -O2   -c threeDplot.c -o threeDplot.o
gcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o latticeSHLIB_EXT 
init.o threeDplot.o SHLIB_LIBADD -L/home/dimpase/sage/sage/local/var/tmp/sage/bu
ild/r-3.0.2.p0/src/lib -lR
gcc: error: SHLIB_LIBADD: No such file or directory
make[6]: *** [latticeSHLIB_EXT] Error 1
make[6]: Leaving directory `/tmp/Rtmpu7TiBm/R.INSTALL74b515accca6/lattice/src'
ERROR: compilation failed for package 'lattice'
* removing '/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/library/lattice'
make[5]: *** [lattice.ts] Error 1
```



---

archive/issue_comments_178982.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSee http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue",
    "created_at": "2014-01-17T17:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178982",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue



---

archive/issue_comments_178983.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@vbraun](#comment:125):\n> See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue\n\nAnyone familiar with `R` building system around?\nI tried this, and got weird stuff:\n\n```\n** package 'lattice' successfully unpacked and MD5 sums checked\n** libs\nmake[6]: Entering directory `/tmp/RtmpYoKYEk/R.INSTALL57a933daa9d6/lattice/src'\ngcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/include -DNDEBUG \n     -fpic  -g -O2   -c init.c -o init.o\ngcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/include -DNDEBUG \n     -fpic  -g -O2   -c threeDplot.c -o threeDplot.o\ngcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o latticeSHLIB_EXT init.o threeDplot.\no -L/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/lib -lR\ngcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o .so init.o threeDplot.o -L/home/dim\npase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/lib -lR\nmake[6]: Leaving directory `/tmp/RtmpYoKYEk/R.INSTALL57a933daa9d6/lattice/src'\n```\nnote that linker is called twice, once with `-o latticeSHLIB_EXT`, and then with `-o .so` !? wtf...\nI can only speculate that the generation of `SHLIB_EXT` is still broken and injects unprintable chars into the string, which leads to the linking command executed twice.",
    "created_at": "2014-01-27T10:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178983",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@vbraun](#comment:125):
> See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue

Anyone familiar with `R` building system around?
I tried this, and got weird stuff:

```
** package 'lattice' successfully unpacked and MD5 sums checked
** libs
make[6]: Entering directory `/tmp/RtmpYoKYEk/R.INSTALL57a933daa9d6/lattice/src'
gcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/include -DNDEBUG 
     -fpic  -g -O2   -c init.c -o init.o
gcc -std=gnu99 -I/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/include -DNDEBUG 
     -fpic  -g -O2   -c threeDplot.c -o threeDplot.o
gcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o latticeSHLIB_EXT init.o threeDplot.
o -L/home/dimpase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/lib -lR
gcc -std=gnu99 -shared -L/home/dimpase/sage/sage/local/lib/ -o .so init.o threeDplot.o -L/home/dim
pase/sage/sage/local/var/tmp/sage/build/r-3.0.2.p0/src/lib -lR
make[6]: Leaving directory `/tmp/RtmpYoKYEk/R.INSTALL57a933daa9d6/lattice/src'
```
note that linker is called twice, once with `-o latticeSHLIB_EXT`, and then with `-o .so` !? wtf...
I can only speculate that the generation of `SHLIB_EXT` is still broken and injects unprintable chars into the string, which leads to the linking command executed twice.



---

archive/issue_comments_178984.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@dimpase](#comment:126):\n> Replying to [@vbraun](#comment:125):\n> > See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue\n\n> \n> Anyone familiar with `R` building system around?\n> I tried this, and got weird stuff:\n\nit turns out that `SHLIB_EXT` is set up in more than 1 place in `install.R`. So this workaround has to be done for all these places to work right. \n\nI've opened a new ticket with the patch. See #15762.",
    "created_at": "2014-01-29T15:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178984",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@dimpase](#comment:126):
> Replying to [@vbraun](#comment:125):
> > See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=679180 for an analysis and patch of the `SHLIB_LIBADD` issue

> 
> Anyone familiar with `R` building system around?
> I tried this, and got weird stuff:

it turns out that `SHLIB_EXT` is set up in more than 1 place in `install.R`. So this workaround has to be done for all these places to work right. 

I've opened a new ticket with the patch. See #15762.



---

archive/issue_comments_178985.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDear co-authors,\n\nPlease have a look at Trac#16694, whoch might be germane to your work and solution.\n\nEmmanuel Charpentier",
    "created_at": "2014-07-25T20:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14706#issuecomment-178985",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

Dear co-authors,

Please have a look at Trac#16694, whoch might be germane to your work and solution.

Emmanuel Charpentier
