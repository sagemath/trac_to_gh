# Issue 14624: Failure in Singular upon division with remainder for a multivariate polynomial ring over a univariate fraction field

archive/issues_014420.json:
```json
{
    "assignees": [
        "https://github.com/malb"
    ],
    "body": "\n```\nsage: M = PolynomialRing(QQ['a'].fraction_field(), ['x','y'])\nsage: x,y = M.gens()\nsage: a = M(M.base_ring().gen())\nsage: a.quo_rem(x)\nTraceback (most recent call last):\n...\n/opt/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)\n    588 \n    589         if s.find(\"error\") != -1 or s.find(\"Segment fault\") != -1:\n--> 590             raise SingularError('Singular error:\\n%s'%s)\n    591 \n    592         if get_verbose() > 0:\n\nTypeError: Singular error:\n   ? division(`number`,`poly`) failed\n   ? error occurred in or before STDIN line 101850: `def sage38517=division(sage38515,sage38516);`\n```\n\nCC:  @simon-king-jena\n\nComponent: **commutative algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14624_\n\n",
    "created_at": "2013-05-21T18:31:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Failure in Singular upon division with remainder for a multivariate polynomial ring over a univariate fraction field",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/14624",
    "user": "https://github.com/nthiery"
}
```

```
sage: M = PolynomialRing(QQ['a'].fraction_field(), ['x','y'])
sage: x,y = M.gens()
sage: a = M(M.base_ring().gen())
sage: a.quo_rem(x)
Traceback (most recent call last):
...
/opt/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)
    588 
    589         if s.find("error") != -1 or s.find("Segment fault") != -1:
--> 590             raise SingularError('Singular error:\n%s'%s)
    591 
    592         if get_verbose() > 0:

TypeError: Singular error:
   ? division(`number`,`poly`) failed
   ? error occurred in or before STDIN line 101850: `def sage38517=division(sage38515,sage38516);`
```

CC:  @simon-king-jena

Component: **commutative algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/14624_





---

archive/issue_events_207154.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-21T18:31:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207154"
}
```



---

archive/issue_events_207155.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-21T18:31:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207155"
}
```



---

archive/issue_events_207156.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-21T18:31:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207156"
}
```



---

archive/issue_events_207157.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-21T18:31:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207157"
}
```



---

archive/issue_events_207158.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2013-05-21T18:31:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207158"
}
```



---

archive/issue_comments_177464.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFirst question: Why is this operation using the singular pexpect interface, and not libsingular?\n\nSecond question: Why is `a._singular_init_()` returning `\"a\"` and not `\"poly(a)\"` or so? As a result, we have\n\n```\nsage: M = PolynomialRing(QQ['a'].fraction_field(), ['x','y'])\nsage: x,y = M.gens()\nsage: a = M(M.base_ring().gen())\nsage: singular(a).typeof()\nnumber\nsage: singular(\"a\").typeof()\nnumber\nsage: singular(\"poly(a)\").typeof()\npoly\n```",
    "created_at": "2013-05-21T20:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14624#issuecomment-177464",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

First question: Why is this operation using the singular pexpect interface, and not libsingular?

Second question: Why is `a._singular_init_()` returning `"a"` and not `"poly(a)"` or so? As a result, we have

```
sage: M = PolynomialRing(QQ['a'].fraction_field(), ['x','y'])
sage: x,y = M.gens()
sage: a = M(M.base_ring().gen())
sage: singular(a).typeof()
number
sage: singular("a").typeof()
number
sage: singular("poly(a)").typeof()
poly
```



---

archive/issue_comments_177465.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI guess we have to look at `sage.rings.polynomial.polynomial_singular_interface._singular_init_func`, where the use of the string representation without adding `\"poly(...)\"` is hardcoded.",
    "created_at": "2013-05-21T20:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14624#issuecomment-177465",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

I guess we have to look at `sage.rings.polynomial.polynomial_singular_interface._singular_init_func`, where the use of the string representation without adding `"poly(...)"` is hardcoded.



---

archive/issue_events_207159.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207159"
}
```



---

archive/issue_events_207160.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207160"
}
```



---

archive/issue_events_207161.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207161"
}
```



---

archive/issue_events_207162.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207162"
}
```



---

archive/issue_events_207163.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207163"
}
```



---

archive/issue_events_207164.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207164"
}
```



---

archive/issue_events_207165.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207165"
}
```



---

archive/issue_events_207166.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207166"
}
```



---

archive/issue_events_207167.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14624",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14624#event-207167"
}
```
