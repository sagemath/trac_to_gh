# Issue 14406: Various prereq fixes

archive/issues_014202.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-drkirkby"
    ],
    "body": "<div id=\"comment:0\"></div>\n\n* Allow Sage to build on Cygwin without setting `SAGE_PORT`.\n* Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).\n* Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n* Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.\n* Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.\n\n**Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))\n\n**Apply** [attachment: trac_14406+reviewer-v3.patch](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)\n\nCC:  @jdemeyer @nexttime @jpflori\n\nComponent: **porting**\n\nAuthor: **Jeroen Demeyer, Jean-Pierre Flori**\n\nReviewer: **Jean-Pierre Flori, Jeroen Demeyer**\n\nMerged: **sage-5.9.beta4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14406_\n\n",
    "closed_at": "2013-04-04T17:41:11Z",
    "created_at": "2013-04-03T13:03:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Various prereq fixes",
    "type": "issue",
    "updated_at": "2013-04-12T06:09:47Z",
    "url": "https://github.com/sagemath/sage/issues/14406",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

* Allow Sage to build on Cygwin without setting `SAGE_PORT`.
* Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).
* Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
* Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.
* Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.

**Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))

**Apply** [attachment: trac_14406+reviewer-v3.patch](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)

CC:  @jdemeyer @nexttime @jpflori

Component: **porting**

Author: **Jeroen Demeyer, Jean-Pierre Flori**

Reviewer: **Jean-Pierre Flori, Jeroen Demeyer**

Merged: **sage-5.9.beta4**

_Issue created by migration from https://trac.sagemath.org/ticket/14406_





---

archive/issue_events_201671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:03:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201671"
}
```



---

archive/issue_events_201672.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:03:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201672"
}
```



---

archive/issue_events_201673.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:03:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201673"
}
```



---

archive/issue_events_201674.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:03:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201674"
}
```



---

archive/issue_comments_173384.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n Allow Sage to build on Cygwin without setting `SAGE_PORT`.\n+\n+While we're at it:\n+* remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n``````\n",
    "created_at": "2013-04-03T13:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173384",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 Allow Sage to build on Cygwin without setting `SAGE_PORT`.
+
+While we're at it:
+* remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
``````




---

archive/issue_events_201675.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2013-04-03T13:30:28Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201675"
}
```



---

archive/issue_comments_173385.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2013-04-03T13:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173385",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_201676.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:30:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "title_is": "Various prereq fixes",
    "title_was": "Update prereq for Cygwin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201676"
}
```



---

archive/issue_comments_173386.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-Allow Sage to build on Cygwin without setting `SAGE_PORT`.\n-\n-While we're at it:\n-* remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n+* Allow Sage to build on Cygwin without setting `SAGE_PORT`.\n+* Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).\n+* Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n+* Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.\n+* Check for `tar` before actually untarring the prereq tarball (originally #14407).\n``````\n",
    "created_at": "2013-04-03T13:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173386",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-Allow Sage to build on Cygwin without setting `SAGE_PORT`.
-
-While we're at it:
-* remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
+* Allow Sage to build on Cygwin without setting `SAGE_PORT`.
+* Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).
+* Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
+* Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.
+* Check for `tar` before actually untarring the prereq tarball (originally #14407).
``````




---

archive/issue_events_201677.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:30:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201677"
}
```



---

archive/issue_events_201678.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:30:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201678"
}
```



---

archive/issue_comments_173387.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n * Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).\n * Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n * Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.\n-* Check for `tar` before actually untarring the prereq tarball (originally #14407).\n+* Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.\n``````\n",
    "created_at": "2013-04-03T13:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173387",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 * Don't check for `sqrtl()` which is apparently not needed (Cygwin doesn't have it, yet Sage builds).
 * Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
 * Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.
-* Check for `tar` before actually untarring the prereq tarball (originally #14407).
+* Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.
``````




---

archive/issue_comments_173388.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,7 @@\n * Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.\n * Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.\n * Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.\n+\n+**Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))\n+\n+**Apply** [attachment: 14406_cygwin_prereq.patch](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)\n``````\n",
    "created_at": "2013-04-03T13:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173388",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,7 @@
 * Remove all checks for the deprecated variable `SAGE_FORTRAN_LIB`.
 * Remove `AC_ARG_VAR(SAGE_FORTRAN)` which is a deprecated variable.
 * Check for `tar` before actually untarring the prereq tarball (originally #14407), only do these checks if `SAGE_PORT` is unset.
+
+**Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))
+
+**Apply** [attachment: 14406_cygwin_prereq.patch](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)
``````




---

archive/issue_comments_173389.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[prereq-1.2.diff.gz](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz)**",
    "created_at": "2013-04-03T13:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173389",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[prereq-1.2.diff.gz](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz)**



---

archive/issue_events_201679.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T13:58:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201679"
}
```



---

archive/issue_comments_173390.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIn the prereq install script, the Solaris part could be a little bit polished.\nThe first sentence includes a disturbing also:\n\n```\nYou MUST also use the GNU version of tar...\n```\nwhereas nothing precedes it.\n\nI don't really like the fact that both tar and make are tested together in the constructions\n\n```\nif [ -f \"/usr/sfw/bin/gtar\" ]  && [ -f \"/usr/sfw/bin/gmake\" ] ; then\n```\nThe only advantage of doing this is to easily suggest to do \n\n```\n   echo \"$ mkdir \\$HOME/bins-for-sage\" \n   echo \"$ cp /usr/sfw/bin/gmake \\$HOME/bins-for-sage/make\" \n   echo \"$ cp /usr/sfw/bin/gtar \\$HOME/bins-for-sage/tar\" \n   echo \"$ export PATH=\\$HOME/bins-for-sage:\\$PATH\" \n```\nI think we'd better split the two tests, i.e. only check for tar in the tar part and for make in the make part.\nAt worst, a naive user will have to run make twice before it passes the prereq checks and will have twice $HAME\\bins-for-sage in its PATH.\n\nThere are also ugly double spaces before \"&&\" on the (new) lines 132 and 165 :)",
    "created_at": "2013-04-03T14:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173390",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

In the prereq install script, the Solaris part could be a little bit polished.
The first sentence includes a disturbing also:

```
You MUST also use the GNU version of tar...
```
whereas nothing precedes it.

I don't really like the fact that both tar and make are tested together in the constructions

```
if [ -f "/usr/sfw/bin/gtar" ]  && [ -f "/usr/sfw/bin/gmake" ] ; then
```
The only advantage of doing this is to easily suggest to do 

```
   echo "$ mkdir \$HOME/bins-for-sage" 
   echo "$ cp /usr/sfw/bin/gmake \$HOME/bins-for-sage/make" 
   echo "$ cp /usr/sfw/bin/gtar \$HOME/bins-for-sage/tar" 
   echo "$ export PATH=\$HOME/bins-for-sage:\$PATH" 
```
I think we'd better split the two tests, i.e. only check for tar in the tar part and for make in the make part.
At worst, a naive user will have to run make twice before it passes the prereq checks and will have twice $HAME\bins-for-sage in its PATH.

There are also ugly double spaces before "&&" on the (new) lines 132 and 165 :)



---

archive/issue_comments_173391.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWe could also include the Solaris parts together with the HP-UX and other strange Unix oses as elif clauses a little down below.\n\nThat may look nicer and prevent running \"tar --version\" twice.\n\nIf so, the commented out comments will need just a little rewriting and relocation.",
    "created_at": "2013-04-03T14:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173391",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

We could also include the Solaris parts together with the HP-UX and other strange Unix oses as elif clauses a little down below.

That may look nicer and prevent running "tar --version" twice.

If so, the commented out comments will need just a little rewriting and relocation.



---

archive/issue_comments_173392.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOK, making changes...",
    "created_at": "2013-04-03T14:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173392",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

OK, making changes...



---

archive/issue_comments_173393.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDidn't we want to replace the check for `sqrtl()` by a check for `?gammal()`?  (OTOH I don't recall why exactly... ;-) )\n\nActually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes, i.e., unless we're on Cygwin(?) or on FreeBSD, or skip the test because `SAGE_PORT` is set.",
    "created_at": "2013-04-03T14:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173393",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Didn't we want to replace the check for `sqrtl()` by a check for `?gammal()`?  (OTOH I don't recall why exactly... ;-) )

Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes, i.e., unless we're on Cygwin(?) or on FreeBSD, or skip the test because `SAGE_PORT` is set.



---

archive/issue_comments_173394.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAlso recall we still don't have `logl` (#14078) and so things are still weird, though we worked around it there.  But I don't have a problem with the Cygwin stuff here; Sage builds as is on Cygwin.  I think David originally added that check just to make sure one didn't need stuff like Cephes, but apparently we don't actually *use* `sqrtl()` and friends.",
    "created_at": "2013-04-03T14:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173394",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

Also recall we still don't have `logl` (#14078) and so things are still weird, though we worked around it there.  But I don't have a problem with the Cygwin stuff here; Sage builds as is on Cygwin.  I think David originally added that check just to make sure one didn't need stuff like Cephes, but apparently we don't actually *use* `sqrtl()` and friends.



---

archive/issue_comments_173395.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nexttime](#comment%3A9):\n> Didn't we want to replace the check for `sqrtl()` by a check for `?gammal()`?  (OTOH I don't recall why exactly... ;-) )\n> \n> Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes, i.e., unless we're on Cygwin(?) or on FreeBSD, or skip the test because `SAGE_PORT` is set.\n\nWe don't build Cephes on Cygwin.\nOn Cygwin, the only *l functions actually needed anywhere in Sage and which caused troubles (and that Cygwin libm does not provide, not sure what it actually provides, but I seem to remember it provides no \"long double\" functions at all) was \"logl\" because of R, but we patched R so that its not needed anymore, and the next R upstream version provides a configure option to disable the use of \"long double\" functions anyway.",
    "created_at": "2013-04-03T14:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173395",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nexttime](#comment%3A9):
> Didn't we want to replace the check for `sqrtl()` by a check for `?gammal()`?  (OTOH I don't recall why exactly... ;-) )
> 
> Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes, i.e., unless we're on Cygwin(?) or on FreeBSD, or skip the test because `SAGE_PORT` is set.

We don't build Cephes on Cygwin.
On Cygwin, the only *l functions actually needed anywhere in Sage and which caused troubles (and that Cygwin libm does not provide, not sure what it actually provides, but I seem to remember it provides no "long double" functions at all) was "logl" because of R, but we patched R so that its not needed anymore, and the next R upstream version provides a configure option to disable the use of "long double" functions anyway.



---

archive/issue_comments_173396.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHere is what was recently included in Cygwin:\n\n```\nSupport for the C99 complex functions, except for the \"long double\" implementations. New APIs: cacos, cacosf, cacosh, cacoshf, carg, cargf, casin, casinf, casinh, casinhf, catan, catanf, catanh, catanhf, ccos, ccosf, ccosh, ccoshf, cexp, cexpf, cimag, cimagf, clog, clogf, conj, conjf, cpow, cpowf, cproj, cprojf, creal, crealf, csin, csinf, csinh, csinhf, csqrt, csqrtf, ctan, ctanf, ctanh, ctanhf. \n```\nSee http://cygwin.com/cygwin-ug-net/ov-new1.7.html.",
    "created_at": "2013-04-03T14:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173396",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12" align="right">comment:12</div>

Here is what was recently included in Cygwin:

```
Support for the C99 complex functions, except for the "long double" implementations. New APIs: cacos, cacosf, cacosh, cacoshf, carg, cargf, casin, casinf, casinh, casinhf, catan, catanf, catanh, catanhf, ccos, ccosf, ccosh, ccoshf, cexp, cexpf, cimag, cimagf, clog, clogf, conj, conjf, cpow, cpowf, cproj, cprojf, creal, crealf, csin, csinf, csinh, csinhf, csqrt, csqrtf, ctan, ctanf, ctanh, ctanhf. 
```
See http://cygwin.com/cygwin-ug-net/ov-new1.7.html.



---

archive/issue_comments_173397.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnd I don't know what the FreeBSD libm lacks that make Sage's compilation fail (except for the logl function for R of course).",
    "created_at": "2013-04-03T14:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173397",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

And I don't know what the FreeBSD libm lacks that make Sage's compilation fail (except for the logl function for R of course).



---

archive/issue_comments_173398.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAnd of course we could revert the patch for R from #14078 and let Cephes install again on Cygwin.\nIt is just that at the time we were working on #14078, patching R, which is about to get the \"without long double\" support in a future release seemed easier.\nI cannot not promise that installing Cephes and then trying to install R without the patch will just work out of the box.",
    "created_at": "2013-04-03T14:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173398",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

And of course we could revert the patch for R from #14078 and let Cephes install again on Cygwin.
It is just that at the time we were working on #14078, patching R, which is about to get the "without long double" support in a future release seemed easier.
I cannot not promise that installing Cephes and then trying to install R without the patch will just work out of the box.



---

archive/issue_comments_173399.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttachment: **[14406_cygwin_prereq.patch.gz](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)**\n\nReplying to [@nexttime](#comment%3A9):\n> Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes\n\nIt seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.",
    "created_at": "2013-04-03T14:58:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173399",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Attachment: **[14406_cygwin_prereq.patch.gz](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)**

Replying to [@nexttime](#comment%3A9):
> Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes

It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.



---

archive/issue_comments_173400.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOK, simplified the `tar`/`make` checks.",
    "created_at": "2013-04-03T15:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173400",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

OK, simplified the `tar`/`make` checks.



---

archive/issue_comments_173401.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOk, I've slightly recomplexified it :)",
    "created_at": "2013-04-03T15:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173401",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

Ok, I've slightly recomplexified it :)



---

archive/issue_comments_173402.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOops, something is wrong, coming back with a proper patch.",
    "created_at": "2013-04-03T15:23:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173402",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Oops, something is wrong, coming back with a proper patch.



---

archive/issue_comments_173403.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A15):\n> Replying to [@nexttime](#comment%3A9):\n> > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes\n> \n> It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.\n\nIIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.\n\n\n\n\nTo repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?\n\nI.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].",
    "created_at": "2013-04-03T15:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173403",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A15):
> Replying to [@nexttime](#comment%3A9):
> > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes
> 
> It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.

IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.




To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?

I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].



---

archive/issue_comments_173404.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nexttime](#comment%3A19):\n> Replying to [@jdemeyer](#comment%3A15):\n> > Replying to [@nexttime](#comment%3A9):\n> > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes\n> > \n> > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.\n> \n> \n> IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.\n\nI'll have a look.\n> \n> \n> \n> \n> To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?\n>\n>\n\nMaybe for complex functions \"c*\" (which are now in Cygwin libm but used not to be)? \n> I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].",
    "created_at": "2013-04-03T15:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173404",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nexttime](#comment%3A19):
> Replying to [@jdemeyer](#comment%3A15):
> > Replying to [@nexttime](#comment%3A9):
> > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes
> > 
> > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.
> 
> 
> IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.

I'll have a look.
> 
> 
> 
> 
> To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?
>
>

Maybe for complex functions "c*" (which are now in Cygwin libm but used not to be)? 
> I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].



---

archive/issue_comments_173405.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jpflori](#comment%3A20):\n> Replying to [@nexttime](#comment%3A19):\n> > Replying to [@jdemeyer](#comment%3A15):\n> > > Replying to [@nexttime](#comment%3A9):\n> > > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes\n> > > \n> > > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.\n> > \n> > \n> > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.\n> \n> I'll have a look.\n\nIndeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n> > \n> > \n> > \n> > \n> > To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?\n> >\n> >\n> \n> Maybe for complex functions \"c*\" (which are now in Cygwin libm but used not to be)? \n> > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].",
    "created_at": "2013-04-03T15:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173405",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jpflori](#comment%3A20):
> Replying to [@nexttime](#comment%3A19):
> > Replying to [@jdemeyer](#comment%3A15):
> > > Replying to [@nexttime](#comment%3A9):
> > > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes
> > > 
> > > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.
> > 
> > 
> > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.
> 
> I'll have a look.

Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.
> > 
> > 
> > 
> > 
> > To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?
> >
> >
> 
> Maybe for complex functions "c*" (which are now in Cygwin libm but used not to be)? 
> > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].



---

archive/issue_comments_173406.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jpflori](#comment%3A21):\n> Replying to [@jpflori](#comment%3A20):\n> > Replying to [@nexttime](#comment%3A19):\n> > > Replying to [@jdemeyer](#comment%3A15):\n> > > > Replying to [@nexttime](#comment%3A9):\n> > > > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes\n> > > > \n> > > > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.\n> > > \n> > > \n> > > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.\n> > \n> > I'll have a look.\n> \n> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n\nAnd as we only cheat on Cygwin, this implies Cephes is definitively needed on FreeBSD for this file already.\n> > > \n> > > \n> > > \n> > > \n> > > To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?\n> > >\n> > >\n> > \n> > Maybe for complex functions \"c*\" (which are now in Cygwin libm but used not to be)? \n> > > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].",
    "created_at": "2013-04-03T15:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173406",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jpflori](#comment%3A21):
> Replying to [@jpflori](#comment%3A20):
> > Replying to [@nexttime](#comment%3A19):
> > > Replying to [@jdemeyer](#comment%3A15):
> > > > Replying to [@nexttime](#comment%3A9):
> > > > > Actually, we need both `sqrtl()` and `[lt]gammal()` unless we build Cephes
> > > > 
> > > > It seems not, Cygwin doesn't have `sqrtl()`, nor does it build Cephes. Despite this, Sage builds.
> > > 
> > > 
> > > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.
> > 
> > I'll have a look.
> 
> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.

And as we only cheat on Cygwin, this implies Cephes is definitively needed on FreeBSD for this file already.
> > > 
> > > 
> > > 
> > > 
> > > To repeat Karl-Dieter's question:  What is Cephes then needed for at all [on e.g. FreeBSD]?
> > >
> > >
> > 
> > Maybe for complex functions "c*" (which are now in Cygwin libm but used not to be)? 
> > > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].



---

archive/issue_comments_173407.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jpflori](#comment%3A22):\n> Replying to [@jpflori](#comment%3A21):\n> > Replying to [@jpflori](#comment%3A20):\n> > > Replying to [@nexttime](#comment%3A19):\n> > > > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.\n> > \n> > Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n> \n> And as we only cheat on Cygwin, this implies Cephes is definitively needed on FreeBSD for this file already.\n\nSo what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)\n\n\n\n\n> > > > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].",
    "created_at": "2013-04-03T15:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173407",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jpflori](#comment%3A22):
> Replying to [@jpflori](#comment%3A21):
> > Replying to [@jpflori](#comment%3A20):
> > > Replying to [@nexttime](#comment%3A19):
> > > > IIRC, because we (still) have some special-casing on Cygwin w.r.t. at least (just?) the (`long double`) gamma functions.
> > 
> > Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.
> 
> And as we only cheat on Cygwin, this implies Cephes is definitively needed on FreeBSD for this file already.

So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)




> > > > I.e., we should probably check for those functions Cephes provides (and Sage needs) [unless we're on FreeBSD where Cephes gets built anyway, or `SAGE_PORT` is set].



---

archive/issue_comments_173408.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIn fact I slightly prefer the way things get printed with the second version of the reviewer patch.\nIt's slightly easier to understand if both tar and make are missing.\nFeel free to change it back if you want.",
    "created_at": "2013-04-03T15:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173408",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

In fact I slightly prefer the way things get printed with the second version of the reviewer patch.
It's slightly easier to understand if both tar and make are missing.
Feel free to change it back if you want.



---

archive/issue_comments_173409.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n **Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))\n \n-**Apply** [attachment: 14406_cygwin_prereq.patch](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)\n+**Apply** [attachment: trac_14406+reviewer-v2.patch](https://github.com/sagemath/sage/files/ticket14406/47ce32023064aaa0184743e0a7913c8c.gz)\n``````\n",
    "created_at": "2013-04-03T15:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173409",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 **Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))
 
-**Apply** [attachment: 14406_cygwin_prereq.patch](https://github.com/sagemath/sage/files/ticket14406/14406_cygwin_prereq.patch.gz)
+**Apply** [attachment: trac_14406+reviewer-v2.patch](https://github.com/sagemath/sage/files/ticket14406/47ce32023064aaa0184743e0a7913c8c.gz)
``````




---

archive/issue_comments_173410.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nP.S.:  I don't have a strong opinion on the libm tests; building Sage requires a C99 environment (compiler + library) anyway.  We may add a comment on this to the *Sage Porting Guide<sup>TM</sup>*.",
    "created_at": "2013-04-03T15:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173410",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:25" align="right">comment:25</div>

P.S.:  I don't have a strong opinion on the libm tests; building Sage requires a C99 environment (compiler + library) anyway.  We may add a comment on this to the *Sage Porting Guide<sup>TM</sup>*.



---

archive/issue_comments_173411.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nexttime](#comment%3A23):\n> So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)\n\nDon't really know.\nCheck for sqrtl, logl, tgammal and lgammal everywhere except where:\n* we cheat, which is currently Cygwin,\n* we install Cephes, which is currently FreeBSD.\nAnd if that fails, rant that supported platform should provide \"long double\" functions (except for the the two categories filtered out above) and suggest:\n* setting SAGE_PORT to something non-empty,\n* and:\n  * either try installing the Cephes spkg,\n  * or cheating as on Cygwin.\nBoth of these will be non-trivial anyway.\n>",
    "created_at": "2013-04-03T15:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173411",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nexttime](#comment%3A23):
> So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)

Don't really know.
Check for sqrtl, logl, tgammal and lgammal everywhere except where:
* we cheat, which is currently Cygwin,
* we install Cephes, which is currently FreeBSD.
And if that fails, rant that supported platform should provide "long double" functions (except for the the two categories filtered out above) and suggest:
* setting SAGE_PORT to something non-empty,
* and:
  * either try installing the Cephes spkg,
  * or cheating as on Cygwin.
Both of these will be non-trivial anyway.
>



---

archive/issue_comments_173412.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jpflori](#comment%3A26):\n> Replying to [@nexttime](#comment%3A23):\n> > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)\n> \n> Don't really know.\n> Check for sqrtl, logl, tgammal and lgammal everywhere except where:\n> * we cheat, which is currently Cygwin,\n> * we install Cephes, which is currently FreeBSD.\n> And if that fails, rant that supported platform should provide \"long double\" functions (except for the the two categories filtered out above) and suggest:\n> * setting SAGE_PORT to something non-empty,\n> * and:\n>   * either try installing the Cephes spkg,\n>   * or cheating as on Cygwin.\n\n+ * switch to another OS\n\n+ Provide a link to the C99 standard.\n\n\n\n\n> Both of these will be non-trivial anyway.\n\nReally?",
    "created_at": "2013-04-03T16:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173412",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jpflori](#comment%3A26):
> Replying to [@nexttime](#comment%3A23):
> > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)
> 
> Don't really know.
> Check for sqrtl, logl, tgammal and lgammal everywhere except where:
> * we cheat, which is currently Cygwin,
> * we install Cephes, which is currently FreeBSD.
> And if that fails, rant that supported platform should provide "long double" functions (except for the the two categories filtered out above) and suggest:
> * setting SAGE_PORT to something non-empty,
> * and:
>   * either try installing the Cephes spkg,
>   * or cheating as on Cygwin.

+ * switch to another OS

+ Provide a link to the C99 standard.




> Both of these will be non-trivial anyway.

Really?



---

archive/issue_comments_173413.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nexttime](#comment%3A27):\n> Replying to [@jpflori](#comment%3A26):\n> > Replying to [@nexttime](#comment%3A23):\n> > > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)\n> > \n> > Don't really know.\n> > Check for sqrtl, logl, tgammal and lgammal everywhere except where:\n> > * we cheat, which is currently Cygwin,\n> > * we install Cephes, which is currently FreeBSD.\n> > And if that fails, rant that supported platform should provide \"long double\" functions (except for the the two categories filtered out above) and suggest:\n> > * setting SAGE_PORT to something non-empty,\n> > * and:\n> >   * either try installing the Cephes spkg,\n> >   * or cheating as on Cygwin.\n> \n> \n> + * switch to another OS\n> \n> + Provide a link to the C99 standard.\n> \n> \n> \n> \n> > Both of these will be non-trivial anyway.\n> \n> \n> Really?\n\nDepends on who tries it...\n* Cheating as on Cygwin is easy if you know where to look, although you should know a little bit of Sage to modify the R spkg, but I somehow agree it is not a long term solution, we don't want to patch every part of Sage which at some point will use \"long double\" functions... but then we can hope that Cygwin also include these functions in their libm, as they did for the \"complex\" functions, if every piece of software in the world need them.\n* Don't really know if installing Cephes just works out of the box, i.e. \"oh I have a non-C99 compliant libm, let's just install cephes and every piece of Sage looking for C99 libm functions will find them now\", that's surely the case but I've never tried.",
    "created_at": "2013-04-03T16:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173413",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nexttime](#comment%3A27):
> Replying to [@jpflori](#comment%3A26):
> > Replying to [@nexttime](#comment%3A23):
> > > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)
> > 
> > Don't really know.
> > Check for sqrtl, logl, tgammal and lgammal everywhere except where:
> > * we cheat, which is currently Cygwin,
> > * we install Cephes, which is currently FreeBSD.
> > And if that fails, rant that supported platform should provide "long double" functions (except for the the two categories filtered out above) and suggest:
> > * setting SAGE_PORT to something non-empty,
> > * and:
> >   * either try installing the Cephes spkg,
> >   * or cheating as on Cygwin.
> 
> 
> + * switch to another OS
> 
> + Provide a link to the C99 standard.
> 
> 
> 
> 
> > Both of these will be non-trivial anyway.
> 
> 
> Really?

Depends on who tries it...
* Cheating as on Cygwin is easy if you know where to look, although you should know a little bit of Sage to modify the R spkg, but I somehow agree it is not a long term solution, we don't want to patch every part of Sage which at some point will use "long double" functions... but then we can hope that Cygwin also include these functions in their libm, as they did for the "complex" functions, if every piece of software in the world need them.
* Don't really know if installing Cephes just works out of the box, i.e. "oh I have a non-C99 compliant libm, let's just install cephes and every piece of Sage looking for C99 libm functions will find them now", that's surely the case but I've never tried.



---

archive/issue_comments_173414.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nFor Jeroen:\n\nI guess we should check that the lapack (in fact its dependency liblapack0) and liblapack-devel packages are installed on Cygwin.\nIn fact it should be enough to check the existence of the import libraries for libblas (and liblapack once we get #10508 in) as I do in the spkg-install file of ATLAS from #10508:\n\n```\n    libraries = ['/usr/lib/libblas.dll.a', '/usr/lib/liblapack.dll.a']\n    for lib in libraries:\n        if not os.path.exists(lib):\n            print '*'*75\n            print 'Could not locate required file: \"' + lib + '\".'\n            print 'On Cygwin you must install the following standard LAPACK Cygwin packages'\n            print 'via the Cygwin setup.exe program in the \"Math\" category:'\n            print '* lapack,'\n            print '* liblapack-devel.'\n            print 'Alternatively you can try building your own ATLAS by setting'\n            print 'SAGE_ATLAS_ARCH to something sensible although that is not'\n            print 'officially supported.'\n            print '*'*75\n            sys.exit(1)\n```\nModifying the spkg from #10508 so that it correctly builds will be slighlty non-trivial, or rather the way we include that in Volker's autotools stuff needs some thoughts.",
    "created_at": "2013-04-03T16:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173414",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

For Jeroen:

I guess we should check that the lapack (in fact its dependency liblapack0) and liblapack-devel packages are installed on Cygwin.
In fact it should be enough to check the existence of the import libraries for libblas (and liblapack once we get #10508 in) as I do in the spkg-install file of ATLAS from #10508:

```
    libraries = ['/usr/lib/libblas.dll.a', '/usr/lib/liblapack.dll.a']
    for lib in libraries:
        if not os.path.exists(lib):
            print '*'*75
            print 'Could not locate required file: "' + lib + '".'
            print 'On Cygwin you must install the following standard LAPACK Cygwin packages'
            print 'via the Cygwin setup.exe program in the "Math" category:'
            print '* lapack,'
            print '* liblapack-devel.'
            print 'Alternatively you can try building your own ATLAS by setting'
            print 'SAGE_ATLAS_ARCH to something sensible although that is not'
            print 'officially supported.'
            print '*'*75
            sys.exit(1)
```
Modifying the spkg from #10508 so that it correctly builds will be slighlty non-trivial, or rather the way we include that in Volker's autotools stuff needs some thoughts.



---

archive/issue_comments_173415.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jpflori](#comment%3A28):\n> Replying to [@nexttime](#comment%3A27):\n> > Replying to [@jpflori](#comment%3A26):\n> > > Replying to [@nexttime](#comment%3A23):\n> > > > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)\n> > > \n> > > Don't really know.\n> > > Check for sqrtl, logl, tgammal and lgammal everywhere except where:\n> > > * we cheat, which is currently Cygwin,\n> > > * we install Cephes, which is currently FreeBSD.\n> > > And if that fails, rant that supported platform should provide \"long double\" functions (except for the the two categories filtered out above) and suggest:\n> > > * setting SAGE_PORT to something non-empty,\n> > > * and:\n> > >   * either try installing the Cephes spkg,\n> > >   * or cheating as on Cygwin.\n> > \n> > \n> > + * switch to another OS\n> > \n> > + Provide a link to the C99 standard.\n> > \n> > \n> > \n> > \n> > > Both of these will be non-trivial anyway.\n> > \n> > \n> > Really?\n> \n> Depends on who tries it...\n> * Cheating as on Cygwin is easy if you know where to look, although you should know a little bit of Sage to modify the R spkg, but I somehow agree it is not a long term solution, we don't want to patch every part of Sage which at some point will use \"long double\" functions... but then we can hope that Cygwin also include these functions in their libm, as they did for the \"complex\" functions, if every piece of software in the world need them.\n> * Don't really know if installing Cephes just works out of the box, i.e. \"oh I have a non-C99 compliant libm, let's just install cephes and every piece of Sage looking for C99 libm functions will find them now\", that's surely the case but I've never tried.\n\nI think that for the long term, especially if a lot of standard stuff we need use \"long double\" functions by default and provide no way of easily disabling their use (as R will do), the best solution would be to:\n* check for sqrtl (or any random \"long double\" function);\n* if that's not available, then set some SAGE_INSTALL_CEPHES variable which triggers the installation of Sage;\n* remove all the Cygwin \"long double\" hacks.\n\nBut please, let's do that later...\nFor the moment, just:\n* check for sqrtl except on FreeBSD and Cygwin,\n* rant if not available, provide links to C99 standard, suggest the user to use a mainstream OS, invite him to have coffee or whatever (and maybe mention the fact that if he dares to set SAGE_PORT, then he could also try to manually install the cephes spkg when something fails because of the lack of \"long double\" functions).",
    "created_at": "2013-04-03T16:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173415",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jpflori](#comment%3A28):
> Replying to [@nexttime](#comment%3A27):
> > Replying to [@jpflori](#comment%3A26):
> > > Replying to [@nexttime](#comment%3A23):
> > > > So what's your conclusion?  (Regardless of perhaps cheating on FreeBSD as well.)
> > > 
> > > Don't really know.
> > > Check for sqrtl, logl, tgammal and lgammal everywhere except where:
> > > * we cheat, which is currently Cygwin,
> > > * we install Cephes, which is currently FreeBSD.
> > > And if that fails, rant that supported platform should provide "long double" functions (except for the the two categories filtered out above) and suggest:
> > > * setting SAGE_PORT to something non-empty,
> > > * and:
> > >   * either try installing the Cephes spkg,
> > >   * or cheating as on Cygwin.
> > 
> > 
> > + * switch to another OS
> > 
> > + Provide a link to the C99 standard.
> > 
> > 
> > 
> > 
> > > Both of these will be non-trivial anyway.
> > 
> > 
> > Really?
> 
> Depends on who tries it...
> * Cheating as on Cygwin is easy if you know where to look, although you should know a little bit of Sage to modify the R spkg, but I somehow agree it is not a long term solution, we don't want to patch every part of Sage which at some point will use "long double" functions... but then we can hope that Cygwin also include these functions in their libm, as they did for the "complex" functions, if every piece of software in the world need them.
> * Don't really know if installing Cephes just works out of the box, i.e. "oh I have a non-C99 compliant libm, let's just install cephes and every piece of Sage looking for C99 libm functions will find them now", that's surely the case but I've never tried.

I think that for the long term, especially if a lot of standard stuff we need use "long double" functions by default and provide no way of easily disabling their use (as R will do), the best solution would be to:
* check for sqrtl (or any random "long double" function);
* if that's not available, then set some SAGE_INSTALL_CEPHES variable which triggers the installation of Sage;
* remove all the Cygwin "long double" hacks.

But please, let's do that later...
For the moment, just:
* check for sqrtl except on FreeBSD and Cygwin,
* rant if not available, provide links to C99 standard, suggest the user to use a mainstream OS, invite him to have coffee or whatever (and maybe mention the fact that if he dares to set SAGE_PORT, then he could also try to manually install the cephes spkg when something fails because of the lack of "long double" functions).



---

archive/issue_comments_173416.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n> To repeat Karl-Dieter's question: What is Cephes then needed for at all [on e.g. FreeBSD]?\n\nI don't recall asking about FreeBSD, simply stating that we do need it there.  You can ask Stephen M-S about that on one of those ticket.\n> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n\nHowever, I do invite someone to open a ticket to re-enable Cephes on Cygwin so that we can drop that entire file!  If that is indeed the \"right\" solution.\n\n---\n\n> But please, let's do that later...\n\nYes, please.\n> I guess we should check that the lapack (in fact its dependency liblapack0) and liblapack-devel packages are installed on Cygwin.\n\nOh, right.  Good point, since #10508 is not yet in.  But I was discouraged earlier from adding this to prereq, that's why I figured #10508 was better.  I would definitely be in support of this being done on this ticket, and I've put something about that at #6743.\n> For the moment, just:\n> * check for sqrtl except on FreeBSD and Cygwin,\n> * rant if not available, provide links to C99 standard, suggest the user to use a mainstream OS, invite him to have coffee or whatever (and maybe mention the fact that if he dares to set SAGE_PORT, then he could also try to manually install the cephes spkg when something fails because of the lack of \"long double\" functions).\n\nI think that some variation on this is very reasonable.",
    "created_at": "2013-04-03T16:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173416",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:31" align="right">comment:31</div>

> To repeat Karl-Dieter's question: What is Cephes then needed for at all [on e.g. FreeBSD]?

I don't recall asking about FreeBSD, simply stating that we do need it there.  You can ask Stephen M-S about that on one of those ticket.
> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.

However, I do invite someone to open a ticket to re-enable Cephes on Cygwin so that we can drop that entire file!  If that is indeed the "right" solution.

---

> But please, let's do that later...

Yes, please.
> I guess we should check that the lapack (in fact its dependency liblapack0) and liblapack-devel packages are installed on Cygwin.

Oh, right.  Good point, since #10508 is not yet in.  But I was discouraged earlier from adding this to prereq, that's why I figured #10508 was better.  I would definitely be in support of this being done on this ticket, and I've put something about that at #6743.
> For the moment, just:
> * check for sqrtl except on FreeBSD and Cygwin,
> * rant if not available, provide links to C99 standard, suggest the user to use a mainstream OS, invite him to have coffee or whatever (and maybe mention the fact that if he dares to set SAGE_PORT, then he could also try to manually install the cephes spkg when something fails because of the lack of "long double" functions).

I think that some variation on this is very reasonable.



---

archive/issue_comments_173417.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jpflori](#comment%3A29):\n> we should check that the lapack [...] packages are installed on Cygwin\n\nWhy is it needed? I really don't like adding an extra check without understanding (and documenting) why.",
    "created_at": "2013-04-03T17:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173417",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jpflori](#comment%3A29):
> we should check that the lapack [...] packages are installed on Cygwin

Why is it needed? I really don't like adding an extra check without understanding (and documenting) why.



---

archive/issue_comments_173418.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n> > we should check that the lapack [...] packages are installed on Cygwin\n> \n> Why is it needed? I really don't like adding an extra check without understanding why.\n\nAbsolutely needed, because Sage ordinarily could build ATLAS/lapack spkgs on other systems but on Cygwin we (currently) need to have lapack already to get atlas to build things like R and Scipy, and it's not officially a prerequisite for Sage in general.\n\nUnless I'm misunderstanding something about your question?",
    "created_at": "2013-04-03T17:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173418",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:33" align="right">comment:33</div>

> > we should check that the lapack [...] packages are installed on Cygwin
> 
> Why is it needed? I really don't like adding an extra check without understanding why.

Absolutely needed, because Sage ordinarily could build ATLAS/lapack spkgs on other systems but on Cygwin we (currently) need to have lapack already to get atlas to build things like R and Scipy, and it's not officially a prerequisite for Sage in general.

Unless I'm misunderstanding something about your question?



---

archive/issue_comments_173419.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI disagree with\n\n```\nif [ \"$UNAME\" = \"SunOS\" ]\n```",
    "created_at": "2013-04-03T17:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173419",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

I disagree with

```
if [ "$UNAME" = "SunOS" ]
```



---

archive/issue_comments_173420.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@kcrisman](#comment%3A33):\n> Unless I'm misunderstanding something about your question?\n\nYou didn't really answer my question, you *confirmed* that it is needed without mentioning *why* it is needed. Perhaps a more explicit question is: **what goes wrong if you don't have lapack?**",
    "created_at": "2013-04-03T17:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173420",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@kcrisman](#comment%3A33):
> Unless I'm misunderstanding something about your question?

You didn't really answer my question, you *confirmed* that it is needed without mentioning *why* it is needed. Perhaps a more explicit question is: **what goes wrong if you don't have lapack?**



---

archive/issue_comments_173421.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jpflori](#comment%3A21):\n> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n\nI wouldn't mind always \"cheating\", i.e. not supporting `logl()` at all and drop all the Cygwin/FreeBSD hassle. Especially because long doubles don't have a portable meaning (they have a different precision on different systems).",
    "created_at": "2013-04-03T18:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173421",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jpflori](#comment%3A21):
> Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.

I wouldn't mind always "cheating", i.e. not supporting `logl()` at all and drop all the Cygwin/FreeBSD hassle. Especially because long doubles don't have a portable meaning (they have a different precision on different systems).



---

archive/issue_comments_173422.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI would be against more system-specific checks in `prereq`, I would like to move to a real `./configure` before we do that. Because otherwise, it will lead to inconsistent checks (inconsistency between prereq and cephes's `spkg-install` like we're seeing now).",
    "created_at": "2013-04-03T18:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173422",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

I would be against more system-specific checks in `prereq`, I would like to move to a real `./configure` before we do that. Because otherwise, it will lead to inconsistent checks (inconsistency between prereq and cephes's `spkg-install` like we're seeing now).



---

archive/issue_comments_173423.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@jdemeyer](#comment%3A34):\n> I disagree with\n> \n> ```\n> if [ \"$UNAME\" = \"SunOS\" ]\n> ```\n\nI guess you been we should only \n\n```\n[ -f /usr/sfw/bin/* ]\n```\n?\nBut will there really be anything else than SunOS where /usr/sfw/bin exists?",
    "created_at": "2013-04-03T18:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173423",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@jdemeyer](#comment%3A34):
> I disagree with
> 
> ```
> if [ "$UNAME" = "SunOS" ]
> ```

I guess you been we should only 

```
[ -f /usr/sfw/bin/* ]
```
?
But will there really be anything else than SunOS where /usr/sfw/bin exists?



---

archive/issue_comments_173424.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jdemeyer](#comment%3A35):\n> Replying to [@kcrisman](#comment%3A33):\n> > Unless I'm misunderstanding something about your question?\n> \n> You didn't really answer my question, you *confirmed* that it is needed without mentioning *why* it is needed. Perhaps a more explicit question is: **what goes wrong if you don't have lapack?**\n\nOn Cygwin the lapack packages provide both BLAS and LAPACK.\nAnd the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.\nIt will not be really hard, but requires some more thoughts and work.",
    "created_at": "2013-04-03T18:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173424",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jdemeyer](#comment%3A35):
> Replying to [@kcrisman](#comment%3A33):
> > Unless I'm misunderstanding something about your question?
> 
> You didn't really answer my question, you *confirmed* that it is needed without mentioning *why* it is needed. Perhaps a more explicit question is: **what goes wrong if you don't have lapack?**

On Cygwin the lapack packages provide both BLAS and LAPACK.
And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.
It will not be really hard, but requires some more thoughts and work.



---

archive/issue_comments_173425.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@jpflori](#comment%3A38):\n> But will there really be anything else than SunOS where /usr/sfw/bin exists?\n\nAssuming not, the check for SunOS is redundant anyway.\n\nIt all goes back to the philosophy of not checking the system, but checking features.",
    "created_at": "2013-04-03T18:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173425",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@jpflori](#comment%3A38):
> But will there really be anything else than SunOS where /usr/sfw/bin exists?

Assuming not, the check for SunOS is redundant anyway.

It all goes back to the philosophy of not checking the system, but checking features.



---

archive/issue_comments_173426.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jpflori](#comment%3A39):\n> And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.\n> It will not be really hard, but requires some more thoughts and work.\n\nOK, so it's a problem with the ATLAS spkg. In that case, would it not make more sense to add the check to the ATLAS spkg instead of `prereq`?",
    "created_at": "2013-04-03T18:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173426",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jpflori](#comment%3A39):
> And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.
> It will not be really hard, but requires some more thoughts and work.

OK, so it's a problem with the ATLAS spkg. In that case, would it not make more sense to add the check to the ATLAS spkg instead of `prereq`?



---

archive/issue_comments_173427.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nAttachment: **[trac_14406+reviewer-v3.patch.gz](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)**\n\nReplying to [@jdemeyer](#comment%3A41):\n> Replying to [@jpflori](#comment%3A39):\n> > And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.\n> > It will not be really hard, but requires some more thoughts and work.\n> \n> OK, so it's a problem with the ATLAS spkg. In that case, would it not make more sense to add the check to the ATLAS spkg instead of `prereq`?\n\nIts already there and provides info.\nI'm ok to not check anything in prereq and let the ATLAS spkg do the job (although the user might say \"hey it passed prereq and now its asking for something more to be installed so much later!!!\").\n\n(And I just uploaded a new patch without redundant SunOS check.)",
    "created_at": "2013-04-03T18:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173427",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:42" align="right">comment:42</div>

Attachment: **[trac_14406+reviewer-v3.patch.gz](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)**

Replying to [@jdemeyer](#comment%3A41):
> Replying to [@jpflori](#comment%3A39):
> > And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin.
> > It will not be really hard, but requires some more thoughts and work.
> 
> OK, so it's a problem with the ATLAS spkg. In that case, would it not make more sense to add the check to the ATLAS spkg instead of `prereq`?

Its already there and provides info.
I'm ok to not check anything in prereq and let the ATLAS spkg do the job (although the user might say "hey it passed prereq and now its asking for something more to be installed so much later!!!").

(And I just uploaded a new patch without redundant SunOS check.)



---

archive/issue_comments_173428.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n **Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))\n \n-**Apply** [attachment: trac_14406+reviewer-v2.patch](https://github.com/sagemath/sage/files/ticket14406/47ce32023064aaa0184743e0a7913c8c.gz)\n+**Apply** [attachment: trac_14406+reviewer-v3.patch](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)\n``````\n",
    "created_at": "2013-04-03T18:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173428",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 **Copy** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.2.tar.gz) to `spkg/base` ([diff](https://github.com/sagemath/sage/files/ticket14406/prereq-1.2.diff.gz))
 
-**Apply** [attachment: trac_14406+reviewer-v2.patch](https://github.com/sagemath/sage/files/ticket14406/47ce32023064aaa0184743e0a7913c8c.gz)
+**Apply** [attachment: trac_14406+reviewer-v3.patch](https://github.com/sagemath/sage/files/ticket14406/9d4578d3e8d9f536e1dcbe13225d4780.gz)
``````




---

archive/issue_comments_173429.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@jdemeyer](#comment%3A36):\n> Replying to [@jpflori](#comment%3A21):\n> > Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.\n> \n> \n> I wouldn't mind always \"cheating\", i.e. not supporting `logl()` at all and drop all the Cygwin/FreeBSD hassle. Especially because long doubles don't have a portable meaning (they have a different precision on different systems).\n\nIve got a slight preference for the SAGE_INST_CEPHES solution, espoecially it \"could\" be easier to maintain, but for the moment I could go with not even testing sqrtl anywhere assuming that its in the libm of supported platforms or were dealing with Cygwin or FreeBSD.",
    "created_at": "2013-04-03T18:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173429",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@jdemeyer](#comment%3A36):
> Replying to [@jpflori](#comment%3A21):
> > Indeed, we cheat for logl/sqrtl/tgammal/lgammal in sage/symbolic/pynac_cc.h just as we do with the R patch for logl.
> 
> 
> I wouldn't mind always "cheating", i.e. not supporting `logl()` at all and drop all the Cygwin/FreeBSD hassle. Especially because long doubles don't have a portable meaning (they have a different precision on different systems).

Ive got a slight preference for the SAGE_INST_CEPHES solution, espoecially it "could" be easier to maintain, but for the moment I could go with not even testing sqrtl anywhere assuming that its in the libm of supported platforms or were dealing with Cygwin or FreeBSD.



---

archive/issue_comments_173430.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReviewer patch is okay for me.",
    "created_at": "2013-04-03T21:06:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173430",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

Reviewer patch is okay for me.



---

archive/issue_comments_173431.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@jpflori](#comment%3A43):\n> Ive got a slight preference for the SAGE_INST_CEPHES solution\n\nI don't really know what that \"solution\" would be.\n\nThe main thing I don't want is to spread the same checks in different places. For example, the lapack check should be either in prereq, either in ATLAS, not in both. Since it currently cannot be done only in prereq, it must be done in ATLAS.",
    "created_at": "2013-04-03T21:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173431",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@jpflori](#comment%3A43):
> Ive got a slight preference for the SAGE_INST_CEPHES solution

I don't really know what that "solution" would be.

The main thing I don't want is to spread the same checks in different places. For example, the lapack check should be either in prereq, either in ATLAS, not in both. Since it currently cannot be done only in prereq, it must be done in ATLAS.



---

archive/issue_comments_173432.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@jdemeyer](#comment%3A45):\n> Replying to [@jpflori](#comment%3A43):\n> > Ive got a slight preference for the SAGE_INST_CEPHES solution\n> \n> I don't really know what that \"solution\" would be.\n\nThat would be:\n* check for sqrtl.\n* if not available trigger installation of the cephes spkg.\n> \n> The main thing I don't want is to spread the same checks in different places. For example, the lapack check should be either in prereq, either in ATLAS, not in both. Since it currently cannot be done only in prereq, it must be done in ATLAS.",
    "created_at": "2013-04-03T21:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173432",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@jdemeyer](#comment%3A45):
> Replying to [@jpflori](#comment%3A43):
> > Ive got a slight preference for the SAGE_INST_CEPHES solution
> 
> I don't really know what that "solution" would be.

That would be:
* check for sqrtl.
* if not available trigger installation of the cephes spkg.
> 
> The main thing I don't want is to spread the same checks in different places. For example, the lapack check should be either in prereq, either in ATLAS, not in both. Since it currently cannot be done only in prereq, it must be done in ATLAS.



---

archive/issue_comments_173433.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\n> > > Unless I'm misunderstanding something about your question? \n> > \n> > You didn't really answer my question, you confirmed that it is needed without mentioning why it is needed. Perhaps a more explicit question is: what goes wrong if you don't have lapack? \n> \n> On Cygwin the lapack packages provide both BLAS and LAPACK. And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin. It will not be really hard, but requires some more thoughts and work. \n\nI thought that was basically what I was saying... not sure what happened here.\n\nAnyway, as to the check, the reason to have it early is that atlas might build quite late in a process, and then someone says \"Oh, Mxyzptlk, why did I waste all that time building Sage and I didn't have the right prereqs?\"  Which I guess JP just said too.",
    "created_at": "2013-04-04T00:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173433",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:47" align="right">comment:47</div>

> > > Unless I'm misunderstanding something about your question? 
> > 
> > You didn't really answer my question, you confirmed that it is needed without mentioning why it is needed. Perhaps a more explicit question is: what goes wrong if you don't have lapack? 
> 
> On Cygwin the lapack packages provide both BLAS and LAPACK. And the current Sage's ATLAS spkg, or the one from #10508, does not build ATLAS on Cygwin. It will not be really hard, but requires some more thoughts and work. 

I thought that was basically what I was saying... not sure what happened here.

Anyway, as to the check, the reason to have it early is that atlas might build quite late in a process, and then someone says "Oh, Mxyzptlk, why did I waste all that time building Sage and I didn't have the right prereqs?"  Which I guess JP just said too.



---

archive/issue_comments_173434.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@jpflori](#comment%3A46):\n> That would be:\n> * check for sqrtl.\n> * if not available trigger installation of the cephes spkg.\n\nAnd how would a prereq check \"trigger\" the installation of the cephes spkg? I don't think that can currently be done.",
    "created_at": "2013-04-04T06:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173434",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@jpflori](#comment%3A46):
> That would be:
> * check for sqrtl.
> * if not available trigger installation of the cephes spkg.

And how would a prereq check "trigger" the installation of the cephes spkg? I don't think that can currently be done.



---

archive/issue_comments_173435.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@kcrisman](#comment%3A47):\n> Anyway, as to the check, the reason to have it early is that atlas might build quite late in a process, and then someone says \"Oh, Mxyzptlk, why did I waste all that time building Sage and I didn't have the right prereqs?\"  Which I guess JP just said too.\n\nI certainly don't disagree with this, but for this to work (and also jpflori's idea of \"triggering\"), we need to change the prereq mechanism which is a lot less trivial than this ticket.",
    "created_at": "2013-04-04T06:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173435",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@kcrisman](#comment%3A47):
> Anyway, as to the check, the reason to have it early is that atlas might build quite late in a process, and then someone says "Oh, Mxyzptlk, why did I waste all that time building Sage and I didn't have the right prereqs?"  Which I guess JP just said too.

I certainly don't disagree with this, but for this to work (and also jpflori's idea of "triggering"), we need to change the prereq mechanism which is a lot less trivial than this ticket.



---

archive/issue_comments_173436.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jdemeyer](#comment%3A48):\n> Replying to [@jpflori](#comment%3A46):\n> > That would be:\n> > * check for sqrtl.\n> > * if not available trigger installation of the cephes spkg.\n> \n> And how would a prereq check \"trigger\" the installation of the cephes spkg? I don't think that can currently be done.\n\nI thought we could do that just like you do for GCC.\nBut that might be impossible, i did not check.",
    "created_at": "2013-04-04T06:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173436",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jdemeyer](#comment%3A48):
> Replying to [@jpflori](#comment%3A46):
> > That would be:
> > * check for sqrtl.
> > * if not available trigger installation of the cephes spkg.
> 
> And how would a prereq check "trigger" the installation of the cephes spkg? I don't think that can currently be done.

I thought we could do that just like you do for GCC.
But that might be impossible, i did not check.



---

archive/issue_comments_173437.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@jpflori](#comment%3A50):\n> Replying to [@jdemeyer](#comment%3A48):\n> > Replying to [@jpflori](#comment%3A46):\n> > > That would be:\n> > > * check for sqrtl.\n> > > * if not available trigger installation of the cephes spkg.\n> > \n> > And how would a prereq check \"trigger\" the installation of the cephes spkg? I don't think that can currently be done.\n> \n> I thought we could do that just like you do for GCC.\n> But that might be impossible, i did not check.\n\nJust a little more details of the way I see this, but that may be wrong:\n* at prereq time (or whenever the gcc version checks are done), set an env variable if the test fails (or the user can override it if he wants),\n* then either our spkg system is smart enough to build the cephes spkg iff this variable is set, or the spkg-install script from cephes spkg checks its value by itself and decide whether it should build or not (just like it now checks it is running on FreeBSD).",
    "created_at": "2013-04-04T06:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173437",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@jpflori](#comment%3A50):
> Replying to [@jdemeyer](#comment%3A48):
> > Replying to [@jpflori](#comment%3A46):
> > > That would be:
> > > * check for sqrtl.
> > > * if not available trigger installation of the cephes spkg.
> > 
> > And how would a prereq check "trigger" the installation of the cephes spkg? I don't think that can currently be done.
> 
> I thought we could do that just like you do for GCC.
> But that might be impossible, i did not check.

Just a little more details of the way I see this, but that may be wrong:
* at prereq time (or whenever the gcc version checks are done), set an env variable if the test fails (or the user can override it if he wants),
* then either our spkg system is smart enough to build the cephes spkg iff this variable is set, or the spkg-install script from cephes spkg checks its value by itself and decide whether it should build or not (just like it now checks it is running on FreeBSD).



---

archive/issue_comments_173438.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nAnd I'm in for the idea of \"let's postpone this complicated stuff\" (for the ATLAS and Cephes stuff).\n\nIf nobody rants too loud, I'll put this ticket to positive review so that we have official \"experimental\" for Cygwin in 5.9 or 5.10.",
    "created_at": "2013-04-04T06:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173438",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:52" align="right">comment:52</div>

And I'm in for the idea of "let's postpone this complicated stuff" (for the ATLAS and Cephes stuff).

If nobody rants too loud, I'll put this ticket to positive review so that we have official "experimental" for Cygwin in 5.9 or 5.10.



---

archive/issue_comments_173439.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@jpflori](#comment%3A50):\n> I thought we could do that just like you do for GCC.\n\nNot really, the check for GCC is done in `spkg/install`, not prereq.\n\nI agree that all these checks should eventually move to a new file `$SAGE_ROOT/configure`, but that would require some refactoring of the build system. Since the Sage+GIT people are also refactoring the build system, it might make sense to wait for sage-6.1 to do this.",
    "created_at": "2013-04-04T06:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173439",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@jpflori](#comment%3A50):
> I thought we could do that just like you do for GCC.

Not really, the check for GCC is done in `spkg/install`, not prereq.

I agree that all these checks should eventually move to a new file `$SAGE_ROOT/configure`, but that would require some refactoring of the build system. Since the Sage+GIT people are also refactoring the build system, it might make sense to wait for sage-6.1 to do this.



---

archive/issue_comments_173440.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nAgreed, let's move on and merge this considering:\n* sqrtl is not really a prereq as it should be on all supported platform or provided either by cheating or by building cephes (and note FreeBSD is even not officialy supported). Later we can give it a similar treatment as GCC. We can wait for 6.1 to do this.\n* the ATLAS thing is currently only somehow boring on Cygwin, but the ATLAS spkg takes care of this (although later than the prereq one) and that is planned to change. For the moment what will happen is that ATLAS build will fail and tell the user to install the needed packages, he will do that and then the build process will go on. I guess someone actually trying to compile a huge thing as Sage can live with that. We should already wait for #10508 to be merged before doing that.",
    "created_at": "2013-04-04T07:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173440",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:54" align="right">comment:54</div>

Agreed, let's move on and merge this considering:
* sqrtl is not really a prereq as it should be on all supported platform or provided either by cheating or by building cephes (and note FreeBSD is even not officialy supported). Later we can give it a similar treatment as GCC. We can wait for 6.1 to do this.
* the ATLAS thing is currently only somehow boring on Cygwin, but the ATLAS spkg takes care of this (although later than the prereq one) and that is planned to change. For the moment what will happen is that ATLAS build will fail and tell the user to install the needed packages, he will do that and then the build process will go on. I guess someone actually trying to compile a huge thing as Sage can live with that. We should already wait for #10508 to be merged before doing that.



---

archive/issue_events_201680.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-04-04T07:44:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201680"
}
```



---

archive/issue_events_201681.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-04-04T07:44:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201681"
}
```



---

archive/issue_comments_173441.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori, Jeroen Demeyer**",
    "created_at": "2013-04-04T07:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173441",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori, Jeroen Demeyer**



---

archive/issue_comments_173442.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Jean-Pierre Flori**",
    "created_at": "2013-04-04T07:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173442",
    "user": "https://github.com/jpflori"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Jean-Pierre Flori**



---

archive/issue_comments_173443.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI've opened #14410 for the ATLAS on Cygwin stuff.",
    "created_at": "2013-04-04T07:52:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173443",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:55" align="right">comment:55</div>

I've opened #14410 for the ATLAS on Cygwin stuff.



---

archive/issue_comments_173444.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nOkay, this is better than the alternatives.",
    "created_at": "2013-04-04T13:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173444",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:56" align="right">comment:56</div>

Okay, this is better than the alternatives.



---

archive/issue_events_201682.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-04T17:41:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201682"
}
```



---

archive/issue_events_201683.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-04T17:41:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14406#event-201683"
}
```



---

archive/issue_comments_173445.json:
```json
{
    "body": "Merged: **sage-5.9.beta4**",
    "created_at": "2013-04-04T17:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173445",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.9.beta4**



---

archive/issue_comments_173446.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nGroumpf, I just realized that the last elif clause filtering OS names should include Cygwin (and beware that uname does not just return CYGWIN but CYGWIN... where ... gives additional precision which we don't really care about at the moment).\nShould we fix that on another ticket?",
    "created_at": "2013-04-11T22:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173446",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:58" align="right">comment:58</div>

Groumpf, I just realized that the last elif clause filtering OS names should include Cygwin (and beware that uname does not just return CYGWIN but CYGWIN... where ... gives additional precision which we don't really care about at the moment).
Should we fix that on another ticket?



---

archive/issue_comments_173447.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@jpflori](#comment%3A58):\n> Should we fix that on another ticket?\n\nYes, I made #14447 but I'll let you write the patch.\n\nAs for the Cygwin version thing: I propose\n\n```\nif uname | grep CYGWIN >/dev/null; then\n    ...\nfi\n```",
    "created_at": "2013-04-12T06:09:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14406",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14406#issuecomment-173447",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@jpflori](#comment%3A58):
> Should we fix that on another ticket?

Yes, I made #14447 but I'll let you write the patch.

As for the Cygwin version thing: I propose

```
if uname | grep CYGWIN >/dev/null; then
    ...
fi
```
