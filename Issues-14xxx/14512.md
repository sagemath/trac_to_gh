# Issue 14512: Use ....: doctest continuations in documentation

archive/issues_014308.json:
```json
{
    "body": "Automatically replace\n\n```\nsage:\n...\n...\n```\nby\n\n```\nsage:\n....:\n....:\n```\n\nin all documentation files, since those are changed rarely and we should certainly teach the right thing there. The patch also adds some manual fixes for doctest formatting, including the removal of trailing backslashes in most places.\n\n**Assignee:** mvngu\n\n**CC:**  @roed314 @zimmermann6 @kcrisman\n\n**Branch/Commit:** [e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)\n\n**Reviewer:** Volker Braun\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/14512\n\n",
    "closed_at": "2014-11-25T11:25:57Z",
    "created_at": "2013-05-01T08:26:36Z",
    "labels": [
        "component: documentation",
        "trivial",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Use ....: doctest continuations in documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/14512",
    "user": "https://github.com/jdemeyer"
}
```
Automatically replace

```
sage:
...
...
```
by

```
sage:
....:
....:
```

in all documentation files, since those are changed rarely and we should certainly teach the right thing there. The patch also adds some manual fixes for doctest formatting, including the removal of trailing backslashes in most places.

**Assignee:** mvngu

**CC:**  @roed314 @zimmermann6 @kcrisman

**Branch/Commit:** [e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)

**Reviewer:** Volker Braun

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/14512





---

archive/issue_comments_178019.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,3 +12,5 @@\n ....:\n ....:\n ```\n+\n+**Apply** [(which is automatically generated by [attachment:doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/9d5a97497092510d867169a984675886.patch](https://github.com/sagemath/sage/files/ticket14512/d24a9307633bf332ff601f32bdbb2544.patch)))\n``````\n",
    "created_at": "2013-05-01T08:31:29Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178019",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,3 +12,5 @@
 ....:
 ....:
 ```
+
+**Apply** [(which is automatically generated by [attachment:doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/9d5a97497092510d867169a984675886.patch](https://github.com/sagemath/sage/files/ticket14512/d24a9307633bf332ff601f32bdbb2544.patch)))
``````




---

archive/issue_comments_178020.json:
```json
{
    "body": "**Dependencies:** #11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703",
    "created_at": "2013-05-01T08:43:17Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178020",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703



---

archive/issue_comments_178021.json:
```json
{
    "body": "<a id='comment:3'></a>\nHow about\n* spell out in the developer guide how to write line continuations\n* disallow the old notation\n\nOtherwise people will just keep using the old-style line contiuations.",
    "created_at": "2013-05-01T09:36:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178021",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
How about
* spell out in the developer guide how to write line continuations
* disallow the old notation

Otherwise people will just keep using the old-style line contiuations.



---

archive/issue_comments_178022.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vbraun](#comment%3A3):\n> How about\n> * spell out in the developer guide how to write line continuations\n\nThis is already done (although not yet in the online documentation, which is for Sage 5.8).\n\n>   * disallow the old notation\n \nMaybe eventually we should do this (and then we could also allow doctests whose expected output starts with `...`). But I think it's better to allow for a period where `...` still works but `....:` is encouraged.",
    "created_at": "2013-05-02T05:43:22Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [vbraun](#comment%3A3):
> How about
> * spell out in the developer guide how to write line continuations

This is already done (although not yet in the online documentation, which is for Sage 5.8).

>   * disallow the old notation
 
Maybe eventually we should do this (and then we could also allow doctests whose expected output starts with `...`). But I think it's better to allow for a period where `...` still works but `....:` is encouraged.



---

archive/issue_comments_178023.json:
```json
{
    "body": "script to generate the patch",
    "created_at": "2013-05-02T06:00:43Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178023",
    "user": "https://github.com/jdemeyer"
}
```

script to generate the patch



---

archive/attachments_020265.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "doctest_prompt.sh",
    "asset_url": "tarball://root/attachments/ticket14512/doctest_prompt.sh",
    "created_at": "2013-05-02T06:24:24Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14512/doctest_prompt.sh",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_178024.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Attachment:** [doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/doctest_prompt.sh)",
    "created_at": "2013-05-02T06:24:24Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178024",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
**Attachment:** [doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/doctest_prompt.sh)



---

archive/issue_events_126276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-02T06:24:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126276"
}
```



---

archive/issue_comments_178025.json:
```json
{
    "body": "<a id='comment:6'></a>\nOuch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?\n\nWell, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow. But still ...",
    "created_at": "2013-05-03T21:08:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178025",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
Ouch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?

Well, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow. But still ...



---

archive/issue_comments_178026.json:
```json
{
    "body": "<a id='comment:7'></a>\nWe should do it at the same time as the trailing-whitespace patch, I think. People won't know what hit them ;-)",
    "created_at": "2013-05-03T21:25:51Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178026",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
We should do it at the same time as the trailing-whitespace patch, I think. People won't know what hit them ;-)



---

archive/issue_comments_178027.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [nthiery](#comment%3A6):\n> Ouch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?\n\nI think it would be good to change these doctests. If we disallow the `...` syntax, then we could finally write doctests with expected output starting with ellipsis `...`.\n\n> Well, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow.\n\nWith some small modifications, the script on this ticket could be used to auto-rebase patches. I could run this script when merging patches and I could also run it on the sage-combinat queue for example. I think that should ease most of the pain.",
    "created_at": "2013-05-04T06:20:24Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178027",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [nthiery](#comment%3A6):
> Ouch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?

I think it would be good to change these doctests. If we disallow the `...` syntax, then we could finally write doctests with expected output starting with ellipsis `...`.

> Well, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow.

With some small modifications, the script on this ticket could be used to auto-rebase patches. I could run this script when merging patches and I could also run it on the sage-combinat queue for example. I think that should ease most of the pain.



---

archive/issue_comments_178028.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Replying to [nthiery](#comment%3A6):\n> > Ouch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?\n\n> I think it would be good to change these doctests. If we disallow the `...` syntax, then we could finally write doctests with expected output starting with ellipsis `...`.\n\nWell, I very much hope the \"...\" syntax won't be disallowed right\naway: people have a *lot* of .sage files out there which include\ndoctests. Dropping backward compatibility will force them to update\nthem at once. Which means they won't be able to share them properly\nwith other people running older versions of Sage (ok, the files are\nstill usable, but one won't be able to run the tests; for example to\nmake sure that everything works fine with all versions in use).\n\nThere are also printed or about to be printed *books* that have been\nwritten with this syntax and sagetex. It's useful to be able to test\nthe examples in those books on various versions of Sage over a non\ntrivial amount of time.\n\nI appreciate the gain of tests starting with \"...:. All our \"Traceback\n...\" lines are kind of silly. But it's really not critical either. We\nlived without it for years, we could wait a bit more.\n\n> > Well, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow.\n\n> With some small modifications, the script on this ticket could be used to auto-rebase patches. I could run this script when merging patches and I could also run it on the sage-combinat queue for example. I think that should ease most of the pain.\n\nI appreciate the offer! Please take into account that, once rebased,\nthe patch won't apply anymore on \"older\" versions of Sage. Well,\nunless you duplicate the patch in the queue, with guards, and all the\nusual pain of duplication for things that are still evolving.\n\nSo as much I could be ok with this change occurring right at the time\nthe Sage-Combinat queue gets reborn as a git tree (with e.g. the\npatches being auto-rebased when they are imported into git). As much I\nwould oppose a change before that. I guess that means not in any 5.*.\n\nThere will be a lot of turmoil ahead for us to handle the\ntransition. Please don't add yet another hurdle!\n\nCheers,\n                       Nicolas",
    "created_at": "2013-05-05T14:25:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178028",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A8):
> Replying to [nthiery](#comment%3A6):
> > Ouch ... This is likely to be a pain and create lots of conflicts ... Is it really worth the trouble?

> I think it would be good to change these doctests. If we disallow the `...` syntax, then we could finally write doctests with expected output starting with ellipsis `...`.

Well, I very much hope the "..." syntax won't be disallowed right
away: people have a *lot* of .sage files out there which include
doctests. Dropping backward compatibility will force them to update
them at once. Which means they won't be able to share them properly
with other people running older versions of Sage (ok, the files are
still usable, but one won't be able to run the tests; for example to
make sure that everything works fine with all versions in use).

There are also printed or about to be printed *books* that have been
written with this syntax and sagetex. It's useful to be able to test
the examples in those books on various versions of Sage over a non
trivial amount of time.

I appreciate the gain of tests starting with "...:. All our "Traceback
..." lines are kind of silly. But it's really not critical either. We
lived without it for years, we could wait a bit more.

> > Well, luckily it should not be too hard to rebase the patches, and it might get less noticed in the middle of the change of workflow.

> With some small modifications, the script on this ticket could be used to auto-rebase patches. I could run this script when merging patches and I could also run it on the sage-combinat queue for example. I think that should ease most of the pain.

I appreciate the offer! Please take into account that, once rebased,
the patch won't apply anymore on "older" versions of Sage. Well,
unless you duplicate the patch in the queue, with guards, and all the
usual pain of duplication for things that are still evolving.

So as much I could be ok with this change occurring right at the time
the Sage-Combinat queue gets reborn as a git tree (with e.g. the
patches being auto-rebased when they are imported into git). As much I
would oppose a change before that. I guess that means not in any 5.*.

There will be a lot of turmoil ahead for us to handle the
transition. Please don't add yet another hurdle!

Cheers,
                       Nicolas



---

archive/issue_comments_178029.json:
```json
{
    "body": "<a id='comment:10'></a>\nNicolas, I actually totally understood your point.\n\nHow do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?",
    "created_at": "2013-05-05T19:56:39Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178029",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Nicolas, I actually totally understood your point.

How do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?



---

archive/issue_comments_178030.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A10):\n> Nicolas, I actually totally understood your point.\n> \n> How do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?\n\n\nWay to go! Or even requesting that any new/changed doctest should use the new syntax right away, like we have been doing for whitespaces and other things.\n\nAnd hopefuly, once we have switched to the new workflow, merging/rebasing will be much smoother. In that case, large scale changes like the above could become reasonable (which would be good!).\n\nSpeaking of which: one interesting tool is http://coccinelle.lip6.fr/. It allow to describe such changes using \"semantic\" meta-patches, which are much more context free and could make merges much easier. I haven't tried it myself.",
    "created_at": "2013-05-06T01:35:35Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178030",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A10):
> Nicolas, I actually totally understood your point.
> 
> How do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?


Way to go! Or even requesting that any new/changed doctest should use the new syntax right away, like we have been doing for whitespaces and other things.

And hopefuly, once we have switched to the new workflow, merging/rebasing will be much smoother. In that case, large scale changes like the above could become reasonable (which would be good!).

Speaking of which: one interesting tool is http://coccinelle.lip6.fr/. It allow to describe such changes using "semantic" meta-patches, which are much more context free and could make merges much easier. I haven't tried it myself.



---

archive/issue_comments_178031.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [nthiery](#comment%3A11):\n> > How do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?\n\n> \n> Way to go! Or even requesting that any new/changed doctest should use the new syntax right away, like we have been doing for whitespaces and other things.\n\nWell, we're not forcing anything for whitespace, we're just *suggesting*...",
    "created_at": "2013-05-06T08:42:31Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178031",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Replying to [nthiery](#comment%3A11):
> > How do you feel about automatically converting all new/changed doctests to the new format (say, with one patch per beta to do that)?

> 
> Way to go! Or even requesting that any new/changed doctest should use the new syntax right away, like we have been doing for whitespaces and other things.

Well, we're not forcing anything for whitespace, we're just *suggesting*...



---

archive/issue_comments_178032.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [nthiery](#comment%3A11):\n> Speaking of which: one interesting tool is http://coccinelle.lip6.fr/. It allow to describe such changes using \"semantic\" meta-patches, which are much more context free and could make merges much easier.\n\nFrom what I have seen, it looks like a good tool to *generate* a patch like on this ticket, but it doesn't seem to solve to problem of *rebasing* other patches.",
    "created_at": "2013-05-06T12:23:02Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178032",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [nthiery](#comment%3A11):
> Speaking of which: one interesting tool is http://coccinelle.lip6.fr/. It allow to describe such changes using "semantic" meta-patches, which are much more context free and could make merges much easier.

From what I have seen, it looks like a good tool to *generate* a patch like on this ticket, but it doesn't seem to solve to problem of *rebasing* other patches.



---

archive/issue_comments_178033.json:
```json
{
    "body": "<a id='comment:14'></a>\nFrom the talk I had seen some time ago, there was some interesting \"patch\" arithmetic that could be done using the semantic. However I haven't followed up to see what's actually implemented / available.",
    "created_at": "2013-05-06T14:28:21Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178033",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:14'></a>
From the talk I had seen some time ago, there was some interesting "patch" arithmetic that could be done using the semantic. However I haven't followed up to see what's actually implemented / available.



---

archive/issue_comments_178034.json:
```json
{
    "body": "<a id='comment:15'></a>\nsooooo what happens with this patch ? Does it still need a review ?\n\nNathann",
    "created_at": "2013-05-12T09:08:31Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178034",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
sooooo what happens with this patch ? Does it still need a review ?

Nathann



---

archive/issue_comments_178035.json:
```json
{
    "body": "<a id='comment:16'></a>\nSee [my recent message on sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/Ez_KboQZTIA) about this;  as far as I can tell, this breaks the live documentation.  I haven't tried the patch here, this is from experimentation on #13381.",
    "created_at": "2013-06-20T18:20:38Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178035",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>
See [my recent message on sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/Ez_KboQZTIA) about this;  as far as I can tell, this breaks the live documentation.  I haven't tried the patch here, this is from experimentation on #13381.



---

archive/issue_comments_178036.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis has been confirmed on the same thread.",
    "created_at": "2013-06-20T19:16:14Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178036",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>
This has been confirmed on the same thread.



---

archive/issue_comments_178037.json:
```json
{
    "body": "<a id='comment:18'></a>\nIt would be nice if you could also check if the indentation level % 4 = 2 and remove two spaces after the `:` if so.",
    "created_at": "2013-06-22T03:16:03Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178037",
    "user": "https://github.com/kini"
}
```

<a id='comment:18'></a>
It would be nice if you could also check if the indentation level % 4 = 2 and remove two spaces after the `:` if so.



---

archive/issue_comments_178038.json:
```json
{
    "body": "<a id='comment:19'></a>\nActually, a version of what I requested which is guaranteed not to break even weird looking doctests probably is nontrivial. Never mind, I guess. I guess it's not so terrible to have doctests that look like this:\n\n```\nsage: def f():\n....:       if 0 == 0:\n....:           return false\n....:       return true\n```",
    "created_at": "2013-06-22T03:20:52Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178038",
    "user": "https://github.com/kini"
}
```

<a id='comment:19'></a>
Actually, a version of what I requested which is guaranteed not to break even weird looking doctests probably is nontrivial. Never mind, I guess. I guess it's not so terrible to have doctests that look like this:

```
sage: def f():
....:       if 0 == 0:
....:           return false
....:       return true
```



---

archive/issue_comments_178039.json:
```json
{
    "body": "<a id='comment:20'></a>\n> See [my recent message on sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/Ez_KboQZTIA) about this;  as far as I can tell, this breaks the live documentation.  I haven't tried the patch here, this is from experimentation on #13381.\n\nOkay, this seems to be fixed [here](https://github.com/sagemath/sagenb/pull/172), so I'm making this ticket depend on the sagenb upgrade.",
    "created_at": "2013-06-24T20:31:20Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178039",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
> See [my recent message on sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/Ez_KboQZTIA) about this;  as far as I can tell, this breaks the live documentation.  I haven't tried the patch here, this is from experimentation on #13381.

Okay, this seems to be fixed [here](https://github.com/sagemath/sagenb/pull/172), so I'm making this ticket depend on the sagenb upgrade.



---

archive/issue_comments_178040.json:
```json
{
    "body": "**Changing dependencies** from \"#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703\" to \"#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703 #14330\".",
    "created_at": "2013-06-24T20:31:20Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178040",
    "user": "https://github.com/kcrisman"
}
```

**Changing dependencies** from "#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703" to "#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703 #14330".



---

archive/issue_events_126277.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126277"
}
```



---

archive/issue_events_126278.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126278"
}
```



---

archive/issue_events_126279.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126279"
}
```



---

archive/issue_events_126280.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126280"
}
```



---

archive/issue_events_126281.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-04-26T13:24:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126281"
}
```



---

archive/issue_events_126282.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-04-26T13:24:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126282"
}
```



---

archive/issue_comments_178041.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe patch must be outdated by now, and the script is still based on Mercurial...",
    "created_at": "2014-04-26T13:24:33Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178041",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:23'></a>
The patch must be outdated by now, and the script is still based on Mercurial...



---

archive/issue_events_126283.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126283"
}
```



---

archive/issue_events_126284.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126284"
}
```



---

archive/issue_events_126285.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126285"
}
```



---

archive/issue_events_126286.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126286"
}
```



---

archive/issue_comments_178042.json:
```json
{
    "body": "<a id='comment:26'></a>\nI propose to do this just for documentation.",
    "created_at": "2014-11-23T20:21:07Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178042",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
I propose to do this just for documentation.



---

archive/issue_comments_178043.json:
```json
{
    "body": "**Changing dependencies** from \"#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703 #14330\" to \"\".",
    "created_at": "2014-11-23T20:21:07Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178043",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11745 #12894 #13698 #13961 #14252 #14287 #14299 #14424 #14461 #14477 #14479 #14483 #8703 #14330" to "".



---

archive/issue_comments_178044.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,4 +13,4 @@\n ....:\n ```\n \n-**Apply** [(which is automatically generated by [attachment:doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/9d5a97497092510d867169a984675886.patch](https://github.com/sagemath/sage/files/ticket14512/d24a9307633bf332ff601f32bdbb2544.patch)))\n+in all documentation files, since those are changed rarely and we should teach the right thing there.\n``````\n",
    "created_at": "2014-11-23T20:21:07Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178044",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,4 +13,4 @@
 ....:
 ```
 
-**Apply** [(which is automatically generated by [attachment:doctest_prompt.sh](https://github.com/sagemath/sage/files/ticket14512/9d5a97497092510d867169a984675886.patch](https://github.com/sagemath/sage/files/ticket14512/d24a9307633bf332ff601f32bdbb2544.patch)))
+in all documentation files, since those are changed rarely and we should teach the right thing there.
``````




---

archive/issue_events_126287.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-23T20:21:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "component: doctest coverage",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126287"
}
```



---

archive/issue_events_126288.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-23T20:21:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "component: documentation",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126288"
}
```



---

archive/issue_events_126289.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-23T20:21:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "rename": {
        "from": "Use ....: doctest continuations everywhere",
        "to": "Use ....: doctest continuations in documentation"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126289"
}
```



---

archive/issue_comments_178045.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/ticket/14512](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/14512)",
    "created_at": "2014-11-24T08:58:13Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178045",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/ticket/14512](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/14512)



---

archive/issue_comments_178046.json:
```json
{
    "body": "<a id='comment:28'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161\">8a06f3b</a></td><td><code>Fix doctest formatting in src/doc</code></td></tr></table>\n",
    "created_at": "2014-11-24T08:58:26Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178046",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161">8a06f3b</a></td><td><code>Fix doctest formatting in src/doc</code></td></tr></table>




---

archive/issue_comments_178047.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,4 +13,4 @@\n ....:\n ```\n \n-in all documentation files, since those are changed rarely and we should teach the right thing there.\n+in all documentation files, since those are changed rarely and we should certainly teach the right thing there. The patch also adds some manual fixes for doctest formatting, including the removal of trailing backslashes in most places.\n``````\n",
    "created_at": "2014-11-24T08:58:26Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178047",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,4 +13,4 @@
 ....:
 ```
 
-in all documentation files, since those are changed rarely and we should teach the right thing there.
+in all documentation files, since those are changed rarely and we should certainly teach the right thing there. The patch also adds some manual fixes for doctest formatting, including the removal of trailing backslashes in most places.
``````




---

archive/issue_events_126290.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-24T08:58:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126290"
}
```



---

archive/issue_events_126291.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-24T08:58:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126291"
}
```



---

archive/issue_comments_178048.json:
```json
{
    "body": "**Commit:** [8a06f3bbb0020c75490074e14bb7f6d6fd7cc161](https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161)",
    "created_at": "2014-11-24T08:58:26Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178048",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [8a06f3bbb0020c75490074e14bb7f6d6fd7cc161](https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161)



---

archive/issue_comments_178049.json:
```json
{
    "body": "**Changing commit** from \"[8a06f3bbb0020c75490074e14bb7f6d6fd7cc161](https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161)\" to \"[e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)\".",
    "created_at": "2014-11-24T09:01:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8a06f3bbb0020c75490074e14bb7f6d6fd7cc161](https://github.com/sagemath/sagetrac-mirror/commit/8a06f3bbb0020c75490074e14bb7f6d6fd7cc161)" to "[e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)".



---

archive/issue_comments_178050.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d\">e55c9e7</a></td><td><code>Fix doctest formatting in src/doc</code></td></tr></table>\n",
    "created_at": "2014-11-24T09:01:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d">e55c9e7</a></td><td><code>Fix doctest formatting in src/doc</code></td></tr></table>




---

archive/issue_comments_178051.json:
```json
{
    "body": "<a id='comment:30'></a>\nready for review now?",
    "created_at": "2014-11-24T11:52:38Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178051",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
ready for review now?



---

archive/issue_comments_178052.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [vbraun](#comment%3A30):\n> ready for review now?\n\nYes.",
    "created_at": "2014-11-24T18:02:34Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178052",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Replying to [vbraun](#comment%3A30):
> ready for review now?

Yes.



---

archive/issue_events_126292.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-24T18:37:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126292"
}
```



---

archive/issue_events_126293.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-24T18:37:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126293"
}
```



---

archive/issue_comments_178053.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2014-11-24T18:37:51Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178053",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_178054.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/14512](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/14512)\" to \"[e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)\".",
    "created_at": "2014-11-25T11:25:57Z",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14512#issuecomment-178054",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/14512](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/14512)" to "[e55c9e7919a5161463ce4498d0dbd953225b8d3d](https://github.com/sagemath/sagetrac-mirror/commit/e55c9e7919a5161463ce4498d0dbd953225b8d3d)".



---

archive/issue_events_126294.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-25T11:25:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126294"
}
```



---

archive/issue_events_126295.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "74d4ea6a79854620702a1b7f980fed922b64ff20",
    "created_at": "2014-11-25T11:25:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14512",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14512#event-126295"
}
```
