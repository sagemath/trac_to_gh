# Issue 14120: Add constant_coefficient method for Laurent polynomials

archive/issues_013916.json:
```json
{
    "body": "There is no (easy) way to obtain the coefficient on the constant term for an element in the Laurent polynomial ring. This just adds a method `constant_coefficient()`.\n\nAssignee: @tscrim\n\nKeywords: days45\n\nReviewer: Kannappan Sampath\n\nAuthor: Travis Scrimshaw\n\nMerged: sage-5.8.beta2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14120\n\n",
    "closed_at": "2013-02-28T10:33:46Z",
    "created_at": "2013-02-14T16:01:50Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "Add constant_coefficient method for Laurent polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14120",
    "user": "https://github.com/tscrim"
}
```
There is no (easy) way to obtain the coefficient on the constant term for an element in the Laurent polynomial ring. This just adds a method `constant_coefficient()`.

Assignee: @tscrim

Keywords: days45

Reviewer: Kannappan Sampath

Author: Travis Scrimshaw

Merged: sage-5.8.beta2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14120





---

archive/issue_comments_216403.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-14T16:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216403",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_216404.json:
```json
{
    "body": "<a id='comment:2'></a>Fixed doctests and added a general `__getitem__()` to retrieve the coefficient by exponent value:\n\n```\nsage: P.<x,y> = LaurentPolynomialRing(QQ)\nsage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3; f\n-x^6 - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2\nsage: f[-2,3]   \n-7\nsage: f.coefficient(x^-2*y^3)\n-7\n```",
    "created_at": "2013-02-15T22:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216404",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>Fixed doctests and added a general `__getitem__()` to retrieve the coefficient by exponent value:

```
sage: P.<x,y> = LaurentPolynomialRing(QQ)
sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3; f
-x^6 - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2
sage: f[-2,3]   
-7
sage: f.coefficient(x^-2*y^3)
-7
```



---

archive/issue_comments_216405.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kannappan Sampath\"",
    "created_at": "2013-02-23T16:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216405",
    "user": "https://github.com/KPanComputes"
}
```

Changing reviewer from "" to "Kannappan Sampath"



---

archive/issue_comments_216406.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-23T16:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216406",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_216407.json:
```json
{
    "body": "<a id='comment:3'></a>I thought, I'd review this ticket.\n\nThe docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. \n\nIMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) \n\nAnd, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints \"like\" [this](http://trac.sagemath.org/sage_trac/ticket/14124). \n\nBuilding documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` \n\n```\n<autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n```\n\n---\nFinally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... \n\nThe already extant method `cofficient()` would benefit from adding r: `r\"\"\"` just so that the `\\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)\n\n---\n\nRegards, \n~KnS",
    "created_at": "2013-02-23T16:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216407",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:3'></a>I thought, I'd review this ticket.

The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. 

IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) 

And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints "like" [this](http://trac.sagemath.org/sage_trac/ticket/14124). 

Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` 

```
<autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
```

---
Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... 

The already extant method `cofficient()` would benefit from adding r: `r"""` just so that the `\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)

---

Regards, 
~KnS



---

archive/issue_comments_216408.json:
```json
{
    "body": "Attachment [trac_14120-constant_coeff_laurent_poly-ts.patch](tarball://root/attachments/some-uuid/ticket14120/trac_14120-constant_coeff_laurent_poly-ts.patch) by @tscrim created at 2013-02-23 18:44:47",
    "created_at": "2013-02-23T18:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216408",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14120-constant_coeff_laurent_poly-ts.patch](tarball://root/attachments/some-uuid/ticket14120/trac_14120-constant_coeff_laurent_poly-ts.patch) by @tscrim created at 2013-02-23 18:44:47



---

archive/issue_comments_216409.json:
```json
{
    "body": "<a id='comment:4'></a>First off, thank you for doing the review.\n\nReplying to [knsam](#comment%3A3):\n> The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. \n> \n> IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) \n\n\nI made it consistent with other multivariate polynomial rings, however I forgot to correct the doc. This is done. I've also added in two more methods for consistancy and changed the output of the iterator.\n\n> And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints \"like\" [this](http://trac.sagemath.org/sage_trac/ticket/14124). \n\n\nThis does not make sense to me. They are iterable with this patch.\n\n> Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` \n> \n> \n> ```\n> <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n> ```\n\n\nI do not get this with the revised patch.\n\n> Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... \n\n\nYou are welcome to do so on another ticket. That is outside of the purview of this one. I did it in the methods this patch touches.\n\n> The already extant method `cofficient()` would benefit from adding r: `r\"\"\"` just so that the `\\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)\n\n\nFixed.\n\nBest,\nTravis",
    "created_at": "2013-02-23T18:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216409",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>First off, thank you for doing the review.

Replying to [knsam](#comment%3A3):
> The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. 
> 
> IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) 


I made it consistent with other multivariate polynomial rings, however I forgot to correct the doc. This is done. I've also added in two more methods for consistancy and changed the output of the iterator.

> And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints "like" [this](http://trac.sagemath.org/sage_trac/ticket/14124). 


This does not make sense to me. They are iterable with this patch.

> Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` 
> 
> 
> ```
> <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
> ```


I do not get this with the revised patch.

> Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... 


You are welcome to do so on another ticket. That is outside of the purview of this one. I did it in the methods this patch touches.

> The already extant method `cofficient()` would benefit from adding r: `r"""` just so that the `\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)


Fixed.

Best,
Travis



---

archive/issue_comments_216410.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-23T18:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216410",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_216411.json:
```json
{
    "body": "<a id='comment:5'></a>>> And, could we also please document that multivariate laurent polynomials are not\n>> iterable, as implemented, by adding an example, before we get complaints \"like\"  this.\n\n>\n> This does not make sense to me. They are iterable with this patch.\n\n\nI meant more along the following lines: you cannot iterate through using slice notation: \n\n```\n sage: P.<x,y,z> = LaurentPolynomialRing(QQ)\n sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3 + x*z; f\n -x^6 + x*z - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2\n sage: f[6,0,0]\n -1\n sage:f[5:6]\n [snip]\n TypeError: Multivariate Laurent polynomials are not iterable\n```\n\nBut, well, this does not even make sense, given the current implementation. So, I'll set this to positive review. \n\n~KnS",
    "created_at": "2013-02-24T03:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216411",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:5'></a>>> And, could we also please document that multivariate laurent polynomials are not
>> iterable, as implemented, by adding an example, before we get complaints "like"  this.

>
> This does not make sense to me. They are iterable with this patch.


I meant more along the following lines: you cannot iterate through using slice notation: 

```
 sage: P.<x,y,z> = LaurentPolynomialRing(QQ)
 sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3 + x*z; f
 -x^6 + x*z - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2
 sage: f[6,0,0]
 -1
 sage:f[5:6]
 [snip]
 TypeError: Multivariate Laurent polynomials are not iterable
```

But, well, this does not even make sense, given the current implementation. So, I'll set this to positive review. 

~KnS



---

archive/issue_comments_216412.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-24T03:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216412",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_216413.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.8.beta2\"",
    "created_at": "2013-02-28T10:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216413",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.8.beta2"



---

archive/issue_comments_216414.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-28T10:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14120#issuecomment-216414",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_039828.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-28T10:33:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14120",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14120#event-39828"
}
```
