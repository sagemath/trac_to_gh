# Issue 14684: Convert between free group elements considering generator names.

archive/issues_014480.json:
```json
{
    "body": "Right now, when we try to convert elements between free groups, they just get converted to the Tietze list, forgeting about the names of the generators. This can cause strange behaviour like: \n\n```\nsage: F.<a,b>=FreeGroup()\nsage: G.<b,a>=FreeGroup()\nsage: F(a) \nb\n```\n\nThis patch solves this, looking for generators with matching names.\n\n**Assignee:** @miguelmarco\n\n**CC:**  @vbraun sydahmad @videlec @jhpalmieri tjolivet @rbeezer @dimpase dshurbert\n\n**Keywords:** free groups\n\n**Branch/Commit:** [4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Miguel Marco\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14684\n\n",
    "closed_at": "2014-08-26T13:02:45Z",
    "created_at": "2013-06-04T01:11:06Z",
    "labels": [
        "component: group theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Convert between free group elements considering generator names.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14684",
    "user": "https://github.com/miguelmarco"
}
```
Right now, when we try to convert elements between free groups, they just get converted to the Tietze list, forgeting about the names of the generators. This can cause strange behaviour like: 

```
sage: F.<a,b>=FreeGroup()
sage: G.<b,a>=FreeGroup()
sage: F(a) 
b
```

This patch solves this, looking for generators with matching names.

**Assignee:** @miguelmarco

**CC:**  @vbraun sydahmad @videlec @jhpalmieri tjolivet @rbeezer @dimpase dshurbert

**Keywords:** free groups

**Branch/Commit:** [4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)

**Reviewer:** Vincent Delecroix

**Author:** Miguel Marco

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14684





---

archive/issue_comments_234186.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-06-04T01:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234186",
    "user": "https://github.com/miguelmarco"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_019770.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "14684_free_group_conversion.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14684/14684_free_group_conversion.patch",
    "created_at": "2013-06-04T01:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/miguelmarco"
}
```



---

archive/issue_comments_234187.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2013-06-04T01:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234187",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_234188.json:
```json
{
    "body": "**Changing assignee** from joyner to @miguelmarco.",
    "created_at": "2013-06-05T17:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234188",
    "user": "https://github.com/miguelmarco"
}
```

**Changing assignee** from joyner to @miguelmarco.



---

archive/issue_events_048333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48333"
}
```



---

archive/issue_events_048334.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48334"
}
```



---

archive/issue_events_048335.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48335"
}
```



---

archive/issue_events_048336.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48336"
}
```



---

archive/issue_events_048337.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48337"
}
```



---

archive/issue_events_048338.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48338"
}
```



---

archive/issue_events_048339.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48339"
}
```



---

archive/issue_comments_234189.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2014-08-25T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234189",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_234190.json:
```json
{
    "body": "**Branch:** [public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)",
    "created_at": "2014-08-25T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234190",
    "user": "https://github.com/videlec"
}
```

**Branch:** [public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)



---

archive/issue_comments_234191.json:
```json
{
    "body": "<a id='comment:9'></a>\nHello,\n\nI created a branch from the ticket with `sage -dev`. The review can starts from there.\n\nWhat's the point of the following code in `_element_constructor_`?\n\n```\nif hasattr(P, '_freegroup_'):\n    if P.FreeGroup() is self:\n        return self.element_class(self, x.Tietze(), **kwds)\n```\nAs far as I looked, there is no object in Sage with a `_freegroup_` attribute.\n\nVincent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144\">b2d253d</a></td><td><code>Trac #14684: make conversion between free groups aware of generator names</code></td></tr></table>\n",
    "created_at": "2014-08-25T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234191",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Hello,

I created a branch from the ticket with `sage -dev`. The review can starts from there.

What's the point of the following code in `_element_constructor_`?

```
if hasattr(P, '_freegroup_'):
    if P.FreeGroup() is self:
        return self.element_class(self, x.Tietze(), **kwds)
```
As far as I looked, there is no object in Sage with a `_freegroup_` attribute.

Vincent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144">b2d253d</a></td><td><code>Trac #14684: make conversion between free groups aware of generator names</code></td></tr></table>




---

archive/issue_comments_234192.json:
```json
{
    "body": "**Commit:** [b2d253d9feeab81f73eaab3e484c6acbe7d34144](https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144)",
    "created_at": "2014-08-25T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234192",
    "user": "https://github.com/videlec"
}
```

**Commit:** [b2d253d9feeab81f73eaab3e484c6acbe7d34144](https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144)



---

archive/issue_comments_234193.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt is an error. It should be _free_group (finitely presented groups have that attribute, that contains the free group after which they are defined).\n\n\nApparently it works even without that because the element_class init first tries to get the Tietze list anyways.",
    "created_at": "2014-08-25T14:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234193",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:10'></a>
It is an error. It should be _free_group (finitely presented groups have that attribute, that contains the free group after which they are defined).


Apparently it works even without that because the element_class init first tries to get the Tietze list anyways.



---

archive/issue_comments_234194.json:
```json
{
    "body": "<a id='comment:11'></a>\nSo please, fix that!",
    "created_at": "2014-08-25T14:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234194",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
So please, fix that!



---

archive/issue_comments_234195.json:
```json
{
    "body": "**Changing status** from needs_info to needs_work.",
    "created_at": "2014-08-25T14:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234195",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_info to needs_work.



---

archive/issue_comments_234196.json:
```json
{
    "body": "**Changing branch** from \"[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)\" to \"[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)\".",
    "created_at": "2014-08-25T16:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234196",
    "user": "https://github.com/miguelmarco"
}
```

**Changing branch** from "[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)" to "[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)".



---

archive/issue_comments_234197.json:
```json
{
    "body": "**Changing branch** from \"[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)\" to \"[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)\".",
    "created_at": "2014-08-25T16:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234197",
    "user": "https://github.com/miguelmarco"
}
```

**Changing branch** from "[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)" to "[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)".



---

archive/issue_comments_234198.json:
```json
{
    "body": "<a id='comment:14'></a>\nFixed.",
    "created_at": "2014-08-25T16:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234198",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:14'></a>
Fixed.



---

archive/issue_comments_234199.json:
```json
{
    "body": "**Changing branch** from \"[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)\" to \"[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)\".",
    "created_at": "2014-08-25T16:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234199",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[public/14684](https://github.com/sagemath/sagetrac-mirror/tree/public/14684)" to "[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)".



---

archive/issue_comments_234200.json:
```json
{
    "body": "**Changing commit** from \"[b2d253d9feeab81f73eaab3e484c6acbe7d34144](https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144)\" to \"[4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)\".",
    "created_at": "2014-08-25T16:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234200",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[b2d253d9feeab81f73eaab3e484c6acbe7d34144](https://github.com/sagemath/sagetrac-mirror/commit/b2d253d9feeab81f73eaab3e484c6acbe7d34144)" to "[4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)".



---

archive/issue_comments_234201.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-08-25T16:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234201",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_234202.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks. If it is, your commit should appear on this page... and it does not. I only see your commit at `u/mmarco/ticket/14684` (`public/14684` is one commit back). I switch back to the name of the branch that you used. If you want to commit to a specific branch use `git push trac HEAD:public/14684`.\n\nVincent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1\">4a479ed</a></td><td><code>Remved unnecessary check for _freegroup_</code></td></tr></table>\n",
    "created_at": "2014-08-25T16:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234202",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Thanks. If it is, your commit should appear on this page... and it does not. I only see your commit at `u/mmarco/ticket/14684` (`public/14684` is one commit back). I switch back to the name of the branch that you used. If you want to commit to a specific branch use `git push trac HEAD:public/14684`.

Vincent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1">4a479ed</a></td><td><code>Remved unnecessary check for _freegroup_</code></td></tr></table>




---

archive/issue_comments_234203.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2014-08-25T17:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234203",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_234204.json:
```json
{
    "body": "<a id='comment:16'></a>\nPerfect!\n\nVincent",
    "created_at": "2014-08-25T17:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234204",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
Perfect!

Vincent



---

archive/issue_comments_234205.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-08-25T17:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234205",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_234206.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2014-08-25T19:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234206",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_234207.json:
```json
{
    "body": "<a id='comment:17'></a>\nAuthor name should be real name, not trac username",
    "created_at": "2014-08-25T19:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234207",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Author name should be real name, not trac username



---

archive/issue_comments_234208.json:
```json
{
    "body": "**Changing author** from \"mmarco\" to \"Miguel Marco\".",
    "created_at": "2014-08-25T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234208",
    "user": "https://github.com/miguelmarco"
}
```

**Changing author** from "mmarco" to "Miguel Marco".



---

archive/issue_comments_234209.json:
```json
{
    "body": "<a id='comment:18'></a>\nSorry, i always forget those details.",
    "created_at": "2014-08-25T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234209",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:18'></a>
Sorry, i always forget those details.



---

archive/issue_comments_234210.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2014-08-25T20:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234210",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_234211.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-08-26T13:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234211",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_048340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-26T13:02:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14684#event-48340"
}
```



---

archive/issue_comments_234212.json:
```json
{
    "body": "**Changing branch** from \"[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)\" to \"[4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)\".",
    "created_at": "2014-08-26T13:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14684#issuecomment-234212",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mmarco/ticket/14684](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/ticket/14684)" to "[4a479edb0db34d4d9d956dd2a1c306d93a00c7e1](https://github.com/sagemath/sagetrac-mirror/commit/4a479edb0db34d4d9d956dd2a1c306d93a00c7e1)".
