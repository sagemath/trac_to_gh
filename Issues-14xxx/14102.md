# Issue 14102: Nonsymmetric Macdonald Polynomials for all affine types

archive/issues_013898.json:
```json
{
    "body": "This ticket implements nonsymmetric Macdonald polynomials for\narbitrary affine Cartan type (including twisted and BC, but not\nKoornwinder) using the recursion formula in terms of Demazure-Lusztig\nand Cherednik operators. It complements the type-A implementation\nbased on the HHL combinatorial formula of #2708.\n\nThis patch was written by Anne Schilling and Nicolas M. Thi\u00e9ry during\nthe ICERM Semester Program on \"Automorphic Forms, Combinatorial\nRepresentation Theory and Multiple Dirichlet Series\" (January 28,\n2013 - May 3, 2013) with the help of Dan Bump, Ben Brubaker, Bogdan\nIon, Dan Orr, Arun Ram, Siddhartha Sahi, and Mark Shimozono. Special\nthanks go to Bogdan Ion and Mark Shimozono for their patient\nexplanations and hand computations to check the code.\n\nIn a follow-up ticket #14847 Whittaker functions and other features will become available.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat\n\nKeywords: Nonsymmetric Macdonald polynomials, days40, days45, days49, days54, ICERM2013\n\nWork_Issues: doc-pdf\n\nReviewer: Anne Schilling, Nicolas M. Thi\u00e9ry, Mark Shimozono, Bogdan Ion\n\nAuthor: Nicolas M. Thi\u00e9ry, Anne Schilling\n\nBranch: a0ceb91854a6899d33001c984f709ad5758e8317\n\nDependencies: #4327, #14143, #13589, #10963, #14673, #14610, #14775, #15931\n\nCommit: a0ceb91854a6899d33001c984f709ad5758e8317\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14102\n\n",
    "closed_at": "2014-05-21T15:33:29Z",
    "created_at": "2013-02-12T15:58:07Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Nonsymmetric Macdonald Polynomials for all affine types",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14102",
    "user": "https://github.com/dwbump"
}
```
This ticket implements nonsymmetric Macdonald polynomials for
arbitrary affine Cartan type (including twisted and BC, but not
Koornwinder) using the recursion formula in terms of Demazure-Lusztig
and Cherednik operators. It complements the type-A implementation
based on the HHL combinatorial formula of #2708.

This patch was written by Anne Schilling and Nicolas M. Thiéry during
the ICERM Semester Program on "Automorphic Forms, Combinatorial
Representation Theory and Multiple Dirichlet Series" (January 28,
2013 - May 3, 2013) with the help of Dan Bump, Ben Brubaker, Bogdan
Ion, Dan Orr, Arun Ram, Siddhartha Sahi, and Mark Shimozono. Special
thanks go to Bogdan Ion and Mark Shimozono for their patient
explanations and hand computations to check the code.

In a follow-up ticket #14847 Whittaker functions and other features will become available.

Assignee: sage-combinat

CC:  sage-combinat

Keywords: Nonsymmetric Macdonald polynomials, days40, days45, days49, days54, ICERM2013

Work_Issues: doc-pdf

Reviewer: Anne Schilling, Nicolas M. Thiéry, Mark Shimozono, Bogdan Ion

Author: Nicolas M. Thiéry, Anne Schilling

Branch: a0ceb91854a6899d33001c984f709ad5758e8317

Dependencies: #4327, #14143, #13589, #10963, #14673, #14610, #14775, #15931

Commit: a0ceb91854a6899d33001c984f709ad5758e8317

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14102





---

archive/issue_comments_172837.json:
```json
{
    "body": "Changing keywords from \"Nonsymmetric Macdonald\" to \"Nonsymmetric Macdonald polynomials, days40, days45\".",
    "created_at": "2013-02-14T04:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172837",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "Nonsymmetric Macdonald" to "Nonsymmetric Macdonald polynomials, days40, days45".



---

archive/issue_comments_172838.json:
```json
{
    "body": "Changing keywords from \"Nonsymmetric Macdonald polynomials, days40, days45\" to \"Nonsymmetric Macdonald polynomials, days40, days45, days49\".",
    "created_at": "2013-07-02T04:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172838",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "Nonsymmetric Macdonald polynomials, days40, days45" to "Nonsymmetric Macdonald polynomials, days40, days45, days49".



---

archive/issue_comments_172839.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-03T14:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172839",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172840.json:
```json
{
    "body": "<a id='comment:7'></a>Anne and Nicolas,\n\nThe family returned by NonSymmetricMacdonaldPolynomials should possess a method\nthat gives direct access to the affine Hecke representation of which it is a basis.\n\nI would like to add symmetric Macdonald polynomials to this patch.\nIt should be straightforward, especially if the AHA representation is at hand.",
    "created_at": "2013-07-05T22:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172840",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:7'></a>Anne and Nicolas,

The family returned by NonSymmetricMacdonaldPolynomials should possess a method
that gives direct access to the affine Hecke representation of which it is a basis.

I would like to add symmetric Macdonald polynomials to this patch.
It should be straightforward, especially if the AHA representation is at hand.



---

archive/issue_comments_172841.json:
```json
{
    "body": "<a id='comment:8'></a>Hi Mark,\n\n> The family returned by NonSymmetricMacdonaldPolynomials should possess a method\n> that gives direct access to the affine Hecke representation of which it is a basis.\n\n\nDo you mean that you want the operators\n\n```\n        T   = KL.twisted_demazure_lusztig_operators     (   q1, q2, convention=\"dominant\")\n        T_Y = KL.demazure_lusztig_operators_on_classical(q, q1, q2, convention=\"dominant\")\n```\ndirectly available? Or in which format do you want the Hecke algebra representation? You can get\n\n```\nsage: E = NonSymmetricMacdonaldPolynomials([\"A\",2,1])\nsage: E._KL\nGroup algebra of the Ambient space of the Root system of type ['A', 2, 1] over Fraction Field of Multivariate Polynomial Ring in q, q1, q2 over Rational Field\n```\n\nBest,\n\nAnne",
    "created_at": "2013-07-06T04:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172841",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:8'></a>Hi Mark,

> The family returned by NonSymmetricMacdonaldPolynomials should possess a method
> that gives direct access to the affine Hecke representation of which it is a basis.


Do you mean that you want the operators

```
        T   = KL.twisted_demazure_lusztig_operators     (   q1, q2, convention="dominant")
        T_Y = KL.demazure_lusztig_operators_on_classical(q, q1, q2, convention="dominant")
```
directly available? Or in which format do you want the Hecke algebra representation? You can get

```
sage: E = NonSymmetricMacdonaldPolynomials(["A",2,1])
sage: E._KL
Group algebra of the Ambient space of the Root system of type ['A', 2, 1] over Fraction Field of Multivariate Polynomial Ring in q, q1, q2 over Rational Field
```

Best,

Anne



---

archive/issue_comments_172842.json:
```json
{
    "body": "<a id='comment:9'></a>Anne,\n\nThe methods I wanted were hidden in the _T and _T_Y attributes.\n\nWhy does twisted_demazure_lusztig_operators use classical().dual().affine().dual()?\nI believe this is correct for untwisted root systems but why do\nwe know this is correct for twisted root systems? If this is a bug it only affects the\nzero-th Hecke operator.",
    "created_at": "2013-07-06T12:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172842",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:9'></a>Anne,

The methods I wanted were hidden in the _T and _T_Y attributes.

Why does twisted_demazure_lusztig_operators use classical().dual().affine().dual()?
I believe this is correct for untwisted root systems but why do
we know this is correct for twisted root systems? If this is a bug it only affects the
zero-th Hecke operator.



---

archive/issue_comments_172843.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 mshimo]:\n> The methods I wanted were hidden in the _T and _T_Y attributes.\n\n\nOk. Feel free to add whichever accessors you might think relevant.\n\n> Why does twisted_demazure_lusztig_operators use classical().dual().affine().dual()?\n> I believe this is correct for untwisted root systems but why do\n> we know this is correct for twisted root systems? If this is a bug it only affects the\n> zero-th Hecke operator.\n\n\nWell, it's not a bug, since we get the correct results :-)\n\nMore seriously: The cartan type as specified here is actually not really used, except for testing for the relations. It indeed looks dubious and should at some point be rewritten using the \"other_affinization\" method and the like. We must have been lucky to specify a type\nthat gives the same Coxeter group.\n\nSo, if you have a short way to specify the cartan type which you believe is more correct, please go ahead. Otherwise I think this can wait until someone reimplements T0_check in a less ad-hock way.\n\nCheers,\n                              Nicolas",
    "created_at": "2013-07-06T16:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172843",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>Replying to [comment:9 mshimo]:
> The methods I wanted were hidden in the _T and _T_Y attributes.


Ok. Feel free to add whichever accessors you might think relevant.

> Why does twisted_demazure_lusztig_operators use classical().dual().affine().dual()?
> I believe this is correct for untwisted root systems but why do
> we know this is correct for twisted root systems? If this is a bug it only affects the
> zero-th Hecke operator.


Well, it's not a bug, since we get the correct results :-)

More seriously: The cartan type as specified here is actually not really used, except for testing for the relations. It indeed looks dubious and should at some point be rewritten using the "other_affinization" method and the like. We must have been lucky to specify a type
that gives the same Coxeter group.

So, if you have a short way to specify the cartan type which you believe is more correct, please go ahead. Otherwise I think this can wait until someone reimplements T0_check in a less ad-hock way.

Cheers,
                              Nicolas



---

archive/issue_comments_172844.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:7 mshimo]: \n> I would like to add symmetric Macdonald polynomials to this patch.\n> It should be straightforward, especially if the AHA representation is at hand.\n\n\nCool. Since this patch is quite big already, I guess that could go in a followup ticket like the whittaker function one.",
    "created_at": "2013-07-06T16:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172844",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>Replying to [comment:7 mshimo]: 
> I would like to add symmetric Macdonald polynomials to this patch.
> It should be straightforward, especially if the AHA representation is at hand.


Cool. Since this patch is quite big already, I guess that could go in a followup ticket like the whittaker function one.



---

archive/issue_comments_172845.json:
```json
{
    "body": "<a id='comment:12'></a>Nicolas,\n\n> Well, it's not a bug, since we get the correct results :-)\n\n\nDo you know of an independent way to compute the nonsymmetric Macdonald polynomial\nfor twisted root systems, not just the t=0 specialization?\nHow was this verified?",
    "created_at": "2013-07-06T18:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172845",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:12'></a>Nicolas,

> Well, it's not a bug, since we get the correct results :-)


Do you know of an independent way to compute the nonsymmetric Macdonald polynomial
for twisted root systems, not just the t=0 specialization?
How was this verified?



---

archive/issue_comments_172846.json:
```json
{
    "body": "<a id='comment:13'></a>Hi Mark,\n\n> Do you know of an independent way to compute the nonsymmetric Macdonald polynomial\n> for twisted root systems, not just the t=0 specialization?\n> How was this verified?\n\n\nThe code currently checks that the results (i.e. the nonsymmetric Macdonald polynomials) are indeed eigenvectors of the Y operators. These conditions are not easy to satisfy. For types `A_n^{(1)}`, `B_n^{(1)}`, `BC_n^{(2)}` and `BC_n^{(2)}`-dual the NSMs were carefully compared against Bogdan Ion's hand and maple computations. If you are worried, I can ask him to confirm type `A_{2n-1}^{(2)}` as well.\n\nBest,\n\nAnne",
    "created_at": "2013-07-06T19:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172846",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:13'></a>Hi Mark,

> Do you know of an independent way to compute the nonsymmetric Macdonald polynomial
> for twisted root systems, not just the t=0 specialization?
> How was this verified?


The code currently checks that the results (i.e. the nonsymmetric Macdonald polynomials) are indeed eigenvectors of the Y operators. These conditions are not easy to satisfy. For types `A_n^{(1)}`, `B_n^{(1)}`, `BC_n^{(2)}` and `BC_n^{(2)}`-dual the NSMs were carefully compared against Bogdan Ion's hand and maple computations. If you are worried, I can ask him to confirm type `A_{2n-1}^{(2)}` as well.

Best,

Anne



---

archive/issue_comments_172847.json:
```json
{
    "body": "<a id='comment:15'></a>Nicolas, \n\nI added symmetric macdonald polynomials, fixed the parabolic root system stuff,\nand edited the docs for nonsymmetric macdonalds rather extensively.\nI already folded my review patch onto the given patch.\nPlease have a look and if it is ok, replace the above exported patch (I don't have sufficient\npermissions to do so).\n\n--Mark",
    "created_at": "2013-07-07T02:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172847",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:15'></a>Nicolas, 

I added symmetric macdonald polynomials, fixed the parabolic root system stuff,
and edited the docs for nonsymmetric macdonalds rather extensively.
I already folded my review patch onto the given patch.
Please have a look and if it is ok, replace the above exported patch (I don't have sufficient
permissions to do so).

--Mark



---

archive/issue_comments_172848.json:
```json
{
    "body": "<a id='comment:16'></a>Hi Mark,\n\nThank you for adding the parabolic root stuff and the symmetric Macdonald polynomials. Usually it is much better not to fold your patch straight in, so that the other people can review your changes first.\n\nBest,\n\nAnne",
    "created_at": "2013-07-07T02:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172848",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:16'></a>Hi Mark,

Thank you for adding the parabolic root stuff and the symmetric Macdonald polynomials. Usually it is much better not to fold your patch straight in, so that the other people can review your changes first.

Best,

Anne



---

archive/issue_comments_172849.json:
```json
{
    "body": "<a id='comment:17'></a>Mark's review patch can be retrieved from the queue history: http://combinat.sagemath.org/patches/rev/f9a14d979bb9\n\nI am reviewing it now.",
    "created_at": "2013-07-07T06:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172849",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:17'></a>Mark's review patch can be retrieved from the queue history: http://combinat.sagemath.org/patches/rev/f9a14d979bb9

I am reviewing it now.



---

archive/issue_comments_172850.json:
```json
{
    "body": "<a id='comment:18'></a>Hi Mark!\n\nThanks a lot for yor work. The documentation reads much better now.\nHere are a couple questions about your changes:\n\n```\n - sage: w = W.from_reduced_word([2,3])\n - sage: w.quantum_bruhat_successors([1,3])\n - Traceback (most recent call last):\n - ...\n - ValueError: s2*s3 is not of minimum length in its coset of the parabolic subgroup\n - generated by the reflections [1, 3] \n```\nWas there a reason for removing this test?\n\n```\n- This implementation, based on the general recursion formula,\n- covers all affine types including untwisted, twisted, `BC` and its\n- dual.\n+ This implementation covers all reduced affine root systems.\n```\nThe phrasing certainly can be improved, but I think it is useful to briefly state the method used.\n\n```\nThe extended affine Hecke algebra contains the Y's\n```\nDo we really need to mention the extended affine Hecke algebra? The Y's that are implemented are obtained by compositions of the T's and indexed by (co)roots.\n\n```\n629 + if len(index_set) == 0:\n630 + return [] \n```\nWas there a reason for this test in positive_roots? For now I removed it.\n\nI removed the method for sums of parabolic positive roots. Do we still really need \"is_parabolic_root\"?\n\nI did a couple changes in a review patch which I am about to push.\n\nOne remaining thing: I noticed that you changed \"non-symmetric\" to \"nonsymmetric\". If this is really what we want, then for consistency we should rename the class to NonsymmetricMacdonaldPolynomials (and its file accordingly). But that would not be consistent with the e.g. NonCommutativeSymmetricFunctions. \n\nCheers,\n                                     Nicolas",
    "created_at": "2013-07-07T07:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172850",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:18'></a>Hi Mark!

Thanks a lot for yor work. The documentation reads much better now.
Here are a couple questions about your changes:

```
 - sage: w = W.from_reduced_word([2,3])
 - sage: w.quantum_bruhat_successors([1,3])
 - Traceback (most recent call last):
 - ...
 - ValueError: s2*s3 is not of minimum length in its coset of the parabolic subgroup
 - generated by the reflections [1, 3] 
```
Was there a reason for removing this test?

```
- This implementation, based on the general recursion formula,
- covers all affine types including untwisted, twisted, `BC` and its
- dual.
+ This implementation covers all reduced affine root systems.
```
The phrasing certainly can be improved, but I think it is useful to briefly state the method used.

```
The extended affine Hecke algebra contains the Y's
```
Do we really need to mention the extended affine Hecke algebra? The Y's that are implemented are obtained by compositions of the T's and indexed by (co)roots.

```
629 + if len(index_set) == 0:
630 + return [] 
```
Was there a reason for this test in positive_roots? For now I removed it.

I removed the method for sums of parabolic positive roots. Do we still really need "is_parabolic_root"?

I did a couple changes in a review patch which I am about to push.

One remaining thing: I noticed that you changed "non-symmetric" to "nonsymmetric". If this is really what we want, then for consistency we should rename the class to NonsymmetricMacdonaldPolynomials (and its file accordingly). But that would not be consistent with the e.g. NonCommutativeSymmetricFunctions. 

Cheers,
                                     Nicolas



---

archive/issue_comments_172851.json:
```json
{
    "body": "<a id='comment:19'></a>A couple further comments:\n\nAbout symmetric macdo:\n\n- Could you add a couple tests comparing them to the other implementation in type A?\n- Do we have other potential consistency checks? Maybe test that they are indeed symmetric?\n- We should make sure that, in the current way they are calculated, the caching happens properly. I.e. when we sum over the orbit, we want that e.g. T_{1,2}(f) reuses T_{1}(f).\n\nOther than that, I would be in favor of extracting the changes about \"positive roots\" to a separate ticket, since they are mostly unrelated to macdonald polynomials (or are they not?).",
    "created_at": "2013-07-07T07:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172851",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:19'></a>A couple further comments:

About symmetric macdo:

- Could you add a couple tests comparing them to the other implementation in type A?
- Do we have other potential consistency checks? Maybe test that they are indeed symmetric?
- We should make sure that, in the current way they are calculated, the caching happens properly. I.e. when we sum over the orbit, we want that e.g. T_{1,2}(f) reuses T_{1}(f).

Other than that, I would be in favor of extracting the changes about "positive roots" to a separate ticket, since they are mostly unrelated to macdonald polynomials (or are they not?).



---

archive/issue_comments_172852.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:18 nthiery]:\n> I did a couple changes in a review patch which I am about to push.\n\n\nPushed on the queue! Please review!",
    "created_at": "2013-07-07T07:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172852",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:20'></a>Replying to [comment:18 nthiery]:
> I did a couple changes in a review patch which I am about to push.


Pushed on the queue! Please review!



---

archive/issue_comments_172853.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 nthiery]:\n> Replying to [comment:18 nthiery]:\n> > I did a couple changes in a review patch which I am about to push.\n\n> \n> Pushed on the queue! Please review!\n\n\nI cannot see that you recently pushed.\n\nAnne",
    "created_at": "2013-07-07T16:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172853",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:21'></a>Replying to [comment:20 nthiery]:
> Replying to [comment:18 nthiery]:
> > I did a couple changes in a review patch which I am about to push.

> 
> Pushed on the queue! Please review!


I cannot see that you recently pushed.

Anne



---

archive/issue_comments_172854.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:18 nthiery]:\n\n> {{{\n> - sage: w = W.from_reduced_word([2,3])\n> - sage: w.quantum_bruhat_successors([1,3])\n> - Traceback (most recent call last):\n> - ...\n> - ValueError: s2*s3 is not of minimum length in its coset of the parabolic subgroup\n> - generated by the reflections [1, 3] \n> }}}\n> Was there a reason for removing this test?\n\n\nI got a doctest error I didn't understand (stupid reason):\nthe tester was producing a blank line that wasn't matching the doctest string.\n\n> {{{\n> - This implementation, based on the general recursion formula,\n> - covers all affine types including untwisted, twisted, `BC` and its\n> - dual.\n> + This implementation covers all reduced affine root systems.\n> }}}\n> The phrasing certainly can be improved, but I think it is useful to briefly state the method used.\n\n\nI can add that (or rather put it back in).\n \n> {{{\n> The extended affine Hecke algebra contains the Y's\n> }}}\n> Do we really need to mention the extended affine Hecke algebra? The Y's that are implemented are obtained by compositions of the T's and indexed by (co)roots.\n\n\nIf only coroots are involved then no. I can take that out.\n\n> {{{\n> 629 + if len(index_set) == 0:\n> 630 + return [] \n> }}}\n> Was there a reason for this test in positive_roots? For now I removed it.\n\n\nIt is not needed (I added it during debugging before finding that the initial set of\nsimple roots needed to be changed before the search).\n \n> I removed the method for sums of parabolic positive roots. Do we still really need \"is_parabolic_root\"?\n\n\nThat sum method should be thought of as analogous to the computation of rho.\nThis fixed quantity (depends only on the root system and subset of index set)\ngets used many times over in the computation of the parabolic quantum Bruhat graph\n(which we then use to make KR crystals).\nThat is why I decided not to delete it. \nThere is a method in root_systems/root_space.py called quantum_root that requires this sum as well.\n\nis_parabolic_root is probably not really needed.\n\n> I did a couple changes in a review patch which I am about to push.\n> \n> One remaining thing: I noticed that you changed \"non-symmetric\" to \"nonsymmetric\". If this is really what we want, then for consistency we should rename the class to NonsymmetricMacdonaldPolynomials (and its file accordingly). But that would not be consistent with the e.g. NonCommutativeSymmetricFunctions. \n\n\nNot really. I'm generally against unnecessary hyphenation.\n(By the way I like NoncommutativeSymmetricFunctions better than the alternative.)",
    "created_at": "2013-07-07T19:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172854",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:22'></a>Replying to [comment:18 nthiery]:

> {{{
> - sage: w = W.from_reduced_word([2,3])
> - sage: w.quantum_bruhat_successors([1,3])
> - Traceback (most recent call last):
> - ...
> - ValueError: s2*s3 is not of minimum length in its coset of the parabolic subgroup
> - generated by the reflections [1, 3] 
> }}}
> Was there a reason for removing this test?


I got a doctest error I didn't understand (stupid reason):
the tester was producing a blank line that wasn't matching the doctest string.

> {{{
> - This implementation, based on the general recursion formula,
> - covers all affine types including untwisted, twisted, `BC` and its
> - dual.
> + This implementation covers all reduced affine root systems.
> }}}
> The phrasing certainly can be improved, but I think it is useful to briefly state the method used.


I can add that (or rather put it back in).
 
> {{{
> The extended affine Hecke algebra contains the Y's
> }}}
> Do we really need to mention the extended affine Hecke algebra? The Y's that are implemented are obtained by compositions of the T's and indexed by (co)roots.


If only coroots are involved then no. I can take that out.

> {{{
> 629 + if len(index_set) == 0:
> 630 + return [] 
> }}}
> Was there a reason for this test in positive_roots? For now I removed it.


It is not needed (I added it during debugging before finding that the initial set of
simple roots needed to be changed before the search).
 
> I removed the method for sums of parabolic positive roots. Do we still really need "is_parabolic_root"?


That sum method should be thought of as analogous to the computation of rho.
This fixed quantity (depends only on the root system and subset of index set)
gets used many times over in the computation of the parabolic quantum Bruhat graph
(which we then use to make KR crystals).
That is why I decided not to delete it. 
There is a method in root_systems/root_space.py called quantum_root that requires this sum as well.

is_parabolic_root is probably not really needed.

> I did a couple changes in a review patch which I am about to push.
> 
> One remaining thing: I noticed that you changed "non-symmetric" to "nonsymmetric". If this is really what we want, then for consistency we should rename the class to NonsymmetricMacdonaldPolynomials (and its file accordingly). But that would not be consistent with the e.g. NonCommutativeSymmetricFunctions. 


Not really. I'm generally against unnecessary hyphenation.
(By the way I like NoncommutativeSymmetricFunctions better than the alternative.)



---

archive/issue_comments_172855.json:
```json
{
    "body": "<a id='comment:23'></a>> I cannot see that you recently pushed.\n\n\nArgl, sorry. I had cloned from a local repository (to avoid messing with my local C3 changes), and did not notice I was thus pushing back there ...\n\nDone!\n\nCheers,\n                        Nicolas",
    "created_at": "2013-07-07T21:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172855",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:23'></a>> I cannot see that you recently pushed.


Argl, sorry. I had cloned from a local repository (to avoid messing with my local C3 changes), and did not notice I was thus pushing back there ...

Done!

Cheers,
                        Nicolas



---

archive/issue_comments_172856.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:22 mshimo]:\n> > I removed the method for sums of parabolic positive roots. Do we still really need \"is_parabolic_root\"?\n\n> \n> That sum method should be thought of as analogous to the computation of rho.\n> This fixed quantity (depends only on the root system and subset of index set)\n> gets used many times over in the computation of the parabolic quantum Bruhat graph\n> (which we then use to make KR crystals).\n> That is why I decided not to delete it.\n\n\nIt's used many times there indeed, but if I remember well calculated\nonly once at the beginning of the method.\n\nOk. If I recall correctly my review patch has taken it out.\n\n\nMay I let you implement the little things on which we agreed, and\npossibly reinstate sums_of_parabolic_positive_roots, with a cache and\ndocumentation, if you think it's really worthwhile?\n\n> I'm generally against unnecessary hyphenation.\n\n\nI see your point.\n\nNot totally consistent.\n\n> (By the way I like NoncommutativeSymmetricFunctions better than the alternative.)\n\n\nOn the other hand NCSF has been the traditional shorthand for a while ...\n\nHmm. Here is what we have in Sage currently:\n\n    NonCommutativeSymmetricFunctions \tNonDecreasingParkingFunction\n    NonDecreasingParkingFunctions \tNonNegativeIntegerSemiring\n    NonNegativeIntegers \tNonSymmetricMacdonaldPolynomials\n    NonattackingFillings\n\nThere is a bias, but it's not perfectly consistent.\n\nDo we need to make a poll on sage-devel?\n\nCheers,\n                                       Nicolas",
    "created_at": "2013-07-07T21:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172856",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:24'></a>Replying to [comment:22 mshimo]:
> > I removed the method for sums of parabolic positive roots. Do we still really need "is_parabolic_root"?

> 
> That sum method should be thought of as analogous to the computation of rho.
> This fixed quantity (depends only on the root system and subset of index set)
> gets used many times over in the computation of the parabolic quantum Bruhat graph
> (which we then use to make KR crystals).
> That is why I decided not to delete it.


It's used many times there indeed, but if I remember well calculated
only once at the beginning of the method.

Ok. If I recall correctly my review patch has taken it out.


May I let you implement the little things on which we agreed, and
possibly reinstate sums_of_parabolic_positive_roots, with a cache and
documentation, if you think it's really worthwhile?

> I'm generally against unnecessary hyphenation.


I see your point.

Not totally consistent.

> (By the way I like NoncommutativeSymmetricFunctions better than the alternative.)


On the other hand NCSF has been the traditional shorthand for a while ...

Hmm. Here is what we have in Sage currently:

    NonCommutativeSymmetricFunctions 	NonDecreasingParkingFunction
    NonDecreasingParkingFunctions 	NonNegativeIntegerSemiring
    NonNegativeIntegers 	NonSymmetricMacdonaldPolynomials
    NonattackingFillings

There is a bias, but it's not perfectly consistent.

Do we need to make a poll on sage-devel?

Cheers,
                                       Nicolas



---

archive/issue_comments_172857.json:
```json
{
    "body": "<a id='comment:25'></a>Nicolas,\n\nRight now the quantum bruhat graph is twice broken; I will repair it.\n\nThe quantum_bruhat_successors method in categories/weyl_groups (element method)\ngets called repeatedly (once for each element of the parabolic quotient)\nto generate the quantum Bruhat graph. Each time this function is called, \nit needs to loop through the set of positive roots that are NOT in the \nparabolic subsystem; each such root could lead to a quantum arrow.\nFor this reason I'm going to reinstate the function that\nconstructs the non-parabolic positive roots. At this point I don't see a reason\nwhy one should also not remember the sum of these roots (rather than recompute it\nrepeatedly).\n\nAlso the quantum_root method (in root_systems/root_space.py), which is called\nby quantum_bruhat_successors, requires the same sum.\n\nI'll put the failing doctest back in. I couldn't match the exception message, which started\nwith a <BLANKLINE> rather than Traceback. Maybe you can match it.\n\n--Mark",
    "created_at": "2013-07-07T23:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172857",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:25'></a>Nicolas,

Right now the quantum bruhat graph is twice broken; I will repair it.

The quantum_bruhat_successors method in categories/weyl_groups (element method)
gets called repeatedly (once for each element of the parabolic quotient)
to generate the quantum Bruhat graph. Each time this function is called, 
it needs to loop through the set of positive roots that are NOT in the 
parabolic subsystem; each such root could lead to a quantum arrow.
For this reason I'm going to reinstate the function that
constructs the non-parabolic positive roots. At this point I don't see a reason
why one should also not remember the sum of these roots (rather than recompute it
repeatedly).

Also the quantum_root method (in root_systems/root_space.py), which is called
by quantum_bruhat_successors, requires the same sum.

I'll put the failing doctest back in. I couldn't match the exception message, which started
with a <BLANKLINE> rather than Traceback. Maybe you can match it.

--Mark



---

archive/issue_comments_172858.json:
```json
{
    "body": "<a id='comment:26'></a>I pushed another review patch after Nicolas' review patch.\n\nI figured out the doctest issue.\n\nThere is a direct formula (see Cherednik's 2009 book, formula (3.3.15)) \nfor the symmetric macdonald as a linear combination of\nnonsymmetric Macdonalds (with complicated rational function coefficients),\nwhich someone else can program when they feel inspired.\nThis is the same kind of chore as writing a function for the precise eigenvalues in the\nnonsymmetric Macdonald recurrence.",
    "created_at": "2013-07-08T02:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172858",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:26'></a>I pushed another review patch after Nicolas' review patch.

I figured out the doctest issue.

There is a direct formula (see Cherednik's 2009 book, formula (3.3.15)) 
for the symmetric macdonald as a linear combination of
nonsymmetric Macdonalds (with complicated rational function coefficients),
which someone else can program when they feel inspired.
This is the same kind of chore as writing a function for the precise eigenvalues in the
nonsymmetric Macdonald recurrence.



---

archive/issue_comments_172859.json:
```json
{
    "body": "<a id='comment:27'></a>Hi Mark and Nicolas,\n\nThank you both for your review patches. I looked them both over and in principle it is fine with me to fold them in (I made some minor fixes to Mark's review patch).\n\nRegarding the naming, I agree with Mark that it is nicer to remove the hyphens. However, can we nonetheless leave the name of the class as NonSymmetricMacdonaldPolynomials in accordance with NCSF and most other classes? I do not mind this convention in sage since the real meaning is in (non)symmetric and not the non. But if you really want to change it, that is fine with me as well.\n\nBest,\n\nAnne",
    "created_at": "2013-07-08T05:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172859",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:27'></a>Hi Mark and Nicolas,

Thank you both for your review patches. I looked them both over and in principle it is fine with me to fold them in (I made some minor fixes to Mark's review patch).

Regarding the naming, I agree with Mark that it is nicer to remove the hyphens. However, can we nonetheless leave the name of the class as NonSymmetricMacdonaldPolynomials in accordance with NCSF and most other classes? I do not mind this convention in sage since the real meaning is in (non)symmetric and not the non. But if you really want to change it, that is fine with me as well.

Best,

Anne



---

archive/issue_comments_172860.json:
```json
{
    "body": "<a id='comment:28'></a>Hi Mark and Nicolas,\n\nHere is an update on the twisted types. I asked Bogdan Ion for data for type `A_5^{(2)}`. Everything seems to match:\n\n```\nsage: K = QQ['q,t'].fraction_field()\nsage: q,t = K.gens()\nsage: E = NonSymmetricMacdonaldPolynomials([\"A\",5,2], q, t**2,-1)\nsage: omega = E.keys()\nsage: vars = K['x1,x2,x3'].gens()\nsage: x1,x2,x3 = K['x1,x2,x3'].gens()\n\nsage: E[omega[1]].expand(vars) == x1\nTrue\nsage: E[-omega[1]].expand(vars) == (t-1)*(t+1)*(q*t^10-1)*x1/((t^2*q-1)*(q*t^5-1)*(q*t^5+1))+(t-1)*(t+1)*x2/(t^2*q-1)+(t-1)*(t+1)*x3/(t^2*q-1)+(t-1)*(t+1)/((t^2*q-1)*x2)+1/x1+(t-1)*(t+1)/((t^2*q-1)*x3)\nTrue\nsage: E[omega[2]].expand(vars) == (t-1)*(t+1)*x1/(q*t^8-1)+x2\nTrue\nsage: E[-omega[2]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*(q*t^6-1)*x1/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t+1)*(t-1)*(q*t^8-1)*x2/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t-1)*(t+1)*x3/(q*t^4-1)+1/x2+(t-1)*(t+1)/((q*t^4-1)*x3)\nTrue\nsage: E[-omega[1]-omega[2]].expand(vars) == (t-1)*(t+1)*(q^3*t^10+2*t^10*q^2-q^2*t^8-2*t^6*q^2+q*t^8-q*t^6-2*q*t^4+q+2-t^4)/((t^2*q-1)*(q*t^4-1)*(q*t^3-1)*(q*t^3+1))+(t+1)*(t-1)/((t^2*q-1)*x3*x2)+(t+1)*(t-1)*x3/((t^2*q-1)*x2)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x1*x3/((q*t^3-1)*(q*t^3+1)*(t^2*q-1))+(t+1)*(t-1)*(q*t^6-1)*x1/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x2)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x1/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x3)+(t+1)*(t-1)*(t^10*q^2-q*t^8+t^8-q*t^6-t^4+1)*x1*x2/((t^2*q-1)*(q*t^4-1)*(q*t^3-1)*(q*t^3+1))+(t+1)*(t-1)*(q*t^6-1)*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x1)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x3*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1))+1/(x1*x2)+(t+1)*(t-1)*x3/((t^2*q-1)*x1)+(t+1)*(t-1)/((t^2*q-1)*x1*x3)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x3)\nTrue\nsage: E[omega[1]-omega[2]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*(q*t^6-1)*q/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t-1)*(t+1)*x1*x3/(q*t^4-1)+x1/x2+(t-1)*(t+1)*x1/((q*t^4-1)*x3)+(t+1)*(t-1)*(q*t^8-1)*x1*x2/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))Truesage: E[omega[3]].expand(vars) == (t-1)*(t+1)*x1/(q*t^6-1)+(t-1)*(t+1)*x2/(q*t^6-1)+x3True\nsage: E[-omega[3]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*x1/((q*t^5-1)*(q*t^5+1))+(q*t^6+1)*(t-1)*(t+1)*x2/((q*t^5-1)*(q*t^5+1))+(t-1)*(t+1)*x3/((q*t^5-1)*(q*t^5+1))+1/x3\nTrue\n```\n\nI put a review patch putting (similar) tests for twisted types as a review patch.\n\nNicolas, please review everything, fold and upload the updated patch!\n\nThanks,\n\nAnne",
    "created_at": "2013-07-10T03:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172860",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:28'></a>Hi Mark and Nicolas,

Here is an update on the twisted types. I asked Bogdan Ion for data for type `A_5^{(2)}`. Everything seems to match:

```
sage: K = QQ['q,t'].fraction_field()
sage: q,t = K.gens()
sage: E = NonSymmetricMacdonaldPolynomials(["A",5,2], q, t**2,-1)
sage: omega = E.keys()
sage: vars = K['x1,x2,x3'].gens()
sage: x1,x2,x3 = K['x1,x2,x3'].gens()

sage: E[omega[1]].expand(vars) == x1
True
sage: E[-omega[1]].expand(vars) == (t-1)*(t+1)*(q*t^10-1)*x1/((t^2*q-1)*(q*t^5-1)*(q*t^5+1))+(t-1)*(t+1)*x2/(t^2*q-1)+(t-1)*(t+1)*x3/(t^2*q-1)+(t-1)*(t+1)/((t^2*q-1)*x2)+1/x1+(t-1)*(t+1)/((t^2*q-1)*x3)
True
sage: E[omega[2]].expand(vars) == (t-1)*(t+1)*x1/(q*t^8-1)+x2
True
sage: E[-omega[2]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*(q*t^6-1)*x1/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t+1)*(t-1)*(q*t^8-1)*x2/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t-1)*(t+1)*x3/(q*t^4-1)+1/x2+(t-1)*(t+1)/((q*t^4-1)*x3)
True
sage: E[-omega[1]-omega[2]].expand(vars) == (t-1)*(t+1)*(q^3*t^10+2*t^10*q^2-q^2*t^8-2*t^6*q^2+q*t^8-q*t^6-2*q*t^4+q+2-t^4)/((t^2*q-1)*(q*t^4-1)*(q*t^3-1)*(q*t^3+1))+(t+1)*(t-1)/((t^2*q-1)*x3*x2)+(t+1)*(t-1)*x3/((t^2*q-1)*x2)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x1*x3/((q*t^3-1)*(q*t^3+1)*(t^2*q-1))+(t+1)*(t-1)*(q*t^6-1)*x1/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x2)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x1/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x3)+(t+1)*(t-1)*(t^10*q^2-q*t^8+t^8-q*t^6-t^4+1)*x1*x2/((t^2*q-1)*(q*t^4-1)*(q*t^3-1)*(q*t^3+1))+(t+1)*(t-1)*(q*t^6-1)*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x1)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x3*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1))+1/(x1*x2)+(t+1)*(t-1)*x3/((t^2*q-1)*x1)+(t+1)*(t-1)/((t^2*q-1)*x1*x3)+(t+1)^2*(t-1)^2*(q*t^4+t^2+1)*x2/((q*t^3-1)*(q*t^3+1)*(t^2*q-1)*x3)
True
sage: E[omega[1]-omega[2]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*(q*t^6-1)*q/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))+(t-1)*(t+1)*x1*x3/(q*t^4-1)+x1/x2+(t-1)*(t+1)*x1/((q*t^4-1)*x3)+(t+1)*(t-1)*(q*t^8-1)*x1*x2/((q*t^5-1)*(q*t^5+1)*(q*t^4-1))Truesage: E[omega[3]].expand(vars) == (t-1)*(t+1)*x1/(q*t^6-1)+(t-1)*(t+1)*x2/(q*t^6-1)+x3True
sage: E[-omega[3]].expand(vars) == (q*t^6+1)*(t-1)*(t+1)*x1/((q*t^5-1)*(q*t^5+1))+(q*t^6+1)*(t-1)*(t+1)*x2/((q*t^5-1)*(q*t^5+1))+(t-1)*(t+1)*x3/((q*t^5-1)*(q*t^5+1))+1/x3
True
```

I put a review patch putting (similar) tests for twisted types as a review patch.

Nicolas, please review everything, fold and upload the updated patch!

Thanks,

Anne



---

archive/issue_comments_172861.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-12T16:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172861",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172862.json:
```json
{
    "body": "<a id='comment:30'></a>Hi Nicolas and Mark,\n\nI made some mini changes, but other than that everything looks good now!\n\nAnne",
    "created_at": "2013-07-12T16:08:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172862",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:30'></a>Hi Nicolas and Mark,

I made some mini changes, but other than that everything looks good now!

Anne



---

archive/issue_comments_172863.json:
```json
{
    "body": "<a id='comment:31'></a>Why does the patchbot see red? Does it mean the patches don't apply?",
    "created_at": "2013-07-12T17:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172863",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:31'></a>Why does the patchbot see red? Does it mean the patches don't apply?



---

archive/issue_comments_172864.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:31 mshimo]:\n> Why does the patchbot see red? Does it mean the patches don't apply?\n\n\nThe patch depends on #10963 and Nicolas probably has not yet uploaded that patch yet on trac. Oops and #13589 is also a prerequiste. So I put this into the dependencies.",
    "created_at": "2013-07-12T17:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172864",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:32'></a>Replying to [comment:31 mshimo]:
> Why does the patchbot see red? Does it mean the patches don't apply?


The patch depends on #10963 and Nicolas probably has not yet uploaded that patch yet on trac. Oops and #13589 is also a prerequiste. So I put this into the dependencies.



---

archive/issue_comments_172865.json:
```json
{
    "body": "<a id='comment:34'></a>Hi!\n\nI checked Anne's little review patch.\n\nI replaced here my \"old\" patch by yours.\n\nI just posted on trac the latest #10963 patch (it indeed needed some rebasing on top of the reviewer's patches for #13589)\n\nCheers,\n                                   Nicolas",
    "created_at": "2013-07-12T22:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172865",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:34'></a>Hi!

I checked Anne's little review patch.

I replaced here my "old" patch by yours.

I just posted on trac the latest #10963 patch (it indeed needed some rebasing on top of the reviewer's patches for #13589)

Cheers,
                                   Nicolas



---

archive/issue_comments_172866.json:
```json
{
    "body": "<a id='comment:35'></a>Nicolas, I updated the patch on the combinat queue since there was a subtle bug in the symmetric macdonald polynomials having to do with caching and the order of searching a Weyl orbit.\nDidn't export it to trac.\n\nAgain I forgot to make a separate review patch. There is a doctest change in \nsymmetric_macdonald polynomials and a change in the orbit method of root_lattice_realizations,\nto calling TransitiveIdealGraded instead of TransitiveIdeal.\n\n--Mark",
    "created_at": "2013-07-20T04:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172866",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:35'></a>Nicolas, I updated the patch on the combinat queue since there was a subtle bug in the symmetric macdonald polynomials having to do with caching and the order of searching a Weyl orbit.
Didn't export it to trac.

Again I forgot to make a separate review patch. There is a doctest change in 
symmetric_macdonald polynomials and a change in the orbit method of root_lattice_realizations,
to calling TransitiveIdealGraded instead of TransitiveIdeal.

--Mark



---

archive/issue_events_039727.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:09:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14102#event-39727"
}
```



---

archive/issue_comments_172867.json:
```json
{
    "body": "<a id='comment:38'></a>Ok, Mark, I updated the patch on the trac server!\n\nAnne",
    "created_at": "2013-07-21T21:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172867",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:38'></a>Ok, Mark, I updated the patch on the trac server!

Anne



---

archive/issue_comments_172868.json:
```json
{
    "body": "<a id='comment:39'></a>Attachment [trac_14102-nonsymmetric-macdonald.patch](tarball://root/attachments/some-uuid/ticket14102/trac_14102-nonsymmetric-macdonald.patch) by @nthiery created at 2013-08-19 15:44:38\n\nThe updated patch has been trivially rebased on top of 14755 which is about to get merged.",
    "created_at": "2013-08-19T15:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172868",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:39'></a>Attachment [trac_14102-nonsymmetric-macdonald.patch](tarball://root/attachments/some-uuid/ticket14102/trac_14102-nonsymmetric-macdonald.patch) by @nthiery created at 2013-08-19 15:44:38

The updated patch has been trivially rebased on top of 14755 which is about to get merged.



---

archive/issue_comments_172869.json:
```json
{
    "body": "<a id='comment:41'></a>I think you meant #14775 instead of #14755, so I changed that!",
    "created_at": "2013-08-19T16:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172869",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:41'></a>I think you meant #14775 instead of #14755, so I changed that!



---

archive/issue_comments_172870.json:
```json
{
    "body": "Attachment [trac_14102-nonsymmetric-macdonald.2.patch](tarball://root/attachments/some-uuid/ticket14102/trac_14102-nonsymmetric-macdonald.2.patch) by @anneschilling created at 2013-11-07 23:46:01",
    "created_at": "2013-11-07T23:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172870",
    "user": "https://github.com/anneschilling"
}
```

Attachment [trac_14102-nonsymmetric-macdonald.2.patch](tarball://root/attachments/some-uuid/ticket14102/trac_14102-nonsymmetric-macdonald.2.patch) by @anneschilling created at 2013-11-07 23:46:01



---

archive/issue_comments_172871.json:
```json
{
    "body": "<a id='comment:42'></a>Apply trac_14102-nonsymmetric-macdonald.2.patch\n\nFixed broken doctests in pieri_factors.py that must have sneaked in during the last 3 months.",
    "created_at": "2013-11-07T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172871",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:42'></a>Apply trac_14102-nonsymmetric-macdonald.2.patch

Fixed broken doctests in pieri_factors.py that must have sneaked in during the last 3 months.



---

archive/issue_comments_172872.json:
```json
{
    "body": "<a id='comment:44'></a>New commits:",
    "created_at": "2013-11-08T20:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172872",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:44'></a>New commits:



---

archive/issue_comments_172873.json:
```json
{
    "body": "Changing keywords from \"Nonsymmetric Macdonald polynomials, days40, days45, days49\" to \"Nonsymmetric Macdonald polynomials, days40, days45, days49, days54\".",
    "created_at": "2013-11-08T22:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172873",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "Nonsymmetric Macdonald polynomials, days40, days45, days49" to "Nonsymmetric Macdonald polynomials, days40, days45, days49, days54".



---

archive/issue_comments_172874.json:
```json
{
    "body": "<a id='comment:46'></a>I'm getting occasional random failures \n\n```\nsage -t --long src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 200, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\nFailed example:\n    T._test_relations()                 # long time (1.3s)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[30]>\", line 1, in <module>\n        T._test_relations()                 # long time (1.3s)\n      File \"/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/root_system/hecke_algebra_representation.py\", line 471, in _test_relations\n        tester.assertEqual(x, y)\n      File \"/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python/unittest/case.py\", line 515, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python/unittest/case.py\", line 508, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: (-q1^2*q2^2-q1*q2^3)*B[-e[0] - e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e[0] + e['delta'] - e[1]] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']] != (-q1^2*q2^2-2*q1*q2^3-q2^4)*B[-e[0] - e[1] + 2*e['delta']] + (q1*q2^3+q2^4)*B[-e[0] + 2*e['delta'] - e[1]] + (-q1^2*q2^2-q1*q2^3)*B[e[0] - e[1] + e['delta']] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']]\n```",
    "created_at": "2014-01-06T06:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172874",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>I'm getting occasional random failures 

```
sage -t --long src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py
**********************************************************************
File "src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 200, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
Failed example:
    T._test_relations()                 # long time (1.3s)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[30]>", line 1, in <module>
        T._test_relations()                 # long time (1.3s)
      File "/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/root_system/hecke_algebra_representation.py", line 471, in _test_relations
        tester.assertEqual(x, y)
      File "/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python/unittest/case.py", line 515, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/Users/buildbot/build/sage/bsd-1/sage_git/build/local/lib/python/unittest/case.py", line 508, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: (-q1^2*q2^2-q1*q2^3)*B[-e[0] - e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e[0] + e['delta'] - e[1]] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']] != (-q1^2*q2^2-2*q1*q2^3-q2^4)*B[-e[0] - e[1] + 2*e['delta']] + (q1*q2^3+q2^4)*B[-e[0] + 2*e['delta'] - e[1]] + (-q1^2*q2^2-q1*q2^3)*B[e[0] - e[1] + e['delta']] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']]
```



---

archive/issue_comments_172875.json:
```json
{
    "body": "<a id='comment:47'></a>Yikes! Thanks Volker for the report.\n\nOn the right hand side, the index `-e[0] - e[1] + 2*e['delta']` appears twice; collected together one would get the same value as on the left hand side. So now we need to figure out why the two occurences of `-e[0] - e[1] + 2*e['delta']` are not detected as equal. For this, I would need to reproduce the error in order to introspect the values in a debugger.\n\nVolker: did you notice any pattern for when the error occurs (platform, frequency)? Or should I just launch the test enough times on any platform and it should occur at some point?\n\nCheers,",
    "created_at": "2014-01-06T08:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172875",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:47'></a>Yikes! Thanks Volker for the report.

On the right hand side, the index `-e[0] - e[1] + 2*e['delta']` appears twice; collected together one would get the same value as on the left hand side. So now we need to figure out why the two occurences of `-e[0] - e[1] + 2*e['delta']` are not detected as equal. For this, I would need to reproduce the error in order to introspect the values in a debugger.

Volker: did you notice any pattern for when the error occurs (platform, frequency)? Or should I just launch the test enough times on any platform and it should occur at some point?

Cheers,



---

archive/issue_comments_172876.json:
```json
{
    "body": "<a id='comment:48'></a>This was on the snapperkob (Ubuntu x86_64) and bsd (OSX 10.6) buildbot, so shouldn't be a problem to reproduce if you run it in a loop...",
    "created_at": "2014-01-06T09:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172876",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:48'></a>This was on the snapperkob (Ubuntu x86_64) and bsd (OSX 10.6) buildbot, so shouldn't be a problem to reproduce if you run it in a loop...



---

archive/issue_comments_172877.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2014-03-07T01:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_172878.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-03-07T01:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_172879.json:
```json
{
    "body": "<a id='comment:50'></a>I rebased on the latest version of 10963 and now get the following doctest failures:\n\n```\nsage -t coxeter_group.py\n**********************************************************************\nFile \"coxeter_group.py\", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup\nFailed example:\n    W\nExpected:\n    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:\n    [1 3 2]\n    [3 1 5]\n    [2 5 1]\nGot:\n    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.combinat.root_system.coxeter_group.CoxeterGroup\n    [29 tests, 1 failure, 15.61 s]\nsage -t coxeter_matrix.py\n    [10 tests, 0.42 s]\nsage -t dynkin_diagram.py\n    [104 tests, 0.91 s]\nsage -t hecke_algebra_representation.py\n**********************************************************************\nFile \"hecke_algebra_representation.py\", line 344, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Tw\nFailed example:\n    x = KW.an_element(); x\nExpected:\n    B[123121] + 2*B[12312] + 3*B[12321] + B[123]\nGot:\n    2*B[12321] + 3*B[1231] + B[123] + B[]\n**********************************************************************\nFile \"hecke_algebra_representation.py\", line 726, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Y_eigenvectors\nFailed example:\n    [E[w] for w in W]\nExpected:\n    [B[2121],\n    -B[2121] + B[121],\n    -B[2121] + B[212],\n    (q2/(-q1+q2))*B[2121] + ((-q2)/(-q1+q2))*B[121] - B[212] + B[12],\n    ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] - B[121] + (q2^2/(-q1^2+q1*q2-q2^2))*B[212] + B[21],\n    ((q1^2+q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] + ((-q1^2-q2^2)/(-q1^2+q1*q2-q2^2))*B[121] + ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[212] + (q2^2/(-q1^2+q1*q2-q2^2))*B[12] - B[21] + B[1],\n    (q2/(q1-q2))*B[2121] + (q2/(-q1+q2))*B[121] + (q2/(-q1+q2))*B[212] - B[12] + ((-q2)/(-q1+q2))*B[21] + B[2],\n    B[2121] - B[121] - B[212] + B[12] + B[21] - B[1] - B[2] + B[]]\nGot:\n    [B[2121] - B[121] - B[212] + B[12] + B[21] - B[1] - B[2] + B[], -B[2121] + B[212], (q2/(q1-q2))*B[2121] + (q2/(-q1+q2))*B[121] + (q2/(-q1+q2))*B[212] - B[12] + ((-q2)/(-q1+q2))*B[21] + B[2], ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] - B[121] + (q2^2/(-q1^2+q1*q2-q2^2))*B[212] + B[21], ((q1^2+q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] + ((-q1^2-q2^2)/(-q1^2+q1*q2-q2^2))*B[121] + ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[212] + (q2^2/(-q1^2+q1*q2-q2^2))*B[12] - B[21] + B[1], B[2121], (q2/(-q1+q2))*B[2121] + ((-q2)/(-q1+q2))*B[121] - B[212] + B[12], -B[2121] + B[121]]\n**********************************************************************\n2 items had failures:\n   1 of  19 in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Tw\n   1 of  15 in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Y_eigenvectors\n    [286 tests, 2 failures, 7.72 s]\n```",
    "created_at": "2014-03-07T01:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172879",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:50'></a>I rebased on the latest version of 10963 and now get the following doctest failures:

```
sage -t coxeter_group.py
**********************************************************************
File "coxeter_group.py", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup
Failed example:
    W
Expected:
    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:
    [1 3 2]
    [3 1 5]
    [2 5 1]
Got:
    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]
**********************************************************************
1 item had failures:
   1 of  18 in sage.combinat.root_system.coxeter_group.CoxeterGroup
    [29 tests, 1 failure, 15.61 s]
sage -t coxeter_matrix.py
    [10 tests, 0.42 s]
sage -t dynkin_diagram.py
    [104 tests, 0.91 s]
sage -t hecke_algebra_representation.py
**********************************************************************
File "hecke_algebra_representation.py", line 344, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Tw
Failed example:
    x = KW.an_element(); x
Expected:
    B[123121] + 2*B[12312] + 3*B[12321] + B[123]
Got:
    2*B[12321] + 3*B[1231] + B[123] + B[]
**********************************************************************
File "hecke_algebra_representation.py", line 726, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Y_eigenvectors
Failed example:
    [E[w] for w in W]
Expected:
    [B[2121],
    -B[2121] + B[121],
    -B[2121] + B[212],
    (q2/(-q1+q2))*B[2121] + ((-q2)/(-q1+q2))*B[121] - B[212] + B[12],
    ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] - B[121] + (q2^2/(-q1^2+q1*q2-q2^2))*B[212] + B[21],
    ((q1^2+q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] + ((-q1^2-q2^2)/(-q1^2+q1*q2-q2^2))*B[121] + ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[212] + (q2^2/(-q1^2+q1*q2-q2^2))*B[12] - B[21] + B[1],
    (q2/(q1-q2))*B[2121] + (q2/(-q1+q2))*B[121] + (q2/(-q1+q2))*B[212] - B[12] + ((-q2)/(-q1+q2))*B[21] + B[2],
    B[2121] - B[121] - B[212] + B[12] + B[21] - B[1] - B[2] + B[]]
Got:
    [B[2121] - B[121] - B[212] + B[12] + B[21] - B[1] - B[2] + B[], -B[2121] + B[212], (q2/(q1-q2))*B[2121] + (q2/(-q1+q2))*B[121] + (q2/(-q1+q2))*B[212] - B[12] + ((-q2)/(-q1+q2))*B[21] + B[2], ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] - B[121] + (q2^2/(-q1^2+q1*q2-q2^2))*B[212] + B[21], ((q1^2+q2^2)/(-q1^2+q1*q2-q2^2))*B[2121] + ((-q1^2-q2^2)/(-q1^2+q1*q2-q2^2))*B[121] + ((-q2^2)/(-q1^2+q1*q2-q2^2))*B[212] + (q2^2/(-q1^2+q1*q2-q2^2))*B[12] - B[21] + B[1], B[2121], (q2/(-q1+q2))*B[2121] + ((-q2)/(-q1+q2))*B[121] - B[212] + B[12], -B[2121] + B[121]]
**********************************************************************
2 items had failures:
   1 of  19 in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Tw
   1 of  15 in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation.Y_eigenvectors
    [286 tests, 2 failures, 7.72 s]
```



---

archive/issue_comments_172880.json:
```json
{
    "body": "<a id='comment:51'></a>Do you have Coxeter3 installed? This might account for the first error (in which case, it is an unrelated error I need to fix). The latter two errors seem to be reordering, and if so, likely comes from the version bump of GAP.",
    "created_at": "2014-03-07T04:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172880",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:51'></a>Do you have Coxeter3 installed? This might account for the first error (in which case, it is an unrelated error I need to fix). The latter two errors seem to be reordering, and if so, likely comes from the version bump of GAP.



---

archive/issue_comments_172881.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:51 tscrim]:\n> Do you have Coxeter3 installed? This might account for the first error (in which case, it is an unrelated error I need to fix). The latter two errors seem to be reordering, and if so, likely comes from the version bump of GAP.\n\n\nI do have coxeter3 installed. The second error is not a reordering, but I guess just a different element.",
    "created_at": "2014-03-07T06:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172881",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:52'></a>Replying to [comment:51 tscrim]:
> Do you have Coxeter3 installed? This might account for the first error (in which case, it is an unrelated error I need to fix). The latter two errors seem to be reordering, and if so, likely comes from the version bump of GAP.


I do have coxeter3 installed. The second error is not a reordering, but I guess just a different element.



---

archive/issue_comments_172882.json:
```json
{
    "body": "<a id='comment:53'></a>Thanks for doing the merge!\n\nI'll work on those failing tests and more importantly on the issue reported by Volker as soon as I can raise the head from #10963.",
    "created_at": "2014-03-07T12:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172882",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:53'></a>Thanks for doing the merge!

I'll work on those failing tests and more importantly on the issue reported by Volker as soon as I can raise the head from #10963.



---

archive/issue_comments_172883.json:
```json
{
    "body": "<a id='comment:54'></a>The new GAP does indeed pick different generators for groups. In fact, this happened a while ago and we missed a number of GAP version updates.",
    "created_at": "2014-03-07T15:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172883",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'></a>The new GAP does indeed pick different generators for groups. In fact, this happened a while ago and we missed a number of GAP version updates.



---

archive/issue_comments_172884.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-07T19:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172885.json:
```json
{
    "body": "<a id='comment:56'></a>I get similar errors to what Volker indicated:\n\n```\nsage -t --long non_symmetric_macdonald_polynomials.py\n**********************************************************************\nFile \"non_symmetric_macdonald_polynomials.py\", line 200, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\nFailed example:\n    T._test_relations()                 # long time (1.3s)\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[30]>\", line 1, in <module>\n        T._test_relations()                 # long time (1.3s)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/hecke_algebra_representation.py\", line 471, in _test_relations\n        tester.assertEqual(x, y)\n      File \"/Applications/sage/local/lib/python/unittest/case.py\", line 515, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/Applications/sage/local/lib/python/unittest/case.py\", line 508, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: (-q1^2*q2^2-q1*q2^3)*B[-e[0] - e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e[0] + e['delta'] - e[1]] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']] != (-q1^2*q2^2-2*q1*q2^3-q2^4)*B[-e[0] - e[1] + 2*e['delta']] + (q1*q2^3+q2^4)*B[-e[0] + 2*e['delta'] - e[1]] + (-q1^2*q2^2-q1*q2^3)*B[e[0] - e[1] + e['delta']] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']]\n**********************************************************************\n1 item had failures:\n   1 of 432 in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\n    [562 tests, 1 failure, 453.14 s]\n----------------------------------------------------------------------\nsage -t --long non_symmetric_macdonald_polynomials.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 453.4 seconds\n    cpu time: 451.7 seconds\n    cumulative wall time: 453.1 seconds\n```",
    "created_at": "2014-03-07T20:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172885",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:56'></a>I get similar errors to what Volker indicated:

```
sage -t --long non_symmetric_macdonald_polynomials.py
**********************************************************************
File "non_symmetric_macdonald_polynomials.py", line 200, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
Failed example:
    T._test_relations()                 # long time (1.3s)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[30]>", line 1, in <module>
        T._test_relations()                 # long time (1.3s)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/hecke_algebra_representation.py", line 471, in _test_relations
        tester.assertEqual(x, y)
      File "/Applications/sage/local/lib/python/unittest/case.py", line 515, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/Applications/sage/local/lib/python/unittest/case.py", line 508, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: (-q1^2*q2^2-q1*q2^3)*B[-e[0] - e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e[0] + e['delta'] - e[1]] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']] != (-q1^2*q2^2-2*q1*q2^3-q2^4)*B[-e[0] - e[1] + 2*e['delta']] + (q1*q2^3+q2^4)*B[-e[0] + 2*e['delta'] - e[1]] + (-q1^2*q2^2-q1*q2^3)*B[e[0] - e[1] + e['delta']] + (-q1*q2^3)*B[-2*e[1] + 2*e['delta']] + (-q1^2*q2^2-q1*q2^3)*B[e['delta']]
**********************************************************************
1 item had failures:
   1 of 432 in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
    [562 tests, 1 failure, 453.14 s]
----------------------------------------------------------------------
sage -t --long non_symmetric_macdonald_polynomials.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 453.4 seconds
    cpu time: 451.7 seconds
    cumulative wall time: 453.1 seconds
```



---

archive/issue_comments_172886.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:50 aschilling]:\n> I rebased on the latest version of 10963 and now get the following doctest failures:\n> \n> ```\n> sage -t coxeter_group.py\n> **********************************************************************\n> File \"coxeter_group.py\", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup\n> Failed example:\n>     W\n> Expected:\n>     Coxeter group over Universal Cyclotomic Field with Coxeter matrix:\n>     [1 3 2]\n>     [3 1 5]\n>     [2 5 1]\n> Got:\n>     Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]\n> **********************************************************************\n\n\nSee #15910 regarding this doctest failure. It has nothing to do with this ticket.",
    "created_at": "2014-03-08T05:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172886",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:57'></a>Replying to [comment:50 aschilling]:
> I rebased on the latest version of 10963 and now get the following doctest failures:
> 
> ```
> sage -t coxeter_group.py
> **********************************************************************
> File "coxeter_group.py", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup
> Failed example:
>     W
> Expected:
>     Coxeter group over Universal Cyclotomic Field with Coxeter matrix:
>     [1 3 2]
>     [3 1 5]
>     [2 5 1]
> Got:
>     Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]
> **********************************************************************


See #15910 regarding this doctest failure. It has nothing to do with this ticket.



---

archive/issue_comments_172887.json:
```json
{
    "body": "<a id='comment:58'></a>Hi!\n\nThanks to Jean-Baptiste's mac, I have been able to reproduce and\nanalyze the bug reported by Volker. At the end of the day, it's a\ncombination of:\n\n- CombinatorialFreeModule still computing hash values for elements\n  from their _repr_ (yikes)\n\n- CombinatorialFreeModule being somewhat lax in input checking,\n  leading to things like mixes of int's and Integer's in the support\n  of elements.\n\n- The root system code introducing those int's and Integer's in the\n  first place\n\n- sort giving different results for mixed lists containing strings and\n  integers, depending on whether some of those integers are int's or\n  Integer's\n\nThus the odds of things going wrong were low, which is why this\nremained unnoticed for so long. Why did this only appear on certain platforms?\nWell, the result of\n\n```\n    sage: sorted([int(0), 'delta', 1])\n    [0, 1, 'delta']\n```\nis not the same on my Linux and Jean-Baptiste's Mac.\n\nProbably, with some other doctests, the problem would have instead\nappeared on my machine and not on others.\n\nI assume that (finally!) implementing a proper hash function for\nCombinatorialFreeModule elements should do the job. But that will be\nfor another day. Yawn ....\n\nIn any cases, no worry to have: as I expected this has nothing to do\nwith #10963.\n\nCheers,\n                           Nicolas",
    "created_at": "2014-03-13T00:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172887",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:58'></a>Hi!

Thanks to Jean-Baptiste's mac, I have been able to reproduce and
analyze the bug reported by Volker. At the end of the day, it's a
combination of:

- CombinatorialFreeModule still computing hash values for elements
  from their _repr_ (yikes)

- CombinatorialFreeModule being somewhat lax in input checking,
  leading to things like mixes of int's and Integer's in the support
  of elements.

- The root system code introducing those int's and Integer's in the
  first place

- sort giving different results for mixed lists containing strings and
  integers, depending on whether some of those integers are int's or
  Integer's

Thus the odds of things going wrong were low, which is why this
remained unnoticed for so long. Why did this only appear on certain platforms?
Well, the result of

```
    sage: sorted([int(0), 'delta', 1])
    [0, 1, 'delta']
```
is not the same on my Linux and Jean-Baptiste's Mac.

Probably, with some other doctests, the problem would have instead
appeared on my machine and not on others.

I assume that (finally!) implementing a proper hash function for
CombinatorialFreeModule elements should do the job. But that will be
for another day. Yawn ....

In any cases, no worry to have: as I expected this has nothing to do
with #10963.

Cheers,
                           Nicolas



---

archive/issue_comments_172888.json:
```json
{
    "body": "<a id='comment:59'></a>Great that you figured it out!\n\nAnne",
    "created_at": "2014-03-13T05:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172888",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:59'></a>Great that you figured it out!

Anne



---

archive/issue_comments_172889.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-03-13T16:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_172890.json:
```json
{
    "body": "<a id='comment:61'></a>I merged in the latest version of #10963 (it was a pain to recompile\neverything everytime I switched between this, develop, or #10963; and\n\nI also merged in #15931, which should fix the bug reported on\n[comment:46]. As a bonus:\n\n```\nsage -t non_symmetric_macdonald_polynomials.py # Before\n    [533 tests, 54.28 s]\nsage -t non_symmetric_macdonald_polynomials.py # After\n    [533 tests, 41.98 s]\n```\n\nAnne: could you test?",
    "created_at": "2014-03-13T16:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172890",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:61'></a>I merged in the latest version of #10963 (it was a pain to recompile
everything everytime I switched between this, develop, or #10963; and

I also merged in #15931, which should fix the bug reported on
[comment:46]. As a bonus:

```
sage -t non_symmetric_macdonald_polynomials.py # Before
    [533 tests, 54.28 s]
sage -t non_symmetric_macdonald_polynomials.py # After
    [533 tests, 41.98 s]
```

Anne: could you test?



---

archive/issue_comments_172891.json:
```json
{
    "body": "<a id='comment:63'></a>With the current version, the documentation does not build:\n\n```\n[combinat ] reading sources... [ 99%] tableaux\n[combinat ] reading sources... [100%] words\n[combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n[combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\nTraceback (most recent call last):\n  File \"/Applications/sage/src/doc/common/builder.py\", line 83, in f\n    execfile(sys.argv[0])\n  File \"/Applications/sage/src/doc/common/custom-sphinx-build.py\", line 185, in <module>\n    sphinx.cmdline.main(sys.argv)\n  File \"/Applications/sage/local/lib/python2.7/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/cmdline.py\", line 206, in main\n    print >>error\n  File \"/Applications/sage/src/doc/common/custom-sphinx-build.py\", line 165, in write\n    self._write(str)\n  File \"/Applications/sage/src/doc/common/custom-sphinx-build.py\", line 139, in _write\n    self._log_line(line)\n  File \"/Applications/sage/src/doc/common/custom-sphinx-build.py\", line 108, in _log_line\n    raise OSError(line)\nOSError: [combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n\n\n[rings    ] reading sources... [ 92%] sage/rings/quotient_ring_element\nError building the documentation.\n\nNote: incremental documentation builds sometimes cause spurious\nerror messages. To be certain that these are real errors, run\n\"make doc-clean\" first and try again.\nTraceback (most recent call last):\n  File \"/Applications/sage/src/doc/common/builder.py\", line 1474, in <module>\n    getattr(get_builder(name), type)()\n  File \"/Applications/sage/src/doc/common/builder.py\", line 269, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/Applications/sage/src/doc/common/builder.py\", line 485, in _wrapper\n    x.get(99999)\n  File \"/Applications/sage/local/lib/python/multiprocessing/pool.py\", line 554, in get\n    raise self._value\nOSError: [combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n\nmake: *** [doc-html] Error 1\n```\nBut the long test indeed now passes:\n\n```\nanne$ sage -t --long non_symmetric_macdonald_polynomials.py \nRunning doctests with ID 2014-03-13-11-44-46-13a52b2e.\nDoctesting 1 file.\nsage -t --long non_symmetric_macdonald_polynomials.py\n    [562 tests, 273.63 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 273.9 seconds\n    cpu time: 269.6 seconds\n    cumulative wall time: 273.6 seconds\n```",
    "created_at": "2014-03-13T18:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172891",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:63'></a>With the current version, the documentation does not build:

```
[combinat ] reading sources... [ 99%] tableaux
[combinat ] reading sources... [100%] words
[combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
[combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
Traceback (most recent call last):
  File "/Applications/sage/src/doc/common/builder.py", line 83, in f
    execfile(sys.argv[0])
  File "/Applications/sage/src/doc/common/custom-sphinx-build.py", line 185, in <module>
    sphinx.cmdline.main(sys.argv)
  File "/Applications/sage/local/lib/python2.7/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/cmdline.py", line 206, in main
    print >>error
  File "/Applications/sage/src/doc/common/custom-sphinx-build.py", line 165, in write
    self._write(str)
  File "/Applications/sage/src/doc/common/custom-sphinx-build.py", line 139, in _write
    self._log_line(line)
  File "/Applications/sage/src/doc/common/custom-sphinx-build.py", line 108, in _log_line
    raise OSError(line)
OSError: [combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.


[rings    ] reading sources... [ 92%] sage/rings/quotient_ring_element
Error building the documentation.

Note: incremental documentation builds sometimes cause spurious
error messages. To be certain that these are real errors, run
"make doc-clean" first and try again.
Traceback (most recent call last):
  File "/Applications/sage/src/doc/common/builder.py", line 1474, in <module>
    getattr(get_builder(name), type)()
  File "/Applications/sage/src/doc/common/builder.py", line 269, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/Applications/sage/src/doc/common/builder.py", line 485, in _wrapper
    x.get(99999)
  File "/Applications/sage/local/lib/python/multiprocessing/pool.py", line 554, in get
    raise self._value
OSError: [combinat ] <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.

make: *** [doc-html] Error 1
```
But the long test indeed now passes:

```
anne$ sage -t --long non_symmetric_macdonald_polynomials.py 
Running doctests with ID 2014-03-13-11-44-46-13a52b2e.
Doctesting 1 file.
sage -t --long non_symmetric_macdonald_polynomials.py
    [562 tests, 273.63 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 273.9 seconds
    cpu time: 269.6 seconds
    cumulative wall time: 273.6 seconds
```



---

archive/issue_comments_172892.json:
```json
{
    "body": "<a id='comment:64'></a>Actually, with the current version of this patch, sage does not even start for me\n\n```\nbyte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.py to expression_conversions.pyc\nbyte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/function_factory.py to function_factory.pyc\nbyte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/integration/integral.py to integral.pyc\nbyte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/version.py to version.pyc\nrunning install_egg_info\nRemoving /Applications/sage/local/lib/python2.7/site-packages/sage-6.2.beta4-py2.7.egg-info\nWriting /Applications/sage/local/lib/python2.7/site-packages/sage-6.2.beta4-py2.7.egg-info\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.2.beta3, Release Date: 2014-03-03                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nTraceback (most recent call last):\n  File \"/Applications/sage/src/bin/sage-ipython\", line 6, in <module>\n    from sage.misc.interpreter import SageTerminalApp\n  File \"/Applications/sage/local/lib/python2.7/site-packages/sage/misc/interpreter.py\", line 158, in <module>\n    from IPython.terminal.interactiveshell import TerminalInteractiveShell\nImportError: No module named terminal.interactiveshell\n```",
    "created_at": "2014-03-14T05:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172892",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:64'></a>Actually, with the current version of this patch, sage does not even start for me

```
byte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.py to expression_conversions.pyc
byte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/function_factory.py to function_factory.pyc
byte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/symbolic/integration/integral.py to integral.pyc
byte-compiling /Applications/sage/local/lib/python2.7/site-packages/sage/version.py to version.pyc
running install_egg_info
Removing /Applications/sage/local/lib/python2.7/site-packages/sage-6.2.beta4-py2.7.egg-info
Writing /Applications/sage/local/lib/python2.7/site-packages/sage-6.2.beta4-py2.7.egg-info
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 6.2.beta3, Release Date: 2014-03-03                   │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
Traceback (most recent call last):
  File "/Applications/sage/src/bin/sage-ipython", line 6, in <module>
    from sage.misc.interpreter import SageTerminalApp
  File "/Applications/sage/local/lib/python2.7/site-packages/sage/misc/interpreter.py", line 158, in <module>
    from IPython.terminal.interactiveshell import TerminalInteractiveShell
ImportError: No module named terminal.interactiveshell
```



---

archive/issue_comments_172893.json:
```json
{
    "body": "<a id='comment:65'></a>Hmm, Sage starts on my machine. Let's see: does Sage start for you in the branch develop?\n\nI am investigating the doc issue (I in fact get the same problem here).",
    "created_at": "2014-03-14T07:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172893",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:65'></a>Hmm, Sage starts on my machine. Let's see: does Sage start for you in the branch develop?

I am investigating the doc issue (I in fact get the same problem here).



---

archive/issue_comments_172894.json:
```json
{
    "body": "<a id='comment:66'></a>Anne, it looks like you have mixed Sage versions. Did you run `make build`? Judging from the error, you need to rebuild IPython (it was upgraded in 6.2.beta4).",
    "created_at": "2014-03-14T14:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172894",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:66'></a>Anne, it looks like you have mixed Sage versions. Did you run `make build`? Judging from the error, you need to rebuild IPython (it was upgraded in 6.2.beta4).



---

archive/issue_comments_172895.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:66 tscrim]:\n> Anne, it looks like you have mixed Sage versions. Did you run `make build`? Judging from the error, you need to rebuild IPython (it was upgraded in 6.2.beta4).\n\n\nYes, I did. Well, something was messed up with my sage. I reinstalled from scratch and ran the tests and now everything works!",
    "created_at": "2014-03-14T17:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172895",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:67'></a>Replying to [comment:66 tscrim]:
> Anne, it looks like you have mixed Sage versions. Did you run `make build`? Judging from the error, you need to rebuild IPython (it was upgraded in 6.2.beta4).


Yes, I did. Well, something was messed up with my sage. I reinstalled from scratch and ran the tests and now everything works!



---

archive/issue_comments_172896.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-14T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172896",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172897.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-03-14T18:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_172898.json:
```json
{
    "body": "<a id='comment:69'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-03-14T18:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:69'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_172899.json:
```json
{
    "body": "<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-05-06T15:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_172900.json:
```json
{
    "body": "<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-06T16:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172901.json:
```json
{
    "body": "<a id='comment:72'></a>I've rebased this off the latest #10963. I've also added back in the import statement in `categories/weyl_groups.py` in order for the `pieri_factors.py` tests to pass. I believe this was removed prior to my merge, so I'm asking for someone (probably with coxeter3 installed) to double-check everything works.",
    "created_at": "2014-05-06T16:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172901",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:72'></a>I've rebased this off the latest #10963. I've also added back in the import statement in `categories/weyl_groups.py` in order for the `pieri_factors.py` tests to pass. I believe this was removed prior to my merge, so I'm asking for someone (probably with coxeter3 installed) to double-check everything works.



---

archive/issue_comments_172902.json:
```json
{
    "body": "<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-07T03:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172903.json:
```json
{
    "body": "<a id='comment:74'></a>Ok, thanks Travis. There were a couple of failing doctests due to the new crystal syntax. I fixed those.\n\nAnne",
    "created_at": "2014-05-07T03:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172903",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:74'></a>Ok, thanks Travis. There were a couple of failing doctests due to the new crystal syntax. I fixed those.

Anne



---

archive/issue_comments_172904.json:
```json
{
    "body": "<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-09T02:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172905.json:
```json
{
    "body": "<a id='comment:76'></a>I've double-checked that all doctests passed. I marked one of them as `# long time` and fixed a doc formatting issue that I saw. However I can't verify the doc builds because my docbuild is (still) broken...",
    "created_at": "2014-05-09T03:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172905",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:76'></a>I've double-checked that all doctests passed. I marked one of them as `# long time` and fixed a doc formatting issue that I saw. However I can't verify the doc builds because my docbuild is (still) broken...



---

archive/issue_comments_172906.json:
```json
{
    "body": "<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-09T09:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172907.json:
```json
{
    "body": "<a id='comment:78'></a>Hi Anne, Travis,\n\nThanks for merging in the latest dependencies! I have proofread the changes, and am happy with them,\nup to one point: in FiniteEnumeratedSets I'd rather stick to the lazy import. The methods are potencially called repeteadly and reimporting Integer each time could waste time, whereas the lazy import should be resolved only once. I haven't done a benchmark though.\n\nOnce this detail is settled, we can go back to positive review!\n\nCheers,\n                          Nicolas",
    "created_at": "2014-05-09T09:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172907",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:78'></a>Hi Anne, Travis,

Thanks for merging in the latest dependencies! I have proofread the changes, and am happy with them,
up to one point: in FiniteEnumeratedSets I'd rather stick to the lazy import. The methods are potencially called repeteadly and reimporting Integer each time could waste time, whereas the lazy import should be resolved only once. I haven't done a benchmark though.

Once this detail is settled, we can go back to positive review!

Cheers,
                          Nicolas



---

archive/issue_comments_172908.json:
```json
{
    "body": "<a id='comment:79'></a>Hi Nicolas,\n\nPlease change the import in FiniteEnumeratedSets (Travis changed this, right?).\n\nThanks!\n\nAnne\n\nReplying to [comment:78 nthiery]:\n> Hi Anne, Travis,\n> \n> Thanks for merging in the latest dependencies! I have proofread the changes, and am happy with them,\n> up to one point: in FiniteEnumeratedSets I'd rather stick to the lazy import. The methods are potencially called repeteadly and reimporting Integer each time could waste time, whereas the lazy import should be resolved only once. I haven't done a benchmark though.\n> \n> Once this detail is settled, we can go back to positive review!\n> \n> Cheers,\n>                           Nicolas",
    "created_at": "2014-05-09T14:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172908",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:79'></a>Hi Nicolas,

Please change the import in FiniteEnumeratedSets (Travis changed this, right?).

Thanks!

Anne

Replying to [comment:78 nthiery]:
> Hi Anne, Travis,
> 
> Thanks for merging in the latest dependencies! I have proofread the changes, and am happy with them,
> up to one point: in FiniteEnumeratedSets I'd rather stick to the lazy import. The methods are potencially called repeteadly and reimporting Integer each time could waste time, whereas the lazy import should be resolved only once. I haven't done a benchmark though.
> 
> Once this detail is settled, we can go back to positive review!
> 
> Cheers,
>                           Nicolas



---

archive/issue_comments_172909.json:
```json
{
    "body": "<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-09T16:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172909",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172910.json:
```json
{
    "body": "<a id='comment:81'></a>Replying to [comment:79 aschilling]:\n> Please change the import in FiniteEnumeratedSets (Travis changed this, right?).\n\n\nDone!\n\nFor the record, here is the result of a quick benchmark I made out of\ncuriosity. For a trivial function, we get a factor of 10 in speed. Of\ncourse it's not really representative since in our current use case\nthe methods are not quite as trivial.\n\n```\n\"\"\"\nComparative benchmark between lazy importing and importing inside a method\n\n    sage: from test_lazy_import import f,g\n    sage: %timeit f(i)\n    1000000 loops, best of 3: 197 ns per loop\n    sage: %timeit g(i)\n    1000000 loops, best of 3: 1.65 \u00b5s per loop\n\"\"\"\nfrom sage.misc.lazy_import import lazy_import\nlazy_import('sage.rings.integer', 'Integer', 'LazyInteger')\n\ndef f(i):\n    return LazyInteger(i)\n\ndef g(i):\n    from sage.rings.integer import Integer\n    Integer(i)\n```\n\nBtw: it would be nice if pyflakes knew about `lazy_import`.",
    "created_at": "2014-05-09T16:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172910",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:81'></a>Replying to [comment:79 aschilling]:
> Please change the import in FiniteEnumeratedSets (Travis changed this, right?).


Done!

For the record, here is the result of a quick benchmark I made out of
curiosity. For a trivial function, we get a factor of 10 in speed. Of
course it's not really representative since in our current use case
the methods are not quite as trivial.

```
"""
Comparative benchmark between lazy importing and importing inside a method

    sage: from test_lazy_import import f,g
    sage: %timeit f(i)
    1000000 loops, best of 3: 197 ns per loop
    sage: %timeit g(i)
    1000000 loops, best of 3: 1.65 µs per loop
"""
from sage.misc.lazy_import import lazy_import
lazy_import('sage.rings.integer', 'Integer', 'LazyInteger')

def f(i):
    return LazyInteger(i)

def g(i):
    from sage.rings.integer import Integer
    Integer(i)
```

Btw: it would be nice if pyflakes knew about `lazy_import`.



---

archive/issue_comments_172911.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-09T16:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172911",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172912.json:
```json
{
    "body": "Changing keywords from \"Nonsymmetric Macdonald polynomials, days40, days45, days49, days54\" to \"Nonsymmetric Macdonald polynomials, days40, days45, days49, days54, ICERM2013\".",
    "created_at": "2014-05-09T16:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172912",
    "user": "https://github.com/nthiery"
}
```

Changing keywords from "Nonsymmetric Macdonald polynomials, days40, days45, days49, days54" to "Nonsymmetric Macdonald polynomials, days40, days45, days49, days54, ICERM2013".



---

archive/issue_comments_172913.json:
```json
{
    "body": "<a id='comment:84'></a>That's a good benchmark to know. Thanks Nicolas.",
    "created_at": "2014-05-09T16:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172913",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:84'></a>That's a good benchmark to know. Thanks Nicolas.



---

archive/issue_events_039728.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-10T02:44:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14102#event-39728"
}
```



---

archive/issue_events_039729.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-10T02:44:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14102#event-39729"
}
```



---

archive/issue_comments_172914.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-05-13T21:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_172915.json:
```json
{
    "body": "<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2014-05-13T21:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_172916.json:
```json
{
    "body": "<a id='comment:87'></a>Trivial rebase over latest #10963.",
    "created_at": "2014-05-13T21:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172916",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:87'></a>Trivial rebase over latest #10963.



---

archive/issue_comments_172917.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-13T21:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172917",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172918.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-19T12:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172918",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_172919.json:
```json
{
    "body": "<a id='comment:88'></a>pdf docs don't build",
    "created_at": "2014-05-19T12:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172919",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:88'></a>pdf docs don't build



---

archive/issue_comments_172920.json:
```json
{
    "body": "<a id='comment:89'></a>Replying to [comment:88 vbraun]:\n> pdf docs don't build\n\n\nIs this related to this patch? I get the following error:\n\n```\nOverfull \\hbox (27.79457pt too wide) in paragraph at lines 54386--54386\n\\T1/ptm/m/it/10 bose=False\\T1/pcr/m/n/10 ) \n[597] [598] [599] [600] [601] [602] [603] [604] [605] [606]\nChapter 6.\n[607] [608]\nUnderfull \\hbox (badness 6380) in paragraph at lines 55235--55239\n[]\\T1/ptm/m/n/10 Aric Hag-berg, Dan Schult and Pieter Swart. Net-workX doc-u-me\nn-ta-tion. [On-line] Avail-able:\n\nUnderfull \\hbox (badness 10000) in paragraph at lines 55291--55295\n[]\\T1/ptm/m/n/10 Stephen P Bor-gatti. (1995). Cen-tral-ity and AIDS. [On-line] \nAvail-able:\n\nUnderfull \\hbox (badness 7558) in paragraph at lines 55296--55301\n[]\\T1/ptm/m/n/10 Coen Bron and Joep Ker-bosch. (1973). Al-go-rithm 457: Find-in\ng All Cliques of an\n\nUnderfull \\hbox (badness 5667) in paragraph at lines 55296--55301\n\\T1/ptm/m/n/10 Undi-rected Graph. Com-mun. ACM. v 16. n 9. pages 575-577. ACM P\nress. [On-line] Avail-able:\n[609]\nUnderfull \\hbox (badness 10000) in paragraph at lines 55416--55420\n[]\\T1/ptm/m/n/10 Fifth An-nual Graph Draw-ing Con-test P. Eaded, J. Marks, P.Mu\ntzel, S. North\n[610] [611] [612]\nUnderfull \\hbox (badness 10000) in paragraph at lines 55704--55709\n[]\\T1/ptm/m/n/10 Computing Tutte Poly-no-mi-als. Gary Hag-gard, David J. Pearce\n and Gor-don Royle.\n\nUnderfull \\hbox (badness 10000) in paragraph at lines 55704--55709\n\\T1/ptm/m/n/10 In ACM Trans-ac-tions on Math-e-mat-i-cal Soft-ware, Vol-ume 37(\n3), ar-ti-cle 24, 2010. Preprint:\n[613] [614] [615] (./graphs.ind [616] [617] [618] [619] [620] [621] [622]\n[623] [624] [625] [626] [627] [628] [629] [630] [631] [632] [633] [634]\n[635]) [636] (./graphs.aux) )\n(see the transcript file for additional information){/usr/local/texlive/2008/te\nxmf-dist/fonts/enc/dvips/base/8r.enc}</usr/local/texlive/2008/texmf-dist/fonts/\ntype1/bluesky/cm/cmex10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/blu\nesky/cm/cmmi10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/c\nmmi5.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmmi7.pfb><\n/usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmr10.pfb></usr/local\n/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmr5.pfb></usr/local/texlive/20\n08/texmf-dist/fonts/type1/bluesky/cm/cmr7.pfb></usr/local/texlive/2008/texmf-di\nst/fonts/type1/bluesky/cm/cmsy10.pfb></usr/local/texlive/2008/texmf-dist/fonts/\ntype1/bluesky/cm/cmsy5.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/blue\nsky/cm/cmsy7.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/ams/ms\nam10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/ams/msbm10.pfb\n></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/courier/ucrb8a.pfb></usr/l\nocal/texlive/2008/texmf-dist/fonts/type1/urw/courier/ucrr8a.pfb></usr/local/tex\nlive/2008/texmf-dist/fonts/type1/urw/courier/ucrro8a.pfb></usr/local/texlive/20\n08/texmf-dist/fonts/type1/urw/helvetic/uhvb8a.pfb></usr/local/texlive/2008/texm\nf-dist/fonts/type1/urw/helvetic/uhvbo8a.pfb></usr/local/texlive/2008/texmf-dist\n/fonts/type1/urw/helvetic/uhvr8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/\ntype1/urw/times/utmb8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/\ntimes/utmr8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/times/utmr\ni8a.pfb>\nOutput written on graphs.pdf (640 pages, 2603829 bytes).\nTranscript written on graphs.log.\nmake: *** [doc-pdf] Error 1\n```\nBut as far as I know this branch does not touch graphs.",
    "created_at": "2014-05-19T20:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172920",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:89'></a>Replying to [comment:88 vbraun]:
> pdf docs don't build


Is this related to this patch? I get the following error:

```
Overfull \hbox (27.79457pt too wide) in paragraph at lines 54386--54386
\T1/ptm/m/it/10 bose=False\T1/pcr/m/n/10 ) 
[597] [598] [599] [600] [601] [602] [603] [604] [605] [606]
Chapter 6.
[607] [608]
Underfull \hbox (badness 6380) in paragraph at lines 55235--55239
[]\T1/ptm/m/n/10 Aric Hag-berg, Dan Schult and Pieter Swart. Net-workX doc-u-me
n-ta-tion. [On-line] Avail-able:

Underfull \hbox (badness 10000) in paragraph at lines 55291--55295
[]\T1/ptm/m/n/10 Stephen P Bor-gatti. (1995). Cen-tral-ity and AIDS. [On-line] 
Avail-able:

Underfull \hbox (badness 7558) in paragraph at lines 55296--55301
[]\T1/ptm/m/n/10 Coen Bron and Joep Ker-bosch. (1973). Al-go-rithm 457: Find-in
g All Cliques of an

Underfull \hbox (badness 5667) in paragraph at lines 55296--55301
\T1/ptm/m/n/10 Undi-rected Graph. Com-mun. ACM. v 16. n 9. pages 575-577. ACM P
ress. [On-line] Avail-able:
[609]
Underfull \hbox (badness 10000) in paragraph at lines 55416--55420
[]\T1/ptm/m/n/10 Fifth An-nual Graph Draw-ing Con-test P. Eaded, J. Marks, P.Mu
tzel, S. North
[610] [611] [612]
Underfull \hbox (badness 10000) in paragraph at lines 55704--55709
[]\T1/ptm/m/n/10 Computing Tutte Poly-no-mi-als. Gary Hag-gard, David J. Pearce
 and Gor-don Royle.

Underfull \hbox (badness 10000) in paragraph at lines 55704--55709
\T1/ptm/m/n/10 In ACM Trans-ac-tions on Math-e-mat-i-cal Soft-ware, Vol-ume 37(
3), ar-ti-cle 24, 2010. Preprint:
[613] [614] [615] (./graphs.ind [616] [617] [618] [619] [620] [621] [622]
[623] [624] [625] [626] [627] [628] [629] [630] [631] [632] [633] [634]
[635]) [636] (./graphs.aux) )
(see the transcript file for additional information){/usr/local/texlive/2008/te
xmf-dist/fonts/enc/dvips/base/8r.enc}</usr/local/texlive/2008/texmf-dist/fonts/
type1/bluesky/cm/cmex10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/blu
esky/cm/cmmi10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/c
mmi5.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmmi7.pfb><
/usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmr10.pfb></usr/local
/texlive/2008/texmf-dist/fonts/type1/bluesky/cm/cmr5.pfb></usr/local/texlive/20
08/texmf-dist/fonts/type1/bluesky/cm/cmr7.pfb></usr/local/texlive/2008/texmf-di
st/fonts/type1/bluesky/cm/cmsy10.pfb></usr/local/texlive/2008/texmf-dist/fonts/
type1/bluesky/cm/cmsy5.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/blue
sky/cm/cmsy7.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/ams/ms
am10.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/bluesky/ams/msbm10.pfb
></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/courier/ucrb8a.pfb></usr/l
ocal/texlive/2008/texmf-dist/fonts/type1/urw/courier/ucrr8a.pfb></usr/local/tex
live/2008/texmf-dist/fonts/type1/urw/courier/ucrro8a.pfb></usr/local/texlive/20
08/texmf-dist/fonts/type1/urw/helvetic/uhvb8a.pfb></usr/local/texlive/2008/texm
f-dist/fonts/type1/urw/helvetic/uhvbo8a.pfb></usr/local/texlive/2008/texmf-dist
/fonts/type1/urw/helvetic/uhvr8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/
type1/urw/times/utmb8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/
times/utmr8a.pfb></usr/local/texlive/2008/texmf-dist/fonts/type1/urw/times/utmr
i8a.pfb>
Output written on graphs.pdf (640 pages, 2603829 bytes).
Transcript written on graphs.log.
make: *** [doc-pdf] Error 1
```
But as far as I know this branch does not touch graphs.



---

archive/issue_comments_172921.json:
```json
{
    "body": "<a id='comment:90'></a>The actual error is higher up. The end of the log just shows that the graphs part did build successfully.",
    "created_at": "2014-05-19T20:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172921",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:90'></a>The actual error is higher up. The end of the log just shows that the graphs part did build successfully.



---

archive/issue_comments_172922.json:
```json
{
    "body": "<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-19T20:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172923.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-19T21:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172923",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172924.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-20T00:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172924",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_039730.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-21T15:33:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14102#event-39730"
}
```



---

archive/issue_comments_172925.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-21T15:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14102#issuecomment-172925",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
