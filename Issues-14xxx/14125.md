# Issue 14125: module_morphism is too liberal on inverting

archive/issues_013921.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/williamstein"
    ],
    "body": "Not saying this is an actual issue, since it seems to depend on bad user input.\n\nSince I don't know how to reliably do function declarations in the console, I'm making a py file and then importing it:\n\nPY file:\n\n```\ndef diag_func(p):\n      if len(p)==0: return 1\n      else: return p[0]\n```\n\nConsole:\n\n```\nsage: attach ../diagbug.py #file quoted above\nsage: X = CombinatorialFreeModule(ZZ, Partitions(), prefix='x'); x = X.basis();\nsage: Y = CombinatorialFreeModule(ZZ, Partitions(), prefix='y'); y = Y.basis()\nsage: xty = X.module_morphism(diagonal=diag_func, codomain=Y)\nsage: ytx = ~xty                \nsage: ytx(y[Partition([3,2,1])])\n1/3*x[[3, 2, 1]]\nsage: ytx(y[Partition([3,2,1])]).parent()\nFree module generated by Partitions over Integer Ring\n```\n\nSince I'm working over ZZ, I'd have expected the \"ytx(y[Partition([3,2,1])])\" to throw an error, but definitely I'd have expected the parent to not be defined over ZZ.\n\nCC:  @sagetrac-sage-combinat\n\nComponent: **linear algebra**\n\nKeywords: **module morphism, inverse**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14125_\n\n",
    "created_at": "2013-02-14T22:40:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "module_morphism is too liberal on inverting",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/14125",
    "user": "https://github.com/darijgr"
}
```
Not saying this is an actual issue, since it seems to depend on bad user input.

Since I don't know how to reliably do function declarations in the console, I'm making a py file and then importing it:

PY file:

```
def diag_func(p):
      if len(p)==0: return 1
      else: return p[0]
```

Console:

```
sage: attach ../diagbug.py #file quoted above
sage: X = CombinatorialFreeModule(ZZ, Partitions(), prefix='x'); x = X.basis();
sage: Y = CombinatorialFreeModule(ZZ, Partitions(), prefix='y'); y = Y.basis()
sage: xty = X.module_morphism(diagonal=diag_func, codomain=Y)
sage: ytx = ~xty                
sage: ytx(y[Partition([3,2,1])])
1/3*x[[3, 2, 1]]
sage: ytx(y[Partition([3,2,1])]).parent()
Free module generated by Partitions over Integer Ring
```

Since I'm working over ZZ, I'd have expected the "ytx(y[Partition([3,2,1])])" to throw an error, but definitely I'd have expected the parent to not be defined over ZZ.

CC:  @sagetrac-sage-combinat

Component: **linear algebra**

Keywords: **module morphism, inverse**

_Issue created by migration from https://trac.sagemath.org/ticket/14125_





---

archive/issue_events_196875.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196875"
}
```



---

archive/issue_events_196876.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196876"
}
```



---

archive/issue_events_196877.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196877"
}
```



---

archive/issue_events_196878.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196878"
}
```



---

archive/issue_events_196879.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "subject": "https://github.com/darijgr",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196879"
}
```



---

archive/issue_events_196880.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2013-02-14T22:40:15Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "subject": "https://github.com/darijgr",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196880"
}
```



---

archive/issue_events_196881.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196881"
}
```



---

archive/issue_events_196882.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196882"
}
```



---

archive/issue_events_196883.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196883"
}
```



---

archive/issue_events_196884.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196884"
}
```



---

archive/issue_events_196885.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196885"
}
```



---

archive/issue_events_196886.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196886"
}
```



---

archive/issue_events_196887.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196887"
}
```



---

archive/issue_events_196888.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196888"
}
```



---

archive/issue_events_196889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14125",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14125#event-196889"
}
```
