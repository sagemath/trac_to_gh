# Issue 14125: module_morphism is too liberal on inverting

archive/issues_013921.json:
```json
{
    "body": "Not saying this is an actual issue, since it seems to depend on bad user input.\n\nSince I don't know how to reliably do function declarations in the console, I'm making a py file and then importing it:\n\nPY file:\n\n```\ndef diag_func(p):\n      if len(p)==0: return 1\n      else: return p[0]\n```\n\nConsole:\n\n```\nsage: attach ../diagbug.py #file quoted above\nsage: X = CombinatorialFreeModule(ZZ, Partitions(), prefix='x'); x = X.basis();\nsage: Y = CombinatorialFreeModule(ZZ, Partitions(), prefix='y'); y = Y.basis()\nsage: xty = X.module_morphism(diagonal=diag_func, codomain=Y)\nsage: ytx = ~xty                \nsage: ytx(y[Partition([3,2,1])])\n1/3*x[[3, 2, 1]]\nsage: ytx(y[Partition([3,2,1])]).parent()\nFree module generated by Partitions over Integer Ring\n```\n\nSince I'm working over ZZ, I'd have expected the \"ytx(y[Partition([3,2,1])])\" to throw an error, but definitely I'd have expected the parent to not be defined over ZZ.\n\n**Assignee:** jason, was\n\n**CC:**  sage-combinat\n\n**Keywords:** module morphism, inverse\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/14125\n\n",
    "created_at": "2013-02-14T22:40:15Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "module_morphism is too liberal on inverting",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14125",
    "user": "https://github.com/darijgr"
}
```
Not saying this is an actual issue, since it seems to depend on bad user input.

Since I don't know how to reliably do function declarations in the console, I'm making a py file and then importing it:

PY file:

```
def diag_func(p):
      if len(p)==0: return 1
      else: return p[0]
```

Console:

```
sage: attach ../diagbug.py #file quoted above
sage: X = CombinatorialFreeModule(ZZ, Partitions(), prefix='x'); x = X.basis();
sage: Y = CombinatorialFreeModule(ZZ, Partitions(), prefix='y'); y = Y.basis()
sage: xty = X.module_morphism(diagonal=diag_func, codomain=Y)
sage: ytx = ~xty                
sage: ytx(y[Partition([3,2,1])])
1/3*x[[3, 2, 1]]
sage: ytx(y[Partition([3,2,1])]).parent()
Free module generated by Partitions over Integer Ring
```

Since I'm working over ZZ, I'd have expected the "ytx(y[Partition([3,2,1])])" to throw an error, but definitely I'd have expected the parent to not be defined over ZZ.

**Assignee:** jason, was

**CC:**  sage-combinat

**Keywords:** module morphism, inverse

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/14125





---

archive/issue_events_046035.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46035"
}
```



---

archive/issue_events_046036.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46036"
}
```



---

archive/issue_events_046037.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46037"
}
```



---

archive/issue_events_046038.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46038"
}
```



---

archive/issue_events_046039.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46039"
}
```



---

archive/issue_events_046040.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46040"
}
```



---

archive/issue_events_046041.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14125",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14125#event-46041"
}
```
