# Issue 14953: Graph drawing in javascript using d3.js

archive/issues_014716.json:
```json
{
    "body": "As the title says.\n\nThis drawing method will be as good as the examples that are used to tune its parameters `:-)`\n\nNathann\n\n**CC:**  bonfroy\n\n**Branch:** [76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)\n\n**Reviewer:** Dima Pasechnik, Volker Braun\n\n**Author:** Nathann Cohen, Brice Onfroy\n\nIssue created by migration from https://trac.sagemath.org/ticket/14953\n\n",
    "closed_at": "2014-06-02T15:56:22Z",
    "created_at": "2013-07-22T21:29:40Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Graph drawing in javascript using d3.js",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14953",
    "user": "https://github.com/nathanncohen"
}
```
As the title says.

This drawing method will be as good as the examples that are used to tune its parameters `:-)`

Nathann

**CC:**  bonfroy

**Branch:** [76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)

**Reviewer:** Dima Pasechnik, Volker Braun

**Author:** Nathann Cohen, Brice Onfroy

Issue created by migration from https://trac.sagemath.org/ticket/14953





---

archive/issue_events_133649.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-22T21:34:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133649"
}
```



---

archive/attachments_020079.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14953.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14953/trac_14953.patch",
    "created_at": "2013-08-13T16:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_187221.json:
```json
{
    "body": "",
    "created_at": "2013-08-13T16:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187221",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/attachments_020080.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14953_review1.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14953/trac_14953_review1.patch",
    "created_at": "2013-08-29T12:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/fchapoton"
}
```



---

archive/issue_comments_187222.json:
```json
{
    "body": "<a id='comment:3'></a>\nvery nice tool. Here is a purely cosmetic review patch\n\nI still have to finish the review, but later",
    "created_at": "2013-08-29T12:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187222",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
very nice tool. Here is a purely cosmetic review patch

I still have to finish the review, but later



---

archive/issue_comments_187223.json:
```json
{
    "body": "<a id='comment:4'></a>\nWell if you have some time to review that ?.... `:-P`",
    "created_at": "2013-10-30T13:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187223",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Well if you have some time to review that ?.... `:-P`



---

archive/issue_comments_187224.json:
```json
{
    "body": "**Branch:** [u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)",
    "created_at": "2013-11-05T10:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187224",
    "user": "https://github.com/nathanncohen"
}
```

**Branch:** [u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)



---

archive/issue_comments_187225.json:
```json
{
    "body": "<a id='comment:5'></a>\nNow a GIT patch.",
    "created_at": "2013-11-05T10:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187225",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Now a GIT patch.



---

archive/issue_comments_187226.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:84b44ab]</td><td><code>Git directory layout</code></td></tr><tr><td>[changeset:465f9db]</td><td><code>trac #14953 cleanup, pep8 and details</code></td></tr><tr><td>[changeset:89bbece]</td><td><code>Graph drawing in javascript using d3.js</code></td></tr></table>\n",
    "created_at": "2013-11-05T10:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:84b44ab]</td><td><code>Git directory layout</code></td></tr><tr><td>[changeset:465f9db]</td><td><code>trac #14953 cleanup, pep8 and details</code></td></tr><tr><td>[changeset:89bbece]</td><td><code>Graph drawing in javascript using d3.js</code></td></tr></table>




---

archive/issue_comments_187227.json:
```json
{
    "body": "**Commit:** [84b44ab8a2de5f53d203a34d405c4740ce137538](https://github.com/sagemath/sagetrac-mirror/commit/84b44ab8a2de5f53d203a34d405c4740ce137538)",
    "created_at": "2013-11-05T10:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [84b44ab8a2de5f53d203a34d405c4740ce137538](https://github.com/sagemath/sagetrac-mirror/commit/84b44ab8a2de5f53d203a34d405c4740ce137538)



---

archive/issue_events_133650.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133650"
}
```



---

archive/issue_events_133651.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133651"
}
```



---

archive/issue_events_133652.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133652"
}
```



---

archive/issue_events_133653.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133653"
}
```



---

archive/issue_comments_187228.json:
```json
{
    "body": "**Work_Issues:** rebase",
    "created_at": "2014-05-09T10:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187228",
    "user": "https://github.com/rwst"
}
```

**Work_Issues:** rebase



---

archive/issue_events_133654.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T10:07:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133654"
}
```



---

archive/issue_events_133655.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T10:07:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133655"
}
```



---

archive/issue_comments_187229.json:
```json
{
    "body": "**Changing commit** from \"[84b44ab8a2de5f53d203a34d405c4740ce137538](https://github.com/sagemath/sagetrac-mirror/commit/84b44ab8a2de5f53d203a34d405c4740ce137538)\" to \"[44265a5175644283faea92a98cdc869b274ff984](https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984)\".",
    "created_at": "2014-05-12T09:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[84b44ab8a2de5f53d203a34d405c4740ce137538](https://github.com/sagemath/sagetrac-mirror/commit/84b44ab8a2de5f53d203a34d405c4740ce137538)" to "[44265a5175644283faea92a98cdc869b274ff984](https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984)".



---

archive/issue_comments_187230.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984\">44265a5</a></td><td><code>trac #14953: Merged with 6.3.beta0</code></td></tr></table>\n",
    "created_at": "2014-05-12T09:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984">44265a5</a></td><td><code>trac #14953: Merged with 6.3.beta0</code></td></tr></table>




---

archive/issue_events_133656.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-12T09:04:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133656"
}
```



---

archive/issue_events_133657.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-12T09:04:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133657"
}
```



---

archive/issue_comments_187231.json:
```json
{
    "body": "<a id='comment:11'></a>\nFixed. If you feel like giving it a review ... It is 10 months old already `:-P`\n\nNathann",
    "created_at": "2014-05-12T09:04:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187231",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
Fixed. If you feel like giving it a review ... It is 10 months old already `:-P`

Nathann



---

archive/issue_comments_187232.json:
```json
{
    "body": "**Changing work_issues** from \"rebase\" to \"\".",
    "created_at": "2014-05-12T09:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187232",
    "user": "https://github.com/nathanncohen"
}
```

**Changing work_issues** from "rebase" to "".



---

archive/issue_comments_187233.json:
```json
{
    "body": "<a id='comment:13'></a>\nOne must be online to use this stuff, right?",
    "created_at": "2014-05-24T21:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187233",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
One must be online to use this stuff, right?



---

archive/issue_comments_187234.json:
```json
{
    "body": "<a id='comment:14'></a>\nRight now yes, but there is no \"technical\" reason. Right now, it loads the javascript files d3.js from some URL, all this is not contained in the patch. We can later change that or write a spkg containing those files, and there will be no need of that anymore.\n\nNathann",
    "created_at": "2014-05-25T06:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187234",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Right now yes, but there is no "technical" reason. Right now, it loads the javascript files d3.js from some URL, all this is not contained in the patch. We can later change that or write a spkg containing those files, and there will be no need of that anymore.

Nathann



---

archive/issue_comments_187235.json:
```json
{
    "body": "<a id='comment:15'></a>\nlooks good. I'll check that the docs build, and then it should be good to go.",
    "created_at": "2014-05-27T08:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187235",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
looks good. I'll check that the docs build, and then it should be good to go.



---

archive/issue_comments_187236.json:
```json
{
    "body": "**Changing branch** from \"[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)\" to \"[u/dimpase/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/14953)\".",
    "created_at": "2014-05-27T08:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187236",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)" to "[u/dimpase/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/14953)".



---

archive/issue_events_133658.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-05-27T23:23:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133658"
}
```



---

archive/issue_events_133659.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-05-27T23:23:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133659"
}
```



---

archive/issue_comments_187237.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2014-05-27T23:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187237",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_187238.json:
```json
{
    "body": "<a id='comment:19'></a>\nWow ! Thank you very much ! `:-)`\n\nIf you do not feel like sleeping there is a combinatorial_map war on Sage-devel. It got so rewarding I even closed #16403 just stop talking.\n\nNathann",
    "created_at": "2014-05-27T23:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187238",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
Wow ! Thank you very much ! `:-)`

If you do not feel like sleeping there is a combinatorial_map war on Sage-devel. It got so rewarding I even closed #16403 just stop talking.

Nathann



---

archive/issue_comments_187239.json:
```json
{
    "body": "<a id='comment:20'></a>\nPops up a browser window when running \"make ptestlong\"... please find a better way of automated testing ;-)",
    "created_at": "2014-05-29T15:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187239",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
Pops up a browser window when running "make ptestlong"... please find a better way of automated testing ;-)



---

archive/issue_events_133660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T15:27:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133660"
}
```



---

archive/issue_events_133661.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T15:27:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133661"
}
```



---

archive/issue_comments_187240.json:
```json
{
    "body": "<a id='comment:21'></a>\nAlso, anything that requires internet must be marked as `# optional - internet`.",
    "created_at": "2014-05-29T15:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187240",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Also, anything that requires internet must be marked as `# optional - internet`.



---

archive/issue_comments_187241.json:
```json
{
    "body": "<a id='comment:22'></a>\nHmmmmm... Is there a way to test anything that this patch does ?... `:-/`\n\nNathann",
    "created_at": "2014-05-29T16:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187241",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
Hmmmmm... Is there a way to test anything that this patch does ?... `:-/`

Nathann



---

archive/issue_comments_187242.json:
```json
{
    "body": "<a id='comment:23'></a>\nYou can split the html generation from the show() function and doctest it as usual. Show can just check `DOCTEST_MODE` to avoid starting the browser.\n\nAlso, don't load the html template from `SAGE_SRC`. Thats the source code, if you need files at runtime then they must be installed under `SAGE_LOCAL`. You should probably put it somewhere under `src/ext` and then use `SAGE_EXTCODE` to refer to it.",
    "created_at": "2014-05-29T17:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187242",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
You can split the html generation from the show() function and doctest it as usual. Show can just check `DOCTEST_MODE` to avoid starting the browser.

Also, don't load the html template from `SAGE_SRC`. Thats the source code, if you need files at runtime then they must be installed under `SAGE_LOCAL`. You should probably put it somewhere under `src/ext` and then use `SAGE_EXTCODE` to refer to it.



---

archive/issue_comments_187243.json:
```json
{
    "body": "**Changing commit** from \"[44265a5175644283faea92a98cdc869b274ff984](https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984)\" to \"[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)\".",
    "created_at": "2014-06-02T10:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187243",
    "user": "https://github.com/nathanncohen"
}
```

**Changing commit** from "[44265a5175644283faea92a98cdc869b274ff984](https://github.com/sagemath/sagetrac-mirror/commit/44265a5175644283faea92a98cdc869b274ff984)" to "[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)".



---

archive/issue_comments_187244.json:
```json
{
    "body": "<a id='comment:24'></a>\nHere is a commit to implement all that. The down side is that you have to run \"make\" for the .html file to be copied in SAGE_EXTCODE ..... That's what Volker wanted.\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cbcc3605032c8fb50f955ef5881758cd42fca81\">9cbcc36</a></td><td><code>trac #14953: Merged with 6.3.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940\">76acf85</a></td><td><code>trac #14953: Moving the .html to EXT_CODE and using DOCTEST_MODE</code></td></tr></table>\n",
    "created_at": "2014-06-02T10:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187244",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
Here is a commit to implement all that. The down side is that you have to run "make" for the .html file to be copied in SAGE_EXTCODE ..... That's what Volker wanted.

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cbcc3605032c8fb50f955ef5881758cd42fca81">9cbcc36</a></td><td><code>trac #14953: Merged with 6.3.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940">76acf85</a></td><td><code>trac #14953: Moving the .html to EXT_CODE and using DOCTEST_MODE</code></td></tr></table>




---

archive/issue_events_133662.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-02T10:35:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133662"
}
```



---

archive/issue_events_133663.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-02T10:35:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133663"
}
```



---

archive/issue_comments_187245.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/14953)\" to \"[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)\".",
    "created_at": "2014-06-02T10:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187245",
    "user": "https://github.com/nathanncohen"
}
```

**Changing branch** from "[u/dimpase/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/14953)" to "[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)".



---

archive/issue_comments_187246.json:
```json
{
    "body": "<a id='comment:25'></a>\nlgtm",
    "created_at": "2014-06-02T12:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187246",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
lgtm



---

archive/issue_events_133664.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T12:58:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133664"
}
```



---

archive/issue_events_133665.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T12:58:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133665"
}
```



---

archive/issue_comments_187247.json:
```json
{
    "body": "**Changing reviewer** from \"Dima Pasechnik\" to \"Dima Pasechnik, Volker Braun\".",
    "created_at": "2014-06-02T12:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187247",
    "user": "https://github.com/vbraun"
}
```

**Changing reviewer** from "Dima Pasechnik" to "Dima Pasechnik, Volker Braun".



---

archive/issue_comments_187248.json:
```json
{
    "body": "**Changing branch** from \"[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)\" to \"[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)\".",
    "created_at": "2014-06-02T15:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187248",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/ncohen/14953](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/14953)" to "[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)".



---

archive/issue_events_133666.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T15:56:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133666"
}
```



---

archive/issue_events_133667.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T15:56:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14953#event-133667"
}
```



---

archive/issue_comments_187249.json:
```json
{
    "body": "**Changing commit** from \"[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)\" to \"\".",
    "created_at": "2014-06-03T16:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187249",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Changing commit** from "[76acf85eecadfaf3c64637b6f564ae51b6b5b940](https://github.com/sagemath/sagetrac-mirror/commit/76acf85eecadfaf3c64637b6f564ae51b6b5b940)" to "".



---

archive/issue_comments_187250.json:
```json
{
    "body": "<a id='comment:27'></a>\nHi, i do not like the need to fetch a file from the internet to let this work. My question for a future ticket is the following: if i understand correctly, `src/ext` is a kind of place where we put external source code that is not big enough to deserve a package, am i right ? In this case, is this the right place to copy the file d3.v3.min.js for offline use ?",
    "created_at": "2014-06-03T16:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187250",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:27'></a>
Hi, i do not like the need to fetch a file from the internet to let this work. My question for a future ticket is the following: if i understand correctly, `src/ext` is a kind of place where we put external source code that is not big enough to deserve a package, am i right ? In this case, is this the right place to copy the file d3.v3.min.js for offline use ?



---

archive/issue_comments_187251.json:
```json
{
    "body": "<a id='comment:28'></a>\nYoooooooooooooo !\n\n> Hi, i do not like the need to fetch a file from the internet to let this work. My question for a future ticket is the following: if i understand correctly, `src/ext` is a kind of place where we put external source code that is not big enough to deserve a package, am i right ? In this case, is this the right place to copy the file d3.v3.min.js for offline use ?\n\n\nHMmmmmmm.... I am interested by Volker's answer, but I would say that stuff in src/ should be reviewed... Sooooooo no third-party code should be there. Besides, it is very easy to write spkg now with git. \n\nThis being said, I do not know which files we are allowed to read at runtime...\n\nNathann",
    "created_at": "2014-06-03T16:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187251",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
Yoooooooooooooo !

> Hi, i do not like the need to fetch a file from the internet to let this work. My question for a future ticket is the following: if i understand correctly, `src/ext` is a kind of place where we put external source code that is not big enough to deserve a package, am i right ? In this case, is this the right place to copy the file d3.v3.min.js for offline use ?


HMmmmmmm.... I am interested by Volker's answer, but I would say that stuff in src/ should be reviewed... Sooooooo no third-party code should be there. Besides, it is very easy to write spkg now with git. 

This being said, I do not know which files we are allowed to read at runtime...

Nathann



---

archive/issue_comments_187252.json:
```json
{
    "body": "<a id='comment:29'></a>\nNo, `SAGE_EXT` is where we install non-Python Sage source code. Its not a dump for third-party stuff that you don't want to package.",
    "created_at": "2014-06-03T16:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187252",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>
No, `SAGE_EXT` is where we install non-Python Sage source code. Its not a dump for third-party stuff that you don't want to package.



---

archive/issue_comments_187253.json:
```json
{
    "body": "<a id='comment:30'></a>\nVolker : if we package this code how can we access it at runtime ? What would the spkg-install do, and where would it copy the .js file ?\n\nNathann",
    "created_at": "2014-06-03T16:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187253",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>
Volker : if we package this code how can we access it at runtime ? What would the spkg-install do, and where would it copy the .js file ?

Nathann



---

archive/issue_comments_187254.json:
```json
{
    "body": "<a id='comment:31'></a>\nOK, so we have to make a spkg that just copy the `d3.v3.min.js` file into `./local/share/d3.js/` directory, then we can use `from sage.misc.misc import SAGE_SHARE` to get it. It that the correct procedure ? Or do we need to recompile the .js file from sources ?",
    "created_at": "2014-06-03T16:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187254",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:31'></a>
OK, so we have to make a spkg that just copy the `d3.v3.min.js` file into `./local/share/d3.js/` directory, then we can use `from sage.misc.misc import SAGE_SHARE` to get it. It that the correct procedure ? Or do we need to recompile the .js file from sources ?



---

archive/issue_comments_187255.json:
```json
{
    "body": "<a id='comment:32'></a>\nthere could be copyright issues that would preclude one from distributing it with Sage, so it will need to stay an optional Sage package, whether you like it or not. \n\nIANAL. Here is the licence:  https://github.com/mbostock/d3/blob/master/LICENSE",
    "created_at": "2014-06-03T16:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187255",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
there could be copyright issues that would preclude one from distributing it with Sage, so it will need to stay an optional Sage package, whether you like it or not. 

IANAL. Here is the licence:  https://github.com/mbostock/d3/blob/master/LICENSE



---

archive/issue_comments_187256.json:
```json
{
    "body": "<a id='comment:33'></a>\nIANAL either, this is a [Modified BSD License](http://opensource.org/licenses/BSD-3-Clause), which is GPL-compatible according to the [FSF](https://www.gnu.org/licenses/license-list.html#ModifiedBSD) (see also [wikipedia](https://en.wikipedia.org/wiki/BSD_licenses#3-clause)). So it is OK to have it as a standard spkg, right ?",
    "created_at": "2014-06-03T18:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187256",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:33'></a>
IANAL either, this is a [Modified BSD License](http://opensource.org/licenses/BSD-3-Clause), which is GPL-compatible according to the [FSF](https://www.gnu.org/licenses/license-list.html#ModifiedBSD) (see also [wikipedia](https://en.wikipedia.org/wiki/BSD_licenses#3-clause)). So it is OK to have it as a standard spkg, right ?



---

archive/issue_comments_187257.json:
```json
{
    "body": "<a id='comment:34'></a>\nThis is now #16434 so that i will learn how to package.",
    "created_at": "2014-06-03T19:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187257",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:34'></a>
This is now #16434 so that i will learn how to package.



---

archive/issue_comments_187258.json:
```json
{
    "body": "<a id='comment:35'></a>\nSee also #16438 which links both features.",
    "created_at": "2014-06-04T15:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14953#issuecomment-187258",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:35'></a>
See also #16438 which links both features.
