# Issue 14881: Some symmetric group algebra modifications

archive/issues_014677.json:
```json
{
    "body": "**UPDATED and ready for review.** The patch does the following:\n\n1) Allows `k = 1` in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating `k = 1` as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)\n\n2) The `algebra_generators()` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.\n\n3) The `cpi` method should now be a lot faster (checked on S<sub>6</sub> and `[3,2,1]`, where the speedup factor was more than 2).\n\n4) New methods `a` and `b` in `symmetric_group_algebra.py` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.\n\n5) A fix in `tableau.py` ensures that `Tableau([]).row_stabilizer()` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.\n\nIssues I'd like the reviewer to look at closely:\n\nA) I removed a \"#################### SEGFAULTS ################\" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.\n\nB) I don't know what the `star` keyword in my methods is for -- I copied it over from the `e` method (which should be similar to `a` and `b` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.\n\nC) There are two TODOs which might deserve tickets of their own.\n\n```\n 627    # This all should be over ZZ, not over QQ, but symmetric group \n 628    # algebras don't seem to preserve coercion (the one over ZZ \n 629    # doesn't coerce into the one over QQ even for the same n), \n 630    # and the QQ version of this method is more important, so let \n 631    # me stay with QQ. \n 632    # TODO: Fix this. \n```\n\nand\n\n```\n 637    # Ugly hack for the case of an empty tableau, due to the \n 638    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n 639    # being [1] rather than [] (which seems to have its origins in \n 640    # permutation group code). \n```\n\nIf you agree, I'll open these tickets.\n\nApply:\n\n* [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n* [attachment:trac_14881-review-ts.patch]\n\n====================================================================\n\nThe following rant is being kept for reference; it now has a ticket of its own (#14885) and a sage-devel discussion ( https://groups.google.com/forum/#!topic/sage-devel/tAAb42Edh9o ). The present ticket changes nothing about it.\n\nWriting this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n\nWhen I grep for `PermutationOptions` and `permutation_options`, I only get hits from `permutation.py` and `symmetric_group_algebra.py`, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @tscrim @mwhansen\n\n**Keywords:** permutations, symmetric group algebra, combinat,\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Darij Grinberg\n\n**Merged:** sage-5.12.beta5\n\n**Dependencies:** #14772, #14101\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14881\n\n",
    "closed_at": "2013-09-02T10:19:52Z",
    "created_at": "2013-07-12T12:58:53Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Some symmetric group algebra modifications",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14881",
    "user": "https://github.com/darijgr"
}
```
**UPDATED and ready for review.** The patch does the following:

1) Allows `k = 1` in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating `k = 1` as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)

2) The `algebra_generators()` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.

3) The `cpi` method should now be a lot faster (checked on S<sub>6</sub> and `[3,2,1]`, where the speedup factor was more than 2).

4) New methods `a` and `b` in `symmetric_group_algebra.py` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.

5) A fix in `tableau.py` ensures that `Tableau([]).row_stabilizer()` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.

Issues I'd like the reviewer to look at closely:

A) I removed a "#################### SEGFAULTS ################" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.

B) I don't know what the `star` keyword in my methods is for -- I copied it over from the `e` method (which should be similar to `a` and `b` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.

C) There are two TODOs which might deserve tickets of their own.

```
 627    # This all should be over ZZ, not over QQ, but symmetric group 
 628    # algebras don't seem to preserve coercion (the one over ZZ 
 629    # doesn't coerce into the one over QQ even for the same n), 
 630    # and the QQ version of this method is more important, so let 
 631    # me stay with QQ. 
 632    # TODO: Fix this. 
```

and

```
 637    # Ugly hack for the case of an empty tableau, due to the 
 638    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
 639    # being [1] rather than [] (which seems to have its origins in 
 640    # permutation group code). 
```

If you agree, I'll open these tickets.

Apply:

* [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
* [attachment:trac_14881-review-ts.patch]

====================================================================

The following rant is being kept for reference; it now has a ticket of its own (#14885) and a sage-devel discussion ( https://groups.google.com/forum/#!topic/sage-devel/tAAb42Edh9o ). The present ticket changes nothing about it.

Writing this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.

When I grep for `PermutationOptions` and `permutation_options`, I only get hits from `permutation.py` and `symmetric_group_algebra.py`, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...

**Assignee:** sage-combinat

**CC:**  sage-combinat @tscrim @mwhansen

**Keywords:** permutations, symmetric group algebra, combinat,

**Reviewer:** Travis Scrimshaw

**Author:** Darij Grinberg

**Merged:** sage-5.12.beta5

**Dependencies:** #14772, #14101

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14881





---

archive/issue_comments_239073.json:
```json
{
    "body": "Attachment [trac_14881-symmetric_group_algebra-dg.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-symmetric_group_algebra-dg.patch) by @darijgr created at 2013-07-12 12:59:30",
    "created_at": "2013-07-12T12:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239073",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14881-symmetric_group_algebra-dg.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-symmetric_group_algebra-dg.patch) by @darijgr created at 2013-07-12 12:59:30



---

archive/issue_comments_239074.json:
```json
{
    "body": "**Changing assignee** from tbd to sage-combinat.",
    "created_at": "2013-07-12T12:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239074",
    "user": "https://github.com/darijgr"
}
```

**Changing assignee** from tbd to sage-combinat.



---

archive/issue_comments_239075.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,8 +10,8 @@\n \n This one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:\n \n-First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or to ``partition.py`` (given that their input is a partition)?\n+First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?\n \n-Second, I have only now noticed that *Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default*! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n``````\n",
    "created_at": "2013-07-12T13:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239075",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,8 +10,8 @@
 
 This one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:
 
-First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or to ``partition.py`` (given that their input is a partition)?
+First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?
 
-Second, I have only now noticed that *Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default*! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
 When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
``````




---

archive/issue_comments_239076.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,6 +12,6 @@\n \n First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?\n \n-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n``````\n",
    "created_at": "2013-07-12T13:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239076",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,6 +12,6 @@
 
 First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?
 
-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
 When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
``````




---

archive/issue_comments_239077.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,6 +12,6 @@\n \n First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?\n \n-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n``````\n",
    "created_at": "2013-07-12T13:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239077",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,6 +12,6 @@
 
 First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?
 
-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
+Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
 When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
``````




---

archive/issue_comments_239078.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor the multiplication, you can at present set the permutation options (if you look in the `permutation.py`, it's in there, I forget how its accessed). However with #14772, this will be a global option accessible by\n\n```\nPermutations.global_options(mult='r2l') # or 'l2r'\n```\nIf the global options in #14772 (which needs another review) isn't well documented enough, I can add some more documentation on it.\n\nI'd recommend starting to work based on #14772 which should be good to go now, if you want to work on permutations. Its dependency #14519 is basically done too, and I'll ask Nicolas to re-review it if he doesn't do so in a few days.\n\nBest,\n\nTravis",
    "created_at": "2013-07-12T13:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239078",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
For the multiplication, you can at present set the permutation options (if you look in the `permutation.py`, it's in there, I forget how its accessed). However with #14772, this will be a global option accessible by

```
Permutations.global_options(mult='r2l') # or 'l2r'
```
If the global options in #14772 (which needs another review) isn't well documented enough, I can add some more documentation on it.

I'd recommend starting to work based on #14772 which should be good to go now, if you want to work on permutations. Its dependency #14519 is basically done too, and I'll ask Nicolas to re-review it if he doesn't do so in a few days.

Best,

Travis



---

archive/issue_comments_239079.json:
```json
{
    "body": "<a id='comment:5'></a>\nTravis -- thank you for reminding me of #14772 (which happened to fix another problem I reported today). I'll rebase my patch atop yours in a couple minutes.\n\nThanks for cleaning up the global options, but I fear I still don't like them. This isn't the right ticket for me to rant about them; I'll open a new one today.",
    "created_at": "2013-07-12T14:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239079",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>
Travis -- thank you for reminding me of #14772 (which happened to fix another problem I reported today). I'll rebase my patch atop yours in a couple minutes.

Thanks for cleaning up the global options, but I fear I still don't like them. This isn't the right ticket for me to rant about them; I'll open a new one today.



---

archive/issue_comments_239080.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n+\n+* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n``````\n",
    "created_at": "2013-07-12T14:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239080",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
 When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
+
+* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
``````




---

archive/issue_comments_239081.json:
```json
{
    "body": "**Dependencies:** #14772",
    "created_at": "2013-07-12T14:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239081",
    "user": "https://github.com/darijgr"
}
```

**Dependencies:** #14772



---

archive/issue_comments_239082.json:
```json
{
    "body": "**Changing dependencies** from \"#14772\" to \"14772\".",
    "created_at": "2013-07-12T14:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239082",
    "user": "https://github.com/darijgr"
}
```

**Changing dependencies** from "#14772" to "14772".



---

archive/issue_comments_239083.json:
```json
{
    "body": "**Changing dependencies** from \"14772\" to \"#14772, #14101\".",
    "created_at": "2013-07-13T13:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239083",
    "user": "https://github.com/darijgr"
}
```

**Changing dependencies** from "14772" to "#14772, #14101".



---

archive/issue_comments_239084.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-07-13T13:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239084",
    "user": "https://github.com/darijgr"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_239085.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,19 +1,49 @@\n-The patch as it stands does the following:\n+**UPDATED and ready for review.** The patch does the following:\n \n-1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases.\n+1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating k = 1 as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)\n \n 2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.\n \n 3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).\n \n-All changes are in ``symmetric_group_algebra.py``; I have not touched ``permutation.py`` due to Travis' patch.\n+4) New methods ``a`` and ``b`` in ``symmetric_group_algebra.py`` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.\n \n-This one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:\n+5) A fix in ``tableau.py`` ensures that ``Tableau([]).row_stabilizer()`` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.\n \n-First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?\n+Issues I'd like the reviewer to look at closely:\n \n-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n+A) I removed a \"#################### SEGFAULTS ################\" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.\n+\n+B) I don't know what the ``star`` keyword in my methods is for -- I copied it over from the ``e`` method (which should be similar to ``a`` and ``b`` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.\n+\n+C) There are two TODOs which might deserve tickets of their own.\n+\n+```\n+ \t627\t    # This all should be over ZZ, not over QQ, but symmetric group \n+ \t628\t    # algebras don't seem to preserve coercion (the one over ZZ \n+ \t629\t    # doesn't coerce into the one over QQ even for the same n), \n+ \t630\t    # and the QQ version of this method is more important, so let \n+ \t631\t    # me stay with QQ. \n+ \t632\t    # TODO: Fix this. \n+```\n+\n+and\n+\n+```\n+ \t637\t    # Ugly hack for the case of an empty tableau, due to the \n+ \t638\t    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n+ \t639\t    # being [1] rather than [] (which seems to have its origins in \n+ \t640\t    # permutation group code). \n+```\n+\n+If you agree, I'll open these tickets.\n+\n+* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n+\n+====================================================================\n+\n+The following rant is being kept for reference; it now has a ticket of its own (#14885) and a sage-devel discussion ( https://groups.google.com/forum/#!topic/sage-devel/tAAb42Edh9o ). The present ticket changes nothing about it.\n+\n+Writing this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n-\n-* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n``````\n",
    "created_at": "2013-07-13T13:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239085",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,19 +1,49 @@
-The patch as it stands does the following:
+**UPDATED and ready for review.** The patch does the following:
 
-1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases.
+1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating k = 1 as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)
 
 2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.
 
 3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).
 
-All changes are in ``symmetric_group_algebra.py``; I have not touched ``permutation.py`` due to Travis' patch.
+4) New methods ``a`` and ``b`` in ``symmetric_group_algebra.py`` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.
 
-This one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:
+5) A fix in ``tableau.py`` ensures that ``Tableau([]).row_stabilizer()`` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.
 
-First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or into ``partition.py`` (given that their input is a partition)?
+Issues I'd like the reviewer to look at closely:
 
-Second, I have only now noticed that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
+A) I removed a "#################### SEGFAULTS ################" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.
+
+B) I don't know what the ``star`` keyword in my methods is for -- I copied it over from the ``e`` method (which should be similar to ``a`` and ``b`` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.
+
+C) There are two TODOs which might deserve tickets of their own.
+
+```
+ 	627	    # This all should be over ZZ, not over QQ, but symmetric group 
+ 	628	    # algebras don't seem to preserve coercion (the one over ZZ 
+ 	629	    # doesn't coerce into the one over QQ even for the same n), 
+ 	630	    # and the QQ version of this method is more important, so let 
+ 	631	    # me stay with QQ. 
+ 	632	    # TODO: Fix this. 
+```
+
+and
+
+```
+ 	637	    # Ugly hack for the case of an empty tableau, due to the 
+ 	638	    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
+ 	639	    # being [1] rather than [] (which seems to have its origins in 
+ 	640	    # permutation group code). 
+```
+
+If you agree, I'll open these tickets.
+
+* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
+
+====================================================================
+
+The following rant is being kept for reference; it now has a ticket of its own (#14885) and a sage-devel discussion ( https://groups.google.com/forum/#!topic/sage-devel/tAAb42Edh9o ). The present ticket changes nothing about it.
+
+Writing this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
 When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
-
-* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
``````




---

archive/issue_comments_239086.json:
```json
{
    "body": "<a id='comment:10'></a>\nfor the patchbot:\n\napply trac_14881-symmetric_group_algebra_rebased-dg.patch",
    "created_at": "2013-07-13T13:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239086",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:10'></a>
for the patchbot:

apply trac_14881-symmetric_group_algebra_rebased-dg.patch



---

archive/issue_comments_239087.json:
```json
{
    "body": "<a id='comment:11'></a>\nSorry, one final update. I've slightly changed my own fix for Jucys-Murphy in the Hecke algebra, and modernized all errors.",
    "created_at": "2013-07-13T19:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239087",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'></a>
Sorry, one final update. I've slightly changed my own fix for Jucys-Murphy in the Hecke algebra, and modernized all errors.



---

archive/issue_comments_239088.json:
```json
{
    "body": "<a id='comment:12'></a>\nHey Darij,\n\nI'm starting to take a look at this patch. A question, are the names `a` and `b` standard, in particular, do you have at least 2 references (to show that it is a standard notation)? If they aren't standard, could you rename them? The function names otherwise are not very descriptive. Also could you also remove the commented out lines 292-295?\n\nThanks,\n\nTravis\n\nPS - Sorry for falling behind on this.",
    "created_at": "2013-08-03T11:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239088",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Hey Darij,

I'm starting to take a look at this patch. A question, are the names `a` and `b` standard, in particular, do you have at least 2 references (to show that it is a standard notation)? If they aren't standard, could you rename them? The function names otherwise are not very descriptive. Also could you also remove the commented out lines 292-295?

Thanks,

Travis

PS - Sorry for falling behind on this.



---

archive/issue_comments_239089.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,20 +1,20 @@\n **UPDATED and ready for review.** The patch does the following:\n \n-1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating k = 1 as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)\n+1) Allows `k = 1` in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating `k = 1` as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)\n \n-2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.\n+2) The `algebra_generators()` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.\n \n-3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).\n+3) The `cpi` method should now be a lot faster (checked on S<sub>6</sub> and `[3,2,1]`, where the speedup factor was more than 2).\n \n-4) New methods ``a`` and ``b`` in ``symmetric_group_algebra.py`` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.\n+4) New methods `a` and `b` in `symmetric_group_algebra.py` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.\n \n-5) A fix in ``tableau.py`` ensures that ``Tableau([]).row_stabilizer()`` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.\n+5) A fix in `tableau.py` ensures that `Tableau([]).row_stabilizer()` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.\n \n Issues I'd like the reviewer to look at closely:\n \n A) I removed a \"#################### SEGFAULTS ################\" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.\n \n-B) I don't know what the ``star`` keyword in my methods is for -- I copied it over from the ``e`` method (which should be similar to ``a`` and ``b`` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.\n+B) I don't know what the `star` keyword in my methods is for -- I copied it over from the `e` method (which should be similar to `a` and `b` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.\n \n C) There are two TODOs which might deserve tickets of their own.\n \n@@ -46,4 +46,4 @@\n \n Writing this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n \n-When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n+When I grep for `PermutationOptions` and `permutation_options`, I only get hits from `permutation.py` and `symmetric_group_algebra.py`, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n``````\n",
    "created_at": "2013-08-03T11:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239089",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,20 +1,20 @@
 **UPDATED and ready for review.** The patch does the following:
 
-1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating k = 1 as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)
+1) Allows `k = 1` in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases. (Note: I'm treating `k = 1` as a separate case in the Hecke algebra because I want it to return the 1 of the Hecke algebra, not the int 1.)
 
-2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.
+2) The `algebra_generators()` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.
 
-3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).
+3) The `cpi` method should now be a lot faster (checked on S<sub>6</sub> and `[3,2,1]`, where the speedup factor was more than 2).
 
-4) New methods ``a`` and ``b`` in ``symmetric_group_algebra.py`` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.
+4) New methods `a` and `b` in `symmetric_group_algebra.py` allow computing the sum of the row-preserving permutations and the alternating sum of the column-preserving permutation of a Young tableau, not just their product. These methods are not exported by default so as not to pollute the namespace.
 
-5) A fix in ``tableau.py`` ensures that ``Tableau([]).row_stabilizer()`` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.
+5) A fix in `tableau.py` ensures that `Tableau([]).row_stabilizer()` behaves as it should. My speed tests are inconclusive, but I don't think this fix has any noticeable impact on overall speed of tableau computations. The assumption I added to the documentation was already needed beforehand; it just wasn't documented.
 
 Issues I'd like the reviewer to look at closely:
 
 A) I removed a "#################### SEGFAULTS ################" comment after a doctests since that doctest doesn't even run close to segfaulting (on my machine, that is). If it had a reason to be there, please insert it back.
 
-B) I don't know what the ``star`` keyword in my methods is for -- I copied it over from the ``e`` method (which should be similar to ``a`` and ``b`` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.
+B) I don't know what the `star` keyword in my methods is for -- I copied it over from the `e` method (which should be similar to `a` and `b` in various regards), where it was undocumented. Apparently it is used internally in other methods. If you think I should remove it from my methods, I will.
 
 C) There are two TODOs which might deserve tickets of their own.
 
@@ -46,4 +46,4 @@
 
 Writing this patch made me notice that **Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default**! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else in mathematics. I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.
 
-When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
+When I grep for `PermutationOptions` and `permutation_options`, I only get hits from `permutation.py` and `symmetric_group_algebra.py`, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...
``````




---

archive/issue_comments_239090.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2013-08-03T11:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239090",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_239091.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi Travis,\n\nI've got the `a` and `b` names from \u00a74.12 of Pavel Etingof et al.'s representation theory notes ( http://www-math.mit.edu/~etingof/replect.pdf ). They also appear in http://en.wikipedia.org/wiki/Young_symmetrizer and in \u00a74.1 of Fulton-Harris (not a good reference if you ask me). Ironically, it seems that most of the deeper-going texts on representations of S_n (James, James-Kerber, Sagan) avoid Young symmetrizers completely, so it's hard to tell what is standard.\n\nI'll make the changes you've asked for in a moment.\n\nBest regards,\nDarij",
    "created_at": "2013-08-03T12:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239091",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>
Hi Travis,

I've got the `a` and `b` names from §4.12 of Pavel Etingof et al.'s representation theory notes ( http://www-math.mit.edu/~etingof/replect.pdf ). They also appear in http://en.wikipedia.org/wiki/Young_symmetrizer and in §4.1 of Fulton-Harris (not a good reference if you ask me). Ironically, it seems that most of the deeper-going texts on representations of S_n (James, James-Kerber, Sagan) avoid Young symmetrizers completely, so it's hard to tell what is standard.

I'll make the changes you've asked for in a moment.

Best regards,
Darij



---

archive/issue_comments_239092.json:
```json
{
    "body": "<a id='comment:14'></a>\nAh okay. Then `a` and `b` are fine. I'll finish the review as soon as I'm able to, but I won't be able to look at it until at least 2 days from now (I'm traveling back from South Korea tomorrow morning [it's 9:15 PM if you're curious] to the US) so there's no rush.\n\nThanks,\n\nTravis",
    "created_at": "2013-08-03T12:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239092",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Ah okay. Then `a` and `b` are fine. I'll finish the review as soon as I'm able to, but I won't be able to look at it until at least 2 days from now (I'm traveling back from South Korea tomorrow morning [it's 9:15 PM if you're curious] to the US) so there's no rush.

Thanks,

Travis



---

archive/issue_comments_239093.json:
```json
{
    "body": "Updated; please review!",
    "created_at": "2013-08-03T12:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239093",
    "user": "https://github.com/darijgr"
}
```

Updated; please review!



---

archive/issue_comments_239094.json:
```json
{
    "body": "<a id='comment:15'></a>\nAttachment [trac_14881-symmetric_group_algebra_rebased-dg.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-symmetric_group_algebra_rebased-dg.patch) by @darijgr created at 2013-08-03 12:15:22\n\nAdded the Etingof reference; removed the commented-out old code.",
    "created_at": "2013-08-03T12:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239094",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>
Attachment [trac_14881-symmetric_group_algebra_rebased-dg.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-symmetric_group_algebra_rebased-dg.patch) by @darijgr created at 2013-08-03 12:15:22

Added the Etingof reference; removed the commented-out old code.



---

archive/issue_comments_239095.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -38,7 +38,10 @@\n \n If you agree, I'll open these tickets.\n \n-* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n+Apply:\n+\n+* [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]\n+* [attachment:trac_14881-review-ts.patch]\n \n ====================================================================\n \n``````\n",
    "created_at": "2013-08-08T19:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239095",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -38,7 +38,10 @@
 
 If you agree, I'll open these tickets.
 
-* Apply: [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
+Apply:
+
+* [attachment:trac_14881-symmetric_group_algebra_rebased-dg.patch]
+* [attachment:trac_14881-review-ts.patch]
 
 ====================================================================
 
``````




---

archive/issue_comments_239096.json:
```json
{
    "body": "<a id='comment:16'></a>\nHey Darij,\n\nHere's a small review patch which makes some minor tweaks to the doc and removes two asserts used for input checking. If you're happy with my changes, you can go ahead and set this to positive review.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14881-symmetric_group_algebra_rebased-dg.patch trac_14881-review-ts.patch",
    "created_at": "2013-08-08T19:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239096",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Hey Darij,

Here's a small review patch which makes some minor tweaks to the doc and removes two asserts used for input checking. If you're happy with my changes, you can go ahead and set this to positive review.

Best,

Travis

For patchbot:

Apply: trac_14881-symmetric_group_algebra_rebased-dg.patch trac_14881-review-ts.patch



---

archive/issue_comments_239097.json:
```json
{
    "body": "<a id='comment:17'></a>\nThank you! Only issue now is that \"orders\" should be \"order\" in\n\n```\n         - ``other`` -- a symmetric group algebra with orders `p` \n```\n\nNice syntax for the error messages; I didn't know of it.\n\nPlease set to positive-review once you've fixed the typo.",
    "created_at": "2013-08-08T19:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239097",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>
Thank you! Only issue now is that "orders" should be "order" in

```
         - ``other`` -- a symmetric group algebra with orders `p` 
```

Nice syntax for the error messages; I didn't know of it.

Please set to positive-review once you've fixed the typo.



---

archive/issue_comments_239098.json:
```json
{
    "body": "<a id='comment:18'></a>\nAttachment [trac_14881-review-ts.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-review-ts.patch) by @tscrim created at 2013-08-09 21:04:54\n\nIt's the (new) python 2.6+ string formatting and will be replacing the `%` at some point in the near python future (in python 3 it is strongly suggested to not use the `%`).\n\nFor patchbot:\n\nApply: trac_14881-symmetric_group_algebra_rebased-dg.patch, trac_14881-review-ts.patch",
    "created_at": "2013-08-09T21:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239098",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
Attachment [trac_14881-review-ts.patch](tarball://root/attachments/some-uuid/ticket14881/trac_14881-review-ts.patch) by @tscrim created at 2013-08-09 21:04:54

It's the (new) python 2.6+ string formatting and will be replacing the `%` at some point in the near python future (in python 3 it is strongly suggested to not use the `%`).

For patchbot:

Apply: trac_14881-symmetric_group_algebra_rebased-dg.patch, trac_14881-review-ts.patch



---

archive/issue_comments_239099.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-08-09T21:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239099",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_239100.json:
```json
{
    "body": "**Merged:** sage-5.12.beta5",
    "created_at": "2013-09-02T10:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239100",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.beta5



---

archive/issue_events_049131.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-09-02T10:19:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14881#event-49131"
}
```



---

archive/issue_comments_239101.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-09-02T10:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239101",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_239102.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,21 +19,21 @@\n C) There are two TODOs which might deserve tickets of their own.\n \n ```\n- \t627\t    # This all should be over ZZ, not over QQ, but symmetric group \n- \t628\t    # algebras don't seem to preserve coercion (the one over ZZ \n- \t629\t    # doesn't coerce into the one over QQ even for the same n), \n- \t630\t    # and the QQ version of this method is more important, so let \n- \t631\t    # me stay with QQ. \n- \t632\t    # TODO: Fix this. \n+ 627\t    # This all should be over ZZ, not over QQ, but symmetric group \n+ 628\t    # algebras don't seem to preserve coercion (the one over ZZ \n+ 629\t    # doesn't coerce into the one over QQ even for the same n), \n+ 630\t    # and the QQ version of this method is more important, so let \n+ 631\t    # me stay with QQ. \n+ 632\t    # TODO: Fix this. \n ```\n \n and\n \n ```\n- \t637\t    # Ugly hack for the case of an empty tableau, due to the \n- \t638\t    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n- \t639\t    # being [1] rather than [] (which seems to have its origins in \n- \t640\t    # permutation group code). \n+ 637\t    # Ugly hack for the case of an empty tableau, due to the \n+ 638\t    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n+ 639\t    # being [1] rather than [] (which seems to have its origins in \n+ 640\t    # permutation group code). \n ```\n \n If you agree, I'll open these tickets.\n``````\n",
    "created_at": "2015-09-06T13:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239102",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,21 +19,21 @@
 C) There are two TODOs which might deserve tickets of their own.
 
 ```
- 	627	    # This all should be over ZZ, not over QQ, but symmetric group 
- 	628	    # algebras don't seem to preserve coercion (the one over ZZ 
- 	629	    # doesn't coerce into the one over QQ even for the same n), 
- 	630	    # and the QQ version of this method is more important, so let 
- 	631	    # me stay with QQ. 
- 	632	    # TODO: Fix this. 
+ 627	    # This all should be over ZZ, not over QQ, but symmetric group 
+ 628	    # algebras don't seem to preserve coercion (the one over ZZ 
+ 629	    # doesn't coerce into the one over QQ even for the same n), 
+ 630	    # and the QQ version of this method is more important, so let 
+ 631	    # me stay with QQ. 
+ 632	    # TODO: Fix this. 
 ```
 
 and
 
 ```
- 	637	    # Ugly hack for the case of an empty tableau, due to the 
- 	638	    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
- 	639	    # being [1] rather than [] (which seems to have its origins in 
- 	640	    # permutation group code). 
+ 637	    # Ugly hack for the case of an empty tableau, due to the 
+ 638	    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
+ 639	    # being [1] rather than [] (which seems to have its origins in 
+ 640	    # permutation group code). 
 ```
 
 If you agree, I'll open these tickets.
``````




---

archive/issue_comments_239103.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,21 +19,21 @@\n C) There are two TODOs which might deserve tickets of their own.\n \n ```\n- 627\t    # This all should be over ZZ, not over QQ, but symmetric group \n- 628\t    # algebras don't seem to preserve coercion (the one over ZZ \n- 629\t    # doesn't coerce into the one over QQ even for the same n), \n- 630\t    # and the QQ version of this method is more important, so let \n- 631\t    # me stay with QQ. \n- 632\t    # TODO: Fix this. \n+ 627    # This all should be over ZZ, not over QQ, but symmetric group \n+ 628    # algebras don't seem to preserve coercion (the one over ZZ \n+ 629    # doesn't coerce into the one over QQ even for the same n), \n+ 630    # and the QQ version of this method is more important, so let \n+ 631    # me stay with QQ. \n+ 632    # TODO: Fix this. \n ```\n \n and\n \n ```\n- 637\t    # Ugly hack for the case of an empty tableau, due to the \n- 638\t    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n- 639\t    # being [1] rather than [] (which seems to have its origins in \n- 640\t    # permutation group code). \n+ 637    # Ugly hack for the case of an empty tableau, due to the \n+ 638    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) \n+ 639    # being [1] rather than [] (which seems to have its origins in \n+ 640    # permutation group code). \n ```\n \n If you agree, I'll open these tickets.\n``````\n",
    "created_at": "2015-09-06T13:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14881#issuecomment-239103",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,21 +19,21 @@
 C) There are two TODOs which might deserve tickets of their own.
 
 ```
- 627	    # This all should be over ZZ, not over QQ, but symmetric group 
- 628	    # algebras don't seem to preserve coercion (the one over ZZ 
- 629	    # doesn't coerce into the one over QQ even for the same n), 
- 630	    # and the QQ version of this method is more important, so let 
- 631	    # me stay with QQ. 
- 632	    # TODO: Fix this. 
+ 627    # This all should be over ZZ, not over QQ, but symmetric group 
+ 628    # algebras don't seem to preserve coercion (the one over ZZ 
+ 629    # doesn't coerce into the one over QQ even for the same n), 
+ 630    # and the QQ version of this method is more important, so let 
+ 631    # me stay with QQ. 
+ 632    # TODO: Fix this. 
 ```
 
 and
 
 ```
- 637	    # Ugly hack for the case of an empty tableau, due to the 
- 638	    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
- 639	    # being [1] rather than [] (which seems to have its origins in 
- 640	    # permutation group code). 
+ 637    # Ugly hack for the case of an empty tableau, due to the 
+ 638    # annoyance of Permutation(Tableau([]).row_stabilizer()[0]) 
+ 639    # being [1] rather than [] (which seems to have its origins in 
+ 640    # permutation group code). 
 ```
 
 If you agree, I'll open these tickets.
``````

