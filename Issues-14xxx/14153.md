# Issue 14153: Add Unicode support to the doctesting framework

archive/issues_013949.json:
```json
{
    "assignees": [
        "https://github.com/roed314"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nSupport\n1. Doctest (i.e. `sage:`) lines containing non-ASCII characters.\n2. Doctest results containing non-ASCII characters.\n3. Print statements in doctests outputting unicode.\n4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.\n\nsee also #18370\n\nCC:  @nexttime @embray @jdemeyer @hivert\n\nComponent: **doctest framework**\n\nKeywords: **unicode**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**\n\nReviewer: **Erik Bray, Volker Braun, David Roe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14153_\n\n",
    "closed_at": "2017-08-11T18:18:15Z",
    "created_at": "2013-02-20T22:03:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20python3"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add Unicode support to the doctesting framework",
    "type": "issue",
    "updated_at": "2017-08-11T18:18:15Z",
    "url": "https://github.com/sagemath/sage/issues/14153",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

Support
1. Doctest (i.e. `sage:`) lines containing non-ASCII characters.
2. Doctest results containing non-ASCII characters.
3. Print statements in doctests outputting unicode.
4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.

see also #18370

CC:  @nexttime @embray @jdemeyer @hivert

Component: **doctest framework**

Keywords: **unicode**

Author: **Frédéric Chapoton**

Branch/Commit: **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**

Reviewer: **Erik Bray, Volker Braun, David Roe**

_Issue created by migration from https://trac.sagemath.org/ticket/14153_





---

archive/issue_events_197362.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T22:03:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197362"
}
```



---

archive/issue_events_197363.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T22:03:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197363"
}
```



---

archive/issue_events_197364.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T22:03:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197364"
}
```



---

archive/issue_events_197365.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T22:03:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197365"
}
```



---

archive/issue_events_197366.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2013-02-20T22:03:46Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197366"
}
```



---

archive/issue_comments_168655.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Support\n 1. Doctest (i.e. `sage:`) lines containing non-ASCII characters.\n 2. Doctest results containing non-ASCII characters.\n-3. Print statements outputting non-ASCII characters inside doctests.\n+3. Print statements in doctests outputting unicode.\n 4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.\n``````\n",
    "created_at": "2013-02-28T10:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168655",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Support
 1. Doctest (i.e. `sage:`) lines containing non-ASCII characters.
 2. Doctest results containing non-ASCII characters.
-3. Print statements outputting non-ASCII characters inside doctests.
+3. Print statements in doctests outputting unicode.
 4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.
``````




---

archive/issue_comments_168656.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[doctest_unicode.patch.gz](https://github.com/sagemath/sage/files/ticket14153/doctest_unicode.patch.gz)**",
    "created_at": "2013-03-19T11:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168656",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[doctest_unicode.patch.gz](https://github.com/sagemath/sage/files/ticket14153/doctest_unicode.patch.gz)**



---

archive/issue_comments_168657.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just tried this patch on the suspicion it could help with the test weirdness I reported in 5.9.beta0 on sage-release\n\n```\nsage -t --long devel/sage-main/sage/misc/interpreter.py\n**********************************************************************\nFile \"devel/sage-main/sage/misc/interpreter.py\", line 150, in \nsage.misc.interpreter.sage_prompt\nFailed example:\n    shell.run_cell('sage_prompt()')\nExpected:\n    u'sage'\nGot:\n    u'sage'\n**********************************************************************\nFile \"devel/sage-main/sage/misc/interpreter.py\", line 187, in \nsage.misc.interpreter.SageInteractiveShell.system_raw\nFailed example:\n    shell.system_raw('R --version')\nExpected:\n    R version ...\nGot:\n    WARNING: ignoring environment value of R_HOME\n    R version 2.15.2 (2012-10-26) -- \"Trick or Treat\"\n    Copyright (C) 2012 The R Foundation for Statistical Computing\n    ISBN 3-900051-07-0\n    Platform: x86_64-unknown-linux-gnu (64-bit)\n    <BLANKLINE>\n    R is free software and comes with ABSOLUTELY NO WARRANTY.\n    You are welcome to redistribute it under the terms of the\n    GNU General Public License versions 2 or 3.\n    For more information about these matters see\n    http://www.gnu.org/licenses/.\n    <BLANKLINE>\n**********************************************************************\nFile \"devel/sage-main/sage/misc/interpreter.py\", line 566, in \nsage.misc.interpreter.interface_shell_embed\nFailed example:\n    shell.run_cell('List( [1..10], IsPrime )')\nExpected:\n    [ false, true, true, false, true, false, true, false, false, false ]\nGot:\n    [ false, true, true, false, true, false, true, false, false, false ]\n**********************************************************************\n3 items had failures:\n   1 of  15 in sage.misc.interpreter.SageInteractiveShell.system_raw\n   1 of   4 in sage.misc.interpreter.interface_shell_embed\n   1 of   4 in sage.misc.interpreter.sage_prompt\n    [107 tests, 3 failures, 2.4 s]\n```\nThe R error was fixed by unsetting R_HOME before running the test. Then I applied the patch and here is the result\n\n```\nsage -t --long devel/sage-main/sage/misc/interpreter.py\n**********************************************************************\nFile \"devel/sage-main/sage/misc/interpreter.py\", line 150, in sage.misc.interpreter.sage_prompt\nFailed example:\n    shell.run_cell('sage_prompt()')\nExpected:\n    u'sage'\nGot:\n    u'sage'\n    ---------------------------------------------------------------------------\n    AttributeError                            Traceback (most recent call last)\n    <ipython-input-1-e17c2c2153ac> in <module>()\n    ----> 1 sage_prompt()\n    \n    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in __call__(self, result)\n        240             self.update_user_ns(result)\n        241             self.log_output(format_dict)\n    --> 242             self.finish_displayhook()\n        243 \n        244     def flush(self):\n    <BLANKLINE>\n    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in finish_displayhook(self)\n        224         \"\"\"Finish up all displayhook activities.\"\"\"\n        225         io.stdout.write(self.shell.separate_out2)\n    --> 226         io.stdout.flush()\n        227 \n        228     def __call__(self, result=None):\n    <BLANKLINE>\n    AttributeError: IOStream instance has no attribute 'flush'\n**********************************************************************\nFile \"devel/sage-main/sage/misc/interpreter.py\", line 566, in sage.misc.interpreter.interface_shell_embed\nFailed example:\n    shell.run_cell('List( [1..10], IsPrime )')\nExpected:\n    [ false, true, true, false, true, false, true, false, false, false ]\nGot:\n    [ false, true, true, false, true, false, true, false, false, false ]\n    ---------------------------------------------------------------------------\n    AttributeError                            Traceback (most recent call last)\n    <ipython-input-1-a772973ec1ce> in <module>()\n    ----> 1 sage.misc.all.logstr(\"\"\"[ false, true, true, false, true, false, true, false, false, false ]\"\"\")\n    \n    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in __call__(self, result)\n        240             self.update_user_ns(result)\n        241             self.log_output(format_dict)\n    --> 242             self.finish_displayhook()\n        243 \n        244     def flush(self):\n    <BLANKLINE>\n    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in finish_displayhook(self)\n        224         \"\"\"Finish up all displayhook activities.\"\"\"\n        225         io.stdout.write(self.shell.separate_out2)\n    --> 226         io.stdout.flush()\n        227 \n        228     def __call__(self, result=None):\n    <BLANKLINE>\n    AttributeError: IOStream instance has no attribute 'flush'\n**********************************************************************\n2 items had failures:\n   1 of   4 in sage.misc.interpreter.interface_shell_embed\n   1 of   4 in sage.misc.interpreter.sage_prompt\n    [107 tests, 2 failures, 3.0 s]\n```",
    "created_at": "2013-03-19T23:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168657",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

I just tried this patch on the suspicion it could help with the test weirdness I reported in 5.9.beta0 on sage-release

```
sage -t --long devel/sage-main/sage/misc/interpreter.py
**********************************************************************
File "devel/sage-main/sage/misc/interpreter.py", line 150, in 
sage.misc.interpreter.sage_prompt
Failed example:
    shell.run_cell('sage_prompt()')
Expected:
    u'sage'
Got:
    u'sage'
**********************************************************************
File "devel/sage-main/sage/misc/interpreter.py", line 187, in 
sage.misc.interpreter.SageInteractiveShell.system_raw
Failed example:
    shell.system_raw('R --version')
Expected:
    R version ...
Got:
    WARNING: ignoring environment value of R_HOME
    R version 2.15.2 (2012-10-26) -- "Trick or Treat"
    Copyright (C) 2012 The R Foundation for Statistical Computing
    ISBN 3-900051-07-0
    Platform: x86_64-unknown-linux-gnu (64-bit)
    <BLANKLINE>
    R is free software and comes with ABSOLUTELY NO WARRANTY.
    You are welcome to redistribute it under the terms of the
    GNU General Public License versions 2 or 3.
    For more information about these matters see
    http://www.gnu.org/licenses/.
    <BLANKLINE>
**********************************************************************
File "devel/sage-main/sage/misc/interpreter.py", line 566, in 
sage.misc.interpreter.interface_shell_embed
Failed example:
    shell.run_cell('List( [1..10], IsPrime )')
Expected:
    [ false, true, true, false, true, false, true, false, false, false ]
Got:
    [ false, true, true, false, true, false, true, false, false, false ]
**********************************************************************
3 items had failures:
   1 of  15 in sage.misc.interpreter.SageInteractiveShell.system_raw
   1 of   4 in sage.misc.interpreter.interface_shell_embed
   1 of   4 in sage.misc.interpreter.sage_prompt
    [107 tests, 3 failures, 2.4 s]
```
The R error was fixed by unsetting R_HOME before running the test. Then I applied the patch and here is the result

```
sage -t --long devel/sage-main/sage/misc/interpreter.py
**********************************************************************
File "devel/sage-main/sage/misc/interpreter.py", line 150, in sage.misc.interpreter.sage_prompt
Failed example:
    shell.run_cell('sage_prompt()')
Expected:
    u'sage'
Got:
    u'sage'
    ---------------------------------------------------------------------------
    AttributeError                            Traceback (most recent call last)
    <ipython-input-1-e17c2c2153ac> in <module>()
    ----> 1 sage_prompt()
    
    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in __call__(self, result)
        240             self.update_user_ns(result)
        241             self.log_output(format_dict)
    --> 242             self.finish_displayhook()
        243 
        244     def flush(self):
    <BLANKLINE>
    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in finish_displayhook(self)
        224         """Finish up all displayhook activities."""
        225         io.stdout.write(self.shell.separate_out2)
    --> 226         io.stdout.flush()
        227 
        228     def __call__(self, result=None):
    <BLANKLINE>
    AttributeError: IOStream instance has no attribute 'flush'
**********************************************************************
File "devel/sage-main/sage/misc/interpreter.py", line 566, in sage.misc.interpreter.interface_shell_embed
Failed example:
    shell.run_cell('List( [1..10], IsPrime )')
Expected:
    [ false, true, true, false, true, false, true, false, false, false ]
Got:
    [ false, true, true, false, true, false, true, false, false, false ]
    ---------------------------------------------------------------------------
    AttributeError                            Traceback (most recent call last)
    <ipython-input-1-a772973ec1ce> in <module>()
    ----> 1 sage.misc.all.logstr("""[ false, true, true, false, true, false, true, false, false, false ]""")
    
    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in __call__(self, result)
        240             self.update_user_ns(result)
        241             self.log_output(format_dict)
    --> 242             self.finish_displayhook()
        243 
        244     def flush(self):
    <BLANKLINE>
    /home/work/fbissey/sandbox/sage-5.9.beta0/local/lib/python2.7/site-packages/IPython/core/displayhook.pyc in finish_displayhook(self)
        224         """Finish up all displayhook activities."""
        225         io.stdout.write(self.shell.separate_out2)
    --> 226         io.stdout.flush()
        227 
        228     def __call__(self, result=None):
    <BLANKLINE>
    AttributeError: IOStream instance has no attribute 'flush'
**********************************************************************
2 items had failures:
   1 of   4 in sage.misc.interpreter.interface_shell_embed
   1 of   4 in sage.misc.interpreter.sage_prompt
    [107 tests, 2 failures, 3.0 s]
```



---

archive/issue_events_197367.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2013-03-28T22:44:55Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "subject": "https://github.com/roed314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197367"
}
```



---

archive/issue_events_197368.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:44:55Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "subject": "https://github.com/roed314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197368"
}
```



---

archive/issue_events_197369.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:44:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197369"
}
```



---

archive/issue_events_197370.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:44:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "0000b0",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197370"
}
```



---

archive/issue_events_197371.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197371"
}
```



---

archive/issue_events_197372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197372"
}
```



---

archive/issue_events_197373.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197373"
}
```



---

archive/issue_events_197374.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197374"
}
```



---

archive/issue_events_197375.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197375"
}
```



---

archive/issue_events_197376.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197376"
}
```



---

archive/issue_events_197377.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197377"
}
```



---

archive/issue_events_197378.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197378"
}
```



---

archive/issue_events_197379.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-12T09:17:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197379"
}
```



---

archive/issue_events_197380.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-12T09:18:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197380"
}
```



---

archive/issue_events_197381.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-12T09:18:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197381"
}
```



---

archive/issue_comments_168658.json:
```json
{
    "body": "Branch: **[public/14153](https://github.com/sagemath/sagetrac-mirror/tree/public/14153)**",
    "created_at": "2016-11-10T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168658",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/14153](https://github.com/sagemath/sagetrac-mirror/tree/public/14153)**



---

archive/issue_comments_168659.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\njust made a branch from the old patch, not tried to test it\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5\"><code>cffdb90</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>\n",
    "created_at": "2016-11-10T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168659",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

just made a branch from the old patch, not tried to test it

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5"><code>cffdb90</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>




---

archive/issue_comments_168660.json:
```json
{
    "body": "Commit: **[`cffdb90`](https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5)**",
    "created_at": "2016-11-10T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168660",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`cffdb90`](https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5)**



---

archive/issue_comments_168661.json:
```json
{
    "body": "Changed commit from **[`cffdb90`](https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5)** to **[`1712c87`](https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5)**",
    "created_at": "2017-01-18T10:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cffdb90`](https://github.com/sagemath/sagetrac-mirror/commit/cffdb9077dc8074a0cde0d0cd21d19046b2a95d5)** to **[`1712c87`](https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5)**



---

archive/issue_comments_168662.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abd83e5bde43147a692f44946a6111bef9a4c965\"><code>abd83e5</code></a></td><td><code>Merge branch 'public/14153' in 7.5.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5\"><code>1712c87</code></a></td><td><code>trac 14153 fixing doc default call</code></td></tr></table>\n",
    "created_at": "2017-01-18T10:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abd83e5bde43147a692f44946a6111bef9a4c965"><code>abd83e5</code></a></td><td><code>Merge branch 'public/14153' in 7.5.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5"><code>1712c87</code></a></td><td><code>trac 14153 fixing doc default call</code></td></tr></table>




---

archive/issue_comments_168663.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI have repaired a detail, but this is not working, in several distinct ways.\n\nThis seems to be broken on lines having unicode characters in comments such as:\n\n```\nsage: 0 + 0    # c'est trop b\u00eate\n```\n\nSome doctests come from the notebook, I made a pull request.\n\nA failing doctest in src/sage/misc/rest_index_of_methods.py\nis related to the presence of \"Lov\\xc3\\xa1sz theta\"",
    "created_at": "2017-01-18T16:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168663",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

I have repaired a detail, but this is not working, in several distinct ways.

This seems to be broken on lines having unicode characters in comments such as:

```
sage: 0 + 0    # c'est trop bête
```

Some doctests come from the notebook, I made a pull request.

A failing doctest in src/sage/misc/rest_index_of_methods.py
is related to the presence of "Lov\xc3\xa1sz theta"



---

archive/issue_comments_168664.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nseems that something like that is hurting us (in forker):\n\n```\nsage: md=hashlib.md5()\nsage: md.update(u'\u00e9t\u00e9')\n---------------------------------------------------------------------------\nUnicodeEncodeError                        Traceback (most recent call last)\n<ipython-input-9-6a9959b36b47> in <module>()\n----> 1 md.update(u'\u00e9t\u00e9')\n\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe9' in position 0: ordinal not in range(128)\n```\nsolution: encode ?\n\n```\nsage: md.update(u'\u00e9t\u00e9'.encode('utf8'))\n```",
    "created_at": "2017-01-18T16:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168664",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

seems that something like that is hurting us (in forker):

```
sage: md=hashlib.md5()
sage: md.update(u'été')
---------------------------------------------------------------------------
UnicodeEncodeError                        Traceback (most recent call last)
<ipython-input-9-6a9959b36b47> in <module>()
----> 1 md.update(u'été')

UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 0: ordinal not in range(128)
```
solution: encode ?

```
sage: md.update(u'été'.encode('utf8'))
```



---

archive/issue_comments_168665.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n* another problem in src/sage/misc/cachefunc.pyx with a mu:\n\n```\n398:    625 loops, best of 3: 1.3 \u00b5s per loop\n```\nand same in \nsrc/sage/combinat/designs/evenly_distributed_sets.pyx\nand in src/sage/structure/list_clone_timings.py\n\n* in src/sage_setup/autogen/pari/doc.py, some unicode strings with no u:\n\n```\n113:    doc = doc.replace(\"@[pm]\", \"\u00b1\")\n115:    doc = doc.replace(\"@[agrave]\", \"\u00e0\")\n116:    doc = doc.replace(\"@[aacute]\", \"\u00e1\")\n117:    doc = doc.replace(\"@[eacute]\", \"\u00e9\")\n118:    doc = doc.replace(\"@[ouml]\", \"\u00f6\")\n119:    doc = doc.replace(\"@[uuml]\", \"\u00fc\")\n120:    doc = doc.replace(\"\\\\'{a}\", \"\u00e1\")\n```",
    "created_at": "2017-01-18T17:01:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168665",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

* another problem in src/sage/misc/cachefunc.pyx with a mu:

```
398:    625 loops, best of 3: 1.3 µs per loop
```
and same in 
src/sage/combinat/designs/evenly_distributed_sets.pyx
and in src/sage/structure/list_clone_timings.py

* in src/sage_setup/autogen/pari/doc.py, some unicode strings with no u:

```
113:    doc = doc.replace("@[pm]", "±")
115:    doc = doc.replace("@[agrave]", "à")
116:    doc = doc.replace("@[aacute]", "á")
117:    doc = doc.replace("@[eacute]", "é")
118:    doc = doc.replace("@[ouml]", "ö")
119:    doc = doc.replace("@[uuml]", "ü")
120:    doc = doc.replace("\\'{a}", "á")
```



---

archive/issue_comments_168666.json:
```json
{
    "body": "Changed commit from **[`1712c87`](https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5)** to **[`8cd2681`](https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a)**",
    "created_at": "2017-01-19T12:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168666",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1712c87`](https://github.com/sagemath/sagetrac-mirror/commit/1712c87b8afdb2543e593b6e44165aefc52fdef5)** to **[`8cd2681`](https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a)**



---

archive/issue_comments_168667.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a\"><code>8cd2681</code></a></td><td><code>trac 14153 adding uft8 declaration in 2 files</code></td></tr></table>\n",
    "created_at": "2017-01-19T12:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168667",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a"><code>8cd2681</code></a></td><td><code>trac 14153 adding uft8 declaration in 2 files</code></td></tr></table>




---

archive/issue_events_197382.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-26T12:56:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197382"
}
```



---

archive/issue_events_197383.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-26T12:56:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197383"
}
```



---

archive/issue_comments_168668.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis should be taken care of.",
    "created_at": "2017-04-26T12:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168668",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

This should be taken care of.



---

archive/issue_comments_168669.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a\"><code>489d13f</code></a></td><td><code>Merge branch 'public/14153' in 8.0.b4</code></td></tr></table>\n",
    "created_at": "2017-04-30T18:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168669",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a"><code>489d13f</code></a></td><td><code>Merge branch 'public/14153' in 8.0.b4</code></td></tr></table>




---

archive/issue_comments_168670.json:
```json
{
    "body": "Changed commit from **[`8cd2681`](https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a)** to **[`489d13f`](https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a)**",
    "created_at": "2017-04-30T18:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168670",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cd2681`](https://github.com/sagemath/sagetrac-mirror/commit/8cd268138984060c14b6b43e9ab2604317a9b20a)** to **[`489d13f`](https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a)**



---

archive/issue_comments_168671.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n 2. Doctest results containing non-ASCII characters.\n 3. Print statements in doctests outputting unicode.\n 4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.\n+\n+see also #18370\n``````\n",
    "created_at": "2017-05-01T12:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168671",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 2. Doctest results containing non-ASCII characters.
 3. Print statements in doctests outputting unicode.
 4. Source files with a [PEP 0263](http://www.python.org/dev/peps/pep-0263/) encoding declaration.
+
+see also #18370
``````




---

archive/issue_comments_168672.json:
```json
{
    "body": "Changed keywords from none to **unicode**",
    "created_at": "2017-05-01T12:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168672",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **unicode**



---

archive/issue_comments_168673.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2017-05-02T08:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168673",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_168674.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nLooks fine to me, though I did not test it.  I'm amazed there isn't anything in the stdlib to check the PEP 263 coding line, but if there is I couldn't find it.\n\nThis will be nice to have.  It reminds me of my thought the other day to propose adding a few unicode constants (and the ability to tab-complete them easily) to Sage (e.g. for pi).  Has that been proposed before?",
    "created_at": "2017-05-02T08:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168674",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

Looks fine to me, though I did not test it.  I'm amazed there isn't anything in the stdlib to check the PEP 263 coding line, but if there is I couldn't find it.

This will be nice to have.  It reminds me of my thought the other day to propose adding a few unicode constants (and the ability to tab-complete them easily) to Sage (e.g. for pi).  Has that been proposed before?



---

archive/issue_comments_168675.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI have not tested either, so far. May launch my patchbot on the branch later.",
    "created_at": "2017-05-02T10:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168675",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

I have not tested either, so far. May launch my patchbot on the branch later.



---

archive/issue_comments_168676.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe patchbot is not happy at all !\n\nOne example of failure:\n\n```\nFile \"src/doc/ja/a_tour_of_sage/index.rst\", line 39, in doc.ja.a_tour_of_sage.index\nFailed example:\n    x = var('x')   # \u8a18\u53f7\u5909\u6570\u3092\u5b9a\u7fa9\nException raised:\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 520, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 896, in compile_and_execute\n        self.update_digests(example)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 783, in update_digests\n        self.running_global_digest.update(s)\n    UnicodeEncodeError: 'ascii' codec can't encode characters in position 20-26: ordinal not in range(128)\n```\n\nAnother kind of example:\n\n```\nFile \"src/sage/ext/fast_callable.pyx\", line 34, in sage.ext.fast_callable\nFailed example:\n    timeit('wilk.subs(x=30)') # random, long time\nException raised:\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 520, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 883, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.ext.fast_callable[5]>\", line 1, in <module>\n        timeit('wilk.subs(x=30)') # random, long time\n      File \"sage/misc/sage_timeit_class.pyx\", line 118, in sage.misc.sage_timeit_class.SageTimeit.__call__ (build/cythonized/sage/misc/sage_timeit_class.c:1411)\n        print(self.eval(code, globals, preparse=preparse, **kwds))\n      File \"/home/chapoton/sage/local/lib/python2.7/codecs.py\", line 369, in write\n        data, consumed = self.encode(object, self.errors)\n    UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 26: ordinal not in range(128)\n```",
    "created_at": "2017-05-03T08:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168676",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

The patchbot is not happy at all !

One example of failure:

```
File "src/doc/ja/a_tour_of_sage/index.rst", line 39, in doc.ja.a_tour_of_sage.index
Failed example:
    x = var('x')   # 記号変数を定義
Exception raised:
    Traceback (most recent call last):
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 520, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 896, in compile_and_execute
        self.update_digests(example)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 783, in update_digests
        self.running_global_digest.update(s)
    UnicodeEncodeError: 'ascii' codec can't encode characters in position 20-26: ordinal not in range(128)
```

Another kind of example:

```
File "src/sage/ext/fast_callable.pyx", line 34, in sage.ext.fast_callable
Failed example:
    timeit('wilk.subs(x=30)') # random, long time
Exception raised:
    Traceback (most recent call last):
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 520, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 883, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.ext.fast_callable[5]>", line 1, in <module>
        timeit('wilk.subs(x=30)') # random, long time
      File "sage/misc/sage_timeit_class.pyx", line 118, in sage.misc.sage_timeit_class.SageTimeit.__call__ (build/cythonized/sage/misc/sage_timeit_class.c:1411)
        print(self.eval(code, globals, preparse=preparse, **kwds))
      File "/home/chapoton/sage/local/lib/python2.7/codecs.py", line 369, in write
        data, consumed = self.encode(object, self.errors)
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 26: ordinal not in range(128)
```



---

archive/issue_comments_168677.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nTo be clear, is that a problem with the patchbot or the doctest runner itself?  It seems more like the latter, but the question is does this happen when running the tests outside the patchbot?",
    "created_at": "2017-05-03T08:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168677",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

To be clear, is that a problem with the patchbot or the doctest runner itself?  It seems more like the latter, but the question is does this happen when running the tests outside the patchbot?



---

archive/issue_comments_168678.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSomewhat reminiscent of [#22756 comment:14](https://github.com/sagemath/sage/issues/22756#comment:14) although the japanese stuff is definitely unicode and should be recognized as such by python.",
    "created_at": "2017-05-03T09:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168678",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Somewhat reminiscent of [#22756 comment:14](https://github.com/sagemath/sage/issues/22756#comment:14) although the japanese stuff is definitely unicode and should be recognized as such by python.



---

archive/issue_comments_168679.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\njust fails in the same way outside of the patchbot",
    "created_at": "2017-05-03T10:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168679",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

just fails in the same way outside of the patchbot



---

archive/issue_comments_168680.json:
```json
{
    "body": "Changed commit from **[`489d13f`](https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a)** to **[`b9295dc`](https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40)**",
    "created_at": "2017-05-03T12:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168680",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`489d13f`](https://github.com/sagemath/sagetrac-mirror/commit/489d13f0cd3640a28c05b42077b307173f0c495a)** to **[`b9295dc`](https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40)**



---

archive/issue_comments_168681.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40\"><code>b9295dc</code></a></td><td><code>trac 14153 encoding required</code></td></tr></table>\n",
    "created_at": "2017-05-03T12:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168681",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40"><code>b9295dc</code></a></td><td><code>trac 14153 encoding required</code></td></tr></table>




---

archive/issue_comments_168682.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0\"><code>be11f06</code></a></td><td><code>trac 14153 fixing some doctests</code></td></tr></table>\n",
    "created_at": "2017-05-03T12:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168682",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0"><code>be11f06</code></a></td><td><code>trac 14153 fixing some doctests</code></td></tr></table>




---

archive/issue_comments_168683.json:
```json
{
    "body": "Changed commit from **[`b9295dc`](https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40)** to **[`be11f06`](https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0)**",
    "created_at": "2017-05-03T12:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b9295dc`](https://github.com/sagemath/sagetrac-mirror/commit/b9295dca7f1e4c7caa4f6173457a7560f500de40)** to **[`be11f06`](https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0)**



---

archive/issue_comments_168684.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nLess failing doctests, but still **many**. Is there an expert that could help ?",
    "created_at": "2017-05-03T15:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168684",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

Less failing doctests, but still **many**. Is there an expert that could help ?



---

archive/issue_comments_168685.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nDepends on exactly what expertise is needed, but I'll have a look.",
    "created_at": "2017-05-04T14:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168685",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

Depends on exactly what expertise is needed, but I'll have a look.



---

archive/issue_comments_168686.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@sagetrac-git](#comment%3A29):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0\"><code>be11f06</code></a></td><td><code>trac 14153 fixing some doctests</code></td></tr></table>\n\nRegarding this commit, and others like it--is this not going to be a problem on Python 3, where the strings won't be repr'd as `u'...'`?\n\nIn other projects I've modified the doctest checker to ignore the `u` marker in strings by default.  If a test needs to explicitly check whether or not a string is unicode there are other ways.  But most of the time that isn't relevant.",
    "created_at": "2017-05-04T14:27:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168686",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@sagetrac-git](#comment%3A29):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0"><code>be11f06</code></a></td><td><code>trac 14153 fixing some doctests</code></td></tr></table>

Regarding this commit, and others like it--is this not going to be a problem on Python 3, where the strings won't be repr'd as `u'...'`?

In other projects I've modified the doctest checker to ignore the `u` marker in strings by default.  If a test needs to explicitly check whether or not a string is unicode there are other ways.  But most of the time that isn't relevant.



---

archive/issue_comments_168687.json:
```json
{
    "body": "Changed commit from **[`be11f06`](https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0)** to **[`0c611c5`](https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef)**",
    "created_at": "2017-06-20T11:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be11f06`](https://github.com/sagemath/sagetrac-mirror/commit/be11f06e98fc93888967ae991f4ea91ce33c50e0)** to **[`0c611c5`](https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef)**



---

archive/issue_comments_168688.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef\"><code>0c611c5</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>\n",
    "created_at": "2017-06-20T11:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef"><code>0c611c5</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>




---

archive/issue_comments_168689.json:
```json
{
    "body": "Changed branch from **[public/14153](https://github.com/sagemath/sagetrac-mirror/tree/public/14153)** to **[u/chapoton/14153](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153)**",
    "created_at": "2017-07-12T14:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168689",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[public/14153](https://github.com/sagemath/sagetrac-mirror/tree/public/14153)** to **[u/chapoton/14153](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153)**



---

archive/issue_comments_168690.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nstill very broken..\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10bc1ab1df25314a5e0f997e08c3be77f231d6e5\"><code>10bc1ab</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2\"><code>080916e</code></a></td><td><code>py3: poor man's try towards unicode doctest framework</code></td></tr></table>\n",
    "created_at": "2017-07-12T14:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168690",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

still very broken..

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10bc1ab1df25314a5e0f997e08c3be77f231d6e5"><code>10bc1ab</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2"><code>080916e</code></a></td><td><code>py3: poor man's try towards unicode doctest framework</code></td></tr></table>




---

archive/issue_comments_168691.json:
```json
{
    "body": "Changed commit from **[`0c611c5`](https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef)** to **[`080916e`](https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2)**",
    "created_at": "2017-07-12T14:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168691",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`0c611c5`](https://github.com/sagemath/sagetrac-mirror/commit/0c611c5ad8aad31d5403155c40d87f2fb9e087ef)** to **[`080916e`](https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2)**



---

archive/issue_comments_168692.json:
```json
{
    "body": "Changed commit from **[`080916e`](https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2)** to **[`f3d375e`](https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8)**",
    "created_at": "2017-07-13T15:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`080916e`](https://github.com/sagemath/sagetrac-mirror/commit/080916e00f751500b75fba8c992a7c699ca61ed2)** to **[`f3d375e`](https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8)**



---

archive/issue_comments_168693.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf0774317cbeb87ce5838e7b6c1ad60dfc3529af\"><code>cf07743</code></a></td><td><code>some unicode changes in timeit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8\"><code>f3d375e</code></a></td><td><code>Merge branch \"unicode in timeit\" into \"unicode in doctest\"</code></td></tr></table>\n",
    "created_at": "2017-07-13T15:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168693",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf0774317cbeb87ce5838e7b6c1ad60dfc3529af"><code>cf07743</code></a></td><td><code>some unicode changes in timeit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8"><code>f3d375e</code></a></td><td><code>Merge branch "unicode in timeit" into "unicode in doctest"</code></td></tr></table>




---

archive/issue_comments_168694.json:
```json
{
    "body": "Changed commit from **[`f3d375e`](https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8)** to **[`7906a50`](https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655)**",
    "created_at": "2017-07-13T18:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f3d375e`](https://github.com/sagemath/sagetrac-mirror/commit/f3d375ed3aaa3b2c72c9fa2b30b89ac78d0d85f8)** to **[`7906a50`](https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655)**



---

archive/issue_comments_168695.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655\"><code>7906a50</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>\n",
    "created_at": "2017-07-13T18:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655"><code>7906a50</code></a></td><td><code>trac 14153 unicode in documentation</code></td></tr></table>




---

archive/issue_comments_168696.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63\"><code>1813a63</code></a></td><td><code>trac 14153 some details</code></td></tr></table>\n",
    "created_at": "2017-07-14T08:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168696",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63"><code>1813a63</code></a></td><td><code>trac 14153 some details</code></td></tr></table>




---

archive/issue_comments_168697.json:
```json
{
    "body": "Changed commit from **[`7906a50`](https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655)** to **[`1813a63`](https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63)**",
    "created_at": "2017-07-14T08:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168697",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7906a50`](https://github.com/sagemath/sagetrac-mirror/commit/7906a504011eb32f7890c0750d3d987568576655)** to **[`1813a63`](https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63)**



---

archive/issue_comments_168698.json:
```json
{
    "body": "Changed branch from **[u/chapoton/14153](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153)** to **[u/chapoton/14153v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153v2)**",
    "created_at": "2017-07-14T11:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168698",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/14153](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153)** to **[u/chapoton/14153v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153v2)**



---

archive/issue_comments_168699.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nhere is another tentative\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0\"><code>e3497e8</code></a></td><td><code>steps towards unicode doctesting framework</code></td></tr></table>\n",
    "created_at": "2017-07-14T11:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168699",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

here is another tentative

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0"><code>e3497e8</code></a></td><td><code>steps towards unicode doctesting framework</code></td></tr></table>




---

archive/issue_comments_168700.json:
```json
{
    "body": "Changed commit from **[`1813a63`](https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63)** to **[`e3497e8`](https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0)**",
    "created_at": "2017-07-14T11:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168700",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`1813a63`](https://github.com/sagemath/sagetrac-mirror/commit/1813a63c6e37170300f76df3a8e818b6289b6a63)** to **[`e3497e8`](https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0)**



---

archive/issue_comments_168701.json:
```json
{
    "body": "Changed commit from **[`e3497e8`](https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0)** to **[`cc03d22`](https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31)**",
    "created_at": "2017-07-14T13:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168701",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e3497e8`](https://github.com/sagemath/sagetrac-mirror/commit/e3497e851f155914d54174ad18bd28123f6b37a0)** to **[`cc03d22`](https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31)**



---

archive/issue_comments_168702.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31\"><code>cc03d22</code></a></td><td><code>motorhead detail</code></td></tr></table>\n",
    "created_at": "2017-07-14T13:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168702",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31"><code>cc03d22</code></a></td><td><code>motorhead detail</code></td></tr></table>




---

archive/issue_comments_168703.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a\"><code>b091e6a</code></a></td><td><code>trac 14153 fixing another doctest</code></td></tr></table>\n",
    "created_at": "2017-07-14T17:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168703",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a"><code>b091e6a</code></a></td><td><code>trac 14153 fixing another doctest</code></td></tr></table>




---

archive/issue_comments_168704.json:
```json
{
    "body": "Changed commit from **[`cc03d22`](https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31)** to **[`b091e6a`](https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a)**",
    "created_at": "2017-07-14T17:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168704",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc03d22`](https://github.com/sagemath/sagetrac-mirror/commit/cc03d22738a327999db7162c095daac7d23f9c31)** to **[`b091e6a`](https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a)**



---

archive/issue_comments_168705.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThere remains only one failing doctest in the r interface.",
    "created_at": "2017-07-14T17:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168705",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:41" align="right">comment:41</div>

There remains only one failing doctest in the r interface.



---

archive/issue_comments_168706.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c\"><code>8394952</code></a></td><td><code>trac 14153 fixing another doctest</code></td></tr></table>\n",
    "created_at": "2017-07-14T18:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c"><code>8394952</code></a></td><td><code>trac 14153 fixing another doctest</code></td></tr></table>




---

archive/issue_comments_168707.json:
```json
{
    "body": "Changed commit from **[`b091e6a`](https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a)** to **[`8394952`](https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c)**",
    "created_at": "2017-07-14T18:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b091e6a`](https://github.com/sagemath/sagetrac-mirror/commit/b091e6a60311ab5756d2fb744e60adabae120a5a)** to **[`8394952`](https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c)**



---

archive/issue_comments_168708.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n**Green Bot** ! Please review !\n\nI am not sure that this is the definitive fix, but at least good progress.\n\nThis needs to be tested also on Mac and Cygwin, and this I cannot do.",
    "created_at": "2017-07-15T09:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168708",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">comment:43</div>

**Green Bot** ! Please review !

I am not sure that this is the definitive fix, but at least good progress.

This needs to be tested also on Mac and Cygwin, and this I cannot do.



---

archive/issue_comments_168709.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-07-15T13:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168709",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_events_197384.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-15T20:17:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197384"
}
```



---

archive/issue_events_197385.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-15T20:17:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197385"
}
```



---

archive/issue_events_197386.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-15T20:17:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197386"
}
```



---

archive/issue_events_197387.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-15T20:17:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197387"
}
```



---

archive/issue_events_197388.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-15T20:17:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197388"
}
```



---

archive/issue_comments_168710.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nping, anybody ?",
    "created_at": "2017-07-18T18:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168710",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>

ping, anybody ?



---

archive/issue_comments_168711.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nTesting on OS X. But it overall looks good.",
    "created_at": "2017-07-19T01:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168711",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">comment:47</div>

Testing on OS X. But it overall looks good.



---

archive/issue_comments_168712.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI don't think there's anything about this that specifically needs testing on Cygwin.  I've never encountered any issues on Cygwin particularly pertaining to unicode in Python.",
    "created_at": "2017-07-19T08:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168712",
    "user": "https://github.com/embray"
}
```

<div id="comment:48" align="right">comment:48</div>

I don't think there's anything about this that specifically needs testing on Cygwin.  I've never encountered any issues on Cygwin particularly pertaining to unicode in Python.



---

archive/issue_comments_168713.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nok, well. Then please review.",
    "created_at": "2017-07-19T08:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168713",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

ok, well. Then please review.



---

archive/issue_comments_168714.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThis is maybe a minor point, but here:\n\n```diff\ndiff --git a/src/sage/doctest/forker.py b/src/sage/doctest/forker.py\nindex 9a5d982..705b718 100644\n--- a/src/sage/doctest/forker.py\n+++ b/src/sage/doctest/forker.py\n@@ -514,7 +514,9 @@ class SageDocTestRunner(doctest.DocTestRunner):\n             finally:\n                 if self.debugger is not None:\n                     self.debugger.set_continue() # ==== Example Finished ====\n-            got = self._fakeout.getvalue()  # the actual output\n+            got = self._fakeout.getvalue().decode('utf-8')\n+            # the actual output\n+\n```\n\nit might be good if this were wrapped in a try/except, and fall back on latin1 if utf-8 decoding fails, like:\n\n```\ngot = self._fakeout.getvalue()\ntry:\n    got = got.decode('utf-8')\nexcept UnicodeDecodeError:\n    got = got.decode('latin1')\n```\n\nOf course this *shouldn't* happen, but in the off chance some test produces garbage output, this will at least prevent the doctest runner from crashing with a `UnicodeDecodeError`.  Instead you'll get *some* text, likely wrong, that can still be compared to the expected result.",
    "created_at": "2017-07-19T09:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168714",
    "user": "https://github.com/embray"
}
```

<div id="comment:50" align="right">comment:50</div>

This is maybe a minor point, but here:

```diff
diff --git a/src/sage/doctest/forker.py b/src/sage/doctest/forker.py
index 9a5d982..705b718 100644
--- a/src/sage/doctest/forker.py
+++ b/src/sage/doctest/forker.py
@@ -514,7 +514,9 @@ class SageDocTestRunner(doctest.DocTestRunner):
             finally:
                 if self.debugger is not None:
                     self.debugger.set_continue() # ==== Example Finished ====
-            got = self._fakeout.getvalue()  # the actual output
+            got = self._fakeout.getvalue().decode('utf-8')
+            # the actual output
+
```

it might be good if this were wrapped in a try/except, and fall back on latin1 if utf-8 decoding fails, like:

```
got = self._fakeout.getvalue()
try:
    got = got.decode('utf-8')
except UnicodeDecodeError:
    got = got.decode('latin1')
```

Of course this *shouldn't* happen, but in the off chance some test produces garbage output, this will at least prevent the doctest runner from crashing with a `UnicodeDecodeError`.  Instead you'll get *some* text, likely wrong, that can still be compared to the expected result.



---

archive/issue_comments_168715.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nLikewise here:\n\n```diff\ndiff --git a/src/sage/interfaces/r.py b/src/sage/interfaces/r.py\nindex 9db603f..e9096df 100644\n--- a/src/sage/interfaces/r.py\n+++ b/src/sage/interfaces/r.py\n@@ -668,7 +668,7 @@ class R(ExtraTabCompletion, Expect):\n             ...\n             ImportError: ...\n         \"\"\"\n-        ret = self.eval('require(\"%s\")'%library_name)\n+        ret = self.eval('require(\"%s\")'%library_name).decode('utf-8')\n         # try hard to parse the message string in a locale-independent way\n         if ' library(' in ret:       # locale-independent key-word\n             raise ImportError(\"%s\"%ret)\n```\n\nIn this case I'm not really sure what the best thing is to do if there's an encoding error, but it should probably be handled.  Will have to give that more thought.  Basically any time you're decoding bytes coming from an external source it's important not to assume they'll always have the expected encoding :(",
    "created_at": "2017-07-19T09:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168715",
    "user": "https://github.com/embray"
}
```

<div id="comment:51" align="right">comment:51</div>

Likewise here:

```diff
diff --git a/src/sage/interfaces/r.py b/src/sage/interfaces/r.py
index 9db603f..e9096df 100644
--- a/src/sage/interfaces/r.py
+++ b/src/sage/interfaces/r.py
@@ -668,7 +668,7 @@ class R(ExtraTabCompletion, Expect):
             ...
             ImportError: ...
         """
-        ret = self.eval('require("%s")'%library_name)
+        ret = self.eval('require("%s")'%library_name).decode('utf-8')
         # try hard to parse the message string in a locale-independent way
         if ' library(' in ret:       # locale-independent key-word
             raise ImportError("%s"%ret)
```

In this case I'm not really sure what the best thing is to do if there's an encoding error, but it should probably be handled.  Will have to give that more thought.  Basically any time you're decoding bytes coming from an external source it's important not to assume they'll always have the expected encoding :(



---

archive/issue_comments_168716.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe rest makes sense to me.  I haven't done a thorough investigation into all the places where Sage needs better unicode handling, and I'm sure this isn't exhaustive either, but I know you've done a lot of testing.  The next issue is just what the patchbots will say....",
    "created_at": "2017-07-19T09:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168716",
    "user": "https://github.com/embray"
}
```

<div id="comment:52" align="right">comment:52</div>

The rest makes sense to me.  I haven't done a thorough investigation into all the places where Sage needs better unicode handling, and I'm sure this isn't exhaustive either, but I know you've done a lot of testing.  The next issue is just what the patchbots will say....



---

archive/issue_comments_168717.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\npatchbots said green already..\n\n**EDIT** oh, no.. I missed the last report.",
    "created_at": "2017-07-19T09:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168717",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:53" align="right">comment:53</div>

patchbots said green already..

**EDIT** oh, no.. I missed the last report.



---

archive/issue_comments_168718.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cffa8e3b6e232982755cae45673aae3f60e8eb9\"><code>0cffa8e</code></a></td><td><code>Merge branch 'u/chapoton/14153v2' of ssh://trac.sagemath.org:22/sage into unicode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7\"><code>4dc084e</code></a></td><td><code>trac 14153 reviewer's suggestions + gap doc interface</code></td></tr></table>\n",
    "created_at": "2017-07-19T11:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168718",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cffa8e3b6e232982755cae45673aae3f60e8eb9"><code>0cffa8e</code></a></td><td><code>Merge branch 'u/chapoton/14153v2' of ssh://trac.sagemath.org:22/sage into unicode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7"><code>4dc084e</code></a></td><td><code>trac 14153 reviewer's suggestions + gap doc interface</code></td></tr></table>




---

archive/issue_comments_168719.json:
```json
{
    "body": "Changed commit from **[`8394952`](https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c)** to **[`4dc084e`](https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7)**",
    "created_at": "2017-07-19T11:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168719",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8394952`](https://github.com/sagemath/sagetrac-mirror/commit/8394952acfe919aba99695f84248edbc212a3c9c)** to **[`4dc084e`](https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7)**



---

archive/issue_comments_168720.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nDamn, some of the patchbots see some problems with the gap interface, that I do not see locally..",
    "created_at": "2017-07-20T18:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168720",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:55" align="right">comment:55</div>

Damn, some of the patchbots see some problems with the gap interface, that I do not see locally..



---

archive/issue_events_197389.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-20T18:48:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197389"
}
```



---

archive/issue_events_197390.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-20T18:48:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197390"
}
```



---

archive/issue_comments_168721.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAll clear on OS X as far as I can tell.",
    "created_at": "2017-07-21T03:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168721",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:56" align="right">comment:56</div>

All clear on OS X as far as I can tell.



---

archive/issue_comments_168722.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@fchapoton](#comment%3A55):\n> Damn, some of the patchbots see some problems with the gap interface, that I do not see locally..\n\nIt probably has something to do with their locale settings.  This is why I suggested not just assuming `.decode('utf-8')` will work :)  Now the question is, how exactly does GAP determine what encoding to use...",
    "created_at": "2017-07-21T08:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168722",
    "user": "https://github.com/embray"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@fchapoton](#comment%3A55):
> Damn, some of the patchbots see some problems with the gap interface, that I do not see locally..

It probably has something to do with their locale settings.  This is why I suggested not just assuming `.decode('utf-8')` will work :)  Now the question is, how exactly does GAP determine what encoding to use...



---

archive/issue_comments_168723.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nAh, I forgot to point that out here:\n\n```diff\ndiff --git a/src/sage/interfaces/gap.py b/src/sage/interfaces/gap.py\nindex dd7b27f..7e765a1 100644\n--- a/src/sage/interfaces/gap.py\n+++ b/src/sage/interfaces/gap.py\n@@ -188,6 +188,7 @@ from sage.interfaces.tab_completion import ExtraTabCompletion\n from sage.structure.element import ModuleElement\n import re\n import os\n+import io\n import pexpect\n import time\n import platform\n@@ -1339,7 +1340,7 @@ class Gap(Gap_generic):\n             (sline,) = match.groups()\n             if self.is_remote():\n                 self._get_tmpfile()\n-            F = open(self._local_tmpfile(),\"r\")\n+            F = io.open(self._local_tmpfile(), \"r\", encoding='utf-8')\n             help = F.read()\n             if pager:\n                 from IPython.core.page import page\n```\n\nLet's see if we can determine what encoding GAP is actually using...",
    "created_at": "2017-07-21T08:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168723",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

Ah, I forgot to point that out here:

```diff
diff --git a/src/sage/interfaces/gap.py b/src/sage/interfaces/gap.py
index dd7b27f..7e765a1 100644
--- a/src/sage/interfaces/gap.py
+++ b/src/sage/interfaces/gap.py
@@ -188,6 +188,7 @@ from sage.interfaces.tab_completion import ExtraTabCompletion
 from sage.structure.element import ModuleElement
 import re
 import os
+import io
 import pexpect
 import time
 import platform
@@ -1339,7 +1340,7 @@ class Gap(Gap_generic):
             (sline,) = match.groups()
             if self.is_remote():
                 self._get_tmpfile()
-            F = open(self._local_tmpfile(),"r")
+            F = io.open(self._local_tmpfile(), "r", encoding='utf-8')
             help = F.read()
             if pager:
                 from IPython.core.page import page
```

Let's see if we can determine what encoding GAP is actually using...



---

archive/issue_comments_168724.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nMaybe we should force the value of `\"GAPInfo.TermEncoding\"` ?\n\nsee https://www.gap-system.org/Manuals/pkg/GAPDoc-1.5.1/doc/chap5.html\n\nMaybe using `GAPInfo.TermEncoding := \"UTF-8\";`\n\nI know nothing of GAP, some input from a GAP expert could be useful here..",
    "created_at": "2017-07-21T08:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168724",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:59" align="right">comment:59</div>

Maybe we should force the value of `"GAPInfo.TermEncoding"` ?

see https://www.gap-system.org/Manuals/pkg/GAPDoc-1.5.1/doc/chap5.html

Maybe using `GAPInfo.TermEncoding := "UTF-8";`

I know nothing of GAP, some input from a GAP expert could be useful here..



---

archive/issue_comments_168725.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI can reproduce the failing doctests locally by adding one line\n\n```\n         self.eval('SetGAPDocTextTheme(\"none\")')\n+        self.eval('GAPInfo.TermEncoding := \"latin1\";')\n         self.eval(r'\\$SAGE.tempfile := \"%s\";'%tmp_to_use)\n```",
    "created_at": "2017-07-21T09:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168725",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:60" align="right">comment:60</div>

I can reproduce the failing doctests locally by adding one line

```
         self.eval('SetGAPDocTextTheme("none")')
+        self.eval('GAPInfo.TermEncoding := "latin1";')
         self.eval(r'\$SAGE.tempfile := "%s";'%tmp_to_use)
```



---

archive/issue_comments_168726.json:
```json
{
    "body": "Changed commit from **[`4dc084e`](https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7)** to **[`1c0dd43`](https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d)**",
    "created_at": "2017-07-21T09:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4dc084e`](https://github.com/sagemath/sagetrac-mirror/commit/4dc084e452d83fe8bf80b105d25b404a21092be7)** to **[`1c0dd43`](https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d)**



---

archive/issue_comments_168727.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d\"><code>1c0dd43</code></a></td><td><code>trac 14153 trying to fix the gap doc doctests</code></td></tr></table>\n",
    "created_at": "2017-07-21T09:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168727",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d"><code>1c0dd43</code></a></td><td><code>trac 14153 trying to fix the gap doc doctests</code></td></tr></table>




---

archive/issue_comments_168728.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nnot sure at all that this is a good solution..",
    "created_at": "2017-07-21T09:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168728",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:62" align="right">comment:62</div>

not sure at all that this is a good solution..



---

archive/issue_comments_168729.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nInteresting.  It's not clear to me where `TermEncoding` is used in the process of displaying some help docs.  But if you were able to reproduce by setting that then it must be involved somewhere, somehow...",
    "created_at": "2017-07-21T09:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168729",
    "user": "https://github.com/embray"
}
```

<div id="comment:63" align="right">comment:63</div>

Interesting.  It's not clear to me where `TermEncoding` is used in the process of displaying some help docs.  But if you were able to reproduce by setting that then it must be involved somewhere, somehow...



---

archive/issue_comments_168730.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nsee the section `5.3-2 GAPDoc2Text` in the link \u200bhttps://www.gap-system.org/Manuals/pkg/GAPDoc-1.5.1/doc/chap5.html\n\nI think this explain what GAP does when its doc is required as a text.",
    "created_at": "2017-07-21T09:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168730",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:64" align="right">comment:64</div>

see the section `5.3-2 GAPDoc2Text` in the link ​https://www.gap-system.org/Manuals/pkg/GAPDoc-1.5.1/doc/chap5.html

I think this explain what GAP does when its doc is required as a text.



---

archive/issue_comments_168731.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nGreat, that should explain it then.\n\nHmm--maybe rather than forcing `TermEncoding` to a specific value we should read `TermEncoding` and use that to determine how to decode text from GAP.",
    "created_at": "2017-07-21T09:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168731",
    "user": "https://github.com/embray"
}
```

<div id="comment:65" align="right">comment:65</div>

Great, that should explain it then.

Hmm--maybe rather than forcing `TermEncoding` to a specific value we should read `TermEncoding` and use that to determine how to decode text from GAP.



---

archive/issue_comments_168732.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd\"><code>0faa943</code></a></td><td><code>trac 14153 detect gap encoding</code></td></tr></table>\n",
    "created_at": "2017-07-21T11:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168732",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd"><code>0faa943</code></a></td><td><code>trac 14153 detect gap encoding</code></td></tr></table>




---

archive/issue_comments_168733.json:
```json
{
    "body": "Changed commit from **[`1c0dd43`](https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d)** to **[`0faa943`](https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd)**",
    "created_at": "2017-07-21T11:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168733",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1c0dd43`](https://github.com/sagemath/sagetrac-mirror/commit/1c0dd43920d5c81b164992fbaf9ecd9f81a3154d)** to **[`0faa943`](https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd)**



---

archive/issue_comments_168734.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nindeed, here is a try..",
    "created_at": "2017-07-21T11:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168734",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:67" align="right">comment:67</div>

indeed, here is a try..



---

archive/issue_events_197391.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-21T11:26:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197391"
}
```



---

archive/issue_events_197392.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-21T11:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197392"
}
```



---

archive/issue_comments_168735.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nbot seems to be stable-green, please review",
    "created_at": "2017-07-25T06:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168735",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:69" align="right">comment:69</div>

bot seems to be stable-green, please review



---

archive/issue_comments_168736.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nping ? Jeroen ? Erik ?",
    "created_at": "2017-07-31T20:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168736",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:70" align="right">comment:70</div>

ping ? Jeroen ? Erik ?



---

archive/issue_comments_168737.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nCan you replace the unconditional except: with something more sensible? Probably just name = str(name) instead of the entire try/except + assertion. Rest lgtm",
    "created_at": "2017-08-05T15:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168737",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:71" align="right">comment:71</div>

Can you replace the unconditional except: with something more sensible? Probably just name = str(name) instead of the entire try/except + assertion. Rest lgtm



---

archive/issue_comments_168738.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6077c0c4646081d578914885c74909f4e399426\"><code>b6077c0</code></a></td><td><code>Merge branch 'u/chapoton/14153v2' in 8.1.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04\"><code>ed1e3b5</code></a></td><td><code>trac 14153 more precise except clause</code></td></tr></table>\n",
    "created_at": "2017-08-05T15:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168738",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6077c0c4646081d578914885c74909f4e399426"><code>b6077c0</code></a></td><td><code>Merge branch 'u/chapoton/14153v2' in 8.1.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04"><code>ed1e3b5</code></a></td><td><code>trac 14153 more precise except clause</code></td></tr></table>




---

archive/issue_comments_168739.json:
```json
{
    "body": "Changed commit from **[`0faa943`](https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd)** to **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**",
    "created_at": "2017-08-05T15:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168739",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0faa943`](https://github.com/sagemath/sagetrac-mirror/commit/0faa9436561f00cf1ed5b9c8a65ca4667032f2dd)** to **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**



---

archive/issue_comments_168740.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nThanks Volker for having a look.\n\nI have made a more precise except. I guess one could also have removed the try-except.",
    "created_at": "2017-08-05T15:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168740",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:73" align="right">comment:73</div>

Thanks Volker for having a look.

I have made a more precise except. I guess one could also have removed the try-except.



---

archive/issue_comments_168741.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nbot is morally green",
    "created_at": "2017-08-06T19:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168741",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:74" align="right">comment:74</div>

bot is morally green



---

archive/issue_events_197393.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-08-06T20:00:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197393"
}
```



---

archive/issue_events_197394.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-08-06T20:00:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197394"
}
```



---

archive/issue_comments_168742.json:
```json
{
    "body": "Changed reviewer from **Erik Bray** to **Erik Bray, Volker Bruan, David Roe**",
    "created_at": "2017-08-06T20:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168742",
    "user": "https://github.com/roed314"
}
```

Changed reviewer from **Erik Bray** to **Erik Bray, Volker Bruan, David Roe**



---

archive/issue_comments_168743.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nLooks good.  Sorry that this review took so long!",
    "created_at": "2017-08-06T20:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168743",
    "user": "https://github.com/roed314"
}
```

<div id="comment:75" align="right">comment:75</div>

Looks good.  Sorry that this review took so long!



---

archive/issue_comments_168744.json:
```json
{
    "body": "Changed reviewer from **Erik Bray, Volker Bruan, David Roe** to **Erik Bray, Volker Braun, David Roe**",
    "created_at": "2017-08-09T19:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168744",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Erik Bray, Volker Bruan, David Roe** to **Erik Bray, Volker Braun, David Roe**



---

archive/issue_comments_168745.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nSorry for the typo Volker!",
    "created_at": "2017-08-11T02:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168745",
    "user": "https://github.com/roed314"
}
```

<div id="comment:77" align="right">comment:77</div>

Sorry for the typo Volker!



---

archive/issue_events_197395.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-11T18:18:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197395"
}
```



---

archive/issue_events_197396.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "44fba6b9dbbced88894a153996e7df96d2ad1165",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-08-11T18:18:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14153#event-197396"
}
```



---

archive/issue_comments_168746.json:
```json
{
    "body": "Changed branch from **[u/chapoton/14153v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153v2)** to **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**",
    "created_at": "2017-08-11T18:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14153#issuecomment-168746",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/14153v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/14153v2)** to **[`ed1e3b5`](https://github.com/sagemath/sagetrac-mirror/commit/ed1e3b5bf17e6cc923e28b11862496dd0e1b9b04)**
