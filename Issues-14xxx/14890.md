# Issue 14890: rounding in logs

archive/issues_014686.json:
```json
{
    "body": "Logarithms are not rounded correctly:\n\n```\nsage: (3.0^5).log(3.0) - 5.0\n-8.88178419700125e-16\n```\n\nAssignee: @aghitza\n\nKeywords: logarithm mpfr rounding\n\nReviewer: Jeroen Demeyer\n\nResolution: wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/14890\n\n",
    "closed_at": "2014-08-29T18:33:03Z",
    "created_at": "2013-07-14T17:26:14Z",
    "labels": [
        "component: basic arithmetic",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "rounding in logs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14890",
    "user": "https://trac.sagemath.org/admin/accounts/users/amy"
}
```
Logarithms are not rounded correctly:

```
sage: (3.0^5).log(3.0) - 5.0
-8.88178419700125e-16
```

Assignee: @aghitza

Keywords: logarithm mpfr rounding

Reviewer: Jeroen Demeyer

Resolution: wontfix

Issue created by migration from https://trac.sagemath.org/ticket/14890





---

archive/issue_comments_239270.json:
```json
{
    "body": "<a id='comment:1'></a>\nauthor is for the author of the patch :)  This is probably typical floating point stuff, not sure how easy it would be to fix.",
    "created_at": "2013-07-15T01:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239270",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
author is for the author of the patch :)  This is probably typical floating point stuff, not sure how easy it would be to fix.



---

archive/issue_comments_239271.json:
```json
{
    "body": "Changing author from \"Amy Feaver, Anne Ho\" to \"\"",
    "created_at": "2013-07-15T01:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239271",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "Amy Feaver, Anne Ho" to ""



---

archive/issue_events_049190.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49190"
}
```



---

archive/issue_events_049191.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49191"
}
```



---

archive/issue_events_049192.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49192"
}
```



---

archive/issue_comments_239272.json:
```json
{
    "body": "Changing keywords from \"logarithms\" to \"logarithm mpfr rounding\".",
    "created_at": "2014-06-27T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239272",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "logarithms" to "logarithm mpfr rounding".



---

archive/issue_comments_239273.json:
```json
{
    "body": "Changing assignee from @burcin to @aghitza.",
    "created_at": "2014-06-27T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239273",
    "user": "https://github.com/jdemeyer"
}
```

Changing assignee from @burcin to @aghitza.



---

archive/issue_comments_239274.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,22 +1,6 @@\n-Logarithms seem to evaluate numbers differently, depending on type. This causes some precision errors when using numbers which can be coerced into integers. For example, if we use integers and evaluate something of the form log_b(b^k) the answer is what it should be:\n+Logarithms are not rounded correctly:\n \n ```\n-sage: log(3^5,3)==5\n-True\n+sage: (3.0^5).log(3.0) - 5.0\n+-8.88178419700125e-16\n ```\n-\n-However, if we use reals which can be coerced into integers, the answer is rounded and slightly off:\n-\n-```\n-sage: log(3.0^5,3.0)==5\n-False\n-```\n-\n-This problem doesn't always happen, for example if we replace the 5 with 12:\n-\n-```\n-sage: log(3.0^12,3.0)==12\n-True\n-```\n-\n-This only seems to be happening for some exponents; in base 3, we found that this sort of expression evaluates to False for exponents equal to 5, 13 and 17, but it does not happen for numbers in between.\n``````\n",
    "created_at": "2014-06-27T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239274",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,22 +1,6 @@
-Logarithms seem to evaluate numbers differently, depending on type. This causes some precision errors when using numbers which can be coerced into integers. For example, if we use integers and evaluate something of the form log_b(b^k) the answer is what it should be:
+Logarithms are not rounded correctly:
 
 ```
-sage: log(3^5,3)==5
-True
+sage: (3.0^5).log(3.0) - 5.0
+-8.88178419700125e-16
 ```
-
-However, if we use reals which can be coerced into integers, the answer is rounded and slightly off:
-
-```
-sage: log(3.0^5,3.0)==5
-False
-```
-
-This problem doesn't always happen, for example if we replace the 5 with 12:
-
-```
-sage: log(3.0^12,3.0)==12
-True
-```
-
-This only seems to be happening for some exponents; in base 3, we found that this sort of expression evaluates to False for exponents equal to 5, 13 and 17, but it does not happen for numbers in between.
``````




---

archive/issue_events_049193.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49193"
}
```



---

archive/issue_events_049194.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49194"
}
```



---

archive/issue_comments_239275.json:
```json
{
    "body": "<a id='comment:6'></a>\nSage is not the place to implement this. If you really need this, it should be implemented in MPFR, then Sage can interface it.\n\nClose as \"wontfix\".",
    "created_at": "2014-08-29T16:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239275",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Sage is not the place to implement this. If you really need this, it should be implemented in MPFR, then Sage can interface it.

Close as "wontfix".



---

archive/issue_events_049195.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-08-29T16:11:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49195"
}
```



---

archive/issue_events_049196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-08-29T16:11:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49196"
}
```



---

archive/issue_comments_239276.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-29T16:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239276",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239277.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-08-29T16:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239277",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_239278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-29T16:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239278",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239279.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2014-08-29T18:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14890#issuecomment-239279",
    "user": "https://github.com/vbraun"
}
```

Resolution: wontfix



---

archive/issue_events_049197.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-29T18:33:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14890",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14890#event-49197"
}
```
