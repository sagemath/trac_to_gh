# Issue 14498: trees and binary trees

archive/issues_014294.json:
```json
{
    "body": "Hi,\n\nI propose several methods for trees and binary trees:\n\nFile : trees_classicals_algorithms_EliX-jbp: \nseveral classical operations on trees and binary trees\n- on abstract trees:\n  * depth pre/post order transversal algorithm\n  * breadth first order transversal algorithm\n- on binary trees:\n  * infix order transversal algorithm\n  * canonical permutation associated to the left/right binary search tree insertion\n  * left/right rotate (for labelled and unlabelled BT)\n\nFile: trees_research_algorithms_EliX-jbp:\nseveral research algorithms on binary trees\n- over/under (Loday-Ronco)\n- pred/succ in the Tamari lattice\n- hook length formula\n\nFile: trees_latex_output_EliX-jbp:\na method for nice latex output\n\nApply:\n\n* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n* [attachment:trac_14498-tree-imps-dg-rebased.patch\u200b]\n* [attachment:trac_14998-more-edits-dg.patch\u200b]\n* [attachment:trac_14498-further-docfixes-dg.patch\u200b]\n\nAssignee: sage-combinat\n\nCC:  florent.hivert@lri.fr viviane.pons@univ-mlv.fr @fchapoton @nathanncohen\n\nKeywords: trees, binary trees, latex\n\nReviewer: Darij Grinberg, Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Jean-Baptiste Priez\n\nBranch: public/ticket/14498\n\nDependencies: #8703, #14784\n\nCommit: 4e8fdd036a5644ca661b3b39191cfce37d5b22b9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14498\n\n",
    "closed_at": "2014-02-03T22:58:50Z",
    "created_at": "2013-04-27T11:31:17Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "trees and binary trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14498",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```
Hi,

I propose several methods for trees and binary trees:

File : trees_classicals_algorithms_EliX-jbp: 
several classical operations on trees and binary trees
- on abstract trees:
  * depth pre/post order transversal algorithm
  * breadth first order transversal algorithm
- on binary trees:
  * infix order transversal algorithm
  * canonical permutation associated to the left/right binary search tree insertion
  * left/right rotate (for labelled and unlabelled BT)

File: trees_research_algorithms_EliX-jbp:
several research algorithms on binary trees
- over/under (Loday-Ronco)
- pred/succ in the Tamari lattice
- hook length formula

File: trees_latex_output_EliX-jbp:
a method for nice latex output

Apply:

* [attachment:trac_14498-algorithms_trees-rebased.patch​]
* [attachment:trac_14498-tree-imps-dg-rebased.patch​]
* [attachment:trac_14998-more-edits-dg.patch​]
* [attachment:trac_14498-further-docfixes-dg.patch​]

Assignee: sage-combinat

CC:  florent.hivert@lri.fr viviane.pons@univ-mlv.fr @fchapoton @nathanncohen

Keywords: trees, binary trees, latex

Reviewer: Darij Grinberg, Frédéric Chapoton

Author: Jean-Baptiste Priez

Branch: public/ticket/14498

Dependencies: #8703, #14784

Commit: 4e8fdd036a5644ca661b3b39191cfce37d5b22b9

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14498





---

archive/issue_comments_192189.json:
```json
{
    "body": "Attachment [trac_14498_trees_classicals_algorithms_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_classicals_algorithms_EliX-jbp.patch) by elixyre created at 2013-04-27 11:32:09",
    "created_at": "2013-04-27T11:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192189",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Attachment [trac_14498_trees_classicals_algorithms_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_classicals_algorithms_EliX-jbp.patch) by elixyre created at 2013-04-27 11:32:09



---

archive/issue_comments_192190.json:
```json
{
    "body": "Attachment [trac_14498_trees_latex_output_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_latex_output_EliX-jbp.patch) by elixyre created at 2013-04-27 11:32:25",
    "created_at": "2013-04-27T11:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192190",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Attachment [trac_14498_trees_latex_output_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_latex_output_EliX-jbp.patch) by elixyre created at 2013-04-27 11:32:25



---

archive/issue_comments_192191.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-27T11:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192191",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_192192.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [trac_14498_trees_research_algorithms_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_research_algorithms_EliX-jbp.patch) by elixyre created at 2013-04-27 11:33:03",
    "created_at": "2013-04-27T11:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192192",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:1'></a>Attachment [trac_14498_trees_research_algorithms_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_research_algorithms_EliX-jbp.patch) by elixyre created at 2013-04-27 11:33:03



---

archive/issue_comments_192193.json:
```json
{
    "body": "<a id='comment:2'></a>Maybe there is a dependency on #8703 ?",
    "created_at": "2013-04-27T21:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192193",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>Maybe there is a dependency on #8703 ?



---

archive/issue_comments_192194.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 chapoton]:\n> Maybe there is a dependency on #8703 ?\n\n\nYes that's true.",
    "created_at": "2013-04-28T06:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192194",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:3'></a>Replying to [comment:2 chapoton]:
> Maybe there is a dependency on #8703 ?


Yes that's true.



---

archive/issue_comments_192195.json:
```json
{
    "body": "<a id='comment:4'></a>A nice step towards the Hopf algebras. Some comments:\n\n`@`Classical algorithms:\n\nTypo appearing twice: \"explorer\" (should be \"explores\"). Also, \"An other\" -> \"Another\".\n\nNot sure, but I also think \"transversal\" should be \"traversal\".\n\nThe docstrings fail to explain an important point: what exactly \"manipulate\" means (and, correspondingly, what the \"action\" variable is for). The first time I read them I thought the methods output the list of nodes in the respective order! The doc for ``in_order_transversal`` should explain the difference between node_action and leaf_action. By the way, why do the other methods have only 1 type of action?\n\nThe example for ``in_order_transversal`` has two different things called \"b\". Not a big issue, of course.\n\nI don't understand what \"the canonical permutation associated to the binary search tree insertion\" is supposed to mean; is this a notation from one of Loday(-Ronco)'s papers?\n\nCopypaste error: the docstring for ``left_rotate`` says \"Right\". (Both times.)\n\n`@`Research algorithms:\n\nIs computing the hook_length_formula by symbolic integration really easier than just recursively multiplying the hook_length_formulas for the left and right subtrees and then multiplying by an appropriate binomial coefficient? I'm not saying it isn't, just asking.",
    "created_at": "2013-05-11T02:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192195",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>A nice step towards the Hopf algebras. Some comments:

`@`Classical algorithms:

Typo appearing twice: "explorer" (should be "explores"). Also, "An other" -> "Another".

Not sure, but I also think "transversal" should be "traversal".

The docstrings fail to explain an important point: what exactly "manipulate" means (and, correspondingly, what the "action" variable is for). The first time I read them I thought the methods output the list of nodes in the respective order! The doc for ``in_order_transversal`` should explain the difference between node_action and leaf_action. By the way, why do the other methods have only 1 type of action?

The example for ``in_order_transversal`` has two different things called "b". Not a big issue, of course.

I don't understand what "the canonical permutation associated to the binary search tree insertion" is supposed to mean; is this a notation from one of Loday(-Ronco)'s papers?

Copypaste error: the docstring for ``left_rotate`` says "Right". (Both times.)

`@`Research algorithms:

Is computing the hook_length_formula by symbolic integration really easier than just recursively multiplying the hook_length_formulas for the left and right subtrees and then multiplying by an appropriate binomial coefficient? I'm not saying it isn't, just asking.



---

archive/issue_comments_192196.json:
```json
{
    "body": "<a id='comment:5'></a>Some doctests are failing, please correct them.",
    "created_at": "2013-05-23T19:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192196",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>Some doctests are failing, please correct them.



---

archive/issue_comments_192197.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-23T19:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192197",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_192198.json:
```json
{
    "body": "Attachment [trac_14498_trees_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_EliX-jbp.patch) by elixyre created at 2013-06-22 15:45:00",
    "created_at": "2013-06-22T15:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192198",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Attachment [trac_14498_trees_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_trees_EliX-jbp.patch) by elixyre created at 2013-06-22 15:45:00



---

archive/issue_comments_192199.json:
```json
{
    "body": "<a id='comment:6'></a>This new patch contains all the modifications. \n\nReplying to [comment:4 darij]:\n> Typo appearing twice: \"explorer\" (should be \"explores\"). Also, \"An other\" -> \"Another\".\n> \n> Not sure, but I also think \"transversal\" should be \"traversal\".\n\n\nTypo ok? \n \n> The docstrings fail to explain an important point: what exactly \"manipulate\" means (and, correspondingly, what the \"action\" variable is for). The first time I read them I thought the methods output the list of nodes in the respective order! The doc for ``in_order_transversal`` should explain the difference between node_action and leaf_action. By the way, why do the other methods have only 1 type of action?\n\n\nI tried to explain what is \"action\". But my english is very bad so... About, ``action`` and ``leaf/node_action``... The distinction between leaf and node on Abstract Trees class is not clear for me. \n\n> I don't understand what \"the canonical permutation associated to the binary search tree insertion\" is supposed to mean; is this a notation from one of Loday(-Ronco)'s papers?\n\n\nThe term canonical is may be not a good choose, this method is suppose to compute a representant of the ``sylvester class``... \n\n> Copypaste error: the docstring for ``left_rotate`` says \"Right\". (Both times.)\n\n\nOK \n \n> `@`Research algorithms:\n> \n> Is computing the hook_length_formula by symbolic integration really easier than just recursively multiplying the hook_length_formulas for the left and right subtrees and then multiplying by an appropriate binomial coefficient? I'm not saying it isn't, just asking.\n\n\nI implement the `q_hook_length_formula`. \n\nReplying to [comment:5 chapoton]:\n> Some doctests are failing, please correct them.\n\n\nOK",
    "created_at": "2013-06-22T15:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192199",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:6'></a>This new patch contains all the modifications. 

Replying to [comment:4 darij]:
> Typo appearing twice: "explorer" (should be "explores"). Also, "An other" -> "Another".
> 
> Not sure, but I also think "transversal" should be "traversal".


Typo ok? 
 
> The docstrings fail to explain an important point: what exactly "manipulate" means (and, correspondingly, what the "action" variable is for). The first time I read them I thought the methods output the list of nodes in the respective order! The doc for ``in_order_transversal`` should explain the difference between node_action and leaf_action. By the way, why do the other methods have only 1 type of action?


I tried to explain what is "action". But my english is very bad so... About, ``action`` and ``leaf/node_action``... The distinction between leaf and node on Abstract Trees class is not clear for me. 

> I don't understand what "the canonical permutation associated to the binary search tree insertion" is supposed to mean; is this a notation from one of Loday(-Ronco)'s papers?


The term canonical is may be not a good choose, this method is suppose to compute a representant of the ``sylvester class``... 

> Copypaste error: the docstring for ``left_rotate`` says "Right". (Both times.)


OK 
 
> `@`Research algorithms:
> 
> Is computing the hook_length_formula by symbolic integration really easier than just recursively multiplying the hook_length_formulas for the left and right subtrees and then multiplying by an appropriate binomial coefficient? I'm not saying it isn't, just asking.


I implement the `q_hook_length_formula`. 

Replying to [comment:5 chapoton]:
> Some doctests are failing, please correct them.


OK



---

archive/issue_comments_192200.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-07-03T10:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192200",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_192201.json:
```json
{
    "body": "<a id='comment:9'></a>Hi, \n\nI cannot apply your patch, maybe it's conflicting with #14731 and #14784 which have already been positively reviewed are already or will be merged in sage 5.11. Also, we actually wrote twice the same things, I have two methods \"to_132_avoiding_permutation\" and \"to_312_avoiding_permutation\" which are somehow similar to your \"canonical_permutation\". I think we should keep my name which is clearer. But for these methods, I wrote a \"_postfix_word\" method which is similar to your \"post_order_traversal\" thing (but I think yours is better and with better documentation). But my patch has already been merged, so you should write yours on top of mine and just replace my methods by yours when they're better. \n\nAbout names, I think \"sylvestrohedron_greater\" is not a good name, we should say \"Tamari_greater\", because it's more commonly used.\n\nDo you want to come to Marne-la-vallee so that we can work on the merge of your patch with mine? I'll be there Thursday, Friday and Monday. Then again at the end of July. Please tell me",
    "created_at": "2013-07-03T15:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192201",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:9'></a>Hi, 

I cannot apply your patch, maybe it's conflicting with #14731 and #14784 which have already been positively reviewed are already or will be merged in sage 5.11. Also, we actually wrote twice the same things, I have two methods "to_132_avoiding_permutation" and "to_312_avoiding_permutation" which are somehow similar to your "canonical_permutation". I think we should keep my name which is clearer. But for these methods, I wrote a "_postfix_word" method which is similar to your "post_order_traversal" thing (but I think yours is better and with better documentation). But my patch has already been merged, so you should write yours on top of mine and just replace my methods by yours when they're better. 

About names, I think "sylvestrohedron_greater" is not a good name, we should say "Tamari_greater", because it's more commonly used.

Do you want to come to Marne-la-vallee so that we can work on the merge of your patch with mine? I'll be there Thursday, Friday and Monday. Then again at the end of July. Please tell me



---

archive/issue_comments_192202.json:
```json
{
    "body": "<a id='comment:10'></a>Attachment [trac_14498_algorithms_trees_13_07_09_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_algorithms_trees_13_07_09_EliX-jbp.patch) by elixyre created at 2013-07-09 12:04:02\n\nHi,\n\nI have removed canonical permutation and add some other classical methods on trees (is_perfect, complete, ...).\n\nI don't modify your \"_postfix_word\" with \"post_order_traversal\" because it is more specific... in the traversal algorithm we don't care about the children order.\n\nThe \"sylvestrohedron\" is become \"tamari\".\n\nThanks, JB",
    "created_at": "2013-07-09T12:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192202",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:10'></a>Attachment [trac_14498_algorithms_trees_13_07_09_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_algorithms_trees_13_07_09_EliX-jbp.patch) by elixyre created at 2013-07-09 12:04:02

Hi,

I have removed canonical permutation and add some other classical methods on trees (is_perfect, complete, ...).

I don't modify your "_postfix_word" with "post_order_traversal" because it is more specific... in the traversal algorithm we don't care about the children order.

The "sylvestrohedron" is become "tamari".

Thanks, JB



---

archive/issue_comments_192203.json:
```json
{
    "body": "<a id='comment:11'></a>please write which patches should be applied\n\n* in a comment, for the bot\n* in the description, for humans",
    "created_at": "2013-07-11T18:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192203",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>please write which patches should be applied

* in a comment, for the bot
* in the description, for humans



---

archive/issue_comments_192204.json:
```json
{
    "body": "<a id='comment:12'></a>Hi Jean-Baptiste, thanks for the changes (but aren't the \"An other\" and \"explorer\" typos still there?).\n\nIn the q-hook-length formula, are you sure you want to work in the symbolic ring? That is, you really want not to do any cancellations? For example, your doctested example\n\n```\n            sage: BinaryTree([[],[]]).q_hook_length_formula()\n            (((q + 2)*q + 2)*q + 1)*q/((q + 1)*q + 1)\n```\nsimplifies to `q^2 + q`. I have not done any speed tests, but I would be surprised if the fraction field of a univariate polynomial ring wasn't faster than the symbolic ring (also I don't trust the symbolic ring, but this might be unfounded). Alternatively, you can make a recursive computation with q-binomial coefficients that never leaves the polynomial ring; but not sure if this is very efficient (q-binomial coefficient might be dense).\n\nI think the formula in the docstring of q_hook_length_formula() doesn't match the algorithm. In the formula, there is a positive power of q in the denominator (which should give a Laurent polynomial, not a polynomial), while in the algorithm there is a negative power of q in the denominator (which gives a polynomial divisible by some power of q in the end). I'm not sure why the power of q is there at all...\n\nI hate to say I am still confused by the input syntax of trees:\n\n```\nsage: b = BinaryTree([[None,[]],[[[],[]],[]]]).canonical_labelling()   \nsage: parent(b)\nLabelled binary trees\nsage: b\n3[1[., 2[., .]], 7[5[4[., .], 6[., .]], 8[., .]]]\nsage: OrderedTree(b)\n[[[], [[], []]], [[[[], []], [[], []]], [[], []]]]\nsage: b.node_number()\n8\nsage: OrderedTree(b).node_number()\n17\n```\n\nApparently the coercion(!) from b to an ordered tree replaces every leaf by a node with two children because for some reason leaves of binary trees are stored as nodes-with-two-children internally. This is all defensible from some viewpoint, but I want it doced. Once somebody clears this up I would volunteer to review #14498, but so far I don't want to spread my own confusion...",
    "created_at": "2013-07-15T09:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192204",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:12'></a>Hi Jean-Baptiste, thanks for the changes (but aren't the "An other" and "explorer" typos still there?).

In the q-hook-length formula, are you sure you want to work in the symbolic ring? That is, you really want not to do any cancellations? For example, your doctested example

```
            sage: BinaryTree([[],[]]).q_hook_length_formula()
            (((q + 2)*q + 2)*q + 1)*q/((q + 1)*q + 1)
```
simplifies to `q^2 + q`. I have not done any speed tests, but I would be surprised if the fraction field of a univariate polynomial ring wasn't faster than the symbolic ring (also I don't trust the symbolic ring, but this might be unfounded). Alternatively, you can make a recursive computation with q-binomial coefficients that never leaves the polynomial ring; but not sure if this is very efficient (q-binomial coefficient might be dense).

I think the formula in the docstring of q_hook_length_formula() doesn't match the algorithm. In the formula, there is a positive power of q in the denominator (which should give a Laurent polynomial, not a polynomial), while in the algorithm there is a negative power of q in the denominator (which gives a polynomial divisible by some power of q in the end). I'm not sure why the power of q is there at all...

I hate to say I am still confused by the input syntax of trees:

```
sage: b = BinaryTree([[None,[]],[[[],[]],[]]]).canonical_labelling()   
sage: parent(b)
Labelled binary trees
sage: b
3[1[., 2[., .]], 7[5[4[., .], 6[., .]], 8[., .]]]
sage: OrderedTree(b)
[[[], [[], []]], [[[[], []], [[], []]], [[], []]]]
sage: b.node_number()
8
sage: OrderedTree(b).node_number()
17
```

Apparently the coercion(!) from b to an ordered tree replaces every leaf by a node with two children because for some reason leaves of binary trees are stored as nodes-with-two-children internally. This is all defensible from some viewpoint, but I want it doced. Once somebody clears this up I would volunteer to review #14498, but so far I don't want to spread my own confusion...



---

archive/issue_comments_192205.json:
```json
{
    "body": "Attachment [trac_14498-typos-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-typos-dg.patch) by @darijgr created at 2013-07-15 09:56:05\n\nnot a review but just a fix for a couple typos. Jean-Baptiste, can you please look this over and qfold into your patch?",
    "created_at": "2013-07-15T09:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192205",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14498-typos-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-typos-dg.patch) by @darijgr created at 2013-07-15 09:56:05

not a review but just a fix for a couple typos. Jean-Baptiste, can you please look this over and qfold into your patch?



---

archive/issue_comments_192206.json:
```json
{
    "body": "<a id='comment:13'></a>Attachment [trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch) by elixyre created at 2013-07-15 20:24:58\n\nHello,\n\nI added your modifications and I modify *q_hook_length_formula* with ... I am not sure about what to do with that... could you check it is correct now.\n\nReplying to [comment:11 chapoton]:\n> please write which patches should be applied\n> \n> * in a comment, for the bot\n> * in the description, for humans\n\n\nFor human, apply: trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch\n\nFor the bot... I don't know how to do a comment.\n\nThanks,\nJean-Baptiste",
    "created_at": "2013-07-15T20:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192206",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:13'></a>Attachment [trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch) by elixyre created at 2013-07-15 20:24:58

Hello,

I added your modifications and I modify *q_hook_length_formula* with ... I am not sure about what to do with that... could you check it is correct now.

Replying to [comment:11 chapoton]:
> please write which patches should be applied
> 
> * in a comment, for the bot
> * in the description, for humans


For human, apply: trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch

For the bot... I don't know how to do a comment.

Thanks,
Jean-Baptiste



---

archive/issue_comments_192207.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -21,6 +21,10 @@\n File: trees_latex_output_EliX-jbp:\n a method for nice latex output\n \n+Apply:\n+\n+* [attachment:trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch]\n+\n Author: Jean-Baptiste Priez\n \n Issue created by migration from https://trac.sagemath.org/ticket/14498\n```\n",
    "created_at": "2013-07-17T11:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192207",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -21,6 +21,10 @@
 File: trees_latex_output_EliX-jbp:
 a method for nice latex output
 
+Apply:
+
+* [attachment:trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch]
+
 Author: Jean-Baptiste Priez
 
 Issue created by migration from https://trac.sagemath.org/ticket/14498
```




---

archive/issue_comments_192208.json:
```json
{
    "body": "<a id='comment:14'></a>well, what you have just written is a **comment**. And what I write now is another one.\n\nfor humans, I have added one line in the **description** (see top of the page)\n\nfor the bot, you just have to write the following line\n\napply trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch",
    "created_at": "2013-07-17T11:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192208",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>well, what you have just written is a **comment**. And what I write now is another one.

for humans, I have added one line in the **description** (see top of the page)

for the bot, you just have to write the following line

apply trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch



---

archive/issue_comments_192209.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-07-17T20:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192209",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_192210.json:
```json
{
    "body": "<a id='comment:15'></a>the patch does not apply on 5.11.beta3",
    "created_at": "2013-07-17T20:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192210",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>the patch does not apply on 5.11.beta3



---

archive/issue_comments_192211.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-07-19T08:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192211",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_192212.json:
```json
{
    "body": "<a id='comment:17'></a>Hi every one,\n\nI don't understand why the patchbot don't work... I try (again) on my 5.11beta3 and all seems to be for me...\nSomeone can looks that??\n\nThanks,\n\nJean-Baptiste Priez",
    "created_at": "2013-07-29T14:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192212",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:17'></a>Hi every one,

I don't understand why the patchbot don't work... I try (again) on my 5.11beta3 and all seems to be for me...
Someone can looks that??

Thanks,

Jean-Baptiste Priez



---

archive/issue_events_041221.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14498#event-41221"
}
```



---

archive/issue_comments_192213.json:
```json
{
    "body": "<a id='comment:19'></a>Have you made your patch using \"hg export\" or in some other strange way (by hand) ?\n\nThe standard process is to use\n\n```\nhg export tip > $HOME/trac_xxx.patch\n```\nto export the patch as a file, after making sure your patch is the top applied patch. Then upload the resulting file to trac.\n\nAny other way is bound to have strange results..\n\nIt looks like you have concatenated several patches by hand maybe ? You must use hg qfold to do that.\n\n---\n\nQuick comments on the code:\n\nit is a bad idea to use \n\n```\nq = SymbolicRing().var('q')\n```\n\nto have a polynomial variable. Much better is\n\n```\nq = polygen(QQ, 'q')\n```\nIn the same hook-length function, you should write \"There are 20 permutations\"",
    "created_at": "2013-08-20T19:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192213",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>Have you made your patch using "hg export" or in some other strange way (by hand) ?

The standard process is to use

```
hg export tip > $HOME/trac_xxx.patch
```
to export the patch as a file, after making sure your patch is the top applied patch. Then upload the resulting file to trac.

Any other way is bound to have strange results..

It looks like you have concatenated several patches by hand maybe ? You must use hg qfold to do that.

---

Quick comments on the code:

it is a bad idea to use 

```
q = SymbolicRing().var('q')
```

to have a polynomial variable. Much better is

```
q = polygen(QQ, 'q')
```
In the same hook-length function, you should write "There are 20 permutations"



---

archive/issue_comments_192214.json:
```json
{
    "body": "<a id='comment:20'></a>Hello, \n\nReplying to [comment:19 chapoton]:\n> Have you made your patch using \"hg export\" or in some other strange way (by hand) ?\n> \n> The standard process is to use\n> \n> ```\n> hg export tip > $HOME/trac_xxx.patch\n> ```\n> to export the patch as a file, after making sure your patch is the top applied patch. Then upload the resulting file to trac.\n\n\nI use \n\n```\nsage: hg_sage.apply(...)\n```\n> \n> Any other way is bound to have strange results..\n> \n\nI will try to use `hg export`...\n\n> It looks like you have concatenated several patches by hand maybe ? You must use hg qfold to do that.\n> \n> ---\n> \n> Quick comments on the code:\n> \n> it is a bad idea to use \n> \n> \n> ```\n> q = SymbolicRing().var('q')\n> ```\n> \n> to have a polynomial variable. Much better is\n> \n> ```\n> q = polygen(QQ, 'q')\n> ```\n> In the same hook-length function, you should write \"There are 20 permutations\"\n\n\nThanks for comment, i will modify that.",
    "created_at": "2013-08-26T07:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192214",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:20'></a>Hello, 

Replying to [comment:19 chapoton]:
> Have you made your patch using "hg export" or in some other strange way (by hand) ?
> 
> The standard process is to use
> 
> ```
> hg export tip > $HOME/trac_xxx.patch
> ```
> to export the patch as a file, after making sure your patch is the top applied patch. Then upload the resulting file to trac.


I use 

```
sage: hg_sage.apply(...)
```
> 
> Any other way is bound to have strange results..
> 

I will try to use `hg export`...

> It looks like you have concatenated several patches by hand maybe ? You must use hg qfold to do that.
> 
> ---
> 
> Quick comments on the code:
> 
> it is a bad idea to use 
> 
> 
> ```
> q = SymbolicRing().var('q')
> ```
> 
> to have a polynomial variable. Much better is
> 
> ```
> q = polygen(QQ, 'q')
> ```
> In the same hook-length function, you should write "There are 20 permutations"


Thanks for comment, i will modify that.



---

archive/issue_comments_192215.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-08-30T11:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192215",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_192216.json:
```json
{
    "body": "<a id='comment:21'></a>the patch does not applies on 5.12.beta3\n\nas long as the patch is not clean, this cannot be considered as \"needs review\"",
    "created_at": "2013-08-30T11:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192216",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>the patch does not applies on 5.12.beta3

as long as the patch is not clean, this cannot be considered as "needs review"



---

archive/issue_comments_192217.json:
```json
{
    "body": "<a id='comment:22'></a>Hello,\n\nMay be, I understand nothing but my patch apply in sage 5.12.beta5.\n\nIf there is a problem, it doesn't appear on my laptop. (Sage on Mac os is more clever than on linux!)\n\nSo if the patch does not applies again, please correct that because I don't have that problem... when that thing will be solve I will modify _q = SymbolicRing.._ if you don't do it but now I don't want spend 3hours to make a new patch (which doesn't applies) for one simple line...",
    "created_at": "2013-09-17T23:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192217",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:22'></a>Hello,

May be, I understand nothing but my patch apply in sage 5.12.beta5.

If there is a problem, it doesn't appear on my laptop. (Sage on Mac os is more clever than on linux!)

So if the patch does not applies again, please correct that because I don't have that problem... when that thing will be solve I will modify _q = SymbolicRing.._ if you don't do it but now I don't want spend 3hours to make a new patch (which doesn't applies) for one simple line...



---

archive/issue_comments_192218.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2013-09-17T23:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192218",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_192219.json:
```json
{
    "body": "<a id='comment:23'></a>Hey Jean-Baptiste,\n\nThe patch applies for me on 5.12.beta5 (in the combinat queue), but there doesn't seem to be anything that could be a dependency. My guess is the patched together patch (sorry, couldn't resist the pun) is why it's not applying, and I agree that this needs to be fixed.\n\nAlso, because of the accented character, you need to add\n\n```\n# -*- coding: utf-8 -*-\n```\nas the first line of `binary_tree.py` (I put a small patch in the combinat queue which does this).\n\nThanks,\n\nTravis",
    "created_at": "2013-09-19T17:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192219",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>Hey Jean-Baptiste,

The patch applies for me on 5.12.beta5 (in the combinat queue), but there doesn't seem to be anything that could be a dependency. My guess is the patched together patch (sorry, couldn't resist the pun) is why it's not applying, and I agree that this needs to be fixed.

Also, because of the accented character, you need to add

```
# -*- coding: utf-8 -*-
```
as the first line of `binary_tree.py` (I put a small patch in the combinat queue which does this).

Thanks,

Travis



---

archive/issue_comments_192220.json:
```json
{
    "body": "<a id='comment:24'></a>Hello Travis,\n\nmaybe you can backport the patch from the sage-combinat queue to trac (folded with your small patch) ?\n\nFrederic",
    "created_at": "2013-09-20T07:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192220",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>Hello Travis,

maybe you can backport the patch from the sage-combinat queue to trac (folded with your small patch) ?

Frederic



---

archive/issue_comments_192221.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-09-20T07:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192221",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,29 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498_algorithms_trees_13_07_15_EliX-jbp.patch]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192222.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-10-02T02:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192222",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_192223.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-10-02T02:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192223",
    "user": "https://github.com/tscrim"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,29 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498-algorithms_trees-rebased.patch​]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192224.json:
```json
{
    "body": "<a id='comment:26'></a>Hey everyone,\n\nHere's a new version with my patch small header patch folded in, the patch file cleaned up, and my docstring tweaks (I also marked some tests as `# long time`).\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14498-algorithms_trees-rebased.patch\u200b",
    "created_at": "2013-10-02T02:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192224",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>Hey everyone,

Here's a new version with my patch small header patch folded in, the patch file cleaned up, and my docstring tweaks (I also marked some tests as `# long time`).

Best,

Travis

For patchbot:

Apply: trac_14498-algorithms_trees-rebased.patch​



---

archive/issue_comments_192225.json:
```json
{
    "body": "Attachment [trac_14498-algorithms_trees-rebased.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-algorithms_trees-rebased.patch) by @tscrim created at 2013-10-02 02:38:46",
    "created_at": "2013-10-02T02:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192225",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14498-algorithms_trees-rebased.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-algorithms_trees-rebased.patch) by @tscrim created at 2013-10-02 02:38:46



---

archive/issue_comments_192226.json:
```json
{
    "body": "<a id='comment:27'></a>apply trac_14498-algorithms_trees-rebased.patch",
    "created_at": "2013-10-02T19:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192226",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>apply trac_14498-algorithms_trees-rebased.patch



---

archive/issue_comments_192227.json:
```json
{
    "body": "<a id='comment:29'></a>I have just uploaded [attachment:trac_14498-tree-imps-dg.patch] (to be applied after [attachment:trac_14498-algorithms_trees-rebased.patch]) which should fix #15060 and clear up some of the vertex-vs.-node confusion on binary trees. Can anyone look over it and tell me if I got things right? I cannot really start reviewing this patch before this is sorted out.",
    "created_at": "2013-10-03T06:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192227",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:29'></a>I have just uploaded [attachment:trac_14498-tree-imps-dg.patch] (to be applied after [attachment:trac_14498-algorithms_trees-rebased.patch]) which should fix #15060 and clear up some of the vertex-vs.-node confusion on binary trees. Can anyone look over it and tell me if I got things right? I cannot really start reviewing this patch before this is sorted out.



---

archive/issue_comments_192228.json:
```json
{
    "body": "minor docstring fix",
    "created_at": "2013-10-03T23:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192228",
    "user": "https://github.com/tscrim"
}
```

minor docstring fix



---

archive/issue_comments_192229.json:
```json
{
    "body": "Attachment [trac_14498-tree-imps-dg.2.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg.2.patch) by @darijgr created at 2013-10-05 04:40:55\n\nignore this file",
    "created_at": "2013-10-05T04:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192229",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14498-tree-imps-dg.2.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg.2.patch) by @darijgr created at 2013-10-05 04:40:55

ignore this file



---

archive/issue_comments_192230.json:
```json
{
    "body": "<a id='comment:30'></a>I have renamed and mostly redone the q-hook length formula method. Elixyre, is it still what you wanted? Among other changes, \\\\\n- the default option now has no q-factor, \\\\\n- the q-factor is determined by the right child (as the doc said) rather than the left one (as the earlier code did), \\\\\n- the computation is being done in whatever ring the user is given, rather than the symbolic ring.",
    "created_at": "2013-10-05T04:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192230",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:30'></a>I have renamed and mostly redone the q-hook length formula method. Elixyre, is it still what you wanted? Among other changes, \\
- the default option now has no q-factor, \\
- the q-factor is determined by the right child (as the doc said) rather than the left one (as the earlier code did), \\
- the computation is being done in whatever ring the user is given, rather than the symbolic ring.



---

archive/issue_comments_192231.json:
```json
{
    "body": "improvements and bugfixes",
    "created_at": "2013-10-07T03:19:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192231",
    "user": "https://github.com/darijgr"
}
```

improvements and bugfixes



---

archive/issue_comments_192232.json:
```json
{
    "body": "<a id='comment:31'></a>Attachment [trac_14498-tree-imps-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg.patch) by @darijgr created at 2013-10-07 03:32:43\n\nI have posted a new version of [attachment:trac_14498-tree-imps-dg.patch\u200b]. Unfortunately a lot more is needed for a review, but I think this is a step forward. The following issues have been fixed:\n\n* The issues discussed in #14564 (leaves vs. leaves-and-nodes inconsistencies, and border cases) have been fixed.\\\\\n* The implementation and the documentation of the q-hook-length formula has been revamped (even the name is now different).\\\\\n* Various documentation has been rewritten.\n\nThings that remain to be done:\n\n* `BinaryTree()` is a functioning shortcut for `BinaryTree(None)`, but `LabelledBinaryTree()` is not a functioning shortcut for `LabelledBinaryTree(None)`. Should this be fixed? Using init_extra?\\\\\n* It is not obvious to me that the `tamari_succ` and `tamari_prec` methods actually compute the successors resp. predecessors in the Tamari order. Is there a proof somewhere in the literature? It's clear that every successor of a tree t in the Tamari poset is obtained by a right rotation, but is it clear that every right rotate is actually a successor?\\\\\n* The `over` method defines the \"over\" operation. As I wrote in the docstring: \"            Fix this doc and figure out which of the different (inconsistent?) notations to follow. I don't see the \"over\" operation defined in [LodayRonco]_, although [HNT05]_ pretends that it is defined there. In [HNT05]_ the definition is somewhat vague about the order of the operads. Loday and Ronco seem to define \"over\" on page 2 of \"Order structure on the algebra of permutations and of planar binary trees\", but with a different choice of left/right.\"\\\\\n* The docstring of the class `LabelledBinaryTree` could be less barren; in particular it could explain how to initialize these.\\\\\n* The `binary_search_insert` docstring might use a definition of binary search insertion, given that most sources only do it in the standard (i. e., no two equal labels) case.\\\\\n\nI fear I won't come back to this patch very soon, so everyone who feels like improving these is invited to do so.\n\nFor the patchbot:\n\napply trac_14498-algorithms_trees-rebased.patch\u200b trac_14498-tree-imps-dg.patch\u200b",
    "created_at": "2013-10-07T03:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192232",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:31'></a>Attachment [trac_14498-tree-imps-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg.patch) by @darijgr created at 2013-10-07 03:32:43

I have posted a new version of [attachment:trac_14498-tree-imps-dg.patch​]. Unfortunately a lot more is needed for a review, but I think this is a step forward. The following issues have been fixed:

* The issues discussed in #14564 (leaves vs. leaves-and-nodes inconsistencies, and border cases) have been fixed.\\
* The implementation and the documentation of the q-hook-length formula has been revamped (even the name is now different).\\
* Various documentation has been rewritten.

Things that remain to be done:

* `BinaryTree()` is a functioning shortcut for `BinaryTree(None)`, but `LabelledBinaryTree()` is not a functioning shortcut for `LabelledBinaryTree(None)`. Should this be fixed? Using init_extra?\\
* It is not obvious to me that the `tamari_succ` and `tamari_prec` methods actually compute the successors resp. predecessors in the Tamari order. Is there a proof somewhere in the literature? It's clear that every successor of a tree t in the Tamari poset is obtained by a right rotation, but is it clear that every right rotate is actually a successor?\\
* The `over` method defines the "over" operation. As I wrote in the docstring: "            Fix this doc and figure out which of the different (inconsistent?) notations to follow. I don't see the "over" operation defined in [LodayRonco]_, although [HNT05]_ pretends that it is defined there. In [HNT05]_ the definition is somewhat vague about the order of the operads. Loday and Ronco seem to define "over" on page 2 of "Order structure on the algebra of permutations and of planar binary trees", but with a different choice of left/right."\\
* The docstring of the class `LabelledBinaryTree` could be less barren; in particular it could explain how to initialize these.\\
* The `binary_search_insert` docstring might use a definition of binary search insertion, given that most sources only do it in the standard (i. e., no two equal labels) case.\\

I fear I won't come back to this patch very soon, so everyone who feels like improving these is invited to do so.

For the patchbot:

apply trac_14498-algorithms_trees-rebased.patch​ trac_14498-tree-imps-dg.patch​



---

archive/issue_comments_192233.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,30 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n+* [attachment:trac_14498-tree-imps-dg.patch\u200b]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-10-07T03:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192233",
    "user": "https://github.com/darijgr"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,30 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498-algorithms_trees-rebased.patch​]
+* [attachment:trac_14498-tree-imps-dg.patch​]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192234.json:
```json
{
    "body": "<a id='comment:33'></a>patchbot apply trac_14498-algorithms_trees-rebased.patch\u200b,trac_14498-tree-imps-dg.patch",
    "created_at": "2013-10-15T18:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192234",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>patchbot apply trac_14498-algorithms_trees-rebased.patch​,trac_14498-tree-imps-dg.patch



---

archive/issue_comments_192235.json:
```json
{
    "body": "<a id='comment:34'></a>apply trac_14498-algorithms_trees-rebased.patch\u200b trac_14498-tree-imps-dg.patch",
    "created_at": "2013-10-15T18:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192235",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>apply trac_14498-algorithms_trees-rebased.patch​ trac_14498-tree-imps-dg.patch



---

archive/issue_comments_192236.json:
```json
{
    "body": "<a id='comment:35'></a>apply trac_14498-algorithms_trees-rebased.patch\u200b trac_14498-tree-imps-dg.patch",
    "created_at": "2013-10-15T18:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192236",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:35'></a>apply trac_14498-algorithms_trees-rebased.patch​ trac_14498-tree-imps-dg.patch



---

archive/issue_comments_192237.json:
```json
{
    "body": "<a id='comment:36'></a>apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg.patch",
    "created_at": "2013-10-15T18:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192237",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg.patch



---

archive/issue_comments_192238.json:
```json
{
    "body": "<a id='comment:37'></a>Darij, I have rebased your patch, it was not applying cleanly.\n\n**patchbots**, please\n\napply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch",
    "created_at": "2013-10-18T19:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192238",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>Darij, I have rebased your patch, it was not applying cleanly.

**patchbots**, please

apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch



---

archive/issue_comments_192239.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,30 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n+* [attachment:trac_14498-tree-imps-dg-rebased.patch\u200b]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-10-18T19:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192239",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,30 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498-algorithms_trees-rebased.patch​]
+* [attachment:trac_14498-tree-imps-dg-rebased.patch​]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192240.json:
```json
{
    "body": "<a id='comment:38'></a>new patch, correcting the failing doctest",
    "created_at": "2013-10-19T18:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192240",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:38'></a>new patch, correcting the failing doctest



---

archive/issue_comments_192241.json:
```json
{
    "body": "<a id='comment:39'></a>Frederic, I think that my patch was supposed to apply atop of trac_14498-algorithms_trees-rebased.2.patch , not atop of trac_14498-algorithms_trees-rebased.patch. Is that the reason for the unclean apply?\n\nEDIT: OOPS, I am just seeing that it was me who fucked up the apply declaration. Sorry!\n\nIt should be\n\napply trac_14498-algorithms_trees-rebased.2.patch trac_14498-tree-imps-dg.patch \n\nIs there a chance you could rebase your changes back? Thanks a lot. (A qfold would probably be best. It seems that once a something.2.patch file appears, chaos is bound to happen.)",
    "created_at": "2013-10-19T21:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192241",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:39'></a>Frederic, I think that my patch was supposed to apply atop of trac_14498-algorithms_trees-rebased.2.patch , not atop of trac_14498-algorithms_trees-rebased.patch. Is that the reason for the unclean apply?

EDIT: OOPS, I am just seeing that it was me who fucked up the apply declaration. Sorry!

It should be

apply trac_14498-algorithms_trees-rebased.2.patch trac_14498-tree-imps-dg.patch 

Is there a chance you could rebase your changes back? Thanks a lot. (A qfold would probably be best. It seems that once a something.2.patch file appears, chaos is bound to happen.)



---

archive/issue_comments_192242.json:
```json
{
    "body": "<a id='comment:40'></a>Hello,\n\nwell, I would rather not change anything back. It was a very simple rebase, and I am rather sure there is nothing lost in your patch. I have checked that nothing has got lost in Travis patch, too.\n\nSo let us stay with\n\napply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch",
    "created_at": "2013-10-20T07:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192242",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:40'></a>Hello,

well, I would rather not change anything back. It was a very simple rebase, and I am rather sure there is nothing lost in your patch. I have checked that nothing has got lost in Travis patch, too.

So let us stay with

apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch



---

archive/issue_comments_192243.json:
```json
{
    "body": "Attachment [trac_14498-tree-imps-dg-rebased.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg-rebased.patch) by @fchapoton created at 2013-10-20 09:55:51",
    "created_at": "2013-10-20T09:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192243",
    "user": "https://github.com/fchapoton"
}
```

Attachment [trac_14498-tree-imps-dg-rebased.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-tree-imps-dg-rebased.patch) by @fchapoton created at 2013-10-20 09:55:51



---

archive/issue_comments_192244.json:
```json
{
    "body": "<a id='comment:41'></a>I have now made further corrections to the documentation.",
    "created_at": "2013-10-20T09:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192244",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>I have now made further corrections to the documentation.



---

archive/issue_comments_192245.json:
```json
{
    "body": "<a id='comment:42'></a>Hi Federic,\n\nI didn't want to say anything got lost in *my* patch. It's Travis' patch where things could have gotten lost. But I'm seeing that you re-did all of the edits present in trac_14498-algorithms_trees-rebased.2.patch but absent from trac_14498-algorithms_trees-rebased.patch. So nothing got lost. Sorry again for the trouble!\n\nDarij",
    "created_at": "2013-10-20T21:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192245",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:42'></a>Hi Federic,

I didn't want to say anything got lost in *my* patch. It's Travis' patch where things could have gotten lost. But I'm seeing that you re-did all of the edits present in trac_14498-algorithms_trees-rebased.2.patch but absent from trac_14498-algorithms_trees-rebased.patch. So nothing got lost. Sorry again for the trouble!

Darij



---

archive/issue_comments_192246.json:
```json
{
    "body": "<a id='comment:43'></a>The non-ascii character should be okay since the corresponding file has UTF-8 encoding. I'm thinking the startup time increase is due to setting up the latex stuff in `abstract_tee.py` and that probably should be done in the `_latex_()` method the first time it is called. Any objections to moving it there?\n\nBest,\n\nTravis",
    "created_at": "2013-11-03T05:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192246",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:43'></a>The non-ascii character should be okay since the corresponding file has UTF-8 encoding. I'm thinking the startup time increase is due to setting up the latex stuff in `abstract_tee.py` and that probably should be done in the `_latex_()` method the first time it is called. Any objections to moving it there?

Best,

Travis



---

archive/issue_comments_192247.json:
```json
{
    "body": "qfold -- used (mostly by myself) for more comfortable viewing",
    "created_at": "2013-11-09T00:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192247",
    "user": "https://github.com/darijgr"
}
```

qfold -- used (mostly by myself) for more comfortable viewing



---

archive/issue_comments_192248.json:
```json
{
    "body": "Attachment [14498-qfold-dont-use.patch](tarball://root/attachments/some-uuid/ticket14498/14498-qfold-dont-use.patch) by @darijgr created at 2013-11-11 00:37:05\n\nnew review patch",
    "created_at": "2013-11-11T00:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192248",
    "user": "https://github.com/darijgr"
}
```

Attachment [14498-qfold-dont-use.patch](tarball://root/attachments/some-uuid/ticket14498/14498-qfold-dont-use.patch) by @darijgr created at 2013-11-11 00:37:05

new review patch



---

archive/issue_comments_192249.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,31 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n+* [attachment:trac_14498-tree-imps-dg-rebased.patch\u200b]\n+* [attachment:trac_14998-more-edits-dg.patch\u200b]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-11-11T00:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192249",
    "user": "https://github.com/darijgr"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,31 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498-algorithms_trees-rebased.patch​]
+* [attachment:trac_14498-tree-imps-dg-rebased.patch​]
+* [attachment:trac_14998-more-edits-dg.patch​]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192250.json:
```json
{
    "body": "<a id='comment:44'></a>Attachment [trac_14998-more-edits-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14998-more-edits-dg.patch) by @darijgr created at 2013-11-11 00:39:31\n\nI've completed my review of this patch, but due to its size (and its introduction of another method for my own research) someone will have to review my review. Frederic?\n\nThanks Viviane for the help with Loday's over/under operations. I still can't find them in the Loday-Ronco paper, but at least I now know their definitions!\n\nYes, my patch applies *on top* of the algorithms and tree-imps patches. Sorry for the typo in the trac number.\n\nfor the **patchbot**:\n\napply trac_14498-algorithms_trees-rebased.patch\u200b trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch\u200b",
    "created_at": "2013-11-11T00:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192250",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:44'></a>Attachment [trac_14998-more-edits-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14998-more-edits-dg.patch) by @darijgr created at 2013-11-11 00:39:31

I've completed my review of this patch, but due to its size (and its introduction of another method for my own research) someone will have to review my review. Frederic?

Thanks Viviane for the help with Loday's over/under operations. I still can't find them in the Loday-Ronco paper, but at least I now know their definitions!

Yes, my patch applies *on top* of the algorithms and tree-imps patches. Sorry for the typo in the trac number.

for the **patchbot**:

apply trac_14498-algorithms_trees-rebased.patch​ trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch​



---

archive/issue_comments_192251.json:
```json
{
    "body": "<a id='comment:45'></a>Sorry guys. Had to introduce further docfixes after noticing that several methods fail to preserves labels on leaves of binary trees. The whole issue of leaves not being fully-accepted vertices of binary trees is extremely confusing...\n\nfor the **patchbot**:\n\napply trac_14498-algorithms_trees-rebased.patch\u200b trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch\u200b trac_14498-further-docfixes-dg.patch\u200b",
    "created_at": "2013-11-12T07:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192251",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:45'></a>Sorry guys. Had to introduce further docfixes after noticing that several methods fail to preserves labels on leaves of binary trees. The whole issue of leaves not being fully-accepted vertices of binary trees is extremely confusing...

for the **patchbot**:

apply trac_14498-algorithms_trees-rebased.patch​ trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch​ trac_14498-further-docfixes-dg.patch​



---

archive/issue_comments_192252.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,32 @@\n+Hi,\n \n+I propose several methods for trees and binary trees:\n+\n+File : trees_classicals_algorithms_EliX-jbp: \n+several classical operations on trees and binary trees\n+- on abstract trees:\n+  * depth pre/post order transversal algorithm\n+  * breadth first order transversal algorithm\n+- on binary trees:\n+  * infix order transversal algorithm\n+  * canonical permutation associated to the left/right binary search tree insertion\n+  * left/right rotate (for labelled and unlabelled BT)\n+\n+File: trees_research_algorithms_EliX-jbp:\n+several research algorithms on binary trees\n+- over/under (Loday-Ronco)\n+- pred/succ in the Tamari lattice\n+- hook length formula\n+\n+File: trees_latex_output_EliX-jbp:\n+a method for nice latex output\n+\n+Apply:\n+\n+* [attachment:trac_14498-algorithms_trees-rebased.patch\u200b]\n+* [attachment:trac_14498-tree-imps-dg-rebased.patch\u200b]\n+* [attachment:trac_14998-more-edits-dg.patch\u200b]\n+* [attachment:trac_14498-further-docfixes-dg.patch\u200b]\n \n Author: Jean-Baptiste Priez\n \n```\n",
    "created_at": "2013-11-12T07:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192252",
    "user": "https://github.com/darijgr"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,32 @@
+Hi,
 
+I propose several methods for trees and binary trees:
+
+File : trees_classicals_algorithms_EliX-jbp: 
+several classical operations on trees and binary trees
+- on abstract trees:
+  * depth pre/post order transversal algorithm
+  * breadth first order transversal algorithm
+- on binary trees:
+  * infix order transversal algorithm
+  * canonical permutation associated to the left/right binary search tree insertion
+  * left/right rotate (for labelled and unlabelled BT)
+
+File: trees_research_algorithms_EliX-jbp:
+several research algorithms on binary trees
+- over/under (Loday-Ronco)
+- pred/succ in the Tamari lattice
+- hook length formula
+
+File: trees_latex_output_EliX-jbp:
+a method for nice latex output
+
+Apply:
+
+* [attachment:trac_14498-algorithms_trees-rebased.patch​]
+* [attachment:trac_14498-tree-imps-dg-rebased.patch​]
+* [attachment:trac_14998-more-edits-dg.patch​]
+* [attachment:trac_14498-further-docfixes-dg.patch​]
 
 Author: Jean-Baptiste Priez
 
```




---

archive/issue_comments_192253.json:
```json
{
    "body": "now with fixed doc :)",
    "created_at": "2013-11-30T18:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192253",
    "user": "https://github.com/darijgr"
}
```

now with fixed doc :)



---

archive/issue_comments_192254.json:
```json
{
    "body": "<a id='comment:46'></a>Attachment [trac_14498-further-docfixes-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-further-docfixes-dg.patch) by @darijgr created at 2013-11-30 18:18:16\n\nCorrected sphinx in my latest .patch file.\n\nfor the **patchbot**:\n\napply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch trac_14498-further-docfixes-dg.patch\u200b",
    "created_at": "2013-11-30T18:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192254",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:46'></a>Attachment [trac_14498-further-docfixes-dg.patch](tarball://root/attachments/some-uuid/ticket14498/trac_14498-further-docfixes-dg.patch) by @darijgr created at 2013-11-30 18:18:16

Corrected sphinx in my latest .patch file.

for the **patchbot**:

apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch trac_14498-further-docfixes-dg.patch​



---

archive/issue_comments_192255.json:
```json
{
    "body": "<a id='comment:47'></a>Darij, there was an unvisible space in your last order for the patchbot. Beware of unvisible spaces !\n\napply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch trac_14498-further-docfixes-dg.patch",
    "created_at": "2013-12-02T20:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192255",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>Darij, there was an unvisible space in your last order for the patchbot. Beware of unvisible spaces !

apply trac_14498-algorithms_trees-rebased.patch trac_14498-tree-imps-dg-rebased.patch trac_14998-more-edits-dg.patch trac_14498-further-docfixes-dg.patch



---

archive/issue_comments_192256.json:
```json
{
    "body": "<a id='comment:48'></a>I have made a branch.\n\n---\nNew commits:",
    "created_at": "2013-12-02T20:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192256",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:48'></a>I have made a branch.

---
New commits:



---

archive/issue_comments_192257.json:
```json
{
    "body": "<a id='comment:49'></a>I thought I had gotten rid of the ghost spaces in my latest post? (That was actually the reason why I reposted the patchbot instructions.)",
    "created_at": "2013-12-02T20:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192257",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:49'></a>I thought I had gotten rid of the ghost spaces in my latest post? (That was actually the reason why I reposted the patchbot instructions.)



---

archive/issue_comments_192258.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-18T13:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192259.json:
```json
{
    "body": "<a id='comment:51'></a>Uhm, what happened here? Rebase AND merge? Looks like the branch is doubled now...",
    "created_at": "2014-01-18T15:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192259",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:51'></a>Uhm, what happened here? Rebase AND merge? Looks like the branch is doubled now...



---

archive/issue_comments_192260.json:
```json
{
    "body": "<a id='comment:52'></a>Hello,\n\nnot sure of what I did.. I wanted to clean up a few whitespace errors. And to rebase on 6.1.beta5, to try to get the patchbot do something useful. I guess I am still not a master of git.. Hope that I broke nothing.",
    "created_at": "2014-01-18T16:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192260",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:52'></a>Hello,

not sure of what I did.. I wanted to clean up a few whitespace errors. And to rebase on 6.1.beta5, to try to get the patchbot do something useful. I guess I am still not a master of git.. Hope that I broke nothing.



---

archive/issue_comments_192261.json:
```json
{
    "body": "<a id='comment:53'></a>Ah, no problem. Your branch is fine if you ask me; it just is way more complicated than necessary. (But I'm not good at merging myself; when there is conflict, I usually end up reverting the conflicting edits from my branch and then reinstating them after the merge.)",
    "created_at": "2014-01-18T17:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192261",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:53'></a>Ah, no problem. Your branch is fine if you ask me; it just is way more complicated than necessary. (But I'm not good at merging myself; when there is conflict, I usually end up reverting the conflicting edits from my branch and then reinstating them after the merge.)



---

archive/issue_comments_192262.json:
```json
{
    "body": "<a id='comment:54'></a>Oops, I messed up the definition of the overlapping shuffle product. I'll fix this shortly.",
    "created_at": "2014-01-21T14:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192262",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:54'></a>Oops, I messed up the definition of the overlapping shuffle product. I'll fix this shortly.



---

archive/issue_comments_192263.json:
```json
{
    "body": "<a id='comment:55'></a>New commits:",
    "created_at": "2014-01-21T15:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192263",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:55'></a>New commits:



---

archive/issue_comments_192264.json:
```json
{
    "body": "<a id='comment:56'></a>Fixed! (Note the branch change.)\n\nSorry for creating that bug in the first place.",
    "created_at": "2014-01-21T15:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192264",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:56'></a>Fixed! (Note the branch change.)

Sorry for creating that bug in the first place.



---

archive/issue_comments_192265.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-21T15:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192266.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-29T20:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192267.json:
```json
{
    "body": "<a id='comment:59'></a>I am trying to read all this stuff. It looks almost good to go. Review is in progress.",
    "created_at": "2014-01-29T20:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192267",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:59'></a>I am trying to read all this stuff. It looks almost good to go. Review is in progress.



---

archive/issue_comments_192268.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-30T20:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192269.json:
```json
{
    "body": "<a id='comment:62'></a>Ok, things look good to me. Darij, could you please look at my last two commits and give a positive review if you agree with them ?",
    "created_at": "2014-01-30T20:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192269",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:62'></a>Ok, things look good to me. Darij, could you please look at my last two commits and give a positive review if you agree with them ?



---

archive/issue_comments_192270.json:
```json
{
    "body": "<a id='comment:63'></a>Frederic: thanks a lot, but I think the LodayRonco reference is confusing and a warning about it should be there (whether it's mine or a new one). I don't see them defining \"over\" and \"under\"; I see them defining two operations called \"left and right product\", denoted \\succ and \\prec. Are they the same operations? Either way, it would be better to also add the \"Order structure on the algebra of permutations and of planar binary trees\" reference.\n\nEverything else is fine!",
    "created_at": "2014-01-30T20:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192270",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:63'></a>Frederic: thanks a lot, but I think the LodayRonco reference is confusing and a warning about it should be there (whether it's mine or a new one). I don't see them defining "over" and "under"; I see them defining two operations called "left and right product", denoted \succ and \prec. Are they the same operations? Either way, it would be better to also add the "Order structure on the algebra of permutations and of planar binary trees" reference.

Everything else is fine!



---

archive/issue_comments_192271.json:
```json
{
    "body": "<a id='comment:64'></a>Actually, they have nothing to do with over and under. The reference is wrong here. Let me fix this.",
    "created_at": "2014-01-30T20:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192271",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:64'></a>Actually, they have nothing to do with over and under. The reference is wrong here. Let me fix this.



---

archive/issue_comments_192272.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-30T20:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192273.json:
```json
{
    "body": "<a id='comment:66'></a>Changes committed. (Apart from the over/under issue, I noticed that removing the root should not be mentioned as part of a recursive procedure.) If you are fine with them, please set to positive review -- and thanks a lot for making sense of this ticket!",
    "created_at": "2014-01-30T20:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192273",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:66'></a>Changes committed. (Apart from the over/under issue, I noticed that removing the root should not be mentioned as part of a recursive procedure.) If you are fine with them, please set to positive review -- and thanks a lot for making sense of this ticket!



---

archive/issue_comments_192274.json:
```json
{
    "body": "<a id='comment:67'></a>ok, thanks. Positive review.",
    "created_at": "2014-01-30T21:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192274",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:67'></a>ok, thanks. Positive review.



---

archive/issue_comments_192275.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-30T21:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192275",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_041222.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14498#event-41222"
}
```



---

archive/issue_events_041223.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14498#event-41223"
}
```



---

archive/issue_comments_192276.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-03T22:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14498#issuecomment-192276",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_041224.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-03T22:58:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14498",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14498#event-41224"
}
```
