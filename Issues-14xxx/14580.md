# Issue 14580: Set individual legend font color in Sage

archive/issues_014376.json:
```json
{
    "body": "Currently, it is not possible to change the legend font color in Sage at all. [This link](http://permalink.gmane.org/gmane.comp.python.matplotlib.general/24674) shows how to do it in matplotlib - it is not straightforward in matplotlib either.\n\nI think the way to introduce it is\n\n1. Allow a `legend_color` parameter to each plot.\n2. Keep track of the individual legend colors via a key in the `Graphics._legend_opts` dictionary.\n3. The key will contain a list of colors, defaulting to black or None (I prefer None, so that we use matplotlib's default).\n4. After all the plots have been rendered and the legend as been set, we can follow the method in the link above to extract all the texts and set the colors individually, skipping the ones which are None (if the default is None).\n\n---\n\nApply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors-rebased.patch] to devel/sage.\n\nAssignee: jason, was\n\nCC:  sd45 sd48\n\nReviewer: Karl-Dieter Crisman, Punarbasu Purkayastha\n\nAuthor: Punarbasu Purkayastha, Karl-Dieter Crisman\n\nMerged: sage-5.12.beta2\n\nDependencies: #13834\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14580\n\n",
    "closed_at": "2013-08-16T21:19:12Z",
    "created_at": "2013-05-14T16:30:02Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Set individual legend font color in Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14580",
    "user": "https://github.com/ppurka"
}
```
Currently, it is not possible to change the legend font color in Sage at all. [This link](http://permalink.gmane.org/gmane.comp.python.matplotlib.general/24674) shows how to do it in matplotlib - it is not straightforward in matplotlib either.

I think the way to introduce it is

1. Allow a `legend_color` parameter to each plot.
2. Keep track of the individual legend colors via a key in the `Graphics._legend_opts` dictionary.
3. The key will contain a list of colors, defaulting to black or None (I prefer None, so that we use matplotlib's default).
4. After all the plots have been rendered and the legend as been set, we can follow the method in the link above to extract all the texts and set the colors individually, skipping the ones which are None (if the default is None).

---

Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors-rebased.patch] to devel/sage.

Assignee: jason, was

CC:  sd45 sd48

Reviewer: Karl-Dieter Crisman, Punarbasu Purkayastha

Author: Punarbasu Purkayastha, Karl-Dieter Crisman

Merged: sage-5.12.beta2

Dependencies: #13834

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14580





---

archive/issue_comments_227128.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-20T11:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227128",
    "user": "https://github.com/ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_227129.json:
```json
{
    "body": "<a id='comment:1'></a>I added a new attribute `self._legend_colors = []` to `Graphics`. This will hold the colors or `None` in case no colors are provided. Patch needs review.\n\n*Edit*: It is now possible to get a graph [like this](http://i.imgur.com/1hpaBbw.png):\n\n```\nsage: p1 = plot(x, legend_label='this is x', legend_color='red', color='red')\nsage: p2 = plot(x**2, legend_label='this is x^2', legend_color='green', color='green')\nsage: (p1+p2).save('/tmp/a.png')\n```",
    "created_at": "2013-05-20T11:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227129",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:1'></a>I added a new attribute `self._legend_colors = []` to `Graphics`. This will hold the colors or `None` in case no colors are provided. Patch needs review.

*Edit*: It is now possible to get a graph [like this](http://i.imgur.com/1hpaBbw.png):

```
sage: p1 = plot(x, legend_label='this is x', legend_color='red', color='red')
sage: p2 = plot(x**2, legend_label='this is x^2', legend_color='green', color='green')
sage: (p1+p2).save('/tmp/a.png')
```



---

archive/issue_comments_227130.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,7 @@\n 2. Keep track of the individual legend colors via a key in the `Graphics._legend_opts` dictionary.\n 3. The key will contain a list of colors, defaulting to black or None (I prefer None, so that we use matplotlib's default).\n 4. After all the plots have been rendered and the legend as been set, we can follow the method in the link above to extract all the texts and set the colors individually, skipping the ones which are None (if the default is None).\n+\n+---\n+\n+Apply [attachment:trac_14580-legend_color.patch] to devel/sage.\n``````\n",
    "created_at": "2013-05-20T11:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227130",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,7 @@
 2. Keep track of the individual legend colors via a key in the `Graphics._legend_opts` dictionary.
 3. The key will contain a list of colors, defaulting to black or None (I prefer None, so that we use matplotlib's default).
 4. After all the plots have been rendered and the legend as been set, we can follow the method in the link above to extract all the texts and set the colors individually, skipping the ones which are None (if the default is None).
+
+---
+
+Apply [attachment:trac_14580-legend_color.patch] to devel/sage.
``````




---

archive/issue_comments_227131.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-21T06:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227131",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_227132.json:
```json
{
    "body": "Changing work_issues from \"\" to \"fix doctests\"",
    "created_at": "2013-05-21T06:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227132",
    "user": "https://github.com/ppurka"
}
```

Changing work_issues from "" to "fix doctests"



---

archive/issue_comments_227133.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-21T11:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227133",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_227134.json:
```json
{
    "body": "Changing work_issues from \"fix doctests\" to \"\"",
    "created_at": "2013-05-21T11:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227134",
    "user": "https://github.com/ppurka"
}
```

Changing work_issues from "fix doctests" to ""



---

archive/issue_comments_227135.json:
```json
{
    "body": "Changing author from \"\" to \"Punarbasu Purkayastha\"",
    "created_at": "2013-06-14T16:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227135",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "" to "Punarbasu Purkayastha"



---

archive/issue_comments_227136.json:
```json
{
    "body": "<a id='comment:5'></a>I think this is very intriguing.  I spent a lot of time thinking about why the existing legend suboptions decorator might not work, and how this code magically allows examples to work in different orders, and I think this is really correct.  So this is my only question:\n* Tons of other graphics primitives have legends (arrow, disk, etc.), which do not use `point` or `line`.  Presumably we should support those too?",
    "created_at": "2013-06-15T02:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227136",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>I think this is very intriguing.  I spent a lot of time thinking about why the existing legend suboptions decorator might not work, and how this code magically allows examples to work in different orders, and I think this is really correct.  So this is my only question:
* Tons of other graphics primitives have legends (arrow, disk, etc.), which do not use `point` or `line`.  Presumably we should support those too?



---

archive/issue_comments_227137.json:
```json
{
    "body": "<a id='comment:6'></a>\n```\n$ grep -r p.set_label sage/plot/\nsage/plot/arrow.py:        p.set_label(options['legend_label'])\nsage/plot/arrow.py:        p.set_label(options['legend_label'])\nsage/plot/circle.py:        p.set_label(options['legend_label'])\nsage/plot/disk.py:        p.set_label(options['legend_label'])\nsage/plot/ellipse.py:        p.set_label(options['legend_label'])\nsage/plot/line.py:        p.set_label(options['legend_label'])\nsage/plot/polygon.py:        p.set_label(options['legend_label'])\n```",
    "created_at": "2013-06-18T21:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227137",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
```
$ grep -r p.set_label sage/plot/
sage/plot/arrow.py:        p.set_label(options['legend_label'])
sage/plot/arrow.py:        p.set_label(options['legend_label'])
sage/plot/circle.py:        p.set_label(options['legend_label'])
sage/plot/disk.py:        p.set_label(options['legend_label'])
sage/plot/ellipse.py:        p.set_label(options['legend_label'])
sage/plot/line.py:        p.set_label(options['legend_label'])
sage/plot/polygon.py:        p.set_label(options['legend_label'])
```



---

archive/issue_comments_227138.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2013-06-18T21:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227138",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Karl-Dieter Crisman"



---

archive/issue_comments_227139.json:
```json
{
    "body": "<a id='comment:8'></a>There is also not a doctest for the `point` version yet.  I'll try to write a second patch now, which would definitely need review.",
    "created_at": "2013-06-18T21:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227139",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>There is also not a doctest for the `point` version yet.  I'll try to write a second patch now, which would definitely need review.



---

archive/issue_comments_227140.json:
```json
{
    "body": "<a id='comment:9'></a>Attachment [trac_14580-more-colors.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-more-colors.patch) by @kcrisman created at 2013-06-18 22:41:51\n\nPatchbot, apply trac_14580-legend_color.patch  and trac_14580-more-colors.patch",
    "created_at": "2013-06-18T22:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227140",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>Attachment [trac_14580-more-colors.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-more-colors.patch) by @kcrisman created at 2013-06-18 22:41:51

Patchbot, apply trac_14580-legend_color.patch  and trac_14580-more-colors.patch



---

archive/issue_comments_227141.json:
```json
{
    "body": "Changing author from \"Punarbasu Purkayastha\" to \"Punarbasu Purkayastha, Karl-Dieter Crisman\"",
    "created_at": "2013-06-18T22:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227141",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "Punarbasu Purkayastha" to "Punarbasu Purkayastha, Karl-Dieter Crisman"



---

archive/issue_comments_227142.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n ---\n \n-Apply [attachment:trac_14580-legend_color.patch] to devel/sage.\n+Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors.patch] to devel/sage.\n``````\n",
    "created_at": "2013-06-18T22:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227142",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 ---
 
-Apply [attachment:trac_14580-legend_color.patch] to devel/sage.
+Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors.patch] to devel/sage.
``````




---

archive/issue_comments_227143.json:
```json
{
    "body": "Changing reviewer from \"Karl-Dieter Crisman\" to \"Karl-Dieter Crisman, Punarbasu Purkayastha\"",
    "created_at": "2013-06-22T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227143",
    "user": "https://github.com/ppurka"
}
```

Changing reviewer from "Karl-Dieter Crisman" to "Karl-Dieter Crisman, Punarbasu Purkayastha"



---

archive/issue_comments_227144.json:
```json
{
    "body": "<a id='comment:10'></a>Don't know why the patchbot refuses to test your new patch. It passes all tests in devel/sage/sage/plot. I see no issues with your patch.",
    "created_at": "2013-06-22T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227144",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:10'></a>Don't know why the patchbot refuses to test your new patch. It passes all tests in devel/sage/sage/plot. I see no issues with your patch.



---

archive/issue_comments_227145.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-22T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227145",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227146.json:
```json
{
    "body": "<a id='comment:11'></a>This needs to be rebased to #13834.",
    "created_at": "2013-07-24T06:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227146",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>This needs to be rebased to #13834.



---

archive/issue_comments_227147.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#13834\"",
    "created_at": "2013-07-24T06:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227147",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#13834"



---

archive/issue_events_041518.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-24T06:53:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14580#event-41518"
}
```



---

archive/issue_comments_227148.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-07-24T06:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227148",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_227149.json:
```json
{
    "body": "Apply to devel/sage",
    "created_at": "2013-07-24T07:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227149",
    "user": "https://github.com/ppurka"
}
```

Apply to devel/sage



---

archive/issue_comments_227150.json:
```json
{
    "body": "Attachment [trac_14580-legend_color.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-legend_color.patch) by @ppurka created at 2013-07-24 07:53:45\n\nRebased against #13834",
    "created_at": "2013-07-24T07:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227150",
    "user": "https://github.com/ppurka"
}
```

Attachment [trac_14580-legend_color.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-legend_color.patch) by @ppurka created at 2013-07-24 07:53:45

Rebased against #13834



---

archive/issue_comments_227151.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n ---\n \n-Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors.patch] to devel/sage.\n+Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors-rebased.patch] to devel/sage.\n``````\n",
    "created_at": "2013-07-24T07:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227151",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 ---
 
-Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors.patch] to devel/sage.
+Apply [attachment:trac_14580-legend_color.patch] and [attachment:trac_14580-more-colors-rebased.patch] to devel/sage.
``````




---

archive/issue_comments_227152.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-07-24T07:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227152",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_227153.json:
```json
{
    "body": "<a id='comment:13'></a>Attachment [trac_14580-more-colors-rebased.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-more-colors-rebased.patch) by @ppurka created at 2013-07-24 07:54:59\n\nRebased both the patches against #13834",
    "created_at": "2013-07-24T07:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227153",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:13'></a>Attachment [trac_14580-more-colors-rebased.patch](tarball://root/attachments/some-uuid/ticket14580/trac_14580-more-colors-rebased.patch) by @ppurka created at 2013-07-24 07:54:59

Rebased both the patches against #13834



---

archive/issue_comments_227154.json:
```json
{
    "body": "<a id='comment:14'></a>patchbot apply trac_14580-legend_color.patch trac_14580-more-colors-rebased.patch",
    "created_at": "2013-07-24T07:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227154",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:14'></a>patchbot apply trac_14580-legend_color.patch trac_14580-more-colors-rebased.patch



---

archive/issue_comments_227155.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-16T21:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227155",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_041519.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:19:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14580#event-41519"
}
```



---

archive/issue_comments_227156.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.12.beta2\"",
    "created_at": "2013-08-16T21:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14580#issuecomment-227156",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.12.beta2"
