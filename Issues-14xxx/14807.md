# Issue 14807: Transition to build system for sage (the library)

archive/issues_014603.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-felixs"
    ],
    "body": "Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n\nThis ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.\n\nDepends on #14726\nDepends on #14834\nDepends on #15102\nDepends on #15112\nDepends on #15117\nDepends on #15123\nDepends on #15126\nDepends on #15176\n\nCC:  @nexttime @kiwifb @jondo\n\nKeywords: **sagelib**\n\nBranch/Commit: **[u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib) @ [`fc097b0`](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)**\n\nReviewer: **Marc Mezzarobba**\n\nComponent: **distribution**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14807_\n\n",
    "closed_at": "2021-09-18T10:03:59Z",
    "created_at": "2013-06-22T21:03:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20distribution",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Transition to build system for sage (the library)",
    "type": "issue",
    "updated_at": "2021-09-18T10:03:59Z",
    "url": "https://github.com/sagemath/sage/issues/14807",
    "user": "https://github.com/sagetrac-felixs"
}
```
Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").

This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.

Depends on #14726
Depends on #14834
Depends on #15102
Depends on #15112
Depends on #15117
Depends on #15123
Depends on #15126
Depends on #15176

CC:  @nexttime @kiwifb @jondo

Keywords: **sagelib**

Branch/Commit: **[u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib) @ [`fc097b0`](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)**

Reviewer: **Marc Mezzarobba**

Component: **distribution**

_Issue created by migration from https://trac.sagemath.org/ticket/14807_





---

archive/issue_events_208451.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-06-22T21:03:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208451"
}
```



---

archive/issue_events_208452.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-06-22T21:03:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "0000b0",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208452"
}
```



---

archive/issue_events_208453.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-06-22T21:03:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208453"
}
```



---

archive/issue_events_208454.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-06-22T22:24:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "subject": "https://github.com/nexttime",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208454"
}
```



---

archive/issue_comments_181059.json:
```json
{
    "body": "Changed dependencies from **#14726** to **#14726 #14834**",
    "created_at": "2013-06-27T11:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181059",
    "user": "https://github.com/sagetrac-felixs"
}
```

Changed dependencies from **#14726** to **#14726 #14834**



---

archive/issue_comments_181060.json:
```json
{
    "body": "Changed dependencies from **#14726 #14834** to **#14726, #14834**",
    "created_at": "2013-07-21T21:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181060",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#14726 #14834** to **#14726, #14834**



---

archive/issue_comments_181061.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhy would this be a blocker?",
    "created_at": "2013-07-21T21:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181061",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Why would this be a blocker?



---

archive/issue_events_208455.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:56:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208455"
}
```



---

archive/issue_events_208456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:56:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208456"
}
```



---

archive/issue_comments_181062.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jdemeyer](#comment:5):\n> Why would this be a blocker?\n\nit's not, sorry.\n\ni have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.",
    "created_at": "2013-08-09T09:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181062",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jdemeyer](#comment:5):
> Why would this be a blocker?

it's not, sorry.

i have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.



---

archive/issue_comments_181063.json:
```json
{
    "body": "Commit: **[`feff956`](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)**",
    "created_at": "2013-08-28T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181063",
    "user": "https://github.com/sagetrac-felixs"
}
```

Commit: **[`feff956`](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)**



---

archive/issue_comments_181064.json:
```json
{
    "body": "Changed dependencies from **#14726, #14834** to **#14726, #14834, #15117**",
    "created_at": "2013-08-28T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181064",
    "user": "https://github.com/sagetrac-felixs"
}
```

Changed dependencies from **#14726, #14834** to **#14726, #14834, #15117**



---

archive/issue_comments_181065.json:
```json
{
    "body": "Changed keywords from none to **sagelib**",
    "created_at": "2013-08-28T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181065",
    "user": "https://github.com/sagetrac-felixs"
}
```

Changed keywords from none to **sagelib**



---

archive/issue_comments_181066.json:
```json
{
    "body": "Branch: **[u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)**",
    "created_at": "2013-08-28T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181066",
    "user": "https://github.com/sagetrac-felixs"
}
```

Branch: **[u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)**



---

archive/issue_comments_181067.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Sage (\"the library\") needs a build system that works outside of sage (\"the distribution\").\n+Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n``````\n",
    "created_at": "2013-08-28T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181067",
    "user": "https://github.com/sagetrac-felixs"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Sage ("the library") needs a build system that works outside of sage ("the distribution").
+Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").
``````




---

archive/issue_comments_181068.json:
```json
{
    "body": "Changed dependencies from **#14726, #14834, #15117** to **#14726, #14834, #15102, #15112, #15117, #15123, #15126**",
    "created_at": "2013-08-30T11:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181068",
    "user": "https://github.com/sagetrac-felixs"
}
```

Changed dependencies from **#14726, #14834, #15117** to **#14726, #14834, #15102, #15112, #15117, #15123, #15126**



---

archive/issue_comments_181069.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:afa7de7]</code></td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:848bef8]</code></td><td><code>Merge branch 'libgap_include' into sagelib</code></td></tr><tr><td><code>[changeset:f77e13c]</code></td><td><code>python-sage: env</code></td></tr><tr><td><code>[changeset:29f8f3e]</code></td><td><code>python-sage build system continued/cleanup</code></td></tr><tr><td><code>[changeset:f2d1c37]</code></td><td><code>integrate sagelib build systems into old toplevel</code></td></tr><tr><td><code>[changeset:f5261c6]</code></td><td><code>bump libgap package patchlevel</code></td></tr><tr><td><code>[changeset:318138e]</code></td><td><code>apply patches from patchdir</code></td></tr><tr><td><code>[changeset:28b0da1]</code></td><td><code>python-sage build system</code></td></tr></table>\n",
    "created_at": "2013-09-01T11:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:afa7de7]</code></td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:848bef8]</code></td><td><code>Merge branch 'libgap_include' into sagelib</code></td></tr><tr><td><code>[changeset:f77e13c]</code></td><td><code>python-sage: env</code></td></tr><tr><td><code>[changeset:29f8f3e]</code></td><td><code>python-sage build system continued/cleanup</code></td></tr><tr><td><code>[changeset:f2d1c37]</code></td><td><code>integrate sagelib build systems into old toplevel</code></td></tr><tr><td><code>[changeset:f5261c6]</code></td><td><code>bump libgap package patchlevel</code></td></tr><tr><td><code>[changeset:318138e]</code></td><td><code>apply patches from patchdir</code></td></tr><tr><td><code>[changeset:28b0da1]</code></td><td><code>python-sage build system</code></td></tr></table>




---

archive/issue_comments_181070.json:
```json
{
    "body": "Changed commit from **[`feff956`](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)** to **[`afa7de7`](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)**",
    "created_at": "2013-09-01T11:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`feff956`](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)** to **[`afa7de7`](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)**



---

archive/issue_comments_181071.json:
```json
{
    "body": "Changed commit from **[`afa7de7`](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)** to **[`d4e1833`](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)**",
    "created_at": "2013-09-02T20:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181071",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`afa7de7`](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)** to **[`d4e1833`](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)**



---

archive/issue_comments_181072.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:d4e1833]</code></td><td><code>Merge branches 'sage_doc', 'python_sage_build' and 'csage_build_system' into sagelib</code></td></tr><tr><td><code>[changeset:1f3f7e4]</code></td><td><code>Merge branches 'cython_dbg' and 'cython_deps' into python_sage_build</code></td></tr><tr><td><code>[changeset:42449c1]</code></td><td><code>python-sage doctest path tolerance</code></td></tr><tr><td><code>[changeset:ae8bb63]</code></td><td><code>python-sage: env</code></td></tr><tr><td><code>[changeset:5a16d99]</code></td><td><code>python-sage build system</code></td></tr><tr><td><code>[changeset:79cf599]</code></td><td><code>sage-bin env</code></td></tr><tr><td><code>[changeset:3ff5c49]</code></td><td><code>sagelib: environment for check target</code></td></tr><tr><td><code>[changeset:ffe9b9d]</code></td><td><code>sage-doc. use SAGE_DOC_SRC as doc source path</code></td></tr><tr><td><code>[changeset:2df5bfc]</code></td><td><code>sage-doc: build system. mostly dist</code></td></tr><tr><td><code>[changeset:510f8b7]</code></td><td><code>Merge branch 'gmp_mpir' into csage_build_system</code></td></tr><tr><td><code>[changeset:0d50108]</code></td><td><code>provide gmpxx_or_mpirxx.h (required by sage-python)</code></td></tr><tr><td><code>[changeset:1e4789f]</code></td><td><code>csage: gmp_or_mpir fixup</code></td></tr><tr><td><code>[changeset:926e3f7]</code></td><td><code>build autotools before csage</code></td></tr><tr><td><code>[changeset:d4e9997]</code></td><td><code>Merge branch 'autotools' into csage_build_system</code></td></tr><tr><td><code>[changeset:f82b422]</code></td><td><code>cython: patch: gdb output dir option</code></td></tr><tr><td><code>[changeset:72c4538]</code></td><td><code>add more autotools executables</code></td></tr><tr><td><code>[changeset:bd11c24]</code></td><td><code>cython: add -MF switch to write dependency files (#14728)</code></td></tr></table>\n",
    "created_at": "2013-09-02T20:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181072",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:d4e1833]</code></td><td><code>Merge branches 'sage_doc', 'python_sage_build' and 'csage_build_system' into sagelib</code></td></tr><tr><td><code>[changeset:1f3f7e4]</code></td><td><code>Merge branches 'cython_dbg' and 'cython_deps' into python_sage_build</code></td></tr><tr><td><code>[changeset:42449c1]</code></td><td><code>python-sage doctest path tolerance</code></td></tr><tr><td><code>[changeset:ae8bb63]</code></td><td><code>python-sage: env</code></td></tr><tr><td><code>[changeset:5a16d99]</code></td><td><code>python-sage build system</code></td></tr><tr><td><code>[changeset:79cf599]</code></td><td><code>sage-bin env</code></td></tr><tr><td><code>[changeset:3ff5c49]</code></td><td><code>sagelib: environment for check target</code></td></tr><tr><td><code>[changeset:ffe9b9d]</code></td><td><code>sage-doc. use SAGE_DOC_SRC as doc source path</code></td></tr><tr><td><code>[changeset:2df5bfc]</code></td><td><code>sage-doc: build system. mostly dist</code></td></tr><tr><td><code>[changeset:510f8b7]</code></td><td><code>Merge branch 'gmp_mpir' into csage_build_system</code></td></tr><tr><td><code>[changeset:0d50108]</code></td><td><code>provide gmpxx_or_mpirxx.h (required by sage-python)</code></td></tr><tr><td><code>[changeset:1e4789f]</code></td><td><code>csage: gmp_or_mpir fixup</code></td></tr><tr><td><code>[changeset:926e3f7]</code></td><td><code>build autotools before csage</code></td></tr><tr><td><code>[changeset:d4e9997]</code></td><td><code>Merge branch 'autotools' into csage_build_system</code></td></tr><tr><td><code>[changeset:f82b422]</code></td><td><code>cython: patch: gdb output dir option</code></td></tr><tr><td><code>[changeset:72c4538]</code></td><td><code>add more autotools executables</code></td></tr><tr><td><code>[changeset:bd11c24]</code></td><td><code>cython: add -MF switch to write dependency files (#14728)</code></td></tr></table>




---

archive/issue_events_208457.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-03T08:44:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208457"
}
```



---

archive/issue_comments_181073.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n+\n+This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.\n``````\n",
    "created_at": "2013-09-03T08:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181073",
    "user": "https://github.com/sagetrac-felixs"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").
+
+This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.
``````




---

archive/issue_events_208458.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-03T08:44:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "title_is": "Transition to build system for sage (the library)",
    "title_was": "build system for sage (the library)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208458"
}
```



---

archive/issue_comments_181074.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nA clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...",
    "created_at": "2013-09-03T08:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181074",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:11" align="right">comment:11</div>

A clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...



---

archive/issue_comments_181075.json:
```json
{
    "body": "Changed commit from **[`d4e1833`](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)** to **[`2646f0d`](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)**",
    "created_at": "2013-09-06T14:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181075",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4e1833`](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)** to **[`2646f0d`](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)**



---

archive/issue_comments_181076.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:2646f0d]</code></td><td><code>Merge branch 'runtime_paths' into sagelib</code></td></tr><tr><td><code>[changeset:0d3cfcd]</code></td><td><code>build/deps</code></td></tr><tr><td><code>[changeset:30fb726]</code></td><td><code>sagelib build system</code></td></tr><tr><td><code>[changeset:b2415da]</code></td><td><code>provide sage-sh within sage-the-distribution</code></td></tr><tr><td><code>[changeset:8de880c]</code></td><td><code>fix a typo</code></td></tr><tr><td><code>[changeset:39f7247]</code></td><td><code>ellcurve data dir fixup</code></td></tr><tr><td><code>[changeset:0b9cb04]</code></td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td><code>[changeset:1ef62a1]</code></td><td><code>unhardwire cython.py completed</code></td></tr><tr><td><code>[changeset:390e28b]</code></td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td><code>[changeset:0dcd721]</code></td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr><tr><td><code>[changeset:591471d]</code></td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr><tr><td><code>[changeset:c19a5f3]</code></td><td><code>unhardwire sandpile</code></td></tr><tr><td><code>[changeset:5746289]</code></td><td><code>unhardwire polymake path</code></td></tr></table>\n",
    "created_at": "2013-09-06T14:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181076",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:2646f0d]</code></td><td><code>Merge branch 'runtime_paths' into sagelib</code></td></tr><tr><td><code>[changeset:0d3cfcd]</code></td><td><code>build/deps</code></td></tr><tr><td><code>[changeset:30fb726]</code></td><td><code>sagelib build system</code></td></tr><tr><td><code>[changeset:b2415da]</code></td><td><code>provide sage-sh within sage-the-distribution</code></td></tr><tr><td><code>[changeset:8de880c]</code></td><td><code>fix a typo</code></td></tr><tr><td><code>[changeset:39f7247]</code></td><td><code>ellcurve data dir fixup</code></td></tr><tr><td><code>[changeset:0b9cb04]</code></td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td><code>[changeset:1ef62a1]</code></td><td><code>unhardwire cython.py completed</code></td></tr><tr><td><code>[changeset:390e28b]</code></td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td><code>[changeset:0dcd721]</code></td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr><tr><td><code>[changeset:591471d]</code></td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr><tr><td><code>[changeset:c19a5f3]</code></td><td><code>unhardwire sandpile</code></td></tr><tr><td><code>[changeset:5746289]</code></td><td><code>unhardwire polymake path</code></td></tr></table>




---

archive/issue_comments_181077.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:1c89552]</code></td><td><code>cython doctest</code></td></tr><tr><td><code>[changeset:ef8771d]</code></td><td><code>dependency chain in build/deps</code></td></tr><tr><td><code>[changeset:7aaf953]</code></td><td><code>Merge 'trac/u/ohanar/build_system' into sagelib</code></td></tr></table>\n",
    "created_at": "2013-09-08T09:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:1c89552]</code></td><td><code>cython doctest</code></td></tr><tr><td><code>[changeset:ef8771d]</code></td><td><code>dependency chain in build/deps</code></td></tr><tr><td><code>[changeset:7aaf953]</code></td><td><code>Merge 'trac/u/ohanar/build_system' into sagelib</code></td></tr></table>




---

archive/issue_comments_181078.json:
```json
{
    "body": "Changed commit from **[`2646f0d`](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)** to **[`1c89552`](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)**",
    "created_at": "2013-09-08T09:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181078",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2646f0d`](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)** to **[`1c89552`](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)**



---

archive/issue_comments_181079.json:
```json
{
    "body": "Changed dependencies from **#14726, #14834, #15102, #15112, #15117, #15123, #15126** to **#14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176**",
    "created_at": "2013-09-08T11:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181079",
    "user": "https://github.com/sagetrac-felixs"
}
```

Changed dependencies from **#14726, #14834, #15102, #15112, #15117, #15123, #15126** to **#14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176**



---

archive/issue_comments_181080.json:
```json
{
    "body": "Changed commit from **[`1c89552`](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)** to **[`0e91a83`](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)**",
    "created_at": "2013-09-12T08:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1c89552`](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)** to **[`0e91a83`](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)**



---

archive/issue_comments_181081.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:0e91a83]</code></td><td><code>Merge branches 'sage-bin' and 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:e429991]</code></td><td><code>inject proper paths into autotools calls</code></td></tr><tr><td><code>[changeset:41326b4]</code></td><td><code>sagelib: freeze (parts of) environment during configure</code></td></tr><tr><td><code>[changeset:ec442e5]</code></td><td><code>always use autotools within sage (\"the distribution\")</code></td></tr><tr><td><code>[changeset:26c67b2]</code></td><td><code>python-sage: make cython call more toolchain friendly</code></td></tr><tr><td><code>[changeset:69fda9a]</code></td><td><code>Merge remote-tracking branch 'trac/u/ohanar/build_system' into sage-bin</code></td></tr><tr><td><code>[changeset:f9f8d16]</code></td><td><code>sage-bin: remove PATH_REDUNDANCY cruft</code></td></tr><tr><td><code>[changeset:3e2aeb1]</code></td><td><code>transition from old toplevel. create symlinks, for now.</code></td></tr><tr><td><code>[changeset:e0064c9]</code></td><td><code>sage-bin expand SAGE_ETC correctly</code></td></tr><tr><td><code>[changeset:fcb670f]</code></td><td><code>simplify python byte compile rules</code></td></tr><tr><td><code>[changeset:2af9070]</code></td><td><code>GMP_VS_MPIR fixup</code></td></tr><tr><td><code>[changeset:45a30e1]</code></td><td><code>provide unhardwired SAGE_CFLAGS</code></td></tr><tr><td><code>[changeset:e195725]</code></td><td><code>python-sage: Makefiles</code></td></tr><tr><td><code>[changeset:c4562b3]</code></td><td><code>python_sage: build system continued</code></td></tr><tr><td><code>[changeset:6d074ee]</code></td><td><code>sage-bin: more config files</code></td></tr></table>\n",
    "created_at": "2013-09-12T08:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181081",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:0e91a83]</code></td><td><code>Merge branches 'sage-bin' and 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:e429991]</code></td><td><code>inject proper paths into autotools calls</code></td></tr><tr><td><code>[changeset:41326b4]</code></td><td><code>sagelib: freeze (parts of) environment during configure</code></td></tr><tr><td><code>[changeset:ec442e5]</code></td><td><code>always use autotools within sage ("the distribution")</code></td></tr><tr><td><code>[changeset:26c67b2]</code></td><td><code>python-sage: make cython call more toolchain friendly</code></td></tr><tr><td><code>[changeset:69fda9a]</code></td><td><code>Merge remote-tracking branch 'trac/u/ohanar/build_system' into sage-bin</code></td></tr><tr><td><code>[changeset:f9f8d16]</code></td><td><code>sage-bin: remove PATH_REDUNDANCY cruft</code></td></tr><tr><td><code>[changeset:3e2aeb1]</code></td><td><code>transition from old toplevel. create symlinks, for now.</code></td></tr><tr><td><code>[changeset:e0064c9]</code></td><td><code>sage-bin expand SAGE_ETC correctly</code></td></tr><tr><td><code>[changeset:fcb670f]</code></td><td><code>simplify python byte compile rules</code></td></tr><tr><td><code>[changeset:2af9070]</code></td><td><code>GMP_VS_MPIR fixup</code></td></tr><tr><td><code>[changeset:45a30e1]</code></td><td><code>provide unhardwired SAGE_CFLAGS</code></td></tr><tr><td><code>[changeset:e195725]</code></td><td><code>python-sage: Makefiles</code></td></tr><tr><td><code>[changeset:c4562b3]</code></td><td><code>python_sage: build system continued</code></td></tr><tr><td><code>[changeset:6d074ee]</code></td><td><code>sage-bin: more config files</code></td></tr></table>




---

archive/issue_comments_181082.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:fc097b0]</code></td><td><code>build/deps fixup</code></td></tr><tr><td><code>[changeset:88a4478]</code></td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:1dacfa5]</code></td><td><code>python-sage: Makefiles update for 512beta4</code></td></tr><tr><td><code>[changeset:cb27876]</code></td><td><code>python-sage: Makefiles fix</code></td></tr></table>\n",
    "created_at": "2013-09-12T10:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181082",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:fc097b0]</code></td><td><code>build/deps fixup</code></td></tr><tr><td><code>[changeset:88a4478]</code></td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td><code>[changeset:1dacfa5]</code></td><td><code>python-sage: Makefiles update for 512beta4</code></td></tr><tr><td><code>[changeset:cb27876]</code></td><td><code>python-sage: Makefiles fix</code></td></tr></table>




---

archive/issue_comments_181083.json:
```json
{
    "body": "Changed commit from **[`0e91a83`](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)** to **[`fc097b0`](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)**",
    "created_at": "2013-09-12T10:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181083",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0e91a83`](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)** to **[`fc097b0`](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)**



---

archive/issue_comments_181084.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNeeds to be rebased.",
    "created_at": "2013-12-29T18:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181084",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Needs to be rebased.



---

archive/issue_events_208459.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-29T18:17:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208459"
}
```



---

archive/issue_events_208460.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-29T18:17:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208460"
}
```



---

archive/issue_events_208461.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208461"
}
```



---

archive/issue_events_208462.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208462"
}
```



---

archive/issue_events_208463.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208463"
}
```



---

archive/issue_events_208464.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208464"
}
```



---

archive/issue_events_208465.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208465"
}
```



---

archive/issue_events_208466.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208466"
}
```



---

archive/issue_comments_181085.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.\n\nWhat is the status of the Sage community's interest in this sort of work?",
    "created_at": "2016-03-01T14:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181085",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

I wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.

What is the status of the Sage community's interest in this sort of work?



---

archive/issue_comments_181086.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHi Erik.\n\nmaybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)\n\ni could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to\n\n- lack of automatic dependency tracking\n  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)\n- missing VPATH builds\n  (requirement for mere sanity, also for distcheck, cf. #21469),\n\nrendering the approach useless for debugging/development on foreign distros.\n\neventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...\n\ni am not totally up to date with the recent (last ~3 years) changes, and YMMV.",
    "created_at": "2016-09-11T08:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181086",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:22" align="right">comment:22</div>

Hi Erik.

maybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)

i could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to

- lack of automatic dependency tracking
  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)
- missing VPATH builds
  (requirement for mere sanity, also for distcheck, cf. #21469),

rendering the approach useless for debugging/development on foreign distros.

eventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...

i am not totally up to date with the recent (last ~3 years) changes, and YMMV.



---

archive/issue_comments_181087.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n@sagetrac-felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.",
    "created_at": "2016-09-12T15:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181087",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

@sagetrac-felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.



---

archive/issue_comments_181088.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:23):\n> @sagetrac-felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.\n\nhi Jeroen\n\nthe reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve \"implement a viable alternative to autotools\", which in my understanding is beyond the scope of this project.\n\n> I don't know if that has ever been done.\n\nautomake supports python for a loong time. i am not \"trying to use\" rather than \"suggesting\" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).\n\n> I guess that distros would hate us for doing that.\n\nthat i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\". cannot think of a way that would make packageing any easier. (care to explain?)",
    "created_at": "2016-09-12T16:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181088",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:23):
> @sagetrac-felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.

hi Jeroen

the reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve "implement a viable alternative to autotools", which in my understanding is beyond the scope of this project.

> I don't know if that has ever been done.

automake supports python for a loong time. i am not "trying to use" rather than "suggesting" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).

> I guess that distros would hate us for doing that.

that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}". cannot think of a way that would make packageing any easier. (care to explain?)



---

archive/issue_comments_181089.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@sagetrac-felixs](#comment:24):\n> that i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\".\n\n...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.",
    "created_at": "2016-09-12T19:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181089",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@sagetrac-felixs](#comment:24):
> that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}".

...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.



---

archive/issue_comments_181090.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> But I have never seen a package maintainer say that as alternative to setup.py.\n\ntrue/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.\n\nstill, i see no evidence why someone might \"hate us\" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement\n- VPATH\n- (pre build) configuration\n- (compile time) dependencies\n- a make based build process\nall of which immediately facilitate development, testing, debugging and thus packaging.",
    "created_at": "2016-09-12T20:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181090",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:26" align="right">comment:26</div>

> But I have never seen a package maintainer say that as alternative to setup.py.

true/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.

still, i see no evidence why someone might "hate us" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement
- VPATH
- (pre build) configuration
- (compile time) dependencies
- a make based build process
all of which immediately facilitate development, testing, debugging and thus packaging.



---

archive/issue_comments_181091.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@sagetrac-felixs](#comment:26):\n> instead (let me repeat), the autotools implement\n> - VPATH\n> - (pre build) configuration\n> - (compile time) dependencies\n> - a make based build process\n> all of which immediately facilitate development, testing, debugging and thus packaging.\n\nThe autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.",
    "created_at": "2016-09-12T20:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181091",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@sagetrac-felixs](#comment:26):
> instead (let me repeat), the autotools implement
> - VPATH
> - (pre build) configuration
> - (compile time) dependencies
> - a make based build process
> all of which immediately facilitate development, testing, debugging and thus packaging.

The autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.



---

archive/issue_comments_181092.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n>  The autotools implement that for a typical C/C++ package. \n\nat least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).\n\n> They don't really implement all that\n\nwhat exactly do you mean? please give an example.\n\nthanks\n\n[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html",
    "created_at": "2016-09-12T21:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181092",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:28" align="right">comment:28</div>

>  The autotools implement that for a typical C/C++ package. 

at least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).

> They don't really implement all that

what exactly do you mean? please give an example.

thanks

[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html



---

archive/issue_comments_181093.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOK, that looks interesting. I didn't know that `automake` could do that.",
    "created_at": "2016-09-12T21:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181093",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

OK, that looks interesting. I didn't know that `automake` could do that.



---

archive/issue_comments_181094.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. \n\nIn a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.\n\nAdmittedly software detection and so on is easier with something else than python...",
    "created_at": "2016-09-12T21:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181094",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Yes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. 

In a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.

Admittedly software detection and so on is easier with something else than python...



---

archive/issue_comments_181095.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@kiwifb](#comment:30):\n> Admittedly software detection and so on is easier with something else than python...\n\nSConstruct! B)",
    "created_at": "2016-09-12T22:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181095",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@kiwifb](#comment:30):
> Admittedly software detection and so on is easier with something else than python...

SConstruct! B)



---

archive/issue_comments_181096.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......",
    "created_at": "2016-09-12T22:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181096",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......



---

archive/issue_comments_181097.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nJeroen **loves** SC...",
    "created_at": "2016-09-12T22:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181097",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

Jeroen **loves** SC...



---

archive/issue_comments_181098.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kiwifb](#comment:30):\n> Admittedly software detection and so on is easier with something else than python...\n\nFor the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.",
    "created_at": "2016-09-13T09:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181098",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kiwifb](#comment:30):
> Admittedly software detection and so on is easier with something else than python...

For the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.



---

archive/issue_comments_181099.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jdemeyer](#comment:34):\n> For the record:\n\nhere's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.\n\n[1] https://github.com/felix-salfelder/sage/tree/autotools\n\n[2] https://github.com/felix-salfelder/sage/tree/autotools/src",
    "created_at": "2016-09-13T10:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181099",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jdemeyer](#comment:34):
> For the record:

here's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.

[1] https://github.com/felix-salfelder/sage/tree/autotools

[2] https://github.com/felix-salfelder/sage/tree/autotools/src



---

archive/issue_comments_181100.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the \"easiest\" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.\n\nBut there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a \"source distribution\" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.\n\nI think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.",
    "created_at": "2016-09-22T14:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181100",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

I have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the "easiest" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.

But there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a "source distribution" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.

I think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.



---

archive/issue_comments_181101.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAlso, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py\n\nMatplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's \"hand rolled\", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<\n\nNumpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).",
    "created_at": "2016-09-22T15:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181101",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">comment:37</div>

Also, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py

Matplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's "hand rolled", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<

Numpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).



---

archive/issue_comments_181102.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOutdated, should be closed",
    "created_at": "2020-09-15T18:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181102",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Outdated, should be closed



---

archive/issue_comments_181103.json:
```json
{
    "body": "Changed author from **Felix Salfelder** to none",
    "created_at": "2020-09-15T18:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181103",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Felix Salfelder** to none



---

archive/issue_events_208467.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208467"
}
```



---

archive/issue_events_208468.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208468"
}
```



---

archive/issue_events_208469.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208469"
}
```



---

archive/issue_comments_181104.json:
```json
{
    "body": "Reviewer: **Marc Mezzarobba**",
    "created_at": "2021-09-18T09:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14807#issuecomment-181104",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Marc Mezzarobba**



---

archive/issue_events_208470.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2021-09-18T09:50:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208470"
}
```



---

archive/issue_events_208471.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2021-09-18T09:50:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208471"
}
```



---

archive/issue_events_208472.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-09-18T10:03:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208472"
}
```



---

archive/issue_events_208473.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-09-18T10:03:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14807",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14807#event-208473"
}
```
