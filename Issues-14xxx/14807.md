# Issue 14807: Transition to build system for sage (the library)

archive/issues_014603.json:
```json
{
    "body": "Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n\nThis ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.\n\n**Assignee:** felixs\n\n**CC:**  @nexttime @kiwifb @jondo\n\n**Keywords:** sagelib\n\n**Branch:** [u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)\n\n**Commit:** [fc097b0d3725822513f174de099c19bafbc9fe6f](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)\n\n**Reviewer:** Marc Mezzarobba\n\n**Dependencies:** #14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176\n\nIssue created by migration from https://trac.sagemath.org/ticket/14807\n\n",
    "closed_at": "2021-09-18T10:03:59Z",
    "created_at": "2013-06-22T21:03:30Z",
    "labels": [
        "component: distribution",
        "invalid"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Transition to build system for sage (the library)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14807",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").

This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.

**Assignee:** felixs

**CC:**  @nexttime @kiwifb @jondo

**Keywords:** sagelib

**Branch:** [u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)

**Commit:** [fc097b0d3725822513f174de099c19bafbc9fe6f](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)

**Reviewer:** Marc Mezzarobba

**Dependencies:** #14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176

Issue created by migration from https://trac.sagemath.org/ticket/14807





---

archive/issue_comments_222999.json:
```json
{
    "body": "**Changing assignee** from Felix Salfelder to felixs.",
    "created_at": "2013-06-22T22:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-222999",
    "user": "https://github.com/nexttime"
}
```

**Changing assignee** from Felix Salfelder to felixs.



---

archive/issue_comments_223000.json:
```json
{
    "body": "**Changing dependencies** from \"#14726\" to \"#14726 #14834\".",
    "created_at": "2013-06-27T11:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223000",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing dependencies** from "#14726" to "#14726 #14834".



---

archive/issue_comments_223001.json:
```json
{
    "body": "**Changing dependencies** from \"#14726 #14834\" to \"#14726, #14834\".",
    "created_at": "2013-07-21T21:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223001",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#14726 #14834" to "#14726, #14834".



---

archive/issue_comments_223002.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhy would this be a blocker?",
    "created_at": "2013-07-21T21:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223002",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Why would this be a blocker?



---

archive/issue_comments_223003.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jdemeyer](#comment%3A5):\n> Why would this be a blocker?\n\n\nit's not, sorry.\n\ni have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.",
    "created_at": "2013-08-09T09:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223003",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:6'></a>
Replying to [jdemeyer](#comment%3A5):
> Why would this be a blocker?


it's not, sorry.

i have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.



---

archive/issue_comments_223004.json:
```json
{
    "body": "**Commit:** [feff956b616b9c8264e2363283f7d568e622cec1](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223004",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Commit:** [feff956b616b9c8264e2363283f7d568e622cec1](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)



---

archive/issue_comments_223005.json:
```json
{
    "body": "**Changing dependencies** from \"#14726, #14834\" to \"#14726, #14834, #15117\".",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223005",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing dependencies** from "#14726, #14834" to "#14726, #14834, #15117".



---

archive/issue_comments_223006.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sagelib\".",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223006",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing keywords** from "" to "sagelib".



---

archive/issue_comments_223007.json:
```json
{
    "body": "**Branch:** [u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223007",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Branch:** [u/felixs/sagelib](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/sagelib)



---

archive/issue_comments_223008.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Sage (\"the library\") needs a build system that works outside of sage (\"the distribution\").\n+Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n``````\n",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223008",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Sage ("the library") needs a build system that works outside of sage ("the distribution").
+Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").
``````




---

archive/issue_comments_223009.json:
```json
{
    "body": "**Changing dependencies** from \"#14726, #14834, #15117\" to \"#14726, #14834, #15102, #15112, #15117, #15123, #15126\".",
    "created_at": "2013-08-30T11:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223009",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing dependencies** from "#14726, #14834, #15117" to "#14726, #14834, #15102, #15112, #15117, #15123, #15126".



---

archive/issue_comments_223010.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:afa7de7]</td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:848bef8]</td><td><code>Merge branch 'libgap_include' into sagelib</code></td></tr><tr><td>[changeset:f77e13c]</td><td><code>python-sage: env</code></td></tr><tr><td>[changeset:29f8f3e]</td><td><code>python-sage build system continued/cleanup</code></td></tr><tr><td>[changeset:f2d1c37]</td><td><code>integrate sagelib build systems into old toplevel</code></td></tr><tr><td>[changeset:f5261c6]</td><td><code>bump libgap package patchlevel</code></td></tr><tr><td>[changeset:318138e]</td><td><code>apply patches from patchdir</code></td></tr><tr><td>[changeset:28b0da1]</td><td><code>python-sage build system</code></td></tr></table>\n",
    "created_at": "2013-09-01T11:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:afa7de7]</td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:848bef8]</td><td><code>Merge branch 'libgap_include' into sagelib</code></td></tr><tr><td>[changeset:f77e13c]</td><td><code>python-sage: env</code></td></tr><tr><td>[changeset:29f8f3e]</td><td><code>python-sage build system continued/cleanup</code></td></tr><tr><td>[changeset:f2d1c37]</td><td><code>integrate sagelib build systems into old toplevel</code></td></tr><tr><td>[changeset:f5261c6]</td><td><code>bump libgap package patchlevel</code></td></tr><tr><td>[changeset:318138e]</td><td><code>apply patches from patchdir</code></td></tr><tr><td>[changeset:28b0da1]</td><td><code>python-sage build system</code></td></tr></table>




---

archive/issue_comments_223011.json:
```json
{
    "body": "**Changing commit** from \"[feff956b616b9c8264e2363283f7d568e622cec1](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)\" to \"[afa7de70dd4f27ae76588ab13c8f36bb5cadb733](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)\".",
    "created_at": "2013-09-01T11:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[feff956b616b9c8264e2363283f7d568e622cec1](https://github.com/sagemath/sagetrac-mirror/commit/feff956b616b9c8264e2363283f7d568e622cec1)" to "[afa7de70dd4f27ae76588ab13c8f36bb5cadb733](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)".



---

archive/issue_comments_223012.json:
```json
{
    "body": "**Changing commit** from \"[afa7de70dd4f27ae76588ab13c8f36bb5cadb733](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)\" to \"[d4e1833d483f142e3e3f47e8b882b0bf48955d76](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)\".",
    "created_at": "2013-09-02T20:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[afa7de70dd4f27ae76588ab13c8f36bb5cadb733](https://github.com/sagemath/sagetrac-mirror/commit/afa7de70dd4f27ae76588ab13c8f36bb5cadb733)" to "[d4e1833d483f142e3e3f47e8b882b0bf48955d76](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)".



---

archive/issue_comments_223013.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:d4e1833]</td><td><code>Merge branches 'sage_doc', 'python_sage_build' and 'csage_build_system' into sagelib</code></td></tr><tr><td>[changeset:1f3f7e4]</td><td><code>Merge branches 'cython_dbg' and 'cython_deps' into python_sage_build</code></td></tr><tr><td>[changeset:42449c1]</td><td><code>python-sage doctest path tolerance</code></td></tr><tr><td>[changeset:ae8bb63]</td><td><code>python-sage: env</code></td></tr><tr><td>[changeset:5a16d99]</td><td><code>python-sage build system</code></td></tr><tr><td>[changeset:79cf599]</td><td><code>sage-bin env</code></td></tr><tr><td>[changeset:3ff5c49]</td><td><code>sagelib: environment for check target</code></td></tr><tr><td>[changeset:ffe9b9d]</td><td><code>sage-doc. use SAGE_DOC_SRC as doc source path</code></td></tr><tr><td>[changeset:2df5bfc]</td><td><code>sage-doc: build system. mostly dist</code></td></tr><tr><td>[changeset:510f8b7]</td><td><code>Merge branch 'gmp_mpir' into csage_build_system</code></td></tr><tr><td>[changeset:0d50108]</td><td><code>provide gmpxx_or_mpirxx.h (required by sage-python)</code></td></tr><tr><td>[changeset:1e4789f]</td><td><code>csage: gmp_or_mpir fixup</code></td></tr><tr><td>[changeset:926e3f7]</td><td><code>build autotools before csage</code></td></tr><tr><td>[changeset:d4e9997]</td><td><code>Merge branch 'autotools' into csage_build_system</code></td></tr><tr><td>[changeset:f82b422]</td><td><code>cython: patch: gdb output dir option</code></td></tr><tr><td>[changeset:72c4538]</td><td><code>add more autotools executables</code></td></tr><tr><td>[changeset:bd11c24]</td><td><code>cython: add -MF switch to write dependency files (#14728)</code></td></tr></table>\n",
    "created_at": "2013-09-02T20:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:d4e1833]</td><td><code>Merge branches 'sage_doc', 'python_sage_build' and 'csage_build_system' into sagelib</code></td></tr><tr><td>[changeset:1f3f7e4]</td><td><code>Merge branches 'cython_dbg' and 'cython_deps' into python_sage_build</code></td></tr><tr><td>[changeset:42449c1]</td><td><code>python-sage doctest path tolerance</code></td></tr><tr><td>[changeset:ae8bb63]</td><td><code>python-sage: env</code></td></tr><tr><td>[changeset:5a16d99]</td><td><code>python-sage build system</code></td></tr><tr><td>[changeset:79cf599]</td><td><code>sage-bin env</code></td></tr><tr><td>[changeset:3ff5c49]</td><td><code>sagelib: environment for check target</code></td></tr><tr><td>[changeset:ffe9b9d]</td><td><code>sage-doc. use SAGE_DOC_SRC as doc source path</code></td></tr><tr><td>[changeset:2df5bfc]</td><td><code>sage-doc: build system. mostly dist</code></td></tr><tr><td>[changeset:510f8b7]</td><td><code>Merge branch 'gmp_mpir' into csage_build_system</code></td></tr><tr><td>[changeset:0d50108]</td><td><code>provide gmpxx_or_mpirxx.h (required by sage-python)</code></td></tr><tr><td>[changeset:1e4789f]</td><td><code>csage: gmp_or_mpir fixup</code></td></tr><tr><td>[changeset:926e3f7]</td><td><code>build autotools before csage</code></td></tr><tr><td>[changeset:d4e9997]</td><td><code>Merge branch 'autotools' into csage_build_system</code></td></tr><tr><td>[changeset:f82b422]</td><td><code>cython: patch: gdb output dir option</code></td></tr><tr><td>[changeset:72c4538]</td><td><code>add more autotools executables</code></td></tr><tr><td>[changeset:bd11c24]</td><td><code>cython: add -MF switch to write dependency files (#14728)</code></td></tr></table>




---

archive/issue_comments_223014.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-09-03T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223014",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_223015.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Sage (\"the library\") needs a build system that works inside and outside of sage (\"the distribution\").\n+\n+This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.\n``````\n",
    "created_at": "2013-09-03T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223015",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Sage ("the library") needs a build system that works inside and outside of sage ("the distribution").
+
+This ticket integrates the build systems for the parts of `sagelib` into the current toplevel build system.
``````




---

archive/issue_events_049104.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "rename": {
        "from": "build system for sage (the library)",
        "to": "Transition to build system for sage (the library)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49104"
}
```



---

archive/issue_comments_223016.json:
```json
{
    "body": "<a id='comment:11'></a>\nA clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...",
    "created_at": "2013-09-03T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223016",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:11'></a>
A clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...



---

archive/issue_comments_223017.json:
```json
{
    "body": "**Changing commit** from \"[d4e1833d483f142e3e3f47e8b882b0bf48955d76](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)\" to \"[2646f0d29a2437eaf6d61d5cef49108da0db503c](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)\".",
    "created_at": "2013-09-06T14:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d4e1833d483f142e3e3f47e8b882b0bf48955d76](https://github.com/sagemath/sagetrac-mirror/commit/d4e1833d483f142e3e3f47e8b882b0bf48955d76)" to "[2646f0d29a2437eaf6d61d5cef49108da0db503c](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)".



---

archive/issue_comments_223018.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:2646f0d]</td><td><code>Merge branch 'runtime_paths' into sagelib</code></td></tr><tr><td>[changeset:0d3cfcd]</td><td><code>build/deps</code></td></tr><tr><td>[changeset:30fb726]</td><td><code>sagelib build system</code></td></tr><tr><td>[changeset:b2415da]</td><td><code>provide sage-sh within sage-the-distribution</code></td></tr><tr><td>[changeset:8de880c]</td><td><code>fix a typo</code></td></tr><tr><td>[changeset:39f7247]</td><td><code>ellcurve data dir fixup</code></td></tr><tr><td>[changeset:0b9cb04]</td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td>[changeset:1ef62a1]</td><td><code>unhardwire cython.py completed</code></td></tr><tr><td>[changeset:390e28b]</td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td>[changeset:0dcd721]</td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr><tr><td>[changeset:591471d]</td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr><tr><td>[changeset:c19a5f3]</td><td><code>unhardwire sandpile</code></td></tr><tr><td>[changeset:5746289]</td><td><code>unhardwire polymake path</code></td></tr></table>\n",
    "created_at": "2013-09-06T14:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:2646f0d]</td><td><code>Merge branch 'runtime_paths' into sagelib</code></td></tr><tr><td>[changeset:0d3cfcd]</td><td><code>build/deps</code></td></tr><tr><td>[changeset:30fb726]</td><td><code>sagelib build system</code></td></tr><tr><td>[changeset:b2415da]</td><td><code>provide sage-sh within sage-the-distribution</code></td></tr><tr><td>[changeset:8de880c]</td><td><code>fix a typo</code></td></tr><tr><td>[changeset:39f7247]</td><td><code>ellcurve data dir fixup</code></td></tr><tr><td>[changeset:0b9cb04]</td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td>[changeset:1ef62a1]</td><td><code>unhardwire cython.py completed</code></td></tr><tr><td>[changeset:390e28b]</td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td>[changeset:0dcd721]</td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr><tr><td>[changeset:591471d]</td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr><tr><td>[changeset:c19a5f3]</td><td><code>unhardwire sandpile</code></td></tr><tr><td>[changeset:5746289]</td><td><code>unhardwire polymake path</code></td></tr></table>




---

archive/issue_comments_223019.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:1c89552]</td><td><code>cython doctest</code></td></tr><tr><td>[changeset:ef8771d]</td><td><code>dependency chain in build/deps</code></td></tr><tr><td>[changeset:7aaf953]</td><td><code>Merge 'trac/u/ohanar/build_system' into sagelib</code></td></tr></table>\n",
    "created_at": "2013-09-08T09:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:1c89552]</td><td><code>cython doctest</code></td></tr><tr><td>[changeset:ef8771d]</td><td><code>dependency chain in build/deps</code></td></tr><tr><td>[changeset:7aaf953]</td><td><code>Merge 'trac/u/ohanar/build_system' into sagelib</code></td></tr></table>




---

archive/issue_comments_223020.json:
```json
{
    "body": "**Changing commit** from \"[2646f0d29a2437eaf6d61d5cef49108da0db503c](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)\" to \"[1c895525862649c8eb07c5da02b7a31a2f0504f3](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)\".",
    "created_at": "2013-09-08T09:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223020",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2646f0d29a2437eaf6d61d5cef49108da0db503c](https://github.com/sagemath/sagetrac-mirror/commit/2646f0d29a2437eaf6d61d5cef49108da0db503c)" to "[1c895525862649c8eb07c5da02b7a31a2f0504f3](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)".



---

archive/issue_comments_223021.json:
```json
{
    "body": "**Changing dependencies** from \"#14726, #14834, #15102, #15112, #15117, #15123, #15126\" to \"#14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176\".",
    "created_at": "2013-09-08T11:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223021",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

**Changing dependencies** from "#14726, #14834, #15102, #15112, #15117, #15123, #15126" to "#14726, #14834, #15102, #15112, #15117, #15123, #15126, #15176".



---

archive/issue_comments_223022.json:
```json
{
    "body": "**Changing commit** from \"[1c895525862649c8eb07c5da02b7a31a2f0504f3](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)\" to \"[0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)\".",
    "created_at": "2013-09-12T08:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1c895525862649c8eb07c5da02b7a31a2f0504f3](https://github.com/sagemath/sagetrac-mirror/commit/1c895525862649c8eb07c5da02b7a31a2f0504f3)" to "[0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)".



---

archive/issue_comments_223023.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:0e91a83]</td><td><code>Merge branches 'sage-bin' and 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:e429991]</td><td><code>inject proper paths into autotools calls</code></td></tr><tr><td>[changeset:41326b4]</td><td><code>sagelib: freeze (parts of) environment during configure</code></td></tr><tr><td>[changeset:ec442e5]</td><td><code>always use autotools within sage (\"the distribution\")</code></td></tr><tr><td>[changeset:26c67b2]</td><td><code>python-sage: make cython call more toolchain friendly</code></td></tr><tr><td>[changeset:69fda9a]</td><td><code>Merge remote-tracking branch 'trac/u/ohanar/build_system' into sage-bin</code></td></tr><tr><td>[changeset:f9f8d16]</td><td><code>sage-bin: remove PATH_REDUNDANCY cruft</code></td></tr><tr><td>[changeset:3e2aeb1]</td><td><code>transition from old toplevel. create symlinks, for now.</code></td></tr><tr><td>[changeset:e0064c9]</td><td><code>sage-bin expand SAGE_ETC correctly</code></td></tr><tr><td>[changeset:fcb670f]</td><td><code>simplify python byte compile rules</code></td></tr><tr><td>[changeset:2af9070]</td><td><code>GMP_VS_MPIR fixup</code></td></tr><tr><td>[changeset:45a30e1]</td><td><code>provide unhardwired SAGE_CFLAGS</code></td></tr><tr><td>[changeset:e195725]</td><td><code>python-sage: Makefiles</code></td></tr><tr><td>[changeset:c4562b3]</td><td><code>python_sage: build system continued</code></td></tr><tr><td>[changeset:6d074ee]</td><td><code>sage-bin: more config files</code></td></tr></table>\n",
    "created_at": "2013-09-12T08:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:0e91a83]</td><td><code>Merge branches 'sage-bin' and 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:e429991]</td><td><code>inject proper paths into autotools calls</code></td></tr><tr><td>[changeset:41326b4]</td><td><code>sagelib: freeze (parts of) environment during configure</code></td></tr><tr><td>[changeset:ec442e5]</td><td><code>always use autotools within sage ("the distribution")</code></td></tr><tr><td>[changeset:26c67b2]</td><td><code>python-sage: make cython call more toolchain friendly</code></td></tr><tr><td>[changeset:69fda9a]</td><td><code>Merge remote-tracking branch 'trac/u/ohanar/build_system' into sage-bin</code></td></tr><tr><td>[changeset:f9f8d16]</td><td><code>sage-bin: remove PATH_REDUNDANCY cruft</code></td></tr><tr><td>[changeset:3e2aeb1]</td><td><code>transition from old toplevel. create symlinks, for now.</code></td></tr><tr><td>[changeset:e0064c9]</td><td><code>sage-bin expand SAGE_ETC correctly</code></td></tr><tr><td>[changeset:fcb670f]</td><td><code>simplify python byte compile rules</code></td></tr><tr><td>[changeset:2af9070]</td><td><code>GMP_VS_MPIR fixup</code></td></tr><tr><td>[changeset:45a30e1]</td><td><code>provide unhardwired SAGE_CFLAGS</code></td></tr><tr><td>[changeset:e195725]</td><td><code>python-sage: Makefiles</code></td></tr><tr><td>[changeset:c4562b3]</td><td><code>python_sage: build system continued</code></td></tr><tr><td>[changeset:6d074ee]</td><td><code>sage-bin: more config files</code></td></tr></table>




---

archive/issue_comments_223024.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[changeset:fc097b0]</td><td><code>build/deps fixup</code></td></tr><tr><td>[changeset:88a4478]</td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:1dacfa5]</td><td><code>python-sage: Makefiles update for 512beta4</code></td></tr><tr><td>[changeset:cb27876]</td><td><code>python-sage: Makefiles fix</code></td></tr></table>\n",
    "created_at": "2013-09-12T10:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[changeset:fc097b0]</td><td><code>build/deps fixup</code></td></tr><tr><td>[changeset:88a4478]</td><td><code>Merge branch 'python_sage_build' into sagelib</code></td></tr><tr><td>[changeset:1dacfa5]</td><td><code>python-sage: Makefiles update for 512beta4</code></td></tr><tr><td>[changeset:cb27876]</td><td><code>python-sage: Makefiles fix</code></td></tr></table>




---

archive/issue_comments_223025.json:
```json
{
    "body": "**Changing commit** from \"[0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)\" to \"[fc097b0d3725822513f174de099c19bafbc9fe6f](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)\".",
    "created_at": "2013-09-12T10:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd](https://github.com/sagemath/sagetrac-mirror/commit/0e91a83ed0f02c1d0b29d3b94622b8224c0b2ccd)" to "[fc097b0d3725822513f174de099c19bafbc9fe6f](https://github.com/sagemath/sagetrac-mirror/commit/fc097b0d3725822513f174de099c19bafbc9fe6f)".



---

archive/issue_comments_223026.json:
```json
{
    "body": "<a id='comment:17'></a>\nNeeds to be rebased.",
    "created_at": "2013-12-29T18:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223026",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Needs to be rebased.



---

archive/issue_comments_223027.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-12-29T18:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223027",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_049105.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49105"
}
```



---

archive/issue_events_049106.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49106"
}
```



---

archive/issue_events_049107.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49107"
}
```



---

archive/issue_events_049108.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49108"
}
```



---

archive/issue_events_049109.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49109"
}
```



---

archive/issue_comments_223028.json:
```json
{
    "body": "<a id='comment:21'></a>\nI wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.\n\nWhat is the status of the Sage community's interest in this sort of work?",
    "created_at": "2016-03-01T14:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223028",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
I wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.

What is the status of the Sage community's interest in this sort of work?



---

archive/issue_comments_223029.json:
```json
{
    "body": "<a id='comment:22'></a>\nHi Erik.\n\nmaybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)\n\ni could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to\n\n- lack of automatic dependency tracking\n  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)\n- missing VPATH builds\n  (requirement for mere sanity, also for distcheck, cf. #21469),\n\nrendering the approach useless for debugging/development on foreign distros.\n\neventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...\n\ni am not totally up to date with the recent (last ~3 years) changes, and YMMV.",
    "created_at": "2016-09-11T08:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223029",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:22'></a>
Hi Erik.

maybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)

i could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to

- lack of automatic dependency tracking
  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)
- missing VPATH builds
  (requirement for mere sanity, also for distcheck, cf. #21469),

rendering the approach useless for debugging/development on foreign distros.

eventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...

i am not totally up to date with the recent (last ~3 years) changes, and YMMV.



---

archive/issue_comments_223030.json:
```json
{
    "body": "<a id='comment:23'></a>\n`@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.",
    "created_at": "2016-09-12T15:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223030",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
`@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.



---

archive/issue_comments_223031.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [jdemeyer](#comment%3A23):\n> `@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.\n\n\nhi Jeroen\n\nthe reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve \"implement a viable alternative to autotools\", which in my understanding is beyond the scope of this project.\n\n> I don't know if that has ever been done.\n\n\nautomake supports python for a loong time. i am not \"trying to use\" rather than \"suggesting\" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).\n\n> I guess that distros would hate us for doing that.\n\n\nthat i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\". cannot think of a way that would make packageing any easier. (care to explain?)",
    "created_at": "2016-09-12T16:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223031",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:24'></a>
Replying to [jdemeyer](#comment%3A23):
> `@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.


hi Jeroen

the reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve "implement a viable alternative to autotools", which in my understanding is beyond the scope of this project.

> I don't know if that has ever been done.


automake supports python for a loong time. i am not "trying to use" rather than "suggesting" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).

> I guess that distros would hate us for doing that.


that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}". cannot think of a way that would make packageing any easier. (care to explain?)



---

archive/issue_comments_223032.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [felixs](#comment%3A24):\n> that i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\".\n\n\n...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.",
    "created_at": "2016-09-12T19:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223032",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Replying to [felixs](#comment%3A24):
> that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}".


...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.



---

archive/issue_comments_223033.json:
```json
{
    "body": "<a id='comment:26'></a>\n> But I have never seen a package maintainer say that as alternative to setup.py.\n\n\ntrue/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.\n\nstill, i see no evidence why someone might \"hate us\" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement\n- VPATH\n- (pre build) configuration\n- (compile time) dependencies\n- a make based build process\nall of which immediately facilitate development, testing, debugging and thus packaging.",
    "created_at": "2016-09-12T20:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223033",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:26'></a>
> But I have never seen a package maintainer say that as alternative to setup.py.


true/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.

still, i see no evidence why someone might "hate us" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement
- VPATH
- (pre build) configuration
- (compile time) dependencies
- a make based build process
all of which immediately facilitate development, testing, debugging and thus packaging.



---

archive/issue_comments_223034.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [felixs](#comment%3A26):\n> instead (let me repeat), the autotools implement\n> - VPATH\n> - (pre build) configuration\n> - (compile time) dependencies\n> - a make based build process\n> all of which immediately facilitate development, testing, debugging and thus packaging.\n\n\nThe autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.",
    "created_at": "2016-09-12T20:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223034",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
Replying to [felixs](#comment%3A26):
> instead (let me repeat), the autotools implement
> - VPATH
> - (pre build) configuration
> - (compile time) dependencies
> - a make based build process
> all of which immediately facilitate development, testing, debugging and thus packaging.


The autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.



---

archive/issue_comments_223035.json:
```json
{
    "body": "<a id='comment:28'></a>\n>  The autotools implement that for a typical C/C++ package. \n\n\nat least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).\n\n> They don't really implement all that\n\n\nwhat exactly do you mean? please give an example.\n\nthanks\n\n[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html",
    "created_at": "2016-09-12T21:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223035",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:28'></a>
>  The autotools implement that for a typical C/C++ package. 


at least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).

> They don't really implement all that


what exactly do you mean? please give an example.

thanks

[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html



---

archive/issue_comments_223036.json:
```json
{
    "body": "<a id='comment:29'></a>\nOK, that looks interesting. I didn't know that `automake` could do that.",
    "created_at": "2016-09-12T21:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223036",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
OK, that looks interesting. I didn't know that `automake` could do that.



---

archive/issue_comments_223037.json:
```json
{
    "body": "<a id='comment:30'></a>\nYes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. \n\nIn a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.\n\nAdmittedly software detection and so on is easier with something else than python...",
    "created_at": "2016-09-12T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223037",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'></a>
Yes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. 

In a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.

Admittedly software detection and so on is easier with something else than python...



---

archive/issue_comments_223038.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [fbissey](#comment%3A30):\n> Admittedly software detection and so on is easier with something else than python...\n\n\nSConstruct! B)",
    "created_at": "2016-09-12T22:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223038",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:31'></a>
Replying to [fbissey](#comment%3A30):
> Admittedly software detection and so on is easier with something else than python...


SConstruct! B)



---

archive/issue_comments_223039.json:
```json
{
    "body": "<a id='comment:32'></a>\n<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......",
    "created_at": "2016-09-12T22:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223039",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>
<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......



---

archive/issue_comments_223040.json:
```json
{
    "body": "<a id='comment:33'></a>\nJeroen **loves** SC...",
    "created_at": "2016-09-12T22:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223040",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:33'></a>
Jeroen **loves** SC...



---

archive/issue_comments_223041.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [fbissey](#comment%3A30):\n> Admittedly software detection and so on is easier with something else than python...\n\n\nFor the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.",
    "created_at": "2016-09-13T09:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223041",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Replying to [fbissey](#comment%3A30):
> Admittedly software detection and so on is easier with something else than python...


For the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.



---

archive/issue_comments_223042.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [jdemeyer](#comment%3A34):\n> For the record:\n\n\nhere's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.\n\n[1] https://github.com/felix-salfelder/sage/tree/autotools\n\n[2] https://github.com/felix-salfelder/sage/tree/autotools/src",
    "created_at": "2016-09-13T10:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223042",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:35'></a>
Replying to [jdemeyer](#comment%3A34):
> For the record:


here's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.

[1] https://github.com/felix-salfelder/sage/tree/autotools

[2] https://github.com/felix-salfelder/sage/tree/autotools/src



---

archive/issue_comments_223043.json:
```json
{
    "body": "<a id='comment:36'></a>\nI have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the \"easiest\" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.\n\nBut there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a \"source distribution\" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.\n\nI think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.",
    "created_at": "2016-09-22T14:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223043",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>
I have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the "easiest" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.

But there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a "source distribution" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.

I think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.



---

archive/issue_comments_223044.json:
```json
{
    "body": "<a id='comment:37'></a>\nAlso, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py\n\nMatplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's \"hand rolled\", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<\n\nNumpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).",
    "created_at": "2016-09-22T15:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223044",
    "user": "https://github.com/embray"
}
```

<a id='comment:37'></a>
Also, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py

Matplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's "hand rolled", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<

Numpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).



---

archive/issue_comments_223045.json:
```json
{
    "body": "<a id='comment:38'></a>\nOutdated, should be closed",
    "created_at": "2020-09-15T18:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223045",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Outdated, should be closed



---

archive/issue_comments_223046.json:
```json
{
    "body": "**Changing author** from \"Felix Salfelder\" to \"\".",
    "created_at": "2020-09-15T18:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223046",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Felix Salfelder" to "".



---

archive/issue_events_049110.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49110"
}
```



---

archive/issue_events_049111.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49111"
}
```



---

archive/issue_comments_223047.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-09-15T18:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223047",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_223048.json:
```json
{
    "body": "**Reviewer:** Marc Mezzarobba",
    "created_at": "2021-09-18T09:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223048",
    "user": "https://github.com/mezzarobba"
}
```

**Reviewer:** Marc Mezzarobba



---

archive/issue_comments_223049.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-09-18T09:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14807#issuecomment-223049",
    "user": "https://github.com/mezzarobba"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_049112.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-09-18T10:03:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14807",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14807#event-49112"
}
```
