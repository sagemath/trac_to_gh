# Issue 14436: Doctest failure in sage/rings/polynomial/polynomial_element.pyx on Solaris

archive/issues_014232.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx\n**********************************************************************\nFile \"devel/sage/sage/rings/polynomial/polynomial_element.pyx\", line 1054, in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod\nFailed example:\n    parent(poly)([ 0.0 if abs(c)<=1e-14 else c for c in poly.coeffs() ])\nExpected:\n    1.0\nGot:\n    1.02140518266e-14*x^2 + 1.0\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod\n    [1375 tests, 1 failure, 84.4 s]\n----------------------------------------------------------------------\nsage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 88.1 seconds\n    cpu time: 75.4 seconds\n    cumulative wall time: 84.4 seconds\n```\nIt looks like there is more numerical noise than expected.\nChanging 1e-14 to 1e-13 might be a sensible solution.\n\nAssignee: **@sagetrac-drkirkby**\n\nCC:  @jdemeyer\n\nKeywords: **solaris numerical noise**\n\nReviewer: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14436_\n\n",
    "closed_at": "2013-04-10T11:29:10Z",
    "created_at": "2013-04-10T11:19:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20solaris",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Doctest failure in sage/rings/polynomial/polynomial_element.pyx on Solaris",
    "type": "issue",
    "updated_at": "2013-04-10T11:32:06Z",
    "url": "https://github.com/sagemath/sage/issues/14436",
    "user": "https://github.com/sagetrac-jpflori"
}
```

```
sage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx
**********************************************************************
File "devel/sage/sage/rings/polynomial/polynomial_element.pyx", line 1054, in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod
Failed example:
    parent(poly)([ 0.0 if abs(c)<=1e-14 else c for c in poly.coeffs() ])
Expected:
    1.0
Got:
    1.02140518266e-14*x^2 + 1.0
**********************************************************************
1 item had failures:
   1 of  16 in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod
    [1375 tests, 1 failure, 84.4 s]
----------------------------------------------------------------------
sage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 88.1 seconds
    cpu time: 75.4 seconds
    cumulative wall time: 84.4 seconds
```
It looks like there is more numerical noise than expected.
Changing 1e-14 to 1e-13 might be a sensible solution.

Assignee: **@sagetrac-drkirkby**

CC:  @jdemeyer

Keywords: **solaris numerical noise**

Reviewer: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/14436_





---

archive/issue_events_187309.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-04-10T11:19:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187309"
}
```



---

archive/issue_events_187310.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-04-10T11:19:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "component: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187310"
}
```



---

archive/issue_events_187311.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-04-10T11:19:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187311"
}
```



---

archive/issue_events_187312.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-04-10T11:19:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187312"
}
```



---

archive/issue_comments_176360.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI've not looked at the code, so I don't know if we really expect the coefficients rounded to zero to be less than 1e-14, or if that's just an arbitrary bound which looked close enough to zero.",
    "created_at": "2013-04-10T11:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176360",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<div id="comment:1" align="right">Comment 1</div>

I've not looked at the code, so I don't know if we really expect the coefficients rounded to zero to be less than 1e-14, or if that's just an arbitrary bound which looked close enough to zero.



---

archive/issue_comments_176361.json:
```json
{
    "body": "Attachment: **[trac_10508_doctest.rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14436/trac_10508_doctest.rebased.patch.gz)**",
    "created_at": "2013-04-10T11:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176361",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[trac_10508_doctest.rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14436/trac_10508_doctest.rebased.patch.gz)**



---

archive/issue_comments_176362.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2013-04-10T11:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176362",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_187313.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:26:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187313"
}
```



---

archive/issue_comments_176363.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nPlease note this happened with ATLAS 3.10.1.p0 from #10508 which may be used in the linear algebra step of the algorithm.\n\nAnd the bound seems quite random, at least there is no justification for this choice, nor a precise error bounding stated anywhere.",
    "created_at": "2013-04-10T11:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176363",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<div id="comment:3" align="right">Comment 3</div>

Please note this happened with ATLAS 3.10.1.p0 from #10508 which may be used in the linear algebra step of the algorithm.

And the bound seems quite random, at least there is no justification for this choice, nor a precise error bounding stated anywhere.



---

archive/issue_events_187314.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187314"
}
```



---

archive/issue_events_187315.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187315"
}
```



---

archive/issue_events_187316.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187316"
}
```



---

archive/issue_events_187317.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187317"
}
```



---

archive/issue_comments_176364.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to none",
    "created_at": "2013-04-10T11:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176364",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jeroen Demeyer** to none



---

archive/issue_comments_176365.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@sagetrac-jpflori](#comment%3A3):\n> Please note this happened with ATLAS 3.10.1.p0 from #10508\n\nIn that case, the problem **is already fixed by a patch on that ticket**.",
    "created_at": "2013-04-10T11:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176365",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@sagetrac-jpflori](#comment%3A3):
> Please note this happened with ATLAS 3.10.1.p0 from #10508

In that case, the problem **is already fixed by a patch on that ticket**.



---

archive/issue_comments_176366.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2013-04-10T11:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176366",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_187318.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14436#event-187318"
}
```



---

archive/issue_comments_176367.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOh yeah, really sorry about that...\nI completely forgot to install the Sage library patches on this system...",
    "created_at": "2013-04-10T11:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14436#issuecomment-176367",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<div id="comment:6" align="right">Comment 6</div>

Oh yeah, really sorry about that...
I completely forgot to install the Sage library patches on this system...
