# Issue 14367: Fix bug in number field to p-adic coercion

archive/issues_014163.json:
```json
{
    "body": "I have found what Sage claims is a bug in the coercion code.\n\n```\nsage: Q7 = Qp(7)\nsage: r1 = (3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7\n....:       + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n....:       + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))\nsage: N.<b> = NumberField(x^2 - 2, embedding=r1)\nsage: K.<t> = N[]\nsage: f = t^3 - 2*t + 1\nsage: f(r1)\nRuntimeError: There is a bug in the coercion code in Sage.\nBoth x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4\n+ 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12\n+ 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))\nare supposed to have identical parents but they don't.\nIn fact, x has parent '7-adic Field with capped relative precision 20'\nwhereas y has parent '7-adic Ring with capped relative precision 20'\nOriginal elements 1 (parent Number Field in b with defining polynomial x^2 - 2)\nand 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8\n+ 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17\n+ 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped\nrelative precision 20) and maps\n<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'>\nGeneric morphism:\n  From: Number Field in b with defining polynomial x^2 - 2\n  To:   7-adic Ring with capped relative precision 20\n  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6\n  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n<type 'NoneType'> None\n```\n\nNote that here the embedding of `N` is into `Qp(7)`\nand that `r1` is an element of `Zp(7)`.\nIf I define `r1` as an element of `Qp(7)`\nthen the evaluation of `f` works.\n\nIf I now do\n\n```\nsage: Z7 = Zp(7)\nsage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7\n....:         + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n....:         + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19)\nsage: M.<b> = NumberField(x^2 - 2, embedding=r1)\nsage: K.<t> = M[]\nsage: f = t^3-2*t+1\nsage: f(r1)\nRuntimeError\n...\n```\n\nI see here two problems. The most obvious is that I would\nexpect `f(r1)` to work. The second one is in the latter.\n\n```\nsage: M.coerce_embedding()\nGeneric morphism:\n  From: Number Field in b with defining polynomial x^2 - 2\n  To:   7-adic Ring with capped relative precision 20\n  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6\n  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n```\n\nThis morphism should NOT be an embedding.\nIt is not defined for 1/7:\n\n```\nsage: phi = M.coerce_embedding()\nsage: phi(M(1/7))\n7^-1 + O(7^19)\nsage: phi(M(1/7)) in phi.codomain()\nFalse\n```\n\n\nAssignee: @robertwb\n\nCC:  @slel\n\nKeywords: coercion, number field, p-adic, days94\n\nStopgaps: wrongAnswerMarker\n\nAuthor: Luis Felipe Tabera Alonso\n\nBranch: u/lftabera/ticket/14367\n\nStatus: needs_review\n\nCommit: fddd23bd94f2e770f886828c9828a1457b84a9f7\n\nIssue created by migration from https://trac.sagemath.org/ticket/14367\n\n",
    "created_at": "2013-03-27T12:21:34Z",
    "labels": [
        "component: coercion",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Fix bug in number field to p-adic coercion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14367",
    "user": "https://github.com/lftabera"
}
```
I have found what Sage claims is a bug in the coercion code.

```
sage: Q7 = Qp(7)
sage: r1 = (3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7
....:       + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
....:       + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))
sage: N.<b> = NumberField(x^2 - 2, embedding=r1)
sage: K.<t> = N[]
sage: f = t^3 - 2*t + 1
sage: f(r1)
RuntimeError: There is a bug in the coercion code in Sage.
Both x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4
+ 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12
+ 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))
are supposed to have identical parents but they don't.
In fact, x has parent '7-adic Field with capped relative precision 20'
whereas y has parent '7-adic Ring with capped relative precision 20'
Original elements 1 (parent Number Field in b with defining polynomial x^2 - 2)
and 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8
+ 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17
+ 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped
relative precision 20) and maps
<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'>
Generic morphism:
  From: Number Field in b with defining polynomial x^2 - 2
  To:   7-adic Ring with capped relative precision 20
  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6
  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
<type 'NoneType'> None
```

Note that here the embedding of `N` is into `Qp(7)`
and that `r1` is an element of `Zp(7)`.
If I define `r1` as an element of `Qp(7)`
then the evaluation of `f` works.

If I now do

```
sage: Z7 = Zp(7)
sage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7
....:         + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
....:         + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19)
sage: M.<b> = NumberField(x^2 - 2, embedding=r1)
sage: K.<t> = M[]
sage: f = t^3-2*t+1
sage: f(r1)
RuntimeError
...
```

I see here two problems. The most obvious is that I would
expect `f(r1)` to work. The second one is in the latter.

```
sage: M.coerce_embedding()
Generic morphism:
  From: Number Field in b with defining polynomial x^2 - 2
  To:   7-adic Ring with capped relative precision 20
  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6
  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
```

This morphism should NOT be an embedding.
It is not defined for 1/7:

```
sage: phi = M.coerce_embedding()
sage: phi(M(1/7))
7^-1 + O(7^19)
sage: phi(M(1/7)) in phi.codomain()
False
```


Assignee: @robertwb

CC:  @slel

Keywords: coercion, number field, p-adic, days94

Stopgaps: wrongAnswerMarker

Author: Luis Felipe Tabera Alonso

Branch: u/lftabera/ticket/14367

Status: needs_review

Commit: fddd23bd94f2e770f886828c9828a1457b84a9f7

Issue created by migration from https://trac.sagemath.org/ticket/14367





---

archive/issue_comments_189545.json:
```json
{
    "body": "<a id='comment:2'></a>Should perhaps\n\n```\nsage: Q7 = Qp(7)\nsage: r1 = 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\\\n           6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\\\n           4*7^18 + 6*7^19 + O(7^20)\nsage: N.<b> = NumberField(x^2-2, embedding = r1)\n```\ngive an error if `r1` (or the root of `x^2-2` close to `r1`) is not invertible in its parent? I guess we are supposing that the embedding implied here is into `parent(r1)`? Note that the definition of `Q7` in the above example is entirely irrelevant. The `NumberField` constructor is in no way indicating that an embedding into *that* `Q7` is requested.\n\nI guess one option would be to let `embedding` try to construct a parent in which the image of b is invertible, based on the parent inferred from `r1`.\n\n(rant)\n\nIn general, I think the rule \"when in doubt, refuse the temptation to quess\" has served python extremely well and sage would do well to follow that rule as much as possible too. At least the \"fundamental functionality\" in sage should be free from guess-work.\n\nIf people then want to layer convenience functions and constructors on top that try to guess what the user meant from underspecified or malformed input, that's fine, but it should not contaminate the layer that provides the real functionality.\n\n(/rant)\n\nSo perhaps just fail, citing that sending `b` to `r1` does not map `N` into a subfield of `parent(r1)`.",
    "created_at": "2013-04-15T17:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189545",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'></a>Should perhaps

```
sage: Q7 = Qp(7)
sage: r1 = 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\
           6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\
           4*7^18 + 6*7^19 + O(7^20)
sage: N.<b> = NumberField(x^2-2, embedding = r1)
```
give an error if `r1` (or the root of `x^2-2` close to `r1`) is not invertible in its parent? I guess we are supposing that the embedding implied here is into `parent(r1)`? Note that the definition of `Q7` in the above example is entirely irrelevant. The `NumberField` constructor is in no way indicating that an embedding into *that* `Q7` is requested.

I guess one option would be to let `embedding` try to construct a parent in which the image of b is invertible, based on the parent inferred from `r1`.

(rant)

In general, I think the rule "when in doubt, refuse the temptation to quess" has served python extremely well and sage would do well to follow that rule as much as possible too. At least the "fundamental functionality" in sage should be free from guess-work.

If people then want to layer convenience functions and constructors on top that try to guess what the user meant from underspecified or malformed input, that's fine, but it should not contaminate the layer that provides the real functionality.

(/rant)

So perhaps just fail, citing that sending `b` to `r1` does not map `N` into a subfield of `parent(r1)`.



---

archive/issue_comments_189546.json:
```json
{
    "body": "<a id='comment:3'></a>I agree with the idea of no guessing. There is no coercion possible form N to Zp(7) so here we should raise an error. Note that the problem is not that r1 is not invertible in its parent, because it is. The problem is that the parent of r1 does not contain any subfield. I am not sure how to deal with this. Mathematically, for a simple extension, the parent R of r1 should be such that:\n\n- There is a coercion from QQ to R.\n- r1 is an (approximate) root of the defining polynomial of N in R.",
    "created_at": "2013-05-15T08:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189546",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:3'></a>I agree with the idea of no guessing. There is no coercion possible form N to Zp(7) so here we should raise an error. Note that the problem is not that r1 is not invertible in its parent, because it is. The problem is that the parent of r1 does not contain any subfield. I am not sure how to deal with this. Mathematically, for a simple extension, the parent R of r1 should be such that:

- There is a coercion from QQ to R.
- r1 is an (approximate) root of the defining polynomial of N in R.



---

archive/issue_events_040759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40759"
}
```



---

archive/issue_events_040760.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40760"
}
```



---

archive/issue_events_040761.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40761"
}
```



---

archive/issue_events_040762.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40762"
}
```



---

archive/issue_events_040763.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40763"
}
```



---

archive/issue_events_040764.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40764"
}
```



---

archive/issue_events_040765.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40765"
}
```



---

archive/issue_comments_189547.json:
```json
{
    "body": "Changing keywords from \"coercion, number field, p-adic\" to \"coercion, number field, p-adic, days94\".",
    "created_at": "2018-06-28T09:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189547",
    "user": "https://github.com/lftabera"
}
```

Changing keywords from "coercion, number field, p-adic" to "coercion, number field, p-adic, days94".



---

archive/issue_events_040766.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2018-06-29T17:18:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40766"
}
```



---

archive/issue_events_040767.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2018-06-29T17:18:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40767"
}
```



---

archive/issue_comments_189548.json:
```json
{
    "body": "<a id='comment:10'></a>New commits:",
    "created_at": "2018-06-29T17:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189548",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:10'></a>New commits:



---

archive/issue_comments_189549.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-29T17:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189549",
    "user": "https://github.com/lftabera"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189550.json:
```json
{
    "body": "<a id='comment:11'></a>I have added a patch to this issue. The code did not check if there is an embedding.\n\nMy opinion is that embeddings should be pretty explicit. So if the embedding parameter is set to an exact root of the defining polynomial and there is no embedding to the parent of the value raise a ValueError. If the value is a (rDF, integer etc.) approximate root then the code is notchanged. This can lead to some unexpected behavior, \n\n```\nsage: NumberField(x-1, 'a', embedding=1)\nTraceback (most recent call last):\n...\nValueError: there is no embedding into Integer Ring\nsage: NumberField(x-1, 'a', embedding=2).coerce_embedding()\nGeneric morphism:\n  From: Number Field in a with defining polynomial x - 1\n  To:   Real Lazy Field\n  Defn: a -> 1\n```\n\nThe alternative would be to create a new parent, but I would like to eliminate guessings as much as possible.",
    "created_at": "2018-06-29T17:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189550",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:11'></a>I have added a patch to this issue. The code did not check if there is an embedding.

My opinion is that embeddings should be pretty explicit. So if the embedding parameter is set to an exact root of the defining polynomial and there is no embedding to the parent of the value raise a ValueError. If the value is a (rDF, integer etc.) approximate root then the code is notchanged. This can lead to some unexpected behavior, 

```
sage: NumberField(x-1, 'a', embedding=1)
Traceback (most recent call last):
...
ValueError: there is no embedding into Integer Ring
sage: NumberField(x-1, 'a', embedding=2).coerce_embedding()
Generic morphism:
  From: Number Field in a with defining polynomial x - 1
  To:   Real Lazy Field
  Defn: a -> 1
```

The alternative would be to create a new parent, but I would like to eliminate guessings as much as possible.



---

archive/issue_comments_189551.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 lftabera]:\n\n> My opinion is that embeddings should be pretty explicit. So if the embedding parameter is set to an exact root of the defining polynomial and there is no embedding to the parent of the value raise a ValueError. If the value is a (rDF, integer etc.) approximate root then the code is notchanged. This can lead to some unexpected behavior, \n\n\nI don't see how that behaviour can be justified. Why is \"real lazy field\" guessed from `embedding=2`? Why is it not from `embedding=1`? That's just too strange.",
    "created_at": "2018-06-29T19:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189551",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:12'></a>Replying to [comment:11 lftabera]:

> My opinion is that embeddings should be pretty explicit. So if the embedding parameter is set to an exact root of the defining polynomial and there is no embedding to the parent of the value raise a ValueError. If the value is a (rDF, integer etc.) approximate root then the code is notchanged. This can lead to some unexpected behavior, 


I don't see how that behaviour can be justified. Why is "real lazy field" guessed from `embedding=2`? Why is it not from `embedding=1`? That's just too strange.



---

archive/issue_comments_189552.json:
```json
{
    "body": "<a id='comment:13'></a>I have not changed the behavior of Sage, only rise an error when the current code provides a wrong result. I agree that it is strange.\n\nJust to clarify, current behavior of Sage:\n\n* When there is an exact root of the polynomial, use the parent of the element to determine the codomain of the embedding (wrong, since the codomain may not contain a subfield isomorphic to the number field).\n\n* When the embedding provides only an approximation of the root, use real/complex lazy field. (Note that this does not work for p-addic approximation of the root for instance).\n\nI see the following solutions. I only describe possible outcomes where given an exact root p with parent P, I would not change approximate solutions.\n\n1) My patch approach. If there is not an embedding from QQ to P, raise a ValueError, no exceptions.\n\n2) Take R = coercion_model.common_parent(QQ,P) to determine the codomain of the embedding. Still check that there is an embedding from QQ to R (so no zero ring as codomain, for instance).\n\n3) A compromise, usually in Sage, exceptions are made for Integer inputs and treat them as rationals if necessary, we could take that into account. But then, I would expect the following behaviour:\n\n* `NumberField(x-1,'a',embedding=1)` creates the number field with an embedding to QQ\n* `NumberField(x-1,'a',embedding=2)` creates the number field with an embedding to real lazy field.\n\nThere are other cumbersome options, like specifying the codomain, but I do not see a lot the point. Personally, I do not like 2. Nils, what would you think what would you think that would make a sensible approach?",
    "created_at": "2018-06-29T21:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189552",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:13'></a>I have not changed the behavior of Sage, only rise an error when the current code provides a wrong result. I agree that it is strange.

Just to clarify, current behavior of Sage:

* When there is an exact root of the polynomial, use the parent of the element to determine the codomain of the embedding (wrong, since the codomain may not contain a subfield isomorphic to the number field).

* When the embedding provides only an approximation of the root, use real/complex lazy field. (Note that this does not work for p-addic approximation of the root for instance).

I see the following solutions. I only describe possible outcomes where given an exact root p with parent P, I would not change approximate solutions.

1) My patch approach. If there is not an embedding from QQ to P, raise a ValueError, no exceptions.

2) Take R = coercion_model.common_parent(QQ,P) to determine the codomain of the embedding. Still check that there is an embedding from QQ to R (so no zero ring as codomain, for instance).

3) A compromise, usually in Sage, exceptions are made for Integer inputs and treat them as rationals if necessary, we could take that into account. But then, I would expect the following behaviour:

* `NumberField(x-1,'a',embedding=1)` creates the number field with an embedding to QQ
* `NumberField(x-1,'a',embedding=2)` creates the number field with an embedding to real lazy field.

There are other cumbersome options, like specifying the codomain, but I do not see a lot the point. Personally, I do not like 2. Nils, what would you think what would you think that would make a sensible approach?



---

archive/issue_comments_189553.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 lftabera]:\n> * When there is an exact root of the polynomial, use the parent of the element to determine the codomain of the embedding (wrong, since the codomain may not contain a subfield isomorphic to the number field).\n\n\nAt the face of it this seems reasonable behaviour. Perhaps it should check if sufficiently many elements are invertible in the codomain, but that might be too expensive to do.\n\n> * When the embedding provides only an approximation of the root, use real/complex lazy field. (Note that this does not work for p-addic approximation of the root for instance).\n\n\nI do not see how that can be reasonable. Perhaps that option should have a different name? `archimedian_embedding` or something like that? Or `approximate embedding`? Clearly the behavioural difference between approximately and exactly given embeddings is not compatible. Op perhaps the exact embedding needs a different name? Clearly, if an approximate root is allowed to lie in a ring that is not actually the target ring, we are not giving enough information. From the integer 2 one cannot see if it is an approximation of a root in RR, CC, or Qp (or some algebraic extension of Qp).\n \n> I see the following solutions. I only describe possible outcomes where given an exact root p with parent P, I would not change approximate solutions.\n\n\nI think one problem is that we're trying to squeeze two functionalities into one option. So I think you can only resolve this satisfactorily by dealing with both.\n\n> 1) My patch approach. If there is not an embedding from QQ to P, raise a ValueError, no exceptions.\n\n\nThe check you do is probably quite reasonable. Do you really need to check that P(0) != P(1) though? is that ever a coercion map?\n\n> 2) Take R = coercion_model.common_parent(QQ,P) to determine the codomain of the embedding. Still check that there is an embedding from QQ to R (so no zero ring as codomain, for instance).\n\n\nNot unreasonable either.\n \n> 3) A compromise, usually in Sage, exceptions are made for Integer inputs and treat them as rationals if necessary, we could take that into account. But then, I would expect the following behaviour:\n\n\nI think that's a useless special case. When do people actually need to construct a number field that has a coercion into Q? That certainly doesn't need a shortcut.\n\n> There are other cumbersome options, like specifying the codomain, but I do not see a lot the point. Personally, I do not like 2. Nils, what would you think what would you think that would make a sensible approach?\n\n\nFirst split the exact vs. approximate root specfication problem. I think that's way more confusing than any of the other problems arising here.\n\nIf you're absolutely intent on just solving the problem reported in this ticket, your option 1 seems like the least invasive. It just makes something an outright error that would otherwise fail later anyway.",
    "created_at": "2018-06-30T04:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189553",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:14'></a>Replying to [comment:13 lftabera]:
> * When there is an exact root of the polynomial, use the parent of the element to determine the codomain of the embedding (wrong, since the codomain may not contain a subfield isomorphic to the number field).


At the face of it this seems reasonable behaviour. Perhaps it should check if sufficiently many elements are invertible in the codomain, but that might be too expensive to do.

> * When the embedding provides only an approximation of the root, use real/complex lazy field. (Note that this does not work for p-addic approximation of the root for instance).


I do not see how that can be reasonable. Perhaps that option should have a different name? `archimedian_embedding` or something like that? Or `approximate embedding`? Clearly the behavioural difference between approximately and exactly given embeddings is not compatible. Op perhaps the exact embedding needs a different name? Clearly, if an approximate root is allowed to lie in a ring that is not actually the target ring, we are not giving enough information. From the integer 2 one cannot see if it is an approximation of a root in RR, CC, or Qp (or some algebraic extension of Qp).
 
> I see the following solutions. I only describe possible outcomes where given an exact root p with parent P, I would not change approximate solutions.


I think one problem is that we're trying to squeeze two functionalities into one option. So I think you can only resolve this satisfactorily by dealing with both.

> 1) My patch approach. If there is not an embedding from QQ to P, raise a ValueError, no exceptions.


The check you do is probably quite reasonable. Do you really need to check that P(0) != P(1) though? is that ever a coercion map?

> 2) Take R = coercion_model.common_parent(QQ,P) to determine the codomain of the embedding. Still check that there is an embedding from QQ to R (so no zero ring as codomain, for instance).


Not unreasonable either.
 
> 3) A compromise, usually in Sage, exceptions are made for Integer inputs and treat them as rationals if necessary, we could take that into account. But then, I would expect the following behaviour:


I think that's a useless special case. When do people actually need to construct a number field that has a coercion into Q? That certainly doesn't need a shortcut.

> There are other cumbersome options, like specifying the codomain, but I do not see a lot the point. Personally, I do not like 2. Nils, what would you think what would you think that would make a sensible approach?


First split the exact vs. approximate root specfication problem. I think that's way more confusing than any of the other problems arising here.

If you're absolutely intent on just solving the problem reported in this ticket, your option 1 seems like the least invasive. It just makes something an outright error that would otherwise fail later anyway.



---

archive/issue_comments_189554.json:
```json
{
    "body": "<a id='comment:15'></a>Ok, I will think about this. For instance, the embedding option does not currently work for Tower extensions, Things there are a little messy. In any case, I think that the long term solution is more invasive.\n\nConcerning P(0)!=P(1) I can only imagin one case where it is necessary. When the codomain is the zero ring (see the test section). I have no idea how or why one could arrive there, embedding is not an option one should use on a library, I see it more like an interactive option, but that map it is not an embedding. As far as I know one cannot tell from the coercion framework that a coercion is an embedding. We could eliminate that check, but then the documentation should be clear about that aspect.",
    "created_at": "2018-06-30T07:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189554",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:15'></a>Ok, I will think about this. For instance, the embedding option does not currently work for Tower extensions, Things there are a little messy. In any case, I think that the long term solution is more invasive.

Concerning P(0)!=P(1) I can only imagin one case where it is necessary. When the codomain is the zero ring (see the test section). I have no idea how or why one could arrive there, embedding is not an option one should use on a library, I see it more like an interactive option, but that map it is not an embedding. As far as I know one cannot tell from the coercion framework that a coercion is an embedding. We could eliminate that check, but then the documentation should be clear about that aspect.



---

archive/issue_comments_189555.json:
```json
{
    "body": "<a id='comment:16'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189555",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>update milestone 8.3 -> 8.4



---

archive/issue_events_040768.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40768"
}
```



---

archive/issue_events_040769.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40769"
}
```



---

archive/issue_comments_189556.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,35 +2,48 @@\n \n ```\n sage: Q7 = Qp(7)\n-sage: r1 = 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\\\n-           6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\\\n-           4*7^18 + 6*7^19 + O(7^20)\n-sage: N.<b> = NumberField(x^2-2, embedding = r1)\n+sage: r1 = (3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7\n+....:       + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n+....:       + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))\n+sage: N.<b> = NumberField(x^2 - 2, embedding=r1)\n sage: K.<t> = N[]\n-sage: f = t^3-2*t+1\n+sage: f = t^3 - 2*t + 1\n sage: f(r1)\n RuntimeError: There is a bug in the coercion code in Sage.\n-Both x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)) are supposed to have identical parents but they don't.\n+Both x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4\n++ 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12\n++ 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))\n+are supposed to have identical parents but they don't.\n In fact, x has parent '7-adic Field with capped relative precision 20'\n whereas y has parent '7-adic Ring with capped relative precision 20'\n-Original elements 1 (parent Number Field in b with defining polynomial x^2 - 2) and 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped relative precision 20) and maps\n-<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'> Generic morphism:\n+Original elements 1 (parent Number Field in b with defining polynomial x^2 - 2)\n+and 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8\n++ 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17\n++ 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped\n+relative precision 20) and maps\n+<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'>\n+Generic morphism:\n   From: Number Field in b with defining polynomial x^2 - 2\n   To:   7-adic Ring with capped relative precision 20\n-  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n+  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6\n+  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n+  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n <type 'NoneType'> None\n ```\n \n-Note that here the embedding of N is into Qp(7) and that r1 is an element of Zp(7). If I define r1 as an element of Qp(7) then the evaluation of f works.\n+Note that here the embedding of `N` is into `Qp(7)`\n+and that `r1` is an element of `Zp(7)`.\n+If I define `r1` as an element of `Qp(7)`\n+then the evaluation of `f` works.\n \n If I now do\n \n ```\n sage: Z7 = Zp(7)\n-sage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\\\n-....:         6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\\\n-....:         4*7^18 + 6*7^19)\n-sage: M.<b> = NumberField(x^2-2, embedding = r1)\n+sage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7\n+....:         + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n+....:         + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19)\n+sage: M.<b> = NumberField(x^2 - 2, embedding=r1)\n sage: K.<t> = M[]\n sage: f = t^3-2*t+1\n sage: f(r1)\n@@ -38,17 +51,21 @@\n ...\n ```\n \n-I see here two problems. The most obvious is that I would expect f(r1) to work. The second one is in the latter.\n+I see here two problems. The most obvious is that I would\n+expect `f(r1)` to work. The second one is in the latter.\n \n ```\n sage: M.coerce_embedding()\n Generic morphism:\n   From: Number Field in b with defining polynomial x^2 - 2\n   To:   7-adic Ring with capped relative precision 20\n-  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n+  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6\n+  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13\n+  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)\n ```\n \n-This morphism should NOT be an embedding. It is not defined for 1/7 \n+This morphism should NOT be an embedding.\n+It is not defined for 1/7:\n \n ```\n sage: phi = M.coerce_embedding()\n@@ -58,7 +75,6 @@\n False\n ```\n \n-Keywords: coercion, number field, p-adic\n \n Comment: 1\n \n```\n",
    "created_at": "2021-03-22T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189556",
    "user": "https://github.com/slel"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,35 +2,48 @@
 
 ```
 sage: Q7 = Qp(7)
-sage: r1 = 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\
-           6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\
-           4*7^18 + 6*7^19 + O(7^20)
-sage: N.<b> = NumberField(x^2-2, embedding = r1)
+sage: r1 = (3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7
+....:       + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
+....:       + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))
+sage: N.<b> = NumberField(x^2 - 2, embedding=r1)
 sage: K.<t> = N[]
-sage: f = t^3-2*t+1
+sage: f = t^3 - 2*t + 1
 sage: f(r1)
 RuntimeError: There is a bug in the coercion code in Sage.
-Both x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)) are supposed to have identical parents but they don't.
+Both x (=1 + O(7^20)) and y (=3 + 7 + 2*7^2 + 6*7^3 + 7^4
++ 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12
++ 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20))
+are supposed to have identical parents but they don't.
 In fact, x has parent '7-adic Field with capped relative precision 20'
 whereas y has parent '7-adic Ring with capped relative precision 20'
-Original elements 1 (parent Number Field in b with defining polynomial x^2 - 2) and 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped relative precision 20) and maps
-<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'> Generic morphism:
+Original elements 1 (parent Number Field in b with defining polynomial x^2 - 2)
+and 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8
++ 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17
++ 4*7^18 + 6*7^19 + O(7^20) (parent 7-adic Ring with capped
+relative precision 20) and maps
+<type 'sage.rings.number_field.number_field_morphisms.NumberFieldEmbedding'>
+Generic morphism:
   From: Number Field in b with defining polynomial x^2 - 2
   To:   7-adic Ring with capped relative precision 20
-  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
+  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6
+  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
+  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
 <type 'NoneType'> None
 ```
 
-Note that here the embedding of N is into Qp(7) and that r1 is an element of Zp(7). If I define r1 as an element of Qp(7) then the evaluation of f works.
+Note that here the embedding of `N` is into `Qp(7)`
+and that `r1` is an element of `Zp(7)`.
+If I define `r1` as an element of `Qp(7)`
+then the evaluation of `f` works.
 
 If I now do
 
 ```
 sage: Z7 = Zp(7)
-sage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 +\
-....:         6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 +\
-....:         4*7^18 + 6*7^19)
-sage: M.<b> = NumberField(x^2-2, embedding = r1)
+sage: r1 = Z7(3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7
+....:         + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
+....:         + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19)
+sage: M.<b> = NumberField(x^2 - 2, embedding=r1)
 sage: K.<t> = M[]
 sage: f = t^3-2*t+1
 sage: f(r1)
@@ -38,17 +51,21 @@
 ...
 ```
 
-I see here two problems. The most obvious is that I would expect f(r1) to work. The second one is in the latter.
+I see here two problems. The most obvious is that I would
+expect `f(r1)` to work. The second one is in the latter.
 
 ```
 sage: M.coerce_embedding()
 Generic morphism:
   From: Number Field in b with defining polynomial x^2 - 2
   To:   7-adic Ring with capped relative precision 20
-  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6 + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13 + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
+  Defn: b -> 3 + 7 + 2*7^2 + 6*7^3 + 7^4 + 2*7^5 + 7^6
+  + 2*7^7 + 4*7^8 + 6*7^9 + 6*7^10 + 2*7^11 + 7^12 + 7^13
+  + 2*7^15 + 7^16 + 7^17 + 4*7^18 + 6*7^19 + O(7^20)
 ```
 
-This morphism should NOT be an embedding. It is not defined for 1/7 
+This morphism should NOT be an embedding.
+It is not defined for 1/7:
 
 ```
 sage: phi = M.coerce_embedding()
@@ -58,7 +75,6 @@
 False
 ```
 
-Keywords: coercion, number field, p-adic
 
 Comment: 1
 
```




---

archive/issue_events_040770.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-03-22T20:38:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40770"
}
```



---

archive/issue_events_040771.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-03-22T20:38:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40771"
}
```



---

archive/issue_events_040772.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40772"
}
```



---

archive/issue_events_040773.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40773"
}
```



---

archive/issue_comments_189557.json:
```json
{
    "body": "<a id='comment:18'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189557",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_189558.json:
```json
{
    "body": "<a id='comment:20'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14367#issuecomment-189558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_040774.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40774"
}
```



---

archive/issue_events_040775.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40775"
}
```



---

archive/issue_events_040776.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40776"
}
```



---

archive/issue_events_040777.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40777"
}
```



---

archive/issue_events_040778.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40778"
}
```



---

archive/issue_events_040779.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14367",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14367#event-40779"
}
```
