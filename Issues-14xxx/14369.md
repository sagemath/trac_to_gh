# Issue 14369: Misc doctesting improvements

archive/issues_014165.json:
```json
{
    "assignees": [
        "https://github.com/roed314"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nA collection of small patches to the doctesting framework.\n\nCC:  @roed314\n\nComponent: **doctest framework**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **David Roe**\n\nMerged: **sage-5.9.beta3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14369_\n\n",
    "closed_at": "2013-04-01T10:39:06Z",
    "created_at": "2013-03-27T17:55:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Misc doctesting improvements",
    "type": "issue",
    "updated_at": "2013-04-26T19:15:24Z",
    "url": "https://github.com/sagemath/sage/issues/14369",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

A collection of small patches to the doctesting framework.

CC:  @roed314

Component: **doctest framework**

Author: **Jeroen Demeyer**

Reviewer: **David Roe**

Merged: **sage-5.9.beta3**

_Issue created by migration from https://trac.sagemath.org/ticket/14369_





---

archive/issue_events_201089.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-27T17:55:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201089"
}
```



---

archive/issue_events_201090.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-27T17:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201090"
}
```



---

archive/issue_events_201091.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-27T17:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201091"
}
```



---

archive/issue_events_201092.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-27T17:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201092"
}
```



---

archive/issue_events_201093.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2013-03-27T17:55:10Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201093"
}
```



---

archive/issue_events_201094.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2013-03-28T22:47:40Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "subject": "https://github.com/roed314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201094"
}
```



---

archive/issue_events_201095.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:47:40Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "subject": "https://github.com/roed314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201095"
}
```



---

archive/issue_events_201096.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:47:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201096"
}
```



---

archive/issue_events_201097.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "0000b0",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201097"
}
```



---

archive/issue_events_201098.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-29T01:48:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201098"
}
```



---

archive/issue_comments_172701.json:
```json
{
    "body": "Attachment: **[14369_doctest_misc.patch.gz](https://github.com/sagemath/sage/files/ticket14369/14369_doctest_misc.patch.gz)**",
    "created_at": "2013-03-29T02:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172701",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[14369_doctest_misc.patch.gz](https://github.com/sagemath/sage/files/ticket14369/14369_doctest_misc.patch.gz)**



---

archive/issue_comments_172702.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2013-03-29T02:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172702",
    "user": "https://github.com/roed314"
}
```

Reviewer: **David Roe**



---

archive/issue_comments_172703.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLooks good to me.",
    "created_at": "2013-03-29T02:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172703",
    "user": "https://github.com/roed314"
}
```

<div id="comment:3" align="right">comment:3</div>

Looks good to me.



---

archive/issue_events_201099.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-29T02:57:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201099"
}
```



---

archive/issue_events_201100.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-29T02:57:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201100"
}
```



---

archive/issue_events_201101.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-01T10:39:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201101"
}
```



---

archive/issue_events_201102.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-01T10:39:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14369#event-201102"
}
```



---

archive/issue_comments_172704.json:
```json
{
    "body": "Merged: **sage-5.9.beta3**",
    "created_at": "2013-04-01T10:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172704",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.9.beta3**



---

archive/issue_comments_172705.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFor the record: Running `sage -t -optional -long` on a .py file does not work anymore, but used to work under sage-5.8. I tried to change this into `sage -t --optional --long`, but it does not work either.\n\nIt would be less disappointing if the changes in the doctesting framework would somehow be documented, or if at least the doctesting framework would give a hint what it is complaining about. All I get is\n\n```\nRunning doctests with ID 2013-04-26-16-31-00-2eee1fc7.\nDoctesting 1 file.\nsage -t /home/simon/.sage/temp/linux-sqwp.site/11900/dir_vpH6Jb/file_5.py\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.0 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\n\n```\ni.e., the tests are not even attempted to run, but it is reported that the tests pass.",
    "created_at": "2013-04-26T17:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172705",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

For the record: Running `sage -t -optional -long` on a .py file does not work anymore, but used to work under sage-5.8. I tried to change this into `sage -t --optional --long`, but it does not work either.

It would be less disappointing if the changes in the doctesting framework would somehow be documented, or if at least the doctesting framework would give a hint what it is complaining about. All I get is

```
Running doctests with ID 2013-04-26-16-31-00-2eee1fc7.
Doctesting 1 file.
sage -t /home/simon/.sage/temp/linux-sqwp.site/11900/dir_vpH6Jb/file_5.py
    [0 tests, 0.00 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.0 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds

```
i.e., the tests are not even attempted to run, but it is reported that the tests pass.



---

archive/issue_comments_172706.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n`--optional=all` works.",
    "created_at": "2013-04-26T18:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172706",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

`--optional=all` works.



---

archive/issue_comments_172707.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI guess running `sage -t -optional=all -long ...` might be a solution.",
    "created_at": "2013-04-26T19:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172707",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

I guess running `sage -t -optional=all -long ...` might be a solution.



---

archive/issue_comments_172708.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jdemeyer](#comment%3A6):\n> `--optional=all` works.\n\nGreat, thank you!",
    "created_at": "2013-04-26T19:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14369#issuecomment-172708",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jdemeyer](#comment%3A6):
> `--optional=all` works.

Great, thank you!
