# Issue 14832: Unified construction of irreducible polynomials over finite fields

archive/issues_014628.json:
```json
{
    "assignees": [],
    "body": "Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  This ticket does the following:\n\n- implement a new class `PolynomialRing_dense_finite_field`\n- create methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.\n\nIn a separate ticket (#14833), the `FiniteField` constructor is adapted to call the new function.\n\nThe default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.\n\nSince it uses PARI's `ffinit`, this depends on #14818.\n\nApply:\n* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)\n* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)\n* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)\n* [attachment: trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)\n\n\nDepends on #14817\nDepends on #14818\n\nAssignee: **@ClementPernet**\n\nCC:  @xcaruso\n\nKeywords: **polynomials**\n\nReviewer: **Jean-Pierre Flori**\n\nAuthor: **Peter Bruin**\n\nMerged: **sage-5.12.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14832_\n\n",
    "closed_at": "2013-08-16T21:12:58Z",
    "created_at": "2013-06-27T07:30:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20finite%20rings",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Unified construction of irreducible polynomials over finite fields",
    "type": "issue",
    "updated_at": "2013-08-16T21:12:58Z",
    "url": "https://github.com/sagemath/sage/issues/14832",
    "user": "https://github.com/pjbruin"
}
```
Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  This ticket does the following:

- implement a new class `PolynomialRing_dense_finite_field`
- create methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.

In a separate ticket (#14833), the `FiniteField` constructor is adapted to call the new function.

The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.

Since it uses PARI's `ffinit`, this depends on #14818.

Apply:
* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)
* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)
* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)
* [attachment: trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)


Depends on #14817
Depends on #14818

Assignee: **@ClementPernet**

CC:  @xcaruso

Keywords: **polynomials**

Reviewer: **Jean-Pierre Flori**

Author: **Peter Bruin**

Merged: **sage-5.12.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/14832_





---

archive/issue_events_193557.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-06-27T07:30:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193557"
}
```



---

archive/issue_events_193558.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-06-27T07:30:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20finite%20rings",
    "label_color": "0000ff",
    "label_name": "component: finite rings",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193558"
}
```



---

archive/issue_events_193559.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-06-27T07:30:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193559"
}
```



---

archive/issue_events_193560.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-06-27T07:30:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193560"
}
```



---

archive/issue_comments_184035.json:
```json
{
    "body": "based on 5.11.beta3",
    "created_at": "2013-06-27T07:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184035",
    "user": "https://github.com/pjbruin"
}
```

based on 5.11.beta3



---

archive/issue_events_193561.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-06-27T07:42:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193561"
}
```



---

archive/issue_comments_184036.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)**",
    "created_at": "2013-06-27T07:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184036",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)**



---

archive/issue_comments_184037.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket, the `FiniteField` constructor will be adapted to call this function.\n+Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket (#14833), the `FiniteField` constructor is adapted to call this function.\n+\n+The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.\n \n Since it uses PARI's `ffinit`, this depends on #14817.\n \n``````\n",
    "created_at": "2013-06-27T07:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184037",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket, the `FiniteField` constructor will be adapted to call this function.
+Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket (#14833), the `FiniteField` constructor is adapted to call this function.
+
+The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.
 
 Since it uses PARI's `ffinit`, this depends on #14817.
 
``````




---

archive/issue_comments_184038.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n \n Since it uses PARI's `ffinit`, this depends on #14817.\n \n+Apply: [attachment: trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)\n+\n``````\n",
    "created_at": "2013-06-27T07:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184038",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 
 Since it uses PARI's `ffinit`, this depends on #14817.
 
+Apply: [attachment: trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)
+
``````




---

archive/issue_comments_184039.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nMoved finite field-specific code from `PolynomialRing_field.__init__()` to `PolynomialRing_dense_finite_field.__init__()`.",
    "created_at": "2013-06-29T10:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184039",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:4'>Comment 4:</a>
Moved finite field-specific code from `PolynomialRing_field.__init__()` to `PolynomialRing_dense_finite_field.__init__()`.



---

archive/issue_comments_184040.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,13 @@\n-Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket (#14833), the `FiniteField` constructor is adapted to call this function.\n+Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  This ticket does the following:\n+\n+- implement a new class `PolynomialRing_dense_finite_field`\n+- create methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.\n+\n+In a separate ticket (#14833), the `FiniteField` constructor is adapted to call the new function.\n \n The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.\n \n Since it uses PARI's `ffinit`, this depends on #14817.\n \n-Apply: [attachment: trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)\n+Apply: [[attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)(https://github.com/sagemath/sage/files/ticket14832/8f4b0e0517a275c31532402aeeac6851.gz)\n \n``````\n",
    "created_at": "2013-06-29T10:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184040",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,13 @@
-Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  Here is a patch that creates methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.  In a separate ticket (#14833), the `FiniteField` constructor is adapted to call this function.
+Currently, every finite field implementation (integers mod *p*, Givaro, NTL, PARI) has its own code for constructing an irreducible polynomial when given a string as the `modulus` keyword.  This ticket does the following:
+
+- implement a new class `PolynomialRing_dense_finite_field`
+- create methods `PolynomialRing_dense_{finite_field,mod_p}.irreducible_element(n, algorithm=None)`.
+
+In a separate ticket (#14833), the `FiniteField` constructor is adapted to call the new function.
 
 The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.
 
 Since it uses PARI's `ffinit`, this depends on #14817.
 
-Apply: [attachment: trac_14832_make_irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832_make_irreducible_polynomial.patch.gz)
+Apply: [[attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)(https://github.com/sagemath/sage/files/ticket14832/8f4b0e0517a275c31532402aeeac6851.gz)
 
``````




---

archive/issue_comments_184041.json:
```json
{
    "body": "new class for polynomial rings over finite fields",
    "created_at": "2013-06-29T10:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184041",
    "user": "https://github.com/pjbruin"
}
```

new class for polynomial rings over finite fields



---

archive/issue_comments_184042.json:
```json
{
    "body": "Attachment: **[trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)**\n\nmethod irreducible_element()",
    "created_at": "2013-06-29T10:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184042",
    "user": "https://github.com/pjbruin"
}
```

Attachment: **[trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)**

method irreducible_element()



---

archive/issue_comments_184043.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAttachment: **[trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)**\n\nIs there any reason for removing the implementation arg to the PR_field constructor?\nI agree it's not used, but maybe at some point :)\n\nAnd why not test in the PR_field constructor if the field is finite and call the new constructor in that case?\n\nBy the way, I'm not sure using is_FiniteField is the right way to check for finite fields.\nUsing the category framework and doing something like \"R in FiniteFields()\" is surely better unless you really rely on implementation details of the FiniteField class and subclasses.",
    "created_at": "2013-07-08T14:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184043",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:5'>Comment 5:</a>
Attachment: **[trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)**

Is there any reason for removing the implementation arg to the PR_field constructor?
I agree it's not used, but maybe at some point :)

And why not test in the PR_field constructor if the field is finite and call the new constructor in that case?

By the way, I'm not sure using is_FiniteField is the right way to check for finite fields.
Using the category framework and doing something like "R in FiniteFields()" is surely better unless you really rely on implementation details of the FiniteField class and subclasses.



---

archive/issue_comments_184044.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n(The same category stuff would be true for IntegerModRing and so on... but I'm not asking you to fix the old code, just not to introduce new \"bad\" stuff.)",
    "created_at": "2013-07-08T14:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184044",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:6'>Comment 6:</a>
(The same category stuff would be true for IntegerModRing and so on... but I'm not asking you to fix the old code, just not to introduce new "bad" stuff.)



---

archive/issue_comments_184045.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2013-07-08T14:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184045",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_events_193562.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-07-08T14:49:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193562"
}
```



---

archive/issue_events_193563.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-07-08T14:49:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193563"
}
```



---

archive/issue_comments_184046.json:
```json
{
    "body": "Work Issues: **double colons, check for finite fields**",
    "created_at": "2013-07-08T14:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184046",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Work Issues: **double colons, check for finite fields**



---

archive/issue_comments_184047.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nYou also need to use two consecutive colons to introduce examples:\n\n```\nEXAMPLES::\n\n    sage: 1+1\n    2\n```\nor\n\n```\nEXAMPLES:\n\nWe check that 1+1 is equal to 2::\n\n    sage: 1+1\n    2\n```",
    "created_at": "2013-07-08T14:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184047",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:7'>Comment 7:</a>
You also need to use two consecutive colons to introduce examples:

```
EXAMPLES::

    sage: 1+1
    2
```
or

```
EXAMPLES:

We check that 1+1 is equal to 2::

    sage: 1+1
    2
```



---

archive/issue_comments_184048.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [jpflori](#comment%3A5):\n> Is there any reason for removing the implementation arg to the PR_field constructor?\n> I agree it's not used, but maybe at some point :)\n\n>\n> And why not test in the PR_field constructor if the field is finite and call the new constructor in that case?\n\nI think it is better to be conservative with the `implementation` parameter: allow it for the generic `PolynomialRing` constructor and pass it to subclasses that actually have different implementations, but do not add (or keep) the flag in subclasses where it does not do anything.\n\n> By the way, I'm not sure using is_FiniteField is the right way to check for finite fields.\n> Using the category framework and doing something like \"R in FiniteFields()\" is surely better unless you really rely on implementation details of the FiniteField class and subclasses.\n\nI did not introduce this way of checking for finite fields; I just moved it to a more specific `__init__` method.  Having said that, I wouldn't agree that using the category framework here is a good thing.\n\nFirst, a finite field might be in different categories (e.g. `FiniteFields` or the future category of subfields of an algebraic closure of **F**<sub>*p*</sub> that we were discussing at #8335); probably the polynomial ring constructor shouldn't have to care about that.\n\nSecond, one reason to have different implementations of `PolynomialRing` *is* so that we can take advantage of implementation details of (subclasses of) `FiniteField`.  There already is an implementation for polynomials over NTL finite fields; similarly, for PARI finite fields it would be desirable to have an implementation for polynomials over those fields.  (I have some code that is much slower than necessary because it uses PARI finite field elements but NTL polynomials over the same finite fields.)",
    "created_at": "2013-07-11T16:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184048",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [jpflori](#comment%3A5):
> Is there any reason for removing the implementation arg to the PR_field constructor?
> I agree it's not used, but maybe at some point :)

>
> And why not test in the PR_field constructor if the field is finite and call the new constructor in that case?

I think it is better to be conservative with the `implementation` parameter: allow it for the generic `PolynomialRing` constructor and pass it to subclasses that actually have different implementations, but do not add (or keep) the flag in subclasses where it does not do anything.

> By the way, I'm not sure using is_FiniteField is the right way to check for finite fields.
> Using the category framework and doing something like "R in FiniteFields()" is surely better unless you really rely on implementation details of the FiniteField class and subclasses.

I did not introduce this way of checking for finite fields; I just moved it to a more specific `__init__` method.  Having said that, I wouldn't agree that using the category framework here is a good thing.

First, a finite field might be in different categories (e.g. `FiniteFields` or the future category of subfields of an algebraic closure of **F**<sub>*p*</sub> that we were discussing at #8335); probably the polynomial ring constructor shouldn't have to care about that.

Second, one reason to have different implementations of `PolynomialRing` *is* so that we can take advantage of implementation details of (subclasses of) `FiniteField`.  There already is an implementation for polynomials over NTL finite fields; similarly, for PARI finite fields it would be desirable to have an implementation for polynomials over those fields.  (I have some code that is much slower than necessary because it uses PARI finite field elements but NTL polynomials over the same finite fields.)



---

archive/issue_comments_184049.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@pjbruin](#comment%3A8):\n> I did not introduce this way of checking for finite fields; I just moved it to a more specific `__init__` method.  Having said that, I wouldn't agree that using the category framework here is a good thing.\n> \n> First, a finite field might be in different categories (e.g. `FiniteFields` or the future category of subfields of an algebraic closure of **F**<sub>*p*</sub> that we were discussing at #8335); probably the polynomial ring constructor shouldn't have to care about that.\n\n>\n\nI'd say that a subfield of an algebraic closure would be in the category of finite fields and the new one, just as it is as well in that of integral domains. \n> Second, one reason to have different implementations of `PolynomialRing` *is* so that we can take advantage of implementation details of (subclasses of) `FiniteField`.  There already is an implementation for polynomials over NTL finite fields; similarly, for PARI finite fields it would be desirable to have an implementation for polynomials over those fields.  (I have some code that is much slower than necessary because it uses PARI finite field elements but NTL polynomials over the same finite fields.)\n\nI agree, but I don't think the test performed by is_FiniteField is to ensure implementations details, but really the fact that the robject represents a finite field.\n\nAnyway, as you pointed out you just moved the test  so let's keep this for later.\n\nIf you fix the doc, I'll happily positive review that.",
    "created_at": "2013-07-11T20:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184049",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@pjbruin](#comment%3A8):
> I did not introduce this way of checking for finite fields; I just moved it to a more specific `__init__` method.  Having said that, I wouldn't agree that using the category framework here is a good thing.
> 
> First, a finite field might be in different categories (e.g. `FiniteFields` or the future category of subfields of an algebraic closure of **F**<sub>*p*</sub> that we were discussing at #8335); probably the polynomial ring constructor shouldn't have to care about that.

>

I'd say that a subfield of an algebraic closure would be in the category of finite fields and the new one, just as it is as well in that of integral domains. 
> Second, one reason to have different implementations of `PolynomialRing` *is* so that we can take advantage of implementation details of (subclasses of) `FiniteField`.  There already is an implementation for polynomials over NTL finite fields; similarly, for PARI finite fields it would be desirable to have an implementation for polynomials over those fields.  (I have some code that is much slower than necessary because it uses PARI finite field elements but NTL polynomials over the same finite fields.)

I agree, but I don't think the test performed by is_FiniteField is to ensure implementations details, but really the fact that the robject represents a finite field.

Anyway, as you pointed out you just moved the test  so let's keep this for later.

If you fix the doc, I'll happily positive review that.



---

archive/issue_comments_184050.json:
```json
{
    "body": "Reviewer patch.",
    "created_at": "2013-07-11T21:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184050",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Reviewer patch.



---

archive/issue_comments_184051.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAttachment: **[trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)**",
    "created_at": "2013-07-11T21:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184051",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'>Comment 10:</a>
Attachment: **[trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)**



---

archive/issue_comments_184052.json:
```json
{
    "body": "Changed work issues from **double colons, check for finite fields** to none",
    "created_at": "2013-07-11T21:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184052",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Changed work issues from **double colons, check for finite fields** to none



---

archive/issue_events_193564.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-07-11T21:21:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193564"
}
```



---

archive/issue_events_193565.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2013-07-11T21:21:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193565"
}
```



---

archive/issue_comments_184053.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,8 @@\n \n Since it uses PARI's `ffinit`, this depends on #14817.\n \n-Apply: [[attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)(https://github.com/sagemath/sage/files/ticket14832/8f4b0e0517a275c31532402aeeac6851.gz)\n+Apply:\n+* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),\n+* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),\n+* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).\n \n``````\n",
    "created_at": "2013-07-11T21:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184053",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,8 @@
 
 Since it uses PARI's `ffinit`, this depends on #14817.
 
-Apply: [[attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)(https://github.com/sagemath/sage/files/ticket14832/8f4b0e0517a275c31532402aeeac6851.gz)
+Apply:
+* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),
+* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),
+* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).
 
``````




---

archive/issue_comments_184054.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nFor the patchbot, apply only:\n* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),\n* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),\n* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).",
    "created_at": "2013-07-12T09:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184054",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:11'>Comment 11:</a>
For the patchbot, apply only:
* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),
* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),
* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).



---

archive/issue_comments_184055.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThe patchbot doesn't get it:\n\nApply trac_14832-PolynomialRing_dense_finite_field.patch, trac_14832-irreducible_polynomial.patch, trac_14832-reviewer.patch",
    "created_at": "2013-07-16T09:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184055",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:12'>Comment 12:</a>
The patchbot doesn't get it:

Apply trac_14832-PolynomialRing_dense_finite_field.patch, trac_14832-irreducible_polynomial.patch, trac_14832-reviewer.patch



---

archive/issue_comments_184056.json:
```json
{
    "body": "Changed dependencies from **#14817** to **#14817, #14818**",
    "created_at": "2013-07-16T11:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184056",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#14817** to **#14817, #14818**



---

archive/issue_comments_184057.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n \n The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.\n \n-Since it uses PARI's `ffinit`, this depends on #14817.\n+Since it uses PARI's `ffinit`, this depends on #14818.\n \n Apply:\n * [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),\n``````\n",
    "created_at": "2013-07-16T11:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184057",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 
 The default choice is now deterministic: Conway polynomials if available, otherwise lexicographically first (via NTL/GF2E) in characteristic 2, Adleman-Lenstra (via PARI) in characteristic > 2.
 
-Since it uses PARI's `ffinit`, this depends on #14817.
+Since it uses PARI's `ffinit`, this depends on #14818.
 
 Apply:
 * [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),
``````




---

archive/issue_comments_184058.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\n\n```\nApply trac_14832-PolynomialRing_dense_finite_field.patch, trac_14832-irreducible_polynomial.patch, trac_14832-reviewer.patch\n```",
    "created_at": "2013-07-17T08:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184058",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:14'>Comment 14:</a>

```
Apply trac_14832-PolynomialRing_dense_finite_field.patch, trac_14832-irreducible_polynomial.patch, trac_14832-reviewer.patch
```



---

archive/issue_comments_184059.json:
```json
{
    "body": "Attachment: **[trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)**\n\nadd doctest",
    "created_at": "2013-07-17T13:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184059",
    "user": "https://github.com/pjbruin"
}
```

Attachment: **[trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)**

add doctest



---

archive/issue_comments_184060.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,8 @@\n Since it uses PARI's `ffinit`, this depends on #14818.\n \n Apply:\n-* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),\n-* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),\n-* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).\n+* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)\n+* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)\n+* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)\n+* [attachment: trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)\n \n``````\n",
    "created_at": "2013-07-17T13:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184060",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,8 @@
 Since it uses PARI's `ffinit`, this depends on #14818.
 
 Apply:
-* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz),
-* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz),
-* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz).
+* [attachment: trac_14832-PolynomialRing_dense_finite_field.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-PolynomialRing_dense_finite_field.patch.gz)
+* [attachment: trac_14832-irreducible_polynomial.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-irreducible_polynomial.patch.gz)
+* [attachment: trac_14832-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-reviewer.patch.gz)
+* [attachment: trac_14832-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket14832/trac_14832-doctest.patch.gz)
 
``````




---

archive/issue_comments_184061.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nJust want to confirm that Peter's patch solves the patchbot rant and is correct.",
    "created_at": "2013-07-17T13:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184061",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:16'>Comment 16:</a>
Just want to confirm that Peter's patch solves the patchbot rant and is correct.



---

archive/issue_comments_184062.json:
```json
{
    "body": "Merged: **sage-5.12.beta1**",
    "created_at": "2013-08-16T21:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14832#issuecomment-184062",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.12.beta1**



---

archive/issue_events_193566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:12:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193566"
}
```



---

archive/issue_events_193567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:12:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14832",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14832#event-193567"
}
```
