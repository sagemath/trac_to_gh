# Issue 14131: Greene-Kleitman partition of a poset

archive/issues_013927.json:
```json
{
    "body": "The theory behind it is explained in Britz-Fomin, arXiv:9912126 (and briefly discussed in EC1, exercise 77 in chapter 3). It is a map associating to any poset P a partition \\lambda(P) of |P|. For P being a permutation poset, this partition is the shape of the RSK tableaux of the permutation; the tableaux themselves can also be reconstructed by taking the sequences of \\lambda(P_i) where P_i are the initial resp. final intervals of P.\n\nThis functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.\n\nSo I've implemented the algorithm given in Britz-Fomin.\n\nApply:\n* [attachment:trac_14131-greene_shape_v2_conservative.2.patch]\n* [attachment:trac_14131-greene_shape-review-ts.patch]\n\nAssignee: sage-combinat\n\nCC:  @nthiery @fchapoton\n\nKeywords: RSK, permutations, days45\n\nReviewer: Travis Scrimshaw\n\nAuthor: Darij Grinberg\n\nMerged: sage-5.10.beta5\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14131\n\n",
    "closed_at": "2013-05-26T19:49:08Z",
    "created_at": "2013-02-15T14:57:05Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Greene-Kleitman partition of a poset",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14131",
    "user": "https://github.com/darijgr"
}
```
The theory behind it is explained in Britz-Fomin, arXiv:9912126 (and briefly discussed in EC1, exercise 77 in chapter 3). It is a map associating to any poset P a partition \lambda(P) of |P|. For P being a permutation poset, this partition is the shape of the RSK tableaux of the permutation; the tableaux themselves can also be reconstructed by taking the sequences of \lambda(P_i) where P_i are the initial resp. final intervals of P.

This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.

So I've implemented the algorithm given in Britz-Fomin.

Apply:
* [attachment:trac_14131-greene_shape_v2_conservative.2.patch]
* [attachment:trac_14131-greene_shape-review-ts.patch]

Assignee: sage-combinat

CC:  @nthiery @fchapoton

Keywords: RSK, permutations, days45

Reviewer: Travis Scrimshaw

Author: Darij Grinberg

Merged: sage-5.10.beta5

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14131





---

archive/issue_comments_216577.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.\n \n-So I've implemented the algorithm given in Greene-Kleitman. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).\n+So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).\n``````\n",
    "created_at": "2013-02-15T14:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216577",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.
 
-So I've implemented the algorithm given in Greene-Kleitman. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).
+So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).
``````




---

archive/issue_comments_216578.json:
```json
{
    "body": "greene_shape is the most important method here. The stuff after it is what I needed for checks; maybe it has its use too, but I wouldn't expect too much.",
    "created_at": "2013-02-15T18:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216578",
    "user": "https://github.com/darijgr"
}
```

greene_shape is the most important method here. The stuff after it is what I needed for checks; maybe it has its use too, but I wouldn't expect too much.



---

archive/issue_comments_216579.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [greene.py](tarball://root/attachments/some-uuid/ticket14131/greene.py) by @darijgr created at 2013-02-15 18:42:00\n\nReuploaded fixed version, with docstrings and doctests.\n\nI assume it should eventually be merged into Posets, with the functions becoming methods (umm, the ones that aren't useless to begin with). The ford_fulkerson_chronicle method should get an underscore in front of it (right now this would break the doctests).",
    "created_at": "2013-02-15T18:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216579",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>Attachment [greene.py](tarball://root/attachments/some-uuid/ticket14131/greene.py) by @darijgr created at 2013-02-15 18:42:00

Reuploaded fixed version, with docstrings and doctests.

I assume it should eventually be merged into Posets, with the functions becoming methods (umm, the ones that aren't useless to begin with). The ford_fulkerson_chronicle method should get an underscore in front of it (right now this would break the doctests).



---

archive/issue_comments_216580.json:
```json
{
    "body": "Attachment [posets.py](tarball://root/attachments/some-uuid/ticket14131/posets.py) by @darijgr created at 2013-05-06 04:56:49\n\nposets.py. Should be diffed against devel/sage-main/sage/combinat/posets/posets.py as of 5.9.rc1",
    "created_at": "2013-05-06T04:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216580",
    "user": "https://github.com/darijgr"
}
```

Attachment [posets.py](tarball://root/attachments/some-uuid/ticket14131/posets.py) by @darijgr created at 2013-05-06 04:56:49

posets.py. Should be diffed against devel/sage-main/sage/combinat/posets/posets.py as of 5.9.rc1



---

archive/issue_comments_216581.json:
```json
{
    "body": "<a id='comment:3'></a>I have tried to make this into an actual patch but I need some help now. I somehow fucked up with hg mq, and the patch ended up empty. I don't have the old version of the file anymore, but I'm just using sage-main 5.9.rc1 (no other patches installed right now), so can anyone just diff the sage/combinat/posets/posets.py of that release against the posets.py I've uploaded and make the changes into a .patch?\n\nNote that this will likely need manual merging with #14136 since both patches insert stuff at the same position; but there's no actual conflict.\n\nAs far as content is concerned, this contains the most important parts of greene.py with a couple bugfixes. The Greene-Kleitman partition of a poset is computed (in polynomial time). The doctests succeed, but I haven't tried compiling the doc (how does that work again?), so there might be formatting issues.",
    "created_at": "2013-05-06T05:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216581",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:3'></a>I have tried to make this into an actual patch but I need some help now. I somehow fucked up with hg mq, and the patch ended up empty. I don't have the old version of the file anymore, but I'm just using sage-main 5.9.rc1 (no other patches installed right now), so can anyone just diff the sage/combinat/posets/posets.py of that release against the posets.py I've uploaded and make the changes into a .patch?

Note that this will likely need manual merging with #14136 since both patches insert stuff at the same position; but there's no actual conflict.

As far as content is concerned, this contains the most important parts of greene.py with a couple bugfixes. The Greene-Kleitman partition of a poset is computed (in polynomial time). The doctests succeed, but I haven't tried compiling the doc (how does that work again?), so there might be formatting issues.



---

archive/issue_comments_216582.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-09T03:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216582",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_216583.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [trac_14131_greene_shape_v1.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131_greene_shape_v1.patch) by @darijgr created at 2013-05-09 03:12:25\n\nI've made this stuff into a patch [trac_14131_greene_shape_v1.patch] . Can anyone check if it applies correctly? (I am working from sage-main 5.9 rc1.) It might have a few stupid newline issues.",
    "created_at": "2013-05-09T03:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216583",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>Attachment [trac_14131_greene_shape_v1.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131_greene_shape_v1.patch) by @darijgr created at 2013-05-09 03:12:25

I've made this stuff into a patch [trac_14131_greene_shape_v1.patch] . Can anyone check if it applies correctly? (I am working from sage-main 5.9 rc1.) It might have a few stupid newline issues.



---

archive/issue_comments_216584.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-09T16:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216584",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_216585.json:
```json
{
    "body": "<a id='comment:6'></a>Hey I've uploaded a review patch which fixes up some of the documenation. The doc of `_ford_fulkerson_chronicle` will still need to be standardized following [the conventions page](http://www.sagemath.org/doc/developer/conventions.html).\n\nAs for the potential conflect with #14136, I was able to apply this after but has some fuzz. All that means is it will need a `qrefresh` to be run.\n\nAlso the first patch is missing a commit message. Let me know when these are done and I can give it another code review. I'd prefer if someone else (Frederic) can give this a math review.\n\nBest,\n\nTravis",
    "created_at": "2013-05-09T16:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216585",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Hey I've uploaded a review patch which fixes up some of the documenation. The doc of `_ford_fulkerson_chronicle` will still need to be standardized following [the conventions page](http://www.sagemath.org/doc/developer/conventions.html).

As for the potential conflect with #14136, I was able to apply this after but has some fuzz. All that means is it will need a `qrefresh` to be run.

Also the first patch is missing a commit message. Let me know when these are done and I can give it another code review. I'd prefer if someone else (Frederic) can give this a math review.

Best,

Travis



---

archive/issue_comments_216586.json:
```json
{
    "body": "Attachment [trac_14131-greene_shape_v2.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2.patch) by @darijgr created at 2013-05-09 18:09:28\n\nUpdated file, replaces both mine and Travis's files so far",
    "created_at": "2013-05-09T18:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216586",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14131-greene_shape_v2.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2.patch) by @darijgr created at 2013-05-09 18:09:28

Updated file, replaces both mine and Travis's files so far



---

archive/issue_comments_216587.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks a lot for the comments, Travis!\n\nI've uploaded a new patch [trac_14131-greene_shape_v2.patch], which contains both of our changes and a few more. I've standardized the docstring of the Ford-Fulkerson chronicle, though it wouldn't harm to check whether standardized really means standardized. I've also added a (very simple) method to permutations.py to compute the permutation poset of a permutation, and while being there fixed a couple typos in the RSK docs (the changeset isn't very informative, but what I've done is replacing some \"right\" by \"left\" in the doc).\n\nI'm not sure what \"fuzz\" exactly means; is it something like \"the line numbers have shifted, but it's kinda clear where the changes belong\"?\n\nI don't know how to add a commit message...",
    "created_at": "2013-05-09T18:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216587",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>Thanks a lot for the comments, Travis!

I've uploaded a new patch [trac_14131-greene_shape_v2.patch], which contains both of our changes and a few more. I've standardized the docstring of the Ford-Fulkerson chronicle, though it wouldn't harm to check whether standardized really means standardized. I've also added a (very simple) method to permutations.py to compute the permutation poset of a permutation, and while being there fixed a couple typos in the RSK docs (the changeset isn't very informative, but what I've done is replacing some "right" by "left" in the doc).

I'm not sure what "fuzz" exactly means; is it something like "the line numbers have shifted, but it's kinda clear where the changes belong"?

I don't know how to add a commit message...



---

archive/issue_comments_216588.json:
```json
{
    "body": "<a id='comment:8'></a>to add a commit message, you can use \n\n```\nhg qrefresh - m \"trac #14131 patch for doing really serious things\"\n```\nor just\n\n```\nhg qrefresh -e\n```\nwhich will open a text editor",
    "created_at": "2013-05-09T18:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216588",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>to add a commit message, you can use 

```
hg qrefresh - m "trac #14131 patch for doing really serious things"
```
or just

```
hg qrefresh -e
```
which will open a text editor



---

archive/issue_comments_216589.json:
```json
{
    "body": "<a id='comment:9'></a>Then you'll also run\n\n```\nhg export trac_14131-greene_shape_v2.patch > /path/to/patch/trac_14131-greene_shape_v2.patch\n```\nNote that the export does not have to override the patch file, but you only would have to do it once if changes are subsequently made to the patch.\n\nIf you try to apply the one patch after the other, you should get something like \"patch applied with fuzz 2 (offset 1 line)\" or something like that. The fuzz is telling you somethings have moved, but it still applied.\n\nAnyways, the doc looks much better but the inputs should be formatted in code with 2 backticks (see `frank_network()` for example).\n\nI would prefer for this not to change the RSK docs since this will create a conflict with #8392 and is outside of the scope of this patch (same could be said of my changes to `evacuation()` and `is_slender()` [I believe that is what that function is called], but here the doc was more misformed). Also you'll need your real name in the Author section of the ticket, and we should make #14136 depend on this ticket because we need to sort out the doctest issue. Thanks.",
    "created_at": "2013-05-09T23:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216589",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>Then you'll also run

```
hg export trac_14131-greene_shape_v2.patch > /path/to/patch/trac_14131-greene_shape_v2.patch
```
Note that the export does not have to override the patch file, but you only would have to do it once if changes are subsequently made to the patch.

If you try to apply the one patch after the other, you should get something like "patch applied with fuzz 2 (offset 1 line)" or something like that. The fuzz is telling you somethings have moved, but it still applied.

Anyways, the doc looks much better but the inputs should be formatted in code with 2 backticks (see `frank_network()` for example).

I would prefer for this not to change the RSK docs since this will create a conflict with #8392 and is outside of the scope of this patch (same could be said of my changes to `evacuation()` and `is_slender()` [I believe that is what that function is called], but here the doc was more misformed). Also you'll need your real name in the Author section of the ticket, and we should make #14136 depend on this ticket because we need to sort out the doctest issue. Thanks.



---

archive/issue_comments_216590.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2013-05-09T23:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216590",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_216591.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,6 @@\n This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.\n \n So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).\n+\n+Apply:\n+* [attachment:trac_14131-greene_shape_v2.patch]\n``````\n",
    "created_at": "2013-05-10T20:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216591",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,6 @@
 This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.
 
 So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).
+
+Apply:
+* [attachment:trac_14131-greene_shape_v2.patch]
``````




---

archive/issue_comments_216592.json:
```json
{
    "body": "<a id='comment:11'></a>for the bot : apply trac_14131-greene_shape_v2.patch",
    "created_at": "2013-05-10T20:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216592",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>for the bot : apply trac_14131-greene_shape_v2.patch



---

archive/issue_comments_216593.json:
```json
{
    "body": "<a id='comment:12'></a>Thank you `@`Travis and Fr\u00e9d\u00e9ric for the help with hg! Now I guess I've got the whole mq picture. A shame it's soon to be obsoleted...\n\nThere is one thing I don't understand: [Travis] \"Note that the export does not have to override the patch file, but you only would have to do it once if changes are subsequently made to the patch.\" Do what once?\n\nI deliberately used 1 backtick for the variables since their font should match the font in which they appear in later LaTeX formulae. Is this against some convention?",
    "created_at": "2013-05-11T01:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216593",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:12'></a>Thank you `@`Travis and Frédéric for the help with hg! Now I guess I've got the whole mq picture. A shame it's soon to be obsoleted...

There is one thing I don't understand: [Travis] "Note that the export does not have to override the patch file, but you only would have to do it once if changes are subsequently made to the patch." Do what once?

I deliberately used 1 backtick for the variables since their font should match the font in which they appear in later LaTeX formulae. Is this against some convention?



---

archive/issue_comments_216594.json:
```json
{
    "body": "Attachment [trac_14131-greene_shape_v2_conservative.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2_conservative.patch) by @darijgr created at 2013-05-12 03:33:49\n\nAlternative version of v2, which should no longer conflict with Travis' RSK changes; UPDATE: BUG FIXED",
    "created_at": "2013-05-12T03:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216594",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14131-greene_shape_v2_conservative.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2_conservative.patch) by @darijgr created at 2013-05-12 03:33:49

Alternative version of v2, which should no longer conflict with Travis' RSK changes; UPDATE: BUG FIXED



---

archive/issue_comments_216595.json:
```json
{
    "body": "Attachment [trac_14131-greene_shape_v2_conservative.2.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2_conservative.2.patch) by @darijgr created at 2013-05-12 03:43:39\n\nAlternative version of v2, which should no longer conflict with Travis' RSK changes; SECOND BUGFIX UPDATE!",
    "created_at": "2013-05-12T03:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216595",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14131-greene_shape_v2_conservative.2.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape_v2_conservative.2.patch) by @darijgr created at 2013-05-12 03:43:39

Alternative version of v2, which should no longer conflict with Travis' RSK changes; SECOND BUGFIX UPDATE!



---

archive/issue_comments_216596.json:
```json
{
    "body": "<a id='comment:13'></a>New version uploaded: [attachment:trac_14131-greene_shape_v2_conservative.2.patch]. This differs from the one from 2 days ago in that RSK methods are no longer being edited, and I have even changed the insertion point so it shouldn't even be close to RSK. I have tested on 5.10beta2 that this doesn't conflict with #8392 in either order of patching. Oh and I also fixed a documentation bug (the :meth: declaration used a wrong method name), put inputs in double backticks the first time they appear, and added a commit message.",
    "created_at": "2013-05-12T03:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216596",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>New version uploaded: [attachment:trac_14131-greene_shape_v2_conservative.2.patch]. This differs from the one from 2 days ago in that RSK methods are no longer being edited, and I have even changed the insertion point so it shouldn't even be close to RSK. I have tested on 5.10beta2 that this doesn't conflict with #8392 in either order of patching. Oh and I also fixed a documentation bug (the :meth: declaration used a wrong method name), put inputs in double backticks the first time they appear, and added a commit message.



---

archive/issue_comments_216597.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-12T03:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216597",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_216598.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).\n \n Apply:\n-* [attachment:trac_14131-greene_shape_v2.patch]\n+* [attachment:trac_14131-greene_shape_v2_conservative.2.patch]\n``````\n",
    "created_at": "2013-05-12T03:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216598",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).
 
 Apply:
-* [attachment:trac_14131-greene_shape_v2.patch]
+* [attachment:trac_14131-greene_shape_v2_conservative.2.patch]
``````




---

archive/issue_comments_216599.json:
```json
{
    "body": "Changing author from \"darij\" to \"Darij Grinberg\"",
    "created_at": "2013-05-14T22:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216599",
    "user": "https://github.com/tscrim"
}
```

Changing author from "darij" to "Darij Grinberg"



---

archive/issue_comments_216600.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,8 @@\n \n This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.\n \n-So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).\n+So I've implemented the algorithm given in Britz-Fomin.\n \n Apply:\n * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]\n+* [attachement:trac_14131-green_shape-review-ts.patch]\n``````\n",
    "created_at": "2013-05-14T22:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216600",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,8 @@
 
 This functionality appears in Macaulay ( http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/doc/Macaulay2/Posets/html/_greene__Kleitman__Partition.html ) but is apparently not exposed in Sage. I also don't like the Macaulay implementation, since (as far as I understand the sourcecode at http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.5/share/Macaulay2/Posets.m2 ) it goes by brute force despite the existence of a polynomial-time algorithm.
 
-So I've implemented the algorithm given in Britz-Fomin. I'm not doing this as a patch, because I believe the Posets file is currently being worked on and this is likely to require manual merging (also, I am not currently using sage-combinat).
+So I've implemented the algorithm given in Britz-Fomin.
 
 Apply:
 * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]
+* [attachement:trac_14131-green_shape-review-ts.patch]
``````




---

archive/issue_comments_216601.json:
```json
{
    "body": "<a id='comment:16'></a>I've uploaded a new (version) review patch which makes some changes to the doc. If you agree with my changes, you can set this to positive review.\n\nAlso thanks for separating off the RSK changes.\n\nBest,\n\nTravis",
    "created_at": "2013-05-14T22:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216601",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>I've uploaded a new (version) review patch which makes some changes to the doc. If you agree with my changes, you can set this to positive review.

Also thanks for separating off the RSK changes.

Best,

Travis



---

archive/issue_comments_216602.json:
```json
{
    "body": "<a id='comment:17'></a>Thank you for the review! There were some stupid doc blunders *oops*. \n\nI agree with all of your changes except maybe two:\n\n- You replaced range by xrange -- wasn't xrange supposed to be deprecated? (Do let me know what you think, as my other patches have the same situation at times.)\n\n- I'd replace ```s`` -- the source vertex of `G`` by ```s`` -- a vertex of `G`, to be used as the source vertex` and similarly for ```t```. This is to avoid the false impression that ``s`` needs to be a source in the sense of having no arrows going to ``s`` (that's not required).",
    "created_at": "2013-05-14T22:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216602",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>Thank you for the review! There were some stupid doc blunders *oops*. 

I agree with all of your changes except maybe two:

- You replaced range by xrange -- wasn't xrange supposed to be deprecated? (Do let me know what you think, as my other patches have the same situation at times.)

- I'd replace ```s`` -- the source vertex of `G`` by ```s`` -- a vertex of `G`, to be used as the source vertex` and similarly for ```t```. This is to avoid the false impression that ``s`` needs to be a source in the sense of having no arrows going to ``s`` (that's not required).



---

archive/issue_comments_216603.json:
```json
{
    "body": "<a id='comment:18'></a>I didn't know `xrange` was deprecated in python 3 (it might even be removed outright); I've changed it back. I've also tweaked those inputs around.",
    "created_at": "2013-05-14T23:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216603",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>I didn't know `xrange` was deprecated in python 3 (it might even be removed outright); I've changed it back. I've also tweaked those inputs around.



---

archive/issue_comments_216604.json:
```json
{
    "body": "<a id='comment:19'></a>TBH I'm not sure if this is a good reason; I was just saying this is the reason why I chose `range`. Looking at the changes in Python 3.0 ( http://docs.python.org/3.1/whatsnew/3.0.html ), I suspect that most of our code is going to break if we ever switch to 3.0 (I am using `None < 0` several times in my Bender-Knuth code, for example), so I am not sure whether to expect such a switch in the nearest time...",
    "created_at": "2013-05-15T00:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216604",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:19'></a>TBH I'm not sure if this is a good reason; I was just saying this is the reason why I chose `range`. Looking at the changes in Python 3.0 ( http://docs.python.org/3.1/whatsnew/3.0.html ), I suspect that most of our code is going to break if we ever switch to 3.0 (I am using `None < 0` several times in my Bender-Knuth code, for example), so I am not sure whether to expect such a switch in the nearest time...



---

archive/issue_comments_216605.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [darij](#comment%3A19):\n> TBH I'm not sure if this is a good reason; I was just saying this is the reason why I chose `range`. Looking at the changes in Python 3.0 ( http://docs.python.org/3.1/whatsnew/3.0.html ), I suspect that most of our code is going to break if we ever switch to 3.0 (I am using `None < 0` several times in my Bender-Knuth code, for example), so I am not sure whether to expect such a switch in the nearest time...\n\n\nI don't expect a switch in the short run. Yet I try to avoid using 2.0-only \"features\" without a compelling reason (but I certainly am unknowingly using some).\n\nCheers,\n                          Nicolas",
    "created_at": "2013-05-15T00:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216605",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:20'></a>Replying to [darij](#comment%3A19):
> TBH I'm not sure if this is a good reason; I was just saying this is the reason why I chose `range`. Looking at the changes in Python 3.0 ( http://docs.python.org/3.1/whatsnew/3.0.html ), I suspect that most of our code is going to break if we ever switch to 3.0 (I am using `None < 0` several times in my Bender-Knuth code, for example), so I am not sure whether to expect such a switch in the nearest time...


I don't expect a switch in the short run. Yet I try to avoid using 2.0-only "features" without a compelling reason (but I certainly am unknowingly using some).

Cheers,
                          Nicolas



---

archive/issue_comments_216606.json:
```json
{
    "body": "<a id='comment:21'></a>Hey Darij,\n\nIf you're happy with the latest review patch I've uploaded, you can set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-05-16T18:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216606",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>Hey Darij,

If you're happy with the latest review patch I've uploaded, you can set this to positive review.

Best,

Travis



---

archive/issue_comments_216607.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n Apply:\n * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]\n-* [attachement:trac_14131-green_shape-review-ts.patch]\n+* [attachment:trac_14131-green_shape-review-ts.patch]\n``````\n",
    "created_at": "2013-05-17T07:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216607",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 Apply:
 * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]
-* [attachement:trac_14131-green_shape-review-ts.patch]
+* [attachment:trac_14131-green_shape-review-ts.patch]
``````




---

archive/issue_comments_216608.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-17T07:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216608",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_216609.json:
```json
{
    "body": "<a id='comment:23'></a>Oops, of course! Yes, I'm happy with the review patch. But why are you suddenly making francophone typos? (\"attachement\")",
    "created_at": "2013-05-17T07:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216609",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:23'></a>Oops, of course! Yes, I'm happy with the review patch. But why are you suddenly making francophone typos? ("attachement")



---

archive/issue_comments_216610.json:
```json
{
    "body": "<a id='comment:24'></a>...because I'm doing this on a keyboard I'm not used to? :P",
    "created_at": "2013-05-17T07:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216610",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>...because I'm doing this on a keyboard I'm not used to? :P



---

archive/issue_comments_216611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n Apply:\n * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]\n-* [attachment:trac_14131-green_shape-review-ts.patch]\n+* [attachment:trac_14131-greene_shape-review-ts.patch]\n``````\n",
    "created_at": "2013-05-17T19:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216611",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 Apply:
 * [attachment:trac_14131-greene_shape_v2_conservative.2.patch]
-* [attachment:trac_14131-green_shape-review-ts.patch]
+* [attachment:trac_14131-greene_shape-review-ts.patch]
``````




---

archive/issue_comments_216612.json:
```json
{
    "body": "<a id='comment:26'></a>Touch\u00e9. :D",
    "created_at": "2013-05-17T20:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216612",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:26'></a>Touché. :D



---

archive/issue_comments_216613.json:
```json
{
    "body": "<a id='comment:27'></a>There is a problem with the documentation:\n\n```\n[combinat ] /mazur/release/merger/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py:docstring of sage.combinat.posets.posets:20: WARNING: Inline literal start-string without end-string.\n```",
    "created_at": "2013-05-21T10:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216613",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>There is a problem with the documentation:

```
[combinat ] /mazur/release/merger/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py:docstring of sage.combinat.posets.posets:20: WARNING: Inline literal start-string without end-string.
```



---

archive/issue_comments_216614.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-05-21T10:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216614",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_216615.json:
```json
{
    "body": "Attachment [trac_14131-greene_shape-review-ts.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape-review-ts.patch) by @tscrim created at 2013-05-21 18:25:59",
    "created_at": "2013-05-21T18:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216615",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14131-greene_shape-review-ts.patch](tarball://root/attachments/some-uuid/ticket14131/trac_14131-greene_shape-review-ts.patch) by @tscrim created at 2013-05-21 18:25:59



---

archive/issue_comments_216616.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-05-21T18:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216616",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_216617.json:
```json
{
    "body": "<a id='comment:28'></a>Fixed, small typo. Sorry about that.",
    "created_at": "2013-05-21T18:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216617",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>Fixed, small typo. Sorry about that.



---

archive/issue_comments_216618.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-26T19:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216618",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_216619.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.10.beta5\"",
    "created_at": "2013-05-26T19:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14131#issuecomment-216619",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.10.beta5"



---

archive/issue_events_039870.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14131",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14131#event-39870"
}
```
