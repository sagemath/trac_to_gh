# Issue 14667: Matroid union

archive/issues_014463.json:
```json
{
    "body": "Add matroid union to the matroids module.\n\n**Assignee:** Stefanf\n\n**CC:**  @darijgr\n\n**Keywords:** matroid\n\n**Branch:** [u/Rajesh_Veeranki/ticket/14667](https://github.com/sagemath/sagetrac-mirror/tree/u/Rajesh_Veeranki/ticket/14667)\n\n**Commit:** [3f0e407ab7f9e145e029fa0a13423ab47c01e4d6](https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6)\n\n**Reviewer:** Stefan van Zwam\n\nIssue created by migration from https://trac.sagemath.org/ticket/14667\n\n",
    "closed_at": "2017-07-13T07:54:31Z",
    "created_at": "2013-05-30T18:17:54Z",
    "labels": [
        "component: matroid theory",
        "enhancement",
        "wontfix"
    ],
    "title": "Matroid union",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14667",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```
Add matroid union to the matroids module.

**Assignee:** Stefanf

**CC:**  @darijgr

**Keywords:** matroid

**Branch:** [u/Rajesh_Veeranki/ticket/14667](https://github.com/sagemath/sagetrac-mirror/tree/u/Rajesh_Veeranki/ticket/14667)

**Commit:** [3f0e407ab7f9e145e029fa0a13423ab47c01e4d6](https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6)

**Reviewer:** Stefan van Zwam

Issue created by migration from https://trac.sagemath.org/ticket/14667





---

archive/issue_events_130703.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130703"
}
```



---

archive/issue_events_130704.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130704"
}
```



---

archive/issue_events_130705.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-13T13:44:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "component: combinatorics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130705"
}
```



---

archive/issue_events_130706.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-13T13:44:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "component: matroid theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130706"
}
```



---

archive/issue_comments_182178.json:
```json
{
    "body": "**Changing assignee** from sage-combinat to Stefanf.",
    "created_at": "2013-09-13T13:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182178",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Changing assignee** from sage-combinat to Stefanf.



---

archive/issue_events_130707.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130707"
}
```



---

archive/issue_events_130708.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130708"
}
```



---

archive/issue_comments_182179.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi,\nI want to implement the function.May i know the preferred signature of the function and where should i add it.\nThanks!",
    "created_at": "2014-02-14T14:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182179",
    "user": "https://github.com/Rajesh-Veeranki"
}
```

<a id='comment:5'></a>
Hi,
I want to implement the function.May i know the preferred signature of the function and where should i add it.
Thanks!



---

archive/issue_comments_182180.json:
```json
{
    "body": "**Branch:** [u/Rajesh_Veeranki/ticket/14667](https://github.com/sagemath/sagetrac-mirror/tree/u/Rajesh_Veeranki/ticket/14667)",
    "created_at": "2014-02-16T02:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182180",
    "user": "https://github.com/Rajesh-Veeranki"
}
```

**Branch:** [u/Rajesh_Veeranki/ticket/14667](https://github.com/sagemath/sagetrac-mirror/tree/u/Rajesh_Veeranki/ticket/14667)



---

archive/issue_events_130709.json:
```json
{
    "actor": "https://github.com/Rajesh-Veeranki",
    "created_at": "2014-02-16T02:47:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130709"
}
```



---

archive/issue_events_130710.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2014-02-17T19:26:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130710"
}
```



---

archive/issue_events_130711.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2014-02-17T19:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130711"
}
```



---

archive/issue_comments_182181.json:
```json
{
    "body": "<a id='comment:8'></a>\n1) I would not import this into the main namespace; rather I'd create a \"submenu\" matroids.constructions, just like we have matroids.named_matroids now.\n\n2) Instead of computing the full list of bases, which is an expensive operation, I'd return a RankMatroid with the appropriate rank function (implemented efficiently using matroid intersection). Matroid Union is likely to be applied to fairly large matroids, derived from graphs, whereas BasisMatroid is optimized for small matroids.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6\">3f0e407</a></td><td><code>Added MatroidUnion function in constructions.py</code></td></tr></table>\n",
    "created_at": "2014-02-17T19:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182181",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:8'></a>
1) I would not import this into the main namespace; rather I'd create a "submenu" matroids.constructions, just like we have matroids.named_matroids now.

2) Instead of computing the full list of bases, which is an expensive operation, I'd return a RankMatroid with the appropriate rank function (implemented efficiently using matroid intersection). Matroid Union is likely to be applied to fairly large matroids, derived from graphs, whereas BasisMatroid is optimized for small matroids.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6">3f0e407</a></td><td><code>Added MatroidUnion function in constructions.py</code></td></tr></table>




---

archive/issue_comments_182182.json:
```json
{
    "body": "**Commit:** [3f0e407ab7f9e145e029fa0a13423ab47c01e4d6](https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6)",
    "created_at": "2014-02-17T19:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182182",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Commit:** [3f0e407ab7f9e145e029fa0a13423ab47c01e4d6](https://github.com/sagemath/sagetrac-mirror/commit/3f0e407ab7f9e145e029fa0a13423ab47c01e4d6)



---

archive/issue_comments_182183.json:
```json
{
    "body": "<a id='comment:9'></a>\nDear Prof.Stefan,\n\nI have implemented the matroid union (for 2 matroids) using Rank Matroid.The rank function I used is\nrank_(M1UM2)(X) = max ( |Y|+rM2(X)) where Y belongs to M1 intersection M2*, Y subset of X\n\n```\ndef MatroidUnion(M0,M1):\n\n\t#Constructing matroid union from two matroids\n\t#rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to M0 \\cap M1.dual()\n\n\tcommon_ground_set = M0.groundset()\n\tcommon_ground_set = common_ground_set.union(M1.groundset())\n\n\tdef f(X):\n\t\tground_set = common_ground_set.intersection(X)\n\t\tdelSet = common_ground_set-ground_set\n\n\t\tdef h(X):\n\t\t\treturn M0.rank(set(X).intersection(M0.groundset()))\n\n\t\t#Extending matroid M0 to the union of groundsets\n\t\tI0 = RankMatroid(groundset=common_ground_set,rank_function=h)\n\n\t\tdef g(X):\n\t\t\treturn M1.rank(set(X).intersection(M1.groundset()))\n\n\t\t#Extending matroid M1 to the  union of groundsets\n\t\tI1 = RankMatroid(groundset=common_ground_set,rank_function=g)\n\n\t\t#Restricting matroid M0 to set X\n\t\tI0 = I0.delete(delSet)\n\n\t\t#Taking M1 dual and restricting to set X\n\t\tI1 = I1.dual()\n\t\tI1 = I1.delete(delSet)\n\n\t\t# rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to I0 \\cap I1\n\t\tr1 = len(I0.intersection(I1))\n\t\tr2 = M1.rank(set(X).intersection(M1.groundset()))\n\t\treturn r1+r2\n\n\n\treturn RankMatroid(groundset=common_ground_set,rank_function=f)\n```\n\nThis works just fine. What are your comments on this?\nI plan to implement MatroidUnion for any no.of matroids, by calling MatriodUnion for 2 matroids each time.\n\nThanks!",
    "created_at": "2014-02-23T07:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182183",
    "user": "https://github.com/Rajesh-Veeranki"
}
```

<a id='comment:9'></a>
Dear Prof.Stefan,

I have implemented the matroid union (for 2 matroids) using Rank Matroid.The rank function I used is
rank_(M1UM2)(X) = max ( |Y|+rM2(X)) where Y belongs to M1 intersection M2*, Y subset of X

```
def MatroidUnion(M0,M1):

	#Constructing matroid union from two matroids
	#rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to M0 \cap M1.dual()

	common_ground_set = M0.groundset()
	common_ground_set = common_ground_set.union(M1.groundset())

	def f(X):
		ground_set = common_ground_set.intersection(X)
		delSet = common_ground_set-ground_set

		def h(X):
			return M0.rank(set(X).intersection(M0.groundset()))

		#Extending matroid M0 to the union of groundsets
		I0 = RankMatroid(groundset=common_ground_set,rank_function=h)

		def g(X):
			return M1.rank(set(X).intersection(M1.groundset()))

		#Extending matroid M1 to the  union of groundsets
		I1 = RankMatroid(groundset=common_ground_set,rank_function=g)

		#Restricting matroid M0 to set X
		I0 = I0.delete(delSet)

		#Taking M1 dual and restricting to set X
		I1 = I1.dual()
		I1 = I1.delete(delSet)

		# rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to I0 \cap I1
		r1 = len(I0.intersection(I1))
		r2 = M1.rank(set(X).intersection(M1.groundset()))
		return r1+r2


	return RankMatroid(groundset=common_ground_set,rank_function=f)
```

This works just fine. What are your comments on this?
I plan to implement MatroidUnion for any no.of matroids, by calling MatriodUnion for 2 matroids each time.

Thanks!



---

archive/issue_events_130712.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130712"
}
```



---

archive/issue_events_130713.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130713"
}
```



---

archive/issue_events_130714.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130714"
}
```



---

archive/issue_events_130715.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130715"
}
```



---

archive/issue_comments_182184.json:
```json
{
    "body": "**Reviewer:** Stefan van Zwam",
    "created_at": "2016-04-04T19:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182184",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Reviewer:** Stefan van Zwam



---

archive/issue_events_130716.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2016-04-04T19:08:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130716"
}
```



---

archive/issue_events_130717.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2016-04-04T19:08:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130717"
}
```



---

archive/issue_comments_182185.json:
```json
{
    "body": "<a id='comment:12'></a>\nAlready implemented in sage.matroids.union_matroid",
    "created_at": "2016-04-04T19:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182185",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:12'></a>
Already implemented in sage.matroids.union_matroid



---

archive/issue_events_130718.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-02T13:17:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130718"
}
```



---

archive/issue_events_130719.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-02T13:17:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130719"
}
```



---

archive/issue_events_130720.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130720"
}
```



---

archive/issue_events_130721.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130721"
}
```



---

archive/issue_events_130722.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "label": "wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14667#event-130722"
}
```



---

archive/issue_comments_182186.json:
```json
{
    "body": "<a id='comment:14'></a>\nClosing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14667#issuecomment-182186",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).
