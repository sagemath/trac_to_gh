# Issue 14630: Add `simplify_real` method to symbolic expressions

archive/issues_014426.json:
```json
{
    "body": "Symbolic expressions in sage are by default assumed complex. There is a maxima variable, called the \"simplification domain,\" which affects whether or not it simplifies `sqrt(x^2)` to `abs(x)`. Since our expressions are complex, we set the simplification domain to complex, but provide no easy way to change it.\n\nBy adding a `simplify_real()` method to Expression, we give the user a way to perform the aforementioned simplification by declaring his expression real.\n\nThis might provide a quick fix for #14305. See also:\n\nhttps://groups.google.com/forum/?fromgroups=#!topic/sage-support/jhCJujRtNA4/discussion\n\n**Assignee:** @burcin\n\n**CC:**  @egourgoulhon\n\n**Branch/Commit:** [649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)\n\n**Reviewer:** Karl-Dieter Crisman, Ralf Stephan\n\n**Author:** Michael Orlitzky\n\n**Dependencies:** #11912\n\nIssue created by migration from https://trac.sagemath.org/ticket/14630\n\n",
    "closed_at": "2014-12-15T17:50:53Z",
    "created_at": "2013-05-23T00:39:35Z",
    "labels": [
        "component: symbolics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Add `simplify_real` method to symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/14630",
    "user": "https://github.com/orlitzky"
}
```
Symbolic expressions in sage are by default assumed complex. There is a maxima variable, called the "simplification domain," which affects whether or not it simplifies `sqrt(x^2)` to `abs(x)`. Since our expressions are complex, we set the simplification domain to complex, but provide no easy way to change it.

By adding a `simplify_real()` method to Expression, we give the user a way to perform the aforementioned simplification by declaring his expression real.

This might provide a quick fix for #14305. See also:

https://groups.google.com/forum/?fromgroups=#!topic/sage-support/jhCJujRtNA4/discussion

**Assignee:** @burcin

**CC:**  @egourgoulhon

**Branch/Commit:** [649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)

**Reviewer:** Karl-Dieter Crisman, Ralf Stephan

**Author:** Michael Orlitzky

**Dependencies:** #11912

Issue created by migration from https://trac.sagemath.org/ticket/14630





---

archive/issue_comments_179884.json:
```json
{
    "body": "**Author:** Michael Orlitzky",
    "created_at": "2013-05-23T00:53:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179884",
    "user": "https://github.com/orlitzky"
}
```

**Author:** Michael Orlitzky



---

archive/issue_events_127486.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-05-23T00:53:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127486"
}
```



---

archive/issue_comments_179885.json:
```json
{
    "body": "<a id='comment:1'></a>\nMathJAX is throwing a \"Math Processing Error\" -- I'm not sure whether it's busted or I screwed up but the docs definitely need a review.",
    "created_at": "2013-05-23T00:53:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179885",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:1'></a>
MathJAX is throwing a "Math Processing Error" -- I'm not sure whether it's busted or I screwed up but the docs definitely need a review.



---

archive/issue_comments_179886.json:
```json
{
    "body": "<a id='comment:2'></a>\nYou need to do `\\left|x\\\\right|`.\n\n---\n\nI'm not sure about all the stuff in the doc and the code, but I think that some of the doc is doing the code and vice versa?  For instance,\n\n```\n# Forget all assumptions\n```\nbut you don't do that in the code.  And the corresponding part in the doc seems to imply that in order to use `simplify_real` you have to assume variables are real... I may be misunderstanding something here.  I think this could be a good way to solve the issue at hand.\n\nMy question is how this will interact with the other simplifications.  I seem to recall that in some of the more controversial (e.g. `radcan`-related) simplifications we do, part of the issue is whether the variable is real... that recollection may be outdated.  Anyway, I could imagine that `simplify_foo` simplified differently whether one was real or complex, though I hesitate to add `simplify_foo_real` for all `foo`!",
    "created_at": "2013-05-23T12:56:32Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179886",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
You need to do `\left|x\\right|`.

---

I'm not sure about all the stuff in the doc and the code, but I think that some of the doc is doing the code and vice versa?  For instance,

```
# Forget all assumptions
```
but you don't do that in the code.  And the corresponding part in the doc seems to imply that in order to use `simplify_real` you have to assume variables are real... I may be misunderstanding something here.  I think this could be a good way to solve the issue at hand.

My question is how this will interact with the other simplifications.  I seem to recall that in some of the more controversial (e.g. `radcan`-related) simplifications we do, part of the issue is whether the variable is real... that recollection may be outdated.  Anyway, I could imagine that `simplify_foo` simplified differently whether one was real or complex, though I hesitate to add `simplify_foo_real` for all `foo`!



---

archive/attachments_019730.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage-trac_14630.patch",
    "asset_url": "tarball://root/attachments/ticket14630/sage-trac_14630.patch",
    "created_at": "2013-05-24T23:42:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14630/sage-trac_14630.patch",
    "user": "https://github.com/orlitzky"
}
```



---

archive/issue_comments_179887.json:
```json
{
    "body": "Attachment [sage-trac_14630.patch](https://github.com/sagemath/sage/files/ticket14630/sage-trac_14630.patch) by @orlitzky created at 2013-05-24 23:42:10\n\nAdd simplify_real() method to Expression",
    "created_at": "2013-05-24T23:42:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179887",
    "user": "https://github.com/orlitzky"
}
```

Attachment [sage-trac_14630.patch](https://github.com/sagemath/sage/files/ticket14630/sage-trac_14630.patch) by @orlitzky created at 2013-05-24 23:42:10

Add simplify_real() method to Expression



---

archive/issue_comments_179888.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [kcrisman](#comment%3A2):\n> You need to do `\\left|x\\\\right|`.\n> \n\n\n\n\n\nFixed in the new patch, but my MathJAX still doesn't work, so please give it a look.\n\n\n\n\n> \n> I'm not sure about all the stuff in the doc and the code, but I think that some of the doc is doing the code and vice versa?  For instance,\n> \n> ```\n> # Forget all assumptions\n> ```\n> but you don't do that in the code.\n\n\n\n\nWhoops, I forgot to call `forget()`; the comment was correct. I fixed it and added a doctest to ensure that no new assumptions remain after the call.\n\n\n\n\n> And the corresponding part in the doc seems to imply that in order to use `simplify_real` you have to assume variables are real... I may be misunderstanding something here.  I think this could be a good way to solve the issue at hand.\n\n\n\n\n\nI didn't mean that the user has to `assume()` anything, only that we have to assume things are real in the traditional sense. You can call `simplify_real()` on an expression containing complex variables, but the answer might not make sense.\n\n\n\n\n> \n> My question is how this will interact with the other simplifications.  I seem to recall that in some of the more controversial (e.g. `radcan`-related) simplifications we do, part of the issue is whether the variable is real... that recollection may be outdated.  Anyway, I could imagine that `simplify_foo` simplified differently whether one was real or complex, though I hesitate to add `simplify_foo_real` for all `foo`!\n\n\n\n\n\nExpressions *should* be complex everywhere. I believe there are one or two functions which treat them as real, but they're documented to do that, so it's fine. Radcan via `simplify_radical()` will still produce crazy answers that are invalid for complex numbers, but there isn't much that can be done about that now except revoke the name \"simplify\" from \"simplify_radical.\"\n\nNot many expressions are actually affected by the domain and 'real' assumptions. We can get most of the benefit of `simplify_foo_real()` by doing `simplify_foo().simplify_real()`. Simplifications can be combined/repeated to produce better answers, and we already have a situation where calling e.g. `simplify_full()` twice might give you a better answer than calling it once. So you're kind of on your own regarding how many simplifications to try and in what order.",
    "created_at": "2013-05-25T00:02:29Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179888",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>
Replying to [kcrisman](#comment%3A2):
> You need to do `\left|x\\right|`.
> 





Fixed in the new patch, but my MathJAX still doesn't work, so please give it a look.




> 
> I'm not sure about all the stuff in the doc and the code, but I think that some of the doc is doing the code and vice versa?  For instance,
> 
> ```
> # Forget all assumptions
> ```
> but you don't do that in the code.




Whoops, I forgot to call `forget()`; the comment was correct. I fixed it and added a doctest to ensure that no new assumptions remain after the call.




> And the corresponding part in the doc seems to imply that in order to use `simplify_real` you have to assume variables are real... I may be misunderstanding something here.  I think this could be a good way to solve the issue at hand.





I didn't mean that the user has to `assume()` anything, only that we have to assume things are real in the traditional sense. You can call `simplify_real()` on an expression containing complex variables, but the answer might not make sense.




> 
> My question is how this will interact with the other simplifications.  I seem to recall that in some of the more controversial (e.g. `radcan`-related) simplifications we do, part of the issue is whether the variable is real... that recollection may be outdated.  Anyway, I could imagine that `simplify_foo` simplified differently whether one was real or complex, though I hesitate to add `simplify_foo_real` for all `foo`!





Expressions *should* be complex everywhere. I believe there are one or two functions which treat them as real, but they're documented to do that, so it's fine. Radcan via `simplify_radical()` will still produce crazy answers that are invalid for complex numbers, but there isn't much that can be done about that now except revoke the name "simplify" from "simplify_radical."

Not many expressions are actually affected by the domain and 'real' assumptions. We can get most of the benefit of `simplify_foo_real()` by doing `simplify_foo().simplify_real()`. Simplifications can be combined/repeated to produce better answers, and we already have a situation where calling e.g. `simplify_full()` twice might give you a better answer than calling it once. So you're kind of on your own regarding how many simplifications to try and in what order.



---

archive/issue_comments_179889.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhat about adding a parameter to all the simplify_* functions instead of adding more functions? \nLike \"def simplify(real_domain=False):...\"",
    "created_at": "2013-05-29T13:44:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179889",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:4'></a>
What about adding a parameter to all the simplify_* functions instead of adding more functions? 
Like "def simplify(real_domain=False):..."



---

archive/issue_comments_179890.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [sluther](#comment%3A4):\n> What about adding a parameter to all the simplify_* functions instead of adding more functions? \n> Like \"def simplify(real_domain=False):...\"\n\n\nIf instead of `simplify_rational`, `simplify_log`, etc. we had `simplify(rational=True, log=True,...)` that's what I would have done. As it is, if you want to do both rational and log simplifications, you just have to do `expr.simplify_rational().simplify_log()`.\n\nParticularly with `simplify_real()`, it only does one specific thing that isn't done by other methods so you can be somewhat confident that `simplify_foo().simplify_real()` will give you both simplifications. In other words I don't think you'd get a nicer expression back by setting the simplification domain to real before `simplify_rational()` than you would by calling the two in succession.",
    "created_at": "2013-05-30T17:52:07Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179890",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:5'></a>
Replying to [sluther](#comment%3A4):
> What about adding a parameter to all the simplify_* functions instead of adding more functions? 
> Like "def simplify(real_domain=False):..."


If instead of `simplify_rational`, `simplify_log`, etc. we had `simplify(rational=True, log=True,...)` that's what I would have done. As it is, if you want to do both rational and log simplifications, you just have to do `expr.simplify_rational().simplify_log()`.

Particularly with `simplify_real()`, it only does one specific thing that isn't done by other methods so you can be somewhat confident that `simplify_foo().simplify_real()` will give you both simplifications. In other words I don't think you'd get a nicer expression back by setting the simplification domain to real before `simplify_rational()` than you would by calling the two in succession.



---

archive/issue_comments_179891.json:
```json
{
    "body": "<a id='comment:6'></a>\nWell I'd say this feels like mixing different concepts. The log, radical, etc. are about the form of the expression that's going to be transformed, whereas the domain is about the values the variables in the expression may take.\n\nYou're right that sometimes the application of simplifications in different order yields different results. But I find this rather annoying (not that I know how to fix it). By adding even more functions to the mix we make this situation even worse. \n\nI usually use simplify_full(). So as I understand it I'd always need to call simplify_full() and simplify_real() in some order to benefit from the knowledge about the domain.\n\nAnd then I'm still left wondering if there are simplifications in simplify_full() hat could benefit from this knowledge too, but didn't get it because there's only simplify_real() and not simplify_full_real().\n\nIs there a list of which simplify_* function could use this domain parameter?",
    "created_at": "2013-05-30T19:38:24Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179891",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:6'></a>
Well I'd say this feels like mixing different concepts. The log, radical, etc. are about the form of the expression that's going to be transformed, whereas the domain is about the values the variables in the expression may take.

You're right that sometimes the application of simplifications in different order yields different results. But I find this rather annoying (not that I know how to fix it). By adding even more functions to the mix we make this situation even worse. 

I usually use simplify_full(). So as I understand it I'd always need to call simplify_full() and simplify_real() in some order to benefit from the knowledge about the domain.

And then I'm still left wondering if there are simplifications in simplify_full() hat could benefit from this knowledge too, but didn't get it because there's only simplify_real() and not simplify_full_real().

Is there a list of which simplify_* function could use this domain parameter?



---

archive/issue_comments_179892.json:
```json
{
    "body": "<a id='comment:7'></a>\nInstead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?\n\nExample use would be:\n\n```\nsage: t = sqrt(x^2)\nsage: t.simplify()\nsqrt(x^2)\nsage: with maxima_domain(RR):\n....:    u = t.simplify()\n....:\nsage: u\nabs(x)\nsage: t.simplify()\nsqrt(x^2)\n```",
    "created_at": "2013-05-30T19:57:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179892",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'></a>
Instead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?

Example use would be:

```
sage: t = sqrt(x^2)
sage: t.simplify()
sqrt(x^2)
sage: with maxima_domain(RR):
....:    u = t.simplify()
....:
sage: u
abs(x)
sage: t.simplify()
sqrt(x^2)
```



---

archive/issue_comments_179893.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [sluther](#comment%3A6):\n\nAll of the `simplify_foo()` functions except `simplify_radical()` could benefit from it. There are only a small number of subexpressions that can be simplified by `simplify_real()`, and I think only `simplify_radical()` will \"simplify\" out those subexpressions making `simplify_real()` redundant.\n\nThe `simplify_radical()` method will change the expression `sqrt(x^2)` to either `x` or `-x` \"consistently but arbitrarily.\". This is not really a simplification, since it gives the wrong answer in the default case, so beware using `simplify_full()`. All of the rest could be combined with `simplify_real()` in some way.",
    "created_at": "2013-06-04T02:51:15Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179893",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:8'></a>
Replying to [sluther](#comment%3A6):

All of the `simplify_foo()` functions except `simplify_radical()` could benefit from it. There are only a small number of subexpressions that can be simplified by `simplify_real()`, and I think only `simplify_radical()` will "simplify" out those subexpressions making `simplify_real()` redundant.

The `simplify_radical()` method will change the expression `sqrt(x^2)` to either `x` or `-x` "consistently but arbitrarily.". This is not really a simplification, since it gives the wrong answer in the default case, so beware using `simplify_full()`. All of the rest could be combined with `simplify_real()` in some way.



---

archive/issue_comments_179894.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [burcin](#comment%3A7):\n> Instead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?\n> \n> Example use would be:\n> \n> ```\n> sage: t = sqrt(x^2)\n> sage: t.simplify()\n> sqrt(x^2)\n> sage: with maxima_domain(RR):\n> ....:    u = t.simplify()\n> ....:\n> sage: u\n> abs(x)\n> sage: t.simplify()\n> sqrt(x^2)\n> ```\n\n\nThis is way better than what we currently have to do:\n\n```\nsage: maxima_lib.eval('domain: real;')\n'real'\nsage: (sqrt(x^2)).simplify()\nabs(x)\nsage: maxima_lib.eval('domain: complex;')\n'complex'\n```\n\nbut still does two things undesirably:\n\n1. The user has to know about the maxima_domain() call, and there's no easy way to find out about it. This is in contrast with `x.<tab>` \"what can I do with this expression?\"\n\n2. It ties the simplification to the maxima backend. If we ever want to use sympy or some other backend, we're going to have a mess.",
    "created_at": "2013-06-04T02:56:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179894",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:9'></a>
Replying to [burcin](#comment%3A7):
> Instead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?
> 
> Example use would be:
> 
> ```
> sage: t = sqrt(x^2)
> sage: t.simplify()
> sqrt(x^2)
> sage: with maxima_domain(RR):
> ....:    u = t.simplify()
> ....:
> sage: u
> abs(x)
> sage: t.simplify()
> sqrt(x^2)
> ```


This is way better than what we currently have to do:

```
sage: maxima_lib.eval('domain: real;')
'real'
sage: (sqrt(x^2)).simplify()
abs(x)
sage: maxima_lib.eval('domain: complex;')
'complex'
```

but still does two things undesirably:

1. The user has to know about the maxima_domain() call, and there's no easy way to find out about it. This is in contrast with `x.<tab>` "what can I do with this expression?"

2. It ties the simplification to the maxima backend. If we ever want to use sympy or some other backend, we're going to have a mess.



---

archive/issue_events_127487.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127487"
}
```



---

archive/issue_events_127488.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127488"
}
```



---

archive/issue_comments_179895.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [burcin](#comment%3A7):\n> Instead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?\n\n\nYou'd need to document that the user of the context manager should make sure to not relinquish control inside the context manager. Thanks to \"yield\" in python, lexical enclosure doesn't necessarily mean runtime enclosure.",
    "created_at": "2013-08-23T16:23:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179895",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:11'></a>
Replying to [burcin](#comment%3A7):
> Instead of adding a new function `simplify_real()` or a `domain` parameter to the existing functions, can we use a context manager instead?


You'd need to document that the user of the context manager should make sure to not relinquish control inside the context manager. Thanks to "yield" in python, lexical enclosure doesn't necessarily mean runtime enclosure.



---

archive/issue_events_127489.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127489"
}
```



---

archive/issue_events_127490.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127490"
}
```



---

archive/issue_events_127491.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127491"
}
```



---

archive/issue_events_127492.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127492"
}
```



---

archive/issue_events_127493.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127493"
}
```



---

archive/issue_events_127494.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127494"
}
```



---

archive/issue_comments_179896.json:
```json
{
    "body": "<a id='comment:15'></a>\nI think the form/domain-simplify design issue has not been resolved and should be discussed/decided first: the/an author may benefit from presenting a solution to sage-devel, and if the crowd has no opinion then it should be implemented. Thus, I'm setting to needs_info.",
    "created_at": "2014-11-02T09:05:57Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179896",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>
I think the form/domain-simplify design issue has not been resolved and should be discussed/decided first: the/an author may benefit from presenting a solution to sage-devel, and if the crowd has no opinion then it should be implemented. Thus, I'm setting to needs_info.



---

archive/issue_events_127495.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-11-02T09:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127495"
}
```



---

archive/issue_events_127496.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-11-02T09:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127496"
}
```



---

archive/issue_comments_179897.json:
```json
{
    "body": "**Commit:** [24cc55466abd2f02a9187186364fb4373d7900e9](https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9)",
    "created_at": "2014-11-05T19:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179897",
    "user": "https://github.com/orlitzky"
}
```

**Commit:** [24cc55466abd2f02a9187186364fb4373d7900e9](https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9)



---

archive/issue_comments_179898.json:
```json
{
    "body": "<a id='comment:17'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9\">24cc554</a></td><td><code>Trac #14630: Add Expression.simplify_real() method.</code></td></tr></table>\n",
    "created_at": "2014-11-05T19:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179898",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:17'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9">24cc554</a></td><td><code>Trac #14630: Add Expression.simplify_real() method.</code></td></tr></table>




---

archive/issue_comments_179899.json:
```json
{
    "body": "**Branch:** [u/mjo/ticket/14630](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/14630)",
    "created_at": "2014-11-05T19:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179899",
    "user": "https://github.com/orlitzky"
}
```

**Branch:** [u/mjo/ticket/14630](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/14630)



---

archive/issue_comments_179900.json:
```json
{
    "body": "<a id='comment:18'></a>\nThis seems fine, given that it is extremely unlikely a context manager will appear and that having many options seems undesirable.  However, if someone gets a sage-devel discussion on this going I'm not going to stop them.\n\n```\nsage: A = e^(sqrt(x^2))\nsage: A\ne^(sqrt(x^2))\nsage: A.simplify_real()\ne^abs(x)\n```\nI was pleased this worked, wasn't sure how much it would do.  Maybe the following would be a useful test to show what it does and doesn't do.\n\n```\nsage: var('y z')\n(y, z)\nsage: A = e^(sqrt(x^2)+sqrt(y^2)+sqrt(i*z^2))\nsage: A.simplify_real()\ne^((-1)^(1/4)*abs(z) + abs(x) + abs(y))\n```\nHere's another one that, again, pleasantly works as one would think.\n\n```\nsage: C = (x^2+y^2).imag()\nsage: C\n2*imag_part(x)*real_part(x) + 2*imag_part(y)*real_part(y)\nsage: C.simplify_real()\n0\n```\nNow if only we *had* to use this for the following simplification!\n\n```\nsage: B = conjugate(z)\nsage: B.simplify_real()\nz\nsage: B.simplify()  # wa-wa \"you lose\" noise - #6862\nz\n```",
    "created_at": "2014-11-18T03:35:06Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179900",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
This seems fine, given that it is extremely unlikely a context manager will appear and that having many options seems undesirable.  However, if someone gets a sage-devel discussion on this going I'm not going to stop them.

```
sage: A = e^(sqrt(x^2))
sage: A
e^(sqrt(x^2))
sage: A.simplify_real()
e^abs(x)
```
I was pleased this worked, wasn't sure how much it would do.  Maybe the following would be a useful test to show what it does and doesn't do.

```
sage: var('y z')
(y, z)
sage: A = e^(sqrt(x^2)+sqrt(y^2)+sqrt(i*z^2))
sage: A.simplify_real()
e^((-1)^(1/4)*abs(z) + abs(x) + abs(y))
```
Here's another one that, again, pleasantly works as one would think.

```
sage: C = (x^2+y^2).imag()
sage: C
2*imag_part(x)*real_part(x) + 2*imag_part(y)*real_part(y)
sage: C.simplify_real()
0
```
Now if only we *had* to use this for the following simplification!

```
sage: B = conjugate(z)
sage: B.simplify_real()
z
sage: B.simplify()  # wa-wa "you lose" noise - #6862
z
```



---

archive/issue_comments_179901.json:
```json
{
    "body": "<a id='comment:19'></a>\nAlso note this probably conflicts slightly with #11912.",
    "created_at": "2014-11-18T03:38:54Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179901",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Also note this probably conflicts slightly with #11912.



---

archive/issue_comments_179902.json:
```json
{
    "body": "<a id='comment:20'></a>\nJust making a note to myself here to update all of the \"see also\" references in the other `simplify_*` methods. We should mention `simplify_real()`, `simplify_rectform()`, and any other new similar methods.",
    "created_at": "2014-11-18T16:57:45Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179902",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:20'></a>
Just making a note to myself here to update all of the "see also" references in the other `simplify_*` methods. We should mention `simplify_real()`, `simplify_rectform()`, and any other new similar methods.



---

archive/issue_comments_179903.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f34ddfc2e47508ebc2323e347739f18000c15717\">f34ddfc</a></td><td><code>Trac #11912: Rename and deprecate Expression.simplify_radical().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d50b886561b9cc98585749b6292eaba269da73c\">2d50b88</a></td><td><code>Trac #11912, Trac #3520: Add numerical integral example.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5ab33994355520f0f27914f73f1680292eadc3d\">e5ab339</a></td><td><code>Trac #11912 (review): Remove superfluous documentation paragraph.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d24f4c71b07beef87cc6b27df7f7cc37c29071e\">5d24f4c</a></td><td><code>Trac #11912 (review): Add canonicalize_radical() to the \"see also\" list for Expression.simplify().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3\">612f8ed</a></td><td><code>Trac #14630: Add Expression.simplify_real() method.</code></td></tr></table>\n",
    "created_at": "2014-11-22T14:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f34ddfc2e47508ebc2323e347739f18000c15717">f34ddfc</a></td><td><code>Trac #11912: Rename and deprecate Expression.simplify_radical().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d50b886561b9cc98585749b6292eaba269da73c">2d50b88</a></td><td><code>Trac #11912, Trac #3520: Add numerical integral example.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5ab33994355520f0f27914f73f1680292eadc3d">e5ab339</a></td><td><code>Trac #11912 (review): Remove superfluous documentation paragraph.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d24f4c71b07beef87cc6b27df7f7cc37c29071e">5d24f4c</a></td><td><code>Trac #11912 (review): Add canonicalize_radical() to the "see also" list for Expression.simplify().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3">612f8ed</a></td><td><code>Trac #14630: Add Expression.simplify_real() method.</code></td></tr></table>




---

archive/issue_comments_179904.json:
```json
{
    "body": "**Changing commit** from \"[24cc55466abd2f02a9187186364fb4373d7900e9](https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9)\" to \"[612f8ede28c281e6e5f4bb0e3864ca35ff3906c3](https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3)\".",
    "created_at": "2014-11-22T14:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[24cc55466abd2f02a9187186364fb4373d7900e9](https://github.com/sagemath/sagetrac-mirror/commit/24cc55466abd2f02a9187186364fb4373d7900e9)" to "[612f8ede28c281e6e5f4bb0e3864ca35ff3906c3](https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3)".



---

archive/issue_comments_179905.json:
```json
{
    "body": "<a id='comment:22'></a>\nI just force-pushed a branch that's rebased on top of #11912 because of a conflict. That one has a positive review, so I guess when it's merged I could rebase this on top of the develop branch? Not sure what's easiest for the release manager.",
    "created_at": "2014-11-22T15:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179905",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:22'></a>
I just force-pushed a branch that's rebased on top of #11912 because of a conflict. That one has a positive review, so I guess when it's merged I could rebase this on top of the develop branch? Not sure what's easiest for the release manager.



---

archive/issue_events_127497.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2014-11-22T15:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127497"
}
```



---

archive/issue_events_127498.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2014-11-22T15:00:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127498"
}
```



---

archive/issue_comments_179906.json:
```json
{
    "body": "**Dependencies:** #11912",
    "created_at": "2014-11-22T15:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179906",
    "user": "https://github.com/orlitzky"
}
```

**Dependencies:** #11912



---

archive/issue_comments_179907.json:
```json
{
    "body": "**Changing commit** from \"[612f8ede28c281e6e5f4bb0e3864ca35ff3906c3](https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3)\" to \"[649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)\".",
    "created_at": "2014-11-22T15:09:16Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[612f8ede28c281e6e5f4bb0e3864ca35ff3906c3](https://github.com/sagemath/sagetrac-mirror/commit/612f8ede28c281e6e5f4bb0e3864ca35ff3906c3)" to "[649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)".



---

archive/issue_comments_179908.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09\">649e3b3</a></td><td><code>Trac #14630: Add Expression.simplify_hypergeometric() to the \"see also\" list for Expression.simplify().</code></td></tr></table>\n",
    "created_at": "2014-11-22T15:09:16Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09">649e3b3</a></td><td><code>Trac #14630: Add Expression.simplify_hypergeometric() to the "see also" list for Expression.simplify().</code></td></tr></table>




---

archive/issue_comments_179909.json:
```json
{
    "body": "<a id='comment:24'></a>\nAnd per my note, I've included another left-out function in the `simplify()` \"see also\" list.",
    "created_at": "2014-11-22T15:10:11Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179909",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:24'></a>
And per my note, I've included another left-out function in the `simplify()` "see also" list.



---

archive/issue_comments_179910.json:
```json
{
    "body": "<a id='comment:25'></a>\nI think it is fine now and certainly should be included, test pass in `expression.pyx`.",
    "created_at": "2014-12-12T16:38:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179910",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>
I think it is fine now and certainly should be included, test pass in `expression.pyx`.



---

archive/issue_comments_179911.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman, Ralf Stephan",
    "created_at": "2014-12-12T16:38:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179911",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Karl-Dieter Crisman, Ralf Stephan



---

archive/issue_events_127499.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-12T16:38:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127499"
}
```



---

archive/issue_events_127500.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-12T16:38:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127500"
}
```



---

archive/issue_comments_179912.json:
```json
{
    "body": "**Changing branch** from \"[u/mjo/ticket/14630](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/14630)\" to \"[649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)\".",
    "created_at": "2014-12-15T17:50:53Z",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14630#issuecomment-179912",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mjo/ticket/14630](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/14630)" to "[649e3b3eece6daea3d3c043d2034f3416a85fb09](https://github.com/sagemath/sagetrac-mirror/commit/649e3b3eece6daea3d3c043d2034f3416a85fb09)".



---

archive/issue_events_127501.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-15T17:50:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127501"
}
```



---

archive/issue_events_127502.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-15T17:50:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14630",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14630#event-127502"
}
```
