# Issue 14775: Symmetric functions: Kronecker product over any ring; Kronecker coproduct; antipode over any ring; forgotten basis over any ring; Witt basis; Frobenius and Verschiebung; doc fixes

archive/issues_014571.json:
```json
{
    "body": "This ticket does the following:\n\n1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.\n\n2. The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.\n\n3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.\n\n4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. Our duality methods use the powersum basis, again leading to errors for ground rings not being QQ-algebras.\n\n5. The Witt symmetric functions form another basis of Symm. Implement them.\n\n6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.\n\nApply:\n\n* [attachment:trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)\n\n**Assignee:** sage-combinat\n\n**CC:**  @zabrocki @anneschilling @tscrim @nthiery @hivert sage-combinat @mwhansen\n\n**Keywords:** symmetric function, combinat, kronecker product, days49\n\n**Reviewer:** Travis Scrimshaw, Mike Zabrocki\n\n**Author:** Darij Grinberg\n\n**Merged:** sage-5.12.beta4\n\nIssue created by migration from https://trac.sagemath.org/ticket/14775\n\n",
    "closed_at": "2013-08-28T06:53:11Z",
    "created_at": "2013-06-19T10:42:31Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "title": "Symmetric functions: Kronecker product over any ring; Kronecker coproduct; antipode over any ring; forgotten basis over any ring; Witt basis; Frobenius and Verschiebung; doc fixes",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/14775",
    "user": "https://github.com/darijgr"
}
```
This ticket does the following:

1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.

2. The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.

3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.

4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. Our duality methods use the powersum basis, again leading to errors for ground rings not being QQ-algebras.

5. The Witt symmetric functions form another basis of Symm. Implement them.

6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.

Apply:

* [attachment:trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)

**Assignee:** sage-combinat

**CC:**  @zabrocki @anneschilling @tscrim @nthiery @hivert sage-combinat @mwhansen

**Keywords:** symmetric function, combinat, kronecker product, days49

**Reviewer:** Travis Scrimshaw, Mike Zabrocki

**Author:** Darij Grinberg

**Merged:** sage-5.12.beta4

Issue created by migration from https://trac.sagemath.org/ticket/14775





---

archive/issue_events_129265.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-19T10:44:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "component: combinatorics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129265"
}
```



---

archive/issue_comments_182696.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"symmetric function, combinat, kronecker product\".",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182696",
    "user": "https://github.com/darijgr"
}
```

**Changing keywords** from "" to "symmetric function, combinat, kronecker product".



---

archive/issue_comments_182697.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Will supply description in half an hour.\n+\n+\"extend\" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.\n``````\n",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182697",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Will supply description in half an hour.
+
+"extend" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.
``````




---

archive/issue_events_129266.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-19T10:44:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129266"
}
```



---

archive/issue_comments_182698.json:
```json
{
    "body": "**Assignee:** sage-combinat",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182698",
    "user": "https://github.com/darijgr"
}
```

**Assignee:** sage-combinat



---

archive/issue_comments_182699.json:
```json
{
    "body": "**Author:** Darij Grinberg",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182699",
    "user": "https://github.com/darijgr"
}
```

**Author:** Darij Grinberg



---

archive/issue_comments_182700.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Will supply description in half an hour.\n \n \"extend\" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.\n+\n+I'd love someone to check the hacks used in the current file (even if it's far from complete -- it only attempts to implement the Kronecker product over any base ring) and tell me which of them are bad before I spread them into other functions.\n``````\n",
    "created_at": "2013-06-19T10:45:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182700",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Will supply description in half an hour.
 
 "extend" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.
+
+I'd love someone to check the hacks used in the current file (even if it's far from complete -- it only attempts to implement the Kronecker product over any base ring) and tell me which of them are bad before I spread them into other functions.
``````




---

archive/issue_comments_182701.json:
```json
{
    "body": "**Changing keywords** from \"symmetric function, combinat, kronecker product\" to \"symmetric function, combinat, kronecker product, days49\".",
    "created_at": "2013-06-19T10:45:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182701",
    "user": "https://github.com/darijgr"
}
```

**Changing keywords** from "symmetric function, combinat, kronecker product" to "symmetric function, combinat, kronecker product, days49".



---

archive/issue_comments_182702.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,11 @@\n-Will supply description in half an hour.\n+Goals for this ticket:\n \n-\"extend\" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.\n+- The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.\n \n-I'd love someone to check the hacks used in the current file (even if it's far from complete -- it only attempts to implement the Kronecker product over any base ring) and tell me which of them are bad before I spread them into other functions.\n+- The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.\n+\n+- The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.\n+\n+- The Witt symmetric functions form another basis of Symm. Implement them.\n+\n+The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?\n``````\n",
    "created_at": "2013-06-19T12:19:24Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182702",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,11 @@
-Will supply description in half an hour.
+Goals for this ticket:
 
-"extend" == The current version only works when the ground ring is an algebra over the rationals, whereas mathematically this is not necessary.
+- The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.
 
-I'd love someone to check the hacks used in the current file (even if it's far from complete -- it only attempts to implement the Kronecker product over any base ring) and tell me which of them are bad before I spread them into other functions.
+- The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.
+
+- The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.
+
+- The Witt symmetric functions form another basis of Symm. Implement them.
+
+The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?
``````




---

archive/issue_comments_182703.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,13 @@\n Goals for this ticket:\n \n-- The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.\n+1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.\n \n-- The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.\n+2. The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.\n \n-- The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.\n+3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.\n \n-- The Witt symmetric functions form another basis of Symm. Implement them.\n+4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.\n+\n+5. The Witt symmetric functions form another basis of Symm. Implement them.\n \n The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?\n``````\n",
    "created_at": "2013-06-19T14:08:43Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182703",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,13 @@
 Goals for this ticket:
 
-- The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.
+1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.
 
-- The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.
+2. The Kronecker coproduct on the ring of symmetric function has to be implemented. Implement it.
 
-- The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.
+3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.
 
-- The Witt symmetric functions form another basis of Symm. Implement them.
+4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.
+
+5. The Witt symmetric functions form another basis of Symm. Implement them.
 
 The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?
``````




---

archive/issue_events_129267.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-19T14:08:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "rename": {
        "from": "Symmetric functions: extending Kronecker product, implementing Kronecker product, extending forgotten basis, implementing Witt basis",
        "to": "Symmetric functions: extending Kronecker product, implementing Kronecker product, extending antipode, extending forgotten basis, implementing Witt basis"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129267"
}
```



---

archive/issue_comments_182704.json:
```json
{
    "body": "<a id='comment:5'></a>\n3 is done. Anyone has a better name than `degree_negation` for the algebra automorphism of ``SymmetricFunctions`` which acts as 1 in even degrees and 0 in odd ones?\n\nThe changes in the antipode method not only made it work over any rings, but also sped it up on each basis except for the powersum one (and the monomial one, but I improved that with a trivial fix):\n\nTest suite:\n\n```\ndef testall():\n    Sym = SymmetricFunctions(QQ)\n    print \"m\"\n    timeit(\"SymmetricFunctions(QQ).m()([4,3,2]).antipode()\")\n    print \"h\"\n    timeit(\"SymmetricFunctions(QQ).h()([4,3,2]).antipode()\")\n    print \"e\"\n    timeit(\"SymmetricFunctions(QQ).e()([4,3,2]).antipode()\")\n    print \"s\"\n    timeit(\"SymmetricFunctions(QQ).s()([4,3,2]).antipode()\")\n    print \"p\"\n    timeit(\"SymmetricFunctions(QQ).p()([4,3,2]).antipode()\")\n```\n\nResults:\n\n```\noriginal version:\n\nsage: testall()\nm\n125 loops, best of 3: 1.86 ms per loop\nh\n25 loops, best of 3: 10.8 ms per loop\ne\n25 loops, best of 3: 10.8 ms per loop\ns\n25 loops, best of 3: 30.6 ms per loop\np\n625 loops, best of 3: 146 \u00b5s per loop\n\nafter change of generic antipode to go via omega rather than via coercion to powersum basis:\n\nsage: testall()\nm\n125 loops, best of 3: 2.16 ms per loop\nh\n125 loops, best of 3: 2.92 ms per loop\ne\n125 loops, best of 3: 2.92 ms per loop\ns\n625 loops, best of 3: 250 \u00b5s per loop\np\n625 loops, best of 3: 148 \u00b5s per loop\n\nafter microoptimization in the antipode of powersum (replacing (-1)**blah by case distinction):\n\nsage: testall()             \nm\n125 loops, best of 3: 1.79 ms per loop\nh\n125 loops, best of 3: 2.88 ms per loop\ne\n125 loops, best of 3: 2.95 ms per loop\ns\n625 loops, best of 3: 252 \u00b5s per loop\np\n625 loops, best of 3: 113 \u00b5s per loop\n```",
    "created_at": "2013-06-20T08:35:13Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182704",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>
3 is done. Anyone has a better name than `degree_negation` for the algebra automorphism of ``SymmetricFunctions`` which acts as 1 in even degrees and 0 in odd ones?

The changes in the antipode method not only made it work over any rings, but also sped it up on each basis except for the powersum one (and the monomial one, but I improved that with a trivial fix):

Test suite:

```
def testall():
    Sym = SymmetricFunctions(QQ)
    print "m"
    timeit("SymmetricFunctions(QQ).m()([4,3,2]).antipode()")
    print "h"
    timeit("SymmetricFunctions(QQ).h()([4,3,2]).antipode()")
    print "e"
    timeit("SymmetricFunctions(QQ).e()([4,3,2]).antipode()")
    print "s"
    timeit("SymmetricFunctions(QQ).s()([4,3,2]).antipode()")
    print "p"
    timeit("SymmetricFunctions(QQ).p()([4,3,2]).antipode()")
```

Results:

```
original version:

sage: testall()
m
125 loops, best of 3: 1.86 ms per loop
h
25 loops, best of 3: 10.8 ms per loop
e
25 loops, best of 3: 10.8 ms per loop
s
25 loops, best of 3: 30.6 ms per loop
p
625 loops, best of 3: 146 µs per loop

after change of generic antipode to go via omega rather than via coercion to powersum basis:

sage: testall()
m
125 loops, best of 3: 2.16 ms per loop
h
125 loops, best of 3: 2.92 ms per loop
e
125 loops, best of 3: 2.92 ms per loop
s
625 loops, best of 3: 250 µs per loop
p
625 loops, best of 3: 148 µs per loop

after microoptimization in the antipode of powersum (replacing (-1)**blah by case distinction):

sage: testall()             
m
125 loops, best of 3: 1.79 ms per loop
h
125 loops, best of 3: 2.88 ms per loop
e
125 loops, best of 3: 2.95 ms per loop
s
625 loops, best of 3: 252 µs per loop
p
625 loops, best of 3: 113 µs per loop
```



---

archive/issue_comments_182705.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n 3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.\n \n-4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.\n+4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. Our duality methods use the powersum basis, again leading to errors for ground rings not being QQ-algebras.\n \n 5. The Witt symmetric functions form another basis of Symm. Implement them.\n \n``````\n",
    "created_at": "2013-06-21T08:40:57Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182705",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 3. The antipode on the ring of symmetric functions uses coercion into the powersum basis. This means it, too, is not getting computed over arbitrary base rings. Fix this.
 
-4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. As a consequence, it cannot be computed when the ground ring is not a field. This might be easily fixable or not depending on how smart our dual basis methods are; either way, fix it.
+4. The forgotten basis of Symm is defined by duality rather than by explicit formulas. Our duality methods use the powersum basis, again leading to errors for ground rings not being QQ-algebras.
 
 5. The Witt symmetric functions form another basis of Symm. Implement them.
 
``````




---

archive/attachments_020546.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "forgotten-speed-reg1",
    "asset_url": "tarball://root/attachments/ticket14775/forgotten-speed-reg1",
    "created_at": "2013-06-21T15:07:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg1",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182706.json:
```json
{
    "body": "**Attachment:** [forgotten-speed-reg1](https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg1)\n\nspeed tests before and after goal 4 implementation on partition [4,3,2]",
    "created_at": "2013-06-21T15:07:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182706",
    "user": "https://github.com/darijgr"
}
```

**Attachment:** [forgotten-speed-reg1](https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg1)

speed tests before and after goal 4 implementation on partition [4,3,2]



---

archive/issue_comments_182707.json:
```json
{
    "body": "speed tests before and after goal 4 implementation on partition [4,3,2,2]",
    "created_at": "2013-06-21T15:07:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182707",
    "user": "https://github.com/darijgr"
}
```

speed tests before and after goal 4 implementation on partition [4,3,2,2]



---

archive/attachments_020547.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "forgotten-speed-reg2",
    "asset_url": "tarball://root/attachments/ticket14775/forgotten-speed-reg2",
    "created_at": "2013-06-21T15:09:59Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg2",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182708.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Attachment:** [forgotten-speed-reg2](https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg2)\n\nNew version up, with forgotten functions working over every base ring. I've attached two files which show some timings for conversions from and to f. The times over a base ring which is a QQ-algebra have become a tad worse, although probably not significantly (what are our criteria for that?). The times over a base ring which is a QQ-algebra differ significantly from those over a base ring which is not, although not in a sufficiently consistent way for me to prefer one method over the other.\n\nIn other news, this patch has profited much from input by Nicolas Thiery, Mike Zabrocki, Florent Hivert and Simon King. Thank you!",
    "created_at": "2013-06-21T15:09:59Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182708",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>
**Attachment:** [forgotten-speed-reg2](https://github.com/sagemath/sage/files/ticket14775/forgotten-speed-reg2)

New version up, with forgotten functions working over every base ring. I've attached two files which show some timings for conversions from and to f. The times over a base ring which is a QQ-algebra have become a tad worse, although probably not significantly (what are our criteria for that?). The times over a base ring which is a QQ-algebra differ significantly from those over a base ring which is not, although not in a sufficiently consistent way for me to prefer one method over the other.

In other news, this patch has profited much from input by Nicolas Thiery, Mike Zabrocki, Florent Hivert and Simon King. Thank you!



---

archive/issue_comments_182709.json:
```json
{
    "body": "backup version, implementing goals 1, 2, 3, 4 of 5",
    "created_at": "2013-06-21T23:38:00Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182709",
    "user": "https://github.com/darijgr"
}
```

backup version, implementing goals 1, 2, 3, 4 of 5



---

archive/attachments_020548.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "kronecker-on-Sym.patch",
    "asset_url": "tarball://root/attachments/ticket14775/kronecker-on-Sym.patch",
    "created_at": "2013-06-21T23:45:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/kronecker-on-Sym.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182710.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Attachment:** [kronecker-on-Sym.patch](https://github.com/sagemath/sage/files/ticket14775/kronecker-on-Sym.patch)\n\nIf anyone could comment on my `witt.py` file in [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch), I'd be much indebted (while the coercions seem to work, my understanding of OOP is still very fragmentary and I wouldn't be surprised if some of what I've done is bad practice). I am going to add more doctests, implement coercions/conversions to power sums and elementary symmetrics. (And if I really have too much time on my hand, I'll add Frobenius and Verschiebung maps.)",
    "created_at": "2013-06-21T23:45:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182710",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>
**Attachment:** [kronecker-on-Sym.patch](https://github.com/sagemath/sage/files/ticket14775/kronecker-on-Sym.patch)

If anyone could comment on my `witt.py` file in [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch), I'd be much indebted (while the coercions seem to work, my understanding of OOP is still very fragmentary and I wouldn't be surprised if some of what I've done is bad practice). I am going to add more doctests, implement coercions/conversions to power sums and elementary symmetrics. (And if I really have too much time on my hand, I'll add Frobenius and Verschiebung maps.)



---

archive/issue_comments_182711.json:
```json
{
    "body": "<a id='comment:9'></a>\nWhile there are good formulas for the h, e, p bases in terms of the w bases, as well as not-too-slow algorithms for the w basis in terms of the h, e, p bases (basically by inverting the formulas just mentioned), I am not sure which of them I should implement. Right now I have implemented h-to-w and w-to-h, declaring them as coercions, and p-to-w. The h-to-w and w-to-h coercions use a cache like the ones in `dual.py`. Now I need guidance on the following:\n\n1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.\n\n2) If I implement these maps, should I register them as coersions? (This would normally make sense, but I fear they could significantly slow down coercions between standard classical bases because of the asinine way the current system generates coercion paths.)",
    "created_at": "2013-06-22T12:41:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182711",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:9'></a>
While there are good formulas for the h, e, p bases in terms of the w bases, as well as not-too-slow algorithms for the w basis in terms of the h, e, p bases (basically by inverting the formulas just mentioned), I am not sure which of them I should implement. Right now I have implemented h-to-w and w-to-h, declaring them as coercions, and p-to-w. The h-to-w and w-to-h coercions use a cache like the ones in `dual.py`. Now I need guidance on the following:

1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.

2) If I implement these maps, should I register them as coersions? (This would normally make sense, but I fear they could significantly slow down coercions between standard classical bases because of the asinine way the current system generates coercion paths.)



---

archive/issue_events_129268.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-22T12:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129268"
}
```



---

archive/issue_comments_182712.json:
```json
{
    "body": "<a id='comment:11'></a>\nHi Darij,\n\nCould you run some benchmarks to check what happens when you implement and register the above mentioned coercions?\n\nAnne",
    "created_at": "2013-06-22T12:54:42Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182712",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:11'></a>
Hi Darij,

Could you run some benchmarks to check what happens when you implement and register the above mentioned coercions?

Anne



---

archive/issue_comments_182713.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [darij](#comment%3A9):\n> 1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.\n\nOnly practice will tell, and you'll probably be the one putting this\nmost to practice; I'd say don't cache for now, and see later if\nyou need it.\n\nAnd at some point in the future we would want a mechanism that would\nallow the user to specify which caches he want to use for his own\npreferred application.\n\n> 2) If I implement these maps, should I register them as coersions?\n> (This would normally make sense, but I fear they could significantly\n> slow down coercions between standard classical bases because of the\n> asinine way the current system generates coercion paths.)\n\nGo ahead. For most classical basis, Symmetrica provides a direct\nconversion, and when there is one the coercion system is not as stupid\nas using his depth first search :-)\n\nIn any case, if something would need to be fixed, it's the coercion\nsystem, not the usage of coercions as above.\n\nCheers,\n                              Nicolas",
    "created_at": "2013-06-22T13:28:40Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182713",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'></a>
Replying to [darij](#comment%3A9):
> 1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.

Only practice will tell, and you'll probably be the one putting this
most to practice; I'd say don't cache for now, and see later if
you need it.

And at some point in the future we would want a mechanism that would
allow the user to specify which caches he want to use for his own
preferred application.

> 2) If I implement these maps, should I register them as coersions?
> (This would normally make sense, but I fear they could significantly
> slow down coercions between standard classical bases because of the
> asinine way the current system generates coercion paths.)

Go ahead. For most classical basis, Symmetrica provides a direct
conversion, and when there is one the coercion system is not as stupid
as using his depth first search :-)

In any case, if something would need to be fixed, it's the coercion
system, not the usage of coercions as above.

Cheers,
                              Nicolas



---

archive/issue_comments_182714.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,4 +10,6 @@\n \n 5. The Witt symmetric functions form another basis of Symm. Implement them.\n \n+6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.\n+\n The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?\n``````\n",
    "created_at": "2013-06-25T23:17:40Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182714",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,4 +10,6 @@
 
 5. The Witt symmetric functions form another basis of Symm. Implement them.
 
+6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.
+
 The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?
``````




---

archive/issue_comments_182715.json:
```json
{
    "body": "<a id='comment:13'></a>\nUploading a new version, mostly with docstring fixes. Thanks for your replies, Anne and Nicolas; I'll work on this shortly (haven't returned to the Witt symmetric functions yet).",
    "created_at": "2013-06-25T23:17:40Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182715",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>
Uploading a new version, mostly with docstring fixes. Thanks for your replies, Anne and Nicolas; I'll work on this shortly (haven't returned to the Witt symmetric functions yet).



---

archive/issue_events_129269.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-28T22:23:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129269"
}
```



---

archive/issue_events_129270.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-28T22:23:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129270"
}
```



---

archive/issue_comments_182716.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Goals for this ticket:\n+This ticket does the following:\n \n 1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.\n \n@@ -12,4 +12,4 @@\n \n 6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.\n \n-The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?\n+* Apply: [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)\n``````\n",
    "created_at": "2013-06-28T22:23:31Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182716",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Goals for this ticket:
+This ticket does the following:
 
 1. The current version of itensor (the Kronecker product on the ring of symmetric function) only works when the ground ring is an algebra over the rationals. This is not a mathematically reasonable restriction. Fix this.
 
@@ -12,4 +12,4 @@
 
 6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.
 
-The current file has the first goal achieved, but it uses some sly hacks. Can anyone tell me which of them are bad before I spread them into other functions (particularly for the second goal)?
+* Apply: [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)
``````




---

archive/issue_comments_182717.json:
```json
{
    "body": "<a id='comment:15'></a>\nDone!\n\n`@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.\n\nIn other news, this patch probably conflicts with every other patch that edits symmetric functions -- sorry.",
    "created_at": "2013-06-28T22:27:02Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182717",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>
Done!

`@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.

In other news, this patch probably conflicts with every other patch that edits symmetric functions -- sorry.



---

archive/issue_events_129271.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-28T22:33:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "rename": {
        "from": "Symmetric functions: extending Kronecker product, implementing Kronecker product, extending antipode, extending forgotten basis, implementing Witt basis",
        "to": "Symmetric functions: Kronecker product over any ring; Kronecker coproduct; antipode over any ring; forgotten basis over any ring; Witt basis; Frobenius and Verschiebung; doc fixes"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129271"
}
```



---

archive/issue_comments_182718.json:
```json
{
    "body": "Finished; please review!",
    "created_at": "2013-06-29T07:37:03Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182718",
    "user": "https://github.com/darijgr"
}
```

Finished; please review!



---

archive/attachments_020549.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-symmetric_functions_extended-dg.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-symmetric_functions_extended-dg.patch",
    "created_at": "2013-06-29T07:37:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182719.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Attachment:** [trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)\n\nIf you are wondering about the latest change: I removed an obsolete TODO which was already done. Sorry for that being in the patch in the first place.",
    "created_at": "2013-06-29T07:37:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182719",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>
**Attachment:** [trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)

If you are wondering about the latest change: I removed an obsolete TODO which was already done. Sorry for that being in the patch in the first place.



---

archive/issue_comments_182720.json:
```json
{
    "body": "<a id='comment:18'></a>\n> `@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.\n\nDarij, could you post the results of your benchmarks?",
    "created_at": "2013-07-02T06:08:56Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182720",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:18'></a>
> `@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.

Darij, could you post the results of your benchmarks?



---

archive/issue_comments_182721.json:
```json
{
    "body": "<a id='comment:19'></a>\nHere's one:\n\n```\nsage: Sym = SymmetricFunctions(QQ)\nsage: Sym.inject_shorthands()\n/home/darij/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py:1174: RuntimeWarning: redefining global value `e`\n  inject_variable(shorthand, getattr(self, shorthand)())\nsage: w = Sym.w()\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 105 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 103 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 75.5 ms per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n5 loops, best of 3: 3.26 ms per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.6 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n125 loops, best of 3: 1.73 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n25 loops, best of 3: 8.5 ms per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n125 loops, best of 3: 1.88 ms per loop\nsage: \nsage: w = Sym.w(coerce_h=False, coerce_p=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 45.4 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 102 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 75.9 ms per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n5 loops, best of 3: 1.86 ms per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.4 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n5 loops, best of 3: 1.63 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n625 loops, best of 3: 96.1 \u00b5s per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 95.9 \u00b5s per loop\nsage: \nsage: w = Sym.w(coerce_h=False, coerce_e=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 246 ms per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 1.51 ms per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n625 loops, best of 3: 88.5 \u00b5s per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n625 loops, best of 3: 87.3 \u00b5s per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n25 loops, best of 3: 9.33 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n625 loops, best of 3: 1.09 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n5 loops, best of 3: 95.4 ms per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 1.52 ms per loop\nsage: \nsage: w = Sym.w(coerce_h=True, coerce_e=True, coerce_p=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 117 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 103 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 94 \u00b5s per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n625 loops, best of 3: 88.2 \u00b5s per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.6 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n5 loops, best of 3: 1.47 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n625 loops, best of 3: 96.8 \u00b5s per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 96.6 \u00b5s per loop\n```\n\nIt's fun how s(w) is quickest with the e-coercion but the advantage disappears when all three coercions are on (because it doesn't know where to go)...",
    "created_at": "2013-07-02T08:43:11Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182721",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:19'></a>
Here's one:

```
sage: Sym = SymmetricFunctions(QQ)
sage: Sym.inject_shorthands()
/home/darij/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py:1174: RuntimeWarning: redefining global value `e`
  inject_variable(shorthand, getattr(self, shorthand)())
sage: w = Sym.w()
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 105 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 103 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 75.5 ms per loop
sage: timeit("w(e[4,3,2,1])")
5 loops, best of 3: 3.26 ms per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.6 ms per loop
sage: timeit("w(s[4,3,2,1])")
125 loops, best of 3: 1.73 ms per loop
sage: timeit("p(w[4,3,2,1])")
25 loops, best of 3: 8.5 ms per loop
sage: timeit("w(p[4,3,2,1])")
125 loops, best of 3: 1.88 ms per loop
sage: 
sage: w = Sym.w(coerce_h=False, coerce_p=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 45.4 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 102 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 75.9 ms per loop
sage: timeit("w(e[4,3,2,1])")
5 loops, best of 3: 1.86 ms per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.4 ms per loop
sage: timeit("w(s[4,3,2,1])")
5 loops, best of 3: 1.63 ms per loop
sage: timeit("p(w[4,3,2,1])")
625 loops, best of 3: 96.1 µs per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 95.9 µs per loop
sage: 
sage: w = Sym.w(coerce_h=False, coerce_e=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 246 ms per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 1.51 ms per loop
sage: timeit("e(w[4,3,2,1])")
625 loops, best of 3: 88.5 µs per loop
sage: timeit("w(e[4,3,2,1])")
625 loops, best of 3: 87.3 µs per loop
sage: timeit("s(w[4,3,2,1])")
25 loops, best of 3: 9.33 ms per loop
sage: timeit("w(s[4,3,2,1])")
625 loops, best of 3: 1.09 ms per loop
sage: timeit("p(w[4,3,2,1])")
5 loops, best of 3: 95.4 ms per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 1.52 ms per loop
sage: 
sage: w = Sym.w(coerce_h=True, coerce_e=True, coerce_p=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 117 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 103 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 94 µs per loop
sage: timeit("w(e[4,3,2,1])")
625 loops, best of 3: 88.2 µs per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.6 ms per loop
sage: timeit("w(s[4,3,2,1])")
5 loops, best of 3: 1.47 ms per loop
sage: timeit("p(w[4,3,2,1])")
625 loops, best of 3: 96.8 µs per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 96.6 µs per loop
```

It's fun how s(w) is quickest with the e-coercion but the advantage disappears when all three coercions are on (because it doesn't know where to go)...



---

archive/issue_comments_182722.json:
```json
{
    "body": "<a id='comment:20'></a>\nfor the patchbot:\n\napply trac_14775-symmetric_functions_extended-dg.patch",
    "created_at": "2013-07-16T17:05:46Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182722",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:20'></a>
for the patchbot:

apply trac_14775-symmetric_functions_extended-dg.patch



---

archive/attachments_020550.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-review-ts.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-review-ts.patch",
    "created_at": "2013-08-11T18:51:05Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_182723.json:
```json
{
    "body": "**Attachment:** [trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)",
    "created_at": "2013-08-11T18:51:05Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182723",
    "user": "https://github.com/tscrim"
}
```

**Attachment:** [trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)



---

archive/issue_comments_182724.json:
```json
{
    "body": "<a id='comment:21'></a>\nHey Darij,\n\nHere's a review patch which is basically just formatting changes and compacts the implementation of `degree_negation()`. If you're happy with my changes, you can set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-08-11T18:56:01Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182724",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Hey Darij,

Here's a review patch which is basically just formatting changes and compacts the implementation of `degree_negation()`. If you're happy with my changes, you can set this to positive review.

Best,

Travis



---

archive/issue_comments_182725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,4 +12,8 @@\n \n 6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.\n \n-* Apply: [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)\n+Apply:\n+\n+* [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)\n+* [attachment:trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)\n+\n``````\n",
    "created_at": "2013-08-11T18:56:01Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182725",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,4 +12,8 @@
 
 6. Implement Frobenius and Verschiebung operations on Symm without recourse to plethysm.
 
-* Apply: [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)
+Apply:
+
+* [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)
+* [attachment:trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)
+
``````




---

archive/issue_comments_182726.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2013-08-11T18:56:01Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182726",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/attachments_020551.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-rereview-dg.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-rereview-dg.patch",
    "created_at": "2013-08-11T20:13:46Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-rereview-dg.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182727.json:
```json
{
    "body": "**Attachment:** [trac_14775-rereview-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-rereview-dg.patch)",
    "created_at": "2013-08-11T20:13:46Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182727",
    "user": "https://github.com/darijgr"
}
```

**Attachment:** [trac_14775-rereview-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-rereview-dg.patch)



---

archive/issue_comments_182728.json:
```json
{
    "body": "<a id='comment:22'></a>\nHere's a review of your review. Thanks for the formatting changes which I should have done myself (do you know of a good way to automatically cut the docstring lines to the length they should have, whatever that length is?). Nice work on `degree_negation`. Most of what I'm fixing in my review is not your errors but mine or old ones.\n\nOne thing I've reverted from your review which doesn't seem accidental is \"there is no canonical choice for a basis\"; this was an abuse of the notion of \"canonical\". All of the classical bases of Sym are canonical in the sense of category theory (which means \"functorial in the ground ring\"), and that's really the only formal meaning of this notion in mathematics. Apparently \"canonical\" was meant as \"clearly more natural than the others\", but that's imprecise and subjective. IMHO \"it does not come with a basis already chosen\" reflects better what is happening.",
    "created_at": "2013-08-11T20:14:50Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182728",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:22'></a>
Here's a review of your review. Thanks for the formatting changes which I should have done myself (do you know of a good way to automatically cut the docstring lines to the length they should have, whatever that length is?). Nice work on `degree_negation`. Most of what I'm fixing in my review is not your errors but mine or old ones.

One thing I've reverted from your review which doesn't seem accidental is "there is no canonical choice for a basis"; this was an abuse of the notion of "canonical". All of the classical bases of Sym are canonical in the sense of category theory (which means "functorial in the ground ring"), and that's really the only formal meaning of this notion in mathematics. Apparently "canonical" was meant as "clearly more natural than the others", but that's imprecise and subjective. IMHO "it does not come with a basis already chosen" reflects better what is happening.



---

archive/issue_events_129272.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129272"
}
```



---

archive/issue_events_129273.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129273"
}
```



---

archive/attachments_020552.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-addendum_arith_prod-dg.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-addendum_arith_prod-dg.patch",
    "created_at": "2013-08-13T20:04:55Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-addendum_arith_prod-dg.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182729.json:
```json
{
    "body": "**Attachment:** [trac_14775-addendum_arith_prod-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-addendum_arith_prod-dg.patch)\n\nadditional method for arithmetic product",
    "created_at": "2013-08-13T20:04:55Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182729",
    "user": "https://github.com/darijgr"
}
```

**Attachment:** [trac_14775-addendum_arith_prod-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-addendum_arith_prod-dg.patch)

additional method for arithmetic product



---

archive/issue_comments_182730.json:
```json
{
    "body": "<a id='comment:24'></a>\nI've just added a new attachment [attachment:trac_14775-addendum_arith_prod-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-addendum_arith_prod-dg.patch) with a new method for the arithmetic product ( http://mathoverflow.net/questions/138148 ). Sorry for straining you more, Travis; if you wish, I can move this to a new ticket.\n\nSo far, for the patchbot:\n\napply trac_14775-symmetric_functions_extended-dg.patch trac_14775-review-ts.patch trac_14775-rereview-dg.patch\u200b trac_14775-addendum_arith_prod-dg.patch",
    "created_at": "2013-08-13T20:06:37Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182730",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:24'></a>
I've just added a new attachment [attachment:trac_14775-addendum_arith_prod-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-addendum_arith_prod-dg.patch) with a new method for the arithmetic product ( http://mathoverflow.net/questions/138148 ). Sorry for straining you more, Travis; if you wish, I can move this to a new ticket.

So far, for the patchbot:

apply trac_14775-symmetric_functions_extended-dg.patch trac_14775-review-ts.patch trac_14775-rereview-dg.patch​ trac_14775-addendum_arith_prod-dg.patch



---

archive/issue_comments_182731.json:
```json
{
    "body": "<a id='comment:25'></a>\nHey Darij,\n\nSorry I didn't get back to you yesterday. I don't like the phrasing you used (and canonical to me means there is a clear/special reason why this basis is \"better\" than the others). How about something like\n\n1 - \"there is no natural choice for a basis\",\n\n2 - \"there are multiple natural bases\"?\n\nLooking at the arithmetic product (which should go here I think), I have some suggestions:\n\n- The math equation on line 2842, could you set it in a `.. MATH::` block?\n- I think the OUTPUT block should be a sentence (it really just needs to be capitalized and have a period).\n- Remove the `else` on line 2929 since it makes the code more clear (at least to me since the function ends on the same indent level it started at; and do the de-indent of course).\n- Remove some of the comments, in particular the ones describing the variables in the for loops since they are cluttering up the code IMO.\n\nLast, could you fold all of the patches into a single patch? This will make it easier for me to do the final review.\n\nThank you,\n\nTravis",
    "created_at": "2013-08-13T22:39:54Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182731",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
Hey Darij,

Sorry I didn't get back to you yesterday. I don't like the phrasing you used (and canonical to me means there is a clear/special reason why this basis is "better" than the others). How about something like

1 - "there is no natural choice for a basis",

2 - "there are multiple natural bases"?

Looking at the arithmetic product (which should go here I think), I have some suggestions:

- The math equation on line 2842, could you set it in a `.. MATH::` block?
- I think the OUTPUT block should be a sentence (it really just needs to be capitalized and have a period).
- Remove the `else` on line 2929 since it makes the code more clear (at least to me since the function ends on the same indent level it started at; and do the de-indent of course).
- Remove some of the comments, in particular the ones describing the variables in the for loops since they are cluttering up the code IMO.

Last, could you fold all of the patches into a single patch? This will make it easier for me to do the final review.

Thank you,

Travis



---

archive/issue_comments_182732.json:
```json
{
    "body": "qfold of the previous patches + the changes you suggested",
    "created_at": "2013-08-13T22:51:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182732",
    "user": "https://github.com/darijgr"
}
```

qfold of the previous patches + the changes you suggested



---

archive/attachments_020553.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-qfolded.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-qfolded.patch",
    "created_at": "2013-08-13T22:53:26Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-qfolded.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182733.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Attachment:** [trac_14775-qfolded.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-qfolded.patch)\n\nHi Travis,\n\nagreeing with phrasing 2 and all the suggestions. Done!\n\nBest regards,\\\\\nDarij\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b",
    "created_at": "2013-08-13T22:53:26Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182733",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:26'></a>
**Attachment:** [trac_14775-qfolded.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-qfolded.patch)

Hi Travis,

agreeing with phrasing 2 and all the suggestions. Done!

Best regards,\\
Darij

patchbot:

apply trac_14775-qfolded.patch​



---

archive/issue_comments_182734.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,6 +14,4 @@\n \n Apply:\n \n-* [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)\n-* [attachment:trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)\n-\n+* [attachment:trac_14775-qfolded.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch\u200b)\n``````\n",
    "created_at": "2013-08-13T22:54:20Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182734",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,6 +14,4 @@
 
 Apply:
 
-* [attachment:trac_14775-symmetric_functions_extended-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-symmetric_functions_extended-dg.patch)
-* [attachment:trac_14775-review-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-review-ts.patch)
-
+* [attachment:trac_14775-qfolded.patch​](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch​)
``````




---

archive/issue_comments_182735.json:
```json
{
    "body": "<a id='comment:28'></a>\nLooks good to me now. Thanks Darij.",
    "created_at": "2013-08-13T23:07:14Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182735",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Looks good to me now. Thanks Darij.



---

archive/issue_events_129274.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-08-13T23:07:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129274"
}
```



---

archive/issue_events_129275.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-08-13T23:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129275"
}
```



---

archive/issue_comments_182736.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks for reviewing this monster!!",
    "created_at": "2013-08-13T23:10:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182736",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:29'></a>
Thanks for reviewing this monster!!



---

archive/issue_comments_182737.json:
```json
{
    "body": "<a id='comment:30'></a>\nI noticed a minor docstring problem I missed (and introduced). Here's a small review patch which does the necessary tweak.\n\nFor patchbot:\n\nApply: trac_14775-qfolded.patch\u200b, trac_14775-docstring_tweak-ts.patch",
    "created_at": "2013-08-15T18:37:31Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182737",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
I noticed a minor docstring problem I missed (and introduced). Here's a small review patch which does the necessary tweak.

For patchbot:

Apply: trac_14775-qfolded.patch​, trac_14775-docstring_tweak-ts.patch



---

archive/issue_comments_182738.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n Apply:\n \n * [attachment:trac_14775-qfolded.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch\u200b)\n+* [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n``````\n",
    "created_at": "2013-08-15T18:37:31Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182738",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 Apply:
 
 * [attachment:trac_14775-qfolded.patch​](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch​)
+* [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)
``````




---

archive/issue_events_129276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T07:47:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129276"
}
```



---

archive/issue_events_129277.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T07:47:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129277"
}
```



---

archive/issue_comments_182739.json:
```json
{
    "body": "<a id='comment:31'></a>\nPDF documentation doesn't build:\n\n```\n! Undefined control sequence.\n<argument> ...imits _{i \\geq 1, j \\geq 1} p_{\\lcm \n                                                  (\\lambda _i, \\mu _j)}^{\\gc...\nl.82512 \\end{gather}\n\n? ]]\n! Emergency stop.\n<argument> ...imits _{i \\geq 1, j \\geq 1} p_{\\lcm \n                                                  (\\lambda _i, \\mu _j)}^{\\gc...\nl.82512 \\end{gather}\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on combinat.log.\n [8make[1]: *** [combinat.pdf] Error 1\n```",
    "created_at": "2013-08-18T07:47:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182739",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
PDF documentation doesn't build:

```
! Undefined control sequence.
<argument> ...imits _{i \geq 1, j \geq 1} p_{\lcm 
                                                  (\lambda _i, \mu _j)}^{\gc...
l.82512 \end{gather}

? ]]
! Emergency stop.
<argument> ...imits _{i \geq 1, j \geq 1} p_{\lcm 
                                                  (\lambda _i, \mu _j)}^{\gc...
l.82512 \end{gather}

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on combinat.log.
 [8make[1]: *** [combinat.pdf] Error 1
```



---

archive/issue_comments_182740.json:
```json
{
    "body": "<a id='comment:32'></a>\nIMHO this is more an issue with the PDF docbuilder... \\gcd and \\lcm are standard commands.\n\nDoes it build fine with [attachment:trac_14775-operatorname.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/ebeddeed5f08de02d0c561d1d114891b.patch\u200b)? I can't check docbuild pdf at all on my system.",
    "created_at": "2013-08-18T07:57:17Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182740",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:32'></a>
IMHO this is more an issue with the PDF docbuilder... \gcd and \lcm are standard commands.

Does it build fine with [attachment:trac_14775-operatorname.patch​](https://github.com/sagemath/sage/files/ticket14775/ebeddeed5f08de02d0c561d1d114891b.patch​)? I can't check docbuild pdf at all on my system.



---

archive/issue_events_129278.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T07:57:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129278"
}
```



---

archive/issue_events_129279.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T07:57:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129279"
}
```



---

archive/attachments_020554.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-operatorname.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-operatorname.patch",
    "created_at": "2013-08-18T11:01:12Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-operatorname.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182741.json:
```json
{
    "body": "**Attachment:** [trac_14775-operatorname.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-operatorname.patch)\n\nupdated (typo fixed)",
    "created_at": "2013-08-18T11:01:12Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182741",
    "user": "https://github.com/darijgr"
}
```

**Attachment:** [trac_14775-operatorname.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-operatorname.patch)

updated (typo fixed)



---

archive/issue_events_129280.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T13:32:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129280"
}
```



---

archive/issue_events_129281.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T13:32:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129281"
}
```



---

archive/issue_comments_182742.json:
```json
{
    "body": "<a id='comment:34'></a>\nNeeds review (not my job, sorry...)",
    "created_at": "2013-08-18T13:33:51Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182742",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Needs review (not my job, sorry...)



---

archive/issue_events_129282.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T13:33:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129282"
}
```



---

archive/issue_events_129283.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-18T13:33:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129283"
}
```



---

archive/attachments_020555.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-docstring_tweak-ts.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-docstring_tweak-ts.patch",
    "created_at": "2013-08-18T16:32:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_182743.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Attachment:** [trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n\nHere's a new version of my tweak patch which builds the pdf:\n\n```\nBuild finished.  The built documents can be found in /home/travis/sage-5.11.rc0/devel/sage/doc/output/pdf/en/reference/combinat\n```\n\nDarij, unfortunately `\\lcm` and `\\gcd` are actually not standard latex commands (as counter-intuitive as it is). [See here.](http://tex.stackexchange.com/questions/112037/why-is-lcm-not-defined-as-default) I changed them instead to `\\mathrm{lcm}` and made another tweak that was causing the pdf builder to fail. If you're happy with my changes, go ahead and set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-08-18T16:32:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182743",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'></a>
**Attachment:** [trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)

Here's a new version of my tweak patch which builds the pdf:

```
Build finished.  The built documents can be found in /home/travis/sage-5.11.rc0/devel/sage/doc/output/pdf/en/reference/combinat
```

Darij, unfortunately `\lcm` and `\gcd` are actually not standard latex commands (as counter-intuitive as it is). [See here.](http://tex.stackexchange.com/questions/112037/why-is-lcm-not-defined-as-default) I changed them instead to `\mathrm{lcm}` and made another tweak that was causing the pdf builder to fail. If you're happy with my changes, go ahead and set this to positive review.

Best,

Travis



---

archive/issue_events_129284.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T16:36:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129284"
}
```



---

archive/issue_events_129285.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T16:36:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129285"
}
```



---

archive/issue_comments_182744.json:
```json
{
    "body": "<a id='comment:36'></a>\nThanks and good work finding the typos!",
    "created_at": "2013-08-18T16:36:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182744",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:36'></a>
Thanks and good work finding the typos!



---

archive/issue_events_129286.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-18T18:53:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129286"
}
```



---

archive/issue_events_129287.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-18T18:53:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129287"
}
```



---

archive/issue_comments_182745.json:
```json
{
    "body": "<a id='comment:37'></a>\nI have a couple of comments before the final positive review\n\n* I ran pyflakes and found (some of these could be from previous patches)\n\n```\nsage/combinat/sf/elementary.py:236: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/powersum.py:334: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/powersum.py:456: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/schur.py:433: 'Partition' imported but unused\nsage/combinat/sf/sfa.py:802: local variable 'result' is assigned to but never used\nsage/combinat/sf/sfa.py:2916: 'Partitions' imported but unused\nsage/combinat/sf/sfa.py:2917: 'divisors' imported but unused\nsage/combinat/sf/witt.py:20: 'classical' imported but unused\nsage/combinat/sf/witt.py:22: 'QQ' imported but unused\nsage/combinat/sf/witt.py:22: 'ZZ' imported but unused\nsage/combinat/sf/witt.py:1309: redefinition of unused 'Integer' from line 22\n```\n* in the documentation of `verschiebung` in witt.py line 1294 and elementary.py line 223 and powersum.py line 443 :\n` same result as the implementation in sfa.py on the monomial `\n\nThe tests seem to be on complete homogeneous.  Is monomial a typo?\n* There are a number of whitespace issues in the files that I looked at (e.g. witt.py, dual.py).  Please check these carefully.\n* for the method `frobenius` add a <code>... SEEALSO: :meth:\\`plethysm\\`</code> and similarly in `plethsym` add a `SEEALSO` for `frobenius`.  The problem with the name frobenius is that it is not at all descriptive (because there are other things that are named after Frobenius e.g. at one time the documentation had Frobenius omega automorphism, but I am more thinking the map that is more commonly called the Frobenius map from the ring of characters to the symmetric functions).  Can I request that you use `adams_operator` or something like this instead?\n* I don't want to undo if what you already tried, but in `elementary.py` I see:\n`(coeff if (sum(lam) - Integer(sum(lam) / n)) % 2 == 0 else -coeff)`\n\nis `1 if x%2==0 else -1` this faster than `(-1)**x` in this case?  I tried experiments like `timeit('[(-1)**v for v in range(1000)]')` vs. `timeit('[(1 if v%2==0 else -1) for v in range(1000)]')` and the former was faster.  Try:\n\n`(-1)**((sum(lam) - Integer(sum(lam) / n)) % 2)*coeff`\n\nor to avoid computing the sum twice\n\n`(-1)**((lambda v: (v-Integer(v/n))%2)(sum(lam)))*coeff`",
    "created_at": "2013-08-18T18:53:04Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182745",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:37'></a>
I have a couple of comments before the final positive review

* I ran pyflakes and found (some of these could be from previous patches)

```
sage/combinat/sf/elementary.py:236: redefinition of unused 'Partition' from line 21
sage/combinat/sf/powersum.py:334: redefinition of unused 'Partition' from line 21
sage/combinat/sf/powersum.py:456: redefinition of unused 'Partition' from line 21
sage/combinat/sf/schur.py:433: 'Partition' imported but unused
sage/combinat/sf/sfa.py:802: local variable 'result' is assigned to but never used
sage/combinat/sf/sfa.py:2916: 'Partitions' imported but unused
sage/combinat/sf/sfa.py:2917: 'divisors' imported but unused
sage/combinat/sf/witt.py:20: 'classical' imported but unused
sage/combinat/sf/witt.py:22: 'QQ' imported but unused
sage/combinat/sf/witt.py:22: 'ZZ' imported but unused
sage/combinat/sf/witt.py:1309: redefinition of unused 'Integer' from line 22
```
* in the documentation of `verschiebung` in witt.py line 1294 and elementary.py line 223 and powersum.py line 443 :
` same result as the implementation in sfa.py on the monomial `

The tests seem to be on complete homogeneous.  Is monomial a typo?
* There are a number of whitespace issues in the files that I looked at (e.g. witt.py, dual.py).  Please check these carefully.
* for the method `frobenius` add a <code>... SEEALSO: :meth:\`plethysm\`</code> and similarly in `plethsym` add a `SEEALSO` for `frobenius`.  The problem with the name frobenius is that it is not at all descriptive (because there are other things that are named after Frobenius e.g. at one time the documentation had Frobenius omega automorphism, but I am more thinking the map that is more commonly called the Frobenius map from the ring of characters to the symmetric functions).  Can I request that you use `adams_operator` or something like this instead?
* I don't want to undo if what you already tried, but in `elementary.py` I see:
`(coeff if (sum(lam) - Integer(sum(lam) / n)) % 2 == 0 else -coeff)`

is `1 if x%2==0 else -1` this faster than `(-1)**x` in this case?  I tried experiments like `timeit('[(-1)**v for v in range(1000)]')` vs. `timeit('[(1 if v%2==0 else -1) for v in range(1000)]')` and the former was faster.  Try:

`(-1)**((sum(lam) - Integer(sum(lam) / n)) % 2)*coeff`

or to avoid computing the sum twice

`(-1)**((lambda v: (v-Integer(v/n))%2)(sum(lam)))*coeff`



---

archive/issue_comments_182746.json:
```json
{
    "body": "<a id='comment:38'></a>\nThanks for looking into that code! I'm fixing the issues now. But what exactly do you mean by whitespace issues? Do you have a handy regex for searching for them?\n\nEDIT: adams_operation is now an alias for frobenius; good point! I don't want to remove frobenius, though, as it is a natural name from the Witt vector viewpoint. The other Frobenius map (the characteristic map) has a different domain, so no confusion can arise. The omega map I've never seen named after Frobenius outside of the code.",
    "created_at": "2013-08-18T19:19:10Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182746",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:38'></a>
Thanks for looking into that code! I'm fixing the issues now. But what exactly do you mean by whitespace issues? Do you have a handy regex for searching for them?

EDIT: adams_operation is now an alias for frobenius; good point! I don't want to remove frobenius, though, as it is a natural name from the Witt vector viewpoint. The other Frobenius map (the characteristic map) has a different domain, so no confusion can arise. The omega map I've never seen named after Frobenius outside of the code.



---

archive/issue_comments_182747.json:
```json
{
    "body": "<a id='comment:39'></a>\nI always search for them by looking for <tab> and <space><newline>.  On the editor I use it is '\\t' and ' \\r'",
    "created_at": "2013-08-18T19:22:33Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182747",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:39'></a>
I always search for them by looking for <tab> and <space><newline>.  On the editor I use it is '\t' and ' \r'



---

archive/issue_comments_182748.json:
```json
{
    "body": "<a id='comment:40'></a>\nIt seems like there is something special happening for negative numbers / 1 / -1:\n\n```\nsage: %timeit (-1)**1000\n1000000 loops, best of 3: 993 ns per loop\nsage: %timeit (-1)**2000                    \n100000 loops, best of 3: 968 ns per loop\nsage: %timeit (-1)**5000\n1000000 loops, best of 3: 924 ns per loop\nsage: %timeit (-1)**10000\n100000 loops, best of 3: 881 ns per loop\n```\nIt probably is doing an if/then via modulus for \"large\" powers. So having it as `(-1)**x` is faster. Good caveat to know.\n\nI agree that we should avoid doing the sum twice, but it's faster to store it as a variable instead of a lambda function:\n\n```\nsage: y = lambda a: 5\nsage: %timeit y(2)\n1000000 loops, best of 3: 770 ns per loop\nsage: %timeit x = 5; x\n1000000 loops, best of 3: 336 ns per loop\n```\n\nAny doc typos are my fault from copy/pasting.\n\nThanks for the comments Mike.\n\nBest,\n\nTravis",
    "created_at": "2013-08-18T19:37:50Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182748",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'></a>
It seems like there is something special happening for negative numbers / 1 / -1:

```
sage: %timeit (-1)**1000
1000000 loops, best of 3: 993 ns per loop
sage: %timeit (-1)**2000                    
100000 loops, best of 3: 968 ns per loop
sage: %timeit (-1)**5000
1000000 loops, best of 3: 924 ns per loop
sage: %timeit (-1)**10000
100000 loops, best of 3: 881 ns per loop
```
It probably is doing an if/then via modulus for "large" powers. So having it as `(-1)**x` is faster. Good caveat to know.

I agree that we should avoid doing the sum twice, but it's faster to store it as a variable instead of a lambda function:

```
sage: y = lambda a: 5
sage: %timeit y(2)
1000000 loops, best of 3: 770 ns per loop
sage: %timeit x = 5; x
1000000 loops, best of 3: 336 ns per loop
```

Any doc typos are my fault from copy/pasting.

Thanks for the comments Mike.

Best,

Travis



---

archive/issue_comments_182749.json:
```json
{
    "body": "<a id='comment:41'></a>\nThanks!\n\nAbout `(-1)**a * x` vs. `x if a % 2 == 0 else -x`: I've changed it to the former (= more intuitive) syntax now in the Verschiebung method. I was getting a speedup from the latter syntax in a different method (omega or antipode, I don't remember), which made me adapt it as a general tactic. I guess Python is smarter than that, though. Either way the time difference is small and tends to hide behind noise (my firefox is running), and I'm not sure whether it is due to the exponentiation itself or to the fact that the former syntax coerces `(-1)**a` into the parent of `x` and then does multiplication within that parent, while the latter only ever uses negation in the parent of `x`.\n\nUploading file now...",
    "created_at": "2013-08-18T20:32:12Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182749",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:41'></a>
Thanks!

About `(-1)**a * x` vs. `x if a % 2 == 0 else -x`: I've changed it to the former (= more intuitive) syntax now in the Verschiebung method. I was getting a speedup from the latter syntax in a different method (omega or antipode, I don't remember), which made me adapt it as a general tactic. I guess Python is smarter than that, though. Either way the time difference is small and tends to hide behind noise (my firefox is running), and I'm not sure whether it is due to the exponentiation itself or to the fact that the former syntax coerces `(-1)**a` into the parent of `x` and then does multiplication within that parent, while the latter only ever uses negation in the parent of `x`.

Uploading file now...



---

archive/issue_comments_182750.json:
```json
{
    "body": "<a id='comment:42'></a>\nDone. Someone (Mike? Travis?) should take a look at this as I've been making a lot of manual whitespace changes and who knows whether they're really all whitespace. ;)\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b trac_14775-docstring_tweak-ts.patch\u200b trac_14775-response-to-mike-dg.patch\u200b",
    "created_at": "2013-08-18T20:36:14Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182750",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:42'></a>
Done. Someone (Mike? Travis?) should take a look at this as I've been making a lot of manual whitespace changes and who knows whether they're really all whitespace. ;)

patchbot:

apply trac_14775-qfolded.patch​ trac_14775-docstring_tweak-ts.patch​ trac_14775-response-to-mike-dg.patch​



---

archive/issue_comments_182751.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,3 +16,4 @@\n \n * [attachment:trac_14775-qfolded.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch\u200b)\n * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n+* [attachment:trac_14775-response-to-mike-dg.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch\u200b)\n``````\n",
    "created_at": "2013-08-18T20:36:51Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182751",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,3 +16,4 @@
 
 * [attachment:trac_14775-qfolded.patch​](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch​)
 * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)
+* [attachment:trac_14775-response-to-mike-dg.patch​](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch​)
``````




---

archive/issue_events_129288.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T20:36:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129288"
}
```



---

archive/issue_events_129289.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T20:36:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129289"
}
```



---

archive/issue_comments_182752.json:
```json
{
    "body": "<a id='comment:44'></a>\nPlease **do not make whitespace changes** to code you otherwise don't touch. It can only lead to merge conflicts and doesn't really benefit anyone. When you change code or add new code, it would be good not to have trailing whitespace. But that's no excuse for changing whitespace all over the place.",
    "created_at": "2013-08-19T05:06:11Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182752",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
Please **do not make whitespace changes** to code you otherwise don't touch. It can only lead to merge conflicts and doesn't really benefit anyone. When you change code or add new code, it would be good not to have trailing whitespace. But that's no excuse for changing whitespace all over the place.



---

archive/issue_events_129290.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-19T05:06:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129290"
}
```



---

archive/issue_events_129291.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-19T05:06:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129291"
}
```



---

archive/issue_comments_182753.json:
```json
{
    "body": "<a id='comment:45'></a>\nOK, Jeroen, you tell me what files should be removed from the patch. No offense but I'm tired of following unwritten rules. Currently, every file changed by this patch is changed in a nontrivial way (not only whitespaces), although in three cases (jack.py, kfpoly.py, macdonald.py) it is all cosmetics (typos fixed in the doc). In all the other cases the changes are more substantial (e. g., wrong docstring rewritten). I have no idea what is the threshold for a change you consider beneficial.",
    "created_at": "2013-08-19T09:30:46Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182753",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:45'></a>
OK, Jeroen, you tell me what files should be removed from the patch. No offense but I'm tired of following unwritten rules. Currently, every file changed by this patch is changed in a nontrivial way (not only whitespaces), although in three cases (jack.py, kfpoly.py, macdonald.py) it is all cosmetics (typos fixed in the doc). In all the other cases the changes are more substantial (e. g., wrong docstring rewritten). I have no idea what is the threshold for a change you consider beneficial.



---

archive/issue_comments_182754.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [darij](#comment%3A45):\n> I have no idea what is the threshold for a change you consider beneficial.\n\nThe threshhold is easy: anything that is not purely a trailing-whitespace change. Fixing typos is good, rewriting docstrings is good, changing non-trailing whitespace (in a [PEP-8](http://www.python.org/dev/peps/pep-0008/) compliant way) is good.\n\nI seem to recall that the git workflow will ignore trailing spaces anyway, so the \"problem\" will disappear anyway.",
    "created_at": "2013-08-19T11:53:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182754",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Replying to [darij](#comment%3A45):
> I have no idea what is the threshold for a change you consider beneficial.

The threshhold is easy: anything that is not purely a trailing-whitespace change. Fixing typos is good, rewriting docstrings is good, changing non-trailing whitespace (in a [PEP-8](http://www.python.org/dev/peps/pep-0008/) compliant way) is good.

I seem to recall that the git workflow will ignore trailing spaces anyway, so the "problem" will disappear anyway.



---

archive/issue_comments_182755.json:
```json
{
    "body": "<a id='comment:47'></a>\nFine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?",
    "created_at": "2013-08-19T11:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182755",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:47'></a>
Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?



---

archive/issue_comments_182756.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [darij](#comment%3A47):\n> Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?\n\nWell, the first file in [attachment:trac_14775-response-to-mike-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-response-to-mike-dg.patch), `sage/combinat/sf/classical.py`, seems to have only trailing-whitespace changes. Moreover, it's not just a matter of \"which file\". Making a one-character change in a given file does not suddenly mean that you should remove all trailing whitespace in that file.",
    "created_at": "2013-08-19T12:06:36Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182756",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
Replying to [darij](#comment%3A47):
> Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?

Well, the first file in [attachment:trac_14775-response-to-mike-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-response-to-mike-dg.patch), `sage/combinat/sf/classical.py`, seems to have only trailing-whitespace changes. Moreover, it's not just a matter of "which file". Making a one-character change in a given file does not suddenly mean that you should remove all trailing whitespace in that file.



---

archive/issue_comments_182757.json:
```json
{
    "body": "<a id='comment:49'></a>\nOK, I can revert classical.py. For some reason I thought I changed it in the old patch, but I didn't.\n\nAbout the rest: Well, sorry, but I'll need a more precise statement of what changes should be reverted if I'm to revert anything. What is your quantum -- if not a file, a class? a method? That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.",
    "created_at": "2013-08-19T12:18:01Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182757",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:49'></a>
OK, I can revert classical.py. For some reason I thought I changed it in the old patch, but I didn't.

About the rest: Well, sorry, but I'll need a more precise statement of what changes should be reverted if I'm to revert anything. What is your quantum -- if not a file, a class? a method? That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.



---

archive/issue_comments_182758.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [darij](#comment%3A49):\n> What is your quantum -- if not a file, a class? a method?\n\nA method at most (even less for \"big\" methods which I admit is not well-defined).\n\n> That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.\n\nFair enough, restoring positive review.",
    "created_at": "2013-08-19T12:21:28Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
Replying to [darij](#comment%3A49):
> What is your quantum -- if not a file, a class? a method?

A method at most (even less for "big" methods which I admit is not well-defined).

> That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.

Fair enough, restoring positive review.



---

archive/issue_events_129292.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-19T12:21:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129292"
}
```



---

archive/issue_events_129293.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-19T12:21:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129293"
}
```



---

archive/issue_comments_182759.json:
```json
{
    "body": "<a id='comment:51'></a>\nThank you!!",
    "created_at": "2013-08-19T12:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182759",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:51'></a>
Thank you!!



---

archive/issue_comments_182760.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [jdemeyer](#comment%3A50):\n> Replying to [darij](#comment%3A49):\n> > What is your quantum -- if not a file, a class? a method?\n\n> A method at most (even less for \"big\" methods which I admit is not well-defined).\n\nMy rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.",
    "created_at": "2013-08-19T12:38:46Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182760",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:52'></a>
Replying to [jdemeyer](#comment%3A50):
> Replying to [darij](#comment%3A49):
> > What is your quantum -- if not a file, a class? a method?

> A method at most (even less for "big" methods which I admit is not well-defined).

My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.



---

archive/issue_comments_182761.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [nthiery](#comment%3A52):\n> My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.\n\nYes, that sounds right.",
    "created_at": "2013-08-19T12:40:44Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182761",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
Replying to [nthiery](#comment%3A52):
> My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.

Yes, that sounds right.



---

archive/issue_comments_182762.json:
```json
{
    "body": "**Dependencies:** #14866",
    "created_at": "2013-08-19T15:38:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182762",
    "user": "https://github.com/nthiery"
}
```

**Dependencies:** #14866



---

archive/attachments_020556.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-response-to-mike-dg.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-response-to-mike-dg.patch",
    "created_at": "2013-08-19T15:39:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-response-to-mike-dg.patch",
    "user": "https://github.com/nthiery"
}
```



---

archive/issue_comments_182763.json:
```json
{
    "body": "**Attachment:** [trac_14775-response-to-mike-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-response-to-mike-dg.patch)\n\nEDIT: now applies correctly",
    "created_at": "2013-08-19T15:39:27Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182763",
    "user": "https://github.com/nthiery"
}
```

**Attachment:** [trac_14775-response-to-mike-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-response-to-mike-dg.patch)

EDIT: now applies correctly



---

archive/issue_comments_182764.json:
```json
{
    "body": "<a id='comment:55'></a>\nFor the record: I removed to trivial whitespace fixes from trac_14775-response-to-mike-dg.patch which were already handled by #14866 and created a conflict. I allowed myself to leave the positive review.",
    "created_at": "2013-08-19T15:41:20Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182764",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:55'></a>
For the record: I removed to trivial whitespace fixes from trac_14775-response-to-mike-dg.patch which were already handled by #14866 and created a conflict. I allowed myself to leave the positive review.



---

archive/issue_comments_182765.json:
```json
{
    "body": "<a id='comment:56'></a>\nApplies correctly on top of #14866; thank you very much!",
    "created_at": "2013-08-19T15:44:22Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182765",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:56'></a>
Applies correctly on top of #14866; thank you very much!



---

archive/issue_comments_182766.json:
```json
{
    "body": "**Changing dependencies** from \"#14866\" to \"\".",
    "created_at": "2013-08-19T15:46:30Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182766",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#14866" to "".



---

archive/issue_comments_182767.json:
```json
{
    "body": "<a id='comment:57'></a>\nCurrently this causes a (very small) conflict with #14102 (which depends on #10963). Should we:\n\n- revert the changes in this patch around where the conflict occurs (approx. line 826-830)?\n- remove the changes in `ns_macdonald.py` to a ticket depending on #14102?\n- rebase #14102?",
    "created_at": "2013-08-19T15:46:30Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182767",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:57'></a>
Currently this causes a (very small) conflict with #14102 (which depends on #10963). Should we:

- revert the changes in this patch around where the conflict occurs (approx. line 826-830)?
- remove the changes in `ns_macdonald.py` to a ticket depending on #14102?
- rebase #14102?



---

archive/issue_comments_182768.json:
```json
{
    "body": "<a id='comment:58'></a>\nnthiery has just rebased #14102, hasn't he?",
    "created_at": "2013-08-19T15:50:06Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182768",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:58'></a>
nthiery has just rebased #14102, hasn't he?



---

archive/issue_comments_182769.json:
```json
{
    "body": "<a id='comment:59'></a>\nYep. Thanks Nicolas.",
    "created_at": "2013-08-19T15:56:35Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182769",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:59'></a>
Yep. Thanks Nicolas.



---

archive/attachments_020557.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775_more_review-mz.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775_more_review-mz.patch",
    "created_at": "2013-08-20T14:12:17Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch",
    "user": "https://github.com/zabrocki"
}
```



---

archive/issue_comments_182770.json:
```json
{
    "body": "<a id='comment:60'></a>\n**Attachment:** [trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)\n\nI added a number of doc changes consisting of mostly cleaning up references, a few missing colons, some extra imports caught by pyflakes, corrections of broken links, etc.  Please check my changes again carefully.",
    "created_at": "2013-08-20T14:12:17Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182770",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:60'></a>
**Attachment:** [trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)

I added a number of doc changes consisting of mostly cleaning up references, a few missing colons, some extra imports caught by pyflakes, corrections of broken links, etc.  Please check my changes again carefully.



---

archive/issue_events_129294.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T14:12:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129294"
}
```



---

archive/issue_events_129295.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T14:12:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129295"
}
```



---

archive/issue_comments_182771.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,3 +17,4 @@\n * [attachment:trac_14775-qfolded.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch\u200b)\n * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n * [attachment:trac_14775-response-to-mike-dg.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch\u200b)\n+* [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)\n``````\n",
    "created_at": "2013-08-20T14:12:17Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182771",
    "user": "https://github.com/zabrocki"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,3 +17,4 @@
 * [attachment:trac_14775-qfolded.patch​](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch​)
 * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)
 * [attachment:trac_14775-response-to-mike-dg.patch​](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch​)
+* [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)
``````




---

archive/issue_events_129296.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T14:12:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129296"
}
```



---

archive/issue_events_129297.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T14:12:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129297"
}
```



---

archive/attachments_020558.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-final-changes-dg.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-final-changes-dg.patch",
    "created_at": "2013-08-20T14:44:54Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182772.json:
```json
{
    "body": "**Attachment:** [trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)",
    "created_at": "2013-08-20T14:44:54Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182772",
    "user": "https://github.com/darijgr"
}
```

**Attachment:** [trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)



---

archive/issue_comments_182773.json:
```json
{
    "body": "<a id='comment:62'></a>\nThe changes are good except for one typo you can't help making. I have fixed the typo and added a couple more docstring changes. Once you've looked into them, this is positive_review, right?\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b trac_14775-docstring_tweak-ts.patch\u200b trac_14775-response-to-mike-dg.patch\u200b trac_14775_more_review-mz.patch trac_14775-final-changes-dg.patch",
    "created_at": "2013-08-20T14:46:36Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182773",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:62'></a>
The changes are good except for one typo you can't help making. I have fixed the typo and added a couple more docstring changes. Once you've looked into them, this is positive_review, right?

patchbot:

apply trac_14775-qfolded.patch​ trac_14775-docstring_tweak-ts.patch​ trac_14775-response-to-mike-dg.patch​ trac_14775_more_review-mz.patch trac_14775-final-changes-dg.patch



---

archive/issue_comments_182774.json:
```json
{
    "body": "**Changing reviewer** from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Mike Zabrocki\".",
    "created_at": "2013-08-20T14:47:14Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182774",
    "user": "https://github.com/darijgr"
}
```

**Changing reviewer** from "Travis Scrimshaw" to "Travis Scrimshaw, Mike Zabrocki".



---

archive/issue_comments_182775.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,3 +18,4 @@\n * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n * [attachment:trac_14775-response-to-mike-dg.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch\u200b)\n * [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)\n+* [attachment:trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)\n``````\n",
    "created_at": "2013-08-20T14:47:14Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182775",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,3 +18,4 @@
 * [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)
 * [attachment:trac_14775-response-to-mike-dg.patch​](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch​)
 * [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)
+* [attachment:trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)
``````




---

archive/issue_comments_182776.json:
```json
{
    "body": "<a id='comment:64'></a>\nI'm good with the changes. If Mike is also happy with the final version of the patch, Darij, could you fold all of the patches together? Thanks.",
    "created_at": "2013-08-20T15:17:45Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182776",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>
I'm good with the changes. If Mike is also happy with the final version of the patch, Darij, could you fold all of the patches together? Thanks.



---

archive/issue_comments_182777.json:
```json
{
    "body": "<a id='comment:65'></a>\nYou'd think that doing that twice that it was on purpose, but it isn't!  Mea culpa!\n\nI approve.",
    "created_at": "2013-08-20T15:33:30Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182777",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:65'></a>
You'd think that doing that twice that it was on purpose, but it isn't!  Mea culpa!

I approve.



---

archive/issue_events_129298.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T15:33:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129298"
}
```



---

archive/issue_events_129299.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-08-20T15:33:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129299"
}
```



---

archive/issue_comments_182778.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,8 +14,4 @@\n \n Apply:\n \n-* [attachment:trac_14775-qfolded.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch\u200b)\n-* [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)\n-* [attachment:trac_14775-response-to-mike-dg.patch\u200b](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch\u200b)\n-* [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)\n-* [attachment:trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)\n+* [attachment:trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)\n``````\n",
    "created_at": "2013-08-20T15:44:19Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182778",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,8 +14,4 @@
 
 Apply:
 
-* [attachment:trac_14775-qfolded.patch​](https://github.com/sagemath/sage/files/ticket14775/f8d2f447a264fa365e5b63fde9a40494.patch​)
-* [attachment:trac_14775-docstring_tweak-ts.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-docstring_tweak-ts.patch)
-* [attachment:trac_14775-response-to-mike-dg.patch​](https://github.com/sagemath/sage/files/ticket14775/a64c7d303ee209ea1575ace894198ae5.patch​)
-* [attachment:trac_14775_more_review-mz.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775_more_review-mz.patch)
-* [attachment:trac_14775-final-changes-dg.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-final-changes-dg.patch)
+* [attachment:trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)
``````




---

archive/issue_comments_182779.json:
```json
{
    "body": "<a id='comment:67'></a>\nThanks again, everyone!\n\npatchbot:\n\napply trac_14775-the_big_crunch.patch",
    "created_at": "2013-08-20T15:44:47Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182779",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:67'></a>
Thanks again, everyone!

patchbot:

apply trac_14775-the_big_crunch.patch



---

archive/issue_events_129300.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-21T13:04:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129300"
}
```



---

archive/issue_events_129301.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-21T13:04:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129301"
}
```



---

archive/issue_comments_182780.json:
```json
{
    "body": "<a id='comment:68'></a>\nSorry, but `all changesets qfolded` is not a good commit message, it doesn't describe what the patch does.",
    "created_at": "2013-08-21T13:04:35Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182780",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
Sorry, but `all changesets qfolded` is not a good commit message, it doesn't describe what the patch does.



---

archive/issue_comments_182781.json:
```json
{
    "body": "qfold of all previous patches in this ticket",
    "created_at": "2013-08-21T13:08:08Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182781",
    "user": "https://github.com/darijgr"
}
```

qfold of all previous patches in this ticket



---

archive/attachments_020559.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14775-the_big_crunch.patch",
    "asset_url": "tarball://root/attachments/ticket14775/trac_14775-the_big_crunch.patch",
    "created_at": "2013-08-21T13:08:32Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_182782.json:
```json
{
    "body": "<a id='comment:69'></a>\n**Attachment:** [trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)\n\nCommit message fixed.",
    "created_at": "2013-08-21T13:08:32Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182782",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:69'></a>
**Attachment:** [trac_14775-the_big_crunch.patch](https://github.com/sagemath/sage/files/ticket14775/trac_14775-the_big_crunch.patch)

Commit message fixed.



---

archive/issue_events_129302.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-21T13:08:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129302"
}
```



---

archive/issue_events_129303.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-21T13:08:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129303"
}
```



---

archive/issue_events_129304.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-28T06:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129304"
}
```



---

archive/issue_events_129305.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-28T06:53:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14775#event-129305"
}
```



---

archive/issue_comments_182783.json:
```json
{
    "body": "**Merged:** sage-5.12.beta4",
    "created_at": "2013-08-28T06:53:11Z",
    "issue": "https://github.com/sagemath/sage/issues/14775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14775#issuecomment-182783",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.beta4
