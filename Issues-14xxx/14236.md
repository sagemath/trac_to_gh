# Issue 14236: Use "tar", not "cp -pPRL", to copy files in sage-bdist

archive/issues_014032.json:
```json
{
    "body": "After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.\n\nRelated: #14166.\n\n**Apply** [attachment:14236_bdist.patch] `local/bin`.\n\n**Assignee:** @nexttime\n\n**CC:**  @jhpalmieri\n\n**Reviewer:** John Palmieri\n\n**Author:** Jeroen Demeyer\n\n**Merged:** sage-5.8.beta4\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14236\n\n",
    "closed_at": "2013-03-07T18:27:09Z",
    "created_at": "2013-03-06T13:15:29Z",
    "labels": [
        "component: scripts",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "Use \"tar\", not \"cp -pPRL\", to copy files in sage-bdist",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14236",
    "user": "https://github.com/jdemeyer"
}
```
After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.

Related: #14166.

**Apply** [attachment:14236_bdist.patch] `local/bin`.

**Assignee:** @nexttime

**CC:**  @jhpalmieri

**Reviewer:** John Palmieri

**Author:** Jeroen Demeyer

**Merged:** sage-5.8.beta4

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14236





---

archive/issue_comments_224017.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.\n+\n+Related: #14166.\n``````\n",
    "created_at": "2013-03-06T13:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224017",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.
+
+Related: #14166.
``````




---

archive/issue_comments_224018.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.\n \n Related: #14166.\n+\n+**Apply** [attachment:14236_bdist.patch] `local/bin`.\n``````\n",
    "created_at": "2013-03-06T13:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224018",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.
 
 Related: #14166.
+
+**Apply** [attachment:14236_bdist.patch] `local/bin`.
``````




---

archive/issue_comments_224019.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-03-06T13:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224019",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_224020.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2013-03-06T13:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224020",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_224021.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe patch looks okay to me, and it seems to work, although I have a bit more testing to do.\n\nUnrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share \"$SAGE_ROOT/data\"` in `spkg/install`. Can that cause problems?",
    "created_at": "2013-03-06T19:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224021",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
The patch looks okay to me, and it seems to work, although I have a bit more testing to do.

Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?



---

archive/issue_comments_224022.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jhpalmieri](#comment%3A3):\n> Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share \"$SAGE_ROOT/data\"` in `spkg/install`. Can that cause problems?\n\nUnrelated indeed, but that should also be fixed.",
    "created_at": "2013-03-06T20:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [jhpalmieri](#comment%3A3):
> Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?

Unrelated indeed, but that should also be fixed.



---

archive/issue_comments_224023.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [14236_bdist.patch](tarball://root/attachments/some-uuid/ticket14236/14236_bdist.patch) by @jhpalmieri created at 2013-03-06 23:30:55\n\nThis looks good to me. I'll try it out on OpenSolaris just to make sure. By the way, is there a good reason why the symbolic link `data` is not in the root repo?",
    "created_at": "2013-03-06T23:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224023",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Attachment [14236_bdist.patch](tarball://root/attachments/some-uuid/ticket14236/14236_bdist.patch) by @jhpalmieri created at 2013-03-06 23:30:55

This looks good to me. I'll try it out on OpenSolaris just to make sure. By the way, is there a good reason why the symbolic link `data` is not in the root repo?



---

archive/issue_comments_224024.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-03-07T02:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224024",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_224025.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2013-03-07T02:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224025",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_224026.json:
```json
{
    "body": "<a id='comment:7'></a>\nI also added a check in the release management script that the bdist repositories are clean (i.e. `hg status` shows nothing). This would prevent this problem in the future.",
    "created_at": "2013-03-07T08:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224026",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I also added a check in the release management script that the bdist repositories are clean (i.e. `hg status` shows nothing). This would prevent this problem in the future.



---

archive/issue_comments_224027.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-03-07T18:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224027",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_events_046473.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-07T18:27:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14236#event-46473"
}
```



---

archive/issue_comments_224028.json:
```json
{
    "body": "**Merged:** sage-5.8.beta4",
    "created_at": "2013-03-07T18:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14236#issuecomment-224028",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.8.beta4
