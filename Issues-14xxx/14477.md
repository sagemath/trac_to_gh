# Issue 14477: Graph database query results should be sorted

archive/issues_014273.json:
```json
{
    "body": "Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4 (#14423), the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):\n\n```\nsage -t --long devel/sage/sage/graphs/graph_database.py\n**********************************************************************\nFile \"devel/sage/sage/graphs/graph_database.py\", line 932, in sage.graphs.graph_database.GraphDatabase.query\nFailed example:\n    q.show()\nExpected:\n    Graph6               Num Vertices         Degree Sequence     \n    ------------------------------------------------------------\n    @                    1                    [0]                 \n    A?                   2                    [0, 0]              \n    A_                   2                    [1, 1]              \n    B?                   3                    [0, 0, 0]           \n    BG                   3                    [0, 1, 1]           \n    BW                   3                    [1, 1, 2]           \n    Bw                   3                    [2, 2, 2]           \n    C?                   4                    [0, 0, 0, 0]        \n    C@                   4                    [0, 0, 1, 1]        \n    CB                   4                    [0, 1, 1, 2]        \n    CK                   4                    [1, 1, 1, 1]        \n    CF                   4                    [1, 1, 1, 3]        \n    CJ                   4                    [0, 2, 2, 2]        \n    CL                   4                    [1, 1, 2, 2]        \n    CN                   4                    [1, 2, 2, 3]        \n    C]                   4                    [2, 2, 2, 2]        \n    C^                   4                    [2, 2, 3, 3]        \n    D??                  5                    [0, 0, 0, 0, 0]     \n    D?C                  5                    [0, 0, 0, 1, 1]     \n    D?K                  5                    [0, 0, 1, 1, 2]     \n    D@O                  5                    [0, 1, 1, 1, 1]     \n    D?[                  5                    [0, 1, 1, 1, 3]     \n    D@K                  5                    [0, 0, 2, 2, 2]     \n    D_K                  5                    [1, 1, 1, 1, 2]     \n    D@S                  5                    [0, 1, 1, 2, 2]     \n    D?{                  5                    [1, 1, 1, 1, 4]     \n    D@[                  5                    [0, 1, 2, 2, 3]     \n    D@s                  5                    [1, 1, 1, 2, 3]     \n    DBg                  5                    [1, 1, 2, 2, 2]     \n    DBW                  5                    [0, 2, 2, 2, 2]     \n    D`K                  5                    [1, 1, 2, 2, 2]     \n    D@{                  5                    [1, 1, 2, 2, 4]     \n    DB[                  5                    [0, 2, 2, 3, 3]     \n    DIk                  5                    [1, 2, 2, 2, 3]     \n    DBk                  5                    [1, 1, 2, 3, 3]     \n    DK[                  5                    [1, 2, 2, 2, 3]     \n    DLo                  5                    [2, 2, 2, 2, 2]     \n    E???                 6                    [0, 0, 0, 0, 0, 0]  \n    E??G                 6                    [0, 0, 0, 0, 1, 1]  \n    E??W                 6                    [0, 0, 0, 1, 1, 2]  \n    E?C_                 6                    [0, 0, 1, 1, 1, 1]  \n    E??w                 6                    [0, 0, 1, 1, 1, 3]  \n    E?CW                 6                    [0, 0, 0, 2, 2, 2]  \n    EG?W                 6                    [0, 1, 1, 1, 1, 2]  \n    E?Cg                 6                    [0, 0, 1, 1, 2, 2]  \n    E@Q?                 6                    [1, 1, 1, 1, 1, 1]  \n    E?@w                 6                    [0, 1, 1, 1, 1, 4]  \n    E?Cw                 6                    [0, 0, 1, 2, 2, 3]  \n    E?Dg                 6                    [0, 1, 1, 1, 2, 3]  \n    E_?w                 6                    [1, 1, 1, 1, 1, 3]  \n    E?LO                 6                    [0, 1, 1, 2, 2, 2]  \n    E?N?                 6                    [1, 1, 1, 1, 2, 2]  \n    E?Ko                 6                    [0, 0, 2, 2, 2, 2]  \n    EGCW                 6                    [0, 1, 1, 2, 2, 2]  \n    E_Cg                 6                    [1, 1, 1, 1, 2, 2]  \n    E?Bw                 6                    [1, 1, 1, 1, 1, 5]  \n    E?Dw                 6                    [0, 1, 1, 2, 2, 4]  \n    E?Fg                 6                    [1, 1, 1, 1, 2, 4]  \n    E?Kw                 6                    [0, 0, 2, 2, 3, 3]  \n    E@HW                 6                    [0, 1, 2, 2, 2, 3]  \n    E@FG                 6                    [1, 1, 1, 2, 2, 3]  \n    E?LW                 6                    [0, 1, 1, 2, 3, 3]  \n    E?NG                 6                    [1, 1, 1, 1, 3, 3]  \n    E@N?                 6                    [1, 1, 2, 2, 2, 2]  \n    E@YO                 6                    [1, 1, 2, 2, 2, 2]  \n    E@QW                 6                    [1, 1, 1, 2, 2, 3]  \n    E@Ow                 6                    [0, 1, 2, 2, 2, 3]  \n    E_Cw                 6                    [1, 1, 1, 2, 2, 3]  \n    E@T_                 6                    [0, 2, 2, 2, 2, 2]  \n    E_Ko                 6                    [1, 1, 2, 2, 2, 2]  \n    F????                7                    [0, 0, 0, 0, 0, 0, 0]\n    F???G                7                    [0, 0, 0, 0, 0, 1, 1]\n    F???W                7                    [0, 0, 0, 0, 1, 1, 2]\n    F??G_                7                    [0, 0, 0, 1, 1, 1, 1]\n    F???w                7                    [0, 0, 0, 1, 1, 1, 3]\n    F??GW                7                    [0, 0, 0, 0, 2, 2, 2]\n    F@??W                7                    [0, 0, 1, 1, 1, 1, 2]\n    F??Gg                7                    [0, 0, 0, 1, 1, 2, 2]\n    F?Ca?                7                    [0, 1, 1, 1, 1, 1, 1]\n    F??@w                7                    [0, 0, 1, 1, 1, 1, 4]\n    F??Gw                7                    [0, 0, 0, 1, 2, 2, 3]\n    F??Hg                7                    [0, 0, 1, 1, 1, 2, 3]\n    FG??w                7                    [0, 1, 1, 1, 1, 1, 3]\n    F??XO                7                    [0, 0, 1, 1, 2, 2, 2]\n    F??Z?                7                    [0, 1, 1, 1, 1, 2, 2]\n    F??Wo                7                    [0, 0, 0, 2, 2, 2, 2]\n    F@?GW                7                    [0, 0, 1, 1, 2, 2, 2]\n    FK??W                7                    [1, 1, 1, 1, 1, 1, 2]\n    FG?Gg                7                    [0, 1, 1, 1, 1, 2, 2]\n    F??Bw                7                    [0, 1, 1, 1, 1, 1, 5]\n    F??Hw                7                    [0, 0, 1, 1, 2, 2, 4]\n    F??Jg                7                    [0, 1, 1, 1, 1, 2, 4]\n    F_?@w                7                    [1, 1, 1, 1, 1, 1, 4]\n    F??Ww                7                    [0, 0, 0, 2, 2, 3, 3]\n    F?CPW                7                    [0, 0, 1, 2, 2, 2, 3]\n    F?CJG                7                    [0, 1, 1, 1, 2, 2, 3]\n    F??^?                7                    [1, 1, 1, 1, 1, 2, 3]\n    F??XW                7                    [0, 0, 1, 1, 2, 3, 3]\n    F??ZG                7                    [0, 1, 1, 1, 1, 3, 3]\n    F?CZ?                7                    [0, 1, 1, 2, 2, 2, 2]\n    F_?Hg                7                    [1, 1, 1, 1, 1, 2, 3]\n    F?CqO                7                    [0, 1, 1, 2, 2, 2, 2]\n    F?CaW                7                    [0, 1, 1, 1, 2, 2, 3]\n    F?LCG                7                    [1, 1, 1, 1, 2, 2, 2]\n    F?C_w                7                    [0, 0, 1, 2, 2, 2, 3]\n    FG?Gw                7                    [0, 1, 1, 1, 2, 2, 3]\n    F?Ch_                7                    [0, 0, 2, 2, 2, 2, 2]\n    FG?Wo                7                    [0, 1, 1, 2, 2, 2, 2]\n    F_?XO                7                    [1, 1, 1, 1, 2, 2, 2]\n    FK?GW                7                    [1, 1, 1, 1, 2, 2, 2]\nGot:\n    Graph6               Num Vertices         Degree Sequence     \n    ------------------------------------------------------------\n    @                    1                    [0]                 \n    A?                   2                    [0, 0]              \n    B?                   3                    [0, 0, 0]           \n    C?                   4                    [0, 0, 0, 0]        \n    D??                  5                    [0, 0, 0, 0, 0]     \n    E???                 6                    [0, 0, 0, 0, 0, 0]  \n    F????                7                    [0, 0, 0, 0, 0, 0, 0]\n    A_                   2                    [1, 1]              \n    BG                   3                    [0, 1, 1]           \n    C@                   4                    [0, 0, 1, 1]        \n    D?C                  5                    [0, 0, 0, 1, 1]     \n    E??G                 6                    [0, 0, 0, 0, 1, 1]  \n    F???G                7                    [0, 0, 0, 0, 0, 1, 1]\n    BW                   3                    [1, 1, 2]           \n    CB                   4                    [0, 1, 1, 2]        \n    CK                   4                    [1, 1, 1, 1]        \n    D?K                  5                    [0, 0, 1, 1, 2]     \n    D@O                  5                    [0, 1, 1, 1, 1]     \n    E??W                 6                    [0, 0, 0, 1, 1, 2]  \n    E?C_                 6                    [0, 0, 1, 1, 1, 1]  \n    F???W                7                    [0, 0, 0, 0, 1, 1, 2]\n    F??G_                7                    [0, 0, 0, 1, 1, 1, 1]\n    Bw                   3                    [2, 2, 2]           \n    CF                   4                    [1, 1, 1, 3]        \n    CJ                   4                    [0, 2, 2, 2]        \n    CL                   4                    [1, 1, 2, 2]        \n    D?[                  5                    [0, 1, 1, 1, 3]     \n    D@K                  5                    [0, 0, 2, 2, 2]     \n    D_K                  5                    [1, 1, 1, 1, 2]     \n    D@S                  5                    [0, 1, 1, 2, 2]     \n    E??w                 6                    [0, 0, 1, 1, 1, 3]  \n    E?CW                 6                    [0, 0, 0, 2, 2, 2]  \n    EG?W                 6                    [0, 1, 1, 1, 1, 2]  \n    E?Cg                 6                    [0, 0, 1, 1, 2, 2]  \n    E@Q?                 6                    [1, 1, 1, 1, 1, 1]  \n    F???w                7                    [0, 0, 0, 1, 1, 1, 3]\n    F??GW                7                    [0, 0, 0, 0, 2, 2, 2]\n    F@??W                7                    [0, 0, 1, 1, 1, 1, 2]\n    F??Gg                7                    [0, 0, 0, 1, 1, 2, 2]\n    F?Ca?                7                    [0, 1, 1, 1, 1, 1, 1]\n    CN                   4                    [1, 2, 2, 3]        \n    C]                   4                    [2, 2, 2, 2]        \n    D?{                  5                    [1, 1, 1, 1, 4]     \n    D@[                  5                    [0, 1, 2, 2, 3]     \n    D@s                  5                    [1, 1, 1, 2, 3]     \n    DBg                  5                    [1, 1, 2, 2, 2]     \n    DBW                  5                    [0, 2, 2, 2, 2]     \n    D`K                  5                    [1, 1, 2, 2, 2]     \n    E?@w                 6                    [0, 1, 1, 1, 1, 4]  \n    E?Cw                 6                    [0, 0, 1, 2, 2, 3]  \n    E?Dg                 6                    [0, 1, 1, 1, 2, 3]  \n    E_?w                 6                    [1, 1, 1, 1, 1, 3]  \n    E?LO                 6                    [0, 1, 1, 2, 2, 2]  \n    E?N?                 6                    [1, 1, 1, 1, 2, 2]  \n    E?Ko                 6                    [0, 0, 2, 2, 2, 2]  \n    EGCW                 6                    [0, 1, 1, 2, 2, 2]  \n    E_Cg                 6                    [1, 1, 1, 1, 2, 2]  \n    F??@w                7                    [0, 0, 1, 1, 1, 1, 4]\n    F??Gw                7                    [0, 0, 0, 1, 2, 2, 3]\n    F??Hg                7                    [0, 0, 1, 1, 1, 2, 3]\n    FG??w                7                    [0, 1, 1, 1, 1, 1, 3]\n    F??XO                7                    [0, 0, 1, 1, 2, 2, 2]\n    F??Z?                7                    [0, 1, 1, 1, 1, 2, 2]\n    F??Wo                7                    [0, 0, 0, 2, 2, 2, 2]\n    F@?GW                7                    [0, 0, 1, 1, 2, 2, 2]\n    FK??W                7                    [1, 1, 1, 1, 1, 1, 2]\n    FG?Gg                7                    [0, 1, 1, 1, 1, 2, 2]\n    C^                   4                    [2, 2, 3, 3]        \n    D@{                  5                    [1, 1, 2, 2, 4]     \n    DB[                  5                    [0, 2, 2, 3, 3]     \n    DIk                  5                    [1, 2, 2, 2, 3]     \n    DBk                  5                    [1, 1, 2, 3, 3]     \n    DK[                  5                    [1, 2, 2, 2, 3]     \n    DLo                  5                    [2, 2, 2, 2, 2]     \n    E?Bw                 6                    [1, 1, 1, 1, 1, 5]  \n    E?Dw                 6                    [0, 1, 1, 2, 2, 4]  \n    E?Fg                 6                    [1, 1, 1, 1, 2, 4]  \n    E?Kw                 6                    [0, 0, 2, 2, 3, 3]  \n    E@HW                 6                    [0, 1, 2, 2, 2, 3]  \n    E@FG                 6                    [1, 1, 1, 2, 2, 3]  \n    E?LW                 6                    [0, 1, 1, 2, 3, 3]  \n    E?NG                 6                    [1, 1, 1, 1, 3, 3]  \n    E@N?                 6                    [1, 1, 2, 2, 2, 2]  \n    E@YO                 6                    [1, 1, 2, 2, 2, 2]  \n    E@QW                 6                    [1, 1, 1, 2, 2, 3]  \n    E@Ow                 6                    [0, 1, 2, 2, 2, 3]  \n    E_Cw                 6                    [1, 1, 1, 2, 2, 3]  \n    E@T_                 6                    [0, 2, 2, 2, 2, 2]  \n    E_Ko                 6                    [1, 1, 2, 2, 2, 2]  \n    F??Bw                7                    [0, 1, 1, 1, 1, 1, 5]\n    F??Hw                7                    [0, 0, 1, 1, 2, 2, 4]\n    F??Jg                7                    [0, 1, 1, 1, 1, 2, 4]\n    F_?@w                7                    [1, 1, 1, 1, 1, 1, 4]\n    F??Ww                7                    [0, 0, 0, 2, 2, 3, 3]\n    F?CPW                7                    [0, 0, 1, 2, 2, 2, 3]\n    F?CJG                7                    [0, 1, 1, 1, 2, 2, 3]\n    F??^?                7                    [1, 1, 1, 1, 1, 2, 3]\n    F??XW                7                    [0, 0, 1, 1, 2, 3, 3]\n    F??ZG                7                    [0, 1, 1, 1, 1, 3, 3]\n    F?CZ?                7                    [0, 1, 1, 2, 2, 2, 2]\n    F_?Hg                7                    [1, 1, 1, 1, 1, 2, 3]\n    F?CqO                7                    [0, 1, 1, 2, 2, 2, 2]\n    F?CaW                7                    [0, 1, 1, 1, 2, 2, 3]\n    F?LCG                7                    [1, 1, 1, 1, 2, 2, 2]\n    F?C_w                7                    [0, 0, 1, 2, 2, 2, 3]\n    FG?Gw                7                    [0, 1, 1, 1, 2, 2, 3]\n    F?Ch_                7                    [0, 0, 2, 2, 2, 2, 2]\n    FG?Wo                7                    [0, 1, 1, 2, 2, 2, 2]\n    F_?XO                7                    [1, 1, 1, 1, 2, 2, 2]\n    FK?GW                7                    [1, 1, 1, 1, 2, 2, 2]\n**********************************************************************\n```\n\n**Assignee:** @williamstein\n\n**CC:**  @ohanar @roed314\n\n**Reviewer:** Volker Braun, Jeroen Demeyer\n\n**Author:** R. Andrew Ohana\n\n**Merged:** sage-5.10.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/14477\n\n",
    "closed_at": "2013-04-28T10:33:41Z",
    "created_at": "2013-04-22T20:35:21Z",
    "labels": [
        "component: packages: huge",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "title": "Graph database query results should be sorted",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/14477",
    "user": "https://github.com/jdemeyer"
}
```
Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4 (#14423), the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):

```
sage -t --long devel/sage/sage/graphs/graph_database.py
**********************************************************************
File "devel/sage/sage/graphs/graph_database.py", line 932, in sage.graphs.graph_database.GraphDatabase.query
Failed example:
    q.show()
Expected:
    Graph6               Num Vertices         Degree Sequence     
    ------------------------------------------------------------
    @                    1                    [0]                 
    A?                   2                    [0, 0]              
    A_                   2                    [1, 1]              
    B?                   3                    [0, 0, 0]           
    BG                   3                    [0, 1, 1]           
    BW                   3                    [1, 1, 2]           
    Bw                   3                    [2, 2, 2]           
    C?                   4                    [0, 0, 0, 0]        
    C@                   4                    [0, 0, 1, 1]        
    CB                   4                    [0, 1, 1, 2]        
    CK                   4                    [1, 1, 1, 1]        
    CF                   4                    [1, 1, 1, 3]        
    CJ                   4                    [0, 2, 2, 2]        
    CL                   4                    [1, 1, 2, 2]        
    CN                   4                    [1, 2, 2, 3]        
    C]                   4                    [2, 2, 2, 2]        
    C^                   4                    [2, 2, 3, 3]        
    D??                  5                    [0, 0, 0, 0, 0]     
    D?C                  5                    [0, 0, 0, 1, 1]     
    D?K                  5                    [0, 0, 1, 1, 2]     
    D@O                  5                    [0, 1, 1, 1, 1]     
    D?[                  5                    [0, 1, 1, 1, 3]     
    D@K                  5                    [0, 0, 2, 2, 2]     
    D_K                  5                    [1, 1, 1, 1, 2]     
    D@S                  5                    [0, 1, 1, 2, 2]     
    D?{                  5                    [1, 1, 1, 1, 4]     
    D@[                  5                    [0, 1, 2, 2, 3]     
    D@s                  5                    [1, 1, 1, 2, 3]     
    DBg                  5                    [1, 1, 2, 2, 2]     
    DBW                  5                    [0, 2, 2, 2, 2]     
    D`K                  5                    [1, 1, 2, 2, 2]     
    D@{                  5                    [1, 1, 2, 2, 4]     
    DB[                  5                    [0, 2, 2, 3, 3]     
    DIk                  5                    [1, 2, 2, 2, 3]     
    DBk                  5                    [1, 1, 2, 3, 3]     
    DK[                  5                    [1, 2, 2, 2, 3]     
    DLo                  5                    [2, 2, 2, 2, 2]     
    E???                 6                    [0, 0, 0, 0, 0, 0]  
    E??G                 6                    [0, 0, 0, 0, 1, 1]  
    E??W                 6                    [0, 0, 0, 1, 1, 2]  
    E?C_                 6                    [0, 0, 1, 1, 1, 1]  
    E??w                 6                    [0, 0, 1, 1, 1, 3]  
    E?CW                 6                    [0, 0, 0, 2, 2, 2]  
    EG?W                 6                    [0, 1, 1, 1, 1, 2]  
    E?Cg                 6                    [0, 0, 1, 1, 2, 2]  
    E@Q?                 6                    [1, 1, 1, 1, 1, 1]  
    E?@w                 6                    [0, 1, 1, 1, 1, 4]  
    E?Cw                 6                    [0, 0, 1, 2, 2, 3]  
    E?Dg                 6                    [0, 1, 1, 1, 2, 3]  
    E_?w                 6                    [1, 1, 1, 1, 1, 3]  
    E?LO                 6                    [0, 1, 1, 2, 2, 2]  
    E?N?                 6                    [1, 1, 1, 1, 2, 2]  
    E?Ko                 6                    [0, 0, 2, 2, 2, 2]  
    EGCW                 6                    [0, 1, 1, 2, 2, 2]  
    E_Cg                 6                    [1, 1, 1, 1, 2, 2]  
    E?Bw                 6                    [1, 1, 1, 1, 1, 5]  
    E?Dw                 6                    [0, 1, 1, 2, 2, 4]  
    E?Fg                 6                    [1, 1, 1, 1, 2, 4]  
    E?Kw                 6                    [0, 0, 2, 2, 3, 3]  
    E@HW                 6                    [0, 1, 2, 2, 2, 3]  
    E@FG                 6                    [1, 1, 1, 2, 2, 3]  
    E?LW                 6                    [0, 1, 1, 2, 3, 3]  
    E?NG                 6                    [1, 1, 1, 1, 3, 3]  
    E@N?                 6                    [1, 1, 2, 2, 2, 2]  
    E@YO                 6                    [1, 1, 2, 2, 2, 2]  
    E@QW                 6                    [1, 1, 1, 2, 2, 3]  
    E@Ow                 6                    [0, 1, 2, 2, 2, 3]  
    E_Cw                 6                    [1, 1, 1, 2, 2, 3]  
    E@T_                 6                    [0, 2, 2, 2, 2, 2]  
    E_Ko                 6                    [1, 1, 2, 2, 2, 2]  
    F????                7                    [0, 0, 0, 0, 0, 0, 0]
    F???G                7                    [0, 0, 0, 0, 0, 1, 1]
    F???W                7                    [0, 0, 0, 0, 1, 1, 2]
    F??G_                7                    [0, 0, 0, 1, 1, 1, 1]
    F???w                7                    [0, 0, 0, 1, 1, 1, 3]
    F??GW                7                    [0, 0, 0, 0, 2, 2, 2]
    F@??W                7                    [0, 0, 1, 1, 1, 1, 2]
    F??Gg                7                    [0, 0, 0, 1, 1, 2, 2]
    F?Ca?                7                    [0, 1, 1, 1, 1, 1, 1]
    F??@w                7                    [0, 0, 1, 1, 1, 1, 4]
    F??Gw                7                    [0, 0, 0, 1, 2, 2, 3]
    F??Hg                7                    [0, 0, 1, 1, 1, 2, 3]
    FG??w                7                    [0, 1, 1, 1, 1, 1, 3]
    F??XO                7                    [0, 0, 1, 1, 2, 2, 2]
    F??Z?                7                    [0, 1, 1, 1, 1, 2, 2]
    F??Wo                7                    [0, 0, 0, 2, 2, 2, 2]
    F@?GW                7                    [0, 0, 1, 1, 2, 2, 2]
    FK??W                7                    [1, 1, 1, 1, 1, 1, 2]
    FG?Gg                7                    [0, 1, 1, 1, 1, 2, 2]
    F??Bw                7                    [0, 1, 1, 1, 1, 1, 5]
    F??Hw                7                    [0, 0, 1, 1, 2, 2, 4]
    F??Jg                7                    [0, 1, 1, 1, 1, 2, 4]
    F_?@w                7                    [1, 1, 1, 1, 1, 1, 4]
    F??Ww                7                    [0, 0, 0, 2, 2, 3, 3]
    F?CPW                7                    [0, 0, 1, 2, 2, 2, 3]
    F?CJG                7                    [0, 1, 1, 1, 2, 2, 3]
    F??^?                7                    [1, 1, 1, 1, 1, 2, 3]
    F??XW                7                    [0, 0, 1, 1, 2, 3, 3]
    F??ZG                7                    [0, 1, 1, 1, 1, 3, 3]
    F?CZ?                7                    [0, 1, 1, 2, 2, 2, 2]
    F_?Hg                7                    [1, 1, 1, 1, 1, 2, 3]
    F?CqO                7                    [0, 1, 1, 2, 2, 2, 2]
    F?CaW                7                    [0, 1, 1, 1, 2, 2, 3]
    F?LCG                7                    [1, 1, 1, 1, 2, 2, 2]
    F?C_w                7                    [0, 0, 1, 2, 2, 2, 3]
    FG?Gw                7                    [0, 1, 1, 1, 2, 2, 3]
    F?Ch_                7                    [0, 0, 2, 2, 2, 2, 2]
    FG?Wo                7                    [0, 1, 1, 2, 2, 2, 2]
    F_?XO                7                    [1, 1, 1, 1, 2, 2, 2]
    FK?GW                7                    [1, 1, 1, 1, 2, 2, 2]
Got:
    Graph6               Num Vertices         Degree Sequence     
    ------------------------------------------------------------
    @                    1                    [0]                 
    A?                   2                    [0, 0]              
    B?                   3                    [0, 0, 0]           
    C?                   4                    [0, 0, 0, 0]        
    D??                  5                    [0, 0, 0, 0, 0]     
    E???                 6                    [0, 0, 0, 0, 0, 0]  
    F????                7                    [0, 0, 0, 0, 0, 0, 0]
    A_                   2                    [1, 1]              
    BG                   3                    [0, 1, 1]           
    C@                   4                    [0, 0, 1, 1]        
    D?C                  5                    [0, 0, 0, 1, 1]     
    E??G                 6                    [0, 0, 0, 0, 1, 1]  
    F???G                7                    [0, 0, 0, 0, 0, 1, 1]
    BW                   3                    [1, 1, 2]           
    CB                   4                    [0, 1, 1, 2]        
    CK                   4                    [1, 1, 1, 1]        
    D?K                  5                    [0, 0, 1, 1, 2]     
    D@O                  5                    [0, 1, 1, 1, 1]     
    E??W                 6                    [0, 0, 0, 1, 1, 2]  
    E?C_                 6                    [0, 0, 1, 1, 1, 1]  
    F???W                7                    [0, 0, 0, 0, 1, 1, 2]
    F??G_                7                    [0, 0, 0, 1, 1, 1, 1]
    Bw                   3                    [2, 2, 2]           
    CF                   4                    [1, 1, 1, 3]        
    CJ                   4                    [0, 2, 2, 2]        
    CL                   4                    [1, 1, 2, 2]        
    D?[                  5                    [0, 1, 1, 1, 3]     
    D@K                  5                    [0, 0, 2, 2, 2]     
    D_K                  5                    [1, 1, 1, 1, 2]     
    D@S                  5                    [0, 1, 1, 2, 2]     
    E??w                 6                    [0, 0, 1, 1, 1, 3]  
    E?CW                 6                    [0, 0, 0, 2, 2, 2]  
    EG?W                 6                    [0, 1, 1, 1, 1, 2]  
    E?Cg                 6                    [0, 0, 1, 1, 2, 2]  
    E@Q?                 6                    [1, 1, 1, 1, 1, 1]  
    F???w                7                    [0, 0, 0, 1, 1, 1, 3]
    F??GW                7                    [0, 0, 0, 0, 2, 2, 2]
    F@??W                7                    [0, 0, 1, 1, 1, 1, 2]
    F??Gg                7                    [0, 0, 0, 1, 1, 2, 2]
    F?Ca?                7                    [0, 1, 1, 1, 1, 1, 1]
    CN                   4                    [1, 2, 2, 3]        
    C]                   4                    [2, 2, 2, 2]        
    D?{                  5                    [1, 1, 1, 1, 4]     
    D@[                  5                    [0, 1, 2, 2, 3]     
    D@s                  5                    [1, 1, 1, 2, 3]     
    DBg                  5                    [1, 1, 2, 2, 2]     
    DBW                  5                    [0, 2, 2, 2, 2]     
    D`K                  5                    [1, 1, 2, 2, 2]     
    E?@w                 6                    [0, 1, 1, 1, 1, 4]  
    E?Cw                 6                    [0, 0, 1, 2, 2, 3]  
    E?Dg                 6                    [0, 1, 1, 1, 2, 3]  
    E_?w                 6                    [1, 1, 1, 1, 1, 3]  
    E?LO                 6                    [0, 1, 1, 2, 2, 2]  
    E?N?                 6                    [1, 1, 1, 1, 2, 2]  
    E?Ko                 6                    [0, 0, 2, 2, 2, 2]  
    EGCW                 6                    [0, 1, 1, 2, 2, 2]  
    E_Cg                 6                    [1, 1, 1, 1, 2, 2]  
    F??@w                7                    [0, 0, 1, 1, 1, 1, 4]
    F??Gw                7                    [0, 0, 0, 1, 2, 2, 3]
    F??Hg                7                    [0, 0, 1, 1, 1, 2, 3]
    FG??w                7                    [0, 1, 1, 1, 1, 1, 3]
    F??XO                7                    [0, 0, 1, 1, 2, 2, 2]
    F??Z?                7                    [0, 1, 1, 1, 1, 2, 2]
    F??Wo                7                    [0, 0, 0, 2, 2, 2, 2]
    F@?GW                7                    [0, 0, 1, 1, 2, 2, 2]
    FK??W                7                    [1, 1, 1, 1, 1, 1, 2]
    FG?Gg                7                    [0, 1, 1, 1, 1, 2, 2]
    C^                   4                    [2, 2, 3, 3]        
    D@{                  5                    [1, 1, 2, 2, 4]     
    DB[                  5                    [0, 2, 2, 3, 3]     
    DIk                  5                    [1, 2, 2, 2, 3]     
    DBk                  5                    [1, 1, 2, 3, 3]     
    DK[                  5                    [1, 2, 2, 2, 3]     
    DLo                  5                    [2, 2, 2, 2, 2]     
    E?Bw                 6                    [1, 1, 1, 1, 1, 5]  
    E?Dw                 6                    [0, 1, 1, 2, 2, 4]  
    E?Fg                 6                    [1, 1, 1, 1, 2, 4]  
    E?Kw                 6                    [0, 0, 2, 2, 3, 3]  
    E@HW                 6                    [0, 1, 2, 2, 2, 3]  
    E@FG                 6                    [1, 1, 1, 2, 2, 3]  
    E?LW                 6                    [0, 1, 1, 2, 3, 3]  
    E?NG                 6                    [1, 1, 1, 1, 3, 3]  
    E@N?                 6                    [1, 1, 2, 2, 2, 2]  
    E@YO                 6                    [1, 1, 2, 2, 2, 2]  
    E@QW                 6                    [1, 1, 1, 2, 2, 3]  
    E@Ow                 6                    [0, 1, 2, 2, 2, 3]  
    E_Cw                 6                    [1, 1, 1, 2, 2, 3]  
    E@T_                 6                    [0, 2, 2, 2, 2, 2]  
    E_Ko                 6                    [1, 1, 2, 2, 2, 2]  
    F??Bw                7                    [0, 1, 1, 1, 1, 1, 5]
    F??Hw                7                    [0, 0, 1, 1, 2, 2, 4]
    F??Jg                7                    [0, 1, 1, 1, 1, 2, 4]
    F_?@w                7                    [1, 1, 1, 1, 1, 1, 4]
    F??Ww                7                    [0, 0, 0, 2, 2, 3, 3]
    F?CPW                7                    [0, 0, 1, 2, 2, 2, 3]
    F?CJG                7                    [0, 1, 1, 1, 2, 2, 3]
    F??^?                7                    [1, 1, 1, 1, 1, 2, 3]
    F??XW                7                    [0, 0, 1, 1, 2, 3, 3]
    F??ZG                7                    [0, 1, 1, 1, 1, 3, 3]
    F?CZ?                7                    [0, 1, 1, 2, 2, 2, 2]
    F_?Hg                7                    [1, 1, 1, 1, 1, 2, 3]
    F?CqO                7                    [0, 1, 1, 2, 2, 2, 2]
    F?CaW                7                    [0, 1, 1, 1, 2, 2, 3]
    F?LCG                7                    [1, 1, 1, 1, 2, 2, 2]
    F?C_w                7                    [0, 0, 1, 2, 2, 2, 3]
    FG?Gw                7                    [0, 1, 1, 1, 2, 2, 3]
    F?Ch_                7                    [0, 0, 2, 2, 2, 2, 2]
    FG?Wo                7                    [0, 1, 1, 2, 2, 2, 2]
    F_?XO                7                    [1, 1, 1, 1, 2, 2, 2]
    FK?GW                7                    [1, 1, 1, 1, 2, 2, 2]
**********************************************************************
```

**Assignee:** @williamstein

**CC:**  @ohanar @roed314

**Reviewer:** Volker Braun, Jeroen Demeyer

**Author:** R. Andrew Ohana

**Merged:** sage-5.10.beta1

Issue created by migration from https://trac.sagemath.org/ticket/14477





---

archive/issue_comments_176965.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4, the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):\n+Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4 (#14423), the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):\n \n ```\n sage -t --long devel/sage/sage/graphs/graph_database.py\n``````\n",
    "created_at": "2013-04-22T20:36:39Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176965",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4, the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):
+Currently, the ordering of the query results of the graph database is undefined. In fact, upgrading to Python-2.7.4 (#14423), the following happens on the buildbot machine rosemary (RHEL 5.6 x86_64):
 
 ```
 sage -t --long devel/sage/sage/graphs/graph_database.py
``````




---

archive/issue_comments_176966.json:
```json
{
    "body": "<a id='comment:3'></a>\nIsn't this a recurring problem that might be fixed by a `# sort lines` special in the doctesting framework? I.e. just sort the lines (say, alphabetically) before comparing want/got.",
    "created_at": "2013-04-22T20:57:25Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176966",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
Isn't this a recurring problem that might be fixed by a `# sort lines` special in the doctesting framework? I.e. just sort the lines (say, alphabetically) before comparing want/got.



---

archive/issue_comments_176967.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vbraun](#comment%3A3):\n> Isn't this a recurring problem that might be fixed by a `# sort lines` special in the doctesting framework? I.e. just sort the lines (say, alphabetically) before comparing want/got. \n\nThat's certainly doable.  In this case you would probably want to also have two \"header lines.\"",
    "created_at": "2013-04-23T05:04:06Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176967",
    "user": "https://github.com/roed314"
}
```

<a id='comment:4'></a>
Replying to [vbraun](#comment%3A3):
> Isn't this a recurring problem that might be fixed by a `# sort lines` special in the doctesting framework? I.e. just sort the lines (say, alphabetically) before comparing want/got. 

That's certainly doable.  In this case you would probably want to also have two "header lines."



---

archive/issue_comments_176968.json:
```json
{
    "body": "<a id='comment:5'></a>\nMaybe something like `# sort lines[start:stop]`? (So here we would want `# sort lines[2:-1]`.)",
    "created_at": "2013-04-23T05:09:05Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176968",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:5'></a>
Maybe something like `# sort lines[start:stop]`? (So here we would want `# sort lines[2:-1]`.)



---

archive/issue_comments_176969.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [ohanar](#comment%3A5):\n> Maybe something like `# sort lines[start:stop]`? (So here we would want `# sort lines[2:-1]`.)\n\nSounds like a good syntax to me.  While we're at it, it may be worth having something like `#sort list` as well, which sorts based on comma as a separator rather than newlines.",
    "created_at": "2013-04-23T06:11:38Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176969",
    "user": "https://github.com/roed314"
}
```

<a id='comment:6'></a>
Replying to [ohanar](#comment%3A5):
> Maybe something like `# sort lines[start:stop]`? (So here we would want `# sort lines[2:-1]`.)

Sounds like a good syntax to me.  While we're at it, it may be worth having something like `#sort list` as well, which sorts based on comma as a separator rather than newlines.



---

archive/issue_comments_176970.json:
```json
{
    "body": "<a id='comment:7'></a>\nI agree it would be useful to have something like that, but I don't know whether it's the right solution for *this ticket* (it would be the right solution for doctests returning a set).\n\nThe expected output is not in a random order, it's sorted in a particular way. For the user, we should change the code such that the graph database table is always returned in this order.",
    "created_at": "2013-04-23T06:20:22Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176970",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I agree it would be useful to have something like that, but I don't know whether it's the right solution for *this ticket* (it would be the right solution for doctests returning a set).

The expected output is not in a random order, it's sorted in a particular way. For the user, we should change the code such that the graph database table is always returned in this order.



---

archive/issue_comments_176971.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A7):\n> I agree it would be useful to have something like that, but I don't know whether it's the right solution for *this ticket* (it would be the right solution for doctests returning a set).\n> \n> The expected output is not in a random order, it's sorted in a particular way. For the user, we should change the code such that the graph database table is always returned in this order.\n\nAgreed.  It would be nice if the output given to the user were sorted by number of vertices for example (as it is in the expected output).",
    "created_at": "2013-04-23T06:27:28Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176971",
    "user": "https://github.com/roed314"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A7):
> I agree it would be useful to have something like that, but I don't know whether it's the right solution for *this ticket* (it would be the right solution for doctests returning a set).
> 
> The expected output is not in a random order, it's sorted in a particular way. For the user, we should change the code such that the graph database table is always returned in this order.

Agreed.  It would be nice if the output given to the user were sorted by number of vertices for example (as it is in the expected output).



---

archive/issue_events_125837.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-04-23T08:37:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14477#event-125837"
}
```



---

archive/issue_comments_176972.json:
```json
{
    "body": "<a id='comment:9'></a>\nok, made it so that when displaying a graph query that has num_vertices as one of its columns, it will sort by the number of vertices (however, if there are multiple graphs in the query with the same number of vertices, it will still still do its own undefined ordering).\n\nAlternatively it appears as if the graph6 column could be used for a well defined ordering (assuming that the column is in the query), but it completely screws up the current doctest.",
    "created_at": "2013-04-23T08:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176972",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:9'></a>
ok, made it so that when displaying a graph query that has num_vertices as one of its columns, it will sort by the number of vertices (however, if there are multiple graphs in the query with the same number of vertices, it will still still do its own undefined ordering).

Alternatively it appears as if the graph6 column could be used for a well defined ordering (assuming that the column is in the query), but it completely screws up the current doctest.



---

archive/issue_comments_176973.json:
```json
{
    "body": "**Author:** R. Andrew Ohana",
    "created_at": "2013-04-23T08:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176973",
    "user": "https://github.com/ohanar"
}
```

**Author:** R. Andrew Ohana



---

archive/issue_comments_176974.json:
```json
{
    "body": "<a id='comment:10'></a>\nIf possible we should let the db do the sort (`SELECT * FROM table ORDER BY col`) instead of creating an in-memory table and then sorting that ourselves.",
    "created_at": "2013-04-23T09:59:49Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176974",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
If possible we should let the db do the sort (`SELECT * FROM table ORDER BY col`) instead of creating an in-memory table and then sorting that ourselves.



---

archive/issue_comments_176975.json:
```json
{
    "body": "<a id='comment:11'></a>\nok, new patch has the database do the sort -- choose whichever you prefer.",
    "created_at": "2013-04-23T11:00:03Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176975",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:11'></a>
ok, new patch has the database do the sort -- choose whichever you prefer.



---

archive/issue_comments_176976.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'm in favor of the second approach, but there are a few remaining doctest failures\n\n```\nsage -t devel/sage/sage/graphs/generic_graph.py  # 1 doctest failed\nsage -t devel/sage/sage/databases/sql_db.py  # 1 doctest failed\nsage -t devel/sage/sage/graphs/graph.py  # 1 doctest failed\n```",
    "created_at": "2013-04-23T12:26:23Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176976",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
I'm in favor of the second approach, but there are a few remaining doctest failures

```
sage -t devel/sage/sage/graphs/generic_graph.py  # 1 doctest failed
sage -t devel/sage/sage/databases/sql_db.py  # 1 doctest failed
sage -t devel/sage/sage/graphs/graph.py  # 1 doctest failed
```



---

archive/issue_comments_176977.json:
```json
{
    "body": "<a id='comment:13'></a>\n(cc me)",
    "created_at": "2013-04-23T14:12:56Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176977",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
(cc me)



---

archive/attachments_020208.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac14477.2.patch",
    "asset_url": "tarball://root/attachments/ticket14477/trac14477.2.patch",
    "created_at": "2013-04-23T20:14:42Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket14477/trac14477.2.patch",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_176978.json:
```json
{
    "body": "**Attachment:** [trac14477.2.patch](https://github.com/sagemath/sage/files/ticket14477/trac14477.2.patch)\n\napply to sage library",
    "created_at": "2013-04-23T20:14:42Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176978",
    "user": "https://github.com/ohanar"
}
```

**Attachment:** [trac14477.2.patch](https://github.com/sagemath/sage/files/ticket14477/trac14477.2.patch)

apply to sage library



---

archive/issue_comments_176979.json:
```json
{
    "body": "<a id='comment:14'></a>\nok, new patch resolves those doctests",
    "created_at": "2013-04-23T20:15:18Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176979",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:14'></a>
ok, new patch resolves those doctests



---

archive/issue_events_125838.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-24T07:30:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14477#event-125838"
}
```



---

archive/issue_events_125839.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-24T07:30:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14477#event-125839"
}
```



---

archive/issue_comments_176980.json:
```json
{
    "body": "**Reviewer:** Volker Braun, Jeroen Demeyer",
    "created_at": "2013-04-24T07:30:52Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176980",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Volker Braun, Jeroen Demeyer



---

archive/issue_events_125840.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T10:33:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14477#event-125840"
}
```



---

archive/issue_events_125841.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T10:33:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14477#event-125841"
}
```



---

archive/issue_comments_176981.json:
```json
{
    "body": "**Merged:** sage-5.10.beta1",
    "created_at": "2013-04-28T10:33:41Z",
    "issue": "https://github.com/sagemath/sage/issues/14477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14477#issuecomment-176981",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.10.beta1
