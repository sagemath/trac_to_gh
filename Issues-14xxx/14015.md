# Issue 14015: Affine and Euclidean groups

archive/issues_013811.json:
```json
{
    "body": "This ticket implements basic affine groups and Euclidean groups:\n\n```\nsage: G = AffineGroup(3, QQ)\nsage: g = G.random_element(); g\n     [   2 -1/2    0]     [  0]\nx|-> [   1   -1   -1] x + [-32]\n     [   0   -2   -2]     [1/3]\nsage: g*g\n     [ 7/2 -1/2  1/2]     [   16]\nx|-> [   1  5/2    3] x + [ -1/3]\n     [  -2    6    6]     [191/3]\nsage: g*g.inverse()\n     [1 0 0]     [0]\nx|-> [0 1 0] x + [0]\n     [0 0 1]     [0]\n```\n\n---\n\nApply:\n\n- [attachment:trac_14015-affine_groups-ts.patch]\n\nAssignee: joyner\n\nReviewer: Travis Scrimshaw, Volker Braun\n\nAuthor: Volker Braun, Travis Scrimshaw\n\nMerged: sage-5.11.beta1\n\nDependencies: #14040, #14014\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14015\n\n",
    "closed_at": "2013-06-10T08:41:17Z",
    "created_at": "2013-01-25T21:02:00Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Affine and Euclidean groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14015",
    "user": "https://github.com/vbraun"
}
```
This ticket implements basic affine groups and Euclidean groups:

```
sage: G = AffineGroup(3, QQ)
sage: g = G.random_element(); g
     [   2 -1/2    0]     [  0]
x|-> [   1   -1   -1] x + [-32]
     [   0   -2   -2]     [1/3]
sage: g*g
     [ 7/2 -1/2  1/2]     [   16]
x|-> [   1  5/2    3] x + [ -1/3]
     [  -2    6    6]     [191/3]
sage: g*g.inverse()
     [1 0 0]     [0]
x|-> [0 1 0] x + [0]
     [0 0 1]     [0]
```

---

Apply:

- [attachment:trac_14015-affine_groups-ts.patch]

Assignee: joyner

Reviewer: Travis Scrimshaw, Volker Braun

Author: Volker Braun, Travis Scrimshaw

Merged: sage-5.11.beta1

Dependencies: #14040, #14014

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14015





---

archive/issue_comments_182783.json:
```json
{
    "body": "Initial patch",
    "created_at": "2013-01-25T21:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182783",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_182784.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-25T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182784",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182785.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+This ticket implements basic affine groups and Euclidean groups:\n \n+\\`\\`\\`\n+sage: G = AffineGroup(3, QQ)\n+sage: g = G.random_element(); g\n+     [   2 -1/2    0]     [  0]\n+x|-> [   1   -1   -1] x + [-32]\n+     [   0   -2   -2]     [1/3]\n+sage: g*g\n+     [ 7/2 -1/2  1/2]     [   16]\n+x|-> [   1  5/2    3] x + [ -1/3]\n+     [  -2    6    6]     [191/3]\n+sage: g*g.inverse()\n+     [1 0 0]     [0]\n+x|-> [0 1 0] x + [0]\n+     [0 0 1]     [0]\n+\\`\\`\\`\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2013-01-25T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182785",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+This ticket implements basic affine groups and Euclidean groups:
 
+\`\`\`
+sage: G = AffineGroup(3, QQ)
+sage: g = G.random_element(); g
+     [   2 -1/2    0]     [  0]
+x|-> [   1   -1   -1] x + [-32]
+     [   0   -2   -2]     [1/3]
+sage: g*g
+     [ 7/2 -1/2  1/2]     [   16]
+x|-> [   1  5/2    3] x + [ -1/3]
+     [  -2    6    6]     [191/3]
+sage: g*g.inverse()
+     [1 0 0]     [0]
+x|-> [0 1 0] x + [0]
+     [0 0 1]     [0]
+\`\`\`
 
 Author: Volker Braun
 
```




---

archive/issue_comments_182786.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [trac_14015_affine_group.patch](tarball://root/attachments/some-uuid/ticket14015/trac_14015_affine_group.patch) by @vbraun created at 2013-01-25 21:05:04",
    "created_at": "2013-01-25T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182786",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>Attachment [trac_14015_affine_group.patch](tarball://root/attachments/some-uuid/ticket14015/trac_14015_affine_group.patch) by @vbraun created at 2013-01-25 21:05:04



---

archive/issue_comments_182787.json:
```json
{
    "body": "<a id='comment:2'></a>To be rebased on top of #14040, #14014.",
    "created_at": "2013-02-12T15:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182787",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>To be rebased on top of #14040, #14014.



---

archive/issue_comments_182788.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-12T15:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182788",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182789.json:
```json
{
    "body": "Attachment [trac_14015-affine_groups-ts.patch](tarball://root/attachments/some-uuid/ticket14015/trac_14015-affine_groups-ts.patch) by @tscrim created at 2013-06-03 17:05:31",
    "created_at": "2013-06-03T17:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182789",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14015-affine_groups-ts.patch](tarball://root/attachments/some-uuid/ticket14015/trac_14015-affine_groups-ts.patch) by @tscrim created at 2013-06-03 17:05:31



---

archive/issue_comments_182790.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-03T17:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182790",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182791.json:
```json
{
    "body": "<a id='comment:3'></a>Hey Volker,\n\nHere's a rebased version with my review changes. I've removed the need for the `*_generic` classes and made the docstrings be at the class level so that they are visible using introspection. I've also added a method to get the lifted matrix space (representation of affine transformations as linear transformations) as `linear_space()`, and made a few docstring tweaks. If you're happy with my changes, you can set this to positive review.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14015-affine_groups-ts.patch",
    "created_at": "2013-06-03T17:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182791",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>Hey Volker,

Here's a rebased version with my review changes. I've removed the need for the `*_generic` classes and made the docstrings be at the class level so that they are visible using introspection. I've also added a method to get the lifted matrix space (representation of affine transformations as linear transformations) as `linear_space()`, and made a few docstring tweaks. If you're happy with my changes, you can set this to positive review.

Best,

Travis

For patchbot:

Apply: trac_14015-affine_groups-ts.patch



---

archive/issue_comments_182792.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,26 @@\n+This ticket implements basic affine groups and Euclidean groups:\n \n+\\`\\`\\`\n+sage: G = AffineGroup(3, QQ)\n+sage: g = G.random_element(); g\n+     [   2 -1/2    0]     [  0]\n+x|-> [   1   -1   -1] x + [-32]\n+     [   0   -2   -2]     [1/3]\n+sage: g*g\n+     [ 7/2 -1/2  1/2]     [   16]\n+x|-> [   1  5/2    3] x + [ -1/3]\n+     [  -2    6    6]     [191/3]\n+sage: g*g.inverse()\n+     [1 0 0]     [0]\n+x|-> [0 1 0] x + [0]\n+     [0 0 1]     [0]\n+\\`\\`\\`\n+\n+---\n+\n+Apply:\n+\n+- [attachment:trac_14015-affine_groups-ts.patch]\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2013-06-03T17:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182792",
    "user": "https://github.com/tscrim"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,26 @@
+This ticket implements basic affine groups and Euclidean groups:
 
+\`\`\`
+sage: G = AffineGroup(3, QQ)
+sage: g = G.random_element(); g
+     [   2 -1/2    0]     [  0]
+x|-> [   1   -1   -1] x + [-32]
+     [   0   -2   -2]     [1/3]
+sage: g*g
+     [ 7/2 -1/2  1/2]     [   16]
+x|-> [   1  5/2    3] x + [ -1/3]
+     [  -2    6    6]     [191/3]
+sage: g*g.inverse()
+     [1 0 0]     [0]
+x|-> [0 1 0] x + [0]
+     [0 0 1]     [0]
+\`\`\`
+
+---
+
+Apply:
+
+- [attachment:trac_14015-affine_groups-ts.patch]
 
 Author: Volker Braun
 
```




---

archive/issue_comments_182793.json:
```json
{
    "body": "<a id='comment:4'></a>The `_generic` suffix was there so that we can later also wrap GAP's affine groups (especially for finite fields)",
    "created_at": "2013-06-03T17:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182793",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>The `_generic` suffix was there so that we can later also wrap GAP's affine groups (especially for finite fields)



---

archive/issue_comments_182794.json:
```json
{
    "body": "<a id='comment:5'></a>You can have the GAP's affine groups and have the `__classcall__()` return that class (see `sage.combinat.partition.Partitions` or `sage.combinat.tableau.Tableaux` as more complete/complicated examples). IMO this is cleaner since the we the class doesn't have any extra qualifiers, the (single) entry point matches the  (base) class, and the classes have the correct naming scheme. Thus it is still extendable.\n\nIf the input format needs to be changed and exposed to the global namespace, you can implement a `__classcall__()` on the GAP wrapper parent (and likely the input will still need to standardized).",
    "created_at": "2013-06-05T15:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182794",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>You can have the GAP's affine groups and have the `__classcall__()` return that class (see `sage.combinat.partition.Partitions` or `sage.combinat.tableau.Tableaux` as more complete/complicated examples). IMO this is cleaner since the we the class doesn't have any extra qualifiers, the (single) entry point matches the  (base) class, and the classes have the correct naming scheme. Thus it is still extendable.

If the input format needs to be changed and exposed to the global namespace, you can implement a `__classcall__()` on the GAP wrapper parent (and likely the input will still need to standardized).



---

archive/issue_comments_182795.json:
```json
{
    "body": "<a id='comment:6'></a>And you need some way to circumvent the enforced argument normalization for internal use where you know that the arguments don't have to be normalized. In terms of complexity / lines of code, I think its pretty much a draw. Which is to say, you end up using a lot of complicated machinery for no real advantage. And it gets even more complicated if you start deriving the class. And it breaks the symmetry between different implementations. If I had seen a real advantage with the `__classcall__` mechanism then I would have used it myself.",
    "created_at": "2013-06-05T15:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182795",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>And you need some way to circumvent the enforced argument normalization for internal use where you know that the arguments don't have to be normalized. In terms of complexity / lines of code, I think its pretty much a draw. Which is to say, you end up using a lot of complicated machinery for no real advantage. And it gets even more complicated if you start deriving the class. And it breaks the symmetry between different implementations. If I had seen a real advantage with the `__classcall__` mechanism then I would have used it myself.



---

archive/issue_events_039408.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-06-05T16:00:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14015#event-39408"
}
```



---

archive/issue_comments_182796.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-05T16:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182796",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_039409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-10T08:41:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14015#event-39409"
}
```



---

archive/issue_comments_182797.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-10T08:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14015#issuecomment-182797",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
