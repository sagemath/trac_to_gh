# Issue 14532: Symplectic graphs

archive/issues_014328.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nBrand new pretty graphs `:-P`\n\nNathann\n\nApply :\n\n* [attachment: trac_14532.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)\n* [attachment: trac_14532_review-fc.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)\n* [attachment: trac_14532-rebased.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)\n\nDepends on #14217\n\nCC:  @sagetrac-azi\n\nComponent: **graph theory**\n\nKeywords: **strongly regular graphs**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nMerged: **sage-5.10.beta4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14532_\n\n",
    "closed_at": "2013-05-17T06:32:53Z",
    "created_at": "2013-05-05T10:49:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Symplectic graphs",
    "type": "issue",
    "updated_at": "2013-05-23T08:45:21Z",
    "url": "https://github.com/sagemath/sage/issues/14532",
    "user": "https://github.com/nathanncohen"
}
```
<div id="comment:0"></div>

Brand new pretty graphs `:-P`

Nathann

Apply :

* [attachment: trac_14532.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)
* [attachment: trac_14532_review-fc.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)
* [attachment: trac_14532-rebased.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)

Depends on #14217

CC:  @sagetrac-azi

Component: **graph theory**

Keywords: **strongly regular graphs**

Author: **Nathann Cohen**

Reviewer: **Frédéric Chapoton**

Merged: **sage-5.10.beta4**

_Issue created by migration from https://trac.sagemath.org/ticket/14532_





---

archive/issue_events_203757.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203757"
}
```



---

archive/issue_events_203758.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203758"
}
```



---

archive/issue_events_203759.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203759"
}
```



---

archive/issue_events_203760.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203760"
}
```



---

archive/issue_events_203761.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203761"
}
```



---

archive/issue_events_203762.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203762"
}
```



---

archive/issue_events_203763.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2013-05-05T10:49:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203763"
}
```



---

archive/issue_events_203764.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-05T10:50:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203764"
}
```



---

archive/issue_comments_175939.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHello!\n\nSry for comming back at you so late. I had some other stuff lately!\n\nAnways, the code looks fine (read it, run it, and obviously run sage -t) I only have two remarks.\n\n1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.\n\n2. I would change the line  \n\n```\n Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) \n}}} to\n\n{{{\n{{{\n Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) \n}}} \n}}}\n\nwhich should be 2x faster.\n\nBest,\n\nJernej\n```",
    "created_at": "2013-05-07T11:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175939",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:2" align="right">comment:2</div>

Hello!

Sry for comming back at you so late. I had some other stuff lately!

Anways, the code looks fine (read it, run it, and obviously run sage -t) I only have two remarks.

1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.

2. I would change the line  

```
 Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) 
}}} to

{{{
{{{
 Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) 
}}} 
}}}

which should be 2x faster.

Best,

Jernej
```



---

archive/issue_comments_175940.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHelloooooooooooooo !!\n\n> Sry for comming back at you so late. I had some other stuff lately!\n\nCome on, I am already very thankful that you take the time to review these patches !!!\n\n> 1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.\n\nDone\n\n> 2. I would change the line  \n> \n> ```\n>  Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) \n> }}} to\n> \n> {{{\n> {{{\n>  Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) \n> }}} \n> }}}\n> \n> which should be 2x faster.\n> ```\n\n`O_o`\n\nHere is what I get when I change it : \n\n```\nsage: graphs.SymplecticGraph(4,4)         \n...\nNetworkXError: Input is not a known data type for conversion.\n```\n\nBut what do you think it should do, and why do you think that it should be 2x faster ? `O_o`\n\nNathann",
    "created_at": "2013-05-07T12:12:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175940",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Helloooooooooooooo !!

> Sry for comming back at you so late. I had some other stuff lately!

Come on, I am already very thankful that you take the time to review these patches !!!

> 1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.

Done

> 2. I would change the line  
> 
> ```
>  Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) 
> }}} to
> 
> {{{
> {{{
>  Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) 
> }}} 
> }}}
> 
> which should be 2x faster.
> ```

`O_o`

Here is what I get when I change it : 

```
sage: graphs.SymplecticGraph(4,4)         
...
NetworkXError: Input is not a known data type for conversion.
```

But what do you think it should do, and why do you think that it should be 2x faster ? `O_o`

Nathann



---

archive/issue_comments_175941.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI may be shooting random nonsense of course but in general it is much better to not create lists [] but iterators (). Since in the former case a list has to first be created (1 for loop) and then iterated over (2 for loop). Example\n\n```\nsage: %timeit max((i for i in xrange(100)))\n100000 loops, best of 3: 14.5 us per loop\nsage: %timeit max([i for i in xrange(100)])\n10000 loops, best of 3: 30 us per loop\n```\n\nand even faster in this case would be\n\n```\nsage: %timeit 99\n1000000 loops, best of 3: 429 ns per loo\n```",
    "created_at": "2013-05-07T12:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175941",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:4" align="right">comment:4</div>

I may be shooting random nonsense of course but in general it is much better to not create lists [] but iterators (). Since in the former case a list has to first be created (1 for loop) and then iterated over (2 for loop). Example

```
sage: %timeit max((i for i in xrange(100)))
100000 loops, best of 3: 14.5 us per loop
sage: %timeit max([i for i in xrange(100)])
10000 loops, best of 3: 30 us per loop
```

and even faster in this case would be

```
sage: %timeit 99
1000000 loops, best of 3: 429 ns per loo
```



---

archive/issue_comments_175942.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYepyep but no list is created in this case. A list of size 2 is given to the Graph constructor : the first element is a list of vertices, the second element is a function that gives adjacent pairs.\n\nNathann",
    "created_at": "2013-05-07T12:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175942",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yepyep but no list is created in this case. A list of size 2 is given to the Graph constructor : the first element is a list of vertices, the second element is a function that gives adjacent pairs.

Nathann



---

archive/issue_comments_175943.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOh FML you see sometimes I do shoot random nonsense!\n\nIn this case the patch is ofc OK. If I were to do this I would make the additional test check (since we're already doing them) but its fine as is as well.",
    "created_at": "2013-05-07T12:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175943",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:6" align="right">comment:6</div>

Oh FML you see sometimes I do shoot random nonsense!

In this case the patch is ofc OK. If I were to do this I would make the additional test check (since we're already doing them) but its fine as is as well.



---

archive/issue_comments_175944.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nthere is a typo in \"simplectic\" at least twice",
    "created_at": "2013-05-07T16:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175944",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

there is a typo in "simplectic" at least twice



---

archive/issue_comments_175945.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n> there is a typo in \"simplectic\" at least twice\n\nArggggggggg... Fixed `:-P`\n\nMost probably because of that cursed sImplex `:-P`\n\nNathann",
    "created_at": "2013-05-07T16:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175945",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

> there is a typo in "simplectic" at least twice

Arggggggggg... Fixed `:-P`

Most probably because of that cursed sImplex `:-P`

Nathann



---

archive/issue_comments_175946.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[trac_14532.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)**\n\nhello,\n\nif you are happy with my review patch (just removing unused imports), you can set a positive review on my behalf.",
    "created_at": "2013-05-09T16:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175946",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[trac_14532.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)**

hello,

if you are happy with my review patch (just removing unused imports), you can set a positive review on my behalf.



---

archive/issue_comments_175947.json:
```json
{
    "body": "Attachment: **[trac_14532_review-fc.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)**",
    "created_at": "2013-05-09T16:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175947",
    "user": "https://github.com/fchapoton"
}
```

Attachment: **[trac_14532_review-fc.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)**



---

archive/issue_comments_175948.json:
```json
{
    "body": "Changed keywords from none to **strongly regular graphs**",
    "created_at": "2013-05-09T16:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175948",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **strongly regular graphs**



---

archive/issue_comments_175949.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2013-05-09T16:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175949",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_175950.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAll tests pass ! Thank you very much for your help `:-)`\n\nNathann",
    "created_at": "2013-05-09T18:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175950",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

All tests pass ! Thank you very much for your help `:-)`

Nathann



---

archive/issue_events_203765.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-09T18:14:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203765"
}
```



---

archive/issue_events_203766.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-09T18:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203766"
}
```



---

archive/issue_comments_175951.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n\n```\nsage -t devel/sage/sage/graphs/generators/families.py\n**********************************************************************\nFile \"devel/sage/sage/graphs/generators/families.py\", line 1992, in sage.graphs.generators.families.SymplecticGraph\nFailed example:\n    g = graphs.SymplecticGraph(6,2)\nException raised:\n    Traceback (most recent call last):\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.generators.families.SymplecticGraph[0]>\", line 1, in <module>\n        g = graphs.SymplecticGraph(Integer(6),Integer(2))\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/graphs/generators/families.py\", line 2000, in SymplecticGraph\n        from sage.schemes.generic.projective_space import ProjectiveSpace\n    ImportError: No module named projective_space\n**********************************************************************\n```",
    "created_at": "2013-05-13T18:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175951",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>


```
sage -t devel/sage/sage/graphs/generators/families.py
**********************************************************************
File "devel/sage/sage/graphs/generators/families.py", line 1992, in sage.graphs.generators.families.SymplecticGraph
Failed example:
    g = graphs.SymplecticGraph(6,2)
Exception raised:
    Traceback (most recent call last):
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.graphs.generators.families.SymplecticGraph[0]>", line 1, in <module>
        g = graphs.SymplecticGraph(Integer(6),Integer(2))
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/graphs/generators/families.py", line 2000, in SymplecticGraph
        from sage.schemes.generic.projective_space import ProjectiveSpace
    ImportError: No module named projective_space
**********************************************************************
```



---

archive/issue_events_203767.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T18:46:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203767"
}
```



---

archive/issue_events_203768.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T18:46:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203768"
}
```



---

archive/issue_comments_175952.json:
```json
{
    "body": "Dependencies: **#14217**",
    "created_at": "2013-05-14T09:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175952",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#14217**



---

archive/issue_comments_175953.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac_14532-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)**",
    "created_at": "2013-05-14T09:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175953",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac_14532-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)**



---

archive/issue_comments_175954.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n Brand new pretty graphs `:-P`\n \n Nathann\n+\n+Apply :\n+\n+* [attachment: trac_14532.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)\n+* [attachment: trac_14532_review-fc.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)\n+* [attachment: trac_14532-rebased.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)\n``````\n",
    "created_at": "2013-05-14T09:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175954",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
 Brand new pretty graphs `:-P`
 
 Nathann
+
+Apply :
+
+* [attachment: trac_14532.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532.patch.gz)
+* [attachment: trac_14532_review-fc.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532_review-fc.patch.gz)
+* [attachment: trac_14532-rebased.patch](https://github.com/sagemath/sage/files/ticket14532/trac_14532-rebased.patch.gz)
``````




---

archive/issue_events_203769.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-14T09:44:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203769"
}
```



---

archive/issue_events_203770.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-05-14T09:44:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203770"
}
```



---

archive/issue_comments_175955.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nRebased !\n\nNathann",
    "created_at": "2013-05-14T09:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175955",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Rebased !

Nathann



---

archive/issue_comments_175956.json:
```json
{
    "body": "Merged: **sage-5.10.beta4**",
    "created_at": "2013-05-17T06:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175956",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta4**



---

archive/issue_events_203771.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:32:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203771"
}
```



---

archive/issue_events_203772.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:32:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14532#event-203772"
}
```



---

archive/issue_comments_175957.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nmaybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?",
    "created_at": "2013-05-21T00:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175957",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

maybe Sage should have "polar space" graphs in general, not, only symplectic ones?



---

archive/issue_comments_175958.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHelloooooooo !\n\n> maybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?\n\nWell, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.\n\nhttp://www.win.tue.nl/~aeb/graphs/srg/srgtab.html\n\nI believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.\n\nIf you know how to make it work, I would be glad to see it in Sage too `:-P`\n\nNathann",
    "created_at": "2013-05-21T07:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175958",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Helloooooooo !

> maybe Sage should have "polar space" graphs in general, not, only symplectic ones?

Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.

http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html

I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.

If you know how to make it work, I would be glad to see it in Sage too `:-P`

Nathann



---

archive/issue_comments_175959.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nathanncohen](#comment%3A18):\n> Helloooooooo !\n> \n> > maybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?\n> \n> \n> Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.\n> \n> http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html\n> \n> I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.\n\nno, these are different species. I mean classical polar spaces as introduced by J.Tits (or even long before him). See e.g. Sect 6.5 of http://www.maths.qmul.ac.uk/~pjc/pps/pps6.pdf\n\nTo construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!\nE.g.\n\n```\ngap> Display(InvariantQuadraticForm(GO(1,6,2)).matrix);\n . 1 . . . .\n . . . . . .\n . . . 1 . .\n . . . . . .\n . . . . . 1\n . . . . . .\ngap> Display(InvariantQuadraticForm(GO(-1,6,2)).matrix);\n . 1 . . . .\n . . . . . .\n . . 1 1 . .\n . . . 1 . .\n . . . . . 1\n . . . . . .\ngap> Display(InvariantSesquilinearForm(GU(6,2)).matrix);\n . . . . . 1\n . . . . 1 .\n . . . 1 . .\n . . 1 . . .\n . 1 . . . .\n 1 . . . . .\ngap> Display(InvariantBilinearForm(Sp(6,3)).matrix);\n . . . . . 1\n . . . . 1 .\n . . . 1 . .\n . . 2 . . .\n . 2 . . . .\n 2 . . . . .\ngap> \n```\netc...",
    "created_at": "2013-05-21T08:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175959",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nathanncohen](#comment%3A18):
> Helloooooooo !
> 
> > maybe Sage should have "polar space" graphs in general, not, only symplectic ones?
> 
> 
> Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.
> 
> http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html
> 
> I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.

no, these are different species. I mean classical polar spaces as introduced by J.Tits (or even long before him). See e.g. Sect 6.5 of http://www.maths.qmul.ac.uk/~pjc/pps/pps6.pdf

To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!
E.g.

```
gap> Display(InvariantQuadraticForm(GO(1,6,2)).matrix);
 . 1 . . . .
 . . . . . .
 . . . 1 . .
 . . . . . .
 . . . . . 1
 . . . . . .
gap> Display(InvariantQuadraticForm(GO(-1,6,2)).matrix);
 . 1 . . . .
 . . . . . .
 . . 1 1 . .
 . . . 1 . .
 . . . . . 1
 . . . . . .
gap> Display(InvariantSesquilinearForm(GU(6,2)).matrix);
 . . . . . 1
 . . . . 1 .
 . . . 1 . .
 . . 1 . . .
 . 1 . . . .
 1 . . . . .
gap> Display(InvariantBilinearForm(Sp(6,3)).matrix);
 . . . . . 1
 . . . . 1 .
 . . . 1 . .
 . . 2 . . .
 . 2 . . . .
 2 . . . . .
gap> 
```
etc...



---

archive/issue_comments_175960.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.",
    "created_at": "2013-05-21T08:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175960",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.



---

archive/issue_comments_175961.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.\n\nAhahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`\n\nNathann",
    "created_at": "2013-05-21T08:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175961",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.

Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`

Nathann



---

archive/issue_comments_175962.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nathanncohen](#comment%3A21):\n> > The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.\n> \n> \n> Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`\n> \n\nit's useful to \n\n* store the graphs more compactly\n* compute their properties faster\n\nIsn't it obvious? All these graphs you construct lately have huge automorphism groups, often arc-transitive and/or distance-transitive.",
    "created_at": "2013-05-21T08:54:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175962",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nathanncohen](#comment%3A21):
> > The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.
> 
> 
> Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`
> 

it's useful to 

* store the graphs more compactly
* compute their properties faster

Isn't it obvious? All these graphs you construct lately have huge automorphism groups, often arc-transitive and/or distance-transitive.



---

archive/issue_comments_175963.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n> Isn't it obvious? \n\nWhat do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`\n\nNathann",
    "created_at": "2013-05-21T09:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175963",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

> Isn't it obvious? 

What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`

Nathann



---

archive/issue_comments_175964.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nBy the way, and because these graphs are usually immutable (and dense), I wrote a couple of C functions (#14589) to store very compactly an adjacency matrix. Of course it cannot compare with an encoding by generators of the automorphism group, but a graph on 30 000 vertices can be stored on 128MB.\n\nNathann",
    "created_at": "2013-05-21T09:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175964",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

By the way, and because these graphs are usually immutable (and dense), I wrote a couple of C functions (#14589) to store very compactly an adjacency matrix. Of course it cannot compare with an encoding by generators of the automorphism group, but a graph on 30 000 vertices can be stored on 128MB.

Nathann



---

archive/issue_comments_175965.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nathanncohen](#comment%3A23):\n> > Isn't it obvious? \n> \n> \n> What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`\n\nObviously, regularity properties - and this is very fast with such data. Then, e.g., \ne.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\nOr Lovasz theta number...",
    "created_at": "2013-05-21T09:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175965",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nathanncohen](#comment%3A23):
> > Isn't it obvious? 
> 
> 
> What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`

Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
Or Lovasz theta number...



---

archive/issue_comments_175966.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> Obviously, regularity properties - and this is very fast with such data. Then, e.g., \n> e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\n> Or Lovasz theta number...\n\nHmmm... Looks like you will have an awful amount of code to write `:-P`\n\nNathann",
    "created_at": "2013-05-21T10:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175966",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

> Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
> e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
> Or Lovasz theta number...

Hmmm... Looks like you will have an awful amount of code to write `:-P`

Nathann



---

archive/issue_comments_175967.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nathanncohen](#comment%3A26):\n> > Obviously, regularity properties - and this is very fast with such data. Then, e.g., \n> > e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\n> > Or Lovasz theta number...\n> \n> \n> Hmmm... Looks like you will have an awful amount of code to write `:-P`\n\nI wouldn't classify calls to GAP as \"awful amount of code\" :)",
    "created_at": "2013-05-21T10:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175967",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nathanncohen](#comment%3A26):
> > Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
> > e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
> > Or Lovasz theta number...
> 
> 
> Hmmm... Looks like you will have an awful amount of code to write `:-P`

I wouldn't classify calls to GAP as "awful amount of code" :)



---

archive/issue_comments_175968.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOh ! Well, if it's all in there already, then.... `:-)`\n\nNathann",
    "created_at": "2013-05-21T10:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175968",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Oh ! Well, if it's all in there already, then.... `:-)`

Nathann



---

archive/issue_comments_175969.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!\n\nThis is now #14631 ! \n\nNathann",
    "created_at": "2013-05-23T08:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14532#issuecomment-175969",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

> To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!

This is now #14631 ! 

Nathann
