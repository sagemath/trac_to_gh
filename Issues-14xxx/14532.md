# Issue 14532: Symplectic graphs

archive/issues_014328.json:
```json
{
    "body": "Brand new pretty graphs `:-P`\n\nNathann\n\nApply :\n\n* [attachment:trac_14532.patch]\n* [attachment:trac_14532_review-fc.patch]\n* [attachment:trac_14532-rebased.patch]\n\nAssignee: jason, ncohen, rlm\n\nCC:  azi\n\nKeywords: strongly regular graphs\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Nathann Cohen\n\nMerged: sage-5.10.beta4\n\nDependencies: #14217\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14532\n\n",
    "closed_at": "2013-05-17T06:32:53Z",
    "created_at": "2013-05-05T10:49:31Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Symplectic graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14532",
    "user": "https://github.com/nathanncohen"
}
```
Brand new pretty graphs `:-P`

Nathann

Apply :

* [attachment:trac_14532.patch]
* [attachment:trac_14532_review-fc.patch]
* [attachment:trac_14532-rebased.patch]

Assignee: jason, ncohen, rlm

CC:  azi

Keywords: strongly regular graphs

Reviewer: Frédéric Chapoton

Author: Nathann Cohen

Merged: sage-5.10.beta4

Dependencies: #14217

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14532





---

archive/issue_comments_180685.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-05T10:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180685",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_180686.json:
```json
{
    "body": "<a id='comment:2'></a>Hello!\n\nSry for comming back at you so late. I had some other stuff lately!\n\nAnways, the code looks fine (read it, run it, and obviously run sage -t) I only have two remarks.\n\n1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.\n\n2. I would change the line  \n\n```\n Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) \n}}} to\n\n{{{\n{{{\n Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) \n}}} \n}}}\n\nwhich should be 2x faster.\n\nBest,\n\nJernej",
    "created_at": "2013-05-07T11:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180686",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:2'></a>Hello!

Sry for comming back at you so late. I had some other stuff lately!

Anways, the code looks fine (read it, run it, and obviously run sage -t) I only have two remarks.

1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.

2. I would change the line  

```
 Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) 
}}} to

{{{
{{{
 Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) 
}}} 
}}}

which should be 2x faster.

Best,

Jernej



---

archive/issue_comments_180687.json:
```json
{
    "body": "<a id='comment:3'></a>Helloooooooooooooo !!\n\n> Sry for comming back at you so late. I had some other stuff lately!\n\n\nCome on, I am already very thankful that you take the time to review these patches !!!\n\n> 1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.\n\n\nDone\n\n> 2. I would change the line  \n> \n> ```\n>  Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) \n> }}} to\n> \n> {{{\n> {{{\n>  Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) \n> }}} \n> }}}\n> \n> which should be 2x faster.\n\n\n`O_o`\n\nHere is what I get when I change it : \n{{{\nsage: graphs.SymplecticGraph(4,4)         \n...\nNetworkXError: Input is not a known data type for conversion.\n}}}\n\nBut what do you think it should do, and why do you think that it should be 2x faster ? `O_o`\n\nNathann",
    "created_at": "2013-05-07T12:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180687",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>Helloooooooooooooo !!

> Sry for comming back at you so late. I had some other stuff lately!


Come on, I am already very thankful that you take the time to review these patches !!!

> 1. Maybe we should check if d is even and also nonzero (perhaps >= 2) since that is also a invalid parameter.


Done

> 2. I would change the line  
> 
> ```
>  Graph([map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0], loops = False) 
> }}} to
> 
> {{{
> {{{
>  Graph((map(tuple,PV), lambda x,y:V(x)*(M*V(y)) == 0), loops = False) 
> }}} 
> }}}
> 
> which should be 2x faster.


`O_o`

Here is what I get when I change it : 
{{{
sage: graphs.SymplecticGraph(4,4)         
...
NetworkXError: Input is not a known data type for conversion.
}}}

But what do you think it should do, and why do you think that it should be 2x faster ? `O_o`

Nathann



---

archive/issue_comments_180688.json:
```json
{
    "body": "<a id='comment:4'></a>I may be shooting random nonsense of course but in general it is much better to not create lists [] but iterators (). Since in the former case a list has to first be created (1 for loop) and then iterated over (2 for loop). Example\n\n```\nsage: %timeit max((i for i in xrange(100)))\n100000 loops, best of 3: 14.5 us per loop\nsage: %timeit max([i for i in xrange(100)])\n10000 loops, best of 3: 30 us per loop\n```\n\nand even faster in this case would be\n\n```\nsage: %timeit 99\n1000000 loops, best of 3: 429 ns per loo\n```",
    "created_at": "2013-05-07T12:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180688",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:4'></a>I may be shooting random nonsense of course but in general it is much better to not create lists [] but iterators (). Since in the former case a list has to first be created (1 for loop) and then iterated over (2 for loop). Example

```
sage: %timeit max((i for i in xrange(100)))
100000 loops, best of 3: 14.5 us per loop
sage: %timeit max([i for i in xrange(100)])
10000 loops, best of 3: 30 us per loop
```

and even faster in this case would be

```
sage: %timeit 99
1000000 loops, best of 3: 429 ns per loo
```



---

archive/issue_comments_180689.json:
```json
{
    "body": "<a id='comment:5'></a>Yepyep but no list is created in this case. A list of size 2 is given to the Graph constructor : the first element is a list of vertices, the second element is a function that gives adjacent pairs.\n\nNathann",
    "created_at": "2013-05-07T12:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180689",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Yepyep but no list is created in this case. A list of size 2 is given to the Graph constructor : the first element is a list of vertices, the second element is a function that gives adjacent pairs.

Nathann



---

archive/issue_comments_180690.json:
```json
{
    "body": "<a id='comment:6'></a>Oh FML you see sometimes I do shoot random nonsense!\n\nIn this case the patch is ofc OK. If I were to do this I would make the additional test check (since we're already doing them) but its fine as is as well.",
    "created_at": "2013-05-07T12:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180690",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:6'></a>Oh FML you see sometimes I do shoot random nonsense!

In this case the patch is ofc OK. If I were to do this I would make the additional test check (since we're already doing them) but its fine as is as well.



---

archive/issue_comments_180691.json:
```json
{
    "body": "<a id='comment:7'></a>there is a typo in \"simplectic\" at least twice",
    "created_at": "2013-05-07T16:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180691",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>there is a typo in "simplectic" at least twice



---

archive/issue_comments_180692.json:
```json
{
    "body": "<a id='comment:8'></a>> there is a typo in \"simplectic\" at least twice\n\n\nArggggggggg... Fixed `:-P`\n\nMost probably because of that cursed sImplex `:-P`\n\nNathann",
    "created_at": "2013-05-07T16:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180692",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>> there is a typo in "simplectic" at least twice


Arggggggggg... Fixed `:-P`

Most probably because of that cursed sImplex `:-P`

Nathann



---

archive/issue_comments_180693.json:
```json
{
    "body": "<a id='comment:9'></a>Attachment [trac_14532.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532.patch) by @fchapoton created at 2013-05-09 16:12:06\n\nhello,\n\nif you are happy with my review patch (just removing unused imports), you can set a positive review on my behalf.",
    "created_at": "2013-05-09T16:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180693",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>Attachment [trac_14532.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532.patch) by @fchapoton created at 2013-05-09 16:12:06

hello,

if you are happy with my review patch (just removing unused imports), you can set a positive review on my behalf.



---

archive/issue_comments_180694.json:
```json
{
    "body": "Attachment [trac_14532_review-fc.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532_review-fc.patch) by @fchapoton created at 2013-05-09 16:13:19",
    "created_at": "2013-05-09T16:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180694",
    "user": "https://github.com/fchapoton"
}
```

Attachment [trac_14532_review-fc.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532_review-fc.patch) by @fchapoton created at 2013-05-09 16:13:19



---

archive/issue_comments_180695.json:
```json
{
    "body": "Changing keywords from \"\" to \"strongly regular graphs\".",
    "created_at": "2013-05-09T16:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180695",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "strongly regular graphs".



---

archive/issue_comments_180696.json:
```json
{
    "body": "<a id='comment:11'></a>All tests pass ! Thank you very much for your help `:-)`\n\nNathann",
    "created_at": "2013-05-09T18:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180696",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>All tests pass ! Thank you very much for your help `:-)`

Nathann



---

archive/issue_comments_180697.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-09T18:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180697",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_180698.json:
```json
{
    "body": "<a id='comment:12'></a>```\nsage -t devel/sage/sage/graphs/generators/families.py\n**********************************************************************\nFile \"devel/sage/sage/graphs/generators/families.py\", line 1992, in sage.graphs.generators.families.SymplecticGraph\nFailed example:\n    g = graphs.SymplecticGraph(6,2)\nException raised:\n    Traceback (most recent call last):\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.generators.families.SymplecticGraph[0]>\", line 1, in <module>\n        g = graphs.SymplecticGraph(Integer(6),Integer(2))\n      File \"/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/graphs/generators/families.py\", line 2000, in SymplecticGraph\n        from sage.schemes.generic.projective_space import ProjectiveSpace\n    ImportError: No module named projective_space\n**********************************************************************\n```",
    "created_at": "2013-05-13T18:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180698",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>```
sage -t devel/sage/sage/graphs/generators/families.py
**********************************************************************
File "devel/sage/sage/graphs/generators/families.py", line 1992, in sage.graphs.generators.families.SymplecticGraph
Failed example:
    g = graphs.SymplecticGraph(6,2)
Exception raised:
    Traceback (most recent call last):
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.graphs.generators.families.SymplecticGraph[0]>", line 1, in <module>
        g = graphs.SymplecticGraph(Integer(6),Integer(2))
      File "/mazur/release/merger/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/graphs/generators/families.py", line 2000, in SymplecticGraph
        from sage.schemes.generic.projective_space import ProjectiveSpace
    ImportError: No module named projective_space
**********************************************************************
```



---

archive/issue_comments_180699.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-05-13T18:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180699",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_180700.json:
```json
{
    "body": "<a id='comment:14'></a>Attachment [trac_14532-rebased.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532-rebased.patch) by @nathanncohen created at 2013-05-14 09:42:24",
    "created_at": "2013-05-14T09:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180700",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>Attachment [trac_14532-rebased.patch](tarball://root/attachments/some-uuid/ticket14532/trac_14532-rebased.patch) by @nathanncohen created at 2013-05-14 09:42:24



---

archive/issue_comments_180701.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-05-14T09:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180701",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_180702.json:
```json
{
    "body": "<a id='comment:15'></a>Rebased !\n\nNathann",
    "created_at": "2013-05-14T09:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180702",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>Rebased !

Nathann



---

archive/issue_comments_180703.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-17T06:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180703",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_041357.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:32:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14532#event-41357"
}
```



---

archive/issue_comments_180704.json:
```json
{
    "body": "<a id='comment:17'></a>maybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?",
    "created_at": "2013-05-21T00:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180704",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>maybe Sage should have "polar space" graphs in general, not, only symplectic ones?



---

archive/issue_comments_180705.json:
```json
{
    "body": "<a id='comment:18'></a>Helloooooooo !\n\n> maybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?\n\n\nWell, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.\n\nhttp://www.win.tue.nl/~aeb/graphs/srg/srgtab.html\n\nI believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.\n\nIf you know how to make it work, I would be glad to see it in Sage too `:-P`\n\nNathann",
    "created_at": "2013-05-21T07:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180705",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>Helloooooooo !

> maybe Sage should have "polar space" graphs in general, not, only symplectic ones?


Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.

http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html

I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.

If you know how to make it work, I would be glad to see it in Sage too `:-P`

Nathann



---

archive/issue_comments_180706.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 ncohen]:\n> Helloooooooo !\n> \n> > maybe Sage should have \"polar space\" graphs in general, not, only symplectic ones?\n\n> \n> Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.\n> \n> http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html\n> \n> I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.\n\n\nno, these are different species. I mean classical polar spaces as introduced by J.Tits (or even long before him). See e.g. Sect 6.5 of http://www.maths.qmul.ac.uk/~pjc/pps/pps6.pdf\n\nTo construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!\nE.g.\n\n```\ngap> Display(InvariantQuadraticForm(GO(1,6,2)).matrix);\n . 1 . . . .\n . . . . . .\n . . . 1 . .\n . . . . . .\n . . . . . 1\n . . . . . .\ngap> Display(InvariantQuadraticForm(GO(-1,6,2)).matrix);\n . 1 . . . .\n . . . . . .\n . . 1 1 . .\n . . . 1 . .\n . . . . . 1\n . . . . . .\ngap> Display(InvariantSesquilinearForm(GU(6,2)).matrix);\n . . . . . 1\n . . . . 1 .\n . . . 1 . .\n . . 1 . . .\n . 1 . . . .\n 1 . . . . .\ngap> Display(InvariantBilinearForm(Sp(6,3)).matrix);\n . . . . . 1\n . . . . 1 .\n . . . 1 . .\n . . 2 . . .\n . 2 . . . .\n 2 . . . . .\ngap> \n```\netc...",
    "created_at": "2013-05-21T08:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180706",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>Replying to [comment:18 ncohen]:
> Helloooooooo !
> 
> > maybe Sage should have "polar space" graphs in general, not, only symplectic ones?

> 
> Well, yes it would be nice indeed, but I do not know how to build them. I guess that it only takes 5~6 lines, like for the symplectic ones, but I don't know which ones. Actually, I have no idea on earth what these graphs are, except what I could read (and understand, which is even less) from Brouwer's website.
> 
> http://www.win.tue.nl/~aeb/graphs/srg/srgtab.html
> 
> I believe I created what he calls a `VO^-` graph (`graphs.BrouwerHaemersGraph`), and the same code worked for different parameters but I was not able to make it work in characteristic two, and so I did not write this more general patch.


no, these are different species. I mean classical polar spaces as introduced by J.Tits (or even long before him). See e.g. Sect 6.5 of http://www.maths.qmul.ac.uk/~pjc/pps/pps6.pdf

To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!
E.g.

```
gap> Display(InvariantQuadraticForm(GO(1,6,2)).matrix);
 . 1 . . . .
 . . . . . .
 . . . 1 . .
 . . . . . .
 . . . . . 1
 . . . . . .
gap> Display(InvariantQuadraticForm(GO(-1,6,2)).matrix);
 . 1 . . . .
 . . . . . .
 . . 1 1 . .
 . . . 1 . .
 . . . . . 1
 . . . . . .
gap> Display(InvariantSesquilinearForm(GU(6,2)).matrix);
 . . . . . 1
 . . . . 1 .
 . . . 1 . .
 . . 1 . . .
 . 1 . . . .
 1 . . . . .
gap> Display(InvariantBilinearForm(Sp(6,3)).matrix);
 . . . . . 1
 . . . . 1 .
 . . . 1 . .
 . . 2 . . .
 . 2 . . . .
 2 . . . . .
gap> 
```
etc...



---

archive/issue_comments_180707.json:
```json
{
    "body": "<a id='comment:20'></a>The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.",
    "created_at": "2013-05-21T08:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180707",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.



---

archive/issue_comments_180708.json:
```json
{
    "body": "<a id='comment:21'></a>> The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.\n\n\nAhahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`\n\nNathann",
    "created_at": "2013-05-21T08:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180708",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>> The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.


Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`

Nathann



---

archive/issue_comments_180709.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 ncohen]:\n> > The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.\n\n> \n> Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`\n> \n  \nit's useful to \n\n* store the graphs more compactly\n* compute their properties faster\n\nIsn't it obvious? All these graphs you construct lately have huge automorphism groups, often arc-transitive and/or distance-transitive.",
    "created_at": "2013-05-21T08:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180709",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>Replying to [comment:21 ncohen]:
> > The more one goes down this road, the more the lack of a proper backend for graphs with big automorphism groups shows. Perhaps we can try implement something next month in Paris.

> 
> Ahahah. Well, why not ? But I really know next to nothing about those, and what people use them for `:-)`
> 
  
it's useful to 

* store the graphs more compactly
* compute their properties faster

Isn't it obvious? All these graphs you construct lately have huge automorphism groups, often arc-transitive and/or distance-transitive.



---

archive/issue_comments_180710.json:
```json
{
    "body": "<a id='comment:23'></a>> Isn't it obvious? \n\n\nWhat do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`\n\nNathann",
    "created_at": "2013-05-21T09:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180710",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>> Isn't it obvious? 


What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`

Nathann



---

archive/issue_comments_180711.json:
```json
{
    "body": "<a id='comment:24'></a>By the way, and because these graphs are usually immutable (and dense), I wrote a couple of C functions (#14589) to store very compactly an adjacency matrix. Of course it cannot compare with an encoding by generators of the automorphism group, but a graph on 30 000 vertices can be stored on 128MB.\n\nNathann",
    "created_at": "2013-05-21T09:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180711",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>By the way, and because these graphs are usually immutable (and dense), I wrote a couple of C functions (#14589) to store very compactly an adjacency matrix. Of course it cannot compare with an encoding by generators of the automorphism group, but a graph on 30 000 vertices can be stored on 128MB.

Nathann



---

archive/issue_comments_180712.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:23 ncohen]:\n> > Isn't it obvious? \n\n> \n> What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`\n\n\nObviously, regularity properties - and this is very fast with such data. Then, e.g., \ne.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\nOr Lovasz theta number...",
    "created_at": "2013-05-21T09:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180712",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>Replying to [comment:23 ncohen]:
> > Isn't it obvious? 

> 
> What do you use them for ? What do you want to compute ? Graphs have a lot of method, you know.. `:-P`


Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
Or Lovasz theta number...



---

archive/issue_comments_180713.json:
```json
{
    "body": "<a id='comment:26'></a>> Obviously, regularity properties - and this is very fast with such data. Then, e.g., \n> e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\n> Or Lovasz theta number...\n\n\nHmmm... Looks like you will have an awful amount of code to write `:-P`\n\nNathann",
    "created_at": "2013-05-21T10:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180713",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>> Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
> e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
> Or Lovasz theta number...


Hmmm... Looks like you will have an awful amount of code to write `:-P`

Nathann



---

archive/issue_comments_180714.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 ncohen]:\n> > Obviously, regularity properties - and this is very fast with such data. Then, e.g., \n> > e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.\n> > Or Lovasz theta number...\n\n> \n> Hmmm... Looks like you will have an awful amount of code to write `:-P`\n\n\nI wouldn't classify calls to GAP as \"awful amount of code\" :)",
    "created_at": "2013-05-21T10:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180714",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>Replying to [comment:26 ncohen]:
> > Obviously, regularity properties - and this is very fast with such data. Then, e.g., 
> > e.g. maximum cliques, or an optimal colouring. It's downright hopeless to do without taking symmetries into account.
> > Or Lovasz theta number...

> 
> Hmmm... Looks like you will have an awful amount of code to write `:-P`


I wouldn't classify calls to GAP as "awful amount of code" :)



---

archive/issue_comments_180715.json:
```json
{
    "body": "<a id='comment:28'></a>Oh ! Well, if it's all in there already, then.... `:-)`\n\nNathann",
    "created_at": "2013-05-21T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180715",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>Oh ! Well, if it's all in there already, then.... `:-)`

Nathann



---

archive/issue_comments_180716.json:
```json
{
    "body": "<a id='comment:29'></a>> To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!\n\n\nThis is now #14631 ! \n\nNathann",
    "created_at": "2013-05-23T08:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14532#issuecomment-180716",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>> To construct these, you need to be able to create the corresponding forms, which are well-studied by group theory, as they lead to finite classical groups. GAP has code to create these forms; it's not completely trivial in characteristic two. You can actually just call GAP!


This is now #14631 ! 

Nathann
