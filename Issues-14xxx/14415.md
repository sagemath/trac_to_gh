# Issue 14415: Singular link problems on OS X PPC with GCC 4.7.2

archive/issues_014211.json:
```json
{
    "body": "When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:\n\n```\nlibtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \\\niparith.o mpsr_Tok.o claptmpl.o \\\ngrammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc\n/usr/bin/ld: for architecture ppc\n/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:\nrestGPRx\nsaveGPR\nlibtool: internal link edit command failed\n```\n\nThis can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n\n**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)\n\nAssignee: @jdemeyer\n\nCC:  jpflori\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Hans Schoenemann\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.9.beta4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14415\n\n",
    "closed_at": "2013-04-06T14:59:55Z",
    "created_at": "2013-04-05T08:41:10Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Singular link problems on OS X PPC with GCC 4.7.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14415",
    "user": "https://github.com/jdemeyer"
}
```
When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:

```
libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \
iparith.o mpsr_Tok.o claptmpl.o \
grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc
/usr/bin/ld: for architecture ppc
/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:
restGPRx
saveGPR
libtool: internal link edit command failed
```

This can be fixed by using `$(CXX)` to link instead of `$(LD)`.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])

**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)

Assignee: @jdemeyer

CC:  jpflori

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Hans Schoenemann

Author: Jeroen Demeyer

Merged: sage-5.9.beta4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14415





---

archive/issue_comments_190529.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -11,6 +11,8 @@\n libtool: internal link edit command failed\n ```\n \n+**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]\n+\n Upstream: Not yet reported upstream; Will do shortly.\n \n Author: Jeroen Demeyer\n```\n",
    "created_at": "2013-04-05T08:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190529",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -11,6 +11,8 @@
 libtool: internal link edit command failed
 ```
 
+**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]
+
 Upstream: Not yet reported upstream; Will do shortly.
 
 Author: Jeroen Demeyer
```




---

archive/issue_comments_190530.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:\n \n+```\n+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \\\n+iparith.o mpsr_Tok.o claptmpl.o \\\n+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc\n+/usr/bin/ld: for architecture ppc\n+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:\n+restGPRx\n+saveGPR\n+libtool: internal link edit command failed\n+```\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2013-04-05T08:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190530",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,17 @@
+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:
 
+```
+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \
+iparith.o mpsr_Tok.o claptmpl.o \
+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc
+/usr/bin/ld: for architecture ppc
+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:
+restGPRx
+saveGPR
+libtool: internal link edit command failed
+```
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_190531.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-05T09:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190531",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_190532.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:\n \n+```\n+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \\\n+iparith.o mpsr_Tok.o claptmpl.o \\\n+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc\n+/usr/bin/ld: for architecture ppc\n+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:\n+restGPRx\n+saveGPR\n+libtool: internal link edit command failed\n+```\n+\n+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2013-04-05T09:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190532",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,19 @@
+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:
 
+```
+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \
+iparith.o mpsr_Tok.o claptmpl.o \
+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc
+/usr/bin/ld: for architecture ppc
+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:
+restGPRx
+saveGPR
+libtool: internal link edit command failed
+```
+
+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_190533.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:\n \n+```\n+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \\\n+iparith.o mpsr_Tok.o claptmpl.o \\\n+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc\n+/usr/bin/ld: for architecture ppc\n+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:\n+restGPRx\n+saveGPR\n+libtool: internal link edit command failed\n+```\n+\n+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n+\n+**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190533",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,21 @@
+When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:
 
+```
+libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \
+iparith.o mpsr_Tok.o claptmpl.o \
+grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc
+/usr/bin/ld: for architecture ppc
+/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:
+restGPRx
+saveGPR
+libtool: internal link edit command failed
+```
+
+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])
+
+**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_190534.json:
```json
{
    "body": "<a id='comment:4'></a>Attachment [osx_link.patch](tarball://root/attachments/some-uuid/ticket14415/osx_link.patch) by @jdemeyer created at 2013-04-05 09:35:00",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190534",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Attachment [osx_link.patch](tarball://root/attachments/some-uuid/ticket14415/osx_link.patch) by @jdemeyer created at 2013-04-05 09:35:00



---

archive/issue_comments_190535.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2013-04-06T14:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190535",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_190536.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190536",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_040942.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-06T14:59:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14415#event-40942"
}
```



---

archive/issue_comments_190537.json:
```json
{
    "body": "<a id='comment:7'></a>The fact that upstream accepted my patch, I guess that counts as positive review :-)",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-190537",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>The fact that upstream accepted my patch, I guess that counts as positive review :-)
