# Issue 14415: Singular link problems on OS X PPC with GCC 4.7.2

archive/issues_014211.json:
```json
{
    "body": "When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:\n\n```\nlibtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \\\niparith.o mpsr_Tok.o claptmpl.o \\\ngrammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc\n/usr/bin/ld: for architecture ppc\n/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:\nrestGPRx\nsaveGPR\nlibtool: internal link edit command failed\n```\n\nThis can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n\n**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)\n\n**Assignee:** @jdemeyer\n\n**CC:**  jpflori\n\n**Upstream:** Fixed upstream, but not in a stable release.\n\n**Reviewer:** Hans Schoenemann\n\n**Author:** Jeroen Demeyer\n\n**Merged:** sage-5.9.beta4\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14415\n\n",
    "closed_at": "2013-04-06T14:59:55Z",
    "created_at": "2013-04-05T08:41:10Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Singular link problems on OS X PPC with GCC 4.7.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14415",
    "user": "https://github.com/jdemeyer"
}
```
When building singular on OS X 10.4 PPC using GCC 4.7.2 (#14378), there is a linker problem:

```
libtool -dynamic -twolevel_namespace -weak_reference_mismatches weak -undefined dynamic_lookup -single_module -o libsingular.dylib \
iparith.o mpsr_Tok.o claptmpl.o \
grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o semaphore.o slInit_Static.o mpsr_Put.o mpsr_PutPoly.o mpsr_GetPoly.o mpsr_sl.o mpsr_Get.o mpsr_GetMisc.o mpsr_Error.o  ndbm.o sing_dbm.o -lkernel -L../kernel -L../factory -L../libfac -L/Users/buildbot/build/sage/moufang-1/moufang_binary/build/sage-5.9.beta4/local/lib -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc
/usr/bin/ld: for architecture ppc
/usr/bin/ld: iparith.o has external relocation entries in non-writable section (__TEXT,__text) for symbols:
restGPRx
saveGPR
libtool: internal link edit command failed
```

This can be fixed by using `$(CXX)` to link instead of `$(LD)`.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])

**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)

**Assignee:** @jdemeyer

**CC:**  jpflori

**Upstream:** Fixed upstream, but not in a stable release.

**Reviewer:** Hans Schoenemann

**Author:** Jeroen Demeyer

**Merged:** sage-5.9.beta4

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14415





---

archive/issue_comments_228322.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,3 +10,5 @@\n saveGPR\n libtool: internal link edit command failed\n ```\n+\n+**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]\n``````\n",
    "created_at": "2013-04-05T08:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228322",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,3 +10,5 @@
 saveGPR
 libtool: internal link edit command failed
 ```
+
+**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]
``````




---

archive/issue_comments_228323.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n libtool: internal link edit command failed\n ```\n \n-**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)\n``````\n",
    "created_at": "2013-04-05T08:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228323",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 libtool: internal link edit command failed
 ```
 
-**spkg**: [attachment:http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg]
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)
``````




---

archive/issue_comments_228324.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-04-05T09:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228324",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_228325.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n libtool: internal link edit command failed\n ```\n \n-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)\n+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n``````\n",
    "created_at": "2013-04-05T09:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228325",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 libtool: internal link edit command failed
 ```
 
-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg)
+This can be fixed by using `$(CXX)` to link instead of `$(LD)`.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])
``````




---

archive/issue_comments_228326.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228326",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Reported upstream. No feedback yet.".



---

archive/issue_comments_228327.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,3 +14,5 @@\n This can be fixed by using `$(CXX)` to link instead of `$(LD)`.\n \n **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])\n+\n+**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)\n``````\n",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228327",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,3 +14,5 @@
 This can be fixed by using `$(CXX)` to link instead of `$(LD)`.
 
 **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p6.spkg) (patch added: [attachment:osx_link.patch])
+
+**upstream**: [http://www.singular.uni-kl.de:8002/trac/ticket/481](http://www.singular.uni-kl.de:8002/trac/ticket/481)
``````




---

archive/attachments_019451.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "osx_link.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14415/osx_link.patch",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_228328.json:
```json
{
    "body": "<a id='comment:4'></a>\n",
    "created_at": "2013-04-05T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228328",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>




---

archive/issue_comments_228329.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2013-04-05T09:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228329",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_228330.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228330",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_228331.json:
```json
{
    "body": "**Merged:** sage-5.9.beta4",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228331",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.9.beta4



---

archive/issue_events_047220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-06T14:59:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14415#event-47220"
}
```



---

archive/issue_comments_228332.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe fact that upstream accepted my patch, I guess that counts as positive review :-)",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228332",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
The fact that upstream accepted my patch, I guess that counts as positive review :-)



---

archive/issue_comments_228333.json:
```json
{
    "body": "**Reviewer:** Hans Schoenemann",
    "created_at": "2013-04-06T14:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14415#issuecomment-228333",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Hans Schoenemann
