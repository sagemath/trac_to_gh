# Issue 14052: Enabling plotting of top graded piece of infinite dimensional crystals

archive/issues_013848.json:
```json
{
    "body": "This patch changes the iterator for highest weight crystals to TransitiveIdealGraded to allow for plotting of the top piece of an infinite dimensional crystal.\n\nApply [attachment:trac_14052-infinite-crystal-as.patch]\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat\n\n**Keywords:** crystals, digraph, plotting, days45\n\n**Reviewer:** Nicolas M. Thiery, Travis Scrimshaw\n\n**Author:** Anne Schilling\n\n**Merged:** sage-5.7.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/14052\n\n",
    "closed_at": "2013-02-16T11:28:57Z",
    "created_at": "2013-02-03T17:22:00Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Enabling plotting of top graded piece of infinite dimensional crystals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14052",
    "user": "https://github.com/anneschilling"
}
```
This patch changes the iterator for highest weight crystals to TransitiveIdealGraded to allow for plotting of the top piece of an infinite dimensional crystal.

Apply [attachment:trac_14052-infinite-crystal-as.patch]

**Assignee:** sage-combinat

**CC:**  sage-combinat

**Keywords:** crystals, digraph, plotting, days45

**Reviewer:** Nicolas M. Thiery, Travis Scrimshaw

**Author:** Anne Schilling

**Merged:** sage-5.7.rc0

Issue created by migration from https://trac.sagemath.org/ticket/14052





---

archive/issue_comments_206046.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-02-03T18:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206046",
    "user": "https://github.com/anneschilling"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_206047.json:
```json
{
    "body": "<a id='comment:2'></a>\nTravis wrote a review patch which has been incorporated. The patch is ready for review!\n\nAnne",
    "created_at": "2013-02-05T02:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206047",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:2'></a>
Travis wrote a review patch which has been incorporated. The patch is ready for review!

Anne



---

archive/attachments_018963.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14052-infinite-crystal-as.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14052/trac_14052-infinite-crystal-as.patch",
    "created_at": "2013-02-05T02:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/anneschilling"
}
```



---

archive/issue_comments_206048.json:
```json
{
    "body": "<a id='comment:3'></a>\nRemoved trailing white spaces.\n\nAnne",
    "created_at": "2013-02-05T02:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206048",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:3'></a>
Removed trailing white spaces.

Anne



---

archive/issue_comments_206049.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-02-05T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206049",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_206050.json:
```json
{
    "body": "<a id='comment:4'></a>\nEverything looks good. Thanks.",
    "created_at": "2013-02-05T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206050",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Everything looks good. Thanks.



---

archive/issue_comments_206051.json:
```json
{
    "body": "**Changing status** from positive_review to needs_info.",
    "created_at": "2013-02-08T21:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206051",
    "user": "https://github.com/seblabbe"
}
```

**Changing status** from positive_review to needs_info.



---

archive/issue_comments_206052.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Anne,\n\nI have one small comment about the patch related to the modifications made to the file `sage/combinat/backtrack.py`. I do not think it is a good idea to add this new argument to the `__init__` of the `TransitiveIdealGraded`. I believe the maximal recursion depth should be an argument to the iterator method.\n\nIn fact, I started a patch just today in the train to fix stuff about `TransitiveIdealGraded` and `TransitiveIdeal`. I believe the creation of the class `TransitiveIdealGraded` was a mistake. For the same reason, we do not create a class of integers that we are going to multiplicate, another class for integers that we are going to add, and create a class for integers that we are going to factor. And now adding this new argument to the init does not go in the good direction...\n\nI am goind to upload a patch in a few minutes to make my point more clear. Then, I will leave you the choice of using it or not...",
    "created_at": "2013-02-08T21:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206052",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
Hi Anne,

I have one small comment about the patch related to the modifications made to the file `sage/combinat/backtrack.py`. I do not think it is a good idea to add this new argument to the `__init__` of the `TransitiveIdealGraded`. I believe the maximal recursion depth should be an argument to the iterator method.

In fact, I started a patch just today in the train to fix stuff about `TransitiveIdealGraded` and `TransitiveIdeal`. I believe the creation of the class `TransitiveIdealGraded` was a mistake. For the same reason, we do not create a class of integers that we are going to multiplicate, another class for integers that we are going to add, and create a class for integers that we are going to factor. And now adding this new argument to the init does not go in the good direction...

I am goind to upload a patch in a few minutes to make my point more clear. Then, I will leave you the choice of using it or not...



---

archive/attachments_018964.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "backtrack-sl.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14052/backtrack-sl.patch",
    "created_at": "2013-02-08T22:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/seblabbe"
}
```



---

archive/issue_comments_206053.json:
```json
{
    "body": "",
    "created_at": "2013-02-08T22:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206053",
    "user": "https://github.com/seblabbe"
}
```





---

archive/issue_comments_206054.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe patch I just uploaded shows how I think it should be done : adding an argument to the iterator method. My patch should create some conflicts with yours, I am sorry for that. Do you want to rebase your patch on mine?\n\nWhat my patch do not do for now is to deprecate this `TransitiveIdealGraded` class. This could be done in another ticket (in #6637 perhaps?). Anyhow, since I believe we should deprecate that class, I also think we should avoid to add new features to it.",
    "created_at": "2013-02-08T22:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206054",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>
The patch I just uploaded shows how I think it should be done : adding an argument to the iterator method. My patch should create some conflicts with yours, I am sorry for that. Do you want to rebase your patch on mine?

What my patch do not do for now is to deprecate this `TransitiveIdealGraded` class. This could be done in another ticket (in #6637 perhaps?). Anyhow, since I believe we should deprecate that class, I also think we should avoid to add new features to it.



---

archive/issue_comments_206055.json:
```json
{
    "body": "<a id='comment:7'></a>\nSalut S\u00e9bastien!\n\nReplying to [slabbe](#comment%3A6):\n> The patch I just uploaded shows how I think it should be done : adding an argument to the iterator method. My patch should create some conflicts with yours, I am sorry for that. Do you want to rebase your patch on mine?\n> \n> What my patch do not do for now is to deprecate this `TransitiveIdealGraded` class. This could be done in another ticket (in #6637 perhaps?). Anyhow, since I believe we should deprecate that class, I also think we should avoid to add new features to it.\n\n\nThanks much for working on the refactoring of backtrack.py; we need it!\n\nThat being said, TransitiveIdeal itself is going to get deprecated in\nthe process since we want a consistent naming scheme around\nRecursiveSet (that's the name we converged to on the mailing list,\nright?). So either way, adding an argument to TransitiveIdealGraded or\nadding a breath first search iterator in TransitiveIdeal is also\nadding features to to-be-deprecated classes.\n\nAlso, in the long run, we will want the following features:\n\n(1) RecursiveSet(generator, operators, max_depth=n)\n\n    A parent modeling the top piece of S (all elements of depth <= n)\n\n(2) RecursiveSet(generator, operators, predicate=...)\n\n    A parent modeling an upper ideal of S defined by a predicate\n\n(3) RecursiveSet(generator, operators, enumeration=\"depth\")\n\n    A parent modeling S, with depth first enumeration\n\n(4) RecursiveSet(generator, operators, enumeration=\"breath\")\n\n    A parent modeling S, with breath first enumeration\n\n(5) ...\n\nand not only have iterators for the above. And it's helpful for Anne\nto have the feature right away for (1).\n\n(note: the exact syntax is another topic of discussion; I don't mean\nthat it should be exactly as above)\n\nSo altogether, given that Anne's ticket is ready to go and is\nimportant for later development here during the semester, do you mind\nletting it go as is and rebasing your patch on top of it? We can add a\nquick note saying that this feature will be refactored (as all the\nrest).\n\nCheers,\n\t\t\t\tNicolas",
    "created_at": "2013-02-09T14:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206055",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>
Salut Sébastien!

Replying to [slabbe](#comment%3A6):
> The patch I just uploaded shows how I think it should be done : adding an argument to the iterator method. My patch should create some conflicts with yours, I am sorry for that. Do you want to rebase your patch on mine?
> 
> What my patch do not do for now is to deprecate this `TransitiveIdealGraded` class. This could be done in another ticket (in #6637 perhaps?). Anyhow, since I believe we should deprecate that class, I also think we should avoid to add new features to it.


Thanks much for working on the refactoring of backtrack.py; we need it!

That being said, TransitiveIdeal itself is going to get deprecated in
the process since we want a consistent naming scheme around
RecursiveSet (that's the name we converged to on the mailing list,
right?). So either way, adding an argument to TransitiveIdealGraded or
adding a breath first search iterator in TransitiveIdeal is also
adding features to to-be-deprecated classes.

Also, in the long run, we will want the following features:

(1) RecursiveSet(generator, operators, max_depth=n)

    A parent modeling the top piece of S (all elements of depth <= n)

(2) RecursiveSet(generator, operators, predicate=...)

    A parent modeling an upper ideal of S defined by a predicate

(3) RecursiveSet(generator, operators, enumeration="depth")

    A parent modeling S, with depth first enumeration

(4) RecursiveSet(generator, operators, enumeration="breath")

    A parent modeling S, with breath first enumeration

(5) ...

and not only have iterators for the above. And it's helpful for Anne
to have the feature right away for (1).

(note: the exact syntax is another topic of discussion; I don't mean
that it should be exactly as above)

So altogether, given that Anne's ticket is ready to go and is
important for later development here during the semester, do you mind
letting it go as is and rebasing your patch on top of it? We can add a
quick note saying that this feature will be refactored (as all the
rest).

Cheers,
				Nicolas



---

archive/issue_comments_206056.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This patch changes the iterator for highest weight crystals to TransitiveIdealGraded to allow for plotting of the top piece of an infinite dimensional crystal.\n+\n+Apply [attachment:trac_14052-infinite-crystal-as.patch]\n``````\n",
    "created_at": "2013-02-09T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206056",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This patch changes the iterator for highest weight crystals to TransitiveIdealGraded to allow for plotting of the top piece of an infinite dimensional crystal.
+
+Apply [attachment:trac_14052-infinite-crystal-as.patch]
``````




---

archive/issue_comments_206057.json:
```json
{
    "body": "<a id='comment:9'></a>\nHey Sebastien,\n\nI agree with you that there needs to be a more comprehensive class rather than two smaller classes, and I thank you for working on refactoring the code. However I believe that the depth should be an attribute of the class rather than an optional argument for an iterator method because these classes model a (sub)set obtained by (recursive) iteration. I don't know of any other such feature in sage.\n\nAdditionally I believe that just because a class is scheduled to be deprecated, this is not a reason to incorporate a useful feature or a short-term fix. I also find this feature helpful for my code (for #13872).\n\nIf you want a note that `backtrack.py` will be refactored, I would be fine with that. However, I would prefer `braktrack.py` to be refactored after this patch and so I am setting this back to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-02-09T16:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206057",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Hey Sebastien,

I agree with you that there needs to be a more comprehensive class rather than two smaller classes, and I thank you for working on refactoring the code. However I believe that the depth should be an attribute of the class rather than an optional argument for an iterator method because these classes model a (sub)set obtained by (recursive) iteration. I don't know of any other such feature in sage.

Additionally I believe that just because a class is scheduled to be deprecated, this is not a reason to incorporate a useful feature or a short-term fix. I also find this feature helpful for my code (for #13872).

If you want a note that `backtrack.py` will be refactored, I would be fine with that. However, I would prefer `braktrack.py` to be refactored after this patch and so I am setting this back to positive review.

Best,

Travis



---

archive/issue_comments_206058.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2013-02-09T16:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206058",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_206059.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-02-09T16:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206059",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_206060.json:
```json
{
    "body": "<a id='comment:11'></a>\nSalut Anne, Travis and Nicolas,\n\nYou convinced me. I will rebase my patch over yours and start the refactorization.\n\nS\u00e9bastien",
    "created_at": "2013-02-09T17:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206060",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'></a>
Salut Anne, Travis and Nicolas,

You convinced me. I will rebase my patch over yours and start the refactorization.

Sébastien



---

archive/issue_comments_206061.json:
```json
{
    "body": "<a id='comment:12'></a>\nfor the patchbot:\n\nApply trac_14052-infinite-crystal-as.patch",
    "created_at": "2013-02-09T17:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206061",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:12'></a>
for the patchbot:

Apply trac_14052-infinite-crystal-as.patch



---

archive/issue_comments_206062.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi S\u00e9bastien,\n\nThank you! If you are indeed going to refactor the backtracker, you probably want to do everything under #6637.\n\nBest,\n\nAnne",
    "created_at": "2013-02-09T17:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206062",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:13'></a>
Hi Sébastien,

Thank you! If you are indeed going to refactor the backtracker, you probably want to do everything under #6637.

Best,

Anne



---

archive/issue_events_045952.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-09T17:24:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45952"
}
```



---

archive/issue_comments_206063.json:
```json
{
    "body": "**Changing keywords** from \"crystals, digraph, plotting\" to \"crystals, digraph, plotting, days45\".",
    "created_at": "2013-02-14T04:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206063",
    "user": "https://github.com/anneschilling"
}
```

**Changing keywords** from "crystals, digraph, plotting" to "crystals, digraph, plotting, days45".



---

archive/issue_events_045953.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:22:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45953"
}
```



---

archive/issue_events_045954.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:22:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45954"
}
```



---

archive/issue_events_045955.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:24:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45955"
}
```



---

archive/issue_events_045956.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:24:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45956"
}
```



---

archive/issue_events_045957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-15T08:00:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45957"
}
```



---

archive/issue_events_045958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-15T08:00:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45958"
}
```



---

archive/issue_comments_206064.json:
```json
{
    "body": "**Merged:** sage-5.7.rc0",
    "created_at": "2013-02-16T11:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14052#issuecomment-206064",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.7.rc0



---

archive/issue_events_045959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-16T11:28:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14052",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14052#event-45959"
}
```
