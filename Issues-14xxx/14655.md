# Issue 14655: Dynkin diagrams does not copy like digraph

archive/issues_014451.json:
```json
{
    "body": "Initializing:\n\n```\nsage: d = DynkinDiagram(['B',3,1])\nsage: g = DiGraph()\nsage: for x in d.vertices(): g.add_vertex(x)\nsage: for y in d.edges(): g.add_edge(y)\nsage: cd = copy(d)\nsage: cg = copy(g)\nsage: cd is d\nFalse\nsage: cd == d and cg == g\nTrue\n```\nNow the correct behavior using `DiGraph`:\n\n```\nsage: g.vertices()\n[0, 1, 2, 3]\nsage: cg.vertices()\n[0, 1, 2, 3]\nsage: cg.add_vertex(4)\nsage: g.vertices()\n[0, 1, 2, 3]\nsage: cg.vertices()\n[0, 1, 2, 3, 4]\n```\nThe error with `DynkinDiagram`:\n\n```\nsage: d.vertices()\n[0, 1, 2, 3]\nsage: cd.vertices()\n[0, 1, 2, 3]\nsage: cd.add_vertex(4)       \nsage: cd.vertices()\n[0, 1, 2, 3, 4]\nsage: d.vertices()\n[0, 1, 2, 3, 4]\n```\n\nThis causes problems with `automorphism_group(edge_labels=True)` noticed by Mark Shimozono.\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @nthiery mshimo @anneschilling\n\n**Keywords:** dynkin diagram copy\n\n**Reviewer:** Mark Shimozono\n\n**Author:** Travis Scrimshaw\n\n**Merged:** sage-5.11.beta1\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14655\n\n",
    "closed_at": "2013-06-15T12:21:21Z",
    "created_at": "2013-05-28T17:05:24Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Dynkin diagrams does not copy like digraph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14655",
    "user": "https://github.com/tscrim"
}
```
Initializing:

```
sage: d = DynkinDiagram(['B',3,1])
sage: g = DiGraph()
sage: for x in d.vertices(): g.add_vertex(x)
sage: for y in d.edges(): g.add_edge(y)
sage: cd = copy(d)
sage: cg = copy(g)
sage: cd is d
False
sage: cd == d and cg == g
True
```
Now the correct behavior using `DiGraph`:

```
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3]
sage: cg.add_vertex(4)
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3, 4]
```
The error with `DynkinDiagram`:

```
sage: d.vertices()
[0, 1, 2, 3]
sage: cd.vertices()
[0, 1, 2, 3]
sage: cd.add_vertex(4)       
sage: cd.vertices()
[0, 1, 2, 3, 4]
sage: d.vertices()
[0, 1, 2, 3, 4]
```

This causes problems with `automorphism_group(edge_labels=True)` noticed by Mark Shimozono.

**Assignee:** sage-combinat

**CC:**  sage-combinat @nthiery mshimo @anneschilling

**Keywords:** dynkin diagram copy

**Reviewer:** Mark Shimozono

**Author:** Travis Scrimshaw

**Merged:** sage-5.11.beta1

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/14655





---

archive/issue_comments_233680.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-06-10T17:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233680",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_233681.json:
```json
{
    "body": "<a id='comment:2'></a>\nFixed by making `DynkinDiagram_class.__init__()` handle the input from `GenericGraph.__copy__()` and do some type-checking.",
    "created_at": "2013-06-10T17:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233681",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Fixed by making `DynkinDiagram_class.__init__()` handle the input from `GenericGraph.__copy__()` and do some type-checking.



---

archive/issue_comments_233682.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2013-06-10T17:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233682",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_comments_233683.json:
```json
{
    "body": "**Reviewer:** mshimo",
    "created_at": "2013-06-11T19:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233683",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

**Reviewer:** mshimo



---

archive/issue_comments_233684.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks, Travis, for fixing this. A few small things to deal with:\n\nPlease fix the docstring for :func:`DynkinDiagram`: the real issue for the Cartan matrix convention\nis transposing or not; in everyone's conventions the arrow points from a *longer* root to a *shorter* one.\n\nI ran the following tests and got some errors.\n\n```\nsage: d = DynkinDiagram(['A',3,1])\nsage: TestSuite(d).run()\nFailure in _test_not_implemented_methods:\nTraceback (click to the left of this block for traceback)\n...\nThe following tests failed: _test_not_implemented_methods\n```\n\nI'm not sure I understand why, but :class:`DynkinDiagram_class` inherits from\n:class:`CartanType_abstract` and therefore is obligated to supply its abstract methods.\nIt appears not to fulfill its promise for :meth:`is_finite`, :meth:`is_affine`, and :meth:`is_irreducible`.\n\nOtherwise it looks great!",
    "created_at": "2013-06-11T19:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233684",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:3'></a>
Thanks, Travis, for fixing this. A few small things to deal with:

Please fix the docstring for :func:`DynkinDiagram`: the real issue for the Cartan matrix convention
is transposing or not; in everyone's conventions the arrow points from a *longer* root to a *shorter* one.

I ran the following tests and got some errors.

```
sage: d = DynkinDiagram(['A',3,1])
sage: TestSuite(d).run()
Failure in _test_not_implemented_methods:
Traceback (click to the left of this block for traceback)
...
The following tests failed: _test_not_implemented_methods
```

I'm not sure I understand why, but :class:`DynkinDiagram_class` inherits from
:class:`CartanType_abstract` and therefore is obligated to supply its abstract methods.
It appears not to fulfill its promise for :meth:`is_finite`, :meth:`is_affine`, and :meth:`is_irreducible`.

Otherwise it looks great!



---

archive/issue_comments_233685.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-06-11T19:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233685",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_233686.json:
```json
{
    "body": "<a id='comment:4'></a>\nI believe it is so that you can easily pass Dynkin diagrams as Cartan types (without using the coercion system). Anyways, new version of the patch which implements the additional methods and makes the docstring fix.",
    "created_at": "2013-06-11T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233686",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
I believe it is so that you can easily pass Dynkin diagrams as Cartan types (without using the coercion system). Anyways, new version of the patch which implements the additional methods and makes the docstring fix.



---

archive/issue_comments_233687.json:
```json
{
    "body": "**Changing reviewer** from \"mshimo\" to \"Mark Shimozono\".",
    "created_at": "2013-06-11T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233687",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "mshimo" to "Mark Shimozono".



---

archive/issue_comments_233688.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-06-11T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233688",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_233689.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-06-12T00:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233689",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_048190.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T07:46:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14655#event-48190"
}
```



---

archive/issue_comments_233690.json:
```json
{
    "body": "**Changing status** from positive_review to needs_info.",
    "created_at": "2013-06-12T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233690",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_info.



---

archive/issue_comments_233691.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe patch file is missing some metadata, in particular a username. Did you create the patch using `hg export`?",
    "created_at": "2013-06-12T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233691",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
The patch file is missing some metadata, in particular a username. Did you create the patch using `hg export`?



---

archive/issue_comments_233692.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2013-06-12T08:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233692",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_233693.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [trac_14655-dynkin_copy-ts.patch](tarball://root/attachments/some-uuid/ticket14655/trac_14655-dynkin_copy-ts.patch) by @tscrim created at 2013-06-12 08:41:51\n\nForgot to export. Fixed.",
    "created_at": "2013-06-12T08:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233693",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Attachment [trac_14655-dynkin_copy-ts.patch](tarball://root/attachments/some-uuid/ticket14655/trac_14655-dynkin_copy-ts.patch) by @tscrim created at 2013-06-12 08:41:51

Forgot to export. Fixed.



---

archive/issue_comments_233694.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-06-12T08:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233694",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_233695.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-06-15T12:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233695",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_233696.json:
```json
{
    "body": "**Merged:** sage-5.11.beta1",
    "created_at": "2013-06-15T12:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14655#issuecomment-233696",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.11.beta1



---

archive/issue_events_048191.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-15T12:21:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14655",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14655#event-48191"
}
```
