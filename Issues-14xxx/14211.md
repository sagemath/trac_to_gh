# Issue 14211: Crash due to missing Cython exception handling for relational_to_bool()

archive/issues_014007.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "\n```\nsage: f(x)=matrix()                           \nsage: bool(f(x)==f(x))\n\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  Number_T::hash() python function (__hash__) raised exception\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14211_\n\n",
    "closed_at": "2015-10-22T08:32:18Z",
    "created_at": "2013-03-01T17:45:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Crash due to missing Cython exception handling for relational_to_bool()",
    "type": "issue",
    "updated_at": "2015-10-22T08:32:18Z",
    "url": "https://github.com/sagemath/sage/issues/14211",
    "user": "https://github.com/orlitzky"
}
```

```
sage: f(x)=matrix()                           
sage: bool(f(x)==f(x))

terminate called after throwing an instance of 'std::runtime_error'
  what():  Number_T::hash() python function (__hash__) raised exception
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/14211_





---

archive/issue_events_200151.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-03-01T17:45:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200151"
}
```



---

archive/issue_events_200152.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-03-01T17:45:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200152"
}
```



---

archive/issue_events_200153.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-03-01T17:45:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200153"
}
```



---

archive/issue_events_200154.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-03-01T17:45:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200154"
}
```



---

archive/issue_events_200155.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2013-03-01T17:45:10Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "subject": "https://github.com/orlitzky",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200155"
}
```



---

archive/issue_events_200156.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200156"
}
```



---

archive/issue_events_200157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200157"
}
```



---

archive/issue_events_200158.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200158"
}
```



---

archive/issue_events_200159.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200159"
}
```



---

archive/issue_events_200160.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200160"
}
```



---

archive/issue_events_200161.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200161"
}
```



---

archive/issue_events_200162.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200162"
}
```



---

archive/issue_events_200163.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200163"
}
```



---

archive/issue_events_200164.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T10:00:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200164"
}
```



---

archive/issue_events_200165.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T10:00:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200165"
}
```



---

archive/issue_events_200166.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-31T12:51:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200166"
}
```



---

archive/issue_events_200167.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-31T12:51:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200167"
}
```



---

archive/issue_comments_169642.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,11 +5,13 @@\n sage: f1(tau) = (pU + (tau - 1)*(pB - pU)).row()*(pU + (tau - 1)*(pB - pU)).column()                                         \n sage: d = (pB-pU).row()*(pB-pU).column()                                                              \n sage: f2(tau) = tau^2 * d + 2*tau*(pU.row()*(pB-pU).column() - d) + (pB-2*pU).row()*(pB-2*pU).column()\n-sage: f1(x) == f2(x)\n-([4*(tau - 1)^2]) == ([4*tau^2 - 8*tau + 4])\n sage: bool(f1(x) == f2(x))\n terminate called after throwing an instance of 'std::runtime_error'\n   what():  Number_T::hash() python function (__hash__) raised exception\n-...\n+------------------------------------------------------------------------\n+Unhandled SIGABRT: An abort() occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n ```\n-\n``````\n",
    "created_at": "2015-01-31T12:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169642",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,11 +5,13 @@
 sage: f1(tau) = (pU + (tau - 1)*(pB - pU)).row()*(pU + (tau - 1)*(pB - pU)).column()                                         
 sage: d = (pB-pU).row()*(pB-pU).column()                                                              
 sage: f2(tau) = tau^2 * d + 2*tau*(pU.row()*(pB-pU).column() - d) + (pB-2*pU).row()*(pB-2*pU).column()
-sage: f1(x) == f2(x)
-([4*(tau - 1)^2]) == ([4*tau^2 - 8*tau + 4])
 sage: bool(f1(x) == f2(x))
 terminate called after throwing an instance of 'std::runtime_error'
   what():  Number_T::hash() python function (__hash__) raised exception
-...
+------------------------------------------------------------------------
+Unhandled SIGABRT: An abort() occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
 ```
-
``````




---

archive/issue_comments_169643.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2015-05-03T07:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169643",
    "user": "https://github.com/rwst"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_169644.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReported as https://github.com/pynac/pynac/issues/34",
    "created_at": "2015-05-03T07:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169644",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Reported as https://github.com/pynac/pynac/issues/34



---

archive/issue_events_200168.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-03T07:02:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200168"
}
```



---

archive/issue_events_200169.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-03T07:02:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200169"
}
```



---

archive/issue_comments_169645.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nMinimal case given. In Sage `hash(matrix())` will not allow hashing probably because `PyObject_Hash` will fail and to prevent that. The fail happens in Pynac nevertheless because the check is avoided due to function expansion and there leads to the crash.\n\nOne part of the fix is preventing Sage from crashing. Surrounding the call to Pynac in `Expression::__nonzero__` with guards:\n\n```\n            sig_on()\n            pynac_result = relational_to_bool(self._gobj)\n            sig_off()\n```\nleads to:\n\n```\nsage: bool(f(x)==f(x))\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  Number_T::hash() python function (__hash__) raised exception\n---------------------------------------------------------------------------\nTypeError: mutable matrices are unhashable\n```\nwhich is the same you get with `hash(matrix())`, so quite sensible. What more? Why are matrices generated by `vector*vector` (the original case) or those in a function definition (like above) mutable at all?",
    "created_at": "2015-05-03T08:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169645",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

Minimal case given. In Sage `hash(matrix())` will not allow hashing probably because `PyObject_Hash` will fail and to prevent that. The fail happens in Pynac nevertheless because the check is avoided due to function expansion and there leads to the crash.

One part of the fix is preventing Sage from crashing. Surrounding the call to Pynac in `Expression::__nonzero__` with guards:

```
            sig_on()
            pynac_result = relational_to_bool(self._gobj)
            sig_off()
```
leads to:

```
sage: bool(f(x)==f(x))
terminate called after throwing an instance of 'std::runtime_error'
  what():  Number_T::hash() python function (__hash__) raised exception
---------------------------------------------------------------------------
TypeError: mutable matrices are unhashable
```
which is the same you get with `hash(matrix())`, so quite sensible. What more? Why are matrices generated by `vector*vector` (the original case) or those in a function definition (like above) mutable at all?



---

archive/issue_comments_169646.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,8 @@\n \n ```\n-sage: pU = vector([0,0])                            \n-sage: pB = vector([2,0])                            \n-sage: f1(tau) = (pU + (tau - 1)*(pB - pU)).row()*(pU + (tau - 1)*(pB - pU)).column()                                         \n-sage: d = (pB-pU).row()*(pB-pU).column()                                                              \n-sage: f2(tau) = tau^2 * d + 2*tau*(pU.row()*(pB-pU).column() - d) + (pB-2*pU).row()*(pB-2*pU).column()\n-sage: bool(f1(x) == f2(x))\n+sage: f(x)=matrix()                           \n+sage: bool(f(x)==f(x))\n+\n terminate called after throwing an instance of 'std::runtime_error'\n   what():  Number_T::hash() python function (__hash__) raised exception\n ------------------------------------------------------------------------\n``````\n",
    "created_at": "2015-05-03T08:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169646",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,8 @@
 
 ```
-sage: pU = vector([0,0])                            
-sage: pB = vector([2,0])                            
-sage: f1(tau) = (pU + (tau - 1)*(pB - pU)).row()*(pU + (tau - 1)*(pB - pU)).column()                                         
-sage: d = (pB-pU).row()*(pB-pU).column()                                                              
-sage: f2(tau) = tau^2 * d + 2*tau*(pU.row()*(pB-pU).column() - d) + (pB-2*pU).row()*(pB-2*pU).column()
-sage: bool(f1(x) == f2(x))
+sage: f(x)=matrix()                           
+sage: bool(f(x)==f(x))
+
 terminate called after throwing an instance of 'std::runtime_error'
   what():  Number_T::hash() python function (__hash__) raised exception
 ------------------------------------------------------------------------
``````




---

archive/issue_events_200170.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-03T15:00:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "title_is": "Crash due to missing sig_on in Expresion.__nonzero__",
    "title_was": "Crash in GiNaC::Number_T::hash()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200170"
}
```



---

archive/issue_comments_169647.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Reported upstream. Developers deny it's a bug.**",
    "created_at": "2015-05-03T15:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169647",
    "user": "https://github.com/rwst"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Reported upstream. Developers deny it's a bug.**



---

archive/issue_events_200171.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-03T15:00:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "title_is": "Crash due to missing sig_on in Expression.__nonzero__",
    "title_was": "Crash due to missing sig_on in Expresion.__nonzero__",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200171"
}
```



---

archive/issue_comments_169648.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@rwst](#comment:8):\n> which is the same you get with `hash(matrix())`, so quite sensible. What more? Why are matrices generated by `vector*vector` (the original case) or those in a function definition (like above) mutable at all?\n\nBecause the default for matrix creation is to create a mutable matrix. That's because a mutable matrix can be turned into an immutable one, but not the other way around (that requires copying the matrix to a new, mutable, one). That default is probably inconvenient for symbolics.\n\nAre you sure this is the sole problem, though? If we try this:\n\n```\ndef imm_mt(*args,**kwargs):\n    M=matrix(*args,**kwargs)\n    M.set_immutable()\n    return M\nf(x)=imm_mt()\n```\nthen we get\n\n```\nsage: hash(f(x))\n0\n```\nbut `bool(f(x)==f(x))` still crashes. is it trying to see if `f(x)*f(x)^(-1)` is one?",
    "created_at": "2015-05-03T17:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169648",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@rwst](#comment:8):
> which is the same you get with `hash(matrix())`, so quite sensible. What more? Why are matrices generated by `vector*vector` (the original case) or those in a function definition (like above) mutable at all?

Because the default for matrix creation is to create a mutable matrix. That's because a mutable matrix can be turned into an immutable one, but not the other way around (that requires copying the matrix to a new, mutable, one). That default is probably inconvenient for symbolics.

Are you sure this is the sole problem, though? If we try this:

```
def imm_mt(*args,**kwargs):
    M=matrix(*args,**kwargs)
    M.set_immutable()
    return M
f(x)=imm_mt()
```
then we get

```
sage: hash(f(x))
0
```
but `bool(f(x)==f(x))` still crashes. is it trying to see if `f(x)*f(x)^(-1)` is one?



---

archive/issue_comments_169649.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nbruin](#comment:11):\n> Are you sure this is the sole problem, though?\n\nI have reopened the Pynac issue. The crash is in exactly the same call tree. It happens while trying to multiply the rhs with `-1` to get `lhs-rhs`. So:\n\n```\nsage: f(x)=matrix()\nsage: bool(f(x)==1)\nTrue\nsage: bool(1==f(x))\n<crash>\n```\nAlso no, I don't think it's the sole problem. Either Sage or Pynac will have to check somewhere before evaluating that all mutable Python objects of the expression are switched to immutable (or make immutable copies).\n\nEDIT: But that would be a different ticket: #18360",
    "created_at": "2015-05-04T06:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169649",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nbruin](#comment:11):
> Are you sure this is the sole problem, though?

I have reopened the Pynac issue. The crash is in exactly the same call tree. It happens while trying to multiply the rhs with `-1` to get `lhs-rhs`. So:

```
sage: f(x)=matrix()
sage: bool(f(x)==1)
True
sage: bool(1==f(x))
<crash>
```
Also no, I don't think it's the sole problem. Either Sage or Pynac will have to check somewhere before evaluating that all mutable Python objects of the expression are switched to immutable (or make immutable copies).

EDIT: But that would be a different ticket: #18360



---

archive/issue_comments_169650.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nPlease read [http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions)",
    "created_at": "2015-05-04T06:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169650",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Please read [http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions)



---

archive/issue_events_200172.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-04T06:48:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "title_is": "Crash due to missing Cython exception handling for relational_to_bool()",
    "title_was": "Crash due to missing sig_on in Expression.__nonzero__",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200172"
}
```



---

archive/issue_comments_169651.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers deny it's a bug.** to none",
    "created_at": "2015-05-04T06:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169651",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **Reported upstream. Developers deny it's a bug.** to none



---

archive/issue_comments_169652.json:
```json
{
    "body": "Branch: **[u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__)**",
    "created_at": "2015-05-04T14:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169652",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__)**



---

archive/issue_comments_169653.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-05-04T15:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169653",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_169654.json:
```json
{
    "body": "Commit: **[b9698e0](https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958)**",
    "created_at": "2015-05-04T15:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169654",
    "user": "https://github.com/rwst"
}
```

Commit: **[b9698e0](https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958)**



---

archive/issue_events_200173.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-04T15:11:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200173"
}
```



---

archive/issue_comments_169655.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nbruin](#comment:11):\n> If we try this:\n> \n> ```\n> def imm_mt(*args,**kwargs):\n>     M=matrix(*args,**kwargs)\n>     M.set_immutable()\n>     return M\n> f(x)=imm_mt()\n> ```\n> then we get\n> \n> ```\n> sage: hash(f(x))\n> 0\n> ```\n> but `bool(f(x)==f(x))` still crashes.\n\nMy best guess at the moment is that somewhere in between a copy is made which, as you suggested, is then mutable again. This can only be fixed by a dedicated ticket such as #18360. \n\nAs to this code, the reviewer should check doubly if what I did here was right. There was not a single example in Sage with a special function catching exceptions from which I could have learned.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958\">b9698e0</a></td><td><code>14211: catch exceptions from Expression.__nonzero__</code></td></tr></table>\n",
    "created_at": "2015-05-04T15:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169655",
    "user": "https://github.com/rwst"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nbruin](#comment:11):
> If we try this:
> 
> ```
> def imm_mt(*args,**kwargs):
>     M=matrix(*args,**kwargs)
>     M.set_immutable()
>     return M
> f(x)=imm_mt()
> ```
> then we get
> 
> ```
> sage: hash(f(x))
> 0
> ```
> but `bool(f(x)==f(x))` still crashes.

My best guess at the moment is that somewhere in between a copy is made which, as you suggested, is then mutable again. This can only be fixed by a dedicated ticket such as #18360. 

As to this code, the reviewer should check doubly if what I did here was right. There was not a single example in Sage with a special function catching exceptions from which I could have learned.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958">b9698e0</a></td><td><code>14211: catch exceptions from Expression.__nonzero__</code></td></tr></table>




---

archive/issue_comments_169656.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nObviously, a doctest is needed.\n\nBesides that, it makes no sense to add an additional layer `_nonzero_`. The exception should be handled in the pynac interface, i.e. the `relational_to_bool()` function.",
    "created_at": "2015-05-04T16:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169656",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Obviously, a doctest is needed.

Besides that, it makes no sense to add an additional layer `_nonzero_`. The exception should be handled in the pynac interface, i.e. the `relational_to_bool()` function.



---

archive/issue_events_200174.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-04T16:19:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200174"
}
```



---

archive/issue_events_200175.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-04T16:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200175"
}
```



---

archive/issue_comments_169657.json:
```json
{
    "body": "Changed branch from **[u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__)** to **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)**",
    "created_at": "2015-05-05T06:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169657",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/crash_due_to_missing_cython_exception_handling_for_relational_to_bool__)** to **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)**



---

archive/issue_comments_169658.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nInteresting. The C++ layer outputs an error message, and the Python layer deals with the error too, because presumably the error from calling `PyHash` from the C++ layer is still pending.\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30\">e1374da</a></td><td><code>14211: catch Pynac exceptions</code></td></tr></table>\n",
    "created_at": "2015-05-05T06:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169658",
    "user": "https://github.com/rwst"
}
```

<div id="comment:20" align="right">comment:20</div>

Interesting. The C++ layer outputs an error message, and the Python layer deals with the error too, because presumably the error from calling `PyHash` from the C++ layer is still pending.
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30">e1374da</a></td><td><code>14211: catch Pynac exceptions</code></td></tr></table>




---

archive/issue_events_200176.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-05T06:42:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200176"
}
```



---

archive/issue_events_200177.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-05T06:42:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200177"
}
```



---

archive/issue_comments_169659.json:
```json
{
    "body": "Changed commit from **[b9698e0](https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958)** to **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)**",
    "created_at": "2015-05-05T06:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169659",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[b9698e0](https://github.com/sagemath/sagetrac-mirror/commit/b9698e065034425ff9d563b66a59616301288958)** to **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)**



---

archive/issue_comments_169660.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@rwst](#comment:20):\n> Interesting. The C++ layer outputs an error message, and the Python layer deals with the error too, because presumably the error from calling `PyHash` from the C++ layer is still pending.\n\nWell, behaviour shouldn't depend on what \"presumably\" happens (does the traceback look sensible? If not, you're certainly doing it wrong). I admit I don't know the proper way to deal with this (a C++ exception and `PyErr_Occurred() != NULL`), but it's not right like this.\n\nBesides that, I would never print the C++ exception.",
    "created_at": "2015-05-05T07:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169660",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@rwst](#comment:20):
> Interesting. The C++ layer outputs an error message, and the Python layer deals with the error too, because presumably the error from calling `PyHash` from the C++ layer is still pending.

Well, behaviour shouldn't depend on what "presumably" happens (does the traceback look sensible? If not, you're certainly doing it wrong). I admit I don't know the proper way to deal with this (a C++ exception and `PyErr_Occurred() != NULL`), but it's not right like this.

Besides that, I would never print the C++ exception.



---

archive/issue_events_200178.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-05T07:16:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200178"
}
```



---

archive/issue_events_200179.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-05T07:16:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200179"
}
```



---

archive/issue_comments_169661.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI can have a look at how to properly deal with this, but not now.",
    "created_at": "2015-05-05T07:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169661",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

I can have a look at how to properly deal with this, but not now.



---

archive/issue_comments_169662.json:
```json
{
    "body": "Changed commit from **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)** to none",
    "created_at": "2015-06-17T14:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169662",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)** to none



---

archive/issue_comments_169663.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to none",
    "created_at": "2015-06-17T14:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169663",
    "user": "https://github.com/rwst"
}
```

Changed author from **Ralf Stephan** to none



---

archive/issue_comments_169664.json:
```json
{
    "body": "Changed branch from **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)** to none",
    "created_at": "2015-06-17T14:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169664",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)** to none



---

archive/issue_comments_169665.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNow that the actual bug is fixed in future Pynac (#18360) the given doctest will not work in the future, so I removed the commit.",
    "created_at": "2015-06-17T14:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169665",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

Now that the actual bug is fixed in future Pynac (#18360) the given doctest will not work in the future, so I removed the commit.



---

archive/issue_comments_169666.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nBranch reset because other exceptions can be thrown.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30\">e1374da</a></td><td><code>14211: catch Pynac exceptions</code></td></tr></table>\n",
    "created_at": "2015-06-22T15:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169666",
    "user": "https://github.com/rwst"
}
```

<div id="comment:25" align="right">comment:25</div>

Branch reset because other exceptions can be thrown.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30">e1374da</a></td><td><code>14211: catch Pynac exceptions</code></td></tr></table>




---

archive/issue_comments_169667.json:
```json
{
    "body": "Commit: **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)**",
    "created_at": "2015-06-22T15:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169667",
    "user": "https://github.com/rwst"
}
```

Commit: **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)**



---

archive/issue_comments_169668.json:
```json
{
    "body": "Branch: **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)**",
    "created_at": "2015-06-22T15:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169668",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)**



---

archive/issue_events_200180.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-19T14:09:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200180"
}
```



---

archive/issue_events_200181.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-19T14:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200181"
}
```



---

archive/issue_comments_169669.json:
```json
{
    "body": "Changed commit from **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)** to none",
    "created_at": "2015-10-19T14:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169669",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[e1374da](https://github.com/sagemath/sagetrac-mirror/commit/e1374da2834bca4788084c91972e8c8c714e3b30)** to none



---

archive/issue_events_200182.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-19T14:09:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200182"
}
```



---

archive/issue_events_200183.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-19T14:09:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200183"
}
```



---

archive/issue_events_200184.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-19T14:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200184"
}
```



---

archive/issue_comments_169670.json:
```json
{
    "body": "Changed branch from **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)** to none",
    "created_at": "2015-10-19T14:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169670",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/14211](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/14211)** to none



---

archive/issue_comments_169671.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nNo longer necessary (doctest added in #18360)",
    "created_at": "2015-10-19T14:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14211#issuecomment-169671",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

No longer necessary (doctest added in #18360)



---

archive/issue_events_200185.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-22T08:32:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200185"
}
```



---

archive/issue_events_200186.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-22T08:32:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14211",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14211#event-200186"
}
```
