# Issue 14875: Remove CombinatorialClass from DyckWords

archive/issues_014671.json:
```json
{
    "body": "And general reorganization thereof.\n\nPart of #12913.\n\nApply: [attachment:trac_14875-remove_cc_dyck_word-ts-upd.patch\u200b]\n\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @nthiery\n\nReviewer: Darij Grinberg\n\nAuthor: Travis Scrimshaw\n\nMerged: sage-5.13.beta0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/14875\n\n",
    "closed_at": "2013-10-07T06:49:35Z",
    "created_at": "2013-07-10T08:40:30Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Remove CombinatorialClass from DyckWords",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14875",
    "user": "https://github.com/tscrim"
}
```
And general reorganization thereof.

Part of #12913.

Apply: [attachment:trac_14875-remove_cc_dyck_word-ts-upd.patch​]


Assignee: sage-combinat

CC:  sage-combinat @nthiery

Reviewer: Darij Grinberg

Author: Travis Scrimshaw

Merged: sage-5.13.beta0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/14875





---

archive/issue_comments_234032.json:
```json
{
    "body": "<a id='comment:1'></a>\n```\nUse the bijection [Knu1973]_ to send ``self`` to a `321`-avoiding\npermutation.\n```\n\nThis reference (to TAOCP III without any further pointer) might not be very helpful. It should specify pp. 60-61. Better, add a reference to 3.1 of http://arxiv.org/abs/0805.1325 which defines it explicitly.",
    "created_at": "2013-07-12T18:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234032",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:1'></a>
```
Use the bijection [Knu1973]_ to send ``self`` to a `321`-avoiding
permutation.
```

This reference (to TAOCP III without any further pointer) might not be very helpful. It should specify pp. 60-61. Better, add a reference to 3.1 of http://arxiv.org/abs/0805.1325 which defines it explicitly.



---

archive/issue_comments_234033.json:
```json
{
    "body": "<a id='comment:2'></a>The dependency on #12453 is due to `doctest/sources.py`.",
    "created_at": "2013-07-19T12:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234033",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>The dependency on #12453 is due to `doctest/sources.py`.



---

archive/issue_comments_234034.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#12453\"",
    "created_at": "2013-07-19T12:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234034",
    "user": "https://github.com/tscrim"
}
```

Changing dependencies from "" to "#12453"



---

archive/issue_comments_234035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-19T12:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234035",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_234036.json:
```json
{
    "body": "<a id='comment:3'></a>Uploading some modifications, yet far from an actual review. One thing I'm doing is eliminating the dependency on the order of multiplication of permutations.\n\nI don't understand what the aliases here are for (copypasta?):\n\n```\n    display=dict(default=\"list\",\n                 description='Specifies how Dyck words should be printed',\n                 values=dict(list='displayed as a list',\n                             lattice='displayed on the lattice defined by ``diagram_style``'),\n                 alias=dict(exp=\"exp_low\", compact=\"compact_low\", array=\"diagram\",\n                           ferrers_diagram=\"diagram\", young_diagram=\"diagram\"),\n                 case_sensitive=False),\n```",
    "created_at": "2013-08-28T12:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234036",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:3'></a>Uploading some modifications, yet far from an actual review. One thing I'm doing is eliminating the dependency on the order of multiplication of permutations.

I don't understand what the aliases here are for (copypasta?):

```
    display=dict(default="list",
                 description='Specifies how Dyck words should be printed',
                 values=dict(list='displayed as a list',
                             lattice='displayed on the lattice defined by ``diagram_style``'),
                 alias=dict(exp="exp_low", compact="compact_low", array="diagram",
                           ferrers_diagram="diagram", young_diagram="diagram"),
                 case_sensitive=False),
```



---

archive/issue_comments_234037.json:
```json
{
    "body": "<a id='comment:4'></a>Hey Darij,\n\nThat whole latex option is a copy/paste (copypasta) error and should be removed since there are (currently) no other latex output types.\n\nAlso if we review this before #12453, I can easily commute the patches.\n\nThanks,\n\nTravis",
    "created_at": "2013-08-30T00:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234037",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Hey Darij,

That whole latex option is a copy/paste (copypasta) error and should be removed since there are (currently) no other latex output types.

Also if we review this before #12453, I can easily commute the patches.

Thanks,

Travis



---

archive/issue_comments_234038.json:
```json
{
    "body": "<a id='comment:5'></a>Uploaded my review patch. Please look over it as I'm not 100% sure I always caught your correct intentions.\n\nI took the freedom to remove `def is_a_prefix` (and replace all reference to it by ones to `is_a`), since it was doing precisely the same thing as `def is_a`. This might theoretically have caused some issues in other places, but at least the sage/combinat/*.py files doctest correctly (I have only done `./sage -bt devel/sage-main/sage/combinat`; for doctesting the whole library I don't have the time right now).\n\nWhy did you remove the `an_element()` doctests?\n\nYes, please commute this ante #12453, as I don't feel I have very much to say about Cython structs.",
    "created_at": "2013-08-30T23:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234038",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>Uploaded my review patch. Please look over it as I'm not 100% sure I always caught your correct intentions.

I took the freedom to remove `def is_a_prefix` (and replace all reference to it by ones to `is_a`), since it was doing precisely the same thing as `def is_a`. This might theoretically have caused some issues in other places, but at least the sage/combinat/*.py files doctest correctly (I have only done `./sage -bt devel/sage-main/sage/combinat`; for doctesting the whole library I don't have the time right now).

Why did you remove the `an_element()` doctests?

Yes, please commute this ante #12453, as I don't feel I have very much to say about Cython structs.



---

archive/issue_comments_234039.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Darij Grinberg\"",
    "created_at": "2013-08-30T23:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234039",
    "user": "https://github.com/darijgr"
}
```

Changing reviewer from "" to "Darij Grinberg"



---

archive/issue_comments_234040.json:
```json
{
    "body": "<a id='comment:7'></a>Hey Darij,\n\nThanks for doing the full review. I commuted it past #12453, folded in your review patch so I could make one small change of making `is_a_prefix` a deprecated function alias of `is_a`.\n\nThanks,\n\nTravis",
    "created_at": "2013-09-01T19:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234040",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Hey Darij,

Thanks for doing the full review. I commuted it past #12453, folded in your review patch so I could make one small change of making `is_a_prefix` a deprecated function alias of `is_a`.

Thanks,

Travis



---

archive/issue_comments_234041.json:
```json
{
    "body": "Changing dependencies from \"#12453\" to \"\"",
    "created_at": "2013-09-01T19:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234041",
    "user": "https://github.com/tscrim"
}
```

Changing dependencies from "#12453" to ""



---

archive/issue_comments_234042.json:
```json
{
    "body": "<a id='comment:8'></a>Attachment [trac_14875-remove_cc_dyck_word-ts.patch](tarball://root/attachments/some-uuid/ticket14875/trac_14875-remove_cc_dyck_word-ts.patch) by @tscrim created at 2013-09-01 19:31:56\n\nFor patchbot:\n\nApply: trac_14875-remove_cc_dyck_word-ts.patch",
    "created_at": "2013-09-01T19:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234042",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Attachment [trac_14875-remove_cc_dyck_word-ts.patch](tarball://root/attachments/some-uuid/ticket14875/trac_14875-remove_cc_dyck_word-ts.patch) by @tscrim created at 2013-09-01 19:31:56

For patchbot:

Apply: trac_14875-remove_cc_dyck_word-ts.patch



---

archive/issue_comments_234043.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-02T13:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234043",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_234044.json:
```json
{
    "body": "<a id='comment:10'></a>Thank you again Darij.",
    "created_at": "2013-09-02T16:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234044",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Thank you again Darij.



---

archive/issue_events_042730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-09-26T15:47:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14875#event-42730"
}
```



---

archive/issue_comments_234045.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-09-30T06:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234045",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_234046.json:
```json
{
    "body": "<a id='comment:12'></a>\n```\n**********************************************************************\nFile \"devel/sage/sage/doctest/sources.py\", line 666, in sage.doctest.sources.FileDocTestSource._test_enough_doctests\nFailed example:\n    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time\n        path = os.path.relpath(path)\n        dirs.sort(); files.sort()\n        for F in files:\n            _, ext = os.path.splitext(F)\n            if ext in ('.py', '.pyx', '.sage', '.spyx', '.rst'):\n                filename = os.path.join(path, F)\n                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))\n                FDS._test_enough_doctests(verbose=False)\nExpected:\n    There are 6 tests in sage/combinat/dyck_word.py that are not being run\n    There are 18 tests in sage/combinat/partition.py that are not being run\n    There are 15 tests in sage/combinat/permutation.py that are not being run\n    There are 14 tests in sage/combinat/skew_partition.py that are not being run\n    There are 18 tests in sage/combinat/tableau.py that are not being run\n    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run\n    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 9 tests in sage/graphs/graph_plot.py that are not being run\n    There are 2 tests in sage/server/notebook/worksheet.py that are not being run\nGot:\n    There are 7 tests in sage/combinat/dyck_word.py that are not being run\n    There are 18 tests in sage/combinat/partition.py that are not being run\n    There are 15 tests in sage/combinat/permutation.py that are not being run\n    There are 14 tests in sage/combinat/skew_partition.py that are not being run\n    There are 18 tests in sage/combinat/tableau.py that are not being run\n    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run\n    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 9 tests in sage/graphs/graph_plot.py that are not being run\n    There are 2 tests in sage/server/notebook/worksheet.py that are not being run\n**********************************************************************\n```",
    "created_at": "2013-09-30T06:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234046",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
```
**********************************************************************
File "devel/sage/sage/doctest/sources.py", line 666, in sage.doctest.sources.FileDocTestSource._test_enough_doctests
Failed example:
    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time
        path = os.path.relpath(path)
        dirs.sort(); files.sort()
        for F in files:
            _, ext = os.path.splitext(F)
            if ext in ('.py', '.pyx', '.sage', '.spyx', '.rst'):
                filename = os.path.join(path, F)
                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))
                FDS._test_enough_doctests(verbose=False)
Expected:
    There are 6 tests in sage/combinat/dyck_word.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 2 tests in sage/server/notebook/worksheet.py that are not being run
Got:
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 2 tests in sage/server/notebook/worksheet.py that are not being run
**********************************************************************
```



---

archive/issue_comments_234047.json:
```json
{
    "body": "Attachment [trac_14875-remove_cc_dyck_word-ts-upd.patch](tarball://root/attachments/some-uuid/ticket14875/trac_14875-remove_cc_dyck_word-ts-upd.patch) by @darijgr created at 2013-10-02 00:07:07\n\nupdated version with edited doctest result on sources.py",
    "created_at": "2013-10-02T00:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234047",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14875-remove_cc_dyck_word-ts-upd.patch](tarball://root/attachments/some-uuid/ticket14875/trac_14875-remove_cc_dyck_word-ts-upd.patch) by @darijgr created at 2013-10-02 00:07:07

updated version with edited doctest result on sources.py



---

archive/issue_comments_234048.json:
```json
{
    "body": "<a id='comment:13'></a>That said, I have no idea what doctests aren't run in the first place... (and why).",
    "created_at": "2013-10-02T00:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234048",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>That said, I have no idea what doctests aren't run in the first place... (and why).



---

archive/issue_comments_234049.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n And general reorganization thereof.\n \n Part of #12913.\n+\n+Apply: [attachment:trac_14875-remove_cc_dyck_word-ts-upd.patch\u200b]\n+\n \n Author: Travis Scrimshaw\n \n``````\n",
    "created_at": "2013-10-02T01:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234049",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 And general reorganization thereof.
 
 Part of #12913.
+
+Apply: [attachment:trac_14875-remove_cc_dyck_word-ts-upd.patch​]
+
 
 Author: Travis Scrimshaw
 
``````




---

archive/issue_comments_234050.json:
```json
{
    "body": "<a id='comment:14'></a>It's because they are in dynamic docstrings (i.e. set via a `__doc__` attribute), not static to a class or function. This is a known issue #14272.\n\nFor patchbot:\n\nApply: trac_14875-remove_cc_dyck_word-ts-upd.patch\n\u200b",
    "created_at": "2013-10-02T01:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234050",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>It's because they are in dynamic docstrings (i.e. set via a `__doc__` attribute), not static to a class or function. This is a known issue #14272.

For patchbot:

Apply: trac_14875-remove_cc_dyck_word-ts-upd.patch
​



---

archive/issue_comments_234051.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-10-02T01:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234051",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_234052.json:
```json
{
    "body": "<a id='comment:15'></a>Also thanks for making the quick change (I was just about to do it :P).",
    "created_at": "2013-10-02T01:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234052",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Also thanks for making the quick change (I was just about to do it :P).



---

archive/issue_comments_234053.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-07T06:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234053",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_234054.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.13.beta0\"",
    "created_at": "2013-10-07T06:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14875#issuecomment-234054",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.13.beta0"



---

archive/issue_events_042731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-07T06:49:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14875",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14875#event-42731"
}
```
