# Issue 14567: Refactor continued fractions

archive/issues_014363.json:
```json
{
    "assignees": [
        "https://github.com/videlec"
    ],
    "body": "Continued fractions (in sage.rings.contfrac) do not do what we expect:\n\n1. categories are not properly initialized nor used.\n2. all arithmetic operations go back and forth with the underlying rational (there are much more direct solutions for taking the negative, inverse and to compare two continued fractions)\n3. it only deals with rational numbers\n4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n5. there is no bridge with quadratic numbers (see also #11345)\n6. there is no bridge with words (sage.combinat.words)\n7. continued fractions are not included in the documentation\n\nThe patch proposed here develop some general design for dealing with continued fractions and solve all issues above.\n\nWith the patch applied we can do\n\n```\nsage: (117/253).continued_fraction()\n[0; 2, 6, 6, 3]\n\nsage: K.<sqrt2> = QuadraticField(2)\nsage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff\n[0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]\nsage: cff.period()\n(2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)\nsage: cff.preperiod()\n(0, 1)\nsage: cff.value()\n1/3*sqrt2 + 1/4\nsage: cff.n(digits=50)\n0.72140452079103168293389624140323269285655729179232\n\nsage: cf_pi = continued_fraction(pi)\n[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]\nsage: cf_pi.quotient(1500)\n1\n\nsage: cf_fib = continued_fraction(words.FibonacciWord([1,2]))\nsage: cf_fib\n[1; 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2...]\nsage: cf_fib.n(digits=42)\n1.38795458796714233691931385987318547787815\n```\nIn particular we solve the question in #11345.\n\nDepends on #13213\nDepends on #13256\nDepends on #14563\n\nCC:  @sagetrac-tmonteil @seblabbe @sagetrac-Fougeroc\n\nKeywords: **continued fractions, numerical approximation**\n\nBranch: **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**\n\nReviewer: **Ralf Stephan, Thierry Monteil**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/14567_\n\n",
    "closed_at": "2015-01-29T22:41:54Z",
    "created_at": "2013-05-11T15:09:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactor continued fractions",
    "type": "issue",
    "updated_at": "2016-02-05T11:32:07Z",
    "url": "https://github.com/sagemath/sage/issues/14567",
    "user": "https://github.com/videlec"
}
```
Continued fractions (in sage.rings.contfrac) do not do what we expect:

1. categories are not properly initialized nor used.
2. all arithmetic operations go back and forth with the underlying rational (there are much more direct solutions for taking the negative, inverse and to compare two continued fractions)
3. it only deals with rational numbers
4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
5. there is no bridge with quadratic numbers (see also #11345)
6. there is no bridge with words (sage.combinat.words)
7. continued fractions are not included in the documentation

The patch proposed here develop some general design for dealing with continued fractions and solve all issues above.

With the patch applied we can do

```
sage: (117/253).continued_fraction()
[0; 2, 6, 6, 3]

sage: K.<sqrt2> = QuadraticField(2)
sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff
[0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]
sage: cff.period()
(2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)
sage: cff.preperiod()
(0, 1)
sage: cff.value()
1/3*sqrt2 + 1/4
sage: cff.n(digits=50)
0.72140452079103168293389624140323269285655729179232

sage: cf_pi = continued_fraction(pi)
[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]
sage: cf_pi.quotient(1500)
1

sage: cf_fib = continued_fraction(words.FibonacciWord([1,2]))
sage: cf_fib
[1; 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2...]
sage: cf_fib.n(digits=42)
1.38795458796714233691931385987318547787815
```
In particular we solve the question in #11345.

Depends on #13213
Depends on #13256
Depends on #14563

CC:  @sagetrac-tmonteil @seblabbe @sagetrac-Fougeroc

Keywords: **continued fractions, numerical approximation**

Branch: **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**

Reviewer: **Ralf Stephan, Thierry Monteil**

Author: **Vincent Delecroix**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/14567_





---

archive/issue_events_206232.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-11T15:09:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206232"
}
```



---

archive/issue_events_206233.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-11T15:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206233"
}
```



---

archive/issue_events_206234.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-11T15:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206234"
}
```



---

archive/issue_events_206235.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-11T15:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206235"
}
```



---

archive/issue_events_206236.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-11T15:09:00Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "subject": "https://github.com/videlec",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206236"
}
```



---

archive/issue_comments_176504.json:
```json
{
    "body": "Changed dependencies from **#13213, #13957, #14563** to **#13213, #13957, #14563, #14568**",
    "created_at": "2013-05-11T15:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176504",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#13213, #13957, #14563** to **#13213, #13957, #14563, #14568**



---

archive/issue_comments_176505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,9 @@\n-Continued fractions (in sage.rings.contfrac) does not what we expect:\n+Continued fractions (in sage.rings.contfrac) do not do what we expect:\n * it only deals with rational numbers\n * there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n * there is no bridge with words (sage.combinat.words)\n+* there is no bridge with quadratic numbers (see also #11345)\n \n Moreover, categories are not properly initialized nor used.\n \n-The patch proposed here improves the current version.\n-\n-Related tickets:\n-* #11345\n+The patch proposed here improves the current version by addressing the four issues above.\n``````\n",
    "created_at": "2013-05-11T15:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176505",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,9 @@
-Continued fractions (in sage.rings.contfrac) does not what we expect:
+Continued fractions (in sage.rings.contfrac) do not do what we expect:
 * it only deals with rational numbers
 * there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
 * there is no bridge with words (sage.combinat.words)
+* there is no bridge with quadratic numbers (see also #11345)
 
 Moreover, categories are not properly initialized nor used.
 
-The patch proposed here improves the current version.
-
-Related tickets:
-* #11345
+The patch proposed here improves the current version by addressing the four issues above.
``````




---

archive/issue_comments_176506.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,18 @@\n Continued fractions (in sage.rings.contfrac) do not do what we expect:\n-* it only deals with rational numbers\n-* there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n-* there is no bridge with words (sage.combinat.words)\n-* there is no bridge with quadratic numbers (see also #11345)\n \n-Moreover, categories are not properly initialized nor used.\n+0. categories are not properly initialized nor used.\n+1. it only deals with rational numbers\n+2. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n+4. there is no bridge with quadratic numbers (see also #11345)\n+3. there is no bridge with words (sage.combinat.words)\n \n-The patch proposed here improves the current version by addressing the four issues above.\n+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 0, 1 and 4 (and I hope 2); see the discussion below.\n+\n+```\n+sage: K.<sqrt2> = QuadraticField(2)\n+sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff\n+[0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]\n+sage: cff.value()\n+1/3*sqrt2 + 1/4\n+```\n+In particular we solve the question in #11345.\n``````\n",
    "created_at": "2013-05-12T18:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176506",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,18 @@
 Continued fractions (in sage.rings.contfrac) do not do what we expect:
-* it only deals with rational numbers
-* there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
-* there is no bridge with words (sage.combinat.words)
-* there is no bridge with quadratic numbers (see also #11345)
 
-Moreover, categories are not properly initialized nor used.
+0. categories are not properly initialized nor used.
+1. it only deals with rational numbers
+2. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
+4. there is no bridge with quadratic numbers (see also #11345)
+3. there is no bridge with words (sage.combinat.words)
 
-The patch proposed here improves the current version by addressing the four issues above.
+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 0, 1 and 4 (and I hope 2); see the discussion below.
+
+```
+sage: K.<sqrt2> = QuadraticField(2)
+sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff
+[0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]
+sage: cff.value()
+1/3*sqrt2 + 1/4
+```
+In particular we solve the question in #11345.
``````




---

archive/issue_events_206237.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-12T18:02:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206237"
}
```



---

archive/issue_comments_176507.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe ticket is not yet finished but the review may start (all test pass on my computer... waiting for patchbot). Here are some questions I am not sure how to deal about.\n* How to cleanly implement numerical approximations of continued fractions (see the current (stupid) implementation of `_mpfr_` in sage.rings.continued_fraction_element`) ?\n* What method name do we choose for conversion to continued fractions ? (ZZ has `_integer_`, QQ has `_rational_` and RR has `_mpfr_`, ...). For now it is simply `continued_fraction` as the user may prefer `my_number.continued_fraction()` to `CFF(my_number)`.\n* The link with words is not yet done and perhaps should be delayed to another ticket as the patch is yet 2500 lines long.\n* some of the stuff about continued fractions in `sage.rings.arith` should move to `sage.rings.continued_fraction_field` (I think I do prefer `sage.rings.continued_fractions` to `sage.rings.continued_fraction_field`...).\n* I did not check what are the Pari's fonctionnalities that may be used here",
    "created_at": "2013-05-12T18:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176507",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

The ticket is not yet finished but the review may start (all test pass on my computer... waiting for patchbot). Here are some questions I am not sure how to deal about.
* How to cleanly implement numerical approximations of continued fractions (see the current (stupid) implementation of `_mpfr_` in sage.rings.continued_fraction_element`) ?
* What method name do we choose for conversion to continued fractions ? (ZZ has `_integer_`, QQ has `_rational_` and RR has `_mpfr_`, ...). For now it is simply `continued_fraction` as the user may prefer `my_number.continued_fraction()` to `CFF(my_number)`.
* The link with words is not yet done and perhaps should be delayed to another ticket as the patch is yet 2500 lines long.
* some of the stuff about continued fractions in `sage.rings.arith` should move to `sage.rings.continued_fraction_field` (I think I do prefer `sage.rings.continued_fractions` to `sage.rings.continued_fraction_field`...).
* I did not check what are the Pari's fonctionnalities that may be used here



---

archive/issue_comments_176508.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n Continued fractions (in sage.rings.contfrac) do not do what we expect:\n \n-0. categories are not properly initialized nor used.\n-1. it only deals with rational numbers\n-2. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n+1. categories are not properly initialized nor used.\n+2. it only deals with rational numbers\n+3. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n 4. there is no bridge with quadratic numbers (see also #11345)\n-3. there is no bridge with words (sage.combinat.words)\n+5. there is no bridge with words (sage.combinat.words)\n \n-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 0, 1 and 4 (and I hope 2); see the discussion below.\n+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2 and 5 (and I hope 3); see the discussion below.\n \n ```\n sage: K.<sqrt2> = QuadraticField(2)\n``````\n",
    "created_at": "2013-05-12T18:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176508",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
 Continued fractions (in sage.rings.contfrac) do not do what we expect:
 
-0. categories are not properly initialized nor used.
-1. it only deals with rational numbers
-2. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
+1. categories are not properly initialized nor used.
+2. it only deals with rational numbers
+3. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
 4. there is no bridge with quadratic numbers (see also #11345)
-3. there is no bridge with words (sage.combinat.words)
+5. there is no bridge with words (sage.combinat.words)
 
-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 0, 1 and 4 (and I hope 2); see the discussion below.
+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2 and 5 (and I hope 3); see the discussion below.
 
 ```
 sage: K.<sqrt2> = QuadraticField(2)
``````




---

archive/issue_comments_176509.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,19 @@\n Continued fractions (in sage.rings.contfrac) do not do what we expect:\n \n 1. categories are not properly initialized nor used.\n-2. it only deals with rational numbers\n-3. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n-4. there is no bridge with quadratic numbers (see also #11345)\n-5. there is no bridge with words (sage.combinat.words)\n+2. all arithmetic operations go back and forth with the underlying rational (there are much more direct solutions for taking the negative, inverse and to compare two continued fractions)\n+3. it only deals with rational numbers\n+4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n+5. there is no bridge with quadratic numbers (see also #11345)\n+6. there is no bridge with words (sage.combinat.words)\n \n-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2 and 5 (and I hope 3); see the discussion below.\n+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2, 3 and 5 (and I hope 4); see the discussion below.\n+\n+With the patch applied we can do\n \n ```\n+sage: (117/253).continued_fraction()\n+[0; 2, 6, 6, 3]\n sage: K.<sqrt2> = QuadraticField(2)\n sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff\n [0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]\n``````\n",
    "created_at": "2013-05-12T18:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176509",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,19 @@
 Continued fractions (in sage.rings.contfrac) do not do what we expect:
 
 1. categories are not properly initialized nor used.
-2. it only deals with rational numbers
-3. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
-4. there is no bridge with quadratic numbers (see also #11345)
-5. there is no bridge with words (sage.combinat.words)
+2. all arithmetic operations go back and forth with the underlying rational (there are much more direct solutions for taking the negative, inverse and to compare two continued fractions)
+3. it only deals with rational numbers
+4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
+5. there is no bridge with quadratic numbers (see also #11345)
+6. there is no bridge with words (sage.combinat.words)
 
-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2 and 5 (and I hope 3); see the discussion below.
+The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2, 3 and 5 (and I hope 4); see the discussion below.
+
+With the patch applied we can do
 
 ```
+sage: (117/253).continued_fraction()
+[0; 2, 6, 6, 3]
 sage: K.<sqrt2> = QuadraticField(2)
 sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff
 [0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]
``````




---

archive/issue_comments_176510.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe last patch still does not implement a proper function to compute numerical approximations. It would be interesting to add one...",
    "created_at": "2013-05-18T12:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176510",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

The last patch still does not implement a proper function to compute numerical approximations. It would be interesting to add one...



---

archive/issue_comments_176511.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,17 +7,27 @@\n 5. there is no bridge with quadratic numbers (see also #11345)\n 6. there is no bridge with words (sage.combinat.words)\n \n-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2, 3 and 5 (and I hope 4); see the discussion below.\n+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 4 and 6; see the discussion below.\n \n With the patch applied we can do\n \n ```\n sage: (117/253).continued_fraction()\n [0; 2, 6, 6, 3]\n+\n sage: K.<sqrt2> = QuadraticField(2)\n sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff\n [0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]\n+sage: cff.period()\n+(2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)\n+sage: cff.preperiod()\n+(0, 1)\n sage: cff.value()\n 1/3*sqrt2 + 1/4\n+\n+sage: cf_pi = continued_fraction(pi)\n+[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]\n+sage: cf_pi.quotient(1500)\n+1\n ```\n In particular we solve the question in #11345.\n``````\n",
    "created_at": "2013-05-18T12:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176511",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,17 +7,27 @@
 5. there is no bridge with quadratic numbers (see also #11345)
 6. there is no bridge with words (sage.combinat.words)
 
-The patch proposed here develop some general design for dealing with continued fractions and solves the issues 1, 2, 3 and 5 (and I hope 4); see the discussion below.
+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 4 and 6; see the discussion below.
 
 With the patch applied we can do
 
 ```
 sage: (117/253).continued_fraction()
 [0; 2, 6, 6, 3]
+
 sage: K.<sqrt2> = QuadraticField(2)
 sage: cff = (sqrt2/3 + 1/4).continued_fraction(); cff
 [0; 1, (2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)*]
+sage: cff.period()
+(2, 1, 1, 2, 3, 2, 1, 1, 2, 5, 1, 1, 14, 1, 1, 5)
+sage: cff.preperiod()
+(0, 1)
 sage: cff.value()
 1/3*sqrt2 + 1/4
+
+sage: cf_pi = continued_fraction(pi)
+[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]
+sage: cf_pi.quotient(1500)
+1
 ```
 In particular we solve the question in #11345.
``````




---

archive/issue_comments_176512.json:
```json
{
    "body": "Changed dependencies from **#13213, #13957, #14563, #14568** to **#13213, #13256, #14563**",
    "created_at": "2013-05-18T12:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176512",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#13213, #13957, #14563, #14568** to **#13213, #13256, #14563**



---

archive/issue_comments_176513.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe patch modifies the output of continued_fraction and hence some tests in `sage.books.book_stein_ent`. We have to be careful with changes that concern examples from a book. See the related discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/5bb7d4cf3075934e#)",
    "created_at": "2013-05-18T13:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176513",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

The patch modifies the output of continued_fraction and hence some tests in `sage.books.book_stein_ent`. We have to be careful with changes that concern examples from a book. See the related discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/5bb7d4cf3075934e#)



---

archive/issue_comments_176514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,8 +6,9 @@\n 4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)\n 5. there is no bridge with quadratic numbers (see also #11345)\n 6. there is no bridge with words (sage.combinat.words)\n+7. continued fractions are not included in the documentation\n \n-The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 4 and 6; see the discussion below.\n+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 6.\n \n With the patch applied we can do\n \n@@ -24,6 +25,8 @@\n (0, 1)\n sage: cff.value()\n 1/3*sqrt2 + 1/4\n+sage: cff.n(digits=50)\n+0.72140452079103168293389624140323269285655729179232\n \n sage: cf_pi = continued_fraction(pi)\n [3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]\n``````\n",
    "created_at": "2013-05-19T17:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176514",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,8 +6,9 @@
 4. there is no dedicated method for numerical approximations (which is one of the first aim of continued fractions)
 5. there is no bridge with quadratic numbers (see also #11345)
 6. there is no bridge with words (sage.combinat.words)
+7. continued fractions are not included in the documentation
 
-The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 4 and 6; see the discussion below.
+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 6.
 
 With the patch applied we can do
 
@@ -24,6 +25,8 @@
 (0, 1)
 sage: cff.value()
 1/3*sqrt2 + 1/4
+sage: cff.n(digits=50)
+0.72140452079103168293389624140323269285655729179232
 
 sage: cf_pi = continued_fraction(pi)
 [3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]
``````




---

archive/issue_events_206238.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T11:36:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206238"
}
```



---

archive/issue_events_206239.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T11:36:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206239"
}
```



---

archive/issue_comments_176515.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\ninstead of\n\n```\ndoctest:2057: UserWarning\n```\nyou should use\n\n```\ndoctest:...: UserWarning\n```\nbecause the numbers can change\n\nThere are some other doctests failing due to the change of output string, please correct them",
    "created_at": "2013-05-24T11:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176515",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

instead of

```
doctest:2057: UserWarning
```
you should use

```
doctest:...: UserWarning
```
because the numbers can change

There are some other doctests failing due to the change of output string, please correct them



---

archive/issue_comments_176516.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@fchapoton](#comment:9):\n> instead of\n> \n> ```\n> doctest:2057: UserWarning\n> ```\n> you should use\n> \n> ```\n> doctest:...: UserWarning\n> ```\n> because the numbers can change\n\nMany thanks for that suggestion (it actually happens for me several times).\n\n> There are some other doctests failing due to the change of output string, please correct them\n\nThe ticket is updated.",
    "created_at": "2013-05-25T10:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176516",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@fchapoton](#comment:9):
> instead of
> 
> ```
> doctest:2057: UserWarning
> ```
> you should use
> 
> ```
> doctest:...: UserWarning
> ```
> because the numbers can change

Many thanks for that suggestion (it actually happens for me several times).

> There are some other doctests failing due to the change of output string, please correct them

The ticket is updated.



---

archive/issue_events_206240.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T10:43:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206240"
}
```



---

archive/issue_events_206241.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T10:43:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206241"
}
```



---

archive/issue_comments_176517.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nA doctest still fails.",
    "created_at": "2013-05-25T11:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176517",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

A doctest still fails.



---

archive/issue_events_206242.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T11:49:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206242"
}
```



---

archive/issue_events_206243.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T11:49:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206243"
}
```



---

archive/issue_comments_176518.json:
```json
{
    "body": "Work Issues: **failing doctest**",
    "created_at": "2013-05-25T11:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176518",
    "user": "https://github.com/videlec"
}
```

Work Issues: **failing doctest**



---

archive/issue_events_206244.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T11:54:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206244"
}
```



---

archive/issue_events_206245.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-05-25T11:54:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206245"
}
```



---

archive/issue_comments_176519.json:
```json
{
    "body": "Changed work issues from **failing doctest** to none",
    "created_at": "2013-05-25T11:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176519",
    "user": "https://github.com/videlec"
}
```

Changed work issues from **failing doctest** to none



---

archive/issue_comments_176520.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,3 +34,7 @@\n 1\n ```\n In particular we solve the question in #11345.\n+\n+Apply:\n+* [attachment: trac_14567-continued_fractions.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)\n+* [attachment: trac_14567_addon1-fc.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)\n``````\n",
    "created_at": "2013-06-03T19:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176520",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,3 +34,7 @@
 1
 ```
 In particular we solve the question in #11345.
+
+Apply:
+* [attachment: trac_14567-continued_fractions.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)
+* [attachment: trac_14567_addon1-fc.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)
``````




---

archive/issue_comments_176521.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI have added a small clean-up patch (problems found with pyflakes):\n\n* removed unused import \n* removed unused variables\n* corrected one wrong variable",
    "created_at": "2013-06-03T19:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176521",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

I have added a small clean-up patch (problems found with pyflakes):

* removed unused import 
* removed unused variables
* corrected one wrong variable



---

archive/issue_comments_176522.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@fchapoton](#comment:14):\n> I have added a small clean-up patch (problems found with pyflakes):\n> \n> * removed unused import \n> * removed unused variables\n> * corrected one wrong variable\n\nThanks. I am now confident that the patch is perfect!",
    "created_at": "2013-06-03T19:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176522",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@fchapoton](#comment:14):
> I have added a small clean-up patch (problems found with pyflakes):
> 
> * removed unused import 
> * removed unused variables
> * corrected one wrong variable

Thanks. I am now confident that the patch is perfect!



---

archive/issue_comments_176523.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttachment: **[trac_14567_addon1-fc.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)**",
    "created_at": "2013-07-03T13:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176523",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

Attachment: **[trac_14567_addon1-fc.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)**



---

archive/issue_events_206246.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206246"
}
```



---

archive/issue_events_206247.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206247"
}
```



---

archive/issue_comments_176524.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWhat is the status of this patch? I need it for a server that I am running for others. It applies cleanly to only sage-5.9 and sage-5.10. :(\n\nCan you rebase it to 5.12 or 5.13? The size of the hunk that fails (in `continued_fractions.py`) is too large, and so I do not want to mess up in modifying the code.",
    "created_at": "2013-12-16T09:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176524",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:18" align="right">comment:18</div>

What is the status of this patch? I need it for a server that I am running for others. It applies cleanly to only sage-5.9 and sage-5.10. :(

Can you rebase it to 5.12 or 5.13? The size of the hunk that fails (in `continued_fractions.py`) is too large, and so I do not want to mess up in modifying the code.



---

archive/issue_comments_176525.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@ppurka](#comment:18):\n> What is the status of this patch? I need it for a server that I am running for others. It applies cleanly to only sage-5.9 and sage-5.10. :(\n> \n> Can you rebase it to 5.12 or 5.13? The size of the hunk that fails (in `continued_fractions.py`) is too large, and so I do not want to mess up in modifying the code.\n\nHi. I am waiting for the review. I know that Thierry has many remarks (we already discussed some in private) but I can do a rebase in order that it applies on 5.13 tomorrow during the Sage day in Paris. Do you need a patch or git branch is fine for you ?",
    "created_at": "2013-12-16T21:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176525",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@ppurka](#comment:18):
> What is the status of this patch? I need it for a server that I am running for others. It applies cleanly to only sage-5.9 and sage-5.10. :(
> 
> Can you rebase it to 5.12 or 5.13? The size of the hunk that fails (in `continued_fractions.py`) is too large, and so I do not want to mess up in modifying the code.

Hi. I am waiting for the review. I know that Thierry has many remarks (we already discussed some in private) but I can do a rebase in order that it applies on 5.13 tomorrow during the Sage day in Paris. Do you need a patch or git branch is fine for you ?



---

archive/issue_comments_176526.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:19):\n> Hi. I am waiting for the review. I know that Thierry has many remarks (we already discussed some in private) but I can do a rebase in order that it applies on 5.13 tomorrow during the Sage day in Paris. Do you need a patch or git branch is fine for you ?\n\nThanks! Either patch or git branch is fine with me. I can recreate a patch from the git branch, if needed.",
    "created_at": "2013-12-16T22:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176526",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:19):
> Hi. I am waiting for the review. I know that Thierry has many remarks (we already discussed some in private) but I can do a rebase in order that it applies on 5.13 tomorrow during the Sage day in Paris. Do you need a patch or git branch is fine for you ?

Thanks! Either patch or git branch is fine with me. I can recreate a patch from the git branch, if needed.



---

archive/issue_comments_176527.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAttachment: **[trac_14567-continued_fractions.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)**\n\nI uploaded a patch which applies on 5.12.rc0. I will now create a branch.",
    "created_at": "2013-12-17T14:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176527",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Attachment: **[trac_14567-continued_fractions.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)**

I uploaded a patch which applies on 5.12.rc0. I will now create a branch.



---

archive/issue_comments_176528.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@videlec](#comment:21):\n> I uploaded a patch which applies on 5.12.rc0. I will now create a branch.\n\nThanks! Strangely, it applies to 5.13.beta3, but not to 6.0 (git branch).",
    "created_at": "2013-12-18T13:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176528",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@videlec](#comment:21):
> I uploaded a patch which applies on 5.12.rc0. I will now create a branch.

Thanks! Strangely, it applies to 5.13.beta3, but not to 6.0 (git branch).



---

archive/issue_events_206248.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206248"
}
```



---

archive/issue_events_206249.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206249"
}
```



---

archive/issue_comments_176529.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYou have to use `patch` with the `-l` option, then it succeeds. I can open a git branch if this doesn't work for you.",
    "created_at": "2014-02-12T09:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176529",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

You have to use `patch` with the `-l` option, then it succeeds. I can open a git branch if this doesn't work for you.



---

archive/issue_comments_176530.json:
```json
{
    "body": "Branch: **[u/rws/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/ticket/14567)**",
    "created_at": "2014-02-19T16:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176530",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/ticket/14567)**



---

archive/issue_comments_176531.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nRebased on 6.2.beta2, tests fine. The docs do not build, however, because of a dangling ref in database_sloane.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e\">af5fa7d</a></td><td><code>ticket 14567</code></td></tr></table>\n",
    "created_at": "2014-02-19T16:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176531",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

Rebased on 6.2.beta2, tests fine. The docs do not build, however, because of a dangling ref in database_sloane.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e">af5fa7d</a></td><td><code>ticket 14567</code></td></tr></table>




---

archive/issue_comments_176532.json:
```json
{
    "body": "Commit: **[`af5fa7d`](https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e)**",
    "created_at": "2014-02-19T16:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176532",
    "user": "https://github.com/rwst"
}
```

Commit: **[`af5fa7d`](https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e)**



---

archive/issue_comments_176533.json:
```json
{
    "body": "Changed commit from **[`af5fa7d`](https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e)** to **[`7e0af69`](https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0)**",
    "created_at": "2014-02-19T17:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176533",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af5fa7d`](https://github.com/sagemath/sagetrac-mirror/commit/af5fa7da73481842c0b224d5b387ff1f7597947e)** to **[`7e0af69`](https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0)**



---

archive/issue_comments_176534.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0\">7e0af69</a></td><td><code>Trac #14567: reviewer's patch: enable docbuild</code></td></tr></table>\n",
    "created_at": "2014-02-19T17:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176534",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0">7e0af69</a></td><td><code>Trac #14567: reviewer's patch: enable docbuild</code></td></tr></table>




---

archive/issue_events_206250.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-02-20T09:25:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206250"
}
```



---

archive/issue_events_206251.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-02-20T09:25:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206251"
}
```



---

archive/issue_comments_176535.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2014-02-20T09:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176535",
    "user": "https://github.com/rwst"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_comments_176536.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI like the result a lot with its modular structure. One even can create a CFF given the preperiod and the periodic part, they need to be at least pairs however. But this should not hold back this ticket, because there is an easy workaround.",
    "created_at": "2014-02-20T09:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176536",
    "user": "https://github.com/rwst"
}
```

<div id="comment:28" align="right">comment:28</div>

I like the result a lot with its modular structure. One even can create a CFF given the preperiod and the periodic part, they need to be at least pairs however. But this should not hold back this ticket, because there is an easy workaround.



---

archive/issue_events_206252.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-02-20T17:24:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206252"
}
```



---

archive/issue_events_206253.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-02-20T17:24:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206253"
}
```



---

archive/issue_comments_176537.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nRalf, commit 7e0af96 is the wrong way to do fix it (take a look at the compiled documentation). Instead you should have removed the second colon from the `EXAMPLES::`. In other words, it should be formatted like this:\n\n```\nEXAMPLES:\n\nSome docstring talking about the example::\n\n    sage: 2 + 2\n    4\n\nSome more docstrings::\n\n    sage: 4 - 2\n    2\n```\n\nThierry (or Vincent), did you have any comments about the current state of the branch?",
    "created_at": "2014-02-20T17:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176537",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Ralf, commit 7e0af96 is the wrong way to do fix it (take a look at the compiled documentation). Instead you should have removed the second colon from the `EXAMPLES::`. In other words, it should be formatted like this:

```
EXAMPLES:

Some docstring talking about the example::

    sage: 2 + 2
    4

Some more docstrings::

    sage: 4 - 2
    2
```

Thierry (or Vincent), did you have any comments about the current state of the branch?



---

archive/issue_comments_176538.json:
```json
{
    "body": "Changed author from **vdelecroix** to **Vincent Delecroix**",
    "created_at": "2014-02-20T17:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176538",
    "user": "https://github.com/tscrim"
}
```

Changed author from **vdelecroix** to **Vincent Delecroix**



---

archive/issue_comments_176539.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0\">fb96ac7</a></td><td><code>Fix previous patch</code></td></tr></table>\n",
    "created_at": "2014-02-21T08:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176539",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0">fb96ac7</a></td><td><code>Fix previous patch</code></td></tr></table>




---

archive/issue_comments_176540.json:
```json
{
    "body": "Changed commit from **[`7e0af69`](https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0)** to **[`fb96ac7`](https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0)**",
    "created_at": "2014-02-21T08:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176540",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e0af69`](https://github.com/sagemath/sagetrac-mirror/commit/7e0af698f04d10ca778db740b01e458c0de783b0)** to **[`fb96ac7`](https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0)**



---

archive/issue_events_206254.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-02-21T08:02:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206254"
}
```



---

archive/issue_events_206255.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-02-21T08:02:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206255"
}
```



---

archive/issue_comments_176541.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nHi, sorry for not talking on this before. I started to review this patch a few months ago but did not finished. There are a lot of issues with CFF. I did not switch to the new layout now, so, if the code did not change too much, my comments should be still valid, I will post a few of them this week end. Again, sorry for the delay.",
    "created_at": "2014-02-21T17:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176541",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:32" align="right">comment:32</div>

Hi, sorry for not talking on this before. I started to review this patch a few months ago but did not finished. There are a lot of issues with CFF. I did not switch to the new layout now, so, if the code did not change too much, my comments should be still valid, I will post a few of them this week end. Again, sorry for the delay.



---

archive/issue_comments_176542.json:
```json
{
    "body": "Attachment: **[trac_14567_rewiew-tm.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567_rewiew-tm.patch.gz)**",
    "created_at": "2014-03-02T19:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176542",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Attachment: **[trac_14567_rewiew-tm.patch.gz](https://github.com/sagemath/sage/files/ticket14567/trac_14567_rewiew-tm.patch.gz)**



---

archive/issue_comments_176543.json:
```json
{
    "body": "Changed reviewer from **Ralf Stephan** to **Ralf Stephan, Thierry Monteil**",
    "created_at": "2014-03-02T19:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176543",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed reviewer from **Ralf Stephan** to **Ralf Stephan, Thierry Monteil**



---

archive/issue_comments_176544.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThis review is not polished, but i provide it as is, so that we can discuss. I also uploaded a (beginning of a) patch containing minor modifications, even if this corresponds to the old workflow.\n\n---\n\n`CFF` is not fully autonomous and behaves like an overlay over other Sage\nfields, thus sacrificing reliability over expressivity.\n\n```\nsage: a = CFF(0.1)\nsage: a.value()\n1/10\n```\nvs\n\n```\nsage: a = CFF(0.1+sqrt(2))\nsage: a.value()\nsqrt(2) + 0.100000000000000\n```\n\nHence the mess:\n\n```\nsage: a = CFF(0.1+sqrt(2))       \nsage: b = CFF(0.1) + CFF(sqrt(2))\nsage: a == b\nTrue\n```\nbut\n\n```\nsage: a\n[1; 1, 1, 17, 11, 3, 1, 8, 2, 1, 2, 2, 281, 1, 10, 3, 2, 3, 21, 5, ...]\nsage: b\n[1; (1, 1, 17, 11, 3, 1, 8, 2, 1, 2, 2, 282, 2, 2, 1, 2, 8, 1, 3, 11, 17, 1, 1, 2, 3, 5, 2, 10, 1, 5, 1, 69, 1, 5, 1, 10, 2, 5, 3, 2)*]\n```\n\n\nI have not much problems with this overlay design as long as it is clearly\nstated and consistent.\n\nNote that this behaviour is not uniform, since `CFF(a).value()` is sometimes not\nequal to `a`, but this is not clear when.\n\n```\n- << Return the value of \"self\" (the number from which it was built). >>\n\n- << Return the value of \"self\" as a quadratic number (with square free\n  discriminant). >>\n```\n\nThis is not the role of `CFF` to canonicalize Sage real numbers, though one\ncould imagine such a class/function `GoodRealField`.\n\n```\nsage: CFF(sqrt(2))\n[1; (2)*]\nsage: CFF(sqrt(2)).value()\nsqrt2\n\nsage: CFF(0.1)\n[0; 10]\nsage: CFF(0.1).value()\n1/10\n\nsage: CFF(pi)\n[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]\nsage: CFF(pi).value()\npi\n\nsage: (2^(1/3)).parent()           \nSymbolic Ring\nsage: CFF(2^(1/3)).value().parent()\nAlgebraic Real Field\n```\n\n\nAnother consequence of the overlay structure is that the inverse of a\ncontinued fraction is not as expected (the inverse should only shift the\nsequence of partial quotients):\n\n```\nsage: a = CFF(pi+0.1) ; a\n[3; 4, 7, 5, 2, 3, 2, 1, 1, 1, 4, 1, 4, 33, 4, 2, 6, 10, 3, 1, ...]\nsage: ~a\n[0; 3, 4, 7, 5, 2, 3, 2, 1, 1, 1, 4, 1, 4, 33, 4, 4, 1, 1, 1, ...]\n```\n\n\nI do understand that this may be a transitional behaviour. But how to tell\nthat to sage users ?\n\nI see two ways:\n\n- be always an \"overlay field\"\n- restrict the code to words (cf your issue 6) you really handle (rationals\n  and quadratic irrationals, corresponding to finite and ultimately periodic\n  words) ?\n \nPerhaps a solution is to have two very distinct classes (with conversions) ?\n\n---\n\nAnother issue is:\n\n```\nsage: CFF.is_exact()\nTrue\n```\n\nI disagree with that statement, since there are approximate elements in CFF,\nfor example `CFF(pi+0.1)`.\n\n\n---\n\n\nProblems with `SR`:\n\n```\nsage: sqrt(2) == QQbar(sqrt(2))          \nTrue\n\nsage: CFF(sqrt(2)) == CFF(QQbar(sqrt(2)))\nWait for a long time...\n\nsage: CFF(sqrt(2)).value().parent()\nNumber Field in sqrt2 with defining polynomial x^2 - 2\n\nsage: CFF(sqrt(2)).value() == CFF(QQbar(sqrt(2))).value()\nFalse\n```\n\n\nTransitivity of equality:\n\n```\nsage: bool(CFF(sqrt(2)).value() == sqrt(2))\nTrue\n\nsage: bool(sqrt(2)) == sqrt(QQbar(2)) \nTrue\n\nsage: CFF(sqrt(2)).value() == sqrt(QQbar(2))\nFalse\n```\n\n\n\n---\n\nin `_element_constructor_()`\n\n```\n - ``nterms`` -- integer (optional)\n\n??? is that an old remaining thing ?\n\n - ``check`` -- boolean (optional) -- whether or not we check the\n\n\"the\" what ?\n```\n\n---\n\nWhen you test whether an element of `SR` is a real number, you use `RIF(x)`.\nWhy not using `x.is_real()` (and make this method more reliable if needed) ?\n\n---\n\nAnother problem:\n\n```\nsage: a = RDF(0.1)\nsage: CFF(a)\n[0]\n```\n\nThe reason is :\n\n```\nsage: (1/RIF(RDF(0.1))).unique_floor()\nValueError: interval does not have a unique floor\n```\n\n---\n\n\nIn the doc: \"It is quite remarkable that\".\n\nAdd : \"- any real number admits a unique continued fraction expansion\"\n\n---\n\n\"It is also possible to create a continued fraction from a list of digits::\"\n\nI would propose : \"from a list of numbers corresponding to its partial\nquotients.\"\n \n\n\"For quadratic numbers, the syntax is quite similar and the digits are\nrepresented as a pair of tuples, the preperiod and the period::\"\n\nAgain, \"digits\" vs \"partial quotients\"\n\n---\n\nAnother problem: \n\n```\nsage: cf = CFF([(1,2,3),(1,2,4)]); cf.value()         \n-1/86*sqrt229 + 139/86\n\nsage: sqrt229\n....\nNameError: name 'sqrt229' is not defined\n```\n\n\n`CFF` outputs an element of a quadratic field that can not be used\nfurthermore.  Of course, one can get it back with `cf.parent().gen()`. Perhaps\ninject those variables ?\n\n---\n\n\"two_last_convergents\" -> \"last_two_convergents\"\n\n---\n\n`_pn` and `_qn` looks good for internal variables, but i would suggest to\nreplace `pn()` and `qn()` methods by `numerator()` and `denominator()` to stay\nconsistent with rationals.\n\n---\n\nIn the `_mpfr_` method: \"It is guaranteed that the result is exact\"\n\nFloating point number are not exact, perhaps \"accurate\" is a better word ?",
    "created_at": "2014-03-02T19:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176544",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:33" align="right">comment:33</div>

This review is not polished, but i provide it as is, so that we can discuss. I also uploaded a (beginning of a) patch containing minor modifications, even if this corresponds to the old workflow.

---

`CFF` is not fully autonomous and behaves like an overlay over other Sage
fields, thus sacrificing reliability over expressivity.

```
sage: a = CFF(0.1)
sage: a.value()
1/10
```
vs

```
sage: a = CFF(0.1+sqrt(2))
sage: a.value()
sqrt(2) + 0.100000000000000
```

Hence the mess:

```
sage: a = CFF(0.1+sqrt(2))       
sage: b = CFF(0.1) + CFF(sqrt(2))
sage: a == b
True
```
but

```
sage: a
[1; 1, 1, 17, 11, 3, 1, 8, 2, 1, 2, 2, 281, 1, 10, 3, 2, 3, 21, 5, ...]
sage: b
[1; (1, 1, 17, 11, 3, 1, 8, 2, 1, 2, 2, 282, 2, 2, 1, 2, 8, 1, 3, 11, 17, 1, 1, 2, 3, 5, 2, 10, 1, 5, 1, 69, 1, 5, 1, 10, 2, 5, 3, 2)*]
```


I have not much problems with this overlay design as long as it is clearly
stated and consistent.

Note that this behaviour is not uniform, since `CFF(a).value()` is sometimes not
equal to `a`, but this is not clear when.

```
- << Return the value of "self" (the number from which it was built). >>

- << Return the value of "self" as a quadratic number (with square free
  discriminant). >>
```

This is not the role of `CFF` to canonicalize Sage real numbers, though one
could imagine such a class/function `GoodRealField`.

```
sage: CFF(sqrt(2))
[1; (2)*]
sage: CFF(sqrt(2)).value()
sqrt2

sage: CFF(0.1)
[0; 10]
sage: CFF(0.1).value()
1/10

sage: CFF(pi)
[3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]
sage: CFF(pi).value()
pi

sage: (2^(1/3)).parent()           
Symbolic Ring
sage: CFF(2^(1/3)).value().parent()
Algebraic Real Field
```


Another consequence of the overlay structure is that the inverse of a
continued fraction is not as expected (the inverse should only shift the
sequence of partial quotients):

```
sage: a = CFF(pi+0.1) ; a
[3; 4, 7, 5, 2, 3, 2, 1, 1, 1, 4, 1, 4, 33, 4, 2, 6, 10, 3, 1, ...]
sage: ~a
[0; 3, 4, 7, 5, 2, 3, 2, 1, 1, 1, 4, 1, 4, 33, 4, 4, 1, 1, 1, ...]
```


I do understand that this may be a transitional behaviour. But how to tell
that to sage users ?

I see two ways:

- be always an "overlay field"
- restrict the code to words (cf your issue 6) you really handle (rationals
  and quadratic irrationals, corresponding to finite and ultimately periodic
  words) ?
 
Perhaps a solution is to have two very distinct classes (with conversions) ?

---

Another issue is:

```
sage: CFF.is_exact()
True
```

I disagree with that statement, since there are approximate elements in CFF,
for example `CFF(pi+0.1)`.


---


Problems with `SR`:

```
sage: sqrt(2) == QQbar(sqrt(2))          
True

sage: CFF(sqrt(2)) == CFF(QQbar(sqrt(2)))
Wait for a long time...

sage: CFF(sqrt(2)).value().parent()
Number Field in sqrt2 with defining polynomial x^2 - 2

sage: CFF(sqrt(2)).value() == CFF(QQbar(sqrt(2))).value()
False
```


Transitivity of equality:

```
sage: bool(CFF(sqrt(2)).value() == sqrt(2))
True

sage: bool(sqrt(2)) == sqrt(QQbar(2)) 
True

sage: CFF(sqrt(2)).value() == sqrt(QQbar(2))
False
```



---

in `_element_constructor_()`

```
 - ``nterms`` -- integer (optional)

??? is that an old remaining thing ?

 - ``check`` -- boolean (optional) -- whether or not we check the

"the" what ?
```

---

When you test whether an element of `SR` is a real number, you use `RIF(x)`.
Why not using `x.is_real()` (and make this method more reliable if needed) ?

---

Another problem:

```
sage: a = RDF(0.1)
sage: CFF(a)
[0]
```

The reason is :

```
sage: (1/RIF(RDF(0.1))).unique_floor()
ValueError: interval does not have a unique floor
```

---


In the doc: "It is quite remarkable that".

Add : "- any real number admits a unique continued fraction expansion"

---

"It is also possible to create a continued fraction from a list of digits::"

I would propose : "from a list of numbers corresponding to its partial
quotients."
 

"For quadratic numbers, the syntax is quite similar and the digits are
represented as a pair of tuples, the preperiod and the period::"

Again, "digits" vs "partial quotients"

---

Another problem: 

```
sage: cf = CFF([(1,2,3),(1,2,4)]); cf.value()         
-1/86*sqrt229 + 139/86

sage: sqrt229
....
NameError: name 'sqrt229' is not defined
```


`CFF` outputs an element of a quadratic field that can not be used
furthermore.  Of course, one can get it back with `cf.parent().gen()`. Perhaps
inject those variables ?

---

"two_last_convergents" -> "last_two_convergents"

---

`_pn` and `_qn` looks good for internal variables, but i would suggest to
replace `pn()` and `qn()` methods by `numerator()` and `denominator()` to stay
consistent with rationals.

---

In the `_mpfr_` method: "It is guaranteed that the result is exact"

Floating point number are not exact, perhaps "accurate" is a better word ?



---

archive/issue_events_206256.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-03T07:52:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206256"
}
```



---

archive/issue_events_206257.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-03T07:52:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206257"
}
```



---

archive/issue_comments_176545.json:
```json
{
    "body": "Changed branch from **[u/rws/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/ticket/14567)** to **[u/vdelecroix/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/14567)**",
    "created_at": "2014-03-26T12:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176545",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/rws/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/ticket/14567)** to **[u/vdelecroix/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/14567)**



---

archive/issue_comments_176546.json:
```json
{
    "body": "Changed commit from **[`fb96ac7`](https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0)** to **[`6a2d6aa`](https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738)**",
    "created_at": "2014-03-26T12:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176546",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`fb96ac7`](https://github.com/sagemath/sagetrac-mirror/commit/fb96ac7c8eae9834e3513c2fbd9abd450faa58c0)** to **[`6a2d6aa`](https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738)**



---

archive/issue_comments_176547.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nTiny modifications\n* merged in beta.5\n* resolve some import in sage.rings.all\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2120de5092cc7108f460b8c06996f5d91b8dd6ca\">2120de5</a></td><td><code>Merge branch 'u/rws/ticket/14567' of trac.sagemath.org:sage into 14567-continued_fractions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fba343b3db4a6e7f7cfe3288fddf315754098001\">fba343b</a></td><td><code>fix import statements in sage.rings.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738\">6a2d6aa</a></td><td><code>move farey to continued_fractions</code></td></tr></table>\n",
    "created_at": "2014-03-26T12:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176547",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Tiny modifications
* merged in beta.5
* resolve some import in sage.rings.all

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2120de5092cc7108f460b8c06996f5d91b8dd6ca">2120de5</a></td><td><code>Merge branch 'u/rws/ticket/14567' of trac.sagemath.org:sage into 14567-continued_fractions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fba343b3db4a6e7f7cfe3288fddf315754098001">fba343b</a></td><td><code>fix import statements in sage.rings.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738">6a2d6aa</a></td><td><code>move farey to continued_fractions</code></td></tr></table>




---

archive/issue_comments_176548.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb8bd3ea114e7c6c83928d6d159bfdf1c57d60d\">5bb8bd3</a></td><td><code>cont_frac: pn -> numberator, qn -> denominator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af\">8fbf106</a></td><td><code>update the code with respect to reviewer remarks</code></td></tr></table>\n",
    "created_at": "2014-04-03T17:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb8bd3ea114e7c6c83928d6d159bfdf1c57d60d">5bb8bd3</a></td><td><code>cont_frac: pn -> numberator, qn -> denominator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af">8fbf106</a></td><td><code>update the code with respect to reviewer remarks</code></td></tr></table>




---

archive/issue_comments_176549.json:
```json
{
    "body": "Changed commit from **[`6a2d6aa`](https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738)** to **[`8fbf106`](https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af)**",
    "created_at": "2014-04-03T17:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a2d6aa`](https://github.com/sagemath/sagetrac-mirror/commit/6a2d6aa35d52acf73c1e6f1d1eefe3e037486738)** to **[`8fbf106`](https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af)**



---

archive/issue_comments_176550.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@sagetrac-tmonteil](#comment:33):\n> `CFF` is not fully autonomous and behaves like an overlay over other Sage\n> fields, thus sacrificing reliability over expressivity.\n\nagreed. There is no transformation on input now. Most problem disappear. The only trouble might be with floating point as I decided to first convert the input into a rational. Note however that\n\n```\nsage: RR.random_element() in QQ\nTrue\n```\n\n> I have not much problems with this overlay design as long as it is clearly\n> stated and consistent.\n\nIt is !\n\n> Another issue is:\n\n>\n> ```\n> sage: CFF.is_exact()\n> True\n> ```\n>\n> I disagree with that statement, since there are approximate elements in CFF,\n> for example `CFF(pi+0.1)`.\n\nI do not want to make CFF inexact. The trouble comes from the unstability of CFF... If you want a friendly CFF you either have to rebuild the symbolic ring or do with it.\n\n> in `_element_constructor_()`\n\n>\n> ```\n>  - ``nterms`` -- integer (optional)\n>\n> ??? is that an old remaining thing ?\n>\n>  - ``check`` -- boolean (optional) -- whether or not we check the\n>\n> \"the\" what ?\n> ```\n\nThis is now removed\n\n> When you test whether an element of `SR` is a real number, you use `RIF(x)`.\n> Why not using `x.is_real()` (and make this method more reliable if needed) ?\n\nyou can not believe in `is_real` but I used it.\n\n> Another problem:\n\n>\n> ```\n> sage: a = RDF(0.1)\n> sage: CFF(a)\n> [0]\n> ```\n>\n> The reason is :\n>\n> ```\n> sage: (1/RIF(RDF(0.1))).unique_floor()\n> ValueError: interval does not have a unique floor\n> ```\n\nIt is now correct.\n\n```\nsage: continued_fraction(0.1)\n[0; 10]\n```\n\n> In the doc: \"It is quite remarkable that\".\n\n>\n> Add : \"- any real number admits a unique continued fraction expansion\"\n\ndone\n\n> [...]\n\n>\n> I would propose : \"from a list of numbers corresponding to its partial\n> quotients.\"\n\nAll occurrences of digits are removed and replaced by partial quotients.\n\n> Another problem:\n\n>\n> ```\n> sage: cf = CFF([(1,2,3),(1,2,4)]); cf.value()\n> -1/86*sqrt229 + 139/86\n>\n> sage: sqrt229\n> ....\n> NameError: name 'sqrt229' is not defined\n> ```\n\nI agree. It is quite hard to make it works. I only documented how to do\nthat in the method `value`.\n\n\n> \"two_last_convergents\" -> \"last_two_convergents\"\n\ndone\n\n> `_pn` and `_qn` looks good for internal variables, but i would suggest to\n> replace `pn()` and `qn()` methods by `numerator()` and `denominator()` to stay\n> consistent with rationals.\n\ndone\n\n> In the `_mpfr_` method: \"It is guaranteed that the result is exact\"\n\n>\n> Floating point number are not exact, perhaps \"accurate\" is a better word ?\n\ndone",
    "created_at": "2014-04-03T17:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176550",
    "user": "https://github.com/videlec"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@sagetrac-tmonteil](#comment:33):
> `CFF` is not fully autonomous and behaves like an overlay over other Sage
> fields, thus sacrificing reliability over expressivity.

agreed. There is no transformation on input now. Most problem disappear. The only trouble might be with floating point as I decided to first convert the input into a rational. Note however that

```
sage: RR.random_element() in QQ
True
```

> I have not much problems with this overlay design as long as it is clearly
> stated and consistent.

It is !

> Another issue is:

>
> ```
> sage: CFF.is_exact()
> True
> ```
>
> I disagree with that statement, since there are approximate elements in CFF,
> for example `CFF(pi+0.1)`.

I do not want to make CFF inexact. The trouble comes from the unstability of CFF... If you want a friendly CFF you either have to rebuild the symbolic ring or do with it.

> in `_element_constructor_()`

>
> ```
>  - ``nterms`` -- integer (optional)
>
> ??? is that an old remaining thing ?
>
>  - ``check`` -- boolean (optional) -- whether or not we check the
>
> "the" what ?
> ```

This is now removed

> When you test whether an element of `SR` is a real number, you use `RIF(x)`.
> Why not using `x.is_real()` (and make this method more reliable if needed) ?

you can not believe in `is_real` but I used it.

> Another problem:

>
> ```
> sage: a = RDF(0.1)
> sage: CFF(a)
> [0]
> ```
>
> The reason is :
>
> ```
> sage: (1/RIF(RDF(0.1))).unique_floor()
> ValueError: interval does not have a unique floor
> ```

It is now correct.

```
sage: continued_fraction(0.1)
[0; 10]
```

> In the doc: "It is quite remarkable that".

>
> Add : "- any real number admits a unique continued fraction expansion"

done

> [...]

>
> I would propose : "from a list of numbers corresponding to its partial
> quotients."

All occurrences of digits are removed and replaced by partial quotients.

> Another problem:

>
> ```
> sage: cf = CFF([(1,2,3),(1,2,4)]); cf.value()
> -1/86*sqrt229 + 139/86
>
> sage: sqrt229
> ....
> NameError: name 'sqrt229' is not defined
> ```

I agree. It is quite hard to make it works. I only documented how to do
that in the method `value`.


> "two_last_convergents" -> "last_two_convergents"

done

> `_pn` and `_qn` looks good for internal variables, but i would suggest to
> replace `pn()` and `qn()` methods by `numerator()` and `denominator()` to stay
> consistent with rationals.

done

> In the `_mpfr_` method: "It is guaranteed that the result is exact"

>
> Floating point number are not exact, perhaps "accurate" is a better word ?

done



---

archive/issue_events_206258.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-03T17:32:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206258"
}
```



---

archive/issue_events_206259.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-03T17:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206259"
}
```



---

archive/issue_comments_176551.json:
```json
{
    "body": "Changed commit from **[`8fbf106`](https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af)** to **[`43de321`](https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65)**",
    "created_at": "2014-04-18T12:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176551",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8fbf106`](https://github.com/sagemath/sagetrac-mirror/commit/8fbf106cbde07fed9c3f3ea2b32c9309185062af)** to **[`43de321`](https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65)**



---

archive/issue_comments_176552.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dfcac0c30aea07a5b9c5dde2e80723c54c8886c\">8dfcac0</a></td><td><code>ticket 14567</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91ce0e616b9a77be7067c457a413f70658f875f8\">91ce0e6</a></td><td><code>Trac #14567: reviewer's patch: enable docbuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83e4effd5ebc620d0bbb1e1d250e7f47d2e06f07\">83e4eff</a></td><td><code>Fix previous patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25b49caa26e9d8b516a0509aea00e98aea925de8\">25b49ca</a></td><td><code>fix import statements in sage.rings.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94104e23208ea033ccdd9a9865129d5adeb3c02b\">94104e2</a></td><td><code>move farey to continued_fractions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07d9a290733b94c2082c16fcb95eab0e308f8168\">07d9a29</a></td><td><code>cont_frac: pn -> numberator, qn -> denominator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b871cc1a62e14419eccd9c07cba0a76bd9398bc2\">b871cc1</a></td><td><code>update the code with respect to reviewer remarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66f46f6562068c3d4ecfcdfab53dc6cddef255ed\">66f46f6</a></td><td><code>Merge branch 'develop' into 14567-continued_fractions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65\">43de321</a></td><td><code>Merge branch 'u/vdelecroix/14567' of trac.sagemath.org:sage into 14567-continued_fractions</code></td></tr></table>\n",
    "created_at": "2014-04-18T12:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176552",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dfcac0c30aea07a5b9c5dde2e80723c54c8886c">8dfcac0</a></td><td><code>ticket 14567</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91ce0e616b9a77be7067c457a413f70658f875f8">91ce0e6</a></td><td><code>Trac #14567: reviewer's patch: enable docbuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83e4effd5ebc620d0bbb1e1d250e7f47d2e06f07">83e4eff</a></td><td><code>Fix previous patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25b49caa26e9d8b516a0509aea00e98aea925de8">25b49ca</a></td><td><code>fix import statements in sage.rings.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94104e23208ea033ccdd9a9865129d5adeb3c02b">94104e2</a></td><td><code>move farey to continued_fractions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07d9a290733b94c2082c16fcb95eab0e308f8168">07d9a29</a></td><td><code>cont_frac: pn -> numberator, qn -> denominator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b871cc1a62e14419eccd9c07cba0a76bd9398bc2">b871cc1</a></td><td><code>update the code with respect to reviewer remarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66f46f6562068c3d4ecfcdfab53dc6cddef255ed">66f46f6</a></td><td><code>Merge branch 'develop' into 14567-continued_fractions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65">43de321</a></td><td><code>Merge branch 'u/vdelecroix/14567' of trac.sagemath.org:sage into 14567-continued_fractions</code></td></tr></table>




---

archive/issue_events_206260.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-22T08:59:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206260"
}
```



---

archive/issue_events_206261.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-22T08:59:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206261"
}
```



---

archive/issue_comments_176553.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHello,\n\nI am still working on this.\n\nFirstly, it is easy to implement a class for continued fractions given by an infinite expansion... so I propose to include it in that ticket.\n\nSecondly, I have a big open question: what should be the parent (if any) of a continued fraction? As Thierry M. already mentioned, the `CFF` class does not fit very well.\n\nVincent",
    "created_at": "2014-04-22T08:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176553",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Hello,

I am still working on this.

Firstly, it is easy to implement a class for continued fractions given by an infinite expansion... so I propose to include it in that ticket.

Secondly, I have a big open question: what should be the parent (if any) of a continued fraction? As Thierry M. already mentioned, the `CFF` class does not fit very well.

Vincent



---

archive/issue_comments_176554.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c\">b570179</a></td><td><code>trac 14567: continued fraction (based on 6.2.rc0)</code></td></tr></table>\n",
    "created_at": "2014-04-27T12:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176554",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c">b570179</a></td><td><code>trac 14567: continued fraction (based on 6.2.rc0)</code></td></tr></table>




---

archive/issue_comments_176555.json:
```json
{
    "body": "Changed commit from **[`43de321`](https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65)** to **[`b570179`](https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c)**",
    "created_at": "2014-04-27T12:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`43de321`](https://github.com/sagemath/sagetrac-mirror/commit/43de3213c4158fa2e48675c24d1ed552fd4a4d65)** to **[`b570179`](https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c)**



---

archive/issue_events_206262.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-27T12:43:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206262"
}
```



---

archive/issue_events_206263.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-27T12:43:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206263"
}
```



---

archive/issue_comments_176556.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n 6. there is no bridge with words (sage.combinat.words)\n 7. continued fractions are not included in the documentation\n \n-The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 6.\n+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above.\n \n With the patch applied we can do\n \n@@ -32,9 +32,11 @@\n [3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]\n sage: cf_pi.quotient(1500)\n 1\n+\n+sage: cf_fib = continued_fraction(words.FibonacciWord([1,2]))\n+sage: cf_fib\n+[1; 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2...]\n+sage: cf_fib.n(digits=42)\n+1.38795458796714233691931385987318547787815\n ```\n In particular we solve the question in #11345.\n-\n-Apply:\n-* [attachment: trac_14567-continued_fractions.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)\n-* [attachment: trac_14567_addon1-fc.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)\n``````\n",
    "created_at": "2014-04-27T12:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176556",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 6. there is no bridge with words (sage.combinat.words)
 7. continued fractions are not included in the documentation
 
-The patch proposed here develop some general design for dealing with continued fractions and solve all issues above except 6.
+The patch proposed here develop some general design for dealing with continued fractions and solve all issues above.
 
 With the patch applied we can do
 
@@ -32,9 +32,11 @@
 [3; 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14, 2, 1, 1, 2, 2, 2, 2, ...]
 sage: cf_pi.quotient(1500)
 1
+
+sage: cf_fib = continued_fraction(words.FibonacciWord([1,2]))
+sage: cf_fib
+[1; 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2...]
+sage: cf_fib.n(digits=42)
+1.38795458796714233691931385987318547787815
 ```
 In particular we solve the question in #11345.
-
-Apply:
-* [attachment: trac_14567-continued_fractions.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567-continued_fractions.patch.gz)
-* [attachment: trac_14567_addon1-fc.patch](https://github.com/sagemath/sage/files/ticket14567/trac_14567_addon1-fc.patch.gz)
``````




---

archive/issue_comments_176557.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nNon fast forward commit (I have just one commit from 6.2.rc0 now).\n\nThis new implementation is cleaner and needs review !\n\nI guess we might deprecate `CFF` in an other ticket (but I will not do it).",
    "created_at": "2014-04-27T12:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176557",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Non fast forward commit (I have just one commit from 6.2.rc0 now).

This new implementation is cleaner and needs review !

I guess we might deprecate `CFF` in an other ticket (but I will not do it).



---

archive/issue_comments_176558.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nFor the record it is necessary to\n\n```\nsage -b\nmake doc-clean\nmake doc\n```\nto build the documentation. `sage -docbuild` will not suffice (fails).",
    "created_at": "2014-05-02T08:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176558",
    "user": "https://github.com/rwst"
}
```

<div id="comment:43" align="right">comment:43</div>

For the record it is necessary to

```
sage -b
make doc-clean
make doc
```
to build the documentation. `sage -docbuild` will not suffice (fails).



---

archive/issue_events_206264.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206264"
}
```



---

archive/issue_events_206265.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206265"
}
```



---

archive/issue_comments_176559.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\npatchbot:\n\n```\nsage -t --long src/sage/combinat/words/finite_word.py  # 1 doctest failed\nsage -t --long src/sage/combinat/words/word_generators.py  # 23 doctests failed\nsage -t --long src/doc/en/prep/Calculus.rst  # Timed out\nsage -t --long src/sage/rings/rational.pyx  # 2 doctests failed\n```",
    "created_at": "2014-05-14T13:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176559",
    "user": "https://github.com/rwst"
}
```

<div id="comment:45" align="right">comment:45</div>

patchbot:

```
sage -t --long src/sage/combinat/words/finite_word.py  # 1 doctest failed
sage -t --long src/sage/combinat/words/word_generators.py  # 23 doctests failed
sage -t --long src/doc/en/prep/Calculus.rst  # Timed out
sage -t --long src/sage/rings/rational.pyx  # 2 doctests failed
```



---

archive/issue_events_206266.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-14T13:41:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206266"
}
```



---

archive/issue_events_206267.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-14T13:41:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206267"
}
```



---

archive/issue_comments_176560.json:
```json
{
    "body": "Changed commit from **[`b570179`](https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c)** to **[`da8a52b`](https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347)**",
    "created_at": "2014-05-14T14:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176560",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b570179`](https://github.com/sagemath/sagetrac-mirror/commit/b57017903cfe976bc3c8f1adda47127467b2f73c)** to **[`da8a52b`](https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347)**



---

archive/issue_comments_176561.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d59dbf5cdb444744bb33a55b51c4cee824c6a6c9\">d59dbf5</a></td><td><code>trac #14567: update to sage 6.3.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347\">da8a52b</a></td><td><code>trac #14567: fix code in words, plot and rational</code></td></tr></table>\n",
    "created_at": "2014-05-14T14:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176561",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d59dbf5cdb444744bb33a55b51c4cee824c6a6c9">d59dbf5</a></td><td><code>trac #14567: update to sage 6.3.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347">da8a52b</a></td><td><code>trac #14567: fix code in words, plot and rational</code></td></tr></table>




---

archive/issue_comments_176562.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThanks (a bug in plot and a bug in words).\n\nNow the tests pass.\n\nVincent",
    "created_at": "2014-05-14T14:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176562",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">comment:47</div>

Thanks (a bug in plot and a bug in words).

Now the tests pass.

Vincent



---

archive/issue_events_206268.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-05-14T14:16:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206268"
}
```



---

archive/issue_events_206269.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-05-14T14:16:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206269"
}
```



---

archive/issue_comments_176563.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nyou need to use the new doc continuation style `...:` (see patchbot report)",
    "created_at": "2014-06-25T07:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176563",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48" align="right">comment:48</div>

you need to use the new doc continuation style `...:` (see patchbot report)



---

archive/issue_comments_176564.json:
```json
{
    "body": "Work Issues: **doctest continuation**",
    "created_at": "2014-06-25T07:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176564",
    "user": "https://github.com/fchapoton"
}
```

Work Issues: **doctest continuation**



---

archive/issue_events_206270.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-25T07:27:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206270"
}
```



---

archive/issue_events_206271.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-25T07:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206271"
}
```



---

archive/issue_comments_176565.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/14567)** to **[public/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14567)**",
    "created_at": "2014-06-25T19:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176565",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/vdelecroix/14567](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/14567)** to **[public/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14567)**



---

archive/issue_events_206272.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-25T19:03:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206272"
}
```



---

archive/issue_events_206273.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-25T19:03:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206273"
}
```



---

archive/issue_comments_176566.json:
```json
{
    "body": "Changed commit from **[`da8a52b`](https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347)** to **[`62fdcda`](https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238)**",
    "created_at": "2014-06-25T19:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176566",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`da8a52b`](https://github.com/sagemath/sagetrac-mirror/commit/da8a52b074d80e5de286e9923fbdb780e14ce347)** to **[`62fdcda`](https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238)**



---

archive/issue_comments_176567.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nnew branch, where I have taken care of the doctests continuation. Bot should turn green.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7da398e2e3bc83c27dc038f6fc5ed0c75ba7b23e\">7da398e</a></td><td><code>Merge branch 'u/vdelecroix/14567' of ssh://trac.sagemath.org:22/sage into 14567</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238\">62fdcda</a></td><td><code>trac #14567 taking care of doctest continuation</code></td></tr></table>\n",
    "created_at": "2014-06-25T19:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176567",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

new branch, where I have taken care of the doctests continuation. Bot should turn green.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7da398e2e3bc83c27dc038f6fc5ed0c75ba7b23e">7da398e</a></td><td><code>Merge branch 'u/vdelecroix/14567' of ssh://trac.sagemath.org:22/sage into 14567</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238">62fdcda</a></td><td><code>trac #14567 taking care of doctest continuation</code></td></tr></table>




---

archive/issue_comments_176568.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThanks!\n\nPS Note: there is no need to do a merge as in your commit 7da398e. The option I use to pull a branch from track is\n\n```\ngit fetch trac the-branch-I-need\ngit checkout -b a-good-name FETCH_HEAD\n```",
    "created_at": "2014-06-25T19:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176568",
    "user": "https://github.com/videlec"
}
```

<div id="comment:50" align="right">comment:50</div>

Thanks!

PS Note: there is no need to do a merge as in your commit 7da398e. The option I use to pull a branch from track is

```
git fetch trac the-branch-I-need
git checkout -b a-good-name FETCH_HEAD
```



---

archive/issue_events_206274.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206274"
}
```



---

archive/issue_events_206275.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206275"
}
```



---

archive/issue_comments_176569.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nWhat remains to be done here to give positive review?",
    "created_at": "2014-12-18T04:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176569",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:52" align="right">comment:52</div>

What remains to be done here to give positive review?



---

archive/issue_comments_176570.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8\">925deeb</a></td><td><code>14567: reviewer's patch: add early example of continued_fraction_list</code></td></tr></table>\n",
    "created_at": "2014-12-18T07:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176570",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8">925deeb</a></td><td><code>14567: reviewer's patch: add early example of continued_fraction_list</code></td></tr></table>




---

archive/issue_comments_176571.json:
```json
{
    "body": "Changed commit from **[`62fdcda`](https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238)** to **[`925deeb`](https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8)**",
    "created_at": "2014-12-18T07:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176571",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62fdcda`](https://github.com/sagemath/sagetrac-mirror/commit/62fdcda1159d16bbb4b4a72b94b3c9c555ad9238)** to **[`925deeb`](https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8)**



---

archive/issue_events_206276.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-18T07:52:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206276"
}
```



---

archive/issue_events_206277.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-18T07:52:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206277"
}
```



---

archive/issue_comments_176572.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nBranch passes `make ptestlong`. I added an early example of `continued_fraction_list` to the docs for convenience. I think the issue with exactifying reals should be addressed with a `GoodRealField` as mentioned in [comment:33](#comment:33), anyway a different ticket, as are extensions to symbolic expressions.",
    "created_at": "2014-12-18T07:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176572",
    "user": "https://github.com/rwst"
}
```

<div id="comment:54" align="right">comment:54</div>

Branch passes `make ptestlong`. I added an early example of `continued_fraction_list` to the docs for convenience. I think the issue with exactifying reals should be addressed with a `GoodRealField` as mentioned in [comment:33](#comment:33), anyway a different ticket, as are extensions to symbolic expressions.



---

archive/issue_comments_176573.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThanks.\n\nThere are changes that affect two of William's books. I sent him an e-mail (cc'ed in sage-devel): [see this thread](https://groups.google.com/forum/#!topic/sage-devel/nInBoCD6Bcc).\n\nVincent",
    "created_at": "2014-12-18T08:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176573",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

Thanks.

There are changes that affect two of William's books. I sent him an e-mail (cc'ed in sage-devel): [see this thread](https://groups.google.com/forum/#!topic/sage-devel/nInBoCD6Bcc).

Vincent



---

archive/issue_comments_176574.json:
```json
{
    "body": "Changed work issues from **doctest continuation** to none",
    "created_at": "2014-12-21T01:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176574",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **doctest continuation** to none



---

archive/issue_events_206278.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-01-13T05:03:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206278"
}
```



---

archive/issue_events_206279.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-01-13T05:03:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206279"
}
```



---

archive/issue_comments_176575.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b\">ec4a4ba</a></td><td><code>trac #14567: fix doctest</code></td></tr></table>\n",
    "created_at": "2015-01-15T08:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176575",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b">ec4a4ba</a></td><td><code>trac #14567: fix doctest</code></td></tr></table>




---

archive/issue_comments_176576.json:
```json
{
    "body": "Changed commit from **[`925deeb`](https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8)** to **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**",
    "created_at": "2015-01-15T08:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176576",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`925deeb`](https://github.com/sagemath/sagetrac-mirror/commit/925deeb009963f73da4f3fb4cb49f53bbb366ca8)** to **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**



---

archive/issue_events_206280.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2015-01-15T08:52:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206280"
}
```



---

archive/issue_events_206281.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2015-01-15T08:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206281"
}
```



---

archive/issue_events_206282.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-15T08:53:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206282"
}
```



---

archive/issue_events_206283.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-15T08:53:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206283"
}
```



---

archive/issue_comments_176577.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nRalf,\n\nthe one line you add to the file was wrong. I just replace it.\n\nI guess we should close the ticket has nobody answered on the sage-devel thread since a month now.\n\nVincent",
    "created_at": "2015-01-15T08:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176577",
    "user": "https://github.com/videlec"
}
```

<div id="comment:59" align="right">comment:59</div>

Ralf,

the one line you add to the file was wrong. I just replace it.

I guess we should close the ticket has nobody answered on the sage-devel thread since a month now.

Vincent



---

archive/issue_comments_176578.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@videlec](#comment:59):\n> the one line you add to the file was wrong. I just replace it.\n\nOh well, thanks.",
    "created_at": "2015-01-15T08:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176578",
    "user": "https://github.com/rwst"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@videlec](#comment:59):
> the one line you add to the file was wrong. I just replace it.

Oh well, thanks.



---

archive/issue_comments_176579.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nNote: merge cleanly on sage-6.5.beta6 and tests pass in `sage/rings`, `sage/modular` and `sage/tests`!",
    "created_at": "2015-01-25T17:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176579",
    "user": "https://github.com/videlec"
}
```

<div id="comment:61" align="right">comment:61</div>

Note: merge cleanly on sage-6.5.beta6 and tests pass in `sage/rings`, `sage/modular` and `sage/tests`!



---

archive/issue_comments_176580.json:
```json
{
    "body": "Changed branch from **[public/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14567)** to **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**",
    "created_at": "2015-01-29T22:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176580",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/14567](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/14567)** to **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)**



---

archive/issue_events_206284.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-29T22:41:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206284"
}
```



---

archive/issue_events_206285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "33ecd5e8b544c85e24143f9213c6c17fa36a7eb5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-29T22:41:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/14567#event-206285"
}
```



---

archive/issue_comments_176581.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nHey, I just hit an annoying case...\n\n```\nsage: continued_fraction_list(1.575709393346379)\nError in lines 1-1\nTraceback (most recent call last):\n...\nValueError: does not know how to compute the continued fraction of 1.57570939334638\n```\n\nHowever,\n\n```\nsage: continued_fraction_list(0 + 1.575709393346379)\n[1, 1, 1, 2, 1, 4, 18, 1, 5, 2, 22909319]\n```\n\nThe problem is that RealLiteral and continued fractions no longer work together...",
    "created_at": "2015-07-14T00:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176581",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:63" align="right">comment:63</div>

Hey, I just hit an annoying case...

```
sage: continued_fraction_list(1.575709393346379)
Error in lines 1-1
Traceback (most recent call last):
...
ValueError: does not know how to compute the continued fraction of 1.57570939334638
```

However,

```
sage: continued_fraction_list(0 + 1.575709393346379)
[1, 1, 1, 2, 1, 4, 18, 1, 5, 2, 22909319]
```

The problem is that RealLiteral and continued fractions no longer work together...



---

archive/issue_comments_176582.json:
```json
{
    "body": "Changed commit from **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)** to none",
    "created_at": "2015-07-14T00:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176582",
    "user": "https://github.com/williamstein"
}
```

Changed commit from **[`ec4a4ba`](https://github.com/sagemath/sagetrac-mirror/commit/ec4a4baa149a9b9e74dc32d25745b81059af2e6b)** to none



---

archive/issue_comments_176583.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nIndeed... did you open a ticket?",
    "created_at": "2015-07-14T08:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176583",
    "user": "https://github.com/videlec"
}
```

<div id="comment:64" align="right">comment:64</div>

Indeed... did you open a ticket?



---

archive/issue_comments_176584.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@videlec](#comment:64):\n> Indeed... did you open a ticket?\n\nNo, can you?",
    "created_at": "2015-07-14T14:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176584",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@videlec](#comment:64):
> Indeed... did you open a ticket?

No, can you?



---

archive/issue_comments_176585.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n> > Indeed... did you open a ticket?\n\n> \n> No, can you?\n\nPing - I don't quite know what the issue is but hopefully a ticket can be opened.",
    "created_at": "2015-09-14T01:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176585",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:66" align="right">comment:66</div>

> > Indeed... did you open a ticket?

> 
> No, can you?

Ping - I don't quite know what the issue is but hopefully a ticket can be opened.



---

archive/issue_comments_176586.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@kcrisman](#comment:66):\n> > > Indeed... did you open a ticket?\n\n> > \n> > No, can you?\n\n> Ping - I don't quite know what the issue is but hopefully a ticket can be opened.\n\nWas continued fractions of real literals. Solved in #18901. I apologize to have not mentioned it here.",
    "created_at": "2015-09-14T02:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176586",
    "user": "https://github.com/videlec"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@kcrisman](#comment:66):
> > > Indeed... did you open a ticket?

> > 
> > No, can you?

> Ping - I don't quite know what the issue is but hopefully a ticket can be opened.

Was continued fractions of real literals. Solved in #18901. I apologize to have not mentioned it here.



---

archive/issue_comments_176587.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nSee #20012 for **really** deprecating `CFF` (`ContinuedFractionField`).",
    "created_at": "2016-02-05T11:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/14567",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/14567#issuecomment-176587",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

See #20012 for **really** deprecating `CFF` (`ContinuedFractionField`).
