# Issue 14320: More doctests from the book "Calcul mathématique avec Sage"

archive/issues_014116.json:
```json
{
    "body": "The attached file provides doctests for examples in the chapter \"float\" (floating point numbers). Tests pass with 5.11.\n\nApply only [attachment:trac_14320_doctests_from_french_book.patch\u200b].\n\n**Assignee:** mvngu\n\n**Keywords:** french book\n\n**Upstream:** Completely fixed; Fix reported upstream\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Thierry Dumont, Paul Zimmermann\n\n**Merged:** sage-5.13.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/14320\n\n",
    "closed_at": "2013-11-06T12:49:20Z",
    "created_at": "2013-03-20T16:33:00Z",
    "labels": [
        "component: doctest coverage",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "More doctests from the book \"Calcul math\u00e9matique avec Sage\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14320",
    "user": "https://trac.sagemath.org/admin/accounts/users/tdumont"
}
```
The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.11.

Apply only [attachment:trac_14320_doctests_from_french_book.patch​].

**Assignee:** mvngu

**Keywords:** french book

**Upstream:** Completely fixed; Fix reported upstream

**Reviewer:** Frédéric Chapoton

**Author:** Thierry Dumont, Paul Zimmermann

**Merged:** sage-5.13.beta3

Issue created by migration from https://trac.sagemath.org/ticket/14320





---

archive/attachments_019333.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "float_doctest.sage",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14320/float_doctest.sage",
    "created_at": "2013-03-20T16:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.sage",
    "user": "https://trac.sagemath.org/admin/accounts/users/tdumont"
}
```



---

archive/issue_comments_212824.json:
```json
{
    "body": "doctets auto generated.",
    "created_at": "2013-03-20T16:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212824",
    "user": "https://trac.sagemath.org/admin/accounts/users/tdumont"
}
```

doctets auto generated.



---

archive/issue_events_046406.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14320#event-46406"
}
```



---

archive/issue_comments_212825.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212825",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_212826.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-The attached file provides doctests for examples in the chapter \"float\" (floating point numbers). Tests pass with 5.8.\n+The attached file provides doctests for examples in the chapter \"float\" (floating point numbers). Tests pass with 5.11.\n+\n+Apply only trac_14320_doctests_from_french_book.patch\u200b.\n``````\n",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212826",
    "user": "https://github.com/zimmermann6"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.8.
+The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.11.
+
+Apply only trac_14320_doctests_from_french_book.patch​.
``````




---

archive/issue_comments_212827.json:
```json
{
    "body": "**Changing author** from \"Thierry Dumont\" to \"Thierry Dumont, Paul Zimmermann\".",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212827",
    "user": "https://github.com/zimmermann6"
}
```

**Changing author** from "Thierry Dumont" to "Thierry Dumont, Paul Zimmermann".



---

archive/issue_comments_212828.json:
```json
{
    "body": "<a id='comment:2'></a>\nI've attached a well-formed patch. I had to modify two things with respect to the book (which was with Sage 5.9), due to some recent changes in RDF:\n\n* I added \"abs tol 0.05\" somewhere to avoid a failing test with 5.11\n\n* `exact-sommation compensee` now gives 0.0 with 5.11 (instead of -0.001953125 with 5.9).\n  I thus changed to 0.0 in the doctest. This will thus differ from the book, which should be\n  updated to 5.11 (adding \"abs tol\" is not enough).\n\nPaul",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212828",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:2'></a>
I've attached a well-formed patch. I had to modify two things with respect to the book (which was with Sage 5.9), due to some recent changes in RDF:

* I added "abs tol 0.05" somewhere to avoid a failing test with 5.11

* `exact-sommation compensee` now gives 0.0 with 5.11 (instead of -0.001953125 with 5.9).
  I thus changed to 0.0 in the doctest. This will thus differ from the book, which should be
  updated to 5.11 (adding "abs tol" is not enough).

Paul



---

archive/issue_comments_212829.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-09-23T16:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212829",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_212830.json:
```json
{
    "body": "<a id='comment:3'></a>\nsame remark about indentation: should be 4 spaces rather than 2",
    "created_at": "2013-09-23T16:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212830",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
same remark about indentation: should be 4 spaces rather than 2



---

archive/issue_comments_212831.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-09-24T12:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212831",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_212832.json:
```json
{
    "body": "<a id='comment:4'></a>\n> same remark about indentation: should be 4 spaces rather than 2 \n\n\nis it better with the new patch?\n\nPaul",
    "created_at": "2013-09-24T12:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212832",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:4'></a>
> same remark about indentation: should be 4 spaces rather than 2 


is it better with the new patch?

Paul



---

archive/issue_comments_212833.json:
```json
{
    "body": "<a id='comment:5'></a>\nyes, it is much better that way.",
    "created_at": "2013-10-19T19:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212833",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
yes, it is much better that way.



---

archive/issue_comments_212834.json:
```json
{
    "body": "<a id='comment:6'></a>\nLet me say that it is good to go.",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212834",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
Let me say that it is good to go.



---

archive/issue_comments_212835.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212835",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_212836.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212836",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_212837.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"french book\".",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212837",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "french book".



---

archive/issue_comments_212838.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-10-31T07:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212838",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_212839.json:
```json
{
    "body": "<a id='comment:7'></a>\nOn `arando` (Linux 32-bit i686):\n\n```\nsage -t --long devel/sage/sage/tests/french_book/float_doctest.py\n**********************************************************************\nFile \"devel/sage/sage/tests/french_book/float_doctest.py\", line 206, in sage.tests.french_book.float_doctest\nFailed example:\n    print \"exact - sommation classique:\", s-ii # abs tol 0.05\nExpected:\n    exact - sommation classique: -45.5\nGot:\n    exact - sommation classique: -45.591796875\nTolerance exceeded: 9e-02 > 5e-02\n**********************************************************************\n```",
    "created_at": "2013-10-31T07:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212839",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
On `arando` (Linux 32-bit i686):

```
sage -t --long devel/sage/sage/tests/french_book/float_doctest.py
**********************************************************************
File "devel/sage/sage/tests/french_book/float_doctest.py", line 206, in sage.tests.french_book.float_doctest
Failed example:
    print "exact - sommation classique:", s-ii # abs tol 0.05
Expected:
    exact - sommation classique: -45.5
Got:
    exact - sommation classique: -45.591796875
Tolerance exceeded: 9e-02 > 5e-02
**********************************************************************
```



---

archive/issue_comments_212840.json:
```json
{
    "body": "<a id='comment:8'></a>\nI will have a look next week, unless someone beats me. However I wonder why the patchbot did not find this before. Did it work before on arando?\n\nPaul",
    "created_at": "2013-10-31T08:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212840",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:8'></a>
I will have a look next week, unless someone beats me. However I wonder why the patchbot did not find this before. Did it work before on arando?

Paul



---

archive/issue_comments_212841.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt seems the patchbot is having trouble itself... Also, I don't know whether we have any patchbots running on 32-bit i686.",
    "created_at": "2013-10-31T09:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212841",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
It seems the patchbot is having trouble itself... Also, I don't know whether we have any patchbots running on 32-bit i686.



---

archive/attachments_019334.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_14320_doctests_from_french_book.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket14320/trac_14320_doctests_from_french_book.patch",
    "created_at": "2013-11-04T10:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_212842.json:
```json
{
    "body": "<a id='comment:10'></a>\nI increased the tolerance to 0.1, it should be ok now.\n\nPaul",
    "created_at": "2013-11-04T10:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212842",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:10'></a>
I increased the tolerance to 0.1, it should be ok now.

Paul



---

archive/issue_comments_212843.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-11-04T10:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212843",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_212844.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-11-04T10:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212844",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_212845.json:
```json
{
    "body": "<a id='comment:11'></a>\nShould be good.",
    "created_at": "2013-11-04T10:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212845",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Should be good.



---

archive/issue_comments_212846.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The attached file provides doctests for examples in the chapter \"float\" (floating point numbers). Tests pass with 5.11.\n \n-Apply only trac_14320_doctests_from_french_book.patch\u200b.\n+Apply only [attachment:trac_14320_doctests_from_french_book.patch\u200b].\n``````\n",
    "created_at": "2013-11-04T10:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212846",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.11.
 
-Apply only trac_14320_doctests_from_french_book.patch​.
+Apply only [attachment:trac_14320_doctests_from_french_book.patch​].
``````




---

archive/issue_events_046407.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-06T12:49:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14320#event-46407"
}
```



---

archive/issue_comments_212847.json:
```json
{
    "body": "**Merged:** sage-5.13.beta3",
    "created_at": "2013-11-06T12:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14320#issuecomment-212847",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.13.beta3
