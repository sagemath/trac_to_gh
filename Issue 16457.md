# Issue 16457: Rscript is currently non-functional

Issue created by migration from Trac.

Original creator: charpent

Original creation time: 2014-07-21 13:40:40

CC:  kcrisman

Keywords: r-project

Sage's Rscript accepts neither files nor arguments.

Compare

```
## System version
charpent`@`SAP5057241:~/Dev/nloptr$ cat foo.R
2+2
charpent`@`SAP5057241:~/Dev/nloptr$ which Rscript
/usr/bin/Rscript
charpent`@`SAP5057241:~/Dev/nloptr$ Rscript foo.R
[1] 4
charpent`@`SAP5057241:~/Dev/nloptr$ Rscript -e "2+3"
[1] 5
```

with

```
## Sage's version
charpent`@`SAP5057241:~/Dev/nloptr$ sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/usr/local/sage-6.3.beta6-x86_64-Linux
(sage-sh) charpent`@`SAP5057241:nloptr$ which Rscript
/usr/local/sage-6.3.beta6-x86_64-Linux/local/bin/Rscript
(sage-sh) charpent`@`SAP5057241:nloptr$ Rscript foo.R 
Rscript execution error: No such file or directory
(sage-sh) charpent`@`SAP5057241:nloptr$ Rscript -e "2+3"
Rscript execution error: No such file or directory
```

Consequence : some packages, which need Rscript for installation (because they try to download some library source tarballs) can no longer be installed in R. This include notoriously nloptr, on which lme4 (a mixed-model package ofextremely frequent use) and other often-used packages depend.

Consequence of this consequence : Sage no longer offers a *replacement* for system's R. Ouch !


---

Comment by charpent created at 2014-07-23 19:44:16

Apparently, this is not constant.

The problem I reported was shown on a machine using a Sage tarball precompiled on a fast machine with SAGE_FAT_BINARY="yes".

On another machine, compiled without any other flag other than MAJE="make -j8", Rscript works as advertised.

I have other problems with Sage's R (notably, rstan doesn't install), but this another problem (in general Sage builds are brittle...).

Downgrading the priority of the defect to "minor"


---

Comment by charpent created at 2014-07-23 19:44:16

Changing priority from major to minor.


---

Comment by charpent created at 2014-07-25 20:06:14

Pursuing an apparent bug with an (seemingly unrelated) R package, I came to the conclusion that the proble might be related to R initial configuration.

Since this has been extensively modified in order to accomodate Cygwin's whims, I'd like to suggest that authors of #14706 have a look at [https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU](https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU) and make suggestions about the possible solutions.


---

Comment by charpent created at 2014-11-06 10:10:49

Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after "make distclean ; make".

However, I won't close this ticket now.


---

Comment by leif created at 2016-10-01 19:49:04

Replying to [comment:4 charpent]:
> Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after "make distclean ; make".
> 
> However, I won't close this ticket now.

And two years later?


---

Comment by leif created at 2016-10-01 19:49:04

Changing status from new to needs_info.


---

Comment by chapoton created at 2020-09-21 19:00:01

and 6 years later ? can we close as obsolete ?


---

Comment by kcrisman created at 2020-09-21 19:18:34

> and 6 years later ? can we close as obsolete ?

Probably based on charpent's comments and the time elapsed, yes.
