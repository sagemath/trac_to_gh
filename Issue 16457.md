# Issue 16457: Rscript is currently non-functional

archive/issues_016457.json:
```json
{
    "body": "CC:  @kcrisman\n\nKeywords: r-project\n\nSage's Rscript accepts neither files nor arguments.\n\nCompare\n\n```\n## System version\ncharpent@SAP5057241:~/Dev/nloptr$ cat foo.R\n2+2\ncharpent@SAP5057241:~/Dev/nloptr$ which Rscript\n/usr/bin/Rscript\ncharpent@SAP5057241:~/Dev/nloptr$ Rscript foo.R\n[1] 4\ncharpent@SAP5057241:~/Dev/nloptr$ Rscript -e \"2+3\"\n[1] 5\n```\n\nwith\n\n```\n## Sage's version\ncharpent@SAP5057241:~/Dev/nloptr$ sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/usr/local/sage-6.3.beta6-x86_64-Linux\n(sage-sh) charpent@SAP5057241:nloptr$ which Rscript\n/usr/local/sage-6.3.beta6-x86_64-Linux/local/bin/Rscript\n(sage-sh) charpent@SAP5057241:nloptr$ Rscript foo.R \nRscript execution error: No such file or directory\n(sage-sh) charpent@SAP5057241:nloptr$ Rscript -e \"2+3\"\nRscript execution error: No such file or directory\n```\n\nConsequence : some packages, which need Rscript for installation (because they try to download some library source tarballs) can no longer be installed in R. This include notoriously nloptr, on which lme4 (a mixed-model package ofextremely frequent use) and other often-used packages depend.\n\nConsequence of this consequence : Sage no longer offers a *replacement* for system's R. Ouch !\n\nIssue created by migration from https://trac.sagemath.org/ticket/16694\n\n",
    "created_at": "2014-07-21T13:40:40Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Rscript is currently non-functional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16457",
    "user": "@EmmanuelCharpentier"
}
```
CC:  @kcrisman

Keywords: r-project

Sage's Rscript accepts neither files nor arguments.

Compare

```
## System version
charpent@SAP5057241:~/Dev/nloptr$ cat foo.R
2+2
charpent@SAP5057241:~/Dev/nloptr$ which Rscript
/usr/bin/Rscript
charpent@SAP5057241:~/Dev/nloptr$ Rscript foo.R
[1] 4
charpent@SAP5057241:~/Dev/nloptr$ Rscript -e "2+3"
[1] 5
```

with

```
## Sage's version
charpent@SAP5057241:~/Dev/nloptr$ sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/usr/local/sage-6.3.beta6-x86_64-Linux
(sage-sh) charpent@SAP5057241:nloptr$ which Rscript
/usr/local/sage-6.3.beta6-x86_64-Linux/local/bin/Rscript
(sage-sh) charpent@SAP5057241:nloptr$ Rscript foo.R 
Rscript execution error: No such file or directory
(sage-sh) charpent@SAP5057241:nloptr$ Rscript -e "2+3"
Rscript execution error: No such file or directory
```

Consequence : some packages, which need Rscript for installation (because they try to download some library source tarballs) can no longer be installed in R. This include notoriously nloptr, on which lme4 (a mixed-model package ofextremely frequent use) and other often-used packages depend.

Consequence of this consequence : Sage no longer offers a *replacement* for system's R. Ouch !

Issue created by migration from https://trac.sagemath.org/ticket/16694





---

archive/issue_comments_216306.json:
```json
{
    "body": "Apparently, this is not constant.\n\nThe problem I reported was shown on a machine using a Sage tarball precompiled on a fast machine with SAGE_FAT_BINARY=\"yes\".\n\nOn another machine, compiled without any other flag other than MAJE=\"make -j8\", Rscript works as advertised.\n\nI have other problems with Sage's R (notably, rstan doesn't install), but this another problem (in general Sage builds are brittle...).\n\nDowngrading the priority of the defect to \"minor\"",
    "created_at": "2014-07-23T19:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216306",
    "user": "@EmmanuelCharpentier"
}
```

Apparently, this is not constant.

The problem I reported was shown on a machine using a Sage tarball precompiled on a fast machine with SAGE_FAT_BINARY="yes".

On another machine, compiled without any other flag other than MAJE="make -j8", Rscript works as advertised.

I have other problems with Sage's R (notably, rstan doesn't install), but this another problem (in general Sage builds are brittle...).

Downgrading the priority of the defect to "minor"



---

archive/issue_comments_216307.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2014-07-23T19:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216307",
    "user": "@EmmanuelCharpentier"
}
```

Changing priority from major to minor.



---

archive/issue_comments_216308.json:
```json
{
    "body": "Pursuing an apparent bug with an (seemingly unrelated) R package, I came to the conclusion that the proble might be related to R initial configuration.\n\nSince this has been extensively modified in order to accomodate Cygwin's whims, I'd like to suggest that authors of #14706 have a look at [https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU](https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU) and make suggestions about the possible solutions.",
    "created_at": "2014-07-25T20:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216308",
    "user": "@EmmanuelCharpentier"
}
```

Pursuing an apparent bug with an (seemingly unrelated) R package, I came to the conclusion that the proble might be related to R initial configuration.

Since this has been extensively modified in order to accomodate Cygwin's whims, I'd like to suggest that authors of #14706 have a look at [https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU](https://groups.google.com/forum/#!topic/stan-users/Qbkuu51QZvU) and make suggestions about the possible solutions.



---

archive/issue_comments_216309.json:
```json
{
    "body": "Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after \"make distclean ; make\".\n\nHowever, I won't close this ticket now.",
    "created_at": "2014-11-06T10:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216309",
    "user": "@EmmanuelCharpentier"
}
```

Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after "make distclean ; make".

However, I won't close this ticket now.



---

archive/issue_comments_216310.json:
```json
{
    "body": "Replying to [comment:4 charpent]:\n> Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after \"make distclean ; make\".\n> \n> However, I won't close this ticket now.\n\nAnd two years later?",
    "created_at": "2016-10-01T19:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216310",
    "user": "@nexttime"
}
```

Replying to [comment:4 charpent]:
> Further experiences let me think that this bug might be an artefact of iterative sage building (typical git use) : I'm still unable to reproduce it after "make distclean ; make".
> 
> However, I won't close this ticket now.

And two years later?



---

archive/issue_comments_216311.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2016-10-01T19:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216311",
    "user": "@nexttime"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_216312.json:
```json
{
    "body": "and 6 years later ? can we close as obsolete ?",
    "created_at": "2020-09-21T19:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216312",
    "user": "@fchapoton"
}
```

and 6 years later ? can we close as obsolete ?



---

archive/issue_comments_216313.json:
```json
{
    "body": "> and 6 years later ? can we close as obsolete ?\n\nProbably based on charpent's comments and the time elapsed, yes.",
    "created_at": "2020-09-21T19:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16457#issuecomment-216313",
    "user": "@kcrisman"
}
```

> and 6 years later ? can we close as obsolete ?

Probably based on charpent's comments and the time elapsed, yes.
