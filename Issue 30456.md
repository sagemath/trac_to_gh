# Issue 30456: _ext_p_list fails for zero floating-point padic elements

Issue created by migration from https://trac.sagemath.org/ticket/30693

Original creator: @n-vi

Original creation time: 2020-10-01 21:33:18

Keywords: floating-point, expansion

Using version 9.2 of Sage, `_ext_p_list` fails on zero elements of padic fields with floating-point precision. 

Example:

```
sage: F = Qp(3, type='floating-point')                                                                                                                                                
sage: a = F(0)                                                                                                                                                                     
sage: a._ext_p_list(True)                                                                                                                                                          
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-9072220043af> in <module>
----> 1 a._ext_p_list(True)

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.padic_floating_point_element.pAdicTemplateElement._ext_p_list (build/cythonized/sage/rings/padics/padic_floating_point_element.c:10943)()
    608         """
    609         if pos:
--> 610             return trim_zeros(list(self.unit_part().expansion(lift_mode='simple')))
    611         else:
    612             return trim_zeros(list(self.unit_part().expansion(lift_mode='smallest')))

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/FP_template.pxi in sage.rings.padics.padic_floating_point_element.FPElement.unit_part (build/cythonized/sage/rings/padics/padic_floating_point_element.c:23851)()
   1149         """
   1150         if huge_val(self.ordp):
-> 1151             raise ValueError("unit part of 0 and infinity not defined")
   1152         cdef FPElement ans = (<FPElement>self)._new_c()
   1153         ans.ordp = 0

ValueError: unit part of 0 and infinity not defined
```



---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.
