# Issue 30456: _ext_p_list fails for zero floating-point padic elements

archive/issues_030456.json:
```json
{
    "body": "Keywords: floating-point, expansion\n\nUsing version 9.2 of Sage, `_ext_p_list` fails on zero elements of padic fields with floating-point precision. \n\nExample:\n\n```\nsage: F = Qp(3, type='floating-point')                                                                                                                                                \nsage: a = F(0)                                                                                                                                                                     \nsage: a._ext_p_list(True)                                                                                                                                                          \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-4-9072220043af> in <module>\n----> 1 a._ext_p_list(True)\n\n~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.padic_floating_point_element.pAdicTemplateElement._ext_p_list (build/cythonized/sage/rings/padics/padic_floating_point_element.c:10943)()\n    608         \"\"\"\n    609         if pos:\n--> 610             return trim_zeros(list(self.unit_part().expansion(lift_mode='simple')))\n    611         else:\n    612             return trim_zeros(list(self.unit_part().expansion(lift_mode='smallest')))\n\n~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/FP_template.pxi in sage.rings.padics.padic_floating_point_element.FPElement.unit_part (build/cythonized/sage/rings/padics/padic_floating_point_element.c:23851)()\n   1149         \"\"\"\n   1150         if huge_val(self.ordp):\n-> 1151             raise ValueError(\"unit part of 0 and infinity not defined\")\n   1152         cdef FPElement ans = (<FPElement>self)._new_c()\n   1153         ans.ordp = 0\n\nValueError: unit part of 0 and infinity not defined\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30693\n\n",
    "created_at": "2020-10-01T21:33:18Z",
    "labels": [
        "padics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "_ext_p_list fails for zero floating-point padic elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30456",
    "user": "@n-vi"
}
```
Keywords: floating-point, expansion

Using version 9.2 of Sage, `_ext_p_list` fails on zero elements of padic fields with floating-point precision. 

Example:

```
sage: F = Qp(3, type='floating-point')                                                                                                                                                
sage: a = F(0)                                                                                                                                                                     
sage: a._ext_p_list(True)                                                                                                                                                          
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-9072220043af> in <module>
----> 1 a._ext_p_list(True)

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.padic_floating_point_element.pAdicTemplateElement._ext_p_list (build/cythonized/sage/rings/padics/padic_floating_point_element.c:10943)()
    608         """
    609         if pos:
--> 610             return trim_zeros(list(self.unit_part().expansion(lift_mode='simple')))
    611         else:
    612             return trim_zeros(list(self.unit_part().expansion(lift_mode='smallest')))

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/rings/padics/FP_template.pxi in sage.rings.padics.padic_floating_point_element.FPElement.unit_part (build/cythonized/sage/rings/padics/padic_floating_point_element.c:23851)()
   1149         """
   1150         if huge_val(self.ordp):
-> 1151             raise ValueError("unit part of 0 and infinity not defined")
   1152         cdef FPElement ans = (<FPElement>self)._new_c()
   1153         ans.ordp = 0

ValueError: unit part of 0 and infinity not defined
```


Issue created by migration from https://trac.sagemath.org/ticket/30693





---

archive/issue_comments_434715.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30456#issuecomment-434715",
    "user": "mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.
