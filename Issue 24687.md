# Issue 24687: Ḿaking the bliss canonical form available for edge labelled graphs

archive/issues_024687.json:
```json
{
    "body": "CC:  simonking @dimpase @dimpase @etn40ff\n\nThis is a discussion ticket for improving the bliss canonical form input, based on https://groups.google.com/d/topic/sage-support/oZ7Uu5jTR9k/discussion.\n\nChristian's aim: make the canonical form of a graph given by an integer matrix much faster.\n\nThis basic idea is to provide an alternative version of `sage.graphs.bliss.canonical_form` using a list of labelled vertices as input rather than a graph. Maybe\n\n```\ndef canonical_form_list(Vnr, edges, partition)\n```\n\nwhere we assume that (i,j,color) in edges has the property `0 <= i,j < Vnr` and colors `0 <= color < k` where the color `0` means \"uncolored\" and is assumed to be the most common color.\n\nSince this is an internal speed-critial functionality, Christian believes that it would then be the user's responsibility to turn any input format of graph, if needed, into this format.\n\nAs Dima pointed out, we can turn this edge labelled graph into an unlabelled graph with O(Vnr log k) vertices as described in Sect 14 in http://pallini.di.uniroma1.it/Guide.html.\n\nFor now, this is only for discussion design and code snippets.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24924\n\n",
    "created_at": "2018-03-07T15:12:55Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "\u1e3eaking the bliss canonical form available for edge labelled graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24687",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
CC:  simonking @dimpase @dimpase @etn40ff

This is a discussion ticket for improving the bliss canonical form input, based on https://groups.google.com/d/topic/sage-support/oZ7Uu5jTR9k/discussion.

Christian's aim: make the canonical form of a graph given by an integer matrix much faster.

This basic idea is to provide an alternative version of `sage.graphs.bliss.canonical_form` using a list of labelled vertices as input rather than a graph. Maybe

```
def canonical_form_list(Vnr, edges, partition)
```

where we assume that (i,j,color) in edges has the property `0 <= i,j < Vnr` and colors `0 <= color < k` where the color `0` means "uncolored" and is assumed to be the most common color.

Since this is an internal speed-critial functionality, Christian believes that it would then be the user's responsibility to turn any input format of graph, if needed, into this format.

As Dima pointed out, we can turn this edge labelled graph into an unlabelled graph with O(Vnr log k) vertices as described in Sect 14 in http://pallini.di.uniroma1.it/Guide.html.

For now, this is only for discussion design and code snippets.

Issue created by migration from https://trac.sagemath.org/ticket/24924





---

archive/issue_comments_346081.json:
```json
{
    "body": "I have provided a first almost trivial version, I will send some timings later -- comparing the hash I posted on sage-support with its new counterpart using this new bliss canonical form (yielding the very same hash without ever constructing a sage `DiGraph`) gives immediately\n\n```\nsage: M = matrix([(0, -1, 0, 0, 0, 0, 0, 1),\n....:  (1, 0, 1, 0, 0, 0, 0, 0),\n....:  (0, -1, 0, 0, 1, 0, 0, 0),\n....:  (0, 0, 0, 0, 0, 1, 0, 0),\n....:  (0, 0, -1, 0, 0, 0, 1, 0),\n....:  (0, 0, 0, -1, 0, 0, -1, 0),\n....:  (0, 0, 0, 0, -1, 1, 0, 0),\n....:  (-2, 0, 0, 0, 0, 0, 0, 0),\n....:  (-1, 1, 0, 0, 0, 0, 0, 0),\n....:  (0, 1, 0, 0, 0, 0, 0, -1),\n....:  (0, 1, 0, 1, 0, -1, 0, -1),\n....:  (0, 2, -1, 1, 0, -1, 0, -1),\n....:  (0, 2, -1, 0, 0, -1, 0, -1),\n....:  (0, 2, 0, 0, -1, -1, 0, -1),\n....:  (0, 2, 0, 0, -1, 0, -1, -1),\n....:  (0, 2, 0, 0, 0, 0, -2, -1)]\n....: )\nsage: %timeit matrix_canonical_hash(M,8,8)\n1000 loops, best of 3: 177 \u00b5s per loop\nsage: %timeit matrix_canonical_hash_cython(M)\n10000 loops, best of 3: 20.3 \u00b5s per loop\n```\n\n----\nNew commits:",
    "created_at": "2018-03-07T16:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346081",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I have provided a first almost trivial version, I will send some timings later -- comparing the hash I posted on sage-support with its new counterpart using this new bliss canonical form (yielding the very same hash without ever constructing a sage `DiGraph`) gives immediately

```
sage: M = matrix([(0, -1, 0, 0, 0, 0, 0, 1),
....:  (1, 0, 1, 0, 0, 0, 0, 0),
....:  (0, -1, 0, 0, 1, 0, 0, 0),
....:  (0, 0, 0, 0, 0, 1, 0, 0),
....:  (0, 0, -1, 0, 0, 0, 1, 0),
....:  (0, 0, 0, -1, 0, 0, -1, 0),
....:  (0, 0, 0, 0, -1, 1, 0, 0),
....:  (-2, 0, 0, 0, 0, 0, 0, 0),
....:  (-1, 1, 0, 0, 0, 0, 0, 0),
....:  (0, 1, 0, 0, 0, 0, 0, -1),
....:  (0, 1, 0, 1, 0, -1, 0, -1),
....:  (0, 2, -1, 1, 0, -1, 0, -1),
....:  (0, 2, -1, 0, 0, -1, 0, -1),
....:  (0, 2, 0, 0, -1, -1, 0, -1),
....:  (0, 2, 0, 0, -1, 0, -1, -1),
....:  (0, 2, 0, 0, 0, 0, -2, -1)]
....: )
sage: %timeit matrix_canonical_hash(M,8,8)
1000 loops, best of 3: 177 µs per loop
sage: %timeit matrix_canonical_hash_cython(M)
10000 loops, best of 3: 20.3 µs per loop
```

----
New commits:



---

archive/issue_comments_346082.json:
```json
{
    "body": "So far it looks good. But if I understand correctly, your actual aim is to get a canonical from associated with a matrix. Hence, you shouldn't need canonical_form_from_edge_list. I guess you want to create the bliss graph directly from the matrix (also using `.get_unsafe()` for element access), so that you don't need to create an edge list as an intermediate result of the bliss graph creation.",
    "created_at": "2018-03-07T20:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346082",
    "user": "https://github.com/simon-king-jena"
}
```

So far it looks good. But if I understand correctly, your actual aim is to get a canonical from associated with a matrix. Hence, you shouldn't need canonical_form_from_edge_list. I guess you want to create the bliss graph directly from the matrix (also using `.get_unsafe()` for element access), so that you don't need to create an edge list as an intermediate result of the bliss graph creation.



---

archive/issue_comments_346083.json:
```json
{
    "body": "I have also the following:\n\n```\ncpdef matrix_to_edge_list(Matrix M):\n    cdef Py_ssize_t i, j\n    cdef int a,b, x\n\n    cdef list edges = list()\n    cdef dict edge_labels = dict()\n    cdef list new_partition = list()\n\n    cdef bint pos\n\n    cdef int n = M._ncols\n    cdef int m = M._nrows - n\n\n    cdef int Vnew = n+m\n\n    for i from 0 <= i < n+m:\n        for j from 0 <= j < n:\n            a = M.get_unsafe(i,j)\n            if i < n:\n                b = M.get_unsafe(j,i)\n            else:\n                b = -a\n\n            if a > 0:\n                if a == 1 and b == -1:\n                    edges.append((i,j))\n                else:\n                    try:\n                        x = edge_labels[(a,b)]\n                    except KeyError:\n                        x = len(new_partition)\n                        edge_labels[(a,b)] = x\n                        new_partition.append([])\n                    finally:\n                        edges.append((i,Vnew))\n                        edges.append((Vnew,j))\n                        new_partition[x].append(Vnew)\n                        Vnew += 1\n            elif i >= n:\n                if a == -1 and b == 1:\n                    edges.append((j,i))\n                else:\n                    a = -a\n                    b = -b\n                    try:\n                        x = edge_labels[(a,b)]\n                    except KeyError:\n                        x = len(new_partition)\n                        edge_labels[(a,b)] = x\n                        new_partition.append([])\n                    finally:\n                        edges.append((j,Vnew))\n                        edges.append((Vnew,i))\n                        new_partition[x].append(Vnew)\n                        Vnew += 1\n\n    partition = [list(range(n))]\n    if m > 0:\n        partition.append(list(range(n,n+m)))\n    if new_partition:\n        partition.extend(new_partition)\n\n    return Vnew, edges, partition\n```\n\n\nBut since it is not far from that, I now plan to implement what Dima pointed out from Sect 14 in \u200bhttp://pallini.di.uniroma1.it/Guide.html.\n\nMy impression is that, given that I need to know the number of vertices of the graph a priori, I need to first read the complete matrix before I can start creating the `bliss Digraph`.",
    "created_at": "2018-03-07T20:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346083",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I have also the following:

```
cpdef matrix_to_edge_list(Matrix M):
    cdef Py_ssize_t i, j
    cdef int a,b, x

    cdef list edges = list()
    cdef dict edge_labels = dict()
    cdef list new_partition = list()

    cdef bint pos

    cdef int n = M._ncols
    cdef int m = M._nrows - n

    cdef int Vnew = n+m

    for i from 0 <= i < n+m:
        for j from 0 <= j < n:
            a = M.get_unsafe(i,j)
            if i < n:
                b = M.get_unsafe(j,i)
            else:
                b = -a

            if a > 0:
                if a == 1 and b == -1:
                    edges.append((i,j))
                else:
                    try:
                        x = edge_labels[(a,b)]
                    except KeyError:
                        x = len(new_partition)
                        edge_labels[(a,b)] = x
                        new_partition.append([])
                    finally:
                        edges.append((i,Vnew))
                        edges.append((Vnew,j))
                        new_partition[x].append(Vnew)
                        Vnew += 1
            elif i >= n:
                if a == -1 and b == 1:
                    edges.append((j,i))
                else:
                    a = -a
                    b = -b
                    try:
                        x = edge_labels[(a,b)]
                    except KeyError:
                        x = len(new_partition)
                        edge_labels[(a,b)] = x
                        new_partition.append([])
                    finally:
                        edges.append((j,Vnew))
                        edges.append((Vnew,i))
                        new_partition[x].append(Vnew)
                        Vnew += 1

    partition = [list(range(n))]
    if m > 0:
        partition.append(list(range(n,n+m)))
    if new_partition:
        partition.extend(new_partition)

    return Vnew, edges, partition
```


But since it is not far from that, I now plan to implement what Dima pointed out from Sect 14 in ​http://pallini.di.uniroma1.it/Guide.html.

My impression is that, given that I need to know the number of vertices of the graph a priori, I need to first read the complete matrix before I can start creating the `bliss Digraph`.



---

archive/issue_comments_346084.json:
```json
{
    "body": "Replying to [comment:6 stumpc5]:\n> My impression is that, given that I need to know the number of vertices of the graph a priori, I need to first read the complete matrix before I can start creating the `bliss Digraph`.\n\nHm. That would be unfortunate. In that case, I suppose it will be impossible to avoid the creation of an intermediate edge list --- but you could create it by means of two `int*` (i.e., a C list for start points and a C list for end points). That might be a more efficient intermediate data structure than a python list of pairs.",
    "created_at": "2018-03-07T20:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346084",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:6 stumpc5]:
> My impression is that, given that I need to know the number of vertices of the graph a priori, I need to first read the complete matrix before I can start creating the `bliss Digraph`.

Hm. That would be unfortunate. In that case, I suppose it will be impossible to avoid the creation of an intermediate edge list --- but you could create it by means of two `int*` (i.e., a C list for start points and a C list for end points). That might be a more efficient intermediate data structure than a python list of pairs.



---

archive/issue_comments_346085.json:
```json
{
    "body": "Independent of the matrix version, I think it would be overall nice to have\n\n* the version I provided for a list of unlabelled edges (I think I should add a flag whether its directed or undirected), and\n\n* a version for labelled edges, that are first turned into an equivalent version for undirected edges and then passed to the first",
    "created_at": "2018-03-07T20:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346085",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Independent of the matrix version, I think it would be overall nice to have

* the version I provided for a list of unlabelled edges (I think I should add a flag whether its directed or undirected), and

* a version for labelled edges, that are first turned into an equivalent version for undirected edges and then passed to the first



---

archive/issue_comments_346086.json:
```json
{
    "body": ">  In that case, I suppose it will be impossible to avoid the creation of an intermediate edge list\n\nwhat I could actually do is to overestimate the number of vertices in the first place (given the matrix is size nxm, there are at most nm/2 edges, so even if all had the different labellings, I could go with log(mn/2)+max(n,m) many vertices, which is for m,n <= 20 still very small) and then possibly have chosen a few ununsed vertices floating around...",
    "created_at": "2018-03-07T20:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346086",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

>  In that case, I suppose it will be impossible to avoid the creation of an intermediate edge list

what I could actually do is to overestimate the number of vertices in the first place (given the matrix is size nxm, there are at most nm/2 edges, so even if all had the different labellings, I could go with log(mn/2)+max(n,m) many vertices, which is for m,n <= 20 still very small) and then possibly have chosen a few ununsed vertices floating around...



---

archive/issue_comments_346087.json:
```json
{
    "body": "Could I ask you to provide a pxd file for the headers so that I can cimport the bliss Digraph? I don't know how to do that correctly (I guess the pxd file looks like `matrix0.pxd` though...).",
    "created_at": "2018-03-07T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346087",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Could I ask you to provide a pxd file for the headers so that I can cimport the bliss Digraph? I don't know how to do that correctly (I guess the pxd file looks like `matrix0.pxd` though...).



---

archive/issue_comments_346088.json:
```json
{
    "body": "> That might be a more efficient intermediate data structure than a python list of pairs.\n\nI first have to do some cython timings (which I haven't done before) to see where the bottleneck is -- maybe the list construction is not actually that time consuming, I don't know",
    "created_at": "2018-03-07T20:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346088",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

> That might be a more efficient intermediate data structure than a python list of pairs.

I first have to do some cython timings (which I haven't done before) to see where the bottleneck is -- maybe the list construction is not actually that time consuming, I don't know



---

archive/issue_comments_346089.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-08T11:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346089",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-08T11:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346091.json:
```json
{
    "body": "I pushed a first hopefully working version of the edge labelled bliss graph as described in Dima's reference.\n\nExample:\n\n```\nsage: from sage.graphs.bliss import canonical_form_from_edge_list\nsage: Vout = [0,0,1,2,2,3,3]; Vin = [0,1,2,0,3,0,2]; labels = [2,0,2,1,1,1,0]\nsage: canonical_form_from_edge_list(4,Vout,Vin,3,labels, directed=False, certificate=True)\n\nsage: Vout = [0,0,1,1]; Vin = [1,2,0,2]; labels = [0,1,0,1]\nsage: canonical_form_from_edge_list(3,Vout,Vin,2,labels, directed=False, certificate=True)\n```\n\n\n* Could you please have a look and see if it works as desired\n* Please in particular check that the vertex coloring scheme is correct\n\nOnce that is settled, I would also need help in improving (speeding) the code as much as easily possible, I already use three lists `Vout`, `Vin`, and `labels` which probably could be turned into c arrays instead...\n----\nNew commits:",
    "created_at": "2018-03-08T11:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346091",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I pushed a first hopefully working version of the edge labelled bliss graph as described in Dima's reference.

Example:

```
sage: from sage.graphs.bliss import canonical_form_from_edge_list
sage: Vout = [0,0,1,2,2,3,3]; Vin = [0,1,2,0,3,0,2]; labels = [2,0,2,1,1,1,0]
sage: canonical_form_from_edge_list(4,Vout,Vin,3,labels, directed=False, certificate=True)

sage: Vout = [0,0,1,1]; Vin = [1,2,0,2]; labels = [0,1,0,1]
sage: canonical_form_from_edge_list(3,Vout,Vin,2,labels, directed=False, certificate=True)
```


* Could you please have a look and see if it works as desired
* Please in particular check that the vertex coloring scheme is correct

Once that is settled, I would also need help in improving (speeding) the code as much as easily possible, I already use three lists `Vout`, `Vin`, and `labels` which probably could be turned into c arrays instead...
----
New commits:



---

archive/issue_comments_346092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-08T14:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-08T15:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346093",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-09T14:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-09T15:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346096.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-10T16:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346097.json:
```json
{
    "body": "`@`Dima: the new implementation follows your suggestion to use `Vnr*log(Lnr)` many vertices, I would appreciate feedback!",
    "created_at": "2018-03-10T16:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346097",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

`@`Dima: the new implementation follows your suggestion to use `Vnr*log(Lnr)` many vertices, I would appreciate feedback!



---

archive/issue_comments_346098.json:
```json
{
    "body": "(The current version does not provide the automorphism groups, but the methods `automorphism_group` and `automorphism_group_old` are captured to profile the bliss graph constructor from a labelled graph with Vnr*log(Lnr) vertices.\n\nHere is some output:\n\n```\nsage: from sage.graphs.bliss import canonical_form, automorphism_group, automorphism_group_old\nsage: G = graphs.RandomGNM(1000,1000000)\n```\n\nand then\n\n```\nsage: %crun automorphism_group(G)\nPROFILE: interrupts/evictions/bytes = 45/0/20936\nUsing local file /home/stumpc5/Programs/sage/local/bin/python2.\nUsing local file /home/stumpc5/.sage/temp/associahedron/19913/tmp_zjuPxl.perf.\nTotal: 45 samples\n       0   0.0%   0.0%       45 100.0% PyEval_EvalCode\n       0   0.0%   0.0%       45 100.0% PyEval_EvalCodeEx\n       0   0.0%   0.0%       45 100.0% PyEval_EvalFrameEx\n       0   0.0%   0.0%       45 100.0% PyObject_Call\n       0   0.0%   0.0%       45 100.0% PyRun_FileExFlags\n       0   0.0%   0.0%       45 100.0% PyRun_SimpleFileExFlags\n       0   0.0%   0.0%       45 100.0% PyRun_StringFlags\n       0   0.0%   0.0%       45 100.0% Py_Main\n       0   0.0%   0.0%       45 100.0% __libc_start_main\n       2   4.4%   4.4%       45 100.0% __pyx_f_4sage_6graphs_5bliss_automorphism_group (inline)\n       0   0.0%   4.4%       45 100.0% __pyx_pf_4sage_6graphs_5bliss_6automorphism_group (inline)\n       0   0.0%   4.4%       45 100.0% __pyx_pw_4sage_6graphs_5bliss_7automorphism_group\n       0   0.0%   4.4%       45 100.0% call_function (inline)\n       0   0.0%   4.4%       45 100.0% exec_statement (inline)\n       0   0.0%   4.4%       45 100.0% ext_do_call (inline)\n       0   0.0%   4.4%       45 100.0% fast_function (inline)\n       0   0.0%   4.4%       45 100.0% function_call\n       0   0.0%   4.4%       45 100.0% run_mod (inline)\n       0   0.0%   4.4%       44  97.8% _start\n       0   0.0%   4.4%       35  77.8% __Pyx_PyObject_Call\n       0   0.0%   4.4%       35  77.8% do_call (inline)\n       0   0.0%   4.4%       35  77.8% instancemethod_call\n       0   0.0%   4.4%       18  40.0% listsort\n       0   0.0%   4.4%       17  37.8% __Pyx_Coroutine_SendEx.isra.12\n       2   4.4%   8.9%       17  37.8% __pyx_gb_4sage_6graphs_4base_12sparse_graph_18SparseGraphBackend_14generator\n       0   0.0%   8.9%       17  37.8% list_init\n       0   0.0%   8.9%       17  37.8% listextend\n       0   0.0%   8.9%       17  37.8% type_call\n       4   8.9%  17.8%       16  35.6% PyObject_RichCompareBool\n       7  15.6%  33.3%       15  33.3% PyObject_RichCompare\n       1   2.2%  35.6%       10  22.2% merge_at\n       0   0.0%  35.6%       10  22.2% merge_collapse (inline)\n       1   2.2%  37.8%        7  15.6% PyTuple_New\n       0   0.0%  37.8%        7  15.6% binarysort (inline)\n       1   2.2%  40.0%        7  15.6% tuplerichcompare\n       0   0.0%  40.0%        6  13.3% _PyObject_GC_Malloc\n       0   0.0%  40.0%        6  13.3% _PyObject_GC_NewVar\n       0   0.0%  40.0%        5  11.1% collect\n       0   0.0%  40.0%        5  11.1% collect_generations (inline)\n       1   2.2%  42.2%        5  11.1% list_dealloc\n       0   0.0%  42.2%        5  11.1% merge_lo (inline)\n       1   2.2%  44.4%        4   8.9% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_arcs_unsafe\n       1   2.2%  46.7%        4   8.9% merge_hi (inline)\n       1   2.2%  48.9%        4   8.9% tupledealloc\n       0   0.0%  48.9%        3   6.7% gallop_right\n       0   0.0%  48.9%        3   6.7% move_unreachable (inline)\n       2   4.4%  53.3%        2   4.4% PyInt_FromLong\n       0   0.0%  53.3%        2   4.4% PyObject_Free\n       2   4.4%  57.8%        2   4.4% PyObject_GetItem\n       2   4.4%  62.2%        2   4.4% _PyTuple_MaybeUntrack\n       0   0.0%  62.2%        2   4.4% __Pyx_PyInt_From_int (inline)\n       2   4.4%  66.7%        2   4.4% __munmap\n       0   0.0%  66.7%        2   4.4% __pyx_f_4sage_6graphs_4base_7c_graph_13CGraphBackend_vertex_label\n       2   4.4%  71.1%        2   4.4% convert_3way_to_object (inline)\n       0   0.0%  71.1%        2   4.4% gallop_left\n       2   4.4%  75.6%        2   4.4% int_compare\n       1   2.2%  77.8%        2   4.4% subtract_refs (inline)\n       1   2.2%  80.0%        1   2.2% PyDict_Contains\n       0   0.0%  80.0%        1   2.2% PyList_Append\n       1   2.2%  82.2%        1   2.2% PyObject_Malloc\n       0   0.0%  82.2%        1   2.2% _IO_str_seekoff\n       0   0.0%  82.2%        1   2.2% __Pyx_PyDict_ContainsTF (inline)\n       1   2.2%  84.4%        1   2.2% __nss_passwd_lookup\n       1   2.2%  86.7%        1   2.2% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_neighbors_BTNode_unsafe\n       1   2.2%  88.9%        1   2.2% adjust_tp_compare\n       0   0.0%  88.9%        1   2.2% app1 (inline)\n       0   0.0%  88.9%        1   2.2% count_run (inline)\n       0   0.0%  88.9%        1   2.2% dict_subscript\n       0   0.0%  88.9%        1   2.2% do_richcmp (inline)\n       1   2.2%  91.1%        1   2.2% int_dealloc\n       1   2.2%  93.3%        1   2.2% list_item (inline)\n       0   0.0%  93.3%        1   2.2% list_resize (inline)\n       0   0.0%  93.3%        1   2.2% list_subscript\n       0   0.0%  93.3%        1   2.2% list_traverse\n       1   2.2%  95.6%        1   2.2% lookdict\n       0   0.0%  95.6%        1   2.2% realloc\n       0   0.0%  95.6%        1   2.2% try_3way_to_rich_compare (inline)\n       1   2.2%  97.8%        1   2.2% tupletraverse\n       1   2.2% 100.0%        1   2.2% visit_reachable\n```\n\nand\n\n```\nsage: %crun automorphism_group_old(G)\nPROFILE: interrupts/evictions/bytes = 38/0/16080\nUsing local file /home/stumpc5/Programs/sage/local/bin/python2.\nUsing local file /home/stumpc5/.sage/temp/associahedron/20717/tmp_0m26KQ.perf.\nTotal: 38 samples\n       0   0.0%   0.0%       36  94.7% PyEval_EvalCode\n       0   0.0%   0.0%       36  94.7% PyEval_EvalCodeEx\n       0   0.0%   0.0%       36  94.7% PyEval_EvalFrameEx\n       0   0.0%   0.0%       36  94.7% PyObject_Call\n       0   0.0%   0.0%       36  94.7% PyRun_FileExFlags\n       0   0.0%   0.0%       36  94.7% PyRun_SimpleFileExFlags\n       0   0.0%   0.0%       36  94.7% PyRun_StringFlags\n       0   0.0%   0.0%       36  94.7% Py_Main\n       2   5.3%   5.3%       36  94.7% __pyx_f_4sage_6graphs_5bliss_bliss_graph\n       0   0.0%   5.3%       36  94.7% __pyx_pf_4sage_6graphs_5bliss_10automorphism_group_old (inline)\n       0   0.0%   5.3%       36  94.7% __pyx_pw_4sage_6graphs_5bliss_11automorphism_group_old\n       0   0.0%   5.3%       36  94.7% call_function (inline)\n       0   0.0%   5.3%       36  94.7% exec_statement (inline)\n       0   0.0%   5.3%       36  94.7% ext_do_call (inline)\n       0   0.0%   5.3%       36  94.7% fast_function (inline)\n       0   0.0%   5.3%       36  94.7% function_call\n       0   0.0%   5.3%       36  94.7% run_mod (inline)\n       0   0.0%   5.3%       35  92.1% __libc_start_main\n       0   0.0%   5.3%       34  89.5% _start\n       0   0.0%   5.3%       30  78.9% __Pyx_PyObject_Call\n       0   0.0%   5.3%       30  78.9% do_call (inline)\n       0   0.0%   5.3%       30  78.9% instancemethod_call\n       0   0.0%   5.3%       17  44.7% listsort\n       8  21.1%  26.3%       15  39.5% PyObject_RichCompare\n       2   5.3%  31.6%       15  39.5% PyObject_RichCompareBool\n       0   0.0%  31.6%       13  34.2% list_init\n       1   2.6%  34.2%       13  34.2% listextend\n       0   0.0%  34.2%       13  34.2% type_call\n       0   0.0%  34.2%       12  31.6% __Pyx_Coroutine_SendEx.isra.12\n       2   5.3%  39.5%       12  31.6% __pyx_gb_4sage_6graphs_4base_12sparse_graph_18SparseGraphBackend_14generator\n       0   0.0%  39.5%       11  28.9% merge_at\n       0   0.0%  39.5%       11  28.9% merge_collapse (inline)\n       1   2.6%  42.1%        7  18.4% tuplerichcompare\n       0   0.0%  42.1%        6  15.8% binarysort (inline)\n       2   5.3%  47.4%        6  15.8% merge_lo (inline)\n       0   0.0%  47.4%        5  13.2% PyTuple_New\n       0   0.0%  47.4%        5  13.2% _PyObject_GC_Malloc\n       0   0.0%  47.4%        5  13.2% _PyObject_GC_NewVar\n       0   0.0%  47.4%        4  10.5% merge_hi (inline)\n       3   7.9%  55.3%        3   7.9% PyObject_Malloc\n       0   0.0%  55.3%        3   7.9% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_arcs_unsafe\n       2   5.3%  60.5%        2   5.3% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_neighbors_BTNode_unsafe\n       2   5.3%  65.8%        2   5.3% _init@3cc28\n       1   2.6%  68.4%        2   5.3% adjust_tp_compare\n       0   0.0%  68.4%        2   5.3% collect\n       0   0.0%  68.4%        2   5.3% collect_generations (inline)\n       2   5.3%  73.7%        2   5.3% convert_3way_to_object (inline)\n       0   0.0%  73.7%        2   5.3% dict_subscript\n       0   0.0%  73.7%        2   5.3% do_richcmp (inline)\n       0   0.0%  73.7%        2   5.3% gallop_right\n       0   0.0%  73.7%        2   5.3% list_dealloc\n       1   2.6%  76.3%        2   5.3% lookdict\n       0   0.0%  76.3%        2   5.3% try_3way_to_rich_compare (inline)\n       1   2.6%  78.9%        2   5.3% tupledealloc\n       0   0.0%  78.9%        1   2.6% 0x0000558037bbae7f\n       1   2.6%  81.6%        1   2.6% PyErr_Occurred\n       0   0.0%  81.6%        1   2.6% PyList_Append\n       1   2.6%  84.2%        1   2.6% PyObject_GC_UnTrack\n       1   2.6%  86.8%        1   2.6% _PyTuple_MaybeUntrack\n       0   0.0%  86.8%        1   2.6% __Pyx_PyList_Append (inline)\n       1   2.6%  89.5%        1   2.6% __nss_passwd_lookup\n       1   2.6%  92.1%        1   2.6% __pyx_f_4sage_6graphs_4base_7c_graph_13CGraphBackend_vertex_label\n       0   0.0%  92.1%        1   2.6% _init@708\n       0   0.0%  92.1%        1   2.6% app1 (inline)\n       0   0.0%  92.1%        1   2.6% gallop_left\n       1   2.6%  94.7%        1   2.6% int_compare\n       0   0.0%  94.7%        1   2.6% list_resize (inline)\n       0   0.0%  94.7%        1   2.6% move_unreachable (inline)\n       1   2.6%  97.4%        1   2.6% realloc\n       0   0.0%  97.4%        1   2.6% subtract_refs (inline)\n       0   0.0%  97.4%        1   2.6% tupletraverse\n       1   2.6% 100.0%        1   2.6% visit_decref\n```\n\n\nHow do I interpret these outputs? In particular whether it tells me some bottlenecks I should look at?\n\nThanks!",
    "created_at": "2018-03-10T16:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346098",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

(The current version does not provide the automorphism groups, but the methods `automorphism_group` and `automorphism_group_old` are captured to profile the bliss graph constructor from a labelled graph with Vnr*log(Lnr) vertices.

Here is some output:

```
sage: from sage.graphs.bliss import canonical_form, automorphism_group, automorphism_group_old
sage: G = graphs.RandomGNM(1000,1000000)
```

and then

```
sage: %crun automorphism_group(G)
PROFILE: interrupts/evictions/bytes = 45/0/20936
Using local file /home/stumpc5/Programs/sage/local/bin/python2.
Using local file /home/stumpc5/.sage/temp/associahedron/19913/tmp_zjuPxl.perf.
Total: 45 samples
       0   0.0%   0.0%       45 100.0% PyEval_EvalCode
       0   0.0%   0.0%       45 100.0% PyEval_EvalCodeEx
       0   0.0%   0.0%       45 100.0% PyEval_EvalFrameEx
       0   0.0%   0.0%       45 100.0% PyObject_Call
       0   0.0%   0.0%       45 100.0% PyRun_FileExFlags
       0   0.0%   0.0%       45 100.0% PyRun_SimpleFileExFlags
       0   0.0%   0.0%       45 100.0% PyRun_StringFlags
       0   0.0%   0.0%       45 100.0% Py_Main
       0   0.0%   0.0%       45 100.0% __libc_start_main
       2   4.4%   4.4%       45 100.0% __pyx_f_4sage_6graphs_5bliss_automorphism_group (inline)
       0   0.0%   4.4%       45 100.0% __pyx_pf_4sage_6graphs_5bliss_6automorphism_group (inline)
       0   0.0%   4.4%       45 100.0% __pyx_pw_4sage_6graphs_5bliss_7automorphism_group
       0   0.0%   4.4%       45 100.0% call_function (inline)
       0   0.0%   4.4%       45 100.0% exec_statement (inline)
       0   0.0%   4.4%       45 100.0% ext_do_call (inline)
       0   0.0%   4.4%       45 100.0% fast_function (inline)
       0   0.0%   4.4%       45 100.0% function_call
       0   0.0%   4.4%       45 100.0% run_mod (inline)
       0   0.0%   4.4%       44  97.8% _start
       0   0.0%   4.4%       35  77.8% __Pyx_PyObject_Call
       0   0.0%   4.4%       35  77.8% do_call (inline)
       0   0.0%   4.4%       35  77.8% instancemethod_call
       0   0.0%   4.4%       18  40.0% listsort
       0   0.0%   4.4%       17  37.8% __Pyx_Coroutine_SendEx.isra.12
       2   4.4%   8.9%       17  37.8% __pyx_gb_4sage_6graphs_4base_12sparse_graph_18SparseGraphBackend_14generator
       0   0.0%   8.9%       17  37.8% list_init
       0   0.0%   8.9%       17  37.8% listextend
       0   0.0%   8.9%       17  37.8% type_call
       4   8.9%  17.8%       16  35.6% PyObject_RichCompareBool
       7  15.6%  33.3%       15  33.3% PyObject_RichCompare
       1   2.2%  35.6%       10  22.2% merge_at
       0   0.0%  35.6%       10  22.2% merge_collapse (inline)
       1   2.2%  37.8%        7  15.6% PyTuple_New
       0   0.0%  37.8%        7  15.6% binarysort (inline)
       1   2.2%  40.0%        7  15.6% tuplerichcompare
       0   0.0%  40.0%        6  13.3% _PyObject_GC_Malloc
       0   0.0%  40.0%        6  13.3% _PyObject_GC_NewVar
       0   0.0%  40.0%        5  11.1% collect
       0   0.0%  40.0%        5  11.1% collect_generations (inline)
       1   2.2%  42.2%        5  11.1% list_dealloc
       0   0.0%  42.2%        5  11.1% merge_lo (inline)
       1   2.2%  44.4%        4   8.9% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_arcs_unsafe
       1   2.2%  46.7%        4   8.9% merge_hi (inline)
       1   2.2%  48.9%        4   8.9% tupledealloc
       0   0.0%  48.9%        3   6.7% gallop_right
       0   0.0%  48.9%        3   6.7% move_unreachable (inline)
       2   4.4%  53.3%        2   4.4% PyInt_FromLong
       0   0.0%  53.3%        2   4.4% PyObject_Free
       2   4.4%  57.8%        2   4.4% PyObject_GetItem
       2   4.4%  62.2%        2   4.4% _PyTuple_MaybeUntrack
       0   0.0%  62.2%        2   4.4% __Pyx_PyInt_From_int (inline)
       2   4.4%  66.7%        2   4.4% __munmap
       0   0.0%  66.7%        2   4.4% __pyx_f_4sage_6graphs_4base_7c_graph_13CGraphBackend_vertex_label
       2   4.4%  71.1%        2   4.4% convert_3way_to_object (inline)
       0   0.0%  71.1%        2   4.4% gallop_left
       2   4.4%  75.6%        2   4.4% int_compare
       1   2.2%  77.8%        2   4.4% subtract_refs (inline)
       1   2.2%  80.0%        1   2.2% PyDict_Contains
       0   0.0%  80.0%        1   2.2% PyList_Append
       1   2.2%  82.2%        1   2.2% PyObject_Malloc
       0   0.0%  82.2%        1   2.2% _IO_str_seekoff
       0   0.0%  82.2%        1   2.2% __Pyx_PyDict_ContainsTF (inline)
       1   2.2%  84.4%        1   2.2% __nss_passwd_lookup
       1   2.2%  86.7%        1   2.2% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_neighbors_BTNode_unsafe
       1   2.2%  88.9%        1   2.2% adjust_tp_compare
       0   0.0%  88.9%        1   2.2% app1 (inline)
       0   0.0%  88.9%        1   2.2% count_run (inline)
       0   0.0%  88.9%        1   2.2% dict_subscript
       0   0.0%  88.9%        1   2.2% do_richcmp (inline)
       1   2.2%  91.1%        1   2.2% int_dealloc
       1   2.2%  93.3%        1   2.2% list_item (inline)
       0   0.0%  93.3%        1   2.2% list_resize (inline)
       0   0.0%  93.3%        1   2.2% list_subscript
       0   0.0%  93.3%        1   2.2% list_traverse
       1   2.2%  95.6%        1   2.2% lookdict
       0   0.0%  95.6%        1   2.2% realloc
       0   0.0%  95.6%        1   2.2% try_3way_to_rich_compare (inline)
       1   2.2%  97.8%        1   2.2% tupletraverse
       1   2.2% 100.0%        1   2.2% visit_reachable
```

and

```
sage: %crun automorphism_group_old(G)
PROFILE: interrupts/evictions/bytes = 38/0/16080
Using local file /home/stumpc5/Programs/sage/local/bin/python2.
Using local file /home/stumpc5/.sage/temp/associahedron/20717/tmp_0m26KQ.perf.
Total: 38 samples
       0   0.0%   0.0%       36  94.7% PyEval_EvalCode
       0   0.0%   0.0%       36  94.7% PyEval_EvalCodeEx
       0   0.0%   0.0%       36  94.7% PyEval_EvalFrameEx
       0   0.0%   0.0%       36  94.7% PyObject_Call
       0   0.0%   0.0%       36  94.7% PyRun_FileExFlags
       0   0.0%   0.0%       36  94.7% PyRun_SimpleFileExFlags
       0   0.0%   0.0%       36  94.7% PyRun_StringFlags
       0   0.0%   0.0%       36  94.7% Py_Main
       2   5.3%   5.3%       36  94.7% __pyx_f_4sage_6graphs_5bliss_bliss_graph
       0   0.0%   5.3%       36  94.7% __pyx_pf_4sage_6graphs_5bliss_10automorphism_group_old (inline)
       0   0.0%   5.3%       36  94.7% __pyx_pw_4sage_6graphs_5bliss_11automorphism_group_old
       0   0.0%   5.3%       36  94.7% call_function (inline)
       0   0.0%   5.3%       36  94.7% exec_statement (inline)
       0   0.0%   5.3%       36  94.7% ext_do_call (inline)
       0   0.0%   5.3%       36  94.7% fast_function (inline)
       0   0.0%   5.3%       36  94.7% function_call
       0   0.0%   5.3%       36  94.7% run_mod (inline)
       0   0.0%   5.3%       35  92.1% __libc_start_main
       0   0.0%   5.3%       34  89.5% _start
       0   0.0%   5.3%       30  78.9% __Pyx_PyObject_Call
       0   0.0%   5.3%       30  78.9% do_call (inline)
       0   0.0%   5.3%       30  78.9% instancemethod_call
       0   0.0%   5.3%       17  44.7% listsort
       8  21.1%  26.3%       15  39.5% PyObject_RichCompare
       2   5.3%  31.6%       15  39.5% PyObject_RichCompareBool
       0   0.0%  31.6%       13  34.2% list_init
       1   2.6%  34.2%       13  34.2% listextend
       0   0.0%  34.2%       13  34.2% type_call
       0   0.0%  34.2%       12  31.6% __Pyx_Coroutine_SendEx.isra.12
       2   5.3%  39.5%       12  31.6% __pyx_gb_4sage_6graphs_4base_12sparse_graph_18SparseGraphBackend_14generator
       0   0.0%  39.5%       11  28.9% merge_at
       0   0.0%  39.5%       11  28.9% merge_collapse (inline)
       1   2.6%  42.1%        7  18.4% tuplerichcompare
       0   0.0%  42.1%        6  15.8% binarysort (inline)
       2   5.3%  47.4%        6  15.8% merge_lo (inline)
       0   0.0%  47.4%        5  13.2% PyTuple_New
       0   0.0%  47.4%        5  13.2% _PyObject_GC_Malloc
       0   0.0%  47.4%        5  13.2% _PyObject_GC_NewVar
       0   0.0%  47.4%        4  10.5% merge_hi (inline)
       3   7.9%  55.3%        3   7.9% PyObject_Malloc
       0   0.0%  55.3%        3   7.9% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_arcs_unsafe
       2   5.3%  60.5%        2   5.3% __pyx_f_4sage_6graphs_4base_12sparse_graph_11SparseGraph_out_neighbors_BTNode_unsafe
       2   5.3%  65.8%        2   5.3% _init@3cc28
       1   2.6%  68.4%        2   5.3% adjust_tp_compare
       0   0.0%  68.4%        2   5.3% collect
       0   0.0%  68.4%        2   5.3% collect_generations (inline)
       2   5.3%  73.7%        2   5.3% convert_3way_to_object (inline)
       0   0.0%  73.7%        2   5.3% dict_subscript
       0   0.0%  73.7%        2   5.3% do_richcmp (inline)
       0   0.0%  73.7%        2   5.3% gallop_right
       0   0.0%  73.7%        2   5.3% list_dealloc
       1   2.6%  76.3%        2   5.3% lookdict
       0   0.0%  76.3%        2   5.3% try_3way_to_rich_compare (inline)
       1   2.6%  78.9%        2   5.3% tupledealloc
       0   0.0%  78.9%        1   2.6% 0x0000558037bbae7f
       1   2.6%  81.6%        1   2.6% PyErr_Occurred
       0   0.0%  81.6%        1   2.6% PyList_Append
       1   2.6%  84.2%        1   2.6% PyObject_GC_UnTrack
       1   2.6%  86.8%        1   2.6% _PyTuple_MaybeUntrack
       0   0.0%  86.8%        1   2.6% __Pyx_PyList_Append (inline)
       1   2.6%  89.5%        1   2.6% __nss_passwd_lookup
       1   2.6%  92.1%        1   2.6% __pyx_f_4sage_6graphs_4base_7c_graph_13CGraphBackend_vertex_label
       0   0.0%  92.1%        1   2.6% _init@708
       0   0.0%  92.1%        1   2.6% app1 (inline)
       0   0.0%  92.1%        1   2.6% gallop_left
       1   2.6%  94.7%        1   2.6% int_compare
       0   0.0%  94.7%        1   2.6% list_resize (inline)
       0   0.0%  94.7%        1   2.6% move_unreachable (inline)
       1   2.6%  97.4%        1   2.6% realloc
       0   0.0%  97.4%        1   2.6% subtract_refs (inline)
       0   0.0%  97.4%        1   2.6% tupletraverse
       1   2.6% 100.0%        1   2.6% visit_decref
```


How do I interpret these outputs? In particular whether it tells me some bottlenecks I should look at?

Thanks!



---

archive/issue_comments_346099.json:
```json
{
    "body": "Question: is there a way, or rather what to do, to get a line-by-line profiling of the file? A typical question I'd ask is whether is would improve if I replace the python lists `Vout`, `Vin`, and `labels` by c lists as Simon suggested.",
    "created_at": "2018-03-10T16:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346099",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Question: is there a way, or rather what to do, to get a line-by-line profiling of the file? A typical question I'd ask is whether is would improve if I replace the python lists `Vout`, `Vin`, and `labels` by c lists as Simon suggested.



---

archive/issue_comments_346100.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-11T09:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-14T09:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346102.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-14T10:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346102",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_346103.json:
```json
{
    "body": "Changing keywords from \"\" to \"bliss, graph automorphism, canonical form\".",
    "created_at": "2018-03-14T10:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346103",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing keywords from "" to "bliss, graph automorphism, canonical form".



---

archive/issue_comments_346104.json:
```json
{
    "body": "Since I haven't gotten any feedback here, I now set it to `needs review` in the hope the ticket gets some attention...",
    "created_at": "2018-03-14T10:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346104",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Since I haven't gotten any feedback here, I now set it to `needs review` in the hope the ticket gets some attention...



---

archive/issue_comments_346105.json:
```json
{
    "body": "What are these `automorphism_group_old` and other `*_old` functions?\nIt's still prototyping, right?\n\nRegarding profiling, can't you use some kind of graphical tool, such as `google-pprof`, on `/home/stumpc5/.sage/temp/associahedron/20717/tmp_0m26KQ.perf` ?\n(unless I totally mix this up)",
    "created_at": "2018-03-14T11:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346105",
    "user": "https://github.com/dimpase"
}
```

What are these `automorphism_group_old` and other `*_old` functions?
It's still prototyping, right?

Regarding profiling, can't you use some kind of graphical tool, such as `google-pprof`, on `/home/stumpc5/.sage/temp/associahedron/20717/tmp_0m26KQ.perf` ?
(unless I totally mix this up)



---

archive/issue_comments_346106.json:
```json
{
    "body": "Anyway, I think the bottlenecks correspond to larger values in the 2nd column, e.g. PyObject_RichCompare is 15% on the 1st listing and 21% on the 2nd listing.\n\nAre you testing on the complete graph on purpose? (cause the number of edges is the square of the number of vertices, it's K_1000).\n\nIt would be interesting to look at how this performs on other graphs.\n\nYou can fing more details on the profiler (e.g. how to do per line profiles)\nat the gperftools installation on your system. (I don't know why they don't have it online). (on linux, `man pprof` would give you more pointers).",
    "created_at": "2018-03-14T12:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346106",
    "user": "https://github.com/dimpase"
}
```

Anyway, I think the bottlenecks correspond to larger values in the 2nd column, e.g. PyObject_RichCompare is 15% on the 1st listing and 21% on the 2nd listing.

Are you testing on the complete graph on purpose? (cause the number of edges is the square of the number of vertices, it's K_1000).

It would be interesting to look at how this performs on other graphs.

You can fing more details on the profiler (e.g. how to do per line profiles)
at the gperftools installation on your system. (I don't know why they don't have it online). (on linux, `man pprof` would give you more pointers).



---

archive/issue_comments_346107.json:
```json
{
    "body": "Thanks, Dima, for checking!\n\n> What are these automorphism_group_old and other *_old functions?\n\nI just left these for you (or another referee to compare timings, if desired. Beside, they are good to be removed.\n\n> PyObject_RichCompare is 15% on the 1st listing and 21% on the 2nd listing.\n\nI got rid of these by not using `.vertices` and `.edges` but instead the iterators. The `PyObject_RichCompare` were there because the vertices and edges were sorted by default.\n\n>  Are you testing on the complete graph on purpose?\n\nI was testing on many random graphs, and just ended up with the complete graph by pure chance.\n\nI think the next optimization would be to use the internal graph structure on 0 ... Vnr-1 directly without first getting the edges as python objects and then turning them back into a bliss graph. But I don't plan to do this.\n\nTo summarize the situation: the new functionality for edge labelled graphs is up and working, and as quick as the old implementation on unlabelled graphs. So this is ready for review. I still see possible improvements using the cgraph structure, but leave this open for now.",
    "created_at": "2018-03-14T14:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346107",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Thanks, Dima, for checking!

> What are these automorphism_group_old and other *_old functions?

I just left these for you (or another referee to compare timings, if desired. Beside, they are good to be removed.

> PyObject_RichCompare is 15% on the 1st listing and 21% on the 2nd listing.

I got rid of these by not using `.vertices` and `.edges` but instead the iterators. The `PyObject_RichCompare` were there because the vertices and edges were sorted by default.

>  Are you testing on the complete graph on purpose?

I was testing on many random graphs, and just ended up with the complete graph by pure chance.

I think the next optimization would be to use the internal graph structure on 0 ... Vnr-1 directly without first getting the edges as python objects and then turning them back into a bliss graph. But I don't plan to do this.

To summarize the situation: the new functionality for edge labelled graphs is up and working, and as quick as the old implementation on unlabelled graphs. So this is ready for review. I still see possible improvements using the cgraph structure, but leave this open for now.



---

archive/issue_comments_346108.json:
```json
{
    "body": "Dear Dima and Simon -- any chance I could get a review for this ticket so that I can move forward to the tickets based on this one? Thanks!",
    "created_at": "2018-03-21T07:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346108",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Dear Dima and Simon -- any chance I could get a review for this ticket so that I can move forward to the tickets based on this one? Thanks!



---

archive/issue_comments_346109.json:
```json
{
    "body": "Could you add more docs to `automorphism_group(G, partition=None)`, in particular,\ncan `G` itself have coloured vertices and/or (directed) edges?\n\nI'd also add more tests with bigger graphs, just to make sure...",
    "created_at": "2018-03-22T09:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346109",
    "user": "https://github.com/dimpase"
}
```

Could you add more docs to `automorphism_group(G, partition=None)`, in particular,
can `G` itself have coloured vertices and/or (directed) edges?

I'd also add more tests with bigger graphs, just to make sure...



---

archive/issue_comments_346110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-22T11:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346111.json:
```json
{
    "body": "done",
    "created_at": "2018-03-22T11:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346111",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

done



---

archive/issue_comments_346112.json:
```json
{
    "body": "Thanks. How about more docs for this function? E.g. it's unclear how the partition parameter interacts with vertex colours of the graph.\nDocs need not be very formal, it's OK to move some tests into Examples section, and \nuse them to illustrate the way the function works, e.g.\n\n\n```\nEXAMPLES:\n\n    blah works ::\n\n        sage:....\n    ...\n\n    you can also foo ::\n\n        sage:....\n```\n",
    "created_at": "2018-03-22T12:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346112",
    "user": "https://github.com/dimpase"
}
```

Thanks. How about more docs for this function? E.g. it's unclear how the partition parameter interacts with vertex colours of the graph.
Docs need not be very formal, it's OK to move some tests into Examples section, and 
use them to illustrate the way the function works, e.g.


```
EXAMPLES:

    blah works ::

        sage:....
    ...

    you can also foo ::

        sage:....
```




---

archive/issue_comments_346113.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-22T13:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346114.json:
```json
{
    "body": "...like this",
    "created_at": "2018-03-22T13:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346114",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

...like this



---

archive/issue_comments_346115.json:
```json
{
    "body": "`EXAMPLES::` -> `EXAMPLES:`\n\n(only put `::` after EXAMPLES/TESTS is there is no subitems ending (by right) with `::`)\n\nAnd, once again, can we please have an explanation/test/example of what happens is the vertex partitions of the graph (from its vertex labelling) and the partition supplied as the parameter are not compatible (I expect it would work with a common refinement, but one has to make sure, that's a corner where bugs would nest...).",
    "created_at": "2018-03-22T14:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346115",
    "user": "https://github.com/dimpase"
}
```

`EXAMPLES::` -> `EXAMPLES:`

(only put `::` after EXAMPLES/TESTS is there is no subitems ending (by right) with `::`)

And, once again, can we please have an explanation/test/example of what happens is the vertex partitions of the graph (from its vertex labelling) and the partition supplied as the parameter are not compatible (I expect it would work with a common refinement, but one has to make sure, that's a corner where bugs would nest...).



---

archive/issue_comments_346116.json:
```json
{
    "body": "It currently looks like\n\n```\n    EXAMPLES::\n\n        sage: from sage.graphs.bliss import automorphism_group                  # optional - bliss\n\n    Computing the automorphism group of a graph or digraph::\n\n        sage: G = graphs.CompleteMultipartiteGraph([1,1,1,2])                   # optional - bliss\n```\n\nDon't I need to put the `::` because of the following indented line?\n\nI do not understand your other issue (and thought it was a typo and you meant edge coloring): What do you mean by vertex labelling?\n\n* The vertex labelling must be injective if I see it correctly:\n\n```\nsage: G = Graph(graphs.CompleteMultipartiteGraph([1,1,1,3]),sparse=True)\nsage: G.relabel({0:\"A\",1:\"A\",2:\"B\"})\n...\nNotImplementedError: Non injective relabeling\n```\n\n* Any vertex labelling is completely ignored when it comes to the automorphism group, EXCEPT that the permutation group is built such that it acts on the vertex labels (see the last two doctests).\n\nAm I missunderstanding what you mean?",
    "created_at": "2018-03-22T14:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346116",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

It currently looks like

```
    EXAMPLES::

        sage: from sage.graphs.bliss import automorphism_group                  # optional - bliss

    Computing the automorphism group of a graph or digraph::

        sage: G = graphs.CompleteMultipartiteGraph([1,1,1,2])                   # optional - bliss
```

Don't I need to put the `::` because of the following indented line?

I do not understand your other issue (and thought it was a typo and you meant edge coloring): What do you mean by vertex labelling?

* The vertex labelling must be injective if I see it correctly:

```
sage: G = Graph(graphs.CompleteMultipartiteGraph([1,1,1,3]),sparse=True)
sage: G.relabel({0:"A",1:"A",2:"B"})
...
NotImplementedError: Non injective relabeling
```

* Any vertex labelling is completely ignored when it comes to the automorphism group, EXCEPT that the permutation group is built such that it acts on the vertex labels (see the last two doctests).

Am I missunderstanding what you mean?



---

archive/issue_comments_346117.json:
```json
{
    "body": "Regarding `::`, you are correct, I didn't think straight. \n\nThen, I meant loops:\n\n```\nsage: gg=graphs.CompleteGraph(3)\nsage: gg.allow_loops(True)\nsage: gg.add_edge((1,1))\nsage: gg.automorphism_group()\nPermutation Group with generators [(0,2)]\n```\n\nthis is without bliss installed. That is, at least the default automorphisms code respects loops, but there seems to be neither docs nor tests for this.\n\nAlso, your branch should modify the default docs on automorphisms, for it currently says\n\n```\n   * \"edge_labels\" - default False, otherwise allows only\n     permutations respecting edge labels. Note that this option is not\n     supported if \"algorithm=\"bliss\"\"\n\n```\n\n---and so the last sentence should go.",
    "created_at": "2018-03-22T15:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346117",
    "user": "https://github.com/dimpase"
}
```

Regarding `::`, you are correct, I didn't think straight. 

Then, I meant loops:

```
sage: gg=graphs.CompleteGraph(3)
sage: gg.allow_loops(True)
sage: gg.add_edge((1,1))
sage: gg.automorphism_group()
Permutation Group with generators [(0,2)]
```

this is without bliss installed. That is, at least the default automorphisms code respects loops, but there seems to be neither docs nor tests for this.

Also, your branch should modify the default docs on automorphisms, for it currently says

```
   * "edge_labels" - default False, otherwise allows only
     permutations respecting edge labels. Note that this option is not
     supported if "algorithm="bliss""

```

---and so the last sentence should go.



---

archive/issue_comments_346118.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-22T17:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346119.json:
```json
{
    "body": "done...",
    "created_at": "2018-03-22T17:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346119",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

done...



---

archive/issue_comments_346120.json:
```json
{
    "body": "Should I remove the old functionalities ?\n\n```\ncdef Graph *bliss_graph(G, partition, vert2int, int2vert)\ncdef Digraph *bliss_digraph(G, partition, vert2int, int2vert)\ndef canonical_form_old(G, partition=None, return_graph=False, certificate=False)\ndef automorphism_group_old(G, partition=None)\n```\n\nAt least the two methods `bliss_graph` and `bliss_digraph` might be used in some private code, so I vote for keeping all of them for a while...",
    "created_at": "2018-03-23T06:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346120",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Should I remove the old functionalities ?

```
cdef Graph *bliss_graph(G, partition, vert2int, int2vert)
cdef Digraph *bliss_digraph(G, partition, vert2int, int2vert)
def canonical_form_old(G, partition=None, return_graph=False, certificate=False)
def automorphism_group_old(G, partition=None)
```

At least the two methods `bliss_graph` and `bliss_digraph` might be used in some private code, so I vote for keeping all of them for a while...



---

archive/issue_comments_346121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T06:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T10:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T10:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T11:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346125.json:
```json
{
    "body": "I'd remove these `*_old()` functions you(?) introduced.",
    "created_at": "2018-03-23T11:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346125",
    "user": "https://github.com/dimpase"
}
```

I'd remove these `*_old()` functions you(?) introduced.



---

archive/issue_comments_346126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-23T13:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346128.json:
```json
{
    "body": "the patchbot seems to have no complaints anymore concerning the bliss code...",
    "created_at": "2018-03-24T05:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346128",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

the patchbot seems to have no complaints anymore concerning the bliss code...



---

archive/issue_comments_346129.json:
```json
{
    "body": "there are more mentions of Bliss in `graphs/generic_graph.py` that should be modified, e.g. \n\n```\n  if edge_labels and algorithm == 'bliss':\n      raise NotImplementedError(\"algorithm 'bliss' can not be used when edge_labels=True\")\n```\n\nlooks like something that needs to be looked into.",
    "created_at": "2018-03-25T23:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346129",
    "user": "https://github.com/dimpase"
}
```

there are more mentions of Bliss in `graphs/generic_graph.py` that should be modified, e.g. 

```
  if edge_labels and algorithm == 'bliss':
      raise NotImplementedError("algorithm 'bliss' can not be used when edge_labels=True")
```

looks like something that needs to be looked into.



---

archive/issue_comments_346130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-26T08:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346131.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-26T09:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346132.json:
```json
{
    "body": "updated `generic_graph.py` and fixed a bug in `bliss.pyx`.\n\n**Question:** Is it really the right decision to have `edge_labels=False` per default in `automorphism_group` and `canonical_form` ? --I don't really care, but given an edge labelled graph, my first impression is that this edge labelling should be considered per default. The new underlying bliss methods have `True` per default which is overwritten from the graph methods then.",
    "created_at": "2018-03-26T09:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346132",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

updated `generic_graph.py` and fixed a bug in `bliss.pyx`.

**Question:** Is it really the right decision to have `edge_labels=False` per default in `automorphism_group` and `canonical_form` ? --I don't really care, but given an edge labelled graph, my first impression is that this edge labelling should be considered per default. The new underlying bliss methods have `True` per default which is overwritten from the graph methods then.



---

archive/issue_comments_346133.json:
```json
{
    "body": "Replying to [comment:55 stumpc5]:\n> updated `generic_graph.py` and fixed a bug in `bliss.pyx`.\n> \n> **Question:** Is it really the right decision to have `edge_labels=False` per default in `automorphism_group` and `canonical_form` ? --I don't really care, but given an edge labelled graph, my first impression is that this edge labelling should be considered per default. The new underlying bliss methods have `True` per default which is overwritten from the graph methods then.\n\nThe default should be `edge_labels=True` if you ask me. But such a change should be\nproperly deprecated.",
    "created_at": "2018-03-26T11:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346133",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:55 stumpc5]:
> updated `generic_graph.py` and fixed a bug in `bliss.pyx`.
> 
> **Question:** Is it really the right decision to have `edge_labels=False` per default in `automorphism_group` and `canonical_form` ? --I don't really care, but given an edge labelled graph, my first impression is that this edge labelling should be considered per default. The new underlying bliss methods have `True` per default which is overwritten from the graph methods then.

The default should be `edge_labels=True` if you ask me. But such a change should be
properly deprecated.



---

archive/issue_comments_346134.json:
```json
{
    "body": "Observe that I came across this strange default seeing that the doctest\n\n```\nsage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)\n(True, [(3, [0, 1, 2])])\n```\n\nfailed since now bliss was used with the wrong optional argument. I think I just leave it for now since changing the default might cause more problems than it actually solves... Btw: graphs are also plotted without edge labels per default. Also there, I believe that it should be plotted with edge labels, and the edge label `None` is generally not shown ever.",
    "created_at": "2018-03-26T11:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346134",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Observe that I came across this strange default seeing that the doctest

```
sage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)
(True, [(3, [0, 1, 2])])
```

failed since now bliss was used with the wrong optional argument. I think I just leave it for now since changing the default might cause more problems than it actually solves... Btw: graphs are also plotted without edge labels per default. Also there, I believe that it should be plotted with edge labels, and the edge label `None` is generally not shown ever.



---

archive/issue_comments_346135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-27T11:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346136.json:
```json
{
    "body": "I hope everything is there now and the bot doesn't seem to show any bliss related doctest failures...",
    "created_at": "2018-03-27T15:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346136",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I hope everything is there now and the bot doesn't seem to show any bliss related doctest failures...



---

archive/issue_comments_346137.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-29T11:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346137",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_346138.json:
```json
{
    "body": "looks good to me, thanks!",
    "created_at": "2018-03-29T11:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346138",
    "user": "https://github.com/dimpase"
}
```

looks good to me, thanks!



---

archive/issue_comments_346139.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2018-05-08T17:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346139",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_346140.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-08T17:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346140",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_events_062566.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-05-09T12:20:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24687#event-62566"
}
```



---

archive/issue_comments_346141.json:
```json
{
    "body": "needs to be rebased over #20382 (commit 8e4c504f07e), as it got into the 1st alpha\nalready (see https://github.com/vbraun/sage/tree/develop)\nThis is very small change to be done.",
    "created_at": "2018-05-09T12:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346141",
    "user": "https://github.com/dimpase"
}
```

needs to be rebased over #20382 (commit 8e4c504f07e), as it got into the 1st alpha
already (see https://github.com/vbraun/sage/tree/develop)
This is very small change to be done.



---

archive/issue_comments_346142.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-09T13:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346142",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_346143.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-05-09T13:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346143",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_346144.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-15T11:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346144",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_346145.json:
```json
{
    "body": "it looks like a trivial rebase, so...",
    "created_at": "2018-05-15T11:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346145",
    "user": "https://github.com/dimpase"
}
```

it looks like a trivial rebase, so...



---

archive/issue_comments_346146.json:
```json
{
    "body": "Thanks for getting back to it, the recheck somehow got lost on my todo list...",
    "created_at": "2018-05-15T11:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346146",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Thanks for getting back to it, the recheck somehow got lost on my todo list...



---

archive/issue_comments_346147.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-18T17:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24687#issuecomment-346147",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_062567.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-18T17:04:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24687",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24687#event-62567"
}
```
