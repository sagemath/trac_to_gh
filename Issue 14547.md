# Issue 14547: Regression in representation of CombinatorialFreeModules (introduced #13735)

archive/issues_014547.json:
```json
{
    "body": "Assignee: agd\n\nCC:  vittucek novoselt jdemeyer\n\nThe patch applied by ticket #13735 changes the behavior of the repr_lincomb method in misc/misc.py so that it now evaluates the comparison \"c < 0\" for every coefficient. However, since this method is called by CombinatorialFreeModule, which can create lienar combinations whose coefficients are elements of arbitrary rings, this comparison is not always mathematically meaningful.\n\nFor example, in the code I submitted in #14347, I build a CombinatorialFreeModule whose basis is a specified finite group G and whose coefficients are elements of a CycleIndexSeriesRing. In 5.9, this was perfectly functional; in 5.10-rc2, with the new patch, any call to _repr_ on an element of this CombinatorialFreeModule results in a NotImplementedError because of this comparison.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14751\n\n",
    "created_at": "2013-06-16T16:53:43Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Regression in representation of CombinatorialFreeModules (introduced #13735)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14547",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```
Assignee: agd

CC:  vittucek novoselt jdemeyer

The patch applied by ticket #13735 changes the behavior of the repr_lincomb method in misc/misc.py so that it now evaluates the comparison "c < 0" for every coefficient. However, since this method is called by CombinatorialFreeModule, which can create lienar combinations whose coefficients are elements of arbitrary rings, this comparison is not always mathematically meaningful.

For example, in the code I submitted in #14347, I build a CombinatorialFreeModule whose basis is a specified finite group G and whose coefficients are elements of a CycleIndexSeriesRing. In 5.9, this was perfectly functional; in 5.10-rc2, with the new patch, any call to _repr_ on an element of this CombinatorialFreeModule results in a NotImplementedError because of this comparison.

Issue created by migration from https://trac.sagemath.org/ticket/14751





---

archive/issue_comments_184415.json:
```json
{
    "body": "Here is an attempt at a patch. It seems to work with the patch at #14347.",
    "created_at": "2013-06-17T19:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14547#issuecomment-184415",
    "user": "https://github.com/jhpalmieri"
}
```

Here is an attempt at a patch. It seems to work with the patch at #14347.



---

archive/issue_comments_184416.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-17T19:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14547#issuecomment-184416",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_184417.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-17T20:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14547#issuecomment-184417",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184418.json:
```json
{
    "body": "Attachment [trac_14751.patch](tarball://root/attachments/some-uuid/ticket14751/trac_14751.patch) by agd created at 2013-06-17 20:35:20\n\nThis seems to do the trick, and the code looks good to me! All doctests pass on my system, including those added in #14347. Thanks for taking the time to look at this.",
    "created_at": "2013-06-17T20:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14547#issuecomment-184418",
    "user": "https://trac.sagemath.org/admin/accounts/users/agd"
}
```

Attachment [trac_14751.patch](tarball://root/attachments/some-uuid/ticket14751/trac_14751.patch) by agd created at 2013-06-17 20:35:20

This seems to do the trick, and the code looks good to me! All doctests pass on my system, including those added in #14347. Thanks for taking the time to look at this.



---

archive/issue_comments_184419.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-19T12:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14547#issuecomment-184419",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_014304.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2013-06-19T12:27:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14547",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14547#event-14304"
}
```
