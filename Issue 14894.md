# Issue 14894: QSym: the Hazewinkel Lambda basis

Issue created by migration from https://trac.sagemath.org/ticket/15131

Original creator: darij

Original creation time: 2013-08-30 18:28:59

CC:  tscrim sage-combinat nthiery hivert zabrocki saliola

Keywords: sage-combinat, qsym, quasi-symmetric functions, hazewinkel, witt vectors

This ticket implements the Hazewinkel Lambda basis of QSym -- one of the multiplicative (in an appropriate sense) bases of QSym defined over any ring.

It also fixes a misbehavior of the shuffle product class, in which the following would throw an error:

```
sage: from sage.combinat.words.shuffle_product import ShuffleProduct_w1w2
sage: ShuffleProduct_w1w2(Compositions(2)([1,1]), Composition([1])).list()                 
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: [1, 1, 1] not in Compositions of 2
```

The fix might not be optimal but at least it does the trick.


---

Comment by darij created at 2013-08-30 19:23:28

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-09-07 04:38:37

Hey Darij,

This needs a (very) trivial rebase over #13505. Here are also some things from glancing over the patch file:

- Could you move the documentation for the basis from the `__init__()` into the class doc and just put a `TestSuite(HWL).run()` test for the `__init__()`?
- `__init_extra__()` needs doctests.
- The `EXAMPLES::` block on line 2280 has an extra colon.
- In `shuffle_product.py` line 141, same thing with the `TESTS::` block.

I'll do the full review once these are taken care of. Thanks for the continued work on (Q)Sym.

Thanks,

Travis


---

Comment by darij created at 2013-09-07 15:06:41

Thanks for your sharp eyes; but what rebase does it need? I have trac_13505_quasi_schur.5.patchâ€‹ applied before it in my queue... As for the rest: done!


---

Comment by darij created at 2013-09-07 15:07:00

updated


---

Attachment

Oops, for some reason I failed to doctest my changes properly (I think I doctested ncsf instead of qsym from muscle memory):

```
sage -t devel/sage-main/sage/combinat/ncsf_qsym/qsym.py
**********************************************************************
File "devel/sage-main/sage/combinat/ncsf_qsym/qsym.py", line 2222, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.HazewinkelLambda.__init__
Failed example:
    TestSuite(HWL).run()
Expected:
    True
Got:
    <BLANKLINE>
**********************************************************************
```

I need to get some sleep, so could you just fix this in the obvious way? Thanks a lot!


---

Comment by darij created at 2013-09-08 05:27:15

Oops, for some reason I failed to doctest my changes properly (I think I doctested ncsf instead of qsym from muscle memory):

```
sage -t devel/sage-main/sage/combinat/ncsf_qsym/qsym.py
**********************************************************************
File "devel/sage-main/sage/combinat/ncsf_qsym/qsym.py", line 2222, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.HazewinkelLambda.__init__
Failed example:
    TestSuite(HWL).run()
Expected:
    True
Got:
    <BLANKLINE>
**********************************************************************
```

I need to get some sleep, so could you just fix this in the obvious way? Thanks a lot!


---

Attachment


---

Comment by tscrim created at 2013-09-08 16:38:28

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2013-09-08 16:38:28

Hey Darij,

Here's a review patch which fixes the doctest output and adds doctests. There's currently one failing doctest with no output for `_to_Monomial_on_basis()` since it currently does the same as `_from_Monomial_on_basis()`. I also get some 2-fuzz with the review patch I posted for #15094.

Thanks for your continued work on this,

Travis


---

Comment by darij created at 2013-09-08 16:58:08

Oh, I gave it the wrong parent. Sorry. Here is a qfolded version with the bug fixed, hopefully avoiding the fuzz as well.


---

Comment by darij created at 2013-09-08 16:59:02

Changing status from needs_work to positive_review.


---

Comment by darij created at 2013-09-08 16:59:23

Changing status from positive_review to needs_review.


---

Comment by darij created at 2013-09-08 17:01:49

patchbot:

apply trac_15131-hazewinkel-basis-qfolded-dg.patch


---

Comment by tscrim created at 2013-09-09 15:07:04

Looks good to me. Thanks Darij.


---

Comment by tscrim created at 2013-09-09 15:07:04

Changing status from needs_review to positive_review.


---

Comment by darij created at 2013-09-09 16:03:16

Thanks for your time!


---

Comment by zabrocki created at 2013-09-09 16:28:22

Sorry to put you to work again.  If you look at line 685 in qsym.py there is a missing colon.  This patch removes it.  It shows up in my documentation in 

```
F = QuasiSymmetricFunctions(QQ).F()
F.from_polynomial?
```



---

Comment by zabrocki created at 2013-09-09 16:28:22

Changing status from positive_review to needs_work.


---

Comment by darij created at 2013-09-09 16:32:25

fixed


---

Attachment

fixed


---

Comment by darij created at 2013-09-09 16:33:44

Thanks for catching this one. I hope this fixes it? (The two files I just uploaded are the same. Fat finger.)

NOTE TO SELF: file in the local queue obsolete

patchbot:

apply trac_15131-hazewinkel-basis-qfolded-dg.patch


---

Comment by darij created at 2013-09-09 16:34:17

Changing status from needs_work to needs_review.


---

Comment by zabrocki created at 2013-09-09 16:41:49

It was an obscure typo to locate because it doesn't (currently: see #9107) appear in the html documentation.  I noticed that it was there from reading the patch on the trac server.


---

Comment by zabrocki created at 2013-09-09 16:41:49

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-12 09:46:02

Resolution: fixed
