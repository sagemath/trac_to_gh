# Issue 25681: Queer supercrystals

Issue created by migration from Trac.

Original creator: aschilling

Original creation time: 2018-07-24 18:22:38

CC:  wpoh tscrim bsalisbury1 bump aschilling

Keywords: crystals, super Lie algebras

We implement the standard queer supercrystals as a crystal of Letters and the tensor product rule.


---

Comment by aschilling created at 2018-07-25 01:38:06

Changing keywords from "crystals, super Lie algebras" to "crystals, super Lie algebras, sagedays@icerm".


---

Comment by aschilling created at 2018-07-26 22:10:09

Last 10 new commits:


---

Comment by git created at 2018-07-26 22:33:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-26 22:57:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-26 23:10:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 00:03:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 02:46:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 02:47:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 02:58:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 02:59:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 03:21:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2018-07-27 03:22:16

Changing status from new to needs_review.


---

Comment by git created at 2018-07-27 13:39:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-07-27 13:44:29

I get the same error as the patchbot (trivial ordering fix likely due to the new way you are constructing the digraph) in `crystals/kac_modules.py`.

To make this Python3 compatible:

```diff
-w = range(2,j+1) + range(1,j)
+w = list(range(2,j+1)) + list(range(1,j))
```



```diff
-Return enlarged index set.
+Return the enlarged index set.
```

plus the same comment as above. Actually, you want to make this an ``@`cached_method` and return a tuple with how frequently it gets called.

There is no need to call `self[k].weight()` twice:

```diff
-w += self[k].weight()[0] + self[k].weight()[1]
+wt = self[k].weight()
+w = wt[0] + wt[1]
```


This seems inefficient: `n = max(self.index_set())`. Isn't this something you can get from the Cartan type (rather than recomputing it)?

IMO, you are better off writing a little helper function (in Cython) to get `w0` instead of this:

```
           from sage.combinat.permutation import Permutations
           w = Permutations(n+1).long_element().reduced_word()
```


You should define `w` to be a list in `e` and `f`. Similarly define `k` to be an `int` (although you may not want to use `k` to loop over elements in `w`).

```
cdef list w
cdef int k
```

Also, in the `while` loops, you don't want to repeatedly call `len(self)` (as that does not change). You can get a little bit of extra time by pulling that out as a variable.


---

Comment by git created at 2018-07-27 14:18:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 14:51:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-27 15:04:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2018-07-27 15:05:34

New commits:


---

Comment by git created at 2018-07-27 20:50:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-07-27 20:52:18

I made some additional changes; in particular, cached results should not return mutable objects such as lists. I also did some additional (micro)optimizations with the Cython code. If my changes are good, then you can set a positive review.


---

Comment by dimpase created at 2018-07-27 21:08:57

the choice for the branch name was so remarkable that I decided to check whether it's some rogue pr0n ;-)

Sorry for noise...


---

Comment by aschilling created at 2018-07-27 23:54:19

Thank you for the review, Travis!


---

Comment by aschilling created at 2018-07-27 23:54:33

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-07 20:40:30

Resolution: fixed
