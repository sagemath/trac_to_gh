# Issue 31781: Error in sage.numerical.gauss_legendre nodes

Issue created by migration from https://trac.sagemath.org/ticket/32018

Original creator: @DisneyHogg

Original creation time: 2021-06-21 10:32:45

CC:  nbruin




---

Comment by @DisneyHogg created at 2021-06-21 10:45:23

Changing component from PLEASE CHANGE to numerical.


---

Comment by @DisneyHogg created at 2021-06-21 10:45:23

Set assignee to @DisneyHogg.


---

Comment by @DisneyHogg created at 2021-06-21 10:45:23

Changing priority from major to trivial.


---

Comment by @DisneyHogg created at 2021-06-21 10:45:23

Changing type from PLEASE CHANGE to defect.


---

Comment by @DisneyHogg created at 2021-06-21 10:55:00

New commits:


---

Comment by @DisneyHogg created at 2021-06-21 10:55:00

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-06-21 13:14:29

thanks, please also add a simple doctest displaying what is fixed


---

Comment by git created at 2021-06-22 07:24:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-07-16 08:46:42

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2021-07-16 08:46:42

red branch => needs work


---

Comment by git created at 2021-07-16 11:17:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DisneyHogg created at 2021-07-16 11:17:43

Merge conflict resolved.


---

Comment by @DisneyHogg created at 2021-07-16 11:17:43

Changing status from needs_work to needs_review.


---

Comment by nbruin created at 2021-07-16 16:42:03

Changing status from needs_review to positive_review.


---

Comment by nbruin created at 2021-07-16 16:42:03

This looks fine. One comment: in the test, we're testing float output *exactly*. It's generally more robust to not depend on *all* digits being correct when testing float output. In this case, however, we're testing output where we know it's been computed with specified precision and with specified formulas (although that could change ...), so if mpfr properly implements IEEE then all the bits of the output (and therefore the representing string) should be determined too. So for this example I think it's OK. In general, however, you should probably use ellipses or a `#tol` marker to allow for some variation in the last digits. See [Developer guidance](https://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests).


---

Comment by vbraun created at 2021-07-25 13:25:13

Resolution: fixed
