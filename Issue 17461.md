# Issue 17461: introduce optional timeout argument for attach()

Issue created by migration from Trac.

Original creator: jakobkroeker

Original creation time: 2015-01-30 15:53:08

Keywords: attach detaching timeout

When working with an attached file it seems that saving it (at least with 'gedit' on our file system) sometimes causes a temporarily disappearance on that file. I have no idea, if this is caused by the
used file system (mounted NFS) , but sometimes I get from sage ( at least for 6.4.beta6)

 ### detaching file /home/......./stuff.sage because it does not exist (deleted?) ###

this can be emulated by 

```
sage: attach ("~/stuff.sage")

console>  mv ~/stuff.sage /tmp/; touch /tmp/stuff.sage;  sleep 1; mv /tmp/stuff.sage ~/stuff.sage
```


Proposal 
1. add a little timeout to the detaching process (maybe already the case)
2. control the timeout by an optional timeout argument for the attach() routine








---

Comment by slabbe created at 2015-02-16 18:57:17

I also have the same problem on my machine since one year. The problem seems to come from the function `sage.misc.attached_files.modified_file_iterator`. There is some sleep involved:


```python
    time.sleep(0.1)  # sleep 100ms to give the editor time to finish saving
```


but it comes after checking the existence of the attached files which detach "deleted" files.

When should the sleep be better done?


---

Comment by slabbe created at 2016-08-25 16:01:38

Using vim, the following tip fixed that problem for me:

https://groups.google.com/d/msg/sage-devel/KZ-eiUNS2jg/PtwQMN-FLwAJ

So it was a problem of the text editor rather than a bug in sage. Should we close this ticket?
