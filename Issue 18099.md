# Issue 18099: Give a default behavious to algebra_generators

Issue created by migration from Trac.

Original creator: virmaux

Original creation time: 2015-04-29 13:37:36

CC:  nthiery tscrim

Keywords: algebras, categories

Give a default behaviour to the method `algebra_generators` for `algebras_with_basis`.


---

Comment by virmaux created at 2015-04-29 13:37:48

Changing type from PLEASE CHANGE to enhancement.


---

Comment by virmaux created at 2015-04-29 13:40:29

Namely we return the basis as a family of generators.

Without patch:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
[...]
TypeError: 'NotImplementedType' object is not callable
```


```
sage: R.<x> = ZZ[]
sage: P = PartitionAlgebra(1, x, R)
sage: P.algebra_generators()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
[..]
Error: 'NotImplementedType' object is not callable
```


With patch:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators()
Lazy family (Term map from Compositions of 4 to Descent algebra of 4 over Rational Field in the subset basis(i))_{i in Compositions of 4}
```


```
sage: R.<x> = ZZ[]
sage: P = PartitionAlgebra(1, x, R)
sage: P.algebra_generators()
Finite family {{{-1, 1}}: P[{{-1, 1}}], {{-1}, {1}}: P[{{-1}, {1}}]}
```


It does not override specific class methods:

```
sage: A4 = SymmetricGroup(4).algebra(QQ)
sage: A4 in AlgebrasWithBasis(QQ)
True
sage: A4.algebra_generators()
Family ((1,2), (1,2,3,4))
```

----
New commits:


---

Comment by tscrim created at 2015-04-29 14:44:53

Is this ready for review? Also without the patch, you're able to create the descent algebra, correct (i.e., your missing the call to `algebra_generators` in your example)?


---

Comment by virmaux created at 2015-04-29 18:09:00

Oops, indeed, it does work (see the exemples in the code).


---

Comment by virmaux created at 2015-04-29 18:09:00

Changing status from new to needs_review.


---

Comment by git created at 2015-04-30 11:56:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-30 11:58:28

Thanks!

Proofread and good to go! Aladin double checked my changes over my shoulder.


---

Comment by nthiery created at 2015-04-30 11:58:28

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-01 17:12:42


```
sage -t --long src/sage/categories/algebras.py
**********************************************************************
File "src/sage/categories/algebras.py", line 160, in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators
Failed example:
    S.algebra_generators()
Expected:
    Finite family {'y': B['y'], 'x': B['x'], 'b': 0, 'a': 0}
Got:
    Finite family {'y': B['y'], 'x': B['x']}
**********************************************************************
1 item had failures:
   1 of   4 in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators
    [24 tests, 1 failure, 0.32 s]
```



---

Comment by vbraun created at 2015-05-01 17:12:42

Changing status from positive_review to needs_work.


---

Comment by virmaux created at 2015-05-01 19:34:32

Umm is it a "bug" from Algebras.Quotients ? Here is the line to get the algebra generators of the quotient:

```
return self.ambient().algebra_generators().map(self.retract)
```

and we get generators that are `0`...

But this methods should have been called instead of the newly implemented one, am I missing something ?


---

Comment by nthiery created at 2015-05-02 17:08:19

`Algebras.WithBasis` and `Algebras.Quotients` are independent of each other, so when you inherit from both there is an ambiguity. My guess is that `Algebras.WithBasis` ends up being before `Algebras.Quotients` in the categories of `S`, so the "wrong" one is picked. So we need to manually resolve this ambiguity. I'll have a look.


---

Comment by nthiery created at 2015-05-02 17:34:55

For info: the tests pass here; so this might depend on the context, which indeed calls for resolving the conflict.

Volker: any idea if this fails on all machines or only from time to time? Or maybe when this patch is merged together with #16659?


---

Comment by vbraun created at 2015-05-02 17:57:35

I didn't have #16659 merged when I tested this ticket, and I don't spot any obviously-conflicting ticket before that. Maybe its easiest to wait for the next beta if you can't reproduce it.


---

Comment by nthiery created at 2015-05-04 12:19:25

Changing status from needs_work to positive_review.


---

Comment by nthiery created at 2015-05-04 12:19:25

Oops, I see what was the issue! There was a conflict when I concurrently pushed my branch to trac and commented on the ticket, and I accidently reset the branch to the previous one.
We were lucky that the old one did not work so that this got noticed!

This is fixed now. So back to positive review. Sorry for the mess Volker!
----
New commits:


---

Comment by vbraun created at 2015-05-05 00:32:25

Resolution: fixed
