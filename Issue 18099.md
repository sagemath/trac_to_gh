# Issue 18099: Give a default behavious to algebra_generators

archive/issues_018099.json:
```json
{
    "body": "CC:  @nthiery @tscrim\n\nKeywords: algebras, categories\n\nGive a default behaviour to the method `algebra_generators` for `algebras_with_basis`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18336\n\n",
    "created_at": "2015-04-29T13:37:36Z",
    "labels": [
        "algebra",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Give a default behavious to algebra_generators",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18099",
    "user": "@avirmaux"
}
```
CC:  @nthiery @tscrim

Keywords: algebras, categories

Give a default behaviour to the method `algebra_generators` for `algebras_with_basis`.

Issue created by migration from https://trac.sagemath.org/ticket/18336





---

archive/issue_comments_243908.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-04-29T13:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243908",
    "user": "@avirmaux"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_243909.json:
```json
{
    "body": "Namely we return the basis as a family of generators.\n\nWithout patch:\n\n```\nsage: D4 = DescentAlgebra(QQ, 4).B()\nsage: D4.algebra_generators()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n[...]\nTypeError: 'NotImplementedType' object is not callable\n```\n\n\n```\nsage: R.<x> = ZZ[]\nsage: P = PartitionAlgebra(1, x, R)\nsage: P.algebra_generators()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n[..]\nError: 'NotImplementedType' object is not callable\n```\n\n\nWith patch:\n\n```\nsage: D4 = DescentAlgebra(QQ, 4).B()\nsage: D4.algebra_generators()\nLazy family (Term map from Compositions of 4 to Descent algebra of 4 over Rational Field in the subset basis(i))_{i in Compositions of 4}\n```\n\n\n```\nsage: R.<x> = ZZ[]\nsage: P = PartitionAlgebra(1, x, R)\nsage: P.algebra_generators()\nFinite family {{{-1, 1}}: P[{{-1, 1}}], {{-1}, {1}}: P[{{-1}, {1}}]}\n```\n\n\nIt does not override specific class methods:\n\n```\nsage: A4 = SymmetricGroup(4).algebra(QQ)\nsage: A4 in AlgebrasWithBasis(QQ)\nTrue\nsage: A4.algebra_generators()\nFamily ((1,2), (1,2,3,4))\n```\n\n----\nNew commits:",
    "created_at": "2015-04-29T13:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243909",
    "user": "@avirmaux"
}
```

Namely we return the basis as a family of generators.

Without patch:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
[...]
TypeError: 'NotImplementedType' object is not callable
```


```
sage: R.<x> = ZZ[]
sage: P = PartitionAlgebra(1, x, R)
sage: P.algebra_generators()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
[..]
Error: 'NotImplementedType' object is not callable
```


With patch:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators()
Lazy family (Term map from Compositions of 4 to Descent algebra of 4 over Rational Field in the subset basis(i))_{i in Compositions of 4}
```


```
sage: R.<x> = ZZ[]
sage: P = PartitionAlgebra(1, x, R)
sage: P.algebra_generators()
Finite family {{{-1, 1}}: P[{{-1, 1}}], {{-1}, {1}}: P[{{-1}, {1}}]}
```


It does not override specific class methods:

```
sage: A4 = SymmetricGroup(4).algebra(QQ)
sage: A4 in AlgebrasWithBasis(QQ)
True
sage: A4.algebra_generators()
Family ((1,2), (1,2,3,4))
```

----
New commits:



---

archive/issue_comments_243910.json:
```json
{
    "body": "Is this ready for review? Also without the patch, you're able to create the descent algebra, correct (i.e., your missing the call to `algebra_generators` in your example)?",
    "created_at": "2015-04-29T14:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243910",
    "user": "@tscrim"
}
```

Is this ready for review? Also without the patch, you're able to create the descent algebra, correct (i.e., your missing the call to `algebra_generators` in your example)?



---

archive/issue_comments_243911.json:
```json
{
    "body": "Oops, indeed, it does work (see the exemples in the code).",
    "created_at": "2015-04-29T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243911",
    "user": "@avirmaux"
}
```

Oops, indeed, it does work (see the exemples in the code).



---

archive/issue_comments_243912.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-29T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243912",
    "user": "@avirmaux"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_243913.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-30T11:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243913",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243914.json:
```json
{
    "body": "Thanks!\n\nProofread and good to go! Aladin double checked my changes over my shoulder.",
    "created_at": "2015-04-30T11:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243914",
    "user": "@nthiery"
}
```

Thanks!

Proofread and good to go! Aladin double checked my changes over my shoulder.



---

archive/issue_comments_243915.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-30T11:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243915",
    "user": "@nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_243916.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/categories/algebras.py\n**********************************************************************\nFile \"src/sage/categories/algebras.py\", line 160, in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators\nFailed example:\n    S.algebra_generators()\nExpected:\n    Finite family {'y': B['y'], 'x': B['x'], 'b': 0, 'a': 0}\nGot:\n    Finite family {'y': B['y'], 'x': B['x']}\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators\n    [24 tests, 1 failure, 0.32 s]\n```\n",
    "created_at": "2015-05-01T17:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243916",
    "user": "@vbraun"
}
```


```
sage -t --long src/sage/categories/algebras.py
**********************************************************************
File "src/sage/categories/algebras.py", line 160, in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators
Failed example:
    S.algebra_generators()
Expected:
    Finite family {'y': B['y'], 'x': B['x'], 'b': 0, 'a': 0}
Got:
    Finite family {'y': B['y'], 'x': B['x']}
**********************************************************************
1 item had failures:
   1 of   4 in sage.categories.algebras.Algebras.Quotients.ParentMethods.algebra_generators
    [24 tests, 1 failure, 0.32 s]
```




---

archive/issue_comments_243917.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-01T17:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243917",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_243918.json:
```json
{
    "body": "Umm is it a \"bug\" from Algebras.Quotients ? Here is the line to get the algebra generators of the quotient:\n\n```\nreturn self.ambient().algebra_generators().map(self.retract)\n```\n\nand we get generators that are `0`...\n\nBut this methods should have been called instead of the newly implemented one, am I missing something ?",
    "created_at": "2015-05-01T19:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243918",
    "user": "@avirmaux"
}
```

Umm is it a "bug" from Algebras.Quotients ? Here is the line to get the algebra generators of the quotient:

```
return self.ambient().algebra_generators().map(self.retract)
```

and we get generators that are `0`...

But this methods should have been called instead of the newly implemented one, am I missing something ?



---

archive/issue_comments_243919.json:
```json
{
    "body": "`Algebras.WithBasis` and `Algebras.Quotients` are independent of each other, so when you inherit from both there is an ambiguity. My guess is that `Algebras.WithBasis` ends up being before `Algebras.Quotients` in the categories of `S`, so the \"wrong\" one is picked. So we need to manually resolve this ambiguity. I'll have a look.",
    "created_at": "2015-05-02T17:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243919",
    "user": "@nthiery"
}
```

`Algebras.WithBasis` and `Algebras.Quotients` are independent of each other, so when you inherit from both there is an ambiguity. My guess is that `Algebras.WithBasis` ends up being before `Algebras.Quotients` in the categories of `S`, so the "wrong" one is picked. So we need to manually resolve this ambiguity. I'll have a look.



---

archive/issue_comments_243920.json:
```json
{
    "body": "For info: the tests pass here; so this might depend on the context, which indeed calls for resolving the conflict.\n\nVolker: any idea if this fails on all machines or only from time to time? Or maybe when this patch is merged together with #16659?",
    "created_at": "2015-05-02T17:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243920",
    "user": "@nthiery"
}
```

For info: the tests pass here; so this might depend on the context, which indeed calls for resolving the conflict.

Volker: any idea if this fails on all machines or only from time to time? Or maybe when this patch is merged together with #16659?



---

archive/issue_comments_243921.json:
```json
{
    "body": "I didn't have #16659 merged when I tested this ticket, and I don't spot any obviously-conflicting ticket before that. Maybe its easiest to wait for the next beta if you can't reproduce it.",
    "created_at": "2015-05-02T17:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243921",
    "user": "@vbraun"
}
```

I didn't have #16659 merged when I tested this ticket, and I don't spot any obviously-conflicting ticket before that. Maybe its easiest to wait for the next beta if you can't reproduce it.



---

archive/issue_comments_243922.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-05-04T12:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243922",
    "user": "@nthiery"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_243923.json:
```json
{
    "body": "Oops, I see what was the issue! There was a conflict when I concurrently pushed my branch to trac and commented on the ticket, and I accidently reset the branch to the previous one.\nWe were lucky that the old one did not work so that this got noticed!\n\nThis is fixed now. So back to positive review. Sorry for the mess Volker!\n----\nNew commits:",
    "created_at": "2015-05-04T12:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243923",
    "user": "@nthiery"
}
```

Oops, I see what was the issue! There was a conflict when I concurrently pushed my branch to trac and commented on the ticket, and I accidently reset the branch to the previous one.
We were lucky that the old one did not work so that this got noticed!

This is fixed now. So back to positive review. Sorry for the mess Volker!
----
New commits:



---

archive/issue_comments_243924.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-05T00:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18099#issuecomment-243924",
    "user": "@vbraun"
}
```

Resolution: fixed
