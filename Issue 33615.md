# Issue 33615: bootstrap: Remove use of the SAGE_ROOT/sage script

Issue created by migration from https://trac.sagemath.org/ticket/33852

Original creator: mkoeppe

Original creation time: 2022-05-14 21:05:12

CC:  jhpalmieri @tobiasdiez mjo dimpase fbissey

We change the `bootstrap` scripts so that they invoke `build/bin/sage-package` directly instead of going through the `SAGE_ROOT/sage` script.

This is faster and also more robust because it separates build phases better by eliminating the (unnecessary) use of `configure`-generated files such as `src/bin/sage-src-env-config`.


---

Comment by mkoeppe created at 2022-05-14 21:13:56

Last 10 new commits:


---

Comment by git created at 2022-05-14 21:23:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-14 21:37:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-05-14 21:39:54

Changing status from new to needs_review.


---

Comment by git created at 2022-05-15 00:46:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-15 02:39:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-15 03:06:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-15 03:23:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-05-15 03:26:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-15 03:32:06

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-05-15 04:11:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-15 04:15:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by fbissey created at 2022-05-26 20:11:28

I found it a bit hard to figure out what came from #33740 and what is this ticket :(

Once I get past that issue, I agree with the changes. It is much cleaner and simpler. May not go far enough from a sage-on-gentoo point of view (I will still patch but we had that discussion `sage --docbuild` vs `python -m sage_docbuild` somewhere else and that step is not ready yet). Just one remark, all the targets are phony in `src/doc/Makefile` by necessity but we could have had `en/reference/repl/options.txt` as a real target instead of a phony one, not that it matter much in that sea of stuff that rebuild every time you call make.


---

Comment by mkoeppe created at 2022-05-26 20:13:24

Replying to [comment:17 fbissey]:
> we could have had `en/reference/repl/options.txt` as a real target instead of a phony one

Yes but what would be its dependencies?


---

Comment by fbissey created at 2022-05-26 20:22:12

Replying to [comment:18 mkoeppe]:
> Replying to [comment:17 fbissey]:
> > we could have had `en/reference/repl/options.txt` as a real target instead of a phony one
> 
> Yes but what would be its dependencies?

I am not sure I follow. It doesn't need to have dependencies or have I forgotten something fundamental about makefiles.


---

Comment by mkoeppe created at 2022-05-26 20:28:19

In that case it would never be updated, which can't be right


---

Comment by fbissey created at 2022-05-26 20:58:12

Replying to [comment:20 mkoeppe]:
> In that case it would never be updated, which can't be right

Thank you for reminding me of some essentials :) I'd like to brush it off as it being too early in the morning to make a proper comment but I think that's just part of a pattern where I am too deep on the packager side, and thinking of workflow in which ultimately, makefile such as this one are "single use", and when something doesn't work you just restart from the top because you need the flow to be right. I am not spending enough time on the pure dev side, that's what


---

Comment by jhpalmieri created at 2022-05-27 18:42:01

I think this looks okay, too. Fran√ßois, do you agree with a positive review?


---

Comment by fbissey created at 2022-05-27 20:13:00

Yes, let's get it in the next beta.


---

Comment by jhpalmieri created at 2022-05-28 15:07:58

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-05-28 17:24:35

Thanks!


---

Comment by vbraun created at 2022-06-06 21:24:19

Resolution: fixed
