# Issue 18832: Expose matroid sum and matroid union to end users

archive/issues_018832.json:
```json
{
    "body": "CC:  @chaoxu yomcat rudi\n\nIn #19027 matroid union, sum, partition are implemented, but most are not made discoverable by end users. I propose the following two ways of doing that:\n\n* add import statements to sage/matroids/advanced.py\n* create a new \"submenu\" matroids.constructions (similar to matroids.named_matroids) for these and future other constructions. So we could do\n\n```\nsage: M = matroids.constructions.Union([M1, M2])\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19069\n\n",
    "created_at": "2015-08-21T20:18:58Z",
    "labels": [
        "component: matroid theory",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Expose matroid sum and matroid union to end users",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18832",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```
CC:  @chaoxu yomcat rudi

In #19027 matroid union, sum, partition are implemented, but most are not made discoverable by end users. I propose the following two ways of doing that:

* add import statements to sage/matroids/advanced.py
* create a new "submenu" matroids.constructions (similar to matroids.named_matroids) for these and future other constructions. So we could do

```
sage: M = matroids.constructions.Union([M1, M2])
```


Issue created by migration from https://trac.sagemath.org/ticket/19069





---

archive/issue_comments_257295.json:
```json
{
    "body": "Let me suggest also the following standard syntax:\n\n\n```\nsage: M = M1.union(M2)\n```\n\n\nTo do this, just create a `union` method for matroids. The benefits is that, after creating a matroid `M1`, the user can see all available features by typing `M1.<TAB>`.",
    "created_at": "2015-08-22T11:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257295",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Let me suggest also the following standard syntax:


```
sage: M = M1.union(M2)
```


To do this, just create a `union` method for matroids. The benefits is that, after creating a matroid `M1`, the user can see all available features by typing `M1.<TAB>`.



---

archive/issue_comments_257296.json:
```json
{
    "body": "I agree with tmonteil that a `union` method for the Matroid class would be nice, that can take either a matroid or list of matroids as input. I would also definitely do the first of the two suggestions here (and document it inside the `union` method docstring). The second way can wait.\n\nI marked the other ticket asking for this as duplicate: #20357 .",
    "created_at": "2017-03-16T02:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257296",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

I agree with tmonteil that a `union` method for the Matroid class would be nice, that can take either a matroid or list of matroids as input. I would also definitely do the first of the two suggestions here (and document it inside the `union` method docstring). The second way can wait.

I marked the other ticket asking for this as duplicate: #20357 .



---

archive/issue_comments_257297.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-31T01:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257297",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257298.json:
```json
{
    "body": "I added a union method and it seems to work well enough. I wasn't able to get it to work with cython-- it kept giving me an error \"Expected an identifier\" when I defined the union method. I also unearthed some issues with the union method, but I can talk with Stefan about that later. For now, it's exposed.\n----\nNew commits:",
    "created_at": "2017-05-31T01:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257298",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

I added a union method and it seems to work well enough. I wasn't able to get it to work with cython-- it kept giving me an error "Expected an identifier" when I defined the union method. I also unearthed some issues with the union method, but I can talk with Stefan about that later. For now, it's exposed.
----
New commits:



---

archive/issue_comments_257299.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-10T01:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257300.json:
```json
{
    "body": "`_union()` is able to cythonize and everything compiles if `union()` is commented out, but with `union()` I get the following error and it won't compile.\n\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n        \"\"\"\n        if isinstance(matroids, Matroid):\n            matroids = [matroids]\n        # place this matroid at the beginning of the list\n        matroids.insert(0,self)\n        return _union(iter(matroids))\n                    ^\n------------------------------------------------------------\n\nsage/matroids/matroid.pyx:7772:21: undeclared name not builtin: _union\n```\n\n\nMore trouble with \"union\" being a reserved keyword, perhaps?",
    "created_at": "2017-06-10T01:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257300",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

`_union()` is able to cythonize and everything compiles if `union()` is commented out, but with `union()` I get the following error and it won't compile.


```
Error compiling Cython file:
------------------------------------------------------------
...
        """
        if isinstance(matroids, Matroid):
            matroids = [matroids]
        # place this matroid at the beginning of the list
        matroids.insert(0,self)
        return _union(iter(matroids))
                    ^
------------------------------------------------------------

sage/matroids/matroid.pyx:7772:21: undeclared name not builtin: _union
```


More trouble with "union" being a reserved keyword, perhaps?



---

archive/issue_comments_257301.json:
```json
{
    "body": "Don't you want `self._union`? Also, I don't see the point of having a `_union` method since there is no real safety checks that need to be performed and everything computationally is handled by `MatroidUnion`.",
    "created_at": "2017-06-10T03:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257301",
    "user": "https://github.com/tscrim"
}
```

Don't you want `self._union`? Also, I don't see the point of having a `_union` method since there is no real safety checks that need to be performed and everything computationally is handled by `MatroidUnion`.



---

archive/issue_comments_257302.json:
```json
{
    "body": "Yes, I forgot the `self`.\n\nThe reason we need the `_union` method (Stefan helped me figure this out) is that \"union\" is a reserved keyword for Cython, so `cpdef union` gives the following error when compiling:\n\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n            Ternary matroid of rank 3 on 7 elements, type 0-\n        \"\"\"\n        from . import union_matroid\n        return union_matroid.MatroidUnion(matroids)\n\n    cpdef union(self, matroids):\n              ^\n------------------------------------------------------------\n\nsage/matroids/matroid.pyx:7747:15: Expected an identifier\n```\n\n\nSo instead we make `def union` sanitize the input and pass it to `cpdef _union`.",
    "created_at": "2017-06-10T21:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257302",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Yes, I forgot the `self`.

The reason we need the `_union` method (Stefan helped me figure this out) is that "union" is a reserved keyword for Cython, so `cpdef union` gives the following error when compiling:


```
Error compiling Cython file:
------------------------------------------------------------
...
            Ternary matroid of rank 3 on 7 elements, type 0-
        """
        from . import union_matroid
        return union_matroid.MatroidUnion(matroids)

    cpdef union(self, matroids):
              ^
------------------------------------------------------------

sage/matroids/matroid.pyx:7747:15: Expected an identifier
```


So instead we make `def union` sanitize the input and pass it to `cpdef _union`.



---

archive/issue_comments_257303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-10T21:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257304.json:
```json
{
    "body": "I don't claim to know the benefit of using Cython when all it does is pass the input to another Cython method. I just know it works the way I had intended it now.\n\nPerhaps I should change it back to just Python?",
    "created_at": "2017-06-10T22:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257304",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

I don't claim to know the benefit of using Cython when all it does is pass the input to another Cython method. I just know it works the way I had intended it now.

Perhaps I should change it back to just Python?



---

archive/issue_comments_257305.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-06-10T22:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257305",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_257306.json:
```json
{
    "body": "I'll take this off \"needs review\" until we decide.",
    "created_at": "2017-06-10T22:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257306",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

I'll take this off "needs review" until we decide.



---

archive/issue_comments_257307.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2017-06-10T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257307",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_257308.json:
```json
{
    "body": "Ah, I see, right. Well, there is an advantage to only having C code paths (I would make `_union` simply a `cdef` method because it should only be called from `def union`). However, you are going to have to do a number of Python calls when constructing the `MatroidUnion`, so having an extra Python function call for a lightweight function will not really change much. Especially since this is not likely to be called in tight loops and if you really wanted the most speed, you would just directly construct `MatriodUnion` anyways. So there should only be a Python `def union` IMO.",
    "created_at": "2017-06-10T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257308",
    "user": "https://github.com/tscrim"
}
```

Ah, I see, right. Well, there is an advantage to only having C code paths (I would make `_union` simply a `cdef` method because it should only be called from `def union`). However, you are going to have to do a number of Python calls when constructing the `MatroidUnion`, so having an extra Python function call for a lightweight function will not really change much. Especially since this is not likely to be called in tight loops and if you really wanted the most speed, you would just directly construct `MatriodUnion` anyways. So there should only be a Python `def union` IMO.



---

archive/issue_events_053029.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-10T23:57:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53029"
}
```



---

archive/issue_comments_257309.json:
```json
{
    "body": "I think I have come around to Travis' point of view. Only a \"def union\" will do for this one. Sorry for making you do extra work.\n\n--Stefan.",
    "created_at": "2017-06-11T01:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257309",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

I think I have come around to Travis' point of view. Only a "def union" will do for this one. Sorry for making you do extra work.

--Stefan.



---

archive/issue_events_053030.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:32:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53030"
}
```



---

archive/issue_events_053031.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:32:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53031"
}
```



---

archive/issue_comments_257310.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-11T02:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257311.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-11T02:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257312.json:
```json
{
    "body": "No worries. It was a good learning experience.",
    "created_at": "2017-06-11T02:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257312",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

No worries. It was a good learning experience.



---

archive/issue_comments_257313.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-11T02:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257313",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257314.json:
```json
{
    "body": "Should we have `M.union([]) == M`?",
    "created_at": "2017-06-11T02:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257314",
    "user": "https://github.com/tscrim"
}
```

Should we have `M.union([]) == M`?



---

archive/issue_comments_257315.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-11T03:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257316.json:
```json
{
    "body": "Makes sense to me.",
    "created_at": "2017-06-11T03:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257316",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Makes sense to me.



---

archive/issue_comments_257317.json:
```json
{
    "body": "This is not correct:\n\n```diff\n-        if matroids = []:\n+        if matroids == []:\n```\n\nOnce that is changed and you fill in the author name, you can set a positive review on my behalf.",
    "created_at": "2017-06-11T23:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257317",
    "user": "https://github.com/tscrim"
}
```

This is not correct:

```diff
-        if matroids = []:
+        if matroids == []:
```

Once that is changed and you fill in the author name, you can set a positive review on my behalf.



---

archive/issue_events_053032.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-11T23:10:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53032"
}
```



---

archive/issue_events_053033.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-11T23:10:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53033"
}
```



---

archive/issue_comments_257318.json:
```json
{
    "body": "Actually, a better test is `if not matroids:` as it is both faster and covers inputs like `()`. This would also pick up the empty matroid, which is okay as the union with the empty matroid should also not change the matroid and `MatroidUnion` should behave the same as other matroids, right? There is a case to be made that the output type is always the same, but I'm not convinced by that here. If we did want to enforce that, we just need to move the `isinstance(matroids, Matroid)` check first before `if not matroids:`.",
    "created_at": "2017-06-11T23:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257318",
    "user": "https://github.com/tscrim"
}
```

Actually, a better test is `if not matroids:` as it is both faster and covers inputs like `()`. This would also pick up the empty matroid, which is okay as the union with the empty matroid should also not change the matroid and `MatroidUnion` should behave the same as other matroids, right? There is a case to be made that the output type is always the same, but I'm not convinced by that here. If we did want to enforce that, we just need to move the `isinstance(matroids, Matroid)` check first before `if not matroids:`.



---

archive/issue_comments_257319.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-13T23:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257320.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-13T23:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257320",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_257321.json:
```json
{
    "body": "That will teach me to make a commit before testing it.\n\nI'm not getting expected behavior with `M.union([])` where `M` is a matroid (in particular, I used the Fano).\n\nYou can also fool this with a list of empty matroids. I can make it take empty matroids out of the list, but we may be getting diminishing returns with the sanitizing.",
    "created_at": "2017-06-13T23:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257321",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

That will teach me to make a commit before testing it.

I'm not getting expected behavior with `M.union([])` where `M` is a matroid (in particular, I used the Fano).

You can also fool this with a list of empty matroids. I can make it take empty matroids out of the list, but we may be getting diminishing returns with the sanitizing.



---

archive/issue_comments_257322.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-14T04:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257323.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-14T04:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257324.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-14T04:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257324",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257325.json:
```json
{
    "body": "Replying to [comment:23 zgershkoff]:\n> I'm not getting expected behavior with `M.union([])`\nSorry, this was wrong. An error on my part.\n\nI rewrote it to filter out empty matroids from a list. I also figured that the cost of adding an empty matroid to the list and then removing it was worth the simplicity of not performing the same check twice.",
    "created_at": "2017-06-14T04:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257325",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Replying to [comment:23 zgershkoff]:
> I'm not getting expected behavior with `M.union([])`
Sorry, this was wrong. An error on my part.

I rewrote it to filter out empty matroids from a list. I also figured that the cost of adding an empty matroid to the list and then removing it was worth the simplicity of not performing the same check twice.



---

archive/issue_comments_257326.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-14T04:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257327.json:
```json
{
    "body": "One last thing, we don't typically write error messages as full sentences:\n\n```diff\n-                    raise TypeError(\"Can only take the union with a \"\n-                                     + \"matroid or list of matroids.\")\n+                    raise TypeError(\"can only take the union with a \"\n+                                     + \"matroid or list of matroids\")\n```\n\nOnce you make that change and add your real name to the authors, you can set a positive review on my behalf.",
    "created_at": "2017-06-17T04:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257327",
    "user": "https://github.com/tscrim"
}
```

One last thing, we don't typically write error messages as full sentences:

```diff
-                    raise TypeError("Can only take the union with a "
-                                     + "matroid or list of matroids.")
+                    raise TypeError("can only take the union with a "
+                                     + "matroid or list of matroids")
```

Once you make that change and add your real name to the authors, you can set a positive review on my behalf.



---

archive/issue_comments_257328.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-17T19:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257329.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-17T19:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257329",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_257330.json:
```json
{
    "body": "Done.",
    "created_at": "2017-06-17T19:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257330",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Done.



---

archive/issue_events_053034.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:23:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18832#event-53034"
}
```



---

archive/issue_comments_257331.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-22T07:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18832#issuecomment-257331",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
