# Issue 27792: Increase number of tries in unpack_archive

Issue created by migration from https://trac.sagemath.org/ticket/28029

Original creator: slelievre

Original creation time: 2019-06-20 15:57:49

CC:  embray slelievre

Keywords: cygwin

In Cygwin under Windows, unpacking archives sometimes leads
to a permission problem.

This is due to Windows locking files when they are opened
by another application, and might mean an antivirus inspecting
a file prevents you from writing to it.

Building Sage in Cygwin in Windows 7 on some computer reliably
failed before this ticket, and reliably works with it.


---

Comment by slelievre created at 2019-06-20 15:58:28

Changing keywords from "cygwin" to "cygwin, days101".


---

Comment by slelievre created at 2019-06-20 15:59:00

Changing status from new to needs_review.


---

Comment by slelievre created at 2019-06-20 16:00:03

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2019-06-20 16:00:03

New commits:


---

Comment by embray created at 2019-06-20 17:45:26

FWIW the `retry=len(archive.names)` is pretty arbitrary here.  It's just setting the number of retries needed to a factor of the number of files extracted (that might be getting checked one by one by a virus scanner or whatever).  In practice it should need way fewer retries than this since the default retry is every 1s.


---

Comment by vbraun created at 2019-06-28 04:29:35

Resolution: fixed
