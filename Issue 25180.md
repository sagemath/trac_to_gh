# Issue 25180: Better restrictions on manifolds

Issue created by migration from https://trac.sagemath.org/ticket/25417

Original creator: @FlorentinJ

Original creation time: 2018-05-21 14:57:43

CC:  egourgoulhon

Keywords: restriction, extension, manifold, subdomain, graph

This ticket implements two new attributes of tensor fields on manifolds used to improve the restriction operation, by using rudimentary graph exploration to check for existing restriction and extensions.

Previously, defining the restriction of a tensor field on a subset V of a subset U before the restriction on the subset U would not register the first tensor as a restriction of the second, resulting in the creation of two python objects, despite being mathematically identical.

An example of code reproducing this behavior can be seen on this [notebook](http://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/submanifolds/Extension_demo.ipynb?flush_cache=true). With this ticket, the order of creation no longer matters.

This is part of the â€‹[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. 


---

Comment by git created at 2018-05-21 15:46:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @FlorentinJ created at 2018-05-22 09:22:42

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2018-05-22 18:25:18

LGTM.
Simply, could you add some Python comments in lines 426-427 of `tensorfield.py` regarding the meaning of the new attributes `_extensions_graph` and `_restrictions_graph`? This would be helpfull, especially since, technically speaking, these attributes are not graphs, but dictionaries.


---

Comment by git created at 2018-05-24 12:34:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2018-05-24 21:33:31

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2018-05-24 21:33:31

Thanks for the changes. LGTM. I think the failures in the plugins `startup_time` and `startup_modules` reported by the patchbot are irrelevant as far as this ticket is concerned.


---

Comment by git created at 2018-05-25 10:08:59

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2018-05-25 10:08:59

Changing status from positive_review to needs_review.


---

Comment by egourgoulhon created at 2018-05-25 14:12:18

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2018-05-25 14:12:18

OK, so everything is green now, including the patchbot.


---

Comment by vbraun created at 2018-05-27 17:01:15

Resolution: fixed
