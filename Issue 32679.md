# Issue 32679: Modularization fixes in sage.graphs

Issue created by migration from https://trac.sagemath.org/ticket/32916

Original creator: mkoeppe

Original creation time: 2021-11-20 22:01:03

CC:  dcoudert dimpase




---

Comment by mkoeppe created at 2021-11-20 22:03:01

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-11-20 22:03:01

Last 10 new commits:


---

Comment by git created at 2021-11-21 00:40:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-11-21 00:55:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2021-11-21 18:26:04

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2021-11-21 18:26:04

I disagree with this change in `generic_graph.py` as it changes the label of edges

```diff
-            sage: f(x) = -1 / x
-            sage: g(x) = 1 / (x + 1)
+            sage: f = lambda x: -1 / x
+            sage: g = lambda x: 1 / (x + 1)
             sage: G = DiGraph()
             sage: G.add_edges((i, f(i), f) for i in (1, 2, 1/2, 1/4))
             sage: G.add_edges((i, g(i), g) for i in (1, 2, 1/2, 1/4))
```

The current behavior gives

```
sage: G.edges()
[(1/4, -4, x |--> -1/x), (1/4, 4/5, x |--> 1/(x + 1)), (1/2, -2, x |--> -1/x), (1/2, 2/3, x |--> 1/(x + 1)), (1, -1, x |--> -1/x), (1, 1/2, x |--> 1/(x + 1)), (2, -1/2, x |--> -1/x), (2, 1/3, x |--> 1/(x + 1))]
```

which can be nicely converted to latex, while the new behavior gives

```
sage: G.edges()
[(1/4, -4, <function <lambda> at 0x174ac63a0>), (1/4, 4/5, <function <lambda> at 0x174ac6820>), (1/2, -2, <function <lambda> at 0x174ac63a0>), (1/2, 2/3, <function <lambda> at 0x174ac6820>), (1, -1, <function <lambda> at 0x174ac63a0>), (1, 1/2, <function <lambda> at 0x174ac6820>), (2, -1/2, <function <lambda> at 0x174ac63a0>), (2, 1/3, <function <lambda> at 0x174ac6820>)]
```

which can obviously not be nicely converted.

All other changes looks good to me.


---

Comment by git created at 2021-11-21 18:56:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-11-21 18:56:19

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2021-11-21 19:55:15

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2021-11-21 19:55:15

LGTM.


---

Comment by mkoeppe created at 2021-11-21 19:57:29

Thanks!


---

Comment by vbraun created at 2021-12-19 11:47:01

Resolution: fixed
