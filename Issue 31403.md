# Issue 31403: 2d Bezier path does not plot in 3d

archive/issues_031403.json:
```json
{
    "body": "From https://ask.sagemath.org/question/56590/problem-with-plotting-a-3d-bezier-curve/\n\n```\nsage: p2d = [[(3.0,0.0),(3.0,0.13),(2.94,0.25),(2.8,0.35)], [(2.7,0.44),(2.6,0.5),(2.5,0.5)], [(2.36,0.5),(2.24,0.44),(2.14,0.35)], [(2.05,0.25),(2.0,0.13),(2.0,6.1e-17)]]                    \nsage: bp=bezier_path(p2d)                                                                                                                                                                      \nsage: bp.plot3d()                                                                                                                                                                              \nTraceback (most recent call last):\n/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:8801)()\n   1298         try:\n-> 1299             n = self.pyobject()\n   1300         except TypeError:\n\n/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.pyobject (build/cythonized/sage/symbolic/expression.cpp:6136)()\n    586         if not is_a_numeric(self._gobj):\n--> 587             raise TypeError(\"self must be a numeric expression\")\n    588         return py_object_from_numeric(self._gobj)\n\nTypeError: self must be a numeric expression\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-37e325e9051f> in <module>\n----> 1 bp.plot3d()\n\n/opt/sage/local/lib/python3.9/site-packages/sage/plot/graphics.py in plot3d(self, z, **kwds)\n   1279         \"\"\"\n   1280         from sage.plot.plot3d.base import Graphics3dGroup\n-> 1281         g = Graphics3dGroup([g.plot3d(**kwds) for g in self._objects])\n   1282         if z:\n   1283             g = g.translate(0,0,z)\n\n/opt/sage/local/lib/python3.9/site-packages/sage/plot/graphics.py in <listcomp>(.0)\n   1279         \"\"\"\n   1280         from sage.plot.plot3d.base import Graphics3dGroup\n-> 1281         g = Graphics3dGroup([g.plot3d(**kwds) for g in self._objects])\n   1282         if z:\n   1283             g = g.translate(0,0,z)\n\n/opt/sage/local/lib/python3.9/site-packages/sage/plot/bezier_path.py in plot3d(self, z, **kwds)\n    168         options = self._plot3d_options()\n    169         options.update(kwds)\n--> 170         return bezier3d([[(x,y,0) for x,y in self.path[i]] for i in range(len(self.path))], **options)\n    171 \n    172     def _repr_(self):\n\n/opt/sage/local/lib/python3.9/site-packages/sage/misc/decorators.py in wrapper(*args, **kwds)\n    649                     kwds[new_name] = kwds[old_name]\n    650                     del kwds[old_name]\n--> 651             return func(*args, **kwds)\n    652 \n    653         return wrapper\n\n/opt/sage/local/lib/python3.9/site-packages/sage/misc/decorators.py in wrapper(*args, **kwds)\n    489                 options['__original_opts'] = kwds\n    490             options.update(kwds)\n--> 491             return func(*args, **options)\n    492 \n    493         #Add the options specified by @options to the signature of the wrapped\n\n/opt/sage/local/lib/python3.9/site-packages/sage/plot/plot3d/shapes2.py in bezier3d(path, **options)\n    244             p2 = vector(curve[-2])\n    245             p3 = vector(curve[-1])\n--> 246             B = (1-t)**3*p0+3*t*(1-t)**2*p1+3*t**2*(1-t)*p2+t**3*p3\n    247             G += P3D.parametric_plot3d(list(B), (0, 1), color=options['color'], aspect_ratio=options['aspect_ratio'], thickness=options['thickness'], opacity=options['opacity'])\n    248         else:\n\n/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:34734)()\n   5985             [0, 1, 2, 3, 4]\n   5986         \"\"\"\n-> 5987         return int(self._integer_())\n   5988 \n   5989     def iterator(self):\n\n/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:8850)()\n   1299             n = self.pyobject()\n   1300         except TypeError:\n-> 1301             raise TypeError(\"unable to convert %r to an integer\" % self)\n   1302         if isinstance(n, sage.rings.integer.Integer):\n   1303             return n\n\nTypeError: unable to convert -(t - 1)^3 to an integer\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31640\n\n",
    "created_at": "2021-04-10T17:29:50Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "2d Bezier path does not plot in 3d",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31403",
    "user": "https://github.com/videlec"
}
```
From https://ask.sagemath.org/question/56590/problem-with-plotting-a-3d-bezier-curve/

```
sage: p2d = [[(3.0,0.0),(3.0,0.13),(2.94,0.25),(2.8,0.35)], [(2.7,0.44),(2.6,0.5),(2.5,0.5)], [(2.36,0.5),(2.24,0.44),(2.14,0.35)], [(2.05,0.25),(2.0,0.13),(2.0,6.1e-17)]]                    
sage: bp=bezier_path(p2d)                                                                                                                                                                      
sage: bp.plot3d()                                                                                                                                                                              
Traceback (most recent call last):
/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:8801)()
   1298         try:
-> 1299             n = self.pyobject()
   1300         except TypeError:

/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.pyobject (build/cythonized/sage/symbolic/expression.cpp:6136)()
    586         if not is_a_numeric(self._gobj):
--> 587             raise TypeError("self must be a numeric expression")
    588         return py_object_from_numeric(self._gobj)

TypeError: self must be a numeric expression

During handling of the above exception, another exception occurred:

TypeError                                 Traceback (most recent call last)
<ipython-input-6-37e325e9051f> in <module>
----> 1 bp.plot3d()

/opt/sage/local/lib/python3.9/site-packages/sage/plot/graphics.py in plot3d(self, z, **kwds)
   1279         """
   1280         from sage.plot.plot3d.base import Graphics3dGroup
-> 1281         g = Graphics3dGroup([g.plot3d(**kwds) for g in self._objects])
   1282         if z:
   1283             g = g.translate(0,0,z)

/opt/sage/local/lib/python3.9/site-packages/sage/plot/graphics.py in <listcomp>(.0)
   1279         """
   1280         from sage.plot.plot3d.base import Graphics3dGroup
-> 1281         g = Graphics3dGroup([g.plot3d(**kwds) for g in self._objects])
   1282         if z:
   1283             g = g.translate(0,0,z)

/opt/sage/local/lib/python3.9/site-packages/sage/plot/bezier_path.py in plot3d(self, z, **kwds)
    168         options = self._plot3d_options()
    169         options.update(kwds)
--> 170         return bezier3d([[(x,y,0) for x,y in self.path[i]] for i in range(len(self.path))], **options)
    171 
    172     def _repr_(self):

/opt/sage/local/lib/python3.9/site-packages/sage/misc/decorators.py in wrapper(*args, **kwds)
    649                     kwds[new_name] = kwds[old_name]
    650                     del kwds[old_name]
--> 651             return func(*args, **kwds)
    652 
    653         return wrapper

/opt/sage/local/lib/python3.9/site-packages/sage/misc/decorators.py in wrapper(*args, **kwds)
    489                 options['__original_opts'] = kwds
    490             options.update(kwds)
--> 491             return func(*args, **options)
    492 
    493         #Add the options specified by @options to the signature of the wrapped

/opt/sage/local/lib/python3.9/site-packages/sage/plot/plot3d/shapes2.py in bezier3d(path, **options)
    244             p2 = vector(curve[-2])
    245             p3 = vector(curve[-1])
--> 246             B = (1-t)**3*p0+3*t*(1-t)**2*p1+3*t**2*(1-t)*p2+t**3*p3
    247             G += P3D.parametric_plot3d(list(B), (0, 1), color=options['color'], aspect_ratio=options['aspect_ratio'], thickness=options['thickness'], opacity=options['opacity'])
    248         else:

/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:34734)()
   5985             [0, 1, 2, 3, 4]
   5986         """
-> 5987         return int(self._integer_())
   5988 
   5989     def iterator(self):

/opt/sage/local/lib/python3.9/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:8850)()
   1299             n = self.pyobject()
   1300         except TypeError:
-> 1301             raise TypeError("unable to convert %r to an integer" % self)
   1302         if isinstance(n, sage.rings.integer.Integer):
   1303             return n

TypeError: unable to convert -(t - 1)^3 to an integer
```


Issue created by migration from https://trac.sagemath.org/ticket/31640





---

archive/issue_comments_448647.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-10T17:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448647",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_448648.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-04-10T17:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448648",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_448649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-04-10T17:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_448650.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-11T07:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448650",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_448651.json:
```json
{
    "body": "ok",
    "created_at": "2021-04-11T07:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448651",
    "user": "https://github.com/fchapoton"
}
```

ok



---

archive/issue_comments_448652.json:
```json
{
    "body": "This is a bug fix. Why don't we make it for 9.3?",
    "created_at": "2021-04-11T08:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448652",
    "user": "https://github.com/videlec"
}
```

This is a bug fix. Why don't we make it for 9.3?



---

archive/issue_comments_448653.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2021-04-26T16:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448653",
    "user": "https://github.com/videlec"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_448654.json:
```json
{
    "body": "Let us try to squeezee in",
    "created_at": "2021-04-26T16:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448654",
    "user": "https://github.com/videlec"
}
```

Let us try to squeezee in



---

archive/issue_comments_448655.json:
```json
{
    "body": "Changing keywords from \"\" to \"bug\".",
    "created_at": "2021-04-26T16:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448655",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "bug".



---

archive/issue_events_028697.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-04-29T21:05:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31403#event-28697"
}
```



---

archive/issue_comments_448656.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-04-29T21:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31403#issuecomment-448656",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
