# Issue 29992: ExtPowerFreeModule and TensorFreeModule cannot create a basis

archive/issues_029992.json:
```json
{
    "body": "CC:  egourgoulhon tscrim @mjungmath slelievre @honglizhaobob\n\n\n```\n            sage: from sage.tensor.modules.ext_pow_free_module import ExtPowerFreeModule\n            sage: M = FiniteRankFreeModule(ZZ, 3, name='M')\n            sage: e = M.basis('e')\n            sage: A = ExtPowerFreeModule(M, 2) ; A\n            sage: A.basis('w')\n            TypeError: __init__() missing 1 required positional argument: 'degree'\n\n        sage: M = FiniteRankFreeModule(ZZ, 3, name='M')\n        sage: e = M.basis('e')\n        sage: from sage.tensor.modules.tensor_free_module import TensorFreeModule\n        sage: T = TensorFreeModule(M, (1,2)) ; T\n        sage: T.basis('q')\n        TypeError: __init__() missing 1 required positional argument: 'tensor_type'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30229\n\n",
    "created_at": "2020-07-27T01:07:12Z",
    "labels": [
        "linear algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "ExtPowerFreeModule and TensorFreeModule cannot create a basis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29992",
    "user": "mkoeppe"
}
```
CC:  egourgoulhon tscrim @mjungmath slelievre @honglizhaobob


```
            sage: from sage.tensor.modules.ext_pow_free_module import ExtPowerFreeModule
            sage: M = FiniteRankFreeModule(ZZ, 3, name='M')
            sage: e = M.basis('e')
            sage: A = ExtPowerFreeModule(M, 2) ; A
            sage: A.basis('w')
            TypeError: __init__() missing 1 required positional argument: 'degree'

        sage: M = FiniteRankFreeModule(ZZ, 3, name='M')
        sage: e = M.basis('e')
        sage: from sage.tensor.modules.tensor_free_module import TensorFreeModule
        sage: T = TensorFreeModule(M, (1,2)) ; T
        sage: T.basis('q')
        TypeError: __init__() missing 1 required positional argument: 'tensor_type'
```


Issue created by migration from https://trac.sagemath.org/ticket/30229





---

archive/issue_comments_426059.json:
```json
{
    "body": "The current design of `ExtPowerFreeModule`, `ExtPowerDualFreeModule` and `TensorFreeModule` is such that they cannot have their own bases, although they are mathematically free modules and they inherit from `FiniteRankFreeModule`. This is because all the basis management is performed at the level of the *base* module. Indeed, any choice of basis in the base module gives birth uniquely to a basis in each of the tensor modules and exterior power modules.\nFor instance:\n\n```\nsage: M = FiniteRankFreeModule(ZZ, 2, name='M')\nsage: e = M.basis('e')\nsage: t = M.tensor((1, 1), name='t'); t\nType-(1,1) tensor t on the Rank-2 free module M over the Integer Ring\n```\n\nThe components are set and displayed with respect to the basis `e = (e_0, e_1)` of the *base* module `M` and its dual basis `(e^0, e^1)`:\n\n```\nsage: t[e, :] = [[1, 0], [-2, 0]]\nsage: t.display(e)  # equivalent to t.display()\nt = e_0*e^0 - 2 e_1*e^0\nsage: t.components(e)\n2-indices components w.r.t. Basis (e_0,e_1) on the Rank-2 free module M \n over the Integer Ring\n```\n\nThe same feature holds for `ExtPowerDualFreeModule` elements:\n\n```\nsage: a = M.alternating_form(2, name='a')\nsage: a.parent()\n2nd exterior power of the dual of the Rank-2 free module M over the Integer Ring\nsage: a[e, 0, 1] = 3\nsage: a.display(e)  # equivalent to a.display()\na = 3 e^0/\\e^1\nsage: a.components(e)\nFully antisymmetric 2-indices components w.r.t. Basis (e_0,e_1) on the Rank-2 \n free module M over the Integer Ring\n```\n\nIf we introduce proper bases for the derived modules `ExtPowerFreeModule`, `ExtPowerDualFreeModule` and `TensorFreeModule`, then `t.display()` would become ambiguous: shall we want a display w.r.t. to the default basis of `M` or to the default basis of `t.parent()`? Moreover, the storage of components is currently performed with respect to bases of the base module. Introducing bases in the tensor modules shall of course not lead to duplicate storage.\n\nIf we keep this design (which I would favor at this stage), then, for the sake of clarity, \n\n```\nsage: A = M.exterior_power(2)\nsage: A.basis('w')\n```\n\nshall return a `NotImplementedError` and not a `TypeError`, with a message like *only bases on the base module are implemented*.",
    "created_at": "2020-07-27T13:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426059",
    "user": "egourgoulhon"
}
```

The current design of `ExtPowerFreeModule`, `ExtPowerDualFreeModule` and `TensorFreeModule` is such that they cannot have their own bases, although they are mathematically free modules and they inherit from `FiniteRankFreeModule`. This is because all the basis management is performed at the level of the *base* module. Indeed, any choice of basis in the base module gives birth uniquely to a basis in each of the tensor modules and exterior power modules.
For instance:

```
sage: M = FiniteRankFreeModule(ZZ, 2, name='M')
sage: e = M.basis('e')
sage: t = M.tensor((1, 1), name='t'); t
Type-(1,1) tensor t on the Rank-2 free module M over the Integer Ring
```

The components are set and displayed with respect to the basis `e = (e_0, e_1)` of the *base* module `M` and its dual basis `(e^0, e^1)`:

```
sage: t[e, :] = [[1, 0], [-2, 0]]
sage: t.display(e)  # equivalent to t.display()
t = e_0*e^0 - 2 e_1*e^0
sage: t.components(e)
2-indices components w.r.t. Basis (e_0,e_1) on the Rank-2 free module M 
 over the Integer Ring
```

The same feature holds for `ExtPowerDualFreeModule` elements:

```
sage: a = M.alternating_form(2, name='a')
sage: a.parent()
2nd exterior power of the dual of the Rank-2 free module M over the Integer Ring
sage: a[e, 0, 1] = 3
sage: a.display(e)  # equivalent to a.display()
a = 3 e^0/\e^1
sage: a.components(e)
Fully antisymmetric 2-indices components w.r.t. Basis (e_0,e_1) on the Rank-2 
 free module M over the Integer Ring
```

If we introduce proper bases for the derived modules `ExtPowerFreeModule`, `ExtPowerDualFreeModule` and `TensorFreeModule`, then `t.display()` would become ambiguous: shall we want a display w.r.t. to the default basis of `M` or to the default basis of `t.parent()`? Moreover, the storage of components is currently performed with respect to bases of the base module. Introducing bases in the tensor modules shall of course not lead to duplicate storage.

If we keep this design (which I would favor at this stage), then, for the sake of clarity, 

```
sage: A = M.exterior_power(2)
sage: A.basis('w')
```

shall return a `NotImplementedError` and not a `TypeError`, with a message like *only bases on the base module are implemented*.



---

archive/issue_comments_426060.json:
```json
{
    "body": "Thanks a lot for the explanation. \n\nYes, a `NotImplementedError` with a clear message would be an improvement.\n\nIt could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.",
    "created_at": "2020-07-27T15:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426060",
    "user": "mkoeppe"
}
```

Thanks a lot for the explanation. 

Yes, a `NotImplementedError` with a clear message would be an improvement.

It could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.



---

archive/issue_comments_426061.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> \n> It could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.\n\nYes, indeed!",
    "created_at": "2020-07-27T17:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426061",
    "user": "egourgoulhon"
}
```

Replying to [comment:4 mkoeppe]:
> 
> It could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.

Yes, indeed!



---

archive/issue_comments_426062.json:
```json
{
    "body": "Replying to [comment:2 egourgoulhon]:\n> all the basis management is performed at the level of the *base* module. Indeed, any choice of basis in the base module gives birth uniquely to a basis in each of the tensor modules and exterior power modules.\n\nGiven this, I am also wondering whether perhaps there should be a subclass of `Basis_abstract` that would make these bases explicit.",
    "created_at": "2020-07-27T17:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426062",
    "user": "mkoeppe"
}
```

Replying to [comment:2 egourgoulhon]:
> all the basis management is performed at the level of the *base* module. Indeed, any choice of basis in the base module gives birth uniquely to a basis in each of the tensor modules and exterior power modules.

Given this, I am also wondering whether perhaps there should be a subclass of `Basis_abstract` that would make these bases explicit.



---

archive/issue_comments_426063.json:
```json
{
    "body": "Preliminary branch \n----\nNew commits:",
    "created_at": "2020-07-31T03:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426063",
    "user": "mkoeppe"
}
```

Preliminary branch 
----
New commits:



---

archive/issue_comments_426064.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-01T18:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426064",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426065.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-01T18:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426065",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426066.json:
```json
{
    "body": "Here's an early draft, comments welcome",
    "created_at": "2020-08-01T18:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426066",
    "user": "mkoeppe"
}
```

Here's an early draft, comments welcome



---

archive/issue_comments_426067.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> Here's an early draft, comments welcome\nThanks. It seems that the file `tensor_free_submodule_basis.py` is missing in the ticket branch.",
    "created_at": "2020-08-01T20:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426067",
    "user": "egourgoulhon"
}
```

Replying to [comment:13 mkoeppe]:
> Here's an early draft, comments welcome
Thanks. It seems that the file `tensor_free_submodule_basis.py` is missing in the ticket branch.



---

archive/issue_comments_426068.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-01T20:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426068",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426069.json:
```json
{
    "body": "Sorry, here you go.",
    "created_at": "2020-08-01T20:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426069",
    "user": "mkoeppe"
}
```

Sorry, here you go.



---

archive/issue_comments_426070.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-03T04:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426070",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426071.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T04:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426071",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426072.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T04:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426072",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426073.json:
```json
{
    "body": "Replying to [comment:16 mkoeppe]:\n> Sorry, here you go.\nThanks. Looks nice!",
    "created_at": "2020-08-03T08:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426073",
    "user": "egourgoulhon"
}
```

Replying to [comment:16 mkoeppe]:
> Sorry, here you go.
Thanks. Looks nice!



---

archive/issue_comments_426074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T20:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426074",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426075.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T00:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426075",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426076.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T01:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426076",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426077.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426077",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426078.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T05:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426078",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426079.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-05T02:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426079",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426080.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-05T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426080",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426081.json:
```json
{
    "body": "That's a really nice addition! Especially the in this ticket introduced `ambient_module` is useful in view of #31276. What's the status of this ticket?",
    "created_at": "2021-01-22T20:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426081",
    "user": "@mjungmath"
}
```

That's a really nice addition! Especially the in this ticket introduced `ambient_module` is useful in view of #31276. What's the status of this ticket?



---

archive/issue_comments_426082.json:
```json
{
    "body": "A comment in the file says:\n\n```\n+# Todo: Make it a Family\n+#       dual basis\n+#       add test for dual\n+# lift/reduce/retract\n```\n\nI think I wanted to go through #30307 to simplify the code.\n\nUnfortunately I won't have a chance to work on any of this before spring this year",
    "created_at": "2021-01-22T20:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426082",
    "user": "mkoeppe"
}
```

A comment in the file says:

```
+# Todo: Make it a Family
+#       dual basis
+#       add test for dual
+# lift/reduce/retract
```

I think I wanted to go through #30307 to simplify the code.

Unfortunately I won't have a chance to work on any of this before spring this year



---

archive/issue_comments_426083.json:
```json
{
    "body": "Please feel free to take any parts of the branch that are useful already",
    "created_at": "2021-01-22T20:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426083",
    "user": "mkoeppe"
}
```

Please feel free to take any parts of the branch that are useful already



---

archive/issue_comments_426084.json:
```json
{
    "body": "What shall be the purpose of `reduce` and `retract`?",
    "created_at": "2021-01-23T00:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426084",
    "user": "@mjungmath"
}
```

What shall be the purpose of `reduce` and `retract`?



---

archive/issue_comments_426085.json:
```json
{
    "body": "Replying to [comment:34 gh-mjungmath]:\n> What shall be the purpose of `reduce` and `retract`?\n\nThey are part of the protocol for subobjects and quotients (https://doc.sagemath.org/html/en/reference/modules/sage/modules/with_basis/subquotient.html?highlight=subquotient#module-sage.modules.with_basis.subquotient)",
    "created_at": "2021-01-23T01:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426085",
    "user": "mkoeppe"
}
```

Replying to [comment:34 gh-mjungmath]:
> What shall be the purpose of `reduce` and `retract`?

They are part of the protocol for subobjects and quotients (https://doc.sagemath.org/html/en/reference/modules/sage/modules/with_basis/subquotient.html?highlight=subquotient#module-sage.modules.with_basis.subquotient)



---

archive/issue_comments_426086.json:
```json
{
    "body": "Are these common mathematical terms? I cannot find anything on Wikipedia etc. The documentation is very sparse so that I can only (educatedly) guess what that should mean.",
    "created_at": "2021-01-23T10:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426086",
    "user": "@mjungmath"
}
```

Are these common mathematical terms? I cannot find anything on Wikipedia etc. The documentation is very sparse so that I can only (educatedly) guess what that should mean.



---

archive/issue_comments_426087.json:
```json
{
    "body": "`sage.modules` has implementations from which it should become clearer",
    "created_at": "2021-01-25T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426087",
    "user": "mkoeppe"
}
```

`sage.modules` has implementations from which it should become clearer



---

archive/issue_comments_426088.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426088",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_426089.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-08-23T22:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426089",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_426090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T23:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426090",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426091.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T23:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426091",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T00:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426092",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T00:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426093",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T01:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426094",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T01:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426095",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426096.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T06:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426096",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426097.json:
```json
{
    "body": "Replying to [comment:6 egourgoulhon]:\n> Replying to [comment:4 mkoeppe]:\n> > \n> > It could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.\n> \n> Yes, indeed!\n\nI've opened #34424 for this",
    "created_at": "2022-08-24T17:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426097",
    "user": "mkoeppe"
}
```

Replying to [comment:6 egourgoulhon]:
> Replying to [comment:4 mkoeppe]:
> > 
> > It could also be considered whether these three classes should really be subclasses of `FiniteRankFreeModule`, or perhaps rather a new common baseclass.
> 
> Yes, indeed!

I've opened #34424 for this



---

archive/issue_comments_426098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T21:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426098",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426099.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T22:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426099",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426100.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T23:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426100",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-26T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426102.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T23:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426102",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426103.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T00:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426103",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426104.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T03:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426104",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T06:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426105",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426106.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T15:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426106",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T16:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T16:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426108",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T17:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426109",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-27T17:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-27T21:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426111",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426112.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T01:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426112",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426113.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T02:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426113",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T02:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426114",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426115.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-28T02:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426115",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426116.json:
```json
{
    "body": "Thanks for the implementation. This looks nice!\nA few comments:\n- Some entrie(s) should be added to `src/doc/en/reference/tensor_free_modules/index.rst`, so that the documentation of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp` is generated\n- There are some coverage issues (cf. the patchbot report); for instance the method `TensorFreeSubmodule_comp._basis_comp` has no docstring. \n- The output of `TensorFreeSubmodule_comp._repr_` is quite odd:\n\n```\nsage: T40Sym45M = TensorFreeSubmodule_comp(M, (6, 0), sym=((4, 5))); T40Sym45M\nFree module of type-(6,0) tensors with 6-indices components w.r.t. (0, 1, 2),\n with symmetry on the index positions (4, 5)\n on the Rank-3 free module M over the Integer Ring\n```\n\n- `with 6-indices components` could be suppressed for it is redundant with `type-(6,0)`\n- `w.r.t. (0, 1, 2)` is meaningless in this context \n \n The output could be shorten to \n {{{\n Free module of type-(6,0) tensors with symmetry on the index \n  positions (4, 5) on the Rank-3 free module M over the Integer Ring\n }}}\n without any loss of information. \n\n- The patchbot reports 2 pyflake issues.",
    "created_at": "2022-08-28T15:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426116",
    "user": "egourgoulhon"
}
```

Thanks for the implementation. This looks nice!
A few comments:
- Some entrie(s) should be added to `src/doc/en/reference/tensor_free_modules/index.rst`, so that the documentation of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp` is generated
- There are some coverage issues (cf. the patchbot report); for instance the method `TensorFreeSubmodule_comp._basis_comp` has no docstring. 
- The output of `TensorFreeSubmodule_comp._repr_` is quite odd:

```
sage: T40Sym45M = TensorFreeSubmodule_comp(M, (6, 0), sym=((4, 5))); T40Sym45M
Free module of type-(6,0) tensors with 6-indices components w.r.t. (0, 1, 2),
 with symmetry on the index positions (4, 5)
 on the Rank-3 free module M over the Integer Ring
```

- `with 6-indices components` could be suppressed for it is redundant with `type-(6,0)`
- `w.r.t. (0, 1, 2)` is meaningless in this context 
 
 The output could be shorten to 
 {{{
 Free module of type-(6,0) tensors with symmetry on the index 
  positions (4, 5) on the Rank-3 free module M over the Integer Ring
 }}}
 without any loss of information. 

- The patchbot reports 2 pyflake issues.



---

archive/issue_comments_426117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T16:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426118.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T16:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426118",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426119.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T16:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426119",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T17:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426120",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426121",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T17:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426122",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T17:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T17:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426124",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T18:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426125",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T18:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426127",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426128.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T18:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426128",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426129.json:
```json
{
    "body": "Thanks a lot for your comments. All fixed now",
    "created_at": "2022-08-28T18:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426129",
    "user": "mkoeppe"
}
```

Thanks a lot for your comments. All fixed now



---

archive/issue_comments_426130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-28T22:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426130",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426131.json:
```json
{
    "body": "Thanks for the changes. \n\nI was wondering about the names and descriptions of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp`, which stress the connection with `Components` objects. Now, what really matters here are the tensor symmetries, which do not depend upon a basis, while a `Components` object is attached to a given basis.\nIn particular the description *\"Class for free submodules of tensor products of free modules that are defined by the symmetries of a Components object.\"* would better be rephrased by something like *\"Class for free submodules of tensor products of free modules that are defined by some monoterm symmetries\"*. Similarly *\"Free module bases indexed by component indices\"* conveys more the  output of the method `keys()` than the actual nature of these bases. \nWouldn't something like  `TensorFreeSubmodule_sym` or `TensorFreeSubmoduleBasis_sym` be better names? \n\nOther remarks:\n\n- We have:\n  {{{\n  sage: M = FiniteRankFreeModule(ZZ, 2)\n  sage: M.tensor_module(2, 0, sym=(0,1)) is M.symmetric_power(2)\n  False\n  }}}\n  Shouldn't the answer be `True`?\n- In the doctests of `TensorFreeSubmodule_comp` and `TensorFreeModule.basis`, one could get\n  rid of\n  {{{\n  from sage.tensor.modules.tensor_free_submodule import TensorFreeSubmodule_comp\n  }}}\n  and construct the submodules via `M.tensor_module` with the new arguments `sym` and `antisym`. \n\n- In the docstring of `TensorFreeModule.basis`, it could be instructive to illustrate the use with a basis that is not the default basis of the base module, e.g. something like\n  {{{\nsage: M = FiniteRankFreeModule(ZZ, 2)\nsage: e = M.basis('e')\nsage: f = M.basis('f', from_family=(-e[1], e[0]))\nsage: for b in f: b.display()\nf_0 = -e_1\nf_1 = e_0\nsage: S = M.tensor_module(2, 0, sym=(0,1))\nsage: fS = S.basis('f')\nsage: for b in fS: b.display()\ne_1\u2297e_1\n-e_0\u2297e_1 - e_1\u2297e_0\ne_0\u2297e_0\nsage: for b in fS: b.display(f)\nf_0\u2297f_0\nf_0\u2297f_1 + f_1\u2297f_0\nf_1\u2297f_1\n  }}}\n- a typo in the docstring of `TensorFreeModule.basis`:   \n  {{{\n  #!diff\n  - - ``symbol``, ``indices`` -- passed to he base module's method\n  + - ``symbol``, ``indices`` -- passed to the base module's method\n  }}}",
    "created_at": "2022-08-29T15:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426131",
    "user": "egourgoulhon"
}
```

Thanks for the changes. 

I was wondering about the names and descriptions of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp`, which stress the connection with `Components` objects. Now, what really matters here are the tensor symmetries, which do not depend upon a basis, while a `Components` object is attached to a given basis.
In particular the description *"Class for free submodules of tensor products of free modules that are defined by the symmetries of a Components object."* would better be rephrased by something like *"Class for free submodules of tensor products of free modules that are defined by some monoterm symmetries"*. Similarly *"Free module bases indexed by component indices"* conveys more the  output of the method `keys()` than the actual nature of these bases. 
Wouldn't something like  `TensorFreeSubmodule_sym` or `TensorFreeSubmoduleBasis_sym` be better names? 

Other remarks:

- We have:
  {{{
  sage: M = FiniteRankFreeModule(ZZ, 2)
  sage: M.tensor_module(2, 0, sym=(0,1)) is M.symmetric_power(2)
  False
  }}}
  Shouldn't the answer be `True`?
- In the doctests of `TensorFreeSubmodule_comp` and `TensorFreeModule.basis`, one could get
  rid of
  {{{
  from sage.tensor.modules.tensor_free_submodule import TensorFreeSubmodule_comp
  }}}
  and construct the submodules via `M.tensor_module` with the new arguments `sym` and `antisym`. 

- In the docstring of `TensorFreeModule.basis`, it could be instructive to illustrate the use with a basis that is not the default basis of the base module, e.g. something like
  {{{
sage: M = FiniteRankFreeModule(ZZ, 2)
sage: e = M.basis('e')
sage: f = M.basis('f', from_family=(-e[1], e[0]))
sage: for b in f: b.display()
f_0 = -e_1
f_1 = e_0
sage: S = M.tensor_module(2, 0, sym=(0,1))
sage: fS = S.basis('f')
sage: for b in fS: b.display()
e_1⊗e_1
-e_0⊗e_1 - e_1⊗e_0
e_0⊗e_0
sage: for b in fS: b.display(f)
f_0⊗f_0
f_0⊗f_1 + f_1⊗f_0
f_1⊗f_1
  }}}
- a typo in the docstring of `TensorFreeModule.basis`:   
  {{{
  #!diff
  - - ``symbol``, ``indices`` -- passed to he base module's method
  + - ``symbol``, ``indices`` -- passed to the base module's method
  }}}



---

archive/issue_comments_426132.json:
```json
{
    "body": "Replying to [comment:94 egourgoulhon]:\n> - We have:\n>   {{{\n>   sage: M = FiniteRankFreeModule(ZZ, 2)\n>   sage: M.tensor_module(2, 0, sym=(0,1)) is M.symmetric_power(2)\n>   False\n>   }}}\n>   Shouldn't the answer be `True`?\n\nYes, this is one of the TODOs that you can see in the branch.\n\n```\n+        if sym or antisym:\n+            # TODO: Canonicalize sym, antisym, make hashable\n+            key = (k, l, sym, antisym)\n+        else:\n+            key = (k, l)\n```\n\n\nI'm not sure whether we should fix it in this ticket; I think it's better done in a refactoring ticket that takes care of how symmetries are constructed and represented.",
    "created_at": "2022-08-29T16:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426132",
    "user": "mkoeppe"
}
```

Replying to [comment:94 egourgoulhon]:
> - We have:
>   {{{
>   sage: M = FiniteRankFreeModule(ZZ, 2)
>   sage: M.tensor_module(2, 0, sym=(0,1)) is M.symmetric_power(2)
>   False
>   }}}
>   Shouldn't the answer be `True`?

Yes, this is one of the TODOs that you can see in the branch.

```
+        if sym or antisym:
+            # TODO: Canonicalize sym, antisym, make hashable
+            key = (k, l, sym, antisym)
+        else:
+            key = (k, l)
```


I'm not sure whether we should fix it in this ticket; I think it's better done in a refactoring ticket that takes care of how symmetries are constructed and represented.



---

archive/issue_comments_426133.json:
```json
{
    "body": "(I have some preliminary work in this direction on the branch of #32029)",
    "created_at": "2022-08-29T16:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426133",
    "user": "mkoeppe"
}
```

(I have some preliminary work in this direction on the branch of #32029)



---

archive/issue_comments_426134.json:
```json
{
    "body": "Replying to [comment:94 egourgoulhon]:\n> I was wondering about the names and descriptions of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp`, which stress the connection with `Components` objects. Now, what really matters here are the tensor symmetries, which do not depend upon a basis, while a `Components` object is attached to a given basis.\n> In particular the description *\"Class for free submodules of tensor products of free modules that are defined by the symmetries of a Components object.\"* would better be rephrased by something like *\"Class for free submodules of tensor products of free modules that are defined by some monoterm symmetries\"*. Similarly *\"Free module bases indexed by component indices\"* conveys more the  output of the method `keys()` than the actual nature of these bases. \n> Wouldn't something like  `TensorFreeSubmodule_sym` or `TensorFreeSubmoduleBasis_sym` be better names? \n\nI agree, I'll make these changes.",
    "created_at": "2022-08-29T16:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426134",
    "user": "mkoeppe"
}
```

Replying to [comment:94 egourgoulhon]:
> I was wondering about the names and descriptions of the new classes `TensorFreeSubmodule_comp` and `TensorFreeSubmoduleBasis_comp`, which stress the connection with `Components` objects. Now, what really matters here are the tensor symmetries, which do not depend upon a basis, while a `Components` object is attached to a given basis.
> In particular the description *"Class for free submodules of tensor products of free modules that are defined by the symmetries of a Components object."* would better be rephrased by something like *"Class for free submodules of tensor products of free modules that are defined by some monoterm symmetries"*. Similarly *"Free module bases indexed by component indices"* conveys more the  output of the method `keys()` than the actual nature of these bases. 
> Wouldn't something like  `TensorFreeSubmodule_sym` or `TensorFreeSubmoduleBasis_sym` be better names? 

I agree, I'll make these changes.



---

archive/issue_comments_426135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426135",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426136.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426136",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426137.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426137",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426138.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426138",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426139.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426139",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426140.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T16:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426140",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426141.json:
```json
{
    "body": "Replying to [comment:95 mkoeppe]:\n> I'm not sure whether we should fix it in this ticket; I think it's better done in a refactoring ticket that takes care of how symmetries are constructed and represented.\n\nSome less ambitious refactoring will also do the job. Working on it",
    "created_at": "2022-08-29T16:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426141",
    "user": "mkoeppe"
}
```

Replying to [comment:95 mkoeppe]:
> I'm not sure whether we should fix it in this ticket; I think it's better done in a refactoring ticket that takes care of how symmetries are constructed and represented.

Some less ambitious refactoring will also do the job. Working on it



---

archive/issue_comments_426142.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T18:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426142",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426143.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-29T19:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426143",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T19:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426145.json:
```json
{
    "body": "Done now",
    "created_at": "2022-08-29T19:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426145",
    "user": "mkoeppe"
}
```

Done now



---

archive/issue_comments_426146.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-30T03:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426146",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426147.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T17:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426147",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426148.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-09-01T22:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426148",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426149.json:
```json
{
    "body": "Thanks for the changes. LGTM, after #34451#comment:21 is fixed. \n\nA minor typo in the doctests of `FiniteRankFreeModule_abstract.is_submodule`:\n\n```diff\n-            sage: N = FiniteRankFreeModule(ZZ, 4, name='M')\n+            sage: N = FiniteRankFreeModule(ZZ, 4, name='N')\n```\n\n\nWhat about adding an AUTHOR field in the main docstring of the new files `tensor_free_submodule.py` and `tensor_free_submodule_basis.py`? Similarly, what about updating the AUTHORS field of other files, especially `finite_rank_free_module.py` regarding `FiniteRankFreeModule_abstract`?",
    "created_at": "2022-09-02T09:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426149",
    "user": "egourgoulhon"
}
```

Thanks for the changes. LGTM, after #34451#comment:21 is fixed. 

A minor typo in the doctests of `FiniteRankFreeModule_abstract.is_submodule`:

```diff
-            sage: N = FiniteRankFreeModule(ZZ, 4, name='M')
+            sage: N = FiniteRankFreeModule(ZZ, 4, name='N')
```


What about adding an AUTHOR field in the main docstring of the new files `tensor_free_submodule.py` and `tensor_free_submodule_basis.py`? Similarly, what about updating the AUTHORS field of other files, especially `finite_rank_free_module.py` regarding `FiniteRankFreeModule_abstract`?



---

archive/issue_comments_426150.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T16:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426150",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426151.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426151",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426152.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T17:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426152",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426153.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T17:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426153",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426154.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T18:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426154",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426155.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-04T17:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426155",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426156.json:
```json
{
    "body": "Looks good! Thanks.",
    "created_at": "2022-09-04T17:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426156",
    "user": "egourgoulhon"
}
```

Looks good! Thanks.



---

archive/issue_comments_426157.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-09-04T18:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426157",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_426158.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-09-04T18:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426158",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_426159.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-09-04T18:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426159",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_426160.json:
```json
{
    "body": "I've merged #34474 to resolve a merge conflict\n----\nNew commits:",
    "created_at": "2022-09-04T18:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426160",
    "user": "mkoeppe"
}
```

I've merged #34474 to resolve a merge conflict
----
New commits:



---

archive/issue_comments_426161.json:
```json
{
    "body": "Replying to [comment:123 Matthias K\u00f6ppe]:\n> I've merged #34474 to resolve a merge conflict\n\nOK.\n\nAt the moment, we have:\n\n```\nsage: M = FiniteRankFreeModule(ZZ, 2, name='M')\nsage: e = M.basis('e')\nsage: S = M.tensor_module(2, 0, sym=(0,1))\nsage: s = M.tensor((2, 0), sym=(0,1))\nsage: s[0,1] = 2\nsage: s.display()\n2 e_0\u2297e_1 + 2 e_1\u2297e_0\nsage: s.parent() is S\nFalse\nsage: s.parent()\nFree module of type-(2,0) tensors on the Rank-2 free module M over the Integer Ring\n```\n\nbut I guess `s.parent()` being `S` should be for a follow-up ticket...",
    "created_at": "2022-09-04T19:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426161",
    "user": "egourgoulhon"
}
```

Replying to [comment:123 Matthias Köppe]:
> I've merged #34474 to resolve a merge conflict

OK.

At the moment, we have:

```
sage: M = FiniteRankFreeModule(ZZ, 2, name='M')
sage: e = M.basis('e')
sage: S = M.tensor_module(2, 0, sym=(0,1))
sage: s = M.tensor((2, 0), sym=(0,1))
sage: s[0,1] = 2
sage: s.display()
2 e_0⊗e_1 + 2 e_1⊗e_0
sage: s.parent() is S
False
sage: s.parent()
Free module of type-(2,0) tensors on the Rank-2 free module M over the Integer Ring
```

but I guess `s.parent()` being `S` should be for a follow-up ticket...



---

archive/issue_comments_426162.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-04T19:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426162",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426163.json:
```json
{
    "body": "Yes, #34482 goes roughly into this direction.",
    "created_at": "2022-09-04T19:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426163",
    "user": "mkoeppe"
}
```

Yes, #34482 goes roughly into this direction.



---

archive/issue_comments_426164.json:
```json
{
    "body": "Replying to [comment:125 Matthias K\u00f6ppe]:\n> Yes, #34482 goes roughly into this direction.\nOK very good.",
    "created_at": "2022-09-04T19:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426164",
    "user": "egourgoulhon"
}
```

Replying to [comment:125 Matthias Köppe]:
> Yes, #34482 goes roughly into this direction.
OK very good.



---

archive/issue_comments_426165.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-22T22:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29992#issuecomment-426165",
    "user": "vbraun"
}
```

Resolution: fixed
