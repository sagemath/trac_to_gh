# Issue 16440: improve the docstrings in the finite state machines module

Issue created by migration from https://trac.sagemath.org/ticket/16677

Original creator: dkrenn

Original creation time: 2014-07-18 14:58:00

CC:  cheuberg skropf

The aim of this ticket is to collect various improvements to the docstring of the finite state machines module


---

Comment by dkrenn created at 2014-07-18 15:00:04

Last 10 new commits:


---

Comment by git created at 2014-07-18 16:52:21

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by cheuberg created at 2014-07-18 16:56:07

Changing status from new to needs_review.


---

Comment by cheuberg created at 2014-07-18 16:56:07

I merged #16588 and added the functions and methods from this and preceding tickets into the TOC. Furthermore, updated list of tickets in changelog.

I have reviewed Daniel's contributions, so once you reviewed mine, please set this to positive_review.


---

Comment by cheuberg created at 2014-07-18 16:56:07

Changing keywords from "" to "finite_state_machine, documentation".


---

Comment by dkrenn created at 2014-07-19 18:04:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-20 15:23:09

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-07-20 15:23:09

There is something wrong with 

```
sage -t --long src/sage/doctest/sources.py
**********************************************************************
File "src/sage/doctest/sources.py", line 689, in sage.doctest.sources.FileDocTestSource._test_enough_doctests
Failed example:
    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time
        path = os.path.relpath(path)
        dirs.sort(); files.sort()
        for F in files:
            _, ext = os.path.splitext(F)
            if ext in ('.py', '.pyx', '.pxi', '.sage', '.spyx', '.rst'):
                filename = os.path.join(path, F)
                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))
                FDS._test_enough_doctests(verbose=False)
Expected:
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 6 tests in sage/combinat/interval_posets.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 3 tests in sage/rings/invariant_theory.py that are not being run
Got:
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 4 tests in sage/combinat/finite_state_machine.py that are not being run
    There are 6 tests in sage/combinat/interval_posets.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 3 tests in sage/rings/invariant_theory.py that are not being run
**********************************************************************
1 item had failures:
   1 of   9 in sage.doctest.sources.FileDocTestSource._test_enough_doctests
    [337 tests, 1 failure, 57.03 s]
```



---

Comment by vbraun created at 2014-07-20 15:24:21

Also, license for the Sage library is GPLv2+ not 3+.


---

Comment by git created at 2014-07-21 09:17:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2014-07-21 09:27:44

Replying to [comment:7 vbraun]:
> There is something wrong with 
> {{{
> sage -t --long src/sage/doctest/sources.py
> **********************************************************************
> ...
> Expected: 
> ...
> Got:
> ...
>     There are 4 tests in sage/combinat/finite_state_machine.py that are not being run
> ...
> **********************************************************************
> 1 item had failures:
>    1 of   9 in sage.doctest.sources.FileDocTestSource._test_enough_doctests
>     [337 tests, 1 failure, 57.03 s]
> }}}

This was fixed by adding the line above into sources.py. Those 4 tests are indeed not tested by the doctest framework. I've created #16693 for this issue.


---

Comment by dkrenn created at 2014-07-21 09:27:54

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-07-21 10:46:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2014-07-21 10:48:06

Merged #15683 to avoid a merge conflict.


---

Comment by cheuberg created at 2014-07-21 11:28:48

Reviewed the changes. Fater merging #15683, trac's automerge still fails for unknown reasons: merging this ticket into 6.3.beta6 does succeed.


---

Comment by cheuberg created at 2014-07-21 11:28:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-22 16:33:57

Resolution: fixed
