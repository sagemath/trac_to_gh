# Issue 33041: Adapt Macaulay2 interface doctests to Macaulay2 1.19

Issue created by migration from https://trac.sagemath.org/ticket/33278

Original creator: @sheerluck

Original creation time: 2022-02-02 20:59:51

CC:  @sheerluck slelievre

We adapt the Macaulay2 interface doctests
to Macaulay2 1.19.



---

Comment by slelievre created at 2022-02-02 21:00:36

New commits:


---

Comment by slelievre created at 2022-02-02 21:00:36

Changing status from new to needs_review.


---

Comment by slelievre created at 2022-02-02 21:00:36

Changing keywords from "" to "Macaulay2".


---

Comment by @mwageringel created at 2022-02-03 08:04:34

I am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?


```
sage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py
**********************************************************************
File "src/sage/rings/ideal.py", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_
Failed example:
    macaulay2(ideal(QQ(5)))                   # optional - macaulay2
Expected:
    ideal 1
Got:
    doctest:warning
    ...
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
```



---

Comment by @sheerluck created at 2022-02-03 09:15:22

Replying to [comment:2 gh-mwageringel]:
>Is it present on your version as well?
yes

```
      File "<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>", line 1, in <module>
        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2
      File "/usr/lib/python3.10/site-packages/sage/rings/ideal.py", line 197, in Ideal
        warnings.warn(f'Constructing an ideal in {R}, which is a field.'
      File "/usr/lib/python3.10/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_
    0 tests not run because we ran out of time
    [373 tests, 1 failure, 2.79 s]
```



---

Comment by git created at 2022-02-05 13:29:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2022-02-05 13:35:48

Thank you for the doctest fixes. I have resolved the problem in `ideal.py` â€“ the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.

Moreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.

If you agree with these changes, we can set this ticket to positive.


---

Comment by @sheerluck created at 2022-02-05 15:17:01


```
sage -t --long --random-seed=19 interfaces/macaulay2.py
    2 not tested tests not run
    0 tests not run because we ran out of time
    [296 tests, 19.94 s]
----------------------------------------------------------------------
All tests passed!

sage -t --long --random-seed=19 rings/ideal.py
    0 tests not run because we ran out of time
    [374 tests, 3.02 s]
----------------------------------------------------------------------
All tests passed!
```

Thank you, tests are compatible with both 1.18 and 1.19.


---

Comment by @sheerluck created at 2022-02-05 15:17:01

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-02-16 23:57:10

Resolution: fixed
