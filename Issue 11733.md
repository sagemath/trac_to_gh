# Issue 11733: Move _splitting_field from elliptic curves to rings

Issue created by migration from https://trac.sagemath.org/ticket/11905

Original creator: jdemeyer

Original creation time: 2011-10-07 13:45:59

Assignee: davidloeffler

CC:  cremona

`sage/schemes/elliptic_curves/gal_reps.py` has code to compute a splitting field, but that clearly does not belong to elliptic curves.  In the mean time, we should think about possible speedups.


---

Comment by jdemeyer created at 2011-11-07 16:38:14

Changing component from number fields to elliptic curves.


---

Comment by jdemeyer created at 2011-11-07 16:38:14

Changing assignee from davidloeffler to cremona.


---

Comment by wuthrich created at 2011-11-08 14:30:49

Thanks for spotting and changing this. One could even argue that the division field should be available to all elliptic curves, not just the ones over QQ. But this could be changed later.


---

Comment by jdemeyer created at 2011-11-08 14:32:31

This is still very much work in progress by the way.


---

Comment by jdemeyer created at 2011-11-10 11:32:48

Replying to [comment:4 wuthrich]:
> Thanks for spotting and changing this. One could even argue that the division field should be available to all elliptic curves, not just the ones over QQ. But this could be changed later.

I can easily do number fields, very general fields would be harder.


---

Attachment


---

Comment by chapoton created at 2013-11-04 20:28:07

#2217 is ready for review


---

Comment by git created at 2014-01-03 17:06:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:


---

Comment by git created at 2014-01-03 22:00:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:


---

Comment by git created at 2014-01-03 22:17:44

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:


---

Comment by git created at 2014-01-03 22:44:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:


---

Comment by cremona created at 2014-01-05 13:57:10

I know that this is not yet marked as ready for review, but I did look at the code anyway.  One minor remark:  after adjoining all the x-coordinates of the p-division points, *either* you have the full division field already, i.e. you have all the y-coordinates, *or* you have none, i.e. you have none of the y-coordinates.  This could be used, possibly, to simplify that last part of the division field code.  But it is not clear to me that there is a quicker way of determining that final quadratic extension than picking any of the x-coordinates of a p-division point and solving for y.


---

Comment by jdemeyer created at 2014-01-05 16:17:03

Replying to [comment:19 cremona]:
> I know that this is not yet marked as ready for review, but I did look at the code anyway.  One minor remark:  after adjoining all the x-coordinates of the p-division points, *either* you have the full division field already, i.e. you have all the y-coordinates, *or* you have none, i.e. you have none of the y-coordinates.  This could be used, possibly, to simplify that last part of the division field code.  But it is not clear to me that there is a quicker way of determining that final quadratic extension than picking any of the x-coordinates of a p-division point and solving for y.
Not that I don't believe you, but do you have a reference for this? At least I could add it as a comment in the code.


---

Comment by cremona created at 2014-01-05 16:56:46

Replying to [comment:20 jdemeyer]:
> Replying to [comment:19 cremona]:
> > I know that this is not yet marked as ready for review, but I did look at the code anyway.  One minor remark:  after adjoining all the x-coordinates of the p-division points, *either* you have the full division field already, i.e. you have all the y-coordinates, *or* you have none, i.e. you have none of the y-coordinates.  This could be used, possibly, to simplify that last part of the division field code.  But it is not clear to me that there is a quicker way of determining that final quadratic extension than picking any of the x-coordinates of a p-division point and solving for y.
> Not that I don't believe you, but do you have a reference for this? At least I could add it as a comment in the code.

Proof.   For all P in E[p] and all Galois autos sigma (of K-bar over K) we have sigma(P)=+/-P since x(sigma(P))=sigma(x(P))=x(P).  Let P1, P2 be a basis for E[p].  For each sigma we have sigma(P1)=+/-P1 and sigma(P2)=+/-P2 and the signs are the *same* otherwise sigma(P1+P2) could not equal either +(P1+P2) or -(P1+P2).  So the image of sigma in the mod p Galois representation is either the identity or minus the identity.  In the first case, sigma fixes all points in E[p], in the second case it negates all of them.  So if the Galois rep is not trivial, its image has order 2 and its kernel cuts out a quadratic extension, say L/K.  In the latter case the non-trivial element sigma of Gal(L/K) maps to -1 which means that sigma(P)=-P for *all* P in E[p].

I don't know a reference!


---

Comment by git created at 2014-01-05 22:35:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-01-05 22:36:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-01-05 22:40:22

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-01-05 23:31:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-01-05 23:36:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2014-01-05 23:36:50

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-01-06 08:29:33

Note that only [05c57d2](http://git.sagemath.org/sage.git/commit/?id=05c57d2a031f34ac4d95ca5a13448c92206f0f41) needs to be reviewed.


---

Comment by cremona created at 2014-01-06 10:26:30

Looking good!  Can we have an example where the X-division field equals the division field, i.e. where the final step is not necessary?  And also an example (from the ones you give) showing that the splitting field of the division polynomial has half the degree of the division field?  I think that this would be instructive to see in the reference manual.  I see that in the code for the final step you again call splitting field with a quadratic; very efficient!

I think it says a lot for the good way in which you implemented splitting fields that this now becomes so simple!


---

Comment by git created at 2014-01-06 12:39:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2014-01-06 14:47:20

I was expecting to be able to pull the new commit on top of the old one, but that failed (merge conflict I think).  I just deleted the branch I had and made a new one.

Thanks for the new example, which do exactly what I wanted.  I read through the code again, and like it, and tested all of Sage with this commit as well as some of my own examples.


---

Comment by cremona created at 2014-01-06 14:47:20

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2014-01-06 16:34:34

Thanks again for the quick review!


---

Comment by vbraun created at 2014-01-07 07:20:27

Resolution: fixed
