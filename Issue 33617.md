# Issue 33617: Generalized Sierpinski graphs generator

Issue created by migration from https://trac.sagemath.org/ticket/33854

Original creator: dcoudert

Original creation time: 2022-05-15 13:29:02

CC:  tmonteil chapoton

See https://ask.sagemath.org/question/62417/generalized-sierpinski-graph-construction/



---

Comment by dcoudert created at 2022-05-15 13:53:25

New commits:


---

Comment by dcoudert created at 2022-05-15 13:53:25

Changing status from new to needs_review.


---

Comment by dcoudert created at 2022-05-15 14:04:01

To get the Sierpinski graph `S(n, k)`, it suffices to call `GeneralizedSierpinskiGraph` with a clique of order `n`.


---

Comment by @prajnanaswaroopa created at 2022-05-30 11:23:27

The source code as given on the [GitHub](GitHub) page, gives the error `object of type 'int' has no len()`.


---

Comment by dcoudert created at 2022-05-30 12:17:40

Which parameters have you used ? It's impossible for me to guess from your message.

Have you read and followed the description of the method ?


---

Comment by @prajnanaswaroopa created at 2022-05-30 16:41:47

I used the parameters `H=graphs.CompleteGraph(4)`, `kk=2`. I tried to modify the code to make it somehow work by changing `next(H.vertex_iterator())` to `H.order()` and the line`J = H.relabel(perm={u: (i,) + u for u in H}, inplace=False)` to `J = H.relabel(perm={u: (i,u) for u in H}, inplace=False)`. But the graph output is not as expected. On only changing `next(H.vertex_iterator` to `H.order()`, the error is `can only concatenate tuple, not 'int' to tuple`.


---

Comment by dcoudert created at 2022-05-31 07:46:39

Can you clarify what you expect ?


The code in this ticket strictly follows the definition given in the paper by Gravier, Kovse and Parreau, and we can get all the examples given in the papers about generalized Sierpinski graphs. For your parameters, we get:

```
sage: G = GeneralizedSierpinskiGraph(graphs.CompleteGraph(4), 2)
sage: print(G.vertices())
[(0, 0), (0, 1), (0, 2), (0, 3), (1, 0), (1, 1), (1, 2), (1, 3), (2, 0), (2, 1), (2, 2), (2, 3), (3, 0), (3, 1), (3, 2), (3, 3)]
sage: print(G.edges(labels=False))
[((0, 0), (0, 1)), ((0, 0), (0, 2)), ((0, 0), (0, 3)), ((0, 1), (0, 2)), ((0, 1), (0, 3)), ((0, 1), (1, 0)), ((0, 2), (0, 3)), ((0, 2), (2, 0)), ((0, 3), (3, 0)), ((1, 0), (1, 1)), ((1, 0), (1, 2)), ((1, 0), (1, 3)), ((1, 1), (1, 2)), ((1, 1), (1, 3)), ((1, 2), (1, 3)), ((1, 2), (2, 1)), ((1, 3), (3, 1)), ((2, 0), (2, 1)), ((2, 0), (2, 2)), ((2, 0), (2, 3)), ((2, 1), (2, 2)), ((2, 1), (2, 3)), ((2, 2), (2, 3)), ((2, 3), (3, 2)), ((3, 0), (3, 1)), ((3, 0), (3, 2)), ((3, 0), (3, 3)), ((3, 1), (3, 2)), ((3, 1), (3, 3)), ((3, 2), (3, 3))]
```


If you want another construction, please give its formal definition.


---

Comment by @prajnanaswaroopa created at 2022-05-31 08:35:39

Where are you able to run the function? I mean, do you use the Sage compiler, or, you use some other kernel to run the command `GeneralizedSierpinskiGraph(,)`. Or, did you write the full source code and then run the function?


---

Comment by dcoudert created at 2022-05-31 08:53:04

I copy/paste the method in a sagemath console, but you can also use a Jupyter notebook running sagemath kernel.


---

Comment by @prajnanaswaroopa created at 2022-05-31 10:26:52

Thanks! I copied the whole source code from Git Hub page, and it worked well. Hope this get pushed to Sage repository soon.


---

Comment by dcoudert created at 2022-05-31 10:38:00

feel free to help reviewing this ticket.


---

Comment by tmonteil created at 2022-05-31 20:04:34

Changing status from needs_review to needs_work.


---

Comment by tmonteil created at 2022-05-31 20:04:34

This is only a tiny contribution to the review, since i did not check the code. Here are some typos:

- "Sierpiński" : the accent is over the `n`, not the `s`
- "pervertex"

Also, the motivation for such a construction seems to be geometrical. So, if the vertices of a graph have planar positions, then so should its generalized Sierpiński image. For example, with the house graph of the poster:


```
graphs.HouseGraph().plot()
```


but


```
graphs.GeneralizedSierpinskiGraph(graphs.HouseGraph(),2).plot()
```



---

Comment by tmonteil created at 2022-05-31 20:08:30

Also, if you add crosslinks to `SierpinskiGasketGraph` and `HanoiTowerGraph`, perhaps should there also be links to `GeneralizedSierpinskiGraph` from those constructions.


---

Comment by git created at 2022-06-01 08:26:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-06-01 08:27:34

> - "Sierpiński" : the accent is over the `n`, not the `s`
I'm unable to locate the typo

I agree that it would be nice to provide the nice embedding, but I I don't know how to do that.


---

Comment by tmonteil created at 2022-06-01 14:32:02

Replying to [comment:15 dcoudert]:
> > - "Sierpiński" : the accent is over the `n`, not the `s`
> I'm unable to locate the typo

Oh, it seems that the trac text editor and the gitweb moved the accent, see https://git.sagemath.org/sage.git/diff?id2=5fb2a6ea44400e469caee82748cf863ca0c5f724&id=30623b43ac501d96a5899c7f01ebd76c30a234b9 (8 occurrences).

> I agree that it would be nice to provide the nice embedding, but I I don't know how to do that.

If you have a graph of depth 3, any vertex comes from 3 vertices (i,j,k), one for each depth. You can set the position of that vertex to `pos(i) + K*pos(j) + K^2*pos(k)` where K > 1 is some stretching factor, that could be set by the user or its default value could be computed as, say, twice the geometrical diameter of the graph.


---

Comment by git created at 2022-06-04 10:29:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-06-04 10:30:16

I followed your idea. We can get some nice plots.


---

Comment by dcoudert created at 2022-06-04 11:45:29

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2022-06-16 16:36:24

We have green bot.


---

Comment by chapoton created at 2022-06-20 08:03:19

Please avoid the unicode character in the reference here

```
95–104
```


Then you can set to positive


---

Comment by git created at 2022-06-20 09:00:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-06-20 09:01:25

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2022-06-20 09:01:25

Thanks for the review.


---

Comment by tmonteil created at 2022-06-20 09:16:08

I was thinking of a better placement formula, since some pictures are not well rendered, but it will be for a future ticket.


---

Comment by vbraun created at 2022-06-27 22:48:27

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2022-06-27 22:48:27

pdf docs don't build


---

Comment by git created at 2022-06-28 07:01:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-28 07:04:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-06-28 07:18:56

Now the problem is the accent in `Sierpiński` in `families.py`. What's the trick to put it ? the alternative is to remove it.


---

Comment by dcoudert created at 2022-06-29 15:03:57

`@` Frédéric, do you know how to add utf8 symbols to the documentation of a method without breaking the pdf doc ?


---

Comment by chapoton created at 2022-06-29 15:15:21

one has to declare characters one by one

see

```
src/sage_docbuild/conf.py:    \DeclareUnicodeCharacter{0428}{cyrillic Sha}
```



---

Comment by dcoudert created at 2022-06-29 17:13:29

I tried to add ` \DeclareUnicodeCharacter{0144}{Latin small letter n with acute}`, but the pdf compilation still failed.


---

Comment by chapoton created at 2022-06-29 19:12:28

strange (and probably wrong) use of latex syntax for accents in the master reference file


---

Comment by chapoton created at 2022-06-29 19:14:41

The ï of Hanoï is certainly problematic too


---

Comment by git created at 2022-06-29 22:40:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-29 22:45:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-06-29 22:46:17

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2022-06-29 22:46:17

I removed the unicode characters.


---

Comment by chapoton created at 2022-07-07 05:32:53

are we ok with the accents in

```
Sandi Klavžar and Uroš Milutinović
```

?


---

Comment by dcoudert created at 2022-07-07 07:10:52

I can build the both the html and the pdf docs with the current branch.

May be the issue with the special character in Sierpinski is that I don't have both the right unicode character and its code.


---

Comment by chapoton created at 2022-07-07 07:27:56

alors on peut ré-essayer.


---

Comment by chapoton created at 2022-07-07 07:27:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-07-09 22:33:32

Resolution: fixed
