# Issue 27684: Package libxml2 (polymake prerequisite)

Issue created by migration from https://trac.sagemath.org/ticket/27921

Original creator: mkoeppe

Original creation time: 2019-06-03 03:13:43

CC:  dimpase dcoudert

Apparently some Linux systems don't come with libxml2 installed, which is a polymake prerequisite.

```
mkoeppe.sphere$ make polymake
...
[polymake-3.4] checking libxml2 installation ... Could not find configuration program xml2-config for library libxml2.
[polymake-3.4] Probably you need to install development package for it;
[polymake-3.4] usually it is called libxml2-devel or similarly.
[polymake-3.4] If the library is installed at a non-standard location,
[polymake-3.4] please specify it in option --with-libxml2
```



---

Comment by dimpase created at 2019-06-03 06:45:07

I would rather add this to general Sage pre-reqs. And a test for it in the main configure.ac. Let us try to stop vendoring everything that comes across...


---

Comment by mkoeppe created at 2019-06-03 07:04:28

I appreciate your efforts with spkg-configure.m4; but I don't support adding more prerequisites to Sage. Sage-the-distribution works well for installing lots of math software on poorly maintained university computers. My goal in this ticket is to bring the polymake package to the same standard - make it as easy to install as other sage packages.


---

Comment by mkoeppe created at 2019-06-03 07:08:11

Replying to [comment:3 mkoeppe]:
> I don't support adding more prerequisites to Sage.
To clarify, I don't support depending on more packages to exist in the system for a Sage installation to succeed.
----
New commits:


---

Comment by mkoeppe created at 2019-06-03 07:08:34

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2019-06-03 07:15:13

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-06-03 07:27:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-06-03 07:39:11

a library should only be vendored if on a system supported by Sage it is either not available, or broken. Otherwise it is a bloat that is killing the project, rather than improving it.

there are already other optional packages, e.g. igraph, in Sage that require libxml2.


---

Comment by git created at 2019-06-03 07:55:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2019-06-03 07:56:37

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2019-06-03 08:22:46

there is also R package xml2, which uses libxml2, and which some people install --- and which this ticket potentially breaks.

this is yet another reason why I don't like vendoring standard libraries - because you end up spending all your time chasing up stuff like this, and it ends up like iconv package, which is still there, but we don't install it on anything but (maybe) cygwin, or (broken platform) solaris.


---

Comment by mkoeppe created at 2019-06-03 18:43:50

Changing status from needs_review to needs_info.


---

Comment by mkoeppe created at 2019-06-03 18:43:50

Lots of good points. Turns out on the system where I was trying to compile polymake, also `perl-devel` and `Term::ReadKey` are missing. 
So I'm setting this ticket to 'wishlist' status for now.


---

Comment by mkoeppe created at 2020-12-03 04:36:07

Changing status from needs_info to needs_work.


---

Comment by git created at 2020-12-03 04:39:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-12-03 04:53:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-12-03 04:55:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-12-03 05:07:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-12-03 05:14:30

Changing status from needs_work to needs_review.


---

Comment by git created at 2020-12-03 05:15:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-12-03 19:59:46

I installed libxml2 with homebrew and tried this ticket (.bootstrap, source .hombrew-build-env, ./configure, make build) on macOS 10.15.7. Compilation went well, libxml2 was detected and used.

I don't know what else I can do to test this ticket.


---

Comment by dimpase created at 2020-12-03 23:08:41

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-12-03 23:08:41

lgtm


---

Comment by mkoeppe created at 2020-12-03 23:40:09

Thanks to both of you for the review!


---

Comment by vbraun created at 2020-12-06 12:49:34

Resolution: fixed
