# Issue 24171: refine the category of fraction field

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-12-20 13:54:14

CC:  jdemeyer tscrim fbissey embray

when one knows if the ring is finite or not


---

Comment by chapoton created at 2017-12-20 13:54:36

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-12-20 13:54:36

New commits:


---

Comment by chapoton created at 2017-12-20 16:05:41

green bot, please review


---

Comment by tscrim created at 2017-12-20 22:10:31

I'm not sure if this will be something that comes up. It is possible that something does not have `characteristic` implemented, but it knows it is in `Rings().Finite()`. So I feel like you should actually the characteristic test as the third try (not the second). Or should anything in `Rings().Finite()` be able to compute its characteristic (say, by adding a method at the category level)?


---

Comment by vdelecroix created at 2017-12-21 08:59:05

I would even go further than Travis: it would be better to completely avoid calling the characteristic. That way
- it will not trigger an error (so that you can remove `try/except`)
- faster, simpler
- avoid having a `FractionField` more aware of categories than the initial base ring


---

Comment by git created at 2017-12-21 09:25:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-12-21 09:27:06

I have removed the try/except. As a consequence, fraction fields of polynomial rings over QQ do not get the new information that they are infinite.


---

Comment by vdelecroix created at 2017-12-21 09:35:30

Replying to [comment:6 chapoton]:
> I have removed the try/except. As a consequence, fraction fields of polynomial rings over QQ do not get the new information that they are infinite.

Better! One has to fix polynomial rings then (not their fraction fields).

```
sage: QQ['x'] in Sets().Infinite()
False
```



---

Comment by chapoton created at 2017-12-21 09:47:18

Indeed. But let us keep that for another ticket, no ?


---

Comment by vdelecroix created at 2017-12-21 09:56:40

Replying to [comment:8 chapoton]:
> Indeed. But let us keep that for another ticket, no ?

Of course. I was just pointing the real problem.


---

Comment by vdelecroix created at 2017-12-21 09:57:06

I am happy with this version. I let Travis apply the final sentence.


---

Comment by tscrim created at 2017-12-21 20:39:03

Yep, LGTM.


---

Comment by tscrim created at 2017-12-21 20:39:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-25 18:21:15

Resolution: fixed
