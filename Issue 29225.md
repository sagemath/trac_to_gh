# Issue 29225: Reject nauty version < 2.6

archive/issues_029225.json:
```json
{
    "body": "CC:  @mkoeppe @orlitzky @dimpase\n\nKeywords: nauty, digraph6\n\nWe get the following failure on some systems, see e.g. [https://github.com/kliem/sage-test-27122/runs/558808988](https://github.com/kliem/sage-test-27122/runs/558808988):\n\n\n```\nFile \"src/sage/graphs/digraph_generators.py\", line 600, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg\nFailed example:\n    dgs[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[3]>\", line 1, in <module>\n        dgs[Integer(0)]\n    IndexError: list index out of range\n**********************************************************************\nFile \"src/sage/graphs/digraph_generators.py\", line 602, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg\nFailed example:\n    dgs[0]._bit_vector()\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[4]>\", line 1, in <module>\n        dgs[Integer(0)]._bit_vector()\n    IndexError: list index out of range\n```\n\n\nThe problem is that we use digraph6, a format which is not supported by nauty previous to 2.6 according to\n\n[http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt](http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt)\n\nIssue created by migration from https://trac.sagemath.org/ticket/29462\n\n",
    "created_at": "2020-04-04T09:26:35Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Reject nauty version < 2.6",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29225",
    "user": "https://github.com/kliem"
}
```
CC:  @mkoeppe @orlitzky @dimpase

Keywords: nauty, digraph6

We get the following failure on some systems, see e.g. [https://github.com/kliem/sage-test-27122/runs/558808988](https://github.com/kliem/sage-test-27122/runs/558808988):


```
File "src/sage/graphs/digraph_generators.py", line 600, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[3]>", line 1, in <module>
        dgs[Integer(0)]
    IndexError: list index out of range
**********************************************************************
File "src/sage/graphs/digraph_generators.py", line 602, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]._bit_vector()
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[4]>", line 1, in <module>
        dgs[Integer(0)]._bit_vector()
    IndexError: list index out of range
```


The problem is that we use digraph6, a format which is not supported by nauty previous to 2.6 according to

[http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt](http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt)

Issue created by migration from https://trac.sagemath.org/ticket/29462





---

archive/issue_comments_413748.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413748",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_413749.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413749",
    "user": "https://github.com/orlitzky"
}
```

New commits:



---

archive/issue_comments_413750.json:
```json
{
    "body": "I would say it is good to go. Does anyone think this needs testing?\n\nI checked that indeed `converseg` doesn't show up in version 2.5b9 but it is there in version 2.6.",
    "created_at": "2020-04-04T12:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413750",
    "user": "https://github.com/kliem"
}
```

I would say it is good to go. Does anyone think this needs testing?

I checked that indeed `converseg` doesn't show up in version 2.5b9 but it is there in version 2.6.



---

archive/issue_comments_413751.json:
```json
{
    "body": "I just started a test #29462, #29442, #29440, #29272, #29445.\n\n[https://github.com/kliem/sage-test-27122/actions/runs/70559675](https://github.com/kliem/sage-test-27122/actions/runs/70559675)\n\nI'll put it on positive review, if this works as desired.",
    "created_at": "2020-04-04T13:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413751",
    "user": "https://github.com/kliem"
}
```

I just started a test #29462, #29442, #29440, #29272, #29445.

[https://github.com/kliem/sage-test-27122/actions/runs/70559675](https://github.com/kliem/sage-test-27122/actions/runs/70559675)

I'll put it on positive review, if this works as desired.



---

archive/issue_comments_413752.json:
```json
{
    "body": "Ok. Works.\n\nE.g. nauty is being rejected on ubuntu-xenial, so that the doctest passes. But it is accepted by ubuntu-bionic.",
    "created_at": "2020-04-05T06:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413752",
    "user": "https://github.com/kliem"
}
```

Ok. Works.

E.g. nauty is being rejected on ubuntu-xenial, so that the doctest passes. But it is accepted by ubuntu-bionic.



---

archive/issue_comments_413753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-05T06:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413753",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_413754.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-09T22:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29225#issuecomment-413754",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_027006.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2020-04-09T22:44:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29225",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29225#event-27006"
}
```
