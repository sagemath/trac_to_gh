# Issue 29225: Reject nauty version < 2.6

Issue created by migration from https://trac.sagemath.org/ticket/29462

Original creator: @kliem

Original creation time: 2020-04-04 09:26:35

CC:  mkoeppe mjo dimpase

Keywords: nauty, digraph6

We get the following failure on some systems, see e.g. [https://github.com/kliem/sage-test-27122/runs/558808988](https://github.com/kliem/sage-test-27122/runs/558808988):


```
File "src/sage/graphs/digraph_generators.py", line 600, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[3]>", line 1, in <module>
        dgs[Integer(0)]
    IndexError: list index out of range
**********************************************************************
File "src/sage/graphs/digraph_generators.py", line 602, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]._bit_vector()
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[4]>", line 1, in <module>
        dgs[Integer(0)]._bit_vector()
    IndexError: list index out of range
```


The problem is that we use digraph6, a format which is not supported by nauty previous to 2.6 according to

[http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt](http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt)


---

Comment by mjo created at 2020-04-04 11:54:05

Changing status from new to needs_review.


---

Comment by mjo created at 2020-04-04 11:54:05

New commits:


---

Comment by @kliem created at 2020-04-04 12:50:27

I would say it is good to go. Does anyone think this needs testing?

I checked that indeed `converseg` doesn't show up in version 2.5b9 but it is there in version 2.6.


---

Comment by @kliem created at 2020-04-04 13:17:48

I just started a test #29462, #29442, #29440, #29272, #29445.

[https://github.com/kliem/sage-test-27122/actions/runs/70559675](https://github.com/kliem/sage-test-27122/actions/runs/70559675)

I'll put it on positive review, if this works as desired.


---

Comment by @kliem created at 2020-04-05 06:22:18

Ok. Works.

E.g. nauty is being rejected on ubuntu-xenial, so that the doctest passes. But it is accepted by ubuntu-bionic.


---

Comment by @kliem created at 2020-04-05 06:22:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-04-09 22:44:18

Resolution: fixed
