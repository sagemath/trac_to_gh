# Issue 32148: Function to Compute the Bergman and Augmented Bergman Complex of a Matroid

archive/issues_032148.json:
```json
{
    "body": "CC:  @trevorkarn\n\nKeywords: Bergman, Augmented-Bergman, Simplicial-Complex\n\nThe Bergman complex is the order complex of the lattice of flats of a matroid with the minimal and maximal element removed.\n\nThe augmented Bergman complex is a simplicial complex derived from a matroid, initially introduced by Braden, Huh, Matherne, Proudfoot and Wang.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32385\n\n",
    "created_at": "2021-08-16T15:59:07Z",
    "labels": [
        "matroid theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Function to Compute the Bergman and Augmented Bergman Complex of a Matroid",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32148",
    "user": "@sunbri"
}
```
CC:  @trevorkarn

Keywords: Bergman, Augmented-Bergman, Simplicial-Complex

The Bergman complex is the order complex of the lattice of flats of a matroid with the minimal and maximal element removed.

The augmented Bergman complex is a simplicial complex derived from a matroid, initially introduced by Braden, Huh, Matherne, Proudfoot and Wang.

Issue created by migration from https://trac.sagemath.org/ticket/32385





---

archive/issue_comments_459116.json:
```json
{
    "body": "Set assignee to @sunbri.",
    "created_at": "2021-08-16T15:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459116",
    "user": "@sunbri"
}
```

Set assignee to @sunbri.



---

archive/issue_comments_459117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-25T18:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459118.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-12T21:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459118",
    "user": "@trevorkarn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_459119.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459119",
    "user": "@mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_459120.json:
```json
{
    "body": "Branch is broken - contains a submodule `git-trac-command`",
    "created_at": "2022-02-13T07:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459120",
    "user": "@mkoeppe"
}
```

Branch is broken - contains a submodule `git-trac-command`



---

archive/issue_comments_459121.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-02-13T07:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459121",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_459122.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-03-01T16:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459122",
    "user": "@trevorkarn"
}
```

New commits:



---

archive/issue_comments_459123.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-03T04:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459123",
    "user": "@trevorkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_459124.json:
```json
{
    "body": "spelling: simplicies -> simplices\n\nIn these examples:\n\n```\n+            sage: M=matroids.named_matroids.Fano()\n+            sage: A=M.augmented_bergman_complex(); A\n```\n\nchange `=` to ` = ` for pep 8 compliance.\n\nThe patchbot plugin \"blocks\" complains about some doc markup. \n\nAnd the patchbot complains about failing docbuild",
    "created_at": "2022-03-04T06:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459124",
    "user": "@mkoeppe"
}
```

spelling: simplicies -> simplices

In these examples:

```
+            sage: M=matroids.named_matroids.Fano()
+            sage: A=M.augmented_bergman_complex(); A
```

change `=` to ` = ` for pep 8 compliance.

The patchbot plugin "blocks" complains about some doc markup. 

And the patchbot complains about failing docbuild



---

archive/issue_comments_459125.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-04T06:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459125",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_459126.json:
```json
{
    "body": "And copmlex -> complex.\n\nTry running `tox -e codespell`",
    "created_at": "2022-03-04T06:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459126",
    "user": "@mkoeppe"
}
```

And copmlex -> complex.

Try running `tox -e codespell`



---

archive/issue_comments_459127.json:
```json
{
    "body": "hodge and chow should take capitals in the references\n\nReturns should be Return (in the first lines)\n\n`..SEEALSO::` should be `.. SEEALSO::`, same for TODO",
    "created_at": "2022-03-04T08:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459127",
    "user": "@fchapoton"
}
```

hodge and chow should take capitals in the references

Returns should be Return (in the first lines)

`..SEEALSO::` should be `.. SEEALSO::`, same for TODO



---

archive/issue_comments_459128.json:
```json
{
    "body": "and typos in the references too\n\n```\n[sagemath_doc_html-none] [matroids ] docstring of sage.matroids.matroid.Matroid.augmented_bergman_complex:44: WARNING: citation not found: BMHPW10\n[sagemath_doc_html-none] [matroids ] docstring of sage.matroids.matroid.Matroid.augmented_bergman_complex:45: WARNING: citation not found: BMHPW20\n```\n\nversus BHMPW10",
    "created_at": "2022-03-04T09:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459128",
    "user": "@fchapoton"
}
```

and typos in the references too

```
[sagemath_doc_html-none] [matroids ] docstring of sage.matroids.matroid.Matroid.augmented_bergman_complex:44: WARNING: citation not found: BMHPW10
[sagemath_doc_html-none] [matroids ] docstring of sage.matroids.matroid.Matroid.augmented_bergman_complex:45: WARNING: citation not found: BMHPW20
```

versus BHMPW10



---

archive/issue_comments_459129.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-07T18:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459129",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-07T18:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459130",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459131.json:
```json
{
    "body": "Thanks for the feedback! I tried running `tox -e codespell` and got an `InvocationError`. From the [documentation](https://doc.sagemath.org/html/en/developer/tools.html#codespell), it looks like this means that things (at least common words) are spelled correctly? Is that correct?",
    "created_at": "2022-03-07T18:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459131",
    "user": "@trevorkarn"
}
```

Thanks for the feedback! I tried running `tox -e codespell` and got an `InvocationError`. From the [documentation](https://doc.sagemath.org/html/en/developer/tools.html#codespell), it looks like this means that things (at least common words) are spelled correctly? Is that correct?



---

archive/issue_comments_459132.json:
```json
{
    "body": "Changing assignee from @sunbri to @trevorkarn.",
    "created_at": "2022-03-07T18:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459132",
    "user": "@trevorkarn"
}
```

Changing assignee from @sunbri to @trevorkarn.



---

archive/issue_comments_459133.json:
```json
{
    "body": "\n```\ntox -e codespell -- src/sage/matroids/matroid.pyx\n...\nsage/matroids/matroid.pyx:3584: ot ==> to, of, or\nsage/matroids/matroid.pyx:3586: ot ==> to, of, or\nsage/matroids/matroid.pyx:3587: ot ==> to, of, or\n```\n\nIt complains about a cryptic choice of variable name somewhere in this file. But it's not coming from your changes, so it's safe to ignore.",
    "created_at": "2022-03-08T02:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459133",
    "user": "@mkoeppe"
}
```


```
tox -e codespell -- src/sage/matroids/matroid.pyx
...
sage/matroids/matroid.pyx:3584: ot ==> to, of, or
sage/matroids/matroid.pyx:3586: ot ==> to, of, or
sage/matroids/matroid.pyx:3587: ot ==> to, of, or
```

It complains about a cryptic choice of variable name somewhere in this file. But it's not coming from your changes, so it's safe to ignore.



---

archive/issue_comments_459134.json:
```json
{
    "body": "Great thanks!",
    "created_at": "2022-03-08T04:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459134",
    "user": "@trevorkarn"
}
```

Great thanks!



---

archive/issue_comments_459135.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-08T04:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459135",
    "user": "@trevorkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_459136.json:
```json
{
    "body": "\n```\n+        dictionary = {}\n+        for flat in flats:\n+            dictionary[flat] = flats.subposet(flats.principal_order_filter(flat)).maximal_chains()\n```\n\nI'd think this would be better to write as a dict comprehension. Just a suggestion",
    "created_at": "2022-03-08T04:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459136",
    "user": "@mkoeppe"
}
```


```
+        dictionary = {}
+        for flat in flats:
+            dictionary[flat] = flats.subposet(flats.principal_order_filter(flat)).maximal_chains()
```

I'd think this would be better to write as a dict comprehension. Just a suggestion



---

archive/issue_comments_459137.json:
```json
{
    "body": "I also think it would be good to include a really small example that illustrates the naming of the elements (\"L...\" and \"R...\").\n\nRelated to this, in this code:\n\n```\n+                    for elt in chain:\n+                        for c in cache:\n+                            if elt == c:\n+                                face.append(f'R{c}')\n```\n\nso do I understand correctly that `elt` and `c` are equal but do not necessarily have the same print representation?",
    "created_at": "2022-03-08T04:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459137",
    "user": "@mkoeppe"
}
```

I also think it would be good to include a really small example that illustrates the naming of the elements ("L..." and "R...").

Related to this, in this code:

```
+                    for elt in chain:
+                        for c in cache:
+                            if elt == c:
+                                face.append(f'R{c}')
```

so do I understand correctly that `elt` and `c` are equal but do not necessarily have the same print representation?



---

archive/issue_comments_459138.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-20T20:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459138",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459139.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-20T20:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459139",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459140.json:
```json
{
    "body": "\n```\n+        to the independent set complex and ``R`` when the belong to the\n```\n\nwhen \"they\"",
    "created_at": "2022-03-20T20:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459140",
    "user": "@mkoeppe"
}
```


```
+        to the independent set complex and ``R`` when the belong to the
```

when "they"



---

archive/issue_comments_459141.json:
```json
{
    "body": "Replying to [comment:21 mkoeppe]:\n> I also think it would be good to include a really small example that illustrates the naming of the elements (\"L...\" and \"R...\").\n\nAdded, thanks!\n\n> Related to this, in this code:\n> {{{\n> +                    for elt in chain:\n> +                        for c in cache:\n> +                            if elt == c:\n> +                                face.append(f'R{c}')\n> }}}\n> so do I understand correctly that `elt` and `c` are equal but do not necessarily have the same print representation?\n\nI think the point here is that `c` is an element before taking the disjoint union, and so in order to add it to the disjoint union DM, we want to represent that same element by `Rc` so we go from the element in the cone of the Bergman complex to the element in the augmented Bergman complex.\n\nI hope the rewritten code clarifies this distinction.",
    "created_at": "2022-03-20T20:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459141",
    "user": "@trevorkarn"
}
```

Replying to [comment:21 mkoeppe]:
> I also think it would be good to include a really small example that illustrates the naming of the elements ("L..." and "R...").

Added, thanks!

> Related to this, in this code:
> {{{
> +                    for elt in chain:
> +                        for c in cache:
> +                            if elt == c:
> +                                face.append(f'R{c}')
> }}}
> so do I understand correctly that `elt` and `c` are equal but do not necessarily have the same print representation?

I think the point here is that `c` is an element before taking the disjoint union, and so in order to add it to the disjoint union DM, we want to represent that same element by `Rc` so we go from the element in the cone of the Bergman complex to the element in the augmented Bergman complex.

I hope the rewritten code clarifies this distinction.



---

archive/issue_comments_459142.json:
```json
{
    "body": "Thanks, the added documentation and the rewrite are great.\n\n\n```\n+        ## simplicies are \\{y_i\\}_{i\\in I}\\cup\\{x_{F_1},\\ldots,x_{F_\\ell}\\},\n```\n\n-> simplices\n\nAfter fixing and when the patchbot shows green, you can set it to positive review",
    "created_at": "2022-03-20T20:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459142",
    "user": "@mkoeppe"
}
```

Thanks, the added documentation and the rewrite are great.


```
+        ## simplicies are \{y_i\}_{i\in I}\cup\{x_{F_1},\ldots,x_{F_\ell}\},
```

-> simplices

After fixing and when the patchbot shows green, you can set it to positive review



---

archive/issue_comments_459143.json:
```json
{
    "body": "\n```\n+        for c in LM.chains(exclude = LM.maximal_elements()):\n```\n\nalso there shouldn't be spaces around the `=` here",
    "created_at": "2022-03-20T20:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459143",
    "user": "@mkoeppe"
}
```


```
+        for c in LM.chains(exclude = LM.maximal_elements()):
```

also there shouldn't be spaces around the `=` here



---

archive/issue_comments_459144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-20T20:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459145.json:
```json
{
    "body": "Issue with references (spelling) is causing patchbot failure.",
    "created_at": "2022-03-20T21:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459145",
    "user": "@trevorkarn"
}
```

Issue with references (spelling) is causing patchbot failure.



---

archive/issue_comments_459146.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-20T21:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459146",
    "user": "@trevorkarn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_459147.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-03-20T23:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459147",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_459148.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-20T23:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459148",
    "user": "@trevorkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_459149.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-20T23:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459149",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459150.json:
```json
{
    "body": "Replying to [comment:26 mkoeppe]:\n> Thanks, the added documentation and the rewrite are great.\n> \n> {{{\n> +        ## simplicies are \\{y_i\\}_{i\\in I}\\cup\\{x_{F_1},\\ldots,x_{F_\\ell}\\},\n> }}}\n> -> simplices\n> \n> After fixing and when the patchbot shows green, you can set it to positive review\n\nI made the changes, fixed the broken reference and now patchbot passes, setting to positive review.",
    "created_at": "2022-03-21T01:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459150",
    "user": "@trevorkarn"
}
```

Replying to [comment:26 mkoeppe]:
> Thanks, the added documentation and the rewrite are great.
> 
> {{{
> +        ## simplicies are \{y_i\}_{i\in I}\cup\{x_{F_1},\ldots,x_{F_\ell}\},
> }}}
> -> simplices
> 
> After fixing and when the patchbot shows green, you can set it to positive review

I made the changes, fixed the broken reference and now patchbot passes, setting to positive review.



---

archive/issue_comments_459151.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-21T01:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459151",
    "user": "@trevorkarn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_459152.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-27T15:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32148#issuecomment-459152",
    "user": "@vbraun"
}
```

Resolution: fixed
