# Issue 20101: Spec().an_element() is wrong when the coordinate ring is not Z

Issue created by migration from Trac.

Original creator: justin

Original creation time: 2016-03-31 19:41:56

Keywords: spec, coordinate ring

The code (schemes/generic/scheme.py) does this:
 {{{
   return self(self.coordinate_ring().zero_ideal())
}}}
if the scheme's coordinate ring is not the integers.  The coordinate ring need not be a domain, in which case the zero ideal is not prime (hence not a point in the prime spectrum).

I am not clear on the proper fix.  I suspect for random rings, it's not easy to cobble up a prime ideal.  At a minimum, the above could be called when the ring is a domain.


---

Comment by vdelecroix created at 2016-03-31 19:53:36

You might want to do

```
def _an_element_(self):
    from sage.categories.domains import Domains
    if self.coordinate_ring() in Domains():
          return self(self.coordinate_ring().zero_ideal())
    else:
        raise NotImplementedError
```



---

Comment by justin created at 2016-03-31 20:02:22

Is an_element() always supposed to return "0" in some guise?  In any case, if the ring is "known", we can handle it (PID, UFD, domain, ...), no?


---

Comment by vdelecroix created at 2016-03-31 20:13:33

Replying to [comment:2 justin]:
> Is an_element() always supposed to return "0" in some guise? 

Not at all. This method is intended to be used in testing suites (i.e. when you perform `TestSuite(my_object).run()`). The less trivial the answer is, the best it is.

> In any case, if the ring is "known", we can handle it (PID, UFD, domain, ...), no?

Sure. I was just proposing the laziest solution. You might even want to implement a method `some_elements` that is also used in the test suites.
