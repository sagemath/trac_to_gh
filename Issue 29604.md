# Issue 29604: Improve obtaining combinatorial polyhedron

Issue created by migration from https://trac.sagemath.org/ticket/29841

Original creator: @kliem

Original creation time: 2020-06-10 17:17:46

CC:  jipilab @laisrast

Keywords: combinatorial polyhedron

This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.

Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.

Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.

Without this ticket:


```
sage: P = polytopes.permutahedron(7)
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms
Wall time: 842 ms
sage: %time _ = C.incidence_matrix()
CPU times: user 24.8 ms, sys: 22 µs, total: 24.8 ms
Wall time: 24.6 ms

sage: P = polytopes.associahedron(['A', 9])
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 3.03 s, sys: 19.7 ms, total: 3.05 s
Wall time: 3.05 s
sage: %time _ = C.incidence_matrix()
CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms
Wall time: 93.8 ms
```


With this ticket:


```
sage: P = polytopes.permutahedron(7)
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 36.4 ms, sys: 3.87 ms, total: 40.3 ms
Wall time: 39.7 ms
sage: %time _ = C.incidence_matrix()
CPU times: user 5.26 ms, sys: 50 µs, total: 5.31 ms
Wall time: 5.35 ms

sage: P = polytopes.associahedron(['A', 9])
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 115 ms, sys: 57 µs, total: 115 ms
Wall time: 114 ms
sage: %time _ = C.incidence_matrix()
CPU times: user 34.2 ms, sys: 0 ns, total: 34.2 ms
Wall time: 34.2 ms
```



---

Comment by @kliem created at 2020-06-10 17:18:34

Changing status from new to needs_review.


---

Comment by git created at 2020-06-10 17:18:50

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by @kliem created at 2020-06-10 20:05:48

Changing status from needs_review to needs_work.


---

Comment by @kliem created at 2020-06-10 23:25:48

Changing status from needs_work to needs_review.


---

Comment by @kliem created at 2020-06-10 23:25:48

New commits:


---

Comment by @kliem created at 2020-06-17 09:50:40

Last 10 new commits:


---

Comment by tscrim created at 2020-07-01 02:04:12

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2020-07-01 02:04:12

LGTM.


---

Comment by @kliem created at 2020-07-01 04:30:58

Thank you.


---

Comment by vbraun created at 2020-07-10 19:34:02

Resolution: fixed
