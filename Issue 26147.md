# Issue 26147: cleanup non-decreasing parking functions

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2018-10-02 16:54:43

CC:  tscrim

in particular get rid of CombinatorialClass there (#12913)


---

Comment by chapoton created at 2018-10-02 16:55:08

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-10-02 16:55:08

New commits:


---

Comment by chapoton created at 2018-10-02 17:56:00

Maybe I should have kept CombinatorialObject ?


---

Comment by tscrim created at 2018-10-02 22:39:20

Replying to [comment:2 chapoton]:
> Maybe I should have kept CombinatorialObject ?

That one is a maybe. The biggest issue is they are no longer hashable:

```
sage: hash(NonDecreasingParkingFunction([]))
11648069979105038
```

which is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.


---

Comment by tscrim created at 2018-10-02 22:41:51

IIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.


---

Comment by chapoton created at 2018-10-03 12:43:45

Travis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..


---

Comment by tscrim created at 2018-10-03 12:45:37

I think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.


---

Comment by git created at 2018-10-03 12:57:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-10-03 12:58:08

ok, I have added the hash. Thanks a lot for your help.


---

Comment by tscrim created at 2018-10-03 13:09:06

No problem. Thanks for fixing that.


---

Comment by tscrim created at 2018-10-03 13:09:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-10-04 21:54:02

Resolution: fixed
