# Issue 33551: GH Actions: Split ci-macos.yml out from tox.yml

Issue created by migration from https://trac.sagemath.org/ticket/33788

Original creator: mkoeppe

Original creation time: 2022-05-03 00:35:17

CC:  dimpase @kliem

Preparation for #33062


---

Comment by mkoeppe created at 2022-05-03 00:44:07

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-05-03 00:44:07

New commits:


---

Comment by @tobiasdiez created at 2022-05-10 08:09:35

I think it makes sense to have all them all together in one workflow. Especially with your idea to use stages, it makes sense to have all everything in one workflow since then you can easily wait on previous stages before running stages that run os-unspecific things (like running tests) on the artifacts of the previous stage. In principle, there are also github actions that enable one to wait on other workflows, but they are pretty unreliable in my experience.

If its only for the overview, I would suggest to use the recently introduced feature to generate job summaries to automatically generate the portability report: https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/


---

Comment by mkoeppe created at 2022-05-10 18:31:53

The runs for different OSes do not need to wait for each other for anything


---

Comment by @tobiasdiez created at 2022-05-11 20:03:59

The `dist` workflow for example even runs on ubuntu.
Moreover, with a bit of refactoring there doesn't seem to general obstacles why you cannot have the same matrix running across different os.

I feel like it would be helpful to have a general big picture for how to structure the workflows instead of moving them back and forth in the coming months.


---

Comment by @tobiasdiez created at 2022-05-11 20:03:59

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-05-11 20:08:06

I'm the one who monitors these workflow runs when releases are made, so organizing it for my convenience should be a good enough reason.


---

Comment by mkoeppe created at 2022-05-11 20:08:06

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2022-05-11 20:35:47

Replying to [comment:5 gh-tobiasdiez]:
> If its only for the overview, I would suggest to use the recently introduced feature to generate job summaries to automatically generate the portability report: https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/

Counting green checkmarks is not what takes the time. It's looking at the logs


---

Comment by @tobiasdiez created at 2022-05-12 20:50:29

Replying to [comment:9 mkoeppe]:
> Replying to [comment:5 gh-tobiasdiez]:
> > If its only for the overview, I would suggest to use the recently introduced feature to generate job summaries to automatically generate the portability report: https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/
> 
> Counting green checkmarks is not what takes the time. It's looking at the logs

You can put in the markdown overview whatever you want, for example the summary of what test failed or at what stage the tests failed etc.


---

Comment by mkoeppe created at 2022-05-13 18:43:11

It does look like a nice feature, but I don't plan to work on creating such a report.


---

Comment by git created at 2022-07-02 19:44:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-07-02 19:45:29

Let's get this in please.


---

Comment by dimpase created at 2022-07-04 11:07:52

I presume it was tested on GH Actions. A link?


---

Comment by mkoeppe created at 2022-07-04 16:36:16

Testing in a branch with #34110


---

Comment by dimpase created at 2022-07-08 12:19:54

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-07-08 12:19:54

lgtm


---

Comment by mkoeppe created at 2022-07-08 17:45:34

Thank you!


---

Comment by vbraun created at 2022-07-09 22:31:12

Resolution: fixed
