# Issue 15171: corrections and improvements to `inner_plethysm` method in symmetric functions

Issue created by migration from Trac.

Original creator: zabrocki

Original creation time: 2013-11-13 04:23:14

CC:  aschilling sage-combinat saliola

Keywords: symmertic functions, inner plethysm

The current documentation for `inner_plethysm` reads

```
f.inner_plethysm(g + h) == f.inner_plethysm(g) + f.inner_plethysm(h).
```

This is false (see an example below), and in fact

```
(f+g).inner_plethysm(h) == f.inner_plethysm(h) + g.inner_plethysm(h)
```

and it is only true that

```
p[k].inner_plethysm(f+g) == p[k].inner_plethysm(f) + p[k].inner_plethysm(g).
```

It is also true that 

```
(f*g).inner_plethsym(h) == (f.inner_plethsym(h)).itensor(g.inner_plethsym(h)).
```

In fact these three statements and the definition for `p[k].inner_plethysm(p(mu))` is how inner plethysm is defined.

For example

```
sage: s[3].inner_plethysm(s[2,1]+s[3])-s[3].inner_plethysm(s[2,1])-s[3].inner_plethysm(s[3])
2*s[2, 1] + s[3]
sage: (s[3]+s[2,1]).inner_plethysm(s[2,1])-s[3].inner_plethysm(s[2,1])-s[2,1].inner_plethysm(s[2,1])
0
sage: p[5].inner_plethysm(s[2,1]+s[3])-p[5].inner_plethysm(s[2,1])-p[5].inner_plethysm(s[3])
0
sage: p[3,2].inner_plethysm(s[2,1])-p[3].inner_plethysm(s[2,1]).itensor(p[2].inner_plethysm(s[2,1]))
0
```

Moreover the doc tests don't catch errors that were (probably?) introduced in edits since #3342.

```
sage: p[4,3].inner_plethysm(p[2,2,1])
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'int' object has no attribute 'itensor'
sage: p[3].inner_plethysm(p[3])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: Codomain could not be determined
```



---

Comment by zabrocki created at 2013-11-16 23:36:17

New commits:


---

Comment by zabrocki created at 2013-11-18 01:07:48

Changing status from new to needs_review.


---

Comment by darij created at 2013-11-18 01:53:38

Mike, just making sure, are you talking about the full sentence

```
        ``f.inner_plethysm(g + h) == f.inner_plethysm(g) + f.inner_plethysm(h)``
        when `g` and `h` are homogeneous of different degrees
```

or only of the equation? I think that it is true for g and h homogeneous of different degrees.

I'll look into the errors now. Sorry for this -- I did edit the docstring but I never really looked at the implementation of this method.


---

Comment by zabrocki created at 2013-11-18 02:38:29

Darij, my example of when the statement is when `g` and `h` are of the same degree, so my edits are only to try to make the doc string clearer.

One of the reasons that I changed it was because I don't understand the meaning of the sentence "`f.inner_plethysm(g)` is a polynomial in the coefficients of `g`"  It should be a symmetric function, not a polynomial.  The other phrase that appears throughout the docstring is "determine its values."   Unfortunately I don't understand what is meant by the _values_ of a symmetric function.  My modifications of the docstring avoid the word _values_ because I don't understand what is intended by that phrase.

I also think that there is something wrong in the sentence

```
we can think of the function `g` as the character of a representation of the 
general linear group, and hence (by Schur-Weyl duality) as the character of
a representation `\rho` of the symmetric group `S_n`.
```

To my eye, `g` would not be a character of an S_n representation, but it would be a generating
function for the character (Frobenius image of the character).  This is not a serious problem since the object of interest is the representation `\rho`, but  I find the use of Schur-Weyl duality an unnecessary complication in the explanation.

Please read the docstring that I wrote.  Is it clearer?  Can you improve it more?


---

Comment by darij created at 2013-11-18 02:57:55

Some quick answers before I come to the real review.

It seems that it would be better to move methods in one commit and do edits in another, for the sake of diff working sanely.

The sentence "f.inner_plethysm(g) is a polynomial in the coefficients of g" meant to say that f.inner_plethysm(g) depends polynomially on the coefficients of g. What I was trying to achieve there is to explain how to compute inner plethysm outside of the homogeneous Schur-positive case. This is also why I made that confusing linearity-in-distinct-degrees claim. Your docstring seems much better, so I'm not wishing mine back.


---

Comment by darij created at 2013-11-18 03:00:55

Actually, I don't understand why you moved the two underscored methods; it doesn't look like the underscored methods in this class tend to cluster together...


---

Comment by git created at 2013-11-18 03:06:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2013-11-18 03:12:49

Darij, the underscored methods depend on the basis and not on the element (are parent methods).

They were moved so that they will be accessed as `basis._inner_plethysm_pk_g` and `basis._inner_plethysm_pnu_g` because they are independent of the element.


---

Comment by darij created at 2013-11-18 03:21:06

Ah! That makes sense, of course; sorry.


---

Comment by git created at 2013-11-18 03:53:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2013-11-18 03:54:06

Here are two slight rewordings of what Mike proposes.

1. Change:

```
Here is an axiomatic definition of the operation (where in the equations
below we denote outer product
(:meth:`~sage.categories.algebras_with_basis.AlgebrasWithBasis.ParentMethods.product`)
by `\cdot` and the Kronecker product (:meth:`itensor`) by `\ast`):
```

  to

```
First we describe the axiomatic definition of the operation; see below for
the representation-theoretic definition.
In the following equations, we denote outer product
(:meth:`~sage.categories.algebras_with_basis.AlgebrasWithBasis.ParentMethods.product`)
by `\cdot` and the Kronecker product (:meth:`itensor`) by `\ast`).
```



2. For the representation-theoretic definition:

```
This operation admits a representation-theoretic interpretation
in the case where `f` is a Schur function `s_\lambda` and
`g` is a homogeneous degree `n` symmetric function with
positive integral coefficients in the Schur basis.
The symmetric function ``f.inner_plethysm(g)`` is the Frobenius
image of the `S_n`-representation constructed as follows.

The assumptions on `g` imply that `g` is the Frobenius image of a
representation `\rho` of the symmetric group `S_n`:

.. MATH::

    \rho : S_n \to GL_N

If the degree `N` of this representation is greater than or equal
to the number of parts of `\lambda`, then `f`, which denotes `s_\lambda`,
corresponds to the character of some irreducible `GL_N`-representation, say

.. MATH::

    \sigma : GL_N \to GL_M

The composition `\sigma \circ \rho : S_n \to GL_M` is a representation
of `S_n` whose Frobenius image is precisely ``f.inner_plethysm(g)``.

If `N` is less than the number of parts of `\lambda`,
then ``f.inner_plethysm(g)`` is `0` by definition.
```

  Personally, I like to see `\rho: S_n \to GL_N` and `\sigma: GL_N \to GL_M` displayed in this way with domain and codomain, so that I can see the composition. So I re-worded the text to take this into account.

Otherwise, patch looks good to me.
----
New commits:


---

Comment by darij created at 2013-11-18 03:56:36

I've done something to the branch which I don't fully understand myself. Sorry. But I think the docstrings are better now, even if it's best to use diff to compare them with what they were. I haven't done Franco's suggestions, but I agree with them! (Except I wouldn't call the representation-theoretical definition a definition, as it doesn't cover all cases.)


---

Comment by saliola created at 2013-11-18 03:56:45

My previous comment was referencing the commit â€‹cd4470b.

I didn't realize you were actively making changes since the ticket is set to needs review.


---

Comment by saliola created at 2013-11-18 03:58:02

Replying to [comment:15 darij]:
> (Except I wouldn't call the representation-theoretical definition a definition, as it doesn't cover all cases.)

Good point. I like "interpretation" better here.


---

Comment by git created at 2013-11-18 04:04:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-11-18 04:18:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-11-18 04:19:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2013-11-18 04:23:29

Diff looks good to me now as well. Thanks for catching this, Mike!


---

Comment by zabrocki created at 2013-11-18 12:32:55

I'm happy with your edits if you want to set to a positive review.  Thanks Franco and Darij. -Mike


---

Comment by saliola created at 2013-11-18 12:42:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-02-02 22:07:15

Resolution: fixed
