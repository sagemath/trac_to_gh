# Issue 16168: Cartesian product of rings

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2014-05-27 14:51:35

CC:  sage-combinat ncohen vdelecroix dimpase

Keywords: cartesian product

This ticket lifts up cartesian product features to the categories recently created in #10963, where they belong. Thanks to this and to the definition of CartesianProducts for the Distributive axiom, we have now:

```
sage: Fields().CartesianProducts()
Join of Category of rings
    and Category of Cartesian products of distributive magmas and additive magmas
    and Category of Cartesian products of semigroups 
    and Category of Cartesian products of unital magmas
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```


And this works smoothly for all variants of rings (semirings, ...).

This fixes a piece of : #15425.


---

Comment by nthiery created at 2014-05-27 15:00:06

New commits:


---

Comment by nthiery created at 2014-05-27 15:00:06

Changing status from new to needs_review.


---

Comment by ncohen created at 2014-05-27 16:06:13

Is it normal that we see 

```
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```


instead of "Additive Group" ?

Nathann


---

Comment by ncohen created at 2014-05-27 17:09:43

Helloooooooooooo !!

Some comments/questions:

- What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?

- consistancy -> consistency

- class nesting is cool and everything but you have to scroll non-stop with
  stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
  class you are writing your code ?

- You implement the `neg` function for cartesian product of AdditiveInverse
  Magma, but don't you also need to say somewhere what exactly is the "1"
  element of a cartesian product of UnitalMagma ?

- You do things like :
  {{{
Magmas().Unital().Inverse()
  }}}

  It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?

- maybe I misread but you seem to implement `__invert__` in
  `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
  `Magmas().Unital().Inverse().CartesianProduct()` ?

Nathann


---

Comment by ncohen created at 2014-05-27 17:09:50

Changing status from needs_review to needs_info.


---

Comment by git created at 2014-05-28 08:03:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2014-05-28 08:03:51

Salut Nathann,

Thanks for the quick review!

Replying to [comment:4 ncohen]:
> Some comments/questions:
> 
> - What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?
> - maybe I misread but you seem to implement `__invert__` in
>   `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
>   `Magmas().Unital().Inverse().CartesianProduct()` ?

The notion of inverse (resp. negation) can be defined as soon as there
is a unit, thought some elements might not have inverses, or have non
unique inverses. So the method `__invert__` (resp. `__neg__`) makes
sense, even if it's only partially defined.

I just pushed a fix that better handles those partially defined
inverse / negation for cartesian products, and clarifies the
documentation.

> - consistancy -> consistency

Fixed!

> - class nesting is cool and everything but you have to scroll non-stop with
>   stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
>   class you are writing your code ?

Alas no. Code folding is really a life saver here, but I still need to
dig through the emacs packages to find one that implements such
folding with a reasonable interface.

> - You implement the `neg` function for cartesian product of AdditiveInverse
>   Magma, but don't you also need to say somewhere what exactly is the "1"
>   element of a cartesian product of UnitalMagma ?

I think this was there. In any cases, right now we have:

```
Magmas.Unital.CartesianProducts.ParentMethods.one
Magmas.Unital.CartesianProducts.ElementMethods.__invert__

AdditiveMagmas.AdditiveUnital.CartesianProducts.ParentMethods.zero
AdditiveMagmas.AdditiveUnital.CartesianProducts.ElementMethods._neg_
```


> - You do things like :
>   {{{
> Magmas().Unital().Inverse()
>   }}}
> 
>   It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?

You mean `Magmas().Inverse()` as a shorthand for
`Magmas().Unital().Inverse()`? I wondered about this, but so far
preferred to only define the Inverse axiom if there exists a unit.

One thing is that there exist a notion of `inverse semigroups` where
an element is only requested to have a "local" inverse (technically it
has to be invertible in some submonoid whose unit need not be a unit
for the whole semigroup). So I'd rather leave the room free for future
extensions.

Cheers,
                                    Nicolas
----
New commits:
----
New commits:


---

Comment by git created at 2014-06-02 08:10:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-06-02 11:46:26

Changing status from needs_info to positive_review.


---

Comment by ncohen created at 2014-06-02 11:46:26

Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !

I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.

Thanks for this patch !

Nathann


---

Comment by nthiery created at 2014-06-02 15:13:05

Replying to [comment:9 ncohen]:
> Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !

Pretty cool tool indeed! Thanks for finding it! (for the curious emacs users: if you enable this minor mode by customizing which-function-mode, the name of the class / function the cursor is in is printed in the status bar; works better with emacs 24). 

> I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.

You are definitely learning it quick :-)

> Thanks for this patch !

Thanks for the review!


---

Comment by vbraun created at 2014-06-02 15:56:26

Resolution: fixed
