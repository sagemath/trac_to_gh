# Issue 16168: Cartesian product of rings

archive/issues_016168.json:
```json
{
    "body": "CC:  sage-combinat ncohen vdelecroix dimpase\n\nKeywords: cartesian product\n\nThis ticket lifts up cartesian product features to the categories recently created in #10963, where they belong. Thanks to this and to the definition of CartesianProducts for the Distributive axiom, we have now:\n\n```\nsage: Fields().CartesianProducts()\nJoin of Category of rings\n    and Category of Cartesian products of distributive magmas and additive magmas\n    and Category of Cartesian products of semigroups \n    and Category of Cartesian products of unital magmas\n    and Category of Cartesian products of additive inverse additive unital additive magmas \n    and Category of Cartesian products of additive commutative additive magmas \n    and Category of Cartesian products of additive semigroups\n```\n\n\nAnd this works smoothly for all variants of rings (semirings, ...).\n\nThis fixes a piece of : #15425.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16405\n\n",
    "created_at": "2014-05-27T14:51:35Z",
    "labels": [
        "categories",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Cartesian product of rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16168",
    "user": "nthiery"
}
```
CC:  sage-combinat ncohen vdelecroix dimpase

Keywords: cartesian product

This ticket lifts up cartesian product features to the categories recently created in #10963, where they belong. Thanks to this and to the definition of CartesianProducts for the Distributive axiom, we have now:

```
sage: Fields().CartesianProducts()
Join of Category of rings
    and Category of Cartesian products of distributive magmas and additive magmas
    and Category of Cartesian products of semigroups 
    and Category of Cartesian products of unital magmas
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```


And this works smoothly for all variants of rings (semirings, ...).

This fixes a piece of : #15425.

Issue created by migration from https://trac.sagemath.org/ticket/16405





---

archive/issue_comments_211165.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-05-27T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211165",
    "user": "nthiery"
}
```

New commits:



---

archive/issue_comments_211166.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-27T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211166",
    "user": "nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211167.json:
```json
{
    "body": "Is it normal that we see \n\n```\n    and Category of Cartesian products of additive inverse additive unital additive magmas \n    and Category of Cartesian products of additive commutative additive magmas \n    and Category of Cartesian products of additive semigroups\n```\n\n\ninstead of \"Additive Group\" ?\n\nNathann",
    "created_at": "2014-05-27T16:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211167",
    "user": "ncohen"
}
```

Is it normal that we see 

```
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```


instead of "Additive Group" ?

Nathann



---

archive/issue_comments_211168.json:
```json
{
    "body": "Helloooooooooooo !!\n\nSome comments/questions:\n\n- What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?\n\n- consistancy -> consistency\n\n- class nesting is cool and everything but you have to scroll non-stop with\n  stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub\n  class you are writing your code ?\n\n- You implement the `neg` function for cartesian product of AdditiveInverse\n  Magma, but don't you also need to say somewhere what exactly is the \"1\"\n  element of a cartesian product of UnitalMagma ?\n\n- You do things like :\n  {{{\nMagmas().Unital().Inverse()\n  }}}\n\n  It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?\n\n- maybe I misread but you seem to implement `__invert__` in\n  `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in\n  `Magmas().Unital().Inverse().CartesianProduct()` ?\n\nNathann",
    "created_at": "2014-05-27T17:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211168",
    "user": "ncohen"
}
```

Helloooooooooooo !!

Some comments/questions:

- What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?

- consistancy -> consistency

- class nesting is cool and everything but you have to scroll non-stop with
  stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
  class you are writing your code ?

- You implement the `neg` function for cartesian product of AdditiveInverse
  Magma, but don't you also need to say somewhere what exactly is the "1"
  element of a cartesian product of UnitalMagma ?

- You do things like :
  {{{
Magmas().Unital().Inverse()
  }}}

  It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?

- maybe I misread but you seem to implement `__invert__` in
  `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
  `Magmas().Unital().Inverse().CartesianProduct()` ?

Nathann



---

archive/issue_comments_211169.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-05-27T17:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211169",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_211170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-28T08:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211170",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211171.json:
```json
{
    "body": "Salut Nathann,\n\nThanks for the quick review!\n\nReplying to [comment:4 ncohen]:\n> Some comments/questions:\n> \n> - What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?\n> - maybe I misread but you seem to implement `__invert__` in\n>   `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in\n>   `Magmas().Unital().Inverse().CartesianProduct()` ?\n\nThe notion of inverse (resp. negation) can be defined as soon as there\nis a unit, thought some elements might not have inverses, or have non\nunique inverses. So the method `__invert__` (resp. `__neg__`) makes\nsense, even if it's only partially defined.\n\nI just pushed a fix that better handles those partially defined\ninverse / negation for cartesian products, and clarifies the\ndocumentation.\n\n> - consistancy -> consistency\n\nFixed!\n\n> - class nesting is cool and everything but you have to scroll non-stop with\n>   stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub\n>   class you are writing your code ?\n\nAlas no. Code folding is really a life saver here, but I still need to\ndig through the emacs packages to find one that implements such\nfolding with a reasonable interface.\n\n> - You implement the `neg` function for cartesian product of AdditiveInverse\n>   Magma, but don't you also need to say somewhere what exactly is the \"1\"\n>   element of a cartesian product of UnitalMagma ?\n\nI think this was there. In any cases, right now we have:\n\n```\nMagmas.Unital.CartesianProducts.ParentMethods.one\nMagmas.Unital.CartesianProducts.ElementMethods.__invert__\n\nAdditiveMagmas.AdditiveUnital.CartesianProducts.ParentMethods.zero\nAdditiveMagmas.AdditiveUnital.CartesianProducts.ElementMethods._neg_\n```\n\n\n> - You do things like :\n>   {{{\n> Magmas().Unital().Inverse()\n>   }}}\n> \n>   It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?\n\nYou mean `Magmas().Inverse()` as a shorthand for\n`Magmas().Unital().Inverse()`? I wondered about this, but so far\npreferred to only define the Inverse axiom if there exists a unit.\n\nOne thing is that there exist a notion of `inverse semigroups` where\nan element is only requested to have a \"local\" inverse (technically it\nhas to be invertible in some submonoid whose unit need not be a unit\nfor the whole semigroup). So I'd rather leave the room free for future\nextensions.\n\nCheers,\n                                    Nicolas\n----\nNew commits:\n----\nNew commits:",
    "created_at": "2014-05-28T08:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211171",
    "user": "nthiery"
}
```

Salut Nathann,

Thanks for the quick review!

Replying to [comment:4 ncohen]:
> Some comments/questions:
> 
> - What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?
> - maybe I misread but you seem to implement `__invert__` in
>   `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
>   `Magmas().Unital().Inverse().CartesianProduct()` ?

The notion of inverse (resp. negation) can be defined as soon as there
is a unit, thought some elements might not have inverses, or have non
unique inverses. So the method `__invert__` (resp. `__neg__`) makes
sense, even if it's only partially defined.

I just pushed a fix that better handles those partially defined
inverse / negation for cartesian products, and clarifies the
documentation.

> - consistancy -> consistency

Fixed!

> - class nesting is cool and everything but you have to scroll non-stop with
>   stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
>   class you are writing your code ?

Alas no. Code folding is really a life saver here, but I still need to
dig through the emacs packages to find one that implements such
folding with a reasonable interface.

> - You implement the `neg` function for cartesian product of AdditiveInverse
>   Magma, but don't you also need to say somewhere what exactly is the "1"
>   element of a cartesian product of UnitalMagma ?

I think this was there. In any cases, right now we have:

```
Magmas.Unital.CartesianProducts.ParentMethods.one
Magmas.Unital.CartesianProducts.ElementMethods.__invert__

AdditiveMagmas.AdditiveUnital.CartesianProducts.ParentMethods.zero
AdditiveMagmas.AdditiveUnital.CartesianProducts.ElementMethods._neg_
```


> - You do things like :
>   {{{
> Magmas().Unital().Inverse()
>   }}}
> 
>   It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?

You mean `Magmas().Inverse()` as a shorthand for
`Magmas().Unital().Inverse()`? I wondered about this, but so far
preferred to only define the Inverse axiom if there exists a unit.

One thing is that there exist a notion of `inverse semigroups` where
an element is only requested to have a "local" inverse (technically it
has to be invertible in some submonoid whose unit need not be a unit
for the whole semigroup). So I'd rather leave the room free for future
extensions.

Cheers,
                                    Nicolas
----
New commits:
----
New commits:



---

archive/issue_comments_211172.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-02T08:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211172",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211173.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2014-06-02T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211173",
    "user": "ncohen"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_211174.json:
```json
{
    "body": "Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !\n\nI agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.\n\nThanks for this patch !\n\nNathann",
    "created_at": "2014-06-02T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211174",
    "user": "ncohen"
}
```

Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !

I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.

Thanks for this patch !

Nathann



---

archive/issue_comments_211175.json:
```json
{
    "body": "Replying to [comment:9 ncohen]:\n> Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !\n\nPretty cool tool indeed! Thanks for finding it! (for the curious emacs users: if you enable this minor mode by customizing which-function-mode, the name of the class / function the cursor is in is printed in the status bar; works better with emacs 24). \n\n> I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.\n\nYou are definitely learning it quick :-)\n\n> Thanks for this patch !\n\nThanks for the review!",
    "created_at": "2014-06-02T15:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211175",
    "user": "nthiery"
}
```

Replying to [comment:9 ncohen]:
> Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !

Pretty cool tool indeed! Thanks for finding it! (for the curious emacs users: if you enable this minor mode by customizing which-function-mode, the name of the class / function the cursor is in is printed in the status bar; works better with emacs 24). 

> I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.

You are definitely learning it quick :-)

> Thanks for this patch !

Thanks for the review!



---

archive/issue_comments_211176.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-02T15:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16168#issuecomment-211176",
    "user": "vbraun"
}
```

Resolution: fixed
