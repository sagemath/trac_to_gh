# Issue 31966: Bug with chain complex associated to cubical complex

Issue created by migration from https://trac.sagemath.org/ticket/32203

Original creator: jhpalmieri

Original creation time: 2021-07-14 18:36:37

CC:  chapoton tscrim

From an email:

```
sage: Square = CubicalComplex([([0,1],[0,1])])
sage: EdgesLTR = CubicalComplex([([0,0],[0,1]),([0,1],[1,1]),([1,1],[0,1])])
sage: EdgesLBR = CubicalComplex([([0,0],[0,1]),([0,1],[0,0]),([1,1],[0,1])])
sage: Square.homology(subcomplex=EdgesLTR)
{0: 0, 1: Z, 2: Z}
sage: Square.homology(subcomplex=EdgesLBR)
{0: 0, 1: 0, 2: 0}
```

The homology should be zero in both cases.


---

Comment by git created at 2021-07-14 21:06:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2021-07-14 21:06:55

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2021-07-14 21:20:39

The problem is that if `Y` is a subcomplex of `X`, then in the relative chain complex, the boundary of some cube `c` might have a pair `(lower, upper)` where `upper` (but not `lower`) is in the subcomplex `Y`. The old try/except block would bail out when it tested for `upper`, completely ignoring `lower`. We should separate try/except blocks for `upper` and `lower`.


---

Comment by chapoton created at 2021-07-15 06:06:50

trac 33333 ?


---

Comment by git created at 2021-07-15 15:20:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2021-07-15 15:20:37

Sorry, that was my placeholder number until I'd actually opened the ticket. Fixed now.
----
New commits:


---

Comment by chapoton created at 2021-07-30 06:51:13

ok, thanks


---

Comment by chapoton created at 2021-07-30 06:51:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-08-31 22:00:26

Resolution: fixed
