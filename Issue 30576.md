# Issue 30576: try to upgrade tdlib

Issue created by migration from https://trac.sagemath.org/ticket/30813

Original creator: dimpase

Original creation time: 2020-10-22 17:30:15

CC:  dcoudert llarisch

tdlib appears in development, at https://github.com/freetdi/tdlib - now at version 0.9.

Not sure whether it it easy to upgrade, but one should try.


---

Comment by dcoudert created at 2020-10-22 18:29:26

It's in my todo list since several months now... but I don't know how to do that.

We should also expose other algorithms from this library (heuristics, cuset, etc.). I plan to move the treewidth method into a new `tree_decomposition.pyx` file and add an exact algorithm for treelength (I have one). But one step at a time.


---

Comment by mkoeppe created at 2020-10-22 19:21:45

Note that Cython code that uses tdlib should remain in its own module and not be mixed with other Cython code - this is important for the modularization effort (#29864)


---

Comment by dimpase created at 2020-10-23 10:26:24

I opened https://github.com/freetdi/tdlib/issues/34

it principle, all the C++ headers as in the current package are still there, whether they are compatible is another question. I asked the upstream to make a release.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by chapoton created at 2021-05-07 18:11:49

now on gitlab, and with a new name

https://gitlab.com/freetdi/treedec/-/releases


---

Comment by dimpase created at 2021-07-14 09:32:24

and a new release: https://gitlab.com/freetdi/treedec/-/releases


---

Comment by @sheerluck created at 2021-07-15 20:09:42

Replying to [comment:7 dimpase]:
> and a new release: https://gitlab.com/freetdi/treedec/-/releases

```diff
--- a/src/sage/graphs/graph_decompositions/sage_tdlib.cpp
+++ b/src/sage/graphs/graph_decompositions/sage_tdlib.cpp
@@ -2,8 +2,9 @@
 #include <map>
 
 #include <boost/graph/adjacency_list.hpp>
-#include "tdlib/TD_combinations.hpp"
-#include "tdlib/TD_misc.hpp"
+#include <treedec/combinations.hpp>
+#include <treedec/misc.hpp>
+#include <treedec/treedec.hpp>
 
 #ifndef TD_STRUCT_VERTEX
 #define TD_STRUCT_VERTEX
@@ -20,7 +21,6 @@ struct bag{
     std::set<unsigned int> bag;
 };
 
-typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS, bag> TD_tree_dec_t;
 
 
 void make_tdlib_graph(TD_graph_t &G, std::vector<unsigned int> &V, std::vector<unsigned int> &E){
```

