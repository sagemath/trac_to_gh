# Issue 33970: Document how to upgrade system packages without breaking Sage

archive/issues_033970.json:
```json
{
    "body": "CC:  @nbruin @antonio-rojas @dimpase\n\n(from https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ)\n\nDebian:\n- separate, simultaneously installable shared library packages for different soversions, e.g., https://packages.debian.org/bullseye/libflint-2.6.3, https://packages.debian.org/sid/libflint17\n- https://manpages.ubuntu.com/manpages/bionic/man8/apt-mark.8.html\n\nFedora:\n- cannot simultaneously install library packages providing different soversions:\n\n```\n# dnf install 'libflint.so.16()(64bit)' 'libflint.so.17()(64bit)'\n\nLast metadata expiration check: 0:04:24 ago on Tue Jul 26 02:02:49 2022.\nError: \n\n Problem: cannot install both flint-2.9.0-1.fc36.x86_64 and flint-2.8.4-2.fc36.x86_64\n\n  - conflicting requests\n```\n- https://www.reddit.com/r/Fedora/comments/3pqrv9/dnf_remove_package_keep_dependencies/\n\nGentoo:\n- use https://github.com/cschwan/sage-on-gentoo\n\nOpenSUSE:\n- separate, simultaneously installable shared library packages for different soversions, e.g. https://pkgs.org/download/libflint.so.16()(64bit), https://pkgs.org/download/libflint.so.17()(64bit)\n- Just don't uninstall what Sage needs \n\nHomebrew:\n- It does not have separate shared library packages for different soversions\n- After upgrades, need to do a full rebuild (`make distclean`), or use `make -j list-broken-packages` from #34203.\n\nConda:\n- use separate environments for separate projects/tasks\n\nNix:\n- use separate environments for separate projects/tasks\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34207\n\n",
    "created_at": "2022-07-21T18:56:05Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Document how to upgrade system packages without breaking Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33970",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @nbruin @antonio-rojas @dimpase

(from https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ)

Debian:
- separate, simultaneously installable shared library packages for different soversions, e.g., https://packages.debian.org/bullseye/libflint-2.6.3, https://packages.debian.org/sid/libflint17
- https://manpages.ubuntu.com/manpages/bionic/man8/apt-mark.8.html

Fedora:
- cannot simultaneously install library packages providing different soversions:

```
# dnf install 'libflint.so.16()(64bit)' 'libflint.so.17()(64bit)'

Last metadata expiration check: 0:04:24 ago on Tue Jul 26 02:02:49 2022.
Error: 

 Problem: cannot install both flint-2.9.0-1.fc36.x86_64 and flint-2.8.4-2.fc36.x86_64

  - conflicting requests
```
- https://www.reddit.com/r/Fedora/comments/3pqrv9/dnf_remove_package_keep_dependencies/

Gentoo:
- use https://github.com/cschwan/sage-on-gentoo

OpenSUSE:
- separate, simultaneously installable shared library packages for different soversions, e.g. https://pkgs.org/download/libflint.so.16()(64bit), https://pkgs.org/download/libflint.so.17()(64bit)
- Just don't uninstall what Sage needs 

Homebrew:
- It does not have separate shared library packages for different soversions
- After upgrades, need to do a full rebuild (`make distclean`), or use `make -j list-broken-packages` from #34203.

Conda:
- use separate environments for separate projects/tasks

Nix:
- use separate environments for separate projects/tasks


Issue created by migration from https://trac.sagemath.org/ticket/34207





---

archive/issue_events_089241.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33970",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33970#event-89241"
}
```
