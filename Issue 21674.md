# Issue 21674: Docstring for IncidenceStructure.is_uniform has issues

Issue created by migration from Trac.

Original creator: pelegm

Original creation time: 2016-11-21 09:13:24

Keywords: docstring

`r`-regular is written there in a couple of places instead of `k`-uniform (including in the tests).


---

Comment by git created at 2016-11-21 09:18:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2016-11-21 13:23:48

Changing status from new to needs_review.


---

Comment by pelegm created at 2016-11-22 09:23:17

Changing keywords from "docstring" to "docstring,days79".


---

Comment by tscrim created at 2016-11-22 12:16:12

LGTM (looks good to me).


---

Comment by tscrim created at 2016-11-22 12:16:12

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2016-11-23 19:58:18

I would be very surprised if Volker was not finding the same thing:

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/combinat/designs/incidence_structures.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/combinat/designs/incidence_structures.py", line 990, in sage.combinat.designs.incidence_structures.IncidenceStructure.is_uniform
Failed example:
    IncidenceStructure([]).is_uniform()
Expected:
    Traceback (most recent call last):
    ...
    ValueError: This incidence structure has no points.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 501, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 864, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.designs.incidence_structures.IncidenceStructure.is_uniform[3]>", line 1, in <module>
        IncidenceStructure([]).is_uniform()
      File "/usr/lib64/python2.7/site-packages/sage/combinat/designs/incidence_structures.py", line 996, in is_uniform
        raise ValueError("This incidence structure has no blocks.")
    ValueError: This incidence structure has no blocks.
**********************************************************************
1 item had failures:
```



---

Comment by pelegm created at 2016-11-23 20:18:31

Thank you for finding this!

Which `ValueError` message is better in your opinion?


---

Comment by pelegm created at 2016-11-23 20:18:31

Changing status from positive_review to needs_work.


---

Comment by fbissey created at 2016-11-23 20:55:32

I have no idea. I just know the test break because I regularly follow Volker's development branch in sage-on-gentoo and it came up in the failed doctests. I didn't do it because I have a particular interest in the area.


---

Comment by tscrim created at 2016-11-23 22:03:29

The test was wrong as the method is `is_uniform`, not `is_regular`. So I would keep the change for the test but also change the error message.


---

Comment by pelegm created at 2016-11-24 03:45:59

Just to make sure, you suggest that `is_uniform` will raise `ValueError: This incidence structure has no blocks.` (when the hypergraph is empty). Right?


---

Comment by tscrim created at 2016-11-24 07:15:49

Yes, that is correct. It was running the wrong test previously, which resulted in the wrong error message.


---

Comment by pelegm created at 2016-11-25 08:06:46

Set assignee to pelegm.


---

Comment by git created at 2016-11-26 12:49:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by pelegm created at 2016-11-26 12:49:49

Rebased to `develop`.


---

Comment by git created at 2016-11-26 12:51:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2016-11-26 12:52:18

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2016-11-26 19:54:12

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-11-28 23:02:13

Resolution: fixed
