# Issue 17005: Uniform random generation  of Composition of a given size

Issue created by migration from Trac.

Original creator: g.chatel

Original creation time: 2014-10-28 14:12:50

Assignee: gchatel

CC:  vivianepons tscrim darij sage-combinat nthiery chapoton

Keywords: composition,  combinatorics, random

I am overwritting the default random_element method of the Composition_n class to implement an efficient way to compute a random composition.

As explained in the documentation, I use the fact that composition of size n are in bijection with binary words of size n starting with a 1.


---

Comment by g.chatel created at 2014-10-28 14:16:37

New commits:


---

Comment by git created at 2014-10-28 14:43:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by g.chatel created at 2014-10-28 14:48:21

Changing status from new to needs_review.


---

Comment by chapoton created at 2014-10-28 14:51:57

You have deleted one line in some other place in the file. (to see where, click on the green link in the branch field on top of this page). Please put it back.

Also, please gather the imports at the begininng of the code. Otherwise, seems ok.


---

Comment by darij created at 2014-10-28 15:17:54

I have not done any benchmarks, but I bet that
`[sage.misc.prandom.choice([0,1]) for _ in range(self.n - 1)]` is faster than `FiniteWords_length_k_over_OrderedAlphabet(A, length = self.n - 1).random_element()` (and, besides, works for n = 0 as well).


---

Comment by git created at 2014-10-28 18:05:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-10-28 18:07:50

Changing status from needs_review to positive_review.


---

Comment by darij created at 2014-10-28 18:08:20

Welldone; it's positive_review then.


---

Comment by vbraun created at 2014-10-28 20:31:27

Reviewer name


---

Comment by vbraun created at 2014-10-28 20:31:27

Changing status from positive_review to needs_work.


---

Comment by darij created at 2014-10-28 20:47:39

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-10-29 16:59:25

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-10-29 16:59:25

Doctests failure in src/sage/combinat/composition_signed.py


---

Comment by git created at 2014-10-29 18:39:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-10-29 18:39:52

Changing status from needs_work to positive_review.


---

Comment by darij created at 2014-10-29 18:39:52

Good point; that file had a random doctest not marked as random. I am wondering if we can have a script that automatically warns of such things?


---

Comment by vbraun created at 2014-10-30 09:45:10

Resolution: fixed
