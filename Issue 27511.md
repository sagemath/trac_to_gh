# Issue 27511: avoid using is_package_installed in generic_graph.py

Issue created by migration from https://trac.sagemath.org/ticket/27748

Original creator: dcoudert

Original creation time: 2019-04-29 13:55:23

CC:  fbissey dimpase

Follow up to #27628. See #27628#comment:11


---

Comment by dcoudert created at 2019-04-29 13:57:44

I opened this ticket but we must wait for 8.8.beta4.

Note that I find `is_package_installed` much more natural than a `try:... except...` here, but if this method is not good, let's use something else.


---

Comment by fbissey created at 2019-04-29 21:21:32

Replying to [comment:1 dcoudert]:
> I opened this ticket but we must wait for 8.8.beta4.
> 
> Note that I find `is_package_installed` much more natural than a `try:... except...` here, but if this method is not good, let's use something else.

Thanks for doing that. I should have done it myself and indeed we need to wait for the next beta.

There is nothing natural about `is_package_installed`. Which piece of software can you name that will call rpm or apt to figure out if some of their dependencies are installed? How portable do you think that is? `try:... except...` is a well accepted pythonism in other python software that don't have their own package manager to interrogate.


---

Comment by jdemeyer created at 2019-04-30 08:17:06

I'm not even convinced that we should use `PackageNotFoundError`, just let the `import` fail. François, do you have an opinion on that?


---

Comment by jdemeyer created at 2019-04-30 08:21:46

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2019-04-30 08:21:46

New commits:


---

Comment by fbissey created at 2019-04-30 09:20:14

Replying to [comment:3 jdemeyer]:
> I'm not even convinced that we should use `PackageNotFoundError`, just let the `import` fail. François, do you have an opinion on that?

Long term we will probably want to drop it as well. I am not so sure about just letting it fail or letting it print a message about missing dependency. I think that would be the first place where we just let it fail. I would have thought best practise was to inform of the missing dependency. But if you tell me otherwise I won't really object.


---

Comment by dcoudert created at 2019-04-30 12:52:43

there is an error: it is `vertex_list` and not `vertexlist` in `v_to_int = {v: i for i, v in enumerate(vertexlist)}`.

We could also change `vertex_list = self.vertices()` to `vertex_list = list(self)`, but it is documented like that. So may be in a future ticket.


---

Comment by git created at 2019-04-30 13:32:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-04-30 13:38:43

Replying to [comment:6 fbissey]:
> Long term we will probably want to drop it as well. I am not so sure about just letting it fail or letting it print a message about missing dependency. I think that would be the first place where we just let it fail. I would have thought best practise was to inform of the missing dependency. But if you tell me otherwise I won't really object.

I use the `Feature` now which gives a nice error message.


---

Comment by dcoudert created at 2019-05-01 17:23:47

I like it !

Could you add a doctest in `igraph_feature` (the patchbot complain that doctest coverage is reduced).


---

Comment by fbissey created at 2019-05-06 01:34:55

Replying to [comment:10 dcoudert]:
> I like it !
> 
> Could you add a doctest in `igraph_feature` (the patchbot complain that doctest coverage is reduced).
Feels overkill for test which will probably have to be marked as `random`.


---

Comment by dcoudert created at 2019-05-06 09:10:44

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2019-05-06 09:10:44

> Feels overkill for test which will probably have to be marked as `random`.
It's only to avoid doctest coverage regression, but I agree it's overkill.

So, let's go like that.


---

Comment by vbraun created at 2019-05-08 15:50:56

Resolution: fixed
