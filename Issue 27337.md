# Issue 27337: py3: fix one doctest in French book

Issue created by migration from https://trac.sagemath.org/ticket/27574

Original creator: chapoton

Original creation time: 2019-03-30 17:03:52

CC:  tscrim vklein

by marking it as random


---

Comment by chapoton created at 2019-03-30 17:04:24

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-03-30 17:04:24

New commits:


---

Comment by chapoton created at 2019-03-30 19:11:12

please review


---

Comment by chapoton created at 2019-04-05 06:54:12

green bot, please review


---

Comment by tscrim created at 2019-04-05 09:02:09

I don't really like marking tests as random when there is exact output. I think the better thing to do is to change the test to check that the output matches something explicit.


---

Comment by chapoton created at 2019-04-05 11:48:27

Well, I have not read the book, but this precise doctest is probably here to display an example of bad answer, by lack of sufficient precision...


---

Comment by chapoton created at 2019-04-05 14:23:52

page 201 of the book (http://sagebook.gforge.inria.fr/english.html)

```
Let us continue. For the following system, J.variety() computes (exactly) a
triangular decomposition of J, then finds numerically the real solutions of the
obtained system(s). This yields a unique real solution:

sage: R.<x,y> = QQ[]; J = ideal([ x^7-(100*x-1)^2, y-x^7+1 ])
sage: J.variety(RealField(51))
[{y: 396340.890166545, x: -14.1660266425312}]

Yet, by performing the computation exactly until the end, we see there are three
real solutions, and the value of x in the above numerical solution is completely
wrong:
```



---

Comment by tscrim created at 2019-04-06 08:16:44

Based on that, I am more convinced that we should make sure it is testing the correct output and not just something from a valid computation. However, there is something very annoying happening when I try to test against the value exactly. The `x` value does not quite match despite having the same digits displayed. So I guess we just have to let this be with `# random`. `:/`


---

Comment by tscrim created at 2019-04-06 08:16:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-04-08 21:34:06

Resolution: fixed
