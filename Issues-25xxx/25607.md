# Issue 25607: Shrink coefficients in Mac Lane algorithm

archive/issues_025370.json:
```json
{
    "body": "As a followup to #25397, let's try to shrink coefficients even further, using the ideas from https://github.com/MCLF/mclf/pull/60/files.\n\nThis also speeds up things overall. All the valuation tests took 406s on my machine before and now take 314s.\n\nCC:  swewers\n\nBranch/Commit: 8d2324a89be21300206687a265833b5db6e6609f\n\nReviewer: Stefan Wewers\n\nAuthor: Julian R\u00fcth\n\nDependencies: #25397\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25607\n\n",
    "closed_at": "2018-08-29T22:27:40Z",
    "created_at": "2018-06-19T11:21:23Z",
    "labels": [
        "component: padics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Shrink coefficients in Mac Lane algorithm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25607",
    "user": "https://github.com/saraedum"
}
```
As a followup to #25397, let's try to shrink coefficients even further, using the ideas from https://github.com/MCLF/mclf/pull/60/files.

This also speeds up things overall. All the valuation tests took 406s on my machine before and now take 314s.

CC:  swewers

Branch/Commit: 8d2324a89be21300206687a265833b5db6e6609f

Reviewer: Stefan Wewers

Author: Julian Rüth

Dependencies: #25397

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25607





---

archive/issue_comments_380916.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2018-06-19T11:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380916",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_380917.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-20T17:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_380918.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n As a followup to #25397, let's try to shrink coefficients even further, using the ideas from https://github.com/MCLF/mclf/pull/60/files.\n+\n+This also speeds up things overall. All the valuation tests took 406s on my machine before and now take 314s.\n \n Author: Julian R\u00fcth\n \n```\n",
    "created_at": "2018-06-20T17:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380918",
    "user": "https://github.com/saraedum"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 As a followup to #25397, let's try to shrink coefficients even further, using the ideas from https://github.com/MCLF/mclf/pull/60/files.
+
+This also speeds up things overall. All the valuation tests took 406s on my machine before and now take 314s.
 
 Author: Julian Rüth
 
```




---

archive/issue_comments_380919.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-20T17:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380919",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_380920.json:
```json
{
    "body": "<a id='comment:7'></a>swewers: If you want to review this (I hope you do ;) This is really a somewhat wild mix of all kinds of ideas and little errors that I found. I can split it up into more isolated bits if you think it's overwhelming like that.\n\nIn the end I did not really take any new ideas from your pull request. I think that everything that's in there already existed (just some things did not work/were not called.) If you have any additional ideas in how to improve this, I would be very interested of course :)",
    "created_at": "2018-06-20T17:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380920",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>swewers: If you want to review this (I hope you do ;) This is really a somewhat wild mix of all kinds of ideas and little errors that I found. I can split it up into more isolated bits if you think it's overwhelming like that.

In the end I did not really take any new ideas from your pull request. I think that everything that's in there already existed (just some things did not work/were not called.) If you have any additional ideas in how to improve this, I would be very interested of course :)



---

archive/issue_comments_380921.json:
```json
{
    "body": "<a id='comment:8'></a>Btw., the doctests in `mclf` still works with this. Very few outputs change because the centers of affinoids are now sightly simpler.\n\n```\nFailed example:\n    Y.etale_locus()\nExpected:\n    Affinoid with 3 components:\n    Elementary affinoid defined by\n    v(x) >= 3/4\n    Elementary affinoid defined by\n    v(x + 7) >= 5/4\n    Elementary affinoid defined by\n    v(x + 2) >= 5/4\nGot:\n    Affinoid with 3 components:\n    Elementary affinoid defined by \n    v(x) >= 3/4\n    Elementary affinoid defined by \n    v(x - 2) >= 5/4\n    Elementary affinoid defined by \n    v(x + 2) >= 5/4\n    <BLANKLINE>\n```",
    "created_at": "2018-06-20T18:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380921",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:8'></a>Btw., the doctests in `mclf` still works with this. Very few outputs change because the centers of affinoids are now sightly simpler.

```
Failed example:
    Y.etale_locus()
Expected:
    Affinoid with 3 components:
    Elementary affinoid defined by
    v(x) >= 3/4
    Elementary affinoid defined by
    v(x + 7) >= 5/4
    Elementary affinoid defined by
    v(x + 2) >= 5/4
Got:
    Affinoid with 3 components:
    Elementary affinoid defined by 
    v(x) >= 3/4
    Elementary affinoid defined by 
    v(x - 2) >= 5/4
    Elementary affinoid defined by 
    v(x + 2) >= 5/4
    <BLANKLINE>
```



---

archive/issue_comments_380922.json:
```json
{
    "body": "<a id='comment:9'></a>This is great! Thanks.",
    "created_at": "2018-07-20T20:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380922",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

<a id='comment:9'></a>This is great! Thanks.



---

archive/issue_comments_380923.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-20T20:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380923",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_380924.json:
```json
{
    "body": "<a id='comment:10'></a>Real name in the reviewers field.",
    "created_at": "2018-07-22T18:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380924",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Real name in the reviewers field.



---

archive/issue_comments_380925.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-24T14:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380925",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_380926.json:
```json
{
    "body": "<a id='comment:11'></a>Soem pyflakes errors.",
    "created_at": "2018-07-24T14:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380926",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

<a id='comment:11'></a>Soem pyflakes errors.



---

archive/issue_comments_380927.json:
```json
{
    "body": "<a id='comment:12'></a>The pyflakes errors are already fixed in another ticket that touches padic_valuation. Let's ignore them here to avoid merge conflicts.",
    "created_at": "2018-07-30T14:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380927",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>The pyflakes errors are already fixed in another ticket that touches padic_valuation. Let's ignore them here to avoid merge conflicts.



---

archive/issue_comments_380928.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-07-30T14:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380928",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_380929.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-08-25T09:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_380930.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-08-25T09:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_380931.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-25T09:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380931",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_380932.json:
```json
{
    "body": "<a id='comment:14'></a>just merged in develop. back to positive review.",
    "created_at": "2018-08-25T09:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380932",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>just merged in develop. back to positive review.



---

archive/issue_comments_380933.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-29T22:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25607#issuecomment-380933",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064145.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-29T22:27:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25607",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25607#event-64145"
}
```
