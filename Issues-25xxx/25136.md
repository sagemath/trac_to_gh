# Issue 25136: Add monomial basis to FQSym

archive/issues_024899.json:
```json
{
    "body": "The monomial basis of Aguiar and Sottile (see 1.3 in \u200bhttp://www.math.tamu.edu/~sottile/research/pdf/SSym.pdf ; the formula (1.13) is most important, and triangularity should do the rest, if we make sure that the order is right).\n\nCC:  sage-combinat @darijgr @alauve @zabrocki @saliola amypang\n\nKeywords: IMA coding sprint, CHAs, permutations\n\nReviewer: Travis Scrimshaw\n\nAuthor: Darij Grinberg\n\nBranch: 8dc0c5c9f5dea1f78a6cdac21db48b787ceaa8d0\n\nDependencies: #25131, #25141\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25136\n\n",
    "closed_at": "2018-05-22T06:56:02Z",
    "created_at": "2018-04-10T15:31:35Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Add monomial basis to FQSym",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25136",
    "user": "https://github.com/tscrim"
}
```
The monomial basis of Aguiar and Sottile (see 1.3 in â€‹http://www.math.tamu.edu/~sottile/research/pdf/SSym.pdf ; the formula (1.13) is most important, and triangularity should do the rest, if we make sure that the order is right).

CC:  sage-combinat @darijgr @alauve @zabrocki @saliola amypang

Keywords: IMA coding sprint, CHAs, permutations

Reviewer: Travis Scrimshaw

Author: Darij Grinberg

Branch: 8dc0c5c9f5dea1f78a6cdac21db48b787ceaa8d0

Dependencies: #25131, #25141

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25136





---

archive/issue_comments_349662.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2018-04-11T16:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349662",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_349663.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-04-11T23:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_349664.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-11T23:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349665.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-11T23:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349665",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_349666.json:
```json
{
    "body": "<a id='comment:4'></a>There it is. (I'm Darij, logging in through github.)",
    "created_at": "2018-04-11T23:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349666",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>There it is. (I'm Darij, logging in through github.)



---

archive/issue_comments_349667.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-11T23:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349668.json:
```json
{
    "body": "<a id='comment:6'></a>PS. Since the branch has become rather tortuous, here are all the commits that need reviewing:\n\nhttps://git.sagemath.org/sage.git/commit/?id=7dd85ffbc88a285b4057be6e8ba482715067e85e\n\nhttps://git.sagemath.org/sage.git/commit/?id=faad4617d3a0cd44f489e0183ad0ce32f0471036\n\nhttps://git.sagemath.org/sage.git/commit/?id=78a4253e73accdc58060e7f20ac77a1027ce2db1\n\nhttps://git.sagemath.org/sage.git/commit/?id=ef1f3b78ff16516ee9b25f8c767ca9bc34ca6c39",
    "created_at": "2018-04-12T01:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349668",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>PS. Since the branch has become rather tortuous, here are all the commits that need reviewing:

https://git.sagemath.org/sage.git/commit/?id=7dd85ffbc88a285b4057be6e8ba482715067e85e

https://git.sagemath.org/sage.git/commit/?id=faad4617d3a0cd44f489e0183ad0ce32f0471036

https://git.sagemath.org/sage.git/commit/?id=78a4253e73accdc58060e7f20ac77a1027ce2db1

https://git.sagemath.org/sage.git/commit/?id=ef1f3b78ff16516ee9b25f8c767ca9bc34ca6c39



---

archive/issue_comments_349669.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-12T15:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349670.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-12T15:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349671.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-12T20:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349672.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-12T20:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349672",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349673.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2018-05-10T07:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_349674.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-05-10T07:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_349675.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-10T07:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349675",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349676.json:
```json
{
    "body": "<a id='comment:12'></a>Trivial rebase over one of the dependencies.",
    "created_at": "2018-05-10T07:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349676",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:12'></a>Trivial rebase over one of the dependencies.



---

archive/issue_comments_349677.json:
```json
{
    "body": "<a id='comment:13'></a>wake up patchbots",
    "created_at": "2018-05-15T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349677",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>wake up patchbots



---

archive/issue_events_063056.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-05-15T23:37:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25136#event-63056"
}
```



---

archive/issue_comments_349678.json:
```json
{
    "body": "<a id='comment:14'></a>```\nFile \"src/sage/combinat/ncsym/bases.py\", line 640, in sage.combinat.ncsym.bases.NCSymBases.ElementMethods.to_wqsym\nFailed example:\n    (4*p[[1,3],[2]]-p[[1]]).to_wqsym()\nExpected:\n    4*M[{1, 2, 3}] + 4*M[{2}, {1, 3}] + 4*M[{1, 3}, {2}] - M[{1}]\nGot:\n    4*M[{2}, {1, 3}] - M[{1}] + 4*M[{1, 2, 3}] + 4*M[{1, 3}, {2}]\n```\nCan't reproduce this one. But it's from a few versions ago, so maybe it's fixed now.",
    "created_at": "2018-05-16T11:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349678",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:14'></a>```
File "src/sage/combinat/ncsym/bases.py", line 640, in sage.combinat.ncsym.bases.NCSymBases.ElementMethods.to_wqsym
Failed example:
    (4*p[[1,3],[2]]-p[[1]]).to_wqsym()
Expected:
    4*M[{1, 2, 3}] + 4*M[{2}, {1, 3}] + 4*M[{1, 3}, {2}] - M[{1}]
Got:
    4*M[{2}, {1, 3}] - M[{1}] + 4*M[{1, 2, 3}] + 4*M[{1, 3}, {2}]
```
Can't reproduce this one. But it's from a few versions ago, so maybe it's fixed now.



---

archive/issue_comments_349679.json:
```json
{
    "body": "<a id='comment:15'></a>The last patchbot is happy now, so I think this is ready to go.",
    "created_at": "2018-05-17T21:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349679",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>The last patchbot is happy now, so I think this is ready to go.



---

archive/issue_events_063057.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-22T06:56:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25136#event-63057"
}
```



---

archive/issue_comments_349680.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-22T06:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349680",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_349681.json:
```json
{
    "body": "<a id='comment:17'></a>FQSYM doctests now take way too long..",
    "created_at": "2018-06-11T19:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349681",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>FQSYM doctests now take way too long..



---

archive/issue_comments_349682.json:
```json
{
    "body": "<a id='comment:18'></a>Are they still taking too long if you pull #25326 as well? One of the things I did in #25326 was optimizing FQSym, particularly the M basis.\n\n(NB: I don't know how long doctests *should* take on Cygwin, so I have no way to tell if I'm doing things right.)",
    "created_at": "2018-06-11T19:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25136",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25136#issuecomment-349682",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:18'></a>Are they still taking too long if you pull #25326 as well? One of the things I did in #25326 was optimizing FQSym, particularly the M basis.

(NB: I don't know how long doctests *should* take on Cygwin, so I have no way to tell if I'm doing things right.)
