# Issue 25741: Speedup _mpoly_dict_recursive by Cythonizing it

archive/issues_025504.json:
```json
{
    "body": "This is called in constructing elements of multivariate Laurent polynomial rings, so it is worth speeding it up.\n\nCC:  @tscrim @jdemeyer\n\nKeywords: days94\n\nBranch/Commit: f70f05337b987bf385c844f9f0209a122664abbe\n\nReviewer: Marc Mezzarobba\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25741\n\n",
    "closed_at": "2018-08-05T08:17:21Z",
    "created_at": "2018-07-02T14:10:00Z",
    "labels": [
        "component: performance"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Speedup _mpoly_dict_recursive by Cythonizing it",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25741",
    "user": "https://github.com/tscrim"
}
```
This is called in constructing elements of multivariate Laurent polynomial rings, so it is worth speeding it up.

CC:  @tscrim @jdemeyer

Keywords: days94

Branch/Commit: f70f05337b987bf385c844f9f0209a122664abbe

Reviewer: Marc Mezzarobba

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25741





---

archive/issue_comments_487404.json:
```json
{
    "body": "<a id='comment:1'></a>\n\n```\nsage: R = Integers(10)['x,y,z']['t,s']\nsage: t,s = R.gens()\nsage: x,y,z = R.base_ring().gens()\nsage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))\nThe slowest run took 8.13 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000 loops, best of 3: 1.38 ms per loop\n```\nversus old\n\n```\nsage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))\nThe slowest run took 115.43 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000 loops, best of 3: 1.47 ms per loop\n```\nSo currently it has a ~10% speedup.",
    "created_at": "2018-07-02T14:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487404",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>

```
sage: R = Integers(10)['x,y,z']['t,s']
sage: t,s = R.gens()
sage: x,y,z = R.base_ring().gens()
sage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))
The slowest run took 8.13 times longer than the fastest. This could mean that an intermediate result is being cached.
1000 loops, best of 3: 1.38 ms per loop
```
versus old

```
sage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))
The slowest run took 115.43 times longer than the fastest. This could mean that an intermediate result is being cached.
1000 loops, best of 3: 1.47 ms per loop
```
So currently it has a ~10% speedup.



---

archive/issue_comments_487405.json:
```json
{
    "body": "Changing branch from \"\" to \"public/performance/improve_mpoly_dict_recursive-25741\"",
    "created_at": "2018-07-02T15:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487405",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/performance/improve_mpoly_dict_recursive-25741"



---

archive/issue_comments_487406.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-02T15:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487406",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487407.json:
```json
{
    "body": "Changing commit from \"\" to \"f70f05337b987bf385c844f9f0209a122664abbe\"",
    "created_at": "2018-07-02T15:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "f70f05337b987bf385c844f9f0209a122664abbe"



---

archive/issue_comments_487408.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[f70f053](https://github.com/sagemath/sagetrac-mirror/commit/f70f05337b987bf385c844f9f0209a122664abbe)|`Improve the speed of _mpoly_dict_recursive.`|",
    "created_at": "2018-07-02T15:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[f70f053](https://github.com/sagemath/sagetrac-mirror/commit/f70f05337b987bf385c844f9f0209a122664abbe)|`Improve the speed of _mpoly_dict_recursive.`|



---

archive/issue_comments_487409.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-03T08:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487409",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487410.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2018-07-03T08:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487410",
    "user": "https://github.com/mezzarobba"
}
```

Changing reviewer from "" to "Marc Mezzarobba"



---

archive/issue_comments_487411.json:
```json
{
    "body": "<a id='comment:5'></a>\nlgtm!",
    "created_at": "2018-07-03T08:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487411",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:5'></a>
lgtm!



---

archive/issue_comments_487412.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487412",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_081064.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:17:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25741#event-81064"
}
```



---

archive/issue_comments_487413.json:
```json
{
    "body": "Changing branch from \"public/performance/improve_mpoly_dict_recursive-25741\" to \"f70f05337b987bf385c844f9f0209a122664abbe\"",
    "created_at": "2018-08-05T08:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25741#issuecomment-487413",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/performance/improve_mpoly_dict_recursive-25741" to "f70f05337b987bf385c844f9f0209a122664abbe"
