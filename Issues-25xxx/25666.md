# Issue 25666: Interface GSL Monte Carlo with sage

archive/issues_025429.json:
```json
{
    "body": "Currently Sage can do one dimensional integration with the gsl function `numerical_integral`.\n\nThe goal of this ticket is to allow sage to do multidimensional integration with gsl's monte carlo function.\nGsl documentation https://www.gnu.org/software/gsl/doc/html/montecarlo.html\n\nCC:  @videlec\n\nKeywords: days101\n\nBranch/Commit: ec05f8a4fd5fc7925c09c03887c91a1f76519a96\n\nReviewer: Vincent Delecroix\n\nAuthor: Vincent Klein, Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25666\n\n",
    "closed_at": "2019-06-28T04:30:34Z",
    "created_at": "2018-06-26T14:18:47Z",
    "labels": [
        "component: calculus"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Interface GSL Monte Carlo with sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25666",
    "user": "https://github.com/vinklein"
}
```
Currently Sage can do one dimensional integration with the gsl function `numerical_integral`.

The goal of this ticket is to allow sage to do multidimensional integration with gsl's monte carlo function.
Gsl documentation https://www.gnu.org/software/gsl/doc/html/montecarlo.html

CC:  @videlec

Keywords: days101

Branch/Commit: ec05f8a4fd5fc7925c09c03887c91a1f76519a96

Reviewer: Vincent Delecroix

Author: Vincent Klein, Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25666





---

archive/issue_comments_493783.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Currently Sage can on dimensional integration with the gsl function `numerical_integral`.\n+Currently Sage can do one dimensional integration with the gsl function `numerical_integral`.\n \n The goal of this ticket is to allow sage to do multidimensional integration with gsl's monte carlo function.\n Gsl documentation https://www.gnu.org/software/gsl/doc/html/montecarlo.html\n``````\n",
    "created_at": "2018-06-26T14:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493783",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Currently Sage can on dimensional integration with the gsl function `numerical_integral`.
+Currently Sage can do one dimensional integration with the gsl function `numerical_integral`.
 
 The goal of this ticket is to allow sage to do multidimensional integration with gsl's monte carlo function.
 Gsl documentation https://www.gnu.org/software/gsl/doc/html/montecarlo.html
``````




---

archive/issue_comments_493784.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vklein/monte_carlo\"",
    "created_at": "2019-06-19T13:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493784",
    "user": "https://github.com/vinklein"
}
```

Changing branch from "" to "u/vklein/monte_carlo"



---

archive/issue_comments_493785.json:
```json
{
    "body": "Changing commit from \"\" to \"f167f32366073c44d9034599afa5e18a897cccf1\"",
    "created_at": "2019-06-19T13:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493785",
    "user": "https://github.com/vinklein"
}
```

Changing commit from "" to "f167f32366073c44d9034599afa5e18a897cccf1"



---

archive/issue_comments_493786.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe branch is a development version.\n\n---\nNew commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[149cdcf](https://github.com/sagemath/sagetrac-mirror/commit/149cdcfda80ab881ccc4b48e632db29185419aff)|`Trac #25666: Start interface to gsl monte ...`|\n|[f167f32](https://github.com/sagemath/sagetrac-mirror/commit/f167f32366073c44d9034599afa5e18a897cccf1)|`make integration works`|",
    "created_at": "2019-06-19T13:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493786",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:4'></a>
The branch is a development version.

---
New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[149cdcf](https://github.com/sagemath/sagetrac-mirror/commit/149cdcfda80ab881ccc4b48e632db29185419aff)|`Trac #25666: Start interface to gsl monte ...`|
|[f167f32](https://github.com/sagemath/sagetrac-mirror/commit/f167f32366073c44d9034599afa5e18a897cccf1)|`make integration works`|



---

archive/issue_comments_493787.json:
```json
{
    "body": "Changing commit from \"f167f32366073c44d9034599afa5e18a897cccf1\" to \"b48117e18ef0a7ac60f0639267620e3662c404ee\"",
    "created_at": "2019-06-19T13:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f167f32366073c44d9034599afa5e18a897cccf1" to "b48117e18ef0a7ac60f0639267620e3662c404ee"



---

archive/issue_comments_493788.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[b48117e](https://github.com/sagemath/sagetrac-mirror/commit/b48117e18ef0a7ac60f0639267620e3662c404ee)|`more tests`|",
    "created_at": "2019-06-19T13:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493788",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[b48117e](https://github.com/sagemath/sagetrac-mirror/commit/b48117e18ef0a7ac60f0639267620e3662c404ee)|`more tests`|



---

archive/issue_comments_493789.json:
```json
{
    "body": "<a id='comment:6'></a>\n- the Monte Carlo version should apear in the code **after** the one-dimensional deterministic version\n- right now the code is far too slow. The integration goes through the function `double c_monte_ff(double *x, size_t dim, void *params)` which creates a Python list in order to evaluate the integrand\n- the code only works with function that can be transformed into fast callble. It should also work for Python function such as `lambda u,v: u*v`\n- I did `Ctrl-C` and obtained a segfault",
    "created_at": "2019-06-19T13:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493789",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
- the Monte Carlo version should apear in the code **after** the one-dimensional deterministic version
- right now the code is far too slow. The integration goes through the function `double c_monte_ff(double *x, size_t dim, void *params)` which creates a Python list in order to evaluate the integrand
- the code only works with function that can be transformed into fast callble. It should also work for Python function such as `lambda u,v: u*v`
- I did `Ctrl-C` and obtained a segfault



---

archive/issue_comments_493790.json:
```json
{
    "body": "Changing keywords from \"\" to \"days101\".",
    "created_at": "2019-06-19T21:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493790",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "days101".



---

archive/issue_comments_493791.json:
```json
{
    "body": "<a id='comment:8'></a>\nI removed the list constructions.\n\n---\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[eaa2b45](https://github.com/sagemath/sagetrac-mirror/commit/eaa2b456c86d9c629a9068e0b17477e0c430aa4b)|`avoid constructing lists`|",
    "created_at": "2019-06-20T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493791",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
I removed the list constructions.

---
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[eaa2b45](https://github.com/sagemath/sagetrac-mirror/commit/eaa2b456c86d9c629a9068e0b17477e0c430aa4b)|`avoid constructing lists`|



---

archive/issue_comments_493792.json:
```json
{
    "body": "Changing commit from \"b48117e18ef0a7ac60f0639267620e3662c404ee\" to \"eaa2b456c86d9c629a9068e0b17477e0c430aa4b\"",
    "created_at": "2019-06-20T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493792",
    "user": "https://github.com/videlec"
}
```

Changing commit from "b48117e18ef0a7ac60f0639267620e3662c404ee" to "eaa2b456c86d9c629a9068e0b17477e0c430aa4b"



---

archive/issue_comments_493793.json:
```json
{
    "body": "Changing branch from \"u/vklein/monte_carlo\" to \"public/monte\"",
    "created_at": "2019-06-20T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493793",
    "user": "https://github.com/videlec"
}
```

Changing branch from "u/vklein/monte_carlo" to "public/monte"



---

archive/issue_comments_493794.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[457fca7](https://github.com/sagemath/sagetrac-mirror/commit/457fca7adfc47113fd99d32ede01d638078ff608)|`Trac #25666: Manage non-fastcallable function`|",
    "created_at": "2019-06-20T15:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[457fca7](https://github.com/sagemath/sagetrac-mirror/commit/457fca7adfc47113fd99d32ede01d638078ff608)|`Trac #25666: Manage non-fastcallable function`|



---

archive/issue_comments_493795.json:
```json
{
    "body": "Changing commit from \"eaa2b456c86d9c629a9068e0b17477e0c430aa4b\" to \"457fca7adfc47113fd99d32ede01d638078ff608\"",
    "created_at": "2019-06-20T15:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493795",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eaa2b456c86d9c629a9068e0b17477e0c430aa4b" to "457fca7adfc47113fd99d32ede01d638078ff608"



---

archive/issue_comments_493796.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[018d71f](https://github.com/sagemath/sagetrac-mirror/commit/018d71fb975bc33042a73e0c9774e22ff55c3da6)|`Trac #25666: Add tests and move monte_carlo_...`|",
    "created_at": "2019-06-20T16:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[018d71f](https://github.com/sagemath/sagetrac-mirror/commit/018d71fb975bc33042a73e0c9774e22ff55c3da6)|`Trac #25666: Add tests and move monte_carlo_...`|



---

archive/issue_comments_493797.json:
```json
{
    "body": "Changing commit from \"457fca7adfc47113fd99d32ede01d638078ff608\" to \"018d71fb975bc33042a73e0c9774e22ff55c3da6\"",
    "created_at": "2019-06-20T16:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "457fca7adfc47113fd99d32ede01d638078ff608" to "018d71fb975bc33042a73e0c9774e22ff55c3da6"



---

archive/issue_comments_493798.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[33fc47a](https://github.com/sagemath/sagetrac-mirror/commit/33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966)|`Trac #25666: Add tests and move monte_carlo_...`|",
    "created_at": "2019-06-20T16:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[33fc47a](https://github.com/sagemath/sagetrac-mirror/commit/33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966)|`Trac #25666: Add tests and move monte_carlo_...`|



---

archive/issue_comments_493799.json:
```json
{
    "body": "Changing commit from \"018d71fb975bc33042a73e0c9774e22ff55c3da6\" to \"33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966\"",
    "created_at": "2019-06-20T16:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "018d71fb975bc33042a73e0c9774e22ff55c3da6" to "33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966"



---

archive/issue_comments_493800.json:
```json
{
    "body": "<a id='comment:12'></a>\n- Monte Carlo has been moved after the one-dimensional version\n- Pythons function are now supported.\n- Some tests have been added\n- I don't have managed to reproduce the segfault.",
    "created_at": "2019-06-20T16:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493800",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:12'></a>
- Monte Carlo has been moved after the one-dimensional version
- Pythons function are now supported.
- Some tests have been added
- I don't have managed to reproduce the segfault.



---

archive/issue_events_073051.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-06-20T17:27:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25666#event-73051"
}
```



---

archive/issue_comments_493801.json:
```json
{
    "body": "<a id='comment:14'></a>\n- instead of `elif not isinstance(func, Wrapper)` you should check for `Wrapper_rdf`. For example the following segfaults\n\n```\nsage: from sage.calculus.integration import monte_carlo_integration\nsage: f(u,v) = u*v\nsage: f = fast_callable(f, domain=CDF)\nsage: monte_carlo_integration(f, [0,0], [2,2], 10^7) # abs tol 0.1\n```\n- the first line of the documentation must be a single short line. For example `Integrate func` is enough. The details are provided by the rest of the documentation.\n- there is no newline at end of file (and git somehow complains)\n- can you replace `PyMem_Malloc`/`PyMem_Free` by the more modern `MemoryAllocator` from `ext/memory_allocator.pyx` (for `_xl` and `_xu`)\n- to make it faster with Python functions, you can try to change directly the values of the floating points in wrapper.lx via the [https://docs.python.org/2/c-api/float.html C API](https://docs.python.org/2/c-api/float.html C API)\n- you should change `print('TODO: Implement the case where the algo param is wrong')` with a proper error :-0",
    "created_at": "2019-06-20T20:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493801",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>
- instead of `elif not isinstance(func, Wrapper)` you should check for `Wrapper_rdf`. For example the following segfaults

```
sage: from sage.calculus.integration import monte_carlo_integration
sage: f(u,v) = u*v
sage: f = fast_callable(f, domain=CDF)
sage: monte_carlo_integration(f, [0,0], [2,2], 10^7) # abs tol 0.1
```
- the first line of the documentation must be a single short line. For example `Integrate func` is enough. The details are provided by the rest of the documentation.
- there is no newline at end of file (and git somehow complains)
- can you replace `PyMem_Malloc`/`PyMem_Free` by the more modern `MemoryAllocator` from `ext/memory_allocator.pyx` (for `_xl` and `_xu`)
- to make it faster with Python functions, you can try to change directly the values of the floating points in wrapper.lx via the [https://docs.python.org/2/c-api/float.html C API](https://docs.python.org/2/c-api/float.html C API)
- you should change `print('TODO: Implement the case where the algo param is wrong')` with a proper error :-0



---

archive/issue_comments_493802.json:
```json
{
    "body": "Changing commit from \"33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966\" to \"f292117690df7d9c0df0cc7f9f9c18ae83f25ec3\"",
    "created_at": "2019-06-24T15:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "33fc47a0e2c03ddf8d7eb3a6d87acefc26afe966" to "f292117690df7d9c0df0cc7f9f9c18ae83f25ec3"



---

archive/issue_comments_493803.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[6e71102](https://github.com/sagemath/sagetrac-mirror/commit/6e71102e5acd55681b8ffe2c18edf7a9281a0bbd)|`Trac #25666: Start interface to gsl monte ...`|\n|[39e4ea2](https://github.com/sagemath/sagetrac-mirror/commit/39e4ea2b46a0b37da79479f4080585f5a23c1919)|`make integration works`|\n|[99e76a3](https://github.com/sagemath/sagetrac-mirror/commit/99e76a3beda5cbaf9b7b47fe17dba7bef86aac6a)|`more tests`|\n|[4e3eafc](https://github.com/sagemath/sagetrac-mirror/commit/4e3eafc7cef430160cc766299345233774f91a91)|`avoid constructing lists`|\n|[7d1c991](https://github.com/sagemath/sagetrac-mirror/commit/7d1c9912e1accf376c264547a15aa59dfa64f11b)|`Trac #25666: Manage non-fastcallable function`|\n|[e0398f4](https://github.com/sagemath/sagetrac-mirror/commit/e0398f4028ad0f7c19257d7cbac3ffb955aff19a)|`Trac #25666: Add tests and move monte_carlo_...`|\n|[f292117](https://github.com/sagemath/sagetrac-mirror/commit/f292117690df7d9c0df0cc7f9f9c18ae83f25ec3)|`Trac #25666: Use sage's MemoryAllocator ...`|",
    "created_at": "2019-06-24T15:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[6e71102](https://github.com/sagemath/sagetrac-mirror/commit/6e71102e5acd55681b8ffe2c18edf7a9281a0bbd)|`Trac #25666: Start interface to gsl monte ...`|
|[39e4ea2](https://github.com/sagemath/sagetrac-mirror/commit/39e4ea2b46a0b37da79479f4080585f5a23c1919)|`make integration works`|
|[99e76a3](https://github.com/sagemath/sagetrac-mirror/commit/99e76a3beda5cbaf9b7b47fe17dba7bef86aac6a)|`more tests`|
|[4e3eafc](https://github.com/sagemath/sagetrac-mirror/commit/4e3eafc7cef430160cc766299345233774f91a91)|`avoid constructing lists`|
|[7d1c991](https://github.com/sagemath/sagetrac-mirror/commit/7d1c9912e1accf376c264547a15aa59dfa64f11b)|`Trac #25666: Manage non-fastcallable function`|
|[e0398f4](https://github.com/sagemath/sagetrac-mirror/commit/e0398f4028ad0f7c19257d7cbac3ffb955aff19a)|`Trac #25666: Add tests and move monte_carlo_...`|
|[f292117](https://github.com/sagemath/sagetrac-mirror/commit/f292117690df7d9c0df0cc7f9f9c18ae83f25ec3)|`Trac #25666: Use sage's MemoryAllocator ...`|



---

archive/issue_comments_493804.json:
```json
{
    "body": "<a id='comment:16'></a>\nI think it would be simpler to add a `list lx` attribute to `PyFunctionWrapper` rather than creating the ad hoc `PyMonteWrapper`. When unused this attribute will be set to `NULL` and should not affect performance (though you should check it).\n\nAlso I would not use `monte` alone but rather `monte_carlo`. The abbreviation sounds weird.",
    "created_at": "2019-06-24T15:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493804",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
I think it would be simpler to add a `list lx` attribute to `PyFunctionWrapper` rather than creating the ad hoc `PyMonteWrapper`. When unused this attribute will be set to `NULL` and should not affect performance (though you should check it).

Also I would not use `monte` alone but rather `monte_carlo`. The abbreviation sounds weird.



---

archive/issue_comments_493805.json:
```json
{
    "body": "<a id='comment:17'></a>\nOk i will do that.",
    "created_at": "2019-06-25T07:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493805",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:17'></a>
Ok i will do that.



---

archive/issue_comments_493806.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[2b2a6f5](https://github.com/sagemath/sagetrac-mirror/commit/2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4)|`Trac #25666: Delete PyMonteWrapper struct ...`|",
    "created_at": "2019-06-25T08:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[2b2a6f5](https://github.com/sagemath/sagetrac-mirror/commit/2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4)|`Trac #25666: Delete PyMonteWrapper struct ...`|



---

archive/issue_comments_493807.json:
```json
{
    "body": "Changing commit from \"f292117690df7d9c0df0cc7f9f9c18ae83f25ec3\" to \"2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4\"",
    "created_at": "2019-06-25T08:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f292117690df7d9c0df0cc7f9f9c18ae83f25ec3" to "2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4"



---

archive/issue_comments_493808.json:
```json
{
    "body": "<a id='comment:19'></a>\nDone.\nPerformance check has been done with :\n\n```\nsage: f(x,a) = 1/(a+x^2)\nsage: %time l=[numerical_integral(f, 1, 2, max_points=100000, params=[n]) for n in range(10000)]\nCPU times: user 2.93 s, sys: 176 ms, total: 3.11 s\nWall time: 3.1 s\n```\n\nAnd as you predicted the modification seems to be harmless.\n\nTell me if you have an example to maximize the number of sample points required.\n\nI give positive review to commits `39e4ea2`, \u200b`99e76a3` and `4e3eafc`.",
    "created_at": "2019-06-25T08:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493808",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:19'></a>
Done.
Performance check has been done with :

```
sage: f(x,a) = 1/(a+x^2)
sage: %time l=[numerical_integral(f, 1, 2, max_points=100000, params=[n]) for n in range(10000)]
CPU times: user 2.93 s, sys: 176 ms, total: 3.11 s
Wall time: 3.1 s
```

And as you predicted the modification seems to be harmless.

Tell me if you have an example to maximize the number of sample points required.

I give positive review to commits `39e4ea2`, ​`99e76a3` and `4e3eafc`.



---

archive/issue_comments_493809.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-25T08:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493809",
    "user": "https://github.com/vinklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_493810.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Klein, Vincent Delecroix\"",
    "created_at": "2019-06-25T08:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493810",
    "user": "https://github.com/vinklein"
}
```

Changing author from "" to "Vincent Klein, Vincent Delecroix"



---

archive/issue_comments_493811.json:
```json
{
    "body": "<a id='comment:20'></a>\nTerminology is still bad. We would have `numerical_integral` and `monte_carlo_integration`. Why not `monte_carlo_integral`?",
    "created_at": "2019-06-25T08:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493811",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'></a>
Terminology is still bad. We would have `numerical_integral` and `monte_carlo_integration`. Why not `monte_carlo_integral`?



---

archive/issue_comments_493812.json:
```json
{
    "body": "<a id='comment:21'></a>\nPlease add a space around comparison signs such as in `len(wrapper.the_parameters)!=0`.",
    "created_at": "2019-06-25T08:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493812",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
Please add a space around comparison signs such as in `len(wrapper.the_parameters)!=0`.



---

archive/issue_comments_493813.json:
```json
{
    "body": "<a id='comment:22'></a>\n(and assignment as well)",
    "created_at": "2019-06-25T08:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493813",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>
(and assignment as well)



---

archive/issue_comments_493814.json:
```json
{
    "body": "<a id='comment:23'></a>\nConcerning documentation string, please read carefully the [developer manual](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings) and the [Python conventions in PEP 8](https://www.python.org/dev/peps/pep-0008/). In particular:\n- long lines (> 79 characters) should be split\n- there should be a linebreak between the first line and the rest of the doc\n- etc\n\nAlso `python` -> `Python`.",
    "created_at": "2019-06-25T08:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493814",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Concerning documentation string, please read carefully the [developer manual](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings) and the [Python conventions in PEP 8](https://www.python.org/dev/peps/pep-0008/). In particular:
- long lines (> 79 characters) should be split
- there should be a linebreak between the first line and the rest of the doc
- etc

Also `python` -> `Python`.



---

archive/issue_comments_493815.json:
```json
{
    "body": "<a id='comment:24'></a>\nIt should be said the it uses gsl under the hood and make a reference to the documentation. The main authors of this are the GSL developers.",
    "created_at": "2019-06-25T08:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493815",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
It should be said the it uses gsl under the hood and make a reference to the documentation. The main authors of this are the GSL developers.



---

archive/issue_comments_493816.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis corner case is not correct\n\n```\n    if not dim:\n        return float(0)\n```\n(perhaps my fault). I would advised to simply raise an error.",
    "created_at": "2019-06-25T08:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493816",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>
This corner case is not correct

```
    if not dim:
        return float(0)
```
(perhaps my fault). I would advised to simply raise an error.



---

archive/issue_comments_493817.json:
```json
{
    "body": "<a id='comment:26'></a>\nTo allocate arrays, use `calloc` not `malloc`. It is safe for overflows.",
    "created_at": "2019-06-25T08:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493817",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
To allocate arrays, use `calloc` not `malloc`. It is safe for overflows.



---

archive/issue_comments_493818.json:
```json
{
    "body": "<a id='comment:27'></a>\nIs it really occurring\n\n```\n        if not func is None:\n            wrapper.the_function = func\n        else:\n            raise ValueError(\"No integrand defined\")\n```\nI think this gets catch earlier by `if not callable(func)`. Anyway, any error should be tested in the doctest.",
    "created_at": "2019-06-25T09:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493818",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
Is it really occurring

```
        if not func is None:
            wrapper.the_function = func
        else:
            raise ValueError("No integrand defined")
```
I think this gets catch earlier by `if not callable(func)`. Anyway, any error should be tested in the doctest.



---

archive/issue_comments_493819.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [vdelecroix](#comment%3A25):\n> This corner case is not correct\n> \n> ```\n>     if not dim:\n>         return float(0)\n> ```\n> (perhaps my fault). I would advised to simply raise an error.\n\n\nWhich one ? `ValueError: 0 dimension specified` ?",
    "created_at": "2019-06-25T09:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493819",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:28'></a>
Replying to [vdelecroix](#comment%3A25):
> This corner case is not correct
> 
> ```
>     if not dim:
>         return float(0)
> ```
> (perhaps my fault). I would advised to simply raise an error.


Which one ? `ValueError: 0 dimension specified` ?



---

archive/issue_comments_493820.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [vklein](#comment%3A28):\n> Replying to [vdelecroix](#comment%3A25):\n> > This corner case is not correct\n> > \n> > ```\n> >     if not dim:\n> >         return float(0)\n> > ```\n> > (perhaps my fault). I would advised to simply raise an error.\n\n> \n> Which one ? `ValueError: 0 dimension specified` ?\n\n\nThe user never specifies dimensions but simply integration bounds for the generalized cube. I would rather use the message `NotImplementedError: 0 dimensional integration not available`.",
    "created_at": "2019-06-25T09:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493820",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>
Replying to [vklein](#comment%3A28):
> Replying to [vdelecroix](#comment%3A25):
> > This corner case is not correct
> > 
> > ```
> >     if not dim:
> >         return float(0)
> > ```
> > (perhaps my fault). I would advised to simply raise an error.

> 
> Which one ? `ValueError: 0 dimension specified` ?


The user never specifies dimensions but simply integration bounds for the generalized cube. I would rather use the message `NotImplementedError: 0 dimensional integration not available`.



---

archive/issue_comments_493821.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-25T09:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493821",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_493822.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2019-06-25T09:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493822",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_493823.json:
```json
{
    "body": "Changing commit from \"2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4\" to \"b2c96af3543cd1be677247e198d8485480a8ab5b\"",
    "created_at": "2019-06-25T09:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2b2a6f5fa6a8c8186ad96132ecc037f0ade996d4" to "b2c96af3543cd1be677247e198d8485480a8ab5b"



---

archive/issue_comments_493824.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[b2c96af](https://github.com/sagemath/sagetrac-mirror/commit/b2c96af3543cd1be677247e198d8485480a8ab5b)|`Trac #25666: PEP8 modifications.`|",
    "created_at": "2019-06-25T09:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[b2c96af](https://github.com/sagemath/sagetrac-mirror/commit/b2c96af3543cd1be677247e198d8485480a8ab5b)|`Trac #25666: PEP8 modifications.`|



---

archive/issue_comments_493825.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[c9a9e09](https://github.com/sagemath/sagetrac-mirror/commit/c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27)|`Trac #25666: Rename into monte_carlo_integral ...`|",
    "created_at": "2019-06-25T12:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[c9a9e09](https://github.com/sagemath/sagetrac-mirror/commit/c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27)|`Trac #25666: Rename into monte_carlo_integral ...`|



---

archive/issue_comments_493826.json:
```json
{
    "body": "Changing commit from \"b2c96af3543cd1be677247e198d8485480a8ab5b\" to \"c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27\"",
    "created_at": "2019-06-25T12:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b2c96af3543cd1be677247e198d8485480a8ab5b" to "c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27"



---

archive/issue_comments_493827.json:
```json
{
    "body": "<a id='comment:33'></a>\nError management is not consistent between fastcallable and Python function :\n\n\n```\nsage: x, y = SR.var('x,y')\nsage: monte_carlo_integral(x*y, [0,0,0], [2,2,2], 1)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: The function to be integrated depends on 2 variables (x, y), and so cannot be integrated in one dimension. Please fix additional variables with the 'params' argument\nsage: monte_carlo_integral(lambda x,y: y*x, [0,0,0], [2,2,2], 1)\nobject of type 'NoneType' has no len()\n(0.0, inf)\n```",
    "created_at": "2019-06-25T12:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493827",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:33'></a>
Error management is not consistent between fastcallable and Python function :


```
sage: x, y = SR.var('x,y')
sage: monte_carlo_integral(x*y, [0,0,0], [2,2,2], 1)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: The function to be integrated depends on 2 variables (x, y), and so cannot be integrated in one dimension. Please fix additional variables with the 'params' argument
sage: monte_carlo_integral(lambda x,y: y*x, [0,0,0], [2,2,2], 1)
object of type 'NoneType' has no len()
(0.0, inf)
```



---

archive/issue_comments_493828.json:
```json
{
    "body": "Changing commit from \"c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27\" to \"a39e54937225541dbb64363eab1dec4834a60de3\"",
    "created_at": "2019-06-25T13:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c9a9e09d4832a85d0ad2d1b92411aa15bd1e7c27" to "a39e54937225541dbb64363eab1dec4834a60de3"



---

archive/issue_comments_493829.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[a39e549](https://github.com/sagemath/sagetrac-mirror/commit/a39e54937225541dbb64363eab1dec4834a60de3)|`Trac #25666: Manage inconsistent case with p...`|",
    "created_at": "2019-06-25T13:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[a39e549](https://github.com/sagemath/sagetrac-mirror/commit/a39e54937225541dbb64363eab1dec4834a60de3)|`Trac #25666: Manage inconsistent case with p...`|



---

archive/issue_comments_493830.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-25T13:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493830",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_493831.json:
```json
{
    "body": "<a id='comment:36'></a>\n[comment:24]?",
    "created_at": "2019-06-25T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493831",
    "user": "https://github.com/videlec"
}
```

<a id='comment:36'></a>
[comment:24]?



---

archive/issue_comments_493832.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-25T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493832",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_493833.json:
```json
{
    "body": "<a id='comment:37'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[4b1ea21](https://github.com/sagemath/sagetrac-mirror/commit/4b1ea21d202c219d2d411dbb8ae67d411aecc788)|`Trac #25666: Add reference and link to GSL doc.`|",
    "created_at": "2019-06-25T16:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[4b1ea21](https://github.com/sagemath/sagetrac-mirror/commit/4b1ea21d202c219d2d411dbb8ae67d411aecc788)|`Trac #25666: Add reference and link to GSL doc.`|



---

archive/issue_comments_493834.json:
```json
{
    "body": "Changing commit from \"a39e54937225541dbb64363eab1dec4834a60de3\" to \"4b1ea21d202c219d2d411dbb8ae67d411aecc788\"",
    "created_at": "2019-06-25T16:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a39e54937225541dbb64363eab1dec4834a60de3" to "4b1ea21d202c219d2d411dbb8ae67d411aecc788"



---

archive/issue_comments_493835.json:
```json
{
    "body": "<a id='comment:38'></a>\nI am not sure if the ref `[GSL1]` is ok or if there is a naming convention i need to know for references.",
    "created_at": "2019-06-25T16:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493835",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:38'></a>
I am not sure if the ref `[GSL1]` is ok or if there is a naming convention i need to know for references.



---

archive/issue_comments_493836.json:
```json
{
    "body": "<a id='comment:39'></a>\nThe link you used for `[GSL1]` is exactly the same as for `[GSL]`. Is that intended?\n\nFor naming convention, I would rather make a single entry\n\n```\n.. [GSL]\n   https://www.gnu.org/software/gsl/doc/html/\n```\nand when cited, make something more specific\n\n```\nDocumentation can be found in [GSL]_ chapter \"Look at there\".\n```",
    "created_at": "2019-06-25T18:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493836",
    "user": "https://github.com/videlec"
}
```

<a id='comment:39'></a>
The link you used for `[GSL1]` is exactly the same as for `[GSL]`. Is that intended?

For naming convention, I would rather make a single entry

```
.. [GSL]
   https://www.gnu.org/software/gsl/doc/html/
```
and when cited, make something more specific

```
Documentation can be found in [GSL]_ chapter "Look at there".
```



---

archive/issue_comments_493837.json:
```json
{
    "body": "Changing commit from \"4b1ea21d202c219d2d411dbb8ae67d411aecc788\" to \"e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0\"",
    "created_at": "2019-06-26T07:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b1ea21d202c219d2d411dbb8ae67d411aecc788" to "e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0"



---

archive/issue_comments_493838.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[e2dac8e](https://github.com/sagemath/sagetrac-mirror/commit/e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0)|`Trac #25666: Add reference and link to GSL doc.`|",
    "created_at": "2019-06-26T07:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[e2dac8e](https://github.com/sagemath/sagetrac-mirror/commit/e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0)|`Trac #25666: Add reference and link to GSL doc.`|



---

archive/issue_comments_493839.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [vdelecroix](#comment%3A39):\n> The link you used for `[GSL1]` is exactly the same as for `[GSL]`. Is that intended?\n\n\nNot at all. It was a genuine mistake.\n\n> For naming convention, I would rather make a single entry\n> \n> ```\n> .. [GSL]\n>    https://www.gnu.org/software/gsl/doc/html/\n> ```\n> and when cited, make something more specific\n> \n> ```\n> Documentation can be found in [GSL]_ chapter \"Look at there\".\n> ```\n\n\nOk let's do that.",
    "created_at": "2019-06-26T07:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493839",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:41'></a>
Replying to [vdelecroix](#comment%3A39):
> The link you used for `[GSL1]` is exactly the same as for `[GSL]`. Is that intended?


Not at all. It was a genuine mistake.

> For naming convention, I would rather make a single entry
> 
> ```
> .. [GSL]
>    https://www.gnu.org/software/gsl/doc/html/
> ```
> and when cited, make something more specific
> 
> ```
> Documentation can be found in [GSL]_ chapter "Look at there".
> ```


Ok let's do that.



---

archive/issue_comments_493840.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-26T07:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493840",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_493841.json:
```json
{
    "body": "<a id='comment:43'></a>\nThe following should be allocated inside the `try`/`finally`\n\n```\n    type_rng = gsl_rng_default\n    _rng = gsl_rng_alloc(type_rng)\n```\nOtherwise, the function might return without deallocation.",
    "created_at": "2019-06-26T21:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493841",
    "user": "https://github.com/videlec"
}
```

<a id='comment:43'></a>
The following should be allocated inside the `try`/`finally`

```
    type_rng = gsl_rng_default
    _rng = gsl_rng_alloc(type_rng)
```
Otherwise, the function might return without deallocation.



---

archive/issue_comments_493842.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[ec05f8a](https://github.com/sagemath/sagetrac-mirror/commit/ec05f8a4fd5fc7925c09c03887c91a1f76519a96)|`Trac #25666: Move random number generator init...`|",
    "created_at": "2019-06-27T07:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[ec05f8a](https://github.com/sagemath/sagetrac-mirror/commit/ec05f8a4fd5fc7925c09c03887c91a1f76519a96)|`Trac #25666: Move random number generator init...`|



---

archive/issue_comments_493843.json:
```json
{
    "body": "Changing commit from \"e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0\" to \"ec05f8a4fd5fc7925c09c03887c91a1f76519a96\"",
    "created_at": "2019-06-27T07:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e2dac8ef220297b4aaad52c9b3cd2f3fdf4be3f0" to "ec05f8a4fd5fc7925c09c03887c91a1f76519a96"



---

archive/issue_comments_493844.json:
```json
{
    "body": "<a id='comment:45'></a>\nDone.",
    "created_at": "2019-06-27T07:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493844",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:45'></a>
Done.



---

archive/issue_comments_493845.json:
```json
{
    "body": "<a id='comment:46'></a>\nGood to go.",
    "created_at": "2019-06-27T09:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493845",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'></a>
Good to go.



---

archive/issue_comments_493846.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-27T09:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493846",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_493847.json:
```json
{
    "body": "<a id='comment:47'></a>\nThanks for the review.",
    "created_at": "2019-06-27T09:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493847",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:47'></a>
Thanks for the review.



---

archive/issue_events_073052.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-28T04:30:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25666#event-73052"
}
```



---

archive/issue_comments_493848.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-28T04:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493848",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_493849.json:
```json
{
    "body": "Changing branch from \"public/monte\" to \"ec05f8a4fd5fc7925c09c03887c91a1f76519a96\"",
    "created_at": "2019-06-28T04:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25666#issuecomment-493849",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/monte" to "ec05f8a4fd5fc7925c09c03887c91a1f76519a96"
