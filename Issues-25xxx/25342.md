# Issue 25342: sage -pip install "line_profiler" fails with error SSL: TLSV1_ALERT_PROTOCOL_VERSION

archive/issues_025105.json:
```json
{
    "body": "Trying to run\n\n```\nsage -pip install \"line_profiler\"\n```\nas suggested in [the profiling tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) results in an error:\n\n```\nCollecting line_profiler\n  Could not fetch URL https://pypi.python.org/simple/line-profiler/: There was a problem confirming the ssl certificate: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661) - skipping\n  Could not find a version that satisfies the requirement line_profiler (from versions: )\nNo matching distribution found for line_profiler\n```\n\nThis is with Sage 8.1:\n\n```\n$ sage --version\nSageMath version 8.1, Release Date: 2017-12-07.\n```\n\nNote: fixed by our upgrade to pip 9.0.3 in #25051.\n\nCC:  @embray @slel\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/25342\n\n",
    "closed_at": "2018-11-06T10:15:16Z",
    "created_at": "2018-05-11T10:46:37Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "sage -pip install \"line_profiler\" fails with error SSL: TLSV1_ALERT_PROTOCOL_VERSION",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25342",
    "user": "https://github.com/mr-infty"
}
```
Trying to run

```
sage -pip install "line_profiler"
```
as suggested in [the profiling tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) results in an error:

```
Collecting line_profiler
  Could not fetch URL https://pypi.python.org/simple/line-profiler/: There was a problem confirming the ssl certificate: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661) - skipping
  Could not find a version that satisfies the requirement line_profiler (from versions: )
No matching distribution found for line_profiler
```

This is with Sage 8.1:

```
$ sage --version
SageMath version 8.1, Release Date: 2017-12-07.
```

Note: fixed by our upgrade to pip 9.0.3 in #25051.

CC:  @embray @slel

Reviewer: Frédéric Chapoton

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/25342





---

archive/issue_events_072243.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25342#event-72243"
}
```



---

archive/issue_comments_485936.json:
```json
{
    "body": "<a id='comment:1'></a>\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485936",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
update milestone 8.3 -> 8.4



---

archive/issue_comments_485937.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-31T15:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485937",
    "user": "https://github.com/slel"
}
```

Changing status from new to needs_review.



---

archive/issue_events_072244.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-31T15:45:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25342#event-72244"
}
```



---

archive/issue_events_072245.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-31T15:45:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25342#event-72245"
}
```



---

archive/issue_comments_485938.json:
```json
{
    "body": "<a id='comment:2'></a>\nFixed by our upgrade to pip 9.0.3 in #25051 (we have pip 18.0 since #26008).\n\nThe error reported in this ticket had to do with a configuration change at PyPI\nin April 2018 which prevented to pip install packages from PyPI using macOS\nand pip 9.0.1.\n\nSee the discussion at #25051#comment:19.\n\nSage 8.1 had pip 9.0.1 but Sage 8.2 had pip 9.0.3.\n\nSetting to duplicate/invalid/wontfix.",
    "created_at": "2018-10-31T15:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485938",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
Fixed by our upgrade to pip 9.0.3 in #25051 (we have pip 18.0 since #26008).

The error reported in this ticket had to do with a configuration change at PyPI
in April 2018 which prevented to pip install packages from PyPI using macOS
and pip 9.0.1.

See the discussion at #25051#comment:19.

Sage 8.1 had pip 9.0.1 but Sage 8.2 had pip 9.0.3.

Setting to duplicate/invalid/wontfix.



---

archive/issue_comments_485939.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,22 @@\n Trying to run\n \n-    sage -pip install \"line_profiler\"\n+```\n+sage -pip install \"line_profiler\"\n+```\n+as suggested in [the profiling tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) results in an error:\n \n-as suggested in this [https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) example results in an error:\n-\n+```\n Collecting line_profiler\n   Could not fetch URL https://pypi.python.org/simple/line-profiler/: There was a problem confirming the ssl certificate: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661) - skipping\n   Could not find a version that satisfies the requirement line_profiler (from versions: )\n No matching distribution found for line_profiler\n+```\n \n-sage --version gives\n+This is with Sage 8.1:\n \n-SageMath version 8.1, Release Date: 2017-12-07\n+```\n+$ sage --version\n+SageMath version 8.1, Release Date: 2017-12-07.\n+```\n+\n+Note: fixed by our upgrade to pip 9.0.3 in #25051.\n``````\n",
    "created_at": "2018-10-31T15:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485939",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,22 @@
 Trying to run
 
-    sage -pip install "line_profiler"
+```
+sage -pip install "line_profiler"
+```
+as suggested in [the profiling tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) results in an error:
 
-as suggested in this [https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun](https://doc.sagemath.org/html/en/thematic_tutorials/profiling.html#python-level-line-by-line-profiling-lprun) example results in an error:
-
+```
 Collecting line_profiler
   Could not fetch URL https://pypi.python.org/simple/line-profiler/: There was a problem confirming the ssl certificate: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661) - skipping
   Could not find a version that satisfies the requirement line_profiler (from versions: )
 No matching distribution found for line_profiler
+```
 
-sage --version gives
+This is with Sage 8.1:
 
-SageMath version 8.1, Release Date: 2017-12-07
+```
+$ sage --version
+SageMath version 8.1, Release Date: 2017-12-07.
+```
+
+Note: fixed by our upgrade to pip 9.0.3 in #25051.
``````




---

archive/issue_comments_485940.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-05T13:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485940",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_485941.json:
```json
{
    "body": "Reviewer: Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2018-11-05T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485941",
    "user": "https://github.com/slel"
}
```

Reviewer: Frédéric Chapoton



---

archive/issue_events_072246.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-06T10:15:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25342#event-72246"
}
```



---

archive/issue_comments_485942.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2018-11-06T10:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25342#issuecomment-485942",
    "user": "https://github.com/embray"
}
```

Resolution: worksforme
