# Issue 25872: Modular decomposition bug

archive/issues_025635.json:
```json
{
    "body": "\n```\nsage: G1 = Graph('FwA]w')\nsage: G2 = Graph('F@Nfg')\nsage: G1.modular_decomposition(algorithm='tedder')\n(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\nsage: G2.modular_decomposition(algorithm='tedder')\n(PRIME, [6, 5, 0, 2, 3, 1, 4])\nsage: G1.is_isomorphic(G2)\nTrue\n```\n\n#24898 was not enough. \n\nThis ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\nthe `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.\n \n\n\n\n\n\nCC:  @lokeshj1703 @dimpase @dcoudert @deinst\n\nReviewer: David Coudert, Matthias Koeppe\n\nAuthor: Dima Pasechnik\n\nBranch: f610e5a8648308b5f3d87b4ea803a63ee72f08cf\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25872\n\n",
    "closed_at": "2022-05-29T11:29:22Z",
    "created_at": "2018-07-18T07:45:25Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Modular decomposition bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25872",
    "user": "https://github.com/jm58660"
}
```

```
sage: G1 = Graph('FwA]w')
sage: G2 = Graph('F@Nfg')
sage: G1.modular_decomposition(algorithm='tedder')
(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
sage: G2.modular_decomposition(algorithm='tedder')
(PRIME, [6, 5, 0, 2, 3, 1, 4])
sage: G1.is_isomorphic(G2)
True
```

#24898 was not enough. 

This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.
 





CC:  @lokeshj1703 @dimpase @dcoudert @deinst

Reviewer: David Coudert, Matthias Koeppe

Author: Dima Pasechnik

Branch: f610e5a8648308b5f3d87b4ea803a63ee72f08cf

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25872





---

archive/issue_comments_490113.json:
```json
{
    "body": "<a id='comment:1'></a>\nThat's certainly not an easy issue to fix. I have not clue what's going on :(",
    "created_at": "2018-07-18T09:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490113",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
That's certainly not an easy issue to fix. I have not clue what's going on :(



---

archive/issue_comments_490114.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't know if this helps, but I was cross-checking #25763 and it seems that the bug is not visible with\n\n`P._hasse_diagram.transitive_closure().to_undirected().is_prime()`\n\nwhere `P` is any poset. In the internal digraph we have consecutive integers as vertices and `0, 1, ..., n-1` is a topological sort of the digraph.",
    "created_at": "2018-07-18T09:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490114",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
I don't know if this helps, but I was cross-checking #25763 and it seems that the bug is not visible with

`P._hasse_diagram.transitive_closure().to_undirected().is_prime()`

where `P` is any poset. In the internal digraph we have consecutive integers as vertices and `0, 1, ..., n-1` is a topological sort of the digraph.



---

archive/issue_comments_490115.json:
```json
{
    "body": "<a id='comment:3'></a>\nI tried other labelings of the graph and its working correctly when the first vertex of `G.vertex_iterator()` is not involved in the parallel node. \n\n```\nsage: G3 = Graph('F|NE?')\nsage: G3.modular_decomposition()\n(PRIME, [2, (PARALLEL, [5, 6]), 1, 3, 0, 4])\n```\n\nWith 'G2', the construction starts from vertex 0 that should be in a parallel node `(PARALLEL, [0, 1])`. If I add a twin to vertex 4, the new parallel node is detected.\n\n```\nsage: G2.add_edges([(2,7), (3,7)])\nsage: G2.modular_decomposition()\n(PRIME, [6, 5, 0, 2, 3, 1, (PARALLEL, [4, 7])])\n```",
    "created_at": "2018-07-18T11:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490115",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
I tried other labelings of the graph and its working correctly when the first vertex of `G.vertex_iterator()` is not involved in the parallel node. 

```
sage: G3 = Graph('F|NE?')
sage: G3.modular_decomposition()
(PRIME, [2, (PARALLEL, [5, 6]), 1, 3, 0, 4])
```

With 'G2', the construction starts from vertex 0 that should be in a parallel node `(PARALLEL, [0, 1])`. If I add a twin to vertex 4, the new parallel node is detected.

```
sage: G2.add_edges([(2,7), (3,7)])
sage: G2.modular_decomposition()
(PRIME, [6, 5, 0, 2, 3, 1, (PARALLEL, [4, 7])])
```



---

archive/issue_comments_490116.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jlokesh/modular_decomposition_bug\"",
    "created_at": "2018-10-07T16:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490116",
    "user": "https://github.com/lokeshj1703"
}
```

Changing branch from "" to "u/jlokesh/modular_decomposition_bug"



---

archive/issue_comments_490117.json:
```json
{
    "body": "Changing commit from \"\" to \"b71307dc19b118c8e53aa2ac3ed5880db01b9a9a\"",
    "created_at": "2018-10-07T16:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490117",
    "user": "https://github.com/lokeshj1703"
}
```

Changing commit from "" to "b71307dc19b118c8e53aa2ac3ed5880db01b9a9a"



---

archive/issue_comments_490118.json:
```json
{
    "body": "<a id='comment:5'></a>\nI have pushed the changes which were required to fix the bug. The change required was to remove the is_separated field from Node class in modular_decomposition.py. It removes the optimization which was causing the bug.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|\n|[b71307d](https://github.com/sagemath/sagetrac-mirror/commit/b71307dc19b118c8e53aa2ac3ed5880db01b9a9a)|`trac #25872: Remove is_separated instance variable from Node class in modular_decomposition.py`|",
    "created_at": "2018-10-07T16:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490118",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:5'></a>
I have pushed the changes which were required to fix the bug. The change required was to remove the is_separated field from Node class in modular_decomposition.py. It removes the optimization which was causing the bug.

---
New commits:
|                                                                                                                                          |                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
|[b71307d](https://github.com/sagemath/sagetrac-mirror/commit/b71307dc19b118c8e53aa2ac3ed5880db01b9a9a)|`trac #25872: Remove is_separated instance variable from Node class in modular_decomposition.py`|



---

archive/issue_comments_490119.json:
```json
{
    "body": "<a id='comment:6'></a>\nThank you Lokesh.\n\nYou must add the following tests to the TESTS block of method `modular_decomposition` to show that the issue is fixed.\n\n```\nTicket :trac:`25872` is fixed::\n\n    sage: G1 = Graph('FwA]w')\n    sage: G2 = Graph('F@Nfg')\n    sage: G1.is_isomorphic(G2)\n    True\n    sage: G1.modular_decomposition()\n    (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n    sage: G2.modular_decomposition()\n    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, 4])\n    sage: G2.add_edges([(2,7), (3,7)])\n    sage: G2.modular_decomposition()\n    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, (PARALLEL, [4, 7])])\n```",
    "created_at": "2018-10-07T16:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490119",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
Thank you Lokesh.

You must add the following tests to the TESTS block of method `modular_decomposition` to show that the issue is fixed.

```
Ticket :trac:`25872` is fixed::

    sage: G1 = Graph('FwA]w')
    sage: G2 = Graph('F@Nfg')
    sage: G1.is_isomorphic(G2)
    True
    sage: G1.modular_decomposition()
    (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
    sage: G2.modular_decomposition()
    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, 4])
    sage: G2.add_edges([(2,7), (3,7)])
    sage: G2.modular_decomposition()
    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, (PARALLEL, [4, 7])])
```



---

archive/issue_comments_490120.json:
```json
{
    "body": "<a id='comment:7'></a>\nStill doesn't work.\n\n```\nsage: a = Graph('PdDoIHG?o@OeC?_BsWCSsI?c')\nsage: b = a.canonical_label()\nsage: a.is_prime(), b.is_prime()\n(True, False)\n```\n\nFound by\n\n```\nset_random_seed(0)\nfor i in xrange(10^3):\n    G1 = graphs.RandomGNP(17, 0.3)\n    G2 = G1.canonical_label()\n    if G1.is_prime() != G2.is_prime():\n        print(i)\n        G1.show()\n        break\nelse:\n    print(\"OK\")\n```",
    "created_at": "2018-10-08T04:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490120",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>
Still doesn't work.

```
sage: a = Graph('PdDoIHG?o@OeC?_BsWCSsI?c')
sage: b = a.canonical_label()
sage: a.is_prime(), b.is_prime()
(True, False)
```

Found by

```
set_random_seed(0)
for i in xrange(10^3):
    G1 = graphs.RandomGNP(17, 0.3)
    G2 = G1.canonical_label()
    if G1.is_prime() != G2.is_prime():
        print(i)
        G1.show()
        break
else:
    print("OK")
```



---

archive/issue_comments_490121.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[672a110](https://github.com/sagemath/sagetrac-mirror/commit/672a1103fbc56f550a664485487a2acbc24b438a)|`trac #25872: Added tests in graph.py#modular_decomposition`|",
    "created_at": "2018-10-08T04:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[672a110](https://github.com/sagemath/sagetrac-mirror/commit/672a1103fbc56f550a664485487a2acbc24b438a)|`trac #25872: Added tests in graph.py#modular_decomposition`|



---

archive/issue_comments_490122.json:
```json
{
    "body": "Changing commit from \"b71307dc19b118c8e53aa2ac3ed5880db01b9a9a\" to \"672a1103fbc56f550a664485487a2acbc24b438a\"",
    "created_at": "2018-10-08T04:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b71307dc19b118c8e53aa2ac3ed5880db01b9a9a" to "672a1103fbc56f550a664485487a2acbc24b438a"



---

archive/issue_comments_490123.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jmantysalo](#comment%3A7):\n> Still doesn't work.\n\n \nThanks for posting the example. Let me take a look.",
    "created_at": "2018-10-08T05:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490123",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:9'></a>
Replying to [jmantysalo](#comment%3A7):
> Still doesn't work.

 
Thanks for posting the example. Let me take a look.



---

archive/issue_comments_490124.json:
```json
{
    "body": "<a id='comment:10'></a>\nA few questions.\n\nWould it be of use to add an `algorithm` parameter to `modular_decomposition` and `is_prime`?  I have code for the O(n<sup>3</sup>) algorithm of [Habib and Maurer 1979] that is probably slower than the current code, but seems to work.  Should I attempt to integrate it, and if so should I do it in this ticket or start a new one?\n\nShould we move `modular_decomposition.py` into the `src/sage/graphs/graph_decompositions` directory?\n\nIn the testing section of `modular_decomposition.py` the function `children_node_type` is used to flag an error if all of the children of a SERIES or PARALLEL node are of the same type as their parent.  I think that this is too loose and an error should be noted if any of the children have the same type as their parents, otherwise the condition that nodes in the tree represent maximal modules is violated.",
    "created_at": "2018-10-16T13:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490124",
    "user": "https://github.com/deinst"
}
```

<a id='comment:10'></a>
A few questions.

Would it be of use to add an `algorithm` parameter to `modular_decomposition` and `is_prime`?  I have code for the O(n<sup>3</sup>) algorithm of [Habib and Maurer 1979] that is probably slower than the current code, but seems to work.  Should I attempt to integrate it, and if so should I do it in this ticket or start a new one?

Should we move `modular_decomposition.py` into the `src/sage/graphs/graph_decompositions` directory?

In the testing section of `modular_decomposition.py` the function `children_node_type` is used to flag an error if all of the children of a SERIES or PARALLEL node are of the same type as their parent.  I think that this is too loose and an error should be noted if any of the children have the same type as their parents, otherwise the condition that nodes in the tree represent maximal modules is violated.



---

archive/issue_comments_490125.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis is a very good idea to add another algorithm and the parameter `algorithm` if it helps checking the validity of both algorithms. A slow algorithm is OK in such case.\nHowever, it should be done in a separate ticket.\n\nIt is possible to move the file to `src/sage/graphs/graph_decompositions` while working on the new ticket.",
    "created_at": "2018-10-16T15:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490125",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>
This is a very good idea to add another algorithm and the parameter `algorithm` if it helps checking the validity of both algorithms. A slow algorithm is OK in such case.
However, it should be done in a separate ticket.

It is possible to move the file to `src/sage/graphs/graph_decompositions` while working on the new ticket.



---

archive/issue_comments_490126.json:
```json
{
    "body": "<a id='comment:12'></a>\nI added trac #26496.  The code there should be functional if you add `algorithm='habib'` to each call to `modular_decomposition` or `is_prime`.",
    "created_at": "2018-10-16T21:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490126",
    "user": "https://github.com/deinst"
}
```

<a id='comment:12'></a>
I added trac #26496.  The code there should be functional if you add `algorithm='habib'` to each call to `modular_decomposition` or `is_prime`.



---

archive/issue_comments_490127.json:
```json
{
    "body": "<a id='comment:13'></a>\nsee also #33902 \n\nHow about removing `'tedder'` completely?",
    "created_at": "2022-05-25T16:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490127",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
see also #33902 

How about removing `'tedder'` completely?



---

archive/issue_comments_490128.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,13 +2,13 @@\n ```\n sage: G1 = Graph('FwA]w')\n sage: G2 = Graph('F@Nfg')\n-sage: G1.modular_decomposition()\n+sage: G1.modular_decomposition(algorithm='tedder')\n (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n-sage: G2.modular_decomposition()\n+sage: G2.modular_decomposition(algorithm='tedder')\n (PRIME, [6, 5, 0, 2, 3, 1, 4])\n sage: G1.is_isomorphic(G2)\n True\n ```\n \n-I suppose #24898 was not enought.\n+I suppose #24898 was not enough. \n \n``````\n",
    "created_at": "2022-05-25T16:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490128",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,13 +2,13 @@
 ```
 sage: G1 = Graph('FwA]w')
 sage: G2 = Graph('F@Nfg')
-sage: G1.modular_decomposition()
+sage: G1.modular_decomposition(algorithm='tedder')
 (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
-sage: G2.modular_decomposition()
+sage: G2.modular_decomposition(algorithm='tedder')
 (PRIME, [6, 5, 0, 2, 3, 1, 4])
 sage: G1.is_isomorphic(G2)
 True
 ```
 
-I suppose #24898 was not enought.
+I suppose #24898 was not enough. 
 
``````




---

archive/issue_events_081402.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-05-25T16:39:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25872#event-81402"
}
```



---

archive/issue_comments_490129.json:
```json
{
    "body": "<a id='comment:14'></a>\nI can only agree with that. The code is buggy and I don't know how to fix that.",
    "created_at": "2022-05-25T16:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490129",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
I can only agree with that. The code is buggy and I don't know how to fix that.



---

archive/issue_comments_490130.json:
```json
{
    "body": "<a id='comment:15'></a>\nOK, I'll try doing this.",
    "created_at": "2022-05-25T18:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490130",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
OK, I'll try doing this.



---

archive/issue_comments_490131.json:
```json
{
    "body": "<a id='comment:16'></a>\nWe can at least start with a deprecation warning.",
    "created_at": "2022-05-25T20:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490131",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
We can at least start with a deprecation warning.



---

archive/issue_comments_490132.json:
```json
{
    "body": "Changing branch from \"u/jlokesh/modular_decomposition_bug\" to \"u/dimpase/graphs/remove_tedder_modular_decomposition\"",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490132",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "u/jlokesh/modular_decomposition_bug" to "u/dimpase/graphs/remove_tedder_modular_decomposition"



---

archive/issue_comments_490133.json:
```json
{
    "body": "Changing commit from \"672a1103fbc56f550a664485487a2acbc24b438a\" to \"c7e8063960107be1133b9a718203b8c5fe054159\"",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490133",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "672a1103fbc56f550a664485487a2acbc24b438a" to "c7e8063960107be1133b9a718203b8c5fe054159"



---

archive/issue_comments_490134.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490134",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_490135.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490135",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_490136.json:
```json
{
    "body": "<a id='comment:17'></a>\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[c7e8063](https://github.com/sagemath/sagetrac-mirror/commit/c7e8063960107be1133b9a718203b8c5fe054159)|`remove buggy 'tedder' modular decomposition`|",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490136",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[c7e8063](https://github.com/sagemath/sagetrac-mirror/commit/c7e8063960107be1133b9a718203b8c5fe054159)|`remove buggy 'tedder' modular decomposition`|



---

archive/issue_comments_490137.json:
```json
{
    "body": "<a id='comment:18'></a>\nAs it's buggy, no need for deprecation, IMHO",
    "created_at": "2022-05-25T23:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490137",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
As it's buggy, no need for deprecation, IMHO



---

archive/issue_comments_490138.json:
```json
{
    "body": "<a id='comment:19'></a>\nThis looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm",
    "created_at": "2022-05-26T08:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490138",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm



---

archive/issue_comments_490139.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[22f15f5](https://github.com/sagemath/sagetrac-mirror/commit/22f15f5d1a2935afebdabb130797e6370be464fd)|`mention trac ticket number`|",
    "created_at": "2022-05-26T09:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[22f15f5](https://github.com/sagemath/sagetrac-mirror/commit/22f15f5d1a2935afebdabb130797e6370be464fd)|`mention trac ticket number`|



---

archive/issue_comments_490140.json:
```json
{
    "body": "Changing commit from \"c7e8063960107be1133b9a718203b8c5fe054159\" to \"22f15f5d1a2935afebdabb130797e6370be464fd\"",
    "created_at": "2022-05-26T09:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490140",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c7e8063960107be1133b9a718203b8c5fe054159" to "22f15f5d1a2935afebdabb130797e6370be464fd"



---

archive/issue_comments_490141.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [dcoudert](#comment%3A19):\n> This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm\n\n\ndone",
    "created_at": "2022-05-26T09:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490141",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>
Replying to [dcoudert](#comment%3A19):
> This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm


done



---

archive/issue_comments_490142.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2022-05-26T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490142",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_490143.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490143",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_490144.json:
```json
{
    "body": "<a id='comment:22'></a>\nThank you Dima.\n\nLGTM.",
    "created_at": "2022-05-26T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490144",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>
Thank you Dima.

LGTM.



---

archive/issue_comments_490145.json:
```json
{
    "body": "<a id='comment:23'></a>\nWe should certainly update the ticket description to reflect the removal.",
    "created_at": "2022-05-26T09:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490145",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>
We should certainly update the ticket description to reflect the removal.



---

archive/issue_comments_490146.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,12 @@\n True\n ```\n \n-I suppose #24898 was not enough. \n+#24898 was not enough. \n \n+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\n+the `algorithm=` option is removed, as we only have one implementation now.\n+ \n+\n+\n+\n+\n``````\n",
    "created_at": "2022-05-26T10:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490146",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,12 @@
 True
 ```
 
-I suppose #24898 was not enough. 
+#24898 was not enough. 
 
+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
+the `algorithm=` option is removed, as we only have one implementation now.
+ 
+
+
+
+
``````




---

archive/issue_comments_490147.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-26T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490147",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_490148.json:
```json
{
    "body": "<a id='comment:25'></a>\n> the algorithm= option is removed, as we only have one implementation now.\n\n\nThis breaks existing code",
    "created_at": "2022-05-26T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490148",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
> the algorithm= option is removed, as we only have one implementation now.


This breaks existing code



---

archive/issue_comments_490149.json:
```json
{
    "body": "<a id='comment:26'></a>\nSo what should we do ? deprecate this option before removing tedder in a year ? remove tedder now and let this parameter even if unused with a deprecation ? something else ?",
    "created_at": "2022-05-26T16:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490149",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>
So what should we do ? deprecate this option before removing tedder in a year ? remove tedder now and let this parameter even if unused with a deprecation ? something else ?



---

archive/issue_comments_490150.json:
```json
{
    "body": "<a id='comment:27'></a>\nJust make it so that passing `algorithm='habib'` does not become an error",
    "created_at": "2022-05-26T16:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490150",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Just make it so that passing `algorithm='habib'` does not become an error



---

archive/issue_comments_490151.json:
```json
{
    "body": "<a id='comment:28'></a>\n`algorithm='tedder'` should be an error now. \n\nThe problem is, however, not limited to this, as there is also a `modular_decomposition(foo)` function, which was equivalent to `foo.modular_decomposition(algorithm='tedder')`. In the present branch `modular_decomposition(foo)` became\nequivalent to the (old) `foo.modular_decomposition(algorithm='habib')`, because, what else?\n\nI think it's too much fuss to fiddle around with deprecations here.",
    "created_at": "2022-05-26T17:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490151",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
`algorithm='tedder'` should be an error now. 

The problem is, however, not limited to this, as there is also a `modular_decomposition(foo)` function, which was equivalent to `foo.modular_decomposition(algorithm='tedder')`. In the present branch `modular_decomposition(foo)` became
equivalent to the (old) `foo.modular_decomposition(algorithm='habib')`, because, what else?

I think it's too much fuss to fiddle around with deprecations here.



---

archive/issue_comments_490152.json:
```json
{
    "body": "<a id='comment:29'></a>\nJust don't make these breaking API changes:\n\n```\n--- a/src/sage/graphs/graph.py\n+++ b/src/sage/graphs/graph.py\n@@ -7574,7 +7574,7 @@ class Graph(GenericGraph):\n             return list(core.values())\n \n     @doc_index(\"Leftovers\")\n-    def modular_decomposition(self, algorithm='habib', style='tuple'):\n+    def modular_decomposition(self, style='tuple'):\n         r\"\"\"\n         Return the modular decomposition of the current graph.\n \n@@ -8035,23 +8014,13 @@ class Graph(GenericGraph):\n         return self.planar_dual().is_circumscribable(solver=solver, verbose=verbose)\n \n     @doc_index(\"Graph properties\")\n-    def is_prime(self, algorithm='habib'):\n+    def is_prime(self):\n         r\"\"\"\n         Test whether the current graph is prime.\n \n```",
    "created_at": "2022-05-26T17:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490152",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Just don't make these breaking API changes:

```
--- a/src/sage/graphs/graph.py
+++ b/src/sage/graphs/graph.py
@@ -7574,7 +7574,7 @@ class Graph(GenericGraph):
             return list(core.values())
 
     @doc_index("Leftovers")
-    def modular_decomposition(self, algorithm='habib', style='tuple'):
+    def modular_decomposition(self, style='tuple'):
         r"""
         Return the modular decomposition of the current graph.
 
@@ -8035,23 +8014,13 @@ class Graph(GenericGraph):
         return self.planar_dual().is_circumscribable(solver=solver, verbose=verbose)
 
     @doc_index("Graph properties")
-    def is_prime(self, algorithm='habib'):
+    def is_prime(self):
         r"""
         Test whether the current graph is prime.
 
```



---

archive/issue_comments_490153.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[f610e5a](https://github.com/sagemath/sagetrac-mirror/commit/f610e5a8648308b5f3d87b4ea803a63ee72f08cf)|`retained 'algorithm=' with deprecation`|",
    "created_at": "2022-05-26T21:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[f610e5a](https://github.com/sagemath/sagetrac-mirror/commit/f610e5a8648308b5f3d87b4ea803a63ee72f08cf)|`retained 'algorithm=' with deprecation`|



---

archive/issue_comments_490154.json:
```json
{
    "body": "Changing commit from \"22f15f5d1a2935afebdabb130797e6370be464fd\" to \"f610e5a8648308b5f3d87b4ea803a63ee72f08cf\"",
    "created_at": "2022-05-26T21:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "22f15f5d1a2935afebdabb130797e6370be464fd" to "f610e5a8648308b5f3d87b4ea803a63ee72f08cf"



---

archive/issue_comments_490155.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-26T21:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490155",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_490156.json:
```json
{
    "body": "Changing reviewer from \"David Coudert\" to \"David Coudert, Matthias Koeppe\"",
    "created_at": "2022-05-26T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490156",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "David Coudert" to "David Coudert, Matthias Koeppe"



---

archive/issue_comments_490157.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490157",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_490158.json:
```json
{
    "body": "<a id='comment:32'></a>\nLGTM, thanks.",
    "created_at": "2022-05-26T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490158",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
LGTM, thanks.



---

archive/issue_events_081403.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25872#event-81403"
}
```



---

archive/issue_comments_490159.json:
```json
{
    "body": "Changing branch from \"u/dimpase/graphs/remove_tedder_modular_decomposition\" to \"f610e5a8648308b5f3d87b4ea803a63ee72f08cf\"",
    "created_at": "2022-05-29T11:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490159",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/graphs/remove_tedder_modular_decomposition" to "f610e5a8648308b5f3d87b4ea803a63ee72f08cf"



---

archive/issue_comments_490160.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-29T11:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490160",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_490161.json:
```json
{
    "body": "Changing commit from \"f610e5a8648308b5f3d87b4ea803a63ee72f08cf\" to \"\"",
    "created_at": "2022-06-09T16:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490161",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "f610e5a8648308b5f3d87b4ea803a63ee72f08cf" to ""



---

archive/issue_comments_490162.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n #24898 was not enough. \n \n This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\n-the `algorithm=` option is removed, as we only have one implementation now.\n+the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.\n  \n \n \n``````\n",
    "created_at": "2022-06-09T16:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-490162",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 #24898 was not enough. 
 
 This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
-the `algorithm=` option is removed, as we only have one implementation now.
+the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.
  
 
 
``````

