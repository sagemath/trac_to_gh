# Issue 25872: Modular decomposition bug

archive/issues_025635.json:
```json
{
    "body": "```\nsage: G1 = Graph('FwA]w')\nsage: G2 = Graph('F@Nfg')\nsage: G1.modular_decomposition(algorithm='tedder')\n(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\nsage: G2.modular_decomposition(algorithm='tedder')\n(PRIME, [6, 5, 0, 2, 3, 1, 4])\nsage: G1.is_isomorphic(G2)\nTrue\n```\n\n#24898 was not enough. \n\nThis ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\nthe `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.\n \n\n\n\n\n\nCC:  @lokeshj1703 @dimpase @dcoudert @deinst\n\nReviewer: David Coudert, Matthias Koeppe\n\nAuthor: Dima Pasechnik\n\nBranch: f610e5a8648308b5f3d87b4ea803a63ee72f08cf\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25872\n\n",
    "closed_at": "2022-05-29T11:29:22Z",
    "created_at": "2018-07-18T07:45:25Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Modular decomposition bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25872",
    "user": "https://github.com/jm58660"
}
```
```
sage: G1 = Graph('FwA]w')
sage: G2 = Graph('F@Nfg')
sage: G1.modular_decomposition(algorithm='tedder')
(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
sage: G2.modular_decomposition(algorithm='tedder')
(PRIME, [6, 5, 0, 2, 3, 1, 4])
sage: G1.is_isomorphic(G2)
True
```

#24898 was not enough. 

This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.
 





CC:  @lokeshj1703 @dimpase @dcoudert @deinst

Reviewer: David Coudert, Matthias Koeppe

Author: Dima Pasechnik

Branch: f610e5a8648308b5f3d87b4ea803a63ee72f08cf

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25872





---

archive/issue_comments_384846.json:
```json
{
    "body": "<a id='comment:1'></a>That's certainly not an easy issue to fix. I have not clue what's going on :(",
    "created_at": "2018-07-18T09:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384846",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>That's certainly not an easy issue to fix. I have not clue what's going on :(



---

archive/issue_comments_384847.json:
```json
{
    "body": "<a id='comment:2'></a>I don't know if this helps, but I was cross-checking #25763 and it seems that the bug is not visible with\n\n`P._hasse_diagram.transitive_closure().to_undirected().is_prime()`\n\nwhere `P` is any poset. In the internal digraph we have consecutive integers as vertices and `0, 1, ..., n-1` is a topological sort of the digraph.",
    "created_at": "2018-07-18T09:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384847",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>I don't know if this helps, but I was cross-checking #25763 and it seems that the bug is not visible with

`P._hasse_diagram.transitive_closure().to_undirected().is_prime()`

where `P` is any poset. In the internal digraph we have consecutive integers as vertices and `0, 1, ..., n-1` is a topological sort of the digraph.



---

archive/issue_comments_384848.json:
```json
{
    "body": "<a id='comment:3'></a>I tried other labelings of the graph and its working correctly when the first vertex of `G.vertex_iterator()` is not involved in the parallel node. \n\n```\nsage: G3 = Graph('F|NE?')\nsage: G3.modular_decomposition()\n(PRIME, [2, (PARALLEL, [5, 6]), 1, 3, 0, 4])\n```\n\nWith 'G2', the construction starts from vertex 0 that should be in a parallel node `(PARALLEL, [0, 1])`. If I add a twin to vertex 4, the new parallel node is detected.\n\n```\nsage: G2.add_edges([(2,7), (3,7)])\nsage: G2.modular_decomposition()\n(PRIME, [6, 5, 0, 2, 3, 1, (PARALLEL, [4, 7])])\n```",
    "created_at": "2018-07-18T11:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384848",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>I tried other labelings of the graph and its working correctly when the first vertex of `G.vertex_iterator()` is not involved in the parallel node. 

```
sage: G3 = Graph('F|NE?')
sage: G3.modular_decomposition()
(PRIME, [2, (PARALLEL, [5, 6]), 1, 3, 0, 4])
```

With 'G2', the construction starts from vertex 0 that should be in a parallel node `(PARALLEL, [0, 1])`. If I add a twin to vertex 4, the new parallel node is detected.

```
sage: G2.add_edges([(2,7), (3,7)])
sage: G2.modular_decomposition()
(PRIME, [6, 5, 0, 2, 3, 1, (PARALLEL, [4, 7])])
```



---

archive/issue_comments_384849.json:
```json
{
    "body": "<a id='comment:5'></a>I have pushed the changes which were required to fix the bug. The change required was to remove the is_separated field from Node class in modular_decomposition.py. It removes the optimization which was causing the bug.\n\n---\nNew commits:",
    "created_at": "2018-10-07T16:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384849",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:5'></a>I have pushed the changes which were required to fix the bug. The change required was to remove the is_separated field from Node class in modular_decomposition.py. It removes the optimization which was causing the bug.

---
New commits:



---

archive/issue_comments_384850.json:
```json
{
    "body": "<a id='comment:6'></a>Thank you Lokesh.\n\nYou must add the following tests to the TESTS block of method `modular_decomposition` to show that the issue is fixed.\n\n```\nTicket :trac:`25872` is fixed::\n\n    sage: G1 = Graph('FwA]w')\n    sage: G2 = Graph('F@Nfg')\n    sage: G1.is_isomorphic(G2)\n    True\n    sage: G1.modular_decomposition()\n    (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n    sage: G2.modular_decomposition()\n    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, 4])\n    sage: G2.add_edges([(2,7), (3,7)])\n    sage: G2.modular_decomposition()\n    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, (PARALLEL, [4, 7])])\n```",
    "created_at": "2018-10-07T16:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384850",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>Thank you Lokesh.

You must add the following tests to the TESTS block of method `modular_decomposition` to show that the issue is fixed.

```
Ticket :trac:`25872` is fixed::

    sage: G1 = Graph('FwA]w')
    sage: G2 = Graph('F@Nfg')
    sage: G1.is_isomorphic(G2)
    True
    sage: G1.modular_decomposition()
    (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
    sage: G2.modular_decomposition()
    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, 4])
    sage: G2.add_edges([(2,7), (3,7)])
    sage: G2.modular_decomposition()
    (PRIME, [6, 5, (PARALLEL, [0, 1]), 2, 3, (PARALLEL, [4, 7])])
```



---

archive/issue_comments_384851.json:
```json
{
    "body": "<a id='comment:7'></a>Still doesn't work.\n\n```\nsage: a = Graph('PdDoIHG?o@OeC?_BsWCSsI?c')\nsage: b = a.canonical_label()\nsage: a.is_prime(), b.is_prime()\n(True, False)\n```\n\nFound by\n\n```\nset_random_seed(0)\nfor i in xrange(10^3):\n    G1 = graphs.RandomGNP(17, 0.3)\n    G2 = G1.canonical_label()\n    if G1.is_prime() != G2.is_prime():\n        print(i)\n        G1.show()\n        break\nelse:\n    print(\"OK\")\n```",
    "created_at": "2018-10-08T04:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384851",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>Still doesn't work.

```
sage: a = Graph('PdDoIHG?o@OeC?_BsWCSsI?c')
sage: b = a.canonical_label()
sage: a.is_prime(), b.is_prime()
(True, False)
```

Found by

```
set_random_seed(0)
for i in xrange(10^3):
    G1 = graphs.RandomGNP(17, 0.3)
    G2 = G1.canonical_label()
    if G1.is_prime() != G2.is_prime():
        print(i)
        G1.show()
        break
else:
    print("OK")
```



---

archive/issue_comments_384852.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-08T04:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_384853.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 jmantysalo]:\n> Still doesn't work.\n\n \nThanks for posting the example. Let me take a look.",
    "created_at": "2018-10-08T05:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384853",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:9'></a>Replying to [comment:7 jmantysalo]:
> Still doesn't work.

 
Thanks for posting the example. Let me take a look.



---

archive/issue_comments_384854.json:
```json
{
    "body": "<a id='comment:10'></a>A few questions.\n\nWould it be of use to add an `algorithm` parameter to `modular_decomposition` and `is_prime`?  I have code for the O(n<sup>3</sup>) algorithm of [Habib and Maurer 1979] that is probably slower than the current code, but seems to work.  Should I attempt to integrate it, and if so should I do it in this ticket or start a new one?\n\nShould we move `modular_decomposition.py` into the `src/sage/graphs/graph_decompositions` directory?\n\nIn the testing section of `modular_decomposition.py` the function `children_node_type` is used to flag an error if all of the children of a SERIES or PARALLEL node are of the same type as their parent.  I think that this is too loose and an error should be noted if any of the children have the same type as their parents, otherwise the condition that nodes in the tree represent maximal modules is violated.",
    "created_at": "2018-10-16T13:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384854",
    "user": "https://github.com/deinst"
}
```

<a id='comment:10'></a>A few questions.

Would it be of use to add an `algorithm` parameter to `modular_decomposition` and `is_prime`?  I have code for the O(n<sup>3</sup>) algorithm of [Habib and Maurer 1979] that is probably slower than the current code, but seems to work.  Should I attempt to integrate it, and if so should I do it in this ticket or start a new one?

Should we move `modular_decomposition.py` into the `src/sage/graphs/graph_decompositions` directory?

In the testing section of `modular_decomposition.py` the function `children_node_type` is used to flag an error if all of the children of a SERIES or PARALLEL node are of the same type as their parent.  I think that this is too loose and an error should be noted if any of the children have the same type as their parents, otherwise the condition that nodes in the tree represent maximal modules is violated.



---

archive/issue_comments_384855.json:
```json
{
    "body": "<a id='comment:11'></a>This is a very good idea to add another algorithm and the parameter `algorithm` if it helps checking the validity of both algorithms. A slow algorithm is OK in such case.\nHowever, it should be done in a separate ticket.\n\nIt is possible to move the file to `src/sage/graphs/graph_decompositions` while working on the new ticket.",
    "created_at": "2018-10-16T15:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384855",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>This is a very good idea to add another algorithm and the parameter `algorithm` if it helps checking the validity of both algorithms. A slow algorithm is OK in such case.
However, it should be done in a separate ticket.

It is possible to move the file to `src/sage/graphs/graph_decompositions` while working on the new ticket.



---

archive/issue_comments_384856.json:
```json
{
    "body": "<a id='comment:12'></a>I added trac #26496.  The code there should be functional if you add `algorithm='habib'` to each call to `modular_decomposition` or `is_prime`.",
    "created_at": "2018-10-16T21:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384856",
    "user": "https://github.com/deinst"
}
```

<a id='comment:12'></a>I added trac #26496.  The code there should be functional if you add `algorithm='habib'` to each call to `modular_decomposition` or `is_prime`.



---

archive/issue_comments_384857.json:
```json
{
    "body": "<a id='comment:13'></a>see also #33902 \n\nHow about removing `'tedder'` completely?",
    "created_at": "2022-05-25T16:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384857",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>see also #33902 

How about removing `'tedder'` completely?



---

archive/issue_comments_384858.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,15 +1,16 @@\n ```\n sage: G1 = Graph('FwA]w')\n sage: G2 = Graph('F@Nfg')\n-sage: G1.modular_decomposition()\n+sage: G1.modular_decomposition(algorithm='tedder')\n (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n-sage: G2.modular_decomposition()\n+sage: G2.modular_decomposition(algorithm='tedder')\n (PRIME, [6, 5, 0, 2, 3, 1, 4])\n sage: G1.is_isomorphic(G2)\n True\n ```\n \n-I suppose #24898 was not enought.\n+I suppose #24898 was not enough. \n+\n \n Comment: 1\n \n```\n",
    "created_at": "2022-05-25T16:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384858",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,15 +1,16 @@
 ```
 sage: G1 = Graph('FwA]w')
 sage: G2 = Graph('F@Nfg')
-sage: G1.modular_decomposition()
+sage: G1.modular_decomposition(algorithm='tedder')
 (PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
-sage: G2.modular_decomposition()
+sage: G2.modular_decomposition(algorithm='tedder')
 (PRIME, [6, 5, 0, 2, 3, 1, 4])
 sage: G1.is_isomorphic(G2)
 True
 ```
 
-I suppose #24898 was not enought.
+I suppose #24898 was not enough. 
+
 
 Comment: 1
 
```




---

archive/issue_events_064714.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-05-25T16:39:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25872#event-64714"
}
```



---

archive/issue_comments_384859.json:
```json
{
    "body": "<a id='comment:14'></a>I can only agree with that. The code is buggy and I don't know how to fix that.",
    "created_at": "2022-05-25T16:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384859",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>I can only agree with that. The code is buggy and I don't know how to fix that.



---

archive/issue_comments_384860.json:
```json
{
    "body": "<a id='comment:15'></a>OK, I'll try doing this.",
    "created_at": "2022-05-25T18:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384860",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>OK, I'll try doing this.



---

archive/issue_comments_384861.json:
```json
{
    "body": "<a id='comment:16'></a>We can at least start with a deprecation warning.",
    "created_at": "2022-05-25T20:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384861",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>We can at least start with a deprecation warning.



---

archive/issue_comments_384862.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384862",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_384863.json:
```json
{
    "body": "<a id='comment:17'></a>New commits:",
    "created_at": "2022-05-25T23:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384863",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>New commits:



---

archive/issue_comments_384864.json:
```json
{
    "body": "<a id='comment:18'></a>As it's buggy, no need for deprecation, IMHO",
    "created_at": "2022-05-25T23:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384864",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>As it's buggy, no need for deprecation, IMHO



---

archive/issue_comments_384865.json:
```json
{
    "body": "<a id='comment:19'></a>This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm",
    "created_at": "2022-05-26T08:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384865",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm



---

archive/issue_comments_384866.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-26T09:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_384867.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:19 dcoudert]:\n> This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm\n\n\ndone",
    "created_at": "2022-05-26T09:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384867",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>Replying to [comment:19 dcoudert]:
> This looks good, but In `graph.py`, we should add the ticket number to the note explaining that we removed a buggy algorithm


done



---

archive/issue_comments_384868.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384868",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_384869.json:
```json
{
    "body": "<a id='comment:22'></a>Thank you Dima.\n\nLGTM.",
    "created_at": "2022-05-26T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384869",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>Thank you Dima.

LGTM.



---

archive/issue_comments_384870.json:
```json
{
    "body": "<a id='comment:23'></a>We should certainly update the ticket description to reflect the removal.",
    "created_at": "2022-05-26T09:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384870",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>We should certainly update the ticket description to reflect the removal.



---

archive/issue_comments_384871.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+```\n+sage: G1 = Graph('FwA]w')\n+sage: G2 = Graph('F@Nfg')\n+sage: G1.modular_decomposition(algorithm='tedder')\n+(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n+sage: G2.modular_decomposition(algorithm='tedder')\n+(PRIME, [6, 5, 0, 2, 3, 1, 4])\n+sage: G1.is_isomorphic(G2)\n+True\n+```\n+\n+#24898 was not enough. \n+\n+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\n+the `algorithm=` option is removed, as we only have one implementation now.\n+ \n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2022-05-26T10:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384871",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,22 @@
+```
+sage: G1 = Graph('FwA]w')
+sage: G2 = Graph('F@Nfg')
+sage: G1.modular_decomposition(algorithm='tedder')
+(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
+sage: G2.modular_decomposition(algorithm='tedder')
+(PRIME, [6, 5, 0, 2, 3, 1, 4])
+sage: G1.is_isomorphic(G2)
+True
+```
+
+#24898 was not enough. 
+
+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
+the `algorithm=` option is removed, as we only have one implementation now.
+ 
+
+
+
 
 
 Comment: 1
```




---

archive/issue_comments_384872.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-26T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384872",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_384873.json:
```json
{
    "body": "<a id='comment:25'></a>> the algorithm= option is removed, as we only have one implementation now.\n\n\nThis breaks existing code",
    "created_at": "2022-05-26T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384873",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>> the algorithm= option is removed, as we only have one implementation now.


This breaks existing code



---

archive/issue_comments_384874.json:
```json
{
    "body": "<a id='comment:26'></a>So what should we do ? deprecate this option before removing tedder in a year ? remove tedder now and let this parameter even if unused with a deprecation ? something else ?",
    "created_at": "2022-05-26T16:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384874",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>So what should we do ? deprecate this option before removing tedder in a year ? remove tedder now and let this parameter even if unused with a deprecation ? something else ?



---

archive/issue_comments_384875.json:
```json
{
    "body": "<a id='comment:27'></a>Just make it so that passing `algorithm='habib'` does not become an error",
    "created_at": "2022-05-26T16:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384875",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Just make it so that passing `algorithm='habib'` does not become an error



---

archive/issue_comments_384876.json:
```json
{
    "body": "<a id='comment:28'></a>`algorithm='tedder'` should be an error now. \n\nThe problem is, however, not limited to this, as there is also a `modular_decomposition(foo)` function, which was equivalent to `foo.modular_decomposition(algorithm='tedder')`. In the present branch `modular_decomposition(foo)` became\nequivalent to the (old) `foo.modular_decomposition(algorithm='habib')`, because, what else?\n\nI think it's too much fuss to fiddle around with deprecations here.",
    "created_at": "2022-05-26T17:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384876",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>`algorithm='tedder'` should be an error now. 

The problem is, however, not limited to this, as there is also a `modular_decomposition(foo)` function, which was equivalent to `foo.modular_decomposition(algorithm='tedder')`. In the present branch `modular_decomposition(foo)` became
equivalent to the (old) `foo.modular_decomposition(algorithm='habib')`, because, what else?

I think it's too much fuss to fiddle around with deprecations here.



---

archive/issue_comments_384877.json:
```json
{
    "body": "<a id='comment:29'></a>Just don't make these breaking API changes:\n\n```\n--- a/src/sage/graphs/graph.py\n+++ b/src/sage/graphs/graph.py\n@@ -7574,7 +7574,7 @@ class Graph(GenericGraph):\n             return list(core.values())\n \n     @doc_index(\"Leftovers\")\n-    def modular_decomposition(self, algorithm='habib', style='tuple'):\n+    def modular_decomposition(self, style='tuple'):\n         r\"\"\"\n         Return the modular decomposition of the current graph.\n \n@@ -8035,23 +8014,13 @@ class Graph(GenericGraph):\n         return self.planar_dual().is_circumscribable(solver=solver, verbose=verbose)\n \n     @doc_index(\"Graph properties\")\n-    def is_prime(self, algorithm='habib'):\n+    def is_prime(self):\n         r\"\"\"\n         Test whether the current graph is prime.\n \n```",
    "created_at": "2022-05-26T17:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384877",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Just don't make these breaking API changes:

```
--- a/src/sage/graphs/graph.py
+++ b/src/sage/graphs/graph.py
@@ -7574,7 +7574,7 @@ class Graph(GenericGraph):
             return list(core.values())
 
     @doc_index("Leftovers")
-    def modular_decomposition(self, algorithm='habib', style='tuple'):
+    def modular_decomposition(self, style='tuple'):
         r"""
         Return the modular decomposition of the current graph.
 
@@ -8035,23 +8014,13 @@ class Graph(GenericGraph):
         return self.planar_dual().is_circumscribable(solver=solver, verbose=verbose)
 
     @doc_index("Graph properties")
-    def is_prime(self, algorithm='habib'):
+    def is_prime(self):
         r"""
         Test whether the current graph is prime.
 
```



---

archive/issue_comments_384878.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-26T21:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_384879.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-26T21:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384879",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_384880.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384880",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_384881.json:
```json
{
    "body": "<a id='comment:32'></a>LGTM, thanks.",
    "created_at": "2022-05-26T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384881",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>LGTM, thanks.



---

archive/issue_events_064715.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25872#event-64715"
}
```



---

archive/issue_comments_384882.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-29T11:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384882",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_384883.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+```\n+sage: G1 = Graph('FwA]w')\n+sage: G2 = Graph('F@Nfg')\n+sage: G1.modular_decomposition(algorithm='tedder')\n+(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])\n+sage: G2.modular_decomposition(algorithm='tedder')\n+(PRIME, [6, 5, 0, 2, 3, 1, 4])\n+sage: G1.is_isomorphic(G2)\n+True\n+```\n+\n+#24898 was not enough. \n+\n+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);\n+the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.\n+ \n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2022-06-09T16:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25872#issuecomment-384883",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,22 @@
+```
+sage: G1 = Graph('FwA]w')
+sage: G2 = Graph('F@Nfg')
+sage: G1.modular_decomposition(algorithm='tedder')
+(PRIME, [6, 2, 1, 5, 0, (PARALLEL, [3, 4])])
+sage: G2.modular_decomposition(algorithm='tedder')
+(PRIME, [6, 5, 0, 2, 3, 1, 4])
+sage: G1.is_isomorphic(G2)
+True
+```
+
+#24898 was not enough. 
+
+This ticket removes `'tedder'` implementation, as buggy unfixable abandonware (see #33902 for another example of a bug);
+the `algorithm=` option is made into a no-op, to be removed after the deprecation period, as we only have one implementation now.
+ 
+
+
+
 
 
 Comment: 1
```

