# Issue 25181: has_custom_conversion check in UnitalAlgebras.ParentMethods is broken

archive/issues_024944.json:
```json
{
    "assignees": [],
    "body": "The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy). Moreover, it doesn't work on Python 3.\n\nSince properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.\n\nThis is a pure refactoring: no functionality is changed.\n\n---\n\nOriginal ticket description kept for reference:\n\nThis code\n\n```\n            try:\n                has_custom_conversion = self.category().parent_class.from_base_ring.__func__ is not self.from_base_ring.__func__\n            except AttributeError:\n                # Sometimes from_base_ring is a lazy attribute\n                has_custom_conversion = True\n```\nis trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality, even if the lazy attribute comes from the category.\n\nNow there are two ways to solve this:\n\n1. Keep (and document) the current behaviour, namely that the `has_custom_conversion = True` branch is always taken if `from_base_ring` is a lazy attribute.\n\n2. Fix the bug and set `has_custom_conversion = False` if `from_base_ring` is a non-custom lazy attribute. Unfortunately, this leads to further breakage:\n\n```\nsage -t src/sage/categories/with_realizations.py\n**********************************************************************\nFile \"src/sage/categories/with_realizations.py\", line 71, in sage.categories.with_realizations.WithRealizations\nFailed example:\n    A = Sets().WithRealizations().example(); A\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.categories.with_realizations.WithRealizations[1]>\", line 1, in <module>\n        A = Sets().WithRealizations().example(); A\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py\", line 2526, in example\n        return SubsetAlgebra(base_ring, set)\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1647)\n        return cls.classcall(cls, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:6269)\n        w = self.f(*args, **kwds)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1021, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"sage/misc/classcall_metaclass.pyx\", line 497, in sage.misc.classcall_metaclass.typecall (build/cythonized/sage/misc/classcall_metaclass.c:2097)\n        return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/examples/with_realizations.py\", line 186, in __init__\n        In_to_F   .register_as_coercion()\n      File \"sage/categories/morphism.pyx\", line 276, in sage.categories.morphism.Morphism.register_as_coercion (build/cythonized/sage/categories/morphism.c:4666)\n        self._codomain.register_coercion(self)\n      File \"sage/structure/parent.pyx\", line 1626, in sage.structure.parent.Parent.register_coercion (build/cythonized/sage/structure/parent.c:15031)\n        assert not (self._coercions_used and D in self._coerce_from_hash), \"coercion from {} to {} already registered or discovered\".format(D, self)\n    AssertionError: coercion from The subset algebra of {1, 2, 3} over Rational Field in the In basis to The subset algebra of {1, 2, 3} over Rational Field in the Fundamental basis already registered or discovered\n**********************************************************************\n```\n\nRegardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.\n\nCC:  @nthiery\n\nComponent: **categories**\n\nKeywords: **sagedays@icerm python3**\n\nAuthor: **Jeroen Demeyer**\n\nBranch/Commit: **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**\n\nReviewer: **Travis Scrimshaw, Nicolas M. Thi\u00e9ry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25181_\n\n",
    "closed_at": "2018-08-05T08:42:47Z",
    "created_at": "2018-04-16T12:55:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20python3"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "has_custom_conversion check in UnitalAlgebras.ParentMethods is broken",
    "type": "issue",
    "updated_at": "2018-08-05T08:42:47Z",
    "url": "https://github.com/sagemath/sage/issues/25181",
    "user": "https://github.com/jdemeyer"
}
```
The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy). Moreover, it doesn't work on Python 3.

Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.

This is a pure refactoring: no functionality is changed.

---

Original ticket description kept for reference:

This code

```
            try:
                has_custom_conversion = self.category().parent_class.from_base_ring.__func__ is not self.from_base_ring.__func__
            except AttributeError:
                # Sometimes from_base_ring is a lazy attribute
                has_custom_conversion = True
```
is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality, even if the lazy attribute comes from the category.

Now there are two ways to solve this:

1. Keep (and document) the current behaviour, namely that the `has_custom_conversion = True` branch is always taken if `from_base_ring` is a lazy attribute.

2. Fix the bug and set `has_custom_conversion = False` if `from_base_ring` is a non-custom lazy attribute. Unfortunately, this leads to further breakage:

```
sage -t src/sage/categories/with_realizations.py
**********************************************************************
File "src/sage/categories/with_realizations.py", line 71, in sage.categories.with_realizations.WithRealizations
Failed example:
    A = Sets().WithRealizations().example(); A
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.categories.with_realizations.WithRealizations[1]>", line 1, in <module>
        A = Sets().WithRealizations().example(); A
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 2526, in example
        return SubsetAlgebra(base_ring, set)
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1647)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:6269)
        w = self.f(*args, **kwds)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 497, in sage.misc.classcall_metaclass.typecall (build/cythonized/sage/misc/classcall_metaclass.c:2097)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/examples/with_realizations.py", line 186, in __init__
        In_to_F   .register_as_coercion()
      File "sage/categories/morphism.pyx", line 276, in sage.categories.morphism.Morphism.register_as_coercion (build/cythonized/sage/categories/morphism.c:4666)
        self._codomain.register_coercion(self)
      File "sage/structure/parent.pyx", line 1626, in sage.structure.parent.Parent.register_coercion (build/cythonized/sage/structure/parent.c:15031)
        assert not (self._coercions_used and D in self._coerce_from_hash), "coercion from {} to {} already registered or discovered".format(D, self)
    AssertionError: coercion from The subset algebra of {1, 2, 3} over Rational Field in the In basis to The subset algebra of {1, 2, 3} over Rational Field in the Fundamental basis already registered or discovered
**********************************************************************
```

Regardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.

CC:  @nthiery

Component: **categories**

Keywords: **sagedays@icerm python3**

Author: **Jeroen Demeyer**

Branch/Commit: **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**

Reviewer: **Travis Scrimshaw, Nicolas M. Thiéry**

_Issue created by migration from https://trac.sagemath.org/ticket/25181_





---

archive/issue_events_345557.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T12:55:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345557"
}
```



---

archive/issue_events_345558.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T12:55:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345558"
}
```



---

archive/issue_events_345559.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T12:55:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345559"
}
```



---

archive/issue_events_345560.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T12:55:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345560"
}
```



---

archive/issue_comments_384895.json:
```json
{
    "body": "Branch: **[u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken)**",
    "created_at": "2018-04-16T12:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384895",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken)**



---

archive/issue_comments_384896.json:
```json
{
    "body": "Commit: **[`195e94a`](https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34)**",
    "created_at": "2018-04-16T13:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384896",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`195e94a`](https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34)**



---

archive/issue_comments_384897.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34\"><code>195e94a</code></a></td><td><code>Fix has_custom_conversion check in UnitalAlgebras.ParentMethods</code></td></tr></table>\n",
    "created_at": "2018-04-16T13:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384897",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34"><code>195e94a</code></a></td><td><code>Fix has_custom_conversion check in UnitalAlgebras.ParentMethods</code></td></tr></table>




---

archive/issue_comments_384898.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,6 @@\n                 # Sometimes from_base_ring is a lazy attribute\n                 has_custom_conversion = True\n ```\n-is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True`.\n+is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.\n \n-Regardless of this bug, the code to do check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of this check, it can be simplified and fixed.\n+Regardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.\n``````\n",
    "created_at": "2018-04-16T13:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384898",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,6 @@
                 # Sometimes from_base_ring is a lazy attribute
                 has_custom_conversion = True
 ```
-is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True`.
+is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.
 
-Regardless of this bug, the code to do check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of this check, it can be simplified and fixed.
+Regardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.
``````




---

archive/issue_comments_384899.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,44 @@\n ```\n is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.\n \n+Now there are two ways to solve this:\n+\n+1. Keep (and document) the current behaviour, namely that the `has_custom_conversion = True` branch is always taken if `from_base_ring` is a lazy attribute.\n+\n+2. Fix the bug and set `has_custom_conversion = False` if `from_base_ring` is a non-custom lazy attribute. Unfortunately, this leads to further breakage:\n+\n+```\n+sage -t src/sage/categories/with_realizations.py\n+**********************************************************************\n+File \"src/sage/categories/with_realizations.py\", line 71, in sage.categories.with_realizations.WithRealizations\n+Failed example:\n+    A = Sets().WithRealizations().example(); A\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.categories.with_realizations.WithRealizations[1]>\", line 1, in <module>\n+        A = Sets().WithRealizations().example(); A\n+      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py\", line 2526, in example\n+        return SubsetAlgebra(base_ring, set)\n+      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1647)\n+        return cls.classcall(cls, *args, **kwds)\n+      File \"sage/misc/cachefunc.pyx\", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:6269)\n+        w = self.f(*args, **kwds)\n+      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1021, in __classcall__\n+        instance = typecall(cls, *args, **options)\n+      File \"sage/misc/classcall_metaclass.pyx\", line 497, in sage.misc.classcall_metaclass.typecall (build/cythonized/sage/misc/classcall_metaclass.c:2097)\n+        return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n+      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/examples/with_realizations.py\", line 186, in __init__\n+        In_to_F   .register_as_coercion()\n+      File \"sage/categories/morphism.pyx\", line 276, in sage.categories.morphism.Morphism.register_as_coercion (build/cythonized/sage/categories/morphism.c:4666)\n+        self._codomain.register_coercion(self)\n+      File \"sage/structure/parent.pyx\", line 1626, in sage.structure.parent.Parent.register_coercion (build/cythonized/sage/structure/parent.c:15031)\n+        assert not (self._coercions_used and D in self._coerce_from_hash), \"coercion from {} to {} already registered or discovered\".format(D, self)\n+    AssertionError: coercion from The subset algebra of {1, 2, 3} over Rational Field in the In basis to The subset algebra of {1, 2, 3} over Rational Field in the Fundamental basis already registered or discovered\n+**********************************************************************\n+```\n+\n Regardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.\n``````\n",
    "created_at": "2018-04-16T15:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384899",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,44 @@
 ```
 is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.
 
+Now there are two ways to solve this:
+
+1. Keep (and document) the current behaviour, namely that the `has_custom_conversion = True` branch is always taken if `from_base_ring` is a lazy attribute.
+
+2. Fix the bug and set `has_custom_conversion = False` if `from_base_ring` is a non-custom lazy attribute. Unfortunately, this leads to further breakage:
+
+```
+sage -t src/sage/categories/with_realizations.py
+**********************************************************************
+File "src/sage/categories/with_realizations.py", line 71, in sage.categories.with_realizations.WithRealizations
+Failed example:
+    A = Sets().WithRealizations().example(); A
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.categories.with_realizations.WithRealizations[1]>", line 1, in <module>
+        A = Sets().WithRealizations().example(); A
+      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 2526, in example
+        return SubsetAlgebra(base_ring, set)
+      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1647)
+        return cls.classcall(cls, *args, **kwds)
+      File "sage/misc/cachefunc.pyx", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:6269)
+        w = self.f(*args, **kwds)
+      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
+        instance = typecall(cls, *args, **options)
+      File "sage/misc/classcall_metaclass.pyx", line 497, in sage.misc.classcall_metaclass.typecall (build/cythonized/sage/misc/classcall_metaclass.c:2097)
+        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
+      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/examples/with_realizations.py", line 186, in __init__
+        In_to_F   .register_as_coercion()
+      File "sage/categories/morphism.pyx", line 276, in sage.categories.morphism.Morphism.register_as_coercion (build/cythonized/sage/categories/morphism.c:4666)
+        self._codomain.register_coercion(self)
+      File "sage/structure/parent.pyx", line 1626, in sage.structure.parent.Parent.register_coercion (build/cythonized/sage/structure/parent.c:15031)
+        assert not (self._coercions_used and D in self._coerce_from_hash), "coercion from {} to {} already registered or discovered".format(D, self)
+    AssertionError: coercion from The subset algebra of {1, 2, 3} over Rational Field in the In basis to The subset algebra of {1, 2, 3} over Rational Field in the Fundamental basis already registered or discovered
+**********************************************************************
+```
+
 Regardless of this bug, the code to do this check can be improved. The reason why the `__func__` access is needed in the first place is because we are trying to compare an *unbound* method with a *bound* method. If we have unbound methods on both sides of the equality, it can be simplified and fixed.
``````




---

archive/issue_comments_384900.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n                 # Sometimes from_base_ring is a lazy attribute\n                 has_custom_conversion = True\n ```\n-is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.\n+is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality, even if the lazy attribute comes from the category.\n \n Now there are two ways to solve this:\n \n``````\n",
    "created_at": "2018-04-16T15:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384900",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
                 # Sometimes from_base_ring is a lazy attribute
                 has_custom_conversion = True
 ```
-is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality.
+is trying to determine whether `from_base_ring` comes from the category or not. However, in the case of a lazy attribute it wrongly sets `has_custom_conversion = True` without checking equality, even if the lazy attribute comes from the category.
 
 Now there are two ways to solve this:
 
``````




---

archive/issue_comments_384901.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n@nthiery: it would be great to have some advice on how to proceed...",
    "created_at": "2018-04-16T15:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384901",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

@nthiery: it would be great to have some advice on how to proceed...



---

archive/issue_comments_384902.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSo use `six.get_unbound_function` on both sides.  The function name is a bit of a mouthful, but it's very accurate and unambiguous as to what it does...\n\nAnother way to spell it is `the_func = getattr(the_method, '__func__', the_method)` but it's a little less obvious what the intent is of that.",
    "created_at": "2018-04-18T10:06:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384902",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

So use `six.get_unbound_function` on both sides.  The function name is a bit of a mouthful, but it's very accurate and unambiguous as to what it does...

Another way to spell it is `the_func = getattr(the_method, '__func__', the_method)` but it's a little less obvious what the intent is of that.



---

archive/issue_comments_384903.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI meant advice on what to do with the lazy attribute situation. The comments do not agree with the code. So either we fix the comments to say what the code really does or we change the code to do what the comments say. Unfortunately, the latter breaks stuff (see ticket description).",
    "created_at": "2018-04-18T10:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384903",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I meant advice on what to do with the lazy attribute situation. The comments do not agree with the code. So either we fix the comments to say what the code really does or we change the code to do what the comments say. Unfortunately, the latter breaks stuff (see ticket description).



---

archive/issue_comments_384904.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@embray](#comment%3A5):\n> So use `six.get_unbound_function` on both sides.\n\nNot both sides, because one side is a *bound* method and the other is an *unbound* method.",
    "created_at": "2018-04-18T12:02:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384904",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@embray](#comment%3A5):
> So use `six.get_unbound_function` on both sides.

Not both sides, because one side is a *bound* method and the other is an *unbound* method.



---

archive/issue_comments_384905.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNicolas: I would love to hear your opinion on this ticket.",
    "created_at": "2018-04-28T12:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384905",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Nicolas: I would love to hear your opinion on this ticket.



---

archive/issue_comments_384906.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGiven that this seems difficult to fix properly, I'll probably go for cleaning it up without making any functional changes and properly documenting what happens.",
    "created_at": "2018-05-17T10:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384906",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Given that this seems difficult to fix properly, I'll probably go for cleaning it up without making any functional changes and properly documenting what happens.



---

archive/issue_comments_384907.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThis is already \"fixed\" in #24955 but only superficially.",
    "created_at": "2018-05-17T16:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384907",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

This is already "fixed" in #24955 but only superficially.



---

archive/issue_comments_384908.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).\n+\n+Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments but without changing any functionality.\n+\n+---\n+\n+Original ticket description kept for reference:\n+\n This code\n \n ```\n``````\n",
    "created_at": "2018-06-14T12:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384908",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
+The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).
+
+Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments but without changing any functionality.
+
+---
+
+Original ticket description kept for reference:
+
 This code
 
 ```
``````




---

archive/issue_comments_384909.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).\n \n-Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments but without changing any functionality.\n+Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.\n+\n+This is a pure refactoring: no functionality is changed.\n \n ---\n \n``````\n",
    "created_at": "2018-06-14T12:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384909",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).
 
-Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments but without changing any functionality.
+Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.
+
+This is a pure refactoring: no functionality is changed.
 
 ---
 
``````




---

archive/issue_comments_384910.json:
```json
{
    "body": "Changed commit from **[`195e94a`](https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34)** to **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**",
    "created_at": "2018-06-14T13:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384910",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`195e94a`](https://github.com/sagemath/sagetrac-mirror/commit/195e94a533efb4349da0c0eff7128160948a1a34)** to **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**



---

archive/issue_comments_384911.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a\"><code>003b22a</code></a></td><td><code>Refactor UnitalAlgebras.ParentMethods.__init_extra__</code></td></tr></table>\n",
    "created_at": "2018-06-14T13:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384911",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a"><code>003b22a</code></a></td><td><code>Refactor UnitalAlgebras.ParentMethods.__init_extra__</code></td></tr></table>




---

archive/issue_events_345561.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-14T13:52:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345561"
}
```



---

archive/issue_comments_384912.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTravis told me in person that he is willing to set this to positive review later this month, after discussing it with Nicolas.",
    "created_at": "2018-07-05T08:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384912",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Travis told me in person that he is willing to set this to positive review later this month, after discussing it with Nicolas.



---

archive/issue_comments_384913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).\n+The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy). Moreover, it doesn't work on Python 3.\n \n Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.\n \n``````\n",
    "created_at": "2018-07-05T08:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384913",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy).
+The code in `UnitalAlgebras.ParentMethods.__init_extra__` to determine a coercion from the base ring to the algebra is quite obscure (and probably buggy). Moreover, it doesn't work on Python 3.
 
 Since properly cleaning this up didn't work, I instead refactor the code, adding plenty of comments to explain what is happening.
 
``````




---

archive/issue_comments_384914.json:
```json
{
    "body": "Changed keywords from none to **sagedays@icerm**",
    "created_at": "2018-07-26T23:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384914",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from none to **sagedays@icerm**



---

archive/issue_comments_384915.json:
```json
{
    "body": "Changed keywords from **sagedays@icerm** to **sagedays@icerm python3**",
    "created_at": "2018-07-27T09:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384915",
    "user": "https://github.com/embray"
}
```

Changed keywords from **sagedays@icerm** to **sagedays@icerm python3**



---

archive/issue_events_345562.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T09:46:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345562"
}
```



---

archive/issue_events_345563.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T09:46:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345563"
}
```



---

archive/issue_events_345564.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T09:46:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345564"
}
```



---

archive/issue_comments_384916.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAdding python3 keyword since this helps fix a number of bugs there as well.",
    "created_at": "2018-07-27T09:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384916",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

Adding python3 keyword since this helps fix a number of bugs there as well.



---

archive/issue_comments_384917.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHi Jeroen!\n\nI have just been through the new version. It is now much much clearer what the current logic does; thanks a lot! The logic is still crappy and way too complicated. but it's indeed very reasonable to split the work in two stages (in this ticket: fixing the Python 3 issue + clarifying the current logic; in a later ticket:fix/improve the logic).\n\nPositive review on my side.\n\nJust one question: while rewriting the code, did you do some additional manual tests to check how things worked? Or were the current doctests sufficient? In the former case, in case you still have your manual tests under hand, could you add them to the doctests?\n\nThanks again,",
    "created_at": "2018-07-27T13:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384917",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:19" align="right">comment:19</div>

Hi Jeroen!

I have just been through the new version. It is now much much clearer what the current logic does; thanks a lot! The logic is still crappy and way too complicated. but it's indeed very reasonable to split the work in two stages (in this ticket: fixing the Python 3 issue + clarifying the current logic; in a later ticket:fix/improve the logic).

Positive review on my side.

Just one question: while rewriting the code, did you do some additional manual tests to check how things worked? Or were the current doctests sufficient? In the former case, in case you still have your manual tests under hand, could you add them to the doctests?

Thanks again,



---

archive/issue_comments_384918.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nTravis is next to me and agrees with the above comment. I let you set the positive review on our behalf after the question above.",
    "created_at": "2018-07-27T13:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384918",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:20" align="right">comment:20</div>

Travis is next to me and agrees with the above comment. I let you set the positive review on our behalf after the question above.



---

archive/issue_comments_384919.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw, Nicolas M. Thi\u00e9ry**",
    "created_at": "2018-07-27T13:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384919",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Travis Scrimshaw, Nicolas M. Thiéry**



---

archive/issue_events_345565.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-27T13:39:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345565"
}
```



---

archive/issue_events_345566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-27T13:39:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345566"
}
```



---

archive/issue_comments_384920.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nthiery](#comment%3A19):\n> Just one question: while rewriting the code, did you do some additional manual tests to check how things worked?\n\nI don't think so.\n\n> Or were the current doctests sufficient?\n\nI recall from my work in Cernay on this ticket that the code was quite brittle: any small change in functionality would induce doctest failures somewhere. Maybe there are not many explicit tests, but the code is used in many places and therefore well tested implicitly.",
    "created_at": "2018-07-27T13:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384920",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nthiery](#comment%3A19):
> Just one question: while rewriting the code, did you do some additional manual tests to check how things worked?

I don't think so.

> Or were the current doctests sufficient?

I recall from my work in Cernay on this ticket that the code was quite brittle: any small change in functionality would induce doctest failures somewhere. Maybe there are not many explicit tests, but the code is used in many places and therefore well tested implicitly.



---

archive/issue_comments_384921.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken)** to **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**",
    "created_at": "2018-08-05T08:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25181#issuecomment-384921",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/has_custom_conversion_check_in_unitalalgebras_parentmethods_is_broken)** to **[`003b22a`](https://github.com/sagemath/sagetrac-mirror/commit/003b22af7bc99de29838c6c182fb4a0247f2224a)**



---

archive/issue_events_345567.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:42:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345567"
}
```



---

archive/issue_events_345568.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3399f7a5725203328e56da570fcd4414cdf25f77",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-05T08:42:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25181",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25181#event-345568"
}
```
