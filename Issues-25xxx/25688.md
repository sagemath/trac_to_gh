# Issue 25688: Inaccuracy in symbolic series result on 32bit Linux

archive/issues_025451.json:
```json
{
    "body": "From ticket:24838#comment:64\n\nOn 32-bit:\n\n```\nFile \"src/sage/functions/hypergeometric.py\", line 148, in sage.functions.hypergeometric\nFailed example:\n    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()\nExpected:\n    0.403652637676806\nGot:\n    0.403651580752398\n```\n\nPynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.\n\n**CC:**  @slel tmonteil\n\n**Keywords:** pynac, 32-bit, overflow\n\n**Branch/Commit:** [689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Dave Morris\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25688\n\n",
    "closed_at": "2022-03-09T23:37:45Z",
    "created_at": "2018-06-28T14:34:27Z",
    "labels": [
        "component: symbolics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Inaccuracy in symbolic series result on 32bit Linux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25688",
    "user": "https://github.com/rwst"
}
```
From ticket:24838#comment:64

On 32-bit:

```
File "src/sage/functions/hypergeometric.py", line 148, in sage.functions.hypergeometric
Failed example:
    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()
Expected:
    0.403652637676806
Got:
    0.403651580752398
```

Pynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.

**CC:**  @slel tmonteil

**Keywords:** pynac, 32-bit, overflow

**Branch/Commit:** [689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)

**Reviewer:** Matthias Koeppe

**Author:** Dave Morris

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/25688





---

archive/issue_comments_494573.json:
```json
{
    "body": "**Branch:** [public/25688](https://github.com/sagemath/sagetrac-mirror/tree/public/25688)",
    "created_at": "2021-06-19T07:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494573",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Branch:** [public/25688](https://github.com/sagemath/sagetrac-mirror/tree/public/25688)



---

archive/issue_comments_494574.json:
```json
{
    "body": "**Commit:** [e8ee3fc291a8d547459e89ad40f3cf0e7a953d93](https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93)",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494574",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Commit:** [e8ee3fc291a8d547459e89ad40f3cf0e7a953d93](https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93)



---

archive/issue_comments_494575.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) \n\nThere is only new commit in the branch here. It just deletes the \"known bug\" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1a99fa926a777a54bc78571f36efd4de9396bfd\">f1a99fa</a></td><td><code>trac 31585 pynac overflow patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fcf0726cb17a701d279be7cbe724d73ec98370f\">3fcf072</a></td><td><code>add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdde3d9b4a16e51f22181744036920124811a1ef\">fdde3d9</a></td><td><code>update pynac patch level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93\">e8ee3fc</a></td><td><code>trac 25688 remove \"known bug\" tag</code></td></tr></table>\n",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494575",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:2'></a>
This bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) 

There is only new commit in the branch here. It just deletes the "known bug" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1a99fa926a777a54bc78571f36efd4de9396bfd">f1a99fa</a></td><td><code>trac 31585 pynac overflow patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fcf0726cb17a701d279be7cbe724d73ec98370f">3fcf072</a></td><td><code>add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdde3d9b4a16e51f22181744036920124811a1ef">fdde3d9</a></td><td><code>update pynac patch level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93">e8ee3fc</a></td><td><code>trac 25688 remove "known bug" tag</code></td></tr></table>




---

archive/issue_events_073112.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-06-19T07:58:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73112"
}
```



---

archive/issue_comments_494576.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"pynac, 32-bit, overflow\".",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494576",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing keywords** from "" to "pynac, 32-bit, overflow".



---

archive/issue_comments_494577.json:
```json
{
    "body": "**Dependencies:** #31585",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494577",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Dependencies:** #31585



---

archive/issue_comments_494578.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494578",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_494579.json:
```json
{
    "body": "**Author:** Dave Morris",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494579",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Author:** Dave Morris



---

archive/issue_comments_494580.json:
```json
{
    "body": "**Changing branch** from \"[public/25688](https://github.com/sagemath/sagetrac-mirror/tree/public/25688)\" to \"[public/25688r1](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r1)\".",
    "created_at": "2021-06-28T05:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494580",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing branch** from "[public/25688](https://github.com/sagemath/sagetrac-mirror/tree/public/25688)" to "[public/25688r1](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r1)".



---

archive/issue_comments_494581.json:
```json
{
    "body": "**Changing commit** from \"[e8ee3fc291a8d547459e89ad40f3cf0e7a953d93](https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93)\" to \"[73e975c28997f6662454b3b53dfe2cdebd22f410](https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410)\".",
    "created_at": "2021-06-28T05:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494581",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing commit** from "[e8ee3fc291a8d547459e89ad40f3cf0e7a953d93](https://github.com/sagemath/sagetrac-mirror/commit/e8ee3fc291a8d547459e89ad40f3cf0e7a953d93)" to "[73e975c28997f6662454b3b53dfe2cdebd22f410](https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410)".



---

archive/issue_comments_494582.json:
```json
{
    "body": "<a id='comment:4'></a>\nRebased on the new #31585 that eliminates a merge conflict.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecb99c85602cda86f775cff70003cfa548fd9ad4\">ecb99c8</a></td><td><code>trac 31585 pynac overflow patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d04fa4a45f277a2deabeda50cf0f3d9c4a58590\">2d04fa4</a></td><td><code>add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a340ce206534e0a48d48edeb48197906fb9812a\">5a340ce</a></td><td><code>update pynac patch level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410\">73e975c</a></td><td><code>trac 25688 remove \"known bug\" tag</code></td></tr></table>\n",
    "created_at": "2021-06-28T05:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494582",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:4'></a>
Rebased on the new #31585 that eliminates a merge conflict.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecb99c85602cda86f775cff70003cfa548fd9ad4">ecb99c8</a></td><td><code>trac 31585 pynac overflow patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d04fa4a45f277a2deabeda50cf0f3d9c4a58590">2d04fa4</a></td><td><code>add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a340ce206534e0a48d48edeb48197906fb9812a">5a340ce</a></td><td><code>update pynac patch level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410">73e975c</a></td><td><code>trac 25688 remove "known bug" tag</code></td></tr></table>




---

archive/issue_comments_494583.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494583",
    "user": "https://github.com/slel"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_494584.json:
```json
{
    "body": "<a id='comment:5'></a>\nPlease rebase.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494584",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'></a>
Please rebase.



---

archive/issue_comments_494585.json:
```json
{
    "body": "**Changing branch** from \"[public/25688r1](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r1)\" to \"[public/25688r2](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r2)\".",
    "created_at": "2021-07-25T02:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494585",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing branch** from "[public/25688r1](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r1)" to "[public/25688r2](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r2)".



---

archive/issue_comments_494586.json:
```json
{
    "body": "**Changing dependencies** from \"#31585\" to \"\".",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494586",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing dependencies** from "#31585" to "".



---

archive/issue_comments_494587.json:
```json
{
    "body": "**Changing commit** from \"[73e975c28997f6662454b3b53dfe2cdebd22f410](https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410)\" to \"[689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)\".",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494587",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing commit** from "[73e975c28997f6662454b3b53dfe2cdebd22f410](https://github.com/sagemath/sagetrac-mirror/commit/73e975c28997f6662454b3b53dfe2cdebd22f410)" to "[689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)".



---

archive/issue_comments_494588.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b\">689e08f</a></td><td><code>trac 25688 remove \"known bug\" tag</code></td></tr></table>\n",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494588",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:7'></a>
Thanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b">689e08f</a></td><td><code>trac 25688 remove "known bug" tag</code></td></tr></table>




---

archive/issue_comments_494589.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494589",
    "user": "https://github.com/DaveWitteMorris"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_events_073113.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73113"
}
```



---

archive/issue_events_073114.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73114"
}
```



---

archive/issue_events_073115.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73115"
}
```



---

archive/issue_events_073116.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73116"
}
```



---

archive/issue_comments_494590.json:
```json
{
    "body": "<a id='comment:10'></a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494590",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_494591.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-03-08T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494591",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_494592.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2022-03-08T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494592",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_494593.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks!",
    "created_at": "2022-03-08T06:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494593",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:12'></a>
Thanks!



---

archive/issue_comments_494594.json:
```json
{
    "body": "**Changing branch** from \"[public/25688r2](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r2)\" to \"[689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)\".",
    "created_at": "2022-03-09T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494594",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/25688r2](https://github.com/sagemath/sagetrac-mirror/tree/public/25688r2)" to "[689e08f9393ac651c420546b0e63efbb1220156b](https://github.com/sagemath/sagetrac-mirror/commit/689e08f9393ac651c420546b0e63efbb1220156b)".



---

archive/issue_events_073117.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-09T23:37:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-73117"
}
```



---

archive/issue_comments_494595.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2022-03-09T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-494595",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
