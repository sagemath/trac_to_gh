# Issue 25688: Inaccuracy in symbolic series result on 32bit Linux

archive/issues_025451.json:
```json
{
    "body": "From #24838#comment:64\n\nOn 32-bit:\n\n```\nFile \"src/sage/functions/hypergeometric.py\", line 148, in sage.functions.hypergeometric\nFailed example:\n    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()\nExpected:\n    0.403652637676806\nGot:\n    0.403651580752398\n```\n\nPynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.\n\nCC:  @slel tmonteil\n\nKeywords: pynac, 32-bit, overflow\n\nBranch/Commit: 689e08f9393ac651c420546b0e63efbb1220156b\n\nReviewer: Matthias Koeppe\n\nAuthor: Dave Morris\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25688\n\n",
    "closed_at": "2022-03-09T23:37:45Z",
    "created_at": "2018-06-28T14:34:27Z",
    "labels": [
        "component: symbolics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Inaccuracy in symbolic series result on 32bit Linux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25688",
    "user": "https://github.com/rwst"
}
```
From #24838#comment:64

On 32-bit:

```
File "src/sage/functions/hypergeometric.py", line 148, in sage.functions.hypergeometric
Failed example:
    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()
Expected:
    0.403652637676806
Got:
    0.403651580752398
```

Pynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.

CC:  @slel tmonteil

Keywords: pynac, 32-bit, overflow

Branch/Commit: 689e08f9393ac651c420546b0e63efbb1220156b

Reviewer: Matthias Koeppe

Author: Dave Morris

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25688





---

archive/issue_comments_492660.json:
```json
{
    "body": "Changing branch from \"\" to \"public/25688\"",
    "created_at": "2021-06-19T07:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492660",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing branch from "" to "public/25688"



---

archive/issue_comments_492661.json:
```json
{
    "body": "Changing commit from \"\" to \"e8ee3fc291a8d547459e89ad40f3cf0e7a953d93\"",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492661",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing commit from "" to "e8ee3fc291a8d547459e89ad40f3cf0e7a953d93"



---

archive/issue_comments_492662.json:
```json
{
    "body": "<a id='comment:2'></a>This bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) \n\nThere is only new commit in the branch here. It just deletes the \"known bug\" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.\n\n---\nNew commits:",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492662",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:2'></a>This bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) 

There is only new commit in the branch here. It just deletes the "known bug" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.

---
New commits:



---

archive/issue_events_064307.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-06-19T07:58:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64307"
}
```



---

archive/issue_comments_492663.json:
```json
{
    "body": "Changing keywords from \"\" to \"pynac, 32-bit, overflow\".",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492663",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing keywords from "" to "pynac, 32-bit, overflow".



---

archive/issue_comments_492664.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31585\"",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492664",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing dependencies from "" to "#31585"



---

archive/issue_comments_492665.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492665",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_492666.json:
```json
{
    "body": "Changing author from \"\" to \"Dave Morris\"",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492666",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing author from "" to "Dave Morris"



---

archive/issue_comments_492667.json:
```json
{
    "body": "Changing branch from \"public/25688\" to \"public/25688r1\"",
    "created_at": "2021-06-28T05:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492667",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing branch from "public/25688" to "public/25688r1"



---

archive/issue_comments_492668.json:
```json
{
    "body": "Changing commit from \"e8ee3fc291a8d547459e89ad40f3cf0e7a953d93\" to \"73e975c28997f6662454b3b53dfe2cdebd22f410\"",
    "created_at": "2021-06-28T05:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492668",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing commit from "e8ee3fc291a8d547459e89ad40f3cf0e7a953d93" to "73e975c28997f6662454b3b53dfe2cdebd22f410"



---

archive/issue_comments_492669.json:
```json
{
    "body": "<a id='comment:4'></a>Rebased on the new #31585 that eliminates a merge conflict.\n\n---\nNew commits:",
    "created_at": "2021-06-28T05:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492669",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:4'></a>Rebased on the new #31585 that eliminates a merge conflict.

---
New commits:



---

archive/issue_comments_492670.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492670",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_492671.json:
```json
{
    "body": "<a id='comment:5'></a>Please rebase.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492671",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'></a>Please rebase.



---

archive/issue_comments_492672.json:
```json
{
    "body": "Changing branch from \"public/25688r1\" to \"public/25688r2\"",
    "created_at": "2021-07-25T02:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492672",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing branch from "public/25688r1" to "public/25688r2"



---

archive/issue_comments_492673.json:
```json
{
    "body": "Changing dependencies from \"#31585\" to \"\"",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492673",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing dependencies from "#31585" to ""



---

archive/issue_comments_492674.json:
```json
{
    "body": "Changing commit from \"73e975c28997f6662454b3b53dfe2cdebd22f410\" to \"689e08f9393ac651c420546b0e63efbb1220156b\"",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492674",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing commit from "73e975c28997f6662454b3b53dfe2cdebd22f410" to "689e08f9393ac651c420546b0e63efbb1220156b"



---

archive/issue_comments_492675.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).\n\n---\nNew commits:",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492675",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:7'></a>Thanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).

---
New commits:



---

archive/issue_comments_492676.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492676",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_064308.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64308"
}
```



---

archive/issue_events_064309.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64309"
}
```



---

archive/issue_events_064310.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64310"
}
```



---

archive/issue_events_064311.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64311"
}
```



---

archive/issue_comments_492677.json:
```json
{
    "body": "<a id='comment:10'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492677",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_492678.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-08T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492678",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_492679.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-03-08T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492679",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_492680.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks!",
    "created_at": "2022-03-08T06:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492680",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:12'></a>Thanks!



---

archive/issue_comments_492681.json:
```json
{
    "body": "Changing branch from \"public/25688r2\" to \"689e08f9393ac651c420546b0e63efbb1220156b\"",
    "created_at": "2022-03-09T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492681",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/25688r2" to "689e08f9393ac651c420546b0e63efbb1220156b"



---

archive/issue_events_064312.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-09T23:37:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25688#event-64312"
}
```



---

archive/issue_comments_492682.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-09T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25688#issuecomment-492682",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
