# Issue 25349: small improvements to generic polynomials

archive/issues_025112.json:
```json
{
    "assignees": [],
    "body": "\n\nBranch/Commit: **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Marc Mezzarobba**\n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25349_\n\n",
    "closed_at": "2018-06-14T07:41:09Z",
    "created_at": "2018-05-11T19:22:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "small improvements to generic polynomials",
    "type": "issue",
    "updated_at": "2018-06-14T07:41:09Z",
    "url": "https://github.com/sagemath/sage/issues/25349",
    "user": "https://github.com/mezzarobba"
}
```


Branch/Commit: **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**

Reviewer: **Travis Scrimshaw**

Author: **Marc Mezzarobba**

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/25349_





---

archive/issue_events_350698.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-05-11T19:22:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350698"
}
```



---

archive/issue_events_350699.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-05-11T19:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350699"
}
```



---

archive/issue_events_350700.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-05-11T19:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350700"
}
```



---

archive/issue_events_350701.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-05-11T19:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350701"
}
```



---

archive/issue_comments_387689.json:
```json
{
    "body": "Branch: **[u/mmezzarobba/gen_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/gen_poly)**",
    "created_at": "2018-05-11T19:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387689",
    "user": "https://github.com/mezzarobba"
}
```

Branch: **[u/mmezzarobba/gen_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/gen_poly)**



---

archive/issue_comments_387690.json:
```json
{
    "body": "Commit: **[`910dbea`](https://github.com/sagemath/sagetrac-mirror/commit/910dbea1e9cc8a766c75f56c94efb9005743dae5)**",
    "created_at": "2018-05-11T19:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387690",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[`910dbea`](https://github.com/sagemath/sagetrac-mirror/commit/910dbea1e9cc8a766c75f56c94efb9005743dae5)**



---

archive/issue_comments_387691.json:
```json
{
    "body": "Dependencies: **#25346**",
    "created_at": "2018-05-11T19:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387691",
    "user": "https://github.com/mezzarobba"
}
```

Dependencies: **#25346**



---

archive/issue_comments_387692.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSee also #25350.",
    "created_at": "2018-05-11T19:30:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387692",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:3" align="right">comment:3</div>

See also #25350.



---

archive/issue_events_350702.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-05-12T06:38:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350702"
}
```



---

archive/issue_comments_387693.json:
```json
{
    "body": "Changed commit from **[`910dbea`](https://github.com/sagemath/sagetrac-mirror/commit/910dbea1e9cc8a766c75f56c94efb9005743dae5)** to **[`82f00ff`](https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087)**",
    "created_at": "2018-05-12T13:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`910dbea`](https://github.com/sagemath/sagetrac-mirror/commit/910dbea1e9cc8a766c75f56c94efb9005743dae5)** to **[`82f00ff`](https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087)**



---

archive/issue_comments_387694.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087\"><code>82f00ff</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-05-12T13:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387694",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087"><code>82f00ff</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_comments_387695.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0be91f92a7f755a6233caa49cb5f8e6aeb89ca7\"><code>f0be91f</code></a></td><td><code>Polynomial: trivial cases of some costly generic methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71\"><code>878c391</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-05-12T15:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0be91f92a7f755a6233caa49cb5f8e6aeb89ca7"><code>f0be91f</code></a></td><td><code>Polynomial: trivial cases of some costly generic methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71"><code>878c391</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_comments_387696.json:
```json
{
    "body": "Changed commit from **[`82f00ff`](https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087)** to **[`878c391`](https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71)**",
    "created_at": "2018-05-12T15:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82f00ff`](https://github.com/sagemath/sagetrac-mirror/commit/82f00ff209ec273b41b2c6e9cfff47fc3ddab087)** to **[`878c391`](https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71)**



---

archive/issue_comments_387697.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe dependency now has positive_review.",
    "created_at": "2018-06-01T15:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387697",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:7" align="right">comment:7</div>

The dependency now has positive_review.



---

archive/issue_events_350703.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-01T15:07:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "title_is": "more small improvements to generic polynomials",
    "title_was": "more improvements to generic polynomials",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350703"
}
```



---

archive/issue_comments_387698.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2125bc9f12745455aa6168db080d2820d67aef45\"><code>2125bc9</code></a></td><td><code>Polynomial: trivial cases of some costly generic methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e\"><code>58bf7e2</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-06-10T09:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387698",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2125bc9f12745455aa6168db080d2820d67aef45"><code>2125bc9</code></a></td><td><code>Polynomial: trivial cases of some costly generic methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e"><code>58bf7e2</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_comments_387699.json:
```json
{
    "body": "Changed commit from **[`878c391`](https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71)** to **[`58bf7e2`](https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e)**",
    "created_at": "2018-06-10T09:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`878c391`](https://github.com/sagemath/sagetrac-mirror/commit/878c3914ec363e8927aec6c473b8b65904e7ca71)** to **[`58bf7e2`](https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e)**



---

archive/issue_comments_387700.json:
```json
{
    "body": "Changed dependencies from **#25346** to none",
    "created_at": "2018-06-10T09:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387700",
    "user": "https://github.com/mezzarobba"
}
```

Changed dependencies from **#25346** to none



---

archive/issue_events_350704.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-10T09:18:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "title_is": "small improvements to generic polynomials",
    "title_was": "more small improvements to generic polynomials",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350704"
}
```



---

archive/issue_comments_387701.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSo the only change I am not sure about is this one:\n\n```diff\n-        zero = self._parent.base_ring().zero()\n-        l = self.list()\n-        return [i for i in range(len(l)) if l[i] != zero]\n+        return [i for i, c in enumerate(self) if c]\n```\nsince `self.list()` returns a list, which we can `cdef list l` and then `cdef int i` to get C-level list lookups instead of going through a Python iterator. Also, we can pass the `copy=False` option. I know there are polynomial implementations where calling `list` always makes a (Sage version) copy of the data. Probably the way to choose for this is look at timings and the generated C code.",
    "created_at": "2018-06-12T03:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387701",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

So the only change I am not sure about is this one:

```diff
-        zero = self._parent.base_ring().zero()
-        l = self.list()
-        return [i for i in range(len(l)) if l[i] != zero]
+        return [i for i, c in enumerate(self) if c]
```
since `self.list()` returns a list, which we can `cdef list l` and then `cdef int i` to get C-level list lookups instead of going through a Python iterator. Also, we can pass the `copy=False` option. I know there are polynomial implementations where calling `list` always makes a (Sage version) copy of the data. Probably the way to choose for this is look at timings and the generated C code.



---

archive/issue_comments_387702.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240\"><code>cbdd60a</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-06-12T08:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387702",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240"><code>cbdd60a</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_comments_387703.json:
```json
{
    "body": "Changed commit from **[`58bf7e2`](https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e)** to **[`cbdd60a`](https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240)**",
    "created_at": "2018-06-12T08:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58bf7e2`](https://github.com/sagemath/sagetrac-mirror/commit/58bf7e2289db55f278a8111da8787aecbcfc9e4e)** to **[`cbdd60a`](https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240)**



---

archive/issue_comments_387704.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nYou are right, the following variant leads to nicer C code:\n\n```\n        cdef size_t i\n        return [i for i, c in enumerate(self.list(copy=False)) if c]\n```\n\n```\n  __pyx_t_3 = ((struct __pyx_vtabstruct_4sage_5rings_10polynomial_18polynomial_element_Polynomial *)__pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)->list(__pyx_v_self, 0, &__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_3);\n  __pyx_t_5 = __pyx_t_3; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;\n  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;\n  for (;;) {\n    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;\n    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS\n    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 5554, __pyx_L1_error)\n    #else\n    __pyx_t_3 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)\n    __Pyx_GOTREF(__pyx_t_3);\n    #endif\n    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_3);\n    __pyx_t_3 = 0;\n    __pyx_v_i = __pyx_t_2;\n    __pyx_t_2 = (__pyx_t_2 + 1);\n    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_c); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 5554, __pyx_L1_error)\n    if (__pyx_t_7) {\n      __pyx_t_3 = __Pyx_PyInt_FromSize_t(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)\n      __Pyx_GOTREF(__pyx_t_3);\n      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_3))) __PYX_ERR(0, 5554, __pyx_L1_error)\n      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;\n    }\n  }\n```",
    "created_at": "2018-06-12T08:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387704",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:12" align="right">comment:12</div>

You are right, the following variant leads to nicer C code:

```
        cdef size_t i
        return [i for i, c in enumerate(self.list(copy=False)) if c]
```

```
  __pyx_t_3 = ((struct __pyx_vtabstruct_4sage_5rings_10polynomial_18polynomial_element_Polynomial *)__pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)->list(__pyx_v_self, 0, &__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __pyx_t_3; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 5554, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_v_i = __pyx_t_2;
    __pyx_t_2 = (__pyx_t_2 + 1);
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_c); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 5554, __pyx_L1_error)
    if (__pyx_t_7) {
      __pyx_t_3 = __Pyx_PyInt_FromSize_t(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_3))) __PYX_ERR(0, 5554, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
  }
```



---

archive/issue_comments_387705.json:
```json
{
    "body": "Changed commit from **[`cbdd60a`](https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240)** to **[`6027d39`](https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c)**",
    "created_at": "2018-06-12T08:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cbdd60a`](https://github.com/sagemath/sagetrac-mirror/commit/cbdd60a6eabe06b579533af9c588312f9c2b7240)** to **[`6027d39`](https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c)**



---

archive/issue_comments_387706.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c\"><code>6027d39</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-06-12T08:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c"><code>6027d39</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_comments_387707.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-06-12T11:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387707",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_387708.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI think it is better to use `Py_ssize_t` instead of `size_t` (at least, this is what is used throughout Sage's cython codebase). Once changed, you can set a positive review on my behalf.\n\nAt least before we were calling `list`, so it will be no worse than before. Plus those implementations that do return a copy even for `self.list(copy=False)` probably should have their own custom version of `exponents` anyways.",
    "created_at": "2018-06-12T11:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387708",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

I think it is better to use `Py_ssize_t` instead of `size_t` (at least, this is what is used throughout Sage's cython codebase). Once changed, you can set a positive review on my behalf.

At least before we were calling `list`, so it will be no worse than before. Plus those implementations that do return a copy even for `self.list(copy=False)` probably should have their own custom version of `exponents` anyways.



---

archive/issue_comments_387709.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYou are right, of course. Thanks!",
    "created_at": "2018-06-12T14:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387709",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:16" align="right">comment:16</div>

You are right, of course. Thanks!



---

archive/issue_comments_387710.json:
```json
{
    "body": "Changed commit from **[`6027d39`](https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c)** to **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**",
    "created_at": "2018-06-12T14:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6027d39`](https://github.com/sagemath/sagetrac-mirror/commit/6027d3926e6b43815375d4996f62976363a0ee5c)** to **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**



---

archive/issue_comments_387711.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283\"><code>15c57d6</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>\n",
    "created_at": "2018-06-12T14:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387711",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283"><code>15c57d6</code></a></td><td><code>small fix + speed improvement in generic polynomial exponents()</code></td></tr></table>




---

archive/issue_events_350705.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-12T14:04:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350705"
}
```



---

archive/issue_events_350706.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-12T14:04:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350706"
}
```



---

archive/issue_events_350707.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-14T07:41:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350707"
}
```



---

archive/issue_events_350708.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ddf034b32ea7d5ef03e23286d4b2bb484e61f731",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-14T07:41:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25349#event-350708"
}
```



---

archive/issue_comments_387712.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/gen_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/gen_poly)** to **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**",
    "created_at": "2018-06-14T07:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25349#issuecomment-387712",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/gen_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/gen_poly)** to **[`15c57d6`](https://github.com/sagemath/sagetrac-mirror/commit/15c57d69c8eb5e4f48f03a76d3840ee0fa380283)**
