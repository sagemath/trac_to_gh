# Issue 25363: Add '--simple-prompt' argument for sage

archive/issues_025126.json:
```json
{
    "assignees": [],
    "body": "IPython accepts a `--simple-prompt` argument, changing the input handler from `prompt_toolkit` to `raw_input`.\n\nIt would be very useful if Sage could pass this argument to IPython,\nas it does with `-gthread`, `-qthread`, `-q4thread`, `-wthread` and `-pylab`,\nbecause in Cantor, a front-end program for mathematical packages,\nthe Sage backend is now broken and that would fix it.\n\n\n\nCC:  @slel @embray @jdemeyer @EmmanuelCharpentier @dimpase\n\nKeywords: **Cantor, ipython**\n\nBranch/Commit: **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **John Palmieri**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25363_\n\n",
    "closed_at": "2020-08-14T22:23:53Z",
    "created_at": "2018-05-14T16:16:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add '--simple-prompt' argument for sage",
    "type": "issue",
    "updated_at": "2020-08-14T22:23:53Z",
    "url": "https://github.com/sagemath/sage/issues/25363",
    "user": "https://github.com/mmmm1998"
}
```
IPython accepts a `--simple-prompt` argument, changing the input handler from `prompt_toolkit` to `raw_input`.

It would be very useful if Sage could pass this argument to IPython,
as it does with `-gthread`, `-qthread`, `-q4thread`, `-wthread` and `-pylab`,
because in Cantor, a front-end program for mathematical packages,
the Sage backend is now broken and that would fix it.



CC:  @slel @embray @jdemeyer @EmmanuelCharpentier @dimpase

Keywords: **Cantor, ipython**

Branch/Commit: **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**

Reviewer: **Frédéric Chapoton**

Author: **John Palmieri**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/25363_





---

archive/issue_events_350922.json:
```json
{
    "actor": "https://github.com/mmmm1998",
    "created_at": "2018-05-14T16:16:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350922"
}
```



---

archive/issue_events_350923.json:
```json
{
    "actor": "https://github.com/mmmm1998",
    "created_at": "2018-05-14T16:16:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350923"
}
```



---

archive/issue_events_350924.json:
```json
{
    "actor": "https://github.com/mmmm1998",
    "created_at": "2018-05-14T16:16:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350924"
}
```



---

archive/issue_comments_388001.json:
```json
{
    "body": "Attachment: **[0001-Add-new-option-for-ipython-simple-prompt.patch.gz](https://github.com/sagemath/sage/files/ticket25363/0001-Add-new-option-for-ipython-simple-prompt.patch.gz)**\n\nFormat patch",
    "created_at": "2018-05-14T16:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388001",
    "user": "https://github.com/mmmm1998"
}
```

Attachment: **[0001-Add-new-option-for-ipython-simple-prompt.patch.gz](https://github.com/sagemath/sage/files/ticket25363/0001-Add-new-option-for-ipython-simple-prompt.patch.gz)**

Format patch



---

archive/issue_comments_388002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-IPython accept --simple-prompt argument, that change prompt_toolkit to raw_input for input handler.\n+IPython accept --simple-prompt argument, that changes prompt_toolkit to raw_input for input handler.\n \n It very usufull, if sage could pass this argument to ipython, likewise -gthread, -qthread, -q4thread, -wthread and -pylab arguments, because there is program Cantor - frontend for mathematical packages and this feature will fix broken Sage backend for Cantor.\n \n-I could attach format patch with my suggestion for changing the sage, if it needed.\n+I have attached format patch with my suggestion for changing the sage.\n \n P.S. I am not too familiar with trac, so if I have created ticket incorrect or I even shouldn't to create a ticket for this suggestion, please, correct me.\n``````\n",
    "created_at": "2018-05-14T16:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388002",
    "user": "https://github.com/mmmm1998"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-IPython accept --simple-prompt argument, that change prompt_toolkit to raw_input for input handler.
+IPython accept --simple-prompt argument, that changes prompt_toolkit to raw_input for input handler.
 
 It very usufull, if sage could pass this argument to ipython, likewise -gthread, -qthread, -q4thread, -wthread and -pylab arguments, because there is program Cantor - frontend for mathematical packages and this feature will fix broken Sage backend for Cantor.
 
-I could attach format patch with my suggestion for changing the sage, if it needed.
+I have attached format patch with my suggestion for changing the sage.
 
 P.S. I am not too familiar with trac, so if I have created ticket incorrect or I even shouldn't to create a ticket for this suggestion, please, correct me.
``````




---

archive/issue_comments_388003.json:
```json
{
    "body": "Branch: **[public/25363](https://github.com/sagemath/sagetrac-mirror/tree/public/25363)**",
    "created_at": "2018-05-14T16:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388003",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/25363](https://github.com/sagemath/sagetrac-mirror/tree/public/25363)**



---

archive/issue_comments_388004.json:
```json
{
    "body": "Commit: **[`bcf0ff0`](https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e)**",
    "created_at": "2018-05-14T16:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388004",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`bcf0ff0`](https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e)**



---

archive/issue_comments_388005.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI have made a proper git branch.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e\">bcf0ff0</a></td><td><code>ipython simple prompt option</code></td></tr></table>\n",
    "created_at": "2018-05-14T16:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388005",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

I have made a proper git branch.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e">bcf0ff0</a></td><td><code>ipython simple prompt option</code></td></tr></table>




---

archive/issue_comments_388006.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-05-14T16:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388006",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_events_350925.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-14T16:48:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350925"
}
```



---

archive/issue_comments_388007.json:
```json
{
    "body": "Changed keywords from **ipython** to **Cantor, ipython**",
    "created_at": "2018-05-15T14:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388007",
    "user": "https://github.com/slel"
}
```

Changed keywords from **ipython** to **Cantor, ipython**



---

archive/issue_events_350926.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-05-15T14:09:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350926"
}
```



---

archive/issue_comments_388008.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt would be nice to fix the Sage backend for Cantor!",
    "created_at": "2018-05-15T14:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388008",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

It would be nice to fix the Sage backend for Cantor!



---

archive/issue_comments_388009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,11 @@\n-IPython accept --simple-prompt argument, that changes prompt_toolkit to raw_input for input handler.\n+IPython accepts a `--simple-prompt` argument, changing the input handler from `prompt_toolkit` to `raw_input`.\n \n-It very usufull, if sage could pass this argument to ipython, likewise -gthread, -qthread, -q4thread, -wthread and -pylab arguments, because there is program Cantor - frontend for mathematical packages and this feature will fix broken Sage backend for Cantor.\n+It would be very useful if Sage could pass this argument to IPython,\n+as it does with `-gthread`, `-qthread`, `-q4thread`, `-wthread` and `-pylab`,\n+because in Cantor, a front-end program for mathematical packages,\n+the Sage backend is now broken and that would fix it.\n \n-I have attached format patch with my suggestion for changing the sage.\n+Attached is a suggested patch to implement this change.\n \n-P.S. I am not too familiar with trac, so if I have created ticket incorrect or I even shouldn't to create a ticket for this suggestion, please, correct me.\n+P.S. I am not too familiar with Trac, so if I have created ticket incorrect\n+or I even shouldn't to create a ticket for this suggestion, please, correct me.\n``````\n",
    "created_at": "2018-05-15T14:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388009",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,11 @@
-IPython accept --simple-prompt argument, that changes prompt_toolkit to raw_input for input handler.
+IPython accepts a `--simple-prompt` argument, changing the input handler from `prompt_toolkit` to `raw_input`.
 
-It very usufull, if sage could pass this argument to ipython, likewise -gthread, -qthread, -q4thread, -wthread and -pylab arguments, because there is program Cantor - frontend for mathematical packages and this feature will fix broken Sage backend for Cantor.
+It would be very useful if Sage could pass this argument to IPython,
+as it does with `-gthread`, `-qthread`, `-q4thread`, `-wthread` and `-pylab`,
+because in Cantor, a front-end program for mathematical packages,
+the Sage backend is now broken and that would fix it.
 
-I have attached format patch with my suggestion for changing the sage.
+Attached is a suggested patch to implement this change.
 
-P.S. I am not too familiar with trac, so if I have created ticket incorrect or I even shouldn't to create a ticket for this suggestion, please, correct me.
+P.S. I am not too familiar with Trac, so if I have created ticket incorrect
+or I even shouldn't to create a ticket for this suggestion, please, correct me.
``````




---

archive/issue_comments_388010.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Nikita Sirgienko, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-05-15T14:11:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388010",
    "user": "https://github.com/slel"
}
```

Changed author from **Frédéric Chapoton** to **Nikita Sirgienko, Frédéric Chapoton**



---

archive/issue_comments_388011.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nreview, somebody ?",
    "created_at": "2018-06-26T10:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388011",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

review, somebody ?



---

archive/issue_events_350927.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-26T11:52:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350927"
}
```



---

archive/issue_events_350928.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-06-26T11:52:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350928"
}
```



---

archive/issue_comments_388012.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\n$ ./sage --simple-prompt\n/home/marc/co/sage/src/bin/sage: line 1067: [: missing `]'\n```",
    "created_at": "2018-06-26T11:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388012",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:6" align="right">comment:6</div>


```
$ ./sage --simple-prompt
/home/marc/co/sage/src/bin/sage: line 1067: [: missing `]'
```



---

archive/issue_comments_388013.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1a76766b026be782a53cfee00ee6ca3328edf82\">e1a7676</a></td><td><code>Merge branch 'public/25363' in 8.3.b7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f\">ecf408e</a></td><td><code>fix</code></td></tr></table>\n",
    "created_at": "2018-06-26T11:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388013",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1a76766b026be782a53cfee00ee6ca3328edf82">e1a7676</a></td><td><code>Merge branch 'public/25363' in 8.3.b7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f">ecf408e</a></td><td><code>fix</code></td></tr></table>




---

archive/issue_comments_388014.json:
```json
{
    "body": "Changed commit from **[`bcf0ff0`](https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e)** to **[`ecf408e`](https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f)**",
    "created_at": "2018-06-26T11:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388014",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bcf0ff0`](https://github.com/sagemath/sagetrac-mirror/commit/bcf0ff05f6140a0691967b3759304bcaae12353e)** to **[`ecf408e`](https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f)**



---

archive/issue_events_350929.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T11:54:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350929"
}
```



---

archive/issue_events_350930.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T11:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350930"
}
```



---

archive/issue_comments_388015.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\noops, fixed",
    "created_at": "2018-06-26T11:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388015",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

oops, fixed



---

archive/issue_comments_388016.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis seems fine in principle, though, I would call it just `-simple-prompt` with a single hyphen since, although inconsistent with IPython, is at least consistent with how the existing arguments are spelled in Sage (which itself is a somewhat unfortunate historical convention).  I would actually like to completely redo Sage's CLI, but priorities priorities...\n\nNow, as for this change, other than the single hyphen thing this is fine since it's consistent with what's already done.  But I hadn't looked at this bit of code before and I find it rather suspicious in the first place.  I don't like that there's some hard-coded list of arguments that happen to be arguments recognized as belonging to IPython in order to determine that the user is trying to invoke an interactive prompt, because as you've pointed out here it does not scale--it's just an arbitrary subset of IPython arguments, and does not inherit new IPython arguments or additional ones that one might want to use.  Let me take a closer look at this problem and think about it a bit...",
    "created_at": "2018-06-26T12:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388016",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

This seems fine in principle, though, I would call it just `-simple-prompt` with a single hyphen since, although inconsistent with IPython, is at least consistent with how the existing arguments are spelled in Sage (which itself is a somewhat unfortunate historical convention).  I would actually like to completely redo Sage's CLI, but priorities priorities...

Now, as for this change, other than the single hyphen thing this is fine since it's consistent with what's already done.  But I hadn't looked at this bit of code before and I find it rather suspicious in the first place.  I don't like that there's some hard-coded list of arguments that happen to be arguments recognized as belonging to IPython in order to determine that the user is trying to invoke an interactive prompt, because as you've pointed out here it does not scale--it's just an arbitrary subset of IPython arguments, and does not inherit new IPython arguments or additional ones that one might want to use.  Let me take a closer look at this problem and think about it a bit...



---

archive/issue_comments_388017.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe `--simple-prompt` option now works, but this does not seem to be enough to fix the Sage backend in Cantor. (On my system, the backend now starts, but it still fails to evaluate expressions.)",
    "created_at": "2018-06-26T12:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388017",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:10" align="right">comment:10</div>

The `--simple-prompt` option now works, but this does not seem to be enough to fix the Sage backend in Cantor. (On my system, the backend now starts, but it still fails to evaluate expressions.)



---

archive/issue_comments_388018.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIn fact, with the exception of `--pylab` (which itself is deprecated) most of those options don't work anymore:\n\n```\n$ ./sage -gthread\n...\n[SageTerminalApp] CRITICAL | Unrecognized flag: '-gthread'\n```",
    "created_at": "2018-06-26T12:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388018",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

In fact, with the exception of `--pylab` (which itself is deprecated) most of those options don't work anymore:

```
$ ./sage -gthread
...
[SageTerminalApp] CRITICAL | Unrecognized flag: '-gthread'
```



---

archive/issue_comments_388019.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHow does the Sage backend in Cantor work?  Is it like, pexpect-based or something?  I would suggest that it not be.  Sage is, ultimately, a Python library, so there's no need to use it through Sage's interactive prompt, in order to pass input and receive output.  That said, I have no idea how Cantor's backends work in general.",
    "created_at": "2018-06-26T12:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388019",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

How does the Sage backend in Cantor work?  Is it like, pexpect-based or something?  I would suggest that it not be.  Sage is, ultimately, a Python library, so there's no need to use it through Sage's interactive prompt, in order to pass input and receive output.  That said, I have no idea how Cantor's backends work in general.



---

archive/issue_comments_388020.json:
```json
{
    "body": "Changed branch from **[public/25363](https://github.com/sagemath/sagetrac-mirror/tree/public/25363)** to **[u/embray/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-25363)**",
    "created_at": "2018-06-26T13:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388020",
    "user": "https://github.com/embray"
}
```

Changed branch from **[public/25363](https://github.com/sagemath/sagetrac-mirror/tree/public/25363)** to **[u/embray/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-25363)**



---

archive/issue_comments_388021.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis preserves the existing (still rather kludgy) CLI semantics, while not hard-coding a limited subset of IPython CLI options.  This means you can also pass `--simple-prompt` which works as expected.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb9b1a7c42e21b926e8546df179d1fff4ff1380\">0bb9b1a</a></td><td><code>Python 3 fixes for sage.misc.decorators.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19f3d118f4881914ec2cd3191c3bc5b3137ac4b7\">19f3d11</a></td><td><code>dont' try to make sage_wraps work on classes at all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f61a71b8b899cec2a4477f171e5135540b7140f\">1f61a71</a></td><td><code>for compatibility with Python 3's functools.wraps, set `__wrapped__` attribute on the wrapper function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44ee2ec1bf1c6cd3e1d4654a2ad3696fe3376b2b\">44ee2ec</a></td><td><code>clean up the infix_operator docstrings a bit to demonstrate actual use as a decorator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49f44efc4f91ab6f2aed952511296c88877ad55c\">49f44ef</a></td><td><code>slight changes to (still kludgy) command line handling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a\">237cbcb</a></td><td><code>Also update the docs accordingly</code></td></tr></table>\n",
    "created_at": "2018-06-26T13:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388021",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

This preserves the existing (still rather kludgy) CLI semantics, while not hard-coding a limited subset of IPython CLI options.  This means you can also pass `--simple-prompt` which works as expected.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb9b1a7c42e21b926e8546df179d1fff4ff1380">0bb9b1a</a></td><td><code>Python 3 fixes for sage.misc.decorators.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19f3d118f4881914ec2cd3191c3bc5b3137ac4b7">19f3d11</a></td><td><code>dont' try to make sage_wraps work on classes at all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f61a71b8b899cec2a4477f171e5135540b7140f">1f61a71</a></td><td><code>for compatibility with Python 3's functools.wraps, set `__wrapped__` attribute on the wrapper function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44ee2ec1bf1c6cd3e1d4654a2ad3696fe3376b2b">44ee2ec</a></td><td><code>clean up the infix_operator docstrings a bit to demonstrate actual use as a decorator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49f44efc4f91ab6f2aed952511296c88877ad55c">49f44ef</a></td><td><code>slight changes to (still kludgy) command line handling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a">237cbcb</a></td><td><code>Also update the docs accordingly</code></td></tr></table>




---

archive/issue_comments_388022.json:
```json
{
    "body": "Changed commit from **[`ecf408e`](https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f)** to **[`237cbcb`](https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a)**",
    "created_at": "2018-06-26T13:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388022",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`ecf408e`](https://github.com/sagemath/sagetrac-mirror/commit/ecf408e95c4c19f7d947609d111268fd7f49d20f)** to **[`237cbcb`](https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a)**



---

archive/issue_comments_388023.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOops, based on wrong branch.",
    "created_at": "2018-06-26T13:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388023",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">comment:14</div>

Oops, based on wrong branch.



---

archive/issue_comments_388024.json:
```json
{
    "body": "Changed commit from **[`237cbcb`](https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a)** to **[`ed2d023`](https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b)**",
    "created_at": "2018-06-26T13:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388024",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`237cbcb`](https://github.com/sagemath/sagetrac-mirror/commit/237cbcbb7afc39b2336646255aae22c3182c905a)** to **[`ed2d023`](https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b)**



---

archive/issue_comments_388025.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a873f381f34afb607b624104ac7473e2a2026d1d\">a873f38</a></td><td><code>slight changes to (still kludgy) command line handling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b\">ed2d023</a></td><td><code>Also update the docs accordingly</code></td></tr></table>\n",
    "created_at": "2018-06-26T13:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a873f381f34afb607b624104ac7473e2a2026d1d">a873f38</a></td><td><code>slight changes to (still kludgy) command line handling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b">ed2d023</a></td><td><code>Also update the docs accordingly</code></td></tr></table>




---

archive/issue_comments_388026.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nRebased on develop.",
    "created_at": "2018-06-26T13:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388026",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

Rebased on develop.



---

archive/issue_comments_388027.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI forgot to mention, this also drops the existing support for passing an `.spkg` file as the first argument.  Legacy spkgs are deprecated anyways, and AFAICT it's not actually explicitly documented anywhere that you can do that in the first place.  Even the [docs](http://doc.sagemath.org/html/en/developer/packaging_old_spkgs.html) for old-style spkgs mention running `sage -p foo.spkg` but not `sage foo.spkg`.  So I think this is justifiable.",
    "created_at": "2018-06-26T13:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388027",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

I forgot to mention, this also drops the existing support for passing an `.spkg` file as the first argument.  Legacy spkgs are deprecated anyways, and AFAICT it's not actually explicitly documented anywhere that you can do that in the first place.  Even the [docs](http://doc.sagemath.org/html/en/developer/packaging_old_spkgs.html) for old-style spkgs mention running `sage -p foo.spkg` but not `sage foo.spkg`.  So I think this is justifiable.



---

archive/issue_comments_388028.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIndeed, better this way. Looks good to me.",
    "created_at": "2018-06-26T14:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388028",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

Indeed, better this way. Looks good to me.



---

archive/issue_events_350931.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T14:30:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350931"
}
```



---

archive/issue_events_350932.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T14:30:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350932"
}
```



---

archive/issue_comments_388029.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-06-26T14:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388029",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_388030.json:
```json
{
    "body": "Changed author from **Nikita Sirgienko, Fr\u00e9d\u00e9ric Chapoton** to **Erik Bray**",
    "created_at": "2018-06-26T14:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388030",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Nikita Sirgienko, Frédéric Chapoton** to **Erik Bray**



---

archive/issue_comments_388031.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@embray](#comment:12):\n> How does the Sage backend in Cantor work?  Is it like, pexpect-based or something?  I would suggest that it not be.  Sage is, ultimately, a Python library, so there's no need to use it through Sage's interactive prompt, in order to pass input and receive output.  That said, I have no idea how Cantor's backends work in general.\n\nNow, Sage backend use KPtyProcess. Common in Cantor we use QProcess or C API, but in Sage case we have bash script, which run sage program by using `exac`, and, as I know, QProcess don't work with bash `exac`, so it's just a necessity.",
    "created_at": "2018-06-26T17:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388031",
    "user": "https://github.com/mmmm1998"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@embray](#comment:12):
> How does the Sage backend in Cantor work?  Is it like, pexpect-based or something?  I would suggest that it not be.  Sage is, ultimately, a Python library, so there's no need to use it through Sage's interactive prompt, in order to pass input and receive output.  That said, I have no idea how Cantor's backends work in general.

Now, Sage backend use KPtyProcess. Common in Cantor we use QProcess or C API, but in Sage case we have bash script, which run sage program by using `exac`, and, as I know, QProcess don't work with bash `exac`, so it's just a necessity.



---

archive/issue_comments_388032.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI wouldn't go through the `sage` shell script, but rather directly through a Python interpreter.  You just have to make sure to pre-parse the input to convert it from Sage's Python syntax superset to pure Python.  The `sage-preparse` script in `src/bin/` demonstrates how Sage does this for entire files, but it can also be done for individual expressions and statements before passing it along to the normal Python interpreter.  If I have more time later perhaps I can look at the code for the Cantor backend.",
    "created_at": "2018-06-27T14:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388032",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">comment:20</div>

I wouldn't go through the `sage` shell script, but rather directly through a Python interpreter.  You just have to make sure to pre-parse the input to convert it from Sage's Python syntax superset to pure Python.  The `sage-preparse` script in `src/bin/` demonstrates how Sage does this for entire files, but it can also be done for individual expressions and statements before passing it along to the normal Python interpreter.  If I have more time later perhaps I can look at the code for the Cantor backend.



---

archive/issue_comments_388033.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'm curious how things like plots and images works though.",
    "created_at": "2018-06-27T14:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388033",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

I'm curious how things like plots and images works though.



---

archive/issue_events_350933.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-01T11:56:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350933"
}
```



---

archive/issue_events_350934.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-01T11:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350934"
}
```



---

archive/issue_comments_388034.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSee patchbot",
    "created_at": "2018-07-08T10:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388034",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

See patchbot



---

archive/issue_events_350935.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-08T10:46:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350935"
}
```



---

archive/issue_events_350936.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-08T10:46:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350936"
}
```



---

archive/issue_comments_388035.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThis is a little tricky to get just right.  While I believe it's desirable to be able to pass any IPython option on to Sage, we can't easily \"pre-parse\" those options without digging directly into IPython's command-line parsing.  This will be a bit easier to deal with if/when I redo the `sage` CLI, which does badly need to be modernized.\n\nIn the meantime this still has the \"correct\" behavior, but it causes Sage to \"partially\" start up (it displays the banner and everything) and then outputs `Unrecognized flag --zzfoobar` preceded by the entire *ipython* help message, which would be confusing to users who don't necessarily understand that ipython is underlying the `sage` CLI.\n\nLet me see if I can do something a bit better in the meantime...",
    "created_at": "2018-07-09T09:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388035",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

This is a little tricky to get just right.  While I believe it's desirable to be able to pass any IPython option on to Sage, we can't easily "pre-parse" those options without digging directly into IPython's command-line parsing.  This will be a bit easier to deal with if/when I redo the `sage` CLI, which does badly need to be modernized.

In the meantime this still has the "correct" behavior, but it causes Sage to "partially" start up (it displays the banner and everything) and then outputs `Unrecognized flag --zzfoobar` preceded by the entire *ipython* help message, which would be confusing to users who don't necessarily understand that ipython is underlying the `sage` CLI.

Let me see if I can do something a bit better in the meantime...



---

archive/issue_comments_388036.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think it should be easy to reorganize `sage-ipython` a little bit, as well as enhance `sage.repl.interpreter` so that we can make command-line parsing happen earlier, and display `sage --help` instead of the `ipython --help`.  I would also add a `sage --help-ipython` as a shortcut to display all options accepted by the underlying IPython REPL.",
    "created_at": "2018-07-09T10:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388036",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

I think it should be easy to reorganize `sage-ipython` a little bit, as well as enhance `sage.repl.interpreter` so that we can make command-line parsing happen earlier, and display `sage --help` instead of the `ipython --help`.  I would also add a `sage --help-ipython` as a shortcut to display all options accepted by the underlying IPython REPL.



---

archive/issue_comments_388037.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388037",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

update milestone 8.3 -> 8.4



---

archive/issue_events_350937.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350937"
}
```



---

archive/issue_events_350938.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350938"
}
```



---

archive/issue_events_350939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T15:52:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350939"
}
```



---

archive/issue_events_350940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T15:52:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350940"
}
```



---

archive/issue_events_350941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T15:52:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350941"
}
```



---

archive/issue_events_350942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T15:52:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350942"
}
```



---

archive/issue_comments_388038.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI looked at the old commits, and I am concerned that they are too ambitious: they would pass any unrecognized command-line flag to ipython. Here is a more modest proposal:\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex ce325f5d03..bc192ab6e5 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -1045,7 +1045,7 @@ if [ \"$1\" = '-omega' -o \"$1\" = \"--omega\" ]; then\n     exec sage-omega \"$@\"\n fi\n \n-if [ \"$1\" = '-gthread' -o \"$1\" = '-qthread' -o \"$1\" = '-q4thread' -o \"$1\" = '-wthread' -o \"$1\" = '-pylab' ]; then\n+if [ \"$1\" = '-gthread' -o \"$1\" = '-qthread' -o \"$1\" = '-q4thread' -o \"$1\" = '-wthread' -o \"$1\" = '-pylab' -o \"$1\" = '--simple-prompt' -o \"$1\" = '-simple-prompt' ]; then\n     # Intentionally no \"shift\" here\n     interactive_sage \"$@\"\n fi\n```\n(The new option should also be listed in the help message.)",
    "created_at": "2020-08-11T16:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388038",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

I looked at the old commits, and I am concerned that they are too ambitious: they would pass any unrecognized command-line flag to ipython. Here is a more modest proposal:

```diff
diff --git a/src/bin/sage b/src/bin/sage
index ce325f5d03..bc192ab6e5 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -1045,7 +1045,7 @@ if [ "$1" = '-omega' -o "$1" = "--omega" ]; then
     exec sage-omega "$@"
 fi
 
-if [ "$1" = '-gthread' -o "$1" = '-qthread' -o "$1" = '-q4thread' -o "$1" = '-wthread' -o "$1" = '-pylab' ]; then
+if [ "$1" = '-gthread' -o "$1" = '-qthread' -o "$1" = '-q4thread' -o "$1" = '-wthread' -o "$1" = '-pylab' -o "$1" = '--simple-prompt' -o "$1" = '-simple-prompt' ]; then
     # Intentionally no "shift" here
     interactive_sage "$@"
 fi
```
(The new option should also be listed in the help message.)



---

archive/issue_comments_388039.json:
```json
{
    "body": "Changed branch from **[u/embray/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-25363)** to **[u/jhpalmieri/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket-25363)**",
    "created_at": "2020-08-11T16:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388039",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/embray/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-25363)** to **[u/jhpalmieri/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket-25363)**



---

archive/issue_comments_388040.json:
```json
{
    "body": "Changed author from **Erik Bray** to **John Palmieri**",
    "created_at": "2020-08-11T17:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388040",
    "user": "https://github.com/jhpalmieri"
}
```

Changed author from **Erik Bray** to **John Palmieri**



---

archive/issue_events_350943.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-08-11T17:00:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350943"
}
```



---

archive/issue_events_350944.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-08-11T17:00:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350944"
}
```



---

archive/issue_comments_388041.json:
```json
{
    "body": "Changed commit from **[`ed2d023`](https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b)** to **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**",
    "created_at": "2020-08-11T17:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388041",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`ed2d023`](https://github.com/sagemath/sagetrac-mirror/commit/ed2d0230108c325244e2121635a628d1fb1aad0b)** to **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**



---

archive/issue_comments_388042.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHere is an actual branch. The more ambitious changes can happen on another ticket, but we should get this done quickly to fix the emacs problem. (Any problem with emacs has a critical priority, at least.)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294\">3b8b2bd</a></td><td><code>trac 25363: implement \"sage --simple-prompt\"</code></td></tr></table>\n",
    "created_at": "2020-08-11T17:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388042",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">comment:30</div>

Here is an actual branch. The more ambitious changes can happen on another ticket, but we should get this done quickly to fix the emacs problem. (Any problem with emacs has a critical priority, at least.)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294">3b8b2bd</a></td><td><code>trac 25363: implement "sage --simple-prompt"</code></td></tr></table>




---

archive/issue_comments_388043.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThank you, John.\n\nNow, the question is to adopt your patch or to use it as a stopgap until more ambitious (and more reasoned) changes to Sage-s arguments implement long-awaited features can be (carefully) validated...",
    "created_at": "2020-08-11T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388043",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:31" align="right">comment:31</div>

Thank you, John.

Now, the question is to adopt your patch or to use it as a stopgap until more ambitious (and more reasoned) changes to Sage-s arguments implement long-awaited features can be (carefully) validated...



---

archive/issue_comments_388044.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jhpalmieri](#comment:30):\n> [ Snip... ] (Any problem with emacs has a critical priority, at least.)\n\nSeconded. With extreme energy...",
    "created_at": "2020-08-11T17:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388044",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jhpalmieri](#comment:30):
> [ Snip... ] (Any problem with emacs has a critical priority, at least.)

Seconded. With extreme energy...



---

archive/issue_comments_388045.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jhpalmieri](#comment:30):\n> Here is an actual branch. The more ambitious changes can happen on another ticket, but we should get this done quickly to fix the emacs problem. (Any problem with emacs has a critical priority, at least.)\n> \n> ---\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294\">3b8b2bd</a></td><td><code>trac 25363: implement \"sage --simple-prompt\"</code></td></tr></table>\n\nOK. It does what the label says : the `sage-shell-mode` session is functional again. Now running `ptestlong` by principle.\n\nStay tuned.",
    "created_at": "2020-08-11T17:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388045",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jhpalmieri](#comment:30):
> Here is an actual branch. The more ambitious changes can happen on another ticket, but we should get this done quickly to fix the emacs problem. (Any problem with emacs has a critical priority, at least.)
> 
> ---
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294">3b8b2bd</a></td><td><code>trac 25363: implement "sage --simple-prompt"</code></td></tr></table>

OK. It does what the label says : the `sage-shell-mode` session is functional again. Now running `ptestlong` by principle.

Stay tuned.



---

archive/issue_comments_388046.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@EmmanuelCharpentier](#comment:31):\n> Thank you, John.\n> \n> Now, the question is to adopt your patch or to use it as a stopgap until more ambitious (and more reasoned) changes to Sage-s arguments implement long-awaited features can be (carefully) validated...\n\nSee also #21.",
    "created_at": "2020-08-11T17:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388046",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@EmmanuelCharpentier](#comment:31):
> Thank you, John.
> 
> Now, the question is to adopt your patch or to use it as a stopgap until more ambitious (and more reasoned) changes to Sage-s arguments implement long-awaited features can be (carefully) validated...

See also #21.



---

archive/issue_comments_388047.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,4 @@\n because in Cantor, a front-end program for mathematical packages,\n the Sage backend is now broken and that would fix it.\n \n-Attached is a suggested patch to implement this change.\n \n-P.S. I am not too familiar with Trac, so if I have created ticket incorrect\n-or I even shouldn't to create a ticket for this suggestion, please, correct me.\n``````\n",
    "created_at": "2020-08-11T17:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388047",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,4 @@
 because in Cantor, a front-end program for mathematical packages,
 the Sage backend is now broken and that would fix it.
 
-Attached is a suggested patch to implement this change.
 
-P.S. I am not too familiar with Trac, so if I have created ticket incorrect
-or I even shouldn't to create a ticket for this suggestion, please, correct me.
``````




---

archive/issue_comments_388048.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jhpalmieri](#comment:34):\n\n> See also #21.\n\nBoth typesetting and plots work (tested in *simple* cases...).\n\nI'm currently scratching my head to figure how to patch `sage-shell-mode` (and possibly `ob-sagemath` to support Sage>9.2.beta8 without loosing support for Sage<=9.2.beta7 (9.2.beta8 itself is a lost cause...). While `ptestlong` runs (and heats the cosmos...).",
    "created_at": "2020-08-11T18:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388048",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jhpalmieri](#comment:34):

> See also #21.

Both typesetting and plots work (tested in *simple* cases...).

I'm currently scratching my head to figure how to patch `sage-shell-mode` (and possibly `ob-sagemath` to support Sage>9.2.beta8 without loosing support for Sage<=9.2.beta7 (9.2.beta8 itself is a lost cause...). While `ptestlong` runs (and heats the cosmos...).



---

archive/issue_comments_388049.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@EmmanuelCharpentier](#comment:36):\n> Replying to [@jhpalmieri](#comment:34):\n> \n> > See also #21.\n\n> \n> Both typesetting and plots work (tested in *simple* cases...).\n> \n> I'm currently scratching my head to figure how to patch `sage-shell-mode` (and possibly `ob-sagemath` to support Sage>9.2.beta8 without loosing support for Sage<=9.2.beta7 (9.2.beta8 itself is a lost cause...). While `ptestlong` runs (and heats the cosmos...).\n\nHowever, `quit()` is no longer enough to close Sage : `emacs` hangs after printing `Process Sage interrompre` two lines below the `Exiting Sage (CPU time 0m12.27s, Wall time 20m30.50s).` message.\n\nBack to the old drawing board...",
    "created_at": "2020-08-11T18:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388049",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@EmmanuelCharpentier](#comment:36):
> Replying to [@jhpalmieri](#comment:34):
> 
> > See also #21.

> 
> Both typesetting and plots work (tested in *simple* cases...).
> 
> I'm currently scratching my head to figure how to patch `sage-shell-mode` (and possibly `ob-sagemath` to support Sage>9.2.beta8 without loosing support for Sage<=9.2.beta7 (9.2.beta8 itself is a lost cause...). While `ptestlong` runs (and heats the cosmos...).

However, `quit()` is no longer enough to close Sage : `emacs` hangs after printing `Process Sage interrompre` two lines below the `Exiting Sage (CPU time 0m12.27s, Wall time 20m30.50s).` message.

Back to the old drawing board...



---

archive/issue_comments_388050.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nEmacs does not hang for me after running `quit()`. I could switch to another buffer, back to the Sage buffer, and run Sage again:\n\n```\nsage: quit()\nExiting Sage (CPU time 0m0.47s, Wall time 0m24.00s).\n\nProcess Sage finished\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.2.beta8, Release Date: 2020-08-10               \u2502\n\u2502 Using Python 3.7.3. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: 3+5\n8\nsage: \n```\nThis also worked after I turned off my `.emacs` file (the moral equivalent of `emacs -q`). Could something in your emacs setup be interfering?",
    "created_at": "2020-08-11T18:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388050",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">comment:38</div>

Emacs does not hang for me after running `quit()`. I could switch to another buffer, back to the Sage buffer, and run Sage again:

```
sage: quit()
Exiting Sage (CPU time 0m0.47s, Wall time 0m24.00s).

Process Sage finished
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.2.beta8, Release Date: 2020-08-10               │
│ Using Python 3.7.3. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: 3+5
8
sage: 
```
This also worked after I turned off my `.emacs` file (the moral equivalent of `emacs -q`). Could something in your emacs setup be interfering?



---

archive/issue_comments_388051.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@EmmanuelCharpentier](#comment:37):\n\n[ ... ]\n\n> However, `quit()` is no longer enough to close Sage : `emacs` hangs after printing `Process Sage interrompre` two lines below the `Exiting Sage (CPU time 0m12.27s, Wall time 20m30.50s).` message.\n> \n> Back to the old drawing board...\n\n\nI was a tad pessimistic : `emacs` doesn't really hangs, and can be left by `C-x C-c`, without need for `kill`.",
    "created_at": "2020-08-11T19:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388051",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@EmmanuelCharpentier](#comment:37):

[ ... ]

> However, `quit()` is no longer enough to close Sage : `emacs` hangs after printing `Process Sage interrompre` two lines below the `Exiting Sage (CPU time 0m12.27s, Wall time 20m30.50s).` message.
> 
> Back to the old drawing board...


I was a tad pessimistic : `emacs` doesn't really hangs, and can be left by `C-x C-c`, without need for `kill`.



---

archive/issue_comments_388052.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThis passes `ptestlong` with results identical to those already reported since 9.2.beta5.\n\n==>`positive_review`",
    "created_at": "2020-08-11T20:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388052",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:40" align="right">comment:40</div>

This passes `ptestlong` with results identical to those already reported since 9.2.beta5.

==>`positive_review`



---

archive/issue_events_350945.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-08-11T20:02:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350945"
}
```



---

archive/issue_events_350946.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-08-11T20:02:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350946"
}
```



---

archive/issue_comments_388053.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket-25363)** to **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**",
    "created_at": "2020-08-14T22:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25363#issuecomment-388053",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/ticket-25363](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket-25363)** to **[`3b8b2bd`](https://github.com/sagemath/sagetrac-mirror/commit/3b8b2bd0eb414b41a21f38c7a1a6bb667a432294)**



---

archive/issue_events_350947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350947"
}
```



---

archive/issue_events_350948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ef6132b8174c12b361e1dfb29a8787b8c64078f5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-14T22:23:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25363",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25363#event-350948"
}
```
