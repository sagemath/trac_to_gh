# Issue 25097: Algebraic polyhedra with Normaliz / e-antic

archive/issues_024860.json:
```json
{
    "body": "Implements polyhedra over embedded algebraic number fields. \n\n- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)\n\n- the input is allowed to come from various fields, which will be coerced to a number field first via #20181:\n\n```\n        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')\n```\n\n- See doctests in `src/sage/geometry/polyhedron/backend_normaliz.py` and `src/sage/geometry/polyhedron/library.py` \n\n- For debugging help, we can write out Normaliz input files and PyNormaliz function calls as a side effect by passing `verbose=True`.  \n\nCC:  winfried @videlec @jplab @sebasguts tmonteil @mo271\n\nKeywords: IMA-PolyGeom\n\nBranch/Commit: f94bf376ea7c391fd779587968738af23c486b07\n\nReviewer: Vincent Delecroix, Jean-Philippe Labb\u00e9\n\nAuthor: Matthias Koeppe\n\nDependencies: #25091, #27731, #27965\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25097\n\n",
    "closed_at": "2019-07-18T21:02:39Z",
    "created_at": "2018-04-03T23:31:05Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Algebraic polyhedra with Normaliz / e-antic",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25097",
    "user": "https://github.com/mkoeppe"
}
```
Implements polyhedra over embedded algebraic number fields. 

- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)

- the input is allowed to come from various fields, which will be coerced to a number field first via #20181:

```
        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')
```

- See doctests in `src/sage/geometry/polyhedron/backend_normaliz.py` and `src/sage/geometry/polyhedron/library.py` 

- For debugging help, we can write out Normaliz input files and PyNormaliz function calls as a side effect by passing `verbose=True`.  

CC:  winfried @videlec @jplab @sebasguts tmonteil @mo271

Keywords: IMA-PolyGeom

Branch/Commit: f94bf376ea7c391fd779587968738af23c486b07

Reviewer: Vincent Delecroix, Jean-Philippe Labb√©

Author: Matthias Koeppe

Dependencies: #25091, #27731, #27965

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25097





---

archive/issue_comments_371805.json:
```json
{
    "body": "<a id='comment:1'></a>prerequisite: package [antic](https://github.com/wbhart/antic) (that has no release yet).",
    "created_at": "2018-04-04T08:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371805",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>prerequisite: package [antic](https://github.com/wbhart/antic) (that has no release yet).



---

archive/issue_comments_371806.json:
```json
{
    "body": "<a id='comment:6'></a>Last 10 new commits:",
    "created_at": "2018-04-04T19:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371806",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Last 10 new commits:



---

archive/issue_comments_371807.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+As a first step, we make it possible to write Normaliz output files when setting up a polyhedron.\n \n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n \n Comment: 1\n \n```\n",
    "created_at": "2018-04-04T19:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371807",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+As a first step, we make it possible to write Normaliz output files when setting up a polyhedron.
 
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
 
 Comment: 1
 
```




---

archive/issue_comments_371808.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,33 @@\n+As a first step, we make it possible to write Normaliz output files when setting up a polyhedron.\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+Next steps to be able to generate more examples:\n+- Fix up \\`_init_from_Hrepresentation\\` so it does not try to cancel.\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-04T19:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371808",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,33 @@
+As a first step, we make it possible to write Normaliz output files when setting up a polyhedron.
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+Next steps to be able to generate more examples:
+- Fix up \`_init_from_Hrepresentation\` so it does not try to cancel.
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
 
 
 Comment: 1
```




---

archive/issue_comments_371809.json:
```json
{
    "body": "<a id='comment:8'></a>Could someone who has worked on / has opinions on the Polyhedron constructor code help here?\n\nWhat should we do for polyhedra over AA such as the following:\n\n```\nsage: P = polytopes.regular_polygon(3)\nsage: P.base_ring()\nAlgebraic Real Field\n```\nIf `backend=normaliz` is requested, should we cast to the appropriate number field via #20181? Or should it be an error?",
    "created_at": "2018-04-04T20:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371809",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Could someone who has worked on / has opinions on the Polyhedron constructor code help here?

What should we do for polyhedra over AA such as the following:

```
sage: P = polytopes.regular_polygon(3)
sage: P.base_ring()
Algebraic Real Field
```
If `backend=normaliz` is requested, should we cast to the appropriate number field via #20181? Or should it be an error?



---

archive/issue_comments_371810.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,33 @@\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+Next steps to be able to generate more examples:\n+- Fix up \\`_init_from_Hrepresentation\\` so it does not try to cancel.\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-04T20:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371810",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,33 @@
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+Next steps to be able to generate more examples:
+- Fix up \`_init_from_Hrepresentation\` so it does not try to cancel.
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
 
 
 Comment: 1
```




---

archive/issue_comments_371811.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,40 @@\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**Sage side of things:**\n+\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+Next steps to be able to generate more examples:\n+- Fix up \\`_init_from_Hrepresentation\\` so it does not try to cancel.\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-04T23:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371811",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,40 @@
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**Sage side of things:**
+
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+Next steps to be able to generate more examples:
+- Fix up \`_init_from_Hrepresentation\` so it does not try to cancel.
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
 
 
 Comment: 1
```




---

archive/issue_comments_371812.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,42 @@\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**Sage side of things:**\n+\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+(Most examples in \\`Qtest/test-nf/\\` have been generated like this.)\n+\n+Next steps to be able to generate more examples:\n+- Fix up \\`_init_from_Hrepresentation\\` so it does not try to cancel.\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-04T23:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371812",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,42 @@
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**Sage side of things:**
+
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+(Most examples in \`Qtest/test-nf/\` have been generated like this.)
+
+Next steps to be able to generate more examples:
+- Fix up \`_init_from_Hrepresentation\` so it does not try to cancel.
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
 
 
 Comment: 1
```




---

archive/issue_comments_371813.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,46 @@\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**Sage side of things:**\n+\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+(Most examples in \\`Qtest/test-nf/\\` have been generated like this.)\n+\n+Next steps to be able to generate more examples:\n+- Fix up \\`_init_from_Hrepresentation\\` so it does not try to cancel.\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n+Other next steps:\n+- merge with Vincent's master branch of e-antic\n+- (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+- (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-05T00:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371813",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,46 @@
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**Sage side of things:**
+
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+(Most examples in \`Qtest/test-nf/\` have been generated like this.)
+
+Next steps to be able to generate more examples:
+- Fix up \`_init_from_Hrepresentation\` so it does not try to cancel.
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
+Other next steps:
+- merge with Vincent's master branch of e-antic
+- (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+- (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
 
 
 Comment: 1
```




---

archive/issue_comments_371814.json:
```json
{
    "body": "<a id='comment:14'></a>> What should we do for polyhedra over AA such as the following:\n> \n> ```\n> sage: P = polytopes.regular_polygon(3)\n> sage: P.base_ring()\n> Algebraic Real Field\n> ```\n> If `backend=normaliz` is requested, should we cast to the appropriate number field via #20181? Or should it be an error?\n> \n\n\nI would say the cleanest thing to do once #20181 is done will be to use it! This probably will also simplify the constructor for `field`.",
    "created_at": "2018-04-05T23:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371814",
    "user": "https://github.com/jplab"
}
```

<a id='comment:14'></a>> What should we do for polyhedra over AA such as the following:
> 
> ```
> sage: P = polytopes.regular_polygon(3)
> sage: P.base_ring()
> Algebraic Real Field
> ```
> If `backend=normaliz` is requested, should we cast to the appropriate number field via #20181? Or should it be an error?
> 


I would say the cleanest thing to do once #20181 is done will be to use it! This probably will also simplify the constructor for `field`.



---

archive/issue_comments_371815.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T21:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371815",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371816.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T21:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371817.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,45 @@\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**Sage side of things:**\n+\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+(Most examples in \\`Qtest/test-nf/\\` have been generated like this.)\n+\n+Next steps to be able to generate more examples:\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n+Other next steps:\n+- merge with Vincent's master branch of e-antic\n+- (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+- (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-07T21:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371817",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,45 @@
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**Sage side of things:**
+
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+(Most examples in \`Qtest/test-nf/\` have been generated like this.)
+
+Next steps to be able to generate more examples:
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
+Other next steps:
+- merge with Vincent's master branch of e-antic
+- (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+- (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
 
 
 Comment: 1
```




---

archive/issue_comments_371818.json:
```json
{
    "body": "<a id='comment:18'></a>I put some preliminary code in to do the coercion to number fields inside the `Polyhedron_normaliz` implementation, using `number_field_elements_from_algebraics`.",
    "created_at": "2018-04-08T18:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371818",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>I put some preliminary code in to do the coercion to number fields inside the `Polyhedron_normaliz` implementation, using `number_field_elements_from_algebraics`.



---

archive/issue_comments_371819.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-08T18:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371820.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-08T22:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371821.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-09T03:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371822.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- \\`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\\`\n+\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**Sage side of things:**\n+\n+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+\n+(Most examples in \\`Qtest/test-nf/\\` have been generated like this.)\n+\n+Next steps to be able to generate more examples:\n+- #20181 (\\`number_field_elements_from_algebraics\\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \\`AA\\`...)\n+\n+Other next steps:\n+- merge with Vincent's master branch of e-antic\n+- (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+- (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-09T03:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371822",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+**Easy setup within sage:**
+- check out this branch
+- \`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\`
+
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**Sage side of things:**
+
+As a first step, we make it possible to write Normaliz output files while setting up a polyhedron over a numberfield. (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+
+(Most examples in \`Qtest/test-nf/\` have been generated like this.)
+
+Next steps to be able to generate more examples:
+- #20181 (\`number_field_elements_from_algebraics\` should create embedded number field elements) so that we can have more polyhedra over numberfields (instead of \`AA\`...)
+
+Other next steps:
+- merge with Vincent's master branch of e-antic
+- (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+- (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
 
 
 Comment: 1
```




---

archive/issue_comments_371823.json:
```json
{
    "body": "Changing keywords from \"\" to \"IMA-PolyGeom\".",
    "created_at": "2018-04-09T03:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371823",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "IMA-PolyGeom".



---

archive/issue_comments_371824.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,62 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- \\`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\\`\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do:**\n+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-09T03:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371824",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,62 @@
+**Easy setup within sage:**
+- check out this branch
+- \`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\`
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do:**
+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
 
 
 Comment: 1
```




---

archive/issue_comments_371825.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-09T15:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371826.json:
```json
{
    "body": "<a id='comment:26'></a>A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.\n\nWhat should I do?",
    "created_at": "2018-04-09T20:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371826",
    "user": "https://github.com/jplab"
}
```

<a id='comment:26'></a>A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.

What should I do?



---

archive/issue_comments_371827.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 jipilab]:\n> A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.\n> \n> What should I do?\n\n\nComing from the installation of normaliz through sage:\n\n```\n[normaliz] Installing ARB...\n[normaliz] curl: (1) Protocol \"https\" not supported or disabled in libcurl\nMakefile:2080: recipe for target 'normaliz' failed\nmake[1]: *** [normaliz] Error 1\nmake[1]: Leaving directory '/home/jplabbe/sage/build/make'\n```",
    "created_at": "2018-04-09T20:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371827",
    "user": "https://github.com/jplab"
}
```

<a id='comment:27'></a>Replying to [comment:26 jipilab]:
> A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.
> 
> What should I do?


Coming from the installation of normaliz through sage:

```
[normaliz] Installing ARB...
[normaliz] curl: (1) Protocol "https" not supported or disabled in libcurl
Makefile:2080: recipe for target 'normaliz' failed
make[1]: *** [normaliz] Error 1
make[1]: Leaving directory '/home/jplabbe/sage/build/make'
```



---

archive/issue_comments_371828.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 jipilab]:\n> Replying to [comment:26 jipilab]:\n> > A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.\n> > \n> > What should I do?\n\n> \n> Coming from the installation of normaliz through sage:\n> \n> \n> ```\n> [normaliz] Installing ARB...\n> [normaliz] curl: (1) Protocol \"https\" not supported or disabled in libcurl\n> Makefile:2080: recipe for target 'normaliz' failed\n> make[1]: *** [normaliz] Error 1\n> make[1]: Leaving directory '/home/jplabbe/sage/build/make'\n> ```\n\n\nTo fix this, I had to force install `curl` inside a sage shell. On a debian-sid distribution, it seems that it was not necessary.",
    "created_at": "2018-04-09T21:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371828",
    "user": "https://github.com/jplab"
}
```

<a id='comment:28'></a>Replying to [comment:27 jipilab]:
> Replying to [comment:26 jipilab]:
> > A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.
> > 
> > What should I do?

> 
> Coming from the installation of normaliz through sage:
> 
> 
> ```
> [normaliz] Installing ARB...
> [normaliz] curl: (1) Protocol "https" not supported or disabled in libcurl
> Makefile:2080: recipe for target 'normaliz' failed
> make[1]: *** [normaliz] Error 1
> make[1]: Leaving directory '/home/jplabbe/sage/build/make'
> ```


To fix this, I had to force install `curl` inside a sage shell. On a debian-sid distribution, it seems that it was not necessary.



---

archive/issue_comments_371829.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,63 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- \\`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\\`\n+\n+(For this you need to have pynormaliz in your upstream directory, see #25097)\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do:**\n+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-09T21:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371829",
    "user": "https://github.com/mo271"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,63 @@
+**Easy setup within sage:**
+- check out this branch
+- \`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\`
+
+(For this you need to have pynormaliz in your upstream directory, see #25097)
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do:**
+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
 
 
 Comment: 1
```




---

archive/issue_comments_371830.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,64 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- \\`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\\`\n+\n+(For this you need to have pynormaliz in your upstream directory, see #25090)\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do:**\n+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n \n \n Comment: 1\n```\n",
    "created_at": "2018-04-09T21:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371830",
    "user": "https://github.com/mo271"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,64 @@
+**Easy setup within sage:**
+- check out this branch
+- \`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\`
+
+(For this you need to have pynormaliz in your upstream directory, see #25090)
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do:**
+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
 
 
 Comment: 1
```




---

archive/issue_comments_371831.json:
```json
{
    "body": "<a id='comment:31'></a>After installing `autotools` and `automake` I get the following error message:\n\n```\n[normaliz] Installing E-ANTIC...\n[normaliz] From https://github.com/mkoeppe/e-antic\n[normaliz]  * branch            winfried   -> FETCH_HEAD\n[normaliz] HEAD is now at 9de1e6f... renf_elem_class.get_den: New\n[normaliz] aclocal: warning: couldn't open directory 'm4': No such file or directory\n[normaliz] configure.ac:9: error: possibly undefined macro: AC_PROG_LIBTOOL\n[normaliz]       If this token and others are legitimate, please use m4_pattern_allow.\n[normaliz]       See the Autoconf documentation.\n[normaliz] autoreconf: /usr/bin/autoconf failed with exit status: 1\nMakefile:2080: recipe for target 'normaliz' failed\nmake[1]: *** [normaliz] Error 1\nmake[1]: Leaving directory '/home/jplabbe/sage/build/make'\n```\n\nThen, after installing `libtool` (sage should complain about that not installed?!) then I get:\n\n```\n[normaliz] make[2]: Leaving directory '/home/jplabbe/sage/local/enfnormaliz/E-ANTIC_source/e-antic'\n[normaliz] configure: error: cannot find install-sh, install.sh, or shtool in \".\" \"./..\" \"./../..\"\nMakefile:2080: recipe for target 'normaliz' failed\nmake[1]: *** [normaliz] Error 1\nmake[1]: Leaving directory '/home/jplabbe/sage/build/make'\n```",
    "created_at": "2018-04-09T22:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371831",
    "user": "https://github.com/jplab"
}
```

<a id='comment:31'></a>After installing `autotools` and `automake` I get the following error message:

```
[normaliz] Installing E-ANTIC...
[normaliz] From https://github.com/mkoeppe/e-antic
[normaliz]  * branch            winfried   -> FETCH_HEAD
[normaliz] HEAD is now at 9de1e6f... renf_elem_class.get_den: New
[normaliz] aclocal: warning: couldn't open directory 'm4': No such file or directory
[normaliz] configure.ac:9: error: possibly undefined macro: AC_PROG_LIBTOOL
[normaliz]       If this token and others are legitimate, please use m4_pattern_allow.
[normaliz]       See the Autoconf documentation.
[normaliz] autoreconf: /usr/bin/autoconf failed with exit status: 1
Makefile:2080: recipe for target 'normaliz' failed
make[1]: *** [normaliz] Error 1
make[1]: Leaving directory '/home/jplabbe/sage/build/make'
```

Then, after installing `libtool` (sage should complain about that not installed?!) then I get:

```
[normaliz] make[2]: Leaving directory '/home/jplabbe/sage/local/enfnormaliz/E-ANTIC_source/e-antic'
[normaliz] configure: error: cannot find install-sh, install.sh, or shtool in "." "./.." "./../.."
Makefile:2080: recipe for target 'normaliz' failed
make[1]: *** [normaliz] Error 1
make[1]: Leaving directory '/home/jplabbe/sage/build/make'
```



---

archive/issue_comments_371832.json:
```json
{
    "body": "<a id='comment:32'></a>... Problem solved by gh-sebasguts: there was an old config file lying around. Deleting it solved the issue.",
    "created_at": "2018-04-09T23:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371832",
    "user": "https://github.com/jplab"
}
```

<a id='comment:32'></a>... Problem solved by gh-sebasguts: there was an old config file lying around. Deleting it solved the issue.



---

archive/issue_comments_371833.json:
```json
{
    "body": "<a id='comment:33'></a>works flawlessly for me!",
    "created_at": "2018-04-09T23:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371833",
    "user": "https://github.com/mo271"
}
```

<a id='comment:33'></a>works flawlessly for me!



---

archive/issue_comments_371834.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:28 jipilab]:\n> Replying to [comment:27 jipilab]:\n> > Replying to [comment:26 jipilab]:\n> > > A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.\n> > > \n> > > What should I do?\n\n> > \n> > Coming from the installation of normaliz through sage:\n> > \n> > \n> > ```\n> > [normaliz] Installing ARB...\n> > [normaliz] curl: (1) Protocol \"https\" not supported or disabled in libcurl\n> > Makefile:2080: recipe for target 'normaliz' failed\n> > make[1]: *** [normaliz] Error 1\n> > make[1]: Leaving directory '/home/jplabbe/sage/build/make'\n> > ```\n\n> \n> To fix this, I had to force install `curl` inside a sage shell. On a debian-sid distribution, it seems that it was not necessary.\n\n\nSame issue in Ubuntu 16.04LTS, doing `sage -f curl` in a sage shell does not work. Purging curl and reinstalling also didn't work. In order to enable ssl for curl, used the command `sudo apt-get install libssl-dev`. After that I no longer have the error `curl: (1) Protocol \"https\" not supported...`",
    "created_at": "2018-04-10T15:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371834",
    "user": "https://github.com/TimmyChan"
}
```

<a id='comment:34'></a>Replying to [comment:28 jipilab]:
> Replying to [comment:27 jipilab]:
> > Replying to [comment:26 jipilab]:
> > > A note: I am trying out the method in the ticket description and I get a `ImportError: No module named PyQNormaliz_cpp` when I try with an example.
> > > 
> > > What should I do?

> > 
> > Coming from the installation of normaliz through sage:
> > 
> > 
> > ```
> > [normaliz] Installing ARB...
> > [normaliz] curl: (1) Protocol "https" not supported or disabled in libcurl
> > Makefile:2080: recipe for target 'normaliz' failed
> > make[1]: *** [normaliz] Error 1
> > make[1]: Leaving directory '/home/jplabbe/sage/build/make'
> > ```

> 
> To fix this, I had to force install `curl` inside a sage shell. On a debian-sid distribution, it seems that it was not necessary.


Same issue in Ubuntu 16.04LTS, doing `sage -f curl` in a sage shell does not work. Purging curl and reinstalling also didn't work. In order to enable ssl for curl, used the command `sudo apt-get install libssl-dev`. After that I no longer have the error `curl: (1) Protocol "https" not supported...`



---

archive/issue_comments_371835.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:31 jipilab]:\n> After installing `autotools` and `automake` I get the following error message:\n> \n> \n> ```\n> [normaliz] Installing E-ANTIC...\n> [normaliz] From https://github.com/mkoeppe/e-antic\n> [normaliz]  * branch            winfried   -> FETCH_HEAD\n> [normaliz] HEAD is now at 9de1e6f... renf_elem_class.get_den: New\n> [normaliz] aclocal: warning: couldn't open directory 'm4': No such file or directory\n> [normaliz] configure.ac:9: error: possibly undefined macro: AC_PROG_LIBTOOL\n> [normaliz]       If this token and others are legitimate, please use m4_pattern_allow.\n> [normaliz]       See the Autoconf documentation.\n> [normaliz] autoreconf: /usr/bin/autoconf failed with exit status: 1\n> Makefile:2080: recipe for target 'normaliz' failed\n> make[1]: *** [normaliz] Error 1\n> make[1]: Leaving directory '/home/jplabbe/sage/build/make'\n> ```\n> \n> Then, after installing `libtool` (sage should complain about that not installed?!) then I get:\n> \n> \n> ```\n> [normaliz] make[2]: Leaving directory '/home/jplabbe/sage/local/enfnormaliz/E-ANTIC_source/e-antic'\n> [normaliz] configure: error: cannot find install-sh, install.sh, or shtool in \".\" \"./..\" \"./../..\"\n> Makefile:2080: recipe for target 'normaliz' failed\n> make[1]: *** [normaliz] Error 1\n> make[1]: Leaving directory '/home/jplabbe/sage/build/make'\n> ```\n\n\n\nInstalled `autotools-dev` and `automake` and `libtool` and installation completed on Ubuntu 16.04LTS.",
    "created_at": "2018-04-10T15:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371835",
    "user": "https://github.com/TimmyChan"
}
```

<a id='comment:35'></a>Replying to [comment:31 jipilab]:
> After installing `autotools` and `automake` I get the following error message:
> 
> 
> ```
> [normaliz] Installing E-ANTIC...
> [normaliz] From https://github.com/mkoeppe/e-antic
> [normaliz]  * branch            winfried   -> FETCH_HEAD
> [normaliz] HEAD is now at 9de1e6f... renf_elem_class.get_den: New
> [normaliz] aclocal: warning: couldn't open directory 'm4': No such file or directory
> [normaliz] configure.ac:9: error: possibly undefined macro: AC_PROG_LIBTOOL
> [normaliz]       If this token and others are legitimate, please use m4_pattern_allow.
> [normaliz]       See the Autoconf documentation.
> [normaliz] autoreconf: /usr/bin/autoconf failed with exit status: 1
> Makefile:2080: recipe for target 'normaliz' failed
> make[1]: *** [normaliz] Error 1
> make[1]: Leaving directory '/home/jplabbe/sage/build/make'
> ```
> 
> Then, after installing `libtool` (sage should complain about that not installed?!) then I get:
> 
> 
> ```
> [normaliz] make[2]: Leaving directory '/home/jplabbe/sage/local/enfnormaliz/E-ANTIC_source/e-antic'
> [normaliz] configure: error: cannot find install-sh, install.sh, or shtool in "." "./.." "./../.."
> Makefile:2080: recipe for target 'normaliz' failed
> make[1]: *** [normaliz] Error 1
> make[1]: Leaving directory '/home/jplabbe/sage/build/make'
> ```



Installed `autotools-dev` and `automake` and `libtool` and installation completed on Ubuntu 16.04LTS.



---

archive/issue_comments_371836.json:
```json
{
    "body": "<a id='comment:36'></a>There is a link error in my installation:\n\n```\nsage: import PyQNormaliz_cpp\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-10-4c34a88d49d7> in <module>()\n----> 1 import PyQNormaliz_cpp\n\nImportError: /home/jplabbe/sage/local/enfnormaliz/lib/libantic.so.0: undefined symbol: _fmpq_poly_resultant_div\n```\n\nThis can be solved by typing\n\n```\nexport LD_LIBRARY_PATH=your_sage_path/local/enfnormaliz/lib/:$LD_LIBRARY_PATH\n```\n\nbefore starting sage in the terminal...",
    "created_at": "2018-04-10T15:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371836",
    "user": "https://github.com/jplab"
}
```

<a id='comment:36'></a>There is a link error in my installation:

```
sage: import PyQNormaliz_cpp
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-10-4c34a88d49d7> in <module>()
----> 1 import PyQNormaliz_cpp

ImportError: /home/jplabbe/sage/local/enfnormaliz/lib/libantic.so.0: undefined symbol: _fmpq_poly_resultant_div
```

This can be solved by typing

```
export LD_LIBRARY_PATH=your_sage_path/local/enfnormaliz/lib/:$LD_LIBRARY_PATH
```

before starting sage in the terminal...



---

archive/issue_comments_371837.json:
```json
{
    "body": "<a id='comment:37'></a>While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.\n\nThe problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.",
    "created_at": "2018-04-10T17:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371837",
    "user": "https://github.com/sebasguts"
}
```

<a id='comment:37'></a>While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.

The problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.



---

archive/issue_comments_371838.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:37 gh-sebasguts]:\n> While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.\n> \n> The problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.\n\n\nTemporarily, `import PyQNormaliz_cpp` can work by removing 'libflint.so.13` from `~/sage/local/lib/` to some other directory.",
    "created_at": "2018-04-10T17:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371838",
    "user": "https://github.com/TimmyChan"
}
```

<a id='comment:38'></a>Replying to [comment:37 gh-sebasguts]:
> While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.
> 
> The problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.


Temporarily, `import PyQNormaliz_cpp` can work by removing 'libflint.so.13` from `~/sage/local/lib/` to some other directory.



---

archive/issue_comments_371839.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,60 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- \\`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\\`\n+\n+(For this you need to have pynormaliz in your upstream directory, see #25090)\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  ( sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+}}}\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do:**\n+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+\n+**Normaliz side of things:**\n+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 (not necessary anymore; see #25090) \n+- run script \\`install_normaliz_with_opt.sh\\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)\n+- then can test with \\`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\\`\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n \n \n Comment: 1\n```\n",
    "created_at": "2018-07-05T09:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371839",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,60 @@
+**Easy setup within sage:**
+- check out this branch
+- \`./sage -f normaliz && ./sage -f pynormaliz pyqnormaliz\`
+
+(For this you need to have pynormaliz in your upstream directory, see #25090)
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  ( sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+}}}
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do:**
+- Wait for fixes in PyQNormaliz, then read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+
+**Normaliz side of things:**
+- clone from https://github.com/mkoeppe/Normaliz/tree/enfnormaliz2018 (not necessary anymore; see #25090) 
+- run script \`install_normaliz_with_opt.sh\` to install FLINT, ARB, ANTIC (unreleased), E-ANTIC (unreleased) (see scripts for which specific versions are pulled)
+- then can test with \`Qsource/Qnormaliz Qtest/test-nf/dodecahedron-v.in && cat Qtest/test-nf/dodecahedron-v.out\`
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
 
 
 Comment: 1
```




---

archive/issue_comments_371840.json:
```json
{
    "body": "<a id='comment:40'></a>Since version 3.6.0 QNormaliz and PyQNormaliz are included in the Normaliz distribution.",
    "created_at": "2018-07-05T09:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371840",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:40'></a>Since version 3.6.0 QNormaliz and PyQNormaliz are included in the Normaliz distribution.



---

archive/issue_comments_371841.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-18T17:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_062933.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-09-18T21:27:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62933"
}
```



---

archive/issue_comments_371842.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do:**\n+- Read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-18T21:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371842",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,61 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do:**
+- Read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371843.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-09-18T21:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_371844.json:
```json
{
    "body": "<a id='comment:44'></a>Updated this branch to use the current released versions of Normaliz from #25090 and PyQNormaliz from pypi.",
    "created_at": "2018-09-18T21:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371844",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Updated this branch to use the current released versions of Normaliz from #25090 and PyQNormaliz from pypi.



---

archive/issue_comments_371845.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,64 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do on the Sage Python side:**\n+- Read results from PyQNormaliz. \n+ (Result of discussion of mkoeppe, gh-sebasguts): \\`PyQNormaliz\\`... use strings to transport arbs and lists for everything else. We do not use \\`sage.libs.arb\\` etc. so we can keep PyQNormaliz standalone.\n+\n+**To do on the Sage build scripts side:**\n+- Right now this installs an incompatible unreleased version of FLINT directly from git into \\`${SAGE_LOCAL}/enfnormaliz\\`. This needs to be normalized (see #25171).\n+- Right now this installs ARB, ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. Depends on this version of FLINT.\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-18T21:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371845",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,64 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do on the Sage Python side:**
+- Read results from PyQNormaliz. 
+ (Result of discussion of mkoeppe, gh-sebasguts): \`PyQNormaliz\`... use strings to transport arbs and lists for everything else. We do not use \`sage.libs.arb\` etc. so we can keep PyQNormaliz standalone.
+
+**To do on the Sage build scripts side:**
+- Right now this installs an incompatible unreleased version of FLINT directly from git into \`${SAGE_LOCAL}/enfnormaliz\`. This needs to be normalized (see #25171).
+- Right now this installs ARB, ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. Depends on this version of FLINT.
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371846.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-19T03:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371847.json:
```json
{
    "body": "<a id='comment:47'></a>Far from \"needs review\", but needs testing / debugging.\n(I'm currently getting a segfault when running the testsuite for backend_normaliz.py.)",
    "created_at": "2018-09-19T03:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371847",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Far from "needs review", but needs testing / debugging.
(I'm currently getting a segfault when running the testsuite for backend_normaliz.py.)



---

archive/issue_comments_371848.json:
```json
{
    "body": "<a id='comment:48'></a>Could you give more specific information?",
    "created_at": "2018-09-19T07:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371848",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:48'></a>Could you give more specific information?



---

archive/issue_comments_371849.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,60 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do on the Sage build scripts side:**\n+- Right now this installs an incompatible unreleased version of FLINT directly from git into \\`${SAGE_LOCAL}/enfnormaliz\\`. This needs to be normalized (see #25171).\n+- Right now this installs ARB, ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. Depends on this version of FLINT.\n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-19T12:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371849",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,60 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do on the Sage build scripts side:**
+- Right now this installs an incompatible unreleased version of FLINT directly from git into \`${SAGE_LOCAL}/enfnormaliz\`. This needs to be normalized (see #25171).
+- Right now this installs ARB, ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. Depends on this version of FLINT.
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371850.json:
```json
{
    "body": "<a id='comment:49'></a>\n```\nsage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', ver\n....: bose=True)\n# ----8<---- Equivalent QNormaliz input file ---8<----\namb_space 1\nsubspace 0\nvertices 2\n (a^3) 1\n (a^2) 1\nnumber_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\ncone 0\n# ----8<-------------------8<-------------------8<----\n# Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[[0L, 1L], [0L, 1L], [0L, 1L], [1L, 1L], [0L, 1L], [0L, 1L]], 1L], [[[0L, 1L], [0L, 1L], [1L, 1L], [0L, 1L], [0L, 1L], [0L, 1L]], 1L]], 'number_field': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n------------------------------------------------------------------------\n(no backtrace available)\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\nSegmentation fault: 11\n```",
    "created_at": "2018-09-19T12:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371850",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
```
sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', ver
....: bose=True)
# ----8<---- Equivalent QNormaliz input file ---8<----
amb_space 1
subspace 0
vertices 2
 (a^3) 1
 (a^2) 1
number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
cone 0
# ----8<-------------------8<-------------------8<----
# Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[[0L, 1L], [0L, 1L], [0L, 1L], [1L, 1L], [0L, 1L], [0L, 1L]], 1L], [[[0L, 1L], [0L, 1L], [1L, 1L], [0L, 1L], [0L, 1L], [0L, 1L]], 1L]], 'number_field': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
------------------------------------------------------------------------
(no backtrace available)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
Segmentation fault: 11
```



---

archive/issue_comments_371851.json:
```json
{
    "body": "<a id='comment:50'></a>Normaliz 3.6.3 (and presumably already 3.6.0) computes the polytope without any problems, provided the number_field follows immediately after amb_space. (One could think of relaxing this condition.) Output:\n\n\n```\nReal embedded number field:\nmin_poly (a^6 - 2) embedding [1.1225 +/- 4.57e-5]\n\n2 vertices of polyhedron\n0 extreme rays of recession cone\n2 support hyperplanes of polyhedron (homogenized)\n\nembedding dimension = 2\naffine dimension of the polyhedron = 1 (maximal)\nrank of recession cone = 0\n\ndehomogenization:\n0 1 \n\n***********************************************************************\n\n2 vertices of polyhedron:\n (a^2 ~ 1.2599) 1\n (a^3 ~ 1.4142) 1\n\n0 extreme rays of recession cone:\n\n2 support hyperplanes of polyhedron (homogenized):\n (-1/2*a^3 ~ -0.7071)  1\n   (1/2*a^4 ~ 0.7937) -1\n```",
    "created_at": "2018-09-19T13:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371851",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:50'></a>Normaliz 3.6.3 (and presumably already 3.6.0) computes the polytope without any problems, provided the number_field follows immediately after amb_space. (One could think of relaxing this condition.) Output:


```
Real embedded number field:
min_poly (a^6 - 2) embedding [1.1225 +/- 4.57e-5]

2 vertices of polyhedron
0 extreme rays of recession cone
2 support hyperplanes of polyhedron (homogenized)

embedding dimension = 2
affine dimension of the polyhedron = 1 (maximal)
rank of recession cone = 0

dehomogenization:
0 1 

***********************************************************************

2 vertices of polyhedron:
 (a^2 ~ 1.2599) 1
 (a^3 ~ 1.4142) 1

0 extreme rays of recession cone:

2 support hyperplanes of polyhedron (homogenized):
 (-1/2*a^3 ~ -0.7071)  1
   (1/2*a^4 ~ 0.7937) -1
```



---

archive/issue_comments_371852.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:50 Winfried]:\n> Normaliz 3.6.3 (and presumably already 3.6.0) computes the polytope without any problems,\n\n\nThanks for testing. Yes, I think the segfault is coming from somewhere in the interfacing.\n\n> provided the number_field follows immediately after amb_space. \n> (One could think of relaxing this condition.) \n\nNo, I don't think that's necessary -- I just need to fix the normaliz file writer in my sage code to know about this.",
    "created_at": "2018-09-19T13:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371852",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>Replying to [comment:50 Winfried]:
> Normaliz 3.6.3 (and presumably already 3.6.0) computes the polytope without any problems,


Thanks for testing. Yes, I think the segfault is coming from somewhere in the interfacing.

> provided the number_field follows immediately after amb_space. 
> (One could think of relaxing this condition.) 

No, I don't think that's necessary -- I just need to fix the normaliz file writer in my sage code to know about this.



---

archive/issue_comments_371853.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-21T00:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371854.json:
```json
{
    "body": "<a id='comment:53'></a>\n```\nx = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True); P._Hrepresentation\n.... segfault ...\n```\nSome memory corruption involving the gc, it seems",
    "created_at": "2018-09-21T01:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371854",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
```
x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True); P._Hrepresentation
.... segfault ...
```
Some memory corruption involving the gc, it seems



---

archive/issue_comments_371855.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-21T20:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371856.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-21T22:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371857.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-22T01:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371858.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,59 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090 and #25171\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do on the Sage build scripts side:**\n+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. \n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-22T18:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371858",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,59 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090 and #25171
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/c8/b5/4066a92b9599958964d936a4370061e12485413b5007a5fdfcc16834b9e0/PyQNormaliz-1.1.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do on the Sage build scripts side:**
+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. 
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371859.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-22T18:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371860.json:
```json
{
    "body": "<a id='comment:59'></a>Replying to [comment:37 gh-sebasguts]:\n> While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.\n> \n> The problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.\n\n\nWith the latest commits, I have removed the separate flint installation and this ticket should be easier to build. Please test",
    "created_at": "2018-09-22T19:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371860",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>Replying to [comment:37 gh-sebasguts]:
> While this solution works for jipilab, it does not for gh-TimmyChan. Apparently his Ubuntu 16.04 honors the `-rpath` setting from the PyQNormaliz install script.
> 
> The problem is that the `-rpath` will be set by python itself, and it is not possible to insert anything before that path.


With the latest commits, I have removed the separate flint installation and this ticket should be easier to build. Please test



---

archive/issue_comments_371861.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-22T20:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371862.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-23T03:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371863.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,59 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090 and #25171\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/8e/ea/5c51e6d2a02464460c044c9701860e83bb9bede946c4c6b4bfff2414059e/PyQNormaliz-1.2.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+\\`\\`\\`\n+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')\n+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})\n+# Wrote equivalent Normaliz input file to out.in\n+sage: !cat out.in\n+amb_space 3\n+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]\n+subspace 0\n+vertices 12\n+ 0 2 (a + 1) 4\n+ 0 -2 (a + 1) 4\n+ 2 (a + 1) 0 4\n+ 2 (-a - 1) 0 4\n+ (a + 1) 0 2 4\n+ (a + 1) 0 -2 4\n+ -2 (a + 1) 0 4\n+ -2 (-a - 1) 0 4\n+ (-a - 1) 0 2 4\n+ 0 2 (-a - 1) 4\n+ 0 -2 (-a - 1) 4\n+ (-a - 1) 0 -2 4\n+cone 0\n+\\`\\`\\`\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)\n+        # ----8<---- Equivalent QNormaliz input file ---8<----\n+        amb_space 1\n+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]\n+        subspace 0\n+        vertices 2\n+         (a^3) 1\n+         (a^2) 1\n+        cone 0\n+        # ----8<-------------------8<-------------------8<----\n+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})\n+\\`\\`\\`\n+  (Result of discussion of mkoeppe, jipilab:) \\`Polyhedron_normaliz\\` should accept \\`AA\\`, \\`CyclotomicField\\`, etc. input and use these as a \\`base_ring\\`. When preparing data for \\`PyQNormaliz\\`, use \\`number_field_elements_from_algebraics\\`. When reading data from \\`PyQNormaliz\\`, first build number field elements, then inject into the correct \\`base_ring\\`.\n+\n+**To do on the Sage build scripts side:**\n+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. \n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-23T13:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371863",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,59 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090 and #25171
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/8e/ea/5c51e6d2a02464460c044c9701860e83bb9bede946c4c6b4bfff2414059e/PyQNormaliz-1.2.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field, writing a QNormaliz input file as a side effect.  (#25090 added writing Normaliz output files in the rational case.)
+
+\`\`\`
+sage: P = Polyhedron(vertices=polytopes.icosahedron().vertices(), backend='normaliz', verbose='out.in')
+# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[0, 2, sqrt5 + 1, 4], [0, -2, sqrt5 + 1, 4], [2, sqrt5 + 1, 0, 4], [2, -sqrt5 - 1, 0, 4], [sqrt5 + 1, 0, 2, 4], [sqrt5 + 1, 0, -2, 4], [-2, sqrt5 + 1, 0, 4], [-2, -sqrt5 - 1, 0, 4], [-sqrt5 - 1, 0, 2, 4], [0, 2, -sqrt5 - 1, 4], [0, -2, -sqrt5 - 1, 4], [-sqrt5 - 1, 0, -2, 4]], 'cone': []})
+# Wrote equivalent Normaliz input file to out.in
+sage: !cat out.in
+amb_space 3
+number_field min_poly (a^2 - 5) embedding [2.236067977499789 +/- 8.06e-16]
+subspace 0
+vertices 12
+ 0 2 (a + 1) 4
+ 0 -2 (a + 1) 4
+ 2 (a + 1) 0 4
+ 2 (-a - 1) 0 4
+ (a + 1) 0 2 4
+ (a + 1) 0 -2 4
+ -2 (a + 1) 0 4
+ -2 (-a - 1) 0 4
+ (-a - 1) 0 2 4
+ 0 2 (-a - 1) 4
+ 0 -2 (-a - 1) 4
+ (-a - 1) 0 -2 4
+cone 0
+\`\`\`
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz', verbose=True)
+        # ----8<---- Equivalent QNormaliz input file ---8<----
+        amb_space 1
+        number_field min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]
+        subspace 0
+        vertices 2
+         (a^3) 1
+         (a^2) 1
+        cone 0
+        # ----8<-------------------8<-------------------8<----
+        # Calling PyQNormaliz_cpp.NmzCone(**{'subspace': [], 'vertices': [[[0L, 0L, 0L, 1L, 0L, 0L], 1L], [[0L, 0L, 1L, 0L, 0L, 0L], 1L]], 'NumberFieldData': 'min_poly (a^6 - 2) embedding [1.122462048309373 +/- 5.38e-16]', 'cone': []})
+\`\`\`
+  (Result of discussion of mkoeppe, jipilab:) \`Polyhedron_normaliz\` should accept \`AA\`, \`CyclotomicField\`, etc. input and use these as a \`base_ring\`. When preparing data for \`PyQNormaliz\`, use \`number_field_elements_from_algebraics\`. When reading data from \`PyQNormaliz\`, first build number field elements, then inject into the correct \`base_ring\`.
+
+**To do on the Sage build scripts side:**
+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. 
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371864.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-23T13:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371865.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,26 @@\n+**Easy setup within sage:**\n+- check out this branch\n+- Follow instructions regarding upstream/ from #25090 and #25171\n+- \\`(cd upstream && wget https://files.pythonhosted.org/packages/8e/ea/5c51e6d2a02464460c044c9701860e83bb9bede946c4c6b4bfff2414059e/PyQNormaliz-1.2.tar.gz)\\`\n+- \\`./sage -f normaliz pynormaliz pyqnormaliz\\`\n+\n+\n+**Things that work in sage:**\n+- Setting up a polyhedron over a number field.\n+- Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')\n+\\`\\`\\`\n+- See doctests in \\`src/sage/geometry/polyhedron/backend_normaliz.py\\` and \\`src/sage/geometry/polyhedron/library.py\\` \n+- Writing a QNormaliz input file as a side effect by passing \\`verbose=True\\`.  (#25090 added writing Normaliz output files in the rational case.)\n+\n+**To do on the Sage build scripts side:**\n+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. \n+\n+**To do on the Normaliz side:**\n+- merge with Vincent's master branch of e-antic\n+- some updates to install scripts \n \n \n Comment: 1\n```\n",
    "created_at": "2018-09-23T13:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371865",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,26 @@
+**Easy setup within sage:**
+- check out this branch
+- Follow instructions regarding upstream/ from #25090 and #25171
+- \`(cd upstream && wget https://files.pythonhosted.org/packages/8e/ea/5c51e6d2a02464460c044c9701860e83bb9bede946c4c6b4bfff2414059e/PyQNormaliz-1.2.tar.gz)\`
+- \`./sage -f normaliz pynormaliz pyqnormaliz\`
+
+
+**Things that work in sage:**
+- Setting up a polyhedron over a number field.
+- Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')
+\`\`\`
+- See doctests in \`src/sage/geometry/polyhedron/backend_normaliz.py\` and \`src/sage/geometry/polyhedron/library.py\` 
+- Writing a QNormaliz input file as a side effect by passing \`verbose=True\`.  (#25090 added writing Normaliz output files in the rational case.)
+
+**To do on the Sage build scripts side:**
+- Right now this installs ANTIC, e-antic using the ad-hoc scripts from Normaliz, directly from git. 
+
+**To do on the Normaliz side:**
+- merge with Vincent's master branch of e-antic
+- some updates to install scripts 
 
 
 Comment: 1
```




---

archive/issue_comments_371866.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-23T13:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371866",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_371867.json:
```json
{
    "body": "<a id='comment:65'></a>PyQNormaliz 1.3 is out - https://files.pythonhosted.org/packages/f9/3a/4ffbb22390023f7f8331309c51a73063ccee465df307e898456fbcf05356/PyQNormaliz-1.3.tar.gz",
    "created_at": "2018-09-27T23:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371867",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>PyQNormaliz 1.3 is out - https://files.pythonhosted.org/packages/f9/3a/4ffbb22390023f7f8331309c51a73063ccee465df307e898456fbcf05356/PyQNormaliz-1.3.tar.gz



---

archive/issue_comments_371868.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-08T23:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371869.json:
```json
{
    "body": "<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-09T01:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371870.json:
```json
{
    "body": "<a id='comment:68'></a>I think we should decouple: upgrading Normaliz and interfacing Normaliz.",
    "created_at": "2019-04-16T19:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371870",
    "user": "https://github.com/videlec"
}
```

<a id='comment:68'></a>I think we should decouple: upgrading Normaliz and interfacing Normaliz.



---

archive/issue_comments_371871.json:
```json
{
    "body": "<a id='comment:69'></a>I opened #27682",
    "created_at": "2019-04-16T19:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371871",
    "user": "https://github.com/videlec"
}
```

<a id='comment:69'></a>I opened #27682



---

archive/issue_comments_371872.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n+- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)\n \n+- Things that did work in sage (at commit bd3c990):\n+  - Setting up a polyhedron over a number field.\n+  - Likewise with input from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')\n+\\`\\`\\`\n+- See doctests in \\`src/sage/geometry/polyhedron/backend_normaliz.py\\` and \\`src/sage/geometry/polyhedron/library.py\\` \n+- Writing a QNormaliz input file as a side effect by passing \\`verbose=True\\`.  (#25090 added writing Normaliz output files in the rational case.)\n \n Comment: 1\n \n```\n",
    "created_at": "2019-04-16T20:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371872",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,14 @@
+- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)
 
+- Things that did work in sage (at commit bd3c990):
+  - Setting up a polyhedron over a number field.
+  - Likewise with input from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')
+\`\`\`
+- See doctests in \`src/sage/geometry/polyhedron/backend_normaliz.py\` and \`src/sage/geometry/polyhedron/library.py\` 
+- Writing a QNormaliz input file as a side effect by passing \`verbose=True\`.  (#25090 added writing Normaliz output files in the rational case.)
 
 Comment: 1
 
```




---

archive/issue_events_062934.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-16T20:18:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62934"
}
```



---

archive/issue_events_062935.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-16T20:18:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62935"
}
```



---

archive/issue_comments_371873.json:
```json
{
    "body": "<a id='comment:71'></a>Replying to [comment:68 vdelecroix]:\n> I think we should decouple: upgrading Normaliz and interfacing Normaliz.\n\n+1",
    "created_at": "2019-04-17T07:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371873",
    "user": "https://github.com/jplab"
}
```

<a id='comment:71'></a>Replying to [comment:68 vdelecroix]:
> I think we should decouple: upgrading Normaliz and interfacing Normaliz.

+1



---

archive/issue_comments_371874.json:
```json
{
    "body": "<a id='comment:72'></a>I think it would be good to split this ticket into two tickets:\n1. Make `backend='normaliz'` accepts input being in a common embedded real number field. That is the following should work\n\n```\nsage: K.<a> = QuadraticField(2, embedding=AA(2)**(1/2))\nsage: Polyhedron([[0,0],[1,a],[0,2*a],[-1,-a]], base_ring=K, backend='normaliz')\n```\n  And we should also make it so that `backend='normaliz'` is actually automatically chosen if available\n\n```\nsage: Polyhedron([[0,0],[1,a],[0,2*a],[-1,-a]], base_ring=K)   # should use normaliz\n```\n  This would be enough to generate any of the regular polytope examples exactly (including the 600 cells) that could go in the SageMath database `polytopes.`.\n2. (follow-up ticket) When the input are elements in `AA`, or symbolic algebraic, etc, try to figure out how to convert stuff into an embedded number field",
    "created_at": "2019-04-18T14:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371874",
    "user": "https://github.com/videlec"
}
```

<a id='comment:72'></a>I think it would be good to split this ticket into two tickets:
1. Make `backend='normaliz'` accepts input being in a common embedded real number field. That is the following should work

```
sage: K.<a> = QuadraticField(2, embedding=AA(2)**(1/2))
sage: Polyhedron([[0,0],[1,a],[0,2*a],[-1,-a]], base_ring=K, backend='normaliz')
```
  And we should also make it so that `backend='normaliz'` is actually automatically chosen if available

```
sage: Polyhedron([[0,0],[1,a],[0,2*a],[-1,-a]], base_ring=K)   # should use normaliz
```
  This would be enough to generate any of the regular polytope examples exactly (including the 600 cells) that could go in the SageMath database `polytopes.`.
2. (follow-up ticket) When the input are elements in `AA`, or symbolic algebraic, etc, try to figure out how to convert stuff into an embedded number field



---

archive/issue_comments_371875.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-18T19:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371875",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_371876.json:
```json
{
    "body": "<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-04-23T02:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_371877.json:
```json
{
    "body": "<a id='comment:75'></a>I have updated this ticket for 8.8.beta3. Still using the old Normaliz/QNormaliz/PyNormaliz/PyQNormaliz etc., \nbut merged in #20181. \n3 doctest failures.",
    "created_at": "2019-04-23T02:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371877",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:75'></a>I have updated this ticket for 8.8.beta3. Still using the old Normaliz/QNormaliz/PyNormaliz/PyQNormaliz etc., 
but merged in #20181. 
3 doctest failures.



---

archive/issue_comments_371878.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-23T02:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371879.json:
```json
{
    "body": "<a id='comment:77'></a>Replying to [comment:76 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                         |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n> |[7c3d64c](https://git.sagemath.org/sage.git/commit/?id=7c3d64c8a12275511f3d3875d37f48d3cb6857ec)|`Fix up for exact snub cube construction`|\n\n\nJust a small heads-up about #26340 that will conflict with this line.",
    "created_at": "2019-04-23T08:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371879",
    "user": "https://github.com/jplab"
}
```

<a id='comment:77'></a>Replying to [comment:76 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                         |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
> |[7c3d64c](https://git.sagemath.org/sage.git/commit/?id=7c3d64c8a12275511f3d3875d37f48d3cb6857ec)|`Fix up for exact snub cube construction`|


Just a small heads-up about #26340 that will conflict with this line.



---

archive/issue_comments_371880.json:
```json
{
    "body": "<a id='comment:78'></a>#27716 has all the backend work that does not depend on the algebraic stuff.",
    "created_at": "2019-04-23T13:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371880",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:78'></a>#27716 has all the backend work that does not depend on the algebraic stuff.



---

archive/issue_comments_371881.json:
```json
{
    "body": "<a id='comment:79'></a>I will next redo this ticket on top of #27716, #26340, #27682, #20181.",
    "created_at": "2019-04-23T13:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371881",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>I will next redo this ticket on top of #27716, #26340, #27682, #20181.



---

archive/issue_comments_371882.json:
```json
{
    "body": "<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-04-23T15:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_371883.json:
```json
{
    "body": "<a id='comment:81'></a>Replying to [comment:79 mkoeppe]:\n> I will next redo this ticket on top of #27716, #26340, #27682, #20181.\nDone. Replaced the branch.\nMany doctests fail. Needs fixing: https://github.com/Normaliz/PyNormaliz/issues/37",
    "created_at": "2019-04-23T15:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371883",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>Replying to [comment:79 mkoeppe]:
> I will next redo this ticket on top of #27716, #26340, #27682, #20181.
Done. Replaced the branch.
Many doctests fail. Needs fixing: https://github.com/Normaliz/PyNormaliz/issues/37



---

archive/issue_comments_371884.json:
```json
{
    "body": "<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-23T21:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371885.json:
```json
{
    "body": "<a id='comment:83'></a>All tests work now except for one that needs a fix for this: https://github.com/Normaliz/PyNormaliz/issues/41",
    "created_at": "2019-04-23T21:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371885",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:83'></a>All tests work now except for one that needs a fix for this: https://github.com/Normaliz/PyNormaliz/issues/41



---

archive/issue_comments_371886.json:
```json
{
    "body": "<a id='comment:85'></a>With Normaliz master (unreleased), all tests pass except for the broken snub cube example from #26340.",
    "created_at": "2019-04-24T15:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371886",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:85'></a>With Normaliz master (unreleased), all tests pass except for the broken snub cube example from #26340.



---

archive/issue_comments_371887.json:
```json
{
    "body": "<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-24T18:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371888.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-25T07:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371889.json:
```json
{
    "body": "<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-25T14:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371890.json:
```json
{
    "body": "<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-25T14:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371890",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371891.json:
```json
{
    "body": "<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-04-25T14:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_371892.json:
```json
{
    "body": "<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-25T15:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371893.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n+Implements polyhedra over embedded algebraic number fields. \n \n+- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)\n+\n+- the input is allowed to come from various fields, which will be coerced to a number field first via #20181:\n+\n+\\`\\`\\`\n+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')\n+\\`\\`\\`\n+\n+- See doctests in \\`src/sage/geometry/polyhedron/backend_normaliz.py\\` and \\`src/sage/geometry/polyhedron/library.py\\` \n+\n+- For debugging help, we can write out Normaliz input files and PyNormaliz function calls as a side effect by passing \\`verbose=True\\`.  \n \n Comment: 1\n \n```\n",
    "created_at": "2019-04-25T15:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371893",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,16 @@
+Implements polyhedra over embedded algebraic number fields. 
 
+- Preliminary setup within sage: install e-antic, upgrade normaliz/pynormaliz (see #27682)
+
+- the input is allowed to come from various fields, which will be coerced to a number field first via #20181:
+
+\`\`\`
+        sage: x = polygen(ZZ); P = Polyhedron(vertices=[[sqrt(2)], [AA.polynomial_root(x^3-2, RIF(0,3))]], backend='normaliz')
+\`\`\`
+
+- See doctests in \`src/sage/geometry/polyhedron/backend_normaliz.py\` and \`src/sage/geometry/polyhedron/library.py\` 
+
+- For debugging help, we can write out Normaliz input files and PyNormaliz function calls as a side effect by passing \`verbose=True\`.  
 
 Comment: 1
 
```




---

archive/issue_comments_371894.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-25T15:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371894",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_371895.json:
```json
{
    "body": "<a id='comment:92'></a>Ready for review. Builds and tests OK on macOS Mojave.",
    "created_at": "2019-04-25T15:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371895",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:92'></a>Ready for review. Builds and tests OK on macOS Mojave.



---

archive/issue_comments_371896.json:
```json
{
    "body": "<a id='comment:93'></a>Builds on debian stretch.\n\n```\n$ sage -t sage/src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom\ntoo few successful tests, not using stored timings\nGit branch: 25097\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom\nDoctesting 25 files.\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2019-04-25T15:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371896",
    "user": "https://github.com/jplab"
}
```

<a id='comment:93'></a>Builds on debian stretch.

```
$ sage -t sage/src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom
too few successful tests, not using stored timings
Git branch: 25097
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom
Doctesting 25 files.
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_371897.json:
```json
{
    "body": "<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-04-25T17:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_371898.json:
```json
{
    "body": "<a id='comment:95'></a>Merged #25091, works fine after minor changes.",
    "created_at": "2019-04-25T17:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371898",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>Merged #25091, works fine after minor changes.



---

archive/issue_comments_371899.json:
```json
{
    "body": "<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-26T12:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371900.json:
```json
{
    "body": "<a id='comment:97'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-26T14:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:97'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371901.json:
```json
{
    "body": "<a id='comment:99'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T17:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:99'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371902.json:
```json
{
    "body": "An error in convex hull?",
    "created_at": "2019-04-30T07:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371902",
    "user": "https://github.com/jplab"
}
```

An error in convex hull?



---

archive/issue_comments_371903.json:
```json
{
    "body": "<a id='comment:0'></a>Attachment [error.txt](tarball://root/attachments/some-uuid/ticket25097/error.txt) by @mkoeppe created at 2019-05-01 11:27:29\n\nThat error was caused by using an old PyNormaliz.",
    "created_at": "2019-05-01T11:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371903",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>Attachment [error.txt](tarball://root/attachments/some-uuid/ticket25097/error.txt) by @mkoeppe created at 2019-05-01 11:27:29

That error was caused by using an old PyNormaliz.



---

archive/issue_comments_371904.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-01T11:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371905.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-01T17:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371906.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-05-02T20:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_371907.json:
```json
{
    "body": "<a id='comment:4'></a>Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):\n\n```\nsage: W = CoxeterGroup(['I',8])\nsage: n = W.one().canonical_matrix().rank()\nsage: weights = W.fundamental_weights()\nsage: point = [ZZ.one()] * n\nsage: apex = sum(point[i-1] * weights[i] for i in weights.keys())\nsage: non_zero_index = list(apex).index(filter(lambda x: x!=0, apex)[0])\nsage: apex = (QQ(1)/apex[non_zero_index]) * apex\nsage: apex.set_immutable()\nsage: vertices = set()\nsage: br = apex.base_ring()\nsage: for w in W:\n....:     new_point = w * apex\n....:     new_point.set_immutable()\n....:     vertices.add(new_point)\n....:     \nsage: Polyhedron(vertices=vertices, backend='normaliz', base_ring=br,verbose=True)\nTraceback (most recent call last):\n...\nTypeError: -1 of type <type 'sage.rings.number_field.number_field_element.NumberFieldElement_absolute'> not valid to initialize an element of the universal cyclotomic field\n```",
    "created_at": "2019-05-03T10:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371907",
    "user": "https://github.com/jplab"
}
```

<a id='comment:4'></a>Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):

```
sage: W = CoxeterGroup(['I',8])
sage: n = W.one().canonical_matrix().rank()
sage: weights = W.fundamental_weights()
sage: point = [ZZ.one()] * n
sage: apex = sum(point[i-1] * weights[i] for i in weights.keys())
sage: non_zero_index = list(apex).index(filter(lambda x: x!=0, apex)[0])
sage: apex = (QQ(1)/apex[non_zero_index]) * apex
sage: apex.set_immutable()
sage: vertices = set()
sage: br = apex.base_ring()
sage: for w in W:
....:     new_point = w * apex
....:     new_point.set_immutable()
....:     vertices.add(new_point)
....:     
sage: Polyhedron(vertices=vertices, backend='normaliz', base_ring=br,verbose=True)
Traceback (most recent call last):
...
TypeError: -1 of type <type 'sage.rings.number_field.number_field_element.NumberFieldElement_absolute'> not valid to initialize an element of the universal cyclotomic field
```



---

archive/issue_comments_371908.json:
```json
{
    "body": "<a id='comment:5'></a>Unfortunately both of the following conversions fail:\n\n```\nUniversalCyclotomicField()(AA(-1))\nTypeError: -1 of type <class 'sage.rings.qqbar.AlgebraicReal'> not valid to initialize an element of the universal cyclotomic field\n```\nand\n\n```\nsage: K.<sqrt2> = QuadraticField(2)\nsage: UniversalCyclotomicField()(K(-1))\nTypeError: -1 of type <type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic'> not valid to initialize an element of the universal cyclotomic field\n```",
    "created_at": "2019-05-03T12:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371908",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Unfortunately both of the following conversions fail:

```
UniversalCyclotomicField()(AA(-1))
TypeError: -1 of type <class 'sage.rings.qqbar.AlgebraicReal'> not valid to initialize an element of the universal cyclotomic field
```
and

```
sage: K.<sqrt2> = QuadraticField(2)
sage: UniversalCyclotomicField()(K(-1))
TypeError: -1 of type <type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic'> not valid to initialize an element of the universal cyclotomic field
```



---

archive/issue_comments_371909.json:
```json
{
    "body": "<a id='comment:6'></a>This should be a separate ticket",
    "created_at": "2019-05-03T13:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371909",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>This should be a separate ticket



---

archive/issue_comments_371910.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T19:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371911.json:
```json
{
    "body": "<a id='comment:8'></a>There are python3 issues, pyflakes conventions issues, `:::` issues, and 2 missing doctests in `backend_normaliz.py`, see patchbot for more details.\n\nFrom a recent bot, there are the following files that have failing doctests (seems like the optional hashtag is missing):\n\n```\nsage -t --long src/sage/geometry/polyhedron/backend_normaliz.py  # 11 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed\n```",
    "created_at": "2019-05-17T13:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371911",
    "user": "https://github.com/jplab"
}
```

<a id='comment:8'></a>There are python3 issues, pyflakes conventions issues, `:::` issues, and 2 missing doctests in `backend_normaliz.py`, see patchbot for more details.

From a recent bot, there are the following files that have failing doctests (seems like the optional hashtag is missing):

```
sage -t --long src/sage/geometry/polyhedron/backend_normaliz.py  # 11 doctests failed
sage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed
```



---

archive/issue_comments_371912.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-05-17T13:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371912",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_371913.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-17T18:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371914.json:
```json
{
    "body": "<a id='comment:0'></a>Merged in latest version of #25091 and current beta.",
    "created_at": "2019-05-17T19:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371914",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>Merged in latest version of #25091 and current beta.



---

archive/issue_comments_371915.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-17T21:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371916.json:
```json
{
    "body": "<a id='comment:3'></a>Setting it back to needs_review to get a fresh patchbot run.",
    "created_at": "2019-05-17T21:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371916",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Setting it back to needs_review to get a fresh patchbot run.



---

archive/issue_comments_371917.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-17T21:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371917",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_371918.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-17T21:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371919.json:
```json
{
    "body": "<a id='comment:115'></a>Replying to [comment:104 jipilab]:\n> Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):\n\n\nShould we actually allow a complex field such as UCF as the base ring of a polyhedron?",
    "created_at": "2019-05-18T03:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371919",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:115'></a>Replying to [comment:104 jipilab]:
> Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):


Should we actually allow a complex field such as UCF as the base ring of a polyhedron?



---

archive/issue_comments_371920.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-18T13:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371921.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-18T13:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371922.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-18T13:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371923.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-18T14:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371924.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-18T21:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371925.json:
```json
{
    "body": "<a id='comment:122'></a>Replying to [comment:115 mkoeppe]:\n> Replying to [comment:104 jipilab]:\n> > Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):\n\n> \n> Should we actually allow a complex field such as UCF as the base ring of a polyhedron? \n\n\nNot sure. I remember I was not so happy about allowing real algebraic numbers that have a complex parent into polyhedron: it makes things quite intricate in designing the constructor.\n\nThe situation before this ticket was not allowing anything inside of `SymbolicRing` for example, and this would also do the same for `UCF` is the backend field was not given (or perhaps there was an effort to check if one can coerce it in `AA`)... Now, since we accept things that are in the symbolic ring if it is possible to coerce it into an embedded number field... I feel like it would be nice to accept elements of `UCF` if they are real... I remember I had to tweak #20181  so that it would manage to coerce real algebraic numbers even though they are elements of a complex ring.\n\nThat said, I would say that the answer should be 'No' (as far as I understand, complex polyhedra are not really well-defined, or are they?). So, this would be an exception to the idea \"give back a common parent to the elements given by the user and use it as base ring\". I guess the rule should be bound to ultimately \"stay real\".\n\nSo there could be a check to see if the user provided elements from a complex ring (although they are indeed real) and do the appropriate steps to give a real base ring. I do not know how hard implementing this here.",
    "created_at": "2019-05-19T09:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371925",
    "user": "https://github.com/jplab"
}
```

<a id='comment:122'></a>Replying to [comment:115 mkoeppe]:
> Replying to [comment:104 jipilab]:
> > Here is an error happening while coercing the values back into the given base ring (`UCF` in this case):

> 
> Should we actually allow a complex field such as UCF as the base ring of a polyhedron? 


Not sure. I remember I was not so happy about allowing real algebraic numbers that have a complex parent into polyhedron: it makes things quite intricate in designing the constructor.

The situation before this ticket was not allowing anything inside of `SymbolicRing` for example, and this would also do the same for `UCF` is the backend field was not given (or perhaps there was an effort to check if one can coerce it in `AA`)... Now, since we accept things that are in the symbolic ring if it is possible to coerce it into an embedded number field... I feel like it would be nice to accept elements of `UCF` if they are real... I remember I had to tweak #20181  so that it would manage to coerce real algebraic numbers even though they are elements of a complex ring.

That said, I would say that the answer should be 'No' (as far as I understand, complex polyhedra are not really well-defined, or are they?). So, this would be an exception to the idea "give back a common parent to the elements given by the user and use it as base ring". I guess the rule should be bound to ultimately "stay real".

So there could be a check to see if the user provided elements from a complex ring (although they are indeed real) and do the appropriate steps to give a real base ring. I do not know how hard implementing this here.



---

archive/issue_comments_371926.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-05-22T16:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371926",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_371927.json:
```json
{
    "body": "<a id='comment:3'></a>There are two doctest failing in the tutorials (coming from changing an error message):\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed\nsage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\nsage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed\n----------------------------------------------------------------------\n```\n\nThe first two might be spurious errors, but maybe they come from employing polyhedra...",
    "created_at": "2019-05-22T16:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371927",
    "user": "https://github.com/jplab"
}
```

<a id='comment:3'></a>There are two doctest failing in the tutorials (coming from changing an error message):

```
----------------------------------------------------------------------
sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed
sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
sage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed
----------------------------------------------------------------------
```

The first two might be spurious errors, but maybe they come from employing polyhedra...



---

archive/issue_comments_371928.json:
```json
{
    "body": "<a id='comment:124'></a>Replying to [comment:123 jipilab]:\n> There are two doctest failing in the tutorials (coming from changing an error message):\n> \n> \n> ```\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n> sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\n> sage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed\n> ----------------------------------------------------------------------\n> ```\n> \n> The first two might be spurious errors, but maybe they come from employing polyhedra...\n\n\nActually, there is some dirt in the traceback for the errors on the branch. Most probably this is the cause of the breaking doctests...",
    "created_at": "2019-05-22T16:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371928",
    "user": "https://github.com/jplab"
}
```

<a id='comment:124'></a>Replying to [comment:123 jipilab]:
> There are two doctest failing in the tutorials (coming from changing an error message):
> 
> 
> ```
> ----------------------------------------------------------------------
> sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed
> sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
> sage -t --long src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst  # 2 doctests failed
> ----------------------------------------------------------------------
> ```
> 
> The first two might be spurious errors, but maybe they come from employing polyhedra...


Actually, there is some dirt in the traceback for the errors on the branch. Most probably this is the cause of the breaking doctests...



---

archive/issue_comments_371929.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-23T01:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371930.json:
```json
{
    "body": "<a id='comment:6'></a>Fixed the doctest and merged in the newest beta.",
    "created_at": "2019-05-23T01:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371930",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Fixed the doctest and merged in the newest beta.



---

archive/issue_comments_371931.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-23T01:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371931",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_371932.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-07T19:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371932",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_371933.json:
```json
{
    "body": "<a id='comment:7'></a>There is 1 doctest failing because of #21161. :-/",
    "created_at": "2019-06-07T19:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371933",
    "user": "https://github.com/jplab"
}
```

<a id='comment:7'></a>There is 1 doctest failing because of #21161. :-/



---

archive/issue_comments_371934.json:
```json
{
    "body": "<a id='comment:9'></a>Now with #27965, we may get a conflict in snub dodecahedron. I was not quick enough to warn about it on the ticket #27965 about the current one...",
    "created_at": "2019-06-11T19:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371934",
    "user": "https://github.com/jplab"
}
```

<a id='comment:9'></a>Now with #27965, we may get a conflict in snub dodecahedron. I was not quick enough to warn about it on the ticket #27965 about the current one...



---

archive/issue_comments_371935.json:
```json
{
    "body": "<a id='comment:0'></a>#27965 should be merged into this ticket to avoid yet another conflict.\n\nThe other ticket allows to \"whitelist\" geometry for py3, probably asap for it to be in the next release.\n\n... that said, I would also like to see this ticket in the next release so that we can move on to further enrich normaliz' interfacing...",
    "created_at": "2019-06-12T07:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371935",
    "user": "https://github.com/jplab"
}
```

<a id='comment:0'></a>#27965 should be merged into this ticket to avoid yet another conflict.

The other ticket allows to "whitelist" geometry for py3, probably asap for it to be in the next release.

... that said, I would also like to see this ticket in the next release so that we can move on to further enrich normaliz' interfacing...



---

archive/issue_comments_371936.json:
```json
{
    "body": "<a id='comment:1'></a>Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371936",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_062936.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62936"
}
```



---

archive/issue_events_062937.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62937"
}
```



---

archive/issue_comments_371937.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-19T21:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371938.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-19T21:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371938",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_371939.json:
```json
{
    "body": "<a id='comment:4'></a>Looks good to me now. I would say this is ready and I would put it as positive review, with Vincent also as a reviewer too.\n\n`@`Vincent: Let us know if you agree. It would be good to know if there are last things to be aware of.",
    "created_at": "2019-06-21T09:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371939",
    "user": "https://github.com/jplab"
}
```

<a id='comment:4'></a>Looks good to me now. I would say this is ready and I would put it as positive review, with Vincent also as a reviewer too.

`@`Vincent: Let us know if you agree. It would be good to know if there are last things to be aware of.



---

archive/issue_comments_371940.json:
```json
{
    "body": "<a id='comment:5'></a>ping!\n\nAny last comments Vincent?",
    "created_at": "2019-07-05T07:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371940",
    "user": "https://github.com/jplab"
}
```

<a id='comment:5'></a>ping!

Any last comments Vincent?



---

archive/issue_comments_371941.json:
```json
{
    "body": "<a id='comment:6'></a>doctest failure in /library with py3",
    "created_at": "2019-07-07T09:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371941",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>doctest failure in /library with py3



---

archive/issue_comments_371942.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-07T09:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371942",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_371943.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T19:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_371944.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-08T19:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371944",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_371945.json:
```json
{
    "body": "<a id='comment:9'></a>The last changes looks reasonable to me.",
    "created_at": "2019-07-11T13:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371945",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>The last changes looks reasonable to me.



---

archive/issue_comments_371946.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-16T16:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371946",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_371947.json:
```json
{
    "body": "<a id='comment:0'></a>It looks good to me too. I set it to positive review.\n\nJust a FYI: if there are any other comments, next week is the Sage days in Bonn and vdelecroix and me are going to be available to work on follow-ups if need be.",
    "created_at": "2019-07-16T16:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371947",
    "user": "https://github.com/jplab"
}
```

<a id='comment:0'></a>It looks good to me too. I set it to positive review.

Just a FYI: if there are any other comments, next week is the Sage days in Bonn and vdelecroix and me are going to be available to work on follow-ups if need be.



---

archive/issue_events_062938.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-18T21:02:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25097#event-62938"
}
```



---

archive/issue_comments_371948.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-18T21:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25097#issuecomment-371948",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
