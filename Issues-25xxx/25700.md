# Issue 25700: Upgrade pexpect to 4.6.0

archive/issues_025463.json:
```json
{
    "body": "**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz\n\nCC:  @jdemeyer @kiwifb @slel\n\nKeywords: days94, upgrade, pexpect\n\nBranch/Commit: 1c35bacd91a87db59d19ab78c2ecbfa17e38e240\n\nReviewer: Vincent Klein\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25700\n\n",
    "closed_at": "2018-08-05T08:17:54Z",
    "created_at": "2018-06-29T12:23:57Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Upgrade pexpect to 4.6.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25700",
    "user": "https://github.com/vinklein"
}
```
**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz

CC:  @jdemeyer @kiwifb @slel

Keywords: days94, upgrade, pexpect

Branch/Commit: 1c35bacd91a87db59d19ab78c2ecbfa17e38e240

Reviewer: Vincent Klein

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25700





---

archive/issue_comments_486704.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'll have a look at this right now, just in case it turns out to be trivial.",
    "created_at": "2018-06-29T13:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
I'll have a look at this right now, just in case it turns out to be trivial.



---

archive/issue_comments_486705.json:
```json
{
    "body": "Changing keywords from \"\" to \"days94\".",
    "created_at": "2018-06-29T13:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486705",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "" to "days94".



---

archive/issue_comments_486706.json:
```json
{
    "body": "Changing keywords from \"days94\" to \"\".",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486706",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "days94" to "".



---

archive/issue_comments_486707.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486707",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_486708.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As pexpect [PR#304](https://github.com/pexpect/pexpect/pull/304) is not merged we should port the patch `read_more_bytes.patch`.\n+**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz\n``````\n",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486708",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-As pexpect [PR#304](https://github.com/pexpect/pexpect/pull/304) is not merged we should port the patch `read_more_bytes.patch`.
+**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz
``````




---

archive/issue_comments_486709.json:
```json
{
    "body": "Changing keywords from \"\" to \"days94\".",
    "created_at": "2018-06-29T14:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486709",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "" to "days94".



---

archive/issue_comments_486710.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/upgrade_pexpect_to_4_6_0\"",
    "created_at": "2018-06-29T14:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486710",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/upgrade_pexpect_to_4_6_0"



---

archive/issue_comments_486711.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[dd6e501](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)|`Upgrade pexpect`|",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486711",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[dd6e501](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)|`Upgrade pexpect`|



---

archive/issue_comments_486712.json:
```json
{
    "body": "Changing commit from \"\" to \"dd6e501aea8b1751b28b021f8ccc7256033e630b\"",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486712",
    "user": "https://github.com/vinklein"
}
```

Changing commit from "" to "dd6e501aea8b1751b28b021f8ccc7256033e630b"



---

archive/issue_comments_486713.json:
```json
{
    "body": "Set assignee to @vinklein.",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486713",
    "user": "https://github.com/vinklein"
}
```

Set assignee to @vinklein.



---

archive/issue_comments_486714.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|",
    "created_at": "2018-06-29T15:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|



---

archive/issue_comments_486715.json:
```json
{
    "body": "Changing commit from \"dd6e501aea8b1751b28b021f8ccc7256033e630b\" to \"b6b5b5cd387693e21705feba65fdf2409e9e051d\"",
    "created_at": "2018-06-29T15:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dd6e501aea8b1751b28b021f8ccc7256033e630b" to "b6b5b5cd387693e21705feba65fdf2409e9e051d"



---

archive/issue_comments_486716.json:
```json
{
    "body": "Remove assignee @vinklein.",
    "created_at": "2018-06-29T15:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486716",
    "user": "https://github.com/vinklein"
}
```

Remove assignee @vinklein.



---

archive/issue_comments_486717.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|\n\n---\nNew commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|",
    "created_at": "2018-06-29T15:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486717",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|

---
New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[b6b5b5c](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)|`Upgrade pexpect`|



---

archive/issue_comments_486718.json:
```json
{
    "body": "Changing commit from \"b6b5b5cd387693e21705feba65fdf2409e9e051d\" to \"1c35bacd91a87db59d19ab78c2ecbfa17e38e240\"",
    "created_at": "2018-06-29T16:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b6b5b5cd387693e21705feba65fdf2409e9e051d" to "1c35bacd91a87db59d19ab78c2ecbfa17e38e240"



---

archive/issue_comments_486719.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[1c35bac](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)|`Upgrade pexpect`|",
    "created_at": "2018-06-29T16:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[1c35bac](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)|`Upgrade pexpect`|



---

archive/issue_comments_486720.json:
```json
{
    "body": "<a id='comment:10'></a>\nAfter rebasing the upstream patch https://github.com/pexpect/pexpect/pull/304 this is trivial.",
    "created_at": "2018-06-29T16:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486720",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
After rebasing the upstream patch https://github.com/pexpect/pexpect/pull/304 this is trivial.



---

archive/issue_comments_486721.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-29T16:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486721",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_486722.json:
```json
{
    "body": "<a id='comment:11'></a>\nIn case somebody wonders why the patch is needed:\n\n**With** the Sage patch:\n\n```\nsage: %time _ = str(gp(\"2^2^22\"))\nCPU times: user 21 ms, sys: 21 ms, total: 42 ms\nWall time: 243 ms\n```\n\n**Without** the Sage patch:\n\n```\nsage: %time _ = str(gp(\"2^2^22\"))\nCPU times: user 213 ms, sys: 20 ms, total: 233 ms\nWall time: 432 ms\n```",
    "created_at": "2018-06-29T16:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486722",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
In case somebody wonders why the patch is needed:

**With** the Sage patch:

```
sage: %time _ = str(gp("2^2^22"))
CPU times: user 21 ms, sys: 21 ms, total: 42 ms
Wall time: 243 ms
```

**Without** the Sage patch:

```
sage: %time _ = str(gp("2^2^22"))
CPU times: user 213 ms, sys: 20 ms, total: 233 ms
Wall time: 432 ms
```



---

archive/issue_comments_486723.json:
```json
{
    "body": "Changing keywords from \"days94\" to \"days94, upgrade, pexpect\".",
    "created_at": "2018-06-29T22:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486723",
    "user": "https://github.com/slel"
}
```

Changing keywords from "days94" to "days94, upgrade, pexpect".



---

archive/issue_comments_486724.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Klein\"",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486724",
    "user": "https://github.com/vinklein"
}
```

Changing reviewer from "" to "Vincent Klein"



---

archive/issue_comments_486725.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486725",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_486726.json:
```json
{
    "body": "<a id='comment:13'></a>\nAll tests passed. Looks good to me.",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486726",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:13'></a>
All tests passed. Looks good to me.



---

archive/issue_comments_486727.json:
```json
{
    "body": "<a id='comment:14'></a>\nConda uses pexpect 4.6.0 already and strangely R hangs on the first invocation there. My first thought was that the 4.6.0 upgrade was to blame somehow but since Sage uses an almost unpatched pexpect in this ticket, this seems not to be the case.\n\nIt would be great if someone more familiar with pexpect could have a look at https://github.com/conda-forge/sagelib-feedstock/issues/19#issuecomment-402557595 and help out with some ideas there.\n\nSorry for the noise on this ticket (as this is somewhat unrelated.)",
    "created_at": "2018-07-09T08:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486727",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
Conda uses pexpect 4.6.0 already and strangely R hangs on the first invocation there. My first thought was that the 4.6.0 upgrade was to blame somehow but since Sage uses an almost unpatched pexpect in this ticket, this seems not to be the case.

It would be great if someone more familiar with pexpect could have a look at https://github.com/conda-forge/sagelib-feedstock/issues/19#issuecomment-402557595 and help out with some ideas there.

Sorry for the noise on this ticket (as this is somewhat unrelated.)



---

archive/issue_events_080983.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:17:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25700#event-80983"
}
```



---

archive/issue_comments_486728.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/upgrade_pexpect_to_4_6_0\" to \"1c35bacd91a87db59d19ab78c2ecbfa17e38e240\"",
    "created_at": "2018-08-05T08:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486728",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/upgrade_pexpect_to_4_6_0" to "1c35bacd91a87db59d19ab78c2ecbfa17e38e240"



---

archive/issue_comments_486729.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-486729",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
