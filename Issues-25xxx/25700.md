# Issue 25700: Upgrade pexpect to 4.6.0

archive/issues_025463.json:
```json
{
    "body": "**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz\n\n**CC:**  @jdemeyer @kiwifb @slel\n\n**Keywords:** days94, upgrade, pexpect\n\n**Branch/Commit:** [1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)\n\n**Reviewer:** Vincent Klein\n\n**Author:** Jeroen Demeyer\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25700\n\n",
    "closed_at": "2018-08-05T08:17:54Z",
    "created_at": "2018-06-29T12:23:57Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Upgrade pexpect to 4.6.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25700",
    "user": "https://github.com/vinklein"
}
```
**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz

**CC:**  @jdemeyer @kiwifb @slel

**Keywords:** days94, upgrade, pexpect

**Branch/Commit:** [1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)

**Reviewer:** Vincent Klein

**Author:** Jeroen Demeyer

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/25700





---

archive/issue_comments_494811.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'll have a look at this right now, just in case it turns out to be trivial.",
    "created_at": "2018-06-29T13:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494811",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
I'll have a look at this right now, just in case it turns out to be trivial.



---

archive/issue_comments_494812.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days94\".",
    "created_at": "2018-06-29T13:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494812",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "days94".



---

archive/issue_comments_494813.json:
```json
{
    "body": "**Changing keywords** from \"days94\" to \"\".",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494813",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "days94" to "".



---

archive/issue_comments_494814.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494814",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_494815.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As pexpect [PR#304](https://github.com/pexpect/pexpect/pull/304) is not merged we should port the patch `read_more_bytes.patch`.\n+**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz\n``````\n",
    "created_at": "2018-06-29T13:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494815",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-As pexpect [PR#304](https://github.com/pexpect/pexpect/pull/304) is not merged we should port the patch `read_more_bytes.patch`.
+**Tarball**: https://files.pythonhosted.org/packages/89/43/07d07654ee3e25235d8cea4164cdee0ec39d1fda8e9203156ebe403ffda4/pexpect-4.6.0.tar.gz
``````




---

archive/issue_comments_494816.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days94\".",
    "created_at": "2018-06-29T14:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494816",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "days94".



---

archive/issue_comments_494817.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_pexpect_to_4_6_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pexpect_to_4_6_0)",
    "created_at": "2018-06-29T14:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494817",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_pexpect_to_4_6_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pexpect_to_4_6_0)



---

archive/issue_comments_494818.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b\">dd6e501</a></td><td><code>Upgrade pexpect</code></td></tr></table>\n",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494818",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b">dd6e501</a></td><td><code>Upgrade pexpect</code></td></tr></table>




---

archive/issue_comments_494819.json:
```json
{
    "body": "**Commit:** [dd6e501aea8b1751b28b021f8ccc7256033e630b](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494819",
    "user": "https://github.com/vinklein"
}
```

**Commit:** [dd6e501aea8b1751b28b021f8ccc7256033e630b](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)



---

archive/issue_comments_494820.json:
```json
{
    "body": "**Assignee:** @vinklein",
    "created_at": "2018-06-29T15:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494820",
    "user": "https://github.com/vinklein"
}
```

**Assignee:** @vinklein



---

archive/issue_comments_494821.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d\">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>\n",
    "created_at": "2018-06-29T15:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>




---

archive/issue_comments_494822.json:
```json
{
    "body": "**Changing commit** from \"[dd6e501aea8b1751b28b021f8ccc7256033e630b](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)\" to \"[b6b5b5cd387693e21705feba65fdf2409e9e051d](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)\".",
    "created_at": "2018-06-29T15:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dd6e501aea8b1751b28b021f8ccc7256033e630b](https://github.com/sagemath/sagetrac-mirror/commit/dd6e501aea8b1751b28b021f8ccc7256033e630b)" to "[b6b5b5cd387693e21705feba65fdf2409e9e051d](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)".



---

archive/issue_comments_494823.json:
```json
{
    "body": "**Remove assignee** @vinklein.",
    "created_at": "2018-06-29T15:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494823",
    "user": "https://github.com/vinklein"
}
```

**Remove assignee** @vinklein.



---

archive/issue_comments_494824.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d\">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d\">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>\n",
    "created_at": "2018-06-29T15:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494824",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d">b6b5b5c</a></td><td><code>Upgrade pexpect</code></td></tr></table>




---

archive/issue_comments_494825.json:
```json
{
    "body": "**Changing commit** from \"[b6b5b5cd387693e21705feba65fdf2409e9e051d](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)\" to \"[1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)\".",
    "created_at": "2018-06-29T16:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b6b5b5cd387693e21705feba65fdf2409e9e051d](https://github.com/sagemath/sagetrac-mirror/commit/b6b5b5cd387693e21705feba65fdf2409e9e051d)" to "[1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)".



---

archive/issue_comments_494826.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240\">1c35bac</a></td><td><code>Upgrade pexpect</code></td></tr></table>\n",
    "created_at": "2018-06-29T16:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240">1c35bac</a></td><td><code>Upgrade pexpect</code></td></tr></table>




---

archive/issue_comments_494827.json:
```json
{
    "body": "<a id='comment:10'></a>\nAfter rebasing the upstream patch https://github.com/pexpect/pexpect/pull/304 this is trivial.",
    "created_at": "2018-06-29T16:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494827",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
After rebasing the upstream patch https://github.com/pexpect/pexpect/pull/304 this is trivial.



---

archive/issue_comments_494828.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-06-29T16:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494828",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_494829.json:
```json
{
    "body": "<a id='comment:11'></a>\nIn case somebody wonders why the patch is needed:\n\n**With** the Sage patch:\n\n```\nsage: %time _ = str(gp(\"2^2^22\"))\nCPU times: user 21 ms, sys: 21 ms, total: 42 ms\nWall time: 243 ms\n```\n\n**Without** the Sage patch:\n\n```\nsage: %time _ = str(gp(\"2^2^22\"))\nCPU times: user 213 ms, sys: 20 ms, total: 233 ms\nWall time: 432 ms\n```",
    "created_at": "2018-06-29T16:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494829",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
In case somebody wonders why the patch is needed:

**With** the Sage patch:

```
sage: %time _ = str(gp("2^2^22"))
CPU times: user 21 ms, sys: 21 ms, total: 42 ms
Wall time: 243 ms
```

**Without** the Sage patch:

```
sage: %time _ = str(gp("2^2^22"))
CPU times: user 213 ms, sys: 20 ms, total: 233 ms
Wall time: 432 ms
```



---

archive/issue_comments_494830.json:
```json
{
    "body": "**Changing keywords** from \"days94\" to \"days94, upgrade, pexpect\".",
    "created_at": "2018-06-29T22:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494830",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "days94" to "days94, upgrade, pexpect".



---

archive/issue_comments_494831.json:
```json
{
    "body": "**Reviewer:** Vincent Klein",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494831",
    "user": "https://github.com/vinklein"
}
```

**Reviewer:** Vincent Klein



---

archive/issue_comments_494832.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494832",
    "user": "https://github.com/vinklein"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_494833.json:
```json
{
    "body": "<a id='comment:13'></a>\nAll tests passed. Looks good to me.",
    "created_at": "2018-07-02T05:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494833",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:13'></a>
All tests passed. Looks good to me.



---

archive/issue_comments_494834.json:
```json
{
    "body": "<a id='comment:14'></a>\nConda uses pexpect 4.6.0 already and strangely R hangs on the first invocation there. My first thought was that the 4.6.0 upgrade was to blame somehow but since Sage uses an almost unpatched pexpect in this ticket, this seems not to be the case.\n\nIt would be great if someone more familiar with pexpect could have a look at https://github.com/conda-forge/sagelib-feedstock/issues/19#issuecomment-402557595 and help out with some ideas there.\n\nSorry for the noise on this ticket (as this is somewhat unrelated.)",
    "created_at": "2018-07-09T08:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494834",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
Conda uses pexpect 4.6.0 already and strangely R hangs on the first invocation there. My first thought was that the 4.6.0 upgrade was to blame somehow but since Sage uses an almost unpatched pexpect in this ticket, this seems not to be the case.

It would be great if someone more familiar with pexpect could have a look at https://github.com/conda-forge/sagelib-feedstock/issues/19#issuecomment-402557595 and help out with some ideas there.

Sorry for the noise on this ticket (as this is somewhat unrelated.)



---

archive/issue_events_073137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:17:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25700#event-73137"
}
```



---

archive/issue_comments_494835.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_pexpect_to_4_6_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pexpect_to_4_6_0)\" to \"[1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)\".",
    "created_at": "2018-08-05T08:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494835",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_pexpect_to_4_6_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pexpect_to_4_6_0)" to "[1c35bacd91a87db59d19ab78c2ecbfa17e38e240](https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240)".



---

archive/issue_comments_494836.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2018-08-05T08:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25700#issuecomment-494836",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
