# Issue 25051: Add DESTDIR support to additional Python packages; upgrade pip to latest patch release

archive/issues_024814.json:
```json
{
    "body": "These are packages for which the `spkg-install` requires more than just `sdh_pip_install`.  See commit message for more details.\n\n* numpy\n* pillow\n* pip\n* setuptools\n\nAlso upgrades pip to the latest patch release (9.0.3) while we're at it.\n\n**Upstream tarball:** https://pypi.python.org/packages/c4/44/e6b8056b6c8f2bfd1445cc9990f478930d8e3459e9dbf5b8e2d2922d64d3/pip-9.0.3.tar.gz\n\n**Keywords:** destdir cysignals pip setuptools pillow numpy\n\n**Branch/Commit:** [5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Erik Bray\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25051\n\n",
    "closed_at": "2018-04-16T22:06:25Z",
    "created_at": "2018-03-28T13:59:11Z",
    "labels": [
        "component: build",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Add DESTDIR support to additional Python packages; upgrade pip to latest patch release",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25051",
    "user": "https://github.com/embray"
}
```
These are packages for which the `spkg-install` requires more than just `sdh_pip_install`.  See commit message for more details.

* numpy
* pillow
* pip
* setuptools

Also upgrades pip to the latest patch release (9.0.3) while we're at it.

**Upstream tarball:** https://pypi.python.org/packages/c4/44/e6b8056b6c8f2bfd1445cc9990f478930d8e3459e9dbf5b8e2d2922d64d3/pip-9.0.3.tar.gz

**Keywords:** destdir cysignals pip setuptools pillow numpy

**Branch/Commit:** [5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)

**Reviewer:** Jeroen Demeyer

**Author:** Erik Bray

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/25051





---

archive/issue_comments_478998.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-03-28T13:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-478998",
    "user": "https://github.com/embray"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_478999.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-03-28T22:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-478999",
    "user": "https://github.com/saraedum"
}
```


**Changing status** from needs_review to needs_work.



---

archive/issue_comments_479000.json:
```json
{
    "body": "**Work_Issues:** merge conflicts",
    "created_at": "2018-03-28T22:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479000",
    "user": "https://github.com/saraedum"
}
```


**Work_Issues:** merge conflicts



---

archive/issue_comments_479001.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da\">daaab8f</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr></table>\n",
    "created_at": "2018-03-29T09:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479001",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da">daaab8f</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr></table>




---

archive/issue_comments_479002.json:
```json
{
    "body": "**Changing commit** from \"[293720caa6bc1a731df396594eccb99e9bb5283d](https://github.com/sagemath/sagetrac-mirror/commit/293720caa6bc1a731df396594eccb99e9bb5283d)\" to \"[daaab8f72eea10c86d29c47cd6c4b3ce4101e1da](https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da)\".",
    "created_at": "2018-03-29T09:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[293720caa6bc1a731df396594eccb99e9bb5283d](https://github.com/sagemath/sagetrac-mirror/commit/293720caa6bc1a731df396594eccb99e9bb5283d)" to "[daaab8f72eea10c86d29c47cd6c4b3ce4101e1da](https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da)".



---

archive/issue_comments_479003.json:
```json
{
    "body": "<a id='comment:5'></a>\nRebased.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da\">daaab8f</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr></table>\n",
    "created_at": "2018-03-29T09:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479003",
    "user": "https://github.com/embray"
}
```


<a id='comment:5'></a>
Rebased.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da">daaab8f</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr></table>




---

archive/issue_comments_479004.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-03-29T09:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479004",
    "user": "https://github.com/embray"
}
```


**Changing status** from needs_work to needs_review.



---

archive/issue_comments_479005.json:
```json
{
    "body": "**Changing work_issues** from \"merge conflicts\" to \"\".",
    "created_at": "2018-03-29T10:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479005",
    "user": "https://github.com/jdemeyer"
}
```


**Changing work_issues** from "merge conflicts" to "".



---

archive/issue_comments_479006.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2018-03-29T10:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479006",
    "user": "https://github.com/jdemeyer"
}
```


**Changing status** from needs_review to needs_info.



---

archive/issue_comments_479007.json:
```json
{
    "body": "<a id='comment:7'></a>\nFor `numpy`, the \"touching all includes\" should be obsolete because of the changes to tarball extraction.",
    "created_at": "2018-03-29T10:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479007",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:7'></a>
For `numpy`, the "touching all includes" should be obsolete because of the changes to tarball extraction.



---

archive/issue_comments_479008.json:
```json
{
    "body": "<a id='comment:8'></a>\n`--root` implies `--single-version-externally-managed`:\n\n```python\n    def finalize_options(self):\n        orig.install.finalize_options(self)\n        if self.root:\n            self.single_version_externally_managed = True\n        elif self.single_version_externally_managed:\n            if not self.root and not self.record:\n                raise DistutilsArgError(\n                    \"You must specify --record or --root when building system\"\n                    \" packages\"\n                )\n```\n\nMaybe you want to keep `--single-version-externally-managed` for clarity, but there is no need to.",
    "created_at": "2018-03-29T10:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479008",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:8'></a>
`--root` implies `--single-version-externally-managed`:

```python
    def finalize_options(self):
        orig.install.finalize_options(self)
        if self.root:
            self.single_version_externally_managed = True
        elif self.single_version_externally_managed:
            if not self.root and not self.record:
                raise DistutilsArgError(
                    "You must specify --record or --root when building system"
                    " packages"
                )
```

Maybe you want to keep `--single-version-externally-managed` for clarity, but there is no need to.



---

archive/issue_comments_479009.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2018-03-29T10:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479009",
    "user": "https://github.com/jdemeyer"
}
```


**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_479010.json:
```json
{
    "body": "<a id='comment:10'></a>\nIf you're changing `pip` anyway, would it make sense to upgrade to 9.0.3 while you're at it?\n\nhttps://pypi.python.org/pypi/pip",
    "created_at": "2018-03-29T10:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479010",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:10'></a>
If you're changing `pip` anyway, would it make sense to upgrade to 9.0.3 while you're at it?

https://pypi.python.org/pypi/pip



---

archive/issue_comments_479011.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A7):\n> For `numpy`, the \"touching all includes\" should be obsolete because of the changes to tarball extraction.\n\n\n+1\n\nReplying to [jdemeyer](#comment%3A8):\n> `--root` implies `--single-version-externally-managed`\n\n\nWhat I'm not sure about here (I haven't tried it) is if `--root=\"\"` (e.g. if `$SAGE_DESTDIR`) were empty.  What I do know in that case is that if defaults `/`, but I don't know if it still automatically implies `--single-version-blah`.  I'd say it *should* but I don't know.  I think it's fine just to keep it.\n\nReplying to [jdemeyer](#comment%3A10):\n> If you're changing `pip` anyway, would it make sense to upgrade to 9.0.3 while you're at it?\n\n\nYeah, the thought did cross my mind.  Might as well.",
    "created_at": "2018-03-29T14:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479011",
    "user": "https://github.com/embray"
}
```


<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A7):
> For `numpy`, the "touching all includes" should be obsolete because of the changes to tarball extraction.


+1

Replying to [jdemeyer](#comment%3A8):
> `--root` implies `--single-version-externally-managed`


What I'm not sure about here (I haven't tried it) is if `--root=""` (e.g. if `$SAGE_DESTDIR`) were empty.  What I do know in that case is that if defaults `/`, but I don't know if it still automatically implies `--single-version-blah`.  I'd say it *should* but I don't know.  I think it's fine just to keep it.

Replying to [jdemeyer](#comment%3A10):
> If you're changing `pip` anyway, would it make sense to upgrade to 9.0.3 while you're at it?


Yeah, the thought did cross my mind.  Might as well.



---

archive/issue_comments_479012.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8530130172a86afaa552587e53060cf24e26efe2\">8530130</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f\">683a51e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>\n",
    "created_at": "2018-03-29T15:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8530130172a86afaa552587e53060cf24e26efe2">8530130</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f">683a51e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>




---

archive/issue_comments_479013.json:
```json
{
    "body": "**Changing commit** from \"[daaab8f72eea10c86d29c47cd6c4b3ce4101e1da](https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da)\" to \"[683a51ecd0bc0edd33cb2146f3876bf50fd8620f](https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f)\".",
    "created_at": "2018-03-29T15:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[daaab8f72eea10c86d29c47cd6c4b3ce4101e1da](https://github.com/sagemath/sagetrac-mirror/commit/daaab8f72eea10c86d29c47cd6c4b3ce4101e1da)" to "[683a51ecd0bc0edd33cb2146f3876bf50fd8620f](https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f)".



---

archive/issue_comments_479014.json:
```json
{
    "body": "<a id='comment:13'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8530130172a86afaa552587e53060cf24e26efe2\">8530130</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f\">683a51e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>\n",
    "created_at": "2018-03-29T15:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479014",
    "user": "https://github.com/embray"
}
```


<a id='comment:13'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8530130172a86afaa552587e53060cf24e26efe2">8530130</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f">683a51e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>




---

archive/issue_comments_479015.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2018-03-29T15:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479015",
    "user": "https://github.com/embray"
}
```


**Changing status** from needs_info to needs_review.



---

archive/issue_events_071491.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "rename": {
        "from": "Add DESTDIR support to additional Python packages",
        "to": "Add DESTDIR support to additional Python packages; upgrade pip to latest patch release"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25051#event-71491"
}
```




---

archive/issue_comments_479016.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,3 +7,7 @@\n * pillow\n * pip\n * setuptools\n+\n+Also upgrades pip to the latest patch release (9.0.3) while we're at it.\n+\n+**Upstream tarball:** https://pypi.python.org/packages/c4/44/e6b8056b6c8f2bfd1445cc9990f478930d8e3459e9dbf5b8e2d2922d64d3/pip-9.0.3.tar.gz\n``````\n",
    "created_at": "2018-03-29T15:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479016",
    "user": "https://github.com/embray"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -7,3 +7,7 @@
 * pillow
 * pip
 * setuptools
+
+Also upgrades pip to the latest patch release (9.0.3) while we're at it.
+
+**Upstream tarball:** https://pypi.python.org/packages/c4/44/e6b8056b6c8f2bfd1445cc9990f478930d8e3459e9dbf5b8e2d2922d64d3/pip-9.0.3.tar.gz
``````




---

archive/issue_comments_479017.json:
```json
{
    "body": "<a id='comment:14'></a>\nTesting...",
    "created_at": "2018-03-30T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479017",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:14'></a>
Testing...



---

archive/issue_comments_479018.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-03-30T15:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479018",
    "user": "https://github.com/jdemeyer"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_comments_479019.json:
```json
{
    "body": "<a id='comment:16'></a>\nI'm instead dealing with cysignals in #25092.",
    "created_at": "2018-04-06T13:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479019",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:16'></a>
I'm instead dealing with cysignals in #25092.



---

archive/issue_comments_479020.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2018-04-06T13:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479020",
    "user": "https://github.com/jdemeyer"
}
```


**Changing status** from positive_review to needs_work.



---

archive/issue_comments_479021.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-python-misc)\" to \"[u/jdemeyer/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/build/destdir-python-misc)\".",
    "created_at": "2018-04-06T13:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479021",
    "user": "https://github.com/jdemeyer"
}
```


**Changing branch** from "[u/embray/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-python-misc)" to "[u/jdemeyer/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/build/destdir-python-misc)".



---

archive/issue_comments_479022.json:
```json
{
    "body": "**Changing commit** from \"[683a51ecd0bc0edd33cb2146f3876bf50fd8620f](https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f)\" to \"[5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)\".",
    "created_at": "2018-04-06T13:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479022",
    "user": "https://github.com/jdemeyer"
}
```


**Changing commit** from "[683a51ecd0bc0edd33cb2146f3876bf50fd8620f](https://github.com/sagemath/sagetrac-mirror/commit/683a51ecd0bc0edd33cb2146f3876bf50fd8620f)" to "[5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)".



---

archive/issue_comments_479023.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,5 @@\n These are packages for which the `spkg-install` requires more than just `sdh_pip_install`.  See commit message for more details.\n \n-Implements #23023 for:\n-\n-* cysignals\n * numpy\n * pillow\n * pip\n``````\n",
    "created_at": "2018-04-06T13:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479023",
    "user": "https://github.com/jdemeyer"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,5 @@
 These are packages for which the `spkg-install` requires more than just `sdh_pip_install`.  See commit message for more details.
 
-Implements #23023 for:
-
-* cysignals
 * numpy
 * pillow
 * pip
``````




---

archive/issue_comments_479024.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2018-04-06T13:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479024",
    "user": "https://github.com/jdemeyer"
}
```


**Changing status** from needs_work to positive_review.



---

archive/issue_comments_479025.json:
```json
{
    "body": "<a id='comment:18'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bed4475d96e23e5a6cf037a367ccb00433e9d2d\">6bed447</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5ab0bbb3181e9a03b6ffdcfab13894cdef7147d\">c5ab0bb</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1\">5bdfd4e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>\n",
    "created_at": "2018-04-06T13:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479025",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:18'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bed4475d96e23e5a6cf037a367ccb00433e9d2d">6bed447</a></td><td><code>Update additional Python packages with DESTDIR support.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5ab0bbb3181e9a03b6ffdcfab13894cdef7147d">c5ab0bb</a></td><td><code>this stuff should not be necessary any longer since #24567 fixed all files extracted from spkg tarballs to have the timestamp of their extraction time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1">5bdfd4e</a></td><td><code>upgrade pip to 9.0.3</code></td></tr></table>




---

archive/issue_comments_479026.json:
```json
{
    "body": "<a id='comment:19'></a>\nMaking this ticket a blocker: after PyPI disabled TLSv1 in early April 2018,\none can no longer pip-install anything with pip < 9.0.3 under macOS < 10.13.\nFor more detail on this, see\n\n- [StackOverflow answer 49748494](https://stackoverflow.com/a/49748494)",
    "created_at": "2018-04-13T16:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479026",
    "user": "https://github.com/slel"
}
```


<a id='comment:19'></a>
Making this ticket a blocker: after PyPI disabled TLSv1 in early April 2018,
one can no longer pip-install anything with pip < 9.0.3 under macOS < 10.13.
For more detail on this, see

- [StackOverflow answer 49748494](https://stackoverflow.com/a/49748494)



---

archive/issue_comments_479027.json:
```json
{
    "body": "<a id='comment:20'></a>\nHave you actually verified this? We don't use system python...",
    "created_at": "2018-04-13T22:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479027",
    "user": "https://github.com/vbraun"
}
```


<a id='comment:20'></a>
Have you actually verified this? We don't use system python...



---

archive/issue_comments_479028.json:
```json
{
    "body": "<a id='comment:21'></a>\nThis doesn't have anything to do with the system Python.  It has to do with the server settings on PyPI itself, and hence how pip connects to it.  I was aware of this issue myself but I didn't really think about it in terms of Sage.\n\nAnyways, one can also manually download a tarball from PyPI and install it with pip.",
    "created_at": "2018-04-16T07:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479028",
    "user": "https://github.com/embray"
}
```


<a id='comment:21'></a>
This doesn't have anything to do with the system Python.  It has to do with the server settings on PyPI itself, and hence how pip connects to it.  I was aware of this issue myself but I didn't really think about it in terms of Sage.

Anyways, one can also manually download a tarball from PyPI and install it with pip.



---

archive/issue_comments_479029.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [vbraun](#comment%3A20):\n> Have you actually verified this? We don't use system python...\n\n\nWithout this ticket, on macOS 10.10.5, since ~10 April 2018,\ntrying `sage --pip install jupyterlab` resulted in an error.\n\nAfter applying this ticket, it became possible again.",
    "created_at": "2018-04-16T11:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479029",
    "user": "https://github.com/slel"
}
```


<a id='comment:22'></a>
Replying to [vbraun](#comment%3A20):
> Have you actually verified this? We don't use system python...


Without this ticket, on macOS 10.10.5, since ~10 April 2018,
trying `sage --pip install jupyterlab` resulted in an error.

After applying this ticket, it became possible again.



---

archive/issue_events_071492.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-16T22:06:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25051#event-71492"
}
```




---

archive/issue_comments_479030.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/build/destdir-python-misc)\" to \"[5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)\".",
    "created_at": "2018-04-16T22:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479030",
    "user": "https://github.com/vbraun"
}
```


**Changing branch** from "[u/jdemeyer/build/destdir-python-misc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/build/destdir-python-misc)" to "[5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1](https://github.com/sagemath/sagetrac-mirror/commit/5bdfd4e31ee1ff5a07f35796a2944ae92420a7b1)".



---

archive/issue_comments_479031.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2018-04-16T22:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25051#issuecomment-479031",
    "user": "https://github.com/vbraun"
}
```


**Resolution:** fixed
