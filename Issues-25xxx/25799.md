# Issue 25799: Remove hardcoded default matplotlib stylesheet

archive/issues_025562.json:
```json
{
    "body": "This does not work:\n\n```\nimport matplotlib as mpl \nmpl.rcParams['font.family'] = 'Impact'\ntext(\"A text here\", (1,1))\n```\nbecause of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n\nThe patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like\n\n```\nimport matplotlib.pyplot as plt\nplt.style.use('seaborn')\ntext(\"A text here\", (1,1))\n```\n\nThere was more discussion on this matter before at ticket:23696#comment:111.\n\n\nCC:  @kiwifb @strogdon\n\nBranch/Commit: 42bda6f486e45c89daf5229ce89034dd5f0da0fb\n\nReviewer: Eric Gourgoulhon, Fran\u00e7ois Bissey\n\nAuthor: Kwankyu Lee\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25799\n\n",
    "closed_at": "2018-08-05T08:16:40Z",
    "created_at": "2018-07-08T08:24:36Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Remove hardcoded default matplotlib stylesheet",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25799",
    "user": "https://github.com/kwankyu"
}
```
This does not work:

```
import matplotlib as mpl 
mpl.rcParams['font.family'] = 'Impact'
text("A text here", (1,1))
```
because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.

The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like

```
import matplotlib.pyplot as plt
plt.style.use('seaborn')
text("A text here", (1,1))
```

There was more discussion on this matter before at ticket:23696#comment:111.


CC:  @kiwifb @strogdon

Branch/Commit: 42bda6f486e45c89daf5229ce89034dd5f0da0fb

Reviewer: Eric Gourgoulhon, François Bissey

Author: Kwankyu Lee

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25799





---

archive/issue_comments_494679.json:
```json
{
    "body": "Changing branch from \"\" to \"u/klee/25799\"",
    "created_at": "2018-07-08T08:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494679",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "u/klee/25799"



---

archive/issue_comments_494680.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,11 +3,11 @@\n ```\n import matplotlib as mpl \n mpl.rcParams['font.family'] = 'Impact'\n-text(u\"A text here\", (1,1))\n+text(\"A text here\", (1,1))\n ```\n because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n \n-The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.\n+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics. \n \n Comment: 1\n \n``````\n",
    "created_at": "2018-07-08T08:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494680",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,11 +3,11 @@
 ```
 import matplotlib as mpl 
 mpl.rcParams['font.family'] = 'Impact'
-text(u"A text here", (1,1))
+text("A text here", (1,1))
 ```
 because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.
 
-The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.
+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics. 
 
 Comment: 1
 
``````




---

archive/issue_comments_494681.json:
```json
{
    "body": "Changing commit from \"\" to \"91736728f417dd7598a0eff1ec30bf6125a6fa2a\"",
    "created_at": "2018-07-08T08:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "91736728f417dd7598a0eff1ec30bf6125a6fa2a"



---

archive/issue_comments_494682.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-08T08:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_494683.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-08T08:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494683",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_494684.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,19 @@\n+This does not work:\n+\n+```\n+import matplotlib as mpl \n+mpl.rcParams['font.family'] = 'Impact'\n+text(\"A text here\", (1,1))\n+```\n+because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n+\n+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like\n+\n+```\n+import matplotlib.pyplot as plt\n+plt.style.use('seaborn')\n+text(\"A text here\", (1,1))\n+```\n \n \n Comment: 1\n``````\n",
    "created_at": "2018-07-09T01:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494684",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,19 @@
+This does not work:
+
+```
+import matplotlib as mpl 
+mpl.rcParams['font.family'] = 'Impact'
+text("A text here", (1,1))
+```
+because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.
+
+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like
+
+```
+import matplotlib.pyplot as plt
+plt.style.use('seaborn')
+text("A text here", (1,1))
+```
 
 
 Comment: 1
``````




---

archive/issue_comments_494685.json:
```json
{
    "body": "<a id='comment:6'></a>For reference, I am copying below a part of this [sage-devel thread](https://groups.google.com/d/msg/sage-devel/4I2bTb00pFg/sEWUTkeeCQAJ):\n\nwe may keep specifically only the math font of the classic style by:\n\n```\nmpl.rcParams['mathtext.fontset'] = 'cm'\nmpl.rcParams['mathtext.rm'] = 'serif'\n```\n\nSee [this example](https://trac.sagemath.org/ticket/23696#comment:111) for drawbacks of using Matplolib new defaults for math fonts.\nMoreover using cm fonts for math makes plots coherent with MathJax rendering of Jupyter output cells, which is an important feature IMHO.",
    "created_at": "2018-07-10T07:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494685",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'></a>For reference, I am copying below a part of this [sage-devel thread](https://groups.google.com/d/msg/sage-devel/4I2bTb00pFg/sEWUTkeeCQAJ):

we may keep specifically only the math font of the classic style by:

```
mpl.rcParams['mathtext.fontset'] = 'cm'
mpl.rcParams['mathtext.rm'] = 'serif'
```

See [this example](https://trac.sagemath.org/ticket/23696#comment:111) for drawbacks of using Matplolib new defaults for math fonts.
Moreover using cm fonts for math makes plots coherent with MathJax rendering of Jupyter output cells, which is an important feature IMHO.



---

archive/issue_comments_494686.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-11T00:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_494687.json:
```json
{
    "body": "Changing commit from \"91736728f417dd7598a0eff1ec30bf6125a6fa2a\" to \"7828ce2440ed53505c8c6e10e6a16effe1c2e4b5\"",
    "created_at": "2018-07-11T00:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "91736728f417dd7598a0eff1ec30bf6125a6fa2a" to "7828ce2440ed53505c8c6e10e6a16effe1c2e4b5"



---

archive/issue_comments_494688.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+This does not work:\n+\n+```\n+import matplotlib as mpl \n+mpl.rcParams['font.family'] = 'Impact'\n+text(\"A text here\", (1,1))\n+```\n+because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n+\n+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like\n+\n+```\n+import matplotlib.pyplot as plt\n+plt.style.use('seaborn')\n+text(\"A text here\", (1,1))\n+```\n+\n+There was more discussion on this matter before at ticket:23696#comment:111.\n \n \n Comment: 1\n``````\n",
    "created_at": "2018-07-11T00:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494688",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,21 @@
+This does not work:
+
+```
+import matplotlib as mpl 
+mpl.rcParams['font.family'] = 'Impact'
+text("A text here", (1,1))
+```
+because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.
+
+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like
+
+```
+import matplotlib.pyplot as plt
+plt.style.use('seaborn')
+text("A text here", (1,1))
+```
+
+There was more discussion on this matter before at ticket:23696#comment:111.
 
 
 Comment: 1
``````




---

archive/issue_comments_494689.json:
```json
{
    "body": "<a id='comment:9'></a>Changing the priority to 'major' in order to get the attention of patchbots.",
    "created_at": "2018-07-14T15:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494689",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:9'></a>Changing the priority to 'major' in order to get the attention of patchbots.



---

archive/issue_comments_494690.json:
```json
{
    "body": "Attachment [plot.png](tarball://root/attachments/some-uuid/ticket25799/plot.png) by @egourgoulhon created at 2018-07-14 16:13:48",
    "created_at": "2018-07-14T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494690",
    "user": "https://github.com/egourgoulhon"
}
```

Attachment [plot.png](tarball://root/attachments/some-uuid/ticket25799/plot.png) by @egourgoulhon created at 2018-07-14 16:13:48



---

archive/issue_comments_494691.json:
```json
{
    "body": "<a id='comment:10'></a>Attachment [plot_classic.png](tarball://root/attachments/some-uuid/ticket25799/plot_classic.png) by @egourgoulhon created at 2018-07-14 16:50:34\n\nA noticeable effect of the proposed change is that it decreases the size of figures of approx. 20% in each dimension. For instance, with the ticket branch,\n\n```\nsage: plot(sin(x^2), (x, 0, 4), axes_labels=['$x$', '$y$'], gridlines=True)\n```\ngenerates this 628x470 figure:\n![](plot.png)\n\nwhile we had previously (i.e. with the 'classic' style) this 781x584 figure:\n![](plot_classic.png)\n\nThis size change was already discussed in [comment:134 of #23696](https://trac.sagemath.org/ticket/23696#comment:134).\n\nOther changes are the major ticks on the x-axis (Delta_x = 0.5 instead of Delta_x = 1) and the dash style (in general, dashes are narrower than with the classic style, as we can see on the dash plots in the 2D graphics section of the documentation).\n\nI am fine with these changes (*); I simply mention them for the benefit of the discussion. \n\n(*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of \n\n```\nsage: g1 = plot(sin(x), 0, 2*pi)\nsage: g2 = plot(cos(x), 0, 2*pi, linestyle=\"--\")\nsage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted\n```\nin the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.\n\nOn general grounds, I think it is a good thing to remove the 'classic' stylesheet (provided the TeX fonts are corrected as above), in particular because this fixes the issues mentioned in the ticket description.",
    "created_at": "2018-07-14T16:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494691",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:10'></a>Attachment [plot_classic.png](tarball://root/attachments/some-uuid/ticket25799/plot_classic.png) by @egourgoulhon created at 2018-07-14 16:50:34

A noticeable effect of the proposed change is that it decreases the size of figures of approx. 20% in each dimension. For instance, with the ticket branch,

```
sage: plot(sin(x^2), (x, 0, 4), axes_labels=['$x$', '$y$'], gridlines=True)
```
generates this 628x470 figure:
![](plot.png)

while we had previously (i.e. with the 'classic' style) this 781x584 figure:
![](plot_classic.png)

This size change was already discussed in [comment:134 of #23696](https://trac.sagemath.org/ticket/23696#comment:134).

Other changes are the major ticks on the x-axis (Delta_x = 0.5 instead of Delta_x = 1) and the dash style (in general, dashes are narrower than with the classic style, as we can see on the dash plots in the 2D graphics section of the documentation).

I am fine with these changes (*); I simply mention them for the benefit of the discussion. 

(*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of 

```
sage: g1 = plot(sin(x), 0, 2*pi)
sage: g2 = plot(cos(x), 0, 2*pi, linestyle="--")
sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted
```
in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.

On general grounds, I think it is a good thing to remove the 'classic' stylesheet (provided the TeX fonts are corrected as above), in particular because this fixes the issues mentioned in the ticket description.



---

archive/issue_comments_494692.json:
```json
{
    "body": "Attachment [dashed_classic.png](tarball://root/attachments/some-uuid/ticket25799/dashed_classic.png) by @kwankyu created at 2018-07-15 22:56:44",
    "created_at": "2018-07-15T22:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494692",
    "user": "https://github.com/kwankyu"
}
```

Attachment [dashed_classic.png](tarball://root/attachments/some-uuid/ticket25799/dashed_classic.png) by @kwankyu created at 2018-07-15 22:56:44



---

archive/issue_comments_494693.json:
```json
{
    "body": "Attachment [dashed_default.png](tarball://root/attachments/some-uuid/ticket25799/dashed_default.png) by @kwankyu created at 2018-07-15 22:56:56",
    "created_at": "2018-07-15T22:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494693",
    "user": "https://github.com/kwankyu"
}
```

Attachment [dashed_default.png](tarball://root/attachments/some-uuid/ticket25799/dashed_default.png) by @kwankyu created at 2018-07-15 22:56:56



---

archive/issue_comments_494694.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 egourgoulhon]:\n> I am fine with these changes (*); I simply mention them for the benefit of the discussion. \n> \n> (*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of \n> \n> ```\n> sage: g1 = plot(sin(x), 0, 2*pi)\n> sage: g2 = plot(cos(x), 0, 2*pi, linestyle=\"--\")\n> sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted\n> ```\n> in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.\n\n\nI am not sure...\n\nDashed line in classic style:\n\n![](dashed_classic.png)\n\nDashed line in matplotlib2 default style:\n\n![](dashed_default.png)",
    "created_at": "2018-07-15T23:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494694",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>Replying to [comment:10 egourgoulhon]:
> I am fine with these changes (*); I simply mention them for the benefit of the discussion. 
> 
> (*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of 
> 
> ```
> sage: g1 = plot(sin(x), 0, 2*pi)
> sage: g2 = plot(cos(x), 0, 2*pi, linestyle="--")
> sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted
> ```
> in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.


I am not sure...

Dashed line in classic style:

![](dashed_classic.png)

Dashed line in matplotlib2 default style:

![](dashed_default.png)



---

archive/issue_comments_494695.json:
```json
{
    "body": "<a id='comment:13'></a>While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that. It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.",
    "created_at": "2018-07-15T23:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494695",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that. It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.



---

archive/issue_comments_494696.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 fbissey]:\n> While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that.\n\n\nIf there are needed other (not uniformly agreed upon) tunings, then it may be necessary to make another ticket for that purpose, while the most glaring changes, like the font change, get into this ticket. Let's see.\n\n> It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.\n\n\nYes. But as someone has suggested in other context,  I agree that users should get the same outputs in their own sessions as in the documentation.",
    "created_at": "2018-07-16T02:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494696",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>Replying to [comment:13 fbissey]:
> While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that.


If there are needed other (not uniformly agreed upon) tunings, then it may be necessary to make another ticket for that purpose, while the most glaring changes, like the font change, get into this ticket. Let's see.

> It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.


Yes. But as someone has suggested in other context,  I agree that users should get the same outputs in their own sessions as in the documentation.



---

archive/issue_comments_494697.json:
```json
{
    "body": "Attachment [dashed2_classic.png](tarball://root/attachments/some-uuid/ticket25799/dashed2_classic.png) by @kwankyu created at 2018-07-16 02:16:29",
    "created_at": "2018-07-16T02:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494697",
    "user": "https://github.com/kwankyu"
}
```

Attachment [dashed2_classic.png](tarball://root/attachments/some-uuid/ticket25799/dashed2_classic.png) by @kwankyu created at 2018-07-16 02:16:29



---

archive/issue_comments_494698.json:
```json
{
    "body": "Attachment [dashed2_default.png](tarball://root/attachments/some-uuid/ticket25799/dashed2_default.png) by @kwankyu created at 2018-07-16 02:16:41",
    "created_at": "2018-07-16T02:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494698",
    "user": "https://github.com/kwankyu"
}
```

Attachment [dashed2_default.png](tarball://root/attachments/some-uuid/ticket25799/dashed2_default.png) by @kwankyu created at 2018-07-16 02:16:41



---

archive/issue_comments_494699.json:
```json
{
    "body": "<a id='comment:15'></a>Just for discussion.\n\nDashed lines in classic style:\n\n![](dashed2_classic.png)\n\nDashed lines in default style:\n\n![](dashed2_default.png)",
    "created_at": "2018-07-16T02:19:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494699",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'></a>Just for discussion.

Dashed lines in classic style:

![](dashed2_classic.png)

Dashed lines in default style:

![](dashed2_default.png)



---

archive/issue_comments_494700.json:
```json
{
    "body": "<a id='comment:16'></a>There was a poll about the changes that the branch of this ticket introduces in \n\nhttps://groups.google.com/forum/#!topic/sage-devel/jz9fCnW8eT8\n\nCounted from 8 participants to the discussion,  there are\n\n5 positive votes;\n\n2 no opinion;\n\n1 not-so-positive vote.",
    "created_at": "2018-07-23T11:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494700",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'></a>There was a poll about the changes that the branch of this ticket introduces in 

https://groups.google.com/forum/#!topic/sage-devel/jz9fCnW8eT8

Counted from 8 participants to the discussion,  there are

5 positive votes;

2 no opinion;

1 not-so-positive vote.



---

archive/issue_events_064520.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25799#event-64520"
}
```



---

archive/issue_comments_494701.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-23T11:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494701",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_494702.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2018-07-23T11:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494702",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_494703.json:
```json
{
    "body": "<a id='comment:17'></a>So let's move this into Sage 8.4!",
    "created_at": "2018-07-23T11:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494703",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:17'></a>So let's move this into Sage 8.4!



---

archive/issue_comments_494704.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2018-07-23T11:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494704",
    "user": "https://github.com/egourgoulhon"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_494705.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-30T15:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494705",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_494706.json:
```json
{
    "body": "<a id='comment:19'></a>\n```\nsage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n```",
    "created_at": "2018-07-30T15:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494706",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>
```
sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
```



---

archive/issue_comments_494707.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 vbraun]:\n> {{{\n> sage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n> }}}\n\n\nThat doctest is fragile and I am pretty sure it depends on the stylesheet used.",
    "created_at": "2018-07-30T21:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494707",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>Replying to [comment:19 vbraun]:
> {{{
> sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
> }}}


That doctest is fragile and I am pretty sure it depends on the stylesheet used.



---

archive/issue_comments_494708.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 fbissey]:\n> Replying to [comment:19 vbraun]:\n> > {{{\n> > sage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n> > }}}\n\n> \n> That doctest is fragile and I am pretty sure it depends on the stylesheet used.\n\n\nI confirm the doctest fails with the ticket branch merged in Sage 8.3.rc0:\n\n```\n./sage -t --long src/sage/plot/arrow.py \nRunning doctests with ID 2018-07-30-23-45-27-5227bad0.\nGit branch: matplotlib_style\nUsing --optional=mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 80.1 src/sage/plot/arrow.py\n**********************************************************************\nFile \"src/sage/plot/arrow.py\", line 364, in sage.plot.arrow.Arrow._render_on_subplot\nFailed example:\n    two_stroke_re.search(contents) is None\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.plot.arrow.Arrow._render_on_subplot\n    [69 tests, 1 failure, 3.79 s]\n```",
    "created_at": "2018-07-30T21:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494708",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:21'></a>Replying to [comment:20 fbissey]:
> Replying to [comment:19 vbraun]:
> > {{{
> > sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
> > }}}

> 
> That doctest is fragile and I am pretty sure it depends on the stylesheet used.


I confirm the doctest fails with the ticket branch merged in Sage 8.3.rc0:

```
./sage -t --long src/sage/plot/arrow.py 
Running doctests with ID 2018-07-30-23-45-27-5227bad0.
Git branch: matplotlib_style
Using --optional=mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 80.1 src/sage/plot/arrow.py
**********************************************************************
File "src/sage/plot/arrow.py", line 364, in sage.plot.arrow.Arrow._render_on_subplot
Failed example:
    two_stroke_re.search(contents) is None
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  18 in sage.plot.arrow.Arrow._render_on_subplot
    [69 tests, 1 failure, 3.79 s]
```



---

archive/issue_comments_494709.json:
```json
{
    "body": "<a id='comment:22'></a>Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.",
    "created_at": "2018-07-30T21:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494709",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.



---

archive/issue_comments_494710.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 fbissey]:\n> Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\n\nI agree. Doctesting graphics is something that requires a human eye or AI.",
    "created_at": "2018-07-31T00:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494710",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'></a>Replying to [comment:22 fbissey]:
> Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.


I agree. Doctesting graphics is something that requires a human eye or AI.



---

archive/issue_comments_494711.json:
```json
{
    "body": "Changing commit from \"7828ce2440ed53505c8c6e10e6a16effe1c2e4b5\" to \"42bda6f486e45c89daf5229ce89034dd5f0da0fb\"",
    "created_at": "2018-07-31T00:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7828ce2440ed53505c8c6e10e6a16effe1c2e4b5" to "42bda6f486e45c89daf5229ce89034dd5f0da0fb"



---

archive/issue_comments_494712.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-31T00:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_494713.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-07-31T00:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494713",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_494714.json:
```json
{
    "body": "Changing reviewer from \"Eric Gourgoulhon\" to \"Eric Gourgoulhon, Fran\u00e7ois Bissey\"",
    "created_at": "2018-07-31T06:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494714",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "Eric Gourgoulhon" to "Eric Gourgoulhon, François Bissey"



---

archive/issue_comments_494715.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-31T06:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494715",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_494716.json:
```json
{
    "body": "<a id='comment:26'></a>LGTM. Fran\u00e7ois, do you agree?",
    "created_at": "2018-07-31T06:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494716",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:26'></a>LGTM. François, do you agree?



---

archive/issue_comments_494717.json:
```json
{
    "body": "<a id='comment:27'></a>I am OK with it. I'll be waiting for comments on the new look of the documentation. It is inevitable, even when we have talked so much about it.",
    "created_at": "2018-07-31T07:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494717",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:27'></a>I am OK with it. I'll be waiting for comments on the new look of the documentation. It is inevitable, even when we have talked so much about it.



---

archive/issue_comments_494718.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:23 klee]:\n> Replying to [comment:22 fbissey]:\n> > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\n> \n> I agree. Doctesting graphics is something that requires a human eye or AI.\n\nIt appears that now we are back to the `matching` sequence for `1.5.3` #23696#comment:27. This \n\n```\nsage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n```\nseems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.",
    "created_at": "2018-08-01T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494718",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:28'></a>Replying to [comment:23 klee]:
> Replying to [comment:22 fbissey]:
> > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.

> 
> I agree. Doctesting graphics is something that requires a human eye or AI.

It appears that now we are back to the `matching` sequence for `1.5.3` #23696#comment:27. This 

```
sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
```
seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.



---

archive/issue_comments_494719.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 strogdon]:\n> Replying to [comment:23 klee]:\n> > Replying to [comment:22 fbissey]:\n> > > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\n> > \n> > I agree. Doctesting graphics is something that requires a human eye or AI.\n\n> It appears that now we are back to the `matching` sequence for `1.5.3` #23696#comment:27. This \n> {{{\n> sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n> }}}\n> seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.\n> \n\nThis was just a shot in the dark. It doesn't work properly when the arrow is drawn with `dashed` linetype.",
    "created_at": "2018-08-01T04:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494719",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:29'></a>Replying to [comment:28 strogdon]:
> Replying to [comment:23 klee]:
> > Replying to [comment:22 fbissey]:
> > > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.

> > 
> > I agree. Doctesting graphics is something that requires a human eye or AI.

> It appears that now we are back to the `matching` sequence for `1.5.3` #23696#comment:27. This 
> {{{
> sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
> }}}
> seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.
> 

This was just a shot in the dark. It doesn't work properly when the arrow is drawn with `dashed` linetype.



---

archive/issue_comments_494720.json:
```json
{
    "body": "<a id='comment:30'></a>Just for the record, not that anything should be changed but\n\n```\nsage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n```\nis the correct matching pattern. It's fairly straightforward to deduce it. I had a `typo` that led to the previous conclusion.",
    "created_at": "2018-08-02T02:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494720",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:30'></a>Just for the record, not that anything should be changed but

```
sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
```
is the correct matching pattern. It's fairly straightforward to deduce it. I had a `typo` that led to the previous conclusion.



---

archive/issue_comments_494721.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494721",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064521.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:16:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25799#event-64521"
}
```



---

archive/issue_comments_494722.json:
```json
{
    "body": "Changing branch from \"u/klee/25799\" to \"42bda6f486e45c89daf5229ce89034dd5f0da0fb\"",
    "created_at": "2018-08-05T08:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25799#issuecomment-494722",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/klee/25799" to "42bda6f486e45c89daf5229ce89034dd5f0da0fb"
