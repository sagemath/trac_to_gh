# Issue 25799: Remove hardcoded default matplotlib stylesheet

archive/issues_025562.json:
```json
{
    "assignees": [],
    "body": "This does not work:\n\n```\nimport matplotlib as mpl \nmpl.rcParams['font.family'] = 'Impact'\ntext(\"A text here\", (1,1))\n```\nbecause of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n\nThe patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like\n\n```\nimport matplotlib.pyplot as plt\nplt.style.use('seaborn')\ntext(\"A text here\", (1,1))\n```\n\nThere was more discussion on this matter before at [#23696 comment:111](https://github.com/sagemath/sage/issues/23696#comment:111).\n\n\n**CC:**  @kiwifb @strogdon\n\n**Branch/Commit:** [42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)\n\n**Reviewer:** Eric Gourgoulhon, Fran\u00e7ois Bissey\n\n**Author:** Kwankyu Lee\n\nIssue created by migration from https://trac.sagemath.org/ticket/25799\n\n",
    "closed_at": "2018-08-05T08:16:40Z",
    "created_at": "2018-07-08T08:24:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove hardcoded default matplotlib stylesheet",
    "type": "issue",
    "updated_at": "2018-08-05T08:16:40Z",
    "url": "https://github.com/sagemath/sage/issues/25799",
    "user": "https://github.com/kwankyu"
}
```
This does not work:

```
import matplotlib as mpl 
mpl.rcParams['font.family'] = 'Impact'
text("A text here", (1,1))
```
because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.

The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like

```
import matplotlib.pyplot as plt
plt.style.use('seaborn')
text("A text here", (1,1))
```

There was more discussion on this matter before at [#23696 comment:111](https://github.com/sagemath/sage/issues/23696#comment:111).


**CC:**  @kiwifb @strogdon

**Branch/Commit:** [42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)

**Reviewer:** Eric Gourgoulhon, François Bissey

**Author:** Kwankyu Lee

Issue created by migration from https://trac.sagemath.org/ticket/25799





---

archive/issue_events_311098.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-08T08:24:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311098"
}
```



---

archive/issue_events_311099.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-08T08:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "08517b",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311099"
}
```



---

archive/issue_events_311100.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-08T08:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311100"
}
```



---

archive/issue_events_311101.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-08T08:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311101"
}
```



---

archive/issue_comments_398938.json:
```json
{
    "body": "**Branch:** [u/klee/25799](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/25799)",
    "created_at": "2018-07-08T08:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398938",
    "user": "https://github.com/kwankyu"
}
```

**Branch:** [u/klee/25799](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/25799)



---

archive/issue_comments_398939.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n ```\n import matplotlib as mpl \n mpl.rcParams['font.family'] = 'Impact'\n-text(u\"A text here\", (1,1))\n+text(\"A text here\", (1,1))\n ```\n because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n \n``````\n",
    "created_at": "2018-07-08T08:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398939",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 ```
 import matplotlib as mpl 
 mpl.rcParams['font.family'] = 'Impact'
-text(u"A text here", (1,1))
+text("A text here", (1,1))
 ```
 because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.
 
``````




---

archive/issue_comments_398940.json:
```json
{
    "body": "**Commit:** [91736728f417dd7598a0eff1ec30bf6125a6fa2a](https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a)",
    "created_at": "2018-07-08T08:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398940",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [91736728f417dd7598a0eff1ec30bf6125a6fa2a](https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a)



---

archive/issue_comments_398941.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a\">9173672</a></td><td><code>Remove hardcoded matplotlib stylesheet</code></td></tr></table>\n",
    "created_at": "2018-07-08T08:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398941",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>**Comment 3:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a">9173672</a></td><td><code>Remove hardcoded matplotlib stylesheet</code></td></tr></table>




---

archive/issue_events_311102.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-08T08:33:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311102"
}
```



---

archive/issue_comments_398942.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,4 +7,11 @@\n ```\n because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.\n \n-The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics. \n+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like\n+\n+```\n+import matplotlib.pyplot as plt\n+plt.style.use('seaborn')\n+text(\"A text here\", (1,1))\n+```\n+\n``````\n",
    "created_at": "2018-07-09T01:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398942",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,4 +7,11 @@
 ```
 because of hardcoded matplotlib stylesheet (`classic`), which silently overwrites the rc parameters. Putting configurations in the file `matplotlibrc` also does not work because of the same reason.
 
-The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics. 
+The patch removes the hardcoded default matplotlib stylesheet that silently applies to all graphics.  With this patch, the usual method to apply a style to graphics works, like
+
+```
+import matplotlib.pyplot as plt
+plt.style.use('seaborn')
+text("A text here", (1,1))
+```
+
``````




---

archive/issue_comments_398943.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nFor reference, I am copying below a part of this [sage-devel thread](https://groups.google.com/d/msg/sage-devel/4I2bTb00pFg/sEWUTkeeCQAJ):\n\nwe may keep specifically only the math font of the classic style by:\n\n```\nmpl.rcParams['mathtext.fontset'] = 'cm'\nmpl.rcParams['mathtext.rm'] = 'serif'\n```\n\nSee [this example](https://github.com/sagemath/sage/issues/23696#comment:111) for drawbacks of using Matplolib new defaults for math fonts.\nMoreover using cm fonts for math makes plots coherent with MathJax rendering of Jupyter output cells, which is an important feature IMHO.",
    "created_at": "2018-07-10T07:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398943",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'>**Comment 6:**</a>
For reference, I am copying below a part of this [sage-devel thread](https://groups.google.com/d/msg/sage-devel/4I2bTb00pFg/sEWUTkeeCQAJ):

we may keep specifically only the math font of the classic style by:

```
mpl.rcParams['mathtext.fontset'] = 'cm'
mpl.rcParams['mathtext.rm'] = 'serif'
```

See [this example](https://github.com/sagemath/sage/issues/23696#comment:111) for drawbacks of using Matplolib new defaults for math fonts.
Moreover using cm fonts for math makes plots coherent with MathJax rendering of Jupyter output cells, which is an important feature IMHO.



---

archive/issue_comments_398944.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5\">7828ce2</a></td><td><code>Set computer modern fonts for math text in graphics</code></td></tr></table>\n",
    "created_at": "2018-07-11T00:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398944",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5">7828ce2</a></td><td><code>Set computer modern fonts for math text in graphics</code></td></tr></table>




---

archive/issue_comments_398945.json:
```json
{
    "body": "**Changing commit** from \"[91736728f417dd7598a0eff1ec30bf6125a6fa2a](https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a)\" to \"[7828ce2440ed53505c8c6e10e6a16effe1c2e4b5](https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5)\".",
    "created_at": "2018-07-11T00:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398945",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[91736728f417dd7598a0eff1ec30bf6125a6fa2a](https://github.com/sagemath/sagetrac-mirror/commit/91736728f417dd7598a0eff1ec30bf6125a6fa2a)" to "[7828ce2440ed53505c8c6e10e6a16effe1c2e4b5](https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5)".



---

archive/issue_comments_398946.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n text(\"A text here\", (1,1))\n ```\n \n+There was more discussion on this matter before at [#23696 comment:111](https://github.com/sagemath/sage/issues/23696#comment:111).\n+\n``````\n",
    "created_at": "2018-07-11T00:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398946",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 text("A text here", (1,1))
 ```
 
+There was more discussion on this matter before at [#23696 comment:111](https://github.com/sagemath/sage/issues/23696#comment:111).
+
``````




---

archive/issue_comments_398947.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nChanging the priority to 'major' in order to get the attention of patchbots.",
    "created_at": "2018-07-14T15:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398947",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:9'>**Comment 9:**</a>
Changing the priority to 'major' in order to get the attention of patchbots.



---

archive/issue_events_311103.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-14T15:05:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311103"
}
```



---

archive/issue_comments_398948.json:
```json
{
    "body": "**Attachment:** [plot.png.gz](https://github.com/sagemath/sage/files/ticket25799/plot.png.gz)",
    "created_at": "2018-07-14T16:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398948",
    "user": "https://github.com/egourgoulhon"
}
```

**Attachment:** [plot.png.gz](https://github.com/sagemath/sage/files/ticket25799/plot.png.gz)



---

archive/issue_comments_398949.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**Attachment:** [plot_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/plot_classic.png.gz)\n\nA noticeable effect of the proposed change is that it decreases the size of figures of approx. 20% in each dimension. For instance, with the ticket branch,\n\n```\nsage: plot(sin(x^2), (x, 0, 4), axes_labels=['$x$', '$y$'], gridlines=True)\n```\ngenerates this 628x470 figure:\n![](plot.png)\n\nwhile we had previously (i.e. with the 'classic' style) this 781x584 figure:\n![](plot_classic.png)\n\nThis size change was already discussed in [[comment:134](#comment%3A134) of #23696](https://github.com/sagemath/sage/issues/23696#comment:134).\n\nOther changes are the major ticks on the x-axis (Delta_x = 0.5 instead of Delta_x = 1) and the dash style (in general, dashes are narrower than with the classic style, as we can see on the dash plots in the 2D graphics section of the documentation).\n\nI am fine with these changes (*); I simply mention them for the benefit of the discussion. \n\n(*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of \n\n```\nsage: g1 = plot(sin(x), 0, 2*pi)\nsage: g2 = plot(cos(x), 0, 2*pi, linestyle=\"--\")\nsage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted\n```\nin the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.\n\nOn general grounds, I think it is a good thing to remove the 'classic' stylesheet (provided the TeX fonts are corrected as above), in particular because this fixes the issues mentioned in the ticket description.",
    "created_at": "2018-07-14T16:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398949",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:10'>**Comment 10:**</a>
**Attachment:** [plot_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/plot_classic.png.gz)

A noticeable effect of the proposed change is that it decreases the size of figures of approx. 20% in each dimension. For instance, with the ticket branch,

```
sage: plot(sin(x^2), (x, 0, 4), axes_labels=['$x$', '$y$'], gridlines=True)
```
generates this 628x470 figure:
![](plot.png)

while we had previously (i.e. with the 'classic' style) this 781x584 figure:
![](plot_classic.png)

This size change was already discussed in [[comment:134](#comment%3A134) of #23696](https://github.com/sagemath/sage/issues/23696#comment:134).

Other changes are the major ticks on the x-axis (Delta_x = 0.5 instead of Delta_x = 1) and the dash style (in general, dashes are narrower than with the classic style, as we can see on the dash plots in the 2D graphics section of the documentation).

I am fine with these changes (*); I simply mention them for the benefit of the discussion. 

(*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of 

```
sage: g1 = plot(sin(x), 0, 2*pi)
sage: g2 = plot(cos(x), 0, 2*pi, linestyle="--")
sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted
```
in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.

On general grounds, I think it is a good thing to remove the 'classic' stylesheet (provided the TeX fonts are corrected as above), in particular because this fixes the issues mentioned in the ticket description.



---

archive/issue_comments_398950.json:
```json
{
    "body": "**Attachment:** [dashed_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed_classic.png.gz)",
    "created_at": "2018-07-15T22:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398950",
    "user": "https://github.com/kwankyu"
}
```

**Attachment:** [dashed_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed_classic.png.gz)



---

archive/issue_comments_398951.json:
```json
{
    "body": "**Attachment:** [dashed_default.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed_default.png.gz)",
    "created_at": "2018-07-15T22:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398951",
    "user": "https://github.com/kwankyu"
}
```

**Attachment:** [dashed_default.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed_default.png.gz)



---

archive/issue_comments_398952.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nReplying to [@egourgoulhon](#comment%3A10):\n> I am fine with these changes (*); I simply mention them for the benefit of the discussion. \n> \n> (*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of \n> \n> ```\n> sage: g1 = plot(sin(x), 0, 2*pi)\n> sage: g2 = plot(cos(x), 0, 2*pi, linestyle=\"--\")\n> sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted\n> ```\n> in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.\n\nI am not sure...\n\nDashed line in classic style:\n\n![](dashed_classic.png)\n\nDashed line in matplotlib2 default style:\n\n![](dashed_default.png)",
    "created_at": "2018-07-15T23:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398952",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'>**Comment 12:**</a>
Replying to [@egourgoulhon](#comment%3A10):
> I am fine with these changes (*); I simply mention them for the benefit of the discussion. 
> 
> (*) except maybe for the dash style of curves, which could require some tuning of the option `linestyle='--'` on Sage's side: compare the output of 
> 
> ```
> sage: g1 = plot(sin(x), 0, 2*pi)
> sage: g2 = plot(cos(x), 0, 2*pi, linestyle="--")
> sage: (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # long time # show their sum, nicely formatted
> ```
> in the [2D plotting](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html) section of the documentation.

I am not sure...

Dashed line in classic style:

![](dashed_classic.png)

Dashed line in matplotlib2 default style:

![](dashed_default.png)



---

archive/issue_comments_398953.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nWhile the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that. It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.",
    "created_at": "2018-07-15T23:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398953",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'>**Comment 13:**</a>
While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that. It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.



---

archive/issue_comments_398954.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nReplying to [@kiwifb](#comment%3A13):\n> While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that.\n\nIf there are needed other (not uniformly agreed upon) tunings, then it may be necessary to make another ticket for that purpose, while the most glaring changes, like the font change, get into this ticket. Let's see.\n\n> It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.\n\nYes. But as someone has suggested in other context,  I agree that users should get the same outputs in their own sessions as in the documentation.",
    "created_at": "2018-07-16T02:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398954",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'>**Comment 14:**</a>
Replying to [@kiwifb](#comment%3A13):
> While the font change was the most glaring thing, there was other stuff indeed. Changing the style was the shortest way to fix all that.

If there are needed other (not uniformly agreed upon) tunings, then it may be necessary to make another ticket for that purpose, while the most glaring changes, like the font change, get into this ticket. Let's see.

> It would be interesting to know if we can set a style just for building the documentation. Of course even that could cause problems if you need to change something for building the documentation in a specific language.

Yes. But as someone has suggested in other context,  I agree that users should get the same outputs in their own sessions as in the documentation.



---

archive/issue_comments_398955.json:
```json
{
    "body": "**Attachment:** [dashed2_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed2_classic.png.gz)",
    "created_at": "2018-07-16T02:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398955",
    "user": "https://github.com/kwankyu"
}
```

**Attachment:** [dashed2_classic.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed2_classic.png.gz)



---

archive/issue_comments_398956.json:
```json
{
    "body": "**Attachment:** [dashed2_default.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed2_default.png.gz)",
    "created_at": "2018-07-16T02:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398956",
    "user": "https://github.com/kwankyu"
}
```

**Attachment:** [dashed2_default.png.gz](https://github.com/sagemath/sage/files/ticket25799/dashed2_default.png.gz)



---

archive/issue_comments_398957.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nJust for discussion.\n\nDashed lines in classic style:\n\n![](dashed2_classic.png)\n\nDashed lines in default style:\n\n![](dashed2_default.png)",
    "created_at": "2018-07-16T02:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398957",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'>**Comment 15:**</a>
Just for discussion.

Dashed lines in classic style:

![](dashed2_classic.png)

Dashed lines in default style:

![](dashed2_default.png)



---

archive/issue_comments_398958.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nThere was a poll about the changes that the branch of this ticket introduces in \n\nhttps://groups.google.com/forum/#!topic/sage-devel/jz9fCnW8eT8\n\nCounted from 8 participants to the discussion,  there are\n\n5 positive votes;\n\n2 no opinion;\n\n1 not-so-positive vote.",
    "created_at": "2018-07-23T11:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398958",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'>**Comment 16:**</a>
There was a poll about the changes that the branch of this ticket introduces in 

https://groups.google.com/forum/#!topic/sage-devel/jz9fCnW8eT8

Counted from 8 participants to the discussion,  there are

5 positive votes;

2 no opinion;

1 not-so-positive vote.



---

archive/issue_events_311104.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311104"
}
```



---

archive/issue_events_311105.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311105"
}
```



---

archive/issue_events_311106.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311106"
}
```



---

archive/issue_events_311107.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311107"
}
```



---

archive/issue_comments_398959.json:
```json
{
    "body": "**Reviewer:** Eric Gourgoulhon",
    "created_at": "2018-07-23T11:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398959",
    "user": "https://github.com/egourgoulhon"
}
```

**Reviewer:** Eric Gourgoulhon



---

archive/issue_comments_398960.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nSo let's move this into Sage 8.4!",
    "created_at": "2018-07-23T11:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398960",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:17'>**Comment 17:**</a>
So let's move this into Sage 8.4!



---

archive/issue_comments_398961.json:
```json
{
    "body": "**Author:** Kwankyu Lee",
    "created_at": "2018-07-23T11:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398961",
    "user": "https://github.com/egourgoulhon"
}
```

**Author:** Kwankyu Lee



---

archive/issue_events_311108.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-30T15:45:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311108"
}
```



---

archive/issue_events_311109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-30T15:45:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311109"
}
```



---

archive/issue_comments_398962.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n\n```\nsage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n```",
    "created_at": "2018-07-30T15:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398962",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'>**Comment 19:**</a>

```
sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
```



---

archive/issue_comments_398963.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReplying to [@vbraun](#comment%3A19):\n> \n> ```\n> sage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n> ```\n\nThat doctest is fragile and I am pretty sure it depends on the stylesheet used.",
    "created_at": "2018-07-30T21:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398963",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'>**Comment 20:**</a>
Replying to [@vbraun](#comment%3A19):
> 
> ```
> sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
> ```

That doctest is fragile and I am pretty sure it depends on the stylesheet used.



---

archive/issue_comments_398964.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nReplying to [@kiwifb](#comment%3A20):\n> Replying to [@vbraun](#comment%3A19):\n> > \n> > ```\n> > sage -t --long src/sage/plot/arrow.py  # 1 doctest failed\n> > ```\n\n> \n> That doctest is fragile and I am pretty sure it depends on the stylesheet used.\n\nI confirm the doctest fails with the ticket branch merged in Sage 8.3.rc0:\n\n```\n./sage -t --long src/sage/plot/arrow.py \nRunning doctests with ID 2018-07-30-23-45-27-5227bad0.\nGit branch: matplotlib_style\nUsing --optional=mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 80.1 src/sage/plot/arrow.py\n**********************************************************************\nFile \"src/sage/plot/arrow.py\", line 364, in sage.plot.arrow.Arrow._render_on_subplot\nFailed example:\n    two_stroke_re.search(contents) is None\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.plot.arrow.Arrow._render_on_subplot\n    [69 tests, 1 failure, 3.79 s]\n```",
    "created_at": "2018-07-30T21:46:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398964",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:21'>**Comment 21:**</a>
Replying to [@kiwifb](#comment%3A20):
> Replying to [@vbraun](#comment%3A19):
> > 
> > ```
> > sage -t --long src/sage/plot/arrow.py  # 1 doctest failed
> > ```

> 
> That doctest is fragile and I am pretty sure it depends on the stylesheet used.

I confirm the doctest fails with the ticket branch merged in Sage 8.3.rc0:

```
./sage -t --long src/sage/plot/arrow.py 
Running doctests with ID 2018-07-30-23-45-27-5227bad0.
Git branch: matplotlib_style
Using --optional=mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 80.1 src/sage/plot/arrow.py
**********************************************************************
File "src/sage/plot/arrow.py", line 364, in sage.plot.arrow.Arrow._render_on_subplot
Failed example:
    two_stroke_re.search(contents) is None
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  18 in sage.plot.arrow.Arrow._render_on_subplot
    [69 tests, 1 failure, 3.79 s]
```



---

archive/issue_comments_398965.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nGetting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.",
    "created_at": "2018-07-30T21:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398965",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'>**Comment 22:**</a>
Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.



---

archive/issue_comments_398966.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nReplying to [@kiwifb](#comment%3A22):\n> Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\nI agree. Doctesting graphics is something that requires a human eye or AI.",
    "created_at": "2018-07-31T00:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398966",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'>**Comment 23:**</a>
Replying to [@kiwifb](#comment%3A22):
> Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.

I agree. Doctesting graphics is something that requires a human eye or AI.



---

archive/issue_comments_398967.json:
```json
{
    "body": "**Changing commit** from \"[7828ce2440ed53505c8c6e10e6a16effe1c2e4b5](https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5)\" to \"[42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)\".",
    "created_at": "2018-07-31T00:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398967",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7828ce2440ed53505c8c6e10e6a16effe1c2e4b5](https://github.com/sagemath/sagetrac-mirror/commit/7828ce2440ed53505c8c6e10e6a16effe1c2e4b5)" to "[42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)".



---

archive/issue_comments_398968.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a825afb9127a765e87d3dfe640f8dd64f99babf2\">a825afb</a></td><td><code>Remove a fragile failing doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb\">42bda6f</a></td><td><code>Add a comment on the removed doctest</code></td></tr></table>\n",
    "created_at": "2018-07-31T00:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398968",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a825afb9127a765e87d3dfe640f8dd64f99babf2">a825afb</a></td><td><code>Remove a fragile failing doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb">42bda6f</a></td><td><code>Add a comment on the removed doctest</code></td></tr></table>




---

archive/issue_events_311110.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-31T00:28:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311110"
}
```



---

archive/issue_events_311111.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-07-31T00:28:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311111"
}
```



---

archive/issue_comments_398969.json:
```json
{
    "body": "**Changing reviewer** from \"Eric Gourgoulhon\" to \"Eric Gourgoulhon, Fran\u00e7ois Bissey\".",
    "created_at": "2018-07-31T06:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398969",
    "user": "https://github.com/egourgoulhon"
}
```

**Changing reviewer** from "Eric Gourgoulhon" to "Eric Gourgoulhon, François Bissey".



---

archive/issue_events_311112.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-31T06:53:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311112"
}
```



---

archive/issue_events_311113.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-07-31T06:53:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311113"
}
```



---

archive/issue_comments_398970.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nLGTM. Fran\u00e7ois, do you agree?",
    "created_at": "2018-07-31T06:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398970",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:26'>**Comment 26:**</a>
LGTM. François, do you agree?



---

archive/issue_comments_398971.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nI am OK with it. I'll be waiting for comments on the new look of the documentation. It is inevitable, even when we have talked so much about it.",
    "created_at": "2018-07-31T07:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398971",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:27'>**Comment 27:**</a>
I am OK with it. I'll be waiting for comments on the new look of the documentation. It is inevitable, even when we have talked so much about it.



---

archive/issue_comments_398972.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nReplying to [@kwankyu](#comment%3A23):\n> Replying to [@kiwifb](#comment%3A22):\n> > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\n> \n> I agree. Doctesting graphics is something that requires a human eye or AI.\n\nIt appears that now we are back to the `matching` sequence for `1.5.3` [#23696 comment:27](https://github.com/sagemath/sage/issues/23696#comment:27). This \n\n```\nsage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n```\nseems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.",
    "created_at": "2018-08-01T03:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398972",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:28'>**Comment 28:**</a>
Replying to [@kwankyu](#comment%3A23):
> Replying to [@kiwifb](#comment%3A22):
> > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.

> 
> I agree. Doctesting graphics is something that requires a human eye or AI.

It appears that now we are back to the `matching` sequence for `1.5.3` [#23696 comment:27](https://github.com/sagemath/sage/issues/23696#comment:27). This 

```
sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
```
seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.



---

archive/issue_comments_398973.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nReplying to [@strogdon](#comment%3A28):\n> Replying to [@kwankyu](#comment%3A23):\n> > Replying to [@kiwifb](#comment%3A22):\n> > > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.\n\n> > \n> > I agree. Doctesting graphics is something that requires a human eye or AI.\n\n> It appears that now we are back to the `matching` sequence for `1.5.3` [#23696 comment:27](https://github.com/sagemath/sage/issues/23696#comment:27). This \n> \n> ```\n> sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n> ```\n> seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.\n> \n\nThis was just a shot in the dark. It doesn't work properly when the arrow is drawn with `dashed` linetype.",
    "created_at": "2018-08-01T04:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398973",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:29'>**Comment 29:**</a>
Replying to [@strogdon](#comment%3A28):
> Replying to [@kwankyu](#comment%3A23):
> > Replying to [@kiwifb](#comment%3A22):
> > > Getting that doctest to return something sensible required a considerable amount of effort. It is about controlling some aspect of the appearance on screen and stems from an older ticket about the appearance of double dashing. If I am completely honest I am not sure it is worth the time invested into fixing it.

> > 
> > I agree. Doctesting graphics is something that requires a human eye or AI.

> It appears that now we are back to the `matching` sequence for `1.5.3` [#23696 comment:27](https://github.com/sagemath/sage/issues/23696#comment:27). This 
> 
> ```
> sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
> ```
> seems to work; although, I haven't checked whether the above `is` matched correctly when the arrow is drawn with `dashed` linetype.
> 

This was just a shot in the dark. It doesn't work properly when the arrow is drawn with `dashed` linetype.



---

archive/issue_comments_398974.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nJust for the record, not that anything should be changed but\n\n```\nsage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'\n```\nis the correct matching pattern. It's fairly straightforward to deduce it. I had a `typo` that led to the previous conclusion.",
    "created_at": "2018-08-02T02:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398974",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:30'>**Comment 30:**</a>
Just for the record, not that anything should be changed but

```
sage: two_stroke_pattern = r'setdash.*setdash.*stroke.*stroke.*setdash'
```
is the correct matching pattern. It's fairly straightforward to deduce it. I had a `typo` that led to the previous conclusion.



---

archive/issue_events_311114.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:16:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311114"
}
```



---

archive/issue_events_311115.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1293a23e4c7b54b043fecb2a7134d3f9e787e3ab",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-05T08:16:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25799#event-311115"
}
```



---

archive/issue_comments_398975.json:
```json
{
    "body": "**Changing branch** from \"[u/klee/25799](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/25799)\" to \"[42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)\".",
    "created_at": "2018-08-05T08:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25799#issuecomment-398975",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/klee/25799](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/25799)" to "[42bda6f486e45c89daf5229ce89034dd5f0da0fb](https://github.com/sagemath/sagetrac-mirror/commit/42bda6f486e45c89daf5229ce89034dd5f0da0fb)".
