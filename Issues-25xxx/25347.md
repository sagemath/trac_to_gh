# Issue 25347: Packages hol_light (including flyspeck's formal_ineqs) and dependency camlp5

archive/issues_025110.json:
```json
{
    "assignees": [],
    "body": "Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/), which includes the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).\n\nAssuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.\n\nAdding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)\n\n```\n(cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )\n```\n\nAdding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.\n\nhol_light includes `formal_ineqs` from the Flyspeck project. Original source release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads, current development said to be at  https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.\n\n\nTo use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):\n\n```\n$ sage -sh\n$ hol-light\n# load_path := \"SAGE_LOCAL/share/formal_ineqs\" :: !load_path ;; \n# needs \"verifier/m_verifier_main.hl\";;\n```\n... this compiles for ca. 40 minutes.\n\n... and gives an error:\n\n```\n- : unit = ()\nFile \"misc/misc_vars.hl\" already loaded\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Taylor_interval\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_build.hl\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Taylor_interval\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier.hl\n- : unit = ()\nFile \"verifier/m_verifier_build.hl\" already loaded\n- : unit = ()\nFile \"taylor/m_taylor.hl\" already loaded\n- : unit = ()\nFile \"misc/misc_vars.hl\" already loaded\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Taylor_interval\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith.hl\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Taylor_interval\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith2.hl\n- : unit = ()\nFile \"misc/misc_vars.hl\" already loaded\n- : unit = ()\nFile \"verifier/certificate.hl\" already loaded\n- : unit = ()\nFile \"informal/informal_taylor.hl\" already loaded\n- : unit = ()\nFile \"verifier/certificate.hl\" already loaded\n- : unit = ()\nFile \"verifier_options.hl\" already loaded\n- : unit = ()\nmodule Informal_search :\n  sig\n    type search_options = {\n      raw_intervals0 : bool;\n      max_width : float;\n      max_depth : int;\n      mono_depth : int;\n      pp : int;\n    }\n    val find_max : 'a list -> 'a * int\n    val split_domain :\n      int ->\n      int ->\n      Informal_taylor.m_cell_domain ->\n      Informal_taylor.m_cell_domain * Informal_taylor.m_cell_domain\n    val restrict_domain :\n      int ->\n      bool -> Informal_taylor.m_cell_domain -> Informal_taylor.m_cell_domain\n    type function_info = {\n      eval0 :\n        int ->\n        Informal_float.ifloat list ->\n        Informal_float.ifloat list -> Informal_interval.interval;\n      taylor :\n        int ->\n        int ->\n        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval;\n      index : int;\n    }\n    type result =\n        Cell_inconclusive\n      | Cell_false\n      | Cell_result of Certificate.result_tree\n      | Cell_pass of bool * function_info\n    exception Construction_error of string * Informal_taylor.m_cell_domain *\n                function_info list\n    val error :\n      string -> Informal_taylor.m_cell_domain -> function_info list -> 'a\n    val init_vol : Informal_taylor.m_cell_domain -> unit\n    val update_verified_vol : Informal_taylor.m_cell_domain -> unit\n    val check_cell :\n      search_options ->\n      Informal_taylor.m_cell_domain -> function_info list -> result\n    val try_mono :\n      search_options ->\n      Informal_taylor.m_cell_domain ->\n      function_info -> Informal_taylor.m_taylor_interval -> result\n    val construct_certificate0 :\n      search_options ->\n      Informal_taylor.m_cell_domain ->\n      function_info list -> Certificate.result_tree\n    val construct_certificate :\n      search_options ->\n      Informal_taylor.m_cell_domain ->\n      ((int ->\n        Informal_float.ifloat list ->\n        Informal_float.ifloat list -> Informal_interval.interval) *\n       (int ->\n        int ->\n        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval))\n      list -> Certificate.result_tree\n  end\n- : unit = ()\nFile \"informal/informal_verifier.hl\" already loaded\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Eval_interval\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_main.hl\nval it : unit = ()\n# File \"_none_\", line 1:\nError: Unbound module M_verifier_main\n```\n\n\nOther open questions:\n- Can it be compiled with ocamlopt?\n- Use checkpointing tool on Linux? On macOS?\n\n\n\n\nBranch/Commit: **[u/mkoeppe/package_hol_light__and_dependency_camlp5_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/package_hol_light__and_dependency_camlp5_) @ [`b4357f9`](https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785)**\n\nComponent: **packages: experimental**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25347_\n\n",
    "created_at": "2018-05-11T18:52:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20experimental",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/pending"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Packages hol_light (including flyspeck's formal_ineqs) and dependency camlp5",
    "type": "issue",
    "updated_at": "2018-05-13T15:19:33Z",
    "url": "https://github.com/sagemath/sage/issues/25347",
    "user": "https://github.com/mkoeppe"
}
```
Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/), which includes the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).

Assuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.

Adding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)

```
(cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )
```

Adding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.

hol_light includes `formal_ineqs` from the Flyspeck project. Original source release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads, current development said to be at  https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.


To use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):

```
$ sage -sh
$ hol-light
# load_path := "SAGE_LOCAL/share/formal_ineqs" :: !load_path ;; 
# needs "verifier/m_verifier_main.hl";;
```
... this compiles for ca. 40 minutes.

... and gives an error:

```
- : unit = ()
File "misc/misc_vars.hl" already loaded
- : unit = ()
File "_none_", line 1:
Error: Unbound module Taylor_interval
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_build.hl
- : unit = ()
File "_none_", line 1:
Error: Unbound module Taylor_interval
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier.hl
- : unit = ()
File "verifier/m_verifier_build.hl" already loaded
- : unit = ()
File "taylor/m_taylor.hl" already loaded
- : unit = ()
File "misc/misc_vars.hl" already loaded
- : unit = ()
File "_none_", line 1:
Error: Unbound module Taylor_interval
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith.hl
- : unit = ()
File "_none_", line 1:
Error: Unbound module Taylor_interval
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith2.hl
- : unit = ()
File "misc/misc_vars.hl" already loaded
- : unit = ()
File "verifier/certificate.hl" already loaded
- : unit = ()
File "informal/informal_taylor.hl" already loaded
- : unit = ()
File "verifier/certificate.hl" already loaded
- : unit = ()
File "verifier_options.hl" already loaded
- : unit = ()
module Informal_search :
  sig
    type search_options = {
      raw_intervals0 : bool;
      max_width : float;
      max_depth : int;
      mono_depth : int;
      pp : int;
    }
    val find_max : 'a list -> 'a * int
    val split_domain :
      int ->
      int ->
      Informal_taylor.m_cell_domain ->
      Informal_taylor.m_cell_domain * Informal_taylor.m_cell_domain
    val restrict_domain :
      int ->
      bool -> Informal_taylor.m_cell_domain -> Informal_taylor.m_cell_domain
    type function_info = {
      eval0 :
        int ->
        Informal_float.ifloat list ->
        Informal_float.ifloat list -> Informal_interval.interval;
      taylor :
        int ->
        int ->
        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval;
      index : int;
    }
    type result =
        Cell_inconclusive
      | Cell_false
      | Cell_result of Certificate.result_tree
      | Cell_pass of bool * function_info
    exception Construction_error of string * Informal_taylor.m_cell_domain *
                function_info list
    val error :
      string -> Informal_taylor.m_cell_domain -> function_info list -> 'a
    val init_vol : Informal_taylor.m_cell_domain -> unit
    val update_verified_vol : Informal_taylor.m_cell_domain -> unit
    val check_cell :
      search_options ->
      Informal_taylor.m_cell_domain -> function_info list -> result
    val try_mono :
      search_options ->
      Informal_taylor.m_cell_domain ->
      function_info -> Informal_taylor.m_taylor_interval -> result
    val construct_certificate0 :
      search_options ->
      Informal_taylor.m_cell_domain ->
      function_info list -> Certificate.result_tree
    val construct_certificate :
      search_options ->
      Informal_taylor.m_cell_domain ->
      ((int ->
        Informal_float.ifloat list ->
        Informal_float.ifloat list -> Informal_interval.interval) *
       (int ->
        int ->
        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval))
      list -> Certificate.result_tree
  end
- : unit = ()
File "informal/informal_verifier.hl" already loaded
- : unit = ()
File "_none_", line 1:
Error: Unbound module Eval_interval
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_main.hl
val it : unit = ()
# File "_none_", line 1:
Error: Unbound module M_verifier_main
```


Other open questions:
- Can it be compiled with ocamlopt?
- Use checkpointing tool on Linux? On macOS?




Branch/Commit: **[u/mkoeppe/package_hol_light__and_dependency_camlp5_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/package_hol_light__and_dependency_camlp5_) @ [`b4357f9`](https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785)**

Component: **packages: experimental**

_Issue created by migration from https://trac.sagemath.org/ticket/25347_





---

archive/issue_events_350682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-11T18:52:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20experimental",
    "label_color": "000080",
    "label_name": "c: packages: experimental",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350682"
}
```



---

archive/issue_events_350683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-11T18:52:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350683"
}
```



---

archive/issue_events_350684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-11T18:52:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350684"
}
```



---

archive/issue_events_350685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-11T18:52:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350685"
}
```



---

archive/issue_comments_387669.json:
```json
{
    "body": "Branch: **[u/mkoeppe/package_hol_light__and_dependency_camlp5_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/package_hol_light__and_dependency_camlp5_)**",
    "created_at": "2018-05-11T18:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387669",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/package_hol_light__and_dependency_camlp5_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/package_hol_light__and_dependency_camlp5_)**



---

archive/issue_comments_387670.json:
```json
{
    "body": "Commit: **[`3deb258`](https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8)**",
    "created_at": "2018-05-11T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387670",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`3deb258`](https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8)**



---

archive/issue_comments_387671.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8\">3deb258</a></td><td><code>Experimental packages for hol-light, camlp5</code></td></tr></table>\n",
    "created_at": "2018-05-11T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387671",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8">3deb258</a></td><td><code>Experimental packages for hol-light, camlp5</code></td></tr></table>




---

archive/issue_events_350686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-11T19:28:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "title_is": "Packages hol_light and flyspeck_formal_ineqs (and dependency camlp5)",
    "title_was": "Package hol-light (and dependency camlp5)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350686"
}
```



---

archive/issue_comments_387672.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/)\n+Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).\n \n Assuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.\n \n@@ -8,7 +8,7 @@\n (cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )\n ```\n \n-Adding package `hol-light`. Upstream () has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.\n+Adding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.\n \n+Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.\n \n-\n``````\n",
    "created_at": "2018-05-11T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387672",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/)
+Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).
 
 Assuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.
 
@@ -8,7 +8,7 @@
 (cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )
 ```
 
-Adding package `hol-light`. Upstream () has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.
+Adding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.
 
+Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.
 
-
``````




---

archive/issue_comments_387673.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8b0680cbfa50d01af4273fbf6135bb295baf55e\">f8b0680</a></td><td><code>Experimental packages for hol-light, camlp5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd\">9b9db06</a></td><td><code>Add package flyspeck_formal_ineqs</code></td></tr></table>\n",
    "created_at": "2018-05-11T19:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387673",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8b0680cbfa50d01af4273fbf6135bb295baf55e">f8b0680</a></td><td><code>Experimental packages for hol-light, camlp5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd">9b9db06</a></td><td><code>Add package flyspeck_formal_ineqs</code></td></tr></table>




---

archive/issue_comments_387674.json:
```json
{
    "body": "Changed commit from **[`3deb258`](https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8)** to **[`9b9db06`](https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd)**",
    "created_at": "2018-05-11T19:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3deb258`](https://github.com/sagemath/sagetrac-mirror/commit/3deb258b005a00b1ba307790d8ebcca9f9a890b8)** to **[`9b9db06`](https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd)**



---

archive/issue_comments_387675.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).\n \n-Assuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.\n+Assuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.\n \n Adding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)\n \n@@ -12,3 +12,129 @@\n \n Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.\n \n+\n+To use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):\n+\n+```\n+$ sage -sh\n+$ hol-light\n+# load_path := \"SAGE_LOCAL/share/formal_ineqs\" :: !load_path ;; \n+# needs \"verifier/m_verifier_main.hl\";;\n+```\n+... this compiles for ca. 40 minutes.\n+\n+... and gives an error:\n+\n+```\n+- : unit = ()\n+File \"misc/misc_vars.hl\" already loaded\n+- : unit = ()\n+File \"_none_\", line 1:\n+Error: Unbound module Taylor_interval\n+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_build.hl\n+- : unit = ()\n+File \"_none_\", line 1:\n+Error: Unbound module Taylor_interval\n+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier.hl\n+- : unit = ()\n+File \"verifier/m_verifier_build.hl\" already loaded\n+- : unit = ()\n+File \"taylor/m_taylor.hl\" already loaded\n+- : unit = ()\n+File \"misc/misc_vars.hl\" already loaded\n+- : unit = ()\n+File \"_none_\", line 1:\n+Error: Unbound module Taylor_interval\n+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith.hl\n+- : unit = ()\n+File \"_none_\", line 1:\n+Error: Unbound module Taylor_interval\n+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith2.hl\n+- : unit = ()\n+File \"misc/misc_vars.hl\" already loaded\n+- : unit = ()\n+File \"verifier/certificate.hl\" already loaded\n+- : unit = ()\n+File \"informal/informal_taylor.hl\" already loaded\n+- : unit = ()\n+File \"verifier/certificate.hl\" already loaded\n+- : unit = ()\n+File \"verifier_options.hl\" already loaded\n+- : unit = ()\n+module Informal_search :\n+  sig\n+    type search_options = {\n+      raw_intervals0 : bool;\n+      max_width : float;\n+      max_depth : int;\n+      mono_depth : int;\n+      pp : int;\n+    }\n+    val find_max : 'a list -> 'a * int\n+    val split_domain :\n+      int ->\n+      int ->\n+      Informal_taylor.m_cell_domain ->\n+      Informal_taylor.m_cell_domain * Informal_taylor.m_cell_domain\n+    val restrict_domain :\n+      int ->\n+      bool -> Informal_taylor.m_cell_domain -> Informal_taylor.m_cell_domain\n+    type function_info = {\n+      eval0 :\n+        int ->\n+        Informal_float.ifloat list ->\n+        Informal_float.ifloat list -> Informal_interval.interval;\n+      taylor :\n+        int ->\n+        int ->\n+        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval;\n+      index : int;\n+    }\n+    type result =\n+        Cell_inconclusive\n+      | Cell_false\n+      | Cell_result of Certificate.result_tree\n+      | Cell_pass of bool * function_info\n+    exception Construction_error of string * Informal_taylor.m_cell_domain *\n+                function_info list\n+    val error :\n+      string -> Informal_taylor.m_cell_domain -> function_info list -> 'a\n+    val init_vol : Informal_taylor.m_cell_domain -> unit\n+    val update_verified_vol : Informal_taylor.m_cell_domain -> unit\n+    val check_cell :\n+      search_options ->\n+      Informal_taylor.m_cell_domain -> function_info list -> result\n+    val try_mono :\n+      search_options ->\n+      Informal_taylor.m_cell_domain ->\n+      function_info -> Informal_taylor.m_taylor_interval -> result\n+    val construct_certificate0 :\n+      search_options ->\n+      Informal_taylor.m_cell_domain ->\n+      function_info list -> Certificate.result_tree\n+    val construct_certificate :\n+      search_options ->\n+      Informal_taylor.m_cell_domain ->\n+      ((int ->\n+        Informal_float.ifloat list ->\n+        Informal_float.ifloat list -> Informal_interval.interval) *\n+       (int ->\n+        int ->\n+        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval))\n+      list -> Certificate.result_tree\n+  end\n+- : unit = ()\n+File \"informal/informal_verifier.hl\" already loaded\n+- : unit = ()\n+File \"_none_\", line 1:\n+Error: Unbound module Eval_interval\n+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_main.hl\n+val it : unit = ()\n+# File \"_none_\", line 1:\n+Error: Unbound module M_verifier_main\n+```\n+\n+\n+\n+\n+\n``````\n",
    "created_at": "2018-05-11T20:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387675",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).
 
-Assuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.
+Assuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.
 
 Adding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)
 
@@ -12,3 +12,129 @@
 
 Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.
 
+
+To use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):
+
+```
+$ sage -sh
+$ hol-light
+# load_path := "SAGE_LOCAL/share/formal_ineqs" :: !load_path ;; 
+# needs "verifier/m_verifier_main.hl";;
+```
+... this compiles for ca. 40 minutes.
+
+... and gives an error:
+
+```
+- : unit = ()
+File "misc/misc_vars.hl" already loaded
+- : unit = ()
+File "_none_", line 1:
+Error: Unbound module Taylor_interval
+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_build.hl
+- : unit = ()
+File "_none_", line 1:
+Error: Unbound module Taylor_interval
+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier.hl
+- : unit = ()
+File "verifier/m_verifier_build.hl" already loaded
+- : unit = ()
+File "taylor/m_taylor.hl" already loaded
+- : unit = ()
+File "misc/misc_vars.hl" already loaded
+- : unit = ()
+File "_none_", line 1:
+Error: Unbound module Taylor_interval
+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith.hl
+- : unit = ()
+File "_none_", line 1:
+Error: Unbound module Taylor_interval
+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/taylor/m_taylor_arith2.hl
+- : unit = ()
+File "misc/misc_vars.hl" already loaded
+- : unit = ()
+File "verifier/certificate.hl" already loaded
+- : unit = ()
+File "informal/informal_taylor.hl" already loaded
+- : unit = ()
+File "verifier/certificate.hl" already loaded
+- : unit = ()
+File "verifier_options.hl" already loaded
+- : unit = ()
+module Informal_search :
+  sig
+    type search_options = {
+      raw_intervals0 : bool;
+      max_width : float;
+      max_depth : int;
+      mono_depth : int;
+      pp : int;
+    }
+    val find_max : 'a list -> 'a * int
+    val split_domain :
+      int ->
+      int ->
+      Informal_taylor.m_cell_domain ->
+      Informal_taylor.m_cell_domain * Informal_taylor.m_cell_domain
+    val restrict_domain :
+      int ->
+      bool -> Informal_taylor.m_cell_domain -> Informal_taylor.m_cell_domain
+    type function_info = {
+      eval0 :
+        int ->
+        Informal_float.ifloat list ->
+        Informal_float.ifloat list -> Informal_interval.interval;
+      taylor :
+        int ->
+        int ->
+        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval;
+      index : int;
+    }
+    type result =
+        Cell_inconclusive
+      | Cell_false
+      | Cell_result of Certificate.result_tree
+      | Cell_pass of bool * function_info
+    exception Construction_error of string * Informal_taylor.m_cell_domain *
+                function_info list
+    val error :
+      string -> Informal_taylor.m_cell_domain -> function_info list -> 'a
+    val init_vol : Informal_taylor.m_cell_domain -> unit
+    val update_verified_vol : Informal_taylor.m_cell_domain -> unit
+    val check_cell :
+      search_options ->
+      Informal_taylor.m_cell_domain -> function_info list -> result
+    val try_mono :
+      search_options ->
+      Informal_taylor.m_cell_domain ->
+      function_info -> Informal_taylor.m_taylor_interval -> result
+    val construct_certificate0 :
+      search_options ->
+      Informal_taylor.m_cell_domain ->
+      function_info list -> Certificate.result_tree
+    val construct_certificate :
+      search_options ->
+      Informal_taylor.m_cell_domain ->
+      ((int ->
+        Informal_float.ifloat list ->
+        Informal_float.ifloat list -> Informal_interval.interval) *
+       (int ->
+        int ->
+        Informal_taylor.m_cell_domain -> Informal_taylor.m_taylor_interval))
+      list -> Certificate.result_tree
+  end
+- : unit = ()
+File "informal/informal_verifier.hl" already loaded
+- : unit = ()
+File "_none_", line 1:
+Error: Unbound module Eval_interval
+Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/verifier/m_verifier_main.hl
+val it : unit = ()
+# File "_none_", line 1:
+Error: Unbound module M_verifier_main
+```
+
+
+
+
+
``````




---

archive/issue_comments_387676.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nEarliest error:\n\n```\nException: Failure \"tryfind\".\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/hol-light/Multivariate/realanalysis.ml\n- : unit = ()\nFile \"/Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl\", line 318, characters 55-84:\nError: Unbound value REAL_INTEGRABLE_UNIFORM_LIMIT\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Series\n```",
    "created_at": "2018-05-11T21:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387676",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Earliest error:

```
Exception: Failure "tryfind".
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/hol-light/Multivariate/realanalysis.ml
- : unit = ()
File "/Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl", line 318, characters 55-84:
Error: Unbound value REAL_INTEGRABLE_UNIFORM_LIMIT
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl
- : unit = ()
File "_none_", line 1:
Error: Unbound module Series
```



---

archive/issue_comments_387677.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -135,6 +135,9 @@\n ```\n \n \n+Other open questions:\n+- Can it be compiled with ocamlopt?\n+- Use checkpointing tool on Linux? On macOS?\n \n \n \n``````\n",
    "created_at": "2018-05-11T21:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387677",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -135,6 +135,9 @@
 ```
 
 
+Other open questions:
+- Can it be compiled with ocamlopt?
+- Use checkpointing tool on Linux? On macOS?
 
 
 
``````




---

archive/issue_comments_387678.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJust a comment on the installer scripts: you should use the `sdh_...` functions (grep for `sdh_make_install` for example).",
    "created_at": "2018-05-12T12:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387678",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Just a comment on the installer scripts: you should use the `sdh_...` functions (grep for `sdh_make_install` for example).



---

archive/issue_comments_387679.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't really like how you pull from git at install time. Better just make a proper package from the git repo. For `script` packages, there is no dependency or version checking.\n\nAnd even if you do want to pull from git, this is really bad:\n\n```\nif [ -n \"${FORMAL_INEQS_COMMIT}\" ]; then\n    git checkout ${FORMAL_INEQS_COMMIT}\nelse\n    git pull --ff-only\nfi\n```\nYou really should fix a commit, not just pull whatever is on the master branch.\n\n(NOTE: for experimental packages, you can do whatever you want. So take these comments as advice, not as a requirement)",
    "created_at": "2018-05-12T12:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387679",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't really like how you pull from git at install time. Better just make a proper package from the git repo. For `script` packages, there is no dependency or version checking.

And even if you do want to pull from git, this is really bad:

```
if [ -n "${FORMAL_INEQS_COMMIT}" ]; then
    git checkout ${FORMAL_INEQS_COMMIT}
else
    git pull --ff-only
fi
```
You really should fix a commit, not just pull whatever is on the master branch.

(NOTE: for experimental packages, you can do whatever you want. So take these comments as advice, not as a requirement)



---

archive/issue_comments_387680.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks for the comments; yes, these are very preliminary scripts and before I would set this ticket to review, it would be replaced by using a tarball.",
    "created_at": "2018-05-12T20:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387680",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks for the comments; yes, these are very preliminary scripts and before I would set this ticket to review, it would be replaced by using a tarball.



---

archive/issue_comments_387681.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLoading Formal_ineqs also fails in Debian's version of the package. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=898514",
    "created_at": "2018-05-12T22:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387681",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Loading Formal_ineqs also fails in Debian's version of the package. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=898514



---

archive/issue_comments_387682.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785\">b4357f9</a></td><td><code>Remove separate package flyspeck_formal_ineqs because hol_light includes it</code></td></tr></table>\n",
    "created_at": "2018-05-13T15:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387682",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785">b4357f9</a></td><td><code>Remove separate package flyspeck_formal_ineqs because hol_light includes it</code></td></tr></table>




---

archive/issue_comments_387683.json:
```json
{
    "body": "Changed commit from **[`9b9db06`](https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd)** to **[`b4357f9`](https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785)**",
    "created_at": "2018-05-13T15:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b9db06`](https://github.com/sagemath/sagetrac-mirror/commit/9b9db06fb6cd2dd80a357482c4f22ce4dd43bbbd)** to **[`b4357f9`](https://github.com/sagemath/sagetrac-mirror/commit/b4357f9ca813bcafd035ae0193d1225e5f865785)**



---

archive/issue_comments_387684.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).\n+Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/), which includes the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).\n \n Assuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.\n \n@@ -10,7 +10,7 @@\n \n Adding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.\n \n-Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.\n+hol_light includes `formal_ineqs` from the Flyspeck project. Original source release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads, current development said to be at  https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.\n \n \n To use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):\n``````\n",
    "created_at": "2018-05-13T15:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25347#issuecomment-387684",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/) and the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).
+Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/), which includes the flyspeck project's formal verifier of nonlinear inequalities (https://github.com/monadius/formal_ineqs).
 
 Assuming distribution package for OCaml is available. Tested on Homebrew (`brew install ocaml-num`), which has version 4.06.1.
 
@@ -10,7 +10,7 @@
 
 Adding package `hol_light`. Upstream has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.
 
-Adding package `flyspeck_formal_ineqs`. Upstream has a release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads . We pull instead from https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.
+hol_light includes `formal_ineqs` from the Flyspeck project. Original source release without version number at https://github.com/flyspeck/flyspeck/tree/master/downloads, current development said to be at  https://github.com/monadius/formal_ineqs, which has some fixes for newer HOL Light.
 
 
 To use (see https://github.com/monadius/formal_ineqs/blob/master/docs/FormalVerifier.pdf):
``````




---

archive/issue_events_350687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-05-13T15:19:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25347",
    "title_is": "Packages hol_light (including flyspeck's formal_ineqs) and dependency camlp5",
    "title_was": "Packages hol_light and flyspeck_formal_ineqs (and dependency camlp5)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25347#event-350687"
}
```
