# Issue 25946: py3: fixes for sage.schemes.hyperelliptic_curves

archive/issues_025709.json:
```json
{
    "assignees": [],
    "body": "The main thing needed here was a `__hash__`.\nOr removing `__eq__` and `__ne__`\n\nPart of #24551\n\nCC:  @bhutz @JohnCremona @roed314\n\nKeywords: **sagedays@icerm**\n\nBranch/Commit: **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**\n\nReviewer: **Travis Scrimshaw, David Roe**\n\nAuthor: **Erik Bray**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25946_\n\n",
    "closed_at": "2018-08-17T21:14:06Z",
    "created_at": "2018-07-27T10:26:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fixes for sage.schemes.hyperelliptic_curves",
    "type": "issue",
    "updated_at": "2018-08-17T21:14:06Z",
    "url": "https://github.com/sagemath/sage/issues/25946",
    "user": "https://github.com/embray"
}
```
The main thing needed here was a `__hash__`.
Or removing `__eq__` and `__ne__`

Part of #24551

CC:  @bhutz @JohnCremona @roed314

Keywords: **sagedays@icerm**

Branch/Commit: **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**

Reviewer: **Travis Scrimshaw, David Roe**

Author: **Erik Bray**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/25946_





---

archive/issue_events_355464.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T10:26:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355464"
}
```



---

archive/issue_events_355465.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T10:26:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355465"
}
```



---

archive/issue_events_355466.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T10:26:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355466"
}
```



---

archive/issue_events_355467.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T10:26:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355467"
}
```



---

archive/issue_events_355468.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T10:27:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355468"
}
```



---

archive/issue_comments_399403.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-07-27T12:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399403",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_355469.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-27T12:53:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355469"
}
```



---

archive/issue_events_355470.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-27T12:53:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355470"
}
```



---

archive/issue_comments_399404.json:
```json
{
    "body": "Changed keywords from none to **sagedays@icerm**",
    "created_at": "2018-07-27T12:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399404",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from none to **sagedays@icerm**



---

archive/issue_comments_399405.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYou have too much data in your `__hash__`:\n\n```\nsage: P.<x> = QQ[]\nsage: f0 = 4*x^5 - 30*x^3 + 45*x - 22\nsage: C0 = HyperellipticCurve(f0)\nsage: P.<x> = RR[]\nsage: f1 = 4*x^5 - 30*x^3 + 45*x - 22\nsage: C1 = HyperellipticCurve(f1)\nsage: C1 == C0\nTrue\nsage: hash(C1) == hash(C0)\nFalse\n```\nSo you definitely have to remove `_PP` from the hash, and I would probably remove both the `__class__` as subclasses are not used in the `__eq__` comparison.",
    "created_at": "2018-07-27T12:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399405",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

You have too much data in your `__hash__`:

```
sage: P.<x> = QQ[]
sage: f0 = 4*x^5 - 30*x^3 + 45*x - 22
sage: C0 = HyperellipticCurve(f0)
sage: P.<x> = RR[]
sage: f1 = 4*x^5 - 30*x^3 + 45*x - 22
sage: C1 = HyperellipticCurve(f1)
sage: C1 == C0
True
sage: hash(C1) == hash(C0)
False
```
So you definitely have to remove `_PP` from the hash, and I would probably remove both the `__class__` as subclasses are not used in the `__eq__` comparison.



---

archive/issue_comments_399406.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm not 100% sure about that.  I'd need to double-check what the intention is here.  On Python 2 it was inheriting the flimsy default `__hash__` from `CategoryObject` that just hashes its `__repr__`.  So for this case I was including essentially the same data in the hash that would be needed to differentiate the reprs of two of these objects.\n\nBut maybe that's not necessary.  It just wasn't clear what the intent was (if any) due to the default hash...",
    "created_at": "2018-07-27T14:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399406",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm not 100% sure about that.  I'd need to double-check what the intention is here.  On Python 2 it was inheriting the flimsy default `__hash__` from `CategoryObject` that just hashes its `__repr__`.  So for this case I was including essentially the same data in the hash that would be needed to differentiate the reprs of two of these objects.

But maybe that's not necessary.  It just wasn't clear what the intent was (if any) due to the default hash...



---

archive/issue_events_355471.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T14:17:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355471"
}
```



---

archive/issue_events_355472.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-27T14:17:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355472"
}
```



---

archive/issue_comments_399407.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI completely agree the `repr` hash is bad. I think the data used for equality should be what is used for the `__hash__`, not more. From what you're saying, it seems like we are actually fixing a bug if we only hash `self._hyperelliptic_polynomials`.\n\nMy understanding behind the default hash is that every object has a `repr` and generally two objects that compare equal have equal `repr` output.\n\nI don't use/know this code, so we probably have to ask someone who understands it better to confirm if you're worried enough.",
    "created_at": "2018-07-27T14:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399407",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

I completely agree the `repr` hash is bad. I think the data used for equality should be what is used for the `__hash__`, not more. From what you're saying, it seems like we are actually fixing a bug if we only hash `self._hyperelliptic_polynomials`.

My understanding behind the default hash is that every object has a `repr` and generally two objects that compare equal have equal `repr` output.

I don't use/know this code, so we probably have to ask someone who understands it better to confirm if you're worried enough.



---

archive/issue_comments_399408.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI could certainly try a simpler repr to start with and see what happens.  If that works, then I agree with you we should just use what `__eq__` compares.",
    "created_at": "2018-07-27T14:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399408",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

I could certainly try a simpler repr to start with and see what happens.  If that works, then I agree with you we should just use what `__eq__` compares.



---

archive/issue_comments_399409.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSounds good. Thanks.",
    "created_at": "2018-07-27T14:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399409",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Sounds good. Thanks.



---

archive/issue_comments_399410.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nany progress here ?",
    "created_at": "2018-08-10T07:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399410",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

any progress here ?



---

archive/issue_comments_399411.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI mean, clearly not.  I'd prefer if someone who knew this code were to chime in, but otherwise I'll get to it if/when I feel like taking the time to understand this code better.",
    "created_at": "2018-08-10T09:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399411",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

I mean, clearly not.  I'd prefer if someone who knew this code were to chime in, but otherwise I'll get to it if/when I feel like taking the time to understand this code better.



---

archive/issue_comments_399412.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTo be clear, I also agree with everything Travis wrote on this ticket; I'm just not in a rush to act on it because I don't feel qualified to make that judgment call w.r.t. this code.",
    "created_at": "2018-08-10T09:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399412",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

To be clear, I also agree with everything Travis wrote on this ticket; I'm just not in a rush to act on it because I don't feel qualified to make that judgment call w.r.t. this code.



---

archive/issue_comments_399413.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nBen, do you know about this code or know who we should cc?",
    "created_at": "2018-08-10T09:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399413",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Ben, do you know about this code or know who we should cc?



---

archive/issue_comments_399414.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'm not familiar with this code. John may know.",
    "created_at": "2018-08-10T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399414",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:12" align="right">comment:12</div>

I'm not familiar with this code. John may know.



---

archive/issue_comments_399415.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI don't know or use the code (except perhaps occasionally) and so I do not really understand the issue here.  I don't think that I have ever written such a has function so do not know what properties it is supposed to have.\n\nWhat exactly was the problem which this patch is intended to fix?",
    "created_at": "2018-08-10T14:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399415",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:13" align="right">comment:13</div>

I don't know or use the code (except perhaps occasionally) and so I do not really understand the issue here.  I don't think that I have ever written such a has function so do not know what properties it is supposed to have.

What exactly was the problem which this patch is intended to fix?



---

archive/issue_comments_399416.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'm really confused about whether or not we should call these hyperelliptic curves equal in the first place. The current code returns true because the polynomials are equal which is because both variables are named `x` even though they are over different fields, are two curves over different fields really `_equal_`, even if one is just a base change of the other? For contrast\n\n```\nsage: P.<x,y>= RR[]\nsage: C0 = Curve(y - x^2  - 1)\nsage: C0\nAffine Plane Curve over Real Field with 53 bits of precision defined by -x^2 + y - 1.00000000000000\nsage: P.<x,y>= QQ[]\nsage: C1 = Curve(y - x^2  - 1)\nsage: C1\nAffine Plane Curve over Rational Field defined by -x^2 + y - 1\nsage: C0 == C1\nFalse\n```",
    "created_at": "2018-08-10T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399416",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:14" align="right">comment:14</div>

I'm really confused about whether or not we should call these hyperelliptic curves equal in the first place. The current code returns true because the polynomials are equal which is because both variables are named `x` even though they are over different fields, are two curves over different fields really `_equal_`, even if one is just a base change of the other? For contrast

```
sage: P.<x,y>= RR[]
sage: C0 = Curve(y - x^2  - 1)
sage: C0
Affine Plane Curve over Real Field with 53 bits of precision defined by -x^2 + y - 1.00000000000000
sage: P.<x,y>= QQ[]
sage: C1 = Curve(y - x^2  - 1)
sage: C1
Affine Plane Curve over Rational Field defined by -x^2 + y - 1
sage: C0 == C1
False
```



---

archive/issue_comments_399417.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@alexjbest](#comment:14):\n> I'm really confused about whether or not we should call these hyperelliptic curves equal in the first place. The current code returns true because the polynomials are equal which is because both variables are named `x` even though they are over different fields, are two curves over different fields really `_equal_`, even if one is just a base change of the other?\n\nI had the same doubt before.  There's some inconsistency throughout Sage about when some objects defined over different fields are considered equal under `==`.  In some cases it's quite deliberate, in other cases it's not clear until and unless the original author chimes in.  If the author isn't even sure I would lean against calling them `==`, much less having the same hash.",
    "created_at": "2018-08-10T15:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399417",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@alexjbest](#comment:14):
> I'm really confused about whether or not we should call these hyperelliptic curves equal in the first place. The current code returns true because the polynomials are equal which is because both variables are named `x` even though they are over different fields, are two curves over different fields really `_equal_`, even if one is just a base change of the other?

I had the same doubt before.  There's some inconsistency throughout Sage about when some objects defined over different fields are considered equal under `==`.  In some cases it's quite deliberate, in other cases it's not clear until and unless the original author chimes in.  If the author isn't even sure I would lean against calling them `==`, much less having the same hash.



---

archive/issue_comments_399418.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI agree with Alex: to be equal the fields of definition should equal and the defining polynomials identical.  This is the case with elliptic curves:\n\n```\nsage: E = EllipticCurve([0,1])\nsage: E\nElliptic Curve defined by y^2 = x^3 + 1 over Rational Field\nsage: K.<i> = NumberField(x^2+1)\nsage: EK = E.change_ring(K)\nsage: EK\nElliptic Curve defined by y^2 = x^3 + 1 over Number Field in i with defining polynomial x^2 + 1\nsage: E == EK\nFalse\nsage: hash(E)\n8741953973726\nsage: hash(EK)\n8741951786400\n```\nI don't know what this hash function actually does: it calls hash_by_id, whatever that is.  I also don't know how to find out what function is being called by E==EK either!",
    "created_at": "2018-08-10T16:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399418",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">comment:16</div>

I agree with Alex: to be equal the fields of definition should equal and the defining polynomials identical.  This is the case with elliptic curves:

```
sage: E = EllipticCurve([0,1])
sage: E
Elliptic Curve defined by y^2 = x^3 + 1 over Rational Field
sage: K.<i> = NumberField(x^2+1)
sage: EK = E.change_ring(K)
sage: EK
Elliptic Curve defined by y^2 = x^3 + 1 over Number Field in i with defining polynomial x^2 + 1
sage: E == EK
False
sage: hash(E)
8741953973726
sage: hash(EK)
8741951786400
```
I don't know what this hash function actually does: it calls hash_by_id, whatever that is.  I also don't know how to find out what function is being called by E==EK either!



---

archive/issue_comments_399419.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n`EllipticCurve` is a `UniqueFactory`, so the input (i.e., in part, the field) uniquely identifies the curve. So the `hash` and `==` is obtained by using `id` as there is a unique such object in memory at a given time. Changing the hyperelliptic to suppose the `UniqueRepresentation`-type behavior would be a very invasive and complicated surgery I think.\n\nSo the short-term fix IMO would be deciding an appropriate notion of `__eq__`, and then changing the `__hash__` to match. From what John is saying, we should also introduce a check that the defining fields are equal.\n\nAlso, from `git blame`, \"Nick Alexander\" and \"tornaria\" comes up a lot and David Kohel is listed in the copyright.",
    "created_at": "2018-08-10T23:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399419",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

`EllipticCurve` is a `UniqueFactory`, so the input (i.e., in part, the field) uniquely identifies the curve. So the `hash` and `==` is obtained by using `id` as there is a unique such object in memory at a given time. Changing the hyperelliptic to suppose the `UniqueRepresentation`-type behavior would be a very invasive and complicated surgery I think.

So the short-term fix IMO would be deciding an appropriate notion of `__eq__`, and then changing the `__hash__` to match. From what John is saying, we should also introduce a check that the defining fields are equal.

Also, from `git blame`, "Nick Alexander" and "tornaria" comes up a lot and David Kohel is listed in the copyright.



---

archive/issue_events_355473.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-14T08:05:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355473"
}
```



---

archive/issue_events_355474.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-14T08:05:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355474"
}
```



---

archive/issue_comments_399420.json:
```json
{
    "body": "Changed commit from **[`cb04ceb`](https://github.com/sagemath/sagetrac-mirror/commit/cb04ceb814b625383bce962fed09e39e7fa04184)** to **[`78ae922`](https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2)**",
    "created_at": "2018-08-14T08:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399420",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`cb04ceb`](https://github.com/sagemath/sagetrac-mirror/commit/cb04ceb814b625383bce962fed09e39e7fa04184)** to **[`78ae922`](https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2)**



---

archive/issue_comments_399421.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI propose a solution : simply remove `__eq__`, `__ne__` and `__hash__` here.\n\nThen they are all provided by the general setting of projective subschemes, which seems to be a good idea. This will compare ambient spaces and defining ideals, which amount to compare base field and polynomials.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2726198f766abcf045d53b94c3b0ef9f563de1bf\"><code>2726198</code></a></td><td><code>Merge branch 'u/embray/python3/sage-schemes-hyperelliptic_curves/misc' of ssh://trac.sagemath.org:22/sage into 8.4.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2\"><code>78ae922</code></a></td><td><code>py3: comparison and hash cleanup for hyperellliptic curves</code></td></tr></table>\n",
    "created_at": "2018-08-14T08:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399421",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

I propose a solution : simply remove `__eq__`, `__ne__` and `__hash__` here.

Then they are all provided by the general setting of projective subschemes, which seems to be a good idea. This will compare ambient spaces and defining ideals, which amount to compare base field and polynomials.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2726198f766abcf045d53b94c3b0ef9f563de1bf"><code>2726198</code></a></td><td><code>Merge branch 'u/embray/python3/sage-schemes-hyperelliptic_curves/misc' of ssh://trac.sagemath.org:22/sage into 8.4.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2"><code>78ae922</code></a></td><td><code>py3: comparison and hash cleanup for hyperellliptic curves</code></td></tr></table>




---

archive/issue_comments_399422.json:
```json
{
    "body": "Changed branch from **[u/embray/python3/sage-schemes-hyperelliptic_curves/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-schemes-hyperelliptic_curves/misc)** to **[public/25946](https://github.com/sagemath/sagetrac-mirror/tree/public/25946)**",
    "created_at": "2018-08-14T08:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399422",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/embray/python3/sage-schemes-hyperelliptic_curves/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-schemes-hyperelliptic_curves/misc)** to **[public/25946](https://github.com/sagemath/sagetrac-mirror/tree/public/25946)**



---

archive/issue_comments_399423.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThat sounds very sensible to me -- I do not know why the person who implemented these special functions thought it was necessary to override those of the parent class.\n\nAs far as I am concerned this is good to merge assuming that tests all pass.",
    "created_at": "2018-08-14T08:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399423",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:19" align="right">comment:19</div>

That sounds very sensible to me -- I do not know why the person who implemented these special functions thought it was necessary to override those of the parent class.

As far as I am concerned this is good to merge assuming that tests all pass.



---

archive/issue_comments_399424.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-The main thing need here was a `__hash__`.\n+The main thing needed here was a `__hash__`.\n+Or removing `__eq__` and `__ne__`\n+\n+Part of #24551\n``````\n",
    "created_at": "2018-08-14T09:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399424",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-The main thing need here was a `__hash__`.
+The main thing needed here was a `__hash__`.
+Or removing `__eq__` and `__ne__`
+
+Part of #24551
``````




---

archive/issue_comments_399425.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nfailing doctests in hyperelliptic_padic_field.py (sigh)",
    "created_at": "2018-08-14T11:42:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399425",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

failing doctests in hyperelliptic_padic_field.py (sigh)



---

archive/issue_comments_399426.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis seems like a reasonable approach, but it seems that you exposed a poor assumption that was made somewhere else.  I don't know what a `sage.rings.padics.padic_ZZ_pX_CR_element.pAdicZZpXCRElement` is, or why it isn't hashable.  Perhaps it should be?\n\nIf it definitely shouldn't be hashable (e.g. it is not immutable) then maybe the problem is in `MPolynomialIdeal.__richcmp__`'s assumption that the generators of an ideal are definitely hashable (and if not, it should do something else to compare gens).",
    "created_at": "2018-08-14T12:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399426",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

This seems like a reasonable approach, but it seems that you exposed a poor assumption that was made somewhere else.  I don't know what a `sage.rings.padics.padic_ZZ_pX_CR_element.pAdicZZpXCRElement` is, or why it isn't hashable.  Perhaps it should be?

If it definitely shouldn't be hashable (e.g. it is not immutable) then maybe the problem is in `MPolynomialIdeal.__richcmp__`'s assumption that the generators of an ideal are definitely hashable (and if not, it should do something else to compare gens).



---

archive/issue_comments_399427.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThere is a `_cache_key` method on these objects inside `src/sage/rings/padics/padic_ZZ_pX_CR_element.pyx`\n\nBut its doc claims that there is no reasonable hash..",
    "created_at": "2018-08-14T12:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399427",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

There is a `_cache_key` method on these objects inside `src/sage/rings/padics/padic_ZZ_pX_CR_element.pyx`

But its doc claims that there is no reasonable hash..



---

archive/issue_comments_399428.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAdding David Roe in CC since he may be able to throw light on the p-adic ring issue.  Note that p-adic rings (as with the reals) are not exact, so comparison between elements is not so easy.",
    "created_at": "2018-08-14T12:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399428",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:24" align="right">comment:24</div>

Adding David Roe in CC since he may be able to throw light on the p-adic ring issue.  Note that p-adic rings (as with the reals) are not exact, so comparison between elements is not so easy.



---

archive/issue_comments_399429.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIncidentally, `MPolynomialIdeal.__richcmp__` was last touched by #23920.  The idea to use sets to compare gens was from Travis: [#23920 comment:9](https://github.com/sagemath/sage/issues/23920#comment:9)\n\nPerhaps there should be a try/except around this and attempt direct comparison if comparing by sets raises a `TypeError`.  I'm not sure what the impact is of computing a Groebner basis, or if it can be avoided in some other way as well.",
    "created_at": "2018-08-14T12:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399429",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

Incidentally, `MPolynomialIdeal.__richcmp__` was last touched by #23920.  The idea to use sets to compare gens was from Travis: [#23920 comment:9](https://github.com/sagemath/sage/issues/23920#comment:9)

Perhaps there should be a try/except around this and attempt direct comparison if comparing by sets raises a `TypeError`.  I'm not sure what the impact is of computing a Groebner basis, or if it can be avoided in some other way as well.



---

archive/issue_comments_399430.json:
```json
{
    "body": "Changed commit from **[`78ae922`](https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2)** to **[`2431727`](https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d)**",
    "created_at": "2018-08-14T12:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399430",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`78ae922`](https://github.com/sagemath/sagetrac-mirror/commit/78ae9220be1f5279f1766ec78f597bb4634b69e2)** to **[`2431727`](https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d)**



---

archive/issue_comments_399431.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d\"><code>2431727</code></a></td><td><code>adding the hash</code></td></tr></table>\n",
    "created_at": "2018-08-14T12:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399431",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d"><code>2431727</code></a></td><td><code>adding the hash</code></td></tr></table>




---

archive/issue_comments_399432.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nadding hash from the existing _cache_key seems to fix the failing doctests.. But is this a correct thing to do ?",
    "created_at": "2018-08-14T12:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399432",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

adding hash from the existing _cache_key seems to fix the failing doctests.. But is this a correct thing to do ?



---

archive/issue_comments_399433.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@fchapoton](#comment:27):\n> adding hash from the existing _cache_key seems to fix the failing doctests.. But is this a correct thing to do ?\n\nNo, I don't believe so, and the I think the explanation in the `_cache_key` docs is fairly clear why.  Instead: [#25946 comment:25](https://github.com/sagemath/sage/issues/25946#comment:25)",
    "created_at": "2018-08-14T12:51:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399433",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@fchapoton](#comment:27):
> adding hash from the existing _cache_key seems to fix the failing doctests.. But is this a correct thing to do ?

No, I don't believe so, and the I think the explanation in the `_cache_key` docs is fairly clear why.  Instead: [#25946 comment:25](https://github.com/sagemath/sage/issues/25946#comment:25)



---

archive/issue_comments_399434.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5573ef5de068bdae2165cc9c16f0ced2151219a\"><code>d5573ef</code></a></td><td><code>py3: add a `__hash__` for HyperellipticCurve_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f29c001301afd191bb6a99af2016fdddbbb99926\"><code>f29c001</code></a></td><td><code>py3: need explicit cast to int for range</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3771812d49b682d9f8961cff4df7021babda57d9\"><code>3771812</code></a></td><td><code>py3: comparison and hash cleanup for hyperellliptic curves</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d\"><code>9f9399c</code></a></td><td><code>tiny change in the comparison of ideals inside polynomial rings</code></td></tr></table>\n",
    "created_at": "2018-08-14T13:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399434",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5573ef5de068bdae2165cc9c16f0ced2151219a"><code>d5573ef</code></a></td><td><code>py3: add a `__hash__` for HyperellipticCurve_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f29c001301afd191bb6a99af2016fdddbbb99926"><code>f29c001</code></a></td><td><code>py3: need explicit cast to int for range</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3771812d49b682d9f8961cff4df7021babda57d9"><code>3771812</code></a></td><td><code>py3: comparison and hash cleanup for hyperellliptic curves</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d"><code>9f9399c</code></a></td><td><code>tiny change in the comparison of ideals inside polynomial rings</code></td></tr></table>




---

archive/issue_comments_399435.json:
```json
{
    "body": "Changed commit from **[`2431727`](https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d)** to **[`9f9399c`](https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d)**",
    "created_at": "2018-08-14T13:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399435",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2431727`](https://github.com/sagemath/sagetrac-mirror/commit/243172790b441f1feb1f9dfa3cfdff9810f6705d)** to **[`9f9399c`](https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d)**



---

archive/issue_comments_399436.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nok. So here is my next proposal : when comparing ideals generated by a single polynomial, just compare this generator (no need to wrap by set).",
    "created_at": "2018-08-14T13:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399436",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

ok. So here is my next proposal : when comparing ideals generated by a single polynomial, just compare this generator (no need to wrap by set).



---

archive/issue_comments_399437.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nTrue.  Is that case common enough to merit a special case?  Are there cases of ideals of rings over these types of p-adics whose ideal would be generated by more than one polynomials (and hence would still crash on the existing code)?\n\nWhat I'm saying is just, why not:\n\n```python\ntry:\n    same_gens = set(self.gens()) == set(other.gens())\nexcept TypeError:\n    same_gens = False\n\nif same_gens:\n    # Do whatever we do currently\nelse:\n    # Do whatever is necessary to compare the gens (construct a GB, etc).\n```",
    "created_at": "2018-08-14T13:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399437",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

True.  Is that case common enough to merit a special case?  Are there cases of ideals of rings over these types of p-adics whose ideal would be generated by more than one polynomials (and hence would still crash on the existing code)?

What I'm saying is just, why not:

```python
try:
    same_gens = set(self.gens()) == set(other.gens())
except TypeError:
    same_gens = False

if same_gens:
    # Do whatever we do currently
else:
    # Do whatever is necessary to compare the gens (construct a GB, etc).
```



---

archive/issue_comments_399438.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f\"><code>ecc4b36</code></a></td><td><code>change again the comparison of ideals</code></td></tr></table>\n",
    "created_at": "2018-08-14T14:07:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f"><code>ecc4b36</code></a></td><td><code>change again the comparison of ideals</code></td></tr></table>




---

archive/issue_comments_399439.json:
```json
{
    "body": "Changed commit from **[`9f9399c`](https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d)** to **[`ecc4b36`](https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f)**",
    "created_at": "2018-08-14T14:07:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399439",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f9399c`](https://github.com/sagemath/sagetrac-mirror/commit/9f9399ca5bdf787d8cb61f1174f71822b1ea241d)** to **[`ecc4b36`](https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f)**



---

archive/issue_comments_399440.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@embray](#comment:31):\n> True.  Is that case common enough to merit a special case?  Are there cases of ideals of rings over these types of p-adics whose ideal would be generated by more than one polynomials (and hence would still crash on the existing code)?\n\nCertainly:  in ZZ_p[X] the ideal generated by p and X.  But the number of gens will always be small, so why not sort the gens, however many there are?\n\nThis is an example of a common problem in Sage and other systems.  If I define two ideals (or other structures) in different ways and ask whether they are equal then the test may be very expensive.  But here we just test whether they have been presented in the same way (or with trivial changes such as changing the order of the generators).\n\n\n> \n> What I'm saying is just, why not:\n> \n> ```python\n> try:\n>     same_gens = set(self.gens()) == set(other.gens())\n> except TypeError:\n>     same_gens = False\n> \n> if same_gens:\n>     # Do whatever we do currently\n> else:\n>     # Do whatever is necessary to compare the gens (construct a GB, etc).\n> ```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f\"><code>ecc4b36</code></a></td><td><code>change again the comparison of ideals</code></td></tr></table>\n",
    "created_at": "2018-08-14T14:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399440",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@embray](#comment:31):
> True.  Is that case common enough to merit a special case?  Are there cases of ideals of rings over these types of p-adics whose ideal would be generated by more than one polynomials (and hence would still crash on the existing code)?

Certainly:  in ZZ_p[X] the ideal generated by p and X.  But the number of gens will always be small, so why not sort the gens, however many there are?

This is an example of a common problem in Sage and other systems.  If I define two ideals (or other structures) in different ways and ask whether they are equal then the test may be very expensive.  But here we just test whether they have been presented in the same way (or with trivial changes such as changing the order of the generators).


> 
> What I'm saying is just, why not:
> 
> ```python
> try:
>     same_gens = set(self.gens()) == set(other.gens())
> except TypeError:
>     same_gens = False
> 
> if same_gens:
>     # Do whatever we do currently
> else:
>     # Do whatever is necessary to compare the gens (construct a GB, etc).
> ```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f"><code>ecc4b36</code></a></td><td><code>change again the comparison of ideals</code></td></tr></table>




---

archive/issue_comments_399441.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHere is another tentative : first compare without set() then compare with set()",
    "created_at": "2018-08-14T14:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399441",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

Here is another tentative : first compare without set() then compare with set()



---

archive/issue_comments_399442.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@fchapoton](#comment:34):\n> Here is another tentative : first compare without set() then compare with set()\n\nThat could still crash.  I don't know the math well enough to construct an interestingexample case, but say you have two copies of the same ideal, but their generators just happen to be in a different order, as in:\n\n```\nsage: R.<x,y> = QQ[]\nsage: R.ideal(x, y).gens()\n[x, y]\nsage: R.ideal(y, x).gens()\n```\n\nThis is the sort of case, as John wrote, that the `set()` call is intended for in the first place.  But if the elements `x` and `y` are not hashable, then the first test will still fail, and then the second test will be evaluated and will crash.\n\nIMO this comparison of gens() is just a special case shortcut which is fine as-is, but it should account for the possibility that some elements just aren't hashable, that's all.",
    "created_at": "2018-08-14T14:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399442",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@fchapoton](#comment:34):
> Here is another tentative : first compare without set() then compare with set()

That could still crash.  I don't know the math well enough to construct an interestingexample case, but say you have two copies of the same ideal, but their generators just happen to be in a different order, as in:

```
sage: R.<x,y> = QQ[]
sage: R.ideal(x, y).gens()
[x, y]
sage: R.ideal(y, x).gens()
```

This is the sort of case, as John wrote, that the `set()` call is intended for in the first place.  But if the elements `x` and `y` are not hashable, then the first test will still fail, and then the second test will be evaluated and will crash.

IMO this comparison of gens() is just a special case shortcut which is fine as-is, but it should account for the possibility that some elements just aren't hashable, that's all.



---

archive/issue_comments_399443.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nDoes hashable imply not sortable?  As I said, the lists of gens will be short normally, so something like testing sorted(s_gens)==sorted(o_gens) might work when the set() constructor does not?  There will still be silly trivial cases such as first giving {x,y} as gens then {x,x,y} and for sure someone will then complain.  But even as it is, we are not returning equality of the ideals (x,y) and (x+y,y).  We are never going to catch all trivial cases (and different users' idea of a trivial case will differ) so just comparing the list of gens with no processing at all is safest and most easily explained.",
    "created_at": "2018-08-14T14:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399443",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:36" align="right">comment:36</div>

Does hashable imply not sortable?  As I said, the lists of gens will be short normally, so something like testing sorted(s_gens)==sorted(o_gens) might work when the set() constructor does not?  There will still be silly trivial cases such as first giving {x,y} as gens then {x,x,y} and for sure someone will then complain.  But even as it is, we are not returning equality of the ideals (x,y) and (x+y,y).  We are never going to catch all trivial cases (and different users' idea of a trivial case will differ) so just comparing the list of gens with no processing at all is safest and most easily explained.



---

archive/issue_comments_399444.json:
```json
{
    "body": "Changed commit from **[`ecc4b36`](https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f)** to **[`d47fbb3`](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)**",
    "created_at": "2018-08-14T14:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399444",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ecc4b36`](https://github.com/sagemath/sagetrac-mirror/commit/ecc4b361b04690708a037dc03c0975a5d312530f)** to **[`d47fbb3`](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)**



---

archive/issue_comments_399445.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0\"><code>d47fbb3</code></a></td><td><code>wrap with try</code></td></tr></table>\n",
    "created_at": "2018-08-14T14:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399445",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0"><code>d47fbb3</code></a></td><td><code>wrap with try</code></td></tr></table>




---

archive/issue_comments_399446.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nok, I have wrapped with \"try / except\".",
    "created_at": "2018-08-14T14:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399446",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

ok, I have wrapped with "try / except".



---

archive/issue_comments_399447.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@JohnCremona](#comment:36):\n> Does hashable imply not sortable?  As I said, the lists of gens will be short normally, so something like testing sorted(s_gens)==sorted(o_gens) might work when the set() constructor does not?  There will still be silly trivial cases such as first giving {x,y} as gens then {x,x,y} and for sure someone will then complain.  But even as it is, we are not returning equality of the ideals (x,y) and (x+y,y).  We are never going to catch all trivial cases (and different users' idea of a trivial case will differ) so just comparing the list of gens with no processing at all is safest and most easily explained.\n\nI don't think sorting really helps here, because as I found out over in #25948, some elements can be \"sorted\" but the ordering is meaningless and unpredictable.",
    "created_at": "2018-08-14T14:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399447",
    "user": "https://github.com/embray"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@JohnCremona](#comment:36):
> Does hashable imply not sortable?  As I said, the lists of gens will be short normally, so something like testing sorted(s_gens)==sorted(o_gens) might work when the set() constructor does not?  There will still be silly trivial cases such as first giving {x,y} as gens then {x,x,y} and for sure someone will then complain.  But even as it is, we are not returning equality of the ideals (x,y) and (x+y,y).  We are never going to catch all trivial cases (and different users' idea of a trivial case will differ) so just comparing the list of gens with no processing at all is safest and most easily explained.

I don't think sorting really helps here, because as I found out over in #25948, some elements can be "sorted" but the ordering is meaningless and unpredictable.



---

archive/issue_comments_399448.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@sagetrac-git](#comment:37):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0\"><code>d47fbb3</code></a></td><td><code>wrap with try</code></td></tr></table>\n\nYou could still get rid of `(s_gens == o_gens)`.  I don't think it's that useful.",
    "created_at": "2018-08-14T14:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399448",
    "user": "https://github.com/embray"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@sagetrac-git](#comment:37):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0"><code>d47fbb3</code></a></td><td><code>wrap with try</code></td></tr></table>

You could still get rid of `(s_gens == o_gens)`.  I don't think it's that useful.



---

archive/issue_comments_399449.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@embray](#comment:40):\n> Replying to [@sagetrac-git](#comment:37):\n> > Branch pushed to git repo; I updated commit sha1. New commits:\n\n> |                                                                                                                                                 |               |\n> |-------------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n> |[d47fbb3](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)|`wrap with try`|\n> \n> You could still get rid of `(s_gens == o_gens)`.  I don't think it's that useful.\n\nYes it is. It will handle the precise case that we are dealing with in this ticket, hyperelliptic curves over p-adics.",
    "created_at": "2018-08-14T14:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399449",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@embray](#comment:40):
> Replying to [@sagetrac-git](#comment:37):
> > Branch pushed to git repo; I updated commit sha1. New commits:

> |                                                                                                                                                 |               |
> |-------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
> |[d47fbb3](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)|`wrap with try`|
> 
> You could still get rid of `(s_gens == o_gens)`.  I don't think it's that useful.

Yes it is. It will handle the precise case that we are dealing with in this ticket, hyperelliptic curves over p-adics.



---

archive/issue_comments_399450.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nOk, but I think as written you don't need the `same_gens` variable.  I only wrote it that way in my pseudo-code because I wasn't directly looking at the real code at the time, and didn't consider using a try/except/else.  I don't think we need to worry about `rich_to_bool` raising a `TypeError`.",
    "created_at": "2018-08-14T15:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399450",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">comment:42</div>

Ok, but I think as written you don't need the `same_gens` variable.  I only wrote it that way in my pseudo-code because I wasn't directly looking at the real code at the time, and didn't consider using a try/except/else.  I don't think we need to worry about `rich_to_bool` raising a `TypeError`.



---

archive/issue_comments_399451.json:
```json
{
    "body": "Changed commit from **[`d47fbb3`](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)** to **[`b129fc9`](https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb)**",
    "created_at": "2018-08-14T15:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399451",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d47fbb3`](https://github.com/sagemath/sagetrac-mirror/commit/d47fbb3f350c6e5ce4d2fdc809a3849699bebdd0)** to **[`b129fc9`](https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb)**



---

archive/issue_comments_399452.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb\"><code>b129fc9</code></a></td><td><code>fix</code></td></tr></table>\n",
    "created_at": "2018-08-14T15:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399452",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb"><code>b129fc9</code></a></td><td><code>fix</code></td></tr></table>




---

archive/issue_comments_399453.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nlike that ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb\"><code>b129fc9</code></a></td><td><code>fix</code></td></tr></table>\n",
    "created_at": "2018-08-14T15:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399453",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">comment:44</div>

like that ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb"><code>b129fc9</code></a></td><td><code>fix</code></td></tr></table>




---

archive/issue_comments_399454.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nYeah, though it would be nice to squash all these commits before we're done here.",
    "created_at": "2018-08-14T15:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399454",
    "user": "https://github.com/embray"
}
```

<div id="comment:45" align="right">comment:45</div>

Yeah, though it would be nice to squash all these commits before we're done here.



---

archive/issue_comments_399455.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7\"><code>f8687f7</code></a></td><td><code>py3: comparison cleanup for hyperelliptic curves</code></td></tr></table>\n",
    "created_at": "2018-08-14T15:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399455",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7"><code>f8687f7</code></a></td><td><code>py3: comparison cleanup for hyperelliptic curves</code></td></tr></table>




---

archive/issue_comments_399456.json:
```json
{
    "body": "Changed commit from **[`b129fc9`](https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb)** to **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**",
    "created_at": "2018-08-14T15:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399456",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b129fc9`](https://github.com/sagemath/sagetrac-mirror/commit/b129fc96811a9db8c454a395180e6ca2a8a1b5fb)** to **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**



---

archive/issue_comments_399457.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\ndone",
    "created_at": "2018-08-14T15:25:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399457",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">comment:47</div>

done



---

archive/issue_comments_399458.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThanks! Well, I'm happy, so you can set positive review if you want, or wait and see if anyone smarter than me wants to weigh on, though it seems like this approach meshes with what the other experts have said so far.",
    "created_at": "2018-08-14T15:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399458",
    "user": "https://github.com/embray"
}
```

<div id="comment:48" align="right">comment:48</div>

Thanks! Well, I'm happy, so you can set positive review if you want, or wait and see if anyone smarter than me wants to weigh on, though it seems like this approach meshes with what the other experts have said so far.



---

archive/issue_comments_399459.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI am happy (and making no claims to be cleverer than anyone else ;)) \n\nI would never have thought of using rich_to_bool() though.  Not clever enough!",
    "created_at": "2018-08-14T15:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399459",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:49" align="right">comment:49</div>

I am happy (and making no claims to be cleverer than anyone else ;)) 

I would never have thought of using rich_to_bool() though.  Not clever enough!



---

archive/issue_comments_399460.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, David Roe**",
    "created_at": "2018-08-14T16:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399460",
    "user": "https://github.com/roed314"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, David Roe**



---

archive/issue_comments_399461.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nSeems good to me too!",
    "created_at": "2018-08-14T16:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399461",
    "user": "https://github.com/roed314"
}
```

<div id="comment:50" align="right">comment:50</div>

Seems good to me too!



---

archive/issue_events_355475.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2018-08-14T16:07:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355475"
}
```



---

archive/issue_events_355476.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2018-08-14T16:07:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355476"
}
```



---

archive/issue_events_355477.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-17T21:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355477"
}
```



---

archive/issue_events_355478.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5e3de89a768f8e5a233763de63acde90ea40326f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-17T21:14:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25946#event-355478"
}
```



---

archive/issue_comments_399462.json:
```json
{
    "body": "Changed branch from **[public/25946](https://github.com/sagemath/sagetrac-mirror/tree/public/25946)** to **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**",
    "created_at": "2018-08-17T21:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25946#issuecomment-399462",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/25946](https://github.com/sagemath/sagetrac-mirror/tree/public/25946)** to **[`f8687f7`](https://github.com/sagemath/sagetrac-mirror/commit/f8687f7d8800aede97e36d4da30ae79da895b5f7)**
