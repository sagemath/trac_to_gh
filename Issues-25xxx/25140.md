# Issue 25140: Add spkg-legacy-uninstall scripts for most standard packages

archive/issues_024903.json:
```json
{
    "assignees": [
        "https://github.com/embray"
    ],
    "body": "This is a followup to #25139 and represents work that was originally done in #22510 to convert most packages to use `spkg-legacy-uninstall` and remove uninstall-related commands from their `spkg-install` scripts.\n\nThis work was brought over from an older branch and still needs some adjustment: It should incorporate the changes from the #24024 metaticket which conflict with some of these changes.  There are also some additional optional and experimental packages (and maybe a couple standard packages) that still need to be updated as well.\n\nProbably won't bother with that until and unless #25139 is approved of in some form that still includes the `spkg-legacy-uninstall` feature.\n\n---\n\nTo summarize what this is about: Part of the goal in implementing the new installation/uninstallation system for packages is that `spkg-install` should, ideally, not modify `$SAGE_LOCAL` in any way, at least for packages that support `DESTDIR`-based installation.  This allows more separation from the building of packages from their runtime installation target.\n\nHowever, many packages' `spkg-install` or `spkg-build` include commands (mostly in the form of `rm -rf`'s) to clean up files from previous installs of those packages.  This is no longer necessary for new-style package installations that track exactly what files are installed by a package.  But it is still necessary when upgrading from old installs of packages that don't have a file manifest.  This is what the `spkg-legacy-uninstall` script is for.  It's just taking the `rm -rf`'s from `spkg-install` and moving it into a separate script that is called by the uninstaller if it doesn't have a file manifest for that package.\n\nSo this ticket is just creating the `spkg-legacy-uninstall` for many packages that already have `DESTDIR` support.\n\nKeywords: **uninstall**\n\nBranch/Commit: **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers) @ [`e2d2b01`](https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f)**\n\nReviewer: **Julian R\u00fcth**\n\nAuthor: **Erik Bray**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25140_\n\n",
    "closed_at": "2018-08-11T16:55:31Z",
    "created_at": "2018-04-10T17:42:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/pending"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add spkg-legacy-uninstall scripts for most standard packages",
    "type": "issue",
    "updated_at": "2019-03-25T10:44:36Z",
    "url": "https://github.com/sagemath/sage/issues/25140",
    "user": "https://github.com/embray"
}
```
This is a followup to #25139 and represents work that was originally done in #22510 to convert most packages to use `spkg-legacy-uninstall` and remove uninstall-related commands from their `spkg-install` scripts.

This work was brought over from an older branch and still needs some adjustment: It should incorporate the changes from the #24024 metaticket which conflict with some of these changes.  There are also some additional optional and experimental packages (and maybe a couple standard packages) that still need to be updated as well.

Probably won't bother with that until and unless #25139 is approved of in some form that still includes the `spkg-legacy-uninstall` feature.

---

To summarize what this is about: Part of the goal in implementing the new installation/uninstallation system for packages is that `spkg-install` should, ideally, not modify `$SAGE_LOCAL` in any way, at least for packages that support `DESTDIR`-based installation.  This allows more separation from the building of packages from their runtime installation target.

However, many packages' `spkg-install` or `spkg-build` include commands (mostly in the form of `rm -rf`'s) to clean up files from previous installs of those packages.  This is no longer necessary for new-style package installations that track exactly what files are installed by a package.  But it is still necessary when upgrading from old installs of packages that don't have a file manifest.  This is what the `spkg-legacy-uninstall` script is for.  It's just taking the `rm -rf`'s from `spkg-install` and moving it into a separate script that is called by the uninstaller if it doesn't have a file manifest for that package.

So this ticket is just creating the `spkg-legacy-uninstall` for many packages that already have `DESTDIR` support.

Keywords: **uninstall**

Branch/Commit: **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers) @ [`e2d2b01`](https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f)**

Reviewer: **Julian Rüth**

Author: **Erik Bray**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/25140_





---

archive/issue_events_347844.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-10T17:42:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347844"
}
```



---

archive/issue_events_347845.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-10T17:42:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347845"
}
```



---

archive/issue_comments_383833.json:
```json
{
    "body": "Changed keywords from none to **uninstall**",
    "created_at": "2018-04-10T17:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383833",
    "user": "https://github.com/embray"
}
```

Changed keywords from none to **uninstall**



---

archive/issue_events_347846.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-10T17:49:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347846"
}
```



---

archive/issue_events_347847.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347847"
}
```



---

archive/issue_events_347848.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347848"
}
```



---

archive/issue_comments_383834.json:
```json
{
    "body": "Changed dependencies from **#25139** to none",
    "created_at": "2018-07-10T16:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383834",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#25139** to none



---

archive/issue_comments_383835.json:
```json
{
    "body": "Changed commit from **[`219150c`](https://github.com/sagemath/sagetrac-mirror/commit/219150c1039eb86fabf39a10530cc869b6924580)** to **[`58ad74e`](https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2)**",
    "created_at": "2018-07-10T17:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383835",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`219150c`](https://github.com/sagemath/sagetrac-mirror/commit/219150c1039eb86fabf39a10530cc869b6924580)** to **[`58ad74e`](https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2)**



---

archive/issue_comments_383836.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2\"><code>58ad74e</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr></table>\n",
    "created_at": "2018-07-10T17:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383836",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2"><code>58ad74e</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr></table>




---

archive/issue_comments_383837.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAs a reminder, the goal of this is to make it so that `spkg-install` scripts do not modify the contents of `$SAGE_LOCAL` directly.",
    "created_at": "2018-07-10T17:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383837",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

As a reminder, the goal of this is to make it so that `spkg-install` scripts do not modify the contents of `$SAGE_LOCAL` directly.



---

archive/issue_events_347849.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-10T17:24:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347849"
}
```



---

archive/issue_comments_383838.json:
```json
{
    "body": "Changed commit from **[`58ad74e`](https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2)** to **[`e6f189e`](https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8)**",
    "created_at": "2018-07-11T16:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383838",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58ad74e`](https://github.com/sagemath/sagetrac-mirror/commit/58ad74e5c9f64de5b8780083273e5d6be8f2fcb2)** to **[`e6f189e`](https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8)**



---

archive/issue_comments_383839.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8\"><code>e6f189e</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>\n",
    "created_at": "2018-07-11T16:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383839",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8"><code>e6f189e</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>




---

archive/issue_comments_383840.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAdded `spkg-legacy-uninstall` for a few packages that could use it.\n\nThis is now done for at least most, if not all packages that have DESTDIR support from #24024.  It doesn't make sense to do for packages that haven't been converted to the new install/uninstall method yet.  However, for any remaining packages that need to be converted, they should also get an `spkg-legacy-uninstall` at the same time, where appropriate.",
    "created_at": "2018-07-11T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383840",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Added `spkg-legacy-uninstall` for a few packages that could use it.

This is now done for at least most, if not all packages that have DESTDIR support from #24024.  It doesn't make sense to do for packages that haven't been converted to the new install/uninstall method yet.  However, for any remaining packages that need to be converted, they should also get an `spkg-legacy-uninstall` at the same time, where appropriate.



---

archive/issue_comments_383841.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFeel free to set this to positive review if you are confident that this still works.",
    "created_at": "2018-07-17T15:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383841",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:8" align="right">comment:8</div>

Feel free to set this to positive review if you are confident that this still works.



---

archive/issue_comments_383842.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-07-17T15:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383842",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rüth**



---

archive/issue_comments_383843.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe pyflakes plugin found an actual bug in the elliptic_curves package; it wasn't otherwise caught since I didn't bump the package versions for this (it isn't really necessary to).\n\nI think I should fix that, and test doing a forced-reinstall of all these packages.  I know I did that a long time ago back when this was part of #22510, but that was then...",
    "created_at": "2018-07-17T16:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383843",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

The pyflakes plugin found an actual bug in the elliptic_curves package; it wasn't otherwise caught since I didn't bump the package versions for this (it isn't really necessary to).

I think I should fix that, and test doing a forced-reinstall of all these packages.  I know I did that a long time ago back when this was part of #22510, but that was then...



---

archive/issue_events_347850.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-17T16:35:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347850"
}
```



---

archive/issue_events_347851.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-17T16:35:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347851"
}
```



---

archive/issue_comments_383844.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4e6851526a709c70726f903684f08c2fbbe1dcf\"><code>b4e6851</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be\"><code>d45b4af</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>\n",
    "created_at": "2018-07-17T16:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4e6851526a709c70726f903684f08c2fbbe1dcf"><code>b4e6851</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be"><code>d45b4af</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>




---

archive/issue_comments_383845.json:
```json
{
    "body": "Changed commit from **[`e6f189e`](https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8)** to **[`d45b4af`](https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be)**",
    "created_at": "2018-07-17T16:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e6f189e`](https://github.com/sagemath/sagetrac-mirror/commit/e6f189ed4c331456beda0ede5edf00329d90d7d8)** to **[`d45b4af`](https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be)**



---

archive/issue_events_347852.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347852"
}
```



---

archive/issue_events_347853.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347853"
}
```



---

archive/issue_comments_383846.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383846",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_comments_383847.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,11 @@\n This work was brought over from an older branch and still needs some adjustment: It should incorporate the changes from the #24024 metaticket which conflict with some of these changes.  There are also some additional optional and experimental packages (and maybe a couple standard packages) that still need to be updated as well.\n \n Probably won't bother with that until and unless #25139 is approved of in some form that still includes the `spkg-legacy-uninstall` feature.\n+\n+---\n+\n+To summarize what this is about: Part of the goal in implementing the new installation/uninstallation system for packages is that `spkg-install` should, ideally, not modify `$SAGE_LOCAL` in any way, at least for packages that support `DESTDIR`-based installation.  This allows more separation from the building of packages from their runtime installation target.\n+\n+However, many packages' `spkg-install` or `spkg-build` include commands (mostly in the form of `rm -rf`'s) to clean up files from previous installs of those packages.  This is no longer necessary for new-style package installations that track exactly what files are installed by a package.  But it is still necessary when upgrading from old installs of packages that don't have a file manifest.  This is what the `spkg-legacy-uninstall` script is for.  It's just taking the `rm -rf`'s from `spkg-install` and moving it into a separate script that is called by the uninstaller if it doesn't have a file manifest for that package.\n+\n+So this ticket is just creating the `spkg-legacy-uninstall` for many packages that already have `DESTDIR` support.\n``````\n",
    "created_at": "2018-07-24T09:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383847",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,11 @@
 This work was brought over from an older branch and still needs some adjustment: It should incorporate the changes from the #24024 metaticket which conflict with some of these changes.  There are also some additional optional and experimental packages (and maybe a couple standard packages) that still need to be updated as well.
 
 Probably won't bother with that until and unless #25139 is approved of in some form that still includes the `spkg-legacy-uninstall` feature.
+
+---
+
+To summarize what this is about: Part of the goal in implementing the new installation/uninstallation system for packages is that `spkg-install` should, ideally, not modify `$SAGE_LOCAL` in any way, at least for packages that support `DESTDIR`-based installation.  This allows more separation from the building of packages from their runtime installation target.
+
+However, many packages' `spkg-install` or `spkg-build` include commands (mostly in the form of `rm -rf`'s) to clean up files from previous installs of those packages.  This is no longer necessary for new-style package installations that track exactly what files are installed by a package.  But it is still necessary when upgrading from old installs of packages that don't have a file manifest.  This is what the `spkg-legacy-uninstall` script is for.  It's just taking the `rm -rf`'s from `spkg-install` and moving it into a separate script that is called by the uninstaller if it doesn't have a file manifest for that package.
+
+So this ticket is just creating the `spkg-legacy-uninstall` for many packages that already have `DESTDIR` support.
``````




---

archive/issue_events_347854.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-24T09:02:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347854"
}
```



---

archive/issue_events_347855.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-24T09:02:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347855"
}
```



---

archive/issue_events_347856.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-08-07T12:24:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347856"
}
```



---

archive/issue_events_347857.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-08-07T12:24:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347857"
}
```



---

archive/issue_comments_383848.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nFirst of all, there are merge conflicts.\n\nSecond, do we really need this? I understand that you want to clean up the `spkg-install` scripts, but we can do that gradually as we upgrade packages anyway. I don't really see the point of adding a whole new feature only for backwards compatibility in cases where it almost never matters (typically, it's not a problem to skip the uninstall).\n\nI'm not actively against this ticket, it's just that I don't see the point.",
    "created_at": "2018-08-07T12:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383848",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

First of all, there are merge conflicts.

Second, do we really need this? I understand that you want to clean up the `spkg-install` scripts, but we can do that gradually as we upgrade packages anyway. I don't really see the point of adding a whole new feature only for backwards compatibility in cases where it almost never matters (typically, it's not a problem to skip the uninstall).

I'm not actively against this ticket, it's just that I don't see the point.



---

archive/issue_comments_383849.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment:13):\n> First of all, there are merge conflicts.\n\nWell I mean, there weren't 2 weeks ago and that's obviously resolvable so it's not a big deal.\n\n> Second, do we really need this? I understand that you want to clean up the `spkg-install` scripts, but we can do that gradually as we upgrade packages anyway. I don't really see the point of adding a whole new feature only for backwards compatibility in cases where it almost never matters (typically, it's not a problem to skip the uninstall).\n> \n> I'm not actively against this ticket, it's just that I don't see the point.\n\nI'm not in any hurry on this and am also happy to do it gradually.  Though since it's already done I don't see the point in *not* just going ahead and merging this now either.  It would be more work at this point not to.",
    "created_at": "2018-08-08T13:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383849",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment:13):
> First of all, there are merge conflicts.

Well I mean, there weren't 2 weeks ago and that's obviously resolvable so it's not a big deal.

> Second, do we really need this? I understand that you want to clean up the `spkg-install` scripts, but we can do that gradually as we upgrade packages anyway. I don't really see the point of adding a whole new feature only for backwards compatibility in cases where it almost never matters (typically, it's not a problem to skip the uninstall).
> 
> I'm not actively against this ticket, it's just that I don't see the point.

I'm not in any hurry on this and am also happy to do it gradually.  Though since it's already done I don't see the point in *not* just going ahead and merging this now either.  It would be more work at this point not to.



---

archive/issue_comments_383850.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/801a2c3b1bad4a57ab5806e00cc1fa5a3cc03d56\"><code>801a2c3</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114\"><code>bafe689</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>\n",
    "created_at": "2018-08-08T13:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383850",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/801a2c3b1bad4a57ab5806e00cc1fa5a3cc03d56"><code>801a2c3</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114"><code>bafe689</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>




---

archive/issue_comments_383851.json:
```json
{
    "body": "Changed commit from **[`d45b4af`](https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be)** to **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**",
    "created_at": "2018-08-08T13:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383851",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d45b4af`](https://github.com/sagemath/sagetrac-mirror/commit/d45b4afa37e45cef68250a64d00661cff3a750be)** to **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**



---

archive/issue_events_347858.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-08T13:25:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347858"
}
```



---

archive/issue_events_347859.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-08T13:25:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347859"
}
```



---

archive/issue_comments_383852.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLooks good to me.",
    "created_at": "2018-08-09T00:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383852",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:17" align="right">comment:17</div>

Looks good to me.



---

archive/issue_events_347860.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-09T00:01:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347860"
}
```



---

archive/issue_events_347861.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-09T00:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347861"
}
```



---

archive/issue_events_347862.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-11T16:55:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347862"
}
```



---

archive/issue_events_347863.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-11T16:55:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347863"
}
```



---

archive/issue_comments_383853.json:
```json
{
    "body": "Changed branch from **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers)** to **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**",
    "created_at": "2018-08-11T16:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383853",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers)** to **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**



---

archive/issue_comments_383854.json:
```json
{
    "body": "Changed commit from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to none",
    "created_at": "2018-08-12T09:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383854",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to none



---

archive/issue_comments_383855.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWhen reinstalling an already installed elliptic_curves:\n\n```\n$ ./sage -p elliptic_curves\n[...]\nNo record that 'elliptic_curves' was ever installed; skipping uninstall\nCreating database /mnt/disk/home/release/Sage/local/share/cremona/cremona_mini.db\nTraceback (most recent call last):\n  File \"spkg-install.py\", line 89, in <module>\n    install_cremona()\n  File \"spkg-install.py\", line 31, in install_cremona\n    con.execute('CREATE TABLE t_class(rank INTEGER, class TEXT PRIMARY KEY,'\nsqlite3.OperationalError: table t_class already exists\n\nreal\t0m0.161s\nuser\t0m0.053s\nsys\t0m0.028s\n************************************************************************\nError installing package elliptic_curves-0.8.p0\n************************************************************************\n```\nThis breaks incremental rebuilds...",
    "created_at": "2018-08-12T09:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383855",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

When reinstalling an already installed elliptic_curves:

```
$ ./sage -p elliptic_curves
[...]
No record that 'elliptic_curves' was ever installed; skipping uninstall
Creating database /mnt/disk/home/release/Sage/local/share/cremona/cremona_mini.db
Traceback (most recent call last):
  File "spkg-install.py", line 89, in <module>
    install_cremona()
  File "spkg-install.py", line 31, in install_cremona
    con.execute('CREATE TABLE t_class(rank INTEGER, class TEXT PRIMARY KEY,'
sqlite3.OperationalError: table t_class already exists

real	0m0.161s
user	0m0.053s
sys	0m0.028s
************************************************************************
Error installing package elliptic_curves-0.8.p0
************************************************************************
```
This breaks incremental rebuilds...



---

archive/issue_comments_383856.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nPlease check that all packages can be installed twice before settings back to positive review.",
    "created_at": "2018-08-12T09:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383856",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

Please check that all packages can be installed twice before settings back to positive review.



---

archive/issue_comments_383857.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/801a2c3b1bad4a57ab5806e00cc1fa5a3cc03d56\"><code>801a2c3</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114\"><code>bafe689</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>\n",
    "created_at": "2018-08-14T15:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383857",
    "user": "https://github.com/embray"
}
```

<div id="comment:21"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/801a2c3b1bad4a57ab5806e00cc1fa5a3cc03d56"><code>801a2c3</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114"><code>bafe689</code></a></td><td><code>add spkg-legacy-uninstall for a few more packages that I missed</code></td></tr></table>




---

archive/issue_comments_383858.json:
```json
{
    "body": "Changed branch from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers)**",
    "created_at": "2018-08-14T15:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383858",
    "user": "https://github.com/embray"
}
```

Changed branch from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to **[u/embray/build/spkg-uninstall/legacy-uninstallers](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/spkg-uninstall/legacy-uninstallers)**



---

archive/issue_comments_383859.json:
```json
{
    "body": "Commit: **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**",
    "created_at": "2018-08-14T15:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383859",
    "user": "https://github.com/embray"
}
```

Commit: **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)**



---

archive/issue_comments_383860.json:
```json
{
    "body": "Changed commit from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to **[`6f82064`](https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735)**",
    "created_at": "2018-08-14T16:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383860",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bafe689`](https://github.com/sagemath/sagetrac-mirror/commit/bafe689b2ded2440c12fcaba9c5928700d514114)** to **[`6f82064`](https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735)**



---

archive/issue_comments_383861.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735\"><code>6f82064</code></a></td><td><code>revert changes to elliptic_curves; it will be handled in a separate ticket</code></td></tr></table>\n",
    "created_at": "2018-08-14T16:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383861",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735"><code>6f82064</code></a></td><td><code>revert changes to elliptic_curves; it will be handled in a separate ticket</code></td></tr></table>




---

archive/issue_comments_383862.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYes, there were still several problems with the spkg-install for elliptic_curves; I think it should just be updated in a separate ticket.  It should not have been included in this ticket in the first place since it was only intending to update packages that already had working DESTDIR support.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735\"><code>6f82064</code></a></td><td><code>revert changes to elliptic_curves; it will be handled in a separate ticket</code></td></tr></table>\n",
    "created_at": "2018-08-14T16:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383862",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">comment:23</div>

Yes, there were still several problems with the spkg-install for elliptic_curves; I think it should just be updated in a separate ticket.  It should not have been included in this ticket in the first place since it was only intending to update packages that already had working DESTDIR support.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735"><code>6f82064</code></a></td><td><code>revert changes to elliptic_curves; it will be handled in a separate ticket</code></td></tr></table>




---

archive/issue_events_347864.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347864"
}
```



---

archive/issue_events_347865.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347865"
}
```



---

archive/issue_comments_383863.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nRetargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383863",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_events_347866.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347866"
}
```



---

archive/issue_events_347867.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347867"
}
```



---

archive/issue_comments_383864.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f\"><code>e2d2b01</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr></table>\n",
    "created_at": "2019-01-09T17:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383864",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f"><code>e2d2b01</code></a></td><td><code>Fix spkg-installs of packages with legacy uninstall commands; moving those commands into spkg-legacy-uninstall scripts</code></td></tr></table>




---

archive/issue_comments_383865.json:
```json
{
    "body": "Changed commit from **[`6f82064`](https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735)** to **[`e2d2b01`](https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f)**",
    "created_at": "2019-01-09T17:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f82064`](https://github.com/sagemath/sagetrac-mirror/commit/6f82064665b2996cac072fce0152531da1271735)** to **[`e2d2b01`](https://github.com/sagemath/sagetrac-mirror/commit/e2d2b01f15e25c24334d8e6f110c3302d41cdd6f)**



---

archive/issue_events_347868.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-09T17:46:56Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "subject": "https://github.com/embray",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347868"
}
```



---

archive/issue_comments_383866.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nRebased this, though some of these are now handled in other tickets so I need to clean it up a bit more (focus only on packages that already otherwise have been fixed as part of #24024).",
    "created_at": "2019-01-09T17:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383866",
    "user": "https://github.com/embray"
}
```

<div id="comment:27" align="right">comment:27</div>

Rebased this, though some of these are now handled in other tickets so I need to clean it up a bit more (focus only on packages that already otherwise have been fixed as part of #24024).



---

archive/issue_comments_383867.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nRemoving most of the rest of my open tickets out of the 8.7 milestone, which should be closed.",
    "created_at": "2019-03-25T10:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25140#issuecomment-383867",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.



---

archive/issue_events_347869.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:44:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347869"
}
```



---

archive/issue_events_347870.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:44:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25140",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25140#event-347870"
}
```
