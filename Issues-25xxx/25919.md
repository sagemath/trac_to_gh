# Issue 25919: GelfandTsetlinPattern instances do not compare properly

archive/issues_025682.json:
```json
{
    "body": "`GelfandTsetlinPattern` instances created using `GelfandTsetlinPatterns(...)` with and without the `top_row` argument do not compare properly. E.g.,\n\n```python\nsage: GelfandTsetlinPatterns(top_row=(1,))[0]\n[[1]]\nsage: GelfandTsetlinPattern([[1]])\n[[1]]\n```\n\nshould compare as equal, but:\n\n```python\nsage: GelfandTsetlinPatterns(top_row=(1,))[0] == GelfandTsetlinPattern([[1]])\nFalse\n```\n\nThis is likely because the two instances have different parents (`GelfandTsetlinPatternsTopRow` vs `GelfandTsetlinPatterns`).\n\nAssignee: @catch22\n\nCC:  sage-combinat @tscrim gfeinberg @bsalisbury1\n\nKeywords: sagedays@icerm\n\nBranch/Commit: 1b6896f35c480bc0f435c1f1d11ce3b9e608be72\n\nReviewer: Gabe Feinberg, Travis Scrimshaw\n\nAuthor: Michael Walter\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25919\n\n",
    "closed_at": "2019-09-05T21:33:29Z",
    "created_at": "2018-07-24T19:08:08Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "GelfandTsetlinPattern instances do not compare properly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25919",
    "user": "https://github.com/catch22"
}
```
`GelfandTsetlinPattern` instances created using `GelfandTsetlinPatterns(...)` with and without the `top_row` argument do not compare properly. E.g.,

```python
sage: GelfandTsetlinPatterns(top_row=(1,))[0]
[[1]]
sage: GelfandTsetlinPattern([[1]])
[[1]]
```

should compare as equal, but:

```python
sage: GelfandTsetlinPatterns(top_row=(1,))[0] == GelfandTsetlinPattern([[1]])
False
```

This is likely because the two instances have different parents (`GelfandTsetlinPatternsTopRow` vs `GelfandTsetlinPatterns`).

Assignee: @catch22

CC:  sage-combinat @tscrim gfeinberg @bsalisbury1

Keywords: sagedays@icerm

Branch/Commit: 1b6896f35c480bc0f435c1f1d11ce3b9e608be72

Reviewer: Gabe Feinberg, Travis Scrimshaw

Author: Michael Walter

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25919





---

archive/issue_comments_497729.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2018-07-24T19:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497729",
    "user": "https://github.com/catch22"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_497730.json:
```json
{
    "body": "Changing commit from \"\" to \"ec8bc2103bf3e67062ecd7a355ea5116861da345\"",
    "created_at": "2018-07-24T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497730",
    "user": "https://github.com/catch22"
}
```

Changing commit from "" to "ec8bc2103bf3e67062ecd7a355ea5116861da345"



---

archive/issue_comments_497731.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[ec8bc21](https://git.sagemath.org/sage.git/commit?id=ec8bc2103bf3e67062ecd7a355ea5116861da345)|`Fix comparison of GelfandTsetlinPattern instances (#25919)`|",
    "created_at": "2018-07-24T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497731",
    "user": "https://github.com/catch22"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[ec8bc21](https://git.sagemath.org/sage.git/commit?id=ec8bc2103bf3e67062ecd7a355ea5116861da345)|`Fix comparison of GelfandTsetlinPattern instances (#25919)`|



---

archive/issue_comments_497732.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-catch22/gelfand_tsetlin_comparison\"",
    "created_at": "2018-07-24T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497732",
    "user": "https://github.com/catch22"
}
```

Changing branch from "" to "u/gh-catch22/gelfand_tsetlin_comparison"



---

archive/issue_comments_497733.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[4bd81ca](https://git.sagemath.org/sage.git/commit/?id=4bd81ca8790cc578c4cce91160e7aaf50fd7322e)|`Fix comparison of GelfandTsetlinPattern instances (#25919)`|",
    "created_at": "2018-07-24T19:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[4bd81ca](https://git.sagemath.org/sage.git/commit/?id=4bd81ca8790cc578c4cce91160e7aaf50fd7322e)|`Fix comparison of GelfandTsetlinPattern instances (#25919)`|



---

archive/issue_comments_497734.json:
```json
{
    "body": "Changing commit from \"ec8bc2103bf3e67062ecd7a355ea5116861da345\" to \"4bd81ca8790cc578c4cce91160e7aaf50fd7322e\"",
    "created_at": "2018-07-24T19:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec8bc2103bf3e67062ecd7a355ea5116861da345" to "4bd81ca8790cc578c4cce91160e7aaf50fd7322e"



---

archive/issue_comments_497735.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-24T19:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497735",
    "user": "https://github.com/catch22"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_497736.json:
```json
{
    "body": "<a id='comment:5'></a>\nCopying Travis as the author of this component.",
    "created_at": "2018-07-24T19:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497736",
    "user": "https://github.com/catch22"
}
```

<a id='comment:5'></a>
Copying Travis as the author of this component.



---

archive/issue_comments_497737.json:
```json
{
    "body": "Set assignee to @catch22.",
    "created_at": "2018-07-24T19:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497737",
    "user": "https://github.com/catch22"
}
```

Set assignee to @catch22.



---

archive/issue_comments_497738.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-24T23:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497738",
    "user": "https://trac.sagemath.org/admin/accounts/users/gfeinberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_497739.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Gabe Feinberg\"",
    "created_at": "2018-07-24T23:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497739",
    "user": "https://trac.sagemath.org/admin/accounts/users/gfeinberg"
}
```

Changing reviewer from "" to "Gabe Feinberg"



---

archive/issue_comments_497740.json:
```json
{
    "body": "<a id='comment:6'></a>\nAll tests passed. Thanks for the good work.",
    "created_at": "2018-07-24T23:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497740",
    "user": "https://trac.sagemath.org/admin/accounts/users/gfeinberg"
}
```

<a id='comment:6'></a>
All tests passed. Thanks for the good work.



---

archive/issue_comments_497741.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-25T11:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497741",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_497742.json:
```json
{
    "body": "<a id='comment:7'></a>\nFirst, author real name.\n\nSecond, this is wrong on a few different levels. What is going wrong is basically a lack of coercion and subclasses of `ClonableArray` take the parent into consideration. So in some ways, it is a \"feature\" of the class, and what you should be doing is actually implementing a coercion. We don't do this for tableaux both as that is more complicated and historical reasons (e.g., comparing with a list). Note that this change expands what can be compared. I also am not sure I agree with mapping the rows to a tuple of tuples; seems like a waste.\n\nYou should remove the `.. TODO::` because this is not a decided policy change that this says it is (I agree with you that it should change).\n\nOther trivial point, your `INPUT:` block is mis-formatted, you should start `- ``other``` (but that and the `OUTPUT:` block can be left off because both they are trivial and common and this is hidden method).",
    "created_at": "2018-07-25T11:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497742",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
First, author real name.

Second, this is wrong on a few different levels. What is going wrong is basically a lack of coercion and subclasses of `ClonableArray` take the parent into consideration. So in some ways, it is a "feature" of the class, and what you should be doing is actually implementing a coercion. We don't do this for tableaux both as that is more complicated and historical reasons (e.g., comparing with a list). Note that this change expands what can be compared. I also am not sure I agree with mapping the rows to a tuple of tuples; seems like a waste.

You should remove the `.. TODO::` because this is not a decided policy change that this says it is (I agree with you that it should change).

Other trivial point, your `INPUT:` block is mis-formatted, you should start `- ``other``` (but that and the `OUTPUT:` block can be left off because both they are trivial and common and this is hidden method).



---

archive/issue_comments_497743.json:
```json
{
    "body": "Changing commit from \"4bd81ca8790cc578c4cce91160e7aaf50fd7322e\" to \"1b6896f35c480bc0f435c1f1d11ce3b9e608be72\"",
    "created_at": "2018-07-25T12:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4bd81ca8790cc578c4cce91160e7aaf50fd7322e" to "1b6896f35c480bc0f435c1f1d11ce3b9e608be72"



---

archive/issue_comments_497744.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[1b6896f](https://git.sagemath.org/sage.git/commit/?id=1b6896f35c480bc0f435c1f1d11ce3b9e608be72)|`Reimplement fix by adding a coercion from GelfandTsetlinPatternsTopRow to GelfandTsetlinPatterns`|",
    "created_at": "2018-07-25T12:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[1b6896f](https://git.sagemath.org/sage.git/commit/?id=1b6896f35c480bc0f435c1f1d11ce3b9e608be72)|`Reimplement fix by adding a coercion from GelfandTsetlinPatternsTopRow to GelfandTsetlinPatterns`|



---

archive/issue_comments_497745.json:
```json
{
    "body": "<a id='comment:9'></a>\nThank you for the review.\n\n1. Since the git commit shows my real name I assume you were talking about the list at https://trac.sagemath.org and have added myself there.\n\n2. Done. (I have not implemented a coercion from `GelfandTsetlinPatterns` to `GelfandTsetlinPatternsTopRow`.)\n\n3. Done. (The TODO comment referred to the fact that this was a hack, not to any policy decision. Now it's not a hack anymore, so the TODO was removed. ;)\n\n4. Done. (Someone should also fix this in `Tableau`.)",
    "created_at": "2018-07-25T12:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497745",
    "user": "https://github.com/catch22"
}
```

<a id='comment:9'></a>
Thank you for the review.

1. Since the git commit shows my real name I assume you were talking about the list at https://trac.sagemath.org and have added myself there.

2. Done. (I have not implemented a coercion from `GelfandTsetlinPatterns` to `GelfandTsetlinPatternsTopRow`.)

3. Done. (The TODO comment referred to the fact that this was a hack, not to any policy decision. Now it's not a hack anymore, so the TODO was removed. ;)

4. Done. (Someone should also fix this in `Tableau`.)



---

archive/issue_comments_497746.json:
```json
{
    "body": "<a id='comment:10'></a>\n`@`gh-catch22 the trac ticket here needs to be modified so that the Author: field shows your real name, similar to how the reviewer field has 'Gabe Feinberg' instead of 'gfeinberg'.",
    "created_at": "2018-07-26T20:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497746",
    "user": "https://github.com/kevindilks"
}
```

<a id='comment:10'></a>
`@`gh-catch22 the trac ticket here needs to be modified so that the Author: field shows your real name, similar to how the reviewer field has 'Gabe Feinberg' instead of 'gfeinberg'.



---

archive/issue_comments_497747.json:
```json
{
    "body": "Changing author from \"\" to \"Michael Walter\"",
    "created_at": "2019-09-03T00:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497747",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Michael Walter"



---

archive/issue_events_064811.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-09-03T00:46:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25919#event-64811"
}
```



---

archive/issue_comments_497748.json:
```json
{
    "body": "Changing reviewer from \"Gabe Feinberg\" to \"Gabe Feinberg, Travis Scrimshaw\"",
    "created_at": "2019-09-03T00:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497748",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Gabe Feinberg" to "Gabe Feinberg, Travis Scrimshaw"



---

archive/issue_comments_497749.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-09-03T00:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497749",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_064812.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-05T21:33:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25919#event-64812"
}
```



---

archive/issue_comments_497750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-05T21:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497750",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_497751.json:
```json
{
    "body": "Changing branch from \"u/gh-catch22/gelfand_tsetlin_comparison\" to \"1b6896f35c480bc0f435c1f1d11ce3b9e608be72\"",
    "created_at": "2019-09-05T21:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25919#issuecomment-497751",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-catch22/gelfand_tsetlin_comparison" to "1b6896f35c480bc0f435c1f1d11ce3b9e608be72"
