# Issue 25382: py3: do not include the notebook documentation in sage

archive/issues_025145.json:
```json
{
    "body": "CC:  @embray @jdemeyer @tscrim @kiwifb @vbraun @kcrisman @jhpalmieri\n\nbecause sagenb is not yet available for python3\n\nIssue created by migration from https://trac.sagemath.org/ticket/25382\n\n",
    "closed_at": "2018-10-20T11:59:04Z",
    "created_at": "2018-05-17T08:46:43Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "py3: do not include the notebook documentation in sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25382",
    "user": "https://github.com/fchapoton"
}
```
CC:  @embray @jdemeyer @tscrim @kiwifb @vbraun @kcrisman @jhpalmieri

because sagenb is not yet available for python3

Issue created by migration from https://trac.sagemath.org/ticket/25382





---

archive/issue_comments_353624.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2018-05-17T15:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353624",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_353625.json:
```json
{
    "body": "I have no clear idea about what should be done here. Where will the sagenb doc live, if we get rid of it ?\n\n---\nNew commits:",
    "created_at": "2018-05-17T15:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353625",
    "user": "https://github.com/fchapoton"
}
```

I have no clear idea about what should be done here. Where will the sagenb doc live, if we get rid of it ?

---
New commits:



---

archive/issue_comments_353626.json:
```json
{
    "body": "Are we never going to get sagenb working in Python 3?  I've just been assuming that for now we don't have it, but that we would eventually port it at least for now.  Or are we truly abandoning sagenb for Python 3?",
    "created_at": "2018-05-17T16:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353626",
    "user": "https://github.com/embray"
}
```

Are we never going to get sagenb working in Python 3?  I've just been assuming that for now we don't have it, but that we would eventually port it at least for now.  Or are we truly abandoning sagenb for Python 3?



---

archive/issue_comments_353627.json:
```json
{
    "body": "Well, if somebody wants to do the job of converting sagenb to full python3 compatibility.. I have no idea of the difficulty of the task.",
    "created_at": "2018-05-17T16:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353627",
    "user": "https://github.com/fchapoton"
}
```

Well, if somebody wants to do the job of converting sagenb to full python3 compatibility.. I have no idea of the difficulty of the task.



---

archive/issue_comments_353628.json:
```json
{
    "body": "I'm fine with removing sagenb when we drop Python2 support unless somebody wants to port it... The SageNB docs should just say that (and suggest to use the jupyter notebook)",
    "created_at": "2018-05-17T17:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353628",
    "user": "https://github.com/vbraun"
}
```

I'm fine with removing sagenb when we drop Python2 support unless somebody wants to port it... The SageNB docs should just say that (and suggest to use the jupyter notebook)



---

archive/issue_comments_353629.json:
```json
{
    "body": "If the ETA is still some time from now for Py2 drop that seems plausible.  But hopefully it won't be that bad; I feel like #22431 was closer than we thought.",
    "created_at": "2018-05-22T15:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353629",
    "user": "https://github.com/kcrisman"
}
```

If the ETA is still some time from now for Py2 drop that seems plausible.  But hopefully it won't be that bad; I feel like #22431 was closer than we thought.



---

archive/issue_comments_353630.json:
```json
{
    "body": "We should try in the ticket #22431 to see if we can re-activate sagenb in py3-sage. We decided some time ago to de-activate it as it was blocking the build of py3-sage. Try to-re-insert sagenb requires first #24269 to fix py3-sage. Then rewrite the spkg-install on top of #25394.\n\nOn the side-point to get rid of sagenb imports inside sage, tt would be helpful to positive-review #24994.",
    "created_at": "2018-05-22T15:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353630",
    "user": "https://github.com/fchapoton"
}
```

We should try in the ticket #22431 to see if we can re-activate sagenb in py3-sage. We decided some time ago to de-activate it as it was blocking the build of py3-sage. Try to-re-insert sagenb requires first #24269 to fix py3-sage. Then rewrite the spkg-install on top of #25394.

On the side-point to get rid of sagenb imports inside sage, tt would be helpful to positive-review #24994.



---

archive/issue_comments_353631.json:
```json
{
    "body": "let us close this one as invalid, as we are on the way towards building the doc on py3, including sagenb doc",
    "created_at": "2018-06-13T16:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353631",
    "user": "https://github.com/fchapoton"
}
```

let us close this one as invalid, as we are on the way towards building the doc on py3, including sagenb doc



---

archive/issue_comments_353632.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-06-13T16:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353632",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_events_063672.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-13T16:05:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63672"
}
```



---

archive/issue_comments_353633.json:
```json
{
    "body": "I think this is still a good idea (for python2 and python3). Given that sagenb has been deprecated for a while, I think it would be a good idea to either just remove it or make it a optional spkg. #24994 is a nice step in that direction and this would be another. Why should the documentation of the deprecated sagenb be included in sage when the documentation of other spkgs isn't?\n\nFor context: sagenb is a pain to package. First because of https://github.com/sagemath/sagenb/issues/440 and now while updating flask I encountered more problems.",
    "created_at": "2018-06-13T19:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353633",
    "user": "https://github.com/timokau"
}
```

I think this is still a good idea (for python2 and python3). Given that sagenb has been deprecated for a while, I think it would be a good idea to either just remove it or make it a optional spkg. #24994 is a nice step in that direction and this would be another. Why should the documentation of the deprecated sagenb be included in sage when the documentation of other spkgs isn't?

For context: sagenb is a pain to package. First because of https://github.com/sagemath/sagenb/issues/440 and now while updating flask I encountered more problems.



---

archive/issue_comments_353634.json:
```json
{
    "body": "Deprecated in what sense?  Unofficially, sure - but probably this would need to be a much bigger announcement and very obvious that it is removed, rather than the (very sensible) procedure of upgrade option we currently offer.",
    "created_at": "2018-06-13T23:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353634",
    "user": "https://github.com/kcrisman"
}
```

Deprecated in what sense?  Unofficially, sure - but probably this would need to be a much bigger announcement and very obvious that it is removed, rather than the (very sensible) procedure of upgrade option we currently offer.



---

archive/issue_comments_353635.json:
```json
{
    "body": "+1 to communicating the deprecation better, e.g. display a deprecation notice when you start sagenb. I don't really mind it being standard vs. optional, I just don't want somebody new to Sage get started with sagenb in 2018 just because it comes up by default.",
    "created_at": "2018-06-14T07:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353635",
    "user": "https://github.com/vbraun"
}
```

+1 to communicating the deprecation better, e.g. display a deprecation notice when you start sagenb. I don't really mind it being standard vs. optional, I just don't want somebody new to Sage get started with sagenb in 2018 just because it comes up by default.



---

archive/issue_comments_353636.json:
```json
{
    "body": "Deprecated because I was told so in https://github.com/sagemath/sagenb/issues/440 (I was surprised there so I agree that it should be communicated better). Also the docs refer to it as the \"legacy SageNB\".",
    "created_at": "2018-06-14T08:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353636",
    "user": "https://github.com/timokau"
}
```

Deprecated because I was told so in https://github.com/sagemath/sagenb/issues/440 (I was surprised there so I agree that it should be communicated better). Also the docs refer to it as the "legacy SageNB".



---

archive/issue_comments_353637.json:
```json
{
    "body": "I don't think that anyone would be having it come up by default, the default is Jeroen's converter and pretty soon most people's default ends up the Jupyter.  Maybe an intermediate thing to being an optional package (which is very bad for the kind of end users who would need sagenb!) would be to formally change the default interface to being Jupyter, with VERY clear instructions for how to continue conversion after that point sprinkled everywhere.",
    "created_at": "2018-06-14T09:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353637",
    "user": "https://github.com/kcrisman"
}
```

I don't think that anyone would be having it come up by default, the default is Jeroen's converter and pretty soon most people's default ends up the Jupyter.  Maybe an intermediate thing to being an optional package (which is very bad for the kind of end users who would need sagenb!) would be to formally change the default interface to being Jupyter, with VERY clear instructions for how to continue conversion after that point sprinkled everywhere.



---

archive/issue_comments_353638.json:
```json
{
    "body": "Replying to [comment:13 kcrisman]:\n> Jeroen's converter\n\n\nJust to give proper credit: Volker started that project and did most of the work. It's true that I also worked on it in order to make it the default interface, fixing various bugs and adding the \"run SageNB\" option.",
    "created_at": "2018-06-14T09:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353638",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:13 kcrisman]:
> Jeroen's converter


Just to give proper credit: Volker started that project and did most of the work. It's true that I also worked on it in order to make it the default interface, fixing various bugs and adding the "run SageNB" option.



---

archive/issue_comments_353639.json:
```json
{
    "body": "Replying to [comment:13 kcrisman]:\n> I don't think that anyone would be having it come up by default, the default is Jeroen's converter and pretty soon most people's default ends up the Jupyter.\n\n\nI think that is even more of a reason to work towards making sagenb optional.\n\n> Maybe an intermediate thing to being an optional package (which is very bad for the kind of end users who would need sagenb!)\n\n\nAre we sure there even are users that keep up with the latest version of sage (e.g. aren't using 6.0 forever or something) *and* still use sagenb? And even making sagenb optional wouldn't immediately make that impossible, it would just make it a tiny bit more inconvenient. That might be a good thing because then they might either complain here (showing us that there are such users) or realize that it might be time to look into the jupyter notebook.\n\n> would be to formally change the default interface to being Jupyter, with VERY clear instructions for how to continue conversion after that point sprinkled everywhere.\n\n\nI agree.",
    "created_at": "2018-06-14T10:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353639",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:13 kcrisman]:
> I don't think that anyone would be having it come up by default, the default is Jeroen's converter and pretty soon most people's default ends up the Jupyter.


I think that is even more of a reason to work towards making sagenb optional.

> Maybe an intermediate thing to being an optional package (which is very bad for the kind of end users who would need sagenb!)


Are we sure there even are users that keep up with the latest version of sage (e.g. aren't using 6.0 forever or something) *and* still use sagenb? And even making sagenb optional wouldn't immediately make that impossible, it would just make it a tiny bit more inconvenient. That might be a good thing because then they might either complain here (showing us that there are such users) or realize that it might be time to look into the jupyter notebook.

> would be to formally change the default interface to being Jupyter, with VERY clear instructions for how to continue conversion after that point sprinkled everywhere.


I agree.



---

archive/issue_comments_353640.json:
```json
{
    "body": "<clear throat>Well in the math department at my university (university of Canterbury, New Zealand) they have reasonably recent installs of sage. But when I talk to them they also have hundreds of sagenb notebook because they have been using sage for quite some time. What they are after is literally a mass conversion tool. And even with one, the inertia of the old sagenb here sounds quite big.",
    "created_at": "2018-06-14T10:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353640",
    "user": "https://github.com/kiwifb"
}
```

<clear throat>Well in the math department at my university (university of Canterbury, New Zealand) they have reasonably recent installs of sage. But when I talk to them they also have hundreds of sagenb notebook because they have been using sage for quite some time. What they are after is literally a mass conversion tool. And even with one, the inertia of the old sagenb here sounds quite big.



---

archive/issue_comments_353641.json:
```json
{
    "body": "Ah, good to know. What about that converter kcrisman was talking about?",
    "created_at": "2018-06-14T10:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353641",
    "user": "https://github.com/timokau"
}
```

Ah, good to know. What about that converter kcrisman was talking about?



---

archive/issue_comments_353642.json:
```json
{
    "body": "Replying to [comment:17 gh-timokau]:\n> Ah, good to know. What about that converter kcrisman was talking about?\n\n\nThere is probably a way to script it but it's just no one really want to take that job. I may have to do it for them at some point but that will be a tough sell.",
    "created_at": "2018-06-14T10:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353642",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:17 gh-timokau]:
> Ah, good to know. What about that converter kcrisman was talking about?


There is probably a way to script it but it's just no one really want to take that job. I may have to do it for them at some point but that will be a tough sell.



---

archive/issue_comments_353643.json:
```json
{
    "body": "Replying to [comment:18 fbissey]:\n> Replying to [comment:17 gh-timokau]:\n> > Ah, good to know. What about that converter kcrisman was talking about?\n\n> \n> There is probably a way to script it but it's just no one really want to take that job. I may have to do it for them at some point but that will be a tough sell.\n\n\nYeah I get that. We could still make the deprecation more obvious and further disentangle sagenb and sage. Maybe a big deprecation warning in 8.3 and then making it optional in 8.4 or something.",
    "created_at": "2018-06-14T21:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353643",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:18 fbissey]:
> Replying to [comment:17 gh-timokau]:
> > Ah, good to know. What about that converter kcrisman was talking about?

> 
> There is probably a way to script it but it's just no one really want to take that job. I may have to do it for them at some point but that will be a tough sell.


Yeah I get that. We could still make the deprecation more obvious and further disentangle sagenb and sage. Maybe a big deprecation warning in 8.3 and then making it optional in 8.4 or something.



---

archive/issue_comments_353644.json:
```json
{
    "body": "Changing component from python3 to notebook.",
    "created_at": "2018-06-15T20:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353644",
    "user": "https://github.com/fchapoton"
}
```

Changing component from python3 to notebook.



---

archive/issue_comments_353645.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-08-10T08:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353645",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_events_063673.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-10T08:12:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63673"
}
```



---

archive/issue_events_063674.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-10T08:12:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63674"
}
```



---

archive/issue_comments_353646.json:
```json
{
    "body": "Removing sagenb doc would be one step towards building the doc of sage with python3. Otherwise, one needs to fix https://github.com/sagemath/sagenb/issues/454.",
    "created_at": "2018-08-10T08:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353646",
    "user": "https://github.com/fchapoton"
}
```

Removing sagenb doc would be one step towards building the doc of sage with python3. Otherwise, one needs to fix https://github.com/sagemath/sagenb/issues/454.



---

archive/issue_comments_353647.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-10T16:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353648.json:
```json
{
    "body": "any comment on the proposed removal ?",
    "created_at": "2018-08-10T16:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353648",
    "user": "https://github.com/fchapoton"
}
```

any comment on the proposed removal ?



---

archive/issue_comments_353649.json:
```json
{
    "body": "Is there a way to conditionally remove the docs, depending on whether Sage was built with Python 2 or 3?",
    "created_at": "2018-08-10T18:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353649",
    "user": "https://github.com/jhpalmieri"
}
```

Is there a way to conditionally remove the docs, depending on whether Sage was built with Python 2 or 3?



---

archive/issue_comments_353650.json:
```json
{
    "body": "Agreed.",
    "created_at": "2018-08-10T19:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353650",
    "user": "https://github.com/kcrisman"
}
```

Agreed.



---

archive/issue_comments_353651.json:
```json
{
    "body": "By the way, with the branch here, `make doc` and `make doc-pdf` still try to build the `notebook` directory in `src/doc/en/reference`. So for this to work with Python 3, as long as SageNB is not Python 3 compatible, we have to rewrite `/src/doc/en/reference/notebook/index.rst` as well. It may not matter what goes into that file when using Python 3, since it won't be referenced from anywhere.",
    "created_at": "2018-08-10T19:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353651",
    "user": "https://github.com/jhpalmieri"
}
```

By the way, with the branch here, `make doc` and `make doc-pdf` still try to build the `notebook` directory in `src/doc/en/reference`. So for this to work with Python 3, as long as SageNB is not Python 3 compatible, we have to rewrite `/src/doc/en/reference/notebook/index.rst` as well. It may not matter what goes into that file when using Python 3, since it won't be referenced from anywhere.



---

archive/issue_comments_353652.json:
```json
{
    "body": "My idea was something like this:\n\n```diff\ndiff --git a/src/doc/en/reference/conf.py b/src/doc/en/reference/conf.py\nindex 9e55717545..9b5cf0559b 100644\n--- a/src/doc/en/reference/conf.py\n+++ b/src/doc/en/reference/conf.py\n@@ -15,6 +15,7 @@ import sys, os\n from sage.env import SAGE_DOC_SRC, SAGE_DOC\n sys.path.append(SAGE_DOC_SRC)\n from common.conf import *\n+from sage_setup.docbuild.build_options import OMIT\n \n ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')\n ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')\n@@ -61,6 +62,9 @@ multidocs_is_master = True\n # for 'static' and 'templates', and to deal with upgrades: 'sage',\n # 'sagenb', 'media', and 'other'.\n bad_directories = ['static', 'templates', 'sage', 'sagenb', 'media', 'other']\n+for dir in OMIT:\n+    if dir.startswith('reference' + os.sep):\n+        bad_directories.append(dir.split(os.sep)[1])\n multidocs_subdoc_list = sorted([x for x in os.listdir(ref_src)\n                                 if os.path.isdir(os.path.join(ref_src, x))\n                                 and x not in bad_directories])\ndiff --git a/src/doc/en/reference/index.rst b/src/doc/en/reference/index.rst\nindex 640df94c4a..91e6437045 100644\n--- a/src/doc/en/reference/index.rst\n+++ b/src/doc/en/reference/index.rst\n@@ -12,11 +12,16 @@ available below.\n User Interface\n ==============\n \n-* :doc:`Command Line Interface (REPL) <repl/index>`\n+.. only:: Python2\n \n-* For the jupyter notebook interface, see this `Documentation <https://jupyter-notebook.readthedocs.io/en/latest/notebook.html>`_.\n+    * :doc:`Command Line Interface (REPL) <repl/index>`\n+    * :doc:`Web Notebook <notebook/index>`\n \n-* For the legacy notebook interface, which is no longer actively maintained, see the `source repository <https://github.com/sagemath/sagenb>`_.\n+.. only:: Python3\n+\n+    * :doc:`Command Line Interface (REPL) <repl/index>`\n+    * For the jupyter notebook interface, see this `Documentation <https://jupyter-notebook.readthedocs.io/en/latest/notebook.html>`_.\n+    * For the legacy notebook interface, which is no longer actively maintained, see the `source repository <https://github.com/sagemath/sagenb>`_.\n \n Graphics\n ========\ndiff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py\nindex 5877b5b2a7..e750d4c9ab 100644\n--- a/src/sage_setup/docbuild/__init__.py\n+++ b/src/sage_setup/docbuild/__init__.py\n@@ -669,7 +669,8 @@ for a webpage listing all of the documents.''' % (output_dir,\n \n         for doc in os.listdir(refdir):\n             directory = os.path.join(refdir, doc)\n-            if os.path.exists(os.path.join(directory, 'index.rst')):\n+            if (os.path.exists(os.path.join(directory, 'index.rst'))\n+                and os.path.join(\"reference\", doc) not in OMIT):\n                 n = len(os.listdir(directory))\n                 documents.append((-n, os.path.join(self.name, doc)))\n \ndiff --git a/src/sage_setup/docbuild/build_options.py b/src/sage_setup/docbuild/build_options.py\nindex 1168f02511..c35f71498f 100644\n--- a/src/sage_setup/docbuild/build_options.py\n+++ b/src/sage_setup/docbuild/build_options.py\n@@ -16,8 +16,23 @@ if PAPER:\n else:\n     PAPEROPTS = \"\"\n \n+# The legacy Sage notebook is not compatible with Python 3, and its\n+# documentation will not build with Python 3, so omit it in that case.\n+# The command line options '-t Python3' and '-t Python2' define tags\n+# Python2 and Python3 which are used by Sphinx for conditional\n+# inclusion of text: text in a block marked '.. only:: Python2' will\n+# be included when Sphinx is invoked with '-t Python2'. See\n+# http://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#including-content-based-on-tags\n+# http://www.sphinx-doc.org/en/master/man/sphinx-build.html#cmdoption-sphinx-build-t\n+SAGE_PYTHON3 = os.environ.get(\"SAGE_PYTHON3\", \"no\") == \"yes\"\n+if SAGE_PYTHON3:\n+    TAGS = \"-t Python3 \"\n+    OMIT.append(os.path.join(\"reference\", \"notebook\"))\n+else:\n+    TAGS = \"-t Python2 \"\n+\n #Note that this needs to have the doctrees dir\n-ALLSPHINXOPTS = SPHINXOPTS + \" \" + PAPEROPTS + \" \"\n+ALLSPHINXOPTS = SPHINXOPTS + \" \" + PAPEROPTS + \" \" + TAGS + \" \"\n WEBSITESPHINXOPTS = \"\"\n \n # Number of threads to use for parallel-building the documentation.\n```\nbut it doesn't work with Python 3: even though we are supposed to be ignoring the directory `src/doc/en/reference/notebook`, Sphinx still tries to use it in compiling indices, or something like that. Maybe there are more settings for ignoring files/directories that I could add.",
    "created_at": "2018-08-10T22:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353652",
    "user": "https://github.com/jhpalmieri"
}
```

My idea was something like this:

```diff
diff --git a/src/doc/en/reference/conf.py b/src/doc/en/reference/conf.py
index 9e55717545..9b5cf0559b 100644
--- a/src/doc/en/reference/conf.py
+++ b/src/doc/en/reference/conf.py
@@ -15,6 +15,7 @@ import sys, os
 from sage.env import SAGE_DOC_SRC, SAGE_DOC
 sys.path.append(SAGE_DOC_SRC)
 from common.conf import *
+from sage_setup.docbuild.build_options import OMIT
 
 ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')
 ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')
@@ -61,6 +62,9 @@ multidocs_is_master = True
 # for 'static' and 'templates', and to deal with upgrades: 'sage',
 # 'sagenb', 'media', and 'other'.
 bad_directories = ['static', 'templates', 'sage', 'sagenb', 'media', 'other']
+for dir in OMIT:
+    if dir.startswith('reference' + os.sep):
+        bad_directories.append(dir.split(os.sep)[1])
 multidocs_subdoc_list = sorted([x for x in os.listdir(ref_src)
                                 if os.path.isdir(os.path.join(ref_src, x))
                                 and x not in bad_directories])
diff --git a/src/doc/en/reference/index.rst b/src/doc/en/reference/index.rst
index 640df94c4a..91e6437045 100644
--- a/src/doc/en/reference/index.rst
+++ b/src/doc/en/reference/index.rst
@@ -12,11 +12,16 @@ available below.
 User Interface
 ==============
 
-* :doc:`Command Line Interface (REPL) <repl/index>`
+.. only:: Python2
 
-* For the jupyter notebook interface, see this `Documentation <https://jupyter-notebook.readthedocs.io/en/latest/notebook.html>`_.
+    * :doc:`Command Line Interface (REPL) <repl/index>`
+    * :doc:`Web Notebook <notebook/index>`
 
-* For the legacy notebook interface, which is no longer actively maintained, see the `source repository <https://github.com/sagemath/sagenb>`_.
+.. only:: Python3
+
+    * :doc:`Command Line Interface (REPL) <repl/index>`
+    * For the jupyter notebook interface, see this `Documentation <https://jupyter-notebook.readthedocs.io/en/latest/notebook.html>`_.
+    * For the legacy notebook interface, which is no longer actively maintained, see the `source repository <https://github.com/sagemath/sagenb>`_.
 
 Graphics
 ========
diff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py
index 5877b5b2a7..e750d4c9ab 100644
--- a/src/sage_setup/docbuild/__init__.py
+++ b/src/sage_setup/docbuild/__init__.py
@@ -669,7 +669,8 @@ for a webpage listing all of the documents.''' % (output_dir,
 
         for doc in os.listdir(refdir):
             directory = os.path.join(refdir, doc)
-            if os.path.exists(os.path.join(directory, 'index.rst')):
+            if (os.path.exists(os.path.join(directory, 'index.rst'))
+                and os.path.join("reference", doc) not in OMIT):
                 n = len(os.listdir(directory))
                 documents.append((-n, os.path.join(self.name, doc)))
 
diff --git a/src/sage_setup/docbuild/build_options.py b/src/sage_setup/docbuild/build_options.py
index 1168f02511..c35f71498f 100644
--- a/src/sage_setup/docbuild/build_options.py
+++ b/src/sage_setup/docbuild/build_options.py
@@ -16,8 +16,23 @@ if PAPER:
 else:
     PAPEROPTS = ""
 
+# The legacy Sage notebook is not compatible with Python 3, and its
+# documentation will not build with Python 3, so omit it in that case.
+# The command line options '-t Python3' and '-t Python2' define tags
+# Python2 and Python3 which are used by Sphinx for conditional
+# inclusion of text: text in a block marked '.. only:: Python2' will
+# be included when Sphinx is invoked with '-t Python2'. See
+# http://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#including-content-based-on-tags
+# http://www.sphinx-doc.org/en/master/man/sphinx-build.html#cmdoption-sphinx-build-t
+SAGE_PYTHON3 = os.environ.get("SAGE_PYTHON3", "no") == "yes"
+if SAGE_PYTHON3:
+    TAGS = "-t Python3 "
+    OMIT.append(os.path.join("reference", "notebook"))
+else:
+    TAGS = "-t Python2 "
+
 #Note that this needs to have the doctrees dir
-ALLSPHINXOPTS = SPHINXOPTS + " " + PAPEROPTS + " "
+ALLSPHINXOPTS = SPHINXOPTS + " " + PAPEROPTS + " " + TAGS + " "
 WEBSITESPHINXOPTS = ""
 
 # Number of threads to use for parallel-building the documentation.
```
but it doesn't work with Python 3: even though we are supposed to be ignoring the directory `src/doc/en/reference/notebook`, Sphinx still tries to use it in compiling indices, or something like that. Maybe there are more settings for ignoring files/directories that I could add.



---

archive/issue_comments_353653.json:
```json
{
    "body": "So, you can define tags in reST which Sphinx will then pay attention to, for example\n\n```\n.. only:: my-tag\n\n    stuff\n```\nThen if you run Sphinx with the option `-t my-tag`, `stuff` is included in the document. My first approach was to have tags `Python2` and `Python3` and run Sphinx with the corresponding `-t Python[2|3]`. Unfortunately, the text in `stuff` seems to be read even if the tag is not active, so any references to, for example, `reference/notebook` eventually lead to problems with Python3.\n\nThe only way I can think to get around this is to have two different `index.rst` files, one for use with each version of Python, and then create a symlink to the appropriate one when building the docs. One more point: any file ending in `.rst` in a documentation directory seems to be read by Sphinx, even if it is not explicitly referenced anywhere. So the two different `index.rst` files can't end in `.rst`. So here is a branch which implements all of this. Works for me with Python 3 (if I get around the `__div__` problem discussed at #25840).",
    "created_at": "2018-08-12T04:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353653",
    "user": "https://github.com/jhpalmieri"
}
```

So, you can define tags in reST which Sphinx will then pay attention to, for example

```
.. only:: my-tag

    stuff
```
Then if you run Sphinx with the option `-t my-tag`, `stuff` is included in the document. My first approach was to have tags `Python2` and `Python3` and run Sphinx with the corresponding `-t Python[2|3]`. Unfortunately, the text in `stuff` seems to be read even if the tag is not active, so any references to, for example, `reference/notebook` eventually lead to problems with Python3.

The only way I can think to get around this is to have two different `index.rst` files, one for use with each version of Python, and then create a symlink to the appropriate one when building the docs. One more point: any file ending in `.rst` in a documentation directory seems to be read by Sphinx, even if it is not explicitly referenced anywhere. So the two different `index.rst` files can't end in `.rst`. So here is a branch which implements all of this. Works for me with Python 3 (if I get around the `__div__` problem discussed at #25840).



---

archive/issue_comments_353654.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-12T04:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353655.json:
```json
{
    "body": "By the way, even if this is the right approach, are symlinks the right thing to use? Are they available on Cygwin, for example? It's easy enough to copy the file instead.",
    "created_at": "2018-08-12T17:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353655",
    "user": "https://github.com/jhpalmieri"
}
```

By the way, even if this is the right approach, are symlinks the right thing to use? Are they available on Cygwin, for example? It's easy enough to copy the file instead.



---

archive/issue_comments_353656.json:
```json
{
    "body": "Can't we just not include the sagenb documentation in both cases? Besides historical baggage, I don't see why sagenb should be treated differently from other dependencies here. It would simplify this change and would also simplify future deprecation.",
    "created_at": "2018-08-12T23:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353656",
    "user": "https://github.com/timokau"
}
```

Can't we just not include the sagenb documentation in both cases? Besides historical baggage, I don't see why sagenb should be treated differently from other dependencies here. It would simplify this change and would also simplify future deprecation.



---

archive/issue_comments_353657.json:
```json
{
    "body": "Replying to [comment:31 gh-timokau]:\n> Can't we just not include the sagenb documentation in both cases?\n\n\nHasn't been what the bulk of the discussion on this ticket has been about? It seems that not everyone agrees with this plan, so I suggested an alternative.",
    "created_at": "2018-08-13T05:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353657",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:31 gh-timokau]:
> Can't we just not include the sagenb documentation in both cases?


Hasn't been what the bulk of the discussion on this ticket has been about? It seems that not everyone agrees with this plan, so I suggested an alternative.



---

archive/issue_comments_353658.json:
```json
{
    "body": "The way I read it most of this discussion is actually about weather or not we want to deprecate sagenb (#25837) and/or just disable it for python3. I don't see anybody arguing against the actual purpose of the ticket, just removing the documentation. Of course we would need to provide a user with a way to still access the documentation, just as we now do it with the jupyter notebook.",
    "created_at": "2018-08-13T10:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353658",
    "user": "https://github.com/timokau"
}
```

The way I read it most of this discussion is actually about weather or not we want to deprecate sagenb (#25837) and/or just disable it for python3. I don't see anybody arguing against the actual purpose of the ticket, just removing the documentation. Of course we would need to provide a user with a way to still access the documentation, just as we now do it with the jupyter notebook.



---

archive/issue_comments_353659.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-15T21:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353660.json:
```json
{
    "body": "I think that the decision of whether to remove the docs for SageNB in Python 2 belongs on sage-devel, not here. There is also the larger question of whether SageNB should be (or is?) officially deprecated. That also belongs on sage-devel. I don't think the few participants on this ticket should be making such policy decisions on our own.",
    "created_at": "2018-08-15T22:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353660",
    "user": "https://github.com/jhpalmieri"
}
```

I think that the decision of whether to remove the docs for SageNB in Python 2 belongs on sage-devel, not here. There is also the larger question of whether SageNB should be (or is?) officially deprecated. That also belongs on sage-devel. I don't think the few participants on this ticket should be making such policy decisions on our own.



---

archive/issue_comments_353661.json:
```json
{
    "body": "I haven't been very active in this ticket. Nevertheless I'd like to voice an opinion now. Can anyone point me to another case where package A contains the documentation for package B. It would be so much easier if sageNB was shipping its own documentation. We wouldn't even have this conversation.",
    "created_at": "2018-08-15T22:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353661",
    "user": "https://github.com/kiwifb"
}
```

I haven't been very active in this ticket. Nevertheless I'd like to voice an opinion now. Can anyone point me to another case where package A contains the documentation for package B. It would be so much easier if sageNB was shipping its own documentation. We wouldn't even have this conversation.



---

archive/issue_comments_353662.json:
```json
{
    "body": "Of course the old Sage notebook used to be part of Sage, and (as you pointed out) it is still used as an interface to Sage. Anyway, can someone build its documentation and put is somewhere obvious on the sagenb github site? Then our reference manual could include a link to it (or skip it with Python 3, if we want conditional documentation depending on the Python version).",
    "created_at": "2018-08-15T22:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353662",
    "user": "https://github.com/jhpalmieri"
}
```

Of course the old Sage notebook used to be part of Sage, and (as you pointed out) it is still used as an interface to Sage. Anyway, can someone build its documentation and put is somewhere obvious on the sagenb github site? Then our reference manual could include a link to it (or skip it with Python 3, if we want conditional documentation depending on the Python version).



---

archive/issue_comments_353663.json:
```json
{
    "body": "What `@`fbissey said was exactly the point I was also trying to make. sagenb is very much deprecated (as in no new features, minimal support, referred to as `legacy` in the docs) but still supported for now. #25837 discusses the future status of that.\n\nBut independently of that, I don't see why sagenb has special status. We don't include the docs of other dependencies either. We could just explain the user where he can find the docs of sagenb, which are shipped separately (as part of sagenb).",
    "created_at": "2018-08-15T22:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353663",
    "user": "https://github.com/timokau"
}
```

What `@`fbissey said was exactly the point I was also trying to make. sagenb is very much deprecated (as in no new features, minimal support, referred to as `legacy` in the docs) but still supported for now. #25837 discusses the future status of that.

But independently of that, I don't see why sagenb has special status. We don't include the docs of other dependencies either. We could just explain the user where he can find the docs of sagenb, which are shipped separately (as part of sagenb).



---

archive/issue_comments_353664.json:
```json
{
    "body": "We should only remove the docs if the notebook has effectively been deprecated.",
    "created_at": "2018-08-16T08:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353664",
    "user": "https://github.com/jdemeyer"
}
```

We should only remove the docs if the notebook has effectively been deprecated.



---

archive/issue_comments_353665.json:
```json
{
    "body": "Given that I am basically a glorified postdoc with funding (without anything in it earmarked for sagenb) running out in a year, I definitely do not want to spend time on sagenb. I am all for deprecating and removing it as soon as possible.",
    "created_at": "2018-08-16T08:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353665",
    "user": "https://github.com/dimpase"
}
```

Given that I am basically a glorified postdoc with funding (without anything in it earmarked for sagenb) running out in a year, I definitely do not want to spend time on sagenb. I am all for deprecating and removing it as soon as possible.



---

archive/issue_comments_353666.json:
```json
{
    "body": "Moving the sagenb documentation to sagenb itself should be doable.",
    "created_at": "2018-08-16T08:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353666",
    "user": "https://github.com/dimpase"
}
```

Moving the sagenb documentation to sagenb itself should be doable.



---

archive/issue_comments_353667.json:
```json
{
    "body": "I would prefer the simpler solution to just remove the sagenb doc inconditionally..\n\nAnd if someone feels able to find another place for this doc somewhere (readthedocs ?), please do !",
    "created_at": "2018-10-09T16:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353667",
    "user": "https://github.com/fchapoton"
}
```

I would prefer the simpler solution to just remove the sagenb doc inconditionally..

And if someone feels able to find another place for this doc somewhere (readthedocs ?), please do !



---

archive/issue_comments_353668.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-09T16:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353669.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-09T17:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353670.json:
```json
{
    "body": "Replying to [comment:42 chapoton]:\n> I would prefer the simpler solution to just remove the sagenb doc inconditionally..\n\n\nLike this?",
    "created_at": "2018-10-09T17:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353670",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:42 chapoton]:
> I would prefer the simpler solution to just remove the sagenb doc inconditionally..


Like this?



---

archive/issue_comments_353671.json:
```json
{
    "body": "yes, just like that",
    "created_at": "2018-10-09T17:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353671",
    "user": "https://github.com/fchapoton"
}
```

yes, just like that



---

archive/issue_comments_353672.json:
```json
{
    "body": "I won't lie. I like it. That's all that's ever needed on sage side. If someone wants to do something sagenb side, then that's another tracker.",
    "created_at": "2018-10-09T19:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353672",
    "user": "https://github.com/kiwifb"
}
```

I won't lie. I like it. That's all that's ever needed on sage side. If someone wants to do something sagenb side, then that's another tracker.



---

archive/issue_comments_353673.json:
```json
{
    "body": "I agree.",
    "created_at": "2018-10-09T21:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353673",
    "user": "https://github.com/timokau"
}
```

I agree.



---

archive/issue_comments_353674.json:
```json
{
    "body": "I asked about the idea of removing the sagenb docs on sage-devel. Please add comments there.",
    "created_at": "2018-10-10T05:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353674",
    "user": "https://github.com/jhpalmieri"
}
```

I asked about the idea of removing the sagenb docs on sage-devel. Please add comments there.



---

archive/issue_comments_353675.json:
```json
{
    "body": "no need for the dependency to #25852, I think",
    "created_at": "2018-10-10T13:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353675",
    "user": "https://github.com/fchapoton"
}
```

no need for the dependency to #25852, I think



---

archive/issue_comments_353676.json:
```json
{
    "body": "One week has passed on sage-devel, with only positive opinions. I think it's time to set this to positive. Agreed ?",
    "created_at": "2018-10-17T07:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353676",
    "user": "https://github.com/fchapoton"
}
```

One week has passed on sage-devel, with only positive opinions. I think it's time to set this to positive. Agreed ?



---

archive/issue_comments_353677.json:
```json
{
    "body": "Yes. That means the paperwork needs to be done. Authors and reviewers fields need to be filled in. And the ticket set to review and so on and so forth.",
    "created_at": "2018-10-17T07:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353677",
    "user": "https://github.com/kiwifb"
}
```

Yes. That means the paperwork needs to be done. Authors and reviewers fields need to be filled in. And the ticket set to review and so on and so forth.



---

archive/issue_comments_353678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-17T07:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353679.json:
```json
{
    "body": "and we also need to check that all doctests pass..",
    "created_at": "2018-10-17T08:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353679",
    "user": "https://github.com/fchapoton"
}
```

and we also need to check that all doctests pass..



---

archive/issue_comments_353680.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-10-17T12:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353680",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_353681.json:
```json
{
    "body": "This is ready for review now. Patchbot is morally green.",
    "created_at": "2018-10-17T12:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353681",
    "user": "https://github.com/fchapoton"
}
```

This is ready for review now. Patchbot is morally green.



---

archive/issue_comments_353682.json:
```json
{
    "body": "OK, so we should keep a copy of the ready to read sagenb docs somewhere (linked at its github project).\nThis is now https://github.com/sagemath/sagenb/issues/460",
    "created_at": "2018-10-17T12:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353682",
    "user": "https://github.com/dimpase"
}
```

OK, so we should keep a copy of the ready to read sagenb docs somewhere (linked at its github project).
This is now https://github.com/sagemath/sagenb/issues/460



---

archive/issue_comments_353683.json:
```json
{
    "body": "Replying to [comment:55 chapoton]:\n> This is ready for review now. Patchbot is morally green.\n\nAre these Python3 warnings/errors from https://patchbot.sagemath.org/log/25382/Ubuntu/16.04/x86_64/4.4.0-134-generic/atlas/2018-10-17%2009:49:44?plugin=python3\nharmless?\nJust wondering - ik habla helemaal geen Espanol...",
    "created_at": "2018-10-17T12:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353683",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:55 chapoton]:
> This is ready for review now. Patchbot is morally green.

Are these Python3 warnings/errors from https://patchbot.sagemath.org/log/25382/Ubuntu/16.04/x86_64/4.4.0-134-generic/atlas/2018-10-17%2009:49:44?plugin=python3
harmless?
Just wondering - ik habla helemaal geen Espanol...



---

archive/issue_comments_353684.json:
```json
{
    "body": "I think that the poor patchbot (not smart enough) is troubled by the removal of the files. Or maybe by the accented letters. But this should just be noise.",
    "created_at": "2018-10-17T12:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353684",
    "user": "https://github.com/fchapoton"
}
```

I think that the poor patchbot (not smart enough) is troubled by the removal of the files. Or maybe by the accented letters. But this should just be noise.



---

archive/issue_comments_353685.json:
```json
{
    "body": "I've made a new release of sagenb, see #26499.\n\nShould we also do downgrading sagenb to optional there?",
    "created_at": "2018-10-17T15:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353685",
    "user": "https://github.com/dimpase"
}
```

I've made a new release of sagenb, see #26499.

Should we also do downgrading sagenb to optional there?



---

archive/issue_comments_353686.json:
```json
{
    "body": "Replying to [comment:59 dimpase]:\n> I've made a new release of sagenb, see #26499.\n> \n> Should we also do downgrading sagenb to optional there?\n\n\nNote: the tasks of ugrading sagenb and making it optional are both fully independent of the present ticket.",
    "created_at": "2018-10-17T17:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353686",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:59 dimpase]:
> I've made a new release of sagenb, see #26499.
> 
> Should we also do downgrading sagenb to optional there?


Note: the tasks of ugrading sagenb and making it optional are both fully independent of the present ticket.



---

archive/issue_comments_353687.json:
```json
{
    "body": "On #26499 I've implemented installing sagenb (html) docs to $SAGELOCAL/share/docs/sagenb\n--- that's where they belong to by right.",
    "created_at": "2018-10-17T22:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353687",
    "user": "https://github.com/dimpase"
}
```

On #26499 I've implemented installing sagenb (html) docs to $SAGELOCAL/share/docs/sagenb
--- that's where they belong to by right.



---

archive/issue_comments_353688.json:
```json
{
    "body": "I think that `doc/en/reference/index.rst` should have a link to docs of \"external\" packages in `SAGELOCAL/share/doc` (note that Sage's docs themselves are in\n`SAGELOCAL/share/doc/sage`).\nThen in view of #26499 one can put the link to docs in\n`SAGELOCAL/share/doc/sagenb`",
    "created_at": "2018-10-18T00:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353688",
    "user": "https://github.com/dimpase"
}
```

I think that `doc/en/reference/index.rst` should have a link to docs of "external" packages in `SAGELOCAL/share/doc` (note that Sage's docs themselves are in
`SAGELOCAL/share/doc/sage`).
Then in view of #26499 one can put the link to docs in
`SAGELOCAL/share/doc/sagenb`



---

archive/issue_comments_353689.json:
```json
{
    "body": "Thanks very much everyone for handling all this properly so people can still find stuff.",
    "created_at": "2018-10-18T00:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353689",
    "user": "https://github.com/kcrisman"
}
```

Thanks very much everyone for handling all this properly so people can still find stuff.



---

archive/issue_comments_353690.json:
```json
{
    "body": "Looks good to me. I'll modify https://github.com/sagemath/sagenb/blob/master/README.rst\nto point to SAGELOCAL/share/doc/sagenb as the location for docs.\n\nWe should also find a way to put it up to doc.sagemath.org, but this is also not for this ticket.",
    "created_at": "2018-10-18T10:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353690",
    "user": "https://github.com/dimpase"
}
```

Looks good to me. I'll modify https://github.com/sagemath/sagenb/blob/master/README.rst
to point to SAGELOCAL/share/doc/sagenb as the location for docs.

We should also find a way to put it up to doc.sagemath.org, but this is also not for this ticket.



---

archive/issue_comments_353691.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-18T10:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353691",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_063675.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-18T10:42:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63675"
}
```



---

archive/issue_events_063676.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-18T10:42:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63676"
}
```



---

archive/issue_comments_353692.json:
```json
{
    "body": "FYI: `graph_editor.py` imports `sagenb.notebook.interact`, but has no pointer to the documentation of `sagenb`.\n\nWe will certainly have to remove this tool when sagenb will be removed.",
    "created_at": "2018-10-18T12:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353692",
    "user": "https://github.com/dcoudert"
}
```

FYI: `graph_editor.py` imports `sagenb.notebook.interact`, but has no pointer to the documentation of `sagenb`.

We will certainly have to remove this tool when sagenb will be removed.



---

archive/issue_comments_353693.json:
```json
{
    "body": "`@`dcoudert also see #25837.",
    "created_at": "2018-10-19T16:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353693",
    "user": "https://github.com/timokau"
}
```

`@`dcoudert also see #25837.



---

archive/issue_events_063677.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-20T11:59:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25382#event-63677"
}
```



---

archive/issue_comments_353694.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-20T11:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353694",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_353695.json:
```json
{
    "body": "Unfortunately now it seems that the interact documentation is not in Sage's usual online doc.  That will break a number of links out there, plus interact is in many different interfaces to Sage, not just sagenb.",
    "created_at": "2019-01-29T04:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353695",
    "user": "https://github.com/kcrisman"
}
```

Unfortunately now it seems that the interact documentation is not in Sage's usual online doc.  That will break a number of links out there, plus interact is in many different interfaces to Sage, not just sagenb.



---

archive/issue_comments_353696.json:
```json
{
    "body": "Well just like sagenb documentation should not be shipped with sage, sage documentation should not be in sagenb. That means some documentation has be migrated/rewritten in sage proper.",
    "created_at": "2019-01-29T04:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353696",
    "user": "https://github.com/kiwifb"
}
```

Well just like sagenb documentation should not be shipped with sage, sage documentation should not be in sagenb. That means some documentation has be migrated/rewritten in sage proper.



---

archive/issue_comments_353697.json:
```json
{
    "body": "sagenb docs are installed in SAGE_LOCAL/share/doc/, among with many others.\n\nThis is however not at all reflected in the reference manual. I'm not sure how to achieve this with sphinx. By relative paths, like `../../` ?",
    "created_at": "2019-01-29T07:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353697",
    "user": "https://github.com/dimpase"
}
```

sagenb docs are installed in SAGE_LOCAL/share/doc/, among with many others.

This is however not at all reflected in the reference manual. I'm not sure how to achieve this with sphinx. By relative paths, like `../../` ?



---

archive/issue_comments_353698.json:
```json
{
    "body": "Not sure how its done right now, but intersphinx may be worth looking at: http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html",
    "created_at": "2019-01-29T09:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353698",
    "user": "https://github.com/timokau"
}
```

Not sure how its done right now, but intersphinx may be worth looking at: http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html



---

archive/issue_comments_353699.json:
```json
{
    "body": "I agree that intersphinx looks like the right tool for the job.",
    "created_at": "2019-01-29T09:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353699",
    "user": "https://github.com/dimpase"
}
```

I agree that intersphinx looks like the right tool for the job.



---

archive/issue_comments_353700.json:
```json
{
    "body": "In any case, are we agreed that the interact documentation should be visible now?",
    "created_at": "2019-01-29T15:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25382#issuecomment-353700",
    "user": "https://github.com/kcrisman"
}
```

In any case, are we agreed that the interact documentation should be visible now?
