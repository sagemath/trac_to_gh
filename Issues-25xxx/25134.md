# Issue 25134: Derivation and twisted derivations over rings

archive/issues_024897.json:
```json
{
    "assignees": [],
    "body": "This ticket implements derivation and `theta`-derivations over rings.\n(It would be useful for implementing general Ore polynomials.)\n\nDepends on #26354\n\nCC:  @xcaruso @johanrosenkilde @tscrim\n\nKeywords: **rings, derivation**\n\nBranch/Commit: **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Amaury Durand, Xavier Caruso**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25134_\n\n",
    "closed_at": "2018-10-03T21:56:26Z",
    "created_at": "2018-04-10T09:13:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Derivation and twisted derivations over rings",
    "type": "issue",
    "updated_at": "2018-10-03T21:56:26Z",
    "url": "https://github.com/sagemath/sage/issues/25134",
    "user": "https://github.com/Diarmund33"
}
```
This ticket implements derivation and `theta`-derivations over rings.
(It would be useful for implementing general Ore polynomials.)

Depends on #26354

CC:  @xcaruso @johanrosenkilde @tscrim

Keywords: **rings, derivation**

Branch/Commit: **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**

Reviewer: **Travis Scrimshaw**

Author: **Amaury Durand, Xavier Caruso**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/25134_





---

archive/issue_events_347763.json:
```json
{
    "actor": "https://github.com/Diarmund33",
    "created_at": "2018-04-10T09:13:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347763"
}
```



---

archive/issue_events_347764.json:
```json
{
    "actor": "https://github.com/Diarmund33",
    "created_at": "2018-04-10T09:13:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347764"
}
```



---

archive/issue_events_347765.json:
```json
{
    "actor": "https://github.com/Diarmund33",
    "created_at": "2018-04-10T09:13:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347765"
}
```



---

archive/issue_events_347766.json:
```json
{
    "actor": "https://github.com/Diarmund33",
    "created_at": "2018-04-10T09:13:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347766"
}
```



---

archive/issue_comments_383694.json:
```json
{
    "body": "Branch: **[u/adurand/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/adurand/derivation)**",
    "created_at": "2018-05-17T14:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383694",
    "user": "https://github.com/sagetrac-adurand"
}
```

Branch: **[u/adurand/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/adurand/derivation)**



---

archive/issue_comments_383695.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7\">b927acd</a></td><td><code>add method to create derivation in polynomial ring</code></td></tr></table>\n",
    "created_at": "2018-05-17T14:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7">b927acd</a></td><td><code>add method to create derivation in polynomial ring</code></td></tr></table>




---

archive/issue_comments_383696.json:
```json
{
    "body": "Commit: **[`b927acd`](https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7)**",
    "created_at": "2018-05-17T14:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383696",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`b927acd`](https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7)**



---

archive/issue_comments_383697.json:
```json
{
    "body": "Changed branch from **[u/adurand/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/adurand/derivation)** to **[u/caruso/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/derivation)**",
    "created_at": "2018-08-21T07:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383697",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/adurand/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/adurand/derivation)** to **[u/caruso/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/derivation)**



---

archive/issue_events_347767.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-08-21T07:36:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "title_is": "Derivation over rings and Ore polynomials",
    "title_was": "Derivation over rings",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347767"
}
```



---

archive/issue_comments_383698.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n This ticket implements derivation over rings and provides methods for creating derivations over univariate and multivariate polynomial rings.\n+It also provides an implementation of Ore polynomials with derivations.\n``````\n",
    "created_at": "2018-08-21T07:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383698",
    "user": "https://github.com/xcaruso"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
 This ticket implements derivation over rings and provides methods for creating derivations over univariate and multivariate polynomial rings.
+It also provides an implementation of Ore polynomials with derivations.
``````




---

archive/issue_comments_383699.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53\">a3de074</a></td><td><code>Initial code written by Amaury Durand</code></td></tr></table>\n",
    "created_at": "2018-08-21T07:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383699",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53">a3de074</a></td><td><code>Initial code written by Amaury Durand</code></td></tr></table>




---

archive/issue_comments_383700.json:
```json
{
    "body": "Changed commit from **[`b927acd`](https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7)** to **[`a3de074`](https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53)**",
    "created_at": "2018-08-21T07:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383700",
    "user": "https://github.com/xcaruso"
}
```

Changed commit from **[`b927acd`](https://github.com/sagemath/sagetrac-mirror/commit/b927acde4b3b54603edd6f55aa58f64ff1bfcaa7)** to **[`a3de074`](https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53)**



---

archive/issue_comments_383701.json:
```json
{
    "body": "Changed commit from **[`a3de074`](https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53)** to **[`a222da8`](https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7)**",
    "created_at": "2018-09-19T13:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383701",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a3de074`](https://github.com/sagemath/sagetrac-mirror/commit/a3de0749d0b734c21a6f18b7567187d37d69fd53)** to **[`a222da8`](https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7)**



---

archive/issue_comments_383702.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/823594a6a6405639550cb25a293ddfd39f1193ee\">823594a</a></td><td><code>Merge branch 'develop' into t/25134/derivation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7\">a222da8</a></td><td><code>Implement left Euclidean division</code></td></tr></table>\n",
    "created_at": "2018-09-19T13:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383702",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/823594a6a6405639550cb25a293ddfd39f1193ee">823594a</a></td><td><code>Merge branch 'develop' into t/25134/derivation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7">a222da8</a></td><td><code>Implement left Euclidean division</code></td></tr></table>




---

archive/issue_comments_383703.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137\">532604b</a></td><td><code>Add a parent for the module of derivations</code></td></tr></table>\n",
    "created_at": "2018-09-20T07:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383703",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137">532604b</a></td><td><code>Add a parent for the module of derivations</code></td></tr></table>




---

archive/issue_comments_383704.json:
```json
{
    "body": "Changed commit from **[`a222da8`](https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7)** to **[`532604b`](https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137)**",
    "created_at": "2018-09-20T07:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383704",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a222da8`](https://github.com/sagemath/sagetrac-mirror/commit/a222da8eccf0fbd3c4cd989129b8a59b0b46d5b7)** to **[`532604b`](https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137)**



---

archive/issue_comments_383705.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44f0ca20db735150325dee8c7d0461ddbd6649ae\">44f0ca2</a></td><td><code>Implement twisted derivations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983\">cf978b3</a></td><td><code>Some documentation</code></td></tr></table>\n",
    "created_at": "2018-09-20T16:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383705",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44f0ca20db735150325dee8c7d0461ddbd6649ae">44f0ca2</a></td><td><code>Implement twisted derivations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983">cf978b3</a></td><td><code>Some documentation</code></td></tr></table>




---

archive/issue_comments_383706.json:
```json
{
    "body": "Changed commit from **[`532604b`](https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137)** to **[`cf978b3`](https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983)**",
    "created_at": "2018-09-20T16:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383706",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`532604b`](https://github.com/sagemath/sagetrac-mirror/commit/532604b87b737b35d7498440af03007fb7e7e137)** to **[`cf978b3`](https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983)**



---

archive/issue_comments_383707.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2\">51f8b53</a></td><td><code>More doctests</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383707",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2">51f8b53</a></td><td><code>More doctests</code></td></tr></table>




---

archive/issue_comments_383708.json:
```json
{
    "body": "Changed commit from **[`cf978b3`](https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983)** to **[`51f8b53`](https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2)**",
    "created_at": "2018-09-20T19:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383708",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cf978b3`](https://github.com/sagemath/sagetrac-mirror/commit/cf978b3ab69c156b7a344cfec233d8884c705983)** to **[`51f8b53`](https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2)**



---

archive/issue_comments_383709.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5\">da46772</a></td><td><code>Add author</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383709",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5">da46772</a></td><td><code>Add author</code></td></tr></table>




---

archive/issue_comments_383710.json:
```json
{
    "body": "Changed commit from **[`51f8b53`](https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2)** to **[`da46772`](https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5)**",
    "created_at": "2018-09-20T19:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51f8b53`](https://github.com/sagemath/sagetrac-mirror/commit/51f8b536cadeeaec23c364e03e380b24d865c8d2)** to **[`da46772`](https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5)**



---

archive/issue_comments_383711.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5\">da46772</a></td><td><code>Add author</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383711",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:10"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5">da46772</a></td><td><code>Add author</code></td></tr></table>




---

archive/issue_events_347768.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-09-20T19:16:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347768"
}
```



---

archive/issue_comments_383712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-This ticket implements derivation over rings and provides methods for creating derivations over univariate and multivariate polynomial rings.\n-It also provides an implementation of Ore polynomials with derivations.\n+This ticket implements derivation and `theta`-derivations over rings.\n+(It would be useful for implementing general Ore polynomials.)\n``````\n",
    "created_at": "2018-09-20T19:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383712",
    "user": "https://github.com/xcaruso"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-This ticket implements derivation over rings and provides methods for creating derivations over univariate and multivariate polynomial rings.
-It also provides an implementation of Ore polynomials with derivations.
+This ticket implements derivation and `theta`-derivations over rings.
+(It would be useful for implementing general Ore polynomials.)
``````




---

archive/issue_comments_383713.json:
```json
{
    "body": "Changed author from **Amaury Durand** to **Amaury Durand, Xavier Caruso**",
    "created_at": "2018-09-20T19:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383713",
    "user": "https://github.com/xcaruso"
}
```

Changed author from **Amaury Durand** to **Amaury Durand, Xavier Caruso**



---

archive/issue_events_347769.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-09-20T19:16:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "title_is": "Derivation and twisted derivations over rings",
    "title_was": "Derivation over rings and Ore polynomials",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347769"
}
```



---

archive/issue_comments_383714.json:
```json
{
    "body": "Changed commit from **[`da46772`](https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5)** to **[`ec909af`](https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a)**",
    "created_at": "2018-09-20T19:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da46772`](https://github.com/sagemath/sagetrac-mirror/commit/da467724e892fba5e751bcbb129aba51d4b98de5)** to **[`ec909af`](https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a)**



---

archive/issue_comments_383715.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a\">ec909af</a></td><td><code>Add a hash function</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383715",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a">ec909af</a></td><td><code>Add a hash function</code></td></tr></table>




---

archive/issue_comments_383716.json:
```json
{
    "body": "Changed commit from **[`ec909af`](https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a)** to **[`5b9bab9`](https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249)**",
    "created_at": "2018-09-21T06:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383716",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec909af`](https://github.com/sagemath/sagetrac-mirror/commit/ec909afd74faa63e2e7c9de85555227051e5588a)** to **[`5b9bab9`](https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249)**



---

archive/issue_comments_383717.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249\">5b9bab9</a></td><td><code>Add doctest for is_zero</code></td></tr></table>\n",
    "created_at": "2018-09-21T06:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249">5b9bab9</a></td><td><code>Add doctest for is_zero</code></td></tr></table>




---

archive/issue_comments_383718.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHi Johan,\n\nWith a master student of mine (Amaury Durand), we generalized the notion of Gabidulin codes to any Ore algebra (possibly with derivation) and managed to allow more evaluation points. We are preparing a paper now and we trying to implement our generalized Gabidulin codes in Sage.\n\nThis ticket implements derivations and theta-derivations over arbitrary commutative rings. It is a first step towards implementing our generalized Gabidulin.",
    "created_at": "2018-09-21T06:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383718",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:13" align="right">comment:13</div>

Hi Johan,

With a master student of mine (Amaury Durand), we generalized the notion of Gabidulin codes to any Ore algebra (possibly with derivation) and managed to allow more evaluation points. We are preparing a paper now and we trying to implement our generalized Gabidulin codes in Sage.

This ticket implements derivations and theta-derivations over arbitrary commutative rings. It is a first step towards implementing our generalized Gabidulin.



---

archive/issue_comments_383719.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@xcaruso](#comment:13):\n> Hi Johan,\n> \n> With a master student of mine (Amaury Durand), we generalized the notion of Gabidulin codes to any Ore algebra (possibly with derivation) and managed to allow more evaluation points. We are preparing a paper now and we trying to implement our generalized Gabidulin codes in Sage.\n> \n> This ticket implements derivations and theta-derivations over arbitrary commutative rings. It is a first step towards implementing our generalized Gabidulin.\n\nHi Xavier and Amaury,\n\nThis looks very promising. I have no experience with theta-derivations over arbitrary commutative rings, but you code seems to explain the definition nicely. I should be able to review the code in the not-too-far-future. I'd like to see a preprint of your paper (if you prefer, in private email), if some of it is ready for consumption, and if you believe it would help my reading of the code.\n\nBest,\nJohan",
    "created_at": "2018-09-21T07:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383719",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@xcaruso](#comment:13):
> Hi Johan,
> 
> With a master student of mine (Amaury Durand), we generalized the notion of Gabidulin codes to any Ore algebra (possibly with derivation) and managed to allow more evaluation points. We are preparing a paper now and we trying to implement our generalized Gabidulin codes in Sage.
> 
> This ticket implements derivations and theta-derivations over arbitrary commutative rings. It is a first step towards implementing our generalized Gabidulin.

Hi Xavier and Amaury,

This looks very promising. I have no experience with theta-derivations over arbitrary commutative rings, but you code seems to explain the definition nicely. I should be able to review the code in the not-too-far-future. I'd like to see a preprint of your paper (if you prefer, in private email), if some of it is ready for consumption, and if you believe it would help my reading of the code.

Best,
Johan



---

archive/issue_comments_383720.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f\">f4fed16</a></td><td><code>Fix doctest</code></td></tr></table>\n",
    "created_at": "2018-09-21T14:12:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383720",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f">f4fed16</a></td><td><code>Fix doctest</code></td></tr></table>




---

archive/issue_comments_383721.json:
```json
{
    "body": "Changed commit from **[`5b9bab9`](https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249)** to **[`f4fed16`](https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f)**",
    "created_at": "2018-09-21T14:12:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5b9bab9`](https://github.com/sagemath/sagetrac-mirror/commit/5b9bab94ce28afb5d263b2f3d37ff3286c290249)** to **[`f4fed16`](https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f)**



---

archive/issue_events_347770.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-21T23:39:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347770"
}
```



---

archive/issue_events_347771.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-21T23:39:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347771"
}
```



---

archive/issue_events_347772.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-21T23:39:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347772"
}
```



---

archive/issue_events_347773.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-21T23:39:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347773"
}
```



---

archive/issue_comments_383722.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-09-21T23:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383722",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_383723.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis is a good advancement and looks in good shape. I have a few comments and suggestions.\n\nThe set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)\n\nAdditionally, when the ring is a finite-dimensional algebra with an explicit basis, we can compute a basis for the derivation module in terms of matrices:\n\n```\nsage: E.<x,y> = ExteriorAlgebra(QQ)\nsage: E.derivations_basis()\n(\n[0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]\n[0 1 0 0]  [0 0 1 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]\n[0 0 0 0]  [0 0 0 0]  [0 1 0 0]  [0 0 1 0]  [0 0 0 0]  [0 0 0 0]\n[0 0 0 1], [0 0 0 0], [0 0 0 0], [0 0 0 1], [0 1 0 0], [0 0 1 0]\n)\n```\nAlthough incorporating that is something that could easily be on a followup ticket as it will likely require a bit of extending your current implementation.\n\nA few quick comments from reading the browsing the code:\n\n- You should not set `self.element_class` attribute, but instead set `self.Element` (the `Parent.__init__` ends up creating the new subclass `element_class` using stuff from the category).\n- Python convention is error messages do not start with a capital letter.\n- Remove the first `::` here:\n\n  ```\n  ::\n  \n  Twisted derivations and handled similarly::\n  ```\n- `Returns` -> `Return`.\n- <code>\\`\\`n\\`\\`th</code> -> <code>\\`\\`n\\`\\`-th</code> as otherwise it does not get parsed correctly.\n- <code>\\`\\`n\\`\\` - an integer (default: \\`\\`0\\`\\`)</code> -> <code>-\\`\\`n\\`\\` -- integer (default: \\`\\`0\\`\\`)</code>\n- It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.\n- I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.",
    "created_at": "2018-09-21T23:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383723",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

This is a good advancement and looks in good shape. I have a few comments and suggestions.

The set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)

Additionally, when the ring is a finite-dimensional algebra with an explicit basis, we can compute a basis for the derivation module in terms of matrices:

```
sage: E.<x,y> = ExteriorAlgebra(QQ)
sage: E.derivations_basis()
(
[0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]
[0 1 0 0]  [0 0 1 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]  [0 0 0 0]
[0 0 0 0]  [0 0 0 0]  [0 1 0 0]  [0 0 1 0]  [0 0 0 0]  [0 0 0 0]
[0 0 0 1], [0 0 0 0], [0 0 0 0], [0 0 0 1], [0 1 0 0], [0 0 1 0]
)
```
Although incorporating that is something that could easily be on a followup ticket as it will likely require a bit of extending your current implementation.

A few quick comments from reading the browsing the code:

- You should not set `self.element_class` attribute, but instead set `self.Element` (the `Parent.__init__` ends up creating the new subclass `element_class` using stuff from the category).
- Python convention is error messages do not start with a capital letter.
- Remove the first `::` here:

  ```
  ::
  
  Twisted derivations and handled similarly::
  ```
- `Returns` -> `Return`.
- <code>\`\`n\`\`th</code> -> <code>\`\`n\`\`-th</code> as otherwise it does not get parsed correctly.
- <code>\`\`n\`\` - an integer (default: \`\`0\`\`)</code> -> <code>-\`\`n\`\` -- integer (default: \`\`0\`\`)</code>
- It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.
- I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.



---

archive/issue_comments_383724.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@johanrosenkilde](#comment:14):\n> This looks very promising. I have no experience with theta-derivations over arbitrary commutative rings, but you code seems to explain the definition nicely. I should be able to review the code in the not-too-far-future.\n\nGreat!\n\n> I'd like to see a preprint of your paper (if you prefer, in private email), if some of it is ready for consumption, and if you believe it would help my reading of the code.\n\nOK, we'll send it to you... as soon as it is ready.",
    "created_at": "2018-09-22T08:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383724",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@johanrosenkilde](#comment:14):
> This looks very promising. I have no experience with theta-derivations over arbitrary commutative rings, but you code seems to explain the definition nicely. I should be able to review the code in the not-too-far-future.

Great!

> I'd like to see a preprint of your paper (if you prefer, in private email), if some of it is ready for consumption, and if you believe it would help my reading of the code.

OK, we'll send it to you... as soon as it is ready.



---

archive/issue_comments_383725.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThanks Travis for your comments.\n\nReplying to [@tscrim](#comment:16):\n> The set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)\n\nGood point.\nI'll add it. (I think I can do it by myself but I'll ask you if I have questions.)\n\nAre there support in Sage for hom-Lie algebras?\n\n> - You should not set `self.element_class` attribute, but instead set `self.Element` (the `Parent.__init__` ends up creating the new subclass `element_class` using stuff from the category).\n\nAh, OK.\n\n> - Python convention is error messages do not start with a capital letter.\n\nReally? Is it the Sage convention as well?\nI ask the question because I remember that, one time, somebody told me that I should capitalize my error messages.\n\n> - It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.\n\nActually, I already tried to inherit from `RingMap` but had some troubles. But I can try harder :-)\n\n> - I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.\n\nThe semantic of `derivation` is a bit different from that of `derivation_twisted`. It's the reason why I've implemented two distinct methods.\n\nBy the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.",
    "created_at": "2018-09-22T08:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383725",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:18" align="right">comment:18</div>

Thanks Travis for your comments.

Replying to [@tscrim](#comment:16):
> The set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)

Good point.
I'll add it. (I think I can do it by myself but I'll ask you if I have questions.)

Are there support in Sage for hom-Lie algebras?

> - You should not set `self.element_class` attribute, but instead set `self.Element` (the `Parent.__init__` ends up creating the new subclass `element_class` using stuff from the category).

Ah, OK.

> - Python convention is error messages do not start with a capital letter.

Really? Is it the Sage convention as well?
I ask the question because I remember that, one time, somebody told me that I should capitalize my error messages.

> - It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.

Actually, I already tried to inherit from `RingMap` but had some troubles. But I can try harder :-)

> - I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.

The semantic of `derivation` is a bit different from that of `derivation_twisted`. It's the reason why I've implemented two distinct methods.

By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.



---

archive/issue_comments_383726.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@xcaruso](#comment:18):\n> By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.\n\nIn fact, I think I can test it in the `__init` function of `RingDerivation`.\nSo everything's fine.",
    "created_at": "2018-09-22T13:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383726",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@xcaruso](#comment:18):
> By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.

In fact, I think I can test it in the `__init` function of `RingDerivation`.
So everything's fine.



---

archive/issue_comments_383727.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@xcaruso](#comment:18):\n> Thanks Travis for your comments.\n> \n> Replying to [@tscrim](#comment:16):\n> > The set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)\n\n> \n> Good point.\n> I'll add it. (I think I can do it by myself but I'll ask you if I have questions.)\n\nThank you.\n\n> Are there support in Sage for hom-Lie algebras?\n\nCurrently no. It is not hard to add generic support in the form of having a category and lifting the `bracket` methods. However, I am not sure how much of the general theory (and hence code) could be lifted from Lie algebras to hom-Lie algebras.\n\n> > - Python convention is error messages do not start with a capital letter.\n\n> \n> Really? Is it the Sage convention as well?\n> I ask the question because I remember that, one time, somebody told me that I should capitalize my error messages.\n\nYes. Whomever said otherwise was mistaken (granted there are exceptions when the message needs to be really long, but these are quite rare). At least, that is the consensus I have understood.\n\n> > - It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.\n\n> \n> Actually, I already tried to inherit from `RingMap` but had some troubles. But I can try harder :-)\n\nIf it was giving you difficulties, then feel free to drop it. It is not a big issue. I am happy to help try and debug things here as well.\n\n> > - I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.\n\n> \n> The semantic of `derivation` is a bit different from that of `derivation_twisted`. It's the reason why I've implemented two distinct methods.\n\nSomewhat, but it feels a little artificial. You could just have a keyword only argument of `twist`, which I feel is quite natural to have. However, I don't feel that strongly about it, so if you would rather keep the current constructs, then it is fine by me.\n\n> By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.\n\nI feel like it should work with quotients: If a map is a derivation in the ambient space, so when taking the quotient (which is functorial), you are preserving the equality. Perhaps I am over-simplifying things. I am guessing you have an explicit example in mind?",
    "created_at": "2018-09-22T14:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383727",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@xcaruso](#comment:18):
> Thanks Travis for your comments.
> 
> Replying to [@tscrim](#comment:16):
> > The set of all derivations forms a Lie algebra with `[X, Y] = X*Y - Y*X`, which Sage has support for. So for untwisted derivations, it should be in the category of `LieAlgebras`. Let me know if you have any questions about adding this. (The twisted derivations forms what is known as a hom-Lie algebra, where the Jacobi relation also needs to be twisted.)

> 
> Good point.
> I'll add it. (I think I can do it by myself but I'll ask you if I have questions.)

Thank you.

> Are there support in Sage for hom-Lie algebras?

Currently no. It is not hard to add generic support in the form of having a category and lifting the `bracket` methods. However, I am not sure how much of the general theory (and hence code) could be lifted from Lie algebras to hom-Lie algebras.

> > - Python convention is error messages do not start with a capital letter.

> 
> Really? Is it the Sage convention as well?
> I ask the question because I remember that, one time, somebody told me that I should capitalize my error messages.

Yes. Whomever said otherwise was mistaken (granted there are exceptions when the message needs to be really long, but these are quite rare). At least, that is the consensus I have understood.

> > - It might actually be good to have `RingDerivation` still inherit from `(Ring)Map` as the composition just becomes a formal composition of maps in the homspace (IIRC the default behavior). Plus it allows for natural functionality.

> 
> Actually, I already tried to inherit from `RingMap` but had some troubles. But I can try harder :-)

If it was giving you difficulties, then feel free to drop it. It is not a big issue. I am happy to help try and debug things here as well.

> > - I think it would be better to remove `derivation_twisted` and just have an extra input to `derivation`. It will have better localization of code and documentation and match the semantic of `derivation_module`.

> 
> The semantic of `derivation` is a bit different from that of `derivation_twisted`. It's the reason why I've implemented two distinct methods.

Somewhat, but it feels a little artificial. You could just have a keyword only argument of `twist`, which I feel is quite natural to have. However, I don't feel that strongly about it, so if you would rather keep the current constructs, then it is fine by me.

> By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.

I feel like it should work with quotients: If a map is a derivation in the ambient space, so when taking the quotient (which is functorial), you are preserving the equality. Perhaps I am over-simplifying things. I am guessing you have an explicit example in mind?



---

archive/issue_comments_383728.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb4bbdea7d4befb3734b40466d2274cf1e77548\">2bb4bbd</a></td><td><code>Small fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d\">568ba75</a></td><td><code>Merge branch 'develop' into t/25134/derivation</code></td></tr></table>\n",
    "created_at": "2018-09-22T22:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383728",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb4bbdea7d4befb3734b40466d2274cf1e77548">2bb4bbd</a></td><td><code>Small fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d">568ba75</a></td><td><code>Merge branch 'develop' into t/25134/derivation</code></td></tr></table>




---

archive/issue_comments_383729.json:
```json
{
    "body": "Changed commit from **[`f4fed16`](https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f)** to **[`568ba75`](https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d)**",
    "created_at": "2018-09-22T22:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383729",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f4fed16`](https://github.com/sagemath/sagetrac-mirror/commit/f4fed16b7d5fcdcefbc070da60e1e35cdc8c418f)** to **[`568ba75`](https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d)**



---

archive/issue_comments_383730.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@tscrim](#comment:20):\n> > By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.\n\n> \n> I feel like it should work with quotients: If a map is a derivation in the ambient space, so when taking the quotient (which is functorial), you are preserving the equality. Perhaps I am over-simplifying things. I am guessing you have an explicit example in mind?\n\nWell, if `A = B (mod P)`, we can write `A = B + PQ` and taking the derivative, one gets `A' = B' + P'Q + PQ'` meaning that `A' = B' (mod (P,P'))` but in general `A' != B' (mod P)`.\n\nFor a concrete example, take `P = X^n` and observe that the derivative of a polynomial defined modulo `X^n` is a polynomial defined modulo `X^(n-1)` (basically, we shift coefficients).",
    "created_at": "2018-09-22T22:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383730",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@tscrim](#comment:20):
> > By the way, I just realized that my current code works almost only for polynomial algebras. In particular, it does not work for quotients of polynomial algebras: `d/dx` does not define a derivation over `A[x]/P(x)` but it does define a derivation from `A[x]/P(x)` to `A[x]/(P(x),P'(x))`. I don't know what is the best way to fix this: I can certainly move the method `derivation` to the classes `PolynomialRing_general`, `MPolynomialRing_base` and `FractionField_generic`) but this implies code duplication. Otherwise, I can leave it in the class `Ring` but check if `self` is an instance of those classes. I don't know if it's a good practice.

> 
> I feel like it should work with quotients: If a map is a derivation in the ambient space, so when taking the quotient (which is functorial), you are preserving the equality. Perhaps I am over-simplifying things. I am guessing you have an explicit example in mind?

Well, if `A = B (mod P)`, we can write `A = B + PQ` and taking the derivative, one gets `A' = B' + P'Q + PQ'` meaning that `A' = B' (mod (P,P'))` but in general `A' != B' (mod P)`.

For a concrete example, take `P = X^n` and observe that the derivative of a polynomial defined modulo `X^n` is a polynomial defined modulo `X^(n-1)` (basically, we shift coefficients).



---

archive/issue_comments_383731.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAh, I know where I was going wrong: taking a quotient by a fixed ideal is not functorial, you need the ideal to be in the kernel.",
    "created_at": "2018-09-22T23:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383731",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Ah, I know where I was going wrong: taking a quotient by a fixed ideal is not functorial, you need the ideal to be in the kernel.



---

archive/issue_comments_383732.json:
```json
{
    "body": "Changed commit from **[`568ba75`](https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d)** to **[`d380337`](https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4)**",
    "created_at": "2018-09-25T18:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`568ba75`](https://github.com/sagemath/sagetrac-mirror/commit/568ba75735f31d338542aafa76b5e90204cf949d)** to **[`d380337`](https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4)**



---

archive/issue_comments_383733.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4\">d380337</a></td><td><code>New version with less bugs (e.g. derivations over iterated polynomial rings now works) and more functionalities (Lie bracket, pth power, etc.)</code></td></tr></table>\n",
    "created_at": "2018-09-25T18:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383733",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4">d380337</a></td><td><code>New version with less bugs (e.g. derivations over iterated polynomial rings now works) and more functionalities (Lie bracket, pth power, etc.)</code></td></tr></table>




---

archive/issue_events_347774.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-09-25T18:29:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347774"
}
```



---

archive/issue_events_347775.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-09-25T18:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347775"
}
```



---

archive/issue_comments_383734.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI've redesigned the way derivations are handled in order to fix the bug I pointed out above (and some others) and addressed some of your remarks.\n\nI tried again to make `RingDerivation` inherit from `RingMap` but it's tricky because it implies that the parent `RingDerivationModule` must inherit from `Homset`, which now implies to define a method `homset_category` specifying in which category are the elements (i.e. the derivations). Since the derivations are not the morphims in any category (they are not stable under composition), I gave up.\n\nSomething we can implement is two methods `precompose` and `postcompose` that precompose/postcompose a derivation with a ring homomorphism (in which case, the result is again a derivation). The tricky point is that we get this way a derivation from a ring `A` to `B` where `B` is a `A`-algebra but the defining morphism might not be the coercion morphism (if it exists). So we should have support for this (which is good thing to have I think but needs some extra work).",
    "created_at": "2018-09-25T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383734",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:25" align="right">comment:25</div>

I've redesigned the way derivations are handled in order to fix the bug I pointed out above (and some others) and addressed some of your remarks.

I tried again to make `RingDerivation` inherit from `RingMap` but it's tricky because it implies that the parent `RingDerivationModule` must inherit from `Homset`, which now implies to define a method `homset_category` specifying in which category are the elements (i.e. the derivations). Since the derivations are not the morphims in any category (they are not stable under composition), I gave up.

Something we can implement is two methods `precompose` and `postcompose` that precompose/postcompose a derivation with a ring homomorphism (in which case, the result is again a derivation). The tricky point is that we get this way a derivation from a ring `A` to `B` where `B` is a `A`-algebra but the defining morphism might not be the coercion morphism (if it exists). So we should have support for this (which is good thing to have I think but needs some extra work).



---

archive/issue_comments_383735.json:
```json
{
    "body": "Changed commit from **[`d380337`](https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4)** to **[`b588b09`](https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306)**",
    "created_at": "2018-09-25T18:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383735",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d380337`](https://github.com/sagemath/sagetrac-mirror/commit/d380337fb98e26781a6099c731ba971305009bf4)** to **[`b588b09`](https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306)**



---

archive/issue_comments_383736.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306\">b588b09</a></td><td><code>Fix doctest</code></td></tr></table>\n",
    "created_at": "2018-09-25T18:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383736",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306">b588b09</a></td><td><code>Fix doctest</code></td></tr></table>




---

archive/issue_comments_383737.json:
```json
{
    "body": "Changed commit from **[`b588b09`](https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306)** to **[`77dce7b`](https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb)**",
    "created_at": "2018-09-25T23:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383737",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b588b09`](https://github.com/sagemath/sagetrac-mirror/commit/b588b092e5e499bfe312586c71578da7b4842306)** to **[`77dce7b`](https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb)**



---

archive/issue_comments_383738.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0377835aa2bbcdf732feb0fea2c6d779c83d073\">e037783</a></td><td><code>Implement comparison between derivations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b1cb68cec9be03439a9eaf52e4fef3f01acea83\">5b1cb68</a></td><td><code>Add support for algebras defined by any ring homomorphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0017f9625f4109b777948b8cf2b0c2a77ff2c31d\">0017f96</a></td><td><code>Add precompose and postcompose</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb\">77dce7b</a></td><td><code>Check that the morphisms passed to the methods precompose/postcompose are indeed ring homomorphisms</code></td></tr></table>\n",
    "created_at": "2018-09-25T23:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383738",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0377835aa2bbcdf732feb0fea2c6d779c83d073">e037783</a></td><td><code>Implement comparison between derivations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b1cb68cec9be03439a9eaf52e4fef3f01acea83">5b1cb68</a></td><td><code>Add support for algebras defined by any ring homomorphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0017f9625f4109b777948b8cf2b0c2a77ff2c31d">0017f96</a></td><td><code>Add precompose and postcompose</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb">77dce7b</a></td><td><code>Check that the morphisms passed to the methods precompose/postcompose are indeed ring homomorphisms</code></td></tr></table>




---

archive/issue_comments_383739.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@xcaruso](#comment:25):\n> Something we can implement is two methods `precompose` and `postcompose` that precompose/postcompose a derivation with a ring homomorphism (in which case, the result is again a derivation). The tricky point is that we get this way a derivation from a ring `A` to `B` where `B` is a `A`-algebra but the defining morphism might not be the coercion morphism (if it exists). So we should have support for this (which is good thing to have I think but needs some extra work).\n\nOK. I've implemented this.",
    "created_at": "2018-09-25T23:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383739",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@xcaruso](#comment:25):
> Something we can implement is two methods `precompose` and `postcompose` that precompose/postcompose a derivation with a ring homomorphism (in which case, the result is again a derivation). The tricky point is that we get this way a derivation from a ring `A` to `B` where `B` is a `A`-algebra but the defining morphism might not be the coercion morphism (if it exists). So we should have support for this (which is good thing to have I think but needs some extra work).

OK. I've implemented this.



---

archive/issue_comments_383740.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThank you for adding the Lie algebra support and your additional changes and experiments. It is a little sad the `Morphism` framework is not working here, but that is a limitation of the current implementation. This should be my last group of questions.\n\nI think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)\n\nI feel like, at least for ease of maintenance, it would be better for `basis` to return `self._basis` even if it is `_gens`. It helps keep these as separate constructs and allows us later to take a larger generator set and then reduce it to a basis.\n\nYou need to add `derivation.py` to the documentation.\n\nReplace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.\n\nIt is better to use\n\n```diff\n-self.parent().codomain()(0)\n+self.parent().codomain().zero()\n```\nsince the latter is cached and avoids coercion/conversion.\n\nI think your elements need to implement a `monomial_coefficients()` method, where the output is a `dict` whose keys are the basis indices and the values are the corresponding coefficients.\n\nI think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.\n\nEvery `__init__` should have a `TestSuite(foo).run()` call. This is usually a good way to catch bugs and implementation requirements from the category.\n\nI think a better `__hash__` test would be\n\n```\nsage: hash(M) == hash((M.domain(), M.codomain(), M.twisting_morphism())\nTrue\n```\nas it shows that the hash works and what it should be equal to.\n\n```diff\n-``n`` - an integer (default: ``0``)\n+-``n`` -- an integer (default: ``0``)\n```\n\nInstead of `self(x)`, why not do `self.element_class(self, x)`? Granted, it is not going to make a big difference in speed, but I think it is a little better because it is more direct.\n\nIn the same vein, for the arithmetic operations, it is faster to do, e.g.,\n\n```diff\n-return self.parent()(self._scalar - other._scalar)\n+return type(self)(self.parent(), self._scalar - other._scalar)\n```\n\nWhy all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?\n\nGeneral question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.",
    "created_at": "2018-09-26T01:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383740",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Thank you for adding the Lie algebra support and your additional changes and experiments. It is a little sad the `Morphism` framework is not working here, but that is a limitation of the current implementation. This should be my last group of questions.

I think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)

I feel like, at least for ease of maintenance, it would be better for `basis` to return `self._basis` even if it is `_gens`. It helps keep these as separate constructs and allows us later to take a larger generator set and then reduce it to a basis.

You need to add `derivation.py` to the documentation.

Replace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.

It is better to use

```diff
-self.parent().codomain()(0)
+self.parent().codomain().zero()
```
since the latter is cached and avoids coercion/conversion.

I think your elements need to implement a `monomial_coefficients()` method, where the output is a `dict` whose keys are the basis indices and the values are the corresponding coefficients.

I think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.

Every `__init__` should have a `TestSuite(foo).run()` call. This is usually a good way to catch bugs and implementation requirements from the category.

I think a better `__hash__` test would be

```
sage: hash(M) == hash((M.domain(), M.codomain(), M.twisting_morphism())
True
```
as it shows that the hash works and what it should be equal to.

```diff
-``n`` - an integer (default: ``0``)
+-``n`` -- an integer (default: ``0``)
```

Instead of `self(x)`, why not do `self.element_class(self, x)`? Granted, it is not going to make a big difference in speed, but I think it is a little better because it is more direct.

In the same vein, for the arithmetic operations, it is faster to do, e.g.,

```diff
-return self.parent()(self._scalar - other._scalar)
+return type(self)(self.parent(), self._scalar - other._scalar)
```

Why all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?

General question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.



---

archive/issue_comments_383741.json:
```json
{
    "body": "Changed commit from **[`77dce7b`](https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb)** to **[`c9deb7f`](https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23)**",
    "created_at": "2018-09-26T16:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383741",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`77dce7b`](https://github.com/sagemath/sagetrac-mirror/commit/77dce7bb150bd0cb51d74913a36f875726b8f8bb)** to **[`c9deb7f`](https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23)**



---

archive/issue_comments_383742.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23\">c9deb7f</a></td><td><code>Address some of Travis' comments</code></td></tr></table>\n",
    "created_at": "2018-09-26T16:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383742",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23">c9deb7f</a></td><td><code>Address some of Travis' comments</code></td></tr></table>




---

archive/issue_comments_383743.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tscrim](#comment:29):\n> I think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)\n\nWhat do you propose concretely?\nI can add a doctest demonstrating that derivations are not supported over noncommutative rings. How does it sound?\n\n> I feel like, at least for ease of maintenance, it would be better for `basis` to return `self._basis` even if it is `_gens`. It helps keep these as separate constructs and allows us later to take a larger generator set and then reduce it to a basis.\n\nSure!\n\n> You need to add `derivation.py` to the documentation.\n\nI'm unsure what I'm supposed to do exactlt? It is fine now?\n\n> Replace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.\n\nOK. So far, I've just implemented `==` and `!=`. Should I implement the other rich comparison operators as well? (But I don't know how they should behave.)\n\n> It is better to use\n> \n> ```diff\n> -self.parent().codomain()(0)\n> +self.parent().codomain().zero()\n> ```\n> since the latter is cached and avoids coercion/conversion.\n\nOK.\n\n> I think your elements need to implement a `monomial_coefficients()` method, where the output is a `dict` whose keys are the basis indices and the values are the corresponding coefficients.\n\nDone.\n\n> I think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.\n\nWell, ok for returning a `Family`... \n\n> Every `__init__` should have a `TestSuite(foo).run()` call. This is usually a good way to catch bugs and implementation requirements from the category.\n\nI'll do it.\n\n> I think a better `__hash__` test would be\n> \n> ```\n> sage: hash(M) == hash((M.domain(), M.codomain(), M.twisting_morphism())\n> True\n> ```\n> as it shows that the hash works and what it should be equal to.\n\nOK.\n\n> ```diff\n> -``n`` - an integer (default: ``0``)\n> +-``n`` -- an integer (default: ``0``)\n> ```\n\nDone.\n\n> Instead of `self(x)`, why not do `self.element_class(self, x)`? Granted, it is not going to make a big difference in speed, but I think it is a little better because it is more direct.\n\nI've changed this.\n\n> In the same vein, for the arithmetic operations, it is faster to do, e.g.,\n> \n> ```diff\n> -return self.parent()(self._scalar - other._scalar)\n> +return type(self)(self.parent(), self._scalar - other._scalar)\n> ```\n\nOK. I'll change this.\n\n> Why all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?\n\nIt seems that you must have to redefine `__hash__` in each class even if the code does not change (otherwise I got an error). I don't know why.\n\n> General question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.\n\nFor now, I'm not that concerned with speed. But on the other hand, I'm aware that my code is rather slow (especially for iteration polynomial rings). I will probably (one day) consider Cythonizing derivations but, except if you strongly disagree, it will be for another ticket.",
    "created_at": "2018-09-26T16:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383743",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tscrim](#comment:29):
> I think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)

What do you propose concretely?
I can add a doctest demonstrating that derivations are not supported over noncommutative rings. How does it sound?

> I feel like, at least for ease of maintenance, it would be better for `basis` to return `self._basis` even if it is `_gens`. It helps keep these as separate constructs and allows us later to take a larger generator set and then reduce it to a basis.

Sure!

> You need to add `derivation.py` to the documentation.

I'm unsure what I'm supposed to do exactlt? It is fine now?

> Replace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.

OK. So far, I've just implemented `==` and `!=`. Should I implement the other rich comparison operators as well? (But I don't know how they should behave.)

> It is better to use
> 
> ```diff
> -self.parent().codomain()(0)
> +self.parent().codomain().zero()
> ```
> since the latter is cached and avoids coercion/conversion.

OK.

> I think your elements need to implement a `monomial_coefficients()` method, where the output is a `dict` whose keys are the basis indices and the values are the corresponding coefficients.

Done.

> I think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.

Well, ok for returning a `Family`... 

> Every `__init__` should have a `TestSuite(foo).run()` call. This is usually a good way to catch bugs and implementation requirements from the category.

I'll do it.

> I think a better `__hash__` test would be
> 
> ```
> sage: hash(M) == hash((M.domain(), M.codomain(), M.twisting_morphism())
> True
> ```
> as it shows that the hash works and what it should be equal to.

OK.

> ```diff
> -``n`` - an integer (default: ``0``)
> +-``n`` -- an integer (default: ``0``)
> ```

Done.

> Instead of `self(x)`, why not do `self.element_class(self, x)`? Granted, it is not going to make a big difference in speed, but I think it is a little better because it is more direct.

I've changed this.

> In the same vein, for the arithmetic operations, it is faster to do, e.g.,
> 
> ```diff
> -return self.parent()(self._scalar - other._scalar)
> +return type(self)(self.parent(), self._scalar - other._scalar)
> ```

OK. I'll change this.

> Why all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?

It seems that you must have to redefine `__hash__` in each class even if the code does not change (otherwise I got an error). I don't know why.

> General question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.

For now, I'm not that concerned with speed. But on the other hand, I'm aware that my code is rather slow (especially for iteration polynomial rings). I will probably (one day) consider Cythonizing derivations but, except if you strongly disagree, it will be for another ticket.



---

archive/issue_comments_383744.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@xcaruso](#comment:31):\n> Replying to [@tscrim](#comment:29):\n> > I think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)\n\n> \n> What do you propose concretely?\n> I can add a doctest demonstrating that derivations are not supported over noncommutative rings. How does it sound?\n\nI don't think it needs a doctest since for the actual implementation you say commutative ring. I think it is sufficient to just replace \"algebra over `A`\" with \"`A`-bimodule\" in the top-level docstring.\n\nIt might be worthwhile mentioning somewhere (maybe `RingDerivationModule`, but maybe elsewhere) that when `B = A`, then the set of (twisted) derivations has a (hom-)Lie algebra structure. However, I am bias because I like Lie algebras. :)\n\n> > You need to add `derivation.py` to the documentation.\n\n> \n> I'm unsure what I'm supposed to do exactlt? It is fine now?\n\nYes, that is what was missing.\n\n> > Replace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.\n\n> \n> OK. So far, I've just implemented `==` and `!=`. Should I implement the other rich comparison operators as well? (But I don't know how they should behave.)\n\nNo, you shouldn't. In fact, that is once of the nice things about `_richcmp_` is you do not need other comparisons. You can just return a `NotImplemented`. Although, you could just do\n\n```\nfrom sage.structure.richcmp import richcmp  # put this import at the top level\nreturn richcmp(self.list(), other.list(), op)\n```\n\n> > I think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.\n\n> \n> Well, ok for returning a `Family`... \n\nThank you. This also makes it so `self.basis().cardinality()` and `self.basis().keys()` works and helps make things uniform.\n\n> > Why all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?\n\n> \n> It seems that you must have to redefine `__hash__` in each class even if the code does not change (otherwise I got an error). I don't know why.\n\nThat is very strange. I would figure it would be sufficient for some ABC. I might have to look more closely into that.\n\n> > General question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.\n\n> \n> For now, I'm not that concerned with speed. But on the other hand, I'm aware that my code is rather slow (especially for iteration polynomial rings). I will probably (one day) consider Cythonizing derivations but, except if you strongly disagree, it will be for another ticket.\n\nAnother ticket is fine. It is slightly easier to split the element class into a Cython file here than on a separate ticket, but only slightly. I am fine with whatever you decide.",
    "created_at": "2018-09-26T23:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383744",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@xcaruso](#comment:31):
> Replying to [@tscrim](#comment:29):
> > I think there is something we should be careful about in the module doc. If `A` is not a commutative ring, then `B` needs to be an `A`-bimodule (not necessarily an algebra) to be a derivation. However, there is a left and a right action of `A` on `B` used in the definition. (With the code itself, this is not a problem because you enforce `A` to be commutative.)

> 
> What do you propose concretely?
> I can add a doctest demonstrating that derivations are not supported over noncommutative rings. How does it sound?

I don't think it needs a doctest since for the actual implementation you say commutative ring. I think it is sufficient to just replace "algebra over `A`" with "`A`-bimodule" in the top-level docstring.

It might be worthwhile mentioning somewhere (maybe `RingDerivationModule`, but maybe elsewhere) that when `B = A`, then the set of (twisted) derivations has a (hom-)Lie algebra structure. However, I am bias because I like Lie algebras. :)

> > You need to add `derivation.py` to the documentation.

> 
> I'm unsure what I'm supposed to do exactlt? It is fine now?

Yes, that is what was missing.

> > Replace `_cmp_` with `_richcmp_` as this will make it Python3 compatible.

> 
> OK. So far, I've just implemented `==` and `!=`. Should I implement the other rich comparison operators as well? (But I don't know how they should behave.)

No, you shouldn't. In fact, that is once of the nice things about `_richcmp_` is you do not need other comparisons. You can just return a `NotImplemented`. Although, you could just do

```
from sage.structure.richcmp import richcmp  # put this import at the top level
return richcmp(self.list(), other.list(), op)
```

> > I think `(dual_)basis` should return a `Family` (or a `Sequence`, but this has a more limited feature set) to be consistent with other parts of Sage in `ModulesWithBasis`.

> 
> Well, ok for returning a `Family`... 

Thank you. This also makes it so `self.basis().cardinality()` and `self.basis().keys()` works and helps make things uniform.

> > Why all the same definition of `__hash__`? You are not doing a new `__eq__`/`__richcmp__`, so there should not be a need to do this. Why not have this be in the ABC and override when you need to?

> 
> It seems that you must have to redefine `__hash__` in each class even if the code does not change (otherwise I got an error). I don't know why.

That is very strange. I would figure it would be sufficient for some ABC. I might have to look more closely into that.

> > General question, how much speed do you think you need with these elements? It might be worthwhile to consider Cythonizing the elements.

> 
> For now, I'm not that concerned with speed. But on the other hand, I'm aware that my code is rather slow (especially for iteration polynomial rings). I will probably (one day) consider Cythonizing derivations but, except if you strongly disagree, it will be for another ticket.

Another ticket is fine. It is slightly easier to split the element class into a Cython file here than on a separate ticket, but only slightly. I am fine with whatever you decide.



---

archive/issue_comments_383745.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963\">369db6a</a></td><td><code>Address Travis' review</code></td></tr></table>\n",
    "created_at": "2018-09-27T13:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383745",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963">369db6a</a></td><td><code>Address Travis' review</code></td></tr></table>




---

archive/issue_comments_383746.json:
```json
{
    "body": "Changed commit from **[`c9deb7f`](https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23)** to **[`369db6a`](https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963)**",
    "created_at": "2018-09-27T13:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383746",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9deb7f`](https://github.com/sagemath/sagetrac-mirror/commit/c9deb7f95efb4d87907c27b738027be838578f23)** to **[`369db6a`](https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963)**



---

archive/issue_comments_383747.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThere is still a bug with pickling but it's not because of this ticket.\n\nI've opened up a new ticket (#26354) reporting the bug.",
    "created_at": "2018-09-27T13:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383747",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:34" align="right">comment:34</div>

There is still a bug with pickling but it's not because of this ticket.

I've opened up a new ticket (#26354) reporting the bug.



---

archive/issue_comments_383748.json:
```json
{
    "body": "Dependencies: **#26354**",
    "created_at": "2018-09-27T13:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383748",
    "user": "https://github.com/xcaruso"
}
```

Dependencies: **#26354**



---

archive/issue_comments_383749.json:
```json
{
    "body": "Changed commit from **[`369db6a`](https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963)** to **[`267f74d`](https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522)**",
    "created_at": "2018-09-27T22:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383749",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`369db6a`](https://github.com/sagemath/sagetrac-mirror/commit/369db6af5d5d939f10f7b567715753a86ba87963)** to **[`267f74d`](https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522)**



---

archive/issue_comments_383750.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94f6985f60c352044b4d99bf8fc15818c17c7281\">94f6985</a></td><td><code>Set immutable in unpickling ring morphisms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4fffe277a5df5d9ce3f4811379ef31cb297cb4f\">c4fffe2</a></td><td><code>Merge branch 't/26354/pickling_morphisms_is_broken' into t/25134/derivation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522\">267f74d</a></td><td><code>Implement `_richcmp_` for twisted derivations</code></td></tr></table>\n",
    "created_at": "2018-09-27T22:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383750",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94f6985f60c352044b4d99bf8fc15818c17c7281">94f6985</a></td><td><code>Set immutable in unpickling ring morphisms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4fffe277a5df5d9ce3f4811379ef31cb297cb4f">c4fffe2</a></td><td><code>Merge branch 't/26354/pickling_morphisms_is_broken' into t/25134/derivation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522">267f74d</a></td><td><code>Implement `_richcmp_` for twisted derivations</code></td></tr></table>




---

archive/issue_comments_383751.json:
```json
{
    "body": "Changed branch from **[u/caruso/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/derivation)** to **[u/tscrim/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/polynomial_derivations-25134)**",
    "created_at": "2018-09-27T23:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383751",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/caruso/derivation](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/derivation)** to **[u/tscrim/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/polynomial_derivations-25134)**



---

archive/issue_comments_383752.json:
```json
{
    "body": "Changed commit from **[`267f74d`](https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522)** to **[`f0878eb`](https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c)**",
    "created_at": "2018-09-27T23:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383752",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`267f74d`](https://github.com/sagemath/sagetrac-mirror/commit/267f74db4e8a9dafa32dba059a74302a5b2c1522)** to **[`f0878eb`](https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c)**



---

archive/issue_comments_383753.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThank you for all the changes. I made a few reviewer changes to fix the docbuild error, some broken doc links, bad formatting, and other small adjustments. I also did a bunch of PEP8 consistency changes.\n\nIf my changes are good with you, then positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c\">f0878eb</a></td><td><code>Fixing some docstrings and some PEP8.</code></td></tr></table>\n",
    "created_at": "2018-09-27T23:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383753",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Thank you for all the changes. I made a few reviewer changes to fix the docbuild error, some broken doc links, bad formatting, and other small adjustments. I also did a bunch of PEP8 consistency changes.

If my changes are good with you, then positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c">f0878eb</a></td><td><code>Fixing some docstrings and some PEP8.</code></td></tr></table>




---

archive/issue_comments_383754.json:
```json
{
    "body": "Changed branch from **[u/tscrim/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/polynomial_derivations-25134)** to **[u/caruso/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/polynomial_derivations-25134)**",
    "created_at": "2018-09-28T07:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383754",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/tscrim/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/polynomial_derivations-25134)** to **[u/caruso/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/polynomial_derivations-25134)**



---

archive/issue_comments_383755.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI've fixed a few typos in the doctest.\n\nI can give a positive review now but maybe it's better to wait for #26354. What's your opinion?",
    "created_at": "2018-09-28T07:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383755",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:39" align="right">comment:39</div>

I've fixed a few typos in the doctest.

I can give a positive review now but maybe it's better to wait for #26354. What's your opinion?



---

archive/issue_comments_383756.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7\">dbe85c5</a></td><td><code>Typos</code></td></tr></table>\n",
    "created_at": "2018-09-28T07:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383756",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7">dbe85c5</a></td><td><code>Typos</code></td></tr></table>




---

archive/issue_comments_383757.json:
```json
{
    "body": "Changed commit from **[`f0878eb`](https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c)** to **[`dbe85c5`](https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7)**",
    "created_at": "2018-09-28T07:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383757",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f0878eb`](https://github.com/sagemath/sagetrac-mirror/commit/f0878ebfc46ce776f011ec4d9b059be8bb05215c)** to **[`dbe85c5`](https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7)**



---

archive/issue_comments_383758.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIt's a positive review, but it won't get merged until the dependency is merged.",
    "created_at": "2018-09-28T13:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383758",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">comment:41</div>

It's a positive review, but it won't get merged until the dependency is merged.



---

archive/issue_events_347776.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-28T13:40:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347776"
}
```



---

archive/issue_events_347777.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-28T13:40:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347777"
}
```



---

archive/issue_comments_383759.json:
```json
{
    "body": "Changed commit from **[`dbe85c5`](https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7)** to **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**",
    "created_at": "2018-10-01T10:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383759",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dbe85c5`](https://github.com/sagemath/sagetrac-mirror/commit/dbe85c5ad7d56bf63c9d26b48669f02aa6b71ce7)** to **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**



---

archive/issue_events_347778.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-10-01T10:47:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347778"
}
```



---

archive/issue_events_347779.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-10-01T10:47:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347779"
}
```



---

archive/issue_comments_383760.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dee878eed8fea9505e8c2ecfb907ebf6cbb78fb1\">dee878e</a></td><td><code>Revert \"Set immutable in unpickling ring morphisms\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2931b6b109cd7fb492945c93e90be7cd68a30bc\">e2931b6</a></td><td><code>Fix pickling for PolynomialSequence_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea91f7b6254f8791b4f0b488e32c002af7e99a0\">1ea91f7</a></td><td><code>Add a doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c\">c8fee99</a></td><td><code>Merge branch 't/26354/pickling_morphisms_is_broken' into t/25134/polynomial_derivations-25134</code></td></tr></table>\n",
    "created_at": "2018-10-01T10:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383760",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dee878eed8fea9505e8c2ecfb907ebf6cbb78fb1">dee878e</a></td><td><code>Revert "Set immutable in unpickling ring morphisms"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2931b6b109cd7fb492945c93e90be7cd68a30bc">e2931b6</a></td><td><code>Fix pickling for PolynomialSequence_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea91f7b6254f8791b4f0b488e32c002af7e99a0">1ea91f7</a></td><td><code>Add a doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c">c8fee99</a></td><td><code>Merge branch 't/26354/pickling_morphisms_is_broken' into t/25134/polynomial_derivations-25134</code></td></tr></table>




---

archive/issue_comments_383761.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI just merged with #26354. Actually, I'm not sure it was needed but it's probably safer like this.",
    "created_at": "2018-10-01T10:48:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383761",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:43" align="right">comment:43</div>

I just merged with #26354. Actually, I'm not sure it was needed but it's probably safer like this.



---

archive/issue_events_347780.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-10-01T10:48:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347780"
}
```



---

archive/issue_events_347781.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-10-01T10:48:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347781"
}
```



---

archive/issue_events_347782.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-03T21:56:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347782"
}
```



---

archive/issue_events_347783.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "46aee00b2a286c2d8692ee98b20cc3d165fdb2e2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-10-03T21:56:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25134#event-347783"
}
```



---

archive/issue_comments_383762.json:
```json
{
    "body": "Changed branch from **[u/caruso/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/polynomial_derivations-25134)** to **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**",
    "created_at": "2018-10-03T21:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25134#issuecomment-383762",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/caruso/polynomial_derivations-25134](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/polynomial_derivations-25134)** to **[`c8fee99`](https://github.com/sagemath/sagetrac-mirror/commit/c8fee99e5ac2c4148b885cb33367d4b64da7822c)**
