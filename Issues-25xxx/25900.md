# Issue 25900: Package libffi

archive/issues_025663.json:
```json
{
    "body": "This is required for compiling Python 3.7\n\n**Tarball**: ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz\n\n**Assignee:** @embray\n\n**CC:**  @embray\n\n**Keywords:** spkg-configure\n\n**Branch:** [e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton, Erik Bray\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/25900\n\n",
    "closed_at": "2019-01-23T14:18:12Z",
    "created_at": "2018-07-22T21:03:27Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Package libffi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25900",
    "user": "https://github.com/jdemeyer"
}
```
This is required for compiling Python 3.7

**Tarball**: ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz

**Assignee:** @embray

**CC:**  @embray

**Keywords:** spkg-configure

**Branch:** [e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)

**Reviewer:** Frédéric Chapoton, Erik Bray

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/25900





---

archive/issue_comments_402384.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This is required for compiling Python 3.7\n+\n+**Tarball**: ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz\n``````\n",
    "created_at": "2018-07-22T21:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402384",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This is required for compiling Python 3.7
+
+**Tarball**: ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz
``````




---

archive/issue_comments_402385.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/package_libffi](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/package_libffi)",
    "created_at": "2018-07-22T21:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402385",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/package_libffi](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/package_libffi)



---

archive/issue_comments_402386.json:
```json
{
    "body": "**Commit:** [8f6d8304420e0894d5e8221238adcb09ab7edbed](https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed)",
    "created_at": "2018-07-22T21:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402386",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [8f6d8304420e0894d5e8221238adcb09ab7edbed](https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed)



---

archive/issue_events_234018.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-22T21:33:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234018"
}
```



---

archive/issue_comments_402387.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed\">8f6d830</a></td><td><code>Add libffi package</code></td></tr></table>\n",
    "created_at": "2018-07-22T21:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402387",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed">8f6d830</a></td><td><code>Add libffi package</code></td></tr></table>




---

archive/issue_comments_402388.json:
```json
{
    "body": "<a id='comment:4'></a>\nok, should be good. Tested on my machine with py2 (and py3 also). Let's ask the buildbots.",
    "created_at": "2018-07-24T18:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402388",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok, should be good. Tested on my machine with py2 (and py3 also). Let's ask the buildbots.



---

archive/issue_events_234019.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-24T18:19:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234019"
}
```



---

archive/issue_events_234020.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-24T18:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234020"
}
```



---

archive/issue_comments_402389.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2018-07-24T18:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402389",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_402390.json:
```json
{
    "body": "<a id='comment:5'></a>\nAfaik libffi has been a de facto dependency of ecl (and, therefore, Sage) for a long time. We could just document said dependency...\n\nOn a side note, the cygwin patchbot is unhappy with it",
    "created_at": "2018-08-05T10:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402390",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
Afaik libffi has been a de facto dependency of ecl (and, therefore, Sage) for a long time. We could just document said dependency...

On a side note, the cygwin patchbot is unhappy with it



---

archive/issue_comments_402391.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe only problem with the patchbot is that it was unable to find the tarball.  Normally, with tickets that add new packages, it's supposed to be able to parse out the path to the source tarball from the ticket description, but that seems to have failed in this case.  I'll look into why.\n\nAFAIK libffi works fine on Cygwin--I have used it there plenty myself (and have even fixed some bugs in it :)",
    "created_at": "2018-08-06T14:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402391",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
The only problem with the patchbot is that it was unable to find the tarball.  Normally, with tickets that add new packages, it's supposed to be able to parse out the path to the source tarball from the ticket description, but that seems to have failed in this case.  I'll look into why.

AFAIK libffi works fine on Cygwin--I have used it there plenty myself (and have even fixed some bugs in it :)



---

archive/issue_comments_402392.json:
```json
{
    "body": "<a id='comment:7'></a>\nLet me test on Cygwin though before setting this to positive review.",
    "created_at": "2018-08-06T14:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402392",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Let me test on Cygwin though before setting this to positive review.



---

archive/issue_events_234021.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-06T14:35:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234021"
}
```



---

archive/issue_events_234022.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-06T14:35:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234022"
}
```



---

archive/issue_comments_402393.json:
```json
{
    "body": "**Assignee:** @embray",
    "created_at": "2018-08-06T14:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402393",
    "user": "https://github.com/embray"
}
```

**Assignee:** @embray



---

archive/issue_comments_402394.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vbraun](#comment%3A5):\n> Afaik libffi has been a de facto dependency of ecl (and, therefore, Sage) for a long time. We could just document said dependency...\n\n\nI'm fine with adding an spkg for it.  I think there should be one as some libffi versions *do* have bugs that could theoretically affect us.\n\nBut I do think there should be a configure-time check for it to avoid needlessly installing the spkg.  I would like to start adding this for all new packages.  For now it could go directly in `configure.ac`, but if *some* version of #24919 ever gets merged then the check might be moved.",
    "created_at": "2018-08-06T14:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402394",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Replying to [vbraun](#comment%3A5):
> Afaik libffi has been a de facto dependency of ecl (and, therefore, Sage) for a long time. We could just document said dependency...


I'm fine with adding an spkg for it.  I think there should be one as some libffi versions *do* have bugs that could theoretically affect us.

But I do think there should be a configure-time check for it to avoid needlessly installing the spkg.  I would like to start adding this for all new packages.  For now it could go directly in `configure.ac`, but if *some* version of #24919 ever gets merged then the check might be moved.



---

archive/issue_comments_402395.json:
```json
{
    "body": "<a id='comment:10'></a>\nIf ECL really required libffi, I'm sure that we would have noticed by now. For example, I have a system where Python 3.7 failed to build because libffi wasn't installed. But this problem did not occur for ECL.\n\nErik: this ticket had positive_review and it's a dependency for Python 3.7. So it's fine if you want to add the logic to check for a system-wide install, but please don't stall this ticket.",
    "created_at": "2018-08-06T14:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402395",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
If ECL really required libffi, I'm sure that we would have noticed by now. For example, I have a system where Python 3.7 failed to build because libffi wasn't installed. But this problem did not occur for ECL.

Erik: this ticket had positive_review and it's a dependency for Python 3.7. So it's fine if you want to add the logic to check for a system-wide install, but please don't stall this ticket.



---

archive/issue_comments_402396.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm only stalling it to check that it actually works on Cygwin.  I'm happy to add the system check either now, or as a separate ticket.  I'd like to discuss making this required for adding any new spkgs, though since we haven't actually done that yet I won't hold this up over that.",
    "created_at": "2018-08-06T14:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402396",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
I'm only stalling it to check that it actually works on Cygwin.  I'm happy to add the system check either now, or as a separate ticket.  I'd like to discuss making this required for adding any new spkgs, though since we haven't actually done that yet I won't hold this up over that.



---

archive/issue_comments_402397.json:
```json
{
    "body": "<a id='comment:12'></a>\nAny news?",
    "created_at": "2018-08-10T18:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402397",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Any news?



---

archive/issue_comments_402398.json:
```json
{
    "body": "<a id='comment:13'></a>\nI'll try it today or tomorrow--soon as I'm done testing 8.4.beta1 on my Windows build.",
    "created_at": "2018-08-16T13:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402398",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
I'll try it today or tomorrow--soon as I'm done testing 8.4.beta1 on my Windows build.



---

archive/issue_comments_402399.json:
```json
{
    "body": "<a id='comment:14'></a>\nOdd that libffi puts its headers in `lib/libffi-3.2.1/include/`.  I found this to be the case on Cygwin and on Linux.  I guess it's not really a problem since `pkg-config` reports that location correctly, and I bet there's probably a good reason for it.  Just...odd.",
    "created_at": "2018-08-17T10:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402399",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
Odd that libffi puts its headers in `lib/libffi-3.2.1/include/`.  I found this to be the case on Cygwin and on Linux.  I guess it's not really a problem since `pkg-config` reports that location correctly, and I bet there's probably a good reason for it.  Just...odd.



---

archive/issue_comments_402400.json:
```json
{
    "body": "<a id='comment:15'></a>\nCould you add something like:\n\n```diff\ndiff --git a/configure.ac b/configure.ac\nindex 5a830e5..a31b53b 100644\n--- a/configure.ac\n+++ b/configure.ac\n@@ -435,6 +435,12 @@ AC_CACHE_CHECK([for curl 7.22], [ac_cv_path_CURL], [\n     [need_to_install_curl=yes; ac_cv_path_CURL=no])])\n\n\n+# Only install libffi if needed; if found, we also check for its headers\n+# below\n+need_to_install_libffi=no\n+AC_SEARCH_LIBS([ffi_call], [ffi], [], [need_to_install_libffi=yes])\n+\n+\n ###############################################################################\n # Check header files\n ###############################################################################\n@@ -446,6 +452,12 @@ then\n     AC_CHECK_HEADER([curl/curl.h], [], [need_to_install_curl=yes])\n fi\n\n+# If libffi is installed, we need to check for the ffi.h header file too.\n+if test $need_to_install_libffi = no;\n+then\n+    AC_CHECK_HEADERS([ffi.h ffi/ffi.h], [break], [need_to_install_libffi=yes])\n+fi\n+\n # complex.h is one that might not exist on older systems.\n AC_LANG(C++)\n AC_CHECK_HEADER([complex.h],[],[\n```\n?\n\nOtherwise, seems fine to me.  I haven't tested this against Python 3.7 itself yet, but that has other build problems on Cygwin I need to work on.  If any further libffi-related problems come up in the context of building Python we can deal with it there.",
    "created_at": "2018-08-17T11:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402400",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
Could you add something like:

```diff
diff --git a/configure.ac b/configure.ac
index 5a830e5..a31b53b 100644
--- a/configure.ac
+++ b/configure.ac
@@ -435,6 +435,12 @@ AC_CACHE_CHECK([for curl 7.22], [ac_cv_path_CURL], [
     [need_to_install_curl=yes; ac_cv_path_CURL=no])])


+# Only install libffi if needed; if found, we also check for its headers
+# below
+need_to_install_libffi=no
+AC_SEARCH_LIBS([ffi_call], [ffi], [], [need_to_install_libffi=yes])
+
+
 ###############################################################################
 # Check header files
 ###############################################################################
@@ -446,6 +452,12 @@ then
     AC_CHECK_HEADER([curl/curl.h], [], [need_to_install_curl=yes])
 fi

+# If libffi is installed, we need to check for the ffi.h header file too.
+if test $need_to_install_libffi = no;
+then
+    AC_CHECK_HEADERS([ffi.h ffi/ffi.h], [break], [need_to_install_libffi=yes])
+fi
+
 # complex.h is one that might not exist on older systems.
 AC_LANG(C++)
 AC_CHECK_HEADER([complex.h],[],[
```
?

Otherwise, seems fine to me.  I haven't tested this against Python 3.7 itself yet, but that has other build problems on Cygwin I need to work on.  If any further libffi-related problems come up in the context of building Python we can deal with it there.



---

archive/issue_events_234023.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:40:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234023"
}
```



---

archive/issue_events_234024.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:40:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234024"
}
```



---

archive/issue_comments_402401.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f\">faad2c9</a></td><td><code>Add libffi package</code></td></tr></table>\n",
    "created_at": "2018-12-18T14:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f">faad2c9</a></td><td><code>Add libffi package</code></td></tr></table>




---

archive/issue_comments_402402.json:
```json
{
    "body": "**Changing commit** from \"[8f6d8304420e0894d5e8221238adcb09ab7edbed](https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed)\" to \"[faad2c9730f11809c6ce052f41d7a74a7df1d11f](https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f)\".",
    "created_at": "2018-12-18T14:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f6d8304420e0894d5e8221238adcb09ab7edbed](https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed)" to "[faad2c9730f11809c6ce052f41d7a74a7df1d11f](https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f)".



---

archive/issue_events_234025.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-18T14:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234025"
}
```



---

archive/issue_events_234026.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-18T14:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234026"
}
```



---

archive/issue_comments_402403.json:
```json
{
    "body": "<a id='comment:18'></a>\nErik, I added the new-style configure check. Does this look correct to you?",
    "created_at": "2018-12-18T14:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402403",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Erik, I added the new-style configure check. Does this look correct to you?



---

archive/issue_comments_402404.json:
```json
{
    "body": "**Changing commit** from \"[faad2c9730f11809c6ce052f41d7a74a7df1d11f](https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f)\" to \"[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)\".",
    "created_at": "2018-12-18T14:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[faad2c9730f11809c6ce052f41d7a74a7df1d11f](https://github.com/sagemath/sagetrac-mirror/commit/faad2c9730f11809c6ce052f41d7a74a7df1d11f)" to "[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)".



---

archive/issue_comments_402405.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493\">e45cf27</a></td><td><code>Add libffi package</code></td></tr></table>\n",
    "created_at": "2018-12-18T14:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493">e45cf27</a></td><td><code>Add libffi package</code></td></tr></table>




---

archive/issue_events_234027.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:09:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234027"
}
```



---

archive/issue_events_234028.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:09:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234028"
}
```



---

archive/issue_comments_402406.json:
```json
{
    "body": "<a id='comment:20'></a>\nRetargeting some of my tickets.",
    "created_at": "2018-12-28T14:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402406",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>
Retargeting some of my tickets.



---

archive/issue_events_234029.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-07T15:21:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234029"
}
```



---

archive/issue_events_234030.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-07T15:21:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234030"
}
```



---

archive/issue_comments_402407.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Erik, I added the new-style configure check. Does this look correct to you?\n\n\nSorry, I didn't see your update before.  I haven't tested, but it looks good to me in principle.  If we need to make the check any more specific we can do that later (e.g. there could be bugs with older libffi versions, but I'm not worried about that unless it is found to actually affect someone's system).",
    "created_at": "2019-01-07T15:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402407",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Replying to [jdemeyer](#comment%3A18):
> Erik, I added the new-style configure check. Does this look correct to you?


Sorry, I didn't see your update before.  I haven't tested, but it looks good to me in principle.  If we need to make the check any more specific we can do that later (e.g. there could be bugs with older libffi versions, but I'm not worried about that unless it is found to actually affect someone's system).



---

archive/issue_comments_402408.json:
```json
{
    "body": "**Changing reviewer** from \"Fr\u00e9d\u00e9ric Chapoton\" to \"Fr\u00e9d\u00e9ric Chapoton, Erik Bray\".",
    "created_at": "2019-01-07T15:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402408",
    "user": "https://github.com/embray"
}
```

**Changing reviewer** from "Frédéric Chapoton" to "Frédéric Chapoton, Erik Bray".



---

archive/issue_comments_402409.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/package_libffi](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/package_libffi)\" to \"[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)\".",
    "created_at": "2019-01-23T14:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402409",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/package_libffi](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/package_libffi)" to "[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)".



---

archive/issue_events_234031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-23T14:18:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234031"
}
```



---

archive/issue_events_234032.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-23T14:18:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25900#event-234032"
}
```



---

archive/issue_comments_402410.json:
```json
{
    "body": "<a id='comment:23'></a>\nsome issue arise from this ticket both on gentoo and ubuntu:\n\n```\ncp: cannot overwrite non-directory '/64bitdev/storage/sage-git_develop/sage/local/./lib64' with directory '/64bitdev/storage/sage-git_develop/sage/local/var/tmp/sage/build/libffi-3.2.1/inst/64bitdev/storage/sage-git_develop/sage/local/./lib64'\n```",
    "created_at": "2019-01-24T08:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402410",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>
some issue arise from this ticket both on gentoo and ubuntu:

```
cp: cannot overwrite non-directory '/64bitdev/storage/sage-git_develop/sage/local/./lib64' with directory '/64bitdev/storage/sage-git_develop/sage/local/var/tmp/sage/build/libffi-3.2.1/inst/64bitdev/storage/sage-git_develop/sage/local/./lib64'
```



---

archive/issue_comments_402411.json:
```json
{
    "body": "**Changing commit** from \"[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)\" to \"\".",
    "created_at": "2019-01-24T08:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402411",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[e45cf27f5d21275c0fd69296a51e97ffdf543493](https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493)" to "".



---

archive/issue_comments_402412.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"spkg-configure\".",
    "created_at": "2019-02-20T17:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25900#issuecomment-402412",
    "user": "https://github.com/embray"
}
```

**Changing keywords** from "" to "spkg-configure".
