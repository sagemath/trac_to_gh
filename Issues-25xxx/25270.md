# Issue 25270: Add option to only run short doctests

archive/issues_025033.json:
```json
{
    "assignees": [],
    "body": "The attached picture shows how many modules (horizontal) you can run in how many CPU minutes (vertical). So, for example, in 40 CPU minutes (i.e., 10 wall minutes on my laptop) I can run all the doctests in 80% of all Sage modules. In 4 CPU minutes, I can doctest 50% of all Sage modules.\n\n[This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)\n\nThis ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).\n\nThis gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.\n\nHere is an example:\n\n```\n> sage -tp --short 5 src/sage/rings/padics/*.py\nDoctesting 19 files using 4 threads.\nsage -t src/sage/rings/padics/padic_base_leaves.py\n    [14% of tests run, 1.31 s]\nsage -t src/sage/rings/padics/factory.py\n    [29% of tests run, 1.31 s]\nsage -t src/sage/rings/padics/lattice_precision.py\n    [43% of tests run, 1.00 s]\nsage -t src/sage/rings/padics/padic_valuation.py\n    [4% of tests run, 2.80 s]\nsage -t src/sage/rings/padics/padic_base_generic.py\n    [95% of tests run, 1.72 s]\nsage -t src/sage/rings/padics/local_generic.py\n    [1% of tests run, 0.73 s]\nsage -t src/sage/rings/padics/padic_extension_generic.py\n    [5% of tests run, 0.77 s]\nsage -t src/sage/rings/padics/padic_lattice_element.py\n    [2% of tests run, 0.78 s]\nsage -t src/sage/rings/padics/generic_nodes.py\n    [1% of tests run, 0.75 s]\nsage -t src/sage/rings/padics/padic_generic.py\n    [1% of tests run, 0.73 s]\nsage -t src/sage/rings/padics/unramified_extension_generic.py\n    [2% of tests run, 0.43 s]\nsage -t src/sage/rings/padics/tutorial.py\n    [4% of tests run, 0.70 s]\nsage -t src/sage/rings/padics/tests.py\n    [0% of tests run, 0.00 s]\nsage -t src/sage/rings/padics/eisenstein_extension_generic.py\n    [7% of tests run, 0.80 s]\nsage -t src/sage/rings/padics/misc.py\n    [6% of tests run, 0.78 s]\nsage -t src/sage/rings/padics/precision_error.py\n    [0 tests, 0.00 s]\nsage -t src/sage/rings/padics/all.py\n    [0 tests, 0.00 s]\nsage -t src/sage/rings/padics/__init__.py\n    [0 tests, 0.00 s]\nsage -t src/sage/rings/padics/padic_extension_leaves.py\n    [10% of tests run, 6.54 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 6.6 seconds\n    cpu time: 20.0 seconds\n    cumulative wall time: 21.1 seconds\n```\n\nCC:  @embray @nthiery @roed314\n\nBranch: **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**\n\nWork Issues: **is the patchbot happy?**\n\nReviewer: **Erik Bray**\n\nAuthor: **Julian R\u00fcth**\n\nComponent: **doctest framework**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25270_\n\n",
    "closed_at": "2018-10-20T19:02:31Z",
    "created_at": "2018-04-30T23:49:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add option to only run short doctests",
    "type": "issue",
    "updated_at": "2018-10-28T14:43:14Z",
    "url": "https://github.com/sagemath/sage/issues/25270",
    "user": "https://github.com/saraedum"
}
```
The attached picture shows how many modules (horizontal) you can run in how many CPU minutes (vertical). So, for example, in 40 CPU minutes (i.e., 10 wall minutes on my laptop) I can run all the doctests in 80% of all Sage modules. In 4 CPU minutes, I can doctest 50% of all Sage modules.

[This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)

This ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).

This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.

Here is an example:

```
> sage -tp --short 5 src/sage/rings/padics/*.py
Doctesting 19 files using 4 threads.
sage -t src/sage/rings/padics/padic_base_leaves.py
    [14% of tests run, 1.31 s]
sage -t src/sage/rings/padics/factory.py
    [29% of tests run, 1.31 s]
sage -t src/sage/rings/padics/lattice_precision.py
    [43% of tests run, 1.00 s]
sage -t src/sage/rings/padics/padic_valuation.py
    [4% of tests run, 2.80 s]
sage -t src/sage/rings/padics/padic_base_generic.py
    [95% of tests run, 1.72 s]
sage -t src/sage/rings/padics/local_generic.py
    [1% of tests run, 0.73 s]
sage -t src/sage/rings/padics/padic_extension_generic.py
    [5% of tests run, 0.77 s]
sage -t src/sage/rings/padics/padic_lattice_element.py
    [2% of tests run, 0.78 s]
sage -t src/sage/rings/padics/generic_nodes.py
    [1% of tests run, 0.75 s]
sage -t src/sage/rings/padics/padic_generic.py
    [1% of tests run, 0.73 s]
sage -t src/sage/rings/padics/unramified_extension_generic.py
    [2% of tests run, 0.43 s]
sage -t src/sage/rings/padics/tutorial.py
    [4% of tests run, 0.70 s]
sage -t src/sage/rings/padics/tests.py
    [0% of tests run, 0.00 s]
sage -t src/sage/rings/padics/eisenstein_extension_generic.py
    [7% of tests run, 0.80 s]
sage -t src/sage/rings/padics/misc.py
    [6% of tests run, 0.78 s]
sage -t src/sage/rings/padics/precision_error.py
    [0 tests, 0.00 s]
sage -t src/sage/rings/padics/all.py
    [0 tests, 0.00 s]
sage -t src/sage/rings/padics/__init__.py
    [0 tests, 0.00 s]
sage -t src/sage/rings/padics/padic_extension_leaves.py
    [10% of tests run, 6.54 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 6.6 seconds
    cpu time: 20.0 seconds
    cumulative wall time: 21.1 seconds
```

CC:  @embray @nthiery @roed314

Branch: **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**

Work Issues: **is the patchbot happy?**

Reviewer: **Erik Bray**

Author: **Julian RÃ¼th**

Component: **doctest framework**

_Issue created by migration from https://trac.sagemath.org/ticket/25270_





---

archive/issue_events_349681.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T23:49:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349681"
}
```



---

archive/issue_events_349682.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T23:49:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349682"
}
```



---

archive/issue_events_349683.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T23:49:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349683"
}
```



---

archive/issue_events_349684.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T23:49:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349684"
}
```



---

archive/issue_comments_386407.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[bar.png](https://github.com/sagemath/sage/files/ticket25270/bar.png)**",
    "created_at": "2018-04-30T23:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386407",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[bar.png](https://github.com/sagemath/sage/files/ticket25270/bar.png)**



---

archive/issue_comments_386408.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n The attached picture shows how many modules (horizontal) you can run in how many CPU minutes (vertical). So, for example, in 40 CPU minutes (i.e., 10 wall minutes on my laptop) I can run all the doctests in 80% of all Sage modules. In 4 CPU minutes, I can doctest 50% of all Sage modules.\n+\n+[This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)\n \n It would be nice to add a `--limit=40:00` switch (or similar) to run doctests in each module for at most the corresponding fraction of time (I still have to try whether it's better to do the accounting by module or by line of doctest.)\n \n``````\n",
    "created_at": "2018-04-30T23:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386408",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 The attached picture shows how many modules (horizontal) you can run in how many CPU minutes (vertical). So, for example, in 40 CPU minutes (i.e., 10 wall minutes on my laptop) I can run all the doctests in 80% of all Sage modules. In 4 CPU minutes, I can doctest 50% of all Sage modules.
+
+[This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)
 
 It would be nice to add a `--limit=40:00` switch (or similar) to run doctests in each module for at most the corresponding fraction of time (I still have to try whether it's better to do the accounting by module or by line of doctest.)
 
``````




---

archive/issue_events_349685.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T23:51:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "title_is": "Add option to only run short doctests",
    "title_was": "Add option to only run --short doctests",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349685"
}
```



---

archive/issue_comments_386409.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI have a first prototype now. If I set it to try to finish in 30s walltime and run on `src/sage/rings/padics`, it does skip tests in only 4 files (here reported as failures at the moment):\n\n```\nsage -t ../rings/padics/padic_base_leaves.py  # 125 doctests failed\nsage -t ../rings/padics/padic_lattice_element.py  # 303 doctests failed\nsage -t ../rings/padics/padic_extension_leaves.py  # 72 doctests failed\nsage -t ../rings/padics/padic_generic_element.pyx  # 172 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 35.8 seconds\n```\n\nAs an extreme example, if let it test everything in `src/` in two minutes, it manages to finish within four minutes (because it does not actually abort any doctest line once it started) and runs 314607 docstring lines and skips 361692, so it skips roughly 50%.",
    "created_at": "2018-05-01T01:58:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386409",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">comment:4</div>

I have a first prototype now. If I set it to try to finish in 30s walltime and run on `src/sage/rings/padics`, it does skip tests in only 4 files (here reported as failures at the moment):

```
sage -t ../rings/padics/padic_base_leaves.py  # 125 doctests failed
sage -t ../rings/padics/padic_lattice_element.py  # 303 doctests failed
sage -t ../rings/padics/padic_extension_leaves.py  # 72 doctests failed
sage -t ../rings/padics/padic_generic_element.pyx  # 172 doctests failed
----------------------------------------------------------------------
Total time for all tests: 35.8 seconds
```

As an extreme example, if let it test everything in `src/` in two minutes, it manages to finish within four minutes (because it does not actually abort any doctest line once it started) and runs 314607 docstring lines and skips 361692, so it skips roughly 50%.



---

archive/issue_comments_386410.json:
```json
{
    "body": "Branch: **[u/saraedum/25270](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/25270)**",
    "created_at": "2018-06-09T21:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386410",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/25270](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/25270)**



---

archive/issue_comments_386411.json:
```json
{
    "body": "Author: **Julian R\u00fcth**",
    "created_at": "2018-06-09T21:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386411",
    "user": "https://github.com/saraedum"
}
```

Author: **Julian RÃ¼th**



---

archive/issue_comments_386412.json:
```json
{
    "body": "Commit: **[`d0f98ba`](https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6)**",
    "created_at": "2018-06-09T21:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386412",
    "user": "https://github.com/saraedum"
}
```

Commit: **[`d0f98ba`](https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6)**



---

archive/issue_comments_386413.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6\"><code>d0f98ba</code></a></td><td><code>Implement --short switch</code></td></tr></table>\n",
    "created_at": "2018-06-09T21:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386413",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6"><code>d0f98ba</code></a></td><td><code>Implement --short switch</code></td></tr></table>




---

archive/issue_comments_386414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n [This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)\n \n-It would be nice to add a `--limit=40:00` switch (or similar) to run doctests in each module for at most the corresponding fraction of time (I still have to try whether it's better to do the accounting by module or by line of doctest.)\n+This ticket implements a `--short [SECONDS=300]` switch which runs as many doctests as possible (from the top of each module) as possible in SECONDS.\n \n-In any case, this would give us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --long --limit=4:00 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --limit=4:00 src/sage/rings` and a final `sage -tp --limit=40:00 src` before I leave the rest to the patchbot.\n+This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short src` before I leave the rest to the patchbot.\n``````\n",
    "created_at": "2018-06-09T21:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386414",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 [This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)
 
-It would be nice to add a `--limit=40:00` switch (or similar) to run doctests in each module for at most the corresponding fraction of time (I still have to try whether it's better to do the accounting by module or by line of doctest.)
+This ticket implements a `--short [SECONDS=300]` switch which runs as many doctests as possible (from the top of each module) as possible in SECONDS.
 
-In any case, this would give us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --long --limit=4:00 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --limit=4:00 src/sage/rings` and a final `sage -tp --limit=40:00 src` before I leave the rest to the patchbot.
+This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short src` before I leave the rest to the patchbot.
``````




---

archive/issue_comments_386415.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n [This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)\n \n-This ticket implements a `--short [SECONDS=300]` switch which runs as many doctests as possible (from the top of each module) as possible in SECONDS.\n+This ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).\n \n-This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short src` before I leave the rest to the patchbot.\n+This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.\n``````\n",
    "created_at": "2018-06-09T21:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386415",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 [This is the Trac macro *Image* that was inherited from the migration called with arguments (bar.png,width=80%,center))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro)
 
-This ticket implements a `--short [SECONDS=300]` switch which runs as many doctests as possible (from the top of each module) as possible in SECONDS.
+This ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).
 
-This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short src` before I leave the rest to the patchbot.
+This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.
``````




---

archive/issue_comments_386416.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,54 @@\n This ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).\n \n This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.\n+\n+Here is an example:\n+\n+```\n+> sage -tp --short 2 src/sage/rings/padics/*.py\n+Doctesting 19 files using 4 threads.\n+sage -t src/sage/rings/padics/padic_extension_leaves.py\n+    [68/155 tests, 0.69 s]\n+sage -t src/sage/rings/padics/padic_base_generic.py\n+    [43/102 tests, 0.73 s]\n+sage -t src/sage/rings/padics/padic_valuation.py\n+    [183/413 tests, 0.69 s]\n+sage -t src/sage/rings/padics/padic_base_leaves.py\n+    [212/452 tests, 0.77 s]\n+sage -t src/sage/rings/padics/local_generic.py\n+    [140/310 tests, 0.73 s]\n+sage -t src/sage/rings/padics/lattice_precision.py\n+    [456/982 tests, 0.76 s]\n+sage -t src/sage/rings/padics/factory.py\n+    [502/1034 tests, 0.72 s]\n+sage -t src/sage/rings/padics/padic_generic.py\n+    [170/388 tests, 0.74 s]\n+sage -t src/sage/rings/padics/unramified_extension_generic.py\n+    [27/69 tests, 0.41 s]\n+sage -t src/sage/rings/padics/tutorial.py\n+    [45/91 tests, 0.00 s]\n+sage -t src/sage/rings/padics/misc.py\n+    [26/57 tests, 0.00 s]\n+sage -t src/sage/rings/padics/eisenstein_extension_generic.py\n+    [43/97 tests, 0.00 s]\n+sage -t src/sage/rings/padics/tests.py\n+    [12/25 tests, 0.00 s]\n+sage -t src/sage/rings/padics/precision_error.py\n+    [0 tests, 0.00 s]\n+sage -t src/sage/rings/padics/generic_nodes.py\n+    [143/316 tests, 0.72 s]\n+sage -t src/sage/rings/padics/__init__.py\n+    [0 tests, 0.00 s]\n+sage -t src/sage/rings/padics/all.py\n+    [0 tests, 0.00 s]\n+sage -t src/sage/rings/padics/padic_extension_generic.py\n+    [84/181 tests, 0.74 s]\n+sage -t src/sage/rings/padics/padic_lattice_element.py\n+    [263/561 tests, 0.70 s]\n+----------------------------------------------------------------------\n+All tests passed!\n+----------------------------------------------------------------------\n+Total time for all tests: 2.7 seconds\n+    cpu time: 8.1 seconds\n+    cumulative wall time: 8.4 seconds\n+```\n``````\n",
    "created_at": "2018-06-09T21:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386416",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,54 @@
 This ticket implements a `--short [SECONDS]` switch which runs as many doctests as possible (from the top of each module) in SECONDS (default 300).
 
 This gives us a quick way to check that a change did not break things too terribly. For example, when I work on p-adics, I would probably do: `sage -tp --short 30 src/sage/rings/padics` frequently. Once I am happy with my changes, I could do `sage -tp --short src/sage/rings`  and a final `sage -tp --short --all` before I leave the rest to the patchbot.
+
+Here is an example:
+
+```
+> sage -tp --short 2 src/sage/rings/padics/*.py
+Doctesting 19 files using 4 threads.
+sage -t src/sage/rings/padics/padic_extension_leaves.py
+    [68/155 tests, 0.69 s]
+sage -t src/sage/rings/padics/padic_base_generic.py
+    [43/102 tests, 0.73 s]
+sage -t src/sage/rings/padics/padic_valuation.py
+    [183/413 tests, 0.69 s]
+sage -t src/sage/rings/padics/padic_base_leaves.py
+    [212/452 tests, 0.77 s]
+sage -t src/sage/rings/padics/local_generic.py
+    [140/310 tests, 0.73 s]
+sage -t src/sage/rings/padics/lattice_precision.py
+    [456/982 tests, 0.76 s]
+sage -t src/sage/rings/padics/factory.py
+    [502/1034 tests, 0.72 s]
+sage -t src/sage/rings/padics/padic_generic.py
+    [170/388 tests, 0.74 s]
+sage -t src/sage/rings/padics/unramified_extension_generic.py
+    [27/69 tests, 0.41 s]
+sage -t src/sage/rings/padics/tutorial.py
+    [45/91 tests, 0.00 s]
+sage -t src/sage/rings/padics/misc.py
+    [26/57 tests, 0.00 s]
+sage -t src/sage/rings/padics/eisenstein_extension_generic.py
+    [43/97 tests, 0.00 s]
+sage -t src/sage/rings/padics/tests.py
+    [12/25 tests, 0.00 s]
+sage -t src/sage/rings/padics/precision_error.py
+    [0 tests, 0.00 s]
+sage -t src/sage/rings/padics/generic_nodes.py
+    [143/316 tests, 0.72 s]
+sage -t src/sage/rings/padics/__init__.py
+    [0 tests, 0.00 s]
+sage -t src/sage/rings/padics/all.py
+    [0 tests, 0.00 s]
+sage -t src/sage/rings/padics/padic_extension_generic.py
+    [84/181 tests, 0.74 s]
+sage -t src/sage/rings/padics/padic_lattice_element.py
+    [263/561 tests, 0.70 s]
+----------------------------------------------------------------------
+All tests passed!
+----------------------------------------------------------------------
+Total time for all tests: 2.7 seconds
+    cpu time: 8.1 seconds
+    cumulative wall time: 8.4 seconds
+```
``````




---

archive/issue_comments_386417.json:
```json
{
    "body": "Work Issues: **needs doctests**",
    "created_at": "2018-06-09T21:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386417",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **needs doctests**



---

archive/issue_comments_386418.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI still need some doctests for this but if somebody already wants to comment on this, I would be very happy about some feedback.\n\nSomehow my counting is off quite a bit. I am not entirely sure what's the problem.",
    "created_at": "2018-06-09T21:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386418",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:9" align="right">comment:9</div>

I still need some doctests for this but if somebody already wants to comment on this, I would be very happy about some feedback.

Somehow my counting is off quite a bit. I am not entirely sure what's the problem.



---

archive/issue_comments_386419.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,50 +9,50 @@\n Here is an example:\n \n ```\n-> sage -tp --short 2 src/sage/rings/padics/*.py\n+> sage -tp --short 5 src/sage/rings/padics/*.py\n Doctesting 19 files using 4 threads.\n-sage -t src/sage/rings/padics/padic_extension_leaves.py\n-    [68/155 tests, 0.69 s]\n+sage -t src/sage/rings/padics/padic_base_leaves.py\n+    [14% of tests run, 1.31 s]\n+sage -t src/sage/rings/padics/factory.py\n+    [29% of tests run, 1.31 s]\n+sage -t src/sage/rings/padics/lattice_precision.py\n+    [43% of tests run, 1.00 s]\n+sage -t src/sage/rings/padics/padic_valuation.py\n+    [4% of tests run, 2.80 s]\n sage -t src/sage/rings/padics/padic_base_generic.py\n-    [43/102 tests, 0.73 s]\n-sage -t src/sage/rings/padics/padic_valuation.py\n-    [183/413 tests, 0.69 s]\n-sage -t src/sage/rings/padics/padic_base_leaves.py\n-    [212/452 tests, 0.77 s]\n+    [95% of tests run, 1.72 s]\n sage -t src/sage/rings/padics/local_generic.py\n-    [140/310 tests, 0.73 s]\n-sage -t src/sage/rings/padics/lattice_precision.py\n-    [456/982 tests, 0.76 s]\n-sage -t src/sage/rings/padics/factory.py\n-    [502/1034 tests, 0.72 s]\n+    [1% of tests run, 0.73 s]\n+sage -t src/sage/rings/padics/padic_extension_generic.py\n+    [5% of tests run, 0.77 s]\n+sage -t src/sage/rings/padics/padic_lattice_element.py\n+    [2% of tests run, 0.78 s]\n+sage -t src/sage/rings/padics/generic_nodes.py\n+    [1% of tests run, 0.75 s]\n sage -t src/sage/rings/padics/padic_generic.py\n-    [170/388 tests, 0.74 s]\n+    [1% of tests run, 0.73 s]\n sage -t src/sage/rings/padics/unramified_extension_generic.py\n-    [27/69 tests, 0.41 s]\n+    [2% of tests run, 0.43 s]\n sage -t src/sage/rings/padics/tutorial.py\n-    [45/91 tests, 0.00 s]\n+    [4% of tests run, 0.70 s]\n+sage -t src/sage/rings/padics/tests.py\n+    [0% of tests run, 0.00 s]\n+sage -t src/sage/rings/padics/eisenstein_extension_generic.py\n+    [7% of tests run, 0.80 s]\n sage -t src/sage/rings/padics/misc.py\n-    [26/57 tests, 0.00 s]\n-sage -t src/sage/rings/padics/eisenstein_extension_generic.py\n-    [43/97 tests, 0.00 s]\n-sage -t src/sage/rings/padics/tests.py\n-    [12/25 tests, 0.00 s]\n+    [6% of tests run, 0.78 s]\n sage -t src/sage/rings/padics/precision_error.py\n-    [0 tests, 0.00 s]\n-sage -t src/sage/rings/padics/generic_nodes.py\n-    [143/316 tests, 0.72 s]\n-sage -t src/sage/rings/padics/__init__.py\n     [0 tests, 0.00 s]\n sage -t src/sage/rings/padics/all.py\n     [0 tests, 0.00 s]\n-sage -t src/sage/rings/padics/padic_extension_generic.py\n-    [84/181 tests, 0.74 s]\n-sage -t src/sage/rings/padics/padic_lattice_element.py\n-    [263/561 tests, 0.70 s]\n+sage -t src/sage/rings/padics/__init__.py\n+    [0 tests, 0.00 s]\n+sage -t src/sage/rings/padics/padic_extension_leaves.py\n+    [10% of tests run, 6.54 s]\n ----------------------------------------------------------------------\n All tests passed!\n ----------------------------------------------------------------------\n-Total time for all tests: 2.7 seconds\n-    cpu time: 8.1 seconds\n-    cumulative wall time: 8.4 seconds\n+Total time for all tests: 6.6 seconds\n+    cpu time: 20.0 seconds\n+    cumulative wall time: 21.1 seconds\n ```\n``````\n",
    "created_at": "2018-06-10T20:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386419",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,50 +9,50 @@
 Here is an example:
 
 ```
-> sage -tp --short 2 src/sage/rings/padics/*.py
+> sage -tp --short 5 src/sage/rings/padics/*.py
 Doctesting 19 files using 4 threads.
-sage -t src/sage/rings/padics/padic_extension_leaves.py
-    [68/155 tests, 0.69 s]
+sage -t src/sage/rings/padics/padic_base_leaves.py
+    [14% of tests run, 1.31 s]
+sage -t src/sage/rings/padics/factory.py
+    [29% of tests run, 1.31 s]
+sage -t src/sage/rings/padics/lattice_precision.py
+    [43% of tests run, 1.00 s]
+sage -t src/sage/rings/padics/padic_valuation.py
+    [4% of tests run, 2.80 s]
 sage -t src/sage/rings/padics/padic_base_generic.py
-    [43/102 tests, 0.73 s]
-sage -t src/sage/rings/padics/padic_valuation.py
-    [183/413 tests, 0.69 s]
-sage -t src/sage/rings/padics/padic_base_leaves.py
-    [212/452 tests, 0.77 s]
+    [95% of tests run, 1.72 s]
 sage -t src/sage/rings/padics/local_generic.py
-    [140/310 tests, 0.73 s]
-sage -t src/sage/rings/padics/lattice_precision.py
-    [456/982 tests, 0.76 s]
-sage -t src/sage/rings/padics/factory.py
-    [502/1034 tests, 0.72 s]
+    [1% of tests run, 0.73 s]
+sage -t src/sage/rings/padics/padic_extension_generic.py
+    [5% of tests run, 0.77 s]
+sage -t src/sage/rings/padics/padic_lattice_element.py
+    [2% of tests run, 0.78 s]
+sage -t src/sage/rings/padics/generic_nodes.py
+    [1% of tests run, 0.75 s]
 sage -t src/sage/rings/padics/padic_generic.py
-    [170/388 tests, 0.74 s]
+    [1% of tests run, 0.73 s]
 sage -t src/sage/rings/padics/unramified_extension_generic.py
-    [27/69 tests, 0.41 s]
+    [2% of tests run, 0.43 s]
 sage -t src/sage/rings/padics/tutorial.py
-    [45/91 tests, 0.00 s]
+    [4% of tests run, 0.70 s]
+sage -t src/sage/rings/padics/tests.py
+    [0% of tests run, 0.00 s]
+sage -t src/sage/rings/padics/eisenstein_extension_generic.py
+    [7% of tests run, 0.80 s]
 sage -t src/sage/rings/padics/misc.py
-    [26/57 tests, 0.00 s]
-sage -t src/sage/rings/padics/eisenstein_extension_generic.py
-    [43/97 tests, 0.00 s]
-sage -t src/sage/rings/padics/tests.py
-    [12/25 tests, 0.00 s]
+    [6% of tests run, 0.78 s]
 sage -t src/sage/rings/padics/precision_error.py
-    [0 tests, 0.00 s]
-sage -t src/sage/rings/padics/generic_nodes.py
-    [143/316 tests, 0.72 s]
-sage -t src/sage/rings/padics/__init__.py
     [0 tests, 0.00 s]
 sage -t src/sage/rings/padics/all.py
     [0 tests, 0.00 s]
-sage -t src/sage/rings/padics/padic_extension_generic.py
-    [84/181 tests, 0.74 s]
-sage -t src/sage/rings/padics/padic_lattice_element.py
-    [263/561 tests, 0.70 s]
+sage -t src/sage/rings/padics/__init__.py
+    [0 tests, 0.00 s]
+sage -t src/sage/rings/padics/padic_extension_leaves.py
+    [10% of tests run, 6.54 s]
 ----------------------------------------------------------------------
 All tests passed!
 ----------------------------------------------------------------------
-Total time for all tests: 2.7 seconds
-    cpu time: 8.1 seconds
-    cumulative wall time: 8.4 seconds
+Total time for all tests: 6.6 seconds
+    cpu time: 20.0 seconds
+    cumulative wall time: 21.1 seconds
 ```
``````




---

archive/issue_comments_386420.json:
```json
{
    "body": "Changed work issues from **needs doctests** to **needs doctests, is the patchbot happy?**",
    "created_at": "2018-06-10T20:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386420",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **needs doctests** to **needs doctests, is the patchbot happy?**



---

archive/issue_events_349686.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-06-10T20:07:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349686"
}
```



---

archive/issue_comments_386421.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI am quite unhappy with the spaghetti code that I added here but I don't really see a much better way. I have a feeling that we cramped a lot of features already into Python's doctesting framework and that it was never meant to be extended like that. A proper plugin system would have been cool but I guess it's too late for that ;)",
    "created_at": "2018-06-10T20:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386421",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:12" align="right">comment:12</div>

I am quite unhappy with the spaghetti code that I added here but I don't really see a much better way. I have a feeling that we cramped a lot of features already into Python's doctesting framework and that it was never meant to be extended like that. A proper plugin system would have been cool but I guess it's too late for that ;)



---

archive/issue_comments_386422.json:
```json
{
    "body": "Changed commit from **[`d0f98ba`](https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6)** to **[`4c8639d`](https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5)**",
    "created_at": "2018-06-11T06:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386422",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0f98ba`](https://github.com/sagemath/sagetrac-mirror/commit/d0f98ba118a581f2a23c3c753e4dfe9cec5288a6)** to **[`4c8639d`](https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5)**



---

archive/issue_comments_386423.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5\"><code>4c8639d</code></a></td><td><code>Report relative number of tests run in --short runs</code></td></tr></table>\n",
    "created_at": "2018-06-11T06:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386423",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5"><code>4c8639d</code></a></td><td><code>Report relative number of tests run in --short runs</code></td></tr></table>




---

archive/issue_comments_386424.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNeeds to be rebased it looks like.  I can't wait to see this working though, and if I have some ideas how to improve the implementation I'll give them.",
    "created_at": "2018-06-27T14:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386424",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">comment:14</div>

Needs to be rebased it looks like.  I can't wait to see this working though, and if I have some ideas how to improve the implementation I'll give them.



---

archive/issue_comments_386425.json:
```json
{
    "body": "Changed commit from **[`4c8639d`](https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5)** to **[`915d8e6`](https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3)**",
    "created_at": "2018-07-03T15:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386425",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c8639d`](https://github.com/sagemath/sagetrac-mirror/commit/4c8639d3a736c61e3798de8512ae7c4df2d915d5)** to **[`915d8e6`](https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3)**



---

archive/issue_comments_386426.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3\"><code>915d8e6</code></a></td><td><code>Merge develop into 25270</code></td></tr></table>\n",
    "created_at": "2018-07-03T15:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3"><code>915d8e6</code></a></td><td><code>Merge develop into 25270</code></td></tr></table>




---

archive/issue_comments_386427.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOk. I rebased this.",
    "created_at": "2018-07-03T15:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386427",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:16" align="right">comment:16</div>

Ok. I rebased this.



---

archive/issue_comments_386428.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI wish we also had a way to prioritize tests.  E.g. we could mark a test as `# important` and ensure all such tests get run first.  That could be added later though.",
    "created_at": "2018-07-10T13:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386428",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

I wish we also had a way to prioritize tests.  E.g. we could mark a test as `# important` and ensure all such tests get run first.  That could be added later though.



---

archive/issue_events_349687.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-10T13:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349687"
}
```



---

archive/issue_events_349688.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-10T13:57:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349688"
}
```



---

archive/issue_comments_386429.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-07-10T13:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386429",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_386430.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c\"><code>6c9c2ce</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr></table>\n",
    "created_at": "2018-07-11T05:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386430",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c"><code>6c9c2ce</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr></table>




---

archive/issue_events_349689.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-07-11T05:00:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349689"
}
```



---

archive/issue_events_349690.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-07-11T05:00:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349690"
}
```



---

archive/issue_comments_386431.json:
```json
{
    "body": "Changed commit from **[`915d8e6`](https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3)** to **[`6c9c2ce`](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)**",
    "created_at": "2018-07-11T05:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386431",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`915d8e6`](https://github.com/sagemath/sagetrac-mirror/commit/915d8e6c2d7700b366dc773aed36e2c336f0e9b3)** to **[`6c9c2ce`](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)**



---

archive/issue_comments_386432.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nRebased again. Somehow the patchbots fail to build this, probably they are broken atm.",
    "created_at": "2018-07-11T05:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386432",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:19" align="right">comment:19</div>

Rebased again. Somehow the patchbots fail to build this, probably they are broken atm.



---

archive/issue_comments_386433.json:
```json
{
    "body": "Changed work issues from **needs doctests, is the patchbot happy?** to **is the patchbot happy \u21d2 positive review**",
    "created_at": "2018-07-11T05:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386433",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **needs doctests, is the patchbot happy?** to **is the patchbot happy â positive review**



---

archive/issue_comments_386434.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nMy patchbot Ubuntu/18.04/x86_64/3.13.0-123-generic/sagemath-patchbot-docker was broken for a few days due to running out of disk space.  It should be working now though.",
    "created_at": "2018-07-11T11:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386434",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">comment:20</div>

My patchbot Ubuntu/18.04/x86_64/3.13.0-123-generic/sagemath-patchbot-docker was broken for a few days due to running out of disk space.  It should be working now though.



---

archive/issue_comments_386435.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThis will only work if the full testsuite is run at least once and allowed to save state right?\n\nI'd love something like this for distribution CI (testing weather or not a dependency update breaks sage), but if thats the case it couldn't be used for that. Something like `#important` would be good in that case.",
    "created_at": "2018-07-11T11:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386435",
    "user": "https://github.com/timokau"
}
```

<div id="comment:21" align="right">comment:21</div>

This will only work if the full testsuite is run at least once and allowed to save state right?

I'd love something like this for distribution CI (testing weather or not a dependency update breaks sage), but if thats the case it couldn't be used for that. Something like `#important` would be good in that case.



---

archive/issue_comments_386436.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@timokau](#comment:21):\n> This will only work if the full testsuite is run at least once and allowed to save state right?\n\nNo. The changes proposed here do not rely on saved state.",
    "created_at": "2018-07-11T12:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386436",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@timokau](#comment:21):
> This will only work if the full testsuite is run at least once and allowed to save state right?

No. The changes proposed here do not rely on saved state.



---

archive/issue_comments_386437.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThats great! The code is a bit hard to read without context and I don't want to dig too deeply. How does it determine which tests to skip then? Just allocate equal time to each file and abort remaining tests if the time budged is used up?",
    "created_at": "2018-07-11T13:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386437",
    "user": "https://github.com/timokau"
}
```

<div id="comment:23" align="right">comment:23</div>

Thats great! The code is a bit hard to read without context and I don't want to dig too deeply. How does it determine which tests to skip then? Just allocate equal time to each file and abort remaining tests if the time budged is used up?



---

archive/issue_comments_386438.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYes. It allocates equal time and starts testing from the top.",
    "created_at": "2018-07-11T13:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386438",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:24" align="right">comment:24</div>

Yes. It allocates equal time and starts testing from the top.



---

archive/issue_comments_386439.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThis also needs to be documented in `src/doc/en/reference/repl/options.rst`.",
    "created_at": "2018-07-11T15:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386439",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">comment:25</div>

This also needs to be documented in `src/doc/en/reference/repl/options.rst`.



---

archive/issue_comments_386440.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nDoes the `[SECONDS]` argument refer to the total time for testing, or the time for each file? When I ran `sage --tp --short 15 src/sage`, it spent much less than 15 seconds on each file before giving up.",
    "created_at": "2018-07-11T15:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386440",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

Does the `[SECONDS]` argument refer to the total time for testing, or the time for each file? When I ran `sage --tp --short 15 src/sage`, it spent much less than 15 seconds on each file before giving up.



---

archive/issue_comments_386441.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe [SECONDS] are the total amount of time.",
    "created_at": "2018-07-11T15:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386441",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:27" align="right">comment:27</div>

The [SECONDS] are the total amount of time.



---

archive/issue_events_349691.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-11T15:18:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349691"
}
```



---

archive/issue_events_349692.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-11T15:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349692"
}
```



---

archive/issue_comments_386442.json:
```json
{
    "body": "Changed work issues from **is the patchbot happy \u21d2 positive review** to **is the patchbot happy \u21d2 positive review + documentation**",
    "created_at": "2018-07-11T15:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386442",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **is the patchbot happy â positive review** to **is the patchbot happy â positive review + documentation**



---

archive/issue_comments_386443.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am getting a doctest failure from `sage -tp --short 600 src/sage/`:\n\n```\nsage -t src/sage/doctest/reporting.py\n**********************************************************************\nFile \"src/sage/doctest/reporting.py\", line 324, in sage.doctest.reporting.DocTestReporter.report\nFailed example:\n    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), \"Good tests\")\nExpected:\n        1 unlabeled test not run\n        4 long tests not run\n        5 magma tests not run\n        2 other tests skipped\n        [... tests, ... s]\nGot:\n        1 unlabeled test not run\n        4 long tests not run\n        5 magma tests not run\n        2 not tested tests not run\n        0 tests not run because we ran out of time\n        [126 tests, 0.00 s]\n**********************************************************************\nFile \"src/sage/doctest/reporting.py\", line 350, in sage.doctest.reporting.DocTestReporter.report\nFailed example:\n    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), \"Good tests\")\nExpected nothing\nGot:\n        [126 tests, 0.00 s]\n**********************************************************************\n1 item had failures:\n   2 of  57 in sage.doctest.reporting.DocTestReporter.report\n    [120 tests, 2 failures, 0.54 s]\n```",
    "created_at": "2018-07-11T15:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386443",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

I am getting a doctest failure from `sage -tp --short 600 src/sage/`:

```
sage -t src/sage/doctest/reporting.py
**********************************************************************
File "src/sage/doctest/reporting.py", line 324, in sage.doctest.reporting.DocTestReporter.report
Failed example:
    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), "Good tests")
Expected:
        1 unlabeled test not run
        4 long tests not run
        5 magma tests not run
        2 other tests skipped
        [... tests, ... s]
Got:
        1 unlabeled test not run
        4 long tests not run
        5 magma tests not run
        2 not tested tests not run
        0 tests not run because we ran out of time
        [126 tests, 0.00 s]
**********************************************************************
File "src/sage/doctest/reporting.py", line 350, in sage.doctest.reporting.DocTestReporter.report
Failed example:
    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), "Good tests")
Expected nothing
Got:
        [126 tests, 0.00 s]
**********************************************************************
1 item had failures:
   2 of  57 in sage.doctest.reporting.DocTestReporter.report
    [120 tests, 2 failures, 0.54 s]
```



---

archive/issue_comments_386444.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6\"><code>8517278</code></a></td><td><code>Fix reporting doctest</code></td></tr></table>\n",
    "created_at": "2018-07-12T12:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386444",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6"><code>8517278</code></a></td><td><code>Fix reporting doctest</code></td></tr></table>




---

archive/issue_comments_386445.json:
```json
{
    "body": "Changed commit from **[`6c9c2ce`](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)** to **[`8517278`](https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6)**",
    "created_at": "2018-07-12T12:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386445",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c9c2ce`](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)** to **[`8517278`](https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6)**



---

archive/issue_events_349693.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-12T12:36:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349693"
}
```



---

archive/issue_events_349694.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-12T12:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349694"
}
```



---

archive/issue_comments_386446.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6\"><code>8517278</code></a></td><td><code>Fix reporting doctest</code></td></tr></table>\n",
    "created_at": "2018-07-12T12:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386446",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:30"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6"><code>8517278</code></a></td><td><code>Fix reporting doctest</code></td></tr></table>




---

archive/issue_comments_386447.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLet's see what the patchbot says (if indeed I've actually managed to fix it...)",
    "created_at": "2018-07-12T12:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386447",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

Let's see what the patchbot says (if indeed I've actually managed to fix it...)



---

archive/issue_comments_386448.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nGot a few test failures in `sage.doctest` that seem relevant :)",
    "created_at": "2018-07-12T18:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386448",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">comment:32</div>

Got a few test failures in `sage.doctest` that seem relevant :)



---

archive/issue_events_349695.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-12T18:21:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349695"
}
```



---

archive/issue_events_349696.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-12T18:21:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349696"
}
```



---

archive/issue_comments_386449.json:
```json
{
    "body": "Changed commit from **[`8517278`](https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6)** to **[`8d3bd2e`](https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a)**",
    "created_at": "2018-07-20T07:25:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386449",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8517278`](https://github.com/sagemath/sagetrac-mirror/commit/8517278d26b913893d50258ff9179ea6845e55f6)** to **[`8d3bd2e`](https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a)**



---

archive/issue_comments_386450.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a\"><code>8d3bd2e</code></a></td><td><code>fixed doctests</code></td></tr></table>\n",
    "created_at": "2018-07-20T07:25:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386450",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a"><code>8d3bd2e</code></a></td><td><code>fixed doctests</code></td></tr></table>




---

archive/issue_comments_386451.json:
```json
{
    "body": "Changed commit from **[`8d3bd2e`](https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a)** to **[`4f11757`](https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922)**",
    "created_at": "2018-07-20T07:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386451",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d3bd2e`](https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a)** to **[`4f11757`](https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922)**



---

archive/issue_comments_386452.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922\"><code>4f11757</code></a></td><td><code>Add --short to options.rst</code></td></tr></table>\n",
    "created_at": "2018-07-20T07:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386452",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922"><code>4f11757</code></a></td><td><code>Add --short to options.rst</code></td></tr></table>




---

archive/issue_comments_386453.json:
```json
{
    "body": "Changed work issues from **is the patchbot happy \u21d2 positive review + documentation** to **is the patchbot happy \u21d2 positive review**",
    "created_at": "2018-07-20T07:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386453",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **is the patchbot happy â positive review + documentation** to **is the patchbot happy â positive review**



---

archive/issue_comments_386454.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a\"><code>8d3bd2e</code></a></td><td><code>fixed doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922\"><code>4f11757</code></a></td><td><code>Add --short to options.rst</code></td></tr></table>\n",
    "created_at": "2018-07-20T07:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386454",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:36"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d3bd2edf7810e812e5f4cb7ce92d8e598fc9f9a"><code>8d3bd2e</code></a></td><td><code>fixed doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922"><code>4f11757</code></a></td><td><code>Add --short to options.rst</code></td></tr></table>




---

archive/issue_events_349697.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-20T07:30:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349697"
}
```



---

archive/issue_events_349698.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-20T07:30:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349698"
}
```



---

archive/issue_comments_386455.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nStill getting a failure:\n\n```\nsage -t --long src/sage/doctest/reporting.py\n**********************************************************************\nFile \"src/sage/doctest/reporting.py\", line 351, in sage.doctest.reporting.DocTestReporter.report\nFailed example:\n    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), \"Good tests\")\nExpected nothing\nGot:\n        [126 tests, 0.00 s]\n**********************************************************************\n1 item had failures:\n   1 of  57 in sage.doctest.reporting.DocTestReporter.report\n    [120 tests, 1 failure, 0.52 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/doctest/reporting.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nI've seen some cases before where the expected output was accidentally left off a doctest, and the doctest runner just ignored that, seemingly buggily, whereas fixing/changing things in the doctest runner made it start expecting output again.  Could this be something like that?",
    "created_at": "2018-07-23T16:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386455",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">comment:37</div>

Still getting a failure:

```
sage -t --long src/sage/doctest/reporting.py
**********************************************************************
File "src/sage/doctest/reporting.py", line 351, in sage.doctest.reporting.DocTestReporter.report
Failed example:
    DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), "Good tests")
Expected nothing
Got:
        [126 tests, 0.00 s]
**********************************************************************
1 item had failures:
   1 of  57 in sage.doctest.reporting.DocTestReporter.report
    [120 tests, 1 failure, 0.52 s]
----------------------------------------------------------------------
sage -t --long src/sage/doctest/reporting.py  # 1 doctest failed
----------------------------------------------------------------------
```

I've seen some cases before where the expected output was accidentally left off a doctest, and the doctest runner just ignored that, seemingly buggily, whereas fixing/changing things in the doctest runner made it start expecting output again.  Could this be something like that?



---

archive/issue_comments_386456.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nMaybe?",
    "created_at": "2018-07-23T16:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386456",
    "user": "https://github.com/embray"
}
```

<div id="comment:38" align="right">comment:38</div>

Maybe?



---

archive/issue_events_349699.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-23T16:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349699"
}
```



---

archive/issue_events_349700.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-23T16:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349700"
}
```



---

archive/issue_comments_386457.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIf my fast build machine weren't down I'd test to see if I could reproduce this manually.",
    "created_at": "2018-07-23T16:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386457",
    "user": "https://github.com/embray"
}
```

<div id="comment:39" align="right">comment:39</div>

If my fast build machine weren't down I'd test to see if I could reproduce this manually.



---

archive/issue_comments_386458.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nYeah, I was able to reproduce the test failure locally just running `./sage -t src/sage/doctest/reporting.py`.",
    "created_at": "2018-07-24T08:37:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386458",
    "user": "https://github.com/embray"
}
```

<div id="comment:40" align="right">comment:40</div>

Yeah, I was able to reproduce the test failure locally just running `./sage -t src/sage/doctest/reporting.py`.



---

archive/issue_comments_386459.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI think it's a legitimate regression, unlike my earlier guess.  The failure is here:\n\n```\n        The only-errors mode does not output anything on success::\n\n            sage: DD = DocTestDefaults(only_errors=True)\n            sage: FDS = FileDocTestSource(filename, DD)\n            sage: DC = DocTestController(DD, [filename])\n            sage: DTR = DocTestReporter(DC)\n            sage: doctests, extras = FDS.create_doctests(globals())\n            sage: runner = SageDocTestRunner(SageOutputChecker(), verbose=False, sage_options=DD, optionflags=doctest.NORMALIZE_WHITESPACE|doctest.ELLIPSIS)\n            sage: Timer().start().stop().annotate(runner)\n            sage: D = DictAsObject({'err':None})\n            sage: runner.update_results(D)\n            0\n            sage: DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), \"Good tests\")\n\n        However, failures are still output in the errors-only mode::\n\n            sage: runner.failures = 1\n            sage: runner.update_results(D)\n            1\n            sage: DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), \"Failed test\")\n                [... tests, 1 failure, ... s]\n\n```\n\nThe intent of the test is that nothing should be output by `DocTestRunner.report` if it's in \"only-errors mode\" (a thing I didn't know existed), and there are no failures.",
    "created_at": "2018-07-24T08:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386459",
    "user": "https://github.com/embray"
}
```

<div id="comment:41" align="right">comment:41</div>

I think it's a legitimate regression, unlike my earlier guess.  The failure is here:

```
        The only-errors mode does not output anything on success::

            sage: DD = DocTestDefaults(only_errors=True)
            sage: FDS = FileDocTestSource(filename, DD)
            sage: DC = DocTestController(DD, [filename])
            sage: DTR = DocTestReporter(DC)
            sage: doctests, extras = FDS.create_doctests(globals())
            sage: runner = SageDocTestRunner(SageOutputChecker(), verbose=False, sage_options=DD, optionflags=doctest.NORMALIZE_WHITESPACE|doctest.ELLIPSIS)
            sage: Timer().start().stop().annotate(runner)
            sage: D = DictAsObject({'err':None})
            sage: runner.update_results(D)
            0
            sage: DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), "Good tests")

        However, failures are still output in the errors-only mode::

            sage: runner.failures = 1
            sage: runner.update_results(D)
            1
            sage: DTR.report(FDS, False, 0, (sum([len(t.examples) for t in doctests]), D), "Failed test")
                [... tests, 1 failure, ... s]

```

The intent of the test is that nothing should be output by `DocTestRunner.report` if it's in "only-errors mode" (a thing I didn't know existed), and there are no failures.



---

archive/issue_comments_386460.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1281cbf8f532a5705d8f331f53d56555f3193656\"><code>1281cbf</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1\"><code>fec87aa</code></a></td><td><code>Honor only_errors option</code></td></tr></table>\n",
    "created_at": "2018-07-28T13:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386460",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1281cbf8f532a5705d8f331f53d56555f3193656"><code>1281cbf</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1"><code>fec87aa</code></a></td><td><code>Honor only_errors option</code></td></tr></table>




---

archive/issue_comments_386461.json:
```json
{
    "body": "Changed commit from **[`4f11757`](https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922)** to **[`fec87aa`](https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1)**",
    "created_at": "2018-07-28T13:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386461",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4f11757`](https://github.com/sagemath/sagetrac-mirror/commit/4f1175738b99eb7533743719e0b2f1ea2392e922)** to **[`fec87aa`](https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1)**



---

archive/issue_comments_386462.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOk. I had somehow removed the line about the `only_errors` flag. I put it back in.",
    "created_at": "2018-07-28T13:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386462",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:43" align="right">comment:43</div>

Ok. I had somehow removed the line about the `only_errors` flag. I put it back in.



---

archive/issue_events_349701.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-28T13:09:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349701"
}
```



---

archive/issue_events_349702.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-28T13:09:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349702"
}
```



---

archive/issue_comments_386463.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nOk, positive review from me then pending results from a patchbot or two.\n\nMine were down all weekend so they'll probably need a day or 2 to get to it.",
    "created_at": "2018-07-30T16:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386463",
    "user": "https://github.com/embray"
}
```

<div id="comment:44" align="right">comment:44</div>

Ok, positive review from me then pending results from a patchbot or two.

Mine were down all weekend so they'll probably need a day or 2 to get to it.



---

archive/issue_comments_386464.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5\"><code>829169e</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr></table>\n",
    "created_at": "2018-08-07T16:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386464",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5"><code>829169e</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr></table>




---

archive/issue_comments_386465.json:
```json
{
    "body": "Changed commit from **[`fec87aa`](https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1)** to **[`829169e`](https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5)**",
    "created_at": "2018-08-07T16:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386465",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fec87aa`](https://github.com/sagemath/sagetrac-mirror/commit/fec87aad5e0f2f63be90b071aa3075e5c219b5a1)** to **[`829169e`](https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5)**



---

archive/issue_comments_386466.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78\"><code>3772312</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into HEAD</code></td></tr></table>\n",
    "created_at": "2018-08-16T22:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386466",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78"><code>3772312</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into HEAD</code></td></tr></table>




---

archive/issue_comments_386467.json:
```json
{
    "body": "Changed commit from **[`829169e`](https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5)** to **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)**",
    "created_at": "2018-08-16T22:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386467",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`829169e`](https://github.com/sagemath/sagetrac-mirror/commit/829169ef330754ccfaa3f91d5725628fefef8fa5)** to **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)**



---

archive/issue_events_349703.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-20T20:14:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349703"
}
```



---

archive/issue_events_349704.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-20T20:14:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349704"
}
```



---

archive/issue_comments_386468.json:
```json
{
    "body": "Changed work issues from **is the patchbot happy \u21d2 positive review** to none",
    "created_at": "2018-08-20T20:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386468",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **is the patchbot happy â positive review** to none



---

archive/issue_comments_386469.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nFinally, there was a happy patchbot based off 8.4.beta1 :)",
    "created_at": "2018-08-20T20:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386469",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:47" align="right">comment:47</div>

Finally, there was a happy patchbot based off 8.4.beta1 :)



---

archive/issue_comments_386470.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI am not sure that's the right approach here when looking at patchbot outputs but the patchbots are so flaky lately, that I just assume that \"build fails\" has nothing to do with this ticket.",
    "created_at": "2018-08-20T20:15:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386470",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:48" align="right">comment:48</div>

I am not sure that's the right approach here when looking at patchbot outputs but the patchbots are so flaky lately, that I just assume that "build fails" has nothing to do with this ticket.



---

archive/issue_comments_386471.json:
```json
{
    "body": "Changed commit from **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)** to **[`fd9c882`](https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f)**",
    "created_at": "2018-08-20T20:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386471",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)** to **[`fd9c882`](https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f)**



---

archive/issue_comments_386472.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd636114739ae1e4f43dca10a45ec3e6eae151e4\"><code>bd63611</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f\"><code>fd9c882</code></a></td><td><code>Merge remote-tracking branch 'trac/u/saraedum/25270' into 25270</code></td></tr></table>\n",
    "created_at": "2018-08-20T20:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386472",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd636114739ae1e4f43dca10a45ec3e6eae151e4"><code>bd63611</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f"><code>fd9c882</code></a></td><td><code>Merge remote-tracking branch 'trac/u/saraedum/25270' into 25270</code></td></tr></table>




---

archive/issue_events_349705.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-08-20T20:18:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349705"
}
```



---

archive/issue_events_349706.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-08-20T20:18:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349706"
}
```



---

archive/issue_comments_386473.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-20T20:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386473",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_386474.json:
```json
{
    "body": "Changed commit from **[`fd9c882`](https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f)** to **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)**",
    "created_at": "2018-08-20T20:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd9c882`](https://github.com/sagemath/sagetrac-mirror/commit/fd9c88272021cc40520638f30cf3dfa9d0d5a10f)** to **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)**



---

archive/issue_comments_386475.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nSorry for this noise. I had pushed something to the wrong ticket. Reverted back to the reviewed state.",
    "created_at": "2018-08-20T20:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386475",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:51" align="right">comment:51</div>

Sorry for this noise. I had pushed something to the wrong ticket. Reverted back to the reviewed state.



---

archive/issue_events_349707.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-20T20:19:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349707"
}
```



---

archive/issue_events_349708.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-20T20:19:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349708"
}
```



---

archive/issue_events_349709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-26T09:40:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349709"
}
```



---

archive/issue_events_349710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-26T09:40:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349710"
}
```



---

archive/issue_comments_386476.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nMerge conflict",
    "created_at": "2018-08-26T09:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386476",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">comment:52</div>

Merge conflict



---

archive/issue_comments_386477.json:
```json
{
    "body": "Work Issues: **is the patchbot happy \u21d2 positive review**",
    "created_at": "2018-08-26T11:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386477",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **is the patchbot happy â positive review**



---

archive/issue_events_349711.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-26T11:45:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349711"
}
```



---

archive/issue_events_349712.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-26T11:45:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349712"
}
```



---

archive/issue_comments_386478.json:
```json
{
    "body": "Changed commit from **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)** to **[`cb73e0c`](https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080)**",
    "created_at": "2018-08-26T11:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3772312`](https://github.com/sagemath/sagetrac-mirror/commit/37723128326405286df7e2bc05cfdf5e778fee78)** to **[`cb73e0c`](https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080)**



---

archive/issue_comments_386479.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080\"><code>cb73e0c</code></a></td><td><code>Merge develop and 25270</code></td></tr></table>\n",
    "created_at": "2018-08-26T11:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080"><code>cb73e0c</code></a></td><td><code>Merge develop and 25270</code></td></tr></table>




---

archive/issue_events_349713.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-09-02T12:42:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349713"
}
```



---

archive/issue_events_349714.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-09-02T12:42:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349714"
}
```



---

archive/issue_comments_386480.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nembray: I sometimes get\n\n```\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/home/sage/sage/local/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\n    func(*targs, **kargs)\n  File \"<doctest sage.cpython.atexit[2]>\", line 2, in handler\nNameError: global name 'print' is not defined\nsage -t sage/src/sage/cpython/atexit.pyx\n    NameError in doctesting framework\n**********************************************************************\nTests run before doctest exception:\nsage: import atexit ## line 54 ##\nsage: from sage.cpython.atexit import restore_atexit ## line 55 ##\nsage: def handler(*args, **kwargs):\n    print((args, kwargs)) ## line 56 ##\nsage: atexit.register(handler, 1, 2, c=3) ## line 58 ##\n<function handler at 0x7f3ee18f41b8>\n\n**********************************************************************\nTraceback (most recent call last):\n  File \"/home/sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2426, in __call__\n    break\n  File \"sage/cpython/atexit.pyx\", line 143, in sage.cpython.atexit.restore_atexit.__exit__ (build/cythonized/sage/cpython/atexit.c:1497)\n    atexit._run_exitfuncs()\n  File \"/home/sage/sage/local/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\n    func(*targs, **kargs)\n  File \"<doctest sage.cpython.atexit[2]>\", line 2, in handler\nNameError: global name 'print' is not defined\n```\n\nI guess this happens when the tests in `atexit` are only run partially and maybe some cleanup that is part of the doctests did not happen.\n\nSince you're listed as the author of that file, any clue what's going on here?",
    "created_at": "2018-09-02T12:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386480",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:56" align="right">comment:56</div>

embray: I sometimes get

```
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/home/sage/sage/local/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "<doctest sage.cpython.atexit[2]>", line 2, in handler
NameError: global name 'print' is not defined
sage -t sage/src/sage/cpython/atexit.pyx
    NameError in doctesting framework
**********************************************************************
Tests run before doctest exception:
sage: import atexit ## line 54 ##
sage: from sage.cpython.atexit import restore_atexit ## line 55 ##
sage: def handler(*args, **kwargs):
    print((args, kwargs)) ## line 56 ##
sage: atexit.register(handler, 1, 2, c=3) ## line 58 ##
<function handler at 0x7f3ee18f41b8>

**********************************************************************
Traceback (most recent call last):
  File "/home/sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2426, in __call__
    break
  File "sage/cpython/atexit.pyx", line 143, in sage.cpython.atexit.restore_atexit.__exit__ (build/cythonized/sage/cpython/atexit.c:1497)
    atexit._run_exitfuncs()
  File "/home/sage/sage/local/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "<doctest sage.cpython.atexit[2]>", line 2, in handler
NameError: global name 'print' is not defined
```

I guess this happens when the tests in `atexit` are only run partially and maybe some cleanup that is part of the doctests did not happen.

Since you're listed as the author of that file, any clue what's going on here?



---

archive/issue_comments_386481.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nHmm--I think maybe, if nothing else, there should be a `from `__future__` import print_function` in that module, which there currently is not.  I'm not positive that that's the problem though.  I'd have to try to reproduce it first.",
    "created_at": "2018-09-03T08:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386481",
    "user": "https://github.com/embray"
}
```

<div id="comment:57" align="right">comment:57</div>

Hmm--I think maybe, if nothing else, there should be a `from `__future__` import print_function` in that module, which there currently is not.  I'm not positive that that's the problem though.  I'd have to try to reproduce it first.



---

archive/issue_comments_386482.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nStrange, though, since looking at `sage.doctest.forker` all doctests are supposed to be compiled as though `from `__future__` import print_function` was present.  Maybe, somehow, just including the required compile flags isn't enough to ensure that the `print()` function is in the globals?",
    "created_at": "2018-09-03T08:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386482",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

Strange, though, since looking at `sage.doctest.forker` all doctests are supposed to be compiled as though `from `__future__` import print_function` was present.  Maybe, somehow, just including the required compile flags isn't enough to ensure that the `print()` function is in the globals?



---

archive/issue_comments_386483.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nFor the atexit tests, does that happen if you test `src/sage/cpython/atexit.pyx` directly?  Or does it only happen when running the full test suite with `./sage --short`?",
    "created_at": "2018-09-05T15:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386483",
    "user": "https://github.com/embray"
}
```

<div id="comment:59" align="right">comment:59</div>

For the atexit tests, does that happen if you test `src/sage/cpython/atexit.pyx` directly?  Or does it only happen when running the full test suite with `./sage --short`?



---

archive/issue_events_349715.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T09:32:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349715"
}
```



---

archive/issue_events_349716.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T09:32:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349716"
}
```



---

archive/issue_comments_386484.json:
```json
{
    "body": "Changed commit from **[`cb73e0c`](https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080)** to **[`b5b7b51`](https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c)**",
    "created_at": "2018-10-08T11:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386484",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb73e0c`](https://github.com/sagemath/sagetrac-mirror/commit/cb73e0c0d85dd7da59b2a8b26d2341cb68348080)** to **[`b5b7b51`](https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c)**



---

archive/issue_comments_386485.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c\"><code>b5b7b51</code></a></td><td><code>Do not use print function in atexit</code></td></tr></table>\n",
    "created_at": "2018-10-08T11:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386485",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c"><code>b5b7b51</code></a></td><td><code>Do not use print function in atexit</code></td></tr></table>




---

archive/issue_comments_386486.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nembray, I don't think we should put too much effort into fixing this rather obscure problem as it is going to go away with Python 3 anyway. I added a simple workaround (untested.) Would you be fine with something like this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c\"><code>b5b7b51</code></a></td><td><code>Do not use print function in atexit</code></td></tr></table>\n",
    "created_at": "2018-10-08T11:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386486",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:62" align="right">comment:62</div>

embray, I don't think we should put too much effort into fixing this rather obscure problem as it is going to go away with Python 3 anyway. I added a simple workaround (untested.) Would you be fine with something like this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c"><code>b5b7b51</code></a></td><td><code>Do not use print function in atexit</code></td></tr></table>




---

archive/issue_comments_386487.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068\"><code>a4614ab</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into 25270</code></td></tr></table>\n",
    "created_at": "2018-10-08T11:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068"><code>a4614ab</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into 25270</code></td></tr></table>




---

archive/issue_comments_386488.json:
```json
{
    "body": "Changed commit from **[`b5b7b51`](https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c)** to **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**",
    "created_at": "2018-10-08T11:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5b7b51`](https://github.com/sagemath/sagetrac-mirror/commit/b5b7b518ad5ab567ac6344b4e3a0133b4362420c)** to **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**



---

archive/issue_comments_386489.json:
```json
{
    "body": "Changed work issues from **is the patchbot happy \u21d2 positive review** to **is the patchbot happy?**",
    "created_at": "2018-10-08T11:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386489",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **is the patchbot happy â positive review** to **is the patchbot happy?**



---

archive/issue_events_349717.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-08T11:31:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349717"
}
```



---

archive/issue_events_349718.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-08T11:31:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349718"
}
```



---

archive/issue_comments_386490.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nYes, I think this is entirely reasonable.  Relying on module-level globals that may already be set to `None` during interpreter shutdown can always be a problem.  Here instead you were getting a `NameError` which is a bit more strange to me, but almost certainly has some strange interplay with how `from `__future__` import print_function` works.\n\nPositive review from me pending patchbot results, but I think it will be fine...",
    "created_at": "2018-10-08T11:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386490",
    "user": "https://github.com/embray"
}
```

<div id="comment:65" align="right">comment:65</div>

Yes, I think this is entirely reasonable.  Relying on module-level globals that may already be set to `None` during interpreter shutdown can always be a problem.  Here instead you were getting a `NameError` which is a bit more strange to me, but almost certainly has some strange interplay with how `from `__future__` import print_function` works.

Positive review from me pending patchbot results, but I think it will be fine...



---

archive/issue_events_349719.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-08T11:46:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349719"
}
```



---

archive/issue_events_349720.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-08T11:46:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349720"
}
```



---

archive/issue_comments_386491.json:
```json
{
    "body": "Changed branch from **[u/saraedum/25270](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/25270)** to **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**",
    "created_at": "2018-10-20T19:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386491",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/saraedum/25270](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/25270)** to **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)**



---

archive/issue_events_349721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-20T19:02:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349721"
}
```



---

archive/issue_events_349722.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f0981653db285a99bf1b1a8245306879fd2e667d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-10-20T19:02:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349722"
}
```



---

archive/issue_events_349723.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T14:43:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349723"
}
```



---

archive/issue_events_349724.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T14:43:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25270#event-349724"
}
```



---

archive/issue_comments_386492.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nI assume?",
    "created_at": "2018-10-28T14:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386492",
    "user": "https://github.com/embray"
}
```

<div id="comment:67" align="right">comment:67</div>

I assume?



---

archive/issue_comments_386493.json:
```json
{
    "body": "Changed commit from **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)** to none",
    "created_at": "2018-10-28T14:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25270#issuecomment-386493",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`a4614ab`](https://github.com/sagemath/sagetrac-mirror/commit/a4614abfd029249ce92219204f8dd5c012b99068)** to none
