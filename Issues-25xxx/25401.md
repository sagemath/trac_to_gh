# Issue 25401: py3: fix maxima interface

archive/issues_025164.json:
```json
{
    "body": "that prevents sage-python3 8.3.b2 to start.\n\nsage-python3 does no start anymore :\n\n```\n    575         self._prompt_wait = ([self._prompt.encode('ascii')] +\n--> 576                              [re.compile(x) for x in self._ask] +\n        global re.compile = <function compile at 0x7f7eb678c8c8>\n        global x = undefined\n        self._ask = [b'zero or nonzero\\\\?', b'an integer\\\\?', b'positive, negat\\\nive or zero\\\\?', b'positive or negative\\\\?', b'positive or zero\\\\?', b'equal to\\\n .*\\\\?']\n    577                              [b'Break [0-9]+'])  # note that you might \\\nneed to change _expect_expr if you\n    578                                                  # change this\n    579         self._error_re = re.compile('(Principal Value|debugmode|incorre\\\nct syntax|Maxima encountered a Lisp error)')\n    580         self._display2d = False\n    581\n    582     def set_seed(self, seed=None):\n    583         \"\"\"\n    584         http://maxima.sourceforge.net/docs/manual/maxima_10.html\n    585         make_random_state (n) returns a new random state object created\\\n from an\n    586         integer seed value equal to n modulo 2^32. n may be negative.\n    587\n    588         EXAMPLES::\n    589\n    590             sage: m = Maxima()\n...\nAttributeError: 'bytes' object has no attribute 'encode'\n```\n\nCC:  @embray @jdemeyer @kiwifb\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/25401\n\n",
    "closed_at": "2018-05-28T13:57:27Z",
    "created_at": "2018-05-19T12:25:20Z",
    "labels": [
        "component: python3",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "py3: fix maxima interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25401",
    "user": "https://github.com/fchapoton"
}
```
that prevents sage-python3 8.3.b2 to start.

sage-python3 does no start anymore :

```
    575         self._prompt_wait = ([self._prompt.encode('ascii')] +
--> 576                              [re.compile(x) for x in self._ask] +
        global re.compile = <function compile at 0x7f7eb678c8c8>
        global x = undefined
        self._ask = [b'zero or nonzero\\?', b'an integer\\?', b'positive, negat\
ive or zero\\?', b'positive or negative\\?', b'positive or zero\\?', b'equal to\
 .*\\?']
    577                              [b'Break [0-9]+'])  # note that you might \
need to change _expect_expr if you
    578                                                  # change this
    579         self._error_re = re.compile('(Principal Value|debugmode|incorre\
ct syntax|Maxima encountered a Lisp error)')
    580         self._display2d = False
    581
    582     def set_seed(self, seed=None):
    583         """
    584         http://maxima.sourceforge.net/docs/manual/maxima_10.html
    585         make_random_state (n) returns a new random state object created\
 from an
    586         integer seed value equal to n modulo 2^32. n may be negative.
    587
    588         EXAMPLES::
    589
    590             sage: m = Maxima()
...
AttributeError: 'bytes' object has no attribute 'encode'
```

CC:  @embray @jdemeyer @kiwifb

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/25401





---

archive/issue_comments_377263.json:
```json
{
    "body": "<a id='comment:1'></a>not really sure if this is the right fix. But I am quite annoyed that python3-sage does not start anymore...\n\n---\nNew commits:",
    "created_at": "2018-05-19T12:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377263",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>not really sure if this is the right fix. But I am quite annoyed that python3-sage does not start anymore...

---
New commits:



---

archive/issue_comments_377264.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-19T12:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377264",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_377265.json:
```json
{
    "body": "<a id='comment:2'></a>this does not fix the problem",
    "created_at": "2018-05-19T16:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377265",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>this does not fix the problem



---

archive/issue_comments_377266.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-19T16:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377266",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_377267.json:
```json
{
    "body": "<a id='comment:3'></a>For completeness can you paste the offending error in the description. I know where you posted in an another ticket but I'd rather not switch back and forth just to look at the problem.",
    "created_at": "2018-05-19T20:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377267",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>For completeness can you paste the offending error in the description. I know where you posted in an another ticket but I'd rather not switch back and forth just to look at the problem.



---

archive/issue_comments_377268.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,35 @@\n-that prevents python3-sage 8.3.b2 to start\n+that prevents sage-python3 8.3.b2 to start.\n+\n+sage-python3 does no start anymore :\n+\n+\\`\\`\\`\n+    575         self._prompt_wait = ([self._prompt.encode('ascii')] +\n+--> 576                              [re.compile(x) for x in self._ask] +\n+        global re.compile = <function compile at 0x7f7eb678c8c8>\n+        global x = undefined\n+        self._ask = [b'zero or nonzero\\\\?', b'an integer\\\\?', b'positive, negat\\\n+ive or zero\\\\?', b'positive or negative\\\\?', b'positive or zero\\\\?', b'equal to\\\n+ .*\\\\?']\n+    577                              [b'Break [0-9]+'])  # note that you might \\\n+need to change _expect_expr if you\n+    578                                                  # change this\n+    579         self._error_re = re.compile('(Principal Value|debugmode|incorre\\\n+ct syntax|Maxima encountered a Lisp error)')\n+    580         self._display2d = False\n+    581\n+    582     def set_seed(self, seed=None):\n+    583         \"\"\"\n+    584         http://maxima.sourceforge.net/docs/manual/maxima_10.html\n+    585         make_random_state (n) returns a new random state object created\\\n+ from an\n+    586         integer seed value equal to n modulo 2^32. n may be negative.\n+    587\n+    588         EXAMPLES::\n+    589\n+    590             sage: m = Maxima()\n+...\n+AttributeError: 'bytes' object has no attribute 'encode'\n+\\`\\`\\`\n \n Author: Fr\u00e9d\u00e9ric Chapoton\n \n```\n",
    "created_at": "2018-05-20T05:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377268",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,35 @@
-that prevents python3-sage 8.3.b2 to start
+that prevents sage-python3 8.3.b2 to start.
+
+sage-python3 does no start anymore :
+
+\`\`\`
+    575         self._prompt_wait = ([self._prompt.encode('ascii')] +
+--> 576                              [re.compile(x) for x in self._ask] +
+        global re.compile = <function compile at 0x7f7eb678c8c8>
+        global x = undefined
+        self._ask = [b'zero or nonzero\\?', b'an integer\\?', b'positive, negat\
+ive or zero\\?', b'positive or negative\\?', b'positive or zero\\?', b'equal to\
+ .*\\?']
+    577                              [b'Break [0-9]+'])  # note that you might \
+need to change _expect_expr if you
+    578                                                  # change this
+    579         self._error_re = re.compile('(Principal Value|debugmode|incorre\
+ct syntax|Maxima encountered a Lisp error)')
+    580         self._display2d = False
+    581
+    582     def set_seed(self, seed=None):
+    583         """
+    584         http://maxima.sourceforge.net/docs/manual/maxima_10.html
+    585         make_random_state (n) returns a new random state object created\
+ from an
+    586         integer seed value equal to n modulo 2^32. n may be negative.
+    587
+    588         EXAMPLES::
+    589
+    590             sage: m = Maxima()
+...
+AttributeError: 'bytes' object has no attribute 'encode'
+\`\`\`
 
 Author: Frédéric Chapoton
 
```




---

archive/issue_comments_377269.json:
```json
{
    "body": "<a id='comment:5'></a>This seems to be handled correctly in #24269",
    "created_at": "2018-05-20T06:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377269",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>This seems to be handled correctly in #24269



---

archive/issue_comments_377270.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-05-20T09:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377270",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_377271.json:
```json
{
    "body": "<a id='comment:6'></a>ok, let us close this one and work on #24269 instead",
    "created_at": "2018-05-20T09:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377271",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>ok, let us close this one and work on #24269 instead



---

archive/issue_events_063793.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-20T09:19:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25401#event-63793"
}
```



---

archive/issue_comments_377272.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-05-28T13:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25401#issuecomment-377272",
    "user": "https://github.com/embray"
}
```

Resolution: duplicate



---

archive/issue_events_063794.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-28T13:57:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25401",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25401#event-63794"
}
```
