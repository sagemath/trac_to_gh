# Issue 25629: Bad latex translation of output

archive/issues_025392.json:
```json
{
    "body": "sage 8.3 beta 6.\n\n\n```\n    sage: var('t')\n    sage: anti=integrate(exp(t)*log(1+t),t)\n    sage: anti\n    e^(-1)*exp_integral_e(1, -t - 1) + e^t*log(t + 1)\n\n    sage: latex(anti)\n    e^{\\left(-1\\right)} exp_integral_e\\left(1, -t - 1\\right) + e^{t} \\log\\left(t + 1\\right)\n\n```\n\nThe latex above is not good at all. It renders as (do not know how to inser images here).\n\n\nWhich is not good. May be sage needs to use a `\\DeclareMathOperator` on `exp_integral_e`\n\nCC:  @rwst @tscrim @alexjbest\n\nKeywords: latex,beginner\n\nBranch/Commit: 97e08e277bfe1fd1b600fce511803073e15e31d5\n\nReviewer: Alex J. Best\n\nAuthor: Durgesh Agrawal\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25629\n\n",
    "closed_at": "2019-01-26T15:53:29Z",
    "created_at": "2018-06-21T12:30:34Z",
    "labels": [
        "component: user interface",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Bad latex translation of output",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25629",
    "user": "https://github.com/nasser1"
}
```
sage 8.3 beta 6.


```
    sage: var('t')
    sage: anti=integrate(exp(t)*log(1+t),t)
    sage: anti
    e^(-1)*exp_integral_e(1, -t - 1) + e^t*log(t + 1)

    sage: latex(anti)
    e^{\left(-1\right)} exp_integral_e\left(1, -t - 1\right) + e^{t} \log\left(t + 1\right)

```

The latex above is not good at all. It renders as (do not know how to inser images here).


Which is not good. May be sage needs to use a `\DeclareMathOperator` on `exp_integral_e`

CC:  @rwst @tscrim @alexjbest

Keywords: latex,beginner

Branch/Commit: 97e08e277bfe1fd1b600fce511803073e15e31d5

Reviewer: Alex J. Best

Author: Durgesh Agrawal

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25629





---

archive/issue_comments_381116.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-06-21T13:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381116",
    "user": "https://github.com/nasser1"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_381117.json:
```json
{
    "body": "Changing keywords from \"latex\" to \"latex,beginner\".",
    "created_at": "2018-06-22T06:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381117",
    "user": "https://github.com/alexjbest"
}
```

Changing keywords from "latex" to "latex,beginner".



---

archive/issue_comments_381118.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to user interface.",
    "created_at": "2018-06-22T06:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381118",
    "user": "https://github.com/alexjbest"
}
```

Changing component from PLEASE CHANGE to user interface.



---

archive/issue_comments_381119.json:
```json
{
    "body": "<a id='comment:2'></a>It seems this can be accomplished by adding a custom `_print_latex_` method such as this one from Bessel to the classes in `src/sage/functions/exp_integral.pyc`, it looks like `E_n` is a pretty accepted notation for it.\n\n```\n    def _print_latex_(self, n, z):\n        \"\"\"\n        Custom ``_print_latex_`` method.\n\n        EXAMPLES::\n\n            sage: latex(bessel_J(1, x))\n            J_{1}(x)\n        \"\"\"\n        return r\"J_{%s}(%s)\" % (latex(n), latex(z))\n```\n\nPossibly the arguments like `latex_name=r'exp_integral_e',` should also be removed in the same file then.",
    "created_at": "2018-06-22T06:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381119",
    "user": "https://github.com/alexjbest"
}
```

<a id='comment:2'></a>It seems this can be accomplished by adding a custom `_print_latex_` method such as this one from Bessel to the classes in `src/sage/functions/exp_integral.pyc`, it looks like `E_n` is a pretty accepted notation for it.

```
    def _print_latex_(self, n, z):
        """
        Custom ``_print_latex_`` method.

        EXAMPLES::

            sage: latex(bessel_J(1, x))
            J_{1}(x)
        """
        return r"J_{%s}(%s)" % (latex(n), latex(z))
```

Possibly the arguments like `latex_name=r'exp_integral_e',` should also be removed in the same file then.



---

archive/issue_comments_381120.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-10T13:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381120",
    "user": "https://github.com/durgeshra"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_381121.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2019-01-10T13:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381121",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_381122.json:
```json
{
    "body": "<a id='comment:6'></a>The patchbot says there are 3 failing doctests:\n\n```\nsage -t --long src/sage/functions/other.py  # 3 doctests failed\n```\n\nRalf, I was wondering if you could quickly confirm that this is the correct thing to do.",
    "created_at": "2019-01-10T17:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381122",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>The patchbot says there are 3 failing doctests:

```
sage -t --long src/sage/functions/other.py  # 3 doctests failed
```

Ralf, I was wondering if you could quickly confirm that this is the correct thing to do.



---

archive/issue_events_064188.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-01-10T17:46:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25629#event-64188"
}
```



---

archive/issue_comments_381123.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-11T03:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_381124.json:
```json
{
    "body": "<a id='comment:8'></a>`@`tscrim The doctest failures were due to change in LaTeX translation. I have fixed them and they work fine now. :-)",
    "created_at": "2019-01-11T05:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381124",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:8'></a>`@`tscrim The doctest failures were due to change in LaTeX translation. I have fixed them and they work fine now. :-)



---

archive/issue_comments_381125.json:
```json
{
    "body": "<a id='comment:10'></a>`@`tscrim `@`rws Any reviews on the commit, please?",
    "created_at": "2019-01-12T11:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381125",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:10'></a>`@`tscrim `@`rws Any reviews on the commit, please?



---

archive/issue_comments_381126.json:
```json
{
    "body": "<a id='comment:11'></a>Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch\n\n```\nsage: latex(sin_integral(x))\n\\operatorname{Si}\\left(x\\right)\n\n```\n\nwhich renders in latex with roman Si which looks better than without the `operatorname`.",
    "created_at": "2019-01-12T12:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381126",
    "user": "https://github.com/alexjbest"
}
```

<a id='comment:11'></a>Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch

```
sage: latex(sin_integral(x))
\operatorname{Si}\left(x\right)

```

which renders in latex with roman Si which looks better than without the `operatorname`.



---

archive/issue_comments_381127.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 alexjbest]:\n\nThen is it okay if I change the first two classes only (the ones whose LaTeX output is not rendered properly at all without the patch)?\n\n> Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch\n> \n> \n> ```\n> sage: latex(sin_integral(x))\n> \\operatorname{Si}\\left(x\\right)\n> \n> ```\n> \n> which renders in latex with roman Si which looks better than without the `operatorname`.",
    "created_at": "2019-01-12T13:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381127",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:12'></a>Replying to [comment:11 alexjbest]:

Then is it okay if I change the first two classes only (the ones whose LaTeX output is not rendered properly at all without the patch)?

> Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch
> 
> 
> ```
> sage: latex(sin_integral(x))
> \operatorname{Si}\left(x\right)
> 
> ```
> 
> which renders in latex with roman Si which looks better than without the `operatorname`.



---

archive/issue_comments_381128.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-12T13:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_381129.json:
```json
{
    "body": "<a id='comment:14'></a>`@`alexjbest Now, the present diff improves the latex output of `exp_integral_e` and `exp_integral_e1` without affecting the rest. :-)",
    "created_at": "2019-01-12T13:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381129",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:14'></a>`@`alexjbest Now, the present diff improves the latex output of `exp_integral_e` and `exp_integral_e1` without affecting the rest. :-)



---

archive/issue_comments_381130.json:
```json
{
    "body": "<a id='comment:15'></a>Okay this looks good to me now. Thanks.",
    "created_at": "2019-01-13T07:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381130",
    "user": "https://github.com/alexjbest"
}
```

<a id='comment:15'></a>Okay this looks good to me now. Thanks.



---

archive/issue_comments_381131.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-13T07:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381131",
    "user": "https://github.com/alexjbest"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_064189.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:16:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25629#event-64189"
}
```



---

archive/issue_events_064190.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:16:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25629#event-64190"
}
```



---

archive/issue_comments_381132.json:
```json
{
    "body": "<a id='comment:16'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381132",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_381133.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-26T15:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25629#issuecomment-381133",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064191.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-26T15:53:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25629",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25629#event-64191"
}
```
