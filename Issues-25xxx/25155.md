# Issue 25155: Implement global options for WQSym

archive/issues_024918.json:
```json
{
    "assignees": [],
    "body": "Ordered set partitions are in bijection with packed words. It would be nice to be able to work with packed words in the Hopf algebra WQSym. In the branch, I shall also implement \"tight\" and \"compact\" notations for the output.\n\nDepends on #25133\n\nCC:  @alauve @tscrim @darijgr @amypang @zabrocki\n\nKeywords: **IMA coding sprint, CHAs**\n\nBranch: **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Aaron Lauve**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25155_\n\n",
    "closed_at": "2018-05-19T15:56:39Z",
    "created_at": "2018-04-12T15:53:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement global options for WQSym",
    "type": "issue",
    "updated_at": "2018-06-19T03:40:37Z",
    "url": "https://github.com/sagemath/sage/issues/25155",
    "user": "https://github.com/alauve"
}
```
Ordered set partitions are in bijection with packed words. It would be nice to be able to work with packed words in the Hopf algebra WQSym. In the branch, I shall also implement "tight" and "compact" notations for the output.

Depends on #25133

CC:  @alauve @tscrim @darijgr @amypang @zabrocki

Keywords: **IMA coding sprint, CHAs**

Branch: **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**

Reviewer: **Travis Scrimshaw**

Author: **Aaron Lauve**

_Issue created by migration from https://trac.sagemath.org/ticket/25155_





---

archive/issue_events_330171.json:
```json
{
    "actor": "https://github.com/alauve",
    "created_at": "2018-04-12T15:53:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330171"
}
```



---

archive/issue_events_330172.json:
```json
{
    "actor": "https://github.com/alauve",
    "created_at": "2018-04-12T15:53:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330172"
}
```



---

archive/issue_events_330173.json:
```json
{
    "actor": "https://github.com/alauve",
    "created_at": "2018-04-12T15:53:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330173"
}
```



---

archive/issue_events_330174.json:
```json
{
    "actor": "https://github.com/alauve",
    "created_at": "2018-04-12T15:53:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330174"
}
```



---

archive/issue_comments_387174.json:
```json
{
    "body": "Branch: **[public/combinat/wqsym_options-25155](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/wqsym_options-25155)**",
    "created_at": "2018-04-12T19:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387174",
    "user": "https://github.com/alauve"
}
```

Branch: **[public/combinat/wqsym_options-25155](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/wqsym_options-25155)**



---

archive/issue_comments_387175.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a3666467d5df265c0a79f7444daef32efbe1ab2\">8a36664</a></td><td><code>documentation fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4a3af91b20249401c50684b27fd7f7aaccd323e\">b4a3af9</a></td><td><code>implement WQSym -> QSym projection</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc6b2ae9d951203dac1640856ae8eaa047f02d2e\">fc6b2ae</a></td><td><code>fix to_quasisymmetric_function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f75e10d4033a0bd51f61c1796bfb6cb25be92d90\">f75e10d</a></td><td><code>if w1 is a word, return a word, else a list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f8f272c6e4450e82da4a871888b9612c3b32a42\">3f8f272</a></td><td><code>added doc test, minor change for test of Composition, correct import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06fd19d5ca4db85ac3e7887e2767ed0663dbe52d\">06fd19d</a></td><td><code>Merge branch 'public/25018/bug_in_shuffle' of git://trac.sagemath.org/sage into public/combinat/extend_shuffle_product-15597</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4252484fa8d960ad5629efadfdfa7d86dd328654\">4252484</a></td><td><code>Merge branch 'public/combinat/extend_shuffle_product-15597' of git://trac.sagemath.org/sage into public/combinat/implement_wqsym-25133</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82240b2f1ec11cf718cbd6e832fd2ef1a27b9df1\">82240b2</a></td><td><code>Fixing some details and making Symmetric capitalized in the name.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d90234eb9f0cd397daa26725f752b66fc15a3c5\">9d90234</a></td><td><code>Initial additional of global options to WQSym</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c\">fd61441</a></td><td><code>Added two global options for display of elements of WordQuasiSymmetricFunctions.</code></td></tr></table>\n",
    "created_at": "2018-04-12T19:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387175",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a3666467d5df265c0a79f7444daef32efbe1ab2">8a36664</a></td><td><code>documentation fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4a3af91b20249401c50684b27fd7f7aaccd323e">b4a3af9</a></td><td><code>implement WQSym -> QSym projection</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc6b2ae9d951203dac1640856ae8eaa047f02d2e">fc6b2ae</a></td><td><code>fix to_quasisymmetric_function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f75e10d4033a0bd51f61c1796bfb6cb25be92d90">f75e10d</a></td><td><code>if w1 is a word, return a word, else a list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f8f272c6e4450e82da4a871888b9612c3b32a42">3f8f272</a></td><td><code>added doc test, minor change for test of Composition, correct import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06fd19d5ca4db85ac3e7887e2767ed0663dbe52d">06fd19d</a></td><td><code>Merge branch 'public/25018/bug_in_shuffle' of git://trac.sagemath.org/sage into public/combinat/extend_shuffle_product-15597</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4252484fa8d960ad5629efadfdfa7d86dd328654">4252484</a></td><td><code>Merge branch 'public/combinat/extend_shuffle_product-15597' of git://trac.sagemath.org/sage into public/combinat/implement_wqsym-25133</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82240b2f1ec11cf718cbd6e832fd2ef1a27b9df1">82240b2</a></td><td><code>Fixing some details and making Symmetric capitalized in the name.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d90234eb9f0cd397daa26725f752b66fc15a3c5">9d90234</a></td><td><code>Initial additional of global options to WQSym</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c">fd61441</a></td><td><code>Added two global options for display of elements of WordQuasiSymmetricFunctions.</code></td></tr></table>




---

archive/issue_comments_387176.json:
```json
{
    "body": "Commit: **[fd61441](https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c)**",
    "created_at": "2018-04-12T19:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387176",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[fd61441](https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c)**



---

archive/issue_comments_387177.json:
```json
{
    "body": "Changed dependencies from **25133** to **#25133**",
    "created_at": "2018-04-12T19:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387177",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **25133** to **#25133**



---

archive/issue_comments_387178.json:
```json
{
    "body": "Changed commit from **[fd61441](https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c)** to **[c828b0e](https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91)**",
    "created_at": "2018-04-13T15:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387178",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd61441](https://github.com/sagemath/sagetrac-mirror/commit/fd61441bf9ecc419fd5eaee9b85c9bd39e27b70c)** to **[c828b0e](https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91)**



---

archive/issue_comments_387179.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91\">c828b0e</a></td><td><code>Some reviewer changes.</code></td></tr></table>\n",
    "created_at": "2018-04-13T15:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387179",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91">c828b0e</a></td><td><code>Some reviewer changes.</code></td></tr></table>




---

archive/issue_comments_387180.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nIf my changes look good, then positive review.",
    "created_at": "2018-04-13T15:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387180",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">Comment 5</div>

If my changes look good, then positive review.



---

archive/issue_events_330175.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-04-13T15:44:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330175"
}
```



---

archive/issue_comments_387181.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-04-13T15:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387181",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_387182.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3\">ba70317</a></td><td><code>A few more reviewer changes.</code></td></tr></table>\n",
    "created_at": "2018-04-13T16:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387182",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3">ba70317</a></td><td><code>A few more reviewer changes.</code></td></tr></table>




---

archive/issue_comments_387183.json:
```json
{
    "body": "Changed commit from **[c828b0e](https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91)** to **[ba70317](https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3)**",
    "created_at": "2018-04-13T16:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387183",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c828b0e](https://github.com/sagemath/sagetrac-mirror/commit/c828b0eebbeea623a3ad7e4df693136513e26b91)** to **[ba70317](https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3)**



---

archive/issue_comments_387184.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI'm happy with these changes. How do others feel about the following snippet from `OrderedSetPartition` ?:\n\n```\n    INPUT:\n\n    - ``parts`` -- the parts of the ordered set partition\n    - ``from_word`` -- (optional) allows the creation of an ordered set\n      partition from any finite word or iterable , e.g., a packed word\n```\n\nThe reader may be led to think that `parts` is required. In fact, the way the code is written, exactly one of `parts` and `from_word` is used (and it's `from_word` if that one is given). It must be a keyword/named argument, as the code is currently written, because I was being lazy about how to distinguish between the two possible inputs. E.g., if the lone argument [[1,2],[4],[3]] is passed, should this be viewed as a word on the alphabet \"finite subsets of `NN`\" or as a partition of {1,2,3,4} into blocks? Probably the latter, but should I make that restriction on future use?",
    "created_at": "2018-04-26T18:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387184",
    "user": "https://github.com/alauve"
}
```

<div id="comment:8" align="right">Comment 8</div>

I'm happy with these changes. How do others feel about the following snippet from `OrderedSetPartition` ?:

```
    INPUT:

    - ``parts`` -- the parts of the ordered set partition
    - ``from_word`` -- (optional) allows the creation of an ordered set
      partition from any finite word or iterable , e.g., a packed word
```

The reader may be led to think that `parts` is required. In fact, the way the code is written, exactly one of `parts` and `from_word` is used (and it's `from_word` if that one is given). It must be a keyword/named argument, as the code is currently written, because I was being lazy about how to distinguish between the two possible inputs. E.g., if the lone argument [[1,2],[4],[3]] is passed, should this be viewed as a word on the alphabet "finite subsets of `NN`" or as a partition of {1,2,3,4} into blocks? Probably the latter, but should I make that restriction on future use?



---

archive/issue_comments_387185.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nJust say \"(in this case, ``parts`` needs not be provided)\"?",
    "created_at": "2018-04-26T20:41:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387185",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:9" align="right">Comment 9</div>

Just say "(in this case, ``parts`` needs not be provided)"?



---

archive/issue_comments_387186.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThe other way would be to say \"one of the following must be provided\" but that is slightly misleading as `parts` could be a packed word IIRC. Thinking a little more, perhaps this is better:\n\n```\nINPUT\n\n- ``parts`` -- an object or iterable that defines an ordered set partition;\n  if there is ambiguity, use the keyword ``from_word`` if the input should\n  be treated as a packed word\n```",
    "created_at": "2018-04-27T00:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387186",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">Comment 10</div>

The other way would be to say "one of the following must be provided" but that is slightly misleading as `parts` could be a packed word IIRC. Thinking a little more, perhaps this is better:

```
INPUT

- ``parts`` -- an object or iterable that defines an ordered set partition;
  if there is ambiguity, use the keyword ``from_word`` if the input should
  be treated as a packed word
```



---

archive/issue_comments_387187.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nArgh! Do we really want duck-typing here? Please think hard about whether this is really unambiguous and whether it's worth the slowdown.",
    "created_at": "2018-04-27T00:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387187",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:11" align="right">Comment 11</div>

Argh! Do we really want duck-typing here? Please think hard about whether this is really unambiguous and whether it's worth the slowdown.



---

archive/issue_comments_387188.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nYes, this is the behavior we want. It is stupid and annoying to make users have to use a keyword argument when a packed word as a list is sufficient. The ambiguity is when you want a packed word whose letters are sets/lists/etc. (This is also not ducktyping, but parsing input. Ducktyping is doing something like `L[0]`, where `L` could be a list/tuple/iterable and gets treated in the same way.)",
    "created_at": "2018-04-27T00:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387188",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">Comment 12</div>

Yes, this is the behavior we want. It is stupid and annoying to make users have to use a keyword argument when a packed word as a list is sufficient. The ambiguity is when you want a packed word whose letters are sets/lists/etc. (This is also not ducktyping, but parsing input. Ducktyping is doing something like `L[0]`, where `L` could be a list/tuple/iterable and gets treated in the same way.)



---

archive/issue_comments_387189.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nSo what is better for `__classcall_private__`? Trying to process an ordered set partition first, or trying to process a packed word first?\n\nAt present, the code first tries to process `part` as a packed word:\n\n```\n        # if `parts` looks like a sequence of \"letters\" then treat it like a word.\n        if parts in Words() or (len(parts) > 0 and isinstance(parts[0], (str, int, Integer))):\n            return OrderedSetPartitions().from_finite_word(Words()(parts))\n        else:\n            P = OrderedSetPartitions( reduce(lambda x,y: x.union(y), map(Set, parts), Set([])) )\n            return P.element_class(P, parts)\n```\n\nbut this might be better:\n\n```\n        # if `parts` looks like a sequence of \"sets\" then treat it like an ordered set partition.\n        if parts in OrderedSetPartitions() or (len(parts) > 0 and isinstance(parts[0], (list, tuple, set, Set))):\n            P = OrderedSetPartitions( reduce(lambda x,y: x.union(y), map(Set, parts), Set([])) )\n            return P.element_class(P, parts)\n        else:\n            return OrderedSetPartitions().from_finite_word(Words()(parts))\n```",
    "created_at": "2018-05-01T02:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387189",
    "user": "https://github.com/alauve"
}
```

<div id="comment:13" align="right">Comment 13</div>

So what is better for `__classcall_private__`? Trying to process an ordered set partition first, or trying to process a packed word first?

At present, the code first tries to process `part` as a packed word:

```
        # if `parts` looks like a sequence of "letters" then treat it like a word.
        if parts in Words() or (len(parts) > 0 and isinstance(parts[0], (str, int, Integer))):
            return OrderedSetPartitions().from_finite_word(Words()(parts))
        else:
            P = OrderedSetPartitions( reduce(lambda x,y: x.union(y), map(Set, parts), Set([])) )
            return P.element_class(P, parts)
```

but this might be better:

```
        # if `parts` looks like a sequence of "sets" then treat it like an ordered set partition.
        if parts in OrderedSetPartitions() or (len(parts) > 0 and isinstance(parts[0], (list, tuple, set, Set))):
            P = OrderedSetPartitions( reduce(lambda x,y: x.union(y), map(Set, parts), Set([])) )
            return P.element_class(P, parts)
        else:
            return OrderedSetPartitions().from_finite_word(Words()(parts))
```



---

archive/issue_comments_387190.json:
```json
{
    "body": "Changed commit from **[ba70317](https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3)** to **[6e50492](https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006)**",
    "created_at": "2018-05-01T03:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387190",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ba70317](https://github.com/sagemath/sagetrac-mirror/commit/ba7031707f3a096068271185b71f8b4ad339aac3)** to **[6e50492](https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006)**



---

archive/issue_comments_387191.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006\">6e50492</a></td><td><code>updated doc string for intended usage vis.a.vis packed words</code></td></tr></table>\n",
    "created_at": "2018-05-01T03:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387191",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006">6e50492</a></td><td><code>updated doc string for intended usage vis.a.vis packed words</code></td></tr></table>




---

archive/issue_comments_387192.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@alauve](#comment%3A13):\n> So what is better for `__classcall_private__`? Trying to process an ordered set partition first, or trying to process a packed word first?\n\nI don't think it matters. Actually, it only treats words in `(str, int, Integer)` (not even rationals; a more robust check is `x in ZZ` modulo `str`). At least, I wouldn't worry about it until there is a definite problem.",
    "created_at": "2018-05-02T12:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387192",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@alauve](#comment%3A13):
> So what is better for `__classcall_private__`? Trying to process an ordered set partition first, or trying to process a packed word first?

I don't think it matters. Actually, it only treats words in `(str, int, Integer)` (not even rationals; a more robust check is `x in ZZ` modulo `str`). At least, I wouldn't worry about it until there is a definite problem.



---

archive/issue_comments_387193.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI don't quite know what you mean by \"modulo `str`.\" Are you suggesting changes?\n\nAdditionally, are there any more changes from #25133 that need to be brought in, or is this good to go?",
    "created_at": "2018-05-04T14:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387193",
    "user": "https://github.com/alauve"
}
```

<div id="comment:16" align="right">Comment 16</div>

I don't quite know what you mean by "modulo `str`." Are you suggesting changes?

Additionally, are there any more changes from #25133 that need to be brought in, or is this good to go?



---

archive/issue_comments_387194.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI am suggesting a change: `isinstance(parts[0], (str, int, Integer))` -> `parts[0] in ZZ or isinstance(parts[0], str)`. The \"modulo `str`\" was because that is still a useful check.\n\nThere is also a doctest in `combinat/words/finite_word.py` needing a trivial fix (see the patchbot report).",
    "created_at": "2018-05-05T06:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387194",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">Comment 17</div>

I am suggesting a change: `isinstance(parts[0], (str, int, Integer))` -> `parts[0] in ZZ or isinstance(parts[0], str)`. The "modulo `str`" was because that is still a useful check.

There is also a doctest in `combinat/words/finite_word.py` needing a trivial fix (see the patchbot report).



---

archive/issue_comments_387195.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6\">27b9a98</a></td><td><code>doctest and Travis' check</code></td></tr></table>\n",
    "created_at": "2018-05-06T18:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387195",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6">27b9a98</a></td><td><code>doctest and Travis' check</code></td></tr></table>




---

archive/issue_comments_387196.json:
```json
{
    "body": "Changed commit from **[6e50492](https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006)** to **[27b9a98](https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6)**",
    "created_at": "2018-05-06T18:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387196",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6e50492](https://github.com/sagemath/sagetrac-mirror/commit/6e504920668091cf4ec7fab1dbbee7843ef66006)** to **[27b9a98](https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6)**



---

archive/issue_events_330176.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-06T23:03:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330176"
}
```



---

archive/issue_events_330177.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-06T23:03:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330177"
}
```



---

archive/issue_comments_387197.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThanks. LGTM.",
    "created_at": "2018-05-06T23:03:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387197",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">Comment 19</div>

Thanks. LGTM.



---

archive/issue_comments_387198.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nThanks, Travis!",
    "created_at": "2018-05-07T03:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387198",
    "user": "https://github.com/alauve"
}
```

<div id="comment:20" align="right">Comment 20</div>

Thanks, Travis!



---

archive/issue_comments_387199.json:
```json
{
    "body": "Changed commit from **[27b9a98](https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6)** to **[5b2dc1b](https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3)**",
    "created_at": "2018-05-09T23:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387199",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[27b9a98](https://github.com/sagemath/sagetrac-mirror/commit/27b9a984e416d878b1aeb3378cc36e693b95cfb6)** to **[5b2dc1b](https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3)**



---

archive/issue_events_330178.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-05-09T23:55:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330178"
}
```



---

archive/issue_events_330179.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-05-09T23:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330179"
}
```



---

archive/issue_comments_387200.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc276dd42f4f45b703182190afe54f28af961ae2\">bc276dd</a></td><td><code>Merge branch 'public/combinat/implement_wqsym-25133' of git://trac.sagemath.org/sage into public/combinat/implement_wqsym-25133</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3\">5b2dc1b</a></td><td><code>Merge branch 'public/combinat/wqsym_options-25155' of git://trac.sagemath.org/sage into public/combinat/wqsym_options-25155</code></td></tr></table>\n",
    "created_at": "2018-05-09T23:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387200",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc276dd42f4f45b703182190afe54f28af961ae2">bc276dd</a></td><td><code>Merge branch 'public/combinat/implement_wqsym-25133' of git://trac.sagemath.org/sage into public/combinat/implement_wqsym-25133</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3">5b2dc1b</a></td><td><code>Merge branch 'public/combinat/wqsym_options-25155' of git://trac.sagemath.org/sage into public/combinat/wqsym_options-25155</code></td></tr></table>




---

archive/issue_comments_387201.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nTrivial rebase.",
    "created_at": "2018-05-09T23:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387201",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">Comment 22</div>

Trivial rebase.



---

archive/issue_events_330180.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-09T23:56:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330180"
}
```



---

archive/issue_events_330181.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-09T23:56:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330181"
}
```



---

archive/issue_events_330182.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-09T23:56:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330182"
}
```



---

archive/issue_events_330183.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-09T23:56:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330183"
}
```



---

archive/issue_comments_387202.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nPDF docs don't build",
    "created_at": "2018-05-17T21:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387202",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">Comment 23</div>

PDF docs don't build



---

archive/issue_events_330184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-17T21:43:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330184"
}
```



---

archive/issue_events_330185.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-17T21:43:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330185"
}
```



---

archive/issue_comments_387203.json:
```json
{
    "body": "Changed commit from **[5b2dc1b](https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3)** to **[77ae3be](https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b)**",
    "created_at": "2018-05-17T21:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387203",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5b2dc1b](https://github.com/sagemath/sagetrac-mirror/commit/5b2dc1bd84c10d11266dcedd74df43d332c9b1c3)** to **[77ae3be](https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b)**



---

archive/issue_comments_387204.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef1f3b78ff16516ee9b25f8c767ca9bc34ca6c39\">ef1f3b7</a></td><td><code>link FQSym doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98fca9c1edca09366037b5b900496f4cde39bd89\">98fca9c</a></td><td><code>Merge branch 'public/combinat/fqsym2' of trac.sagemath.org:sage into homs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/416a8c086d21c467e0510564c99ae64a415f2e58\">416a8c0</a></td><td><code>more corrections due to recent merge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f2ddfe882f31a74518cb2c7bc178a048a0e008c\">4f2ddfe</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into public/combinat/fqsym2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/beeea6afc74d4d4a41ecfcec4411b3e7edb8eec6\">beeea6a</a></td><td><code>Abstracting methods to DRY.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e4066617f6365c415ef25281b9fdf0026572544\">6e40666</a></td><td><code>Calling the M basis the monomial basis.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dc0c5c9f5dea1f78a6cdac21db48b787ceaa8d0\">8dc0c5c</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into 25136</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41a17a82d3205b51401c4a9d6f2d8d6d9e0f6411\">41a17a8</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5be6634c4370d02c7916a35922a0157c409c1ae\">c5be663</a></td><td><code>Merge branch 'public/combinat/wqsym_options-25155' of git://trac.sagemath.org/sage into 25155</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b\">77ae3be</a></td><td><code>fix broken latex in doc</code></td></tr></table>\n",
    "created_at": "2018-05-17T21:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387204",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef1f3b78ff16516ee9b25f8c767ca9bc34ca6c39">ef1f3b7</a></td><td><code>link FQSym doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98fca9c1edca09366037b5b900496f4cde39bd89">98fca9c</a></td><td><code>Merge branch 'public/combinat/fqsym2' of trac.sagemath.org:sage into homs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/416a8c086d21c467e0510564c99ae64a415f2e58">416a8c0</a></td><td><code>more corrections due to recent merge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f2ddfe882f31a74518cb2c7bc178a048a0e008c">4f2ddfe</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into public/combinat/fqsym2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/beeea6afc74d4d4a41ecfcec4411b3e7edb8eec6">beeea6a</a></td><td><code>Abstracting methods to DRY.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e4066617f6365c415ef25281b9fdf0026572544">6e40666</a></td><td><code>Calling the M basis the monomial basis.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dc0c5c9f5dea1f78a6cdac21db48b787ceaa8d0">8dc0c5c</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into 25136</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41a17a82d3205b51401c4a9d6f2d8d6d9e0f6411">41a17a8</a></td><td><code>Merge branch 'public/combinat/fqsym2' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5be6634c4370d02c7916a35922a0157c409c1ae">c5be663</a></td><td><code>Merge branch 'public/combinat/wqsym_options-25155' of git://trac.sagemath.org/sage into 25155</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b">77ae3be</a></td><td><code>fix broken latex in doc</code></td></tr></table>




---

archive/issue_comments_387205.json:
```json
{
    "body": "Changed commit from **[77ae3be](https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b)** to **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**",
    "created_at": "2018-05-17T22:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[77ae3be](https://github.com/sagemath/sagetrac-mirror/commit/77ae3be2fb83600b887b2957f175ee007c94ea4b)** to **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**



---

archive/issue_comments_387206.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e85f9166b6ade5be2fb427fcbe46b34d19add11\">5e85f91</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a\">c2ffc13</a></td><td><code>fix broken latex in doc</code></td></tr></table>\n",
    "created_at": "2018-05-17T22:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e85f9166b6ade5be2fb427fcbe46b34d19add11">5e85f91</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a">c2ffc13</a></td><td><code>fix broken latex in doc</code></td></tr></table>




---

archive/issue_events_330186.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-05-17T22:05:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330186"
}
```



---

archive/issue_events_330187.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-05-17T22:05:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330187"
}
```



---

archive/issue_comments_387207.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nThis should do it. (Sorry for forced push -- I had a dirty develop branch, and it smuggled several other tickets in this.)",
    "created_at": "2018-05-17T22:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387207",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:26" align="right">Comment 26</div>

This should do it. (Sorry for forced push -- I had a dirty develop branch, and it smuggled several other tickets in this.)



---

archive/issue_comments_387208.json:
```json
{
    "body": "Changed branch from **[public/combinat/wqsym_options-25155](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/wqsym_options-25155)** to **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**",
    "created_at": "2018-05-19T15:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387208",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/wqsym_options-25155](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/wqsym_options-25155)** to **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)**



---

archive/issue_events_330188.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-19T15:56:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330188"
}
```



---

archive/issue_events_330189.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6c84dcbe5b202c4da0dfce7a512c1d0fd516e139",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-19T15:56:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25155#event-330189"
}
```



---

archive/issue_comments_387209.json:
```json
{
    "body": "Changed commit from **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)** to none",
    "created_at": "2018-06-14T17:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387209",
    "user": "https://github.com/alauve"
}
```

Changed commit from **[c2ffc13](https://github.com/sagemath/sagetrac-mirror/commit/c2ffc13a933a35637e4cb6e8ef4e089744d7fe9a)** to none



---

archive/issue_comments_387210.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nIn my view, this ticket is incomplete. Notice the following:\n\n```\nsage: M = WordQuasiSymmetricFunctions(QQ).M()\nsage: c = OrderedSetPartition([1,1,2,1]); c # enter an OSP as a packed word\n[{1, 2, 4}, {3}]\nsage: M[c]\nM[{1, 2, 4}, {3}]\nsage: m = M[[1,2,4],[3]]; m\nM[{1, 2, 4}, {3}]\nsage: M.options.objects = \"words\"\nsage: m\nM[1, 1, 2, 1]\nsage: M[1,1,2,1], M[[1,1,2,1]]\n(M[{1, 2}], M[{1, 2}])\n```\n\nI'd like to see things like `M[1,1,2,1]` and/or `M[This is the Trac macro *1,1,2,1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,1,2,1-macro)` return the basis element corresponding to the indicated packed word, i.e., `M[1, 1, 2, 1]`.\n\nIf anybody thinks this is worth a new ticket, perhaps they could weigh-in, after taking a peek at this branch: \n`public/combinat/allow-packed-words-in-wqsym`",
    "created_at": "2018-06-14T17:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387210",
    "user": "https://github.com/alauve"
}
```

<div id="comment:28" align="right">Comment 28</div>

In my view, this ticket is incomplete. Notice the following:

```
sage: M = WordQuasiSymmetricFunctions(QQ).M()
sage: c = OrderedSetPartition([1,1,2,1]); c # enter an OSP as a packed word
[{1, 2, 4}, {3}]
sage: M[c]
M[{1, 2, 4}, {3}]
sage: m = M[[1,2,4],[3]]; m
M[{1, 2, 4}, {3}]
sage: M.options.objects = "words"
sage: m
M[1, 1, 2, 1]
sage: M[1,1,2,1], M[[1,1,2,1]]
(M[{1, 2}], M[{1, 2}])
```

I'd like to see things like `M[1,1,2,1]` and/or `M[This is the Trac macro *1,1,2,1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,1,2,1-macro)` return the basis element corresponding to the indicated packed word, i.e., `M[1, 1, 2, 1]`.

If anybody thinks this is worth a new ticket, perhaps they could weigh-in, after taking a peek at this branch: 
`public/combinat/allow-packed-words-in-wqsym`



---

archive/issue_comments_387211.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI'm not sure I want global options to modify anything other than output. Imagine, for example, that some code internally calls `M[O]` for some ordered set partition `O`. But the user has set a global option that causes this `O` to be interpreted (wrongly) as a packed word. Hilarity ensues. (We had this problem with the infamous global option that decides in which order permutations are multiplied.)\n\nIf you want a quick way to turn a packed word into a basis element of `WQSym`, define a helper function, like\n\n```\ndef Mw(w):\n    return M[OrderedSetPartition(w)]\n```\nMaybe this should be suggested in the doc.",
    "created_at": "2018-06-16T22:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387211",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:29" align="right">Comment 29</div>

I'm not sure I want global options to modify anything other than output. Imagine, for example, that some code internally calls `M[O]` for some ordered set partition `O`. But the user has set a global option that causes this `O` to be interpreted (wrongly) as a packed word. Hilarity ensues. (We had this problem with the infamous global option that decides in which order permutations are multiplied.)

If you want a quick way to turn a packed word into a basis element of `WQSym`, define a helper function, like

```
def Mw(w):
    return M[OrderedSetPartition(w)]
```
Maybe this should be suggested in the doc.



---

archive/issue_comments_387212.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@darijgr](#comment%3A29):\n> (We had this problem with the infamous global option that decides in which order permutations are multiplied.)\n\nI think this is still \"have\", but I don't have a concrete issue.\n\nI agree with Darij on this, it should only affect the printing output as a convenience for the user.\n\nActually, why the packed word input does not work (which at least `M[1,1,2,1]` I think should) is because this fails:\n\n```\nsage: OSP = OrderedSetPartitions()\nsage: OSP([1,1,2,1])\n...\nTypeError: Element has no defined underlying set\n```\nSo we might want to consider moving the checking to see if the input-is-a-word to the `_element_constructor_`.",
    "created_at": "2018-06-17T02:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387212",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@darijgr](#comment%3A29):
> (We had this problem with the infamous global option that decides in which order permutations are multiplied.)

I think this is still "have", but I don't have a concrete issue.

I agree with Darij on this, it should only affect the printing output as a convenience for the user.

Actually, why the packed word input does not work (which at least `M[1,1,2,1]` I think should) is because this fails:

```
sage: OSP = OrderedSetPartitions()
sage: OSP([1,1,2,1])
...
TypeError: Element has no defined underlying set
```
So we might want to consider moving the checking to see if the input-is-a-word to the `_element_constructor_`.



---

archive/issue_comments_387213.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@tscrim](#comment%3A30):\n> Actually, why the packed word input does not work (which at least `M[1,1,2,1]` I think should) is because this fails:\n> \n> ```\n> sage: OSP = OrderedSetPartitions()\n> sage: OSP([1,1,2,1])\n> ...\n> TypeError: Element has no defined underlying set\n> ```\n> So we might want to consider moving the checking to see if the input-is-a-word to the `_element_constructor_`.\n\n.\n\nThis seems like a good idea to me. I can start a ticket to make this happen. However, ...\n\nI wonder what will/should happen when the user enters `M[1,2,3]`. Right now, I believe one sees `M[{1,2,3}]`. Are we all in agreement that one should instead see `M[{1}, {2}, {3}]`? And that we should demand the user enter `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` to get the former?",
    "created_at": "2018-06-18T15:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387213",
    "user": "https://github.com/alauve"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@tscrim](#comment%3A30):
> Actually, why the packed word input does not work (which at least `M[1,1,2,1]` I think should) is because this fails:
> 
> ```
> sage: OSP = OrderedSetPartitions()
> sage: OSP([1,1,2,1])
> ...
> TypeError: Element has no defined underlying set
> ```
> So we might want to consider moving the checking to see if the input-is-a-word to the `_element_constructor_`.

.

This seems like a good idea to me. I can start a ticket to make this happen. However, ...

I wonder what will/should happen when the user enters `M[1,2,3]`. Right now, I believe one sees `M[{1,2,3}]`. Are we all in agreement that one should instead see `M[{1}, {2}, {3}]`? And that we should demand the user enter `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` to get the former?



---

archive/issue_comments_387214.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nPython will not fundamentally distinguish between `M[1,2,3]` and `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` other than in the former case, it will be a `tuple` rather than a `list` as input. I don't think we want to treat tuples and lists differently, but maybe we do want to do that.",
    "created_at": "2018-06-19T00:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387214",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">Comment 32</div>

Python will not fundamentally distinguish between `M[1,2,3]` and `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` other than in the former case, it will be a `tuple` rather than a `list` as input. I don't think we want to treat tuples and lists differently, but maybe we do want to do that.



---

archive/issue_comments_387215.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nYeah..., came to that realization after working on the aforementioned branch for awhile this afternoon.\nI hate to have `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` get interpreted as `M[{1}, {2}, {3}]` (and equally hate asking the user to enter `M[This is the Trac macro *[1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#[1,2,3-macro)]`).\n\nIf we avoid making a distinction between tuples and lists, should we then drop this idea altogether? So, in documentation, we suggest users build the `Mw` shortcut of Darij?",
    "created_at": "2018-06-19T03:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387215",
    "user": "https://github.com/alauve"
}
```

<div id="comment:33" align="right">Comment 33</div>

Yeah..., came to that realization after working on the aforementioned branch for awhile this afternoon.
I hate to have `M[This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)` get interpreted as `M[{1}, {2}, {3}]` (and equally hate asking the user to enter `M[This is the Trac macro *[1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#[1,2,3-macro)]`).

If we avoid making a distinction between tuples and lists, should we then drop this idea altogether? So, in documentation, we suggest users build the `Mw` shortcut of Darij?



---

archive/issue_comments_387216.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nQuite possibly. Another option I just thought of is to construct a custom `basis` method that takes a parameter `indexed_by_words`, where the default is `False`. If `True`, then it returns a basis such that it goes through the `OrderedSetPartitions.from_word`.",
    "created_at": "2018-06-19T03:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25155#issuecomment-387216",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">Comment 34</div>

Quite possibly. Another option I just thought of is to construct a custom `basis` method that takes a parameter `indexed_by_words`, where the default is `False`. If `True`, then it returns a basis such that it goes through the `OrderedSetPartitions.from_word`.
