# Issue 25522: IPython cell magic %%no_preparse that disables the Sage preparser

archive/issues_025285.json:
```json
{
    "body": "I'm opening this ticket because of nbruin's suggestion for my answer https://ask.sagemath.org/question/9277/preparser-state-for-regexs/?answer=42530#post-id-42530\n\nThere I shared code for an IPython extension which registers a cell magic which disables the Sage preparser (by toggling the state of the global variable sage.repl.interpreter._do_preparse before and after running the cell).\n\nCC:  @nbruin\n\nKeywords: ipython magic\n\nAuthor: Bryan Gin-ge Chen\n\nBranch: u/gh-bryangingechen/nopreparse\n\nStatus: needs_review\n\nCommit: b231bca998b28232cb13e0310fa1d899cb2a74a0\n\nIssue created by migration from https://trac.sagemath.org/ticket/25522\n\n",
    "created_at": "2018-06-07T00:16:19Z",
    "labels": [
        "component: user interface",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "IPython cell magic %%no_preparse that disables the Sage preparser",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25522",
    "user": "https://github.com/bryangingechen"
}
```
I'm opening this ticket because of nbruin's suggestion for my answer https://ask.sagemath.org/question/9277/preparser-state-for-regexs/?answer=42530#post-id-42530

There I shared code for an IPython extension which registers a cell magic which disables the Sage preparser (by toggling the state of the global variable sage.repl.interpreter._do_preparse before and after running the cell).

CC:  @nbruin

Keywords: ipython magic

Author: Bryan Gin-ge Chen

Branch: u/gh-bryangingechen/nopreparse

Status: needs_review

Commit: b231bca998b28232cb13e0310fa1d899cb2a74a0

Issue created by migration from https://trac.sagemath.org/ticket/25522





---

archive/issue_comments_482505.json:
```json
{
    "body": "<a id='comment:1'></a>\nBefore I create a branch, I'd like to get feedback on the following:\n\nDoes the name %%noparse work, or should I change it to something else?\n\nI was thinking of adding the magic to the end of the class SageMagics in sage/repl/ipython_extension.py . Any objections?\n\nAnything else for a first-time contributor to keep in mind?",
    "created_at": "2018-06-07T00:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482505",
    "user": "https://github.com/bryangingechen"
}
```

<a id='comment:1'></a>
Before I create a branch, I'd like to get feedback on the following:

Does the name %%noparse work, or should I change it to something else?

I was thinking of adding the magic to the end of the class SageMagics in sage/repl/ipython_extension.py . Any objections?

Anything else for a first-time contributor to keep in mind?



---

archive/issue_comments_482506.json:
```json
{
    "body": "Changing commit from \"\" to \"773be9ef2fc37d717f011ad66110db795881e3ec\"",
    "created_at": "2018-07-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482506",
    "user": "https://github.com/bryangingechen"
}
```

Changing commit from "" to "773be9ef2fc37d717f011ad66110db795881e3ec"



---

archive/issue_comments_482507.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482507",
    "user": "https://github.com/bryangingechen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_482508.json:
```json
{
    "body": "<a id='comment:2'></a>\nI decided to use the name `%%nopreparse` instead.\n\n---\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[773be9e](https://github.com/sagemath/sagetrac-mirror/commit/773be9ef2fc37d717f011ad66110db795881e3ec)|`Add %%nopreparse cell magic`|",
    "created_at": "2018-07-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482508",
    "user": "https://github.com/bryangingechen"
}
```

<a id='comment:2'></a>
I decided to use the name `%%nopreparse` instead.

---
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[773be9e](https://github.com/sagemath/sagetrac-mirror/commit/773be9ef2fc37d717f011ad66110db795881e3ec)|`Add %%nopreparse cell magic`|



---

archive/issue_comments_482509.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-bryangingechen/nopreparse\"",
    "created_at": "2018-07-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482509",
    "user": "https://github.com/bryangingechen"
}
```

Changing branch from "" to "u/gh-bryangingechen/nopreparse"



---

archive/issue_comments_482510.json:
```json
{
    "body": "Changing commit from \"773be9ef2fc37d717f011ad66110db795881e3ec\" to \"3f959f448aa7173b2caee45ad19a4c4f75875b11\"",
    "created_at": "2018-07-20T07:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "773be9ef2fc37d717f011ad66110db795881e3ec" to "3f959f448aa7173b2caee45ad19a4c4f75875b11"



---

archive/issue_comments_482511.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[3f959f4](https://github.com/sagemath/sagetrac-mirror/commit/3f959f448aa7173b2caee45ad19a4c4f75875b11)|`Rename to no_preparse`|",
    "created_at": "2018-07-20T07:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[3f959f4](https://github.com/sagemath/sagetrac-mirror/commit/3f959f448aa7173b2caee45ad19a4c4f75875b11)|`Rename to no_preparse`|



---

archive/issue_comments_482512.json:
```json
{
    "body": "Changing commit from \"3f959f448aa7173b2caee45ad19a4c4f75875b11\" to \"b231bca998b28232cb13e0310fa1d899cb2a74a0\"",
    "created_at": "2018-07-20T07:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3f959f448aa7173b2caee45ad19a4c4f75875b11" to "b231bca998b28232cb13e0310fa1d899cb2a74a0"



---

archive/issue_comments_482513.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[b231bca](https://github.com/sagemath/sagetrac-mirror/commit/b231bca998b28232cb13e0310fa1d899cb2a74a0)|`remove trailing whitespace`|",
    "created_at": "2018-07-20T07:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[b231bca](https://github.com/sagemath/sagetrac-mirror/commit/b231bca998b28232cb13e0310fa1d899cb2a74a0)|`remove trailing whitespace`|



---

archive/issue_comments_482514.json:
```json
{
    "body": "<a id='comment:5'></a>\nno_preparse seems to be more in line with the accepted Python code style.",
    "created_at": "2018-07-20T07:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482514",
    "user": "https://github.com/bryangingechen"
}
```

<a id='comment:5'></a>
no_preparse seems to be more in line with the accepted Python code style.



---

archive/issue_events_080608.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "rename": {
        "from": "ipython cell magic to disable preparser",
        "to": "IPython cell magic %%no_preparse that disables the Sage preparser"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25522#event-80608"
}
```



---

archive/issue_comments_482515.json:
```json
{
    "body": "Changing author from \"gh-bryangingechen\" to \"Bryan Gin-ge Chen\"",
    "created_at": "2018-07-20T07:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482515",
    "user": "https://github.com/bryangingechen"
}
```

Changing author from "gh-bryangingechen" to "Bryan Gin-ge Chen"



---

archive/issue_comments_482516.json:
```json
{
    "body": "<a id='comment:7'></a>\npatchbot failures seem unrelated",
    "created_at": "2018-08-16T00:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482516",
    "user": "https://github.com/bryangingechen"
}
```

<a id='comment:7'></a>
patchbot failures seem unrelated



---

archive/issue_comments_482517.json:
```json
{
    "body": "Changing keywords from \"\" to \"ipython magic\".",
    "created_at": "2018-08-16T00:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25522#issuecomment-482517",
    "user": "https://github.com/bryangingechen"
}
```

Changing keywords from "" to "ipython magic".



---

archive/issue_events_080609.json:
```json
{
    "actor": "https://github.com/bryangingechen",
    "created_at": "2018-08-16T00:28:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25522",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25522#event-80609"
}
```
