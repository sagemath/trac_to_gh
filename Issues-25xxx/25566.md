# Issue 25566: small failing graphviz optional doctest in posets.py and doctest/external.py

archive/issues_025329.json:
```json
{
    "body": "On top of 8.3.beta5 (available on github develop branch)\n\n```\nsage -t --optional=sage,optional,external src/sage/doctest/external.py src/sage/combinat/posets/posets.py\n```\n\ngives\n\n```\nUsing --optional=bliss,cbc,ccache,cmake,dot2tex,external,gmpy2,mpir,python2,sage\nExternal software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,scilab\nDoctesting 2 files.\nsage -t src/sage/doctest/external.py\n**********************************************************************\nFile \"src/sage/doctest/external.py\", line 233, in sage.doctest.external.has_graphviz\nFailed example:\n    has_graphviz()   # optional -- graphviz\nExpected:\n    True\nGot:\n    FeatureTestResult('Graphviz', True)\n**********************************************************************\nFile \"src/sage/doctest/external.py\", line 246, in sage.doctest.external.has_ffmpeg\nFailed example:\n    has_ffmpeg()      # optional -- ffmpeg\nExpected:\n    True\nGot:\n    FeatureTestResult('FFmpeg', True)\n**********************************************************************\nFile \"src/sage/doctest/external.py\", line 259, in sage.doctest.external.has_imagemagick\nFailed example:\n    has_imagemagick() # optional -- imagemagick\nExpected:\n    True\nGot:\n    FeatureTestResult('convert', True)\n**********************************************************************\n3 items had failures:\n   1 of   3 in sage.doctest.external.has_ffmpeg\n   1 of   3 in sage.doctest.external.has_graphviz\n   1 of   3 in sage.doctest.external.has_imagemagick\n    [44 tests, 3 failures, 4.82 s]\nsage -t src/sage/combinat/posets/posets.py\n**********************************************************************\nFile \"src/sage/combinat/posets/posets.py\", line 1317, in sage.combinat.posets.posets.FinitePoset._latex_\nFailed example:\n    print(P._latex_()) #optional - dot2tex graphviz\nExpected:\n    \\begin{tikzpicture}[>=latex,line join=bevel,]\n    %%\n    \\node (node_1) at (6.0...bp,57.0...bp) [draw,draw=none] {$2$};\n      \\node (node_0) at (6.0...bp,7.0...bp) [draw,draw=none] {$1$};\n      \\draw [black,->] (node_0) ..controls (...bp,...bp) and (...bp,...bp)  .. (node_1);\n    %\n    \\end{tikzpicture}\nGot:\n    \\begin{tikzpicture}[>=latex,line join=bevel,]\n    %%\n    \\node (node_1) at (6.0bp,55.5bp) [draw,draw=none] {$2$};\n      \\node (node_0) at (6.0bp,6.5bp) [draw,draw=none] {$1$};\n      \\draw [black,->] (node_0) ..controls (6.0bp,19.603bp) and (6.0bp,30.062bp)  .. (node_1);\n    %\n    \\end{tikzpicture}\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.combinat.posets.posets.FinitePoset._latex_\n    [1272 tests, 1 failure, 8.26 s]\n```\n\nBranch/Commit: 0f1ec5a3e97fafbe959a6d7aeb5279963ee09aaf\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: S\u00e9bastien Labb\u00e9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25566\n\n",
    "closed_at": "2018-06-14T07:40:55Z",
    "created_at": "2018-06-12T13:35:51Z",
    "labels": [
        "component: doctest coverage",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "small failing graphviz optional doctest in posets.py and doctest/external.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25566",
    "user": "https://github.com/seblabbe"
}
```
On top of 8.3.beta5 (available on github develop branch)

```
sage -t --optional=sage,optional,external src/sage/doctest/external.py src/sage/combinat/posets/posets.py
```

gives

```
Using --optional=bliss,cbc,ccache,cmake,dot2tex,external,gmpy2,mpir,python2,sage
External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,scilab
Doctesting 2 files.
sage -t src/sage/doctest/external.py
**********************************************************************
File "src/sage/doctest/external.py", line 233, in sage.doctest.external.has_graphviz
Failed example:
    has_graphviz()   # optional -- graphviz
Expected:
    True
Got:
    FeatureTestResult('Graphviz', True)
**********************************************************************
File "src/sage/doctest/external.py", line 246, in sage.doctest.external.has_ffmpeg
Failed example:
    has_ffmpeg()      # optional -- ffmpeg
Expected:
    True
Got:
    FeatureTestResult('FFmpeg', True)
**********************************************************************
File "src/sage/doctest/external.py", line 259, in sage.doctest.external.has_imagemagick
Failed example:
    has_imagemagick() # optional -- imagemagick
Expected:
    True
Got:
    FeatureTestResult('convert', True)
**********************************************************************
3 items had failures:
   1 of   3 in sage.doctest.external.has_ffmpeg
   1 of   3 in sage.doctest.external.has_graphviz
   1 of   3 in sage.doctest.external.has_imagemagick
    [44 tests, 3 failures, 4.82 s]
sage -t src/sage/combinat/posets/posets.py
**********************************************************************
File "src/sage/combinat/posets/posets.py", line 1317, in sage.combinat.posets.posets.FinitePoset._latex_
Failed example:
    print(P._latex_()) #optional - dot2tex graphviz
Expected:
    \begin{tikzpicture}[>=latex,line join=bevel,]
    %%
    \node (node_1) at (6.0...bp,57.0...bp) [draw,draw=none] {$2$};
      \node (node_0) at (6.0...bp,7.0...bp) [draw,draw=none] {$1$};
      \draw [black,->] (node_0) ..controls (...bp,...bp) and (...bp,...bp)  .. (node_1);
    %
    \end{tikzpicture}
Got:
    \begin{tikzpicture}[>=latex,line join=bevel,]
    %%
    \node (node_1) at (6.0bp,55.5bp) [draw,draw=none] {$2$};
      \node (node_0) at (6.0bp,6.5bp) [draw,draw=none] {$1$};
      \draw [black,->] (node_0) ..controls (6.0bp,19.603bp) and (6.0bp,30.062bp)  .. (node_1);
    %
    \end{tikzpicture}
**********************************************************************
1 item had failures:
   1 of   3 in sage.combinat.posets.posets.FinitePoset._latex_
    [1272 tests, 1 failure, 8.26 s]
```

Branch/Commit: 0f1ec5a3e97fafbe959a6d7aeb5279963ee09aaf

Reviewer: Frédéric Chapoton

Author: Sébastien Labbé

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25566





---

archive/issue_comments_356638.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-12T13:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25566#issuecomment-356638",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_356639.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2018-06-12T13:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25566#issuecomment-356639",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_356640.json:
```json
{
    "body": "<a id='comment:2'></a>ok",
    "created_at": "2018-06-12T20:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25566#issuecomment-356640",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>ok



---

archive/issue_comments_356641.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-12T20:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25566#issuecomment-356641",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356642.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-14T07:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25566#issuecomment-356642",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064097.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-14T07:40:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25566",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25566#event-64097"
}
```
