# Issue 25049: Add DESTDIR support for r, and other cleanup

archive/issues_024812.json:
```json
{
    "body": "Implements #24024, incorporating changes to the `spkg-install` for R originally from #22509 as well as #23733.\n\n**CC:**  @dimpase\n\n**Branch/Commit:** [dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)\n\n**Reviewer:** Julian R\u00fcth, Dima Pasechnik\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/25049\n\n",
    "closed_at": "2020-02-10T20:06:03Z",
    "created_at": "2018-03-28T13:13:07Z",
    "labels": [
        "component: build",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "Add DESTDIR support for r, and other cleanup",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/25049",
    "user": "https://github.com/embray"
}
```
Implements #24024, incorporating changes to the `spkg-install` for R originally from #22509 as well as #23733.

**CC:**  @dimpase

**Branch/Commit:** [dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)

**Reviewer:** Julian Rüth, Dima Pasechnik

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/25049





---

archive/issue_comments_384321.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis already got some pretty good OSX testing when it was part of #22509, but that was a while ago so it should be tested again.",
    "created_at": "2018-03-28T13:13:36Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384321",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
This already got some pretty good OSX testing when it was part of #22509, but that was a while ago so it should be tested again.



---

archive/issue_comments_384322.json:
```json
{
    "body": "<a id='comment:2'></a>\nTested on OSX 10.13 and it works--R builds, its installed files are correctly listed in the manifest, and it runs at least basically.",
    "created_at": "2018-03-28T15:01:33Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384322",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
Tested on OSX 10.13 and it works--R builds, its installed files are correctly listed in the manifest, and it runs at least basically.



---

archive/issue_events_221983.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-28T15:01:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221983"
}
```



---

archive/issue_comments_384323.json:
```json
{
    "body": "<a id='comment:4'></a>\nLooks good. Is the build script now run with a `set -e` so no error checking needs to be done explicitly anymore?",
    "created_at": "2018-03-28T22:25:17Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384323",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'></a>
Looks good. Is the build script now run with a `set -e` so no error checking needs to be done explicitly anymore?



---

archive/issue_comments_384324.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2018-03-28T22:25:17Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384324",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian Rüth



---

archive/issue_comments_384325.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm not sure I understand your question about error checking, but it might be related to #23179.  Ever since that ticket all the stuff about checking that `$SAGE_LOCAL` is set is not necessary when writing spkg installers.",
    "created_at": "2018-03-29T09:08:26Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384325",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
I'm not sure I understand your question about error checking, but it might be related to #23179.  Ever since that ticket all the stuff about checking that `$SAGE_LOCAL` is set is not necessary when writing spkg installers.



---

archive/issue_comments_384326.json:
```json
{
    "body": "<a id='comment:6'></a>\nHm\u2026I had a look at #23179 but I could not find the bit I was looking for so let me rephrase my question. I can not find a `set -e` at the top of the proposed `spkg-install` script. Is that not necessary anymore? Is this somehow set from the outside now?",
    "created_at": "2018-03-29T11:24:52Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384326",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'></a>
Hm…I had a look at #23179 but I could not find the bit I was looking for so let me rephrase my question. I can not find a `set -e` at the top of the proposed `spkg-install` script. Is that not necessary anymore? Is this somehow set from the outside now?



---

archive/issue_events_221984.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-29T11:24:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221984"
}
```



---

archive/issue_events_221985.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-29T11:24:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221985"
}
```



---

archive/issue_comments_384327.json:
```json
{
    "body": "<a id='comment:8'></a>\nCan't we get rid of the \"move old installs\" part? Doesn't `DESTDIR` solve that problem?",
    "created_at": "2018-03-29T12:20:02Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384327",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Can't we get rid of the "move old installs" part? Doesn't `DESTDIR` solve that problem?



---

archive/issue_comments_384328.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [saraedum](#comment%3A4):\n> Looks good. Is the build script now run with a `set -e`\n\n\nNo: `set -e` was **not** used before and it is still **not** used.",
    "created_at": "2018-03-29T12:21:25Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384328",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [saraedum](#comment%3A4):
> Looks good. Is the build script now run with a `set -e`


No: `set -e` was **not** used before and it is still **not** used.



---

archive/issue_comments_384329.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Can't we get rid of the \"move old installs\" part? Doesn't `DESTDIR` solve that problem?\n\n\nIt definitely does not *necessarily* solve that problem.  What will solve it later will be #22510--once uninstall is in place then I think the behavior for all packages should be, when upgrading them, to uninstall the old version (and optionally make a backup), with restoration of the backup occurring on error.",
    "created_at": "2018-03-29T13:57:25Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384329",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Replying to [jdemeyer](#comment%3A8):
> Can't we get rid of the "move old installs" part? Doesn't `DESTDIR` solve that problem?


It definitely does not *necessarily* solve that problem.  What will solve it later will be #22510--once uninstall is in place then I think the behavior for all packages should be, when upgrading them, to uninstall the old version (and optionally make a backup), with restoration of the backup occurring on error.



---

archive/issue_events_221986.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T13:57:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221986"
}
```



---

archive/issue_events_221987.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T13:57:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221987"
}
```



---

archive/issue_comments_384330.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A9):\n> Replying to [saraedum](#comment%3A4):\n> > Looks good. Is the build script now run with a `set -e`\n\n> \n> No: `set -e` was **not** used before and it is still **not** used.\n\n\nSo, should it be used?",
    "created_at": "2018-03-30T06:00:52Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384330",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A9):
> Replying to [saraedum](#comment%3A4):
> > Looks good. Is the build script now run with a `set -e`

> 
> No: `set -e` was **not** used before and it is still **not** used.


So, should it be used?



---

archive/issue_events_221988.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-30T06:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221988"
}
```



---

archive/issue_events_221989.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-30T06:09:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221989"
}
```



---

archive/issue_events_221990.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-30T13:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221990"
}
```



---

archive/issue_events_221991.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-30T13:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221991"
}
```



---

archive/issue_comments_384331.json:
```json
{
    "body": "<a id='comment:13'></a>\nNo, I don't know why you think so.",
    "created_at": "2018-03-30T13:27:40Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384331",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
No, I don't know why you think so.



---

archive/issue_comments_384332.json:
```json
{
    "body": "<a id='comment:14'></a>\nStill, can we get rid of the \"move old installs\" part anyway? If the build breaks, just let it be broken.",
    "created_at": "2018-03-30T13:30:49Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384332",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Still, can we get rid of the "move old installs" part anyway? If the build breaks, just let it be broken.



---

archive/issue_comments_384333.json:
```json
{
    "body": "<a id='comment:15'></a>\nI don't mind, but tbh I'm not sure exactly what it was for in the first place.  I assume we probably have to at least *remove* the old install.  The restoring part can go (as I said we'll implement that capability more generally later).",
    "created_at": "2018-03-30T13:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384333",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
I don't mind, but tbh I'm not sure exactly what it was for in the first place.  I assume we probably have to at least *remove* the old install.  The restoring part can go (as I said we'll implement that capability more generally later).



---

archive/issue_comments_384334.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [embray](#comment%3A13):\n> No, I don't know why you think so.\n\n\n```\n -config\n -if [ $? -ne 0 ]; then\n +# Run in a subshell in case config with X11 support fails\n +if ! (config); then\n      echo \"Configuring R without X11\"\n      XSUPPORT=no\n      config\n -    if [ $? -ne 0 ]; then\n -        echo >&2 \"Error configuring R.\"\n -        exit 1\n -    fi\n  fi\n```\nSo we won't abort if the inner `config` fails here?",
    "created_at": "2018-04-01T08:45:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384334",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:16'></a>
Replying to [embray](#comment%3A13):
> No, I don't know why you think so.


```
 -config
 -if [ $? -ne 0 ]; then
 +# Run in a subshell in case config with X11 support fails
 +if ! (config); then
      echo "Configuring R without X11"
      XSUPPORT=no
      config
 -    if [ $? -ne 0 ]; then
 -        echo >&2 "Error configuring R."
 -        exit 1
 -    fi
  fi
```
So we won't abort if the inner `config` fails here?



---

archive/issue_events_221992.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T08:47:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221992"
}
```



---

archive/issue_events_221993.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T08:47:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221993"
}
```



---

archive/issue_comments_384335.json:
```json
{
    "body": "<a id='comment:18'></a>\nNo, please check the implementation of `sdh_configure` in `src/bin/sage-dist-helpers`.  Part of the point of all the `sdh_` helpers is that they exit upon failure (that's why the first `config` needs to be run in a sub-shell).",
    "created_at": "2018-04-03T15:22:30Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384335",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
No, please check the implementation of `sdh_configure` in `src/bin/sage-dist-helpers`.  Part of the point of all the `sdh_` helpers is that they exit upon failure (that's why the first `config` needs to be run in a sub-shell).



---

archive/issue_events_221994.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-03T16:41:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221994"
}
```



---

archive/issue_events_221995.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-03T16:41:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221995"
}
```



---

archive/issue_comments_384336.json:
```json
{
    "body": "<a id='comment:20'></a>\nSorry, I had misunderstood `config()`.",
    "created_at": "2018-04-03T16:42:09Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384336",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>
Sorry, I had misunderstood `config()`.



---

archive/issue_events_221996.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221996"
}
```



---

archive/issue_events_221997.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221997"
}
```



---

archive/issue_events_221998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T18:46:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221998"
}
```



---

archive/issue_events_221999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T18:46:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-221999"
}
```



---

archive/issue_comments_384337.json:
```json
{
    "body": "<a id='comment:22'></a>\nMerge conflict",
    "created_at": "2018-05-09T18:46:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384337",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
Merge conflict



---

archive/issue_events_222000.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222000"
}
```



---

archive/issue_events_222001.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222001"
}
```



---

archive/issue_comments_384338.json:
```json
{
    "body": "<a id='comment:23'></a>\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384338",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_comments_384339.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98f10f9542e4b53d62d97b73252f6612725aceda\">98f10f9</a></td><td><code>Updates to the R spkg-install:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0\">7461179</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>\n",
    "created_at": "2018-09-06T14:00:48Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98f10f9542e4b53d62d97b73252f6612725aceda">98f10f9</a></td><td><code>Updates to the R spkg-install:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0">7461179</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>




---

archive/issue_comments_384340.json:
```json
{
    "body": "**Changing commit** from \"[c9a5a79670b8eee73cc8c31617b6266191ca7d50](https://github.com/sagemath/sagetrac-mirror/commit/c9a5a79670b8eee73cc8c31617b6266191ca7d50)\" to \"[7461179ff80790cb2e92d82bcd7a846c8c9f90a0](https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0)\".",
    "created_at": "2018-09-06T14:00:48Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c9a5a79670b8eee73cc8c31617b6266191ca7d50](https://github.com/sagemath/sagetrac-mirror/commit/c9a5a79670b8eee73cc8c31617b6266191ca7d50)" to "[7461179ff80790cb2e92d82bcd7a846c8c9f90a0](https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0)".



---

archive/issue_events_222002.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T14:01:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222002"
}
```



---

archive/issue_events_222003.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T14:01:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222003"
}
```



---

archive/issue_comments_384341.json:
```json
{
    "body": "**Changing commit** from \"[7461179ff80790cb2e92d82bcd7a846c8c9f90a0](https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0)\" to \"[fc055313d9490359fbeabe1d7ad06302074417c2](https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2)\".",
    "created_at": "2018-09-06T14:16:59Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7461179ff80790cb2e92d82bcd7a846c8c9f90a0](https://github.com/sagemath/sagetrac-mirror/commit/7461179ff80790cb2e92d82bcd7a846c8c9f90a0)" to "[fc055313d9490359fbeabe1d7ad06302074417c2](https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2)".



---

archive/issue_comments_384342.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2\">fc05531</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>\n",
    "created_at": "2018-09-06T14:16:59Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2">fc05531</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>




---

archive/issue_comments_384343.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323\">18dc5b1</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>\n",
    "created_at": "2018-09-06T14:18:19Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323">18dc5b1</a></td><td><code>add an spkg-legacy-uninstall for R</code></td></tr></table>




---

archive/issue_comments_384344.json:
```json
{
    "body": "**Changing commit** from \"[fc055313d9490359fbeabe1d7ad06302074417c2](https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2)\" to \"[18dc5b15922aba4399a7eaeef2576b433bde9323](https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323)\".",
    "created_at": "2018-09-06T14:18:19Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fc055313d9490359fbeabe1d7ad06302074417c2](https://github.com/sagemath/sagetrac-mirror/commit/fc055313d9490359fbeabe1d7ad06302074417c2)" to "[18dc5b15922aba4399a7eaeef2576b433bde9323](https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323)".



---

archive/issue_comments_384345.json:
```json
{
    "body": "<a id='comment:28'></a>\n(accidentally split 1 commit into 2; fixed now)",
    "created_at": "2018-09-06T14:18:36Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384345",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
(accidentally split 1 commit into 2; fixed now)



---

archive/issue_events_222004.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222004"
}
```



---

archive/issue_events_222005.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222005"
}
```



---

archive/issue_events_222006.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222006"
}
```



---

archive/issue_events_222007.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222007"
}
```



---

archive/issue_comments_384346.json:
```json
{
    "body": "<a id='comment:30'></a>\nRetargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384346",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>
Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_events_222008.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-10T10:49:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222008"
}
```



---

archive/issue_events_222009.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-10T10:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222009"
}
```



---

archive/issue_comments_384347.json:
```json
{
    "body": "<a id='comment:31'></a>\nred branch",
    "created_at": "2019-03-10T10:49:38Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384347",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:31'></a>
red branch



---

archive/issue_events_222010.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222010"
}
```



---

archive/issue_events_222011.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222011"
}
```



---

archive/issue_comments_384348.json:
```json
{
    "body": "<a id='comment:32'></a>\nMoving all my in-progress tickets to 8.8 milestone.",
    "created_at": "2019-03-25T10:43:18Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384348",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'></a>
Moving all my in-progress tickets to 8.8 milestone.



---

archive/issue_events_222012.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222012"
}
```



---

archive/issue_events_222013.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222013"
}
```



---

archive/issue_comments_384349.json:
```json
{
    "body": "<a id='comment:33'></a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384349",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_384350.json:
```json
{
    "body": "<a id='comment:34'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384350",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_222014.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222014"
}
```



---

archive/issue_events_222015.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222015"
}
```



---

archive/issue_comments_384351.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f\">9d3d129</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>\n",
    "created_at": "2020-01-31T15:24:53Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384351",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f">9d3d129</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>




---

archive/issue_comments_384352.json:
```json
{
    "body": "**Changing commit** from \"[18dc5b15922aba4399a7eaeef2576b433bde9323](https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323)\" to \"[9d3d129b43c0496b9216e9696a35587688d4f73f](https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f)\".",
    "created_at": "2020-01-31T15:24:53Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384352",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[18dc5b15922aba4399a7eaeef2576b433bde9323](https://github.com/sagemath/sagetrac-mirror/commit/18dc5b15922aba4399a7eaeef2576b433bde9323)" to "[9d3d129b43c0496b9216e9696a35587688d4f73f](https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f)".



---

archive/issue_comments_384353.json:
```json
{
    "body": "**Changing commit** from \"[9d3d129b43c0496b9216e9696a35587688d4f73f](https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f)\" to \"[dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)\".",
    "created_at": "2020-01-31T15:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9d3d129b43c0496b9216e9696a35587688d4f73f](https://github.com/sagemath/sagetrac-mirror/commit/9d3d129b43c0496b9216e9696a35587688d4f73f)" to "[dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)".



---

archive/issue_comments_384354.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09\">dc342ae</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>\n",
    "created_at": "2020-01-31T15:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09">dc342ae</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>




---

archive/issue_events_222016.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-31T15:27:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222016"
}
```



---

archive/issue_events_222017.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-31T15:27:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222017"
}
```



---

archive/issue_comments_384355.json:
```json
{
    "body": "<a id='comment:37'></a>\nReviving this ticket because it still needs to be done.\n\nIt's a bit simpler now: because we always uninstall old packages before reinstalling/upgrading them, some of the OSX hacks are no longer needed (if they even ever really were...)\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09\">dc342ae</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>\n",
    "created_at": "2020-01-31T15:27:29Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384355",
    "user": "https://github.com/embray"
}
```

<a id='comment:37'></a>
Reviving this ticket because it still needs to be done.

It's a bit simpler now: because we always uninstall old packages before reinstalling/upgrading them, some of the OSX hacks are no longer needed (if they even ever really were...)

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09">dc342ae</a></td><td><code>Updates to the R spkg-install:</code></td></tr></table>




---

archive/issue_comments_384356.json:
```json
{
    "body": "**Changing reviewer** from \"Julian R\u00fcth\" to \"Julian R\u00fcth, Dima Pasechnik\".",
    "created_at": "2020-01-31T18:21:18Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384356",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Julian Rüth" to "Julian Rüth, Dima Pasechnik".



---

archive/issue_events_222018.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-31T19:02:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222018"
}
```



---

archive/issue_events_222019.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-31T19:02:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222019"
}
```



---

archive/issue_comments_384357.json:
```json
{
    "body": "<a id='comment:39'></a>\nlooks good to me",
    "created_at": "2020-01-31T19:02:05Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384357",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
looks good to me



---

archive/issue_comments_384358.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/build/destdir-r](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-r)\" to \"[dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)\".",
    "created_at": "2020-02-10T20:06:03Z",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25049#issuecomment-384358",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/build/destdir-r](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-r)" to "[dc342ae7916cda8d144bc0976c3bbad002706b09](https://github.com/sagemath/sagetrac-mirror/commit/dc342ae7916cda8d144bc0976c3bbad002706b09)".



---

archive/issue_events_222020.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-10T20:06:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222020"
}
```



---

archive/issue_events_222021.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8870d6bb199e3cdd055601199dfad751aeb3ec47",
    "created_at": "2020-02-10T20:06:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25049#event-222021"
}
```
