# Issue 25196: sage -gdb abort

archive/issues_024959.json:
```json
{
    "body": "#21509 has broken `sage --gdb`:\n\n```\nralf@ark:~/sage> ./sage -gdb\nUsage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\nNo debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.\n```\n\nBranch/Commit: 13b957fa66fb9bd90ec17d49968db474dbabb82d\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25196\n\n",
    "closed_at": "2018-04-18T23:23:16Z",
    "created_at": "2018-04-17T14:55:39Z",
    "labels": [
        "component: scripts",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "sage -gdb abort",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25196",
    "user": "https://github.com/rwst"
}
```
#21509 has broken `sage --gdb`:

```
ralf@ark:~/sage> ./sage -gdb
Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
No debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.
```

Branch/Commit: 13b957fa66fb9bd90ec17d49968db474dbabb82d

Reviewer: Volker Braun

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25196





---

archive/issue_comments_483131.json:
```json
{
    "body": "<a id='comment:1'></a>\nThat report is with the system gdb-8.0.1 but after installing `sage -i gdb` it's the same.",
    "created_at": "2018-04-17T15:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483131",
    "user": "https://github.com/rwst"
}
```

<a id='comment:1'></a>
That report is with the system gdb-8.0.1 but after installing `sage -i gdb` it's the same.



---

archive/issue_events_071876.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25196#event-71876"
}
```



---

archive/issue_events_071877.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25196#event-71877"
}
```



---

archive/issue_comments_483132.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,7 @@\n Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\n No debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.\n ```\n-Sage was not built with SAGE_DEBUG but this wasn't necessary before, either.\n+\n+The reason is that SAGE_DEBUG is not \"no\" here, it's simply empty, so the check for \"no\" in `bin/sage` fails and \"yes\" is assumed. The workaround thus is to set SAGE_DEBUG explicitly.\n+\n+Now why is this suddenly surfacing?\n``````\n",
    "created_at": "2018-04-17T15:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483132",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,7 @@
 Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
 No debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.
 ```
-Sage was not built with SAGE_DEBUG but this wasn't necessary before, either.
+
+The reason is that SAGE_DEBUG is not "no" here, it's simply empty, so the check for "no" in `bin/sage` fails and "yes" is assumed. The workaround thus is to set SAGE_DEBUG explicitly.
+
+Now why is this suddenly surfacing?
``````




---

archive/issue_comments_483133.json:
```json
{
    "body": "<a id='comment:3'></a>\nActually, now that I'm using gdb instead of cygdb I'm happy because I no longer get those annoying Python warnings in every displayed frame line of backtraces. Adios cygdb!",
    "created_at": "2018-04-17T15:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483133",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Actually, now that I'm using gdb instead of cygdb I'm happy because I no longer get those annoying Python warnings in every displayed frame line of backtraces. Adios cygdb!



---

archive/issue_events_071878.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25196#event-71878"
}
```



---

archive/issue_events_071879.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25196#event-71879"
}
```



---

archive/issue_comments_483134.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,7 @@\n-Possibly since #25092\n+#21509 has broken `sage --gdb`:\n \n ```\n ralf@ark:~/sage> ./sage -gdb\n Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\n No debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.\n ```\n-\n-The reason is that SAGE_DEBUG is not \"no\" here, it's simply empty, so the check for \"no\" in `bin/sage` fails and \"yes\" is assumed. The workaround thus is to set SAGE_DEBUG explicitly.\n-\n-Now why is this suddenly surfacing?\n``````\n",
    "created_at": "2018-04-17T16:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483134",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,7 @@
-Possibly since #25092
+#21509 has broken `sage --gdb`:
 
 ```
 ralf@ark:~/sage> ./sage -gdb
 Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
 No debug files were found in /home/ralf/sage/src/build/cythonized. Aborting.
 ```
-
-The reason is that SAGE_DEBUG is not "no" here, it's simply empty, so the check for "no" in `bin/sage` fails and "yes" is assumed. The workaround thus is to set SAGE_DEBUG explicitly.
-
-Now why is this suddenly surfacing?
``````




---

archive/issue_comments_483135.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/sage__gdb_abort\"",
    "created_at": "2018-04-17T16:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483135",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/sage__gdb_abort"



---

archive/issue_comments_483136.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[13b957f](https://github.com/sagemath/sagetrac-mirror/commit/13b957fa66fb9bd90ec17d49968db474dbabb82d)|`Fix cygdb`|",
    "created_at": "2018-04-17T16:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483136",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[13b957f](https://github.com/sagemath/sagetrac-mirror/commit/13b957fa66fb9bd90ec17d49968db474dbabb82d)|`Fix cygdb`|



---

archive/issue_comments_483137.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-17T16:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483137",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_483138.json:
```json
{
    "body": "Changing commit from \"\" to \"13b957fa66fb9bd90ec17d49968db474dbabb82d\"",
    "created_at": "2018-04-17T16:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483138",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "13b957fa66fb9bd90ec17d49968db474dbabb82d"



---

archive/issue_comments_483139.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2018-04-17T16:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483139",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_483140.json:
```json
{
    "body": "<a id='comment:7'></a>\nprobably with clang one would want to use lldb, no?\n\n(obviously, not something to do on this ticket)",
    "created_at": "2018-04-17T17:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483140",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
probably with clang one would want to use lldb, no?

(obviously, not something to do on this ticket)



---

archive/issue_comments_483141.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [dimpase](#comment%3A7):\n> probably with clang one would want to use lldb, no?\n> \n> (obviously, not something to do on this ticket)\n\n\nI think compiler and debugger are orthogonal, i.e., you should be able to use lldb on gcc compiled programs. Right now I'm using gdb on clang compiled Sage / Pynac. So, just another Sage command-line option would be necessary for convenience. However, with lldb it may be even possible to get Sage Python backtraces that include the now missing Cython / Pynac frames, because lldb can be accessed as library from Python. It surely is an interesting piece of software.",
    "created_at": "2018-04-17T18:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483141",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>
Replying to [dimpase](#comment%3A7):
> probably with clang one would want to use lldb, no?
> 
> (obviously, not something to do on this ticket)


I think compiler and debugger are orthogonal, i.e., you should be able to use lldb on gcc compiled programs. Right now I'm using gdb on clang compiled Sage / Pynac. So, just another Sage command-line option would be necessary for convenience. However, with lldb it may be even possible to get Sage Python backtraces that include the now missing Cython / Pynac frames, because lldb can be accessed as library from Python. It surely is an interesting piece of software.



---

archive/issue_comments_483142.json:
```json
{
    "body": "<a id='comment:9'></a>\ngdb has an embedded Python interpreter; cygdb is just some python scripts running inside gdb.",
    "created_at": "2018-04-17T20:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483142",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
gdb has an embedded Python interpreter; cygdb is just some python scripts running inside gdb.



---

archive/issue_comments_483143.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2018-04-17T22:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483143",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_483144.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-17T22:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483144",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_483145.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-04-18T23:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483145",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_483146.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/sage__gdb_abort\" to \"13b957fa66fb9bd90ec17d49968db474dbabb82d\"",
    "created_at": "2018-04-18T23:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25196#issuecomment-483146",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/sage__gdb_abort" to "13b957fa66fb9bd90ec17d49968db474dbabb82d"



---

archive/issue_events_071880.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-18T23:23:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25196",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25196#event-71880"
}
```
