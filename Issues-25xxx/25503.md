# Issue 25503: Allow the use of system's R installation

archive/issues_025266.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe aim of this ticket is to allow Sage to use the system's `R`, instead of building its own.\n\nIt should work for:\n- `sage -R` command\n- Sage's `r` interface\n- Sage's `rpy2` Python package\n- Sage's jupyter `IRkernel`\n\nSimilarly to the way one can decide to use the system ATLAS when building Sage,\non the user side, building Sage so that it uses the system R is achieved by setting\nthe `SAGE_R_LIB` environment variable.\n\nTo test this ticket, you should at least:\n\n- install `R` on your system (e.g. `sudo apt install r-base`)\n- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:\n\n```\nexport SAGE_R_LIB=/usr/lib/R/\nsage -f r\nsage -f rpy2\nmake build\n```\n- test Sage `R` command (this should/might show a different version than 3.4.4):\n\n```\nsage -R\n```\n- test Sage's `R` interface:\n\n```\nsage -t --long src/sage/interfaces/r.py\n```\n- test `rpy2`:\n\n```\nsage -t --long src/sage/stats/r.py\n```\n\n\nCC:  @EmmanuelCharpentier @embray @kiwifb @kcrisman @slel @timokau @orlitzky\n\nComponent: **packages: standard**\n\nKeywords: **R, sdl**\n\nAuthor: **Thierry Monteil**\n\nBranch/Commit: **[u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation) @ [`eed2ea3`](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25503_\n\n",
    "closed_at": "2020-03-27T15:07:21Z",
    "created_at": "2018-06-04T10:07:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow the use of system's R installation",
    "type": "issue",
    "updated_at": "2020-03-27T15:07:21Z",
    "url": "https://github.com/sagemath/sage/issues/25503",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
<div id="comment:0"></div>

The aim of this ticket is to allow Sage to use the system's `R`, instead of building its own.

It should work for:
- `sage -R` command
- Sage's `r` interface
- Sage's `rpy2` Python package
- Sage's jupyter `IRkernel`

Similarly to the way one can decide to use the system ATLAS when building Sage,
on the user side, building Sage so that it uses the system R is achieved by setting
the `SAGE_R_LIB` environment variable.

To test this ticket, you should at least:

- install `R` on your system (e.g. `sudo apt install r-base`)
- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:

```
export SAGE_R_LIB=/usr/lib/R/
sage -f r
sage -f rpy2
make build
```
- test Sage `R` command (this should/might show a different version than 3.4.4):

```
sage -R
```
- test Sage's `R` interface:

```
sage -t --long src/sage/interfaces/r.py
```
- test `rpy2`:

```
sage -t --long src/sage/stats/r.py
```


CC:  @EmmanuelCharpentier @embray @kiwifb @kcrisman @slel @timokau @orlitzky

Component: **packages: standard**

Keywords: **R, sdl**

Author: **Thierry Monteil**

Branch/Commit: **[u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation) @ [`eed2ea3`](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/25503_





---

archive/issue_events_349879.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-06-04T10:07:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349879"
}
```



---

archive/issue_events_349880.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-06-04T10:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349880"
}
```



---

archive/issue_events_349881.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-06-04T10:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349881"
}
```



---

archive/issue_events_349882.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-06-04T10:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349882"
}
```



---

archive/issue_comments_390983.json:
```json
{
    "body": "Branch: **[u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)**",
    "created_at": "2018-06-04T12:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390983",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)**



---

archive/issue_comments_390984.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/380a2b0e7a0f375e40be1329d890d0a73f324c92\"><code>380a2b0</code></a></td><td><code>#25503 : do not build R if SAGE_R_LIB is set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8768ed5d0af6683fbdf3775f29c13047cbdecee\"><code>e8768ed</code></a></td><td><code>#25503 : let rpy2 use SAGE_R_LIB for its RHOMES variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0519cda83d2fe9ecb2cf1214ea86acf15df405e3\"><code>0519cda</code></a></td><td><code>#25503 : fix issue between R interface and readline 7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6\"><code>eed2ea3</code></a></td><td><code>#25503 : document the SAGE_R_LIB variable in the install guide</code></td></tr></table>\n",
    "created_at": "2018-06-04T12:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390984",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/380a2b0e7a0f375e40be1329d890d0a73f324c92"><code>380a2b0</code></a></td><td><code>#25503 : do not build R if SAGE_R_LIB is set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8768ed5d0af6683fbdf3775f29c13047cbdecee"><code>e8768ed</code></a></td><td><code>#25503 : let rpy2 use SAGE_R_LIB for its RHOMES variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0519cda83d2fe9ecb2cf1214ea86acf15df405e3"><code>0519cda</code></a></td><td><code>#25503 : fix issue between R interface and readline 7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6"><code>eed2ea3</code></a></td><td><code>#25503 : document the SAGE_R_LIB variable in the install guide</code></td></tr></table>




---

archive/issue_comments_390985.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, it is done by setting the ``SAGE_R_LIB`` environment variable.\n+As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.\n \n``````\n",
    "created_at": "2018-06-04T12:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390985",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, it is done by setting the ``SAGE_R_LIB`` environment variable.
+As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.
 
``````




---

archive/issue_comments_390986.json:
```json
{
    "body": "Commit: **[`eed2ea3`](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)**",
    "created_at": "2018-06-04T12:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390986",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[`eed2ea3`](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)**



---

archive/issue_events_349883.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-06-04T12:52:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349883"
}
```



---

archive/issue_comments_390987.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,32 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.\n+As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.\n \n+To test this ticket, you should at least:\n+\n+- install `R` on your system (e.g. `sudo apt install r-base`)\n+- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:\n+\n+```\n+export SAGE_R_LIB=/usr/lib/R/\n+sage -f r\n+sage -f rpy2\n+make build\n+```\n+- test Sage `R` command (this should/might show a different version than 3.4.4):\n+\n+```\n+sage -R\n+```\n+- test Sage's `R` interface:\n+\n+```\n+sage -t --long src/sage/interfaces/r.py\n+```\n+- test `rpy2`:\n+\n+```\n+sage -t --long src/sage/stats/r.py\n+```\n+\n``````\n",
    "created_at": "2018-06-04T13:15:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390987",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,32 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.
+As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.
 
+To test this ticket, you should at least:
+
+- install `R` on your system (e.g. `sudo apt install r-base`)
+- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:
+
+```
+export SAGE_R_LIB=/usr/lib/R/
+sage -f r
+sage -f rpy2
+make build
+```
+- test Sage `R` command (this should/might show a different version than 3.4.4):
+
+```
+sage -R
+```
+- test Sage's `R` interface:
+
+```
+sage -t --long src/sage/interfaces/r.py
+```
+- test `rpy2`:
+
+```
+sage -t --long src/sage/stats/r.py
+```
+
``````




---

archive/issue_comments_390988.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWe should probably also update `sage-env` script, which explicitly unset `R`-related variables that the user could set in relation with system-wide install.",
    "created_at": "2018-06-04T15:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390988",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:4" align="right">comment:4</div>

We should probably also update `sage-env` script, which explicitly unset `R`-related variables that the user could set in relation with system-wide install.



---

archive/issue_comments_390989.json:
```json
{
    "body": "Changed keywords from none to **R**",
    "created_at": "2018-06-04T18:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390989",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **R**



---

archive/issue_comments_390990.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,9 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.\n+Similarly to the way one can decide to use the system ATLAS when building Sage,\n+on the user side, building Sage so that it uses the system R is achieved by setting\n+the `SAGE_R_LIB` environment variable.\n \n To test this ticket, you should at least:\n \n``````\n",
    "created_at": "2018-06-04T18:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390990",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,9 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.
+Similarly to the way one can decide to use the system ATLAS when building Sage,
+on the user side, building Sage so that it uses the system R is achieved by setting
+the `SAGE_R_LIB` environment variable.
 
 To test this ticket, you should at least:
 
``````




---

archive/issue_comments_390991.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSo - if a system-wide install is used, does it mean that the standard R configuration files will be picked up? With its own R Sage makes sure that nothing is used.",
    "created_at": "2018-06-04T18:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390991",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:6" align="right">comment:6</div>

So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up? With its own R Sage makes sure that nothing is used.



---

archive/issue_comments_390992.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@novoselt](#comment%3A6):\n> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?\n\nI would say yes (see my last comment about `sage-env`), though i might be wrong. I guess that if a user explicitly ask Sage to use system-wide `R`, it means that she want to keep all control (e.g. on where to install things, etc).",
    "created_at": "2018-06-04T18:48:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390992",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@novoselt](#comment%3A6):
> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?

I would say yes (see my last comment about `sage-env`), though i might be wrong. I guess that if a user explicitly ask Sage to use system-wide `R`, it means that she want to keep all control (e.g. on where to install things, etc).



---

archive/issue_comments_390993.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@novoselt](#comment%3A6):\n> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?\n\nYes.\n\n> With its own R Sage makes sure that nothing is used.\n\nIt is up to the user to decide whether she wants to use the system's R or Sage's R, the default remains to build and use Sage's R.",
    "created_at": "2018-07-17T16:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390993",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@novoselt](#comment%3A6):
> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?

Yes.

> With its own R Sage makes sure that nothing is used.

It is up to the user to decide whether she wants to use the system's R or Sage's R, the default remains to build and use Sage's R.



---

archive/issue_comments_390994.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI would be curious to hear embray's opinion on this. I know that he has been working on allowing to use system packages more generally.\n\nBtw, there are merge conflicts.",
    "created_at": "2018-10-14T19:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390994",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:10" align="right">comment:10</div>

I would be curious to hear embray's opinion on this. I know that he has been working on allowing to use system packages more generally.

Btw, there are merge conflicts.



---

archive/issue_events_349884.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-14T19:22:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349884"
}
```



---

archive/issue_events_349885.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-14T19:22:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349885"
}
```



---

archive/issue_comments_390995.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWhy should this work for the `sage -R` command? That command is explicitly documented (as in `sage --help` and in [the reference manual](http://doc.sagemath.org/html/en/reference/repl/options.html#command-line-options-for-sage)) to \"run Sage's R with given arguments\", so why should it run a non-Sage R? Maybe I'm misunderstanding.\n\nI think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.\n\nBut if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.",
    "created_at": "2018-10-14T21:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390995",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Why should this work for the `sage -R` command? That command is explicitly documented (as in `sage --help` and in [the reference manual](http://doc.sagemath.org/html/en/reference/repl/options.html#command-line-options-for-sage)) to "run Sage's R with given arguments", so why should it run a non-Sage R? Maybe I'm misunderstanding.

I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.

But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.



---

archive/issue_comments_390996.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI never changed those help messages in sage-on-gentoo. There is an ambiguity I am exploiting. You think it only means R from sage the distribution, I take it to mean R that sage has been configured to use. You could argue that the capitalisation means we are talking about the distribution.\n\nShould we have a semantic war :)\n\nIn any case, while there is no real benefit, compared to running R directly, I don't see why the behavior shouldn't be preserved. Existing scripts shouldn't break because you changed some underlying bits.",
    "created_at": "2018-10-14T21:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390996",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

I never changed those help messages in sage-on-gentoo. There is an ambiguity I am exploiting. You think it only means R from sage the distribution, I take it to mean R that sage has been configured to use. You could argue that the capitalisation means we are talking about the distribution.

Should we have a semantic war :)

In any case, while there is no real benefit, compared to running R directly, I don't see why the behavior shouldn't be preserved. Existing scripts shouldn't break because you changed some underlying bits.



---

archive/issue_comments_390997.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSeriously, if changing the documentation is your only problem with this, I'd be glad to just do that. Do you have a preferred wording?",
    "created_at": "2018-10-14T22:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390997",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Seriously, if changing the documentation is your only problem with this, I'd be glad to just do that. Do you have a preferred wording?



---

archive/issue_comments_390998.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.",
    "created_at": "2018-10-15T04:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390998",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.



---

archive/issue_comments_390999.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jhpalmieri](#comment%3A14):\n> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.\n\nSo you don't think we should support people with old script that may call `sage -R`? You want those people to update?",
    "created_at": "2018-10-15T04:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-390999",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jhpalmieri](#comment%3A14):
> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.

So you don't think we should support people with old script that may call `sage -R`? You want those people to update?



---

archive/issue_comments_391000.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIf Sage is not going to install a copy of `R`, then you could rewrite the main `sage` script so that `sage -R` prints a deprecation warning before executing the system's R`.\n\nI don't really buy your ambiguity argument, and I think that you are misleading people if `sage -R` runs a version of R which was not installed by Sage. (There is also the slim chance that it won't work and people will report errors from running `sage -R` to Sage developers, or (even worse) silently blame us for the problem, when it has nothing to do with us.)\n\nHow many people really use commands like `sage -R`? Maybe they should all be deprecated, and people should be encouraged to put `SAGE_ROOT/local/bin` in their path or instead to use `sage --sh -c blah`, where `blah` can be `R` or `python` or `ecl` or ...\n\nIf you really want to proceed, note that `sage -h` contains\n\n```\n  -cython [...]       -- run Cython with given arguments\n  -ecl [...]          -- run Common Lisp\n  -gap [...]          -- run Sage's Gap with given arguments\n```\nso maybe they should all omit \"Sage's\". I won't be happy with that change, so you'll need another reviewer, and I also think you should ask for more opinions.",
    "created_at": "2018-10-15T05:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391000",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

If Sage is not going to install a copy of `R`, then you could rewrite the main `sage` script so that `sage -R` prints a deprecation warning before executing the system's R`.

I don't really buy your ambiguity argument, and I think that you are misleading people if `sage -R` runs a version of R which was not installed by Sage. (There is also the slim chance that it won't work and people will report errors from running `sage -R` to Sage developers, or (even worse) silently blame us for the problem, when it has nothing to do with us.)

How many people really use commands like `sage -R`? Maybe they should all be deprecated, and people should be encouraged to put `SAGE_ROOT/local/bin` in their path or instead to use `sage --sh -c blah`, where `blah` can be `R` or `python` or `ecl` or ...

If you really want to proceed, note that `sage -h` contains

```
  -cython [...]       -- run Cython with given arguments
  -ecl [...]          -- run Common Lisp
  -gap [...]          -- run Sage's Gap with given arguments
```
so maybe they should all omit "Sage's". I won't be happy with that change, so you'll need another reviewer, and I also think you should ask for more opinions.



---

archive/issue_comments_391001.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFor what its worth I agree with @kiwifb's interpretation. Even a distro can have multiple versions of a dependency installed. Sometimes it can be useful to \"start the R sage uses\", for example for debugging.",
    "created_at": "2018-10-16T08:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391001",
    "user": "https://github.com/timokau"
}
```

<div id="comment:17" align="right">comment:17</div>

For what its worth I agree with @kiwifb's interpretation. Even a distro can have multiple versions of a dependency installed. Sometimes it can be useful to "start the R sage uses", for example for debugging.



---

archive/issue_comments_391002.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI would also agree with interpreting \"Sage's R\" as \"the R that Sage has been configured to use\",\nand similarly for GAP, PARI/GP, Singular, etc.",
    "created_at": "2018-10-16T09:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391002",
    "user": "https://github.com/slel"
}
```

<div id="comment:18" align="right">comment:18</div>

I would also agree with interpreting "Sage's R" as "the R that Sage has been configured to use",
and similarly for GAP, PARI/GP, Singular, etc.



---

archive/issue_comments_391003.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI think John feels very strongly about his interpretation. The heart of his argument being if it says it is sage's own, the sage devs owns the bugs.  As distros guys we all know where to stand about that. \n\nSometimes it is your own bugs (build system, distro specificities) and sometimes it belong to upstream. In any case you may carry patches and sage-the-distro has a long history about \"owning\" its own patches regardless of upstream as you well know.\n\nIn any case piping on the matter on sage-devel doesn't cost us much since it is now, in effect, a sage-8.5 ticket.",
    "created_at": "2018-10-16T09:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391003",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

I think John feels very strongly about his interpretation. The heart of his argument being if it says it is sage's own, the sage devs owns the bugs.  As distros guys we all know where to stand about that. 

Sometimes it is your own bugs (build system, distro specificities) and sometimes it belong to upstream. In any case you may carry patches and sage-the-distro has a long history about "owning" its own patches regardless of upstream as you well know.

In any case piping on the matter on sage-devel doesn't cost us much since it is now, in effect, a sage-8.5 ticket.



---

archive/issue_comments_391004.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI don't feel very strongly about it either way, maybe printing a clear information (either \"this is a sage package\" or \"this is a system package\") first is a good compromise.",
    "created_at": "2018-10-16T16:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391004",
    "user": "https://github.com/timokau"
}
```

<div id="comment:20" align="right">comment:20</div>

I don't feel very strongly about it either way, maybe printing a clear information (either "this is a sage package" or "this is a system package") first is a good compromise.



---

archive/issue_comments_391005.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jhpalmieri](#comment%3A11):\n> I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.\n> \n> But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.\n\nI disagree.  I think these commands should really just mean \"run the same Python/R/etc. that Sage is using, with all the sage-related environment variables set\".",
    "created_at": "2018-10-28T16:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391005",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jhpalmieri](#comment%3A11):
> I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.
> 
> But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.

I disagree.  I think these commands should really just mean "run the same Python/R/etc. that Sage is using, with all the sage-related environment variables set".



---

archive/issue_comments_391006.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jhpalmieri](#comment%3A14):\n> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.\n\nThat's not true that there is no reason for it.  For example, what if you want to run R in the Sage environment so that you can run sage commands in R with RPy?  Or interface with other software that is included in the Sage distribution?  From the user's perspective, `sage -R` means \"launch the R that sage is using\".  It's transparent/irrelevant whether or not the R command happened to be included in the Sage distribution or not.  For downstream distributions (e.g. on Debian, Gentoo) they are all using the system's copies of programs as much as possible, so you'll just have confused users who find that `sage -R` works on some system but not others.",
    "created_at": "2018-10-28T16:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391006",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jhpalmieri](#comment%3A14):
> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.

That's not true that there is no reason for it.  For example, what if you want to run R in the Sage environment so that you can run sage commands in R with RPy?  Or interface with other software that is included in the Sage distribution?  From the user's perspective, `sage -R` means "launch the R that sage is using".  It's transparent/irrelevant whether or not the R command happened to be included in the Sage distribution or not.  For downstream distributions (e.g. on Debian, Gentoo) they are all using the system's copies of programs as much as possible, so you'll just have confused users who find that `sage -R` works on some system but not others.



---

archive/issue_events_349886.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T16:07:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349886"
}
```



---

archive/issue_events_349887.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T16:07:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349887"
}
```



---

archive/issue_comments_391007.json:
```json
{
    "body": "Changed keywords from **R** to **R, sdl**",
    "created_at": "2019-08-27T19:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391007",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed keywords from **R** to **R, sdl**



---

archive/issue_comments_391008.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI've opened #28884 with a working (on Debian at least) branch allowing use of system's R.\n\nFeel free to review.",
    "created_at": "2019-12-15T00:52:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391008",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

I've opened #28884 with a working (on Debian at least) branch allowing use of system's R.

Feel free to review.



---

archive/issue_comments_391009.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIs there still anything to do here? I don't really use R inside or outside of sage... has #28884 caused any problems?",
    "created_at": "2020-03-18T23:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391009",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:26" align="right">comment:26</div>

Is there still anything to do here? I don't really use R inside or outside of sage... has #28884 caused any problems?



---

archive/issue_events_349888.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349888"
}
```



---

archive/issue_comments_391010.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nnot sure about Jupyter kernel for R, but this is a different story. A new ticket, if you must.",
    "created_at": "2020-03-19T03:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391010",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

not sure about Jupyter kernel for R, but this is a different story. A new ticket, if you must.



---

archive/issue_comments_391011.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-03-19T03:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-391011",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_349889.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349889"
}
```



---

archive/issue_events_349890.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349890"
}
```



---

archive/issue_events_349891.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349891"
}
```



---

archive/issue_events_349892.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349892"
}
```



---

archive/issue_events_349893.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349893"
}
```



---

archive/issue_events_349894.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-349894"
}
```
