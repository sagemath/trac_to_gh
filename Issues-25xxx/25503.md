# Issue 25503: Allow the use of system's R installation

archive/issues_025266.json:
```json
{
    "body": "The aim of this ticket is to allow Sage to use the system's `R`, instead of building its own.\n\nIt should work for:\n- `sage -R` command\n- Sage's `r` interface\n- Sage's `rpy2` Python package\n- Sage's jupyter `IRkernel`\n\nSimilarly to the way one can decide to use the system ATLAS when building Sage,\non the user side, building Sage so that it uses the system R is achieved by setting\nthe `SAGE_R_LIB` environment variable.\n\nTo test this ticket, you should at least:\n\n- install `R` on your system (e.g. `sudo apt install r-base`)\n- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:\n\n```\nexport SAGE_R_LIB=/usr/lib/R/\nsage -f r\nsage -f rpy2\nmake build\n```\n- test Sage `R` command (this should/might show a different version than 3.4.4):\n\n```\nsage -R\n```\n- test Sage's `R` interface:\n\n```\nsage -t --long src/sage/interfaces/r.py\n```\n- test `rpy2`:\n\n```\nsage -t --long src/sage/stats/r.py\n```\n\n\n**CC:**  @EmmanuelCharpentier @embray @kiwifb @kcrisman @slel @timokau @orlitzky\n\n**Keywords:** R, sdl\n\n**Branch:** [u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)\n\n**Commit:** [eed2ea352af29fa6e6fb65d274c2e0078a7c07a6](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Thierry Monteil\n\nIssue created by migration from https://trac.sagemath.org/ticket/25503\n\n",
    "closed_at": "2020-03-27T15:07:21Z",
    "created_at": "2018-06-04T10:07:59Z",
    "labels": [
        "component: packages: standard",
        "bug",
        "duplicate"
    ],
    "title": "Allow the use of system's R installation",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/25503",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
The aim of this ticket is to allow Sage to use the system's `R`, instead of building its own.

It should work for:
- `sage -R` command
- Sage's `r` interface
- Sage's `rpy2` Python package
- Sage's jupyter `IRkernel`

Similarly to the way one can decide to use the system ATLAS when building Sage,
on the user side, building Sage so that it uses the system R is achieved by setting
the `SAGE_R_LIB` environment variable.

To test this ticket, you should at least:

- install `R` on your system (e.g. `sudo apt install r-base`)
- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:

```
export SAGE_R_LIB=/usr/lib/R/
sage -f r
sage -f rpy2
make build
```
- test Sage `R` command (this should/might show a different version than 3.4.4):

```
sage -R
```
- test Sage's `R` interface:

```
sage -t --long src/sage/interfaces/r.py
```
- test `rpy2`:

```
sage -t --long src/sage/stats/r.py
```


**CC:**  @EmmanuelCharpentier @embray @kiwifb @kcrisman @slel @timokau @orlitzky

**Keywords:** R, sdl

**Branch:** [u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)

**Commit:** [eed2ea352af29fa6e6fb65d274c2e0078a7c07a6](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)

**Reviewer:** Dima Pasechnik

**Author:** Thierry Monteil

Issue created by migration from https://trac.sagemath.org/ticket/25503





---

archive/issue_comments_393631.json:
```json
{
    "body": "**Branch:** [u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)",
    "created_at": "2018-06-04T12:41:08Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393631",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Branch:** [u/tmonteil/allow_the_use_of_system_s_r_installation](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/allow_the_use_of_system_s_r_installation)



---

archive/issue_comments_393632.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/380a2b0e7a0f375e40be1329d890d0a73f324c92\">380a2b0</a></td><td><code>#25503 : do not build R if SAGE_R_LIB is set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8768ed5d0af6683fbdf3775f29c13047cbdecee\">e8768ed</a></td><td><code>#25503 : let rpy2 use SAGE_R_LIB for its RHOMES variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0519cda83d2fe9ecb2cf1214ea86acf15df405e3\">0519cda</a></td><td><code>#25503 : fix issue between R interface and readline 7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6\">eed2ea3</a></td><td><code>#25503 : document the SAGE_R_LIB variable in the install guide</code></td></tr></table>\n",
    "created_at": "2018-06-04T12:52:38Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393632",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/380a2b0e7a0f375e40be1329d890d0a73f324c92">380a2b0</a></td><td><code>#25503 : do not build R if SAGE_R_LIB is set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8768ed5d0af6683fbdf3775f29c13047cbdecee">e8768ed</a></td><td><code>#25503 : let rpy2 use SAGE_R_LIB for its RHOMES variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0519cda83d2fe9ecb2cf1214ea86acf15df405e3">0519cda</a></td><td><code>#25503 : fix issue between R interface and readline 7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6">eed2ea3</a></td><td><code>#25503 : document the SAGE_R_LIB variable in the install guide</code></td></tr></table>




---

archive/issue_comments_393633.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, it is done by setting the ``SAGE_R_LIB`` environment variable.\n+As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.\n \n``````\n",
    "created_at": "2018-06-04T12:52:38Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393633",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, it is done by setting the ``SAGE_R_LIB`` environment variable.
+As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.
 
``````




---

archive/issue_comments_393634.json:
```json
{
    "body": "**Commit:** [eed2ea352af29fa6e6fb65d274c2e0078a7c07a6](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)",
    "created_at": "2018-06-04T12:52:38Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393634",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Commit:** [eed2ea352af29fa6e6fb65d274c2e0078a7c07a6](https://github.com/sagemath/sagetrac-mirror/commit/eed2ea352af29fa6e6fb65d274c2e0078a7c07a6)



---

archive/issue_events_226461.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2018-06-04T12:52:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226461"
}
```



---

archive/issue_comments_393635.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,5 +6,32 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.\n+As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.\n \n+To test this ticket, you should at least:\n+\n+- install `R` on your system (e.g. `sudo apt install r-base`)\n+- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:\n+\n+```\n+export SAGE_R_LIB=/usr/lib/R/\n+sage -f r\n+sage -f rpy2\n+make build\n+```\n+- test Sage `R` command (this should/might show a different version than 3.4.4):\n+\n+```\n+sage -R\n+```\n+- test Sage's `R` interface:\n+\n+```\n+sage -t --long src/sage/interfaces/r.py\n+```\n+- test `rpy2`:\n+\n+```\n+sage -t --long src/sage/stats/r.py\n+```\n+\n``````\n",
    "created_at": "2018-06-04T13:15:09Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393635",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,5 +6,32 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, on the user side, it is done by setting the ``SAGE_R_LIB`` environment variable.
+As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.
 
+To test this ticket, you should at least:
+
+- install `R` on your system (e.g. `sudo apt install r-base`)
+- reinstall `r` and `rpy2` with `SAGE_R_LIB` set:
+
+```
+export SAGE_R_LIB=/usr/lib/R/
+sage -f r
+sage -f rpy2
+make build
+```
+- test Sage `R` command (this should/might show a different version than 3.4.4):
+
+```
+sage -R
+```
+- test Sage's `R` interface:
+
+```
+sage -t --long src/sage/interfaces/r.py
+```
+- test `rpy2`:
+
+```
+sage -t --long src/sage/stats/r.py
+```
+
``````




---

archive/issue_comments_393636.json:
```json
{
    "body": "<a id='comment:4'></a>\nWe should probably also update `sage-env` script, which explicitly unset `R`-related variables that the user could set in relation with system-wide install.",
    "created_at": "2018-06-04T15:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393636",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:4'></a>
We should probably also update `sage-env` script, which explicitly unset `R`-related variables that the user could set in relation with system-wide install.



---

archive/issue_comments_393637.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"R\".",
    "created_at": "2018-06-04T18:03:52Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393637",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "R".



---

archive/issue_comments_393638.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,9 @@\n - Sage's `rpy2` Python package\n - Sage's jupyter `IRkernel`\n \n-As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.\n+Similarly to the way one can decide to use the system ATLAS when building Sage,\n+on the user side, building Sage so that it uses the system R is achieved by setting\n+the `SAGE_R_LIB` environment variable.\n \n To test this ticket, you should at least:\n \n``````\n",
    "created_at": "2018-06-04T18:03:52Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393638",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,9 @@
 - Sage's `rpy2` Python package
 - Sage's jupyter `IRkernel`
 
-As for atlas, on the user side, it is done by setting the `SAGE_R_LIB` environment variable.
+Similarly to the way one can decide to use the system ATLAS when building Sage,
+on the user side, building Sage so that it uses the system R is achieved by setting
+the `SAGE_R_LIB` environment variable.
 
 To test this ticket, you should at least:
 
``````




---

archive/issue_comments_393639.json:
```json
{
    "body": "<a id='comment:6'></a>\nSo - if a system-wide install is used, does it mean that the standard R configuration files will be picked up? With its own R Sage makes sure that nothing is used.",
    "created_at": "2018-06-04T18:40:04Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393639",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:6'></a>
So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up? With its own R Sage makes sure that nothing is used.



---

archive/issue_comments_393640.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [novoselt](#comment%3A6):\n> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?\n\nI would say yes (see my last comment about `sage-env`), though i might be wrong. I guess that if a user explicitly ask Sage to use system-wide `R`, it means that she want to keep all control (e.g. on where to install things, etc).",
    "created_at": "2018-06-04T18:48:55Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393640",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:7'></a>
Replying to [novoselt](#comment%3A6):
> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?

I would say yes (see my last comment about `sage-env`), though i might be wrong. I guess that if a user explicitly ask Sage to use system-wide `R`, it means that she want to keep all control (e.g. on where to install things, etc).



---

archive/issue_comments_393641.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [novoselt](#comment%3A6):\n> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?\n\nYes.\n\n> With its own R Sage makes sure that nothing is used.\n\nIt is up to the user to decide whether she wants to use the system's R or Sage's R, the default remains to build and use Sage's R.",
    "created_at": "2018-07-17T16:04:55Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393641",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:9'></a>
Replying to [novoselt](#comment%3A6):
> So - if a system-wide install is used, does it mean that the standard R configuration files will be picked up?

Yes.

> With its own R Sage makes sure that nothing is used.

It is up to the user to decide whether she wants to use the system's R or Sage's R, the default remains to build and use Sage's R.



---

archive/issue_comments_393642.json:
```json
{
    "body": "<a id='comment:10'></a>\nI would be curious to hear embray's opinion on this. I know that he has been working on allowing to use system packages more generally.\n\nBtw, there are merge conflicts.",
    "created_at": "2018-10-14T19:22:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393642",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:10'></a>
I would be curious to hear embray's opinion on this. I know that he has been working on allowing to use system packages more generally.

Btw, there are merge conflicts.



---

archive/issue_events_226462.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-14T19:22:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226462"
}
```



---

archive/issue_events_226463.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-10-14T19:22:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226463"
}
```



---

archive/issue_comments_393643.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhy should this work for the `sage -R` command? That command is explicitly documented (as in `sage --help` and in [the reference manual](http://doc.sagemath.org/html/en/reference/repl/options.html#command-line-options-for-sage)) to \"run Sage's R with given arguments\", so why should it run a non-Sage R? Maybe I'm misunderstanding.\n\nI think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.\n\nBut if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.",
    "created_at": "2018-10-14T21:10:57Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393643",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
Why should this work for the `sage -R` command? That command is explicitly documented (as in `sage --help` and in [the reference manual](http://doc.sagemath.org/html/en/reference/repl/options.html#command-line-options-for-sage)) to "run Sage's R with given arguments", so why should it run a non-Sage R? Maybe I'm misunderstanding.

I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.

But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.



---

archive/issue_comments_393644.json:
```json
{
    "body": "<a id='comment:12'></a>\nI never changed those help messages in sage-on-gentoo. There is an ambiguity I am exploiting. You think it only means R from sage the distribution, I take it to mean R that sage has been configured to use. You could argue that the capitalisation means we are talking about the distribution.\n\nShould we have a semantic war :)\n\nIn any case, while there is no real benefit, compared to running R directly, I don't see why the behavior shouldn't be preserved. Existing scripts shouldn't break because you changed some underlying bits.",
    "created_at": "2018-10-14T21:18:40Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393644",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
I never changed those help messages in sage-on-gentoo. There is an ambiguity I am exploiting. You think it only means R from sage the distribution, I take it to mean R that sage has been configured to use. You could argue that the capitalisation means we are talking about the distribution.

Should we have a semantic war :)

In any case, while there is no real benefit, compared to running R directly, I don't see why the behavior shouldn't be preserved. Existing scripts shouldn't break because you changed some underlying bits.



---

archive/issue_comments_393645.json:
```json
{
    "body": "<a id='comment:13'></a>\nSeriously, if changing the documentation is your only problem with this, I'd be glad to just do that. Do you have a preferred wording?",
    "created_at": "2018-10-14T22:02:56Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393645",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Seriously, if changing the documentation is your only problem with this, I'd be glad to just do that. Do you have a preferred wording?



---

archive/issue_comments_393646.json:
```json
{
    "body": "<a id='comment:14'></a>\nI think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.",
    "created_at": "2018-10-15T04:34:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393646",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>
I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.



---

archive/issue_comments_393647.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jhpalmieri](#comment%3A14):\n> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.\n\nSo you don't think we should support people with old script that may call `sage -R`? You want those people to update?",
    "created_at": "2018-10-15T04:38:53Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393647",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
Replying to [jhpalmieri](#comment%3A14):
> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.

So you don't think we should support people with old script that may call `sage -R`? You want those people to update?



---

archive/issue_comments_393648.json:
```json
{
    "body": "<a id='comment:16'></a>\nIf Sage is not going to install a copy of `R`, then you could rewrite the main `sage` script so that `sage -R` prints a deprecation warning before executing the system's R`.\n\nI don't really buy your ambiguity argument, and I think that you are misleading people if `sage -R` runs a version of R which was not installed by Sage. (There is also the slim chance that it won't work and people will report errors from running `sage -R` to Sage developers, or (even worse) silently blame us for the problem, when it has nothing to do with us.)\n\nHow many people really use commands like `sage -R`? Maybe they should all be deprecated, and people should be encouraged to put `SAGE_ROOT/local/bin` in their path or instead to use `sage --sh -c blah`, where `blah` can be `R` or `python` or `ecl` or ...\n\nIf you really want to proceed, note that `sage -h` contains\n\n```\n  -cython [...]       -- run Cython with given arguments\n  -ecl [...]          -- run Common Lisp\n  -gap [...]          -- run Sage's Gap with given arguments\n```\nso maybe they should all omit \"Sage's\". I won't be happy with that change, so you'll need another reviewer, and I also think you should ask for more opinions.",
    "created_at": "2018-10-15T05:35:00Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393648",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>
If Sage is not going to install a copy of `R`, then you could rewrite the main `sage` script so that `sage -R` prints a deprecation warning before executing the system's R`.

I don't really buy your ambiguity argument, and I think that you are misleading people if `sage -R` runs a version of R which was not installed by Sage. (There is also the slim chance that it won't work and people will report errors from running `sage -R` to Sage developers, or (even worse) silently blame us for the problem, when it has nothing to do with us.)

How many people really use commands like `sage -R`? Maybe they should all be deprecated, and people should be encouraged to put `SAGE_ROOT/local/bin` in their path or instead to use `sage --sh -c blah`, where `blah` can be `R` or `python` or `ecl` or ...

If you really want to proceed, note that `sage -h` contains

```
  -cython [...]       -- run Cython with given arguments
  -ecl [...]          -- run Common Lisp
  -gap [...]          -- run Sage's Gap with given arguments
```
so maybe they should all omit "Sage's". I won't be happy with that change, so you'll need another reviewer, and I also think you should ask for more opinions.



---

archive/issue_comments_393649.json:
```json
{
    "body": "<a id='comment:17'></a>\nFor what its worth I agree with @kiwifb's interpretation. Even a distro can have multiple versions of a dependency installed. Sometimes it can be useful to \"start the R sage uses\", for example for debugging.",
    "created_at": "2018-10-16T08:26:08Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393649",
    "user": "https://github.com/timokau"
}
```

<a id='comment:17'></a>
For what its worth I agree with @kiwifb's interpretation. Even a distro can have multiple versions of a dependency installed. Sometimes it can be useful to "start the R sage uses", for example for debugging.



---

archive/issue_comments_393650.json:
```json
{
    "body": "<a id='comment:18'></a>\nI would also agree with interpreting \"Sage's R\" as \"the R that Sage has been configured to use\",\nand similarly for GAP, PARI/GP, Singular, etc.",
    "created_at": "2018-10-16T09:13:51Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393650",
    "user": "https://github.com/slel"
}
```

<a id='comment:18'></a>
I would also agree with interpreting "Sage's R" as "the R that Sage has been configured to use",
and similarly for GAP, PARI/GP, Singular, etc.



---

archive/issue_comments_393651.json:
```json
{
    "body": "<a id='comment:19'></a>\nI think John feels very strongly about his interpretation. The heart of his argument being if it says it is sage's own, the sage devs owns the bugs.  As distros guys we all know where to stand about that. \n\nSometimes it is your own bugs (build system, distro specificities) and sometimes it belong to upstream. In any case you may carry patches and sage-the-distro has a long history about \"owning\" its own patches regardless of upstream as you well know.\n\nIn any case piping on the matter on sage-devel doesn't cost us much since it is now, in effect, a sage-8.5 ticket.",
    "created_at": "2018-10-16T09:22:36Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393651",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
I think John feels very strongly about his interpretation. The heart of his argument being if it says it is sage's own, the sage devs owns the bugs.  As distros guys we all know where to stand about that. 

Sometimes it is your own bugs (build system, distro specificities) and sometimes it belong to upstream. In any case you may carry patches and sage-the-distro has a long history about "owning" its own patches regardless of upstream as you well know.

In any case piping on the matter on sage-devel doesn't cost us much since it is now, in effect, a sage-8.5 ticket.



---

archive/issue_comments_393652.json:
```json
{
    "body": "<a id='comment:20'></a>\nI don't feel very strongly about it either way, maybe printing a clear information (either \"this is a sage package\" or \"this is a system package\") first is a good compromise.",
    "created_at": "2018-10-16T16:01:45Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393652",
    "user": "https://github.com/timokau"
}
```

<a id='comment:20'></a>
I don't feel very strongly about it either way, maybe printing a clear information (either "this is a sage package" or "this is a system package") first is a good compromise.



---

archive/issue_comments_393653.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jhpalmieri](#comment%3A11):\n> I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.\n> \n> But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.\n\nI disagree.  I think these commands should really just mean \"run the same Python/R/etc. that Sage is using, with all the sage-related environment variables set\".",
    "created_at": "2018-10-28T16:03:32Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393653",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Replying to [jhpalmieri](#comment%3A11):
> I think that any installation of Sage which does not install its own R, Python, Singular, etc., should not have functioning `sage --python`, `sage -R`, `sage --singular`, etc., commands. Maybe instead, those commands should provide good error messages if Sage is configured to use a system version of the appropriate software.
> 
> But if you really want `sage -R` to work with a non-Sage version of `R`, please change the documentation.

I disagree.  I think these commands should really just mean "run the same Python/R/etc. that Sage is using, with all the sage-related environment variables set".



---

archive/issue_comments_393654.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jhpalmieri](#comment%3A14):\n> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` \u2013\u00a0it adds the 6 extra characters `sage -` for no reason \u2013 and it should be disabled.\n\nThat's not true that there is no reason for it.  For example, what if you want to run R in the Sage environment so that you can run sage commands in R with RPy?  Or interface with other software that is included in the Sage distribution?  From the user's perspective, `sage -R` means \"launch the R that sage is using\".  It's transparent/irrelevant whether or not the R command happened to be included in the Sage distribution or not.  For downstream distributions (e.g. on Debian, Gentoo) they are all using the system's copies of programs as much as possible, so you'll just have confused users who find that `sage -R` works on some system but not others.",
    "created_at": "2018-10-28T16:06:41Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393654",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
Replying to [jhpalmieri](#comment%3A14):
> I think that if the system has `R` installed, people should run it by running `R`, not `sage -R`. So I think if Sage is going to use the system's `R`, there is no need for command `sage -R` – it adds the 6 extra characters `sage -` for no reason – and it should be disabled.

That's not true that there is no reason for it.  For example, what if you want to run R in the Sage environment so that you can run sage commands in R with RPy?  Or interface with other software that is included in the Sage distribution?  From the user's perspective, `sage -R` means "launch the R that sage is using".  It's transparent/irrelevant whether or not the R command happened to be included in the Sage distribution or not.  For downstream distributions (e.g. on Debian, Gentoo) they are all using the system's copies of programs as much as possible, so you'll just have confused users who find that `sage -R` works on some system but not others.



---

archive/issue_events_226464.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T16:07:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226464"
}
```



---

archive/issue_events_226465.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T16:07:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226465"
}
```



---

archive/issue_comments_393655.json:
```json
{
    "body": "**Changing keywords** from \"R\" to \"R, sdl\".",
    "created_at": "2019-08-27T19:45:19Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393655",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Changing keywords** from "R" to "R, sdl".



---

archive/issue_comments_393656.json:
```json
{
    "body": "<a id='comment:25'></a>\nI've opened #28884 with a working (on Debian at least) branch allowing use of system's R.\n\nFeel free to review.",
    "created_at": "2019-12-15T00:52:01Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393656",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
I've opened #28884 with a working (on Debian at least) branch allowing use of system's R.

Feel free to review.



---

archive/issue_comments_393657.json:
```json
{
    "body": "<a id='comment:26'></a>\nIs there still anything to do here? I don't really use R inside or outside of sage... has #28884 caused any problems?",
    "created_at": "2020-03-18T23:26:29Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393657",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:26'></a>
Is there still anything to do here? I don't really use R inside or outside of sage... has #28884 caused any problems?



---

archive/issue_events_226466.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226466"
}
```



---

archive/issue_comments_393658.json:
```json
{
    "body": "<a id='comment:27'></a>\nnot sure about Jupyter kernel for R, but this is a different story. A new ticket, if you must.",
    "created_at": "2020-03-19T03:44:04Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393658",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
not sure about Jupyter kernel for R, but this is a different story. A new ticket, if you must.



---

archive/issue_comments_393659.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-03-19T03:44:04Z",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25503#issuecomment-393659",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_events_226467.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226467"
}
```



---

archive/issue_events_226468.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-19T03:44:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226468"
}
```



---

archive/issue_events_226469.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226469"
}
```



---

archive/issue_events_226470.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226470"
}
```



---

archive/issue_events_226471.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-27T15:07:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25503",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25503#event-226471"
}
```
