# Issue 25125: dancing links: find all solutions in parallel

archive/issues_024888.json:
```json
{
    "assignees": [],
    "body": "Add `all_solutions` method so that one can do:\n\n```python\nsage: S = Subsets(range(4))\nsage: rows = map(list, S)\nsage: dlx = dlx_solver(rows)\nsage: dlx\nDancing links solver for 4 columns and 16 rows\nsage: dlx.number_of_solutions()\n15\nsage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])\n[[1, 2, 3, 4],\n [1, 2, 10],\n [1, 3, 9],\n [1, 4, 8],\n [1, 14],\n [2, 3, 7],\n [2, 4, 6],\n [2, 13],\n [3, 4, 5],\n [3, 12],\n [4, 11],\n [5, 10],\n [6, 9],\n [7, 8],\n [15]]\n```\n\nKeywords: **thursdaysbdx**\n\nBranch/Commit: **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**\n\nReviewer: **Julian R\u00fcth, Vincent Delecroix, Vincent Klein**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25125_\n\n",
    "closed_at": "2018-06-02T16:11:47Z",
    "created_at": "2018-04-09T06:31:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dancing links: find all solutions in parallel",
    "type": "issue",
    "updated_at": "2018-06-02T16:11:47Z",
    "url": "https://github.com/sagemath/sage/issues/25125",
    "user": "https://github.com/seblabbe"
}
```
Add `all_solutions` method so that one can do:

```python
sage: S = Subsets(range(4))
sage: rows = map(list, S)
sage: dlx = dlx_solver(rows)
sage: dlx
Dancing links solver for 4 columns and 16 rows
sage: dlx.number_of_solutions()
15
sage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])
[[1, 2, 3, 4],
 [1, 2, 10],
 [1, 3, 9],
 [1, 4, 8],
 [1, 14],
 [2, 3, 7],
 [2, 4, 6],
 [2, 13],
 [3, 4, 5],
 [3, 12],
 [4, 11],
 [5, 10],
 [6, 9],
 [7, 8],
 [15]]
```

Keywords: **thursdaysbdx**

Branch/Commit: **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**

Reviewer: **Julian Rüth, Vincent Delecroix, Vincent Klein**

Author: **Sébastien Labbé**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/25125_





---

archive/issue_events_347590.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347590"
}
```



---

archive/issue_events_347591.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347591"
}
```



---

archive/issue_events_347592.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347592"
}
```



---

archive/issue_events_347593.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347593"
}
```



---

archive/issue_comments_383472.json:
```json
{
    "body": "Commit: **[`c4aa595`](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)**",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383472",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[`c4aa595`](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)**



---

archive/issue_comments_383473.json:
```json
{
    "body": "Branch: **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)**",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383473",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)**



---

archive/issue_comments_383474.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be\">c4aa595</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr></table>\n",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383474",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be">c4aa595</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr></table>




---

archive/issue_events_347594.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T08:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347594"
}
```



---

archive/issue_comments_383475.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nspliting -> splitting\n\nadd a test / example for parallel?",
    "created_at": "2018-04-09T09:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383475",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:3" align="right">comment:3</div>

spliting -> splitting

add a test / example for parallel?



---

archive/issue_comments_383476.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc\">71b8683</a></td><td><code>25125: fix doc</code></td></tr></table>\n",
    "created_at": "2018-04-09T20:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383476",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc">71b8683</a></td><td><code>25125: fix doc</code></td></tr></table>




---

archive/issue_comments_383477.json:
```json
{
    "body": "Changed commit from **[`c4aa595`](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)** to **[`71b8683`](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)**",
    "created_at": "2018-04-09T20:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383477",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c4aa595`](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)** to **[`71b8683`](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)**



---

archive/issue_comments_383478.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSince tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.\n\nre-needs_review.",
    "created_at": "2018-04-09T20:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383478",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:5" align="right">comment:5</div>

Since tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.

re-needs_review.



---

archive/issue_comments_383479.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think you forgot to set the \"Author\" on this ticket.",
    "created_at": "2018-04-12T17:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383479",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:6" align="right">comment:6</div>

I think you forgot to set the "Author" on this ticket.



---

archive/issue_events_347595.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T17:41:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347595"
}
```



---

archive/issue_events_347596.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T17:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347596"
}
```



---

archive/issue_comments_383480.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-04-12T17:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383480",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rüth**



---

archive/issue_comments_383481.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.\n\nWhy do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be \"2\" which seems to be Ok for doctesting, see `ncpus.py`.",
    "created_at": "2018-04-12T17:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383481",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:7" align="right">comment:7</div>

I think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.

Why do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be "2" which seems to be Ok for doctesting, see `ncpus.py`.



---

archive/issue_comments_383482.json:
```json
{
    "body": "Author: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2018-04-12T19:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383482",
    "user": "https://github.com/seblabbe"
}
```

Author: **Sébastien Labbé**



---

archive/issue_comments_383483.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@seblabbe](#comment:5):\n> I know Volker does not like when doctests use more than one cpus\n\nFor reference, here is the previous discussion on this aspect:\n[#24424 comment:3](https://github.com/sagemath/sage/issues/24424#comment:3)\n\nAt #24424, in the end, I wrote `ncpus=2` in the doctests.",
    "created_at": "2018-04-12T19:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383483",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@seblabbe](#comment:5):
> I know Volker does not like when doctests use more than one cpus

For reference, here is the previous discussion on this aspect:
[#24424 comment:3](https://github.com/sagemath/sage/issues/24424#comment:3)

At #24424, in the end, I wrote `ncpus=2` in the doctests.



---

archive/issue_comments_383484.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62\">3073811</a></td><td><code>25125: setting ncpus=None as default</code></td></tr></table>\n",
    "created_at": "2018-04-12T19:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62">3073811</a></td><td><code>25125: setting ncpus=None as default</code></td></tr></table>




---

archive/issue_comments_383485.json:
```json
{
    "body": "Changed commit from **[`71b8683`](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)** to **[`3073811`](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)**",
    "created_at": "2018-04-12T19:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383485",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`71b8683`](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)** to **[`3073811`](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)**



---

archive/issue_events_347597.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-12T19:50:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347597"
}
```



---

archive/issue_events_347598.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-12T19:50:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347598"
}
```



---

archive/issue_comments_383486.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIf parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.",
    "created_at": "2018-04-12T19:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383486",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:12" align="right">comment:12</div>

If parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.



---

archive/issue_events_347599.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T19:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347599"
}
```



---

archive/issue_events_347600.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T19:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347600"
}
```



---

archive/issue_comments_383487.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the \"non-parallel\" one that is parallel as well.\n==",
    "created_at": "2018-04-12T19:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383487",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:13" align="right">comment:13</div>

The docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the "non-parallel" one that is parallel as well.
==



---

archive/issue_comments_383488.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOk, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.",
    "created_at": "2018-04-12T20:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383488",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:14" align="right">comment:14</div>

Ok, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.



---

archive/issue_comments_383489.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961\">9448bfd</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642\">f6257b8</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749\">876bfd3</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0\">606c156</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3\">0a86ab2</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr></table>\n",
    "created_at": "2018-04-22T14:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383489",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961">9448bfd</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642">f6257b8</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749">876bfd3</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0">606c156</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3">0a86ab2</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr></table>




---

archive/issue_comments_383490.json:
```json
{
    "body": "Changed commit from **[`3073811`](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)** to **[`0a86ab2`](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)**",
    "created_at": "2018-04-22T14:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383490",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3073811`](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)** to **[`0a86ab2`](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)**



---

archive/issue_comments_383491.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI rebased the branch on top of rc3.\n\nI improved the sentences before some doctests to avoid problems mentionned by saraedum.\n\nI also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.\n\nNeeds review.",
    "created_at": "2018-04-22T14:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383491",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

I rebased the branch on top of rc3.

I improved the sentences before some doctests to avoid problems mentionned by saraedum.

I also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.

Needs review.



---

archive/issue_events_347601.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-22T14:25:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347601"
}
```



---

archive/issue_events_347602.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-22T14:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347602"
}
```



---

archive/issue_comments_383492.json:
```json
{
    "body": "Changed keywords from none to **thursdaysbdx**",
    "created_at": "2018-05-01T09:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383492",
    "user": "https://github.com/seblabbe"
}
```

Changed keywords from none to **thursdaysbdx**



---

archive/issue_comments_383493.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWhy\n\n```\n             sage: x = dlx_solver(rows)\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             3\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             0\n```\nIf the behavior with and without `ncpus=1` are different, this should be specified.",
    "created_at": "2018-05-01T14:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383493",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Why

```
             sage: x = dlx_solver(rows)
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             3
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             0
```
If the behavior with and without `ncpus=1` are different, this should be specified.



---

archive/issue_comments_383494.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWhy would you split stuff here\n\n```\n+ return sum(val for ((args, kwds), val) in nb_sol(indices))\n```\ncan be\n\n```\n+ return sum(x[1] for x in nb_sol(indices))\n```",
    "created_at": "2018-05-01T14:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383494",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Why would you split stuff here

```
+ return sum(val for ((args, kwds), val) in nb_sol(indices))
```
can be

```
+ return sum(x[1] for x in nb_sol(indices))
```



---

archive/issue_comments_383495.json:
```json
{
    "body": "Changed commit from **[`0a86ab2`](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)** to **[`f20e603`](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)**",
    "created_at": "2018-05-01T16:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383495",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0a86ab2`](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)** to **[`f20e603`](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)**



---

archive/issue_comments_383496.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175\">a7dec68</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2\">0afeffa</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f\">3d255c8</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d\">7c27fc8</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116\">78c50e3</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59\">f20e603</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr></table>\n",
    "created_at": "2018-05-01T16:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175">a7dec68</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2">0afeffa</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f">3d255c8</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d">7c27fc8</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116">78c50e3</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59">f20e603</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr></table>




---

archive/issue_comments_383497.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI found a way to reinitialize the dlx solver.\n\nThe branch was rebased on rc4.\n\nNeeds review.",
    "created_at": "2018-05-01T16:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383497",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:21" align="right">comment:21</div>

I found a way to reinitialize the dlx solver.

The branch was rebased on rc4.

Needs review.



---

archive/issue_comments_383498.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n[comment:18] still applies.",
    "created_at": "2018-05-01T17:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383498",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

[comment:18] still applies.



---

archive/issue_comments_383499.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9\">2230623</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr></table>\n",
    "created_at": "2018-05-01T19:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383499",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9">2230623</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr></table>




---

archive/issue_comments_383500.json:
```json
{
    "body": "Changed commit from **[`f20e603`](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)** to **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)**",
    "created_at": "2018-05-01T19:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f20e603`](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)** to **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)**



---

archive/issue_comments_383501.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@videlec](#comment:18):\n> If the behavior with and without `ncpus=1` are different, this should be specified.\n\nThe behavior is not different anymore. Reinitialization is performed automatically when needed.",
    "created_at": "2018-05-01T19:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383501",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@videlec](#comment:18):
> If the behavior with and without `ncpus=1` are different, this should be specified.

The behavior is not different anymore. Reinitialization is performed automatically when needed.



---

archive/issue_comments_383502.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth** to **Julian R\u00fcth, Vincent Delecroix**",
    "created_at": "2018-05-02T10:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383502",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Julian Rüth** to **Julian Rüth, Vincent Delecroix**



---

archive/issue_events_347603.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347603"
}
```



---

archive/issue_events_347604.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347604"
}
```



---

archive/issue_comments_383503.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@seblabbe](#comment:24):\n> Replying to [@videlec](#comment:18):\n> > If the behavior with and without `ncpus=1` are different, this should be specified.\n\n> \n> The behavior is not different anymore. Reinitialization is performed automatically when needed.\n\nThen why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.",
    "created_at": "2018-05-02T10:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383503",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@seblabbe](#comment:24):
> Replying to [@videlec](#comment:18):
> > If the behavior with and without `ncpus=1` are different, this should be specified.

> 
> The behavior is not different anymore. Reinitialization is performed automatically when needed.

Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.



---

archive/issue_events_347605.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347605"
}
```



---

archive/issue_events_347606.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347606"
}
```



---

archive/issue_events_347607.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-02T14:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347607"
}
```



---

archive/issue_events_347608.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-02T14:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347608"
}
```



---

archive/issue_comments_383504.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@videlec](#comment:25):\n> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\nBecause before the input was `ncpus=1` :\n\n```diff\n-    def number_of_solutions(self, ncpus=1, column=None):\n+    def number_of_solutions(self, ncpus=None, column=None):\n```\n\nTherefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.\n\nIf `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\nThus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.",
    "created_at": "2018-05-02T14:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383504",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@videlec](#comment:25):
> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.

Because before the input was `ncpus=1` :

```diff
-    def number_of_solutions(self, ncpus=1, column=None):
+    def number_of_solutions(self, ncpus=None, column=None):
```

Therefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.

If `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.

Thus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.



---

archive/issue_events_347609.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T14:08:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347609"
}
```



---

archive/issue_events_347610.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T14:08:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347610"
}
```



---

archive/issue_comments_383505.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHo I see.",
    "created_at": "2018-05-02T14:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383505",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Ho I see.



---

archive/issue_comments_383506.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks to both of you for the review. I am very happy with the state it has reached now.",
    "created_at": "2018-05-02T16:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383506",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks to both of you for the review. I am very happy with the state it has reached now.



---

archive/issue_comments_383507.json:
```json
{
    "body": "Changed branch from **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)** to **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)**",
    "created_at": "2018-05-12T11:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383507",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)** to **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)**



---

archive/issue_events_347611.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-12T11:46:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347611"
}
```



---

archive/issue_events_347612.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-12T11:46:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347612"
}
```



---

archive/issue_comments_383508.json:
```json
{
    "body": "Changed commit from **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)** to none",
    "created_at": "2018-05-13T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383508",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)** to none



---

archive/issue_comments_383509.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI'm getting random failures, especially on OSX\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 549, in sage.games.sudoku.Sudoku.solve\nFailed example:\n    next(h.solve(algorithm='dlx'))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 562, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 972, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.games.sudoku.Sudoku.solve[3]>\", line 1, in <module>\n        next(h.solve(algorithm='dlx'))\n    StopIteration\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.games.sudoku.Sudoku.solve\n    [96 tests, 1 failure, 2.38 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nor\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 863, in sage.games.sudoku.Sudoku.dlx.make_row\nFailed example:\n    len(list(h.solve(algorithm='dlx')))  # indirect doctest\nExpected:\n    5\nGot:\n    0\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row\n    [96 tests, 1 failure, 2.40 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nTry runnning tests in a loop, e.g.\n\n```\nfor i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done\n```",
    "created_at": "2018-05-13T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383509",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

I'm getting random failures, especially on OSX

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 549, in sage.games.sudoku.Sudoku.solve
Failed example:
    next(h.solve(algorithm='dlx'))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 562, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 972, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.games.sudoku.Sudoku.solve[3]>", line 1, in <module>
        next(h.solve(algorithm='dlx'))
    StopIteration
**********************************************************************
1 item had failures:
   1 of  14 in sage.games.sudoku.Sudoku.solve
    [96 tests, 1 failure, 2.38 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
or

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 863, in sage.games.sudoku.Sudoku.dlx.make_row
Failed example:
    len(list(h.solve(algorithm='dlx')))  # indirect doctest
Expected:
    5
Got:
    0
**********************************************************************
1 item had failures:
   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row
    [96 tests, 1 failure, 2.40 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
Try runnning tests in a loop, e.g.

```
for i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done
```



---

archive/issue_events_347613.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-15T13:31:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347613"
}
```



---

archive/issue_comments_383510.json:
```json
{
    "body": "Commit: **[`d13e0ec`](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)**",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383510",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[`d13e0ec`](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)**



---

archive/issue_comments_383511.json:
```json
{
    "body": "Changed branch from **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)** to **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)**",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383511",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[`2230623`](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)** to **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)**



---

archive/issue_comments_383512.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOn Ubuntu, I can not reproduce the issue.\n\nThe methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line\n\n```\nself._x = dancing_links()\n```\n\nthat was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does\n\n```\nself._x = dancing_links()\n```\n\nonly for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0\">b4fdeb5</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20\">5ddc189</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2\">0842d46</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3\">11b3894</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52\">0f320ea</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16\">2fce4fe</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc\">a5c4667</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469\">d13e0ec</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr></table>\n",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383512",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:31" align="right">comment:31</div>

On Ubuntu, I can not reproduce the issue.

The methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line

```
self._x = dancing_links()
```

that was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does

```
self._x = dancing_links()
```

only for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0">b4fdeb5</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20">5ddc189</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2">0842d46</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3">11b3894</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52">0f320ea</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16">2fce4fe</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc">a5c4667</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469">d13e0ec</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr></table>




---

archive/issue_comments_383513.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nTests <code>for i in \\`seq 0 1000\\` ; do ./sage -t --long src/sage/games/sudoku.py ; done</code> has been successfully passed on OSX (High Sierra) with `\u200bd13e0ec`.",
    "created_at": "2018-05-18T15:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383513",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:32" align="right">comment:32</div>

Tests <code>for i in \`seq 0 1000\` ; do ./sage -t --long src/sage/games/sudoku.py ; done</code> has been successfully passed on OSX (High Sierra) with `​d13e0ec`.



---

archive/issue_comments_383514.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth, Vincent Delecroix** to **Julian R\u00fcth, Vincent Delecroix, Vincent Klein**",
    "created_at": "2018-05-18T15:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383514",
    "user": "https://github.com/vinklein"
}
```

Changed reviewer from **Julian Rüth, Vincent Delecroix** to **Julian Rüth, Vincent Delecroix, Vincent Klein**



---

archive/issue_comments_383515.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAnd are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?",
    "created_at": "2018-05-18T19:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383515",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:33" align="right">comment:33</div>

And are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?



---

archive/issue_comments_383516.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nYes ! I should have mentioned that.",
    "created_at": "2018-05-22T07:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383516",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:34" align="right">comment:34</div>

Yes ! I should have mentioned that.



---

archive/issue_events_347614.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-22T11:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347614"
}
```



---

archive/issue_events_347615.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-22T11:46:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347615"
}
```



---

archive/issue_comments_383517.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n\u200bd13e0ec fix the problem.",
    "created_at": "2018-05-22T11:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383517",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:35" align="right">comment:35</div>

​d13e0ec fix the problem.



---

archive/issue_comments_383518.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThanks for your help testing on OSX.\n\nS\u00e9bastien",
    "created_at": "2018-05-22T11:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383518",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:36" align="right">comment:36</div>

Thanks for your help testing on OSX.

Sébastien



---

archive/issue_events_347616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-23T21:41:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347616"
}
```



---

archive/issue_events_347617.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-23T21:41:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347617"
}
```



---

archive/issue_comments_383519.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\n\n```\nsage -t --long src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\nFailed example:\n    [sorted(s) for s in S]\nExpected:\n    [[0, 1], [2, 3], [4, 5]]\nGot:\n    [[0, 1], [4, 5], [2, 3]]\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\n    [215 tests, 1 failure, 7.16 s]\n```",
    "created_at": "2018-05-23T21:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383519",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>


```
sage -t --long src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
Failed example:
    [sorted(s) for s in S]
Expected:
    [[0, 1], [2, 3], [4, 5]]
Got:
    [[0, 1], [4, 5], [2, 3]]
**********************************************************************
1 item had failures:
   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
    [215 tests, 1 failure, 7.16 s]
```



---

archive/issue_comments_383520.json:
```json
{
    "body": "Changed commit from **[`d13e0ec`](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)** to **[`25da49e`](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)**",
    "created_at": "2018-05-24T08:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383520",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d13e0ec`](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)** to **[`25da49e`](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)**



---

archive/issue_comments_383521.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c\">9a158e6</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da\">89b5901</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d\">c54a64d</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8\">cf7b435</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e\">004126a</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15\">d18e090</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7\">c05e73b</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026\">10f885d</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab\">25da49e</a></td><td><code>25125: sorted lists in doctests</code></td></tr></table>\n",
    "created_at": "2018-05-24T08:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383521",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c">9a158e6</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da">89b5901</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d">c54a64d</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8">cf7b435</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e">004126a</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15">d18e090</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7">c05e73b</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026">10f885d</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab">25da49e</a></td><td><code>25125: sorted lists in doctests</code></td></tr></table>




---

archive/issue_events_347618.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-24T09:13:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347618"
}
```



---

archive/issue_events_347619.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-24T09:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347619"
}
```



---

archive/issue_comments_383522.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nSorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.\n\nRebased on 8.3.beta2.\n\nI added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.\n\nNeeds review.",
    "created_at": "2018-05-24T09:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383522",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:40" align="right">comment:40</div>

Sorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.

Rebased on 8.3.beta2.

I added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.

Needs review.



---

archive/issue_comments_383523.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\n`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).",
    "created_at": "2018-05-29T09:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383523",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:41" align="right">comment:41</div>

`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).



---

archive/issue_comments_383524.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nRandom errors on dancing_links.pyx on OSX.\n\n\n```\nsage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\n...\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n    [215 tests, 5.41 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.5 seconds\n    cpu time: 4.8 seconds\n    cumulative wall time: 5.4 seconds\nmacbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\nRunning doctests with ID 2018-05-29-11-30-55-9317aab4.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(d.one_solution())\nExpected:\n    [0, 1]\nGot:\n    [2, 3]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.46 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 5.6 seconds\n    cpu time: 4.9 seconds\n    cumulative wall time: 5.5 seconds\nRunning doctests with ID 2018-05-29-11-31-04-c04446f2.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(dlx.one_solution())\nExpected:\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\nGot:\n    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.42 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n```",
    "created_at": "2018-05-29T09:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383524",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:42" align="right">comment:42</div>

Random errors on dancing_links.pyx on OSX.


```
sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
...
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
    [215 tests, 5.41 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.5 seconds
    cpu time: 4.8 seconds
    cumulative wall time: 5.4 seconds
macbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
Running doctests with ID 2018-05-29-11-30-55-9317aab4.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(d.one_solution())
Expected:
    [0, 1]
Got:
    [2, 3]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.46 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 5.6 seconds
    cpu time: 4.9 seconds
    cumulative wall time: 5.5 seconds
Running doctests with ID 2018-05-29-11-31-04-c04446f2.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(dlx.one_solution())
Expected:
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
Got:
    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.42 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
```



---

archive/issue_events_347620.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-29T09:35:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347620"
}
```



---

archive/issue_events_347621.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-29T09:35:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347621"
}
```



---

archive/issue_comments_383525.json:
```json
{
    "body": "Changed commit from **[`25da49e`](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)** to **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**",
    "created_at": "2018-05-30T19:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383525",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25da49e`](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)** to **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**



---

archive/issue_comments_383526.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545\">c985179</a></td><td><code>25125: sorting every list even those of size one in doctests</code></td></tr></table>\n",
    "created_at": "2018-05-30T19:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383526",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545">c985179</a></td><td><code>25125: sorting every list even those of size one in doctests</code></td></tr></table>




---

archive/issue_comments_383527.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThanks for your carefull review Vincent K. We avoided a nuisance to Volker.\n\nThe failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.\n\nI made the doctests for `one_solution` independent of the first solution found.\n\nI also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.\n\nHopefully, these were the last non deterministic doctests to be fixed.\n\nNeeds review.",
    "created_at": "2018-05-30T19:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383527",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:45" align="right">comment:45</div>

Thanks for your carefull review Vincent K. We avoided a nuisance to Volker.

The failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.

I made the doctests for `one_solution` independent of the first solution found.

I also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.

Hopefully, these were the last non deterministic doctests to be fixed.

Needs review.



---

archive/issue_events_347622.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-30T19:54:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347622"
}
```



---

archive/issue_events_347623.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-30T19:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347623"
}
```



---

archive/issue_events_347624.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-06-01T14:02:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347624"
}
```



---

archive/issue_events_347625.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-06-01T14:02:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347625"
}
```



---

archive/issue_comments_383528.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAll tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.",
    "created_at": "2018-06-01T14:02:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383528",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:46" align="right">comment:46</div>

All tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.



---

archive/issue_comments_383529.json:
```json
{
    "body": "Changed branch from **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)** to **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**",
    "created_at": "2018-06-02T16:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-383529",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)** to **[`c985179`](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)**



---

archive/issue_events_347626.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-02T16:11:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347626"
}
```



---

archive/issue_events_347627.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "bf2f2b9282b253777f18a5f57bd7c2ff862c3508",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-02T16:11:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-347627"
}
```
