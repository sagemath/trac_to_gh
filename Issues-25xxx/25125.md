# Issue 25125: dancing links: find all solutions in parallel

archive/issues_024888.json:
```json
{
    "assignees": [],
    "body": "Add `all_solutions` method so that one can do:\n\n```python\nsage: S = Subsets(range(4))\nsage: rows = map(list, S)\nsage: dlx = dlx_solver(rows)\nsage: dlx\nDancing links solver for 4 columns and 16 rows\nsage: dlx.number_of_solutions()\n15\nsage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])\n[[1, 2, 3, 4],\n [1, 2, 10],\n [1, 3, 9],\n [1, 4, 8],\n [1, 14],\n [2, 3, 7],\n [2, 4, 6],\n [2, 13],\n [3, 4, 5],\n [3, 12],\n [4, 11],\n [5, 10],\n [6, 9],\n [7, 8],\n [15]]\n```\n\n**Keywords:** thursdaysbdx\n\n**Branch/Commit:** [c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\n\n**Reviewer:** Julian R\u00fcth, Vincent Delecroix, Vincent Klein\n\n**Author:** S\u00e9bastien Labb\u00e9\n\nIssue created by migration from https://trac.sagemath.org/ticket/25125\n\n",
    "closed_at": "2018-06-02T16:11:47Z",
    "created_at": "2018-04-09T06:31:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dancing links: find all solutions in parallel",
    "type": "issue",
    "updated_at": "2018-06-02T16:11:47Z",
    "url": "https://github.com/sagemath/sage/issues/25125",
    "user": "https://github.com/seblabbe"
}
```
Add `all_solutions` method so that one can do:

```python
sage: S = Subsets(range(4))
sage: rows = map(list, S)
sage: dlx = dlx_solver(rows)
sage: dlx
Dancing links solver for 4 columns and 16 rows
sage: dlx.number_of_solutions()
15
sage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])
[[1, 2, 3, 4],
 [1, 2, 10],
 [1, 3, 9],
 [1, 4, 8],
 [1, 14],
 [2, 3, 7],
 [2, 4, 6],
 [2, 13],
 [3, 4, 5],
 [3, 12],
 [4, 11],
 [5, 10],
 [6, 9],
 [7, 8],
 [15]]
```

**Keywords:** thursdaysbdx

**Branch/Commit:** [c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)

**Reviewer:** Julian Rüth, Vincent Delecroix, Vincent Klein

**Author:** Sébastien Labbé

Issue created by migration from https://trac.sagemath.org/ticket/25125





---

archive/issue_events_302835.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302835"
}
```



---

archive/issue_events_302836.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302836"
}
```



---

archive/issue_events_302837.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T06:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302837"
}
```



---

archive/issue_comments_386009.json:
```json
{
    "body": "**Commit:** [c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386009",
    "user": "https://github.com/seblabbe"
}
```

**Commit:** [c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)



---

archive/issue_comments_386010.json:
```json
{
    "body": "**Branch:** [u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386010",
    "user": "https://github.com/seblabbe"
}
```

**Branch:** [u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)



---

archive/issue_comments_386011.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be\">c4aa595</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr></table>\n",
    "created_at": "2018-04-09T06:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386011",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'>**Comment 1:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be">c4aa595</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr></table>




---

archive/issue_events_302838.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-09T08:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302838"
}
```



---

archive/issue_comments_386012.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nspliting -> splitting\n\nadd a test / example for parallel?",
    "created_at": "2018-04-09T09:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386012",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'>**Comment 3:**</a>
spliting -> splitting

add a test / example for parallel?



---

archive/issue_comments_386013.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc\">71b8683</a></td><td><code>25125: fix doc</code></td></tr></table>\n",
    "created_at": "2018-04-09T20:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386013",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc">71b8683</a></td><td><code>25125: fix doc</code></td></tr></table>




---

archive/issue_comments_386014.json:
```json
{
    "body": "**Changing commit** from \"[c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)\" to \"[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)\".",
    "created_at": "2018-04-09T20:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386014",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)" to "[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)".



---

archive/issue_comments_386015.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nSince tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.\n\nre-needs_review.",
    "created_at": "2018-04-09T20:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386015",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'>**Comment 5:**</a>
Since tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.

re-needs_review.



---

archive/issue_comments_386016.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI think you forgot to set the \"Author\" on this ticket.",
    "created_at": "2018-04-12T17:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386016",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'>**Comment 6:**</a>
I think you forgot to set the "Author" on this ticket.



---

archive/issue_events_302839.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T17:41:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302839"
}
```



---

archive/issue_events_302840.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T17:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302840"
}
```



---

archive/issue_comments_386017.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2018-04-12T17:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386017",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian Rüth



---

archive/issue_comments_386018.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nI think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.\n\nWhy do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be \"2\" which seems to be Ok for doctesting, see `ncpus.py`.",
    "created_at": "2018-04-12T17:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386018",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'>**Comment 7:**</a>
I think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.

Why do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be "2" which seems to be Ok for doctesting, see `ncpus.py`.



---

archive/issue_comments_386019.json:
```json
{
    "body": "**Author:** S\u00e9bastien Labb\u00e9",
    "created_at": "2018-04-12T19:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386019",
    "user": "https://github.com/seblabbe"
}
```

**Author:** Sébastien Labbé



---

archive/issue_comments_386020.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@seblabbe](#comment%3A5):\n> I know Volker does not like when doctests use more than one cpus\n\nFor reference, here is the previous discussion on this aspect:\n[#24424 comment:3](https://github.com/sagemath/sage/issues/24424#comment:3)\n\nAt #24424, in the end, I wrote `ncpus=2` in the doctests.",
    "created_at": "2018-04-12T19:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386020",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@seblabbe](#comment%3A5):
> I know Volker does not like when doctests use more than one cpus

For reference, here is the previous discussion on this aspect:
[#24424 comment:3](https://github.com/sagemath/sage/issues/24424#comment:3)

At #24424, in the end, I wrote `ncpus=2` in the doctests.



---

archive/issue_comments_386021.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62\">3073811</a></td><td><code>25125: setting ncpus=None as default</code></td></tr></table>\n",
    "created_at": "2018-04-12T19:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386021",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>**Comment 10:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62">3073811</a></td><td><code>25125: setting ncpus=None as default</code></td></tr></table>




---

archive/issue_comments_386022.json:
```json
{
    "body": "**Changing commit** from \"[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)\" to \"[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)\".",
    "created_at": "2018-04-12T19:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386022",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)" to "[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)".



---

archive/issue_events_302841.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-12T19:50:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302841"
}
```



---

archive/issue_events_302842.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-12T19:50:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302842"
}
```



---

archive/issue_comments_386023.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nIf parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.",
    "created_at": "2018-04-12T19:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386023",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'>**Comment 12:**</a>
If parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.



---

archive/issue_events_302843.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T19:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302843"
}
```



---

archive/issue_events_302844.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T19:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302844"
}
```



---

archive/issue_comments_386024.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nThe docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the \"non-parallel\" one that is parallel as well.\n==",
    "created_at": "2018-04-12T19:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386024",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:13'>**Comment 13:**</a>
The docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the "non-parallel" one that is parallel as well.
==



---

archive/issue_comments_386025.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nOk, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.",
    "created_at": "2018-04-12T20:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386025",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:14'>**Comment 14:**</a>
Ok, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.



---

archive/issue_comments_386026.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961\">9448bfd</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642\">f6257b8</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749\">876bfd3</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0\">606c156</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3\">0a86ab2</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr></table>\n",
    "created_at": "2018-04-22T14:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386026",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>**Comment 15:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961">9448bfd</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642">f6257b8</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749">876bfd3</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0">606c156</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3">0a86ab2</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr></table>




---

archive/issue_comments_386027.json:
```json
{
    "body": "**Changing commit** from \"[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)\" to \"[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)\".",
    "created_at": "2018-04-22T14:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386027",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)" to "[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)".



---

archive/issue_comments_386028.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nI rebased the branch on top of rc3.\n\nI improved the sentences before some doctests to avoid problems mentionned by saraedum.\n\nI also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.\n\nNeeds review.",
    "created_at": "2018-04-22T14:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386028",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'>**Comment 16:**</a>
I rebased the branch on top of rc3.

I improved the sentences before some doctests to avoid problems mentionned by saraedum.

I also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.

Needs review.



---

archive/issue_events_302845.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-22T14:25:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302845"
}
```



---

archive/issue_events_302846.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-04-22T14:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302846"
}
```



---

archive/issue_comments_386029.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"thursdaysbdx\".",
    "created_at": "2018-05-01T09:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386029",
    "user": "https://github.com/seblabbe"
}
```

**Changing keywords** from "" to "thursdaysbdx".



---

archive/issue_comments_386030.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nWhy\n\n```\n             sage: x = dlx_solver(rows)\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             3\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             0\n```\nIf the behavior with and without `ncpus=1` are different, this should be specified.",
    "created_at": "2018-05-01T14:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386030",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'>**Comment 18:**</a>
Why

```
             sage: x = dlx_solver(rows)
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             3
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             0
```
If the behavior with and without `ncpus=1` are different, this should be specified.



---

archive/issue_comments_386031.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nWhy would you split stuff here\n\n```\n+ return sum(val for ((args, kwds), val) in nb_sol(indices))\n```\ncan be\n\n```\n+ return sum(x[1] for x in nb_sol(indices))\n```",
    "created_at": "2018-05-01T14:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386031",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'>**Comment 19:**</a>
Why would you split stuff here

```
+ return sum(val for ((args, kwds), val) in nb_sol(indices))
```
can be

```
+ return sum(x[1] for x in nb_sol(indices))
```



---

archive/issue_comments_386032.json:
```json
{
    "body": "**Changing commit** from \"[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)\" to \"[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)\".",
    "created_at": "2018-05-01T16:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386032",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)" to "[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)".



---

archive/issue_comments_386033.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175\">a7dec68</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2\">0afeffa</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f\">3d255c8</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d\">7c27fc8</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116\">78c50e3</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59\">f20e603</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr></table>\n",
    "created_at": "2018-05-01T16:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386033",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>**Comment 20:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175">a7dec68</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2">0afeffa</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f">3d255c8</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d">7c27fc8</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116">78c50e3</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59">f20e603</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr></table>




---

archive/issue_comments_386034.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nI found a way to reinitialize the dlx solver.\n\nThe branch was rebased on rc4.\n\nNeeds review.",
    "created_at": "2018-05-01T16:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386034",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'>**Comment 21:**</a>
I found a way to reinitialize the dlx solver.

The branch was rebased on rc4.

Needs review.



---

archive/issue_comments_386035.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\n[comment:18] still applies.",
    "created_at": "2018-05-01T17:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386035",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'>**Comment 22:**</a>
[comment:18] still applies.



---

archive/issue_comments_386036.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9\">2230623</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr></table>\n",
    "created_at": "2018-05-01T19:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386036",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>**Comment 23:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9">2230623</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr></table>




---

archive/issue_comments_386037.json:
```json
{
    "body": "**Changing commit** from \"[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)\" to \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\".",
    "created_at": "2018-05-01T19:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386037",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)" to "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)".



---

archive/issue_comments_386038.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nReplying to [@videlec](#comment%3A18):\n> If the behavior with and without `ncpus=1` are different, this should be specified.\n\nThe behavior is not different anymore. Reinitialization is performed automatically when needed.",
    "created_at": "2018-05-01T19:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386038",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'>**Comment 24:**</a>
Replying to [@videlec](#comment%3A18):
> If the behavior with and without `ncpus=1` are different, this should be specified.

The behavior is not different anymore. Reinitialization is performed automatically when needed.



---

archive/issue_comments_386039.json:
```json
{
    "body": "**Changing reviewer** from \"Julian R\u00fcth\" to \"Julian R\u00fcth, Vincent Delecroix\".",
    "created_at": "2018-05-02T10:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386039",
    "user": "https://github.com/videlec"
}
```

**Changing reviewer** from "Julian Rüth" to "Julian Rüth, Vincent Delecroix".



---

archive/issue_events_302847.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302847"
}
```



---

archive/issue_events_302848.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302848"
}
```



---

archive/issue_comments_386040.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@seblabbe](#comment%3A24):\n> Replying to [@videlec](#comment%3A18):\n> > If the behavior with and without `ncpus=1` are different, this should be specified.\n\n> \n> The behavior is not different anymore. Reinitialization is performed automatically when needed.\n\nThen why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.",
    "created_at": "2018-05-02T10:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386040",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@seblabbe](#comment%3A24):
> Replying to [@videlec](#comment%3A18):
> > If the behavior with and without `ncpus=1` are different, this should be specified.

> 
> The behavior is not different anymore. Reinitialization is performed automatically when needed.

Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.



---

archive/issue_events_302849.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302849"
}
```



---

archive/issue_events_302850.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302850"
}
```



---

archive/issue_events_302851.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-02T14:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302851"
}
```



---

archive/issue_events_302852.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-02T14:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302852"
}
```



---

archive/issue_comments_386041.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nReplying to [@videlec](#comment%3A25):\n> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\nBecause before the input was `ncpus=1` :\n\n```diff\n-    def number_of_solutions(self, ncpus=1, column=None):\n+    def number_of_solutions(self, ncpus=None, column=None):\n```\n\nTherefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.\n\nIf `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\nThus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.",
    "created_at": "2018-05-02T14:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386041",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:26'>**Comment 26:**</a>
Replying to [@videlec](#comment%3A25):
> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.

Because before the input was `ncpus=1` :

```diff
-    def number_of_solutions(self, ncpus=1, column=None):
+    def number_of_solutions(self, ncpus=None, column=None):
```

Therefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.

If `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.

Thus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.



---

archive/issue_events_302853.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T14:08:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302853"
}
```



---

archive/issue_events_302854.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T14:08:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302854"
}
```



---

archive/issue_comments_386042.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nHo I see.",
    "created_at": "2018-05-02T14:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386042",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'>**Comment 27:**</a>
Ho I see.



---

archive/issue_comments_386043.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nThanks to both of you for the review. I am very happy with the state it has reached now.",
    "created_at": "2018-05-02T16:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386043",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:28'>**Comment 28:**</a>
Thanks to both of you for the review. I am very happy with the state it has reached now.



---

archive/issue_comments_386044.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\" to \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\".",
    "created_at": "2018-05-12T11:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386044",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)" to "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)".



---

archive/issue_events_302855.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-12T11:46:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302855"
}
```



---

archive/issue_events_302856.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-12T11:46:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302856"
}
```



---

archive/issue_comments_386045.json:
```json
{
    "body": "**Changing commit** from \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\" to \"\".",
    "created_at": "2018-05-13T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386045",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)" to "".



---

archive/issue_comments_386046.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nI'm getting random failures, especially on OSX\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 549, in sage.games.sudoku.Sudoku.solve\nFailed example:\n    next(h.solve(algorithm='dlx'))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 562, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 972, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.games.sudoku.Sudoku.solve[3]>\", line 1, in <module>\n        next(h.solve(algorithm='dlx'))\n    StopIteration\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.games.sudoku.Sudoku.solve\n    [96 tests, 1 failure, 2.38 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nor\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 863, in sage.games.sudoku.Sudoku.dlx.make_row\nFailed example:\n    len(list(h.solve(algorithm='dlx')))  # indirect doctest\nExpected:\n    5\nGot:\n    0\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row\n    [96 tests, 1 failure, 2.40 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nTry runnning tests in a loop, e.g.\n\n```\nfor i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done\n```",
    "created_at": "2018-05-13T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386046",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'>**Comment 30:**</a>
I'm getting random failures, especially on OSX

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 549, in sage.games.sudoku.Sudoku.solve
Failed example:
    next(h.solve(algorithm='dlx'))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 562, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 972, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.games.sudoku.Sudoku.solve[3]>", line 1, in <module>
        next(h.solve(algorithm='dlx'))
    StopIteration
**********************************************************************
1 item had failures:
   1 of  14 in sage.games.sudoku.Sudoku.solve
    [96 tests, 1 failure, 2.38 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
or

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 863, in sage.games.sudoku.Sudoku.dlx.make_row
Failed example:
    len(list(h.solve(algorithm='dlx')))  # indirect doctest
Expected:
    5
Got:
    0
**********************************************************************
1 item had failures:
   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row
    [96 tests, 1 failure, 2.40 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
Try runnning tests in a loop, e.g.

```
for i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done
```



---

archive/issue_events_302857.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-15T13:31:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302857"
}
```



---

archive/issue_comments_386047.json:
```json
{
    "body": "**Commit:** [d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386047",
    "user": "https://github.com/seblabbe"
}
```

**Commit:** [d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)



---

archive/issue_comments_386048.json:
```json
{
    "body": "**Changing branch** from \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\" to \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\".",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386048",
    "user": "https://github.com/seblabbe"
}
```

**Changing branch** from "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)" to "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)".



---

archive/issue_comments_386049.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nOn Ubuntu, I can not reproduce the issue.\n\nThe methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line\n\n```\nself._x = dancing_links()\n```\n\nthat was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does\n\n```\nself._x = dancing_links()\n```\n\nonly for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0\">b4fdeb5</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20\">5ddc189</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2\">0842d46</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3\">11b3894</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52\">0f320ea</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16\">2fce4fe</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc\">a5c4667</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469\">d13e0ec</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr></table>\n",
    "created_at": "2018-05-15T13:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386049",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:31'>**Comment 31:**</a>
On Ubuntu, I can not reproduce the issue.

The methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line

```
self._x = dancing_links()
```

that was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does

```
self._x = dancing_links()
```

only for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0">b4fdeb5</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20">5ddc189</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2">0842d46</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3">11b3894</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52">0f320ea</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16">2fce4fe</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc">a5c4667</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469">d13e0ec</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr></table>




---

archive/issue_comments_386050.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nTests <code>for i in \\`seq 0 1000\\` ; do ./sage -t --long src/sage/games/sudoku.py ; done</code> has been successfully passed on OSX (High Sierra) with `\u200bd13e0ec`.",
    "created_at": "2018-05-18T15:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386050",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:32'>**Comment 32:**</a>
Tests <code>for i in \`seq 0 1000\` ; do ./sage -t --long src/sage/games/sudoku.py ; done</code> has been successfully passed on OSX (High Sierra) with `​d13e0ec`.



---

archive/issue_comments_386051.json:
```json
{
    "body": "**Changing reviewer** from \"Julian R\u00fcth, Vincent Delecroix\" to \"Julian R\u00fcth, Vincent Delecroix, Vincent Klein\".",
    "created_at": "2018-05-18T15:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386051",
    "user": "https://github.com/vinklein"
}
```

**Changing reviewer** from "Julian Rüth, Vincent Delecroix" to "Julian Rüth, Vincent Delecroix, Vincent Klein".



---

archive/issue_comments_386052.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nAnd are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?",
    "created_at": "2018-05-18T19:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386052",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:33'>**Comment 33:**</a>
And are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?



---

archive/issue_comments_386053.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nYes ! I should have mentioned that.",
    "created_at": "2018-05-22T07:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386053",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:34'>**Comment 34:**</a>
Yes ! I should have mentioned that.



---

archive/issue_events_302858.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-22T11:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302858"
}
```



---

archive/issue_events_302859.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-22T11:46:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302859"
}
```



---

archive/issue_comments_386054.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\n\u200bd13e0ec fix the problem.",
    "created_at": "2018-05-22T11:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386054",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:35'>**Comment 35:**</a>
​d13e0ec fix the problem.



---

archive/issue_comments_386055.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nThanks for your help testing on OSX.\n\nS\u00e9bastien",
    "created_at": "2018-05-22T11:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386055",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:36'>**Comment 36:**</a>
Thanks for your help testing on OSX.

Sébastien



---

archive/issue_events_302860.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-23T21:41:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302860"
}
```



---

archive/issue_events_302861.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-23T21:41:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302861"
}
```



---

archive/issue_comments_386056.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\n\n```\nsage -t --long src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\nFailed example:\n    [sorted(s) for s in S]\nExpected:\n    [[0, 1], [2, 3], [4, 5]]\nGot:\n    [[0, 1], [4, 5], [2, 3]]\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\n    [215 tests, 1 failure, 7.16 s]\n```",
    "created_at": "2018-05-23T21:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386056",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'>**Comment 37:**</a>

```
sage -t --long src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
Failed example:
    [sorted(s) for s in S]
Expected:
    [[0, 1], [2, 3], [4, 5]]
Got:
    [[0, 1], [4, 5], [2, 3]]
**********************************************************************
1 item had failures:
   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
    [215 tests, 1 failure, 7.16 s]
```



---

archive/issue_comments_386057.json:
```json
{
    "body": "**Changing commit** from \"[d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)\" to \"[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)\".",
    "created_at": "2018-05-24T08:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386057",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)" to "[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)".



---

archive/issue_comments_386058.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c\">9a158e6</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da\">89b5901</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d\">c54a64d</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8\">cf7b435</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e\">004126a</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15\">d18e090</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7\">c05e73b</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026\">10f885d</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab\">25da49e</a></td><td><code>25125: sorted lists in doctests</code></td></tr></table>\n",
    "created_at": "2018-05-24T08:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386058",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>**Comment 39:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c">9a158e6</a></td><td><code>25125: add all_solutions method to dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da">89b5901</a></td><td><code>25125: fix doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d">c54a64d</a></td><td><code>25125: setting ncpus=None as default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8">cf7b435</a></td><td><code>25125: improved sentences before some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e">004126a</a></td><td><code>rewriting number_of_solutions method like one_solution and all_solutions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15">d18e090</a></td><td><code>25125: allow reinitialization of dlx solver</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7">c05e73b</a></td><td><code>25125: reinitialize the dlx solver when needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026">10f885d</a></td><td><code>25125: Calling constructor dancing_links() only in reinitialize not in __init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab">25da49e</a></td><td><code>25125: sorted lists in doctests</code></td></tr></table>




---

archive/issue_events_302862.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-24T09:13:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302862"
}
```



---

archive/issue_events_302863.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-24T09:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302863"
}
```



---

archive/issue_comments_386059.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nSorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.\n\nRebased on 8.3.beta2.\n\nI added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.\n\nNeeds review.",
    "created_at": "2018-05-24T09:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386059",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:40'>**Comment 40:**</a>
Sorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.

Rebased on 8.3.beta2.

I added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.

Needs review.



---

archive/issue_comments_386060.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\n`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).",
    "created_at": "2018-05-29T09:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386060",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:41'>**Comment 41:**</a>
`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).



---

archive/issue_comments_386061.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nRandom errors on dancing_links.pyx on OSX.\n\n\n```\nsage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\n...\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n    [215 tests, 5.41 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.5 seconds\n    cpu time: 4.8 seconds\n    cumulative wall time: 5.4 seconds\nmacbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\nRunning doctests with ID 2018-05-29-11-30-55-9317aab4.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(d.one_solution())\nExpected:\n    [0, 1]\nGot:\n    [2, 3]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.46 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 5.6 seconds\n    cpu time: 4.9 seconds\n    cumulative wall time: 5.5 seconds\nRunning doctests with ID 2018-05-29-11-31-04-c04446f2.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(dlx.one_solution())\nExpected:\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\nGot:\n    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.42 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n```",
    "created_at": "2018-05-29T09:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386061",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:42'>**Comment 42:**</a>
Random errors on dancing_links.pyx on OSX.


```
sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
...
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
    [215 tests, 5.41 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.5 seconds
    cpu time: 4.8 seconds
    cumulative wall time: 5.4 seconds
macbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
Running doctests with ID 2018-05-29-11-30-55-9317aab4.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(d.one_solution())
Expected:
    [0, 1]
Got:
    [2, 3]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.46 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 5.6 seconds
    cpu time: 4.9 seconds
    cumulative wall time: 5.5 seconds
Running doctests with ID 2018-05-29-11-31-04-c04446f2.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(dlx.one_solution())
Expected:
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
Got:
    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.42 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
```



---

archive/issue_events_302864.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-29T09:35:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302864"
}
```



---

archive/issue_events_302865.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-29T09:35:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302865"
}
```



---

archive/issue_comments_386062.json:
```json
{
    "body": "**Changing commit** from \"[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)\" to \"[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\".",
    "created_at": "2018-05-30T19:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386062",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)" to "[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)".



---

archive/issue_comments_386063.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545\">c985179</a></td><td><code>25125: sorting every list even those of size one in doctests</code></td></tr></table>\n",
    "created_at": "2018-05-30T19:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386063",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:44'>**Comment 44:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545">c985179</a></td><td><code>25125: sorting every list even those of size one in doctests</code></td></tr></table>




---

archive/issue_comments_386064.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nThanks for your carefull review Vincent K. We avoided a nuisance to Volker.\n\nThe failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.\n\nI made the doctests for `one_solution` independent of the first solution found.\n\nI also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.\n\nHopefully, these were the last non deterministic doctests to be fixed.\n\nNeeds review.",
    "created_at": "2018-05-30T19:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386064",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:45'>**Comment 45:**</a>
Thanks for your carefull review Vincent K. We avoided a nuisance to Volker.

The failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.

I made the doctests for `one_solution` independent of the first solution found.

I also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.

Hopefully, these were the last non deterministic doctests to be fixed.

Needs review.



---

archive/issue_events_302866.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-30T19:54:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302866"
}
```



---

archive/issue_events_302867.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-05-30T19:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302867"
}
```



---

archive/issue_events_302868.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-06-01T14:02:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302868"
}
```



---

archive/issue_events_302869.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-06-01T14:02:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302869"
}
```



---

archive/issue_comments_386065.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nAll tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.",
    "created_at": "2018-06-01T14:02:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386065",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:46'>**Comment 46:**</a>
All tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.



---

archive/issue_comments_386066.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\" to \"[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\".",
    "created_at": "2018-06-02T16:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25125#issuecomment-386066",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)" to "[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)".



---

archive/issue_events_302870.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-02T16:11:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302870"
}
```



---

archive/issue_events_302871.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "bf2f2b9282b253777f18a5f57bd7c2ff862c3508",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-02T16:11:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25125#event-302871"
}
```
