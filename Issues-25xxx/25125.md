# Issue 25125: dancing links: find all solutions in parallel

archive/issues_024888.json:
```json
{
    "body": "Add `all_solutions` method so that one can do:\n\n```python\nsage: S = Subsets(range(4))\nsage: rows = map(list, S)\nsage: dlx = dlx_solver(rows)\nsage: dlx\nDancing links solver for 4 columns and 16 rows\nsage: dlx.number_of_solutions()\n15\nsage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])\n[[1, 2, 3, 4],\n [1, 2, 10],\n [1, 3, 9],\n [1, 4, 8],\n [1, 14],\n [2, 3, 7],\n [2, 4, 6],\n [2, 13],\n [3, 4, 5],\n [3, 12],\n [4, 11],\n [5, 10],\n [6, 9],\n [7, 8],\n [15]]\n```\n\nKeywords: thursdaysbdx\n\nBranch/Commit: [c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\n\nReviewer: Julian R\u00fcth, Vincent Delecroix, Vincent Klein\n\nAuthor: S\u00e9bastien Labb\u00e9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25125\n\n",
    "closed_at": "2018-06-02T16:11:47Z",
    "created_at": "2018-04-09T06:31:19Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "dancing links: find all solutions in parallel",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25125",
    "user": "https://github.com/seblabbe"
}
```
Add `all_solutions` method so that one can do:

```python
sage: S = Subsets(range(4))
sage: rows = map(list, S)
sage: dlx = dlx_solver(rows)
sage: dlx
Dancing links solver for 4 columns and 16 rows
sage: dlx.number_of_solutions()
15
sage: sorted([sorted(s) for s in dlx.all_solutions(ncpus=8)])
[[1, 2, 3, 4],
 [1, 2, 10],
 [1, 3, 9],
 [1, 4, 8],
 [1, 14],
 [2, 3, 7],
 [2, 4, 6],
 [2, 13],
 [3, 4, 5],
 [3, 12],
 [4, 11],
 [5, 10],
 [6, 9],
 [7, 8],
 [15]]
```

Keywords: thursdaysbdx

Branch/Commit: [c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)

Reviewer: Julian Rüth, Vincent Delecroix, Vincent Klein

Author: Sébastien Labbé

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25125





---

archive/issue_comments_480963.json:
```json
{
    "body": "Commit: [c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)",
    "created_at": "2018-04-09T06:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480963",
    "user": "https://github.com/seblabbe"
}
```

Commit: [c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)



---

archive/issue_comments_480964.json:
```json
{
    "body": "Branch: [u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)",
    "created_at": "2018-04-09T06:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480964",
    "user": "https://github.com/seblabbe"
}
```

Branch: [u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)



---

archive/issue_comments_480965.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[c4aa595](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)|`25125: add all_solutions method to dancing links`|",
    "created_at": "2018-04-09T06:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480965",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[c4aa595](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)|`25125: add all_solutions method to dancing links`|



---

archive/issue_comments_480966.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-09T08:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480966",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_480967.json:
```json
{
    "body": "<a id='comment:3'></a>\nspliting -> splitting\n\nadd a test / example for parallel?",
    "created_at": "2018-04-09T09:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480967",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'></a>
spliting -> splitting

add a test / example for parallel?



---

archive/issue_comments_480968.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[71b8683](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)|`25125: fix doc`|",
    "created_at": "2018-04-09T20:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[71b8683](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)|`25125: fix doc`|



---

archive/issue_comments_480969.json:
```json
{
    "body": "Changing commit from \"[c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)\" to \"[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)\"",
    "created_at": "2018-04-09T20:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[c4aa5950b532924fe9952f7b2ec8ecc42cef45be](https://github.com/sagemath/sagetrac-mirror/commit/c4aa5950b532924fe9952f7b2ec8ecc42cef45be)" to "[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)"



---

archive/issue_comments_480970.json:
```json
{
    "body": "<a id='comment:5'></a>\nSince tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.\n\nre-needs_review.",
    "created_at": "2018-04-09T20:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480970",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
Since tests are often run in parallel, I know Volker does not like when doctests use more than one cpus. Instead I added a sentence explaining how to use `ncpus` argument.

re-needs_review.



---

archive/issue_comments_480971.json:
```json
{
    "body": "<a id='comment:6'></a>\nI think you forgot to set the \"Author\" on this ticket.",
    "created_at": "2018-04-12T17:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480971",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'></a>
I think you forgot to set the "Author" on this ticket.



---

archive/issue_comments_480972.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-04-12T17:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480972",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_480973.json:
```json
{
    "body": "Reviewer: Julian R\u00fcth",
    "created_at": "2018-04-12T17:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480973",
    "user": "https://github.com/saraedum"
}
```

Reviewer: Julian Rüth



---

archive/issue_comments_480974.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.\n\nWhy do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be \"2\" which seems to be Ok for doctesting, see `ncpus.py`.",
    "created_at": "2018-04-12T17:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480974",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
I think it's a bit weird that the ncpus example does not actually set ncpus>1. It's understandable from your comment on the ticket why you did that but it's not understandable from looking at the code. I think it would be nice to add a comment to the docstring.

Why do you set `ncpus=1` as a default? Shouldn't the default just be `None`? During doctests that is going to be "2" which seems to be Ok for doctesting, see `ncpus.py`.



---

archive/issue_comments_480975.json:
```json
{
    "body": "Author: S\u00e9bastien Labb\u00e9",
    "created_at": "2018-04-12T19:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480975",
    "user": "https://github.com/seblabbe"
}
```

Author: Sébastien Labbé



---

archive/issue_comments_480976.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [slabbe](#comment%3A5):\n> I know Volker does not like when doctests use more than one cpus\n\n\nFor reference, here is the previous discussion on this aspect:\nhttps://trac.sagemath.org/ticket/24424#comment:3\n\nAt #24424, in the end, I wrote `ncpus=2` in the doctests.",
    "created_at": "2018-04-12T19:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480976",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
Replying to [slabbe](#comment%3A5):
> I know Volker does not like when doctests use more than one cpus


For reference, here is the previous discussion on this aspect:
https://trac.sagemath.org/ticket/24424#comment:3

At #24424, in the end, I wrote `ncpus=2` in the doctests.



---

archive/issue_comments_480977.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[3073811](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)|`25125: setting ncpus=None as default`|",
    "created_at": "2018-04-12T19:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[3073811](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)|`25125: setting ncpus=None as default`|



---

archive/issue_comments_480978.json:
```json
{
    "body": "Changing commit from \"[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)\" to \"[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)\"",
    "created_at": "2018-04-12T19:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[71b86832e62cec0b6fb7ba26e75514ee64adabfc](https://github.com/sagemath/sagetrac-mirror/commit/71b86832e62cec0b6fb7ba26e75514ee64adabfc)" to "[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)"



---

archive/issue_comments_480979.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-04-12T19:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480979",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_480980.json:
```json
{
    "body": "<a id='comment:12'></a>\nIf parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.",
    "created_at": "2018-04-12T19:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480980",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>
If parallelity is what people usually want in #24424 as well, then `None` should be the default there as well I think.



---

archive/issue_comments_480981.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-12T19:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480981",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_480982.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the \"non-parallel\" one that is parallel as well.\n==",
    "created_at": "2018-04-12T19:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480982",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:13'></a>
The docstrings do not really work anymore now. It's not explained what `None` means. Also the example about parallel computation is not really different from the "non-parallel" one that is parallel as well.
==



---

archive/issue_comments_480983.json:
```json
{
    "body": "<a id='comment:14'></a>\nOk, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.",
    "created_at": "2018-04-12T20:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480983",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:14'></a>
Ok, thanks for your comment. I will rework on this in a few days. I need to prepare for a travel.



---

archive/issue_comments_480984.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9448bfd](https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961)|`25125: add all_solutions method to dancing links`|\n|[f6257b8](https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642)|`25125: fix doc`|\n|[876bfd3](https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749)|`25125: setting ncpus=None as default`|\n|[606c156](https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0)|`25125: improved sentences before some doctests`|\n|[0a86ab2](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)|`rewriting number_of_solutions method like one_solution and all_solutions`|",
    "created_at": "2018-04-22T14:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9448bfd](https://github.com/sagemath/sagetrac-mirror/commit/9448bfdbafc0aedf1bb3e74edb3028938cebd961)|`25125: add all_solutions method to dancing links`|
|[f6257b8](https://github.com/sagemath/sagetrac-mirror/commit/f6257b876f6693b2d93ffef8bb60f87255109642)|`25125: fix doc`|
|[876bfd3](https://github.com/sagemath/sagetrac-mirror/commit/876bfd3cf2839c1fe983dead87731d247349d749)|`25125: setting ncpus=None as default`|
|[606c156](https://github.com/sagemath/sagetrac-mirror/commit/606c156e11af547837037584337b68cea73545c0)|`25125: improved sentences before some doctests`|
|[0a86ab2](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)|`rewriting number_of_solutions method like one_solution and all_solutions`|



---

archive/issue_comments_480985.json:
```json
{
    "body": "Changing commit from \"[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)\" to \"[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)\"",
    "created_at": "2018-04-22T14:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[30738114df9b404c0aa2ec0b2e475f3ade6f8f62](https://github.com/sagemath/sagetrac-mirror/commit/30738114df9b404c0aa2ec0b2e475f3ade6f8f62)" to "[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)"



---

archive/issue_comments_480986.json:
```json
{
    "body": "<a id='comment:16'></a>\nI rebased the branch on top of rc3.\n\nI improved the sentences before some doctests to avoid problems mentionned by saraedum.\n\nI also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.\n\nNeeds review.",
    "created_at": "2018-04-22T14:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480986",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>
I rebased the branch on top of rc3.

I improved the sentences before some doctests to avoid problems mentionned by saraedum.

I also rewrote `number_of_solutions` method to be like `one_solution` and `all_solutions` methods. I deleted the `_number_of_solutions_iterator` method. After changing `ncpus=1` to `ncpus=None`, there was an infinite loop because `_number_of_solutions_iterator` was calling `number_of_solutions` which was calling  `_number_of_solutions_iterator` again because `ncpus` was not set to 1 by default. I think the code makes more sense like it is now.

Needs review.



---

archive/issue_comments_480987.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-22T14:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480987",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_480988.json:
```json
{
    "body": "Changing keywords from \"\" to \"thursdaysbdx\".",
    "created_at": "2018-05-01T09:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480988",
    "user": "https://github.com/seblabbe"
}
```

Changing keywords from "" to "thursdaysbdx".



---

archive/issue_comments_480989.json:
```json
{
    "body": "<a id='comment:18'></a>\nWhy\n\n```\n             sage: x = dlx_solver(rows)\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             3\n-            sage: x.number_of_solutions()\n+            sage: x.number_of_solutions(ncpus=1)\n             0\n```\nIf the behavior with and without `ncpus=1` are different, this should be specified.",
    "created_at": "2018-05-01T14:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480989",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
Why

```
             sage: x = dlx_solver(rows)
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             3
-            sage: x.number_of_solutions()
+            sage: x.number_of_solutions(ncpus=1)
             0
```
If the behavior with and without `ncpus=1` are different, this should be specified.



---

archive/issue_comments_480990.json:
```json
{
    "body": "<a id='comment:19'></a>\nWhy would you split stuff here\n\n```\n+ return sum(val for ((args, kwds), val) in nb_sol(indices))\n```\ncan be\n\n```\n+ return sum(x[1] for x in nb_sol(indices))\n```",
    "created_at": "2018-05-01T14:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480990",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
Why would you split stuff here

```
+ return sum(val for ((args, kwds), val) in nb_sol(indices))
```
can be

```
+ return sum(x[1] for x in nb_sol(indices))
```



---

archive/issue_comments_480991.json:
```json
{
    "body": "Changing commit from \"[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)\" to \"[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)\"",
    "created_at": "2018-05-01T16:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0a86ab2331766b2c6c99a541730afb193c0ac7c3](https://github.com/sagemath/sagetrac-mirror/commit/0a86ab2331766b2c6c99a541730afb193c0ac7c3)" to "[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)"



---

archive/issue_comments_480992.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[a7dec68](https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175)|`25125: add all_solutions method to dancing links`|\n|[0afeffa](https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2)|`25125: fix doc`|\n|[3d255c8](https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f)|`25125: setting ncpus=None as default`|\n|[7c27fc8](https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d)|`25125: improved sentences before some doctests`|\n|[78c50e3](https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116)|`rewriting number_of_solutions method like one_solution and all_solutions`|\n|[f20e603](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)|`25125: allow reinitialization of dlx solver`|",
    "created_at": "2018-05-01T16:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480992",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[a7dec68](https://github.com/sagemath/sagetrac-mirror/commit/a7dec6805d5fe3d58d983adcee57fc877d484175)|`25125: add all_solutions method to dancing links`|
|[0afeffa](https://github.com/sagemath/sagetrac-mirror/commit/0afeffab3885ee1b2e0711811abb0b64d89f59e2)|`25125: fix doc`|
|[3d255c8](https://github.com/sagemath/sagetrac-mirror/commit/3d255c84389c2aa739e6b656ef15ca189ae32e8f)|`25125: setting ncpus=None as default`|
|[7c27fc8](https://github.com/sagemath/sagetrac-mirror/commit/7c27fc8cf9fcb1ba41ace2c8613547c78aa1aa8d)|`25125: improved sentences before some doctests`|
|[78c50e3](https://github.com/sagemath/sagetrac-mirror/commit/78c50e33498784ebbd1a9dc7084a22481690c116)|`rewriting number_of_solutions method like one_solution and all_solutions`|
|[f20e603](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)|`25125: allow reinitialization of dlx solver`|



---

archive/issue_comments_480993.json:
```json
{
    "body": "<a id='comment:21'></a>\nI found a way to reinitialize the dlx solver.\n\nThe branch was rebased on rc4.\n\nNeeds review.",
    "created_at": "2018-05-01T16:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480993",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>
I found a way to reinitialize the dlx solver.

The branch was rebased on rc4.

Needs review.



---

archive/issue_comments_480994.json:
```json
{
    "body": "<a id='comment:22'></a>\n[comment:18] still applies.",
    "created_at": "2018-05-01T17:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480994",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>
[comment:18] still applies.



---

archive/issue_comments_480995.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[2230623](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)|`25125: reinitialize the dlx solver when needed`|",
    "created_at": "2018-05-01T19:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480995",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[2230623](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)|`25125: reinitialize the dlx solver when needed`|



---

archive/issue_comments_480996.json:
```json
{
    "body": "Changing commit from \"[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)\" to \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\"",
    "created_at": "2018-05-01T19:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480996",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[f20e6030bc8b4bdee274fb093e802a180f414d59](https://github.com/sagemath/sagetrac-mirror/commit/f20e6030bc8b4bdee274fb093e802a180f414d59)" to "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)"



---

archive/issue_comments_480997.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [vdelecroix](#comment%3A18):\n> If the behavior with and without `ncpus=1` are different, this should be specified.\n\n\nThe behavior is not different anymore. Reinitialization is performed automatically when needed.",
    "created_at": "2018-05-01T19:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480997",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'></a>
Replying to [vdelecroix](#comment%3A18):
> If the behavior with and without `ncpus=1` are different, this should be specified.


The behavior is not different anymore. Reinitialization is performed automatically when needed.



---

archive/issue_comments_480998.json:
```json
{
    "body": "Changing reviewer from \"Julian R\u00fcth\" to \"Julian R\u00fcth, Vincent Delecroix\"",
    "created_at": "2018-05-02T10:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480998",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "Julian Rüth" to "Julian Rüth, Vincent Delecroix"



---

archive/issue_events_071687.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-02T10:47:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25125#event-71687"
}
```



---

archive/issue_comments_480999.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [slabbe](#comment%3A24):\n> Replying to [vdelecroix](#comment%3A18):\n> > If the behavior with and without `ncpus=1` are different, this should be specified.\n\n> \n> The behavior is not different anymore. Reinitialization is performed automatically when needed.\n\n\nThen why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.",
    "created_at": "2018-05-02T10:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-480999",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>
Replying to [slabbe](#comment%3A24):
> Replying to [vdelecroix](#comment%3A18):
> > If the behavior with and without `ncpus=1` are different, this should be specified.

> 
> The behavior is not different anymore. Reinitialization is performed automatically when needed.


Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.



---

archive/issue_comments_481000.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-02T10:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481000",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_481001.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-02T14:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481001",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481002.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [vdelecroix](#comment%3A25):\n> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\n\nBecause before the input was `ncpus=1` :\n\n```diff\n-    def number_of_solutions(self, ncpus=1, column=None):\n+    def number_of_solutions(self, ncpus=None, column=None):\n```\n\nTherefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.\n\nIf `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.\n\nThus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.",
    "created_at": "2018-05-02T14:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481002",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:26'></a>
Replying to [vdelecroix](#comment%3A25):
> Then why modifying the test by specifying `ncpus=1`? You should not remove doctests and it would be better anyway to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.


Because before the input was `ncpus=1` :

```diff
-    def number_of_solutions(self, ncpus=1, column=None):
+    def number_of_solutions(self, ncpus=None, column=None):
```

Therefore, the previous doctest with no input was testing the case when `ncpus=1`. Since the new default value for ncpus is `None`, if I want to *avoid* removing a doctest, I need to specifically set `ncpus=1` in the doctest.

If `ncpus` is not equal to `1`, then the parallel code applies which uses `restrict` which temporarily creates new dlx solvers which are used only once before being deleted. So to me, there is no need to test with `ncpus=1`, `ncpus=2` and `ncpus=None`.

Thus, I rechange the status to needs review. Tell me if you insist on this aspect and if you want me to add those doctests.



---

archive/issue_comments_481003.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-02T14:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481003",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_481004.json:
```json
{
    "body": "<a id='comment:27'></a>\nHo I see.",
    "created_at": "2018-05-02T14:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481004",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
Ho I see.



---

archive/issue_comments_481005.json:
```json
{
    "body": "<a id='comment:28'></a>\nThanks to both of you for the review. I am very happy with the state it has reached now.",
    "created_at": "2018-05-02T16:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481005",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:28'></a>
Thanks to both of you for the review. I am very happy with the state it has reached now.



---

archive/issue_comments_481006.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-12T11:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481006",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_481007.json:
```json
{
    "body": "Changing branch from \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\" to \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\"",
    "created_at": "2018-05-12T11:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481007",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)" to "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)"



---

archive/issue_events_071688.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-12T11:46:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25125#event-71688"
}
```



---

archive/issue_comments_481008.json:
```json
{
    "body": "Changing commit from \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\" to \"\"",
    "created_at": "2018-05-13T16:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481008",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)" to ""



---

archive/issue_comments_481009.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2018-05-13T16:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481009",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_481010.json:
```json
{
    "body": "<a id='comment:30'></a>\nI'm getting random failures, especially on OSX\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 549, in sage.games.sudoku.Sudoku.solve\nFailed example:\n    next(h.solve(algorithm='dlx'))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 562, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 972, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.games.sudoku.Sudoku.solve[3]>\", line 1, in <module>\n        next(h.solve(algorithm='dlx'))\n    StopIteration\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.games.sudoku.Sudoku.solve\n    [96 tests, 1 failure, 2.38 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nor\n\n```\nsage -t --long src/sage/games/sudoku.py\n**********************************************************************\nFile \"src/sage/games/sudoku.py\", line 863, in sage.games.sudoku.Sudoku.dlx.make_row\nFailed example:\n    len(list(h.solve(algorithm='dlx')))  # indirect doctest\nExpected:\n    5\nGot:\n    0\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row\n    [96 tests, 1 failure, 2.40 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/games/sudoku.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nTry runnning tests in a loop, e.g.\n\n```\nfor i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done\n```",
    "created_at": "2018-05-13T16:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481010",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
I'm getting random failures, especially on OSX

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 549, in sage.games.sudoku.Sudoku.solve
Failed example:
    next(h.solve(algorithm='dlx'))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 562, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 972, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.games.sudoku.Sudoku.solve[3]>", line 1, in <module>
        next(h.solve(algorithm='dlx'))
    StopIteration
**********************************************************************
1 item had failures:
   1 of  14 in sage.games.sudoku.Sudoku.solve
    [96 tests, 1 failure, 2.38 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
or

```
sage -t --long src/sage/games/sudoku.py
**********************************************************************
File "src/sage/games/sudoku.py", line 863, in sage.games.sudoku.Sudoku.dlx.make_row
Failed example:
    len(list(h.solve(algorithm='dlx')))  # indirect doctest
Expected:
    5
Got:
    0
**********************************************************************
1 item had failures:
   1 of   3 in sage.games.sudoku.Sudoku.dlx.make_row
    [96 tests, 1 failure, 2.40 s]
----------------------------------------------------------------------
sage -t --long src/sage/games/sudoku.py  # 1 doctest failed
----------------------------------------------------------------------
```
Try runnning tests in a loop, e.g.

```
for i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done
```



---

archive/issue_comments_481011.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2018-05-13T16:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481011",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_481012.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-15T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481012",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_481013.json:
```json
{
    "body": "Commit: [d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)",
    "created_at": "2018-05-15T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481013",
    "user": "https://github.com/seblabbe"
}
```

Commit: [d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)



---

archive/issue_comments_481014.json:
```json
{
    "body": "Changing branch from \"[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)\" to \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\"",
    "created_at": "2018-05-15T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481014",
    "user": "https://github.com/seblabbe"
}
```

Changing branch from "[22306233cc4b7eeb34aef812fbff856e312d1ea9](https://github.com/sagemath/sagetrac-mirror/commit/22306233cc4b7eeb34aef812fbff856e312d1ea9)" to "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)"



---

archive/issue_comments_481015.json:
```json
{
    "body": "<a id='comment:31'></a>\nOn Ubuntu, I can not reproduce the issue.\n\nThe methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line\n\n```\nself._x = dancing_links()\n```\n\nthat was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does\n\n```\nself._x = dancing_links()\n```\n\nonly for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?\n\n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[b4fdeb5](https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0)|`25125: add all_solutions method to dancing links`|\n|[5ddc189](https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20)|`25125: fix doc`|\n|[0842d46](https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2)|`25125: setting ncpus=None as default`|\n|[11b3894](https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3)|`25125: improved sentences before some doctests`|\n|[0f320ea](https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52)|`rewriting number_of_solutions method like one_solution and all_solutions`|\n|[2fce4fe](https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16)|`25125: allow reinitialization of dlx solver`|\n|[a5c4667](https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc)|`25125: reinitialize the dlx solver when needed`|\n|[d13e0ec](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)|`25125: Calling constructor dancing_links() only in reinitialize not in __init__`|",
    "created_at": "2018-05-15T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481015",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:31'></a>
On Ubuntu, I can not reproduce the issue.

The methods I am adding/modifying to the dancing links class are not used by the sudoku solver which uses directly the `search` and  `get_solution` methods. The only thing I changed that may have affected the sudoku thing is the way the `__init__` is done which is now done with the `reinitalize` method. Maybe OSX does not like the line

```
self._x = dancing_links()
```

that was in the `reinitialize` which was called by the `__init__`? So, I added a new commit which does

```
self._x = dancing_links()
```

only for the reinitialization and avoids it for `__init__` as it was before. Can somebody with OSX test whether this fixes the issue?

---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[b4fdeb5](https://github.com/sagemath/sagetrac-mirror/commit/b4fdeb52ba3105328dcc41bbc978b643c0a368c0)|`25125: add all_solutions method to dancing links`|
|[5ddc189](https://github.com/sagemath/sagetrac-mirror/commit/5ddc18968028011affdbcbc11503858de0a19d20)|`25125: fix doc`|
|[0842d46](https://github.com/sagemath/sagetrac-mirror/commit/0842d46a31581ddd3dee4bbd30253b15110a54d2)|`25125: setting ncpus=None as default`|
|[11b3894](https://github.com/sagemath/sagetrac-mirror/commit/11b389412e146dee9a4ee6ef4b88fae320b888f3)|`25125: improved sentences before some doctests`|
|[0f320ea](https://github.com/sagemath/sagetrac-mirror/commit/0f320ea3e140bcb8703ea8541a4556445b4c4d52)|`rewriting number_of_solutions method like one_solution and all_solutions`|
|[2fce4fe](https://github.com/sagemath/sagetrac-mirror/commit/2fce4fe6c0732fcd143e6e616238aca69f5f1e16)|`25125: allow reinitialization of dlx solver`|
|[a5c4667](https://github.com/sagemath/sagetrac-mirror/commit/a5c46677d73a6cc9c745dbb784de05e42d6501fc)|`25125: reinitialize the dlx solver when needed`|
|[d13e0ec](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)|`25125: Calling constructor dancing_links() only in reinitialize not in __init__`|



---

archive/issue_comments_481016.json:
```json
{
    "body": "<a id='comment:32'></a>\nTests `for i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done` has been successfully passed on OSX (High Sierra) with `\u200bd13e0ec`.",
    "created_at": "2018-05-18T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481016",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:32'></a>
Tests `for i in `seq 0 1000` ; do ./sage -t --long src/sage/games/sudoku.py ; done` has been successfully passed on OSX (High Sierra) with `​d13e0ec`.



---

archive/issue_comments_481017.json:
```json
{
    "body": "Changing reviewer from \"Julian R\u00fcth, Vincent Delecroix\" to \"Julian R\u00fcth, Vincent Delecroix, Vincent Klein\"",
    "created_at": "2018-05-18T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481017",
    "user": "https://github.com/vinklein"
}
```

Changing reviewer from "Julian Rüth, Vincent Delecroix" to "Julian Rüth, Vincent Delecroix, Vincent Klein"



---

archive/issue_comments_481018.json:
```json
{
    "body": "<a id='comment:33'></a>\nAnd are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?",
    "created_at": "2018-05-18T19:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481018",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:33'></a>
And are you able to reproduce the problem mentionned by Volker with commit a5c4667 ?



---

archive/issue_comments_481019.json:
```json
{
    "body": "<a id='comment:34'></a>\nYes ! I should have mentioned that.",
    "created_at": "2018-05-22T07:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481019",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:34'></a>
Yes ! I should have mentioned that.



---

archive/issue_comments_481020.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-22T11:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481020",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_481021.json:
```json
{
    "body": "<a id='comment:35'></a>\n\u200bd13e0ec fix the problem.",
    "created_at": "2018-05-22T11:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481021",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:35'></a>
​d13e0ec fix the problem.



---

archive/issue_comments_481022.json:
```json
{
    "body": "<a id='comment:36'></a>\nThanks for your help testing on OSX.\n\nS\u00e9bastien",
    "created_at": "2018-05-22T11:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481022",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:36'></a>
Thanks for your help testing on OSX.

Sébastien



---

archive/issue_comments_481023.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-23T21:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481023",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_481024.json:
```json
{
    "body": "<a id='comment:37'></a>\n\n```\nsage -t --long src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\nFailed example:\n    [sorted(s) for s in S]\nExpected:\n    [[0, 1], [2, 3], [4, 5]]\nGot:\n    [[0, 1], [4, 5], [2, 3]]\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions\n    [215 tests, 1 failure, 7.16 s]\n```",
    "created_at": "2018-05-23T21:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481024",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>

```
sage -t --long src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 683, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
Failed example:
    [sorted(s) for s in S]
Expected:
    [[0, 1], [2, 3], [4, 5]]
Got:
    [[0, 1], [4, 5], [2, 3]]
**********************************************************************
1 item had failures:
   1 of  16 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.all_solutions
    [215 tests, 1 failure, 7.16 s]
```



---

archive/issue_comments_481025.json:
```json
{
    "body": "Changing commit from \"[d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)\" to \"[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)\"",
    "created_at": "2018-05-24T08:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[d13e0ec76680814329f26aa3860c54065168e469](https://github.com/sagemath/sagetrac-mirror/commit/d13e0ec76680814329f26aa3860c54065168e469)" to "[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)"



---

archive/issue_comments_481026.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9a158e6](https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c)|`25125: add all_solutions method to dancing links`|\n|[89b5901](https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da)|`25125: fix doc`|\n|[c54a64d](https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d)|`25125: setting ncpus=None as default`|\n|[cf7b435](https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8)|`25125: improved sentences before some doctests`|\n|[004126a](https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e)|`rewriting number_of_solutions method like one_solution and all_solutions`|\n|[d18e090](https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15)|`25125: allow reinitialization of dlx solver`|\n|[c05e73b](https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7)|`25125: reinitialize the dlx solver when needed`|\n|[10f885d](https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026)|`25125: Calling constructor dancing_links() only in reinitialize not in __init__`|\n|[25da49e](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)|`25125: sorted lists in doctests`|",
    "created_at": "2018-05-24T08:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9a158e6](https://github.com/sagemath/sagetrac-mirror/commit/9a158e669e0fd14e6ff9d8b0558e8c8ce1066a9c)|`25125: add all_solutions method to dancing links`|
|[89b5901](https://github.com/sagemath/sagetrac-mirror/commit/89b590143db0e01faaf726ab81b403ec9bdbe1da)|`25125: fix doc`|
|[c54a64d](https://github.com/sagemath/sagetrac-mirror/commit/c54a64de737f51cd7ca9672b1517ba488436b08d)|`25125: setting ncpus=None as default`|
|[cf7b435](https://github.com/sagemath/sagetrac-mirror/commit/cf7b435c4c403a2d4c22d61df15a57e310bb2ea8)|`25125: improved sentences before some doctests`|
|[004126a](https://github.com/sagemath/sagetrac-mirror/commit/004126a706f01ceacecc01a0c4db5483a8202d7e)|`rewriting number_of_solutions method like one_solution and all_solutions`|
|[d18e090](https://github.com/sagemath/sagetrac-mirror/commit/d18e09062e61e32e9952c7752378e693d7ddee15)|`25125: allow reinitialization of dlx solver`|
|[c05e73b](https://github.com/sagemath/sagetrac-mirror/commit/c05e73b64a27e3a85ce744b893fe419028232dd7)|`25125: reinitialize the dlx solver when needed`|
|[10f885d](https://github.com/sagemath/sagetrac-mirror/commit/10f885d0a3171c377161721df79cf985a5936026)|`25125: Calling constructor dancing_links() only in reinitialize not in __init__`|
|[25da49e](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)|`25125: sorted lists in doctests`|



---

archive/issue_comments_481027.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-24T09:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481027",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481028.json:
```json
{
    "body": "<a id='comment:40'></a>\nSorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.\n\nRebased on 8.3.beta2.\n\nI added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.\n\nNeeds review.",
    "created_at": "2018-05-24T09:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481028",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:40'></a>
Sorry Volker. I was sure that I put sorted everywhere needed, but I forgot one.

Rebased on 8.3.beta2.

I added a commit which added the `sorted` where the doctest problem occurs. I also added two other `sorted` elsewhere.

Needs review.



---

archive/issue_comments_481029.json:
```json
{
    "body": "<a id='comment:41'></a>\n`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).",
    "created_at": "2018-05-29T09:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481029",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:41'></a>
`sage -t -a` works on ubuntu and OSX ( except for ext_rep.py and external.py killed due to abort signal, which is not related to this ticket).



---

archive/issue_comments_481030.json:
```json
{
    "body": "<a id='comment:42'></a>\nRandom errors on dancing_links.pyx on OSX.\n\n\n```\nsage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\n...\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n    [215 tests, 5.41 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.5 seconds\n    cpu time: 4.8 seconds\n    cumulative wall time: 5.4 seconds\nmacbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done\nRunning doctests with ID 2018-05-29-11-30-55-9317aab4.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(d.one_solution())\nExpected:\n    [0, 1]\nGot:\n    [2, 3]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.46 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 5.6 seconds\n    cpu time: 4.9 seconds\n    cumulative wall time: 5.5 seconds\nRunning doctests with ID 2018-05-29-11-31-04-c04446f2.\nGit branch: t/25125/25125\nUsing --optional=gfortran,gmpy2,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx\n**********************************************************************\nFile \"src/sage/combinat/matrices/dancing_links.pyx\", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\nFailed example:\n    sorted(dlx.one_solution())\nExpected:\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\nGot:\n    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution\n    [215 tests, 1 failure, 5.42 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed\n```",
    "created_at": "2018-05-29T09:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481030",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:42'></a>
Random errors on dancing_links.pyx on OSX.


```
sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
...
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
    [215 tests, 5.41 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.5 seconds
    cpu time: 4.8 seconds
    cumulative wall time: 5.4 seconds
macbookpro-sierra-02:sage admin$ for i in `seq 0 50` ; do ./sage -t --long src/sage/combinat/matrices/dancing_links.pyx ; done
Running doctests with ID 2018-05-29-11-30-55-9317aab4.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 603, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(d.one_solution())
Expected:
    [0, 1]
Got:
    [2, 3]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.46 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 5.6 seconds
    cpu time: 4.9 seconds
    cumulative wall time: 5.5 seconds
Running doctests with ID 2018-05-29-11-31-04-c04446f2.
Git branch: t/25125/25125
Using --optional=gfortran,gmpy2,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 634, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
Failed example:
    sorted(dlx.one_solution())
Expected:
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
Got:
    [2, 3, 4, 5, 6, 7, 9, 10, 11, 18]
**********************************************************************
1 item had failures:
   1 of  17 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.one_solution
    [215 tests, 1 failure, 5.42 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.8 src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
```



---

archive/issue_comments_481031.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-29T09:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481031",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_481032.json:
```json
{
    "body": "Changing commit from \"[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)\" to \"[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\"",
    "created_at": "2018-05-30T19:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[25da49e6e04ca7fed46442d27f66d3dc297362ab](https://github.com/sagemath/sagetrac-mirror/commit/25da49e6e04ca7fed46442d27f66d3dc297362ab)" to "[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)"



---

archive/issue_comments_481033.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[c985179](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)|`25125: sorting every list even those of size one in doctests`|",
    "created_at": "2018-05-30T19:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[c985179](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)|`25125: sorting every list even those of size one in doctests`|



---

archive/issue_comments_481034.json:
```json
{
    "body": "<a id='comment:45'></a>\nThanks for your carefull review Vincent K. We avoided a nuisance to Volker.\n\nThe failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.\n\nI made the doctests for `one_solution` independent of the first solution found.\n\nI also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.\n\nHopefully, these were the last non deterministic doctests to be fixed.\n\nNeeds review.",
    "created_at": "2018-05-30T19:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481034",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:45'></a>
Thanks for your carefull review Vincent K. We avoided a nuisance to Volker.

The failures you found come from the fact that we change the `ncpus=1` to `ncpus=None` in the `one_solution` method which made deterministic doctests become not deterministic. If the doctest is run with more than one cpu, than the first solution found depend on the speed of the computation made on each cpus.

I made the doctests for `one_solution` independent of the first solution found.

I also added a bunch of `sorted` (even for list of size one!) to prevents other similar problem.

Hopefully, these were the last non deterministic doctests to be fixed.

Needs review.



---

archive/issue_comments_481035.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-30T19:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481035",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481036.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-01T14:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481036",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_481037.json:
```json
{
    "body": "<a id='comment:46'></a>\nAll tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.",
    "created_at": "2018-06-01T14:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481037",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:46'></a>
All tests passed (with several iteration of `sage -t ...dancing_links.pyx`) both on unbuntu and osx.



---

archive/issue_comments_481038.json:
```json
{
    "body": "Changing branch from \"[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)\" to \"[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)\"",
    "created_at": "2018-06-02T16:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481038",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/slabbe/25125](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/25125)" to "[c9851791ab1b04561be9e7cd18e4f706d44b8545](https://github.com/sagemath/sagetrac-mirror/commit/c9851791ab1b04561be9e7cd18e4f706d44b8545)"



---

archive/issue_events_071689.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-02T16:11:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25125#event-71689"
}
```



---

archive/issue_comments_481039.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-02T16:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25125#issuecomment-481039",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
