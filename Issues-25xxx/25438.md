# Issue 25438: Geometry of pseudo-Riemannian submanifolds

archive/issues_025201.json:
```json
{
    "body": "This ticket is the logical continuation of #25164\n\nIt implements various calculus methods on pseudo-riemannian submanifolds (for example: normal vector, first/second fundamental form, gauss/principal/mean curvature...).\n\nSome methods are also used exclusively in the case a foliation is provided (shift, lapse, ...).\n\nUsing these functions, one can for example easily perform n+1 decomposition of any tensorfield.\n\nThis is part of the \u200b[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. \n\n\nCC:  @egourgoulhon\n\nKeywords: submanifold, embedding, immersion, manifold, foliation\n\nBranch/Commit: [9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Florentin Jaffredo\n\nDependencies: #25164,#25417\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25438\n\n",
    "closed_at": "2018-06-29T22:33:58Z",
    "created_at": "2018-05-24T16:07:53Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Geometry of pseudo-Riemannian submanifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25438",
    "user": "https://github.com/FlorentinJ"
}
```
This ticket is the logical continuation of #25164

It implements various calculus methods on pseudo-riemannian submanifolds (for example: normal vector, first/second fundamental form, gauss/principal/mean curvature...).

Some methods are also used exclusively in the case a foliation is provided (shift, lapse, ...).

Using these functions, one can for example easily perform n+1 decomposition of any tensorfield.

This is part of the â€‹[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. 


CC:  @egourgoulhon

Keywords: submanifold, embedding, immersion, manifold, foliation

Branch/Commit: [9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)

Reviewer: Eric Gourgoulhon

Author: Florentin Jaffredo

Dependencies: #25164,#25417

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25438





---

archive/issue_comments_488470.json:
```json
{
    "body": "Changing commit from \"[4a0881619f7a7c2926e37707e2549c9bec263351](https://github.com/sagemath/sagetrac-mirror/commit/4a0881619f7a7c2926e37707e2549c9bec263351)\" to \"[4834f1cd49e7fa344d8e7a6226218691c7665630](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)\"",
    "created_at": "2018-05-30T15:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[4a0881619f7a7c2926e37707e2549c9bec263351](https://github.com/sagemath/sagetrac-mirror/commit/4a0881619f7a7c2926e37707e2549c9bec263351)" to "[4834f1cd49e7fa344d8e7a6226218691c7665630](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)"



---

archive/issue_comments_488471.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[4932d56](https://github.com/sagemath/sagetrac-mirror/commit/4932d56e06de2efbb482c715b21e6e31de83bdc8)|`Added mixed_projection`|\n|[2bf6d93](https://github.com/sagemath/sagetrac-mirror/commit/2bf6d93eb053b910a244df39eb7a4f85004c4b29)|`Added doctests`|\n|[3c72fca](https://github.com/sagemath/sagetrac-mirror/commit/3c72fca9780b6d081d68ebbf28de07f28eccef62)|`Merge branch 'develop' into calculus`|\n|[c9a7082](https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af)|`Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2`|\n|[eb2b4c8](https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032)|`Reviewer tweaks for submanifolds`|\n|[a3a1cce](https://github.com/sagemath/sagetrac-mirror/commit/a3a1ccef244d461d5b2e4f5e3f01e7250e514775)|`Merge ticket 25164 into calculus`|\n|[4834f1c](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)|`Fix error in mixed projection`|",
    "created_at": "2018-05-30T15:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[4932d56](https://github.com/sagemath/sagetrac-mirror/commit/4932d56e06de2efbb482c715b21e6e31de83bdc8)|`Added mixed_projection`|
|[2bf6d93](https://github.com/sagemath/sagetrac-mirror/commit/2bf6d93eb053b910a244df39eb7a4f85004c4b29)|`Added doctests`|
|[3c72fca](https://github.com/sagemath/sagetrac-mirror/commit/3c72fca9780b6d081d68ebbf28de07f28eccef62)|`Merge branch 'develop' into calculus`|
|[c9a7082](https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af)|`Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2`|
|[eb2b4c8](https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032)|`Reviewer tweaks for submanifolds`|
|[a3a1cce](https://github.com/sagemath/sagetrac-mirror/commit/a3a1ccef244d461d5b2e4f5e3f01e7250e514775)|`Merge ticket 25164 into calculus`|
|[4834f1c](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)|`Fix error in mixed projection`|



---

archive/issue_comments_488472.json:
```json
{
    "body": "Changing commit from \"[4834f1cd49e7fa344d8e7a6226218691c7665630](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)\" to \"[65ae3ff1028d11b03ab5847cc787810be48723c1](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)\"",
    "created_at": "2018-05-31T07:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[4834f1cd49e7fa344d8e7a6226218691c7665630](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)" to "[65ae3ff1028d11b03ab5847cc787810be48723c1](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)"



---

archive/issue_comments_488473.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[65ae3ff](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)|`Update to 8.3.beta3`|",
    "created_at": "2018-05-31T07:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[65ae3ff](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)|`Update to 8.3.beta3`|



---

archive/issue_events_072577.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "rename": {
        "from": "Calculus in embedded submanifolds",
        "to": "Geometry of pseudo-Riemannian submanifolds"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25438#event-72577"
}
```



---

archive/issue_comments_488474.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-01T07:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488474",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_488475.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-03T17:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488475",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_488476.json:
```json
{
    "body": "<a id='comment:5'></a>\nHave you noticed the errors reported by the patchbot (2 doctests + various plugins)?\n\nTo understand what the plugins check presicely, see the docstrings in the source file [plugins.py](https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py). For instance, you will see that `\\overrightarrow`, which is a valid LaTeX instruction, triggers the plugin `foreign_latex`...",
    "created_at": "2018-06-03T17:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488476",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:5'></a>
Have you noticed the errors reported by the patchbot (2 doctests + various plugins)?

To understand what the plugins check presicely, see the docstrings in the source file [plugins.py](https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py). For instance, you will see that `\overrightarrow`, which is a valid LaTeX instruction, triggers the plugin `foreign_latex`...



---

archive/issue_comments_488477.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[9d42338](https://github.com/sagemath/sagetrac-mirror/commit/9d42338afa7c4e2488ed6d7bf39cab380dc88d9f)|`Removed an inaccessible piece of code, added exception`|\n|[2d6fd8e](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)|`Minor improvements`|",
    "created_at": "2018-06-05T16:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[9d42338](https://github.com/sagemath/sagetrac-mirror/commit/9d42338afa7c4e2488ed6d7bf39cab380dc88d9f)|`Removed an inaccessible piece of code, added exception`|
|[2d6fd8e](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)|`Minor improvements`|



---

archive/issue_comments_488478.json:
```json
{
    "body": "Changing commit from \"[65ae3ff1028d11b03ab5847cc787810be48723c1](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)\" to \"[2d6fd8e6048f7d6858508fc94f513b842f50cb20](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)\"",
    "created_at": "2018-06-05T16:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[65ae3ff1028d11b03ab5847cc787810be48723c1](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)" to "[2d6fd8e6048f7d6858508fc94f513b842f50cb20](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)"



---

archive/issue_comments_488479.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-05T16:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488479",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_488480.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis is a nice enhancement regarding differential geometry!\n\nThe code is carefully written and documented. \nThe main issue is the long time of some doctests, for instance:\n\n```\nFile \"src/sage/manifolds/differentiable/pseudo_riemannian_submanifold.py\", \nline 156, in sage.manifolds.differentiable.pseudo_riemannian_submanifold\nWarning, slow doctest:\n    N.extrinsic_curvature()[:] # long time\nTest ran for 462.97 s\n```\nThis is far too long for a single doctest. On my computer, there are 7 doctests with a time above 50 s. This increases too much the total time for doctesting all Sage library. Probably the solution would be to decrease the dimensionality of your examples, i.e. consider hypersurfaces embedded in a 3-dimensional manifold instead of a 4-dimensional one. \n\nAnother remark: the documentation generated for the method `ambient_extrinsic_curvature` appears to be that of the decorator ``@`cached_method`, because of the alias\n\n```\nambient_extrinsic_curvature = cached_method(ambient_second_fundamental_form)\n```\nin line 974 of `pseudo_riemannian_submanifold.py`. Same issue for `extrinsic_curvature`, `induced_metric`, `ambient_induced_metric`.",
    "created_at": "2018-06-12T14:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488480",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:8'></a>
This is a nice enhancement regarding differential geometry!

The code is carefully written and documented. 
The main issue is the long time of some doctests, for instance:

```
File "src/sage/manifolds/differentiable/pseudo_riemannian_submanifold.py", 
line 156, in sage.manifolds.differentiable.pseudo_riemannian_submanifold
Warning, slow doctest:
    N.extrinsic_curvature()[:] # long time
Test ran for 462.97 s
```
This is far too long for a single doctest. On my computer, there are 7 doctests with a time above 50 s. This increases too much the total time for doctesting all Sage library. Probably the solution would be to decrease the dimensionality of your examples, i.e. consider hypersurfaces embedded in a 3-dimensional manifold instead of a 4-dimensional one. 

Another remark: the documentation generated for the method `ambient_extrinsic_curvature` appears to be that of the decorator ``@`cached_method`, because of the alias

```
ambient_extrinsic_curvature = cached_method(ambient_second_fundamental_form)
```
in line 974 of `pseudo_riemannian_submanifold.py`. Same issue for `extrinsic_curvature`, `induced_metric`, `ambient_induced_metric`.



---

archive/issue_comments_488481.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-12T14:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488481",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_488482.json:
```json
{
    "body": "Reviewer: Eric Gourgoulhon",
    "created_at": "2018-06-12T14:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488482",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: Eric Gourgoulhon



---

archive/issue_comments_488483.json:
```json
{
    "body": "Changing commit from \"[2d6fd8e6048f7d6858508fc94f513b842f50cb20](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)\" to \"[e5a290d0f1f934820de3ac39bd70096de2dacbd7](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)\"",
    "created_at": "2018-06-13T09:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[2d6fd8e6048f7d6858508fc94f513b842f50cb20](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)" to "[e5a290d0f1f934820de3ac39bd70096de2dacbd7](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)"



---

archive/issue_comments_488484.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|\n|[e5a290d](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)|`Shorten some doctests, fix documentation of alias of cached_methods`|",
    "created_at": "2018-06-13T09:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
|[e5a290d](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)|`Shorten some doctests, fix documentation of alias of cached_methods`|



---

archive/issue_comments_488485.json:
```json
{
    "body": "<a id='comment:11'></a>\nI went from 4D Minkowsky to 3D Minkowsky in the first example, which resulted in a total test time of about 4 minutes on my laptop:\n\n```\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 247.5 seconds\n    cpu time: 269.6 seconds\n    cumulative wall time: 247.4 seconds\n\n```\n\nFurther reducing this time would mean further reducing the dimension, but 1D foliation of 2D manifold are not very interesting.",
    "created_at": "2018-06-13T10:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488485",
    "user": "https://github.com/FlorentinJ"
}
```

<a id='comment:11'></a>
I went from 4D Minkowsky to 3D Minkowsky in the first example, which resulted in a total test time of about 4 minutes on my laptop:

```
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 247.5 seconds
    cpu time: 269.6 seconds
    cumulative wall time: 247.4 seconds

```

Further reducing this time would mean further reducing the dimension, but 1D foliation of 2D manifold are not very interesting.



---

archive/issue_comments_488486.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-13T13:48:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488486",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_488487.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[0690144](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)|`Reviewer tweaks regarding geometry of pseudo-Riemannian submanifolds`|",
    "created_at": "2018-06-19T15:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[0690144](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)|`Reviewer tweaks regarding geometry of pseudo-Riemannian submanifolds`|



---

archive/issue_comments_488488.json:
```json
{
    "body": "Changing commit from \"[e5a290d0f1f934820de3ac39bd70096de2dacbd7](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)\" to \"[069014498ed40a83a388da83431ca10f30505a5f](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)\"",
    "created_at": "2018-06-19T15:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[e5a290d0f1f934820de3ac39bd70096de2dacbd7](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)" to "[069014498ed40a83a388da83431ca10f30505a5f](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)"



---

archive/issue_comments_488489.json:
```json
{
    "body": "<a id='comment:14'></a>\nIn the above \"reviewer tweaks\", I've mostly amended the documentation. The main change is the removal of the ``@`cached_method` decorator on methods like `first_fundamental_form` and the removal of the duplicated code in methods like `induced_metric`. I understand that this was introduced to address the documentation issue related to ``@`cached_method` mentioned in[comment:8](#comment%3A8). In the new setting, the caching is performed \"manually\", by checking whether the attribute `self._first_fundamental_form` is `None` or not, and the alias is properly defined as \n\n```\nextrinsic_curvature = second_fundamental_form\n```\nThis avoids the duplication of doctests. As a result, the doctest time for the file `pseudo_riemannian_submanifold.py` decreases from 315 s to 248 s (on my computer). However this is still too much! A solution would be to replace most (all?) the sphere examples by simpler ones, like those for a cylinder, or even by those for a plane, in cases where they are not trivial (e.g. for the normal).\n\nAnother thing to do is to distinguish which methods are valid for a generic submanifold, like `first_fundamental_form` or `projector`, and those that are valid only for hypersurfaces, like `second_fundamental_form` or `normal`. \n\nI am leaving the ticket status to \"needs review\" to catch the attention of the patchbot...",
    "created_at": "2018-06-19T15:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488489",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:14'></a>
In the above "reviewer tweaks", I've mostly amended the documentation. The main change is the removal of the ``@`cached_method` decorator on methods like `first_fundamental_form` and the removal of the duplicated code in methods like `induced_metric`. I understand that this was introduced to address the documentation issue related to ``@`cached_method` mentioned in[comment:8](#comment%3A8). In the new setting, the caching is performed "manually", by checking whether the attribute `self._first_fundamental_form` is `None` or not, and the alias is properly defined as 

```
extrinsic_curvature = second_fundamental_form
```
This avoids the duplication of doctests. As a result, the doctest time for the file `pseudo_riemannian_submanifold.py` decreases from 315 s to 248 s (on my computer). However this is still too much! A solution would be to replace most (all?) the sphere examples by simpler ones, like those for a cylinder, or even by those for a plane, in cases where they are not trivial (e.g. for the normal).

Another thing to do is to distinguish which methods are valid for a generic submanifold, like `first_fundamental_form` or `projector`, and those that are valid only for hypersurfaces, like `second_fundamental_form` or `normal`. 

I am leaving the ticket status to "needs review" to catch the attention of the patchbot...



---

archive/issue_comments_488490.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-19T21:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488490",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_488491.json:
```json
{
    "body": "<a id='comment:15'></a>\nNow that one patchbot has done its job... (it's reporting only a failure of the `commit_messages` plugin, which looks a false report to me, since all commits involved in this ticket do have a commit message...)",
    "created_at": "2018-06-19T21:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488491",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:15'></a>
Now that one patchbot has done its job... (it's reporting only a failure of the `commit_messages` plugin, which looks a false report to me, since all commits involved in this ticket do have a commit message...)



---

archive/issue_comments_488492.json:
```json
{
    "body": "Changing commit from \"[069014498ed40a83a388da83431ca10f30505a5f](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)\" to \"[b2fabf7c892ac4f28492d0979b9b251d88f1ca0c](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)\"",
    "created_at": "2018-06-20T10:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[069014498ed40a83a388da83431ca10f30505a5f](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)" to "[b2fabf7c892ac4f28492d0979b9b251d88f1ca0c](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)"



---

archive/issue_comments_488493.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[72abf0b](https://github.com/sagemath/sagetrac-mirror/commit/72abf0b7b8ce5457a483720ee7298bff84249727)|`Small fix to help careless user`|\n|[ca13dd5](https://github.com/sagemath/sagetrac-mirror/commit/ca13dd5638960f99f2de4694ec66ecd0cd8f48b7)|`Merge with branch 'public/manifolds/submanifolds_calc' of git://trac.sagemath.org/sage`|\n|[b2fabf7](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)|`Reduce doctest time to about 100s`|",
    "created_at": "2018-06-20T10:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[72abf0b](https://github.com/sagemath/sagetrac-mirror/commit/72abf0b7b8ce5457a483720ee7298bff84249727)|`Small fix to help careless user`|
|[ca13dd5](https://github.com/sagemath/sagetrac-mirror/commit/ca13dd5638960f99f2de4694ec66ecd0cd8f48b7)|`Merge with branch 'public/manifolds/submanifolds_calc' of git://trac.sagemath.org/sage`|
|[b2fabf7](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)|`Reduce doctest time to about 100s`|



---

archive/issue_comments_488494.json:
```json
{
    "body": "Changing commit from \"[b2fabf7c892ac4f28492d0979b9b251d88f1ca0c](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)\" to \"[9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)\"",
    "created_at": "2018-06-25T09:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[b2fabf7c892ac4f28492d0979b9b251d88f1ca0c](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)" to "[9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)"



---

archive/issue_comments_488495.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|\n|[9477287](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)|`Raise exception when an hypersurface is needed, normal can now return a multivector`|",
    "created_at": "2018-06-25T09:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
|[9477287](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)|`Raise exception when an hypersurface is needed, normal can now return a multivector`|



---

archive/issue_comments_488496.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-25T09:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488496",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_488497.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks for the changes. LGTM. Thanks for this nice piece of work!",
    "created_at": "2018-06-26T13:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488497",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:19'></a>
Thanks for the changes. LGTM. Thanks for this nice piece of work!



---

archive/issue_comments_488498.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-26T13:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488498",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_072578.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-29T22:33:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25438#event-72578"
}
```



---

archive/issue_comments_488499.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-29T22:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488499",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_488500.json:
```json
{
    "body": "Changing branch from \"[public/manifolds/submanifolds_calc](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/submanifolds_calc)\" to \"[9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)\"",
    "created_at": "2018-06-29T22:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25438#issuecomment-488500",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[public/manifolds/submanifolds_calc](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/submanifolds_calc)" to "[9477287c713213a28c526071e8b2485dd654daed](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)"
