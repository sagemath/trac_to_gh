# Issue 25438: Geometry of pseudo-Riemannian submanifolds

archive/issues_025201.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket is the logical continuation of #25164\n\nIt implements various calculus methods on pseudo-riemannian submanifolds (for example: normal vector, first/second fundamental form, gauss/principal/mean curvature...).\n\nSome methods are also used exclusively in the case a foliation is provided (shift, lapse, ...).\n\nUsing these functions, one can for example easily perform n+1 decomposition of any tensorfield.\n\nThis is part of the \u200b[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. \n\n\nDepends on #25164\nDepends on #25417\n\nCC:  @egourgoulhon\n\nComponent: **geometry**\n\nKeywords: **submanifold, embedding, immersion, foliation**\n\nAuthor: **Florentin Jaffredo**\n\nBranch/Commit: **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**\n\nReviewer: **Eric Gourgoulhon**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25438_\n\n",
    "closed_at": "2018-06-29T22:33:58Z",
    "created_at": "2018-05-24T16:07:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Geometry of pseudo-Riemannian submanifolds",
    "type": "issue",
    "updated_at": "2018-06-29T22:33:58Z",
    "url": "https://github.com/sagemath/sage/issues/25438",
    "user": "https://github.com/FlorentinJ"
}
```
<div id="comment:0"></div>

This ticket is the logical continuation of #25164

It implements various calculus methods on pseudo-riemannian submanifolds (for example: normal vector, first/second fundamental form, gauss/principal/mean curvature...).

Some methods are also used exclusively in the case a foliation is provided (shift, lapse, ...).

Using these functions, one can for example easily perform n+1 decomposition of any tensorfield.

This is part of the â€‹[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. 


Depends on #25164
Depends on #25417

CC:  @egourgoulhon

Component: **geometry**

Keywords: **submanifold, embedding, immersion, foliation**

Author: **Florentin Jaffredo**

Branch/Commit: **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**

Reviewer: **Eric Gourgoulhon**

_Issue created by migration from https://trac.sagemath.org/ticket/25438_





---

archive/issue_events_349008.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-24T16:07:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349008"
}
```



---

archive/issue_events_349009.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-24T16:07:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349009"
}
```



---

archive/issue_events_349010.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-24T16:07:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349010"
}
```



---

archive/issue_events_349011.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-24T16:07:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349011"
}
```



---

archive/issue_events_349012.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-24T16:07:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349012"
}
```



---

archive/issue_comments_389574.json:
```json
{
    "body": "Changed commit from **[`4a08816`](https://github.com/sagemath/sagetrac-mirror/commit/4a0881619f7a7c2926e37707e2549c9bec263351)** to **[`4834f1c`](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)**",
    "created_at": "2018-05-30T15:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389574",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a08816`](https://github.com/sagemath/sagetrac-mirror/commit/4a0881619f7a7c2926e37707e2549c9bec263351)** to **[`4834f1c`](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)**



---

archive/issue_comments_389575.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4932d56e06de2efbb482c715b21e6e31de83bdc8\"><code>4932d56</code></a></td><td><code>Added mixed_projection</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf6d93eb053b910a244df39eb7a4f85004c4b29\"><code>2bf6d93</code></a></td><td><code>Added doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c72fca9780b6d081d68ebbf28de07f28eccef62\"><code>3c72fca</code></a></td><td><code>Merge branch 'develop' into calculus</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af\"><code>c9a7082</code></a></td><td><code>Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032\"><code>eb2b4c8</code></a></td><td><code>Reviewer tweaks for submanifolds</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3a1ccef244d461d5b2e4f5e3f01e7250e514775\"><code>a3a1cce</code></a></td><td><code>Merge ticket 25164 into calculus</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630\"><code>4834f1c</code></a></td><td><code>Fix error in mixed projection</code></td></tr></table>\n",
    "created_at": "2018-05-30T15:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389575",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4932d56e06de2efbb482c715b21e6e31de83bdc8"><code>4932d56</code></a></td><td><code>Added mixed_projection</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf6d93eb053b910a244df39eb7a4f85004c4b29"><code>2bf6d93</code></a></td><td><code>Added doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c72fca9780b6d081d68ebbf28de07f28eccef62"><code>3c72fca</code></a></td><td><code>Merge branch 'develop' into calculus</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af"><code>c9a7082</code></a></td><td><code>Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032"><code>eb2b4c8</code></a></td><td><code>Reviewer tweaks for submanifolds</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3a1ccef244d461d5b2e4f5e3f01e7250e514775"><code>a3a1cce</code></a></td><td><code>Merge ticket 25164 into calculus</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630"><code>4834f1c</code></a></td><td><code>Fix error in mixed projection</code></td></tr></table>




---

archive/issue_comments_389576.json:
```json
{
    "body": "Changed commit from **[`4834f1c`](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)** to **[`65ae3ff`](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)**",
    "created_at": "2018-05-31T07:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389576",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4834f1c`](https://github.com/sagemath/sagetrac-mirror/commit/4834f1cd49e7fa344d8e7a6226218691c7665630)** to **[`65ae3ff`](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)**



---

archive/issue_comments_389577.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1\"><code>65ae3ff</code></a></td><td><code>Update to 8.3.beta3</code></td></tr></table>\n",
    "created_at": "2018-05-31T07:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389577",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1"><code>65ae3ff</code></a></td><td><code>Update to 8.3.beta3</code></td></tr></table>




---

archive/issue_events_349013.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-05-31T20:37:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "title_is": "Geometry of pseudo-Riemannian submanifolds",
    "title_was": "Calculus in embedded submanifolds",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349013"
}
```



---

archive/issue_events_349014.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-01T07:44:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349014"
}
```



---

archive/issue_events_349015.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-03T17:01:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349015"
}
```



---

archive/issue_events_349016.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-03T17:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349016"
}
```



---

archive/issue_comments_389578.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHave you noticed the errors reported by the patchbot (2 doctests + various plugins)?\n\nTo understand what the plugins check presicely, see the docstrings in the source file [plugins.py](https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py). For instance, you will see that `\\overrightarrow`, which is a valid LaTeX instruction, triggers the plugin `foreign_latex`...",
    "created_at": "2018-06-03T17:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389578",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:5" align="right">comment:5</div>

Have you noticed the errors reported by the patchbot (2 doctests + various plugins)?

To understand what the plugins check presicely, see the docstrings in the source file [plugins.py](https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py). For instance, you will see that `\overrightarrow`, which is a valid LaTeX instruction, triggers the plugin `foreign_latex`...



---

archive/issue_comments_389579.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d42338afa7c4e2488ed6d7bf39cab380dc88d9f\"><code>9d42338</code></a></td><td><code>Removed an inaccessible piece of code, added exception</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20\"><code>2d6fd8e</code></a></td><td><code>Minor improvements</code></td></tr></table>\n",
    "created_at": "2018-06-05T16:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389579",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d42338afa7c4e2488ed6d7bf39cab380dc88d9f"><code>9d42338</code></a></td><td><code>Removed an inaccessible piece of code, added exception</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20"><code>2d6fd8e</code></a></td><td><code>Minor improvements</code></td></tr></table>




---

archive/issue_comments_389580.json:
```json
{
    "body": "Changed commit from **[`65ae3ff`](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)** to **[`2d6fd8e`](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)**",
    "created_at": "2018-06-05T16:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`65ae3ff`](https://github.com/sagemath/sagetrac-mirror/commit/65ae3ff1028d11b03ab5847cc787810be48723c1)** to **[`2d6fd8e`](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)**



---

archive/issue_events_349017.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-05T16:35:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349017"
}
```



---

archive/issue_events_349018.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-05T16:35:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349018"
}
```



---

archive/issue_comments_389581.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis is a nice enhancement regarding differential geometry!\n\nThe code is carefully written and documented. \nThe main issue is the long time of some doctests, for instance:\n\n```\nFile \"src/sage/manifolds/differentiable/pseudo_riemannian_submanifold.py\", \nline 156, in sage.manifolds.differentiable.pseudo_riemannian_submanifold\nWarning, slow doctest:\n    N.extrinsic_curvature()[:] # long time\nTest ran for 462.97 s\n```\nThis is far too long for a single doctest. On my computer, there are 7 doctests with a time above 50 s. This increases too much the total time for doctesting all Sage library. Probably the solution would be to decrease the dimensionality of your examples, i.e. consider hypersurfaces embedded in a 3-dimensional manifold instead of a 4-dimensional one. \n\nAnother remark: the documentation generated for the method `ambient_extrinsic_curvature` appears to be that of the decorator `@cached_method`, because of the alias\n\n```\nambient_extrinsic_curvature = cached_method(ambient_second_fundamental_form)\n```\nin line 974 of `pseudo_riemannian_submanifold.py`. Same issue for `extrinsic_curvature`, `induced_metric`, `ambient_induced_metric`.",
    "created_at": "2018-06-12T14:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389581",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:8" align="right">comment:8</div>

This is a nice enhancement regarding differential geometry!

The code is carefully written and documented. 
The main issue is the long time of some doctests, for instance:

```
File "src/sage/manifolds/differentiable/pseudo_riemannian_submanifold.py", 
line 156, in sage.manifolds.differentiable.pseudo_riemannian_submanifold
Warning, slow doctest:
    N.extrinsic_curvature()[:] # long time
Test ran for 462.97 s
```
This is far too long for a single doctest. On my computer, there are 7 doctests with a time above 50 s. This increases too much the total time for doctesting all Sage library. Probably the solution would be to decrease the dimensionality of your examples, i.e. consider hypersurfaces embedded in a 3-dimensional manifold instead of a 4-dimensional one. 

Another remark: the documentation generated for the method `ambient_extrinsic_curvature` appears to be that of the decorator `@cached_method`, because of the alias

```
ambient_extrinsic_curvature = cached_method(ambient_second_fundamental_form)
```
in line 974 of `pseudo_riemannian_submanifold.py`. Same issue for `extrinsic_curvature`, `induced_metric`, `ambient_induced_metric`.



---

archive/issue_events_349019.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-12T14:12:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349019"
}
```



---

archive/issue_events_349020.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-12T14:12:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349020"
}
```



---

archive/issue_comments_389582.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon**",
    "created_at": "2018-06-12T14:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389582",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon**



---

archive/issue_comments_389583.json:
```json
{
    "body": "Changed commit from **[`2d6fd8e`](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)** to **[`e5a290d`](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)**",
    "created_at": "2018-06-13T09:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2d6fd8e`](https://github.com/sagemath/sagetrac-mirror/commit/2d6fd8e6048f7d6858508fc94f513b842f50cb20)** to **[`e5a290d`](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)**



---

archive/issue_comments_389584.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7\"><code>e5a290d</code></a></td><td><code>Shorten some doctests, fix documentation of alias of cached_methods</code></td></tr></table>\n",
    "created_at": "2018-06-13T09:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7"><code>e5a290d</code></a></td><td><code>Shorten some doctests, fix documentation of alias of cached_methods</code></td></tr></table>




---

archive/issue_comments_389585.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI went from 4D Minkowsky to 3D Minkowsky in the first example, which resulted in a total test time of about 4 minutes on my laptop:\n\n```\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 247.5 seconds\n    cpu time: 269.6 seconds\n    cumulative wall time: 247.4 seconds\n\n```\n\nFurther reducing this time would mean further reducing the dimension, but 1D foliation of 2D manifold are not very interesting.",
    "created_at": "2018-06-13T10:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389585",
    "user": "https://github.com/FlorentinJ"
}
```

<div id="comment:11" align="right">comment:11</div>

I went from 4D Minkowsky to 3D Minkowsky in the first example, which resulted in a total test time of about 4 minutes on my laptop:

```
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 247.5 seconds
    cpu time: 269.6 seconds
    cumulative wall time: 247.4 seconds

```

Further reducing this time would mean further reducing the dimension, but 1D foliation of 2D manifold are not very interesting.



---

archive/issue_events_349021.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-13T13:48:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349021"
}
```



---

archive/issue_events_349022.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-13T13:48:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349022"
}
```



---

archive/issue_comments_389586.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f\"><code>0690144</code></a></td><td><code>Reviewer tweaks regarding geometry of pseudo-Riemannian submanifolds</code></td></tr></table>\n",
    "created_at": "2018-06-19T15:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389586",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f"><code>0690144</code></a></td><td><code>Reviewer tweaks regarding geometry of pseudo-Riemannian submanifolds</code></td></tr></table>




---

archive/issue_comments_389587.json:
```json
{
    "body": "Changed commit from **[`e5a290d`](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)** to **[`0690144`](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)**",
    "created_at": "2018-06-19T15:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e5a290d`](https://github.com/sagemath/sagetrac-mirror/commit/e5a290d0f1f934820de3ac39bd70096de2dacbd7)** to **[`0690144`](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)**



---

archive/issue_comments_389588.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIn the above \"reviewer tweaks\", I've mostly amended the documentation. The main change is the removal of the `@cached_method` decorator on methods like `first_fundamental_form` and the removal of the duplicated code in methods like `induced_metric`. I understand that this was introduced to address the documentation issue related to `@cached_method` mentioned in [comment:8](#comment%3A8). In the new setting, the caching is performed \"manually\", by checking whether the attribute `self._first_fundamental_form` is `None` or not, and the alias is properly defined as \n\n```\nextrinsic_curvature = second_fundamental_form\n```\nThis avoids the duplication of doctests. As a result, the doctest time for the file `pseudo_riemannian_submanifold.py` decreases from 315 s to 248 s (on my computer). However this is still too much! A solution would be to replace most (all?) the sphere examples by simpler ones, like those for a cylinder, or even by those for a plane, in cases where they are not trivial (e.g. for the normal).\n\nAnother thing to do is to distinguish which methods are valid for a generic submanifold, like `first_fundamental_form` or `projector`, and those that are valid only for hypersurfaces, like `second_fundamental_form` or `normal`. \n\nI am leaving the ticket status to \"needs review\" to catch the attention of the patchbot...",
    "created_at": "2018-06-19T15:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389588",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:14" align="right">comment:14</div>

In the above "reviewer tweaks", I've mostly amended the documentation. The main change is the removal of the `@cached_method` decorator on methods like `first_fundamental_form` and the removal of the duplicated code in methods like `induced_metric`. I understand that this was introduced to address the documentation issue related to `@cached_method` mentioned in [comment:8](#comment%3A8). In the new setting, the caching is performed "manually", by checking whether the attribute `self._first_fundamental_form` is `None` or not, and the alias is properly defined as 

```
extrinsic_curvature = second_fundamental_form
```
This avoids the duplication of doctests. As a result, the doctest time for the file `pseudo_riemannian_submanifold.py` decreases from 315 s to 248 s (on my computer). However this is still too much! A solution would be to replace most (all?) the sphere examples by simpler ones, like those for a cylinder, or even by those for a plane, in cases where they are not trivial (e.g. for the normal).

Another thing to do is to distinguish which methods are valid for a generic submanifold, like `first_fundamental_form` or `projector`, and those that are valid only for hypersurfaces, like `second_fundamental_form` or `normal`. 

I am leaving the ticket status to "needs review" to catch the attention of the patchbot...



---

archive/issue_events_349023.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-19T21:01:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349023"
}
```



---

archive/issue_events_349024.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-19T21:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349024"
}
```



---

archive/issue_comments_389589.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNow that one patchbot has done its job... (it's reporting only a failure of the `commit_messages` plugin, which looks a false report to me, since all commits involved in this ticket do have a commit message...)",
    "created_at": "2018-06-19T21:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389589",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:15" align="right">comment:15</div>

Now that one patchbot has done its job... (it's reporting only a failure of the `commit_messages` plugin, which looks a false report to me, since all commits involved in this ticket do have a commit message...)



---

archive/issue_comments_389590.json:
```json
{
    "body": "Changed commit from **[`0690144`](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)** to **[`b2fabf7`](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)**",
    "created_at": "2018-06-20T10:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0690144`](https://github.com/sagemath/sagetrac-mirror/commit/069014498ed40a83a388da83431ca10f30505a5f)** to **[`b2fabf7`](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)**



---

archive/issue_comments_389591.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72abf0b7b8ce5457a483720ee7298bff84249727\"><code>72abf0b</code></a></td><td><code>Small fix to help careless user</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca13dd5638960f99f2de4694ec66ecd0cd8f48b7\"><code>ca13dd5</code></a></td><td><code>Merge with branch 'public/manifolds/submanifolds_calc' of git://trac.sagemath.org/sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c\"><code>b2fabf7</code></a></td><td><code>Reduce doctest time to about 100s</code></td></tr></table>\n",
    "created_at": "2018-06-20T10:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72abf0b7b8ce5457a483720ee7298bff84249727"><code>72abf0b</code></a></td><td><code>Small fix to help careless user</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca13dd5638960f99f2de4694ec66ecd0cd8f48b7"><code>ca13dd5</code></a></td><td><code>Merge with branch 'public/manifolds/submanifolds_calc' of git://trac.sagemath.org/sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c"><code>b2fabf7</code></a></td><td><code>Reduce doctest time to about 100s</code></td></tr></table>




---

archive/issue_comments_389592.json:
```json
{
    "body": "Changed commit from **[`b2fabf7`](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)** to **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**",
    "created_at": "2018-06-25T09:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389592",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2fabf7`](https://github.com/sagemath/sagetrac-mirror/commit/b2fabf7c892ac4f28492d0979b9b251d88f1ca0c)** to **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**



---

archive/issue_comments_389593.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed\"><code>9477287</code></a></td><td><code>Raise exception when an hypersurface is needed, normal can now return a multivector</code></td></tr></table>\n",
    "created_at": "2018-06-25T09:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389593",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed"><code>9477287</code></a></td><td><code>Raise exception when an hypersurface is needed, normal can now return a multivector</code></td></tr></table>




---

archive/issue_events_349025.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-25T09:18:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349025"
}
```



---

archive/issue_events_349026.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-06-25T09:18:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349026"
}
```



---

archive/issue_comments_389594.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThanks for the changes. LGTM. Thanks for this nice piece of work!",
    "created_at": "2018-06-26T13:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389594",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:19" align="right">comment:19</div>

Thanks for the changes. LGTM. Thanks for this nice piece of work!



---

archive/issue_events_349027.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-26T13:43:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349027"
}
```



---

archive/issue_events_349028.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2018-06-26T13:43:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349028"
}
```



---

archive/issue_events_349029.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-29T22:33:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349029"
}
```



---

archive/issue_events_349030.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4e79d5b98f5701eacd78e8e57f773d33bb55b581",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-29T22:33:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25438#event-349030"
}
```



---

archive/issue_comments_389595.json:
```json
{
    "body": "Changed branch from **[public/manifolds/submanifolds_calc](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/submanifolds_calc)** to **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**",
    "created_at": "2018-06-29T22:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25438#issuecomment-389595",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/manifolds/submanifolds_calc](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/submanifolds_calc)** to **[`9477287`](https://github.com/sagemath/sagetrac-mirror/commit/9477287c713213a28c526071e8b2485dd654daed)**
