# Issue 25056: Fix the Sage banner

archive/issues_024819.json:
```json
{
    "assignees": [],
    "body": "Something has broken the Sage banner.\n\nIn 8.2.beta8:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.2.beta8, Release Date: 2018-03-10               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n```\n\nIn 8.2.rc0:\n\n```\nSageMath version 8.2.rc0, Release Date: 2018-03-28\n```\n\nThis is despite the fact that printing the banner works:\n\n```\nSageMath version 8.2.rc0, Release Date: 2018-03-28\nsage: from sage.misc.banner import banner\nsage: banner()\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.2.rc0, Release Date: 2018-03-28                 \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n```\n\nCC:  @embray\n\nBranch: **[u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe)**\n\nReviewer: **Erik Bray, Jeroen Demeyer**\n\nAuthor: **Jeroen Demeyer, Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25056_\n\n",
    "closed_at": "2018-04-07T18:03:13Z",
    "created_at": "2018-03-29T08:38:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix the Sage banner",
    "type": "issue",
    "updated_at": "2018-04-10T23:15:30Z",
    "url": "https://github.com/sagemath/sage/issues/25056",
    "user": "https://github.com/jdemeyer"
}
```
Something has broken the Sage banner.

In 8.2.beta8:

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.2.beta8, Release Date: 2018-03-10               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

In 8.2.rc0:

```
SageMath version 8.2.rc0, Release Date: 2018-03-28
```

This is despite the fact that printing the banner works:

```
SageMath version 8.2.rc0, Release Date: 2018-03-28
sage: from sage.misc.banner import banner
sage: banner()
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.2.rc0, Release Date: 2018-03-28                 │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

CC:  @embray

Branch: **[u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe)**

Reviewer: **Erik Bray, Jeroen Demeyer**

Author: **Jeroen Demeyer, Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/25056_





---

archive/issue_events_328588.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T08:38:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328588"
}
```



---

archive/issue_events_328589.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T08:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "component: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328589"
}
```



---

archive/issue_events_328590.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T08:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328590"
}
```



---

archive/issue_events_328591.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T08:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328591"
}
```



---

archive/issue_comments_384579.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,3 +18,19 @@\n ```\n SageMath version 8.2.rc0, Release Date: 2018-03-28\n ```\n+\n+This is despite the fact that printing the banner works:\n+\n+```\n+SageMath version 8.2.rc0, Release Date: 2018-03-28\n+sage: from sage.misc.banner import banner_text\n+sage: print(banner_text())\n+\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n+\u2502 SageMath version 8.2.rc0, Release Date: 2018-03-28                 \u2502\n+\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n+\u2502 Type \"help()\" for help.                                            \u2502\n+\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n+\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n+\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n+\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n+```\n``````\n",
    "created_at": "2018-03-29T08:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384579",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,3 +18,19 @@
 ```
 SageMath version 8.2.rc0, Release Date: 2018-03-28
 ```
+
+This is despite the fact that printing the banner works:
+
+```
+SageMath version 8.2.rc0, Release Date: 2018-03-28
+sage: from sage.misc.banner import banner_text
+sage: print(banner_text())
+┌────────────────────────────────────────────────────────────────────┐
+│ SageMath version 8.2.rc0, Release Date: 2018-03-28                 │
+│ Type "notebook()" for the browser-based notebook interface.        │
+│ Type "help()" for help.                                            │
+└────────────────────────────────────────────────────────────────────┘
+┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
+┃ Warning: this is a prerelease version, and it may be unstable.     ┃
+┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
+```
``````




---

archive/issue_comments_384580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,8 +23,8 @@\n \n ```\n SageMath version 8.2.rc0, Release Date: 2018-03-28\n-sage: from sage.misc.banner import banner_text\n-sage: print(banner_text())\n+sage: from sage.misc.banner import banner\n+sage: banner()\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502 SageMath version 8.2.rc0, Release Date: 2018-03-28                 \u2502\n \u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n``````\n",
    "created_at": "2018-03-29T08:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384580",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,8 +23,8 @@
 
 ```
 SageMath version 8.2.rc0, Release Date: 2018-03-28
-sage: from sage.misc.banner import banner_text
-sage: print(banner_text())
+sage: from sage.misc.banner import banner
+sage: banner()
 ┌────────────────────────────────────────────────────────────────────┐
 │ SageMath version 8.2.rc0, Release Date: 2018-03-28                 │
 │ Type "notebook()" for the browser-based notebook interface.        │
``````




---

archive/issue_comments_384581.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,3 +34,5 @@\n \u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n ```\n+\n+This is because the banner is stored in `src/bin/sage-banner` instead of being generated.\n``````\n",
    "created_at": "2018-03-29T08:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384581",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,3 +34,5 @@
 ┃ Warning: this is a prerelease version, and it may be unstable.     ┃
 ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
 ```
+
+This is because the banner is stored in `src/bin/sage-banner` instead of being generated.
``````




---

archive/issue_comments_384582.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2018-03-29T08:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384582",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_384583.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,5 +34,3 @@\n \u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n ```\n-\n-This is because the banner is stored in `src/bin/sage-banner` instead of being generated.\n``````\n",
    "created_at": "2018-03-29T08:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384583",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,5 +34,3 @@
 ┃ Warning: this is a prerelease version, and it may be unstable.     ┃
 ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
 ```
-
-This is because the banner is stored in `src/bin/sage-banner` instead of being generated.
``````




---

archive/issue_comments_384584.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nIt seems like the release manager is running `sage-update-version` in some context where unicode is just broken...",
    "created_at": "2018-03-29T08:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384584",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

It seems like the release manager is running `sage-update-version` in some context where unicode is just broken...



---

archive/issue_comments_384585.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to none",
    "created_at": "2018-03-29T08:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384585",
    "user": "https://github.com/embray"
}
```

Changed author from **Jeroen Demeyer** to none



---

archive/issue_comments_384586.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nWhy is it stored in `src/bin` anyways?  It's not an executable at all...",
    "created_at": "2018-03-29T08:50:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384586",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">Comment 7</div>

Why is it stored in `src/bin` anyways?  It's not an executable at all...



---

archive/issue_comments_384587.json:
```json
{
    "body": "Branch: **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)**",
    "created_at": "2018-03-29T09:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384587",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)**



---

archive/issue_comments_384588.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2018-03-29T09:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384588",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_384589.json:
```json
{
    "body": "Commit: **[58b4913](https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0)**",
    "created_at": "2018-03-29T09:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384589",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[58b4913](https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0)**



---

archive/issue_comments_384590.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0\">58b4913</a></td><td><code>Generate the Sage banner at runtime</code></td></tr></table>\n",
    "created_at": "2018-03-29T09:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384590",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0">58b4913</a></td><td><code>Generate the Sage banner at runtime</code></td></tr></table>




---

archive/issue_events_328592.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T09:18:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328592"
}
```



---

archive/issue_comments_384591.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-03-29T09:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384591",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_384592.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\n+1\n\nLet me just make sure that the banner still gets printed pretty quickly on slower platforms (i.e. Cygwin).\n\nOn that note I've also been really wanting to add like a spinner or something while it imports sage, but that's another matter...",
    "created_at": "2018-03-29T09:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384592",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">Comment 11</div>

+1

Let me just make sure that the banner still gets printed pretty quickly on slower platforms (i.e. Cygwin).

On that note I've also been really wanting to add like a spinner or something while it imports sage, but that's another matter...



---

archive/issue_events_328593.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T15:32:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328593"
}
```



---

archive/issue_events_328594.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T15:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328594"
}
```



---

archive/issue_comments_384593.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nIt does come up noticeably a little more slowly, but it's still subtle.  I'm also currently running a debug build which probably accounts for it being slow to begin with, so I'm not too concerned about it right now.",
    "created_at": "2018-03-29T15:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384593",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">Comment 12</div>

It does come up noticeably a little more slowly, but it's still subtle.  I'm also currently running a debug build which probably accounts for it being slow to begin with, so I'm not too concerned about it right now.



---

archive/issue_events_328595.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-30T10:45:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328595"
}
```



---

archive/issue_events_328596.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-30T10:45:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328596"
}
```



---

archive/issue_comments_384594.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/misc/lazy_attribute.pyx\", line 88, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_\nFailed example:\n    src[0]\nExpected:\n    'def banner(full=None):\\n'\nGot:\n    'def banner():\\n'\n**********************************************************************\nFile \"src/sage/misc/lazy_attribute.pyx\", line 90, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_\nFailed example:\n    lines\nExpected:\n    87\nGot:\n    81\n**********************************************************************\n1 item had failures:\n   2 of   6 in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_\n    [130 tests, 2 failures, 2.79 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/misc/abstract_method.py  # 2 doctests failed\nsage -t --long src/sage/misc/lazy_attribute.pyx  # 2 doctests failed\n```",
    "created_at": "2018-03-30T10:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384594",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">Comment 13</div>


```
**********************************************************************
File "src/sage/misc/lazy_attribute.pyx", line 88, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_
Failed example:
    src[0]
Expected:
    'def banner(full=None):\n'
Got:
    'def banner():\n'
**********************************************************************
File "src/sage/misc/lazy_attribute.pyx", line 90, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_
Failed example:
    lines
Expected:
    87
Got:
    81
**********************************************************************
1 item had failures:
   2 of   6 in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_
    [130 tests, 2 failures, 2.79 s]
----------------------------------------------------------------------
sage -t --long src/sage/misc/abstract_method.py  # 2 doctests failed
sage -t --long src/sage/misc/lazy_attribute.pyx  # 2 doctests failed
```



---

archive/issue_comments_384595.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI suggest those tests be rewritten around a dummy function that is not going to actually be changed...",
    "created_at": "2018-03-30T13:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384595",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">Comment 14</div>

I suggest those tests be rewritten around a dummy function that is not going to actually be changed...



---

archive/issue_comments_384596.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nThe banner was broken in #24825, now the output of the full banner can't be redirected\n\n```\n$ sage --python -c \"import sage.misc.banner; sage.misc.banner.banner(full=True)\" | cat\nSageMath version 8.2.rc1, Release Date: 2018-03-31\n```\nPipes that don't lead to the terminal do need to be encoded, check with isatty or always encode.",
    "created_at": "2018-03-31T13:00:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384596",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">Comment 15</div>

The banner was broken in #24825, now the output of the full banner can't be redirected

```
$ sage --python -c "import sage.misc.banner; sage.misc.banner.banner(full=True)" | cat
SageMath version 8.2.rc1, Release Date: 2018-03-31
```
Pipes that don't lead to the terminal do need to be encoded, check with isatty or always encode.



---

archive/issue_comments_384597.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nAlso cold starts can be slow (especially over nfs), which is why historically we want to print something before Python starts up.",
    "created_at": "2018-03-31T13:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384597",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">Comment 16</div>

Also cold starts can be slow (especially over nfs), which is why historically we want to print something before Python starts up.



---

archive/issue_comments_384598.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWell, starting up Python should only a fraction of the time of starting up Sage.",
    "created_at": "2018-04-02T08:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384598",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

Well, starting up Python should only a fraction of the time of starting up Sage.



---

archive/issue_comments_384599.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nmaybe we should just undo #24825, in order to allow the release of 8.2 ?",
    "created_at": "2018-04-02T08:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384599",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">Comment 18</div>

maybe we should just undo #24825, in order to allow the release of 8.2 ?



---

archive/issue_comments_384600.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nIt's not just a question of whether or not it's a TTY.  On Python 3 `sys.stdout` is still a `TextIOWrapper` with an encoding regardless whether it's attached to a terminal or not.  That's only a problem on Python 2, apparently.\n\nWe could make this work more consistently by having the `banner()` function encode string (e.g. as UTF-8) before printing on Python 2 (but not on Python 3, where this is already fine).\n\nThat said, I still prefer Jeroen's solution in general; it just needs a trivial fix to that test (which I still believe should be rewritten...)",
    "created_at": "2018-04-03T13:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384600",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

It's not just a question of whether or not it's a TTY.  On Python 3 `sys.stdout` is still a `TextIOWrapper` with an encoding regardless whether it's attached to a terminal or not.  That's only a problem on Python 2, apparently.

We could make this work more consistently by having the `banner()` function encode string (e.g. as UTF-8) before printing on Python 2 (but not on Python 3, where this is already fine).

That said, I still prefer Jeroen's solution in general; it just needs a trivial fix to that test (which I still believe should be rewritten...)



---

archive/issue_comments_384601.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)** to **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)**",
    "created_at": "2018-04-03T14:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384601",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)** to **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)**



---

archive/issue_events_328597.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-03T14:48:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328597"
}
```



---

archive/issue_events_328598.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-03T14:48:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328598"
}
```



---

archive/issue_comments_384602.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nHere I fixed the underlying issue on Python 2, and I also fixed the failing test. However, I still kept Jeroen's solution of no longer pre-generating the banner text.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/670de940b8e963141e32fbf7c675931e992adaad\">670de94</a></td><td><code>Fix printing the banner on Python 2 when stdout does not have an encoding (e.g. isatty)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11\">0bd5fcc</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>\n",
    "created_at": "2018-04-03T14:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384602",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">Comment 20</div>

Here I fixed the underlying issue on Python 2, and I also fixed the failing test. However, I still kept Jeroen's solution of no longer pre-generating the banner text.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/670de940b8e963141e32fbf7c675931e992adaad">670de94</a></td><td><code>Fix printing the banner on Python 2 when stdout does not have an encoding (e.g. isatty)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11">0bd5fcc</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>




---

archive/issue_comments_384603.json:
```json
{
    "body": "Changed commit from **[58b4913](https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0)** to **[0bd5fcc](https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11)**",
    "created_at": "2018-04-03T14:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384603",
    "user": "https://github.com/embray"
}
```

Changed commit from **[58b4913](https://github.com/sagemath/sagetrac-mirror/commit/58b4913a7ba89c0b513ebd2465d5a9d6fc33c7f0)** to **[0bd5fcc](https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11)**



---

archive/issue_comments_384604.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a928654b3b1462db93d0fc383ab2ffd9e3a4742d\">a928654</a></td><td><code>Generate the Sage banner at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/984fd03fa2f0d9de985061e31a9d4712b39ba7bc\">984fd03</a></td><td><code>Fix printing the banner on Python 2 when stdout does not have an encoding (e.g. isatty)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8\">e98cc89</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>\n",
    "created_at": "2018-04-03T14:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384604",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a928654b3b1462db93d0fc383ab2ffd9e3a4742d">a928654</a></td><td><code>Generate the Sage banner at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/984fd03fa2f0d9de985061e31a9d4712b39ba7bc">984fd03</a></td><td><code>Fix printing the banner on Python 2 when stdout does not have an encoding (e.g. isatty)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8">e98cc89</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>




---

archive/issue_comments_384605.json:
```json
{
    "body": "Changed commit from **[0bd5fcc](https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11)** to **[e98cc89](https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8)**",
    "created_at": "2018-04-03T14:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bd5fcc](https://github.com/sagemath/sagetrac-mirror/commit/0bd5fcc4f55a4ff371faf01696e8fe53c6b2fd11)** to **[e98cc89](https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8)**



---

archive/issue_comments_384606.json:
```json
{
    "body": "Changed reviewer from **Erik Bray** to **Erik Bray, Jeroen Demeyer**",
    "created_at": "2018-04-04T07:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384606",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Erik Bray** to **Erik Bray, Jeroen Demeyer**



---

archive/issue_comments_384607.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI don't agree with\n\n```\n            # sys.stdout does not have a clear encoding associated with it on\n            # Python 2 (it may have been redirected, for example); so just\n            # encode as UTF-8 and write the bytes directly to sys.stdout\n```\nIf we don't know the encoding, shouldn't we play it safe and assume ASCII instead? You are right that `encoding=None` seems to occur when output has been redirected. In that case, the banner is probably not important anyway, so I don't see the point for your special case.",
    "created_at": "2018-04-04T07:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384607",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

I don't agree with

```
            # sys.stdout does not have a clear encoding associated with it on
            # Python 2 (it may have been redirected, for example); so just
            # encode as UTF-8 and write the bytes directly to sys.stdout
```
If we don't know the encoding, shouldn't we play it safe and assume ASCII instead? You are right that `encoding=None` seems to occur when output has been redirected. In that case, the banner is probably not important anyway, so I don't see the point for your special case.



---

archive/issue_events_328599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-04T07:58:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328599"
}
```



---

archive/issue_events_328600.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-04T07:58:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328600"
}
```



---

archive/issue_comments_384608.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**",
    "created_at": "2018-04-04T07:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384608",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**



---

archive/issue_events_328601.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-04T09:02:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328601"
}
```



---

archive/issue_events_328602.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-04T09:02:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328602"
}
```



---

archive/issue_comments_384609.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nThe point is that on Python 2 you're writing `str`s which can contain arbitrary bytes, including UTF-8 encoded text.  It doesn't matter.  If you did, say, want to dump to a text file for example this is fine.  Python 3 already handles text better in this regard.  This is just a middle ground (albeit probably not needed in this particular function along with your additional changes).",
    "created_at": "2018-04-04T09:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384609",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">Comment 23</div>

The point is that on Python 2 you're writing `str`s which can contain arbitrary bytes, including UTF-8 encoded text.  It doesn't matter.  If you did, say, want to dump to a text file for example this is fine.  Python 3 already handles text better in this regard.  This is just a middle ground (albeit probably not needed in this particular function along with your additional changes).



---

archive/issue_comments_384610.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nIn other words, whether on Python 2 or on Python 3 the end result of this is writing a stream of bytes--typically UTF-8 encoded text--to a file object.  The difference is just who's handling the encoding and when (in Python 3 the higher-level I/O object is handling the encoding).",
    "created_at": "2018-04-04T09:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384610",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">Comment 24</div>

In other words, whether on Python 2 or on Python 3 the end result of this is writing a stream of bytes--typically UTF-8 encoded text--to a file object.  The difference is just who's handling the encoding and when (in Python 3 the higher-level I/O object is handling the encoding).



---

archive/issue_comments_384611.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@embray](#comment%3A23):\n> The point is that on Python 2 you're writing `str`s which can contain arbitrary bytes, including UTF-8 encoded text.\n\nBut why would you write UTF-8 encoded text when you have no idea whether `stdout` is actually expecting UTF-8? I would make a lot more sense to say \"I don't know the encoding, so let's be safe and assume ASCII\".\n\n> Python 3 already handles text better in this regard.\n\nOr worse in my opinion. When Python 2 doesn't know the encoding, it honestly says so. With Python 3, saying \"I don't know\" is not an option, so it just guesses some encoding.",
    "created_at": "2018-04-04T09:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384611",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@embray](#comment%3A23):
> The point is that on Python 2 you're writing `str`s which can contain arbitrary bytes, including UTF-8 encoded text.

But why would you write UTF-8 encoded text when you have no idea whether `stdout` is actually expecting UTF-8? I would make a lot more sense to say "I don't know the encoding, so let's be safe and assume ASCII".

> Python 3 already handles text better in this regard.

Or worse in my opinion. When Python 2 doesn't know the encoding, it honestly says so. With Python 3, saying "I don't know" is not an option, so it just guesses some encoding.



---

archive/issue_comments_384612.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nLet me put it another way--what this is doing currently is exactly the same on Python 2 as what it did before I started making changes to it for Python 3 support.  \n\n> But why would you write UTF-8 encoded text when you have no idea whether stdout is actually expecting UTF-8?\n\nBecause that's how Python 2 works--this is the kind of thing Python 3 is trying to fix :)",
    "created_at": "2018-04-04T09:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384612",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">Comment 26</div>

Let me put it another way--what this is doing currently is exactly the same on Python 2 as what it did before I started making changes to it for Python 3 support.  

> But why would you write UTF-8 encoded text when you have no idea whether stdout is actually expecting UTF-8?

Because that's how Python 2 works--this is the kind of thing Python 3 is trying to fix :)



---

archive/issue_comments_384613.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\n> Or worse in my opinion. When Python 2 doesn't know the encoding, it honestly says so. With Python 3, saying \"I don't know\" is not an option, so it just guesses some encoding.\n\nI don't get it. Is Python 2 worse or better? Because what you're complaining about just above this is how Python 2 works.  Python 3 is not just \"guessing some encoding\".  It's using the encoding from the current locale which is how other applications work (this is, for example, how your editor chooses an encoding to write when you enter non-ASCII text into a document).",
    "created_at": "2018-04-04T09:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384613",
    "user": "https://github.com/embray"
}
```

<div id="comment:27" align="right">Comment 27</div>

> Or worse in my opinion. When Python 2 doesn't know the encoding, it honestly says so. With Python 3, saying "I don't know" is not an option, so it just guesses some encoding.

I don't get it. Is Python 2 worse or better? Because what you're complaining about just above this is how Python 2 works.  Python 3 is not just "guessing some encoding".  It's using the encoding from the current locale which is how other applications work (this is, for example, how your editor chooses an encoding to write when you enter non-ASCII text into a document).



---

archive/issue_comments_384614.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@embray](#comment%3A26):\n> what this is doing currently is exactly the same on Python 2 as what it did before I started making changes to it for Python 3 support.\n\nIndeed. And I was happy that this bug (writing UTF-8 regardless of actual encoding) finally got fixed in #24825. And now you suggest to revert that fix.",
    "created_at": "2018-04-04T09:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384614",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@embray](#comment%3A26):
> what this is doing currently is exactly the same on Python 2 as what it did before I started making changes to it for Python 3 support.

Indeed. And I was happy that this bug (writing UTF-8 regardless of actual encoding) finally got fixed in #24825. And now you suggest to revert that fix.



---

archive/issue_comments_384615.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI don't know what you mean by \"actual encoding\".  There is no \"actual encoding\".  It's a file descriptor.  If you want to write some text to a file descriptor it always has to have some encoding and that has to come from somewhere.",
    "created_at": "2018-04-04T09:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384615",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">Comment 29</div>

I don't know what you mean by "actual encoding".  There is no "actual encoding".  It's a file descriptor.  If you want to write some text to a file descriptor it always has to have some encoding and that has to come from somewhere.



---

archive/issue_comments_384616.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nHow about this: If you want to switch back to your branch (and just add the fix to the tests) I don't mind.  My only goal here was to fix a regression.  At the same time, as long as Volker agrees to the rest of your changes (getting rid of the pre-written banner files) then it's kind of a moot point.\n\nThe rest of the confusion over this mostly stems from the use of \"print()\" instead of, say, providing an interface explicitly for writing the banner to a text file in some specific encoding (which I agree kind of sucks anyways because it's not necessarily the right encoding for the user's terminal).",
    "created_at": "2018-04-04T09:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384616",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">Comment 30</div>

How about this: If you want to switch back to your branch (and just add the fix to the tests) I don't mind.  My only goal here was to fix a regression.  At the same time, as long as Volker agrees to the rest of your changes (getting rid of the pre-written banner files) then it's kind of a moot point.

The rest of the confusion over this mostly stems from the use of "print()" instead of, say, providing an interface explicitly for writing the banner to a text file in some specific encoding (which I agree kind of sucks anyways because it's not necessarily the right encoding for the user's terminal).



---

archive/issue_comments_384617.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nI'm not going to play referee, please figure something out that works amongst yourselves :-)",
    "created_at": "2018-04-05T06:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384617",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">Comment 31</div>

I'm not going to play referee, please figure something out that works amongst yourselves :-)



---

archive/issue_comments_384618.json:
```json
{
    "body": "Changed branch from **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)** to **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)**",
    "created_at": "2018-04-05T08:35:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384618",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)** to **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)**



---

archive/issue_comments_384619.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI just removed the commit changing back the banner on Python 2.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a928654b3b1462db93d0fc383ab2ffd9e3a4742d\">a928654</a></td><td><code>Generate the Sage banner at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924\">f572d40</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>\n",
    "created_at": "2018-04-05T08:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384619",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

I just removed the commit changing back the banner on Python 2.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a928654b3b1462db93d0fc383ab2ffd9e3a4742d">a928654</a></td><td><code>Generate the Sage banner at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924">f572d40</a></td><td><code>Fix this test to account for changes to 'banner'</code></td></tr></table>




---

archive/issue_events_328603.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-05T08:36:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328603"
}
```



---

archive/issue_events_328604.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-05T08:36:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328604"
}
```



---

archive/issue_comments_384620.json:
```json
{
    "body": "Changed commit from **[e98cc89](https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8)** to **[f572d40](https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924)**",
    "created_at": "2018-04-05T08:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384620",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[e98cc89](https://github.com/sagemath/sagetrac-mirror/commit/e98cc8956622bd4bf3ba1c73aecf9dfa5865faf8)** to **[f572d40](https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924)**



---

archive/issue_comments_384621.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nThat's fine--I was just trying to restore some \"backwards compatibility\", but I think we can both agree it was bad to begin with, and that it's a moot point now.",
    "created_at": "2018-04-05T09:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384621",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">Comment 34</div>

That's fine--I was just trying to restore some "backwards compatibility", but I think we can both agree it was bad to begin with, and that it's a moot point now.



---

archive/issue_comments_384622.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nStill get\n\n```\nsage -t --long src/sage/misc/abstract_method.py  # 2 doctests failed\n```",
    "created_at": "2018-04-06T07:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384622",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">Comment 35</div>

Still get

```
sage -t --long src/sage/misc/abstract_method.py  # 2 doctests failed
```



---

archive/issue_events_328605.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-06T07:02:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328605"
}
```



---

archive/issue_events_328606.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-06T07:02:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328606"
}
```



---

archive/issue_comments_384623.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nThat reminds me to change that silly test.",
    "created_at": "2018-04-06T12:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384623",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">Comment 36</div>

That reminds me to change that silly test.



---

archive/issue_comments_384624.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI see; this is a different test that also depends on the source code of that particular function...",
    "created_at": "2018-04-06T13:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384624",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">Comment 37</div>

I see; this is a different test that also depends on the source code of that particular function...



---

archive/issue_comments_384625.json:
```json
{
    "body": "Changed commit from **[f572d40](https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924)** to **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)**",
    "created_at": "2018-04-06T13:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384625",
    "user": "https://github.com/embray"
}
```

Changed commit from **[f572d40](https://github.com/sagemath/sagetrac-mirror/commit/f572d4052d76d67a8ba97870832f4dd9b1d23924)** to **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)**



---

archive/issue_events_328607.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-06T13:35:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328607"
}
```



---

archive/issue_events_328608.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-06T13:35:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328608"
}
```



---

archive/issue_comments_384626.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)** to **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)**",
    "created_at": "2018-04-06T13:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384626",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/jdemeyer/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/fix_the_sage_banner)** to **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)**



---

archive/issue_comments_384627.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe\">36d4380</a></td><td><code>fix this test</code></td></tr></table>\n",
    "created_at": "2018-04-06T13:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384627",
    "user": "https://github.com/embray"
}
```

<div id="comment:38" align="right">Comment 38</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe">36d4380</a></td><td><code>fix this test</code></td></tr></table>




---

archive/issue_comments_384628.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.\n\nI guess it is too late at this stage, we'll deal with it later.",
    "created_at": "2018-04-06T22:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384628",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">Comment 39</div>

Thank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.

I guess it is too late at this stage, we'll deal with it later.



---

archive/issue_comments_384629.json:
```json
{
    "body": "Changed branch from **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)** to **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)**",
    "created_at": "2018-04-07T18:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384629",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/fix_the_sage_banner](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/fix_the_sage_banner)** to **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)**



---

archive/issue_events_328609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-07T18:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328609"
}
```



---

archive/issue_events_328610.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-07T18:03:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25056#event-328610"
}
```



---

archive/issue_comments_384630.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@kiwifb](#comment%3A39):\n> Thank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.\n> \n> I guess it is too late at this stage, we'll deal with it later.\n\nI don't think the sarcasm is necessary--I see your point but it's not completely obvious, and you had the opportunity here to set it back to \"needs_work\" or something--I wouldn't mind.  Please open a new ticket for this and CC me and set it to \"blocker\".  An easy fix for this would be to ensure \"VERSION.txt\" is installed somewhere sensinble under `$SAGE_LOCAL` (like, *not* `bin/` :) and use it from there if possible.",
    "created_at": "2018-04-09T09:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384630",
    "user": "https://github.com/embray"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@kiwifb](#comment%3A39):
> Thank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.
> 
> I guess it is too late at this stage, we'll deal with it later.

I don't think the sarcasm is necessary--I see your point but it's not completely obvious, and you had the opportunity here to set it back to "needs_work" or something--I wouldn't mind.  Please open a new ticket for this and CC me and set it to "blocker".  An easy fix for this would be to ensure "VERSION.txt" is installed somewhere sensinble under `$SAGE_LOCAL` (like, *not* `bin/` :) and use it from there if possible.



---

archive/issue_comments_384631.json:
```json
{
    "body": "Changed commit from **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)** to none",
    "created_at": "2018-04-09T09:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384631",
    "user": "https://github.com/embray"
}
```

Changed commit from **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)** to none



---

archive/issue_comments_384632.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@embray](#comment%3A41):\n> Replying to [@kiwifb](#comment%3A39):\n> > Thank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.\n> > \n> > I guess it is too late at this stage, we'll deal with it later.\n\n> \n> I don't think the sarcasm is necessary--I see your point but it's not completely obvious, and you had the opportunity here to set it back to \"needs_work\" or something--I wouldn't mind.  Please open a new ticket for this and CC me and set it to \"blocker\".  An easy fix for this would be to ensure \"VERSION.txt\" is installed somewhere sensinble under `$SAGE_LOCAL` (like, *not* `bin/` :) and use it from there if possible.\n\nI noticed this ticket because Volker included it on his branch. Rather than sarcasm, that's my exasperation at some stuff that bleeds out. I spent quite a bit of time over the years reducing the use of `SAGE_ROOT`. People just forget. For info I ship `VERSION.txt` as `/etc/sage-version.txt` which seems sensible but may not be the best place. I should ask what the other do.",
    "created_at": "2018-04-09T09:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384632",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@embray](#comment%3A41):
> Replying to [@kiwifb](#comment%3A39):
> > Thank you for annoying sage-on-distros by using `SAGE_ROOT` in the main sage script. SAGE_ROOT outside of the build system is just a pain in the ass. If you have to use a text file to store the version, name it uniquely and ship to /etc, or put it in a folder exclusively belonging to sage.
> > 
> > I guess it is too late at this stage, we'll deal with it later.

> 
> I don't think the sarcasm is necessary--I see your point but it's not completely obvious, and you had the opportunity here to set it back to "needs_work" or something--I wouldn't mind.  Please open a new ticket for this and CC me and set it to "blocker".  An easy fix for this would be to ensure "VERSION.txt" is installed somewhere sensinble under `$SAGE_LOCAL` (like, *not* `bin/` :) and use it from there if possible.

I noticed this ticket because Volker included it on his branch. Rather than sarcasm, that's my exasperation at some stuff that bleeds out. I spent quite a bit of time over the years reducing the use of `SAGE_ROOT`. People just forget. For info I ship `VERSION.txt` as `/etc/sage-version.txt` which seems sensible but may not be the best place. I should ask what the other do.



---

archive/issue_comments_384633.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nI know, that's fair. I also want to do with any and all runtime dependency on `$SAGE_ROOT`--it's really annoying.",
    "created_at": "2018-04-09T13:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384633",
    "user": "https://github.com/embray"
}
```

<div id="comment:43" align="right">Comment 43</div>

I know, that's fair. I also want to do with any and all runtime dependency on `$SAGE_ROOT`--it's really annoying.



---

archive/issue_comments_384634.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nThe problem with `VERSION.txt` looks very similar to `COPYING.txt`. So maybe we should deal with both in #21571?",
    "created_at": "2018-04-09T13:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384634",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">Comment 44</div>

The problem with `VERSION.txt` looks very similar to `COPYING.txt`. So maybe we should deal with both in #21571?



---

archive/issue_comments_384635.json:
```json
{
    "body": "Changed branch from **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)** to **[u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe)**",
    "created_at": "2018-04-10T23:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25056#issuecomment-384635",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[36d4380](https://github.com/sagemath/sagetrac-mirror/commit/36d438055e2e9bd5399152e510b6d233fc591ffe)** to **[u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/36d438055e2e9bd5399152e510b6d233fc591ffe)**
