# Issue 25277: make divides() better

archive/issues_025040.json:
```json
{
    "body": "```\nsage: R = Zmod(6)\nsage: R(4).divides(R(2))\nTraceback (most recent call last):\n...\nArithmeticError: reduction modulo 4 not defined\n```\n\nSee the [relevant discussion on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/tY9rNgxFJz4).\n\nBranch/Commit: 4a6cbd7ff47d344094480d27c7364ec4ae30f4cc\n\nReviewer: Travis Scrimshaw\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25277\n\n",
    "closed_at": "2018-05-15T22:33:45Z",
    "created_at": "2018-05-01T17:47:54Z",
    "labels": [
        "component: basic arithmetic",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "make divides() better",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25277",
    "user": "https://github.com/videlec"
}
```
```
sage: R = Zmod(6)
sage: R(4).divides(R(2))
Traceback (most recent call last):
...
ArithmeticError: reduction modulo 4 not defined
```

See the [relevant discussion on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/tY9rNgxFJz4).

Branch/Commit: 4a6cbd7ff47d344094480d27c7364ec4ae30f4cc

Reviewer: Travis Scrimshaw

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25277





---

archive/issue_comments_351995.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-02T05:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-351995",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_351996.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2018-05-02T05:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-351996",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_351997.json:
```json
{
    "body": "<a id='comment:3'></a>IMO, it is better to do\n\n```diff\n-            S = tester.some_elements()\n-            for a in S:\n-                for b in S:\n+            for a,b in tester.some_elements(repeat=2):\n```\nas then it runs `max_runs` number of times instead of `max_runs`<sup>2</sup>.",
    "created_at": "2018-05-02T05:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-351997",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>IMO, it is better to do

```diff
-            S = tester.some_elements()
-            for a in S:
-                for b in S:
+            for a,b in tester.some_elements(repeat=2):
```
as then it runs `max_runs` number of times instead of `max_runs`<sup>2</sup>.



---

archive/issue_comments_351998.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-02T08:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-351998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_351999.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 tscrim]:\n> IMO, it is better to do\n\n\ngood suggestion!",
    "created_at": "2018-05-02T08:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-351999",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>Replying to [comment:3 tscrim]:
> IMO, it is better to do


good suggestion!



---

archive/issue_comments_352000.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-02T08:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352000",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_352001.json:
```json
{
    "body": "<a id='comment:6'></a>though some rings are not ready for that yet...\n\n```\nsage -t --long src/sage/combinat/sf/macdonald.py  # 12 doctests failed\nsage -t --long src/sage/combinat/ncsf_qsym/ncsf.py  # 10 doctests failed\nsage -t --long src/sage/combinat/sf/sfa.py  # 1 doctest failed\nsage -t --long src/sage/algebras/steenrod/steenrod_algebra.py  # 11 doctests failed\nsage -t --long src/sage/structure/element.pyx  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/root_lattice_realization_algebras.py  # 1 doctest failed\nsage -t --long src/sage/combinat/posets/moebius_algebra.py  # 7 doctests failed\nsage -t --long src/sage/combinat/sf/k_dual.py  # 6 doctests failed\nsage -t --long src/sage/combinat/ncsf_qsym/qsym.py  # 8 doctests failed\nsage -t --long src/sage/combinat/sf/llt.py  # 10 doctests failed\nsage -t --long src/sage/homology/homology_vector_space_with_basis.py  # 5 doctests failed\nsage -t --long src/sage/combinat/grossman_larson_algebras.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/jack.py  # 10 doctests failed\nsage -t --long src/sage/combinat/sf/classical.py  # 5 doctests failed\nsage -t --long src/sage/combinat/sf/new_kschur.py  # 5 doctests failed\nsage -t --long src/sage/modular/abvar/homspace.py  # 1 doctest failed\nsage -t --long src/sage/algebras/yangian.py  # 4 doctests failed\nsage -t --long src/sage/manifolds/chart_func.py  # 1 doctest failed\nsage -t --long src/sage/algebras/quatalg/quaternion_algebra.py  # 2 doctests failed\nsage -t --long src/sage/algebras/iwahori_hecke_algebra.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/sf.py  # 1 doctest failed\nsage -t --long src/sage/algebras/cluster_algebra.py  # 6 doctests failed\nsage -t --long src/sage/algebras/quantum_matrix_coordinate_algebra.py  # 3 doctests failed\nsage -t --long src/sage/combinat/ncsym/ncsym.py  # 9 doctests failed\nsage -t --long src/sage/combinat/sf/schur.py  # 2 doctests failed\nsage -t --long src/sage/combinat/free_dendriform_algebra.py  # 2 doctests failed\nsage -t --long src/sage/combinat/symmetric_group_algebra.py  # 6 doctests failed\nsage -t --long src/sage/combinat/sf/hall_littlewood.py  # 6 doctests failed\nsage -t --long src/sage/categories/finite_dimensional_algebras_with_basis.py  # 2 doctests failed\nsage -t --long src/sage/combinat/fqsym.py  # 3 doctests failed\nsage -t --long src/sage/algebras/rational_cherednik_algebra.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed\nsage -t --long src/sage/manifolds/differentiable/scalarfield_algebra.py  # 3 doctests failed\nsage -t --long src/sage/manifolds/scalarfield_algebra.py  # 3 doctests failed\nsage -t --long src/sage/algebras/free_algebra.py  # 14 doctests failed\nsage -t --long src/sage/algebras/lie_algebras/poincare_birkhoff_witt.py  # 2 doctests failed\nsage -t --long src/sage/matrix/matrix_gap.pyx  # 1 doctest failed\nsage -t --long src/sage/combinat/diagram_algebras.py  # 5 doctests failed\nsage -t --long src/sage/combinat/descent_algebra.py  # 4 doctests failed\nsage -t --long src/sage/rings/real_mpfi.pyx  # 1 doctest failed\nsage -t --long src/sage/structure/parent.pyx  # 1 doctest failed\nsage -t --long src/sage/rings/real_mpfr.pyx  # 1 doctest failed\nsage -t --long src/sage/algebras/commutative_dga.py  # 5 doctests failed\nsage -t --long src/sage/algebras/nil_coxeter_algebra.py  # 2 doctests failed\nsage -t --long src/sage/combinat/posets/incidence_algebras.py  # 2 doctests failed\nsage -t --long src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed\nsage -t --long src/sage/matrix/matrix_space.py  # 1 doctest failed\nsage -t --long src/sage/combinat/sf/character.py  # 2 doctests failed\nsage -t --long src/sage/combinat/root_system/weyl_characters.py  # 3 doctests failed\nsage -t --long src/sage/algebras/hall_algebra.py  # 6 doctests failed\nsage -t --long src/sage/rings/ring.pyx  # 1 doctest failed\nsage -t --long src/sage/symbolic/ring.pyx  # 1 doctest failed\nsage -t --long src/sage/combinat/ncsym/dual.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/witt.py  # 2 doctests failed\nsage -t --long src/sage/algebras/schur_algebra.py  # 1 doctest failed\nsage -t --long src/sage/categories/modules_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/combinat/sf/orthotriang.py  # 2 doctests failed\nsage -t --long src/sage/algebras/affine_nil_temperley_lieb.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/plural.pyx  # 2 doctests failed\nsage -t --long src/sage/algebras/shuffle_algebra.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/dual.py  # 2 doctests failed\nsage -t --long src/sage/categories/examples/with_realizations.py  # 4 doctests failed\nsage -t --long src/sage/categories/magmas.py  # 1 doctest failed\nsage -t --long src/sage/rings/power_series_ring_element.pyx  # 1 doctest failed\nsage -t --long src/sage/algebras/yokonuma_hecke_algebra.py  # 1 doctest failed\nsage -t --long src/sage/combinat/sf/monomial.py  # 2 doctests failed\nsage -t --long src/sage/algebras/clifford_algebra.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/powersum.py  # 2 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/coercion_and_categories.rst  # 4 doctests failed\nsage -t --long src/sage/combinat/sf/elementary.py  # 2 doctests failed\nsage -t --long src/sage/combinat/sf/homogeneous.py  # 2 doctests failed\nsage -t --long src/sage/categories/examples/graded_connected_hopf_algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/rings/power_series_ring.py  # 9 doctests failed\nsage -t --long src/sage/structure/category_object.pyx  # 2 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/tutorial-implementing-algebraic-structures.rst  # 1 doctest failed\nsage -t --long src/sage/quivers/algebra.py  # 1 doctest failed\nsage -t --long src/sage/rings/multi_power_series_ring.py  # 7 doctests failed\nsage -t --long src/sage/rings/quotient_ring.py  # 1 doctest failed\nsage -t --long src/sage/categories/hopf_algebras_with_basis.py  # 2 doctests failed\nsage -t --long src/sage/algebras/tensor_algebra.py  # 2 doctests failed\nsage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 3 doctests failed\nsage -t --long src/sage/rings/laurent_series_ring.py  # 7 doctests failed\nsage -t --long src/sage/combinat/sf/symplectic.py  # 1 doctest failed\nsage -t --long src/sage/combinat/sf/orthogonal.py  # 1 doctest failed\nsage -t --long src/sage/combinat/sf/multiplicative.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/skew_polynomial_ring.py  # 2 doctests failed\nsage -t --long src/sage/algebras/orlik_solomon.py  # 2 doctests failed\nsage -t --long src/sage/algebras/weyl_algebra.py  # 1 doctest failed\nsage -t --long src/sage/combinat/species/series.py  # 1 doctest failed\nsage -t --long src/sage/combinat/combinatorial_algebra.py  # 2 doctests failed\nsage -t --long src/sage/categories/algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/categories/examples/hopf_algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/algebras/free_algebra_quotient.py  # 1 doctest failed\nsage -t --long src/sage/algebras/q_system.py  # 2 doctests failed\nsage -t --long src/sage/symbolic/callable.py  # 1 doctest failed\nsage -t --long src/sage/algebras/associated_graded.py  # 1 doctest failed\nsage -t --long src/sage/categories/examples/filtered_algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/categories/examples/finite_dimensional_algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/categories/examples/lie_algebras_with_basis.py  # 1 doctest failed\nsage -t --long src/sage/categories/examples/algebras_with_basis.py  # 1 doctest failed\n```",
    "created_at": "2018-05-02T08:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352001",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>though some rings are not ready for that yet...

```
sage -t --long src/sage/combinat/sf/macdonald.py  # 12 doctests failed
sage -t --long src/sage/combinat/ncsf_qsym/ncsf.py  # 10 doctests failed
sage -t --long src/sage/combinat/sf/sfa.py  # 1 doctest failed
sage -t --long src/sage/algebras/steenrod/steenrod_algebra.py  # 11 doctests failed
sage -t --long src/sage/structure/element.pyx  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/root_lattice_realization_algebras.py  # 1 doctest failed
sage -t --long src/sage/combinat/posets/moebius_algebra.py  # 7 doctests failed
sage -t --long src/sage/combinat/sf/k_dual.py  # 6 doctests failed
sage -t --long src/sage/combinat/ncsf_qsym/qsym.py  # 8 doctests failed
sage -t --long src/sage/combinat/sf/llt.py  # 10 doctests failed
sage -t --long src/sage/homology/homology_vector_space_with_basis.py  # 5 doctests failed
sage -t --long src/sage/combinat/grossman_larson_algebras.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/jack.py  # 10 doctests failed
sage -t --long src/sage/combinat/sf/classical.py  # 5 doctests failed
sage -t --long src/sage/combinat/sf/new_kschur.py  # 5 doctests failed
sage -t --long src/sage/modular/abvar/homspace.py  # 1 doctest failed
sage -t --long src/sage/algebras/yangian.py  # 4 doctests failed
sage -t --long src/sage/manifolds/chart_func.py  # 1 doctest failed
sage -t --long src/sage/algebras/quatalg/quaternion_algebra.py  # 2 doctests failed
sage -t --long src/sage/algebras/iwahori_hecke_algebra.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/sf.py  # 1 doctest failed
sage -t --long src/sage/algebras/cluster_algebra.py  # 6 doctests failed
sage -t --long src/sage/algebras/quantum_matrix_coordinate_algebra.py  # 3 doctests failed
sage -t --long src/sage/combinat/ncsym/ncsym.py  # 9 doctests failed
sage -t --long src/sage/combinat/sf/schur.py  # 2 doctests failed
sage -t --long src/sage/combinat/free_dendriform_algebra.py  # 2 doctests failed
sage -t --long src/sage/combinat/symmetric_group_algebra.py  # 6 doctests failed
sage -t --long src/sage/combinat/sf/hall_littlewood.py  # 6 doctests failed
sage -t --long src/sage/categories/finite_dimensional_algebras_with_basis.py  # 2 doctests failed
sage -t --long src/sage/combinat/fqsym.py  # 3 doctests failed
sage -t --long src/sage/algebras/rational_cherednik_algebra.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed
sage -t --long src/sage/manifolds/differentiable/scalarfield_algebra.py  # 3 doctests failed
sage -t --long src/sage/manifolds/scalarfield_algebra.py  # 3 doctests failed
sage -t --long src/sage/algebras/free_algebra.py  # 14 doctests failed
sage -t --long src/sage/algebras/lie_algebras/poincare_birkhoff_witt.py  # 2 doctests failed
sage -t --long src/sage/matrix/matrix_gap.pyx  # 1 doctest failed
sage -t --long src/sage/combinat/diagram_algebras.py  # 5 doctests failed
sage -t --long src/sage/combinat/descent_algebra.py  # 4 doctests failed
sage -t --long src/sage/rings/real_mpfi.pyx  # 1 doctest failed
sage -t --long src/sage/structure/parent.pyx  # 1 doctest failed
sage -t --long src/sage/rings/real_mpfr.pyx  # 1 doctest failed
sage -t --long src/sage/algebras/commutative_dga.py  # 5 doctests failed
sage -t --long src/sage/algebras/nil_coxeter_algebra.py  # 2 doctests failed
sage -t --long src/sage/combinat/posets/incidence_algebras.py  # 2 doctests failed
sage -t --long src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed
sage -t --long src/sage/matrix/matrix_space.py  # 1 doctest failed
sage -t --long src/sage/combinat/sf/character.py  # 2 doctests failed
sage -t --long src/sage/combinat/root_system/weyl_characters.py  # 3 doctests failed
sage -t --long src/sage/algebras/hall_algebra.py  # 6 doctests failed
sage -t --long src/sage/rings/ring.pyx  # 1 doctest failed
sage -t --long src/sage/symbolic/ring.pyx  # 1 doctest failed
sage -t --long src/sage/combinat/ncsym/dual.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/witt.py  # 2 doctests failed
sage -t --long src/sage/algebras/schur_algebra.py  # 1 doctest failed
sage -t --long src/sage/categories/modules_with_basis.py  # 1 doctest failed
sage -t --long src/sage/combinat/sf/orthotriang.py  # 2 doctests failed
sage -t --long src/sage/algebras/affine_nil_temperley_lieb.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/plural.pyx  # 2 doctests failed
sage -t --long src/sage/algebras/shuffle_algebra.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/dual.py  # 2 doctests failed
sage -t --long src/sage/categories/examples/with_realizations.py  # 4 doctests failed
sage -t --long src/sage/categories/magmas.py  # 1 doctest failed
sage -t --long src/sage/rings/power_series_ring_element.pyx  # 1 doctest failed
sage -t --long src/sage/algebras/yokonuma_hecke_algebra.py  # 1 doctest failed
sage -t --long src/sage/combinat/sf/monomial.py  # 2 doctests failed
sage -t --long src/sage/algebras/clifford_algebra.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/powersum.py  # 2 doctests failed
sage -t --long src/doc/en/thematic_tutorials/coercion_and_categories.rst  # 4 doctests failed
sage -t --long src/sage/combinat/sf/elementary.py  # 2 doctests failed
sage -t --long src/sage/combinat/sf/homogeneous.py  # 2 doctests failed
sage -t --long src/sage/categories/examples/graded_connected_hopf_algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/rings/power_series_ring.py  # 9 doctests failed
sage -t --long src/sage/structure/category_object.pyx  # 2 doctests failed
sage -t --long src/doc/en/thematic_tutorials/tutorial-implementing-algebraic-structures.rst  # 1 doctest failed
sage -t --long src/sage/quivers/algebra.py  # 1 doctest failed
sage -t --long src/sage/rings/multi_power_series_ring.py  # 7 doctests failed
sage -t --long src/sage/rings/quotient_ring.py  # 1 doctest failed
sage -t --long src/sage/categories/hopf_algebras_with_basis.py  # 2 doctests failed
sage -t --long src/sage/algebras/tensor_algebra.py  # 2 doctests failed
sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 3 doctests failed
sage -t --long src/sage/rings/laurent_series_ring.py  # 7 doctests failed
sage -t --long src/sage/combinat/sf/symplectic.py  # 1 doctest failed
sage -t --long src/sage/combinat/sf/orthogonal.py  # 1 doctest failed
sage -t --long src/sage/combinat/sf/multiplicative.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/skew_polynomial_ring.py  # 2 doctests failed
sage -t --long src/sage/algebras/orlik_solomon.py  # 2 doctests failed
sage -t --long src/sage/algebras/weyl_algebra.py  # 1 doctest failed
sage -t --long src/sage/combinat/species/series.py  # 1 doctest failed
sage -t --long src/sage/combinat/combinatorial_algebra.py  # 2 doctests failed
sage -t --long src/sage/categories/algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/categories/examples/hopf_algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/algebras/free_algebra_quotient.py  # 1 doctest failed
sage -t --long src/sage/algebras/q_system.py  # 2 doctests failed
sage -t --long src/sage/symbolic/callable.py  # 1 doctest failed
sage -t --long src/sage/algebras/associated_graded.py  # 1 doctest failed
sage -t --long src/sage/categories/examples/filtered_algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/categories/examples/finite_dimensional_algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/categories/examples/lie_algebras_with_basis.py  # 1 doctest failed
sage -t --long src/sage/categories/examples/algebras_with_basis.py  # 1 doctest failed
```



---

archive/issue_comments_352002.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-02T13:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_352003.json:
```json
{
    "body": "<a id='comment:8'></a>This ticket fixes several problem with the divides method\n\nFirst of all, a custom one is implemented on zmod rings\n\n```\nsage: R = Zmod(6)\nsage: R(4).divides(R(2))\nTraceback (most recent call last):\n...\nArithmeticError: reduction modulo 4 not defined\n```\n(see the [relevant discussion on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/tY9rNgxFJz4)).\n\nSecondly, make divides return `NotImplementedError` always when not available.\n\nFinally, test this with a test method.",
    "created_at": "2018-05-02T13:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352003",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>This ticket fixes several problem with the divides method

First of all, a custom one is implemented on zmod rings

```
sage: R = Zmod(6)
sage: R(4).divides(R(2))
Traceback (most recent call last):
...
ArithmeticError: reduction modulo 4 not defined
```
(see the [relevant discussion on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/tY9rNgxFJz4)).

Secondly, make divides return `NotImplementedError` always when not available.

Finally, test this with a test method.



---

archive/issue_comments_352004.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-02T13:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352004",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_352005.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-02T16:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_352006.json:
```json
{
    "body": "<a id='comment:11'></a>In comment:6, is \"that\" referring to comment:3 or this extra test?",
    "created_at": "2018-05-02T21:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352006",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>In comment:6, is "that" referring to comment:3 or this extra test?



---

archive/issue_comments_352007.json:
```json
{
    "body": "<a id='comment:12'></a>\"that\" meant \"the extra _test_divides\" included in this ticket.",
    "created_at": "2018-05-02T21:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352007",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>"that" meant "the extra _test_divides" included in this ticket.



---

archive/issue_comments_352008.json:
```json
{
    "body": "<a id='comment:13'></a>But I managed to find a solution with the latest commits.",
    "created_at": "2018-05-02T21:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352008",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>But I managed to find a solution with the latest commits.



---

archive/issue_comments_352009.json:
```json
{
    "body": "<a id='comment:14'></a>Thank you. Yep, I see the difference. So the only thing that I am unsure of are these sorts of doctest changes:\n\n```diff\n             sage: subspace.change_ring(CC)\n-            Subspace of dimension 2 of ModularForms(n=6, k=20, ep=1) over Complex Field with 53 bits of precision\n+            Traceback (most recent call last):\n+            ...\n+            NotImplementedError\n```\nI would prefer someone who understands this code to see if they agree with these changes or not.",
    "created_at": "2018-05-02T21:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352009",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Thank you. Yep, I see the difference. So the only thing that I am unsure of are these sorts of doctest changes:

```diff
             sage: subspace.change_ring(CC)
-            Subspace of dimension 2 of ModularForms(n=6, k=20, ep=1) over Complex Field with 53 bits of precision
+            Traceback (most recent call last):
+            ...
+            NotImplementedError
```
I would prefer someone who understands this code to see if they agree with these changes or not.



---

archive/issue_comments_352010.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 tscrim]:\n> Thank you. Yep, I see the difference. So the only thing that I am unsure of are these sorts of doctest changes:\n> \n> ```diff\n>              sage: subspace.change_ring(CC)\n> -            Subspace of dimension 2 of ModularForms(n=6, k=20, ep=1) over Complex Field with 53 bits of precision\n> +            Traceback (most recent call last):\n> +            ...\n> +            NotImplementedError\n> ```\n> I would prefer someone who understands this code to see if they agree with these changes or not.\n\n\nThere is nowhere a modular form with coefficients in CC that is constructed. And for a good reason: it would be completely broken (because it does use the `%` operator). These tests have been written only to test the `change_ring` method.",
    "created_at": "2018-05-02T21:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352010",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>Replying to [comment:14 tscrim]:
> Thank you. Yep, I see the difference. So the only thing that I am unsure of are these sorts of doctest changes:
> 
> ```diff
>              sage: subspace.change_ring(CC)
> -            Subspace of dimension 2 of ModularForms(n=6, k=20, ep=1) over Complex Field with 53 bits of precision
> +            Traceback (most recent call last):
> +            ...
> +            NotImplementedError
> ```
> I would prefer someone who understands this code to see if they agree with these changes or not.


There is nowhere a modular form with coefficients in CC that is constructed. And for a good reason: it would be completely broken (because it does use the `%` operator). These tests have been written only to test the `change_ring` method.



---

archive/issue_comments_352011.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 vdelecroix]:\n> There is nowhere a modular form with coefficients in CC that is constructed. And for a good reason: it would be completely broken (because it does use the `%` operator). These tests have been written only to test the `change_ring` method.\n\n\nThank you for the explanation. If they are bogus tests, then why not remove them altogether? I also am not sure I like the inconsistency with `QQ`:\n\n```\nsage: CC(2,1).divides(CC(1,2))\nTrue\nsage: QQ(1/2).divides(QQ(2))\nTrue\nsage: 2 % (1/2)\n...\nTypeError: no conversion of this rational to integer\n```\n(this was tested on vanilla).",
    "created_at": "2018-05-02T21:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352011",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Replying to [comment:15 vdelecroix]:
> There is nowhere a modular form with coefficients in CC that is constructed. And for a good reason: it would be completely broken (because it does use the `%` operator). These tests have been written only to test the `change_ring` method.


Thank you for the explanation. If they are bogus tests, then why not remove them altogether? I also am not sure I like the inconsistency with `QQ`:

```
sage: CC(2,1).divides(CC(1,2))
True
sage: QQ(1/2).divides(QQ(2))
True
sage: 2 % (1/2)
...
TypeError: no conversion of this rational to integer
```
(this was tested on vanilla).



---

archive/issue_comments_352012.json:
```json
{
    "body": "<a id='comment:17'></a>What is the relation with #25278?",
    "created_at": "2018-05-02T22:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352012",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>What is the relation with #25278?



---

archive/issue_comments_352013.json:
```json
{
    "body": "<a id='comment:18'></a>I am happy removing the tests. Will do it.\n\n`divides` is not intended to be compatible with `%` but with `*`. Whether `%` means \"remainder of the division\" is not universally true as `(1/2) % 3` shows. And for (exact) fields `a.divides(b)` should always return `True` unless `a` is zero. I don't think it is meaningful at all for non exact rings.\n\nWhat kind of consistency would you require with `%`? The fact that it is the default implementation of `divides` is kind of error prone.",
    "created_at": "2018-05-02T22:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352013",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>I am happy removing the tests. Will do it.

`divides` is not intended to be compatible with `%` but with `*`. Whether `%` means "remainder of the division" is not universally true as `(1/2) % 3` shows. And for (exact) fields `a.divides(b)` should always return `True` unless `a` is zero. I don't think it is meaningful at all for non exact rings.

What kind of consistency would you require with `%`? The fact that it is the default implementation of `divides` is kind of error prone.



---

archive/issue_comments_352014.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 slelievre]:\n> What is the relation with #25278?\n\n\nyour comment?",
    "created_at": "2018-05-02T22:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352014",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>Replying to [comment:17 slelievre]:
> What is the relation with #25278?


your comment?



---

archive/issue_comments_352015.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-02T22:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352016.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:18 vdelecroix]:\n> I am happy removing the tests. Will do it.\n\n\nThank you.\n\n> `divides` is not intended to be compatible with `%` but with `*`. Whether `%` means \"remainder of the division\" is not universally true as `(1/2) % 3` shows. And for (exact) fields `a.divides(b)` should always return `True` unless `a` is zero. I don't think it is meaningful at all for non exact rings.\n> \n> What kind of consistency would you require with `%`? The fact that it is the default implementation of `divides` is kind of error prone.\n\n\nI was mostly trying to compare `CC` and `QQ` to better understand why it only still works for the latter. I am not sure I actually do since you said it was because the `%` operator is used. However, such tests also fail for `QQ` generically; `a % b` only works if `b` is an integer, in which case it treats `a` as in `Zmod(b)`. I'm going to set a positive review because it does not make the `QQ` test any less artificial than before this ticket, but it doesn't seem like a good test from my (uneducated) perspective.",
    "created_at": "2018-05-02T22:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352016",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>Replying to [comment:18 vdelecroix]:
> I am happy removing the tests. Will do it.


Thank you.

> `divides` is not intended to be compatible with `%` but with `*`. Whether `%` means "remainder of the division" is not universally true as `(1/2) % 3` shows. And for (exact) fields `a.divides(b)` should always return `True` unless `a` is zero. I don't think it is meaningful at all for non exact rings.
> 
> What kind of consistency would you require with `%`? The fact that it is the default implementation of `divides` is kind of error prone.


I was mostly trying to compare `CC` and `QQ` to better understand why it only still works for the latter. I am not sure I actually do since you said it was because the `%` operator is used. However, such tests also fail for `QQ` generically; `a % b` only works if `b` is an integer, in which case it treats `a` as in `Zmod(b)`. I'm going to set a positive review because it does not make the `QQ` test any less artificial than before this ticket, but it doesn't seem like a good test from my (uneducated) perspective.



---

archive/issue_comments_352017.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-02T22:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352017",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_352018.json:
```json
{
    "body": "<a id='comment:22'></a>Thanks for the review!\n\nAbout `%`: #21745 and #21747",
    "created_at": "2018-05-03T06:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352018",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>Thanks for the review!

About `%`: #21745 and #21747



---

archive/issue_comments_352019.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-15T22:33:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25277#issuecomment-352019",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_063381.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-15T22:33:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25277",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25277#event-63381"
}
```
