# Issue 25754: Cache the basis for filtered_modules_with_basis

archive/issues_025517.json:
```json
{
    "assignees": [],
    "body": "We cache the generic `basis()`, and not caching the filtered version causes significant slowdowns when calling, e.g., `monomial()` of Lie algebras:\n\n```\nsage: L = lie_algebras.sl(QQ,5)\nsage: %time M = L.killing_form_matrix()\nCPU times: user 7.4 s, sys: 33.2 ms, total: 7.43 s\nWall time: 7.37 s\n```\nversus with caching\n\n```\nsage: L = lie_algebras.sl(QQ,5)\nsage: %time M = L.killing_form_matrix()\nCPU times: user 1.39 s, sys: 38.3 ms, total: 1.42 s\nWall time: 1.38 s\n```\n\nCC:  @nthiery @darijgr @vit-tucek\n\nKeywords: **days94**\n\nBranch/Commit: **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**\n\nReviewer: **V\u00edt Tu\u010dek**\n\nAuthor: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25754_\n\n",
    "closed_at": "2018-08-05T08:17:10Z",
    "created_at": "2018-07-03T08:33:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/performance",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cache the basis for filtered_modules_with_basis",
    "type": "issue",
    "updated_at": "2018-08-05T08:17:10Z",
    "url": "https://github.com/sagemath/sage/issues/25754",
    "user": "https://github.com/tscrim"
}
```
We cache the generic `basis()`, and not caching the filtered version causes significant slowdowns when calling, e.g., `monomial()` of Lie algebras:

```
sage: L = lie_algebras.sl(QQ,5)
sage: %time M = L.killing_form_matrix()
CPU times: user 7.4 s, sys: 33.2 ms, total: 7.43 s
Wall time: 7.37 s
```
versus with caching

```
sage: L = lie_algebras.sl(QQ,5)
sage: %time M = L.killing_form_matrix()
CPU times: user 1.39 s, sys: 38.3 ms, total: 1.42 s
Wall time: 1.38 s
```

CC:  @nthiery @darijgr @vit-tucek

Keywords: **days94**

Branch/Commit: **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**

Reviewer: **Vít Tuček**

Author: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/25754_





---

archive/issue_events_325867.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T08:33:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325867"
}
```



---

archive/issue_events_325868.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T08:33:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/performance",
    "label_color": "696969",
    "label_name": "performance",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325868"
}
```



---

archive/issue_events_325869.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T08:33:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325869"
}
```



---

archive/issue_events_325870.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T08:33:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325870"
}
```



---

archive/issue_events_325871.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T08:38:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325871"
}
```



---

archive/issue_comments_398407.json:
```json
{
    "body": "Commit: **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**",
    "created_at": "2018-07-03T08:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398407",
    "user": "https://github.com/tscrim"
}
```

Commit: **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**



---

archive/issue_comments_398408.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,16 @@\n We cache the generic `basis()`, and not caching the filtered version causes significant slowdowns when calling, e.g., `monomial()` of Lie algebras:\n \n ```\n+sage: L = lie_algebras.sl(QQ,5)\n+sage: %time M = L.killing_form_matrix()\n+CPU times: user 7.4 s, sys: 33.2 ms, total: 7.43 s\n+Wall time: 7.37 s\n ```\n versus with caching\n \n ```\n+sage: L = lie_algebras.sl(QQ,5)\n+sage: %time M = L.killing_form_matrix()\n+CPU times: user 1.39 s, sys: 38.3 ms, total: 1.42 s\n+Wall time: 1.38 s\n ```\n``````\n",
    "created_at": "2018-07-03T08:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398408",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,16 @@
 We cache the generic `basis()`, and not caching the filtered version causes significant slowdowns when calling, e.g., `monomial()` of Lie algebras:
 
 ```
+sage: L = lie_algebras.sl(QQ,5)
+sage: %time M = L.killing_form_matrix()
+CPU times: user 7.4 s, sys: 33.2 ms, total: 7.43 s
+Wall time: 7.37 s
 ```
 versus with caching
 
 ```
+sage: L = lie_algebras.sl(QQ,5)
+sage: %time M = L.killing_form_matrix()
+CPU times: user 1.39 s, sys: 38.3 ms, total: 1.42 s
+Wall time: 1.38 s
 ```
``````




---

archive/issue_comments_398409.json:
```json
{
    "body": "Branch: **[public/performance/cache_filtered_modules_basis-25754](https://github.com/sagemath/sagetrac-mirror/tree/public/performance/cache_filtered_modules_basis-25754)**",
    "created_at": "2018-07-03T08:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398409",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/performance/cache_filtered_modules_basis-25754](https://github.com/sagemath/sagetrac-mirror/tree/public/performance/cache_filtered_modules_basis-25754)**



---

archive/issue_comments_398410.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781\">579af4b</a></td><td><code>Caching basis() in FilteredModulesWithBasis.</code></td></tr></table>\n",
    "created_at": "2018-07-03T08:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398410",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781">579af4b</a></td><td><code>Caching basis() in FilteredModulesWithBasis.</code></td></tr></table>




---

archive/issue_comments_398411.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2018-07-03T08:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398411",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_events_325872.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2018-07-03T10:42:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325872"
}
```



---

archive/issue_events_325873.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2018-07-03T10:42:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325873"
}
```



---

archive/issue_comments_398412.json:
```json
{
    "body": "Reviewer: **V\u00edt Tu\u010dek**",
    "created_at": "2018-07-03T10:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398412",
    "user": "https://github.com/vit-tucek"
}
```

Reviewer: **Vít Tuček**



---

archive/issue_events_325874.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:17:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325874"
}
```



---

archive/issue_events_325875.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ca472d3c83a3625e78b1450b096c0064308a6747",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-05T08:17:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25754#event-325875"
}
```



---

archive/issue_comments_398413.json:
```json
{
    "body": "Changed branch from **[public/performance/cache_filtered_modules_basis-25754](https://github.com/sagemath/sagetrac-mirror/tree/public/performance/cache_filtered_modules_basis-25754)** to **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**",
    "created_at": "2018-08-05T08:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25754#issuecomment-398413",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/performance/cache_filtered_modules_basis-25754](https://github.com/sagemath/sagetrac-mirror/tree/public/performance/cache_filtered_modules_basis-25754)** to **[579af4b](https://github.com/sagemath/sagetrac-mirror/commit/579af4b05b427a692d4c398a0ddee089ae922781)**
