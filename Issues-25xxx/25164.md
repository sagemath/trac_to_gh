# Issue 25164: Embedded submanifolds

archive/issues_024927.json:
```json
{
    "body": "This ticket implements submanifolds immersed or embedded in topological or differentiable manifolds.\n\nIt doesn't yet implement calculations on these submanifolds, but can find coordinates adapted to a foliation, which is the first step in 3+1 formalism in general relativity.\n\nThis is part of the \u200b[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. \n\nCC:  @egourgoulhon @tscrim\n\nKeywords: submanifold, embedding, immersion, manifold\n\nBranch/Commit: eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032\n\nReviewer: Eric Gourgoulhon, Travis Scrimshaw\n\nAuthor: Florentin Jaffredo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25164\n\n",
    "closed_at": "2018-05-28T07:45:37Z",
    "created_at": "2018-04-13T15:34:30Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Embedded submanifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25164",
    "user": "https://github.com/FlorentinJ"
}
```
This ticket implements submanifolds immersed or embedded in topological or differentiable manifolds.

It doesn't yet implement calculations on these submanifolds, but can find coordinates adapted to a foliation, which is the first step in 3+1 formalism in general relativity.

This is part of the â€‹[SageManifolds project](http://sagemanifolds.obspm.fr/); see the metaticket #18528 for an overview. 

CC:  @egourgoulhon @tscrim

Keywords: submanifold, embedding, immersion, manifold

Branch/Commit: eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032

Reviewer: Eric Gourgoulhon, Travis Scrimshaw

Author: Florentin Jaffredo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25164





---

archive/issue_comments_474423.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[75adec7](https://github.com/sagemath/sagetrac-mirror/commit/75adec7167ca57e38d657dbc262a0e7a089b7d80)|`Fixed errors preventing documentation from building`|",
    "created_at": "2018-04-13T20:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[75adec7](https://github.com/sagemath/sagetrac-mirror/commit/75adec7167ca57e38d657dbc262a0e7a089b7d80)|`Fixed errors preventing documentation from building`|



---

archive/issue_comments_474424.json:
```json
{
    "body": "Changing commit from \"176596b1386c5f1e6d69645b996d174bc27abeae\" to \"75adec7167ca57e38d657dbc262a0e7a089b7d80\"",
    "created_at": "2018-04-13T20:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "176596b1386c5f1e6d69645b996d174bc27abeae" to "75adec7167ca57e38d657dbc262a0e7a089b7d80"



---

archive/issue_comments_474425.json:
```json
{
    "body": "Changing commit from \"75adec7167ca57e38d657dbc262a0e7a089b7d80\" to \"e32ba455933d559eb7abf8ddb8121332b5cdb2ee\"",
    "created_at": "2018-04-17T08:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "75adec7167ca57e38d657dbc262a0e7a089b7d80" to "e32ba455933d559eb7abf8ddb8121332b5cdb2ee"



---

archive/issue_comments_474426.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[862bcaf](https://github.com/sagemath/sagetrac-mirror/commit/862bcaf50db7719dc5ade27f07bc37859461686b)|`Created a clean new branch`|\n|[c5864bd](https://github.com/sagemath/sagetrac-mirror/commit/c5864bd87ef478365b687a7ccf08614ad4a36847)|`Changed 'ambient' to 'base_manifold'`|\n|[176596b](https://github.com/sagemath/sagetrac-mirror/commit/176596b1386c5f1e6d69645b996d174bc27abeae)|`Added documentation`|\n|[75adec7](https://github.com/sagemath/sagetrac-mirror/commit/75adec7167ca57e38d657dbc262a0e7a089b7d80)|`Fixed errors preventing documentation from building`|\n|[d7c59e5](https://github.com/sagemath/sagetrac-mirror/commit/d7c59e5297c502e2db0c49874f3323e3389b3a6e)|`Merge branch 'develop' of https://github.com/sagemath/sage into embedding`|\n|[e32ba45](https://github.com/sagemath/sagetrac-mirror/commit/e32ba455933d559eb7abf8ddb8121332b5cdb2ee)|`Changed modules name, fixed errors in documentation`|",
    "created_at": "2018-04-17T08:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[862bcaf](https://github.com/sagemath/sagetrac-mirror/commit/862bcaf50db7719dc5ade27f07bc37859461686b)|`Created a clean new branch`|
|[c5864bd](https://github.com/sagemath/sagetrac-mirror/commit/c5864bd87ef478365b687a7ccf08614ad4a36847)|`Changed 'ambient' to 'base_manifold'`|
|[176596b](https://github.com/sagemath/sagetrac-mirror/commit/176596b1386c5f1e6d69645b996d174bc27abeae)|`Added documentation`|
|[75adec7](https://github.com/sagemath/sagetrac-mirror/commit/75adec7167ca57e38d657dbc262a0e7a089b7d80)|`Fixed errors preventing documentation from building`|
|[d7c59e5](https://github.com/sagemath/sagetrac-mirror/commit/d7c59e5297c502e2db0c49874f3323e3389b3a6e)|`Merge branch 'develop' of https://github.com/sagemath/sage into embedding`|
|[e32ba45](https://github.com/sagemath/sagetrac-mirror/commit/e32ba455933d559eb7abf8ddb8121332b5cdb2ee)|`Changed modules name, fixed errors in documentation`|



---

archive/issue_comments_474427.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[d88c0d2](https://github.com/sagemath/sagetrac-mirror/commit/d88c0d2eb9808d635d70e21fb27458e20661341c)|`corrected bug when start_index!=0`|",
    "created_at": "2018-04-27T10:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[d88c0d2](https://github.com/sagemath/sagetrac-mirror/commit/d88c0d2eb9808d635d70e21fb27458e20661341c)|`corrected bug when start_index!=0`|



---

archive/issue_comments_474428.json:
```json
{
    "body": "Changing commit from \"e32ba455933d559eb7abf8ddb8121332b5cdb2ee\" to \"d88c0d2eb9808d635d70e21fb27458e20661341c\"",
    "created_at": "2018-04-27T10:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e32ba455933d559eb7abf8ddb8121332b5cdb2ee" to "d88c0d2eb9808d635d70e21fb27458e20661341c"



---

archive/issue_comments_474429.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[697f904](https://github.com/sagemath/sagetrac-mirror/commit/697f904f395a26db04d6dd3449829a12845204a2)|`Previous commit introduced a new bug, now fixed`|",
    "created_at": "2018-04-27T10:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[697f904](https://github.com/sagemath/sagetrac-mirror/commit/697f904f395a26db04d6dd3449829a12845204a2)|`Previous commit introduced a new bug, now fixed`|



---

archive/issue_comments_474430.json:
```json
{
    "body": "Changing commit from \"d88c0d2eb9808d635d70e21fb27458e20661341c\" to \"697f904f395a26db04d6dd3449829a12845204a2\"",
    "created_at": "2018-04-27T10:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474430",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d88c0d2eb9808d635d70e21fb27458e20661341c" to "697f904f395a26db04d6dd3449829a12845204a2"



---

archive/issue_comments_474431.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[5627f2c](https://github.com/sagemath/sagetrac-mirror/commit/5627f2c585f6a04916e17b144e4410dca562b1fc)|`fixed bug concerning restrictions wrongly propagated`|",
    "created_at": "2018-04-27T12:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[5627f2c](https://github.com/sagemath/sagetrac-mirror/commit/5627f2c585f6a04916e17b144e4410dca562b1fc)|`fixed bug concerning restrictions wrongly propagated`|



---

archive/issue_comments_474432.json:
```json
{
    "body": "Changing commit from \"697f904f395a26db04d6dd3449829a12845204a2\" to \"5627f2c585f6a04916e17b144e4410dca562b1fc\"",
    "created_at": "2018-04-27T12:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474432",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "697f904f395a26db04d6dd3449829a12845204a2" to "5627f2c585f6a04916e17b144e4410dca562b1fc"



---

archive/issue_comments_474433.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[33d9dd6](https://github.com/sagemath/sagetrac-mirror/commit/33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2)|`Latex names are now supported in adapted charts, substitutions are stored.`|",
    "created_at": "2018-05-15T09:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[33d9dd6](https://github.com/sagemath/sagetrac-mirror/commit/33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2)|`Latex names are now supported in adapted charts, substitutions are stored.`|



---

archive/issue_comments_474434.json:
```json
{
    "body": "Changing commit from \"5627f2c585f6a04916e17b144e4410dca562b1fc\" to \"33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2\"",
    "created_at": "2018-05-15T09:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5627f2c585f6a04916e17b144e4410dca562b1fc" to "33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2"



---

archive/issue_comments_474435.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-15T09:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474435",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from new to needs_review.



---

archive/issue_events_079629.json:
```json
{
    "actor": "https://github.com/FlorentinJ",
    "created_at": "2018-05-15T09:04:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25164#event-79629"
}
```



---

archive/issue_comments_474436.json:
```json
{
    "body": "Changing commit from \"33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2\" to \"99f584d40749acf692c2e4eae0a38a66636ab62f\"",
    "created_at": "2018-05-21T13:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "33d9dd68de9d0dce1fe7c24c8b27e48a583a12a2" to "99f584d40749acf692c2e4eae0a38a66636ab62f"



---

archive/issue_comments_474437.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[a05e9ec](https://github.com/sagemath/sagetrac-mirror/commit/a05e9eca6db06adb1e24c5cd224af70a5b78e7f8)|`Merge branch 'develop' into embedding`|\n|[d03474c](https://github.com/sagemath/sagetrac-mirror/commit/d03474cacfbaf159247104376eb3eae0f7dfcdd3)|`Typo`|\n|[99f584d](https://github.com/sagemath/sagetrac-mirror/commit/99f584d40749acf692c2e4eae0a38a66636ab62f)|`Incompatibility with 8.2 Euclidean spaces solved`|",
    "created_at": "2018-05-21T13:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[a05e9ec](https://github.com/sagemath/sagetrac-mirror/commit/a05e9eca6db06adb1e24c5cd224af70a5b78e7f8)|`Merge branch 'develop' into embedding`|
|[d03474c](https://github.com/sagemath/sagetrac-mirror/commit/d03474cacfbaf159247104376eb3eae0f7dfcdd3)|`Typo`|
|[99f584d](https://github.com/sagemath/sagetrac-mirror/commit/99f584d40749acf692c2e4eae0a38a66636ab62f)|`Incompatibility with 8.2 Euclidean spaces solved`|



---

archive/issue_comments_474438.json:
```json
{
    "body": "<a id='comment:10'></a>\nThanks for this piece of work!\n\nHere are some (rather minor) comments:\n- About the directory structure: instead of having everything in the subdirectory `src/sage/manifolds/submanifold`, one could (i) put `differentiable_submanifold.py` and `pseudo_riemannian_submanifold.py` into a subdirectory `src/sage/manifolds/differentiable/submanifold` and (ii) put `topological_submanifold.py` in `src/sage/manifolds` (no need for a subdirectory here since it is only one file). In this way, everything related with differentiable manifolds is kept under `src/sage/manifolds/differentiable`\n- One doctest fails in `src/sage/manifold/differentiable/real_line.py` due to the change of the keyword parameter `ambient` to `base_manifold`\n- For the class `OpenInterval` defined in `src/sage/manifold/differentiable/real_line.py`, the new keyword argument `base_manifold` of `__init__` sounds a little akward in this context; maybe it could be replaced by `base_interval` or `ambient_interval`; also `ambient` in the docstring of `OpenInterval` must be updated. \n- Maybe you could introduce a method `TopologicalSubmanifold.set_embedding` that would perform both `set_immersion` and `declare_embedding`. \n- In the docstring of `set_immersion`, the description of `phi_inverse` should be extended, by precising that this is the inverse of phi onto its image; besides, `phi_inverse` is a not a good keyword, `inverse` or `inverse_from_image` is probably better\n- Some PEP8 recommendations: don't use spaces around the = sign when used to indicate a keyword argument and do not use `\\` to break a line inside parentheses; for instance, rewrite lines 360-361 of `topological_submanifold.py` as\n\n```\n            sage: N.set_immersion(phi, phi_inverse=phi_inv, var=t,\n            ....:                 t_inverse={t:phi_inv_t})\n```\n- Put back quotes around LaTeX expressions in docstrings, so that Sphinx can render them properly: for instance, in the docstrings of `topological_submanifold.py`, replace all `\\phi` by ``\\phi``.\n- In the documentation of `TopologicalSubmanifold.plot`: ``ParametricSurface`` should be replaced by ```ParametricSurface``` and `:func: `ParametricSurface`` by `:class:`~sage.plot.plot3d.parametric_surface.ParametricSurface``",
    "created_at": "2018-05-21T15:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474438",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:10'></a>
Thanks for this piece of work!

Here are some (rather minor) comments:
- About the directory structure: instead of having everything in the subdirectory `src/sage/manifolds/submanifold`, one could (i) put `differentiable_submanifold.py` and `pseudo_riemannian_submanifold.py` into a subdirectory `src/sage/manifolds/differentiable/submanifold` and (ii) put `topological_submanifold.py` in `src/sage/manifolds` (no need for a subdirectory here since it is only one file). In this way, everything related with differentiable manifolds is kept under `src/sage/manifolds/differentiable`
- One doctest fails in `src/sage/manifold/differentiable/real_line.py` due to the change of the keyword parameter `ambient` to `base_manifold`
- For the class `OpenInterval` defined in `src/sage/manifold/differentiable/real_line.py`, the new keyword argument `base_manifold` of `__init__` sounds a little akward in this context; maybe it could be replaced by `base_interval` or `ambient_interval`; also `ambient` in the docstring of `OpenInterval` must be updated. 
- Maybe you could introduce a method `TopologicalSubmanifold.set_embedding` that would perform both `set_immersion` and `declare_embedding`. 
- In the docstring of `set_immersion`, the description of `phi_inverse` should be extended, by precising that this is the inverse of phi onto its image; besides, `phi_inverse` is a not a good keyword, `inverse` or `inverse_from_image` is probably better
- Some PEP8 recommendations: don't use spaces around the = sign when used to indicate a keyword argument and do not use `\` to break a line inside parentheses; for instance, rewrite lines 360-361 of `topological_submanifold.py` as

```
            sage: N.set_immersion(phi, phi_inverse=phi_inv, var=t,
            ....:                 t_inverse={t:phi_inv_t})
```
- Put back quotes around LaTeX expressions in docstrings, so that Sphinx can render them properly: for instance, in the docstrings of `topological_submanifold.py`, replace all `\phi` by ``\phi``.
- In the documentation of `TopologicalSubmanifold.plot`: ``ParametricSurface`` should be replaced by ```ParametricSurface``` and `:func: `ParametricSurface`` by `:class:`~sage.plot.plot3d.parametric_surface.ParametricSurface``



---

archive/issue_comments_474439.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2018-05-21T15:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474439",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_474440.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-21T15:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474440",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_474441.json:
```json
{
    "body": "<a id='comment:13'></a>\nI don't think it is worthwhile to have a directory with 1-2 files unless you plan for it to grow. At least to me, I don't see it growing much. So for (i), I would just put them both in `manifolds/differentiable`.",
    "created_at": "2018-05-21T16:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474441",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
I don't think it is worthwhile to have a directory with 1-2 files unless you plan for it to grow. At least to me, I don't see it growing much. So for (i), I would just put them both in `manifolds/differentiable`.



---

archive/issue_comments_474442.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[e77ebe0](https://github.com/sagemath/sagetrac-mirror/commit/e77ebe0f8f78095bf749d6e2cb91be833f5195f1)|`Solved failed doctest due to old keyword 'ambient'`|\n|[3747790](https://github.com/sagemath/sagetrac-mirror/commit/37477903aa4c048c57d748b82a28a3cce603697c)|`Some documentation improvements`|\n|[e81ef39](https://github.com/sagemath/sagetrac-mirror/commit/e81ef396c124db47213ae30c0a531e45f5396fef)|`Moved files as suggested`|",
    "created_at": "2018-05-22T09:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[e77ebe0](https://github.com/sagemath/sagetrac-mirror/commit/e77ebe0f8f78095bf749d6e2cb91be833f5195f1)|`Solved failed doctest due to old keyword 'ambient'`|
|[3747790](https://github.com/sagemath/sagetrac-mirror/commit/37477903aa4c048c57d748b82a28a3cce603697c)|`Some documentation improvements`|
|[e81ef39](https://github.com/sagemath/sagetrac-mirror/commit/e81ef396c124db47213ae30c0a531e45f5396fef)|`Moved files as suggested`|



---

archive/issue_comments_474443.json:
```json
{
    "body": "Changing commit from \"99f584d40749acf692c2e4eae0a38a66636ab62f\" to \"e81ef396c124db47213ae30c0a531e45f5396fef\"",
    "created_at": "2018-05-22T09:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "99f584d40749acf692c2e4eae0a38a66636ab62f" to "e81ef396c124db47213ae30c0a531e45f5396fef"



---

archive/issue_comments_474444.json:
```json
{
    "body": "Changing commit from \"e81ef396c124db47213ae30c0a531e45f5396fef\" to \"13bc650c5082bd6018970c8ca94c25e19bb23498\"",
    "created_at": "2018-05-22T09:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e81ef396c124db47213ae30c0a531e45f5396fef" to "13bc650c5082bd6018970c8ca94c25e19bb23498"



---

archive/issue_comments_474445.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------|\n|[13bc650](https://github.com/sagemath/sagetrac-mirror/commit/13bc650c5082bd6018970c8ca94c25e19bb23498)|`PEP8`|",
    "created_at": "2018-05-22T09:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------|
|[13bc650](https://github.com/sagemath/sagetrac-mirror/commit/13bc650c5082bd6018970c8ca94c25e19bb23498)|`PEP8`|



---

archive/issue_comments_474446.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-22T09:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474446",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_474447.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-22T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474447",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_474448.json:
```json
{
    "body": "Changing reviewer from \"Eric Gourgoulhon\" to \"Eric Gourgoulhon, Travis Scrimshaw\"",
    "created_at": "2018-05-22T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474448",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "Eric Gourgoulhon" to "Eric Gourgoulhon, Travis Scrimshaw"



---

archive/issue_comments_474449.json:
```json
{
    "body": "<a id='comment:17'></a>\nThanks for these changes. In particular, I agree with Travis (comment:13) that there is no need for a specific subdirectory. \n\nA few more comments, first regarding the code:\n\n- In class `sage.manifolds.subset.ManifoldSubset` a method `ambient()` was introduced as an alias of `manifold()`. For submanifolds, which inherit from `ManifoldSubset`, this clashes with the meaning given to *ambient*. To avoid any confusion and since it does not appear to be massively used, I would remove the alias `ambient = manifold` in `src/sage/manifolds/subset.py`.\n- One should probably introduce accessor methods in class `TopologicalSubmanifold`:\n  - `ambient()`\n  - `immersion()`\n  - `embedding()`\n- In lines 2464 and 2490 of `src/sage/manifolds/manifold.py`, one should pass the argument `ambient` as `ambient=ambient` (it is a good policy to always specify the keyword in passing keyword arguments, in case the order of arguments is changed)\n\nRegarding the documentation: \n\n- In `src/doc/en/reference/manifolds/index.rst`, I don't think it is worth to have a whole section devoted to submanifolds in the main menu. It seems more relevant to add the various submanifolds as subsections of the sections they belong to: topological submanifolds in topological manifolds, etc. In doing so, there is no longer any need of the file `submanifold.rst`\n- In `src/sage/manifolds/differentiable/differentiable_submanifold.py`, a better title would be *Submanifolds of differentiable manifolds*. Also here you should specify what is meant by *submanifold*: in the current phrasing, it defaults to *embedded submanifold* (I am OK with this), but you should allow for *immersed submanifolds*\n- In the docstring of the methods `set_embedding` and `set_immersion`, it is said that the default value of the parameter `t_inverse` is `{}`, while it is actually `None`\n- A typo in line 128 of `topological_submanifold.py`: \"or computed\" --> \"are computed\" (I guess)",
    "created_at": "2018-05-22T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474449",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:17'></a>
Thanks for these changes. In particular, I agree with Travis (comment:13) that there is no need for a specific subdirectory. 

A few more comments, first regarding the code:

- In class `sage.manifolds.subset.ManifoldSubset` a method `ambient()` was introduced as an alias of `manifold()`. For submanifolds, which inherit from `ManifoldSubset`, this clashes with the meaning given to *ambient*. To avoid any confusion and since it does not appear to be massively used, I would remove the alias `ambient = manifold` in `src/sage/manifolds/subset.py`.
- One should probably introduce accessor methods in class `TopologicalSubmanifold`:
  - `ambient()`
  - `immersion()`
  - `embedding()`
- In lines 2464 and 2490 of `src/sage/manifolds/manifold.py`, one should pass the argument `ambient` as `ambient=ambient` (it is a good policy to always specify the keyword in passing keyword arguments, in case the order of arguments is changed)

Regarding the documentation: 

- In `src/doc/en/reference/manifolds/index.rst`, I don't think it is worth to have a whole section devoted to submanifolds in the main menu. It seems more relevant to add the various submanifolds as subsections of the sections they belong to: topological submanifolds in topological manifolds, etc. In doing so, there is no longer any need of the file `submanifold.rst`
- In `src/sage/manifolds/differentiable/differentiable_submanifold.py`, a better title would be *Submanifolds of differentiable manifolds*. Also here you should specify what is meant by *submanifold*: in the current phrasing, it defaults to *embedded submanifold* (I am OK with this), but you should allow for *immersed submanifolds*
- In the docstring of the methods `set_embedding` and `set_immersion`, it is said that the default value of the parameter `t_inverse` is `{}`, while it is actually `None`
- A typo in line 128 of `topological_submanifold.py`: "or computed" --> "are computed" (I guess)



---

archive/issue_comments_474450.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[bca9a1a](https://github.com/sagemath/sagetrac-mirror/commit/bca9a1a07bac2d02fb78864071fa3f8d8d23d76c)|`New accessors, improved documentation, typos`|",
    "created_at": "2018-05-24T12:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[bca9a1a](https://github.com/sagemath/sagetrac-mirror/commit/bca9a1a07bac2d02fb78864071fa3f8d8d23d76c)|`New accessors, improved documentation, typos`|



---

archive/issue_comments_474451.json:
```json
{
    "body": "Changing commit from \"13bc650c5082bd6018970c8ca94c25e19bb23498\" to \"bca9a1a07bac2d02fb78864071fa3f8d8d23d76c\"",
    "created_at": "2018-05-24T12:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "13bc650c5082bd6018970c8ca94c25e19bb23498" to "bca9a1a07bac2d02fb78864071fa3f8d8d23d76c"



---

archive/issue_comments_474452.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-24T12:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474452",
    "user": "https://github.com/FlorentinJ"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_474453.json:
```json
{
    "body": "<a id='comment:19'></a>\nI'm not sure removing the method `ambient` is a good idea given that it is an abstract method of a parent class of `ManifoldSubset`, and so should be implemented in every child class.\n\nNot doing so raises errors during calls of `TestSuite`.",
    "created_at": "2018-05-24T12:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474453",
    "user": "https://github.com/FlorentinJ"
}
```

<a id='comment:19'></a>
I'm not sure removing the method `ambient` is a good idea given that it is an abstract method of a parent class of `ManifoldSubset`, and so should be implemented in every child class.

Not doing so raises errors during calls of `TestSuite`.



---

archive/issue_comments_474454.json:
```json
{
    "body": "<a id='comment:20'></a>\nI don't see the harm in having such an alias. It is good for consistency/duck-typing and a similar pattern has been used for free modules. However, the nomenclature clash might require renaming one of the methods.",
    "created_at": "2018-05-24T15:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474454",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
I don't see the harm in having such an alias. It is good for consistency/duck-typing and a similar pattern has been used for free modules. However, the nomenclature clash might require renaming one of the methods.



---

archive/issue_comments_474455.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [tscrim](#comment%3A20):\n> I don't see the harm in having such an alias. It is good for consistency/duck-typing and a similar pattern has been used for free modules. However, the nomenclature clash might require renaming one of the methods.\n\n\nOK let us keep the alias `ambient` in `ManifoldSubset`; in some sense, it is coherent to redefine it for submanifolds (as it is now), so there is no need for renaming.",
    "created_at": "2018-05-25T14:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474455",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:21'></a>
Replying to [tscrim](#comment%3A20):
> I don't see the harm in having such an alias. It is good for consistency/duck-typing and a similar pattern has been used for free modules. However, the nomenclature clash might require renaming one of the methods.


OK let us keep the alias `ambient` in `ManifoldSubset`; in some sense, it is coherent to redefine it for submanifolds (as it is now), so there is no need for renaming.



---

archive/issue_comments_474456.json:
```json
{
    "body": "Changing commit from \"bca9a1a07bac2d02fb78864071fa3f8d8d23d76c\" to \"eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032\"",
    "created_at": "2018-05-25T16:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bca9a1a07bac2d02fb78864071fa3f8d8d23d76c" to "eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032"



---

archive/issue_comments_474457.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[c9a7082](https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af)|`Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2`|\n|[eb2b4c8](https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032)|`Reviewer tweaks for submanifolds`|",
    "created_at": "2018-05-25T16:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[c9a7082](https://github.com/sagemath/sagetrac-mirror/commit/c9a7082616c83f9cd440b6a05418a16dca58a5af)|`Merge branch 'public/manifolds/submanifolds' of git://trac.sagemath.org/sage into Sage 8.3.beta2`|
|[eb2b4c8](https://github.com/sagemath/sagetrac-mirror/commit/eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032)|`Reviewer tweaks for submanifolds`|



---

archive/issue_comments_474458.json:
```json
{
    "body": "<a id='comment:23'></a>\nI've just pushed some reviewer tweaks, which regard mostly the documentation. \nOn my side, it's OK for a positive review. Travis, do you have any further comment?",
    "created_at": "2018-05-25T17:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474458",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:23'></a>
I've just pushed some reviewer tweaks, which regard mostly the documentation. 
On my side, it's OK for a positive review. Travis, do you have any further comment?



---

archive/issue_comments_474459.json:
```json
{
    "body": "<a id='comment:24'></a>\nNope.",
    "created_at": "2018-05-26T04:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474459",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Nope.



---

archive/issue_comments_474460.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-26T04:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474460",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_079630.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-28T07:45:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25164#event-79630"
}
```



---

archive/issue_comments_474461.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-28T07:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474461",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_474462.json:
```json
{
    "body": "Changing branch from \"public/manifolds/submanifolds\" to \"eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032\"",
    "created_at": "2018-05-28T07:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25164",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25164#issuecomment-474462",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/manifolds/submanifolds" to "eb2b4c84d579e8bc1c60bd899ea96d1ea9d44032"
