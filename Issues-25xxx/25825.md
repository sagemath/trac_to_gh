# Issue 25825: Move cremona db to features

archive/issues_025588.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis continues the work in #20382 and #25835.\n\nTo test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.\n\nNext steps in getting rid of `is_package_installed` etc.:\n- #30746 `sage.doctest.control`: Replace use of `sage.misc.package.list_packages`\n- #30747 Deprecate all of `sage.misc.package` except for `PackageNotFoundError`\n\nCC:  @tscrim @kiwifb @mkoeppe\n\nComponent: **build**\n\nAuthor: **Timo Kaufmann, Jeroen Demeyer, Antonio Rojas**\n\nBranch/Commit: **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**\n\nReviewer: **Julian R\u00fcth, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25825_\n\n",
    "closed_at": "2020-10-31T18:07:46Z",
    "created_at": "2018-07-11T13:18:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move cremona db to features",
    "type": "issue",
    "updated_at": "2020-10-31T18:07:46Z",
    "url": "https://github.com/sagemath/sage/issues/25825",
    "user": "https://github.com/timokau"
}
```
<div id="comment:0"></div>

This continues the work in #20382 and #25835.

To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.

Next steps in getting rid of `is_package_installed` etc.:
- #30746 `sage.doctest.control`: Replace use of `sage.misc.package.list_packages`
- #30747 Deprecate all of `sage.misc.package` except for `PackageNotFoundError`

CC:  @tscrim @kiwifb @mkoeppe

Component: **build**

Author: **Timo Kaufmann, Jeroen Demeyer, Antonio Rojas**

Branch/Commit: **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**

Reviewer: **Julian RÃ¼th, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/25825_





---

archive/issue_events_353883.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T13:18:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353883"
}
```



---

archive/issue_events_353884.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T13:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353884"
}
```



---

archive/issue_events_353885.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T13:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353885"
}
```



---

archive/issue_events_353886.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T13:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353886"
}
```



---

archive/issue_events_353887.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T13:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353887"
}
```



---

archive/issue_comments_396607.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just discovered #24718. This seems to be related/a duplicate. But that ticket seems to do some more unrelated stuff and probably needs a rebase. No clue why that is still \"new\".",
    "created_at": "2018-07-11T17:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396607",
    "user": "https://github.com/timokau"
}
```

<div id="comment:3" align="right">comment:3</div>

I just discovered #24718. This seems to be related/a duplicate. But that ticket seems to do some more unrelated stuff and probably needs a rebase. No clue why that is still "new".



---

archive/issue_comments_396608.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIn any case, I would rather have 1 ticket for each issue (1 for GAP, one for the Cremona database).",
    "created_at": "2018-07-11T18:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396608",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

In any case, I would rather have 1 ticket for each issue (1 for GAP, one for the Cremona database).



---

archive/issue_comments_396609.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSure, I'll split it up.",
    "created_at": "2018-07-11T19:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396609",
    "user": "https://github.com/timokau"
}
```

<div id="comment:5" align="right">comment:5</div>

Sure, I'll split it up.



---

archive/issue_events_353888.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-11T19:38:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "title_is": "Move cremona db to features",
    "title_was": "Move gap_packages and cremona db to features",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353888"
}
```



---

archive/issue_comments_396610.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d\"><code>ca701d9</code></a></td><td><code>Replace gap package checks with features</code></td></tr></table>\n",
    "created_at": "2018-07-11T19:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396610",
    "user": "https://github.com/timokau"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d"><code>ca701d9</code></a></td><td><code>Replace gap package checks with features</code></td></tr></table>




---

archive/issue_comments_396611.json:
```json
{
    "body": "Changed branch from **[u/gh-timokau/use-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/use-features)** to **[u/gh-timokau/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/cremona-db-features)**",
    "created_at": "2018-07-11T19:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396611",
    "user": "https://github.com/timokau"
}
```

Changed branch from **[u/gh-timokau/use-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/use-features)** to **[u/gh-timokau/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/cremona-db-features)**



---

archive/issue_comments_396612.json:
```json
{
    "body": "Changed commit from **[`c13f429`](https://github.com/sagemath/sagetrac-mirror/commit/c13f429ac3074315020d5d0415baa72dca9362b2)** to **[`ca701d9`](https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d)**",
    "created_at": "2018-07-11T19:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396612",
    "user": "https://github.com/timokau"
}
```

Changed commit from **[`c13f429`](https://github.com/sagemath/sagetrac-mirror/commit/c13f429ac3074315020d5d0415baa72dca9362b2)** to **[`ca701d9`](https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d)**



---

archive/issue_comments_396613.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0\"><code>1030350</code></a></td><td><code>Replace remona db checks with features</code></td></tr></table>\n",
    "created_at": "2018-07-11T19:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0"><code>1030350</code></a></td><td><code>Replace remona db checks with features</code></td></tr></table>




---

archive/issue_comments_396614.json:
```json
{
    "body": "Changed commit from **[`ca701d9`](https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d)** to **[`1030350`](https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0)**",
    "created_at": "2018-07-11T19:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396614",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca701d9`](https://github.com/sagemath/sagetrac-mirror/commit/ca701d9a4ba3ed65338bc75095a2fa07ecb11b8d)** to **[`1030350`](https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0)**



---

archive/issue_comments_396615.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This continues the work in #20382. After this patch is applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension`.\n+This continues the work in #20382. After this patch and #25835 are applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension` (#25828).\n \n To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.\n \n``````\n",
    "created_at": "2018-07-11T19:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396615",
    "user": "https://github.com/timokau"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This continues the work in #20382. After this patch is applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension`.
+This continues the work in #20382. After this patch and #25835 are applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension` (#25828).
 
 To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.
 
``````




---

archive/issue_comments_396616.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSplit to this and #25835.",
    "created_at": "2018-07-11T19:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396616",
    "user": "https://github.com/timokau"
}
```

<div id="comment:8" align="right">comment:8</div>

Split to this and #25835.



---

archive/issue_comments_396617.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAs I mentioned on #24718: We should also use the database location discovered by the feature check instead of hardcoding it. In other words: there should be a single source for the database location.",
    "created_at": "2018-07-11T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396617",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

As I mentioned on #24718: We should also use the database location discovered by the feature check instead of hardcoding it. In other words: there should be a single source for the database location.



---

archive/issue_events_353889.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-11T21:43:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353889"
}
```



---

archive/issue_events_353890.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-11T21:43:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353890"
}
```



---

archive/issue_comments_396618.json:
```json
{
    "body": "Dependencies: **#25309**",
    "created_at": "2018-07-11T21:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396618",
    "user": "https://github.com/timokau"
}
```

Dependencies: **#25309**



---

archive/issue_comments_396619.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWhat do you mean by \"discover\"? It looks to me like the path to the database is just as hardcoded in the feature. Am I reading that wrong?\n\nThat should probably use the environment variable I introduced in #25309 though. So that'll have to be merged first.",
    "created_at": "2018-07-11T21:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396619",
    "user": "https://github.com/timokau"
}
```

<div id="comment:10" align="right">comment:10</div>

What do you mean by "discover"? It looks to me like the path to the database is just as hardcoded in the feature. Am I reading that wrong?

That should probably use the environment variable I introduced in #25309 though. So that'll have to be merged first.



---

archive/issue_comments_396620.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@timokau](#comment%3A10):\n> It looks to me like the path to the database is just as hardcoded in the feature.\n\nYes, it's hardcoded in two different places which is bad design. There should be single source for it.",
    "created_at": "2018-07-11T22:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396620",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@timokau](#comment%3A10):
> It looks to me like the path to the database is just as hardcoded in the feature.

Yes, it's hardcoded in two different places which is bad design. There should be single source for it.



---

archive/issue_comments_396621.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI agree, I'll use the environment variable after #25309 is merged.",
    "created_at": "2018-07-11T22:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396621",
    "user": "https://github.com/timokau"
}
```

<div id="comment:12" align="right">comment:12</div>

I agree, I'll use the environment variable after #25309 is merged.



---

archive/issue_events_353891.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-06T11:40:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353891"
}
```



---

archive/issue_events_353892.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-06T11:40:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353892"
}
```



---

archive/issue_comments_396622.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a\"><code>e738ff5</code></a></td><td><code>Replace remona db checks with features</code></td></tr></table>\n",
    "created_at": "2018-08-06T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a"><code>e738ff5</code></a></td><td><code>Replace remona db checks with features</code></td></tr></table>




---

archive/issue_comments_396623.json:
```json
{
    "body": "Changed commit from **[`1030350`](https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0)** to **[`e738ff5`](https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a)**",
    "created_at": "2018-08-06T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396623",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1030350`](https://github.com/sagemath/sagetrac-mirror/commit/1030350ee9cfd5729fca07b55f6e941530ee9fb0)** to **[`e738ff5`](https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a)**



---

archive/issue_comments_396624.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAlright I'm using the proper environment variables now.",
    "created_at": "2018-08-06T12:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396624",
    "user": "https://github.com/timokau"
}
```

<div id="comment:15" align="right">comment:15</div>

Alright I'm using the proper environment variables now.



---

archive/issue_events_353893.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-06T12:20:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353893"
}
```



---

archive/issue_events_353894.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-06T12:20:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353894"
}
```



---

archive/issue_comments_396625.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nMy point was that you shouldn't use `CREMONA_MINI_DATA_DIR, CREMONA_LARGE_DATA_DIR` at all in the implementation, as the `Feature` already knows the filename.",
    "created_at": "2018-08-06T12:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396625",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

My point was that you shouldn't use `CREMONA_MINI_DATA_DIR, CREMONA_LARGE_DATA_DIR` at all in the implementation, as the `Feature` already knows the filename.



---

archive/issue_comments_396626.json:
```json
{
    "body": "Changed dependencies from **#25309** to none",
    "created_at": "2018-08-06T12:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396626",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#25309** to none



---

archive/issue_comments_396627.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYes the filename, but not the directory. How is it supposed to know that?",
    "created_at": "2018-08-06T13:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396627",
    "user": "https://github.com/timokau"
}
```

<div id="comment:17" align="right">comment:17</div>

Yes the filename, but not the directory. How is it supposed to know that?



---

archive/issue_comments_396628.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI guess you should ask the feature for the path and not import it independently, see `StaticFile.absolute_path()`.",
    "created_at": "2018-08-07T17:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396628",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:18" align="right">comment:18</div>

I guess you should ask the feature for the path and not import it independently, see `StaticFile.absolute_path()`.



---

archive/issue_comments_396629.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-08-07T17:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396629",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_events_353895.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-07T17:10:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353895"
}
```



---

archive/issue_events_353896.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-07T17:10:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353896"
}
```



---

archive/issue_events_353897.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T18:14:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353897"
}
```



---

archive/issue_events_353898.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T18:14:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353898"
}
```



---

archive/issue_comments_396630.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nBut how is the feature supposed to know the path?",
    "created_at": "2018-08-07T18:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396630",
    "user": "https://github.com/timokau"
}
```

<div id="comment:20" align="right">comment:20</div>

But how is the feature supposed to know the path?



---

archive/issue_comments_396631.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe features looks at `CREMONA_*_DATA_DIR`. The point is that this information is only in the feature and users of the feature should not look at these variables again, i.e., the feature's implementation can change and we do not have to update all the users.",
    "created_at": "2018-08-07T18:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396631",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:21" align="right">comment:21</div>

The features looks at `CREMONA_*_DATA_DIR`. The point is that this information is only in the feature and users of the feature should not look at these variables again, i.e., the feature's implementation can change and we do not have to update all the users.



---

archive/issue_comments_396632.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis is of course not so terribly important but it feels cleaner like that to me. (And closer to my idea of how features are supposed to work.)",
    "created_at": "2018-08-07T18:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396632",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

This is of course not so terribly important but it feels cleaner like that to me. (And closer to my idea of how features are supposed to work.)



---

archive/issue_comments_396633.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAh, that makes sense to me. Also would make it easier to switch out the ad-hoc environment variables for a `./configure` based system in the future. I thought Jeroen meant that I shouldn't use the environment variable at all.",
    "created_at": "2018-08-07T20:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396633",
    "user": "https://github.com/timokau"
}
```

<div id="comment:23" align="right">comment:23</div>

Ah, that makes sense to me. Also would make it easier to switch out the ad-hoc environment variables for a `./configure` based system in the future. I thought Jeroen meant that I shouldn't use the environment variable at all.



---

archive/issue_events_353899.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T20:10:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353899"
}
```



---

archive/issue_events_353900.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T20:10:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353900"
}
```



---

archive/issue_comments_396634.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIn that case we'd still need `CREMONA_MINI_DATA_DIR` though, creating an assymetry. Should I change over anyways? Or make the two cremona databases mutually exclusive, always going through the feature and unifying the two env variables?",
    "created_at": "2018-08-07T20:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396634",
    "user": "https://github.com/timokau"
}
```

<div id="comment:24" align="right">comment:24</div>

In that case we'd still need `CREMONA_MINI_DATA_DIR` though, creating an assymetry. Should I change over anyways? Or make the two cremona databases mutually exclusive, always going through the feature and unifying the two env variables?



---

archive/issue_events_353901.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T20:17:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353901"
}
```



---

archive/issue_events_353902.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T20:17:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353902"
}
```



---

archive/issue_comments_396635.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nShouldn't both databases be features? Isn't the only difference that the mini one is a standard SPKG and the full one is optional?",
    "created_at": "2018-08-07T20:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396635",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:26" align="right">comment:26</div>

Shouldn't both databases be features? Isn't the only difference that the mini one is a standard SPKG and the full one is optional?



---

archive/issue_events_353903.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-07T20:32:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353903"
}
```



---

archive/issue_events_353904.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-07T20:32:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353904"
}
```



---

archive/issue_comments_396636.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYes, why would we use a feature to detect a standard package? Its always available by definition. Of course I would prefer to move more packages to `optional` and make sage more modular, but currently the mini db is standard.",
    "created_at": "2018-08-07T20:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396636",
    "user": "https://github.com/timokau"
}
```

<div id="comment:28" align="right">comment:28</div>

Yes, why would we use a feature to detect a standard package? Its always available by definition. Of course I would prefer to move more packages to `optional` and make sage more modular, but currently the mini db is standard.



---

archive/issue_comments_396637.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIt's a standard package in Sage-the-distribution but it still makes sense to use the feature infrastructure as it might make things easier for (us) packagers. Even if we always ship it we can rely on the features detecting the correct paths for things.",
    "created_at": "2018-08-07T21:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396637",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:29" align="right">comment:29</div>

It's a standard package in Sage-the-distribution but it still makes sense to use the feature infrastructure as it might make things easier for (us) packagers. Even if we always ship it we can rely on the features detecting the correct paths for things.



---

archive/issue_comments_396638.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI'm not sure if features are the right choice / intended for that use case. In general I think detecting time at runtime usually causes problems. Would that feature then only provide a path?\n\nCC'ing fbissey because this is related to #25309, which apparently created problems for him.",
    "created_at": "2018-08-07T21:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396638",
    "user": "https://github.com/timokau"
}
```

<div id="comment:30" align="right">comment:30</div>

I'm not sure if features are the right choice / intended for that use case. In general I think detecting time at runtime usually causes problems. Would that feature then only provide a path?

CC'ing fbissey because this is related to #25309, which apparently created problems for him.



---

archive/issue_comments_396639.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThanks for the concern but I am a proponent of using `features` more (been wanting to move to such thing for years), and the part of #25309 related to this ticket is fine by me.",
    "created_at": "2018-08-07T22:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396639",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

Thanks for the concern but I am a proponent of using `features` more (been wanting to move to such thing for years), and the part of #25309 related to this ticket is fine by me.



---

archive/issue_comments_396640.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI think it should be a feature in particular because we should not handle the large database differently from the mini database.\n\nThe feature would tell you whether the mini database is present (which must be true) and provide its path. I think for the cremona DBs that's all we need.",
    "created_at": "2018-08-07T22:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396640",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:32" align="right">comment:32</div>

I think it should be a feature in particular because we should not handle the large database differently from the mini database.

The feature would tell you whether the mini database is present (which must be true) and provide its path. I think for the cremona DBs that's all we need.



---

archive/issue_comments_396641.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAlright and what should we do if the database is not present?",
    "created_at": "2018-08-07T23:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396641",
    "user": "https://github.com/timokau"
}
```

<div id="comment:33" align="right">comment:33</div>

Alright and what should we do if the database is not present?



---

archive/issue_comments_396642.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFor the mini database: I would just ask for its `absolute_path()` which throws if it cannot find it. If that happens, I'd just let it throw. It won't happen on a properly configured setup. (and maybe add something like that as a comment in the code\u2026)\n\nDoes that make sense?",
    "created_at": "2018-08-09T00:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396642",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:34" align="right">comment:34</div>

For the mini database: I would just ask for its `absolute_path()` which throws if it cannot find it. If that happens, I'd just let it throw. It won't happen on a properly configured setup. (and maybe add something like that as a comment in the codeâ¦)

Does that make sense?



---

archive/issue_comments_396643.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nYeah that makes sense, I'll look into it.",
    "created_at": "2018-08-09T08:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396643",
    "user": "https://github.com/timokau"
}
```

<div id="comment:35" align="right">comment:35</div>

Yeah that makes sense, I'll look into it.



---

archive/issue_comments_396644.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nShould I then remove `CREMONA_{LARGE,MINI}_DATA_DIR` entirely from `env.py` and instead read the variable directly (with fallback) in the feature?\n\nThat would have the advantage that there would be only one way to get that information. Otherwise, it will be easy for future code to use the variable from `env.py` instead.\n\nBut there would be the disadvantage that it wouldn't be as easy anymore to figure out which variables can be set to configure locations.\n\n@kiwifb as you were involved with `env.py`, do you have an opinion about that?",
    "created_at": "2018-08-09T08:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396644",
    "user": "https://github.com/timokau"
}
```

<div id="comment:36" align="right">comment:36</div>

Should I then remove `CREMONA_{LARGE,MINI}_DATA_DIR` entirely from `env.py` and instead read the variable directly (with fallback) in the feature?

That would have the advantage that there would be only one way to get that information. Otherwise, it will be easy for future code to use the variable from `env.py` instead.

But there would be the disadvantage that it wouldn't be as easy anymore to figure out which variables can be set to configure locations.

@kiwifb as you were involved with `env.py`, do you have an opinion about that?



---

archive/issue_comments_396645.json:
```json
{
    "body": "Changed commit from **[`e738ff5`](https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a)** to **[`d48c27d`](https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e)**",
    "created_at": "2018-08-09T15:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e738ff5`](https://github.com/sagemath/sagetrac-mirror/commit/e738ff5a01ef1b8104ada6ee3e9c6072a809d87a)** to **[`d48c27d`](https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e)**



---

archive/issue_comments_396646.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e\"><code>d48c27d</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>\n",
    "created_at": "2018-08-09T15:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e"><code>d48c27d</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>




---

archive/issue_comments_396647.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1\"><code>2dfba45</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>\n",
    "created_at": "2018-08-09T15:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396647",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1"><code>2dfba45</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>




---

archive/issue_comments_396648.json:
```json
{
    "body": "Changed commit from **[`d48c27d`](https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e)** to **[`2dfba45`](https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1)**",
    "created_at": "2018-08-09T15:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396648",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d48c27d`](https://github.com/sagemath/sagetrac-mirror/commit/d48c27da1843bcfd3dafc4aaa8552b299c73e26e)** to **[`2dfba45`](https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1)**



---

archive/issue_comments_396649.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI added a mechanism to `StaticFile` that takes an environment variable as an override for `search_path`. It will then also notify the user of the existence of that search path when the file is not found. I like that solution even better than the `env.py` one.\n\nFor the record: I think `resolution()` should be refactored to return a list of lines for easier extensibility. The variable `resolution` should be removed because users can just override `resolution()` if they want to change the message. But that is out of scope of this ticket.\n\nAlso in the future I hope `search_path_override` could be replaced by a key in a configuration file instead of an env var.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1\"><code>2dfba45</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>\n",
    "created_at": "2018-08-09T15:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396649",
    "user": "https://github.com/timokau"
}
```

<div id="comment:39" align="right">comment:39</div>

I added a mechanism to `StaticFile` that takes an environment variable as an override for `search_path`. It will then also notify the user of the existence of that search path when the file is not found. I like that solution even better than the `env.py` one.

For the record: I think `resolution()` should be refactored to return a list of lines for easier extensibility. The variable `resolution` should be removed because users can just override `resolution()` if they want to change the message. But that is out of scope of this ticket.

Also in the future I hope `search_path_override` could be replaced by a key in a configuration file instead of an env var.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1"><code>2dfba45</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>




---

archive/issue_events_353905.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-09T15:51:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353905"
}
```



---

archive/issue_events_353906.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-09T15:51:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353906"
}
```



---

archive/issue_comments_396650.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThis appears to need some kind of rebasing.",
    "created_at": "2019-01-25T22:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396650",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

This appears to need some kind of rebasing.



---

archive/issue_events_353907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-15T10:20:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353907"
}
```



---

archive/issue_events_353908.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-15T10:20:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353908"
}
```



---

archive/issue_comments_396651.json:
```json
{
    "body": "Changed commit from **[`2dfba45`](https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1)** to **[`6851434`](https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e)**",
    "created_at": "2019-03-09T16:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2dfba45`](https://github.com/sagemath/sagetrac-mirror/commit/2dfba457e934a60536e663cde762a9184834d1c1)** to **[`6851434`](https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e)**



---

archive/issue_comments_396652.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65d9cd04235275fb6021d4408b26a087fa08b123\"><code>65d9cd0</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e\"><code>6851434</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>\n",
    "created_at": "2019-03-09T16:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65d9cd04235275fb6021d4408b26a087fa08b123"><code>65d9cd0</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e"><code>6851434</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>




---

archive/issue_comments_396653.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nRebased.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65d9cd04235275fb6021d4408b26a087fa08b123\"><code>65d9cd0</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e\"><code>6851434</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>\n",
    "created_at": "2019-03-09T16:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396653",
    "user": "https://github.com/timokau"
}
```

<div id="comment:43" align="right">comment:43</div>

Rebased.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65d9cd04235275fb6021d4408b26a087fa08b123"><code>65d9cd0</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e"><code>6851434</code></a></td><td><code>Get the cremona db path from the feature</code></td></tr></table>




---

archive/issue_comments_396654.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nAre there any outstanding issues with this ticket or should we put it back to positive review?",
    "created_at": "2019-03-17T22:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396654",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Are there any outstanding issues with this ticket or should we put it back to positive review?



---

archive/issue_comments_396655.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nFor consistency, I would prefer if the handling of environment variables would remain in `src/sage/env.py`. Right now, you're moving part of that to `src/sage/features/__init__.py`",
    "created_at": "2019-03-18T06:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396655",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

For consistency, I would prefer if the handling of environment variables would remain in `src/sage/env.py`. Right now, you're moving part of that to `src/sage/features/__init__.py`



---

archive/issue_comments_396656.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHow would you suggest we do that? I'm not convinced hard-coding a search path override variable for every feature would be a better solution, but if you prefer that I'll implement it.",
    "created_at": "2019-03-18T08:43:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396656",
    "user": "https://github.com/timokau"
}
```

<div id="comment:46" align="right">comment:46</div>

How would you suggest we do that? I'm not convinced hard-coding a search path override variable for every feature would be a better solution, but if you prefer that I'll implement it.



---

archive/issue_comments_396657.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nMaybe just use `search_path=[CREMONA_MINI_DATA_DIR]` in `src/sage/features/databases.py`? That wouldn't require any changes to the general feature framework.",
    "created_at": "2019-03-18T09:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396657",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Maybe just use `search_path=[CREMONA_MINI_DATA_DIR]` in `src/sage/features/databases.py`? That wouldn't require any changes to the general feature framework.



---

archive/issue_comments_396658.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nLet's try to finish this... I'm having a look at it now.",
    "created_at": "2019-04-30T08:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396658",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

Let's try to finish this... I'm having a look at it now.



---

archive/issue_comments_396659.json:
```json
{
    "body": "Changed branch from **[u/gh-timokau/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/cremona-db-features)** to **[u/jdemeyer/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cremona-db-features)**",
    "created_at": "2019-04-30T09:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396659",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/gh-timokau/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/cremona-db-features)** to **[u/jdemeyer/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cremona-db-features)**



---

archive/issue_comments_396660.json:
```json
{
    "body": "Changed author from **Timo Kaufmann** to **Timo Kaufmann, Jeroen Demeyer**",
    "created_at": "2019-04-30T10:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396660",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Timo Kaufmann** to **Timo Kaufmann, Jeroen Demeyer**



---

archive/issue_comments_396661.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/966639bfd70bf3e2d350936bf9528cb23d3a45a2\"><code>966639b</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bc329af5f5100923806f1e49f823db41c398666\"><code>2bc329a</code></a></td><td><code>Remove search_path_override</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/808cc7bc2a7c9b96c97c6afe4c88447a1f6696d2\"><code>808cc7b</code></a></td><td><code>Search for database in CREMONA_MINI_DATA_DIR and CREMONA_LARGE_DATA_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20a3ded9d44e8d5ddad82ed1340c86dc63189a0c\"><code>20a3ded</code></a></td><td><code>Deprecate set_global argument of CremonaDatabase</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce\"><code>2cf92e6</code></a></td><td><code>Clean up</code></td></tr></table>\n",
    "created_at": "2019-04-30T10:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396661",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/966639bfd70bf3e2d350936bf9528cb23d3a45a2"><code>966639b</code></a></td><td><code>Replace remona db checks with features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bc329af5f5100923806f1e49f823db41c398666"><code>2bc329a</code></a></td><td><code>Remove search_path_override</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/808cc7bc2a7c9b96c97c6afe4c88447a1f6696d2"><code>808cc7b</code></a></td><td><code>Search for database in CREMONA_MINI_DATA_DIR and CREMONA_LARGE_DATA_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20a3ded9d44e8d5ddad82ed1340c86dc63189a0c"><code>20a3ded</code></a></td><td><code>Deprecate set_global argument of CremonaDatabase</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce"><code>2cf92e6</code></a></td><td><code>Clean up</code></td></tr></table>




---

archive/issue_events_353909.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-04-30T10:07:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353909"
}
```



---

archive/issue_events_353910.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-04-30T10:07:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353910"
}
```



---

archive/issue_comments_396662.json:
```json
{
    "body": "Changed commit from **[`6851434`](https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e)** to **[`2cf92e6`](https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce)**",
    "created_at": "2019-04-30T10:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396662",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`6851434`](https://github.com/sagemath/sagetrac-mirror/commit/68514344d6f1b043b22742c25b05ffd9078e9b6e)** to **[`2cf92e6`](https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce)**



---

archive/issue_comments_396663.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nThe last 2 commits are not strictly needed, they are just cleaning stuff up. If a reviewer prefers to move that to a separate ticket, I'll do that.",
    "created_at": "2019-04-30T10:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396663",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

The last 2 commits are not strictly needed, they are just cleaning stuff up. If a reviewer prefers to move that to a separate ticket, I'll do that.



---

archive/issue_comments_396664.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI am just verifying the last two cleanup commits are good.",
    "created_at": "2019-04-30T11:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396664",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

I am just verifying the last two cleanup commits are good.



---

archive/issue_events_353911.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2019-07-15T20:54:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353911"
}
```



---

archive/issue_events_353912.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2019-07-15T20:54:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353912"
}
```



---

archive/issue_comments_396665.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nRebase needed",
    "created_at": "2019-07-15T20:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396665",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:53" align="right">comment:53</div>

Rebase needed



---

archive/issue_comments_396666.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cremona-db-features)** to **[u/arojas/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/cremona-db-features)**",
    "created_at": "2020-10-08T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396666",
    "user": "https://github.com/antonio-rojas"
}
```

Changed branch from **[u/jdemeyer/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cremona-db-features)** to **[u/arojas/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/cremona-db-features)**



---

archive/issue_comments_396667.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nLet's please try to get this finally in\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b7abb1b5d0055bcd95d0bbec683a2dadd4e49e7\"><code>6b7abb1</code></a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/25825/cremona-db-features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8\"><code>9c2dcb5</code></a></td><td><code>More flexible test for error message</code></td></tr></table>\n",
    "created_at": "2020-10-08T16:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396667",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:55" align="right">comment:55</div>

Let's please try to get this finally in

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b7abb1b5d0055bcd95d0bbec683a2dadd4e49e7"><code>6b7abb1</code></a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/25825/cremona-db-features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8"><code>9c2dcb5</code></a></td><td><code>More flexible test for error message</code></td></tr></table>




---

archive/issue_events_353913.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-10-08T16:02:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353913"
}
```



---

archive/issue_events_353914.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-10-08T16:02:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353914"
}
```



---

archive/issue_comments_396668.json:
```json
{
    "body": "Changed commit from **[`2cf92e6`](https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce)** to **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**",
    "created_at": "2020-10-08T16:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396668",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[`2cf92e6`](https://github.com/sagemath/sagetrac-mirror/commit/2cf92e67460e705901f66905c5bed47550de47ce)** to **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**



---

archive/issue_comments_396669.json:
```json
{
    "body": "Changed author from **Timo Kaufmann, Jeroen Demeyer** to **Timo Kaufmann, Jeroen Demeyer, Antonio Rojas**",
    "created_at": "2020-10-08T16:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396669",
    "user": "https://github.com/antonio-rojas"
}
```

Changed author from **Timo Kaufmann, Jeroen Demeyer** to **Timo Kaufmann, Jeroen Demeyer, Antonio Rojas**



---

archive/issue_comments_396670.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nTicket description needs updating",
    "created_at": "2020-10-08T16:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396670",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

Ticket description needs updating



---

archive/issue_comments_396671.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment%3A56):\n> Ticket description needs updating\n\nIs the `OptionalExtension` bit still relevant? I'm not familiar with the recent changes in that area.",
    "created_at": "2020-10-08T16:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396671",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment%3A56):
> Ticket description needs updating

Is the `OptionalExtension` bit still relevant? I'm not familiar with the recent changes in that area.



---

archive/issue_comments_396672.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nNo, the use of `OptionalExtension` has been eliminated. See https://wiki.sagemath.org/ReleaseTours/sage-9.2#For_developers:_Changes_to_the_build_system_of_sagelib",
    "created_at": "2020-10-08T16:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396672",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

No, the use of `OptionalExtension` has been eliminated. See https://wiki.sagemath.org/ReleaseTours/sage-9.2#For_developers:_Changes_to_the_build_system_of_sagelib



---

archive/issue_comments_396673.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-This continues the work in #20382. After this patch and #25835 are applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension` (#25828).\n+This continues the work in #20382 and #25835.\n \n To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.\n \n-After this I would propose to fix the usage in `OptionalExtension` (which seems to be a purely internal function just used for the build -- should be easy to fix) and then deprecate or remove `is_package_installed`.\n+After this I would propose to deprecate or remove `is_package_installed`.\n``````\n",
    "created_at": "2020-10-08T16:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396673",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-This continues the work in #20382. After this patch and #25835 are applied, only one usage of `is_package_installed` remains: The one in `OptionalExtension` (#25828).
+This continues the work in #20382 and #25835.
 
 To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.
 
-After this I would propose to fix the usage in `OptionalExtension` (which seems to be a purely internal function just used for the build -- should be easy to fix) and then deprecate or remove `is_package_installed`.
+After this I would propose to deprecate or remove `is_package_installed`.
``````




---

archive/issue_events_353915.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T16:29:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353915"
}
```



---

archive/issue_events_353916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T16:29:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353916"
}
```



---

archive/issue_events_353917.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T16:50:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353917"
}
```



---

archive/issue_events_353918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T16:50:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353918"
}
```



---

archive/issue_comments_396674.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth** to **Julian R\u00fcth, Matthias Koeppe**",
    "created_at": "2020-10-08T16:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396674",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Julian RÃ¼th** to **Julian RÃ¼th, Matthias Koeppe**



---

archive/issue_comments_396675.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.\n \n-After this I would propose to deprecate or remove `is_package_installed`.\n+Next steps in getting rid of `is_package_installed` etc.:\n+- #30746 `sage.doctest.control`: Replace use of `sage.misc.package.list_packages`\n+- #30747 Deprecate all of `sage.misc.package` except for `PackageNotFoundError`\n``````\n",
    "created_at": "2020-10-08T17:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396675",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 To test this I ran `./sage -t --optional=sage,gap_packages,database_cremona_ellcurve $( git diff --name-only HEAD~2 )`.
 
-After this I would propose to deprecate or remove `is_package_installed`.
+Next steps in getting rid of `is_package_installed` etc.:
+- #30746 `sage.doctest.control`: Replace use of `sage.misc.package.list_packages`
+- #30747 Deprecate all of `sage.misc.package` except for `PackageNotFoundError`
``````




---

archive/issue_events_353919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353919"
}
```



---

archive/issue_events_353920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353920"
}
```



---

archive/issue_comments_396676.json:
```json
{
    "body": "Changed branch from **[u/arojas/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/cremona-db-features)** to **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**",
    "created_at": "2020-10-31T18:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25825#issuecomment-396676",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/arojas/cremona-db-features](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/cremona-db-features)** to **[`9c2dcb5`](https://github.com/sagemath/sagetrac-mirror/commit/9c2dcb5badacc99f17e2c049ad51bf21589a8bc8)**



---

archive/issue_events_353921.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-31T18:07:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353921"
}
```



---

archive/issue_events_353922.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1bed401ee4285752f3a620291eebc736e9390646",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-10-31T18:07:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25825",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25825#event-353922"
}
```
