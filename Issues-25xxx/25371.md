# Issue 25371: py3: towards docbuild, more details

archive/issues_025134.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @tscrim @jm58660\n\nBranch: **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25371_\n\n",
    "closed_at": "2018-05-18T17:49:49Z",
    "created_at": "2018-05-16T09:25:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: towards docbuild, more details",
    "type": "issue",
    "updated_at": "2018-06-14T13:37:49Z",
    "url": "https://github.com/sagemath/sage/issues/25371",
    "user": "https://github.com/fchapoton"
}
```


CC:  @tscrim @jm58660

Branch: **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**

Reviewer: **Jeroen Demeyer**

Author: **Frédéric Chapoton**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/25371_





---

archive/issue_events_352654.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-16T09:25:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352654"
}
```



---

archive/issue_events_352655.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-16T09:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352655"
}
```



---

archive/issue_events_352656.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-16T09:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352656"
}
```



---

archive/issue_events_352657.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-16T09:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352657"
}
```



---

archive/issue_comments_388082.json:
```json
{
    "body": "Commit: **[`6685b17`](https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781)**",
    "created_at": "2018-05-16T09:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388082",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`6685b17`](https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781)**



---

archive/issue_comments_388083.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781\"><code>6685b17</code></a></td><td><code>py3: more details, towards docbuild</code></td></tr></table>\n",
    "created_at": "2018-05-16T09:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388083",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781"><code>6685b17</code></a></td><td><code>py3: more details, towards docbuild</code></td></tr></table>




---

archive/issue_comments_388084.json:
```json
{
    "body": "Branch: **[u/chapoton/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25371)**",
    "created_at": "2018-05-16T09:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388084",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25371)**



---

archive/issue_events_352658.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-16T09:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352658"
}
```



---

archive/issue_events_352659.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-16T15:06:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352659"
}
```



---

archive/issue_events_352660.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-16T15:06:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352660"
}
```



---

archive/issue_comments_388085.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat's wrong with\n\n```\nP = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])\n```",
    "created_at": "2018-05-16T15:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388085",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

What's wrong with

```
P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])
```



---

archive/issue_comments_388086.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\n```\n[dochtml] [plotting ] During handling of the above exception, another exception occurred:\n[dochtml] [plotting ] Traceback (most recent call last):\n[dochtml] [plotting ] File \"/home/chapoton/sage3/local/lib/python3.6/site-packages/matplotlib/sphinxext/plot_directive.py\", line 525, in run_code\n[dochtml] [plotting ] six.exec_(code, ns)\n[dochtml] [plotting ] File \"<string>\", line 1, in <module>\n[dochtml] [plotting ] File \"sage/symbolic/expression.pyx\", line 5721, in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:35714)\n[dochtml] [plotting ] File \"sage/symbolic/expression.pyx\", line 1073, in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9100)\n[dochtml] [plotting ] TypeError: unable to convert 20*pi + 1 to an integer\n```",
    "created_at": "2018-05-16T15:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388086",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>


```
[dochtml] [plotting ] During handling of the above exception, another exception occurred:
[dochtml] [plotting ] Traceback (most recent call last):
[dochtml] [plotting ] File "/home/chapoton/sage3/local/lib/python3.6/site-packages/matplotlib/sphinxext/plot_directive.py", line 525, in run_code
[dochtml] [plotting ] six.exec_(code, ns)
[dochtml] [plotting ] File "<string>", line 1, in <module>
[dochtml] [plotting ] File "sage/symbolic/expression.pyx", line 5721, in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:35714)
[dochtml] [plotting ] File "sage/symbolic/expression.pyx", line 1073, in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9100)
[dochtml] [plotting ] TypeError: unable to convert 20*pi + 1 to an integer
```



---

archive/issue_comments_388087.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWell, that's a genuine problem. Why shouldn't we no longer be allowed to use symbolic expressions in plots?",
    "created_at": "2018-05-17T10:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388087",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Well, that's a genuine problem. Why shouldn't we no longer be allowed to use symbolic expressions in plots?



---

archive/issue_comments_388088.json:
```json
{
    "body": "Changed branch from **[u/chapoton/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25371)** to **[u/jdemeyer/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25371)**",
    "created_at": "2018-05-17T10:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388088",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/chapoton/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25371)** to **[u/jdemeyer/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25371)**



---

archive/issue_comments_388089.json:
```json
{
    "body": "Changed commit from **[`6685b17`](https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781)** to **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**",
    "created_at": "2018-05-17T10:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388089",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`6685b17`](https://github.com/sagemath/sagetrac-mirror/commit/6685b1737d91b1810e5f8e5e0189cf5575c96781)** to **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**



---

archive/issue_comments_388090.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI reverted that because it tries to fix the doctest instead of the bug.\n\nThe other change gets positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f\"><code>a9abcc8</code></a></td><td><code>py3: more details, towards docbuild</code></td></tr></table>\n",
    "created_at": "2018-05-17T10:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388090",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I reverted that because it tries to fix the doctest instead of the bug.

The other change gets positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f"><code>a9abcc8</code></a></td><td><code>py3: more details, towards docbuild</code></td></tr></table>




---

archive/issue_events_352661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-17T10:15:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352661"
}
```



---

archive/issue_events_352662.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-17T10:15:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352662"
}
```



---

archive/issue_comments_388091.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2018-05-17T10:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388091",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_352663.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-18T17:49:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352663"
}
```



---

archive/issue_events_352664.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "02f281c1c0cac38b89a3a14d3307a2799f6de114",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-18T17:49:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25371#event-352664"
}
```



---

archive/issue_comments_388092.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25371)** to **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**",
    "created_at": "2018-05-18T17:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388092",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/25371](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25371)** to **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)**



---

archive/issue_comments_388093.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nJeroen, see your own comment here: [#24758 comment:2](https://github.com/sagemath/sage/issues/24758#comment:2)",
    "created_at": "2018-05-18T18:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388093",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Jeroen, see your own comment here: [#24758 comment:2](https://github.com/sagemath/sage/issues/24758#comment:2)



---

archive/issue_comments_388094.json:
```json
{
    "body": "Changed commit from **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)** to none",
    "created_at": "2018-05-18T18:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388094",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`a9abcc8`](https://github.com/sagemath/sagetrac-mirror/commit/a9abcc892862794aaf7bd7268aafec729053e08f)** to none



---

archive/issue_comments_388095.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnd the range behaviour itself is not working with python3. I do not think we should change that.\n\n```\nsage: list(range(20*pi+3))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9051)()\n\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.pyobject (build/cythonized/sage/symbolic/expression.cpp:6090)()\n\nTypeError: self must be a numeric expression\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-3c6188e69b81> in <module>()\n----> 1 list(range(Integer(20)*pi+Integer(3)))\n\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:35714)()\n\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9100)()\n\nTypeError: unable to convert 20*pi + 3 to an integer\n```",
    "created_at": "2018-05-28T06:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388095",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

And the range behaviour itself is not working with python3. I do not think we should change that.

```
sage: list(range(20*pi+3))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9051)()

/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.pyobject (build/cythonized/sage/symbolic/expression.cpp:6090)()

TypeError: self must be a numeric expression

During handling of the above exception, another exception occurred:

TypeError                                 Traceback (most recent call last)
<ipython-input-1-3c6188e69b81> in <module>()
----> 1 list(range(Integer(20)*pi+Integer(3)))

/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__index__ (build/cythonized/sage/symbolic/expression.cpp:35714)()

/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._integer_ (build/cythonized/sage/symbolic/expression.cpp:9100)()

TypeError: unable to convert 20*pi + 3 to an integer
```



---

archive/issue_comments_388096.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nJeroen, would you accept this change that you refused here (in another ticket):\n\n```patch\n-        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])\n+        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(floor(20*pi)+1)])\n```\nIt seems to me that there is no issue in sage, only the fact that python3 is more strict on what it accepts inside range.",
    "created_at": "2018-06-13T16:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388096",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Jeroen, would you accept this change that you refused here (in another ticket):

```patch
-        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])
+        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(floor(20*pi)+1)])
```
It seems to me that there is no issue in sage, only the fact that python3 is more strict on what it accepts inside range.



---

archive/issue_comments_388097.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@fchapoton](#comment:10):\n> Jeroen, would you accept this change that you refused here (in another ticket):\n> \n> ```patch\n> -        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])\n> +        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(floor(20*pi)+1)])\n> ```\n\nThat's not precisely the change that I rejected. You changed `20*pi` by `63` originally in multiple places.\n\nAnyway, let me figure out exactly what `range()` accepts on Python 2 and Python 3 and then I'll comment back.",
    "created_at": "2018-06-14T05:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388097",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@fchapoton](#comment:10):
> Jeroen, would you accept this change that you refused here (in another ticket):
> 
> ```patch
> -        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(0,20*pi+1)])
> +        P = sum([arrow2d((0,0), (cos(x*0.1),sin(x*0.1)), hue=x/(20*pi)) for x in range(floor(20*pi)+1)])
> ```

That's not precisely the change that I rejected. You changed `20*pi` by `63` originally in multiple places.

Anyway, let me figure out exactly what `range()` accepts on Python 2 and Python 3 and then I'll comment back.



---

archive/issue_comments_388098.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@fchapoton](#comment:10):\n> It seems to me that there is no issue in sage, only the fact that python3 is more strict on what it accepts inside range.\n\nI agree. Python 2 essentially replaces `range(foo)` by `range(int(foo))`. Python 3 requires an integer as argument to `range()`.",
    "created_at": "2018-06-14T08:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388098",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@fchapoton](#comment:10):
> It seems to me that there is no issue in sage, only the fact that python3 is more strict on what it accepts inside range.

I agree. Python 2 essentially replaces `range(foo)` by `range(int(foo))`. Python 3 requires an integer as argument to `range()`.



---

archive/issue_comments_388099.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOk. I have made the ticket in #25578",
    "created_at": "2018-06-14T13:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25371#issuecomment-388099",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Ok. I have made the ticket in #25578
