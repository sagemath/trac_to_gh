# Issue 25833: Upgrade to MathJax 3 and configure Sage

archive/issues_025596.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nMathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n\nThis will be done in three steps: \n\n- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n- Step 2: Provide mathjax spkg upgraded to MathJax3. \n- Step 3: Configure Sage to use MathJax3.\n\nThis ticket focuses on the Steps 2 and 3. \n\nTo install mathjax, you can download the tarball from a temporary URL:\n\n  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n\nand place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.\n\nWe can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n\n```\nexport SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n```\nbefore `make` online doc.\n\nRelated tickets:\n\n- #30296 System package information and spkg-configure for mathjax\n\n- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3\n\nDepends on #33763\n\nCC:  @antonio-rojas @egourgoulhon @embray @kiwifb @timokau @jdemeyer @jhpalmieri @kcrisman @miguelmarco @novoselt @haraldschilly @slel @sagetrac-tmonteil @vbraun @orlitzky\n\nComponent: **packages: standard**\n\nKeywords: **upgrade, mathjax**\n\nAuthor: **Tobias Diez, Kwankyu Lee**\n\nBranch: **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**\n\nReviewer: **Tobias Diez, Kwankyu Lee**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25833_\n\n",
    "closed_at": "2022-05-24T22:45:06Z",
    "created_at": "2018-07-11T18:57:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to MathJax 3 and configure Sage",
    "type": "issue",
    "updated_at": "2022-05-31T13:09:17Z",
    "url": "https://github.com/sagemath/sage/issues/25833",
    "user": "https://github.com/slel"
}
```
<div id="comment:0"></div>

Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).

This will be done in three steps: 

- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
- Step 2: Provide mathjax spkg upgraded to MathJax3. 
- Step 3: Configure Sage to use MathJax3.

This ticket focuses on the Steps 2 and 3. 

To install mathjax, you can download the tarball from a temporary URL:

  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing

and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.

We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do

```
export SAGE_DOCBUILD_OPTS="--use-cdns"
```
before `make` online doc.

Related tickets:

- #30296 System package information and spkg-configure for mathjax

- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3

Depends on #33763

CC:  @antonio-rojas @egourgoulhon @embray @kiwifb @timokau @jdemeyer @jhpalmieri @kcrisman @miguelmarco @novoselt @haraldschilly @slel @sagetrac-tmonteil @vbraun @orlitzky

Component: **packages: standard**

Keywords: **upgrade, mathjax**

Author: **Tobias Diez, Kwankyu Lee**

Branch: **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**

Reviewer: **Tobias Diez, Kwankyu Lee**

_Issue created by migration from https://trac.sagemath.org/ticket/25833_





---

archive/issue_events_354046.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354046"
}
```



---

archive/issue_events_354047.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354047"
}
```



---

archive/issue_events_354048.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354048"
}
```



---

archive/issue_events_354049.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354049"
}
```



---

archive/issue_comments_396860.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe second public beta release for MathJax v3 was released.\n\n- [announcement on the MathJax Users list](https://groups.google.com/d/topic/mathjax-users/tkGOgWJV2bM/discussion)\n\nThe announcement ends with this note:\n\n> MathJax v3 is in beta release. Do not use this in production,\n> but please test it and report issues on the MathJax v3 issue tracker!\n>\n>\n> We are continuing to add more functionality to version 3, and will be\n> releasing additional beta versions as new features become available.\n> So watch this site for more news to come!",
    "created_at": "2018-10-24T23:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396860",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

The second public beta release for MathJax v3 was released.

- [announcement on the MathJax Users list](https://groups.google.com/d/topic/mathjax-users/tkGOgWJV2bM/discussion)

The announcement ends with this note:

> MathJax v3 is in beta release. Do not use this in production,
> but please test it and report issues on the MathJax v3 issue tracker!
>
>
> We are continuing to add more functionality to version 3, and will be
> releasing additional beta versions as new features become available.
> So watch this site for more news to come!



---

archive/issue_comments_396861.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDo you know how light it will be compared to https://katex.org/ ?",
    "created_at": "2018-10-25T08:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396861",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:2" align="right">comment:2</div>

Do you know how light it will be compared to https://katex.org/ ?



---

archive/issue_comments_396862.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@sagetrac-tmonteil](#comment%3A2):\n> Do you know how light it will be compared to https://katex.org/ ?\n\nNo. This might be a good question to ask on the [mathjax-users mailing list](https://groups.google.com/d/topic/mathjax-users/).\n\nMeanwhile the [third public beta for MathJax 3 was announced](https://groups.google.com/d/topic/mathjax-users/NmUrM3i9lNc/discussion) on 28 Nov 2018.",
    "created_at": "2018-12-14T17:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396862",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@sagetrac-tmonteil](#comment%3A2):
> Do you know how light it will be compared to https://katex.org/ ?

No. This might be a good question to ask on the [mathjax-users mailing list](https://groups.google.com/d/topic/mathjax-users/).

Meanwhile the [third public beta for MathJax 3 was announced](https://groups.google.com/d/topic/mathjax-users/NmUrM3i9lNc/discussion) on 28 Nov 2018.



---

archive/issue_comments_396863.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMathJax v3 beta.4 released 2019-05-21.",
    "created_at": "2019-05-24T04:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396863",
    "user": "https://github.com/slel"
}
```

<div id="comment:4" align="right">comment:4</div>

MathJax v3 beta.4 released 2019-05-21.



---

archive/issue_comments_396864.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMathJax 3.0.5 was released (2020-04).",
    "created_at": "2020-04-11T19:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396864",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

MathJax 3.0.5 was released (2020-04).



---

archive/issue_comments_396865.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-Mathjax v3 beta was released, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n \n``````\n",
    "created_at": "2020-04-11T19:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396865",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-Mathjax v3 beta was released, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
 
``````




---

archive/issue_comments_396866.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n \n+See also:\n+- #30296 - System package information and spkg-configure for mathjax\n+\n``````\n",
    "created_at": "2020-08-10T01:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396866",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
 
+See also:
+- #30296 - System package information and spkg-configure for mathjax
+
``````




---

archive/issue_comments_396867.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n \n See also:\n+\n - #30296 - System package information and spkg-configure for mathjax\n \n``````\n",
    "created_at": "2020-08-28T01:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396867",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
 
 See also:
+
 - #30296 - System package information and spkg-configure for mathjax
 
``````




---

archive/issue_comments_396868.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n+\n+This will be done in two steps: \n+\n+- The first step is to fix Sage to be compatible with MathJax3. \n+- The second step is to build Sage with MathJax3.\n+\n+This ticket focuses on the second step. The first step is done in #31517.\n \n See also:\n \n``````\n",
    "created_at": "2021-03-19T02:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396868",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
 Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
+
+This will be done in two steps: 
+
+- The first step is to fix Sage to be compatible with MathJax3. 
+- The second step is to build Sage with MathJax3.
+
+This ticket focuses on the second step. The first step is done in #31517.
 
 See also:
 
``````




---

archive/issue_comments_396869.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  See the discussion here:\n\nhttps://github.com/mathjax/MathJax/issues/2312#issuecomment-692695446\n\nE.g., \"So line breaking and other features will most likely have to wait until next year.\"  \"That's the reason why nearly nobody is using MathJax 3.\"   etc.\n\nI think this is very important to be aware of, and it's one reason why CoCalc doesn't use MathJax 3, and uses KaTeX by default.   For some applications automatic line breaking probably isn't so important, but it might be very important for Sage, due to people often printing out polynomials and big formulas.",
    "created_at": "2021-06-13T19:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396869",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:9" align="right">comment:9</div>

It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  See the discussion here:

https://github.com/mathjax/MathJax/issues/2312#issuecomment-692695446

E.g., "So line breaking and other features will most likely have to wait until next year."  "That's the reason why nearly nobody is using MathJax 3."   etc.

I think this is very important to be aware of, and it's one reason why CoCalc doesn't use MathJax 3, and uses KaTeX by default.   For some applications automatic line breaking probably isn't so important, but it might be very important for Sage, due to people often printing out polynomials and big formulas.



---

archive/issue_comments_396870.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@williamstein](#comment%3A9):\n> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  \n\nIt is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.",
    "created_at": "2021-06-14T01:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396870",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@williamstein](#comment%3A9):
> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  

It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.



---

archive/issue_comments_396871.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@kwankyu](#comment%3A10):\n> Replying to [@williamstein](#comment%3A9):\n> > It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  \n> \n> \n> It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.\n\nThanks.  Here's their plan regarding this issue: https://github.com/jupyterlab/jupyterlab/issues/7218#issuecomment-532146044",
    "created_at": "2021-06-14T02:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396871",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@kwankyu](#comment%3A10):
> Replying to [@williamstein](#comment%3A9):
> > It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  
> 
> 
> It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.

Thanks.  Here's their plan regarding this issue: https://github.com/jupyterlab/jupyterlab/issues/7218#issuecomment-532146044



---

archive/issue_comments_396872.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  See the discussion here:\n> \n\nThanks, William, I'll pass that on upstream to PreTeXt.",
    "created_at": "2021-06-14T11:47:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396872",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  See the discussion here:
> 

Thanks, William, I'll pass that on upstream to PreTeXt.



---

archive/issue_comments_396873.json:
```json
{
    "body": "Branch: **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)**",
    "created_at": "2022-04-07T04:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396873",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)**



---

archive/issue_comments_396874.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2022-04-07T04:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396874",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_396875.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f\"><code>46d0d69</code></a></td><td><code>Add sage package mathjax3</code></td></tr></table>\n",
    "created_at": "2022-04-07T04:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396875",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f"><code>46d0d69</code></a></td><td><code>Add sage package mathjax3</code></td></tr></table>




---

archive/issue_comments_396876.json:
```json
{
    "body": "Commit: **[`46d0d69`](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)**",
    "created_at": "2022-04-07T04:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396876",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`46d0d69`](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)**



---

archive/issue_comments_396877.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTo support #33600, I prepared a new package for mathjax3.\n\nI've never done creating a spkg before and don't understand everything about this business. So please help. This is a public branch!\n\nI used the mathjax2 spkg as a template, and managed to place a tarball in `upstream/` directory and install from it to `local/share/mathjax3` by `sage -i mathjax3`.",
    "created_at": "2022-04-07T05:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396877",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:15" align="right">comment:15</div>

To support #33600, I prepared a new package for mathjax3.

I've never done creating a spkg before and don't understand everything about this business. So please help. This is a public branch!

I used the mathjax2 spkg as a template, and managed to place a tarball in `upstream/` directory and install from it to `local/share/mathjax3` by `sage -i mathjax3`.



---

archive/issue_comments_396878.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d\"><code>6da197e</code></a></td><td><code>Remove garbage files</code></td></tr></table>\n",
    "created_at": "2022-04-07T05:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d"><code>6da197e</code></a></td><td><code>Remove garbage files</code></td></tr></table>




---

archive/issue_comments_396879.json:
```json
{
    "body": "Changed commit from **[`46d0d69`](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)** to **[`6da197e`](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)**",
    "created_at": "2022-04-07T05:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46d0d69`](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)** to **[`6da197e`](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)**



---

archive/issue_comments_396880.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFixed first mistake.",
    "created_at": "2022-04-07T05:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396880",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

Fixed first mistake.



---

archive/issue_comments_396881.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,14 @@\n-Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n \n-This will be done in two steps: \n+This will be done in three steps: \n \n-- The first step is to fix Sage to be compatible with MathJax3. \n-- The second step is to build Sage with MathJax3.\n+- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.\n+- Step 2: provide Mathjax3 spkg. \n+- Step 3: build Sage with MathJax3 #33600.\n \n-This ticket focuses on the second step. The first step is done in #31517.\n+This ticket focuses on the Step 2. \n \n-See also:\n+Related tickets:\n \n - #30296 - System package information and spkg-configure for mathjax\n \n``````\n",
    "created_at": "2022-04-07T05:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396881",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,14 @@
-Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
 
-This will be done in two steps: 
+This will be done in three steps: 
 
-- The first step is to fix Sage to be compatible with MathJax3. 
-- The second step is to build Sage with MathJax3.
+- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.
+- Step 2: provide Mathjax3 spkg. 
+- Step 3: build Sage with MathJax3 #33600.
 
-This ticket focuses on the second step. The first step is done in #31517.
+This ticket focuses on the Step 2. 
 
-See also:
+Related tickets:
 
 - #30296 - System package information and spkg-configure for mathjax
 
``````




---

archive/issue_comments_396882.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n+Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n \n This will be done in three steps: \n \n-- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.\n-- Step 2: provide Mathjax3 spkg. \n-- Step 3: build Sage with MathJax3 #33600.\n+- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n+- Step 2: Provide Mathjax3 spkg. \n+- Step 3: Build Sage with MathJax3 #33600.\n \n This ticket focuses on the Step 2. \n \n``````\n",
    "created_at": "2022-04-07T05:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396882",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
+Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
 
 This will be done in three steps: 
 
-- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.
-- Step 2: provide Mathjax3 spkg. 
-- Step 3: build Sage with MathJax3 #33600.
+- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
+- Step 2: Provide Mathjax3 spkg. 
+- Step 3: Build Sage with MathJax3 #33600.
 
 This ticket focuses on the Step 2. 
 
``````




---

archive/issue_comments_396883.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nTo the uninitiated (like me):\n\nFirst\n\n```\ncd build/pkgs/mathjax3/\nspkg-src \n``` \nto make the tarball `upstream/mathjax-3.2.0.tar.gz`.",
    "created_at": "2022-04-07T05:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396883",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:20" align="right">comment:20</div>

To the uninitiated (like me):

First

```
cd build/pkgs/mathjax3/
spkg-src 
``` 
to make the tarball `upstream/mathjax-3.2.0.tar.gz`.



---

archive/issue_comments_396884.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d\"><code>bd60742</code></a></td><td><code>Put into mathjax subdirectory</code></td></tr></table>\n",
    "created_at": "2022-04-07T07:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396884",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d"><code>bd60742</code></a></td><td><code>Put into mathjax subdirectory</code></td></tr></table>




---

archive/issue_comments_396885.json:
```json
{
    "body": "Changed commit from **[`6da197e`](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)** to **[`bd60742`](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)**",
    "created_at": "2022-04-07T07:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396885",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6da197e`](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)** to **[`bd60742`](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)**



---

archive/issue_comments_396886.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAfter installed, mathjax files are in `local/share/mathjax3/mathjax/...`. This is necessary to put mathjax files into `_static/mathjax/...` for sage documentation.",
    "created_at": "2022-04-07T07:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396886",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:22" align="right">comment:22</div>

After installed, mathjax files are in `local/share/mathjax3/mathjax/...`. This is necessary to put mathjax files into `_static/mathjax/...` for sage documentation.



---

archive/issue_comments_396887.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWhen it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)",
    "created_at": "2022-04-07T15:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396887",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)



---

archive/issue_comments_396888.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,20 @@\n \n This ticket focuses on the Step 2. \n \n+To make the tarball:\n+\n+Do\n+\n+```\n+cd build/pkgs/mathjax3/\n+spkg-src \n+``` \n+Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.\n+\n+Temporary URL to download the tarball:\n+\n+https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+\n Related tickets:\n \n - #30296 - System package information and spkg-configure for mathjax\n``````\n",
    "created_at": "2022-04-08T00:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396888",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,20 @@
 
 This ticket focuses on the Step 2. 
 
+To make the tarball:
+
+Do
+
+```
+cd build/pkgs/mathjax3/
+spkg-src 
+``` 
+Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.
+
+Temporary URL to download the tarball:
+
+https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+
 Related tickets:
 
 - #30296 - System package information and spkg-configure for mathjax
``````




---

archive/issue_events_354050.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T00:25:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354050"
}
```



---

archive/issue_events_354051.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T00:25:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354051"
}
```



---

archive/issue_comments_396889.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jhpalmieri](#comment%3A23):\n> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n\nRight. Presently the tarball is just a slight repackaging of the official mathjax3 distribution. Fortunately the size of the tarball (around 4.8Mb) is just slightly larger than our mathjax2 tarball. But they have plans to add more fonts to mathjax3 and then we would be forced to reduce the size by cutting unnecessary fonts from the distribution.",
    "created_at": "2022-04-08T00:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396889",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jhpalmieri](#comment%3A23):
> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)

Right. Presently the tarball is just a slight repackaging of the official mathjax3 distribution. Fortunately the size of the tarball (around 4.8Mb) is just slightly larger than our mathjax2 tarball. But they have plans to add more fonts to mathjax3 and then we would be forced to reduce the size by cutting unnecessary fonts from the distribution.



---

archive/issue_comments_396890.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDo we need a sage-devel discussion to add mathjax3 as a standard spkg?",
    "created_at": "2022-04-08T00:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396890",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:27" align="right">comment:27</div>

Do we need a sage-devel discussion to add mathjax3 as a standard spkg?



---

archive/issue_comments_396891.json:
```json
{
    "body": "Changed commit from **[`bd60742`](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)** to **[`5b47d22`](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)**",
    "created_at": "2022-04-08T01:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd60742`](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)** to **[`5b47d22`](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)**



---

archive/issue_comments_396892.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244\"><code>5b47d22</code></a></td><td><code>Fix checksums</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396892",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244"><code>5b47d22</code></a></td><td><code>Fix checksums</code></td></tr></table>




---

archive/issue_comments_396893.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,16 +8,6 @@\n \n This ticket focuses on the Step 2. \n \n-To make the tarball:\n-\n-Do\n-\n-```\n-cd build/pkgs/mathjax3/\n-spkg-src \n-``` \n-Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.\n-\n Temporary URL to download the tarball:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n``````\n",
    "created_at": "2022-04-08T01:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396893",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,16 +8,6 @@
 
 This ticket focuses on the Step 2. 
 
-To make the tarball:
-
-Do
-
-```
-cd build/pkgs/mathjax3/
-spkg-src 
-``` 
-Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.
-
 Temporary URL to download the tarball:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
``````




---

archive/issue_comments_396894.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,11 @@\n \n This ticket focuses on the Step 2. \n \n-Temporary URL to download the tarball:\n+To install mathjax3, download the tarball from a temporary URL:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+\n+and place the tarball in `upstream/`, and do `sage -i mathjax3`.\n \n Related tickets:\n \n``````\n",
    "created_at": "2022-04-08T01:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396894",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,11 @@
 
 This ticket focuses on the Step 2. 
 
-Temporary URL to download the tarball:
+To install mathjax3, download the tarball from a temporary URL:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+
+and place the tarball in `upstream/`, and do `sage -i mathjax3`.
 
 Related tickets:
 
``````




---

archive/issue_comments_396895.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@kwankyu](#comment%3A27):\n> Do we need a sage-devel discussion to add mathjax3 as a standard spkg?\n\nI thought of adding mathjax3 side by side with mathjax(2). But it seems that we don't need to keep mathjax(2) once we have mathjax3 in sage.\n\nSo now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...",
    "created_at": "2022-04-08T07:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396895",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@kwankyu](#comment%3A27):
> Do we need a sage-devel discussion to add mathjax3 as a standard spkg?

I thought of adding mathjax3 side by side with mathjax(2). But it seems that we don't need to keep mathjax(2) once we have mathjax3 in sage.

So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...



---

archive/issue_comments_396896.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,16 +3,16 @@\n This will be done in three steps: \n \n - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n-- Step 2: Provide Mathjax3 spkg. \n+- Step 2: Provide mathjax spkg upgraded to MathJax3. \n - Step 3: Build Sage with MathJax3 #33600.\n \n This ticket focuses on the Step 2. \n \n-To install mathjax3, download the tarball from a temporary URL:\n+To install mathjax, download the tarball from a temporary URL:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n \n-and place the tarball in `upstream/`, and do `sage -i mathjax3`.\n+and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n Related tickets:\n \n``````\n",
    "created_at": "2022-04-08T12:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396896",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,16 +3,16 @@
 This will be done in three steps: 
 
 - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
-- Step 2: Provide Mathjax3 spkg. 
+- Step 2: Provide mathjax spkg upgraded to MathJax3. 
 - Step 3: Build Sage with MathJax3 #33600.
 
 This ticket focuses on the Step 2. 
 
-To install mathjax3, download the tarball from a temporary URL:
+To install mathjax, download the tarball from a temporary URL:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
 
-and place the tarball in `upstream/`, and do `sage -i mathjax3`.
+and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
 Related tickets:
 
``````




---

archive/issue_comments_396897.json:
```json
{
    "body": "Changed commit from **[`5b47d22`](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)** to **[`8df9661`](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)**",
    "created_at": "2022-04-08T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396897",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5b47d22`](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)** to **[`8df9661`](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)**



---

archive/issue_comments_396898.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557\"><code>8df9661</code></a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr></table>\n",
    "created_at": "2022-04-08T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396898",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557"><code>8df9661</code></a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr></table>




---

archive/issue_comments_396899.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kwankyu](#comment%3A31):\n> \n> So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...\n\nWhat about the line breaking issue pointed out in [comment:9](#comment%3A9) ?",
    "created_at": "2022-04-08T14:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396899",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kwankyu](#comment%3A31):
> 
> So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...

What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?



---

archive/issue_comments_396900.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@egourgoulhon](#comment%3A34):\n> Replying to [@kwankyu](#comment%3A31):\n> > \n> > So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...\n> \n> \n> What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?\n\nAs I understand it, it is only relevant with the mathjax used with jupyter.\n\nPresently the mathjax used by Sphinx for sage documentation is different from the mathjax used by jupyter. So we don't need to worry about the issue.",
    "created_at": "2022-04-08T14:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396900",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@egourgoulhon](#comment%3A34):
> Replying to [@kwankyu](#comment%3A31):
> > 
> > So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...
> 
> 
> What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?

As I understand it, it is only relevant with the mathjax used with jupyter.

Presently the mathjax used by Sphinx for sage documentation is different from the mathjax used by jupyter. So we don't need to worry about the issue.



---

archive/issue_comments_396901.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIsn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).",
    "created_at": "2022-04-08T18:30:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396901",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:36" align="right">comment:36</div>

Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).



---

archive/issue_comments_396902.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@tobiasdiez](#comment%3A36):\n> Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).\n\nIt is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.",
    "created_at": "2022-04-08T23:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396902",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@tobiasdiez](#comment%3A36):
> Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).

It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.



---

archive/issue_comments_396903.json:
```json
{
    "body": "Changed commit from **[`8df9661`](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)** to **[`d15d201`](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)**",
    "created_at": "2022-04-08T23:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8df9661`](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)** to **[`d15d201`](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)**



---

archive/issue_comments_396904.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1\"><code>d15d201</code></a></td><td><code>Minor edits in spkg-src</code></td></tr></table>\n",
    "created_at": "2022-04-08T23:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396904",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1"><code>d15d201</code></a></td><td><code>Minor edits in spkg-src</code></td></tr></table>




---

archive/issue_comments_396905.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8\"><code>a8d8d55</code></a></td><td><code>Upgrade to MathJax3</code></td></tr></table>\n",
    "created_at": "2022-04-08T23:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8"><code>a8d8d55</code></a></td><td><code>Upgrade to MathJax3</code></td></tr></table>




---

archive/issue_comments_396906.json:
```json
{
    "body": "Changed commit from **[`d15d201`](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)** to **[`a8d8d55`](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)**",
    "created_at": "2022-04-08T23:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d15d201`](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)** to **[`a8d8d55`](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)**



---

archive/issue_comments_396907.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,9 +4,9 @@\n \n - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n - Step 2: Provide mathjax spkg upgraded to MathJax3. \n-- Step 3: Build Sage with MathJax3 #33600.\n+- Step 3: Configure Sage to use MathJax3.\n \n-This ticket focuses on the Step 2. \n+This ticket focuses on the Steps 2 and 3. \n \n To install mathjax, download the tarball from a temporary URL:\n \n``````\n",
    "created_at": "2022-04-08T23:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396907",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,9 +4,9 @@
 
 - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
 - Step 2: Provide mathjax spkg upgraded to MathJax3. 
-- Step 3: Build Sage with MathJax3 #33600.
+- Step 3: Configure Sage to use MathJax3.
 
-This ticket focuses on the Step 2. 
+This ticket focuses on the Steps 2 and 3. 
 
 To install mathjax, download the tarball from a temporary URL:
 
``````




---

archive/issue_comments_396908.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAfter a discussion in #33600 (Configure mathjax in sphinx config and upgrade to Mathjax v3), we decided to merge both tickets to here.",
    "created_at": "2022-04-08T23:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396908",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:40" align="right">comment:40</div>

After a discussion in #33600 (Configure mathjax in sphinx config and upgrade to Mathjax v3), we decided to merge both tickets to here.



---

archive/issue_events_354052.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-09T01:40:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "title_is": "Upgrade to MathJax 3 and configure Sage",
    "title_was": "Upgrade to MathJax 3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354052"
}
```



---

archive/issue_comments_396909.json:
```json
{
    "body": "Changed author from **Kwankyu Lee** to **Tobias Diez, Kwankyu Lee**",
    "created_at": "2022-04-09T01:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396909",
    "user": "https://github.com/kwankyu"
}
```

Changed author from **Kwankyu Lee** to **Tobias Diez, Kwankyu Lee**



---

archive/issue_comments_396910.json:
```json
{
    "body": "Changed commit from **[`a8d8d55`](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)** to **[`81b6836`](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)**",
    "created_at": "2022-04-09T02:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396910",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a8d8d55`](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)** to **[`81b6836`](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)**



---

archive/issue_comments_396911.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81\"><code>81b6836</code></a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr></table>\n",
    "created_at": "2022-04-09T02:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396911",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81"><code>81b6836</code></a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr></table>




---

archive/issue_comments_396912.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThe mathjax3 bug was also reported here: https://github.com/mathjax/MathJax/issues/2861",
    "created_at": "2022-04-09T02:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396912",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:44" align="right">comment:44</div>

The mathjax3 bug was also reported here: https://github.com/mathjax/MathJax/issues/2861



---

archive/issue_comments_396913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,5 +16,6 @@\n \n Related tickets:\n \n-- #30296 - System package information and spkg-configure for mathjax\n+- #30296 System package information and spkg-configure for mathjax\n \n+- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3\n``````\n",
    "created_at": "2022-04-09T02:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396913",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,5 +16,6 @@
 
 Related tickets:
 
-- #30296 - System package information and spkg-configure for mathjax
+- #30296 System package information and spkg-configure for mathjax
 
+- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3
``````




---

archive/issue_comments_396914.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,13 @@\n \n and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n+We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n+\n+```\n+export SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n+```\n+before `make` online doc.\n+\n Related tickets:\n \n - #30296 System package information and spkg-configure for mathjax\n``````\n",
    "created_at": "2022-04-09T11:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396914",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,13 @@
 
 and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
+We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do
+
+```
+export SAGE_DOCBUILD_OPTS="--use-cdns"
+```
+before `make` online doc.
+
 Related tickets:
 
 - #30296 System package information and spkg-configure for mathjax
``````




---

archive/issue_comments_396915.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@kwankyu](#comment%3A37):\n> Replying to [@tobiasdiez](#comment%3A36):\n> > Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).\n> \n> \n> It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.\n\nOkay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? This could then be easily extended to include other extensions etc if needed in the future.\n\nAlso I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.",
    "created_at": "2022-04-09T11:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396915",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@kwankyu](#comment%3A37):
> Replying to [@tobiasdiez](#comment%3A36):
> > Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).
> 
> 
> It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.

Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? This could then be easily extended to include other extensions etc if needed in the future.

Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.



---

archive/issue_comments_396916.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nOtherwise it looks good to me. Is there still something to do?",
    "created_at": "2022-04-09T11:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396916",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:48" align="right">comment:48</div>

Otherwise it looks good to me. Is there still something to do?



---

archive/issue_comments_396917.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8\"><code>9683648</code></a></td><td><code>Remove commented-out lines</code></td></tr></table>\n",
    "created_at": "2022-04-09T12:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396917",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8"><code>9683648</code></a></td><td><code>Remove commented-out lines</code></td></tr></table>




---

archive/issue_comments_396918.json:
```json
{
    "body": "Changed commit from **[`81b6836`](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)** to **[`9683648`](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)**",
    "created_at": "2022-04-09T12:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81b6836`](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)** to **[`9683648`](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)**



---

archive/issue_comments_396919.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@tobiasdiez](#comment%3A47):\n> Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? \n\nWhy do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.\n\n> This could then be easily extended to include other extensions etc if needed in the future.\n\nIt would be \"easy\" only if all mathjax files are already in `local/share/mathjax`. The size of this directory only slightly increases with this ticket.\n\n> Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.\n\nOkay. Done.",
    "created_at": "2022-04-09T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396919",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@tobiasdiez](#comment%3A47):
> Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? 

Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.

> This could then be easily extended to include other extensions etc if needed in the future.

It would be "easy" only if all mathjax files are already in `local/share/mathjax`. The size of this directory only slightly increases with this ticket.

> Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.

Okay. Done.



---

archive/issue_comments_396920.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@tobiasdiez](#comment%3A48):\n> Otherwise it looks good to me. Is there still something to do?\n\nPerhaps no. But before we go to \"needs review\", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.",
    "created_at": "2022-04-09T12:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396920",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@tobiasdiez](#comment%3A48):
> Otherwise it looks good to me. Is there still something to do?

Perhaps no. But before we go to "needs review", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.



---

archive/issue_comments_396921.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@kwankyu](#comment%3A50):\n> Replying to [@tobiasdiez](#comment%3A47):\n> > Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? \n> \n> \n> Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.\n\nMainly for clarity, because then in sage_share/mathjax there are only files that are also actually used. But it's not a big issue.\n\n> > Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.\n> \n> \n> Okay. Done.\n\nThanks!",
    "created_at": "2022-04-09T19:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396921",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@kwankyu](#comment%3A50):
> Replying to [@tobiasdiez](#comment%3A47):
> > Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? 
> 
> 
> Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.

Mainly for clarity, because then in sage_share/mathjax there are only files that are also actually used. But it's not a big issue.

> > Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.
> 
> 
> Okay. Done.

Thanks!



---

archive/issue_comments_396922.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@kwankyu](#comment%3A51):\n> Replying to [@tobiasdiez](#comment%3A48):\n> > Otherwise it looks good to me. Is there still something to do?\n> \n> \n> Perhaps no. But before we go to \"needs review\", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.\n\nSure!\nThe documentation workflow on github fails with this ticket since the mathjax tar cannot be downloaded. Is this to be expected? Should/can the script not fallback to get mathjax from github instead of trying to download it from mirrors?",
    "created_at": "2022-04-09T19:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396922",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@kwankyu](#comment%3A51):
> Replying to [@tobiasdiez](#comment%3A48):
> > Otherwise it looks good to me. Is there still something to do?
> 
> 
> Perhaps no. But before we go to "needs review", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.

Sure!
The documentation workflow on github fails with this ticket since the mathjax tar cannot be downloaded. Is this to be expected? Should/can the script not fallback to get mathjax from github instead of trying to download it from mirrors?



---

archive/issue_comments_396923.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@jhpalmieri](#comment%3A23):\n> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n\nThe temporary URL should be put in checksums.ini, then all the automated tools will work.",
    "created_at": "2022-04-09T20:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396923",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@jhpalmieri](#comment%3A23):
> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)

The temporary URL should be put in checksums.ini, then all the automated tools will work.



---

archive/issue_comments_396924.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n To install mathjax, download the tarball from a temporary URL:\n \n-https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n \n and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n``````\n",
    "created_at": "2022-04-10T00:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396924",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 To install mathjax, download the tarball from a temporary URL:
 
-https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing
 
 and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
``````




---

archive/issue_comments_396925.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@mkoeppe](#comment%3A54):\n> Replying to [@jhpalmieri](#comment%3A23):\n> > When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n> \n> \n> The temporary URL should be put in checksums.ini, then all the automated tools will work.\n\nIn fact, that doesn't work (with me). Perhaps because Google Drive is not an ftp server...",
    "created_at": "2022-04-10T09:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396925",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@mkoeppe](#comment%3A54):
> Replying to [@jhpalmieri](#comment%3A23):
> > When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)
> 
> 
> The temporary URL should be put in checksums.ini, then all the automated tools will work.

In fact, that doesn't work (with me). Perhaps because Google Drive is not an ftp server...



---

archive/issue_comments_396926.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nIf the file is not too big, you can attach it to this ticket and use the resulting URL instead.",
    "created_at": "2022-04-10T21:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396926",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

If the file is not too big, you can attach it to this ticket and use the resulting URL instead.



---

archive/issue_comments_396927.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nAttachment: **[mathjax-3.2.0.tar.gz](https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9\"><code>1e24916</code></a></td><td><code>Add upstream_url</code></td></tr></table>\n",
    "created_at": "2022-04-11T00:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396927",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59" align="right">comment:59</div>

Attachment: **[mathjax-3.2.0.tar.gz](https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9"><code>1e24916</code></a></td><td><code>Add upstream_url</code></td></tr></table>




---

archive/issue_comments_396928.json:
```json
{
    "body": "Changed commit from **[`9683648`](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)** to **[`1e24916`](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)**",
    "created_at": "2022-04-11T00:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396928",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9683648`](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)** to **[`1e24916`](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)**



---

archive/issue_comments_396929.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@mkoeppe](#comment%3A58):\n> If the file is not too big, \n\nI am not sure how big is \"too big\".\n\n> you can attach it to this ticket and use the resulting URL instead. \n\nAnyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?",
    "created_at": "2022-04-11T00:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396929",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@mkoeppe](#comment%3A58):
> If the file is not too big, 

I am not sure how big is "too big".

> you can attach it to this ticket and use the resulting URL instead. 

Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?



---

archive/issue_comments_396930.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@kwankyu](#comment%3A60):\n> Replying to [@mkoeppe](#comment%3A58):\n> > If the file is not too big, \n> \n> \n> I am not sure how big is \"too big\".\n\nIt worked, so it was not too big",
    "created_at": "2022-04-11T00:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396930",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@kwankyu](#comment%3A60):
> Replying to [@mkoeppe](#comment%3A58):
> > If the file is not too big, 
> 
> 
> I am not sure how big is "too big".

It worked, so it was not too big



---

archive/issue_comments_396931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,11 +8,11 @@\n \n This ticket focuses on the Steps 2 and 3. \n \n-To install mathjax, download the tarball from a temporary URL:\n+To install mathjax, you can download the tarball from a temporary URL:\n \n   https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n \n-and place the tarball in `upstream/`, and do `sage -i mathjax`.\n+and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.\n \n We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n \n``````\n",
    "created_at": "2022-04-11T00:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396931",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,11 +8,11 @@
 
 This ticket focuses on the Steps 2 and 3. 
 
-To install mathjax, download the tarball from a temporary URL:
+To install mathjax, you can download the tarball from a temporary URL:
 
   https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing
 
-and place the tarball in `upstream/`, and do `sage -i mathjax`.
+and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.
 
 We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do
 
``````




---

archive/issue_comments_396932.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@kwankyu](#comment%3A60):\n> Replying to [@mkoeppe](#comment%3A58):\n> > If the file is not too big, \n> \n> \n> I am not sure how big is \"too big\".\n> \n> > you can attach it to this ticket and use the resulting URL instead. \n> \n> \n> Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?\n\nEither permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.",
    "created_at": "2022-04-11T00:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396932",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@kwankyu](#comment%3A60):
> Replying to [@mkoeppe](#comment%3A58):
> > If the file is not too big, 
> 
> 
> I am not sure how big is "too big".
> 
> > you can attach it to this ticket and use the resulting URL instead. 
> 
> 
> Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?

Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.



---

archive/issue_comments_396933.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThe github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true",
    "created_at": "2022-04-11T17:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396933",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:64" align="right">comment:64</div>

The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true



---

archive/issue_comments_396934.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@mkoeppe](#comment%3A63):\n> > Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?\n> \n> \n> Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.\n\nThat's good to know. Then I would not remove the `upstream_url` and the tarball attached.",
    "created_at": "2022-04-12T00:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396934",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@mkoeppe](#comment%3A63):
> > Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?
> 
> 
> Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.

That's good to know. Then I would not remove the `upstream_url` and the tarball attached.



---

archive/issue_comments_396935.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nWhile I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...",
    "created_at": "2022-04-12T10:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396935",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:66" align="right">comment:66</div>

While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...



---

archive/issue_comments_396936.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nWith MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,\n\n```\n$ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html\n    <script data-url_root=\"./\" id=\"documentation_options\" src=\"_static/documentation_options.js\"></script>\n    <script src=\"_static/jquery.js\"></script>\n    <script src=\"_static/underscore.js\"></script>\n    <script src=\"_static/doctools.js\"></script>\n    <script src=\"_static/thebelab-helper.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js\"></script>\n    <script src=\"https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js\"></script>\n    <script defer=\"defer\" src=\"_static/mathjax/tex-chtml.js\"></script>\n  <!-- <script src=\"_static/thebe.js\" type=\"text/javascript\"></script> -->\n  <!-- <script src=\"_static/thebe-sage.js\" type=\"text/javascript\"></script> -->\n```\n\nI don't know if those are related to this ticket, but I figured I'd mention it.",
    "created_at": "2022-04-13T20:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396936",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:67" align="right">comment:67</div>

With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,

```
$ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
  <!-- <script src="_static/thebe.js" type="text/javascript"></script> -->
  <!-- <script src="_static/thebe-sage.js" type="text/javascript"></script> -->
```

I don't know if those are related to this ticket, but I figured I'd mention it.



---

archive/issue_comments_396937.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@kwankyu](#comment%3A66):\n> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n\nIf you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).",
    "created_at": "2022-04-13T20:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396937",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@kwankyu](#comment%3A66):
> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...

If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).



---

archive/issue_comments_396938.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@orlitzky](#comment%3A67):\n> With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. \n\nGood. \n\n> One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,\n> \n> ```\n> $ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html\n>     <script data-url_root=\"./\" id=\"documentation_options\" src=\"_static/documentation_options.js\"></script>\n>     <script src=\"_static/jquery.js\"></script>\n>     <script src=\"_static/underscore.js\"></script>\n>     <script src=\"_static/doctools.js\"></script>\n>     <script src=\"_static/thebelab-helper.js\"></script>\n>     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js\"></script>\n>     <script src=\"https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js\"></script>\n>     <script defer=\"defer\" src=\"_static/mathjax/tex-chtml.js\"></script>\n>   <!-- <script src=\"_static/thebe.js\" type=\"text/javascript\"></script> -->\n>   <!-- <script src=\"_static/thebe-sage.js\" type=\"text/javascript\"></script> -->\n> ```\n> \n> I don't know if those are related to this ticket, but I figured I'd mention it.\n\nSee [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).",
    "created_at": "2022-04-14T00:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396938",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@orlitzky](#comment%3A67):
> With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. 

Good. 

> One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,
> 
> ```
> $ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html
>     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
>     <script src="_static/jquery.js"></script>
>     <script src="_static/underscore.js"></script>
>     <script src="_static/doctools.js"></script>
>     <script src="_static/thebelab-helper.js"></script>
>     <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
>     <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
>     <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
>   <!-- <script src="_static/thebe.js" type="text/javascript"></script> -->
>   <!-- <script src="_static/thebe-sage.js" type="text/javascript"></script> -->
> ```
> 
> I don't know if those are related to this ticket, but I figured I'd mention it.

See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).



---

archive/issue_comments_396939.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@tobiasdiez](#comment%3A68):\n> Replying to [@kwankyu](#comment%3A66):\n> > While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n> \n> \n> If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).\n\nI have no experience with github workflow, but I will see it. \n\nFor the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.",
    "created_at": "2022-04-14T00:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396939",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@tobiasdiez](#comment%3A68):
> Replying to [@kwankyu](#comment%3A66):
> > While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...
> 
> 
> If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).

I have no experience with github workflow, but I will see it. 

For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.



---

archive/issue_comments_396940.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@tobiasdiez](#comment%3A64):\n> The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true\n\nI don't know what is going on with github workflow, but I cannot find something like this in the log:\n\n```\n[mathjax-3.2.0] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mathjax/mathjax-3.2.0.tar.gz'\n[mathjax-3.2.0] Attempting to download from https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz\n[mathjax-3.2.0] [......................................................................]\n[mathjax-3.2.0] mathjax-3.2.0\n[mathjax-3.2.0] ====================================================\n[mathjax-3.2.0] Setting up build directory for mathjax-3.2.0\n[mathjax-3.2.0] Finished extraction\n[mathjax-3.2.0] No patch files found in ../patches\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] Host system:\n[mathjax-3.2.0] Darwin Hera.local 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64 x86_64\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] C compiler: gcc\n[mathjax-3.2.0] C compiler version:\n[mathjax-3.2.0] Apple clang version 13.1.6 (clang-1316.0.21.2.3)\n[mathjax-3.2.0] Target: x86_64-apple-darwin21.4.0\n[mathjax-3.2.0] Thread model: posix\n[mathjax-3.2.0] InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] Package 'mathjax' is currently not installed\n[mathjax-3.2.0] No legacy uninstaller found for 'mathjax'; nothing to do\n[mathjax-3.2.0] src/mathjax -> /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst/Users/kwankyu/GitHub/sage-dev/local/share/mathjax\n[mathjax-3.2.0] \n[mathjax-3.2.0] real\t0m0.117s\n[mathjax-3.2.0] user\t0m0.015s\n[mathjax-3.2.0] sys\t0m0.099s\n[mathjax-3.2.0] Copying package files from temporary location /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst to /Users/kwankyu/GitHub/sage-dev/local\n[mathjax-3.2.0] Successfully installed mathjax-3.2.0\n[mathjax-3.2.0] Deleting temporary build directory\n[mathjax-3.2.0] /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0\n[mathjax-3.2.0] Finished installing mathjax-3.2.0\n```",
    "created_at": "2022-04-14T02:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396940",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@tobiasdiez](#comment%3A64):
> The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true

I don't know what is going on with github workflow, but I cannot find something like this in the log:

```
[mathjax-3.2.0] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mathjax/mathjax-3.2.0.tar.gz'
[mathjax-3.2.0] Attempting to download from https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz
[mathjax-3.2.0] [......................................................................]
[mathjax-3.2.0] mathjax-3.2.0
[mathjax-3.2.0] ====================================================
[mathjax-3.2.0] Setting up build directory for mathjax-3.2.0
[mathjax-3.2.0] Finished extraction
[mathjax-3.2.0] No patch files found in ../patches
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] Host system:
[mathjax-3.2.0] Darwin Hera.local 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64 x86_64
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] C compiler: gcc
[mathjax-3.2.0] C compiler version:
[mathjax-3.2.0] Apple clang version 13.1.6 (clang-1316.0.21.2.3)
[mathjax-3.2.0] Target: x86_64-apple-darwin21.4.0
[mathjax-3.2.0] Thread model: posix
[mathjax-3.2.0] InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] Package 'mathjax' is currently not installed
[mathjax-3.2.0] No legacy uninstaller found for 'mathjax'; nothing to do
[mathjax-3.2.0] src/mathjax -> /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst/Users/kwankyu/GitHub/sage-dev/local/share/mathjax
[mathjax-3.2.0] 
[mathjax-3.2.0] real	0m0.117s
[mathjax-3.2.0] user	0m0.015s
[mathjax-3.2.0] sys	0m0.099s
[mathjax-3.2.0] Copying package files from temporary location /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst to /Users/kwankyu/GitHub/sage-dev/local
[mathjax-3.2.0] Successfully installed mathjax-3.2.0
[mathjax-3.2.0] Deleting temporary build directory
[mathjax-3.2.0] /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0
[mathjax-3.2.0] Finished installing mathjax-3.2.0
```



---

archive/issue_comments_396941.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nAh, you need `./configure --enable-download-from-upstream-url`.",
    "created_at": "2022-04-14T04:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396941",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:72" align="right">comment:72</div>

Ah, you need `./configure --enable-download-from-upstream-url`.



---

archive/issue_comments_396942.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96eb8b270eebf6f11c5e82340c050e4c959e9bbe\"><code>96eb8b2</code></a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d\"><code>aba583d</code></a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>\n",
    "created_at": "2022-04-14T07:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96eb8b270eebf6f11c5e82340c050e4c959e9bbe"><code>96eb8b2</code></a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d"><code>aba583d</code></a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>




---

archive/issue_comments_396943.json:
```json
{
    "body": "Changed commit from **[`1e24916`](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)** to **[`aba583d`](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)**",
    "created_at": "2022-04-14T07:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e24916`](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)** to **[`aba583d`](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)**



---

archive/issue_comments_396944.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThe last commit is to lessen flickering in the reference main page because of slow mathjax rendering.",
    "created_at": "2022-04-14T07:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396944",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:74" align="right">comment:74</div>

The last commit is to lessen flickering in the reference main page because of slow mathjax rendering.



---

archive/issue_events_354053.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-14T07:54:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354053"
}
```



---

archive/issue_comments_396945.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nIt seems there is nothing for us to do for a bit slow loading of mathjax3.\n\nLet's move on.",
    "created_at": "2022-04-14T07:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396945",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:75" align="right">comment:75</div>

It seems there is nothing for us to do for a bit slow loading of mathjax3.

Let's move on.



---

archive/issue_comments_396946.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@kwankyu](#comment%3A72):\n> Ah, you need `./configure --enable-download-from-upstream-url`.\n\nOkay! Matthias (and everyone else), would it make sense to add this flag to the github actions?",
    "created_at": "2022-04-14T17:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396946",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@kwankyu](#comment%3A72):
> Ah, you need `./configure --enable-download-from-upstream-url`.

Okay! Matthias (and everyone else), would it make sense to add this flag to the github actions?



---

archive/issue_comments_396947.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nYes, we already use it everywhere. Did we forget to add it in the ones that you added?",
    "created_at": "2022-04-14T17:51:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396947",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">comment:77</div>

Yes, we already use it everywhere. Did we forget to add it in the ones that you added?



---

archive/issue_comments_396948.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@mkoeppe](#comment%3A77):\n> Yes, we already use it everywhere. \n\nA patchbot also failed in the same way.",
    "created_at": "2022-04-15T07:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396948",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@mkoeppe](#comment%3A77):
> Yes, we already use it everywhere. 

A patchbot also failed in the same way.



---

archive/issue_comments_396949.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37\"><code>7b43a31</code></a></td><td><code>Add enable-download-from-upstream-url to github actions</code></td></tr></table>\n",
    "created_at": "2022-04-16T17:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396949",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37"><code>7b43a31</code></a></td><td><code>Add enable-download-from-upstream-url to github actions</code></td></tr></table>




---

archive/issue_comments_396950.json:
```json
{
    "body": "Changed commit from **[`aba583d`](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)** to **[`7b43a31`](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)**",
    "created_at": "2022-04-16T17:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aba583d`](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)** to **[`7b43a31`](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)**



---

archive/issue_comments_396951.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@mkoeppe](#comment%3A77):\n> Yes, we already use it everywhere. Did we forget to add it in the ones that you added?\n\nThanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).",
    "created_at": "2022-04-16T19:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396951",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@mkoeppe](#comment%3A77):
> Yes, we already use it everywhere. Did we forget to add it in the ones that you added?

Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).



---

archive/issue_comments_396952.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@kwankyu](#comment%3A66):\n> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n\nI cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.\n\n- Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n- Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html",
    "created_at": "2022-04-16T19:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396952",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@kwankyu](#comment%3A66):
> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...

I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.

- Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html
- Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html



---

archive/issue_comments_396953.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI'm fine with your changes! Thanks",
    "created_at": "2022-04-16T19:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396953",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:82" align="right">comment:82</div>

I'm fine with your changes! Thanks



---

archive/issue_comments_396954.json:
```json
{
    "body": "Reviewer: **Tobias Diez, ...**",
    "created_at": "2022-04-16T19:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396954",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez, ...**



---

archive/issue_comments_396955.json:
```json
{
    "body": "Dependencies: **#33724**",
    "created_at": "2022-04-16T19:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396955",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33724**



---

archive/issue_comments_396956.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@tobiasdiez](#comment%3A80):\n> Replying to [@mkoeppe](#comment%3A77):\n> > Yes, we already use it everywhere. Did we forget to add it in the ones that you added?\n> \n> \n> Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).\n\nI've cherry-picked this onto #33724.",
    "created_at": "2022-04-16T19:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396956",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@tobiasdiez](#comment%3A80):
> Replying to [@mkoeppe](#comment%3A77):
> > Yes, we already use it everywhere. Did we forget to add it in the ones that you added?
> 
> 
> Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).

I've cherry-picked this onto #33724.



---

archive/issue_comments_396957.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nOkay, thanks!",
    "created_at": "2022-04-16T21:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396957",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:85" align="right">comment:85</div>

Okay, thanks!



---

archive/issue_comments_396958.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Kwankyu Lee, ...**",
    "created_at": "2022-04-16T23:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396958",
    "user": "https://github.com/kwankyu"
}
```

Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Kwankyu Lee, ...**



---

archive/issue_comments_396959.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@tobiasdiez](#comment%3A81):\n> I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.\n> \n> - Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n> - Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n\nOkay. That seems depend.",
    "created_at": "2022-04-16T23:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396959",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@tobiasdiez](#comment%3A81):
> I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.
> 
> - Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html
> - Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html

Okay. That seems depend.



---

archive/issue_comments_396960.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@kwankyu](#comment%3A70):\n> For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.\n\nAccording to the answer, mathjax3 is not to blame if the performance issue is ever real. It's also not clear if the performance issue really exists. \n\nAs there is no other issue raised with the mathjax3 documentation, let's get this in.",
    "created_at": "2022-04-19T04:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396960",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@kwankyu](#comment%3A70):
> For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.

According to the answer, mathjax3 is not to blame if the performance issue is ever real. It's also not clear if the performance issue really exists. 

As there is no other issue raised with the mathjax3 documentation, let's get this in.



---

archive/issue_events_354054.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-19T04:59:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354054"
}
```



---

archive/issue_events_354055.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-19T04:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354055"
}
```



---

archive/issue_comments_396961.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, Kwankyu Lee, ...** to **Tobias Diez, Kwankyu Lee**",
    "created_at": "2022-04-19T04:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396961",
    "user": "https://github.com/kwankyu"
}
```

Changed reviewer from **Tobias Diez, Kwankyu Lee, ...** to **Tobias Diez, Kwankyu Lee**



---

archive/issue_comments_396962.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nThanks! \n\nFor the performance issues, there are a few things not related to mathjax that could be improved: https://pagespeed.web.dev/report?url=https%3A%2F%2F7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app%2Freference%2Fmanifolds%2Fsage%2Fmanifolds%2Fdifferentiable%2Fvectorfield.html\n\nNotably, the `require` script is quite expensive to load.",
    "created_at": "2022-04-20T19:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396962",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:88" align="right">comment:88</div>

Thanks! 

For the performance issues, there are a few things not related to mathjax that could be improved: https://pagespeed.web.dev/report?url=https%3A%2F%2F7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app%2Freference%2Fmanifolds%2Fsage%2Fmanifolds%2Fdifferentiable%2Fvectorfield.html

Notably, the `require` script is quite expensive to load.



---

archive/issue_comments_396963.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@tobiasdiez](#comment%3A88):\n> Notably, the `require` script is quite expensive to load.\n\nYes. I noticed that. See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).",
    "created_at": "2022-04-21T00:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396963",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@tobiasdiez](#comment%3A88):
> Notably, the `require` script is quite expensive to load.

Yes. I noticed that. See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).



---

archive/issue_comments_396964.json:
```json
{
    "body": "Changed dependencies from **#33724** to **#33763**",
    "created_at": "2022-04-29T02:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396964",
    "user": "https://github.com/kwankyu"
}
```

Changed dependencies from **#33724** to **#33763**



---

archive/issue_events_354056.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:12:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354056"
}
```



---

archive/issue_events_354057.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:12:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354057"
}
```



---

archive/issue_comments_396965.json:
```json
{
    "body": "<div id=\"comment:91\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85113706cfab44bd22842cc2825152d1510a4980\"><code>8511370</code></a></td><td><code>Refactor sage/docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b0fae47181138da11dd9cc01a9b1b8233ab4cdb\"><code>4b0fae4</code></a></td><td><code>Some obvious edits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6517de2d8c7f541c0614c7ec79b7446f9ab438bc\"><code>6517de2</code></a></td><td><code>More edits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a645fecaaf234635e31149cc61998302ed3998\"><code>d8a645f</code></a></td><td><code>Added instancedoc.py to sagemath-objects/MANIFEST.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b28eeace8e453b58562f05889d83b464e8aa420\"><code>8b28eea</code></a></td><td><code>Upgrade to MathJax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c34be8ebf5653143da5efaab98049babe3641fe3\"><code>c34be8e</code></a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0a5d39e7bdf9fe796580c54b00b3cb89133ea7d\"><code>e0a5d39</code></a></td><td><code>Remove commented-out lines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cd2b499a7155cf6037965abbdad594200efa634\"><code>1cd2b49</code></a></td><td><code>Add upstream_url</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1\"><code>a72a8e3</code></a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>\n",
    "created_at": "2022-04-29T02:25:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396965",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:91"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85113706cfab44bd22842cc2825152d1510a4980"><code>8511370</code></a></td><td><code>Refactor sage/docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b0fae47181138da11dd9cc01a9b1b8233ab4cdb"><code>4b0fae4</code></a></td><td><code>Some obvious edits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6517de2d8c7f541c0614c7ec79b7446f9ab438bc"><code>6517de2</code></a></td><td><code>More edits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a645fecaaf234635e31149cc61998302ed3998"><code>d8a645f</code></a></td><td><code>Added instancedoc.py to sagemath-objects/MANIFEST.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b28eeace8e453b58562f05889d83b464e8aa420"><code>8b28eea</code></a></td><td><code>Upgrade to MathJax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c34be8ebf5653143da5efaab98049babe3641fe3"><code>c34be8e</code></a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0a5d39e7bdf9fe796580c54b00b3cb89133ea7d"><code>e0a5d39</code></a></td><td><code>Remove commented-out lines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cd2b499a7155cf6037965abbdad594200efa634"><code>1cd2b49</code></a></td><td><code>Add upstream_url</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1"><code>a72a8e3</code></a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>




---

archive/issue_comments_396966.json:
```json
{
    "body": "Changed commit from **[`7b43a31`](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)** to **[`a72a8e3`](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)**",
    "created_at": "2022-04-29T02:25:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396966",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b43a31`](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)** to **[`a72a8e3`](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)**



---

archive/issue_events_354058.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354058"
}
```



---

archive/issue_events_354059.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354059"
}
```



---

archive/issue_comments_396967.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nRebased on the dependency #33763.",
    "created_at": "2022-04-29T02:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396967",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:92" align="right">comment:92</div>

Rebased on the dependency #33763.



---

archive/issue_comments_396968.json:
```json
{
    "body": "Changed commit from **[`a72a8e3`](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)** to **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**",
    "created_at": "2022-04-29T03:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396968",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a72a8e3`](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)** to **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**



---

archive/issue_comments_396969.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470\"><code>2535a91</code></a></td><td><code>Restore changes to conf.py</code></td></tr></table>\n",
    "created_at": "2022-04-29T03:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470"><code>2535a91</code></a></td><td><code>Restore changes to conf.py</code></td></tr></table>




---

archive/issue_comments_396970.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nThe dependency got positive review.",
    "created_at": "2022-04-29T18:06:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396970",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:94" align="right">comment:94</div>

The dependency got positive review.



---

archive/issue_events_354060.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T18:06:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354060"
}
```



---

archive/issue_events_354061.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T18:06:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354061"
}
```



---

archive/issue_comments_396971.json:
```json
{
    "body": "Changed branch from **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)** to **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**",
    "created_at": "2022-05-24T22:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396971",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)** to **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**



---

archive/issue_events_354062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-24T22:45:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354062"
}
```



---

archive/issue_events_354063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa3b529c41eb6f23544d4b33d566019f314a0921",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-24T22:45:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-354063"
}
```



---

archive/issue_comments_396972.json:
```json
{
    "body": "Changed commit from **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)** to none",
    "created_at": "2022-05-30T19:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396972",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[`2535a91`](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)** to none



---

archive/issue_comments_396973.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nWhy the double `mathjax/mathjax` subdir in the installation path? This looks weird and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)",
    "created_at": "2022-05-30T19:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396973",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:96" align="right">comment:96</div>

Why the double `mathjax/mathjax` subdir in the installation path? This looks weird and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)



---

archive/issue_comments_396974.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@antonio-rojas](#comment%3A96):\n> Why the double `mathjax/mathjax` subdir in the installation path? This looks weird \n\nIf I remember correctly, that was the result of wishing to put the (second) `mathjax` directory into `_static` so that all mathjax files are kept in `_static/mathjax` and not mixed with other static files (unlike the situation with mathjax2), while not touching the spkg installation procedure (specifically `build/pkgs/mathjax/spkg-install.in`). Hence the tarball of spkg `mathjax` consists of a single directory `mathjax`.\n\n> and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)\n\nI don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?\n\nIf they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure.",
    "created_at": "2022-05-31T00:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396974",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@antonio-rojas](#comment%3A96):
> Why the double `mathjax/mathjax` subdir in the installation path? This looks weird 

If I remember correctly, that was the result of wishing to put the (second) `mathjax` directory into `_static` so that all mathjax files are kept in `_static/mathjax` and not mixed with other static files (unlike the situation with mathjax2), while not touching the spkg installation procedure (specifically `build/pkgs/mathjax/spkg-install.in`). Hence the tarball of spkg `mathjax` consists of a single directory `mathjax`.

> and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)

I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?

If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure.



---

archive/issue_comments_396975.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@kwankyu](#comment%3A97):\n> I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?\n> \n> If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure. \n\nOK, I see. The problem is that, if mathjax is installed in `/usr/share/mathjax` (as it is on Arch, and I assume other distros once they upgrade), sphinx will copy its content to `_static`, which is not what Sage expects, so mathjax won't work in docs. And setting `MATHJAX_DIR=/usr/share` is not an option, as this would copy the entire contents of `/usr/share` into `_static`.\n\nIt's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.\n\nFor now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`",
    "created_at": "2022-05-31T07:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396975",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@kwankyu](#comment%3A97):
> I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?
> 
> If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure. 

OK, I see. The problem is that, if mathjax is installed in `/usr/share/mathjax` (as it is on Arch, and I assume other distros once they upgrade), sphinx will copy its content to `_static`, which is not what Sage expects, so mathjax won't work in docs. And setting `MATHJAX_DIR=/usr/share` is not an option, as this would copy the entire contents of `/usr/share` into `_static`.

It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.

For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`



---

archive/issue_comments_396976.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@antonio-rojas](#comment%3A98):\n> It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.\n\nTrue. Thanks.\n \n> For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`\n\nI experimented with the idea of using a symbolic link instead of copying, but it didn't work. Still no better solution. Thanks.",
    "created_at": "2022-05-31T13:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-396976",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@antonio-rojas](#comment%3A98):
> It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.

True. Thanks.
 
> For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`

I experimented with the idea of using a symbolic link instead of copying, but it didn't work. Still no better solution. Thanks.
