# Issue 25833: Upgrade to MathJax 3 and configure Sage

archive/issues_025596.json:
```json
{
    "assignees": [],
    "body": "Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n\nThis will be done in three steps: \n\n- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n- Step 2: Provide mathjax spkg upgraded to MathJax3. \n- Step 3: Configure Sage to use MathJax3.\n\nThis ticket focuses on the Steps 2 and 3. \n\nTo install mathjax, you can download the tarball from a temporary URL:\n\n  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n\nand place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.\n\nWe can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n\n```\nexport SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n```\nbefore `make` online doc.\n\nRelated tickets:\n\n- #30296 System package information and spkg-configure for mathjax\n\n- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3\n\nDepends on #33763\n\nCC:  @antonio-rojas @egourgoulhon @embray @kiwifb @timokau @jdemeyer @jhpalmieri @kcrisman @miguelmarco @novoselt @haraldschilly @slel tmonteil @vbraun @orlitzky\n\nKeywords: **upgrade, mathjax**\n\nBranch: **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**\n\nReviewer: **Tobias Diez, Kwankyu Lee**\n\nAuthor: **Tobias Diez, Kwankyu Lee**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25833_\n\n",
    "closed_at": "2022-05-24T22:45:06Z",
    "created_at": "2018-07-11T18:57:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to MathJax 3 and configure Sage",
    "type": "issue",
    "updated_at": "2022-05-31T13:09:17Z",
    "url": "https://github.com/sagemath/sage/issues/25833",
    "user": "https://github.com/slel"
}
```
Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).

This will be done in three steps: 

- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
- Step 2: Provide mathjax spkg upgraded to MathJax3. 
- Step 3: Configure Sage to use MathJax3.

This ticket focuses on the Steps 2 and 3. 

To install mathjax, you can download the tarball from a temporary URL:

  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing

and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.

We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do

```
export SAGE_DOCBUILD_OPTS="--use-cdns"
```
before `make` online doc.

Related tickets:

- #30296 System package information and spkg-configure for mathjax

- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3

Depends on #33763

CC:  @antonio-rojas @egourgoulhon @embray @kiwifb @timokau @jdemeyer @jhpalmieri @kcrisman @miguelmarco @novoselt @haraldschilly @slel tmonteil @vbraun @orlitzky

Keywords: **upgrade, mathjax**

Branch: **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**

Reviewer: **Tobias Diez, Kwankyu Lee**

Author: **Tobias Diez, Kwankyu Lee**

_Issue created by migration from https://trac.sagemath.org/ticket/25833_





---

archive/issue_events_339006.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339006"
}
```



---

archive/issue_events_339007.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339007"
}
```



---

archive/issue_events_339008.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339008"
}
```



---

archive/issue_events_339009.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-07-11T18:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339009"
}
```



---

archive/issue_comments_399684.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThe second public beta release for MathJax v3 was released.\n\n- [announcement on the MathJax Users list](https://groups.google.com/d/topic/mathjax-users/tkGOgWJV2bM/discussion)\n\nThe announcement ends with this note:\n\n> MathJax v3 is in beta release. Do not use this in production,\n> but please test it and report issues on the MathJax v3 issue tracker!\n\n>\n> We are continuing to add more functionality to version 3, and will be\n> releasing additional beta versions as new features become available.\n> So watch this site for more news to come!",
    "created_at": "2018-10-24T23:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399684",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'>Comment 1:</a>
The second public beta release for MathJax v3 was released.

- [announcement on the MathJax Users list](https://groups.google.com/d/topic/mathjax-users/tkGOgWJV2bM/discussion)

The announcement ends with this note:

> MathJax v3 is in beta release. Do not use this in production,
> but please test it and report issues on the MathJax v3 issue tracker!

>
> We are continuing to add more functionality to version 3, and will be
> releasing additional beta versions as new features become available.
> So watch this site for more news to come!



---

archive/issue_comments_399685.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nDo you know how light it will be compared to https://katex.org/ ?",
    "created_at": "2018-10-25T08:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399685",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:2'>Comment 2:</a>
Do you know how light it will be compared to https://katex.org/ ?



---

archive/issue_comments_399686.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [tmonteil](#comment%3A2):\n> Do you know how light it will be compared to https://katex.org/ ?\n\nNo. This might be a good question to ask on the [mathjax-users mailing list](https://groups.google.com/d/topic/mathjax-users/).\n\nMeanwhile the [third public beta for MathJax 3 was announced](https://groups.google.com/d/topic/mathjax-users/NmUrM3i9lNc/discussion) on 28 Nov 2018.",
    "created_at": "2018-12-14T17:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399686",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [tmonteil](#comment%3A2):
> Do you know how light it will be compared to https://katex.org/ ?

No. This might be a good question to ask on the [mathjax-users mailing list](https://groups.google.com/d/topic/mathjax-users/).

Meanwhile the [third public beta for MathJax 3 was announced](https://groups.google.com/d/topic/mathjax-users/NmUrM3i9lNc/discussion) on 28 Nov 2018.



---

archive/issue_comments_399687.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nMathJax v3 beta.4 released 2019-05-21.",
    "created_at": "2019-05-24T04:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399687",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'>Comment 4:</a>
MathJax v3 beta.4 released 2019-05-21.



---

archive/issue_comments_399688.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nMathJax 3.0.5 was released (2020-04).",
    "created_at": "2020-04-11T19:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399688",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'>Comment 5:</a>
MathJax 3.0.5 was released (2020-04).



---

archive/issue_comments_399689.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-Mathjax v3 beta was released, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n \n``````\n",
    "created_at": "2020-04-11T19:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399689",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-Mathjax v3 beta was released, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
 
``````




---

archive/issue_comments_399690.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n \n+See also:\n+- #30296 - System package information and spkg-configure for mathjax\n+\n``````\n",
    "created_at": "2020-08-10T01:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399690",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
 
+See also:
+- #30296 - System package information and spkg-configure for mathjax
+
``````




---

archive/issue_comments_399691.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n \n See also:\n+\n - #30296 - System package information and spkg-configure for mathjax\n \n``````\n",
    "created_at": "2020-08-28T01:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399691",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-Mathjax v3.0.5 was released, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
 
 See also:
+
 - #30296 - System package information and spkg-configure for mathjax
 
``````




---

archive/issue_comments_399692.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n+\n+This will be done in two steps: \n+\n+- The first step is to fix Sage to be compatible with MathJax3. \n+- The second step is to build Sage with MathJax3.\n+\n+This ticket focuses on the second step. The first step is done in #31517.\n \n See also:\n \n``````\n",
    "created_at": "2021-03-19T02:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399692",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
 Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
+
+This will be done in two steps: 
+
+- The first step is to fix Sage to be compatible with MathJax3. 
+- The second step is to build Sage with MathJax3.
+
+This ticket focuses on the second step. The first step is done in #31517.
 
 See also:
 
``````




---

archive/issue_comments_399693.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nIt's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  See the discussion here:\n\nhttps://github.com/mathjax/MathJax/issues/2312#issuecomment-692695446\n\nE.g., \"So line breaking and other features will most likely have to wait until next year.\"  \"That's the reason why nearly nobody is using MathJax 3.\"   etc.\n\nI think this is very important to be aware of, and it's one reason why CoCalc doesn't use MathJax 3, and uses KaTeX by default.   For some applications automatic line breaking probably isn't so important, but it might be very important for Sage, due to people often printing out polynomials and big formulas.",
    "created_at": "2021-06-13T19:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399693",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'>Comment 9:</a>
It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  See the discussion here:

https://github.com/mathjax/MathJax/issues/2312#issuecomment-692695446

E.g., "So line breaking and other features will most likely have to wait until next year."  "That's the reason why nearly nobody is using MathJax 3."   etc.

I think this is very important to be aware of, and it's one reason why CoCalc doesn't use MathJax 3, and uses KaTeX by default.   For some applications automatic line breaking probably isn't so important, but it might be very important for Sage, due to people often printing out polynomials and big formulas.



---

archive/issue_comments_399694.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@williamstein](#comment%3A9):\n> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  \n\nIt is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.",
    "created_at": "2021-06-14T01:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399694",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@williamstein](#comment%3A9):
> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  

It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.



---

archive/issue_comments_399695.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@kwankyu](#comment%3A10):\n> Replying to [@williamstein](#comment%3A9):\n> > It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  \n\n> \n> It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.\n\nThanks.  Here's their plan regarding this issue: https://github.com/jupyterlab/jupyterlab/issues/7218#issuecomment-532146044",
    "created_at": "2021-06-14T02:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399695",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@kwankyu](#comment%3A10):
> Replying to [@williamstein](#comment%3A9):
> > It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  

> 
> It is jupyter people who decides what math rendering web engine is used in jupyter, which is the official frontend of Sage. I think whether Sage will be moving to MathJax3 or something else is dependent on what they do.

Thanks.  Here's their plan regarding this issue: https://github.com/jupyterlab/jupyterlab/issues/7218#issuecomment-532146044



---

archive/issue_comments_399696.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\n> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is \"automatic line breaking\".  See the discussion here:\n> \n\nThanks, William, I'll pass that on upstream to PreTeXt.",
    "created_at": "2021-06-14T11:47:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399696",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'>Comment 12:</a>
> It's worth paying attention to the fact that Mathjax 3 is missing a significant feature that might be really critical for Sage, which is "automatic line breaking".  See the discussion here:
> 

Thanks, William, I'll pass that on upstream to PreTeXt.



---

archive/issue_comments_399697.json:
```json
{
    "body": "Branch: **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)**",
    "created_at": "2022-04-07T04:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399697",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)**



---

archive/issue_comments_399698.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2022-04-07T04:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399698",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_399699.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f\">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr></table>\n",
    "created_at": "2022-04-07T04:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399699",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr></table>




---

archive/issue_comments_399700.json:
```json
{
    "body": "Commit: **[46d0d69](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)**",
    "created_at": "2022-04-07T04:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399700",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[46d0d69](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)**



---

archive/issue_comments_399701.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nTo support #33600, I prepared a new package for mathjax3.\n\nI've never done creating a spkg before and don't understand everything about this business. So please help. This is a public branch!\n\nI used the mathjax2 spkg as a template, and managed to place a tarball in `upstream/` directory and install from it to `local/share/mathjax3` by `sage -i mathjax3`.",
    "created_at": "2022-04-07T05:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399701",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'>Comment 15:</a>
To support #33600, I prepared a new package for mathjax3.

I've never done creating a spkg before and don't understand everything about this business. So please help. This is a public branch!

I used the mathjax2 spkg as a template, and managed to place a tarball in `upstream/` directory and install from it to `local/share/mathjax3` by `sage -i mathjax3`.



---

archive/issue_comments_399702.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d\">6da197e</a></td><td><code>Remove garbage files</code></td></tr></table>\n",
    "created_at": "2022-04-07T05:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399702",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d">6da197e</a></td><td><code>Remove garbage files</code></td></tr></table>




---

archive/issue_comments_399703.json:
```json
{
    "body": "Changed commit from **[46d0d69](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)** to **[6da197e](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)**",
    "created_at": "2022-04-07T05:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[46d0d69](https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f)** to **[6da197e](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)**



---

archive/issue_comments_399704.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nFixed first mistake.",
    "created_at": "2022-04-07T05:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399704",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:17'>Comment 17:</a>
Fixed first mistake.



---

archive/issue_comments_399705.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,14 @@\n-Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).\n+Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n \n-This will be done in two steps: \n+This will be done in three steps: \n \n-- The first step is to fix Sage to be compatible with MathJax3. \n-- The second step is to build Sage with MathJax3.\n+- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.\n+- Step 2: provide Mathjax3 spkg. \n+- Step 3: build Sage with MathJax3 #33600.\n \n-This ticket focuses on the second step. The first step is done in #31517.\n+This ticket focuses on the Step 2. \n \n-See also:\n+Related tickets:\n \n - #30296 - System package information and spkg-configure for mathjax\n \n``````\n",
    "created_at": "2022-04-07T05:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399705",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,14 @@
-Mathjax v3.1.0 was released on 2020-08-25, see [MathJax news](https://www.mathjax.org/news).
+Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
 
-This will be done in two steps: 
+This will be done in three steps: 
 
-- The first step is to fix Sage to be compatible with MathJax3. 
-- The second step is to build Sage with MathJax3.
+- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.
+- Step 2: provide Mathjax3 spkg. 
+- Step 3: build Sage with MathJax3 #33600.
 
-This ticket focuses on the second step. The first step is done in #31517.
+This ticket focuses on the Step 2. 
 
-See also:
+Related tickets:
 
 - #30296 - System package information and spkg-configure for mathjax
 
``````




---

archive/issue_comments_399706.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n+Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).\n \n This will be done in three steps: \n \n-- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.\n-- Step 2: provide Mathjax3 spkg. \n-- Step 3: build Sage with MathJax3 #33600.\n+- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n+- Step 2: Provide Mathjax3 spkg. \n+- Step 3: Build Sage with MathJax3 #33600.\n \n This ticket focuses on the Step 2. \n \n``````\n",
    "created_at": "2022-04-07T05:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399706",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Mathjax v3.2.0 was released on 2020-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
+Mathjax v3.2.0 was released on 2021-06-17, see [https://github.com/mathjax/MathJax](https://github.com/mathjax/MathJax).
 
 This will be done in three steps: 
 
-- Step 1: fix Sage to be compatible with MathJax3. Done in #31517.
-- Step 2: provide Mathjax3 spkg. 
-- Step 3: build Sage with MathJax3 #33600.
+- Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
+- Step 2: Provide Mathjax3 spkg. 
+- Step 3: Build Sage with MathJax3 #33600.
 
 This ticket focuses on the Step 2. 
 
``````




---

archive/issue_comments_399707.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nTo the uninitiated (like me):\n\nFirst\n\n```\ncd build/pkgs/mathjax3/\nspkg-src \n``` \nto make the tarball `upstream/mathjax-3.2.0.tar.gz`.",
    "created_at": "2022-04-07T05:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399707",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:20'>Comment 20:</a>
To the uninitiated (like me):

First

```
cd build/pkgs/mathjax3/
spkg-src 
``` 
to make the tarball `upstream/mathjax-3.2.0.tar.gz`.



---

archive/issue_comments_399708.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d\">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr></table>\n",
    "created_at": "2022-04-07T07:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399708",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr></table>




---

archive/issue_comments_399709.json:
```json
{
    "body": "Changed commit from **[6da197e](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)** to **[bd60742](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)**",
    "created_at": "2022-04-07T07:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6da197e](https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d)** to **[bd60742](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)**



---

archive/issue_comments_399710.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nAfter installed, mathjax files are in `local/share/mathjax3/mathjax/...`. This is necessary to put mathjax files into `_static/mathjax/...` for sage documentation.",
    "created_at": "2022-04-07T07:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399710",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'>Comment 22:</a>
After installed, mathjax files are in `local/share/mathjax3/mathjax/...`. This is necessary to put mathjax files into `_static/mathjax/...` for sage documentation.



---

archive/issue_comments_399711.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nWhen it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)",
    "created_at": "2022-04-07T15:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399711",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'>Comment 23:</a>
When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)



---

archive/issue_comments_399712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,20 @@\n \n This ticket focuses on the Step 2. \n \n+To make the tarball:\n+\n+Do\n+\n+```\n+cd build/pkgs/mathjax3/\n+spkg-src \n+``` \n+Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.\n+\n+Temporary URL to download the tarball:\n+\n+https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+\n Related tickets:\n \n - #30296 - System package information and spkg-configure for mathjax\n``````\n",
    "created_at": "2022-04-08T00:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399712",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,20 @@
 
 This ticket focuses on the Step 2. 
 
+To make the tarball:
+
+Do
+
+```
+cd build/pkgs/mathjax3/
+spkg-src 
+``` 
+Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.
+
+Temporary URL to download the tarball:
+
+https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+
 Related tickets:
 
 - #30296 - System package information and spkg-configure for mathjax
``````




---

archive/issue_events_339010.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T00:25:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339010"
}
```



---

archive/issue_events_339011.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T00:25:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339011"
}
```



---

archive/issue_comments_399713.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@jhpalmieri](#comment%3A23):\n> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n\nRight. Presently the tarball is just a slight repackaging of the official mathjax3 distribution. Fortunately the size of the tarball (around 4.8Mb) is just slightly larger than our mathjax2 tarball. But they have plans to add more fonts to mathjax3 and then we would be forced to reduce the size by cutting unnecessary fonts from the distribution.",
    "created_at": "2022-04-08T00:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399713",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@jhpalmieri](#comment%3A23):
> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)

Right. Presently the tarball is just a slight repackaging of the official mathjax3 distribution. Fortunately the size of the tarball (around 4.8Mb) is just slightly larger than our mathjax2 tarball. But they have plans to add more fonts to mathjax3 and then we would be forced to reduce the size by cutting unnecessary fonts from the distribution.



---

archive/issue_comments_399714.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nDo we need a sage-devel discussion to add mathjax3 as a standard spkg?",
    "created_at": "2022-04-08T00:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399714",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'>Comment 27:</a>
Do we need a sage-devel discussion to add mathjax3 as a standard spkg?



---

archive/issue_comments_399715.json:
```json
{
    "body": "Changed commit from **[bd60742](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)** to **[5b47d22](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)**",
    "created_at": "2022-04-08T01:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd60742](https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d)** to **[5b47d22](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)**



---

archive/issue_comments_399716.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244\">5b47d22</a></td><td><code>Fix checksums</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399716",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244">5b47d22</a></td><td><code>Fix checksums</code></td></tr></table>




---

archive/issue_comments_399717.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,16 +8,6 @@\n \n This ticket focuses on the Step 2. \n \n-To make the tarball:\n-\n-Do\n-\n-```\n-cd build/pkgs/mathjax3/\n-spkg-src \n-``` \n-Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.\n-\n Temporary URL to download the tarball:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n``````\n",
    "created_at": "2022-04-08T01:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399717",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,16 +8,6 @@
 
 This ticket focuses on the Step 2. 
 
-To make the tarball:
-
-Do
-
-```
-cd build/pkgs/mathjax3/
-spkg-src 
-``` 
-Then the tarball is in `upstream/mathjax-3.2.0.tar.gz`.
-
 Temporary URL to download the tarball:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
``````




---

archive/issue_comments_399718.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,11 @@\n \n This ticket focuses on the Step 2. \n \n-Temporary URL to download the tarball:\n+To install mathjax3, download the tarball from a temporary URL:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+\n+and place the tarball in `upstream/`, and do `sage -i mathjax3`.\n \n Related tickets:\n \n``````\n",
    "created_at": "2022-04-08T01:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399718",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,11 @@
 
 This ticket focuses on the Step 2. 
 
-Temporary URL to download the tarball:
+To install mathjax3, download the tarball from a temporary URL:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+
+and place the tarball in `upstream/`, and do `sage -i mathjax3`.
 
 Related tickets:
 
``````




---

archive/issue_comments_399719.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@kwankyu](#comment%3A27):\n> Do we need a sage-devel discussion to add mathjax3 as a standard spkg?\n\nI thought of adding mathjax3 side by side with mathjax(2). But it seems that we don't need to keep mathjax(2) once we have mathjax3 in sage.\n\nSo now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...",
    "created_at": "2022-04-08T07:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399719",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@kwankyu](#comment%3A27):
> Do we need a sage-devel discussion to add mathjax3 as a standard spkg?

I thought of adding mathjax3 side by side with mathjax(2). But it seems that we don't need to keep mathjax(2) once we have mathjax3 in sage.

So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...



---

archive/issue_comments_399720.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,16 +3,16 @@\n This will be done in three steps: \n \n - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n-- Step 2: Provide Mathjax3 spkg. \n+- Step 2: Provide mathjax spkg upgraded to MathJax3. \n - Step 3: Build Sage with MathJax3 #33600.\n \n This ticket focuses on the Step 2. \n \n-To install mathjax3, download the tarball from a temporary URL:\n+To install mathjax, download the tarball from a temporary URL:\n \n https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n \n-and place the tarball in `upstream/`, and do `sage -i mathjax3`.\n+and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n Related tickets:\n \n``````\n",
    "created_at": "2022-04-08T12:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399720",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,16 +3,16 @@
 This will be done in three steps: 
 
 - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
-- Step 2: Provide Mathjax3 spkg. 
+- Step 2: Provide mathjax spkg upgraded to MathJax3. 
 - Step 3: Build Sage with MathJax3 #33600.
 
 This ticket focuses on the Step 2. 
 
-To install mathjax3, download the tarball from a temporary URL:
+To install mathjax, download the tarball from a temporary URL:
 
 https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
 
-and place the tarball in `upstream/`, and do `sage -i mathjax3`.
+and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
 Related tickets:
 
``````




---

archive/issue_comments_399721.json:
```json
{
    "body": "Changed commit from **[5b47d22](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)** to **[8df9661](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)**",
    "created_at": "2022-04-08T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5b47d22](https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244)** to **[8df9661](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)**



---

archive/issue_comments_399722.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557\">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr></table>\n",
    "created_at": "2022-04-08T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399722",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>Comment 33:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr></table>




---

archive/issue_comments_399723.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@kwankyu](#comment%3A31):\n> \n> So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...\n\nWhat about the line breaking issue pointed out in [comment:9](#comment%3A9) ?",
    "created_at": "2022-04-08T14:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399723",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@kwankyu](#comment%3A31):
> 
> So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...

What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?



---

archive/issue_comments_399724.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nReplying to [@egourgoulhon](#comment%3A34):\n> Replying to [@kwankyu](#comment%3A31):\n> > \n> > So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...\n\n> \n> What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?\n\nAs I understand it, it is only relevant with the mathjax used with jupyter.\n\nPresently the mathjax used by Sphinx for sage documentation is different from the mathjax used by jupyter. So we don't need to worry about the issue.",
    "created_at": "2022-04-08T14:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399724",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:35'>Comment 35:</a>
Replying to [@egourgoulhon](#comment%3A34):
> Replying to [@kwankyu](#comment%3A31):
> > 
> > So now I am thinking of replacing the mathjax(2) with the new mathjax(3). Then we don't need a sage-devel discussion...

> 
> What about the line breaking issue pointed out in [comment:9](#comment%3A9) ?

As I understand it, it is only relevant with the mathjax used with jupyter.

Presently the mathjax used by Sphinx for sage documentation is different from the mathjax used by jupyter. So we don't need to worry about the issue.



---

archive/issue_comments_399725.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nIsn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).",
    "created_at": "2022-04-08T18:30:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399725",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:36'>Comment 36:</a>
Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).



---

archive/issue_comments_399726.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nReplying to [@tobiasdiez](#comment%3A36):\n> Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).\n\nIt is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.",
    "created_at": "2022-04-08T23:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399726",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:37'>Comment 37:</a>
Replying to [@tobiasdiez](#comment%3A36):
> Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).

It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.



---

archive/issue_comments_399727.json:
```json
{
    "body": "Changed commit from **[8df9661](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)** to **[d15d201](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)**",
    "created_at": "2022-04-08T23:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8df9661](https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557)** to **[d15d201](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)**



---

archive/issue_comments_399728.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1\">d15d201</a></td><td><code>Minor edits in spkg-src</code></td></tr></table>\n",
    "created_at": "2022-04-08T23:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399728",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1">d15d201</a></td><td><code>Minor edits in spkg-src</code></td></tr></table>




---

archive/issue_comments_399729.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8\">a8d8d55</a></td><td><code>Upgrade to MathJax3</code></td></tr></table>\n",
    "created_at": "2022-04-08T23:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399729",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8">a8d8d55</a></td><td><code>Upgrade to MathJax3</code></td></tr></table>




---

archive/issue_comments_399730.json:
```json
{
    "body": "Changed commit from **[d15d201](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)** to **[a8d8d55](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)**",
    "created_at": "2022-04-08T23:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399730",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d15d201](https://github.com/sagemath/sagetrac-mirror/commit/d15d2016cecfd94e8e464892faefa8cf3476a2d1)** to **[a8d8d55](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)**



---

archive/issue_comments_399731.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,9 +4,9 @@\n \n - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.\n - Step 2: Provide mathjax spkg upgraded to MathJax3. \n-- Step 3: Build Sage with MathJax3 #33600.\n+- Step 3: Configure Sage to use MathJax3.\n \n-This ticket focuses on the Step 2. \n+This ticket focuses on the Steps 2 and 3. \n \n To install mathjax, download the tarball from a temporary URL:\n \n``````\n",
    "created_at": "2022-04-08T23:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399731",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,9 +4,9 @@
 
 - Step 1: Fix Sage to be compatible with MathJax3. Done in #31517.
 - Step 2: Provide mathjax spkg upgraded to MathJax3. 
-- Step 3: Build Sage with MathJax3 #33600.
+- Step 3: Configure Sage to use MathJax3.
 
-This ticket focuses on the Step 2. 
+This ticket focuses on the Steps 2 and 3. 
 
 To install mathjax, download the tarball from a temporary URL:
 
``````




---

archive/issue_comments_399732.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nAfter a discussion in #33600 (Configure mathjax in sphinx config and upgrade to Mathjax v3), we decided to merge both tickets to here.",
    "created_at": "2022-04-08T23:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399732",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:40'>Comment 40:</a>
After a discussion in #33600 (Configure mathjax in sphinx config and upgrade to Mathjax v3), we decided to merge both tickets to here.



---

archive/issue_events_339012.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-09T01:40:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "title_is": "Upgrade to MathJax 3 and configure Sage",
    "title_was": "Upgrade to MathJax 3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339012"
}
```



---

archive/issue_comments_399733.json:
```json
{
    "body": "Changed author from **Kwankyu Lee** to **Tobias Diez, Kwankyu Lee**",
    "created_at": "2022-04-09T01:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399733",
    "user": "https://github.com/kwankyu"
}
```

Changed author from **Kwankyu Lee** to **Tobias Diez, Kwankyu Lee**



---

archive/issue_comments_399734.json:
```json
{
    "body": "Changed commit from **[a8d8d55](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)** to **[81b6836](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)**",
    "created_at": "2022-04-09T02:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399734",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a8d8d55](https://github.com/sagemath/sagetrac-mirror/commit/a8d8d55b205bf2bc48160d0259fc836c24491ca8)** to **[81b6836](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)**



---

archive/issue_comments_399735.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81\">81b6836</a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr></table>\n",
    "created_at": "2022-04-09T02:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399735",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>Comment 43:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81">81b6836</a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr></table>




---

archive/issue_comments_399736.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nThe mathjax3 bug was also reported here: https://github.com/mathjax/MathJax/issues/2861",
    "created_at": "2022-04-09T02:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399736",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:44'>Comment 44:</a>
The mathjax3 bug was also reported here: https://github.com/mathjax/MathJax/issues/2861



---

archive/issue_comments_399737.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,5 +16,6 @@\n \n Related tickets:\n \n-- #30296 - System package information and spkg-configure for mathjax\n+- #30296 System package information and spkg-configure for mathjax\n \n+- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3\n``````\n",
    "created_at": "2022-04-09T02:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399737",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,5 +16,6 @@
 
 Related tickets:
 
-- #30296 - System package information and spkg-configure for mathjax
+- #30296 System package information and spkg-configure for mathjax
 
+- #33600 Configure mathjax in sphinx config and upgrade to Mathjax v3
``````




---

archive/issue_comments_399738.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,13 @@\n \n and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n+We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n+\n+```\n+export SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n+```\n+before `make` online doc.\n+\n Related tickets:\n \n - #30296 System package information and spkg-configure for mathjax\n``````\n",
    "created_at": "2022-04-09T11:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399738",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,13 @@
 
 and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
+We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do
+
+```
+export SAGE_DOCBUILD_OPTS="--use-cdns"
+```
+before `make` online doc.
+
 Related tickets:
 
 - #30296 System package information and spkg-configure for mathjax
``````




---

archive/issue_comments_399739.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nReplying to [@kwankyu](#comment%3A37):\n> Replying to [@tobiasdiez](#comment%3A36):\n> > Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).\n\n> \n> It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.\n\nOkay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? This could then be easily extended to include other extensions etc if needed in the future.\n\nAlso I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.",
    "created_at": "2022-04-09T11:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399739",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:47'>Comment 47:</a>
Replying to [@kwankyu](#comment%3A37):
> Replying to [@tobiasdiez](#comment%3A36):
> > Isn't it enough to only copy the `tex-chtml.js` file from the mathjax release? It looks like this file is self-contained (hard to say as its minified).

> 
> It is self-contained. But it does not contain all extensions. To be future safe, I think we should not minimize our tarball. The tarball is not big...yet.

Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? This could then be easily extended to include other extensions etc if needed in the future.

Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.



---

archive/issue_comments_399740.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nOtherwise it looks good to me. Is there still something to do?",
    "created_at": "2022-04-09T11:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399740",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:48'>Comment 48:</a>
Otherwise it looks good to me. Is there still something to do?



---

archive/issue_comments_399741.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8\">9683648</a></td><td><code>Remove commented-out lines</code></td></tr></table>\n",
    "created_at": "2022-04-09T12:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399741",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:49'>Comment 49:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8">9683648</a></td><td><code>Remove commented-out lines</code></td></tr></table>




---

archive/issue_comments_399742.json:
```json
{
    "body": "Changed commit from **[81b6836](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)** to **[9683648](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)**",
    "created_at": "2022-04-09T12:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399742",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[81b6836](https://github.com/sagemath/sagetrac-mirror/commit/81b6836109b45f5001e504d077d60a5eb0095b81)** to **[9683648](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)**



---

archive/issue_comments_399743.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nReplying to [@tobiasdiez](#comment%3A47):\n> Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? \n\nWhy do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.\n\n> This could then be easily extended to include other extensions etc if needed in the future.\n\nIt would be \"easy\" only if all mathjax files are already in `local/share/mathjax`. The size of this directory only slightly increases with this ticket.\n\n> Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.\n\nOkay. Done.",
    "created_at": "2022-04-09T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399743",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:50'>Comment 50:</a>
Replying to [@tobiasdiez](#comment%3A47):
> Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? 

Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.

> This could then be easily extended to include other extensions etc if needed in the future.

It would be "easy" only if all mathjax files are already in `local/share/mathjax`. The size of this directory only slightly increases with this ticket.

> Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.

Okay. Done.



---

archive/issue_comments_399744.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nReplying to [@tobiasdiez](#comment%3A48):\n> Otherwise it looks good to me. Is there still something to do?\n\nPerhaps no. But before we go to \"needs review\", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.",
    "created_at": "2022-04-09T12:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399744",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:51'>Comment 51:</a>
Replying to [@tobiasdiez](#comment%3A48):
> Otherwise it looks good to me. Is there still something to do?

Perhaps no. But before we go to "needs review", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.



---

archive/issue_comments_399745.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nReplying to [@kwankyu](#comment%3A50):\n> Replying to [@tobiasdiez](#comment%3A47):\n> > Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? \n\n> \n> Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.\n\nMainly for clarity, because then in sage_share/mathjax there are only files that are also actually used. But it's not a big issue.\n\n> > Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.\n\n> \n> Okay. Done.\n\nThanks!",
    "created_at": "2022-04-09T19:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399745",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:52'>Comment 52:</a>
Replying to [@kwankyu](#comment%3A50):
> Replying to [@tobiasdiez](#comment%3A47):
> > Okay, makes sense to leave the tar untouched. What about only copying the tex-chtml file to `SAGE_SHARE` in `spkg-install.in`? 

> 
> Why do that? Do you worry the performance of the documentation website? Having the whole mathjax files has nothing to do with the performance. The html files only load `tex-chtml.js`.

Mainly for clarity, because then in sage_share/mathjax there are only files that are also actually used. But it's not a big issue.

> > Also I think the uncommented code in `spkg-src` can be safely deleted. The folder structure of the mathjax releases changed completely, so the mathjax 2 stuff is outdated. And if there is something useful in it, one could also use git history to recover it easily.

> 
> Okay. Done.

Thanks!



---

archive/issue_comments_399746.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nReplying to [@kwankyu](#comment%3A51):\n> Replying to [@tobiasdiez](#comment%3A48):\n> > Otherwise it looks good to me. Is there still something to do?\n\n> \n> Perhaps no. But before we go to \"needs review\", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.\n\nSure!\nThe documentation workflow on github fails with this ticket since the mathjax tar cannot be downloaded. Is this to be expected? Should/can the script not fallback to get mathjax from github instead of trying to download it from mirrors?",
    "created_at": "2022-04-09T19:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399746",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:53'>Comment 53:</a>
Replying to [@kwankyu](#comment%3A51):
> Replying to [@tobiasdiez](#comment%3A48):
> > Otherwise it looks good to me. Is there still something to do?

> 
> Perhaps no. But before we go to "needs review", I want that more people check the documentation built with mathjax3 (with CDN and without) to find any degradation or regression of the doc compared with the doc built with mathjax2. Let's not rush.

Sure!
The documentation workflow on github fails with this ticket since the mathjax tar cannot be downloaded. Is this to be expected? Should/can the script not fallback to get mathjax from github instead of trying to download it from mirrors?



---

archive/issue_comments_399747.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@jhpalmieri](#comment%3A23):\n> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n\nThe temporary URL should be put in checksums.ini, then all the automated tools will work.",
    "created_at": "2022-04-09T20:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399747",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@jhpalmieri](#comment%3A23):
> When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)

The temporary URL should be put in checksums.ini, then all the automated tools will work.



---

archive/issue_comments_399748.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n To install mathjax, download the tarball from a temporary URL:\n \n-https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing\n+  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n \n and place the tarball in `upstream/`, and do `sage -i mathjax`.\n \n``````\n",
    "created_at": "2022-04-10T00:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399748",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 To install mathjax, download the tarball from a temporary URL:
 
-https://drive.google.com/file/d/1-rVOBjcmgaM41uM_8rFlRpoe2HshssMX/view?usp=sharing
+  https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing
 
 and place the tarball in `upstream/`, and do `sage -i mathjax`.
 
``````




---

archive/issue_comments_399749.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nReplying to [@mkoeppe](#comment%3A54):\n> Replying to [@jhpalmieri](#comment%3A23):\n> > When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the \"upstream_url\" field in `checksums.ini` to download from a standard location.)\n\n> \n> The temporary URL should be put in checksums.ini, then all the automated tools will work.\n\nIn fact, that doesn't work (with me). Perhaps because Google Drive is not an ftp server...",
    "created_at": "2022-04-10T09:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399749",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:56'>Comment 56:</a>
Replying to [@mkoeppe](#comment%3A54):
> Replying to [@jhpalmieri](#comment%3A23):
> > When it's convenient, could you please upload the tarball somewhere? (As you've observed, I think we've always built our own mathjax tarball, so we can't use the "upstream_url" field in `checksums.ini` to download from a standard location.)

> 
> The temporary URL should be put in checksums.ini, then all the automated tools will work.

In fact, that doesn't work (with me). Perhaps because Google Drive is not an ftp server...



---

archive/issue_comments_399750.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nIf the file is not too big, you can attach it to this ticket and use the resulting URL instead.",
    "created_at": "2022-04-10T21:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399750",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'>Comment 58:</a>
If the file is not too big, you can attach it to this ticket and use the resulting URL instead.



---

archive/issue_comments_399751.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nAttachment: **[mathjax-3.2.0.tar.gz](https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9\">1e24916</a></td><td><code>Add upstream_url</code></td></tr></table>\n",
    "created_at": "2022-04-11T00:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399751",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>Comment 59:</a>
Attachment: **[mathjax-3.2.0.tar.gz](https://github.com/sagemath/sage/files/ticket25833/mathjax-3.2.0.tar.gz)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9">1e24916</a></td><td><code>Add upstream_url</code></td></tr></table>




---

archive/issue_comments_399752.json:
```json
{
    "body": "Changed commit from **[9683648](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)** to **[1e24916](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)**",
    "created_at": "2022-04-11T00:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399752",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9683648](https://github.com/sagemath/sagetrac-mirror/commit/968364875850d16403e63e309a4f944c0332eea8)** to **[1e24916](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)**



---

archive/issue_comments_399753.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nReplying to [@mkoeppe](#comment%3A58):\n> If the file is not too big, \n\nI am not sure how big is \"too big\".\n\n> you can attach it to this ticket and use the resulting URL instead. \n\nAnyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?",
    "created_at": "2022-04-11T00:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399753",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:60'>Comment 60:</a>
Replying to [@mkoeppe](#comment%3A58):
> If the file is not too big, 

I am not sure how big is "too big".

> you can attach it to this ticket and use the resulting URL instead. 

Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?



---

archive/issue_comments_399754.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nReplying to [@kwankyu](#comment%3A60):\n> Replying to [@mkoeppe](#comment%3A58):\n> > If the file is not too big, \n\n> \n> I am not sure how big is \"too big\".\n\nIt worked, so it was not too big",
    "created_at": "2022-04-11T00:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'>Comment 61:</a>
Replying to [@kwankyu](#comment%3A60):
> Replying to [@mkoeppe](#comment%3A58):
> > If the file is not too big, 

> 
> I am not sure how big is "too big".

It worked, so it was not too big



---

archive/issue_comments_399755.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,11 +8,11 @@\n \n This ticket focuses on the Steps 2 and 3. \n \n-To install mathjax, download the tarball from a temporary URL:\n+To install mathjax, you can download the tarball from a temporary URL:\n \n   https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing\n \n-and place the tarball in `upstream/`, and do `sage -i mathjax`.\n+and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.\n \n We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do\n \n``````\n",
    "created_at": "2022-04-11T00:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399755",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,11 +8,11 @@
 
 This ticket focuses on the Steps 2 and 3. 
 
-To install mathjax, download the tarball from a temporary URL:
+To install mathjax, you can download the tarball from a temporary URL:
 
   https://drive.google.com/file/d/1-tMjjIwftzoGngFh549_kUO3Chmy3qhI/view?usp=sharing
 
-and place the tarball in `upstream/`, and do `sage -i mathjax`.
+and place the tarball in `upstream/` and `make`, or you can just do `make` since the tarball will be automatically downloaded from the attachment of this ticket after unsuccessful attempts to download from sage mirrors.
 
 We can now choose whether to use mathjax CDN or not. The default is not to. To use CDN, do
 
``````




---

archive/issue_comments_399756.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nReplying to [@kwankyu](#comment%3A60):\n> Replying to [@mkoeppe](#comment%3A58):\n> > If the file is not too big, \n\n> \n> I am not sure how big is \"too big\".\n> \n> > you can attach it to this ticket and use the resulting URL instead. \n\n> \n> Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?\n\nEither permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.",
    "created_at": "2022-04-11T00:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399756",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'>Comment 63:</a>
Replying to [@kwankyu](#comment%3A60):
> Replying to [@mkoeppe](#comment%3A58):
> > If the file is not too big, 

> 
> I am not sure how big is "too big".
> 
> > you can attach it to this ticket and use the resulting URL instead. 

> 
> Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?

Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.



---

archive/issue_comments_399757.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nThe github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true",
    "created_at": "2022-04-11T17:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399757",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:64'>Comment 64:</a>
The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true



---

archive/issue_comments_399758.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nReplying to [@mkoeppe](#comment%3A63):\n> > Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?\n\n> \n> Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.\n\nThat's good to know. Then I would not remove the `upstream_url` and the tarball attached.",
    "created_at": "2022-04-12T00:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399758",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:65'>Comment 65:</a>
Replying to [@mkoeppe](#comment%3A63):
> > Anyway, done. Would this be a temporary (to be deleted before the branch is merged) or permanent (keep the tarball in trac) url?

> 
> Either permanent or kept at least until the release manager has made the next beta. The release management scripts make use of the `upstream_url` to send files to the file server.

That's good to know. Then I would not remove the `upstream_url` and the tarball attached.



---

archive/issue_comments_399759.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nWhile I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...",
    "created_at": "2022-04-12T10:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399759",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:66'>Comment 66:</a>
While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...



---

archive/issue_comments_399760.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nWith MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,\n\n```\n$ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html\n    <script data-url_root=\"./\" id=\"documentation_options\" src=\"_static/documentation_options.js\"></script>\n    <script src=\"_static/jquery.js\"></script>\n    <script src=\"_static/underscore.js\"></script>\n    <script src=\"_static/doctools.js\"></script>\n    <script src=\"_static/thebelab-helper.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js\"></script>\n    <script src=\"https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js\"></script>\n    <script defer=\"defer\" src=\"_static/mathjax/tex-chtml.js\"></script>\n  <!-- <script src=\"_static/thebe.js\" type=\"text/javascript\"></script> -->\n  <!-- <script src=\"_static/thebe-sage.js\" type=\"text/javascript\"></script> -->\n```\n\nI don't know if those are related to this ticket, but I figured I'd mention it.",
    "created_at": "2022-04-13T20:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399760",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:67'>Comment 67:</a>
With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,

```
$ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
  <!-- <script src="_static/thebe.js" type="text/javascript"></script> -->
  <!-- <script src="_static/thebe-sage.js" type="text/javascript"></script> -->
```

I don't know if those are related to this ticket, but I figured I'd mention it.



---

archive/issue_comments_399761.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nReplying to [@kwankyu](#comment%3A66):\n> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n\nIf you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).",
    "created_at": "2022-04-13T20:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399761",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:68'>Comment 68:</a>
Replying to [@kwankyu](#comment%3A66):
> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...

If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).



---

archive/issue_comments_399762.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nReplying to [@orlitzky](#comment%3A67):\n> With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. \n\nGood. \n\n> One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,\n> \n> ```\n> $ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html\n>     <script data-url_root=\"./\" id=\"documentation_options\" src=\"_static/documentation_options.js\"></script>\n>     <script src=\"_static/jquery.js\"></script>\n>     <script src=\"_static/underscore.js\"></script>\n>     <script src=\"_static/doctools.js\"></script>\n>     <script src=\"_static/thebelab-helper.js\"></script>\n>     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js\"></script>\n>     <script src=\"https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js\"></script>\n>     <script defer=\"defer\" src=\"_static/mathjax/tex-chtml.js\"></script>\n>   <!-- <script src=\"_static/thebe.js\" type=\"text/javascript\"></script> -->\n>   <!-- <script src=\"_static/thebe-sage.js\" type=\"text/javascript\"></script> -->\n> ```\n> \n> I don't know if those are related to this ticket, but I figured I'd mention it.\n\nSee [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).",
    "created_at": "2022-04-14T00:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399762",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:69'>Comment 69:</a>
Replying to [@orlitzky](#comment%3A67):
> With MathJax3, the docs actually load for me, so I think #18596 has been fixed as a side effect. 

Good. 

> One thing I've noticed though is that, even with the default value of `--use-cdns=False`, I get references to a few CDNs in my docs. For example,
> 
> ```
> $ grep '<script.*src=' ./local/share/doc/sage/html/en/reference/index.html
>     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
>     <script src="_static/jquery.js"></script>
>     <script src="_static/underscore.js"></script>
>     <script src="_static/doctools.js"></script>
>     <script src="_static/thebelab-helper.js"></script>
>     <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
>     <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
>     <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
>   <!-- <script src="_static/thebe.js" type="text/javascript"></script> -->
>   <!-- <script src="_static/thebe-sage.js" type="text/javascript"></script> -->
> ```
> 
> I don't know if those are related to this ticket, but I figured I'd mention it.

See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).



---

archive/issue_comments_399763.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nReplying to [@tobiasdiez](#comment%3A68):\n> Replying to [@kwankyu](#comment%3A66):\n> > While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n\n> \n> If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).\n\nI have no experience with github workflow, but I will see it. \n\nFor the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.",
    "created_at": "2022-04-14T00:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399763",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:70'>Comment 70:</a>
Replying to [@tobiasdiez](#comment%3A68):
> Replying to [@kwankyu](#comment%3A66):
> > While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...

> 
> If you please could fix the documentation github workflow, then one can easily test this by running some benchmarks (e.g. using https://pagespeed.web.dev/).

I have no experience with github workflow, but I will see it. 

For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.



---

archive/issue_comments_399764.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nReplying to [@tobiasdiez](#comment%3A64):\n> The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true\n\nI don't know what is going on with github workflow, but I cannot find something like this in the log:\n\n```\n[mathjax-3.2.0] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mathjax/mathjax-3.2.0.tar.gz'\n[mathjax-3.2.0] Attempting to download from https://trac.sagemath.org/raw-attachment/ticket/25833/mathjax-3.2.0.tar.gz\n[mathjax-3.2.0] [......................................................................]\n[mathjax-3.2.0] mathjax-3.2.0\n[mathjax-3.2.0] ====================================================\n[mathjax-3.2.0] Setting up build directory for mathjax-3.2.0\n[mathjax-3.2.0] Finished extraction\n[mathjax-3.2.0] No patch files found in ../patches\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] Host system:\n[mathjax-3.2.0] Darwin Hera.local 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64 x86_64\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] C compiler: gcc\n[mathjax-3.2.0] C compiler version:\n[mathjax-3.2.0] Apple clang version 13.1.6 (clang-1316.0.21.2.3)\n[mathjax-3.2.0] Target: x86_64-apple-darwin21.4.0\n[mathjax-3.2.0] Thread model: posix\n[mathjax-3.2.0] InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n[mathjax-3.2.0] ****************************************************\n[mathjax-3.2.0] Package 'mathjax' is currently not installed\n[mathjax-3.2.0] No legacy uninstaller found for 'mathjax'; nothing to do\n[mathjax-3.2.0] src/mathjax -> /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst/Users/kwankyu/GitHub/sage-dev/local/share/mathjax\n[mathjax-3.2.0] \n[mathjax-3.2.0] real\t0m0.117s\n[mathjax-3.2.0] user\t0m0.015s\n[mathjax-3.2.0] sys\t0m0.099s\n[mathjax-3.2.0] Copying package files from temporary location /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst to /Users/kwankyu/GitHub/sage-dev/local\n[mathjax-3.2.0] Successfully installed mathjax-3.2.0\n[mathjax-3.2.0] Deleting temporary build directory\n[mathjax-3.2.0] /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0\n[mathjax-3.2.0] Finished installing mathjax-3.2.0\n```",
    "created_at": "2022-04-14T02:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399764",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:71'>Comment 71:</a>
Replying to [@tobiasdiez](#comment%3A64):
> The github action still fails with the same error (no mirror found): https://github.com/sagemath/sagetrac-mirror/runs/5964659669?check_suite_focus=true

I don't know what is going on with github workflow, but I cannot find something like this in the log:

```
[mathjax-3.2.0] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mathjax/mathjax-3.2.0.tar.gz'
[mathjax-3.2.0] Attempting to download from https://trac.sagemath.org/raw-attachment/ticket/25833/mathjax-3.2.0.tar.gz
[mathjax-3.2.0] [......................................................................]
[mathjax-3.2.0] mathjax-3.2.0
[mathjax-3.2.0] ====================================================
[mathjax-3.2.0] Setting up build directory for mathjax-3.2.0
[mathjax-3.2.0] Finished extraction
[mathjax-3.2.0] No patch files found in ../patches
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] Host system:
[mathjax-3.2.0] Darwin Hera.local 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64 x86_64
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] C compiler: gcc
[mathjax-3.2.0] C compiler version:
[mathjax-3.2.0] Apple clang version 13.1.6 (clang-1316.0.21.2.3)
[mathjax-3.2.0] Target: x86_64-apple-darwin21.4.0
[mathjax-3.2.0] Thread model: posix
[mathjax-3.2.0] InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
[mathjax-3.2.0] ****************************************************
[mathjax-3.2.0] Package 'mathjax' is currently not installed
[mathjax-3.2.0] No legacy uninstaller found for 'mathjax'; nothing to do
[mathjax-3.2.0] src/mathjax -> /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst/Users/kwankyu/GitHub/sage-dev/local/share/mathjax
[mathjax-3.2.0] 
[mathjax-3.2.0] real	0m0.117s
[mathjax-3.2.0] user	0m0.015s
[mathjax-3.2.0] sys	0m0.099s
[mathjax-3.2.0] Copying package files from temporary location /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0/inst to /Users/kwankyu/GitHub/sage-dev/local
[mathjax-3.2.0] Successfully installed mathjax-3.2.0
[mathjax-3.2.0] Deleting temporary build directory
[mathjax-3.2.0] /Users/kwankyu/GitHub/sage-dev/local/var/tmp/sage/build/mathjax-3.2.0
[mathjax-3.2.0] Finished installing mathjax-3.2.0
```



---

archive/issue_comments_399765.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nAh, you need `./configure --enable-download-from-upstream-url`.",
    "created_at": "2022-04-14T04:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399765",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:72'>Comment 72:</a>
Ah, you need `./configure --enable-download-from-upstream-url`.



---

archive/issue_comments_399766.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96eb8b270eebf6f11c5e82340c050e4c959e9bbe\">96eb8b2</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d\">aba583d</a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>\n",
    "created_at": "2022-04-14T07:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399766",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:73'>Comment 73:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96eb8b270eebf6f11c5e82340c050e4c959e9bbe">96eb8b2</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d">aba583d</a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>




---

archive/issue_comments_399767.json:
```json
{
    "body": "Changed commit from **[1e24916](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)** to **[aba583d](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)**",
    "created_at": "2022-04-14T07:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1e24916](https://github.com/sagemath/sagetrac-mirror/commit/1e2491696d15badb2a30409a1b7203ebbc9325e9)** to **[aba583d](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)**



---

archive/issue_comments_399768.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nThe last commit is to lessen flickering in the reference main page because of slow mathjax rendering.",
    "created_at": "2022-04-14T07:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399768",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:74'>Comment 74:</a>
The last commit is to lessen flickering in the reference main page because of slow mathjax rendering.



---

archive/issue_events_339013.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-14T07:54:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339013"
}
```



---

archive/issue_comments_399769.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nIt seems there is nothing for us to do for a bit slow loading of mathjax3.\n\nLet's move on.",
    "created_at": "2022-04-14T07:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399769",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:75'>Comment 75:</a>
It seems there is nothing for us to do for a bit slow loading of mathjax3.

Let's move on.



---

archive/issue_comments_399770.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nReplying to [@kwankyu](#comment%3A72):\n> Ah, you need `./configure --enable-download-from-upstream-url`.\n\nOkay! Matthias (and everyone else), would it make sense to add this flag to the github actions?",
    "created_at": "2022-04-14T17:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399770",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:76'>Comment 76:</a>
Replying to [@kwankyu](#comment%3A72):
> Ah, you need `./configure --enable-download-from-upstream-url`.

Okay! Matthias (and everyone else), would it make sense to add this flag to the github actions?



---

archive/issue_comments_399771.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nYes, we already use it everywhere. Did we forget to add it in the ones that you added?",
    "created_at": "2022-04-14T17:51:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'>Comment 77:</a>
Yes, we already use it everywhere. Did we forget to add it in the ones that you added?



---

archive/issue_comments_399772.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nReplying to [@mkoeppe](#comment%3A77):\n> Yes, we already use it everywhere. \n\nA patchbot also failed in the same way.",
    "created_at": "2022-04-15T07:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399772",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:78'>Comment 78:</a>
Replying to [@mkoeppe](#comment%3A77):
> Yes, we already use it everywhere. 

A patchbot also failed in the same way.



---

archive/issue_comments_399773.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37\">7b43a31</a></td><td><code>Add enable-download-from-upstream-url to github actions</code></td></tr></table>\n",
    "created_at": "2022-04-16T17:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399773",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:79'>Comment 79:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37">7b43a31</a></td><td><code>Add enable-download-from-upstream-url to github actions</code></td></tr></table>




---

archive/issue_comments_399774.json:
```json
{
    "body": "Changed commit from **[aba583d](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)** to **[7b43a31](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)**",
    "created_at": "2022-04-16T17:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399774",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aba583d](https://github.com/sagemath/sagetrac-mirror/commit/aba583d9a0c7f94aa76246f9f27508c809c6fa1d)** to **[7b43a31](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)**



---

archive/issue_comments_399775.json:
```json
{
    "body": "<a id='comment:80'>Comment 80:</a>\nReplying to [@mkoeppe](#comment%3A77):\n> Yes, we already use it everywhere. Did we forget to add it in the ones that you added?\n\nThanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).",
    "created_at": "2022-04-16T19:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399775",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:80'>Comment 80:</a>
Replying to [@mkoeppe](#comment%3A77):
> Yes, we already use it everywhere. Did we forget to add it in the ones that you added?

Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).



---

archive/issue_comments_399776.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\nReplying to [@kwankyu](#comment%3A66):\n> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...\n\nI cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.\n\n- Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n- Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html",
    "created_at": "2022-04-16T19:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399776",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:81'>Comment 81:</a>
Replying to [@kwankyu](#comment%3A66):
> While I see no difference in the quality of typeset maths in mathjax3 docs from mathjax2 docs, I observe mathjax3 docs load slightly slower than mathjax2 docs. Do you see the same? This is strange because mathjax3 is supposed (said) to load faster than mathjax2...

I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.

- Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html
- Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html



---

archive/issue_comments_399777.json:
```json
{
    "body": "<a id='comment:82'>Comment 82:</a>\nI'm fine with your changes! Thanks",
    "created_at": "2022-04-16T19:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399777",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:82'>Comment 82:</a>
I'm fine with your changes! Thanks



---

archive/issue_comments_399778.json:
```json
{
    "body": "Reviewer: **Tobias Diez, ...**",
    "created_at": "2022-04-16T19:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399778",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez, ...**



---

archive/issue_comments_399779.json:
```json
{
    "body": "Dependencies: **#33724**",
    "created_at": "2022-04-16T19:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399779",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33724**



---

archive/issue_comments_399780.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nReplying to [@tobiasdiez](#comment%3A80):\n> Replying to [@mkoeppe](#comment%3A77):\n> > Yes, we already use it everywhere. Did we forget to add it in the ones that you added?\n\n> \n> Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).\n\nI've cherry-picked this onto #33724.",
    "created_at": "2022-04-16T19:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399780",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'>Comment 84:</a>
Replying to [@tobiasdiez](#comment%3A80):
> Replying to [@mkoeppe](#comment%3A77):
> > Yes, we already use it everywhere. Did we forget to add it in the ones that you added?

> 
> Thanks, I've now added it to the Build & Test and Build documentation workflows. The latter works now (the former has currently some issues with the ubuntu server, but that's not specific to this ticket).

I've cherry-picked this onto #33724.



---

archive/issue_comments_399781.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nOkay, thanks!",
    "created_at": "2022-04-16T21:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399781",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:85'>Comment 85:</a>
Okay, thanks!



---

archive/issue_comments_399782.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Kwankyu Lee, ...**",
    "created_at": "2022-04-16T23:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399782",
    "user": "https://github.com/kwankyu"
}
```

Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Kwankyu Lee, ...**



---

archive/issue_comments_399783.json:
```json
{
    "body": "<a id='comment:86'>Comment 86:</a>\nReplying to [@tobiasdiez](#comment%3A81):\n> I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.\n> \n> - Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n> - Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html\n\nOkay. That seems depend.",
    "created_at": "2022-04-16T23:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399783",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:86'>Comment 86:</a>
Replying to [@tobiasdiez](#comment%3A81):
> I cannot confirm these performance issues. On the contrary, the mathjax 3 version seems to load faster.
> 
> - Mathjax3: https://7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html
> - Mathjax2: https://625315e3e8aca22301c90442--sagemath-tobias.netlify.app/reference/manifolds/sage/manifolds/differentiable/vectorfield.html

Okay. That seems depend.



---

archive/issue_comments_399784.json:
```json
{
    "body": "<a id='comment:87'>Comment 87:</a>\nReplying to [@kwankyu](#comment%3A70):\n> For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.\n\nAccording to the answer, mathjax3 is not to blame if the performance issue is ever real. It's also not clear if the performance issue really exists. \n\nAs there is no other issue raised with the mathjax3 documentation, let's get this in.",
    "created_at": "2022-04-19T04:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399784",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:87'>Comment 87:</a>
Replying to [@kwankyu](#comment%3A70):
> For the issue, I am waiting for an answer to https://github.com/mathjax/MathJax/issues/2862.

According to the answer, mathjax3 is not to blame if the performance issue is ever real. It's also not clear if the performance issue really exists. 

As there is no other issue raised with the mathjax3 documentation, let's get this in.



---

archive/issue_events_339014.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-19T04:59:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339014"
}
```



---

archive/issue_events_339015.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-19T04:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339015"
}
```



---

archive/issue_comments_399785.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, Kwankyu Lee, ...** to **Tobias Diez, Kwankyu Lee**",
    "created_at": "2022-04-19T04:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399785",
    "user": "https://github.com/kwankyu"
}
```

Changed reviewer from **Tobias Diez, Kwankyu Lee, ...** to **Tobias Diez, Kwankyu Lee**



---

archive/issue_comments_399786.json:
```json
{
    "body": "<a id='comment:88'>Comment 88:</a>\nThanks! \n\nFor the performance issues, there are a few things not related to mathjax that could be improved: https://pagespeed.web.dev/report?url=https%3A%2F%2F7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app%2Freference%2Fmanifolds%2Fsage%2Fmanifolds%2Fdifferentiable%2Fvectorfield.html\n\nNotably, the `require` script is quite expensive to load.",
    "created_at": "2022-04-20T19:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399786",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:88'>Comment 88:</a>
Thanks! 

For the performance issues, there are a few things not related to mathjax that could be improved: https://pagespeed.web.dev/report?url=https%3A%2F%2F7b43a317c103400d467a6c8d65fb6d6181d4ee37--sagemath-tobias.netlify.app%2Freference%2Fmanifolds%2Fsage%2Fmanifolds%2Fdifferentiable%2Fvectorfield.html

Notably, the `require` script is quite expensive to load.



---

archive/issue_comments_399787.json:
```json
{
    "body": "<a id='comment:89'>Comment 89:</a>\nReplying to [@tobiasdiez](#comment%3A88):\n> Notably, the `require` script is quite expensive to load.\n\nYes. I noticed that. See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).",
    "created_at": "2022-04-21T00:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399787",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:89'>Comment 89:</a>
Replying to [@tobiasdiez](#comment%3A88):
> Notably, the `require` script is quite expensive to load.

Yes. I noticed that. See [#33320 comment:82](https://github.com/sagemath/sage/issues/33320#comment:82).



---

archive/issue_comments_399788.json:
```json
{
    "body": "Changed dependencies from **#33724** to **#33763**",
    "created_at": "2022-04-29T02:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399788",
    "user": "https://github.com/kwankyu"
}
```

Changed dependencies from **#33724** to **#33763**



---

archive/issue_events_339016.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:12:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339016"
}
```



---

archive/issue_events_339017.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:12:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339017"
}
```



---

archive/issue_comments_399789.json:
```json
{
    "body": "<a id='comment:91'>Comment 91:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85113706cfab44bd22842cc2825152d1510a4980\">8511370</a></td><td><code>Refactor sage/docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b0fae47181138da11dd9cc01a9b1b8233ab4cdb\">4b0fae4</a></td><td><code>Some obvious edits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6517de2d8c7f541c0614c7ec79b7446f9ab438bc\">6517de2</a></td><td><code>More edits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a645fecaaf234635e31149cc61998302ed3998\">d8a645f</a></td><td><code>Added instancedoc.py to sagemath-objects/MANIFEST.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b28eeace8e453b58562f05889d83b464e8aa420\">8b28eea</a></td><td><code>Upgrade to MathJax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c34be8ebf5653143da5efaab98049babe3641fe3\">c34be8e</a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0a5d39e7bdf9fe796580c54b00b3cb89133ea7d\">e0a5d39</a></td><td><code>Remove commented-out lines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cd2b499a7155cf6037965abbdad594200efa634\">1cd2b49</a></td><td><code>Add upstream_url</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1\">a72a8e3</a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>\n",
    "created_at": "2022-04-29T02:25:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399789",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:91'>Comment 91:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85113706cfab44bd22842cc2825152d1510a4980">8511370</a></td><td><code>Refactor sage/docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b0fae47181138da11dd9cc01a9b1b8233ab4cdb">4b0fae4</a></td><td><code>Some obvious edits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6517de2d8c7f541c0614c7ec79b7446f9ab438bc">6517de2</a></td><td><code>More edits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a645fecaaf234635e31149cc61998302ed3998">d8a645f</a></td><td><code>Added instancedoc.py to sagemath-objects/MANIFEST.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b28eeace8e453b58562f05889d83b464e8aa420">8b28eea</a></td><td><code>Upgrade to MathJax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c34be8ebf5653143da5efaab98049babe3641fe3">c34be8e</a></td><td><code>Fix mathjax3 bug in website/templates/index.html</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0a5d39e7bdf9fe796580c54b00b3cb89133ea7d">e0a5d39</a></td><td><code>Remove commented-out lines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cd2b499a7155cf6037965abbdad594200efa634">1cd2b49</a></td><td><code>Add upstream_url</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1">a72a8e3</a></td><td><code>Fix to make the reference main page less flickering</code></td></tr></table>




---

archive/issue_comments_399790.json:
```json
{
    "body": "Changed commit from **[7b43a31](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)** to **[a72a8e3](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)**",
    "created_at": "2022-04-29T02:25:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399790",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7b43a31](https://github.com/sagemath/sagetrac-mirror/commit/7b43a317c103400d467a6c8d65fb6d6181d4ee37)** to **[a72a8e3](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)**



---

archive/issue_events_339018.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339018"
}
```



---

archive/issue_events_339019.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T02:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339019"
}
```



---

archive/issue_comments_399791.json:
```json
{
    "body": "<a id='comment:92'>Comment 92:</a>\nRebased on the dependency #33763.",
    "created_at": "2022-04-29T02:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399791",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:92'>Comment 92:</a>
Rebased on the dependency #33763.



---

archive/issue_comments_399792.json:
```json
{
    "body": "Changed commit from **[a72a8e3](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)** to **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**",
    "created_at": "2022-04-29T03:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399792",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a72a8e3](https://github.com/sagemath/sagetrac-mirror/commit/a72a8e387ef56db5bc181a9b3c73172ba63f00e1)** to **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**



---

archive/issue_comments_399793.json:
```json
{
    "body": "<a id='comment:93'>Comment 93:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470\">2535a91</a></td><td><code>Restore changes to conf.py</code></td></tr></table>\n",
    "created_at": "2022-04-29T03:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399793",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:93'>Comment 93:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470">2535a91</a></td><td><code>Restore changes to conf.py</code></td></tr></table>




---

archive/issue_comments_399794.json:
```json
{
    "body": "<a id='comment:94'>Comment 94:</a>\nThe dependency got positive review.",
    "created_at": "2022-04-29T18:06:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399794",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:94'>Comment 94:</a>
The dependency got positive review.



---

archive/issue_events_339020.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T18:06:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339020"
}
```



---

archive/issue_events_339021.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-29T18:06:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339021"
}
```



---

archive/issue_comments_399795.json:
```json
{
    "body": "Changed branch from **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)** to **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**",
    "created_at": "2022-05-24T22:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399795",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/25833](https://github.com/sagemath/sagetrac-mirror/tree/public/25833)** to **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)**



---

archive/issue_events_339022.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-24T22:45:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339022"
}
```



---

archive/issue_events_339023.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa3b529c41eb6f23544d4b33d566019f314a0921",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-24T22:45:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25833#event-339023"
}
```



---

archive/issue_comments_399796.json:
```json
{
    "body": "Changed commit from **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)** to none",
    "created_at": "2022-05-30T19:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399796",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[2535a91](https://github.com/sagemath/sagetrac-mirror/commit/2535a91fbc2e94a683f2e840a281bf917d5ff470)** to none



---

archive/issue_comments_399797.json:
```json
{
    "body": "<a id='comment:96'>Comment 96:</a>\nWhy the double `mathjax/mathjax` subdir in the installation path? This looks weird and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)",
    "created_at": "2022-05-30T19:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399797",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:96'>Comment 96:</a>
Why the double `mathjax/mathjax` subdir in the installation path? This looks weird and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)



---

archive/issue_comments_399798.json:
```json
{
    "body": "<a id='comment:97'>Comment 97:</a>\nReplying to [@antonio-rojas](#comment%3A96):\n> Why the double `mathjax/mathjax` subdir in the installation path? This looks weird \n\nIf I remember correctly, that was the result of wishing to put the (second) `mathjax` directory into `_static` so that all mathjax files are kept in `_static/mathjax` and not mixed with other static files (unlike the situation with mathjax2), while not touching the spkg installation procedure (specifically `build/pkgs/mathjax/spkg-install.in`). Hence the tarball of spkg `mathjax` consists of a single directory `mathjax`.\n\n> and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)\n\nI don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?\n\nIf they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure.",
    "created_at": "2022-05-31T00:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399798",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:97'>Comment 97:</a>
Replying to [@antonio-rojas](#comment%3A96):
> Why the double `mathjax/mathjax` subdir in the installation path? This looks weird 

If I remember correctly, that was the result of wishing to put the (second) `mathjax` directory into `_static` so that all mathjax files are kept in `_static/mathjax` and not mixed with other static files (unlike the situation with mathjax2), while not touching the spkg installation procedure (specifically `build/pkgs/mathjax/spkg-install.in`). Hence the tarball of spkg `mathjax` consists of a single directory `mathjax`.

> and it will break using distro packages (so far only Arch seems to be shipping mathjax 3, but I doubt any distro will install it to `/usr/share/mathjax/mathjax`)

I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?

If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure.



---

archive/issue_comments_399799.json:
```json
{
    "body": "<a id='comment:98'>Comment 98:</a>\nReplying to [@kwankyu](#comment%3A97):\n> I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?\n> \n> If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure. \n\nOK, I see. The problem is that, if mathjax is installed in `/usr/share/mathjax` (as it is on Arch, and I assume other distros once they upgrade), sphinx will copy its content to `_static`, which is not what Sage expects, so mathjax won't work in docs. And setting `MATHJAX_DIR=/usr/share` is not an option, as this would copy the entire contents of `/usr/share` into `_static`.\n\nIt's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.\n\nFor now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`",
    "created_at": "2022-05-31T07:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399799",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:98'>Comment 98:</a>
Replying to [@kwankyu](#comment%3A97):
> I don't know how the distro package works. Can't they change the installation script to install the package as they want, that is, into `/usr/share/mathjax`?
> 
> If they can't, would it solve the problem that the spkg tarball consists of mathjax files instead of the single directory? If we do so, then we need to touch the spkg installation procedure. 

OK, I see. The problem is that, if mathjax is installed in `/usr/share/mathjax` (as it is on Arch, and I assume other distros once they upgrade), sphinx will copy its content to `_static`, which is not what Sage expects, so mathjax won't work in docs. And setting `MATHJAX_DIR=/usr/share` is not an option, as this would copy the entire contents of `/usr/share` into `_static`.

It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.

For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`



---

archive/issue_comments_399800.json:
```json
{
    "body": "<a id='comment:99'>Comment 99:</a>\nReplying to [@antonio-rojas](#comment%3A98):\n> It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.\n\nTrue. Thanks.\n \n> For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`\n\nI experimented with the idea of using a symbolic link instead of copying, but it didn't work. Still no better solution. Thanks.",
    "created_at": "2022-05-31T13:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25833",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25833#issuecomment-399800",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:99'>Comment 99:</a>
Replying to [@antonio-rojas](#comment%3A98):
> It's unfortunate that sphinx doesn't allow to specify a single dir to be copied into `_static`, this would allow the issue to be solved cleanly. I've opened a ticket upstream for this https://github.com/sphinx-doc/sphinx/issues/10499 so we can have a reasonable solution eventually.

True. Thanks.
 
> For now, if we can't come up with a better solution, I guess I can just copy the mathjax dir to some temporary location at build time and set that as `MATHJAX_DIR`

I experimented with the idea of using a symbolic link instead of copying, but it didn't work. Still no better solution. Thanks.
