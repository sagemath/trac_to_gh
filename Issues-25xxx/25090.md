# Issue 25090: Upgrade Normaliz version to 3.6.3 and PyNormaliz to 1.19

archive/issues_024853.json:
```json
{
    "body": "Upstream:\n\n[Normaliz](https://github.com/Normaliz/Normaliz/releases/download/v3.6.3/normaliz-3.6.3.tar.gz):\n\n```\n(cd upstream && wget 'https://github.com/Normaliz/Normaliz/releases/download/v3.6.3/normaliz-3.6.3.tar.gz')\n```\n\n[PyNormaliz 1.19](https://files.pythonhosted.org/packages/7f/e9/3c15d1fc8ebba8a2ed17fc0f209804dc1240166a686d2f592305efc9d25e/PyNormaliz-1.19.tar.gz):\n\n```\n(cd upstream && wget 'https://files.pythonhosted.org/packages/7f/e9/3c15d1fc8ebba8a2ed17fc0f209804dc1240166a686d2f592305efc9d25e/PyNormaliz-1.19.tar.gz') \n```\n\n\nSome more helper functions were included to facilitate the interfacing.\n\nCC:  @jplab @sebasguts @mo271 @videlec winfried @mkoeppe @tscrim\n\nKeywords: IMA-PolyGeom\n\nBranch/Commit: 36d5473d008d2d39a3740ed77783298ee5564e61\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe, Jean-Philippe Labb\u00e9\n\nDependencies: #22984\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25090\n\n",
    "closed_at": "2018-09-19T08:09:24Z",
    "created_at": "2018-04-03T17:43:21Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Upgrade Normaliz version to 3.6.3 and PyNormaliz to 1.19",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25090",
    "user": "https://github.com/mkoeppe"
}
```
Upstream:

[Normaliz](https://github.com/Normaliz/Normaliz/releases/download/v3.6.3/normaliz-3.6.3.tar.gz):

```
(cd upstream && wget 'https://github.com/Normaliz/Normaliz/releases/download/v3.6.3/normaliz-3.6.3.tar.gz')
```

[PyNormaliz 1.19](https://files.pythonhosted.org/packages/7f/e9/3c15d1fc8ebba8a2ed17fc0f209804dc1240166a686d2f592305efc9d25e/PyNormaliz-1.19.tar.gz):

```
(cd upstream && wget 'https://files.pythonhosted.org/packages/7f/e9/3c15d1fc8ebba8a2ed17fc0f209804dc1240166a686d2f592305efc9d25e/PyNormaliz-1.19.tar.gz') 
```


Some more helper functions were included to facilitate the interfacing.

CC:  @jplab @sebasguts @mo271 @videlec winfried @mkoeppe @tscrim

Keywords: IMA-PolyGeom

Branch/Commit: 36d5473d008d2d39a3740ed77783298ee5564e61

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe, Jean-Philippe Labbé

Dependencies: #22984

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25090





---

archive/issue_comments_348632.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2018-04-03T17:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348632",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_348633.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2018-04-03T19:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348633",
    "user": "https://github.com/jplab"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_348634.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2018-04-04T14:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348634",
    "user": "https://github.com/jplab"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_348635.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-04T17:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348636.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-04T19:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348637.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-04T20:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348638.json:
```json
{
    "body": "<a id='comment:11'></a>After a discussion with gh-sebasguts: A new version of pynormaliz will be released in the upcoming days, including extended documentation and latest changes to pynormaliz.\n\nIn order not to mix things up too much with #25097 and #25091, it should be put as a priority in the reviewing queue...",
    "created_at": "2018-04-09T16:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348638",
    "user": "https://github.com/jplab"
}
```

<a id='comment:11'></a>After a discussion with gh-sebasguts: A new version of pynormaliz will be released in the upcoming days, including extended documentation and latest changes to pynormaliz.

In order not to mix things up too much with #25097 and #25091, it should be put as a priority in the reviewing queue...



---

archive/issue_comments_348639.json:
```json
{
    "body": "<a id='comment:12'></a>The version numbers are now fixed.",
    "created_at": "2018-04-13T15:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348639",
    "user": "https://github.com/jplab"
}
```

<a id='comment:12'></a>The version numbers are now fixed.



---

archive/issue_comments_348640.json:
```json
{
    "body": "<a id='comment:14'></a>I merged the changes done over the week with a fresh branch on top of sage8.2.rc2.\n\nTo be tested!\n\n---\nNew commits:",
    "created_at": "2018-04-13T16:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348640",
    "user": "https://github.com/jplab"
}
```

<a id='comment:14'></a>I merged the changes done over the week with a fresh branch on top of sage8.2.rc2.

To be tested!

---
New commits:



---

archive/issue_comments_348641.json:
```json
{
    "body": "<a id='comment:15'></a>Both compile without issues on debian-stretch.",
    "created_at": "2018-04-13T17:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348641",
    "user": "https://github.com/jplab"
}
```

<a id='comment:15'></a>Both compile without issues on debian-stretch.



---

archive/issue_comments_348642.json:
```json
{
    "body": "<a id='comment:18'></a>I am current in Osnabr\u00fcck with Winfried, and perhaps now would be a good time to refresh this ticket, now that the version 1.12 and other update of Normaliz are already in the box...\n\nThere will be a new version of Normaliz released in the next few days, so I would wait until the upstream is updated and then change the ticket. I would do the same with pynormaliz and then go ahead to test it.\n\nFurther, with that release, it will make it easier to work with the algebraic polytopes ticket.",
    "created_at": "2018-07-05T08:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348642",
    "user": "https://github.com/jplab"
}
```

<a id='comment:18'></a>I am current in Osnabrück with Winfried, and perhaps now would be a good time to refresh this ticket, now that the version 1.12 and other update of Normaliz are already in the box...

There will be a new version of Normaliz released in the next few days, so I would wait until the upstream is updated and then change the ticket. I would do the same with pynormaliz and then go ahead to test it.

Further, with that release, it will make it easier to work with the algebraic polytopes ticket.



---

archive/issue_comments_348643.json:
```json
{
    "body": "<a id='comment:21'></a>New commits:",
    "created_at": "2018-07-11T09:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348643",
    "user": "https://github.com/jplab"
}
```

<a id='comment:21'></a>New commits:



---

archive/issue_comments_348644.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-11T10:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348644",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_348645.json:
```json
{
    "body": "<a id='comment:22'></a>I guess now this ticket needs proper review and testing.\n\nIt is a really good corner stone for the next steps in #25091 and #25097.\n\nPlease install on your platforms and check if it compiles...\n\nThere are a few new features along with the new versions.",
    "created_at": "2018-07-11T10:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348645",
    "user": "https://github.com/jplab"
}
```

<a id='comment:22'></a>I guess now this ticket needs proper review and testing.

It is a really good corner stone for the next steps in #25091 and #25097.

Please install on your platforms and check if it compiles...

There are a few new features along with the new versions.



---

archive/issue_comments_348646.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-07-11T10:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348646",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_348647.json:
```json
{
    "body": "<a id='comment:23'></a>I get a segmentation fault while testing 'backend_normaliz.py' while running\n\n```\nsage: p = Polyhedron(backend='normaliz')\nsage: TestSuite(p).run(skip=\"_test_pickling\")\n```\n\non the empty polyhedron.",
    "created_at": "2018-07-11T10:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348647",
    "user": "https://github.com/jplab"
}
```

<a id='comment:23'></a>I get a segmentation fault while testing 'backend_normaliz.py' while running

```
sage: p = Polyhedron(backend='normaliz')
sage: TestSuite(p).run(skip="_test_pickling")
```

on the empty polyhedron.



---

archive/issue_comments_348648.json:
```json
{
    "body": "<a id='comment:24'></a>The traceback I get is pasted below. Something wrong in PyNormaliz with \"._test_nonzero_equal()\" ?\n\n```\nsage: p = Polyhedron(backend='normaliz')\nsage: TestSuite(p).run(skip=\"_test_pickling\",verbose=True)\nrunning ._test_category() . . . pass\nrunning ._test_eq() . . . pass\nrunning ._test_new() . . . pass\nrunning ._test_nonzero_equal() . . .------------------------------------------------------------------------\n/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x6ad5)[0x7f4ba65eaad5]\n/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x6b7f)[0x7f4ba65eab7f]\n/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0xaf84)[0x7f4ba65eef84]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x110c0)[0x7f4bafb040c0]\n/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz6MatrixI10__gmp_exprIA1_12__mpz_structS3_EEC2Emm+0x9)[0x7f48e2c7ba29]\n/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE25prepare_input_constraintsERKSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0x37)[0x7f48e2cd83e7]\n/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE25process_multi_input_innerERSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0x8c5)[0x7f48e2d1ef75]\n/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE19process_multi_inputERKSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0xae)[0x7f48e2d2151e]\n```",
    "created_at": "2018-07-11T10:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348648",
    "user": "https://github.com/jplab"
}
```

<a id='comment:24'></a>The traceback I get is pasted below. Something wrong in PyNormaliz with "._test_nonzero_equal()" ?

```
sage: p = Polyhedron(backend='normaliz')
sage: TestSuite(p).run(skip="_test_pickling",verbose=True)
running ._test_category() . . . pass
running ._test_eq() . . . pass
running ._test_new() . . . pass
running ._test_nonzero_equal() . . .------------------------------------------------------------------------
/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x6ad5)[0x7f4ba65eaad5]
/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x6b7f)[0x7f4ba65eab7f]
/home/jplabbe/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0xaf84)[0x7f4ba65eef84]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x110c0)[0x7f4bafb040c0]
/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz6MatrixI10__gmp_exprIA1_12__mpz_structS3_EEC2Emm+0x9)[0x7f48e2c7ba29]
/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE25prepare_input_constraintsERKSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0x37)[0x7f48e2cd83e7]
/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE25process_multi_input_innerERSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0x8c5)[0x7f48e2d1ef75]
/home/jplabbe/sage/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE19process_multi_inputERKSt3mapINS_4Type9InputTypeESt6vectorIS9_IS4_SaIS4_EESaISB_EESt4lessIS8_ESaISt4pairIKS8_SD_EEE+0xae)[0x7f48e2d2151e]
```



---

archive/issue_comments_348649.json:
```json
{
    "body": "<a id='comment:25'></a>Interesting. I will have a look.",
    "created_at": "2018-07-11T11:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348649",
    "user": "https://github.com/sebasguts"
}
```

<a id='comment:25'></a>Interesting. I will have a look.



---

archive/issue_comments_348650.json:
```json
{
    "body": "<a id='comment:26'></a>Please let me know if you think that the problem is in Normaliz and send me the input.",
    "created_at": "2018-07-11T13:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348650",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:26'></a>Please let me know if you think that the problem is in Normaliz and send me the input.



---

archive/issue_comments_348651.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:25 gh-sebasguts]:\n> Interesting. I will have a look.\n\n\nAny idea where the segfault appears?",
    "created_at": "2018-07-16T08:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348651",
    "user": "https://github.com/jplab"
}
```

<a id='comment:27'></a>Replying to [comment:25 gh-sebasguts]:
> Interesting. I will have a look.


Any idea where the segfault appears?



---

archive/issue_comments_348652.json:
```json
{
    "body": "<a id='comment:28'></a>It would be good to see the definition of the empty polytope. Then we can investigate the issue further.",
    "created_at": "2018-07-16T08:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348652",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:28'></a>It would be good to see the definition of the empty polytope. Then we can investigate the issue further.



---

archive/issue_comments_348653.json:
```json
{
    "body": "<a id='comment:29'></a>The empty polyhedron runs into a Normaliz segmentation fault if the volume is computed. Will be taken care of.",
    "created_at": "2018-07-16T09:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348653",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:29'></a>The empty polyhedron runs into a Normaliz segmentation fault if the volume is computed. Will be taken care of.



---

archive/issue_comments_348654.json:
```json
{
    "body": "<a id='comment:30'></a>I made a `verbose=True` in the `TestSuite` to see where it fails, and in the `_test_nonzero_equal()` it calls `bool(self)` and `self.parent().zero()` which both produce segfaults on their own:\n\n```\nsage: P_empty = Polyhedron()\nsage: bool(P_empty)\nTrue\nsage: p = Polyhedron(vertices=[(1, 1)], rays=[(0, 1)],backend='normaliz',verbose=True)\n# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[1, 1, 1]], 'cone': [[0, 1]]})\n# ----8<---- Equivalent Normaliz input file ----8<----\namb_space 2\nsubspace 0\nvertices 1\n 1 1 1\ncone 1\n 0 1\n# ----8<-------------------8<-------------------8<----\nsage: bool(p)\nTrue\nsage: p_empty = Polyhedron(backend='normaliz',verbose=True)\nsage: bool(p_empty)\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\n/usr/local/bin/sage: line 3:  5585 Segmentation fault      ~/sage/./sage $@\n\n\nsage: p_empty = Polyhedron(backend='normaliz',verbose=True)\nsage: p_empty.parent()\nPolyhedra in ZZ^0\nsage: p_empty.parent().zero()\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\n/usr/local/bin/sage: line 3:  6354 Segmentation fault      ~/sage/./sage $@\n```\n\nNote that to create an empty polyhedron with the backend normaliz, no call to normaliz is done. So I do not think that the problem is at this level, but perhaps when dealing with the parents, it tries to call normaliz with something empty and it does not work...",
    "created_at": "2018-07-16T09:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348654",
    "user": "https://github.com/jplab"
}
```

<a id='comment:30'></a>I made a `verbose=True` in the `TestSuite` to see where it fails, and in the `_test_nonzero_equal()` it calls `bool(self)` and `self.parent().zero()` which both produce segfaults on their own:

```
sage: P_empty = Polyhedron()
sage: bool(P_empty)
True
sage: p = Polyhedron(vertices=[(1, 1)], rays=[(0, 1)],backend='normaliz',verbose=True)
# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[1, 1, 1]], 'cone': [[0, 1]]})
# ----8<---- Equivalent Normaliz input file ----8<----
amb_space 2
subspace 0
vertices 1
 1 1 1
cone 1
 0 1
# ----8<-------------------8<-------------------8<----
sage: bool(p)
True
sage: p_empty = Polyhedron(backend='normaliz',verbose=True)
sage: bool(p_empty)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
/usr/local/bin/sage: line 3:  5585 Segmentation fault      ~/sage/./sage $@


sage: p_empty = Polyhedron(backend='normaliz',verbose=True)
sage: p_empty.parent()
Polyhedra in ZZ^0
sage: p_empty.parent().zero()
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
/usr/local/bin/sage: line 3:  6354 Segmentation fault      ~/sage/./sage $@
```

Note that to create an empty polyhedron with the backend normaliz, no call to normaliz is done. So I do not think that the problem is at this level, but perhaps when dealing with the parents, it tries to call normaliz with something empty and it does not work...



---

archive/issue_comments_348655.json:
```json
{
    "body": "<a id='comment:31'></a>I could figure out where the segfault occurs and with which input:\n\n```\n# Calling PyNormaliz.NmzCone(**{'inhom_equations': [], 'inhom_inequalities': [[0]]})\n# ----8<---- Equivalent Normaliz input file ----8<----\namb_space 0\ninhom_equations 0\ninhom_inequalities 1\n 0\n# ----8<-------------------8<-------------------8<----\n```\n\nThe problem occurs in the `_init_from_Hrepresentation`, where we get the normaliz data: `{'inhom_equations': [], 'inhom_inequalities': [This is the Trac macro *0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#0-macro)}`\n\nSomehow normaliz/pynormaliz does not like that?\n\nI believe that dealing with the empty polyhedron at the normaliz level might help here?",
    "created_at": "2018-07-16T10:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348655",
    "user": "https://github.com/jplab"
}
```

<a id='comment:31'></a>I could figure out where the segfault occurs and with which input:

```
# Calling PyNormaliz.NmzCone(**{'inhom_equations': [], 'inhom_inequalities': [[0]]})
# ----8<---- Equivalent Normaliz input file ----8<----
amb_space 0
inhom_equations 0
inhom_inequalities 1
 0
# ----8<-------------------8<-------------------8<----
```

The problem occurs in the `_init_from_Hrepresentation`, where we get the normaliz data: `{'inhom_equations': [], 'inhom_inequalities': [This is the Trac macro *0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#0-macro)}`

Somehow normaliz/pynormaliz does not like that?

I believe that dealing with the empty polyhedron at the normaliz level might help here?



---

archive/issue_comments_348656.json:
```json
{
    "body": "<a id='comment:32'></a>The segmentation fault with Volume is not the cause of this problem. It cannot be reproduced with Normaliz itself because amb_space 0 is not a legal value so that Normaliz terminates with an error message.",
    "created_at": "2018-07-16T10:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348656",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:32'></a>The segmentation fault with Volume is not the cause of this problem. It cannot be reproduced with Normaliz itself because amb_space 0 is not a legal value so that Normaliz terminates with an error message.



---

archive/issue_comments_348657.json:
```json
{
    "body": "<a id='comment:33'></a>\n```\namb_space 0\ninhom_equations 0\ninhom_inequalities 1\n 0\n```\n\n\ndoes NOT define the empty polytope. The origin in the 0-dimensional space satisfies the inequality. If you replace the last0 by -1, you obtain the empty polytope.",
    "created_at": "2018-07-16T11:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348657",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:33'></a>
```
amb_space 0
inhom_equations 0
inhom_inequalities 1
 0
```


does NOT define the empty polytope. The origin in the 0-dimensional space satisfies the inequality. If you replace the last0 by -1, you obtain the empty polytope.



---

archive/issue_comments_348658.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 Winfried]:\n> \n> \n> ```\n> amb_space 0\n> inhom_equations 0\n> inhom_inequalities 1\n>  0\n> ```\n> \n> \n> does NOT define the empty polytope. The origin in the 0-dimensional space satisfies the inequality. If you replace the last0 by -1, you obtain the empty polytope.\n\n\nOh, interesting, so probably this would be a good way to initialize the empty polyhedron from the H-representation to pass it to normaliz.\n\nI'll check if I can fix that.",
    "created_at": "2018-07-16T14:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348658",
    "user": "https://github.com/jplab"
}
```

<a id='comment:34'></a>Replying to [comment:33 Winfried]:
> 
> 
> ```
> amb_space 0
> inhom_equations 0
> inhom_inequalities 1
>  0
> ```
> 
> 
> does NOT define the empty polytope. The origin in the 0-dimensional space satisfies the inequality. If you replace the last0 by -1, you obtain the empty polytope.


Oh, interesting, so probably this would be a good way to initialize the empty polyhedron from the H-representation to pass it to normaliz.

I'll check if I can fix that.



---

archive/issue_comments_348659.json:
```json
{
    "body": "<a id='comment:35'></a>The current `backend_normaliz` handles the empty polyhedron specially (actually sage has one empty polyhedron for each ambient space dimension!)\nIf this special casing could be removed completely with the current version of normaliz, that would be great!",
    "created_at": "2018-07-16T19:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348659",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>The current `backend_normaliz` handles the empty polyhedron specially (actually sage has one empty polyhedron for each ambient space dimension!)
If this special casing could be removed completely with the current version of normaliz, that would be great!



---

archive/issue_comments_348660.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 mkoeppe]:\n> The current `backend_normaliz` handles the empty polyhedron specially (actually sage has one empty polyhedron for each ambient space dimension!)\n> If this special casing could be removed completely with the current version of normaliz, that would be great!\n\n\nAgreed! I'll have a look if this would work with the new version.",
    "created_at": "2018-07-16T20:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348660",
    "user": "https://github.com/jplab"
}
```

<a id='comment:36'></a>Replying to [comment:35 mkoeppe]:
> The current `backend_normaliz` handles the empty polyhedron specially (actually sage has one empty polyhedron for each ambient space dimension!)
> If this special casing could be removed completely with the current version of normaliz, that would be great!


Agreed! I'll have a look if this would work with the new version.



---

archive/issue_comments_348661.json:
```json
{
    "body": "<a id='comment:37'></a>The embedding dimension is an essential parameter in Normaliz. If any simplification is desired, it must be done on the Sage side.\n\nSebastian and I have tried to correct all problems related to empty polytopes and to embedding dimension 0. Please pull normaliz/master and test again.",
    "created_at": "2018-07-17T12:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348661",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:37'></a>The embedding dimension is an essential parameter in Normaliz. If any simplification is desired, it must be done on the Sage side.

Sebastian and I have tried to correct all problems related to empty polytopes and to embedding dimension 0. Please pull normaliz/master and test again.



---

archive/issue_comments_348662.json:
```json
{
    "body": "<a id='comment:39'></a>#25707 added a cocoalib package to sage. Should consider adding it as a dependency; but it's currently an experimental package",
    "created_at": "2018-07-25T02:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348662",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>#25707 added a cocoalib package to sage. Should consider adding it as a dependency; but it's currently an experimental package



---

archive/issue_comments_348663.json:
```json
{
    "body": "<a id='comment:40'></a>How to properly get the 0-dimensional polytope consisting of the origin only in the 0-dimensional ambient space using the V-representation input consisting of `subspace`, `vertices` and `cone` in normaliz?\n\n```\n# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[1]], 'cone': []})\n# ----8<---- Equivalent Normaliz input file ----8<----\namb_space 0\nsubspace 0\nvertices 1\n 1\ncone 0\n# ----8<-------------------8<-------------------8<----\n```\n\nSomehow normaliz does not like the above, which is the format that sage currently gives to normaliz to create the `.zero()` element of the parent.",
    "created_at": "2018-07-30T09:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348663",
    "user": "https://github.com/jplab"
}
```

<a id='comment:40'></a>How to properly get the 0-dimensional polytope consisting of the origin only in the 0-dimensional ambient space using the V-representation input consisting of `subspace`, `vertices` and `cone` in normaliz?

```
# Calling PyNormaliz.NmzCone(**{'subspace': [], 'vertices': [[1]], 'cone': []})
# ----8<---- Equivalent Normaliz input file ----8<----
amb_space 0
subspace 0
vertices 1
 1
cone 0
# ----8<-------------------8<-------------------8<----
```

Somehow normaliz does not like the above, which is the format that sage currently gives to normaliz to create the `.zero()` element of the parent.



---

archive/issue_comments_348664.json:
```json
{
    "body": "<a id='comment:41'></a>I have run Normaliz (present master branch on GitHub) on this input. No problem in the output:\n\n\n```\n1 lattice points in polytope (module generators)\n0 Hilbert basis elements of recession monoid\n1 vertices of polyhedron\n0 extreme rays of recession cone\n1 support hyperplanes of polyhedron (homogenized)\n\nembedding dimension = 1\naffine dimension of the polyhedron = 0 (maximal)\nrank of recession monoid = 0 (polyhedron is polytope)\ninternal index = 1\n\ndehomogenization:\n1 \n\n\nmodule rank = 1\n\n***********************************************************************\n\n1 lattice points in polytope (module generators):\n 1\n\n0 Hilbert basis elements of recession monoid:\n\n1 vertices of polyhedron:\n 1\n\n0 extreme rays of recession cone:\n\n1 support hyperplanes of polyhedron (homogenized):\n 1\n\n```\n\nI think this is correct.The vector [1] is the origin in the 0-dim affine space after homogenization.",
    "created_at": "2018-07-30T09:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348664",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:41'></a>I have run Normaliz (present master branch on GitHub) on this input. No problem in the output:


```
1 lattice points in polytope (module generators)
0 Hilbert basis elements of recession monoid
1 vertices of polyhedron
0 extreme rays of recession cone
1 support hyperplanes of polyhedron (homogenized)

embedding dimension = 1
affine dimension of the polyhedron = 0 (maximal)
rank of recession monoid = 0 (polyhedron is polytope)
internal index = 1

dehomogenization:
1 


module rank = 1

***********************************************************************

1 lattice points in polytope (module generators):
 1

0 Hilbert basis elements of recession monoid:

1 vertices of polyhedron:
 1

0 extreme rays of recession cone:

1 support hyperplanes of polyhedron (homogenized):
 1

```

I think this is correct.The vector [1] is the origin in the 0-dim affine space after homogenization.



---

archive/issue_comments_348665.json:
```json
{
    "body": "<a id='comment:42'></a>Ok, I do not have the latest \"normaliz\" on my computer... \n\nI do not know exactly how to make sage use a different normaliz than the one installed _within_ sage when doing the usual `sage -i normaliz`.\n\nAnyhow, if it is possible to get the empty polyhedron and the 0-dim polytope in the latest version of normaliz. Then these problems should be fixed. Would it be reasonable to have a tiny release of normaliz soon and we could update this branch?",
    "created_at": "2018-07-30T09:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348665",
    "user": "https://github.com/jplab"
}
```

<a id='comment:42'></a>Ok, I do not have the latest "normaliz" on my computer... 

I do not know exactly how to make sage use a different normaliz than the one installed _within_ sage when doing the usual `sage -i normaliz`.

Anyhow, if it is possible to get the empty polyhedron and the 0-dim polytope in the latest version of normaliz. Then these problems should be fixed. Would it be reasonable to have a tiny release of normaliz soon and we could update this branch?



---

archive/issue_comments_348666.json:
```json
{
    "body": "<a id='comment:43'></a>I think the treatment of degenerate situations is o.k. now in normaliz. These minutes I am testing them on Qnormaliz. Once it is o.k., I will malke release 3.6.2.",
    "created_at": "2018-07-30T10:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348666",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:43'></a>I think the treatment of degenerate situations is o.k. now in normaliz. These minutes I am testing them on Qnormaliz. Once it is o.k., I will malke release 3.6.2.



---

archive/issue_comments_348667.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:43 Winfried]:\n> I think the treatment of degenerate situations is o.k. now in normaliz. These minutes I am testing them on Qnormaliz. Once it is o.k., I will malke release 3.6.2.\n\n\nGreat! Thanks a lot!",
    "created_at": "2018-07-30T11:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348667",
    "user": "https://github.com/jplab"
}
```

<a id='comment:44'></a>Replying to [comment:43 Winfried]:
> I think the treatment of degenerate situations is o.k. now in normaliz. These minutes I am testing them on Qnormaliz. Once it is o.k., I will malke release 3.6.2.


Great! Thanks a lot!



---

archive/issue_comments_348668.json:
```json
{
    "body": "<a id='comment:45'></a>Normaliz 3.6.2 released",
    "created_at": "2018-07-30T16:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348668",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

<a id='comment:45'></a>Normaliz 3.6.2 released



---

archive/issue_events_062918.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2018-08-05T12:38:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25090#event-62918"
}
```



---

archive/issue_comments_348669.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-30T21:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348670.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-15T06:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348671.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-15T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348672.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-15T23:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348673.json:
```json
{
    "body": "<a id='comment:52'></a>What is the status of this? Is it suppose to be in needs review? Is the empty polyhedron handled correctly now?",
    "created_at": "2018-09-15T23:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348673",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:52'></a>What is the status of this? Is it suppose to be in needs review? Is the empty polyhedron handled correctly now?



---

archive/issue_comments_348674.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-16T00:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348674",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_348675.json:
```json
{
    "body": "<a id='comment:53'></a>Empty polyhedron is fixed. Needs review.",
    "created_at": "2018-09-16T00:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348675",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>Empty polyhedron is fixed. Needs review.



---

archive/issue_comments_348676.json:
```json
{
    "body": "<a id='comment:54'></a>LGTM overall, but a few methods are missing doctests:\n\n- `_init_from_normaliz_data`\n- `_make_normaliz_cone`\n\nAlso, `INPUT:` items generally do not end with a period.",
    "created_at": "2018-09-16T01:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348676",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:54'></a>LGTM overall, but a few methods are missing doctests:

- `_init_from_normaliz_data`
- `_make_normaliz_cone`

Also, `INPUT:` items generally do not end with a period.



---

archive/issue_comments_348677.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-16T01:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348678.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-16T01:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348679.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-16T01:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348680.json:
```json
{
    "body": "<a id='comment:58'></a>Ready for review",
    "created_at": "2018-09-16T01:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348680",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>Ready for review



---

archive/issue_comments_348681.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-09-16T01:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348681",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_348682.json:
```json
{
    "body": "<a id='comment:59'></a>Thank you. LGTM.",
    "created_at": "2018-09-16T01:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348682",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:59'></a>Thank you. LGTM.



---

archive/issue_comments_348683.json:
```json
{
    "body": "<a id='comment:60'></a>Thanks for reviewing!",
    "created_at": "2018-09-16T01:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348683",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>Thanks for reviewing!



---

archive/issue_comments_348684.json:
```json
{
    "body": "<a id='comment:61'></a>\n```\nsage -t --long src/sage/geometry/polyhedron/backend_normaliz.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_normaliz.py\", line 451, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data\nFailed example:\n    P._get_nmzcone_data()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 659, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1070, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[1]>\", line 1, in <module>\n        P._get_nmzcone_data()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 464, in _get_nmzcone_data\n        import PyNormaliz\n    ImportError: No module named PyNormaliz\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_normaliz.py\", line 456, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data\nFailed example:\n    C = Polyhedron(backend='normaliz',rays=[[1,2],[2,1]])\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 659, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1070, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[2]>\", line 1, in <module>\n        C = Polyhedron(backend='normaliz',rays=[[Integer(1),Integer(2)],[Integer(2),Integer(1)]])\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/constructor.py\", line 600, in Polyhedron\n        return parent(Vrep, Hrep, convert=convert, verbose=verbose)\n      File \"sage/structure/parent.pyx\", line 923, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9706)\n        return mor._call_with_args(x, args, kwds)\n      File \"sage/structure/coerce_maps.pyx\", line 164, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5112)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 159, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5000)\n        return C._element_constructor(x, *args, **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/parent.py\", line 517, in _element_constructor_\n        return self.element_class(self, Vrep, Hrep, **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 156, in __init__\n        Polyhedron_base.__init__(self, parent, Vrep, Hrep, **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 124, in __init__\n        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 263, in _init_from_Vrepresentation\n        self._init_from_normaliz_data(data, verbose=verbose)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 192, in _init_from_normaliz_data\n        import PyNormaliz\n    ImportError: No module named PyNormaliz\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_normaliz.py\", line 457, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data\nFailed example:\n    C._get_nmzcone_data()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 659, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1070, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[3]>\", line 1, in <module>\n        C._get_nmzcone_data()\n    NameError: name 'C' is not defined\n**********************************************************************\n1 item had failures:\n   3 of   5 in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data\n    [12 tests, 3 failures, 0.14 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/geometry/polyhedron/backend_normaliz.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2018-09-16T13:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348684",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:61'></a>
```
sage -t --long src/sage/geometry/polyhedron/backend_normaliz.py
**********************************************************************
File "src/sage/geometry/polyhedron/backend_normaliz.py", line 451, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data
Failed example:
    P._get_nmzcone_data()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 659, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1070, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[1]>", line 1, in <module>
        P._get_nmzcone_data()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 464, in _get_nmzcone_data
        import PyNormaliz
    ImportError: No module named PyNormaliz
**********************************************************************
File "src/sage/geometry/polyhedron/backend_normaliz.py", line 456, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data
Failed example:
    C = Polyhedron(backend='normaliz',rays=[[1,2],[2,1]])
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 659, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1070, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[2]>", line 1, in <module>
        C = Polyhedron(backend='normaliz',rays=[[Integer(1),Integer(2)],[Integer(2),Integer(1)]])
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/constructor.py", line 600, in Polyhedron
        return parent(Vrep, Hrep, convert=convert, verbose=verbose)
      File "sage/structure/parent.pyx", line 923, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9706)
        return mor._call_with_args(x, args, kwds)
      File "sage/structure/coerce_maps.pyx", line 164, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5112)
        raise
      File "sage/structure/coerce_maps.pyx", line 159, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5000)
        return C._element_constructor(x, *args, **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/parent.py", line 517, in _element_constructor_
        return self.element_class(self, Vrep, Hrep, **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 156, in __init__
        Polyhedron_base.__init__(self, parent, Vrep, Hrep, **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 124, in __init__
        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 263, in _init_from_Vrepresentation
        self._init_from_normaliz_data(data, verbose=verbose)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 192, in _init_from_normaliz_data
        import PyNormaliz
    ImportError: No module named PyNormaliz
**********************************************************************
File "src/sage/geometry/polyhedron/backend_normaliz.py", line 457, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data
Failed example:
    C._get_nmzcone_data()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 659, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1070, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data[3]>", line 1, in <module>
        C._get_nmzcone_data()
    NameError: name 'C' is not defined
**********************************************************************
1 item had failures:
   3 of   5 in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._get_nmzcone_data
    [12 tests, 3 failures, 0.14 s]
----------------------------------------------------------------------
sage -t --long src/sage/geometry/polyhedron/backend_normaliz.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_348685.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-09-16T13:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348685",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_348686.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-16T16:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_348687.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-16T16:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348687",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_348688.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-09-16T22:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348688",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_348689.json:
```json
{
    "body": "<a id='comment:64'></a>Whoops, forgot to test on a machine that did not have (py)normaliz installed. Sorry Volker.",
    "created_at": "2018-09-16T22:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348689",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>Whoops, forgot to test on a machine that did not have (py)normaliz installed. Sorry Volker.



---

archive/issue_events_062919.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-19T08:09:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25090#event-62919"
}
```



---

archive/issue_comments_348690.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-19T08:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25090#issuecomment-348690",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
