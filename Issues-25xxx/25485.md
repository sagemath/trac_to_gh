# Issue 25485: reduced words in coxeter groups

archive/issues_025248.json:
```json
{
    "body": "Implement the braid orbit of a reduced word (and thus all reduced words) in a Coxeter group\n\nCC:  @tscrim jmichel tdouvropoulos @zabrocki @anneschilling\n\nKeywords: coxeter group, days93.51\n\nReviewer: Travis Scrimshaw\n\nAuthor: Christian Stump\n\nBranch: b4ebf17b588dbc1e7fedd038e3ca526fcb6a2785\n\nCommit: b4ebf17b588dbc1e7fedd038e3ca526fcb6a2785\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25485\n\n",
    "closed_at": "2018-06-11T16:31:12Z",
    "created_at": "2018-05-31T17:26:57Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "reduced words in coxeter groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25485",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
Implement the braid orbit of a reduced word (and thus all reduced words) in a Coxeter group

CC:  @tscrim jmichel tdouvropoulos @zabrocki @anneschilling

Keywords: coxeter group, days93.51

Reviewer: Travis Scrimshaw

Author: Christian Stump

Branch: b4ebf17b588dbc1e7fedd038e3ca526fcb6a2785

Commit: b4ebf17b588dbc1e7fedd038e3ca526fcb6a2785

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25485





---

archive/issue_comments_355480.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T06:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355481.json:
```json
{
    "body": "Changing keywords from \"\" to \"coxeter group, days93.51\".",
    "created_at": "2018-06-01T10:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355481",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing keywords from "" to "coxeter group, days93.51".



---

archive/issue_comments_355482.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-01T10:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355482",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_355483.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2018-06-01T10:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355483",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_355484.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-06-01T10:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355484",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_355485.json:
```json
{
    "body": "<a id='comment:3'></a>have to add some doctests still.\n\nQ: leave the old implementation or not?",
    "created_at": "2018-06-01T10:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355485",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:3'></a>have to add some doctests still.

Q: leave the old implementation or not?



---

archive/issue_comments_355486.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T10:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355487.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T10:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355488.json:
```json
{
    "body": "<a id='comment:6'></a>okay, now ready for review",
    "created_at": "2018-06-01T10:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355488",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:6'></a>okay, now ready for review



---

archive/issue_comments_355489.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T10:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355490.json:
```json
{
    "body": "<a id='comment:8'></a>Old:\n\n```\nsage: W = WeylGroup(['A',4])\nsage: w0 = WeylGroup(['A',4]).long_element()\nsage: %time len(w0.reduced_words())\nCPU times: user 1.78 s, sys: 17.4 ms, total: 1.8 s\nWall time: 1.76 s\n768\n```\nCurrent branch:\n\n```\nsage: %time len(w0.reduced_words())\nCPU times: user 7.36 ms, sys: 0 ns, total: 7.36 ms\nWall time: 7.19 ms\n768\n```",
    "created_at": "2018-06-01T11:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355490",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Old:

```
sage: W = WeylGroup(['A',4])
sage: w0 = WeylGroup(['A',4]).long_element()
sage: %time len(w0.reduced_words())
CPU times: user 1.78 s, sys: 17.4 ms, total: 1.8 s
Wall time: 1.76 s
768
```
Current branch:

```
sage: %time len(w0.reduced_words())
CPU times: user 7.36 ms, sys: 0 ns, total: 7.36 ms
Wall time: 7.19 ms
768
```



---

archive/issue_comments_355491.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2018-06-01T12:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355491",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_355492.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T12:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355493.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-01T16:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355493",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_355494.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-02T05:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355494",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_355495.json:
```json
{
    "body": "<a id='comment:12'></a>Failing doctests. Currently fixing.",
    "created_at": "2018-06-02T05:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355495",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Failing doctests. Currently fixing.



---

archive/issue_comments_355496.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-02T05:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355497.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-02T05:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355497",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_355498.json:
```json
{
    "body": "<a id='comment:14'></a>Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.",
    "created_at": "2018-06-02T05:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355498",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.



---

archive/issue_comments_355499.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 tscrim]:\n> Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.\n\n\nIt only changes the order of the output, right? I guess that is ok.",
    "created_at": "2018-06-02T08:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355499",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:15'></a>Replying to [comment:14 tscrim]:
> Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.


It only changes the order of the output, right? I guess that is ok.



---

archive/issue_comments_355500.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 aschilling]:\n> Replying to [comment:14 tscrim]:\n> > Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.\n\n> \n> It only changes the order of the output, right? I guess that is ok.\n\n\nIt also is now a list of tuples whereas before it was a list of lists. (The `sorted` is because the new algorithm does not have any promises of a consistent output order.)",
    "created_at": "2018-06-02T08:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355500",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Replying to [comment:15 aschilling]:
> Replying to [comment:14 tscrim]:
> > Mike, Anne, I put you in cc because I had to change one of the k-Schur function book tests.

> 
> It only changes the order of the output, right? I guess that is ok.


It also is now a list of tuples whereas before it was a list of lists. (The `sorted` is because the new algorithm does not have any promises of a consistent output order.)



---

archive/issue_comments_355501.json:
```json
{
    "body": "<a id='comment:17'></a>Is the tuple output necessary for the speed improvement?  If so, I would say it can be justified.  Otherwise I don't think its a good idea to change the output type where it isn't necessary.",
    "created_at": "2018-06-02T12:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355501",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:17'></a>Is the tuple output necessary for the speed improvement?  If so, I would say it can be justified.  Otherwise I don't think its a good idea to change the output type where it isn't necessary.



---

archive/issue_comments_355502.json:
```json
{
    "body": "<a id='comment:18'></a>> Is the tuple output necessary for the speed improvement? If so, I would say it can be justified. Otherwise I don't think its a good idea to change the output type where it isn't necessary. \n\n\nYes it is in the following sense. The new algorithm is as follows: take any tuple of integers (a reduced word) and a list of homogeneous replacement rules (braid relations, homogeneous meaning that the replacements do not change length), the algorithms is a brute force computation of this orbit by collecting new tuples into a set to be checked against. (The algorithm can actually be used without reference to reduced words or braid relations.)\n\nSo we do need to use tuples for hashing.",
    "created_at": "2018-06-02T12:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355502",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:18'></a>> Is the tuple output necessary for the speed improvement? If so, I would say it can be justified. Otherwise I don't think its a good idea to change the output type where it isn't necessary. 


Yes it is in the following sense. The new algorithm is as follows: take any tuple of integers (a reduced word) and a list of homogeneous replacement rules (braid relations, homogeneous meaning that the replacements do not change length), the algorithms is a brute force computation of this orbit by collecting new tuples into a set to be checked against. (The algorithm can actually be used without reference to reduced words or braid relations.)

So we do need to use tuples for hashing.



---

archive/issue_comments_355503.json:
```json
{
    "body": "<a id='comment:19'></a>Is there significant loss of speed by replacing the line\n\n```\n            return list(BraidOrbit(word, self.parent().braid_relations()))\n```\nby\n\n```\n            return [list(w) for w in BraidOrbit(word, self.parent().braid_relations())]\n```\n?",
    "created_at": "2018-06-02T12:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355503",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:19'></a>Is there significant loss of speed by replacing the line

```
            return list(BraidOrbit(word, self.parent().braid_relations()))
```
by

```
            return [list(w) for w in BraidOrbit(word, self.parent().braid_relations())]
```
?



---

archive/issue_comments_355504.json:
```json
{
    "body": "<a id='comment:20'></a>\n```\nsage: W = CoxeterGroup(['A',5])\nsage: w = W.long_element()\nsage: %time len(w.reduced_words())\nCPU times: user 1.43 s, sys: 0 ns, total: 1.43 s\nWall time: 1.43 s\n292864\nsage: %time len([ list(rw) for rw in w.reduced_words()])\nCPU times: user 1.92 s, sys: 44.4 ms, total: 1.97 s\nWall time: 1.93 s\n292864\n```",
    "created_at": "2018-06-02T12:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355504",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:20'></a>
```
sage: W = CoxeterGroup(['A',5])
sage: w = W.long_element()
sage: %time len(w.reduced_words())
CPU times: user 1.43 s, sys: 0 ns, total: 1.43 s
Wall time: 1.43 s
292864
sage: %time len([ list(rw) for rw in w.reduced_words()])
CPU times: user 1.92 s, sys: 44.4 ms, total: 1.97 s
Wall time: 1.93 s
292864
```



---

archive/issue_comments_355505.json:
```json
{
    "body": "<a id='comment:21'></a>I somewhat agree that it is weird that `reduced_word` outputs a list while `reduced_words` outputs tuples.\n\nOn the other hand, it seems to me that tuples would be more reasonable altogether because a reduced word is something that \"cannot be changed by hand\". But I also see that the `list` features might be used in rather many places in main Sage and probably even more in personal code.",
    "created_at": "2018-06-02T13:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355505",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:21'></a>I somewhat agree that it is weird that `reduced_word` outputs a list while `reduced_words` outputs tuples.

On the other hand, it seems to me that tuples would be more reasonable altogether because a reduced word is something that "cannot be changed by hand". But I also see that the `list` features might be used in rather many places in main Sage and probably even more in personal code.



---

archive/issue_comments_355506.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-02T13:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355506",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_355507.json:
```json
{
    "body": "<a id='comment:22'></a>Back to \"needs work\" because it fails on non-int index sets.",
    "created_at": "2018-06-02T13:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355507",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:22'></a>Back to "needs work" because it fails on non-int index sets.



---

archive/issue_comments_355508.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-02T13:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355509.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-02T13:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355509",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_355510.json:
```json
{
    "body": "<a id='comment:25'></a>IMO, tuples and lists are the same thing except for hashability. So I don't think such a change is important.\n\nThat being said, `braid_relations` should not be cached for the mutability (and it is not expensive enough or called often enough to warrant it).",
    "created_at": "2018-06-02T13:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355510",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>IMO, tuples and lists are the same thing except for hashability. So I don't think such a change is important.

That being said, `braid_relations` should not be cached for the mutability (and it is not expensive enough or called often enough to warrant it).



---

archive/issue_comments_355511.json:
```json
{
    "body": "<a id='comment:26'></a>> or called often enough\n\n\nThe reason I added the `cached_method` was the situation that I want to compute all reduced words of all elements in a group. I find it unreasonable to to explicitly compute the braid relations for each element again (which might take much more time than computing the orbit).\n\nJust checked, it is an overhead of 10%.",
    "created_at": "2018-06-02T13:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355511",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:26'></a>> or called often enough


The reason I added the `cached_method` was the situation that I want to compute all reduced words of all elements in a group. I find it unreasonable to to explicitly compute the braid relations for each element again (which might take much more time than computing the orbit).

Just checked, it is an overhead of 10%.



---

archive/issue_comments_355512.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 stumpc5]:\n> > or called often enough\n\n> \n> The reason I added the `cached_method` was the situation that I want to compute all reduced words of all elements in a group. I find it unreasonable to to explicitly compute the braid relations for each element again (which might take much more time than computing the orbit).\n> \n> Just checked, it is an overhead of 10%.\n\n\nIt is mutable output, therefore should not be a `cached_method`.\n\nI am also being wary of an over-reliance on caching things, which can lead to memory leaks (nearly everything for this implementation is cached, which I am not saying it does give a memory leak, but it does bloat the memory usage.)",
    "created_at": "2018-06-02T13:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355512",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>Replying to [comment:26 stumpc5]:
> > or called often enough

> 
> The reason I added the `cached_method` was the situation that I want to compute all reduced words of all elements in a group. I find it unreasonable to to explicitly compute the braid relations for each element again (which might take much more time than computing the orbit).
> 
> Just checked, it is an overhead of 10%.


It is mutable output, therefore should not be a `cached_method`.

I am also being wary of an over-reliance on caching things, which can lead to memory leaks (nearly everything for this implementation is cached, which I am not saying it does give a memory leak, but it does bloat the memory usage.)



---

archive/issue_comments_355513.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-02T13:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355513",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_355514.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 tscrim]:\n> IMO, tuples and lists are the same thing except for hashability. So I don't think such a change is important.\n\n\nIts not important, but why mess up people's code with random unnecessary changes?  The `reduced_words` code has been in Sage for a long time and the choice was made that it would return lists.  For instance (and I'm not a big user of reduced words), but I looked in some of my files and found random places where code would need to be updated e.g.:\n\n```\ndef gen_loops( w ):\n    R = w.reduced_words()\n    if w==G.first():\n        return [(0,0),(1,1),(2,2),(3,3)]\n    return map(tuple,[w1 + list(reversed(w2)) for w1 in R for w2 in R if w1[-1]!=w2[-1]])\n```\nSimple fix... but I would request that you don't make a change like that unless its necessary.",
    "created_at": "2018-06-02T19:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355514",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:28'></a>Replying to [comment:25 tscrim]:
> IMO, tuples and lists are the same thing except for hashability. So I don't think such a change is important.


Its not important, but why mess up people's code with random unnecessary changes?  The `reduced_words` code has been in Sage for a long time and the choice was made that it would return lists.  For instance (and I'm not a big user of reduced words), but I looked in some of my files and found random places where code would need to be updated e.g.:

```
def gen_loops( w ):
    R = w.reduced_words()
    if w==G.first():
        return [(0,0),(1,1),(2,2),(3,3)]
    return map(tuple,[w1 + list(reversed(w2)) for w1 in R for w2 in R if w1[-1]!=w2[-1]])
```
Simple fix... but I would request that you don't make a change like that unless its necessary.



---

archive/issue_comments_355515.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-03T05:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355516.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-03T12:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355517.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-04T09:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355518.json:
```json
{
    "body": "<a id='comment:32'></a>Hi Travis, I agree that values of cached methods should be immutable. On the other hand, I do not agree that such rather cheap methods should not be cached. I'd rather think that all sort of \"elementary information\" about Coxeter groups should be cached. This is because there are simply **not many** Coxeter groups, so saving such information will never fill up the memory (unless you want to keep zillions of Coxeter groups in memory together with tons of their elementary information). It is a totally different situation for element methods where it is much more crucial to keep track of which information should be kept in memory and which should rather be recomputed per default.\n\nThis being said, I don't care enough here, so I simply removed the `chached_method`.",
    "created_at": "2018-06-04T09:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355518",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:32'></a>Hi Travis, I agree that values of cached methods should be immutable. On the other hand, I do not agree that such rather cheap methods should not be cached. I'd rather think that all sort of "elementary information" about Coxeter groups should be cached. This is because there are simply **not many** Coxeter groups, so saving such information will never fill up the memory (unless you want to keep zillions of Coxeter groups in memory together with tons of their elementary information). It is a totally different situation for element methods where it is much more crucial to keep track of which information should be kept in memory and which should rather be recomputed per default.

This being said, I don't care enough here, so I simply removed the `chached_method`.



---

archive/issue_comments_355519.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-04T09:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355519",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_355520.json:
```json
{
    "body": "<a id='comment:34'></a>Like I said, I am just expressing my caution on caching everything; I did not mean to imply that it had to be removed for a positive review (except for the mutability issue).\n\nThank you for all the fixes.",
    "created_at": "2018-06-05T00:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355520",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>Like I said, I am just expressing my caution on caching everything; I did not mean to imply that it had to be removed for a positive review (except for the mutability issue).

Thank you for all the fixes.



---

archive/issue_comments_355521.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-05T00:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355521",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_355522.json:
```json
{
    "body": "<a id='comment:35'></a>\n```\nsage -t --long src/sage/categories/coxeter_groups.py  # 4 doctests failed\n```",
    "created_at": "2018-06-07T19:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355522",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
```
sage -t --long src/sage/categories/coxeter_groups.py  # 4 doctests failed
```



---

archive/issue_comments_355523.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-07T19:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355523",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_355524.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-08T02:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355525.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-06-08T02:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355525",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_355526.json:
```json
{
    "body": "<a id='comment:37'></a>Some tests needed to be marked as `gap3`.",
    "created_at": "2018-06-08T02:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355526",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>Some tests needed to be marked as `gap3`.



---

archive/issue_comments_355527.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-11T16:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25485#issuecomment-355527",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_063935.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-11T16:31:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25485",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25485#event-63935"
}
```
