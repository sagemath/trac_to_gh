# Issue 25939: error in Well's algorithm for canonical height

archive/issues_025702.json:
```json
{
    "body": "The following example fails\n\n```\nsage: P.<x,y>=ProjectiveSpace(QQ,1)\nsage: f=DynamicalSystem([2*( -2*x^3 + 3*(x^2*y)) + c*y^3,3*y^3])\nsage: f.canonical_height(P(1,0))\n```\nThe issue appears to be that the resultant is check to be > 1, as opposed to absolute value > 1, so the loop is never entered.\n\nBranch/Commit: [3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Ben Hutz\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25939\n\n",
    "closed_at": "2018-08-11T16:55:22Z",
    "created_at": "2018-07-26T16:48:19Z",
    "labels": [
        "component: dynamics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "error in Well's algorithm for canonical height",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25939",
    "user": "https://github.com/bhutz"
}
```
The following example fails

```
sage: P.<x,y>=ProjectiveSpace(QQ,1)
sage: f=DynamicalSystem([2*( -2*x^3 + 3*(x^2*y)) + c*y^3,3*y^3])
sage: f.canonical_height(P(1,0))
```
The issue appears to be that the resultant is check to be > 1, as opposed to absolute value > 1, so the loop is never entered.

Branch/Commit: [3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)

Reviewer: Frédéric Chapoton

Author: Ben Hutz

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25939





---

archive/issue_comments_500134.json:
```json
{
    "body": "Branch: [u/bhutz/25939_wells_error](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/25939_wells_error)",
    "created_at": "2018-07-26T16:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500134",
    "user": "https://github.com/bhutz"
}
```

Branch: [u/bhutz/25939_wells_error](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/25939_wells_error)



---

archive/issue_comments_500135.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-26T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500135",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_500136.json:
```json
{
    "body": "Author: Ben Hutz",
    "created_at": "2018-07-26T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500136",
    "user": "https://github.com/bhutz"
}
```

Author: Ben Hutz



---

archive/issue_comments_500137.json:
```json
{
    "body": "Commit: [3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)",
    "created_at": "2018-07-26T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500137",
    "user": "https://github.com/bhutz"
}
```

Commit: [3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)



---

archive/issue_comments_500138.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[3b2412d](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)|`25939: fix error is Well's canonical height alg`|",
    "created_at": "2018-07-26T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500138",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[3b2412d](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)|`25939: fix error is Well's canonical height alg`|



---

archive/issue_comments_500139.json:
```json
{
    "body": "Reviewer: Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2018-08-09T15:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500139",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: Frédéric Chapoton



---

archive/issue_comments_500140.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-09T15:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500140",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_500141.json:
```json
{
    "body": "<a id='comment:3'></a>\nok",
    "created_at": "2018-08-09T15:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500141",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
ok



---

archive/issue_comments_500142.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-11T16:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500142",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_500143.json:
```json
{
    "body": "Changing branch from \"[u/bhutz/25939_wells_error](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/25939_wells_error)\" to \"[3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)\"",
    "created_at": "2018-08-11T16:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25939#issuecomment-500143",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/bhutz/25939_wells_error](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/25939_wells_error)" to "[3b2412d7416e450b34695f0957b2caf41197f919](https://github.com/sagemath/sagetrac-mirror/commit/3b2412d7416e450b34695f0957b2caf41197f919)"



---

archive/issue_events_073689.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-11T16:55:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25939",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25939#event-73689"
}
```
