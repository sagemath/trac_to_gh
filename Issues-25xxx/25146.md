# Issue 25146: Cleanup of AbstractPartitionDiagram

archive/issues_024909.json:
```json
{
    "body": "The `AbstractPartitionDiagram` class from diagram_algebra.py inherits from `SetPartitions` and many of the methods will fail if one tries to use them because they assume that the base set is `\\{1,2,...,n\\}`.\n\nThis ticket will factor out the relevant classes from `SetPartition` and have `AbstractPartitionDiagram` inherit only those.\n\nCC:  @darijgr @alauve @tscrim @ghseeli @srdoty\n\nKeywords: IMA coding sprint, CHAs, set partitions, diagram algebras\n\nBranch/Commit: e71d82a36a99fad05a17c379ca1ac6db5ce21751\n\nReviewer: Travis Scrimshaw, Mike Zabrocki\n\nAuthor: Mike Zabrocki, Travis Scrimshaw\n\nDependencies: #24323\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25146\n\n",
    "closed_at": "2018-05-14T17:36:01Z",
    "created_at": "2018-04-11T15:31:00Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Cleanup of AbstractPartitionDiagram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25146",
    "user": "https://github.com/zabrocki"
}
```
The `AbstractPartitionDiagram` class from diagram_algebra.py inherits from `SetPartitions` and many of the methods will fail if one tries to use them because they assume that the base set is `\{1,2,...,n\}`.

This ticket will factor out the relevant classes from `SetPartition` and have `AbstractPartitionDiagram` inherit only those.

CC:  @darijgr @alauve @tscrim @ghseeli @srdoty

Keywords: IMA coding sprint, CHAs, set partitions, diagram algebras

Branch/Commit: e71d82a36a99fad05a17c379ca1ac6db5ce21751

Reviewer: Travis Scrimshaw, Mike Zabrocki

Author: Mike Zabrocki, Travis Scrimshaw

Dependencies: #24323

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25146





---

archive/issue_comments_479521.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-12T21:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479521",
    "user": "https://github.com/zabrocki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_479522.json:
```json
{
    "body": "Changing commit from \"\" to \"1d651d513ecd70917a785c6cf0442ca0cf4e9f60\"",
    "created_at": "2018-04-12T21:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479522",
    "user": "https://github.com/zabrocki"
}
```

Changing commit from "" to "1d651d513ecd70917a785c6cf0442ca0cf4e9f60"



---

archive/issue_comments_479523.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[179ce29](https://git.sagemath.org/sage.git/commit?id=179ce29bce4e76ac162da96354eb43a274a481b6)|`Fixing options for Brauer diagrams and algebra.`|\n|[64901e3](https://git.sagemath.org/sage.git/commit?id=64901e3a120305590ee241761ec38831e3037893)|`additions to the documentation to explain the compact notation`|\n|[1d651d5](https://git.sagemath.org/sage.git/commit?id=1d651d513ecd70917a785c6cf0442ca0cf4e9f60)|`added element classes specfic to subclasses, methods to element classes, factor set partition methods`|",
    "created_at": "2018-04-12T21:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479523",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[179ce29](https://git.sagemath.org/sage.git/commit?id=179ce29bce4e76ac162da96354eb43a274a481b6)|`Fixing options for Brauer diagrams and algebra.`|
|[64901e3](https://git.sagemath.org/sage.git/commit?id=64901e3a120305590ee241761ec38831e3037893)|`additions to the documentation to explain the compact notation`|
|[1d651d5](https://git.sagemath.org/sage.git/commit?id=1d651d513ecd70917a785c6cf0442ca0cf4e9f60)|`added element classes specfic to subclasses, methods to element classes, factor set partition methods`|



---

archive/issue_comments_479524.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#24323\"",
    "created_at": "2018-04-12T21:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479524",
    "user": "https://github.com/zabrocki"
}
```

Changing dependencies from "" to "#24323"



---

archive/issue_comments_479525.json:
```json
{
    "body": "Changing branch from \"\" to \"public/cleanup_diagrams-25146\"",
    "created_at": "2018-04-12T21:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479525",
    "user": "https://github.com/zabrocki"
}
```

Changing branch from "" to "public/cleanup_diagrams-25146"



---

archive/issue_comments_479526.json:
```json
{
    "body": "Changing commit from \"1d651d513ecd70917a785c6cf0442ca0cf4e9f60\" to \"bcad2c4d4e294dfcc56a7ea950e4984d10e1d549\"",
    "created_at": "2018-04-12T23:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1d651d513ecd70917a785c6cf0442ca0cf4e9f60" to "bcad2c4d4e294dfcc56a7ea950e4984d10e1d549"



---

archive/issue_comments_479527.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[bcad2c4](https://git.sagemath.org/sage.git/commit/?id=bcad2c4d4e294dfcc56a7ea950e4984d10e1d549)|`cleanup advice from Travis, added missing doctests, restored previous partition algebra iterator`|",
    "created_at": "2018-04-12T23:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[bcad2c4](https://git.sagemath.org/sage.git/commit/?id=bcad2c4d4e294dfcc56a7ea950e4984d10e1d549)|`cleanup advice from Travis, added missing doctests, restored previous partition algebra iterator`|



---

archive/issue_comments_479528.json:
```json
{
    "body": "<a id='comment:3'></a>\nWouldn't `max_block_size` be good to have in the general setpartition class - if needed at all?\n\n(I somehow doubt it's useful, because typing `max(len(b) for b in S)` is quite brief. On the other hand, it is a very useful invariant.  Besides, `max` takes an iterator, so the brackets can be omitted.)\n\nIt's a great ticket, in any case!",
    "created_at": "2018-04-13T05:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479528",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'></a>
Wouldn't `max_block_size` be good to have in the general setpartition class - if needed at all?

(I somehow doubt it's useful, because typing `max(len(b) for b in S)` is quite brief. On the other hand, it is a very useful invariant.  Besides, `max` takes an iterator, so the brackets can be omitted.)

It's a great ticket, in any case!



---

archive/issue_comments_479529.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[737d383](https://git.sagemath.org/sage.git/commit/?id=737d383992ac01ac315b5458ed55d8642900c962)|`doc test +1/2 iterators, move max_block_size, remove unused import statement`|",
    "created_at": "2018-04-13T14:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[737d383](https://git.sagemath.org/sage.git/commit/?id=737d383992ac01ac315b5458ed55d8642900c962)|`doc test +1/2 iterators, move max_block_size, remove unused import statement`|



---

archive/issue_comments_479530.json:
```json
{
    "body": "Changing commit from \"bcad2c4d4e294dfcc56a7ea950e4984d10e1d549\" to \"737d383992ac01ac315b5458ed55d8642900c962\"",
    "created_at": "2018-04-13T14:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bcad2c4d4e294dfcc56a7ea950e4984d10e1d549" to "737d383992ac01ac315b5458ed55d8642900c962"



---

archive/issue_comments_479531.json:
```json
{
    "body": "Changing commit from \"737d383992ac01ac315b5458ed55d8642900c962\" to \"783bca55ffff14aef7448cc0c655295f957b3275\"",
    "created_at": "2018-04-13T14:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "737d383992ac01ac315b5458ed55d8642900c962" to "783bca55ffff14aef7448cc0c655295f957b3275"



---

archive/issue_comments_479532.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[783bca5](https://git.sagemath.org/sage.git/commit/?id=783bca55ffff14aef7448cc0c655295f957b3275)|`max takes an iterator`|",
    "created_at": "2018-04-13T14:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[783bca5](https://git.sagemath.org/sage.git/commit/?id=783bca55ffff14aef7448cc0c655295f957b3275)|`max takes an iterator`|



---

archive/issue_comments_479533.json:
```json
{
    "body": "<a id='comment:7'></a>\nI moved the `max_block_size` to `AbstractSetPartitions`, for diagram algebras I thought it was an invariant worth giving a name to.",
    "created_at": "2018-04-13T14:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479533",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:7'></a>
I moved the `max_block_size` to `AbstractSetPartitions`, for diagram algebras I thought it was an invariant worth giving a name to.



---

archive/issue_comments_479534.json:
```json
{
    "body": "Changing commit from \"783bca55ffff14aef7448cc0c655295f957b3275\" to \"d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c\"",
    "created_at": "2018-04-13T15:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "783bca55ffff14aef7448cc0c655295f957b3275" to "d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c"



---

archive/issue_comments_479535.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[d0c9fbd](https://git.sagemath.org/sage.git/commit/?id=d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c)|`move (restore) is_planar as a standalone function`|",
    "created_at": "2018-04-13T15:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[d0c9fbd](https://git.sagemath.org/sage.git/commit/?id=d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c)|`move (restore) is_planar as a standalone function`|



---

archive/issue_comments_479536.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n|[15aa908](https://git.sagemath.org/sage.git/commit/?id=15aa908aec34ebb25c34730b84dc2e27c8b271ef)|`added diagram algebras to the list of Subsets and set partitions doc, moved is_planar`|",
    "created_at": "2018-04-13T15:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
|[15aa908](https://git.sagemath.org/sage.git/commit/?id=15aa908aec34ebb25c34730b84dc2e27c8b271ef)|`added diagram algebras to the list of Subsets and set partitions doc, moved is_planar`|



---

archive/issue_comments_479537.json:
```json
{
    "body": "Changing commit from \"d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c\" to \"15aa908aec34ebb25c34730b84dc2e27c8b271ef\"",
    "created_at": "2018-04-13T15:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d0c9fbd619c0d0c63a4e5c9a8934bf004168c79c" to "15aa908aec34ebb25c34730b84dc2e27c8b271ef"



---

archive/issue_comments_479538.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-13T16:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479538",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479539.json:
```json
{
    "body": "<a id='comment:10'></a>\nThank you Mike.",
    "created_at": "2018-04-13T16:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479539",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Thank you Mike.



---

archive/issue_comments_479540.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-04-13T16:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479540",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_479541.json:
```json
{
    "body": "<a id='comment:11'></a>\nThank you for the review!",
    "created_at": "2018-04-13T17:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479541",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:11'></a>
Thank you for the review!



---

archive/issue_comments_479542.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-04-23T22:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479542",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_479543.json:
```json
{
    "body": "<a id='comment:12'></a>\nI forgot to run the long tests. I am getting the same failure as the patchbot.",
    "created_at": "2018-04-23T22:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479543",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
I forgot to run the long tests. I am getting the same failure as the patchbot.



---

archive/issue_comments_479544.json:
```json
{
    "body": "Changing commit from \"15aa908aec34ebb25c34730b84dc2e27c8b271ef\" to \"dd77d096620f8f107b46e1a0f1c3263cd546cf2a\"",
    "created_at": "2018-04-23T22:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15aa908aec34ebb25c34730b84dc2e27c8b271ef" to "dd77d096620f8f107b46e1a0f1c3263cd546cf2a"



---

archive/issue_comments_479545.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|\n|[877a1b0](https://git.sagemath.org/sage.git/commit/?id=877a1b0ccb5f7597e23b3ad69ea67ac109005da9)|`Merge branch 'public/cleanup_diagrams-25146' of git://trac.sagemath.org/sage into public/cleanup_diagrams-25146`|\n|[dd77d09](https://git.sagemath.org/sage.git/commit/?id=dd77d096620f8f107b46e1a0f1c3263cd546cf2a)|`Better test for AbstractPartitionDiagrams.__init__ and some cleanup.`|",
    "created_at": "2018-04-23T22:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
|[877a1b0](https://git.sagemath.org/sage.git/commit/?id=877a1b0ccb5f7597e23b3ad69ea67ac109005da9)|`Merge branch 'public/cleanup_diagrams-25146' of git://trac.sagemath.org/sage into public/cleanup_diagrams-25146`|
|[dd77d09](https://git.sagemath.org/sage.git/commit/?id=dd77d096620f8f107b46e1a0f1c3263cd546cf2a)|`Better test for AbstractPartitionDiagrams.__init__ and some cleanup.`|



---

archive/issue_comments_479546.json:
```json
{
    "body": "<a id='comment:14'></a>\nActually, we should not be running `TestSuite` on the ABC precisely because it is an ABC.",
    "created_at": "2018-04-23T22:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479546",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Actually, we should not be running `TestSuite` on the ABC precisely because it is an ABC.



---

archive/issue_comments_479547.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-23T22:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479547",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_479548.json:
```json
{
    "body": "<a id='comment:15'></a>\nNow that I am actually trying to use and debug it, I am finding these changes to be difficult to work with. It can also be improved to better use OOP.",
    "created_at": "2018-04-23T22:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479548",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Now that I am actually trying to use and debug it, I am finding these changes to be difficult to work with. It can also be improved to better use OOP.



---

archive/issue_comments_479549.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-23T22:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479549",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_479550.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[2850224](https://git.sagemath.org/sage.git/commit/?id=28502249f0dc463220a5a8b5f4e55139ef4cae4d)|`Getting rid of duplicate code and streamlining implementation.`|\n|[f677630](https://git.sagemath.org/sage.git/commit/?id=f6776305b2d16ea13c3c35ed82ca815eacf9ac15)|`Simplifying code, trivial change of iteration order.`|\n|[5e84063](https://git.sagemath.org/sage.git/commit/?id=5e84063767b081ffd4e04b2c581935679da6fd63)|`Better __classcall_private__ implementations.`|",
    "created_at": "2018-04-23T23:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[2850224](https://git.sagemath.org/sage.git/commit/?id=28502249f0dc463220a5a8b5f4e55139ef4cae4d)|`Getting rid of duplicate code and streamlining implementation.`|
|[f677630](https://git.sagemath.org/sage.git/commit/?id=f6776305b2d16ea13c3c35ed82ca815eacf9ac15)|`Simplifying code, trivial change of iteration order.`|
|[5e84063](https://git.sagemath.org/sage.git/commit/?id=5e84063767b081ffd4e04b2c581935679da6fd63)|`Better __classcall_private__ implementations.`|



---

archive/issue_comments_479551.json:
```json
{
    "body": "Changing commit from \"dd77d096620f8f107b46e1a0f1c3263cd546cf2a\" to \"5e84063767b081ffd4e04b2c581935679da6fd63\"",
    "created_at": "2018-04-23T23:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dd77d096620f8f107b46e1a0f1c3263cd546cf2a" to "5e84063767b081ffd4e04b2c581935679da6fd63"



---

archive/issue_comments_479552.json:
```json
{
    "body": "<a id='comment:17'></a>\nI removed a lot of essentially duplicate code, did some code simplification (which resulted in a change in the iteration order), and removed the (IMO completely useless) option to pass in a parent to `BrauerDiagram` (if you want it to have a particular parent, construct it the usual way from the parent).\n\nI did do one little thing which might be considered a bit of a hack to remove the need for the `__init__`, but I think the simplified code is useful.",
    "created_at": "2018-04-23T23:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479552",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
I removed a lot of essentially duplicate code, did some code simplification (which resulted in a change in the iteration order), and removed the (IMO completely useless) option to pass in a parent to `BrauerDiagram` (if you want it to have a particular parent, construct it the usual way from the parent).

I did do one little thing which might be considered a bit of a hack to remove the need for the `__init__`, but I think the simplified code is useful.



---

archive/issue_comments_479553.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-23T23:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479553",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_479554.json:
```json
{
    "body": "Changing author from \"Mike Zabrocki\" to \"Mike Zabrocki, Travis Scrimshaw\"",
    "created_at": "2018-04-25T13:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479554",
    "user": "https://github.com/zabrocki"
}
```

Changing author from "Mike Zabrocki" to "Mike Zabrocki, Travis Scrimshaw"



---

archive/issue_comments_479555.json:
```json
{
    "body": "Changing reviewer from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Mike Zabrocki\"",
    "created_at": "2018-04-25T13:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479555",
    "user": "https://github.com/zabrocki"
}
```

Changing reviewer from "Travis Scrimshaw" to "Travis Scrimshaw, Mike Zabrocki"



---

archive/issue_comments_479556.json:
```json
{
    "body": "<a id='comment:19'></a>\nHave been reading carefully your changes, using the code, performed the full tests, and it seems to work well.  Thanks for cleaning that up.\n\nThere is a change in the behavior of the element class of `BrauerDiagrams` since `BrauerDiagram(BrauerDiagrams(1), [This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))` is no longer a proper call (I had code which allowed both old and new behavior) and it should now be `BrauerDiagram([This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))` or `BrauerDiagrams(1)([This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))`.",
    "created_at": "2018-04-25T13:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479556",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:19'></a>
Have been reading carefully your changes, using the code, performed the full tests, and it seems to work well.  Thanks for cleaning that up.

There is a change in the behavior of the element class of `BrauerDiagrams` since `BrauerDiagram(BrauerDiagrams(1), [This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))` is no longer a proper call (I had code which allowed both old and new behavior) and it should now be `BrauerDiagram([This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))` or `BrauerDiagrams(1)([This is the Trac macro *1,-1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,-1-macro))`.



---

archive/issue_comments_479557.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-25T13:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479557",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479558.json:
```json
{
    "body": "<a id='comment:20'></a>\nI'm troubled about changing the behavior of `BrauerDiagram`. Should there not be code trapping for old and new form of expected arguments? and throwing a deprecation warning? I haven't looked yet, but I'm sure I have a lot of code that uses the old form. Perhaps others do as well.",
    "created_at": "2018-04-25T15:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479558",
    "user": "https://github.com/alauve"
}
```

<a id='comment:20'></a>
I'm troubled about changing the behavior of `BrauerDiagram`. Should there not be code trapping for old and new form of expected arguments? and throwing a deprecation warning? I haven't looked yet, but I'm sure I have a lot of code that uses the old form. Perhaps others do as well.



---

archive/issue_comments_479559.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[e100e0d](https://git.sagemath.org/sage.git/commit/?id=e100e0d16a1a0ce05e6c1ab188c1226e13690d01)|`deprecated BrauerDiagram behavior`|",
    "created_at": "2018-04-25T17:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[e100e0d](https://git.sagemath.org/sage.git/commit/?id=e100e0d16a1a0ce05e6c1ab188c1226e13690d01)|`deprecated BrauerDiagram behavior`|



---

archive/issue_comments_479560.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-04-25T17:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_479561.json:
```json
{
    "body": "Changing commit from \"5e84063767b081ffd4e04b2c581935679da6fd63\" to \"e100e0d16a1a0ce05e6c1ab188c1226e13690d01\"",
    "created_at": "2018-04-25T17:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5e84063767b081ffd4e04b2c581935679da6fd63" to "e100e0d16a1a0ce05e6c1ab188c1226e13690d01"



---

archive/issue_comments_479562.json:
```json
{
    "body": "<a id='comment:22'></a>\nI agree that the change of behavior should be depreciated and I changed the `__classcall_private__` to accept the old notation and raise a deprecation warning.",
    "created_at": "2018-04-25T17:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479562",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:22'></a>
I agree that the change of behavior should be depreciated and I changed the `__classcall_private__` to accept the old notation and raise a deprecation warning.



---

archive/issue_comments_479563.json:
```json
{
    "body": "<a id='comment:23'></a>\nWe do not need to deprecate it. If you were creating a Brauer diagram by `BrauerDiagram(P, data)` with parent `P`, you were misusing the class. The standard way in Sage to construct an element from a parent is do to `P(data)` (or if you need every last bit of speed, `P.element_class(data)`) so it gets the correct class with the category stuff mixed in. So there should be no code that uses the parent as the first argument. I am -1 on deprecating it; it is a [spacebar](https://xkcd.com/1172/) IMO.",
    "created_at": "2018-04-26T04:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479563",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
We do not need to deprecate it. If you were creating a Brauer diagram by `BrauerDiagram(P, data)` with parent `P`, you were misusing the class. The standard way in Sage to construct an element from a parent is do to `P(data)` (or if you need every last bit of speed, `P.element_class(data)`) so it gets the correct class with the category stuff mixed in. So there should be no code that uses the parent as the first argument. I am -1 on deprecating it; it is a [spacebar](https://xkcd.com/1172/) IMO.



---

archive/issue_comments_479564.json:
```json
{
    "body": "Changing commit from \"e100e0d16a1a0ce05e6c1ab188c1226e13690d01\" to \"5e84063767b081ffd4e04b2c581935679da6fd63\"",
    "created_at": "2018-05-02T19:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479564",
    "user": "https://github.com/zabrocki"
}
```

Changing commit from "e100e0d16a1a0ce05e6c1ab188c1226e13690d01" to "5e84063767b081ffd4e04b2c581935679da6fd63"



---

archive/issue_comments_479565.json:
```json
{
    "body": "Changing branch from \"public/cleanup_diagrams-25146\" to \"public/25146\"",
    "created_at": "2018-05-02T19:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479565",
    "user": "https://github.com/zabrocki"
}
```

Changing branch from "public/cleanup_diagrams-25146" to "public/25146"



---

archive/issue_comments_479566.json:
```json
{
    "body": "<a id='comment:24'></a>\nI'll take Travis' advice because the other element classes do not follow this way of creating an element.  I wasn't quite sure how to un-commit, hence I create a new branch.",
    "created_at": "2018-05-02T19:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479566",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:24'></a>
I'll take Travis' advice because the other element classes do not follow this way of creating an element.  I wasn't quite sure how to un-commit, hence I create a new branch.



---

archive/issue_comments_479567.json:
```json
{
    "body": "<a id='comment:25'></a>\nThank you.\n\nFor future reference `git reset --hard HEAD^` sets it back one commit and then you would need to do a forced push.",
    "created_at": "2018-05-02T21:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479567",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
Thank you.

For future reference `git reset --hard HEAD^` sets it back one commit and then you would need to do a forced push.



---

archive/issue_comments_479568.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-02T21:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479568",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479569.json:
```json
{
    "body": "<a id='comment:26'></a>\nMerge conflict",
    "created_at": "2018-05-10T07:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479569",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>
Merge conflict



---

archive/issue_comments_479570.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-10T07:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479570",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_479571.json:
```json
{
    "body": "<a id='comment:27'></a>\nSomething has gotten serious borked with both branches. Trying to fix.",
    "created_at": "2018-05-10T07:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479571",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Something has gotten serious borked with both branches. Trying to fix.



---

archive/issue_comments_479572.json:
```json
{
    "body": "<a id='comment:28'></a>\nSo the problem comes from 1d651d5, where the old behavior seems to have been accidentally partially restored.",
    "created_at": "2018-05-10T08:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479572",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
So the problem comes from 1d651d5, where the old behavior seems to have been accidentally partially restored.



---

archive/issue_comments_479573.json:
```json
{
    "body": "<a id='comment:29'></a>\nEven more strange is that #25162 is unaffected...",
    "created_at": "2018-05-10T08:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479573",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>
Even more strange is that #25162 is unaffected...



---

archive/issue_comments_479574.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|\n|[e71d82a](https://git.sagemath.org/sage.git/commit/?id=e71d82a36a99fad05a17c379ca1ac6db5ce21751)|`Merge branch 'public/25146' of git://trac.sagemath.org/sage into public/25146`|",
    "created_at": "2018-05-10T09:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|
|[e71d82a](https://git.sagemath.org/sage.git/commit/?id=e71d82a36a99fad05a17c379ca1ac6db5ce21751)|`Merge branch 'public/25146' of git://trac.sagemath.org/sage into public/25146`|



---

archive/issue_comments_479575.json:
```json
{
    "body": "Changing commit from \"5e84063767b081ffd4e04b2c581935679da6fd63\" to \"e71d82a36a99fad05a17c379ca1ac6db5ce21751\"",
    "created_at": "2018-05-10T09:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5e84063767b081ffd4e04b2c581935679da6fd63" to "e71d82a36a99fad05a17c379ca1ac6db5ce21751"



---

archive/issue_events_063095.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-10T09:51:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25146#event-63095"
}
```



---

archive/issue_comments_479576.json:
```json
{
    "body": "<a id='comment:31'></a>\nTrivial fix, but annoying to do.",
    "created_at": "2018-05-10T09:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479576",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'></a>
Trivial fix, but annoying to do.



---

archive/issue_comments_479577.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-05-10T09:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479577",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_063096.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-14T17:36:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25146#event-63096"
}
```



---

archive/issue_comments_479578.json:
```json
{
    "body": "Changing branch from \"public/25146\" to \"e71d82a36a99fad05a17c379ca1ac6db5ce21751\"",
    "created_at": "2018-05-14T17:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479578",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/25146" to "e71d82a36a99fad05a17c379ca1ac6db5ce21751"



---

archive/issue_comments_479579.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-14T17:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25146#issuecomment-479579",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
