# Issue 25410: Addition of SPQR-Tree to graph.py

archive/issues_025173.json:
```json
{
    "assignees": [],
    "body": "This ticket is to fill the gaps present in Ticket #22157.\n\nKeywords: **SPQRT-Tree**\n\nReviewer: **Julian R\u00fcth**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25410_\n\n",
    "closed_at": "2018-11-08T16:06:52Z",
    "created_at": "2018-05-20T15:15:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/duplicate",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Addition of SPQR-Tree to graph.py",
    "type": "issue",
    "updated_at": "2018-11-08T16:06:52Z",
    "url": "https://github.com/sagemath/sage/issues/25410",
    "user": "https://github.com/sagetrac-saiharsh"
}
```
This ticket is to fill the gaps present in Ticket #22157.

Keywords: **SPQRT-Tree**

Reviewer: **Julian RÃ¼th**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/25410_





---

archive/issue_events_351678.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:15:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351678"
}
```



---

archive/issue_events_351679.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:15:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351679"
}
```



---

archive/issue_events_351680.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351680"
}
```



---

archive/issue_events_351681.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351681"
}
```



---

archive/issue_comments_389114.json:
```json
{
    "body": "Changed keywords from none to **SPQRT-Tree**",
    "created_at": "2018-05-21T14:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389114",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed keywords from none to **SPQRT-Tree**



---

archive/issue_comments_389115.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket is to fill the gaps present in Ticket #22157.\n``````\n",
    "created_at": "2018-05-21T14:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389115",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket is to fill the gaps present in Ticket #22157.
``````




---

archive/issue_comments_389116.json:
```json
{
    "body": "Branch: **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)**",
    "created_at": "2018-05-21T18:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389116",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Branch: **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)**



---

archive/issue_comments_389117.json:
```json
{
    "body": "Commit: **[`e407edb`](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)**",
    "created_at": "2018-05-21T18:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389117",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`e407edb`](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)**



---

archive/issue_comments_389118.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f\"><code>e407edb</code></a></td><td><code>First commit</code></td></tr></table>\n",
    "created_at": "2018-05-21T18:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389118",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f"><code>e407edb</code></a></td><td><code>First commit</code></td></tr></table>




---

archive/issue_comments_389119.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe cleave function is a helper function for spqr_tree. Which takes input as biconnected multigraph and output: \\\\\nf: cut vertices \\\\\nC: cocycles (A a dipole graph on the two-vertex cut with virtual edges) \\\\\nS: list of the graphs that are sides of the two-vertex separation with a virtual edge at the separation  \\\\\nBelow are the following steps it follows: \\\\\n1. Make input graph simple and find cut vertices.\n2. Remove cut vertices from input graph and get connected components from it.\n3. For each connected component add cut vertices and edges with it's neighbour vertices with reference to input graph.\n4. create cocycles with the information of the number of connected components.\n\nFinally, return (S,F,C).\n\nReference added in index.rst file and doctest updated.\n\nPlease have a look and let me know your feedback.",
    "created_at": "2018-05-21T18:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389119",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:6" align="right">comment:6</div>

The cleave function is a helper function for spqr_tree. Which takes input as biconnected multigraph and output: \\
f: cut vertices \\
C: cocycles (A a dipole graph on the two-vertex cut with virtual edges) \\
S: list of the graphs that are sides of the two-vertex separation with a virtual edge at the separation  \\
Below are the following steps it follows: \\
1. Make input graph simple and find cut vertices.
2. Remove cut vertices from input graph and get connected components from it.
3. For each connected component add cut vertices and edges with it's neighbour vertices with reference to input graph.
4. create cocycles with the information of the number of connected components.

Finally, return (S,F,C).

Reference added in index.rst file and doctest updated.

Please have a look and let me know your feedback.



---

archive/issue_comments_389120.json:
```json
{
    "body": "Changed commit from **[`e407edb`](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)** to **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)**",
    "created_at": "2018-05-21T18:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389120",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e407edb`](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)** to **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)**



---

archive/issue_comments_389121.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3\"><code>ad12f54</code></a></td><td><code>Minor change in definition.</code></td></tr></table>\n",
    "created_at": "2018-05-21T18:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3"><code>ad12f54</code></a></td><td><code>Minor change in definition.</code></td></tr></table>




---

archive/issue_comments_389122.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHello,\n\n- Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.\n\n- WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.\n\n- I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.\n\n- <code>\\`cocycles\\` is a dipole graph</code> but before you use letter `C`.\n\n- The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:\n\n```\nH = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())\n```\n\n- Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?",
    "created_at": "2018-05-24T20:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389122",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Hello,

- Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.

- WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.

- I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.

- <code>\`cocycles\` is a dipole graph</code> but before you use letter `C`.

- The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:

```
H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())
```

- Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?



---

archive/issue_comments_389123.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@dcoudert](#comment:8):\n> Hello,\n> \n> - Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.\n> \n\nYes soon I will be updating graph.py functions in it.\n> - WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.\n> \n\nI will update my system setting.\n\n> - I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.\n> \n\nYes, the Original contributor should get his credits as he started the work first.\nSorry this didn't come to my mind.\nI will do appropriate changes and update it.\n\n> - <code>\\`cocycles\\` is a dipole graph</code> but before you use letter `C`.\n\nThe `cocyle` is represented by letter `C`.\n\n> \n> - The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:\n> \n> ```\n> H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())\n> ```\n> \n\nYes, I won't change the input graph.\n\n> - Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?\n> \n\nThe initial version was testing whether the graph is simple or not i.e `self._scream_if_not_simple()`, so I did it. \\\\\nI assumed the input is in simple(for SPQRT-Tree). \\\\\nIt's better if multiple edges graph could be passed to cleave function. \\\\\nI will do the necessary changes, close this ticket.\n\nStart working on the old ticket of spqr-tree.\n\nThanks,\nHarsh",
    "created_at": "2018-05-24T21:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389123",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@dcoudert](#comment:8):
> Hello,
> 
> - Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.
> 

Yes soon I will be updating graph.py functions in it.
> - WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.
> 

I will update my system setting.

> - I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.
> 

Yes, the Original contributor should get his credits as he started the work first.
Sorry this didn't come to my mind.
I will do appropriate changes and update it.

> - <code>\`cocycles\` is a dipole graph</code> but before you use letter `C`.

The `cocyle` is represented by letter `C`.

> 
> - The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:
> 
> ```
> H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())
> ```
> 

Yes, I won't change the input graph.

> - Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?
> 

The initial version was testing whether the graph is simple or not i.e `self._scream_if_not_simple()`, so I did it. \\
I assumed the input is in simple(for SPQRT-Tree). \\
It's better if multiple edges graph could be passed to cleave function. \\
I will do the necessary changes, close this ticket.

Start working on the old ticket of spqr-tree.

Thanks,
Harsh



---

archive/issue_comments_389124.json:
```json
{
    "body": "Changed commit from **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)** to none",
    "created_at": "2018-05-25T10:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389124",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed commit from **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)** to none



---

archive/issue_comments_389125.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)** to none",
    "created_at": "2018-05-25T10:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389125",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed branch from **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)** to none



---

archive/issue_comments_389126.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPlease close this ticket. \\\\",
    "created_at": "2018-05-26T09:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389126",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:11" align="right">comment:11</div>

Please close this ticket. \\



---

archive/issue_events_351682.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:51:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351682"
}
```



---

archive/issue_events_351683.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:51:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351683"
}
```



---

archive/issue_events_351684.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:51:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351684"
}
```



---

archive/issue_events_351685.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:52:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351685"
}
```



---

archive/issue_events_351686.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-06-01T23:39:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351686"
}
```



---

archive/issue_events_351687.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-06-01T23:39:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351687"
}
```



---

archive/issue_comments_389127.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-06-01T23:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-389127",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_events_351688.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351688"
}
```



---

archive/issue_events_351689.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351689"
}
```



---

archive/issue_events_351690.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-351690"
}
```
