# Issue 25410: Addition of SPQR-Tree to graph.py

archive/issues_025173.json:
```json
{
    "assignees": [],
    "body": "This ticket is to fill the gaps present in Ticket #22157.\n\n**Keywords:** SPQRT-Tree\n\n**Reviewer:** Julian R\u00fcth\n\nIssue created by migration from https://trac.sagemath.org/ticket/25410\n\n",
    "closed_at": "2018-11-08T16:06:52Z",
    "created_at": "2018-05-20T15:15:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Addition of SPQR-Tree to graph.py",
    "type": "issue",
    "updated_at": "2018-11-08T16:06:52Z",
    "url": "https://github.com/sagemath/sage/issues/25410",
    "user": "https://github.com/sagetrac-saiharsh"
}
```
This ticket is to fill the gaps present in Ticket #22157.

**Keywords:** SPQRT-Tree

**Reviewer:** Julian Rüth

Issue created by migration from https://trac.sagemath.org/ticket/25410





---

archive/issue_events_306583.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:15:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306583"
}
```



---

archive/issue_events_306584.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306584"
}
```



---

archive/issue_events_306585.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-20T15:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306585"
}
```



---

archive/issue_comments_391658.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"SPQRT-Tree\".",
    "created_at": "2018-05-21T14:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391658",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

**Changing keywords** from "" to "SPQRT-Tree".



---

archive/issue_comments_391659.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket is to fill the gaps present in Ticket #22157.\n``````\n",
    "created_at": "2018-05-21T14:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391659",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket is to fill the gaps present in Ticket #22157.
``````




---

archive/issue_comments_391660.json:
```json
{
    "body": "**Branch:** [public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)",
    "created_at": "2018-05-21T18:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391660",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

**Branch:** [public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)



---

archive/issue_comments_391661.json:
```json
{
    "body": "**Commit:** [e407edbfce9de3192352dca88e6ffab009441e3f](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)",
    "created_at": "2018-05-21T18:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391661",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [e407edbfce9de3192352dca88e6ffab009441e3f](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)



---

archive/issue_comments_391662.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f\">e407edb</a></td><td><code>First commit</code></td></tr></table>\n",
    "created_at": "2018-05-21T18:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391662",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f">e407edb</a></td><td><code>First commit</code></td></tr></table>




---

archive/issue_comments_391663.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nThe cleave function is a helper function for spqr_tree. Which takes input as biconnected multigraph and output: \\\\\nf: cut vertices \\\\\nC: cocycles (A a dipole graph on the two-vertex cut with virtual edges) \\\\\nS: list of the graphs that are sides of the two-vertex separation with a virtual edge at the separation  \\\\\nBelow are the following steps it follows: \\\\\n1. Make input graph simple and find cut vertices.\n2. Remove cut vertices from input graph and get connected components from it.\n3. For each connected component add cut vertices and edges with it's neighbour vertices with reference to input graph.\n4. create cocycles with the information of the number of connected components.\n\nFinally, return (S,F,C).\n\nReference added in index.rst file and doctest updated.\n\nPlease have a look and let me know your feedback.",
    "created_at": "2018-05-21T18:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391663",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<a id='comment:6'>**Comment 6:**</a>
The cleave function is a helper function for spqr_tree. Which takes input as biconnected multigraph and output: \\
f: cut vertices \\
C: cocycles (A a dipole graph on the two-vertex cut with virtual edges) \\
S: list of the graphs that are sides of the two-vertex separation with a virtual edge at the separation  \\
Below are the following steps it follows: \\
1. Make input graph simple and find cut vertices.
2. Remove cut vertices from input graph and get connected components from it.
3. For each connected component add cut vertices and edges with it's neighbour vertices with reference to input graph.
4. create cocycles with the information of the number of connected components.

Finally, return (S,F,C).

Reference added in index.rst file and doctest updated.

Please have a look and let me know your feedback.



---

archive/issue_comments_391664.json:
```json
{
    "body": "**Changing commit** from \"[e407edbfce9de3192352dca88e6ffab009441e3f](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)\" to \"[ad12f54045500ef0f9884fd36eb21073ac5815c3](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)\".",
    "created_at": "2018-05-21T18:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391664",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e407edbfce9de3192352dca88e6ffab009441e3f](https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f)" to "[ad12f54045500ef0f9884fd36eb21073ac5815c3](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)".



---

archive/issue_comments_391665.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3\">ad12f54</a></td><td><code>Minor change in definition.</code></td></tr></table>\n",
    "created_at": "2018-05-21T18:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391665",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3">ad12f54</a></td><td><code>Minor change in definition.</code></td></tr></table>




---

archive/issue_comments_391666.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nHello,\n\n- Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.\n\n- WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.\n\n- I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.\n\n- <code>\\`cocycles\\` is a dipole graph</code> but before you use letter `C`.\n\n- The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:\n\n```\nH = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())\n```\n\n- Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?",
    "created_at": "2018-05-24T20:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391666",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'>**Comment 8:**</a>
Hello,

- Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.

- WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.

- I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.

- <code>\`cocycles\` is a dipole graph</code> but before you use letter `C`.

- The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:

```
H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())
```

- Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?



---

archive/issue_comments_391667.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@dcoudert](#comment%3A8):\n> Hello,\n> \n> - Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.\n> \n\nYes soon I will be updating graph.py functions in it.\n> - WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.\n> \n\nI will update my system setting.\n\n> - I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.\n> \n\nYes, the Original contributor should get his credits as he started the work first.\nSorry this didn't come to my mind.\nI will do appropriate changes and update it.\n\n> - <code>\\`cocycles\\` is a dipole graph</code> but before you use letter `C`.\n\nThe `cocyle` is represented by letter `C`.\n\n> \n> - The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:\n> \n> ```\n> H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())\n> ```\n> \n\nYes, I won't change the input graph.\n\n> - Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?\n> \n\nThe initial version was testing whether the graph is simple or not i.e `self._scream_if_not_simple()`, so I did it. \\\\\nI assumed the input is in simple(for SPQRT-Tree). \\\\\nIt's better if multiple edges graph could be passed to cleave function. \\\\\nI will do the necessary changes, close this ticket.\n\nStart working on the old ticket of spqr-tree.\n\nThanks,\nHarsh",
    "created_at": "2018-05-24T21:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391667",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@dcoudert](#comment%3A8):
> Hello,
> 
> - Meghana is currently moving connectivity methods to file `connectivity.pyx`. See #25436. So you will certainly have to move your method to that file at some point. Not yet.
> 

Yes soon I will be updating graph.py functions in it.
> - WARNING: your patch is changing the mode of files `graph.py` and `index.rst` from `-rw-r--r--` to `-rwxr-xr-x`. You should not do that. This is certainly a default setting of your system. Please change.
> 

I will update my system setting.

> - I don't understand why you have not worked in #22157. It was possible to change the branch name and let credit to the work of the original contributor. A ticket can have multiple authors as well as multiple reviewers.
> 

Yes, the Original contributor should get his credits as he started the work first.
Sorry this didn't come to my mind.
I will do appropriate changes and update it.

> - <code>\`cocycles\` is a dipole graph</code> but before you use letter `C`.

The `cocyle` is represented by letter `C`.

> 
> - The method **should not** modify the input graph !!! If you need, you can make a local copy. and you can have:
> 
> ```
> H = Graph(G.edges(labels=False), loops=G.has_loops(), multiedge=G.has_multiple_edges())
> ```
> 

Yes, I won't change the input graph.

> - Furthermore, I don't understand why you need to remove loops or multiple edges here. I seems that all your step are also working with loops or multiple edges, no ?
> 

The initial version was testing whether the graph is simple or not i.e `self._scream_if_not_simple()`, so I did it. \\
I assumed the input is in simple(for SPQRT-Tree). \\
It's better if multiple edges graph could be passed to cleave function. \\
I will do the necessary changes, close this ticket.

Start working on the old ticket of spqr-tree.

Thanks,
Harsh



---

archive/issue_comments_391668.json:
```json
{
    "body": "**Changing commit** from \"[ad12f54045500ef0f9884fd36eb21073ac5815c3](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)\" to \"\".",
    "created_at": "2018-05-25T10:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391668",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

**Changing commit** from "[ad12f54045500ef0f9884fd36eb21073ac5815c3](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)" to "".



---

archive/issue_comments_391669.json:
```json
{
    "body": "**Changing branch** from \"[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)\" to \"\".",
    "created_at": "2018-05-25T10:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391669",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

**Changing branch** from "[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)" to "".



---

archive/issue_comments_391670.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nPlease close this ticket. \\\\",
    "created_at": "2018-05-26T09:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391670",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<a id='comment:11'>**Comment 11:**</a>
Please close this ticket. \\



---

archive/issue_events_306586.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:51:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306586"
}
```



---

archive/issue_events_306587.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:52:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306587"
}
```



---

archive/issue_events_306588.json:
```json
{
    "actor": "https://github.com/sagetrac-saiharsh",
    "created_at": "2018-05-26T09:52:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306588"
}
```



---

archive/issue_events_306589.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-06-01T23:39:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306589"
}
```



---

archive/issue_events_306590.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-06-01T23:39:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306590"
}
```



---

archive/issue_comments_391671.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2018-06-01T23:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25410#issuecomment-391671",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian Rüth



---

archive/issue_events_306591.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "008080",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306591"
}
```



---

archive/issue_events_306592.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306592"
}
```



---

archive/issue_events_306593.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:06:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25410",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25410#event-306593"
}
```
