# Issue 25393: Removed unused and potentially misleading Morphism.__hash__

archive/issues_025156.json:
```json
{
    "assignees": [],
    "body": "As far as I can tell there is no code using the ability to hash `Morphisms`, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways.  It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.\n\n### Original description\n`ContinuousMap` is impacted by #24551 in that it defines an `__eq__`, so its default hash is not inherited from its base class, `Morphism` (which does define `__hash__`).\n\nThis is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).\n\nI'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If `x == y`, then `hash(x) == hash(y)` for a correct implementation.  Technically I believe you can get away with the inverse--having `hash(x) == hash(y)` but `x != y`--but it is advisable for performance to avoid this.\n\n**Assignee:** @egourgoulhon\n\n**CC:**  @fchapoton @egourgoulhon\n\n**Keywords:** python3\n\n**Branch:** [u/embray/misc/ticket-25393](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/ticket-25393)\n\n**Commit:** [1a990578b1b8f0826fa0408aaac424b205f5dffb](https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb)\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/25393\n\n",
    "created_at": "2018-05-18T09:29:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Removed unused and potentially misleading Morphism.__hash__",
    "type": "issue",
    "updated_at": "2022-08-31T05:25:02Z",
    "url": "https://github.com/sagemath/sage/issues/25393",
    "user": "https://github.com/embray"
}
```
As far as I can tell there is no code using the ability to hash `Morphisms`, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways.  It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.

### Original description
`ContinuousMap` is impacted by #24551 in that it defines an `__eq__`, so its default hash is not inherited from its base class, `Morphism` (which does define `__hash__`).

This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).

I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If `x == y`, then `hash(x) == hash(y)` for a correct implementation.  Technically I believe you can get away with the inverse--having `hash(x) == hash(y)` but `x != y`--but it is advisable for performance to avoid this.

**Assignee:** @egourgoulhon

**CC:**  @fchapoton @egourgoulhon

**Keywords:** python3

**Branch:** [u/embray/misc/ticket-25393](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/ticket-25393)

**Commit:** [1a990578b1b8f0826fa0408aaac424b205f5dffb](https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb)

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/25393





---

archive/issue_events_306369.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-18T09:29:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306369"
}
```



---

archive/issue_events_306370.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-18T09:29:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "08517b",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306370"
}
```



---

archive/issue_events_306371.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-18T09:29:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306371"
}
```



---

archive/issue_comments_391371.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).\n \n-I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.\n+I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If two instances of the same class have the same hash, they must also be equal to each other with `==`.  Technically I believe you can get away with the inverse--having different hashes but equivalent via `==`--but it's not advisable and is a bad smell.\n``````\n",
    "created_at": "2018-05-18T09:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391371",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).
 
-I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.
+I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If two instances of the same class have the same hash, they must also be equal to each other with `==`.  Technically I believe you can get away with the inverse--having different hashes but equivalent via `==`--but it's not advisable and is a bad smell.
``````




---

archive/issue_events_306372.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-18T09:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306372"
}
```



---

archive/issue_comments_391372.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n> If two instances of the same class have the same hash, they must also be equal to each other with `==`\n\nThat is true iff a perfect hash function exists, which it generally does not. In fact, that is *not* mandated by Python. For example, a valid hash function is 0 for all objects, but you loose performance benefits from `dict` because it becomes a list search.\n\nThe converse is really what you want: `==` implies same hash. (Also to be hashable, the hash should be immutable.) You can get away with it, but it causes problems when you try to put it into a set/dictionary as you get multiple instances of equal objects.\n\nThe issue with this class is that we have essentially a mutable element class. So I think the proper thing to do is just disable hashing. We do something similar for vectors and matrices.",
    "created_at": "2018-05-18T16:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391372",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'>**Comment 3:**</a>
> If two instances of the same class have the same hash, they must also be equal to each other with `==`

That is true iff a perfect hash function exists, which it generally does not. In fact, that is *not* mandated by Python. For example, a valid hash function is 0 for all objects, but you loose performance benefits from `dict` because it becomes a list search.

The converse is really what you want: `==` implies same hash. (Also to be hashable, the hash should be immutable.) You can get away with it, but it causes problems when you try to put it into a set/dictionary as you get multiple instances of equal objects.

The issue with this class is that we have essentially a mutable element class. So I think the proper thing to do is just disable hashing. We do something similar for vectors and matrices.



---

archive/issue_comments_391373.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nI think you must have misread me or something.  I didn't mean that if two instances have the same hash it implies they are `==`.  I mean that in order for hashing to be implemented correctly, then as you said if they are `==` they must have the same hash. \n\nIt actually wasn't immediately obvious to me that this class is not immutable.  Where can it be mutated?  All I noticed is that you define two `ContinuousMaps` that are the same except that one is constructed with `is_isomorphism=True` and the other with `is_isomorphism=False`.  In this case they are `==` but have different hashes.",
    "created_at": "2018-05-18T16:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391373",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>**Comment 4:**</a>
I think you must have misread me or something.  I didn't mean that if two instances have the same hash it implies they are `==`.  I mean that in order for hashing to be implemented correctly, then as you said if they are `==` they must have the same hash. 

It actually wasn't immediately obvious to me that this class is not immutable.  Where can it be mutated?  All I noticed is that you define two `ContinuousMaps` that are the same except that one is constructed with `is_isomorphism=True` and the other with `is_isomorphism=False`.  In this case they are `==` but have different hashes.



---

archive/issue_comments_391374.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nReplying to [@embray](#comment%3A4):\n> I think you must have misread me or something.  I didn't mean that if two instances have the same hash it implies they are `==`.  I mean that in order for hashing to be implemented correctly, then as you said if they are `==` they must have the same hash. \n\nParaphrasing what you wrote: if `x.__class__ == y.__class__` and `hash(x) == hash(y)`, then `x == y`. It is a bad smell for `x == y` with `hash(x) == hash(y)`. We're on the same page with what needs to be done, but I just saying the ticket description needed an update, which I have just done.\n\nIMO, it is not a code smell to have `hash(x) == hash(y)` but `x != y`. However, I do agree that it is better to have a more perfect hash function, but there are only so many hash values since hashes are limited to 64 bit integers (unless I am misunderstanding something in Python).\n\n> It actually wasn't immediately obvious to me that this class is not immutable.  Where can it be mutated?  All I noticed is that you define two `ContinuousMaps` that are the same except that one is constructed with `is_isomorphism=True` and the other with `is_isomorphism=False`.  In this case they are `==` but have different hashes.\n\nSee `add_expr` and `set_expr`.",
    "created_at": "2018-05-18T16:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391374",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'>**Comment 5:**</a>
Replying to [@embray](#comment%3A4):
> I think you must have misread me or something.  I didn't mean that if two instances have the same hash it implies they are `==`.  I mean that in order for hashing to be implemented correctly, then as you said if they are `==` they must have the same hash. 

Paraphrasing what you wrote: if `x.__class__ == y.__class__` and `hash(x) == hash(y)`, then `x == y`. It is a bad smell for `x == y` with `hash(x) == hash(y)`. We're on the same page with what needs to be done, but I just saying the ticket description needed an update, which I have just done.

IMO, it is not a code smell to have `hash(x) == hash(y)` but `x != y`. However, I do agree that it is better to have a more perfect hash function, but there are only so many hash values since hashes are limited to 64 bit integers (unless I am misunderstanding something in Python).

> It actually wasn't immediately obvious to me that this class is not immutable.  Where can it be mutated?  All I noticed is that you define two `ContinuousMaps` that are the same except that one is constructed with `is_isomorphism=True` and the other with `is_isomorphism=False`.  In this case they are `==` but have different hashes.

See `add_expr` and `set_expr`.



---

archive/issue_comments_391375.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).\n \n-I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If two instances of the same class have the same hash, they must also be equal to each other with `==`.  Technically I believe you can get away with the inverse--having different hashes but equivalent via `==`--but it's not advisable and is a bad smell.\n+I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If `x == y`, then `hash(x) == hash(y)` for a correct implementation.  Technically I believe you can get away with the inverse--having `hash(x) == hash(y)` but `x != y`--but it is advisable for performance to avoid this.\n``````\n",
    "created_at": "2018-05-18T16:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391375",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).
 
-I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If two instances of the same class have the same hash, they must also be equal to each other with `==`.  Technically I believe you can get away with the inverse--having different hashes but equivalent via `==`--but it's not advisable and is a bad smell.
+I'm not sure what the best solution is.  Right now I feel like it's somewhat ill-defined, because it's possible to have two `ContinuousMaps` that compare as equal, but have different hashes.  That's not necessarily wrong, but it isn't obviously right either.  If `x == y`, then `hash(x) == hash(y)` for a correct implementation.  Technically I believe you can get away with the inverse--having `hash(x) == hash(y)` but `x != y`--but it is advisable for performance to avoid this.
``````




---

archive/issue_comments_391376.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nWell in that case this is already fixed for free on Python 3 since it sets `__hash__ = None` automatically for any class that defines `__eq__` but not `__hash__`, and this should just be done explicitly for this class.  \n\nIn general should `Morphism` even have a default hash?  It doesn't seem that immediately useful to me.",
    "created_at": "2018-05-21T11:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391376",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'>**Comment 6:**</a>
Well in that case this is already fixed for free on Python 3 since it sets `__hash__ = None` automatically for any class that defines `__eq__` but not `__hash__`, and this should just be done explicitly for this class.  

In general should `Morphism` even have a default hash?  It doesn't seem that immediately useful to me.



---

archive/issue_comments_391377.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nReplying to [@embray](#comment%3A6):\n> Well in that case this is already fixed for free on Python 3 since it sets `__hash__ = None` automatically for any class that defines `__eq__` but not `__hash__`, and this should just be done explicitly for this class.  \n\nI agree. That is probably the correct thing to for this class.\n\n> In general should `Morphism` even have a default hash?  It doesn't seem that immediately useful to me.\n\nI cannot think of a general mechanism that would require morphisms to be keys to a cache. Ideally matrices should be a subclass of `Morphism`, which would break the implicit `Morphism` is meant to be immutable. Although the fact that a `Morphism` can be stored via a coercion might lead to subtle bugs when it is mutable.",
    "created_at": "2018-05-21T13:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391377",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>**Comment 7:**</a>
Replying to [@embray](#comment%3A6):
> Well in that case this is already fixed for free on Python 3 since it sets `__hash__ = None` automatically for any class that defines `__eq__` but not `__hash__`, and this should just be done explicitly for this class.  

I agree. That is probably the correct thing to for this class.

> In general should `Morphism` even have a default hash?  It doesn't seem that immediately useful to me.

I cannot think of a general mechanism that would require morphisms to be keys to a cache. Ideally matrices should be a subclass of `Morphism`, which would break the implicit `Morphism` is meant to be immutable. Although the fact that a `Morphism` can be stored via a coercion might lead to subtle bugs when it is mutable.



---

archive/issue_comments_391378.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nOkay then, I think I'll just try removing `Morphism.__hash__`.  Neither the commit that added it, nor the associated ticket (#13214) provide any explanation for *why* it was added.  It just was.\n\nI don't think we should be adding `__hash__` implementations anywhere that it isn't explicitly needed (or at least a specific use case is being imagined).  Especially not for base classes that could have mutable subclasses (one could make exceptions of course but in that case it would also be good to have an explicit mechanism for marking whether or not instances of some class are expected to be immutable).",
    "created_at": "2018-05-21T13:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391378",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>**Comment 8:**</a>
Okay then, I think I'll just try removing `Morphism.__hash__`.  Neither the commit that added it, nor the associated ticket (#13214) provide any explanation for *why* it was added.  It just was.

I don't think we should be adding `__hash__` implementations anywhere that it isn't explicitly needed (or at least a specific use case is being imagined).  Especially not for base classes that could have mutable subclasses (one could make exceptions of course but in that case it would also be good to have an explicit mechanism for marking whether or not instances of some class are expected to be immutable).



---

archive/issue_comments_391379.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n~~Oh fun.  Deleting `Morphism.__hash__` causes segfaults :)~~ No, I was just misreading the test output.  It wasn't segfaults, just timeouts (the stack traces threw me off).  Still I wonder if that was a regression...",
    "created_at": "2018-05-21T15:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391379",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'>**Comment 9:**</a>
~~Oh fun.  Deleting `Morphism.__hash__` causes segfaults :)~~ No, I was just misreading the test output.  It wasn't segfaults, just timeouts (the stack traces threw me off).  Still I wonder if that was a regression...



---

archive/issue_comments_391380.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2018-05-21T16:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391380",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_events_306373.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-21T16:51:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "rename": {
        "from": "Fix hash for ContinuousMap",
        "to": "Removed unused and potentially misleading Morphism.__hash__"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306373"
}
```



---

archive/issue_comments_391381.json:
```json
{
    "body": "**Commit:** [1a990578b1b8f0826fa0408aaac424b205f5dffb](https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb)",
    "created_at": "2018-05-21T16:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391381",
    "user": "https://github.com/embray"
}
```

**Commit:** [1a990578b1b8f0826fa0408aaac424b205f5dffb](https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb)



---

archive/issue_comments_391382.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb\">1a99057</a></td><td><code>remove unused and potentially misleading `__hash__` implementation for Morphisms</code></td></tr></table>\n",
    "created_at": "2018-05-21T16:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391382",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'>**Comment 10:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a990578b1b8f0826fa0408aaac424b205f5dffb">1a99057</a></td><td><code>remove unused and potentially misleading `__hash__` implementation for Morphisms</code></td></tr></table>




---

archive/issue_comments_391383.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+As far as I can tell there is no code using the ability to hash `Morphisms`, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways.  It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.\n+\n+### Original description\n `ContinuousMap` is impacted by #24551 in that it defines an `__eq__`, so its default hash is not inherited from its base class, `Morphism` (which does define `__hash__`).\n \n This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).\n``````\n",
    "created_at": "2018-05-21T16:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391383",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+As far as I can tell there is no code using the ability to hash `Morphisms`, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways.  It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.
+
+### Original description
 `ContinuousMap` is impacted by #24551 in that it defines an `__eq__`, so its default hash is not inherited from its base class, `Morphism` (which does define `__hash__`).
 
 This is one of the classes impacted by the issue raised [in this comment](https://github.com/sagemath/sage/issues/25387#comment:3).
``````




---

archive/issue_events_306374.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-21T16:51:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306374"
}
```



---

archive/issue_events_306375.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-21T16:51:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306375"
}
```



---

archive/issue_comments_391384.json:
```json
{
    "body": "**Branch:** [u/embray/misc/ticket-25393](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/ticket-25393)",
    "created_at": "2018-05-21T16:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391384",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/misc/ticket-25393](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/ticket-25393)



---

archive/issue_comments_391385.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nLooks like this has some test failures.  It's possible that in some of these cases the real problem is they shouldn't use `UniqueRepresentation` in the first place, but I'm not sure.",
    "created_at": "2018-05-21T16:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391385",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'>**Comment 11:**</a>
Looks like this has some test failures.  It's possible that in some of these cases the real problem is they shouldn't use `UniqueRepresentation` in the first place, but I'm not sure.



---

archive/issue_events_306376.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-21T16:59:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306376"
}
```



---

archive/issue_events_306377.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-05-21T16:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306377"
}
```



---

archive/issue_comments_391386.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nbot says \"no failing doctest\"..",
    "created_at": "2018-05-22T14:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391386",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'>**Comment 12:**</a>
bot says "no failing doctest"..



---

archive/issue_comments_391387.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nI'll have to try again. I got some failures when I ran it, but it might have been a matter of running the tests out of their \"normal\" order, and hence weird things happening with the coercion framework or something...",
    "created_at": "2018-05-22T14:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391387",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>**Comment 13:**</a>
I'll have to try again. I got some failures when I ran it, but it might have been a matter of running the tests out of their "normal" order, and hence weird things happening with the coercion framework or something...



---

archive/issue_comments_391388.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nSorry for showing up late in the discussion, but for some reason, I did not received the Trac notification that I've been put in the Cc list of this ticket; I actually discovered the existence of the ticket only today, while reading the \"python3 status\" post on sage-devel...\n\nLet me summarize a few things about `ContinuousMap`:\n\n- `ContinousMap` objects are \"in spirit\" immutable: they represent continuous maps between topological manifolds and once such a map is defined, there is no meaning in modifying it. However, in practice, such maps cannot be fully defined at their creation by the user, because some new charts may be introduced on the fly on the manifold and a given map should be able to have coordinate expressions in terms of these charts, hence the methods `add_expr` and `set_expr`. \n\n- `ContinousMap` (more precisely the derived class `DiffMap`) needs to be hashable because `DiffMap` objects serve as keys in the dictionary of vector field modules on a manifold (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/vectorfield_module.html) for details).\n\n- I understand that the `__hash__` method inherited from `Morphism` relies on the `repr` of the continuous map and in some cases (maps `f` and `g` having the same domain, codomain, but different names given by the user), one may have `f == g` with `hash(f) != hash(g)`, which is very bad!\n\nI propose to implement a `__hash__` method in `ContinuousMap` that ensures that maps that compare equal have the same hash. It would make sense that I do this atop commit 1a9907 (i.e. the commit in the branch currently attached to this ticket), since the latter is suppressing `Morphism.__hash__`. Do you agree?",
    "created_at": "2018-05-30T16:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391388",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:14'>**Comment 14:**</a>
Sorry for showing up late in the discussion, but for some reason, I did not received the Trac notification that I've been put in the Cc list of this ticket; I actually discovered the existence of the ticket only today, while reading the "python3 status" post on sage-devel...

Let me summarize a few things about `ContinuousMap`:

- `ContinousMap` objects are "in spirit" immutable: they represent continuous maps between topological manifolds and once such a map is defined, there is no meaning in modifying it. However, in practice, such maps cannot be fully defined at their creation by the user, because some new charts may be introduced on the fly on the manifold and a given map should be able to have coordinate expressions in terms of these charts, hence the methods `add_expr` and `set_expr`. 

- `ContinousMap` (more precisely the derived class `DiffMap`) needs to be hashable because `DiffMap` objects serve as keys in the dictionary of vector field modules on a manifold (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/vectorfield_module.html) for details).

- I understand that the `__hash__` method inherited from `Morphism` relies on the `repr` of the continuous map and in some cases (maps `f` and `g` having the same domain, codomain, but different names given by the user), one may have `f == g` with `hash(f) != hash(g)`, which is very bad!

I propose to implement a `__hash__` method in `ContinuousMap` that ensures that maps that compare equal have the same hash. It would make sense that I do this atop commit 1a9907 (i.e. the commit in the branch currently attached to this ticket), since the latter is suppressing `Morphism.__hash__`. Do you agree?



---

archive/issue_comments_391389.json:
```json
{
    "body": "**Assignee:** @egourgoulhon",
    "created_at": "2018-05-31T10:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391389",
    "user": "https://github.com/embray"
}
```

**Assignee:** @egourgoulhon



---

archive/issue_comments_391390.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nThanks Eric for the explanation.  I'm a bit iffy on the first point--it's a bit unfortunate, but also an implementation detail--I don't feel qualified to fuss about it right now.\n\nBased on your explanation though, maybe I should back off a bit on my argument that `Morphism.__hash__` should be removed (unless someone can point out other subclasses of it that are definitely *not* in any sense immutable).  Instead, I might just change the implementation a bit to do away with its use of `repr()`.  If the domain doesn't have generators we can just ignore that and use `None` or something.  IMO it's the `repr()` that's the real problem because that's just flakey and surprising.  So maybe I'll just change that for now and see what that affects.\n\nMeanwhile, yes, if you think you know the best way to implement a `ContinuousMap.__hash__` please do. Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...",
    "created_at": "2018-05-31T10:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391390",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'>**Comment 15:**</a>
Thanks Eric for the explanation.  I'm a bit iffy on the first point--it's a bit unfortunate, but also an implementation detail--I don't feel qualified to fuss about it right now.

Based on your explanation though, maybe I should back off a bit on my argument that `Morphism.__hash__` should be removed (unless someone can point out other subclasses of it that are definitely *not* in any sense immutable).  Instead, I might just change the implementation a bit to do away with its use of `repr()`.  If the domain doesn't have generators we can just ignore that and use `None` or something.  IMO it's the `repr()` that's the real problem because that's just flakey and surprising.  So maybe I'll just change that for now and see what that affects.

Meanwhile, yes, if you think you know the best way to implement a `ContinuousMap.__hash__` please do. Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...



---

archive/issue_comments_391391.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nReplying to [@embray](#comment%3A15):\n> Thanks Eric for the explanation.  I'm a bit iffy on the first point--it's a bit unfortunate, but also an implementation detail--I don't feel qualified to fuss about it right now.\n> \n\nActually the type of immutatibility involved for `ContinuousMap` is that defined by Simon King in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/d8-r3uEewFU/Jb02875ACgAJ): methods, like `add_expr`, may change (enhance) the internal representation of the object, but in any case they must preserve the equivalence class with respect to `==` to which the object belongs at its creation. \n\n> Based on your explanation though, maybe I should back off a bit on my argument that `Morphism.__hash__` should be removed (unless someone can point out other subclasses of it that are definitely *not* in any sense immutable).  Instead, I might just change the implementation a bit to do away with its use of `repr()`.  If the domain doesn't have generators we can just ignore that and use `None` or something.  IMO it's the `repr()` that's the real problem because that's just flakey and surprising.  So maybe I'll just change that for now and see what that affects.\n\n\nIndeed, for `ContinousMap`, which don't have any \"generator\", the issue is the default back to the hash of `repr()`. \n\n> \n> Meanwhile, yes, if you think you know the best way to implement a `ContinuousMap.__hash__` please do. \n\nOK I will do it. \n\n>Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...\n\nI am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method?",
    "created_at": "2018-05-31T11:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391391",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'>**Comment 16:**</a>
Replying to [@embray](#comment%3A15):
> Thanks Eric for the explanation.  I'm a bit iffy on the first point--it's a bit unfortunate, but also an implementation detail--I don't feel qualified to fuss about it right now.
> 

Actually the type of immutatibility involved for `ContinuousMap` is that defined by Simon King in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/d8-r3uEewFU/Jb02875ACgAJ): methods, like `add_expr`, may change (enhance) the internal representation of the object, but in any case they must preserve the equivalence class with respect to `==` to which the object belongs at its creation. 

> Based on your explanation though, maybe I should back off a bit on my argument that `Morphism.__hash__` should be removed (unless someone can point out other subclasses of it that are definitely *not* in any sense immutable).  Instead, I might just change the implementation a bit to do away with its use of `repr()`.  If the domain doesn't have generators we can just ignore that and use `None` or something.  IMO it's the `repr()` that's the real problem because that's just flakey and surprising.  So maybe I'll just change that for now and see what that affects.


Indeed, for `ContinousMap`, which don't have any "generator", the issue is the default back to the hash of `repr()`. 

> 
> Meanwhile, yes, if you think you know the best way to implement a `ContinuousMap.__hash__` please do. 

OK I will do it. 

>Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...

I am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method?



---

archive/issue_comments_391392.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nReplying to [@egourgoulhon](#comment%3A16):\n> Replying to [@embray](#comment%3A15):\n> >Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...\n\n> \n> I am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method? \n\nI don't know. Are there definitely examples of this in the tests?  I *did* get some test failures when I tried this the first time, but the patchbot shows tests passing.  May it's just in some `--long` tests?",
    "created_at": "2018-05-31T12:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391392",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'>**Comment 17:**</a>
Replying to [@egourgoulhon](#comment%3A16):
> Replying to [@embray](#comment%3A15):
> >Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...

> 
> I am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method? 

I don't know. Are there definitely examples of this in the tests?  I *did* get some test failures when I tried this the first time, but the patchbot shows tests passing.  May it's just in some `--long` tests?



---

archive/issue_comments_391393.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nReplying to [@egourgoulhon](#comment%3A16):\n> \n> >Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...\n\n> \n> I am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method? \n\nI did the experiment, i.e. remove `Morphism.__hash__`, and discovered that the hash of `ContinousMap` is then inherited from `Map.__hash__`, which does (cf. line 1292 o f `src/sage/categories/map.pyx`):\n\n```\nreturn hash((self.domain(), self._codomain))\n```\nThis simple hash seems very satisfactory to me, except maybe for `self._codomain` that may be replaced by `self.codomain()`. Actually this is what I had in mind when proposing to implement `ContinousMap.__hash__`. So if you remove `Morphism.__hash__`, there is no need to write a proper `ContinousMap.__hash__`: that of `Map` is sufficient.",
    "created_at": "2018-05-31T12:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391393",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:18'>**Comment 18:**</a>
Replying to [@egourgoulhon](#comment%3A16):
> 
> >Please also make sure there is a test demonstrating not only that the hash works, but *why* it should work, since my experiment in removing it didn't appear to break any test after all...

> 
> I am quite surprised about this: how could `ContinuousMap` objects be used as dictionary keys without any `__hash__` method? 

I did the experiment, i.e. remove `Morphism.__hash__`, and discovered that the hash of `ContinousMap` is then inherited from `Map.__hash__`, which does (cf. line 1292 o f `src/sage/categories/map.pyx`):

```
return hash((self.domain(), self._codomain))
```
This simple hash seems very satisfactory to me, except maybe for `self._codomain` that may be replaced by `self.codomain()`. Actually this is what I had in mind when proposing to implement `ContinousMap.__hash__`. So if you remove `Morphism.__hash__`, there is no need to write a proper `ContinousMap.__hash__`: that of `Map` is sufficient.



---

archive/issue_comments_391394.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nI would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.",
    "created_at": "2018-05-31T13:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391394",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'>**Comment 19:**</a>
I would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.



---

archive/issue_comments_391395.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReplying to [@tscrim](#comment%3A19):\n> I would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.\n\nYes. Anyway, if I understand correctly, for Python3, one needs to implement `ContinuousMap.__hash__` because there is a `ContinuousMap.__eq__`, so that `__hash__` cannot be inherited. Correct?\n\nBtw, other manifolds classes that have to be hashable because they serve as dictionary keys are `TopologicalManifold`, `Chart` and `VectorFrame`. However, they all inherit from `UniqueRepresentation`, from which they get `__hash__` and `__eq__`. So it should be OK for Python3 with them, shouldn't it?",
    "created_at": "2018-05-31T21:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391395",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'>**Comment 20:**</a>
Replying to [@tscrim](#comment%3A19):
> I would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.

Yes. Anyway, if I understand correctly, for Python3, one needs to implement `ContinuousMap.__hash__` because there is a `ContinuousMap.__eq__`, so that `__hash__` cannot be inherited. Correct?

Btw, other manifolds classes that have to be hashable because they serve as dictionary keys are `TopologicalManifold`, `Chart` and `VectorFrame`. However, they all inherit from `UniqueRepresentation`, from which they get `__hash__` and `__eq__`. So it should be OK for Python3 with them, shouldn't it?



---

archive/issue_comments_391396.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nReplying to [@tscrim](#comment%3A19):\n> I would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.\n\nRemoving `Map.__hash__`, `FormalCompositeMap.__hash__` (to be coherent with the removal of `Map.__hash__`) and `Morphism.__hash__`, while implementing `ContinuousMap.__hash__`, leads to (only) two doctest errors in all Sage 8.3.beta3, as reported by `make ptestlong`:\n\n```\nsage -t --long --warn-long 53.5 src/sage/combinat/root_system/hecke_algebra_representation.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/hecke_algebra_representation.py\", line 683, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation._test_Y\nFailed example:\n    rho._test_Y()   # long time (4s)\n...\nTypeError: <class 'sage.modules.with_basis.morphism.ModuleMorphismByLinearity_with_category'> is not hashable\n```\nand\n\n```\nsage -t --long --warn-long 53.5 src/sage/groups/semimonomial_transformations/semimonomial_transformation.pyx\n**********************************************************************\nFile \"src/sage/groups/semimonomial_transformations/semimonomial_transformation.pyx\", line 170, in sage.groups.semimonomial_transformations.semimonomial_transformation.SemimonomialTransformation.__hash__\nFailed example:\n    hash( SemimonomialTransformationGroup(F, 4).an_element() )  #random #indirect doctest\n...\nTypeError: <type 'sage.rings.finite_rings.hom_finite_field.FiniteFieldHomomorphism_generic'> is not hashable\n```",
    "created_at": "2018-06-01T12:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391396",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:21'>**Comment 21:**</a>
Replying to [@tscrim](#comment%3A19):
> I would probably also consider removing `Map.__hash__` (and reimplementing that in `ContinuousMap`) for the same reasons as removing `Morphism.__hash__`.

Removing `Map.__hash__`, `FormalCompositeMap.__hash__` (to be coherent with the removal of `Map.__hash__`) and `Morphism.__hash__`, while implementing `ContinuousMap.__hash__`, leads to (only) two doctest errors in all Sage 8.3.beta3, as reported by `make ptestlong`:

```
sage -t --long --warn-long 53.5 src/sage/combinat/root_system/hecke_algebra_representation.py
**********************************************************************
File "src/sage/combinat/root_system/hecke_algebra_representation.py", line 683, in sage.combinat.root_system.hecke_algebra_representation.HeckeAlgebraRepresentation._test_Y
Failed example:
    rho._test_Y()   # long time (4s)
...
TypeError: <class 'sage.modules.with_basis.morphism.ModuleMorphismByLinearity_with_category'> is not hashable
```
and

```
sage -t --long --warn-long 53.5 src/sage/groups/semimonomial_transformations/semimonomial_transformation.pyx
**********************************************************************
File "src/sage/groups/semimonomial_transformations/semimonomial_transformation.pyx", line 170, in sage.groups.semimonomial_transformations.semimonomial_transformation.SemimonomialTransformation.__hash__
Failed example:
    hash( SemimonomialTransformationGroup(F, 4).an_element() )  #random #indirect doctest
...
TypeError: <type 'sage.rings.finite_rings.hom_finite_field.FiniteFieldHomomorphism_generic'> is not hashable
```



---

archive/issue_comments_391397.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nThose tests would just have to be removed I guess.  Though I'm still not 100% sure now that we even want to outright remove `Map.__hash__`.  But maybe you actually agree with my initial thought to remove it.",
    "created_at": "2018-06-01T22:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391397",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'>**Comment 22:**</a>
Those tests would just have to be removed I guess.  Though I'm still not 100% sure now that we even want to outright remove `Map.__hash__`.  But maybe you actually agree with my initial thought to remove it.



---

archive/issue_comments_391398.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nSlightly more elegant than removing tests might be by installing a reasonable hash. For:\n'sage.rings.finite_rings.hom_finite_field.FiniteFieldHomomorphism_generic'\nI would think that\n` hash((f.domain(),f.codomain())+tuple(f.im_gens()))`\nmight be a reasonable option.\n\nand for the second one\n`hash((phi.domain(),phi.codomain(),tuple(phi(x) for x in X.basis())))`\n\nis probably OK. These are both homomorphisms on finitely generated structures, so equality and hashing are relatively straightforward (if they are implemented for elements of the codomain).",
    "created_at": "2018-06-01T23:29:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391398",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:23'>**Comment 23:**</a>
Slightly more elegant than removing tests might be by installing a reasonable hash. For:
'sage.rings.finite_rings.hom_finite_field.FiniteFieldHomomorphism_generic'
I would think that
` hash((f.domain(),f.codomain())+tuple(f.im_gens()))`
might be a reasonable option.

and for the second one
`hash((phi.domain(),phi.codomain(),tuple(phi(x) for x in X.basis())))`

is probably OK. These are both homomorphisms on finitely generated structures, so equality and hashing are relatively straightforward (if they are implemented for elements of the codomain).



---

archive/issue_comments_391399.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nFinally, I've implemented `ContinousMap.__hash__` in a separate ticket: #25502, in order to have a quick fix for the Python3 issue.",
    "created_at": "2018-06-03T20:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391399",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:24'>**Comment 24:**</a>
Finally, I've implemented `ContinousMap.__hash__` in a separate ticket: #25502, in order to have a quick fix for the Python3 issue.



---

archive/issue_comments_391400.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391400",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'>**Comment 25:**</a>
I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_events_306378.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306378"
}
```



---

archive/issue_events_306379.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306379"
}
```



---

archive/issue_comments_391401.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nLooking back at #25502, and looking the comments in this ticket again, was the hash added in #25502 really necessary?  If we still go with removing the existing `Morphism.__hash__` (should we?) then `ContinuousMap` inherits `Map.__hash__` which is identical to the `ContinuousMap.__hash__` added in #25502.  Should `Map.__hash__` also be removed?",
    "created_at": "2018-09-06T13:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391401",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'>**Comment 26:**</a>
Looking back at #25502, and looking the comments in this ticket again, was the hash added in #25502 really necessary?  If we still go with removing the existing `Morphism.__hash__` (should we?) then `ContinuousMap` inherits `Map.__hash__` which is identical to the `ContinuousMap.__hash__` added in #25502.  Should `Map.__hash__` also be removed?



---

archive/issue_events_306380.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T13:51:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306380"
}
```



---

archive/issue_events_306381.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T13:51:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306381"
}
```



---

archive/issue_comments_391402.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nReplying to [@embray](#comment%3A26):\n> Looking back at #25502, and looking the comments in this ticket again, was the hash added in #25502 really necessary?  If we still go with removing the existing `Morphism.__hash__` (should we?) then `ContinuousMap` inherits `Map.__hash__` which is identical to the `ContinuousMap.__hash__` added in #25502.  Should `Map.__hash__` also be removed?\n\nIndeed `ContinuousMap.__hash__` and `Map.__hash__` are essentially identical, but I guess the logic of removing `Morphism.__hash__` applies to `Map.__hash__` as well. From the ticket description: *As far as I can tell there is no code using the ability to hash Morphisms, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways. It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.* If only `Morphism.__hash__` is removed and `Map.__hash__` is kept, then all subclasses will still have some `__hash__` inherited from their base class (`Map`) and therefore will look hashable to Python3, even if they are not immutable, which is truly dangerous...\n\nPS: I realize that the removing of `Map.__hash__` was already advocated by Travis for the very same reasons in [comment:19](#comment%3A19). See also [comment:21](#comment%3A21) for the consequences of the removal of `Map.__hash__` (only 2 failed doctests).",
    "created_at": "2018-09-09T15:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391402",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:27'>**Comment 27:**</a>
Replying to [@embray](#comment%3A26):
> Looking back at #25502, and looking the comments in this ticket again, was the hash added in #25502 really necessary?  If we still go with removing the existing `Morphism.__hash__` (should we?) then `ContinuousMap` inherits `Map.__hash__` which is identical to the `ContinuousMap.__hash__` added in #25502.  Should `Map.__hash__` also be removed?

Indeed `ContinuousMap.__hash__` and `Map.__hash__` are essentially identical, but I guess the logic of removing `Morphism.__hash__` applies to `Map.__hash__` as well. From the ticket description: *As far as I can tell there is no code using the ability to hash Morphisms, and having this in the base class is misleading since there are subclasses which are not immutable and should not be hashable anyways. It would be better to implement `__hash__` on an as-needed basis for those classes that can guarantee immutability.* If only `Morphism.__hash__` is removed and `Map.__hash__` is kept, then all subclasses will still have some `__hash__` inherited from their base class (`Map`) and therefore will look hashable to Python3, even if they are not immutable, which is truly dangerous...

PS: I realize that the removing of `Map.__hash__` was already advocated by Travis for the very same reasons in [comment:19](#comment%3A19). See also [comment:21](#comment%3A21) for the consequences of the removal of `Map.__hash__` (only 2 failed doctests).



---

archive/issue_comments_391403.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nReplying to [@egourgoulhon](#comment%3A27):\n>If only `Morphism.__hash__` is removed and `Map.__hash__` is kept, then all subclasses will still have some `__hash__` inherited from their base class (`Map`) and therefore will look hashable to Python3, even if they are not immutable, which is truly dangerous...\n> \n\nActually I was wrong: there is no danger since in Python3, a class that defines some `__eq__` does no longer inherit `__hash__` from any base class. From [this part of Python 3 reference](https://docs.python.org/3/reference/datamodel.html#object.__hash__): *If a class that overrides `__eq__()` needs to retain the implementation of `__hash__()` from a parent class, the interpreter must be told this explicitly by setting `__hash__ = <ParentClass>.__hash__`.* In our case, this means that if one does not write explicitly \n\n```\n   __hash__ = Map.__hash__\n```\n(and of course does not reimplement `__hash__`), then the subclass is not hashable.\n\nProbably things will be more clear if `Map.__hash__` is removed.",
    "created_at": "2018-09-09T16:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391403",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:28'>**Comment 28:**</a>
Replying to [@egourgoulhon](#comment%3A27):
>If only `Morphism.__hash__` is removed and `Map.__hash__` is kept, then all subclasses will still have some `__hash__` inherited from their base class (`Map`) and therefore will look hashable to Python3, even if they are not immutable, which is truly dangerous...
> 

Actually I was wrong: there is no danger since in Python3, a class that defines some `__eq__` does no longer inherit `__hash__` from any base class. From [this part of Python 3 reference](https://docs.python.org/3/reference/datamodel.html#object.__hash__): *If a class that overrides `__eq__()` needs to retain the implementation of `__hash__()` from a parent class, the interpreter must be told this explicitly by setting `__hash__ = <ParentClass>.__hash__`.* In our case, this means that if one does not write explicitly 

```
   __hash__ = Map.__hash__
```
(and of course does not reimplement `__hash__`), then the subclass is not hashable.

Probably things will be more clear if `Map.__hash__` is removed.



---

archive/issue_events_306382.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306382"
}
```



---

archive/issue_events_306383.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306383"
}
```



---

archive/issue_comments_391404.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nRetargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391404",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'>**Comment 30:**</a>
Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_events_306384.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306384"
}
```



---

archive/issue_events_306385.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306385"
}
```



---

archive/issue_comments_391405.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nMoving all my in-progress tickets to 8.8 milestone.",
    "created_at": "2019-03-25T10:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391405",
    "user": "https://github.com/embray"
}
```

<a id='comment:31'>**Comment 31:**</a>
Moving all my in-progress tickets to 8.8 milestone.



---

archive/issue_events_306386.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306386"
}
```



---

archive/issue_events_306387.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306387"
}
```



---

archive/issue_comments_391406.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391406",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'>**Comment 32:**</a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_306388.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306388"
}
```



---

archive/issue_events_306389.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306389"
}
```



---

archive/issue_comments_391407.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391407",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'>**Comment 33:**</a>
Ticket retargeted after milestone closed



---

archive/issue_events_306390.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306390"
}
```



---

archive/issue_events_306391.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306391"
}
```



---

archive/issue_events_306392.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306392"
}
```



---

archive/issue_events_306393.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306393"
}
```



---

archive/issue_comments_391408.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391408",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'>**Comment 34:**</a>
Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_306394.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306394"
}
```



---

archive/issue_events_306395.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306395"
}
```



---

archive/issue_comments_391409.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391409",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'>**Comment 36:**</a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_306396.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306396"
}
```



---

archive/issue_events_306397.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306397"
}
```



---

archive/issue_events_306398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306398"
}
```



---

archive/issue_events_306399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306399"
}
```



---

archive/issue_comments_391410.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391410",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'>**Comment 37:**</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_391411.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25393#issuecomment-391411",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'>**Comment 38:**</a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_306400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306400"
}
```



---

archive/issue_events_306401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306401"
}
```



---

archive/issue_events_306402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306402"
}
```



---

archive/issue_events_306403.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306403"
}
```



---

archive/issue_events_306404.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306404"
}
```



---

archive/issue_events_306405.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25393",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25393#event-306405"
}
```
