# Issue 25686: UniversalCyclotomicField is not finite

archive/issues_025449.json:
```json
{
    "body": "\n```\nsage: UCF = UniversalCyclotomicField()\nsage: UCF.is_finite()\nTrue\n```\n\nThis is explicitly given in the code of universal_cyclotomic_field.py:\n\n```\n    def is_finite(self):\n        r\"\"\"\n        Returns ``True``.\n\n        EXAMPLES::\n\n            sage: UniversalCyclotomicField().is_finite()\n            True\n\n        .. TODO::\n\n            this method should be provided by the category.\n        \"\"\"\n        return True\n```\n\nThis has been correct before a change in April 2015 (Trac #1852). It looks like a mistake in connection with that ticket. The old code from git looked like this:\n\n\n\n```\nauthor  Jean-Philippe Labb\u00e9 <labbe@math.fu-berlin.de>   2015-04-29 17:56:59 +0300\ncommitter       Jean-Philippe Labb\u00e9 <labbe@math.fu-berlin.de>   2015-04-29 17:56:59 +0300\ncommit  dc3de84809792bde5e2cde8c8c579f42496e0647 (patch)\ntree    2a5ed5f0daf452364580856388e5717cf47f1b60\nparent  Updated Sage version to 6.7.beta3 (diff)\nparent  Trac 18152: __neg__ for UCF elements (diff)\n\n\n-    def is_finite(self):\n-        r\"\"\"\n-        Returns False as ``self`` is not finite.\n-\n-        EXAMPLES::\n-\n-            sage: UCF = UniversalCyclotomicField()\n-            sage: UCF.is_finite()\n-            False\n-        \"\"\"\n-        return False\n```\n\nThus the task might be to restore the old code!\n\nCC:  @tscrim\n\nKeywords: days94\n\nBranch/Commit: 03055ab738fc14f50e86a18ff42e8f5a5adc382c\n\nReviewer: Tomer Bauer, Luis Felipe Tabera\n\nAuthor: Sebastian Oehms\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25686\n\n",
    "closed_at": "2018-07-08T13:05:01Z",
    "created_at": "2018-06-28T11:00:25Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "UniversalCyclotomicField is not finite",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25686",
    "user": "https://github.com/soehms"
}
```

```
sage: UCF = UniversalCyclotomicField()
sage: UCF.is_finite()
True
```

This is explicitly given in the code of universal_cyclotomic_field.py:

```
    def is_finite(self):
        r"""
        Returns ``True``.

        EXAMPLES::

            sage: UniversalCyclotomicField().is_finite()
            True

        .. TODO::

            this method should be provided by the category.
        """
        return True
```

This has been correct before a change in April 2015 (Trac #1852). It looks like a mistake in connection with that ticket. The old code from git looked like this:



```
author  Jean-Philippe Labbé <labbe@math.fu-berlin.de>   2015-04-29 17:56:59 +0300
committer       Jean-Philippe Labbé <labbe@math.fu-berlin.de>   2015-04-29 17:56:59 +0300
commit  dc3de84809792bde5e2cde8c8c579f42496e0647 (patch)
tree    2a5ed5f0daf452364580856388e5717cf47f1b60
parent  Updated Sage version to 6.7.beta3 (diff)
parent  Trac 18152: __neg__ for UCF elements (diff)


-    def is_finite(self):
-        r"""
-        Returns False as ``self`` is not finite.
-
-        EXAMPLES::
-
-            sage: UCF = UniversalCyclotomicField()
-            sage: UCF.is_finite()
-            False
-        """
-        return False
```

Thus the task might be to restore the old code!

CC:  @tscrim

Keywords: days94

Branch/Commit: 03055ab738fc14f50e86a18ff42e8f5a5adc382c

Reviewer: Tomer Bauer, Luis Felipe Tabera

Author: Sebastian Oehms

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25686





---

archive/issue_comments_492621.json:
```json
{
    "body": "Changing branch from \"\" to \"u/soehms/ucf_not_finite\"",
    "created_at": "2018-06-28T16:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492621",
    "user": "https://github.com/soehms"
}
```

Changing branch from "" to "u/soehms/ucf_not_finite"



---

archive/issue_comments_492622.json:
```json
{
    "body": "<a id='comment:3'></a>\nWe (Travis and me) tried to move the `is_finite` method to the category framework. But this lead into difficulties. Thus, we let it fall back to `is_finite` in rings.pyx replacing the raise of `NotImplementedError` to a `super(Ring, self).is_finite()`-call.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|\n|[a5673d1](https://git.sagemath.org/sage.git/commit?id=a5673d143b2368b3a21a9e7e6fa21106170778ff)|`remove meth is_finite from ring.pyx and universal_cyclotomic_field in order to fall back to the categorial framework`|",
    "created_at": "2018-06-28T16:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492622",
    "user": "https://github.com/soehms"
}
```

<a id='comment:3'></a>
We (Travis and me) tried to move the `is_finite` method to the category framework. But this lead into difficulties. Thus, we let it fall back to `is_finite` in rings.pyx replacing the raise of `NotImplementedError` to a `super(Ring, self).is_finite()`-call.

---
New commits:
|                                                                                                                                          |                                                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
|[a5673d1](https://git.sagemath.org/sage.git/commit?id=a5673d143b2368b3a21a9e7e6fa21106170778ff)|`remove meth is_finite from ring.pyx and universal_cyclotomic_field in order to fall back to the categorial framework`|



---

archive/issue_comments_492623.json:
```json
{
    "body": "Changing commit from \"\" to \"a5673d143b2368b3a21a9e7e6fa21106170778ff\"",
    "created_at": "2018-06-28T16:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492623",
    "user": "https://github.com/soehms"
}
```

Changing commit from "" to "a5673d143b2368b3a21a9e7e6fa21106170778ff"



---

archive/issue_comments_492624.json:
```json
{
    "body": "Changing commit from \"a5673d143b2368b3a21a9e7e6fa21106170778ff\" to \"16b48b595e5a2159ba60d7015996c9d8075ab828\"",
    "created_at": "2018-06-28T16:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a5673d143b2368b3a21a9e7e6fa21106170778ff" to "16b48b595e5a2159ba60d7015996c9d8075ab828"



---

archive/issue_comments_492625.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[16b48b5](https://git.sagemath.org/sage.git/commit/?id=16b48b595e5a2159ba60d7015996c9d8075ab828)|`correction`|",
    "created_at": "2018-06-28T16:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[16b48b5](https://git.sagemath.org/sage.git/commit/?id=16b48b595e5a2159ba60d7015996c9d8075ab828)|`correction`|



---

archive/issue_comments_492626.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[ae0cbb8](https://git.sagemath.org/sage.git/commit/?id=ae0cbb88c251edf2a7380f687fd5aae7d2a79760)|`correction of comment`|",
    "created_at": "2018-06-28T16:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[ae0cbb8](https://git.sagemath.org/sage.git/commit/?id=ae0cbb88c251edf2a7380f687fd5aae7d2a79760)|`correction of comment`|



---

archive/issue_comments_492627.json:
```json
{
    "body": "Changing commit from \"16b48b595e5a2159ba60d7015996c9d8075ab828\" to \"ae0cbb88c251edf2a7380f687fd5aae7d2a79760\"",
    "created_at": "2018-06-28T16:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "16b48b595e5a2159ba60d7015996c9d8075ab828" to "ae0cbb88c251edf2a7380f687fd5aae7d2a79760"



---

archive/issue_comments_492628.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[ae0cbb8](https://git.sagemath.org/sage.git/commit?id=ae0cbb88c251edf2a7380f687fd5aae7d2a79760)|`correction of comment`|",
    "created_at": "2018-06-28T16:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492628",
    "user": "https://github.com/soehms"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[ae0cbb8](https://git.sagemath.org/sage.git/commit?id=ae0cbb88c251edf2a7380f687fd5aae7d2a79760)|`correction of comment`|



---

archive/issue_comments_492629.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-28T16:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492629",
    "user": "https://github.com/soehms"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_492630.json:
```json
{
    "body": "<a id='comment:7'></a>\nYou should add a test that shows that the bug is fixed. Since you have deleted the method, this test has to be added elsewhere. In this case, it can be added to the general set of tests at the beggining of the universal_cyclotomic_field.py file",
    "created_at": "2018-06-28T17:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492630",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:7'></a>
You should add a test that shows that the bug is fixed. Since you have deleted the method, this test has to be added elsewhere. In this case, it can be added to the general set of tests at the beggining of the universal_cyclotomic_field.py file



---

archive/issue_comments_492631.json:
```json
{
    "body": "Changing commit from \"ae0cbb88c251edf2a7380f687fd5aae7d2a79760\" to \"d3b2c00f2ef0f22389d3b30890d322479f6aa902\"",
    "created_at": "2018-06-29T13:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ae0cbb88c251edf2a7380f687fd5aae7d2a79760" to "d3b2c00f2ef0f22389d3b30890d322479f6aa902"



---

archive/issue_comments_492632.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[d3b2c00](https://git.sagemath.org/sage.git/commit/?id=d3b2c00f2ef0f22389d3b30890d322479f6aa902)|`test added`|",
    "created_at": "2018-06-29T13:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[d3b2c00](https://git.sagemath.org/sage.git/commit/?id=d3b2c00f2ef0f22389d3b30890d322479f6aa902)|`test added`|



---

archive/issue_comments_492633.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-29T14:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492633",
    "user": "https://github.com/mathzeta"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_492634.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Tomer Bauer\"",
    "created_at": "2018-06-29T14:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492634",
    "user": "https://github.com/mathzeta"
}
```

Changing reviewer from "" to "Tomer Bauer"



---

archive/issue_comments_492635.json:
```json
{
    "body": "Changing reviewer from \"Tomer Bauer\" to \"Tomer Bauer, Luis Felipe Tabera\"",
    "created_at": "2018-06-30T07:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492635",
    "user": "https://github.com/lftabera"
}
```

Changing reviewer from "Tomer Bauer" to "Tomer Bauer, Luis Felipe Tabera"



---

archive/issue_comments_492636.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-30T11:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492636",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_492637.json:
```json
{
    "body": "<a id='comment:11'></a>\nSee patchbot",
    "created_at": "2018-06-30T11:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492637",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
See patchbot



---

archive/issue_comments_492638.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe line `return super(Ring, self).is_finite()` is probably the culprit, we need to update the error message of that test.",
    "created_at": "2018-06-30T11:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492638",
    "user": "https://github.com/mathzeta"
}
```

<a id='comment:12'></a>
The line `return super(Ring, self).is_finite()` is probably the culprit, we need to update the error message of that test.



---

archive/issue_comments_492639.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[03055ab](https://git.sagemath.org/sage.git/commit/?id=03055ab738fc14f50e86a18ff42e8f5a5adc382c)|`doctest error in _list_from_iterator fixed`|",
    "created_at": "2018-07-01T17:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[03055ab](https://git.sagemath.org/sage.git/commit/?id=03055ab738fc14f50e86a18ff42e8f5a5adc382c)|`doctest error in _list_from_iterator fixed`|



---

archive/issue_comments_492640.json:
```json
{
    "body": "Changing commit from \"d3b2c00f2ef0f22389d3b30890d322479f6aa902\" to \"03055ab738fc14f50e86a18ff42e8f5a5adc382c\"",
    "created_at": "2018-07-01T17:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3b2c00f2ef0f22389d3b30890d322479f6aa902" to "03055ab738fc14f50e86a18ff42e8f5a5adc382c"



---

archive/issue_comments_492641.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-07-01T17:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492641",
    "user": "https://github.com/soehms"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_492642.json:
```json
{
    "body": "<a id='comment:15'></a>\nWorks for me. If the patchbot is happy, then positive review.",
    "created_at": "2018-07-02T09:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492642",
    "user": "https://github.com/mathzeta"
}
```

<a id='comment:15'></a>
Works for me. If the patchbot is happy, then positive review.



---

archive/issue_comments_492643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-02T13:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492643",
    "user": "https://github.com/soehms"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_492644.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-07-08T13:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492644",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_492645.json:
```json
{
    "body": "Changing branch from \"u/soehms/ucf_not_finite\" to \"03055ab738fc14f50e86a18ff42e8f5a5adc382c\"",
    "created_at": "2018-07-08T13:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25686#issuecomment-492645",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/soehms/ucf_not_finite" to "03055ab738fc14f50e86a18ff42e8f5a5adc382c"



---

archive/issue_events_064305.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-08T13:05:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25686",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25686#event-64305"
}
```
