# Issue 25776: Better printing for the genus symbol

archive/issues_025539.json:
```json
{
    "body": "\n```\nsage: G\nGenus of\n[ 2  0  0]\n[ 0  2  0]\n[ 0  0 64]\nGenus symbol at 2:    [2^2]_1 :[64^1]_1\n```\n\nThe correct symbol is\n\n``` \n[2^2]_2:[64^1]_1 \n```\nMoreover the signature should be printed and \nif the representative is very large it can be suppressed.\n\nKeywords: genus\n\nBranch/Commit: c979627303332adc59c486d35fcf5490b32c83b4\n\nReviewer: Travis Scrimshaw\n\nAuthor: Simon Brandhorst\n\nDependencies: #25682\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25776\n\n",
    "closed_at": "2018-10-06T17:13:10Z",
    "created_at": "2018-07-05T07:44:30Z",
    "labels": [
        "component: quadratic forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Better printing for the genus symbol",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25776",
    "user": "https://github.com/simonbrandhorst"
}
```

```
sage: G
Genus of
[ 2  0  0]
[ 0  2  0]
[ 0  0 64]
Genus symbol at 2:    [2^2]_1 :[64^1]_1
```

The correct symbol is

``` 
[2^2]_2:[64^1]_1 
```
Moreover the signature should be printed and 
if the representative is very large it can be suppressed.

Keywords: genus

Branch/Commit: c979627303332adc59c486d35fcf5490b32c83b4

Reviewer: Travis Scrimshaw

Author: Simon Brandhorst

Dependencies: #25682

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25776





---

archive/issue_comments_494148.json:
```json
{
    "body": "Changing branch from \"\" to \"u/sbrandhorst/bug_in_printing_of_a_genus_symbol\"",
    "created_at": "2018-07-05T08:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494148",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "" to "u/sbrandhorst/bug_in_printing_of_a_genus_symbol"



---

archive/issue_comments_494149.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-05T08:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494149",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_494150.json:
```json
{
    "body": "Changing commit from \"\" to \"b23a8d21301bde7dfcb61226a55edf59c8883e5d\"",
    "created_at": "2018-07-05T08:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494150",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing commit from "" to "b23a8d21301bde7dfcb61226a55edf59c8883e5d"



---

archive/issue_comments_494151.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[b23a8d2](https://git.sagemath.org/sage.git/commit?id=b23a8d21301bde7dfcb61226a55edf59c8883e5d)|`print the correct oddity of a compartment`|",
    "created_at": "2018-07-05T08:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494151",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[b23a8d2](https://git.sagemath.org/sage.git/commit?id=b23a8d21301bde7dfcb61226a55edf59c8883e5d)|`print the correct oddity of a compartment`|



---

archive/issue_events_064453.json:
```json
{
    "actor": "https://github.com/simonbrandhorst",
    "created_at": "2018-10-04T19:53:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25776#event-64453"
}
```



---

archive/issue_comments_494152.json:
```json
{
    "body": "<a id='comment:4'></a>\nLGTM (I don't understand the math, but the code matches what you put in the comments.). Once you add the author name, you can set a positive review.",
    "created_at": "2018-10-04T22:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494152",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
LGTM (I don't understand the math, but the code matches what you put in the comments.). Once you add the author name, you can set a positive review.



---

archive/issue_comments_494153.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-10-04T22:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494153",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_494154.json:
```json
{
    "body": "Changing author from \"\" to \"Simon Brandhorst\"",
    "created_at": "2018-10-05T06:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494154",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing author from "" to "Simon Brandhorst"



---

archive/issue_comments_494155.json:
```json
{
    "body": "<a id='comment:6'></a>\nI just noticed another bug:\n\n```\nsage: a=matrix.diagonal([1,3])\nsage: b=matrix(ZZ,2,[2,1,1,2])*2\nsage: c = matrix.block_diagonal([a,b])\nsage: Genus(c)\nGenus of\n[1 0|0 0]\n[0 3|0 0]\n[---+---]\n[0 0|4 2]\n[0 0|2 4]\nGenus symbol at 2:    [1^2]_02^2 \nGenus symbol at 3:     1^2 3^2\n``` \nHere\n`Genus symbol at 2:    [1^2]_0 2^2 `\nis better.\n\nAlso it would be good to print the signature of the quadratic form and\nmoreover if the representative is greater than ``20 x 20`` or something to suppress it - just like our matrices.",
    "created_at": "2018-10-05T06:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494155",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:6'></a>
I just noticed another bug:

```
sage: a=matrix.diagonal([1,3])
sage: b=matrix(ZZ,2,[2,1,1,2])*2
sage: c = matrix.block_diagonal([a,b])
sage: Genus(c)
Genus of
[1 0|0 0]
[0 3|0 0]
[---+---]
[0 0|4 2]
[0 0|2 4]
Genus symbol at 2:    [1^2]_02^2 
Genus symbol at 3:     1^2 3^2
``` 
Here
`Genus symbol at 2:    [1^2]_0 2^2 `
is better.

Also it would be good to print the signature of the quadratic form and
moreover if the representative is greater than ``20 x 20`` or something to suppress it - just like our matrices.



---

archive/issue_comments_494156.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[b33dd62](https://git.sagemath.org/sage.git/commit/?id=b33dd625fc69ae50a5aa70f986bb71c5224ee14d)|`fix coverage`|\n|[d201139](https://git.sagemath.org/sage.git/commit/?id=d2011392eb04cd862356dc880df451cd8ae81c61)|`Merge branch 'u/sbrandhorst/add_access_methods_to_the_genus_' of git://trac.sagemath.org/sage into t/25682/add_access_methods_to_the_genus_`|\n|[3f22518](https://git.sagemath.org/sage.git/commit/?id=3f2251871b3e3c6948a6e808da33549ca4a0775e)|`Various docfixes`|\n|[d689be4](https://git.sagemath.org/sage.git/commit/?id=d689be4c6b423d517fdf39d0eb6195612e4932fd)|`Merge branch 'develop' into t/25682/add_access_methods_to_the_genus_`|\n|[851e23c](https://git.sagemath.org/sage.git/commit/?id=851e23cbe5fc13bada01e6e8c5f7551a19138118)|`import Genus into the global namespace and small docfixed`|\n|[5089a18](https://git.sagemath.org/sage.git/commit/?id=5089a18e784951a0794ab44f0652a0eccf88e915)|`signature method and docfixes`|\n|[9d6efa3](https://git.sagemath.org/sage.git/commit/?id=9d6efa3027a3f6eb65fcc9ffdd03e98c6a246127)|`fix doc and revert to signature_pair_of_matrix to avoid a deprecation`|\n|[5abf9ff](https://git.sagemath.org/sage.git/commit/?id=5abf9ffddef8b6dff940cd2c6820193959a7c870)|`Raw strings for documentation.`|\n|[3fc0b47](https://git.sagemath.org/sage.git/commit/?id=3fc0b4720894536b56f6668495075d371a928175)|`Merge commit '5abf9ffddef8b6dff940cd2c6820193959a7c870' of git://trac.sagemath.org/sage into u/sbrandhorst/25776`|\n|[7af4d4a](https://git.sagemath.org/sage.git/commit/?id=7af4d4a9c1934aec80086c7ae451984a62b18698)|`Add Signature to the printing.`|",
    "created_at": "2018-10-05T07:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[b33dd62](https://git.sagemath.org/sage.git/commit/?id=b33dd625fc69ae50a5aa70f986bb71c5224ee14d)|`fix coverage`|
|[d201139](https://git.sagemath.org/sage.git/commit/?id=d2011392eb04cd862356dc880df451cd8ae81c61)|`Merge branch 'u/sbrandhorst/add_access_methods_to_the_genus_' of git://trac.sagemath.org/sage into t/25682/add_access_methods_to_the_genus_`|
|[3f22518](https://git.sagemath.org/sage.git/commit/?id=3f2251871b3e3c6948a6e808da33549ca4a0775e)|`Various docfixes`|
|[d689be4](https://git.sagemath.org/sage.git/commit/?id=d689be4c6b423d517fdf39d0eb6195612e4932fd)|`Merge branch 'develop' into t/25682/add_access_methods_to_the_genus_`|
|[851e23c](https://git.sagemath.org/sage.git/commit/?id=851e23cbe5fc13bada01e6e8c5f7551a19138118)|`import Genus into the global namespace and small docfixed`|
|[5089a18](https://git.sagemath.org/sage.git/commit/?id=5089a18e784951a0794ab44f0652a0eccf88e915)|`signature method and docfixes`|
|[9d6efa3](https://git.sagemath.org/sage.git/commit/?id=9d6efa3027a3f6eb65fcc9ffdd03e98c6a246127)|`fix doc and revert to signature_pair_of_matrix to avoid a deprecation`|
|[5abf9ff](https://git.sagemath.org/sage.git/commit/?id=5abf9ffddef8b6dff940cd2c6820193959a7c870)|`Raw strings for documentation.`|
|[3fc0b47](https://git.sagemath.org/sage.git/commit/?id=3fc0b4720894536b56f6668495075d371a928175)|`Merge commit '5abf9ffddef8b6dff940cd2c6820193959a7c870' of git://trac.sagemath.org/sage into u/sbrandhorst/25776`|
|[7af4d4a](https://git.sagemath.org/sage.git/commit/?id=7af4d4a9c1934aec80086c7ae451984a62b18698)|`Add Signature to the printing.`|



---

archive/issue_comments_494157.json:
```json
{
    "body": "Changing commit from \"b23a8d21301bde7dfcb61226a55edf59c8883e5d\" to \"7af4d4a9c1934aec80086c7ae451984a62b18698\"",
    "created_at": "2018-10-05T07:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b23a8d21301bde7dfcb61226a55edf59c8883e5d" to "7af4d4a9c1934aec80086c7ae451984a62b18698"



---

archive/issue_comments_494158.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#25682\"",
    "created_at": "2018-10-05T07:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494158",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing dependencies from "" to "#25682"



---

archive/issue_comments_494159.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n ``` \n [2^2]_2:[64^1]_1 \n ```\n+Moreover the signature should be printed and \n+if the representative is very large it can be suppressed.\n``````\n",
    "created_at": "2018-10-05T07:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494159",
    "user": "https://github.com/simonbrandhorst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 ``` 
 [2^2]_2:[64^1]_1 
 ```
+Moreover the signature should be printed and 
+if the representative is very large it can be suppressed.
``````




---

archive/issue_comments_494160.json:
```json
{
    "body": "<a id='comment:11'></a>\nNitpicking: It would be a much nicer test output to run `latex(G)` instead of `G.__latex__()` (this is also a often done test). Similarly `repr(s)` instead of `s.__repr__()`. It would also be more useful to use raw strings when writing the latex strings, e.g., `\"\\\\\\\\\"` -> `r\"\\\\\"`.\n\nOtherwise LGTM (i.e., feel free to set a positive review if you don't want to change these things).",
    "created_at": "2018-10-05T10:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494160",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Nitpicking: It would be a much nicer test output to run `latex(G)` instead of `G.__latex__()` (this is also a often done test). Similarly `repr(s)` instead of `s.__repr__()`. It would also be more useful to use raw strings when writing the latex strings, e.g., `"\\\\"` -> `r"\\"`.

Otherwise LGTM (i.e., feel free to set a positive review if you don't want to change these things).



---

archive/issue_comments_494161.json:
```json
{
    "body": "Changing commit from \"7af4d4a9c1934aec80086c7ae451984a62b18698\" to \"c979627303332adc59c486d35fcf5490b32c83b4\"",
    "created_at": "2018-10-05T11:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7af4d4a9c1934aec80086c7ae451984a62b18698" to "c979627303332adc59c486d35fcf5490b32c83b4"



---

archive/issue_comments_494162.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[c979627](https://git.sagemath.org/sage.git/commit/?id=c979627303332adc59c486d35fcf5490b32c83b4)|`nitpicks`|",
    "created_at": "2018-10-05T11:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[c979627](https://git.sagemath.org/sage.git/commit/?id=c979627303332adc59c486d35fcf5490b32c83b4)|`nitpicks`|



---

archive/issue_comments_494163.json:
```json
{
    "body": "<a id='comment:13'></a>\nthank you. Those tricks were new to me.",
    "created_at": "2018-10-05T11:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494163",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:13'></a>
thank you. Those tricks were new to me.



---

archive/issue_comments_494164.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-05T11:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494164",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_494165.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-06T17:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494165",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064454.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-06T17:13:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25776#event-64454"
}
```



---

archive/issue_comments_494166.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/bug_in_printing_of_a_genus_symbol\" to \"c979627303332adc59c486d35fcf5490b32c83b4\"",
    "created_at": "2018-10-06T17:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25776#issuecomment-494166",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/sbrandhorst/bug_in_printing_of_a_genus_symbol" to "c979627303332adc59c486d35fcf5490b32c83b4"
