# Issue 25601: Minor code cleanup

archive/issues_025364.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @tscrim\n\nBranch/Commit: **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25601_\n\n",
    "closed_at": "2018-06-20T18:06:21Z",
    "created_at": "2018-06-18T12:22:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Minor code cleanup",
    "type": "issue",
    "updated_at": "2018-06-20T18:06:21Z",
    "url": "https://github.com/sagemath/sage/issues/25601",
    "user": "https://github.com/fchapoton"
}
```


CC:  @tscrim

Branch/Commit: **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**

Reviewer: **Jeroen Demeyer**

Author: **Frédéric Chapoton**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/25601_





---

archive/issue_events_354130.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-18T12:22:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354130"
}
```



---

archive/issue_events_354131.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-18T12:22:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354131"
}
```



---

archive/issue_events_354132.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-18T12:22:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354132"
}
```



---

archive/issue_events_354133.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-18T12:22:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354133"
}
```



---

archive/issue_comments_393067.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b\"><code>1507d8f</code></a></td><td><code>py3: toward docbuild ; fix the negative roots</code></td></tr></table>\n",
    "created_at": "2018-06-18T12:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393067",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b"><code>1507d8f</code></a></td><td><code>py3: toward docbuild ; fix the negative roots</code></td></tr></table>




---

archive/issue_comments_393068.json:
```json
{
    "body": "Commit: **[`1507d8f`](https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b)**",
    "created_at": "2018-06-18T12:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393068",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`1507d8f`](https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b)**



---

archive/issue_comments_393069.json:
```json
{
    "body": "Branch: **[u/chapoton/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25601)**",
    "created_at": "2018-06-18T12:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393069",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25601)**



---

archive/issue_events_354134.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-18T12:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354134"
}
```



---

archive/issue_comments_393070.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThat the negative roots does not work for affine types is something I would probably say is a bug. So this change makes it worse:\n\n```diff\ndiff --git a/src/sage/combinat/root_system/root_lattice_realizations.py b/src/sage/combinat/root_system/root_lattice_realizations.py\nindex 78d3cd7..c1b89e6 100644\n--- a/src/sage/combinat/root_system/root_lattice_realizations.py\n+++ b/src/sage/combinat/root_system/root_lattice_realizations.py\n@@ -1196,7 +1196,7 @@ class RootLatticeRealizations(Category_over_base_ring):\n             \"\"\"\n             if not self.cartan_type().is_finite():\n                 raise ValueError(\"%s is not a finite Cartan type\" % self.cartan_type())\n-            return self.positive_roots().map(attrcall('__neg__'))\n+            return [r.__neg__() for r in self.positive_roots()]\n \n         ##########################################################################\n         # coroots\n```",
    "created_at": "2018-06-19T03:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393070",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

That the negative roots does not work for affine types is something I would probably say is a bug. So this change makes it worse:

```diff
diff --git a/src/sage/combinat/root_system/root_lattice_realizations.py b/src/sage/combinat/root_system/root_lattice_realizations.py
index 78d3cd7..c1b89e6 100644
--- a/src/sage/combinat/root_system/root_lattice_realizations.py
+++ b/src/sage/combinat/root_system/root_lattice_realizations.py
@@ -1196,7 +1196,7 @@ class RootLatticeRealizations(Category_over_base_ring):
             """
             if not self.cartan_type().is_finite():
                 raise ValueError("%s is not a finite Cartan type" % self.cartan_type())
-            return self.positive_roots().map(attrcall('__neg__'))
+            return [r.__neg__() for r in self.positive_roots()]
 
         ##########################################################################
         # coroots
```



---

archive/issue_events_354135.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T05:32:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354135"
}
```



---

archive/issue_events_354136.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T05:32:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354136"
}
```



---

archive/issue_comments_393071.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhat's wrong with\n\n```\na = 1/n\n```",
    "created_at": "2018-06-19T05:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393071",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

What's wrong with

```
a = 1/n
```



---

archive/issue_comments_393072.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAnd why `r.__neg__()` instead of `-r`?\n\nIt is almost never needed to call such double-underscore methods (main exceptions: `__new__` and when using `super`)",
    "created_at": "2018-06-19T05:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393072",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

And why `r.__neg__()` instead of `-r`?

It is almost never needed to call such double-underscore methods (main exceptions: `__new__` and when using `super`)



---

archive/issue_comments_393073.json:
```json
{
    "body": "Changed commit from **[`1507d8f`](https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b)** to **[`18a4bca`](https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca)**",
    "created_at": "2018-06-19T06:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393073",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1507d8f`](https://github.com/sagemath/sagetrac-mirror/commit/1507d8fc469ca8ca15b6b179ef7f4a62eed6342b)** to **[`18a4bca`](https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca)**



---

archive/issue_comments_393074.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca\"><code>18a4bca</code></a></td><td><code>some details</code></td></tr></table>\n",
    "created_at": "2018-06-19T06:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393074",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca"><code>18a4bca</code></a></td><td><code>some details</code></td></tr></table>




---

archive/issue_comments_393075.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHere is the issue, in case one of you has a better idea for a fix:\n\n```\nsage: R=RootSystem(['A',2])\nsage: RS=R.root_lattice()\nsage: po=RS.positive_roots()\nsage: neg=RS.negative_roots()\nsage: po\nA recursively enumerated set with a graded structure (breadth first search)\nsage: neg\nImage of A recursively enumerated set with a graded structure (breadth first search) by <function RootLatticeRealizations.ParentMethods.negative_roots.<locals>.<lambda> at 0x7fa6b17f6620>\nsage: next(iter(po))\nalpha[1]\nsage: next(iter(neg))\n-alpha[1]\nsage: list(po)\n[alpha[1], alpha[2], alpha[1] + alpha[2]]\nsage: list(neg)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-10-41be9b87c947> in <module>()\n----> 1 list(neg)\n\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/combinat/combinat.py in __len__(self)\n   1350             AttributeError: __len__ has been removed; use .cardinality() instead\n   1351         \"\"\"\n-> 1352         raise AttributeError(\"__len__ has been removed; use .cardinality() instead\")\n   1353 \n   1354     def is_finite(self):\n\nAttributeError: __len__ has been removed; use .cardinality() instead\n```",
    "created_at": "2018-06-19T06:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393075",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

Here is the issue, in case one of you has a better idea for a fix:

```
sage: R=RootSystem(['A',2])
sage: RS=R.root_lattice()
sage: po=RS.positive_roots()
sage: neg=RS.negative_roots()
sage: po
A recursively enumerated set with a graded structure (breadth first search)
sage: neg
Image of A recursively enumerated set with a graded structure (breadth first search) by <function RootLatticeRealizations.ParentMethods.negative_roots.<locals>.<lambda> at 0x7fa6b17f6620>
sage: next(iter(po))
alpha[1]
sage: next(iter(neg))
-alpha[1]
sage: list(po)
[alpha[1], alpha[2], alpha[1] + alpha[2]]
sage: list(neg)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-10-41be9b87c947> in <module>()
----> 1 list(neg)

/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/combinat/combinat.py in __len__(self)
   1350             AttributeError: __len__ has been removed; use .cardinality() instead
   1351         """
-> 1352         raise AttributeError("__len__ has been removed; use .cardinality() instead")
   1353 
   1354     def is_finite(self):

AttributeError: __len__ has been removed; use .cardinality() instead
```



---

archive/issue_comments_393076.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThat looks like a Sage safety check to avoid infinite iteration, but I am not sure it is really an effective one. Actually, I am somewhat curious as to why this behavior changed from 2 to 3.\nInterestingly, I get the same behavior on 2 and 3 with this:\n\n```\n>>> class Foo(object):\n...     def __len__(self):\n...         print(\"len\")\n...         return 5\n...     def __iter__(self):\n...         return iter(range(5))\n... \n>>> F = Foo()\n>>> list(F)\nlen\n[0, 1, 2, 3, 4]\n```\nHowever, in Python2, the error is caught and things are allowed to proceed as normal for `__iter__`. In Python3, it is not caught and aborts the computation.\n\nI would think the best solution would be to simply have `__len__` call `int(self.cardinality())` and let that error make its way up. Or remove it altogether and let the base class handle it.",
    "created_at": "2018-06-19T07:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393076",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

That looks like a Sage safety check to avoid infinite iteration, but I am not sure it is really an effective one. Actually, I am somewhat curious as to why this behavior changed from 2 to 3.
Interestingly, I get the same behavior on 2 and 3 with this:

```
>>> class Foo(object):
...     def __len__(self):
...         print("len")
...         return 5
...     def __iter__(self):
...         return iter(range(5))
... 
>>> F = Foo()
>>> list(F)
len
[0, 1, 2, 3, 4]
```
However, in Python2, the error is caught and things are allowed to proceed as normal for `__iter__`. In Python3, it is not caught and aborts the computation.

I would think the best solution would be to simply have `__len__` call `int(self.cardinality())` and let that error make its way up. Or remove it altogether and let the base class handle it.



---

archive/issue_comments_393077.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tscrim](#comment:7):\n> I would think the best solution would be to simply have `__len__` call `int(self.cardinality())` and let that error make its way up. Or remove it altogether and let the base class handle it.\n\nI'm guessing that `__len__` was \"removed\" because of a technical restriction that `__len__` must return a C `long`. So the answer cannot be an arbitrarily large integer nor infinity. I agree that implementing `__len__` as `self.cardinality()` makes sense. We should just check which what Cython does if this answer is either a large integer or infinity and add doctests.",
    "created_at": "2018-06-19T07:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393077",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tscrim](#comment:7):
> I would think the best solution would be to simply have `__len__` call `int(self.cardinality())` and let that error make its way up. Or remove it altogether and let the base class handle it.

I'm guessing that `__len__` was "removed" because of a technical restriction that `__len__` must return a C `long`. So the answer cannot be an arbitrarily large integer nor infinity. I agree that implementing `__len__` as `self.cardinality()` makes sense. We should just check which what Cython does if this answer is either a large integer or infinity and add doctests.



---

archive/issue_comments_393078.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSeriously, what is wrong with `1/n`?",
    "created_at": "2018-06-19T07:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393078",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Seriously, what is wrong with `1/n`?



---

archive/issue_comments_393079.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n:)\n\noh, well. In fact my branch can just be dropped..",
    "created_at": "2018-06-19T07:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393079",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

:)

oh, well. In fact my branch can just be dropped..



---

archive/issue_comments_393080.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI am advocating `1/n` in favour of other alternatives because it's not Sage-specific (unlike `~n` which is really a hack IMHO) and it's quite fast.",
    "created_at": "2018-06-19T07:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393080",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

I am advocating `1/n` in favour of other alternatives because it's not Sage-specific (unlike `~n` which is really a hack IMHO) and it's quite fast.



---

archive/issue_comments_393081.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment:8):\n> I agree that implementing `__len__` as `self.cardinality()` makes sense.\n\nActually, the default implementation of `cardinality()` is\n\n```\n    def cardinality(self):\n        c = 0\n        for _ in self:\n            c += 1\n        return c\n```\nand you don't want `__len__` (which is supposed to be fast) to call that.\n\nSo maybe we should just remove `__len__` completely instead of having it raise an `AttributeError`. I created #25605 for that.",
    "created_at": "2018-06-19T08:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393081",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment:8):
> I agree that implementing `__len__` as `self.cardinality()` makes sense.

Actually, the default implementation of `cardinality()` is

```
    def cardinality(self):
        c = 0
        for _ in self:
            c += 1
        return c
```
and you don't want `__len__` (which is supposed to be fast) to call that.

So maybe we should just remove `__len__` completely instead of having it raise an `AttributeError`. I created #25605 for that.



---

archive/issue_comments_393082.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nso maybe we can now close this one as duplicate/invalid ?",
    "created_at": "2018-06-19T11:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393082",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

so maybe we can now close this one as duplicate/invalid ?



---

archive/issue_events_354137.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T12:03:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "title_is": "Minor code cleanup",
    "title_was": "py3: towards docbuild ; fixing negative roots",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354137"
}
```



---

archive/issue_comments_393083.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-as this is one of the few remaining errors in sage3 docbuild:\n \n-https://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-06-18%2011:13:42?plugin=docbuild\n``````\n",
    "created_at": "2018-06-19T12:03:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393083",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-as this is one of the few remaining errors in sage3 docbuild:
 
-https://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-06-18%2011:13:42?plugin=docbuild
``````




---

archive/issue_comments_393084.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer**",
    "created_at": "2018-06-19T12:03:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393084",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Frédéric Chapoton** to **Frédéric Chapoton, Jeroen Demeyer**



---

archive/issue_events_354138.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T12:03:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354138"
}
```



---

archive/issue_comments_393085.json:
```json
{
    "body": "Changed branch from **[u/chapoton/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25601)** to **[u/jdemeyer/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25601)**",
    "created_at": "2018-06-19T12:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393085",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/chapoton/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/25601)** to **[u/jdemeyer/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25601)**



---

archive/issue_comments_393086.json:
```json
{
    "body": "Changed commit from **[`18a4bca`](https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca)** to **[`675aa3c`](https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd)**",
    "created_at": "2018-06-19T12:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393086",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`18a4bca`](https://github.com/sagemath/sagetrac-mirror/commit/18a4bca1bd427a4027a794d9f06905afe20d9bca)** to **[`675aa3c`](https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd)**



---

archive/issue_comments_393087.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nno, I think Travis said that the change in negative roots is bad, as it explicitly makes the list, instead of being a Familly (kind of lazy object).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78\"><code>b3fc50d</code></a></td><td><code>Minor code cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd\"><code>675aa3c</code></a></td><td><code>Use -r instead of r.__neg__()</code></td></tr></table>\n",
    "created_at": "2018-06-19T12:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393087",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

no, I think Travis said that the change in negative roots is bad, as it explicitly makes the list, instead of being a Familly (kind of lazy object).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78"><code>b3fc50d</code></a></td><td><code>Minor code cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd"><code>675aa3c</code></a></td><td><code>Use -r instead of r.__neg__()</code></td></tr></table>




---

archive/issue_comments_393088.json:
```json
{
    "body": "Changed commit from **[`675aa3c`](https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd)** to **[`b3fc50d`](https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78)**",
    "created_at": "2018-06-19T12:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393088",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`675aa3c`](https://github.com/sagemath/sagetrac-mirror/commit/675aa3c2afcef40f8c153fcdb32960598c6c66fd)** to **[`b3fc50d`](https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78)**



---

archive/issue_comments_393089.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-19T12:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393089",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_393090.json:
```json
{
    "body": "Changed commit from **[`b3fc50d`](https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78)** to **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**",
    "created_at": "2018-06-19T12:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393090",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3fc50d`](https://github.com/sagemath/sagetrac-mirror/commit/b3fc50da155f3416533eb3416644be5872b6dc78)** to **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**



---

archive/issue_comments_393091.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498\"><code>93542aa</code></a></td><td><code>Trivial clean-up</code></td></tr></table>\n",
    "created_at": "2018-06-19T12:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393091",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498"><code>93542aa</code></a></td><td><code>Trivial clean-up</code></td></tr></table>




---

archive/issue_comments_393092.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2018-06-19T12:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393092",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_393093.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498\"><code>93542aa</code></a></td><td><code>Trivial clean-up</code></td></tr></table>\n",
    "created_at": "2018-06-19T12:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393093",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498"><code>93542aa</code></a></td><td><code>Trivial clean-up</code></td></tr></table>




---

archive/issue_events_354139.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T12:14:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354139"
}
```



---

archive/issue_events_354140.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-19T12:14:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354140"
}
```



---

archive/issue_comments_393094.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer** to **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-06-19T12:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393094",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Frédéric Chapoton, Jeroen Demeyer** to **Frédéric Chapoton**



---

archive/issue_events_354141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-20T18:06:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354141"
}
```



---

archive/issue_events_354142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7b2b1b45099c50c4f49c9744328e37c02576b2f5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-20T18:06:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25601#event-354142"
}
```



---

archive/issue_comments_393095.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25601)** to **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**",
    "created_at": "2018-06-20T18:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25601#issuecomment-393095",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/25601](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/25601)** to **[`93542aa`](https://github.com/sagemath/sagetrac-mirror/commit/93542aab6546d2253c8e1bff832dec24280b4498)**
