# Issue 25408: Magma optional doctest failures

archive/issues_025171.json:
```json
{
    "body": "Running \"`sage -tp --all --optional=sage,magma`\", with Sage 8.3.beta3 + #25306, and Magma V2.23-8, there are doctest failures in the following files:\n\n```\nsage/rings/polynomial/multi_polynomial_ideal.py\nsage/interfaces/magma.py\nsage/rings/polynomial/pbori.pyx\n```\n\nCC:  @JohnCremona @loefflerd\n\nKeywords: magma\n\nIssue created by migration from https://trac.sagemath.org/ticket/25408\n\n",
    "created_at": "2018-05-20T14:39:24Z",
    "labels": [
        "component: interfaces: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Magma optional doctest failures",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25408",
    "user": "https://github.com/loefflerd"
}
```
Running "`sage -tp --all --optional=sage,magma`", with Sage 8.3.beta3 + #25306, and Magma V2.23-8, there are doctest failures in the following files:

```
sage/rings/polynomial/multi_polynomial_ideal.py
sage/interfaces/magma.py
sage/rings/polynomial/pbori.pyx
```

CC:  @JohnCremona @loefflerd

Keywords: magma

Issue created by migration from https://trac.sagemath.org/ticket/25408





---

archive/issue_comments_354124.json:
```json
{
    "body": "<a id='comment:1'></a>please review #25306",
    "created_at": "2018-05-20T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354124",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>please review #25306



---

archive/issue_comments_354125.json:
```json
{
    "body": "<a id='comment:2'></a>I'm afraid that doesn't solve the problem -- all four files still fail with the branch from #25306 applied.",
    "created_at": "2018-05-20T15:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354125",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:2'></a>I'm afraid that doesn't solve the problem -- all four files still fail with the branch from #25306 applied.



---

archive/issue_comments_354126.json:
```json
{
    "body": "<a id='comment:4'></a>`@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?",
    "created_at": "2018-08-28T15:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354126",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>`@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?



---

archive/issue_comments_354127.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2018-08-28T15:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354127",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_354128.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 chapoton]:\n> `@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?\n\n\nThat is our oldest / slowest machine but for that reason mostly unused by our group.  Will be able to help, but not this week.",
    "created_at": "2018-08-28T19:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354128",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>Replying to [comment:4 chapoton]:
> `@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?


That is our oldest / slowest machine but for that reason mostly unused by our group.  Will be able to help, but not this week.



---

archive/issue_comments_354129.json:
```json
{
    "body": "<a id='comment:6'></a>I did have a look at this a couple of months back, but it is not at all easy to fix. The problem is that the Sage code for handling communication with Magma is spread around five or six different files and written in a totally baffling fashion (N layers deep in \"handlers\" and \"frameworks\" and other software-engineering abstractions of non-obvious purpose). Since no actual flesh-and-blood user has so far complained about these functions not working properly, I decided I had better things to do with my time than untangle this knot.",
    "created_at": "2018-08-29T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354129",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:6'></a>I did have a look at this a couple of months back, but it is not at all easy to fix. The problem is that the Sage code for handling communication with Magma is spread around five or six different files and written in a totally baffling fashion (N layers deep in "handlers" and "frameworks" and other software-engineering abstractions of non-obvious purpose). Since no actual flesh-and-blood user has so far complained about these functions not working properly, I decided I had better things to do with my time than untangle this knot.



---

archive/issue_comments_354130.json:
```json
{
    "body": "<a id='comment:7'></a>see also #26191 and the old #10631",
    "created_at": "2018-09-05T07:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25408#issuecomment-354130",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>see also #26191 and the old #10631
