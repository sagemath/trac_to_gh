# Issue 25975: py3: small fix for Lfunction names

archive/issues_025738.json:
```json
{
    "body": "This is a smidge ugly I think, but it works consistently across Python 2 and 3 with no changes to the API.\n\nBranch/Commit: 5b79ad071afb5d154f7276f0d71437a04fad1635\n\nReviewer: Travis Scrimshaw\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25975\n\n",
    "closed_at": "2018-08-09T21:27:44Z",
    "created_at": "2018-07-30T13:21:19Z",
    "labels": [
        "component: python3",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "py3: small fix for Lfunction names",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25975",
    "user": "https://github.com/embray"
}
```
This is a smidge ugly I think, but it works consistently across Python 2 and 3 with no changes to the API.

Branch/Commit: 5b79ad071afb5d154f7276f0d71437a04fad1635

Reviewer: Travis Scrimshaw

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25975





---

archive/issue_comments_498776.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-30T13:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498776",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_498777.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-07-30T22:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498777",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_498778.json:
```json
{
    "body": "<a id='comment:2'></a>\nBikeshedding: I don't see the point of having the variable `_name`. Otherwise LGTM.",
    "created_at": "2018-07-30T22:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498778",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Bikeshedding: I don't see the point of having the variable `_name`. Otherwise LGTM.



---

archive/issue_comments_498779.json:
```json
{
    "body": "<a id='comment:3'></a>\nYou need it, because it's exposing the buffer of a `bytes` object as a `char *`, so you need to keep a reference to that `bytes` object around as long as its buffer is being used by external C code.\n\nCython can usually detect this and will actually refuse to compile if you don't handle it properly, though I'm not completely positive if it would have complained in this case or not.  Sometimes it's also clever enough to create a temporary reference to the object itself, but I haven't worked out exactly when it does or doesn't do that.",
    "created_at": "2018-07-31T14:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498779",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
You need it, because it's exposing the buffer of a `bytes` object as a `char *`, so you need to keep a reference to that `bytes` object around as long as its buffer is being used by external C code.

Cython can usually detect this and will actually refuse to compile if you don't handle it properly, though I'm not completely positive if it would have complained in this case or not.  Sometimes it's also clever enough to create a temporary reference to the object itself, but I haven't worked out exactly when it does or doesn't do that.



---

archive/issue_comments_498780.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-31T14:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498780",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_064912.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-09T21:27:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25975#event-64912"
}
```



---

archive/issue_comments_498781.json:
```json
{
    "body": "Changing branch from \"u/embray/python3/sage-libs-lcalc/Lfunction-repr\" to \"5b79ad071afb5d154f7276f0d71437a04fad1635\"",
    "created_at": "2018-08-09T21:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498781",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/python3/sage-libs-lcalc/Lfunction-repr" to "5b79ad071afb5d154f7276f0d71437a04fad1635"



---

archive/issue_comments_498782.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-09T21:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25975#issuecomment-498782",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
