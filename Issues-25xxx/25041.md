# Issue 25041: Implement efficient automata and regular languages

archive/issues_024804.json:
```json
{
    "body": "Define a class DetAutomaton that permits to manipulate deterministic automata, and a class CAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.\n\na class DetAutomatonGenerators is usefull to generate easily DetAutomaton.\n \nThe ticket has bee refactore and is in now in a correct situation with doc test, documentation in thematic tutorial.\n\nThis ticket is necessary to for the ticket b-adic and the usage of its tools\n\n\nCC:  @seblabbe @videlec @dkrenn\n\nKeywords: automata, regular languages\n\nAuthor: Paul Mercat, Dominique Benielli\n\nBranch: public/implement_efficient_automata_and_regular_languages\n\nStatus: needs_info\n\nCommit: ee2753dbd0ba04936c09f545d911b52a095bc96d\n\nIssue created by migration from https://trac.sagemath.org/ticket/25041\n\n",
    "created_at": "2018-03-27T12:39:45Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Implement efficient automata and regular languages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25041",
    "user": "https://trac.sagemath.org/admin/accounts/users/mercatp"
}
```
Define a class DetAutomaton that permits to manipulate deterministic automata, and a class CAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.

a class DetAutomatonGenerators is usefull to generate easily DetAutomaton.
 
The ticket has bee refactore and is in now in a correct situation with doc test, documentation in thematic tutorial.

This ticket is necessary to for the ticket b-adic and the usage of its tools


CC:  @seblabbe @videlec @dkrenn

Keywords: automata, regular languages

Author: Paul Mercat, Dominique Benielli

Branch: public/implement_efficient_automata_and_regular_languages

Status: needs_info

Commit: ee2753dbd0ba04936c09f545d911b52a095bc96d

Issue created by migration from https://trac.sagemath.org/ticket/25041





---

archive/issue_comments_370809.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-Define a class FastAutomaton that permits to manipulate deterministic automata, non-deterministic automata and regular languages with efficient operations implemented in C.\n+Define a class FastAutomaton that permits to manipulate deterministic automata, and a class NFastAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.\n+\n \n Author: Paul Mercat, Dominique Benielli\n \n```\n",
    "created_at": "2018-05-17T14:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370809",
    "user": "https://trac.sagemath.org/admin/accounts/users/mercatp"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,5 @@
-Define a class FastAutomaton that permits to manipulate deterministic automata, non-deterministic automata and regular languages with efficient operations implemented in C.
+Define a class FastAutomaton that permits to manipulate deterministic automata, and a class NFastAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.
+
 
 Author: Paul Mercat, Dominique Benielli
 
```




---

archive/issue_events_062811.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mercatp",
    "created_at": "2018-05-17T14:57:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25041#event-62811"
}
```



---

archive/issue_comments_370810.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T12:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370811.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T14:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370811",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370812.json:
```json
{
    "body": "<a id='comment:7'></a>You should look at the patchbot report, and fix everything wrong..\n\n---\nNew commits:",
    "created_at": "2018-05-30T14:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370812",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>You should look at the patchbot report, and fix everything wrong..

---
New commits:



---

archive/issue_comments_370813.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-30T17:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370814.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-05T14:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370815.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-05T15:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370815",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370816.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-05T15:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370817.json:
```json
{
    "body": "<a id='comment:18'></a>New commits:",
    "created_at": "2018-06-05T16:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370817",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

<a id='comment:18'></a>New commits:



---

archive/issue_comments_370818.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-05T16:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370818",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370819.json:
```json
{
    "body": "<a id='comment:19'></a>Some quick comments:\n\n- Use `.. NOTE::` instead of `.. note::`.\n- The stuff in `combinat/tutorial.py` would be better as a separate thematic tutorial (with a link in `combinat/tutorial.py`.\n- There is a merge conflict in `combinat/tutorial.py` (look for the `>>>>>>`).\n- Latex code is best marked as ``x = 5`` with single ``` (and not preceded by `:math:`).\n- Could the core c file make for a standalone library (I think I asked this on #21072)?",
    "created_at": "2018-06-06T01:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370819",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>Some quick comments:

- Use `.. NOTE::` instead of `.. note::`.
- The stuff in `combinat/tutorial.py` would be better as a separate thematic tutorial (with a link in `combinat/tutorial.py`.
- There is a merge conflict in `combinat/tutorial.py` (look for the `>>>>>>`).
- Latex code is best marked as ``x = 5`` with single ``` (and not preceded by `:math:`).
- Could the core c file make for a standalone library (I think I asked this on #21072)?



---

archive/issue_comments_370820.json:
```json
{
    "body": "<a id='comment:21'></a>a french remark: `calculabilit\u00e8` -> `calculabilit\u00e9` et `complexit\u00e8` -> `complexit\u00e9`",
    "created_at": "2018-06-08T15:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370820",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>a french remark: `calculabilitè` -> `calculabilité` et `complexitè` -> `complexité`



---

archive/issue_comments_370821.json:
```json
{
    "body": "<a id='comment:22'></a>It would be really nice to have a serious implementation of automata in Sage. The current one `sage.combinat.finite_state_machine.Automaton` is really terrible and mostly useless. While possibly much better, the one proposed with this ticket is far from being in a satisfactory shape for inclusion in Sage.\n\nHere are the main relevant things\n\n1. Do you think that having two disjoint implementations will help Sage users? This ticket should come with a plan to replace or at least interact with the code already there.\n2. You should **never** use french names for variables and comments. This code is intended to be read/used/improved by people all around the world. (note that it is even worse: you are mixing french and english)\n3. You propose to include a lot of C code directly in Sage. This is relevant in the context of automata for speed. But as it is, this code is not properly tested and almost undocumented. Even the doctests of the pyx file are not testing corner cases, real world examples and random instances as it should be.\n\nSome other minor comments\n\n- The components on the ticket is set to `packages: optional` but you are not providing a package. You are simply including source code directly in Sage. This is a thing that you might want to think about: do you prefer inclusion in Sage sources or ship your code as a package?\n- There should not be any commented code unless there is a very good reason for that\n- In Sage sources (I am talking about `cautomata.pyx`) there are clear design choices that should be followed\n    - ``@`property` are mostly not used. Object internal data are accessed with methods. If there is a need for cache you can use ``@`cached_method`.\n    - method start with lower case (`Alphabet`)\n    - the name should reflect the object and possibly the implementation. `FastAutomaton` and `NFastAutomaton` are poorly choosen.\n    - error and print statements are different things. This kind of code should not be there\n\n```\nprint(\"Error : Incorrect set of final states.\")\n```\n- This\n\n```\ncdef Bool(int x):\n    if x:\n        return True\n    return False\n```\n     is automatically taken care of by the \"special\" `bint` type from Cython.\n- Docstring should start with an upper case and be informative. For example `zero-complete automaton in the other way` is cryptic.",
    "created_at": "2018-06-08T16:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370821",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>It would be really nice to have a serious implementation of automata in Sage. The current one `sage.combinat.finite_state_machine.Automaton` is really terrible and mostly useless. While possibly much better, the one proposed with this ticket is far from being in a satisfactory shape for inclusion in Sage.

Here are the main relevant things

1. Do you think that having two disjoint implementations will help Sage users? This ticket should come with a plan to replace or at least interact with the code already there.
2. You should **never** use french names for variables and comments. This code is intended to be read/used/improved by people all around the world. (note that it is even worse: you are mixing french and english)
3. You propose to include a lot of C code directly in Sage. This is relevant in the context of automata for speed. But as it is, this code is not properly tested and almost undocumented. Even the doctests of the pyx file are not testing corner cases, real world examples and random instances as it should be.

Some other minor comments

- The components on the ticket is set to `packages: optional` but you are not providing a package. You are simply including source code directly in Sage. This is a thing that you might want to think about: do you prefer inclusion in Sage sources or ship your code as a package?
- There should not be any commented code unless there is a very good reason for that
- In Sage sources (I am talking about `cautomata.pyx`) there are clear design choices that should be followed
    - ``@`property` are mostly not used. Object internal data are accessed with methods. If there is a need for cache you can use ``@`cached_method`.
    - method start with lower case (`Alphabet`)
    - the name should reflect the object and possibly the implementation. `FastAutomaton` and `NFastAutomaton` are poorly choosen.
    - error and print statements are different things. This kind of code should not be there

```
print("Error : Incorrect set of final states.")
```
- This

```
cdef Bool(int x):
    if x:
        return True
    return False
```
     is automatically taken care of by the "special" `bint` type from Cython.
- Docstring should start with an upper case and be informative. For example `zero-complete automaton in the other way` is cryptic.



---

archive/issue_comments_370822.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-08T16:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370822",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_370823.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2018-06-08T16:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370823",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_370824.json:
```json
{
    "body": "<a id='comment:25'></a>And what is this? (`sage/combinat/tutorial.py`)\n\n```\n<<<<<<< HEAD\n\n=======\n    \n>>>>>>> d41b62b47960e8b3b35944ea8c0c25d593966429\n```",
    "created_at": "2018-06-08T16:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370824",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>And what is this? (`sage/combinat/tutorial.py`)

```
<<<<<<< HEAD

=======
    
>>>>>>> d41b62b47960e8b3b35944ea8c0c25d593966429
```



---

archive/issue_comments_370825.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-12T13:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370826.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-22T14:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370827.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-25T17:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370827",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370828.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-27T11:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370829.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-27T11:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370830.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-27T13:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370831.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-27T13:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370832.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-27T13:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370833.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-29T19:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370834.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-06T12:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370835.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-06T17:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370836.json:
```json
{
    "body": "<a id='comment:48'></a>milestone update 8.3 -> 8.4",
    "created_at": "2018-08-03T19:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370836",
    "user": "https://github.com/videlec"
}
```

<a id='comment:48'></a>milestone update 8.3 -> 8.4



---

archive/issue_events_062812.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:18:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25041#event-62812"
}
```



---

archive/issue_events_062813.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:18:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25041#event-62813"
}
```



---

archive/issue_comments_370837.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-30T17:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370838.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-03T14:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370839.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-03T16:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370840.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-03T16:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370841.json:
```json
{
    "body": "<a id='comment:59'></a>Note: if you use a branch `public/whatever` both of you have access in read/write.\n\n---\nNew commits:",
    "created_at": "2018-09-03T17:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370841",
    "user": "https://github.com/videlec"
}
```

<a id='comment:59'></a>Note: if you use a branch `public/whatever` both of you have access in read/write.

---
New commits:



---

archive/issue_comments_370842.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-03T17:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370843.json:
```json
{
    "body": "<a id='comment:64'></a>Last 10 new commits:",
    "created_at": "2018-09-10T10:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370843",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

<a id='comment:64'></a>Last 10 new commits:



---

archive/issue_comments_370844.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-11T15:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370845.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-11T16:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370846.json:
```json
{
    "body": "<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-17T13:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370847.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-17T13:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370848.json:
```json
{
    "body": "<a id='comment:69'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-17T14:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:69'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370849.json:
```json
{
    "body": "<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-17T16:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370850.json:
```json
{
    "body": "<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-24T15:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370851.json:
```json
{
    "body": "<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-19T14:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370852.json:
```json
{
    "body": "<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-19T15:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370853.json:
```json
{
    "body": "<a id='comment:75'></a>The branch does not apply anymore on the most recent development version of Sage.\n\nI use the occasion to share some thoughts about this ticket. This is not the first time that a ticket is created to add a ton of new lines of code into Sage and in too many of those cases, the code just became dead on the sage trac for a ton of different reasons that I will not enumerate here (#21295, #16110, #12224 are examples which are taking years to complete). Therefore, now, I want to make sure that this does not happen again with this ticket since I am very interested in having a fast implementation of automaton available in Sage.\n\nWhile I think that it is a very good idea that this ticket eventually gets merged into Sage, **I would like to suggest to the authors of this ticket to consider the possibility of creating an independent Python Package containing this code** beside this ticket. To me, this would be benefical for many reasons:\n- Python Package are easy to install, use and maintain.\n- If some important modifications that are backward incompatible are to be done in your code in the next two years, then no one will bother.\n- In Sage, code modification must be backward compatible. This means that you will lose a lot of time in adding deprecation warning to your code in the next years. Also, this means that you have to lose a lot of time right now while thinking about all the different use cases that people you don't know may have during using your code.\n- To me, the creation of a Python Package is a good way of making a new module go into Sage. Being use publically for one or two years as a Python Package before being included into Sage allows to be sure about the proper interface and without losing much time thinking about how other will use your code.\n- This is what I ended up doing for #13346, #13069 and #20343. Instead of waiting years for a review, I decided to put those module into my own python package (slabbe). And the day someone tells me that some of my code is interresting enough for others, then I will consider updating the ticket with the most recent version of the desired module. Meanwhile, I will not update my code at two places in parallel. The most recent version is in my package and slowly, it converges to something usable for many usage.\n- In the next two years, the code base of Sage may change and this can break the application the branch of this ticket (like right now today!), which makes your code unusable, untestable.\n\nHere are examples of Python packages for Sage:\n\n- https://pypi.org/project/surface_dynamics/ (include Python, Cython, and C code)\n- https://pypi.org/project/slabbe/  (includes Cython code)\n- https://pypi.org/project/train-track/ (that you know)\n- https://github.com/miltminz/EkEkstar (simple: on single Python file)\n- https://github.com/sagemath/sage_sample (a demo with uptodate travis setup, etc.)\n\nGood luck:)",
    "created_at": "2018-12-11T12:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370853",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:75'></a>The branch does not apply anymore on the most recent development version of Sage.

I use the occasion to share some thoughts about this ticket. This is not the first time that a ticket is created to add a ton of new lines of code into Sage and in too many of those cases, the code just became dead on the sage trac for a ton of different reasons that I will not enumerate here (#21295, #16110, #12224 are examples which are taking years to complete). Therefore, now, I want to make sure that this does not happen again with this ticket since I am very interested in having a fast implementation of automaton available in Sage.

While I think that it is a very good idea that this ticket eventually gets merged into Sage, **I would like to suggest to the authors of this ticket to consider the possibility of creating an independent Python Package containing this code** beside this ticket. To me, this would be benefical for many reasons:
- Python Package are easy to install, use and maintain.
- If some important modifications that are backward incompatible are to be done in your code in the next two years, then no one will bother.
- In Sage, code modification must be backward compatible. This means that you will lose a lot of time in adding deprecation warning to your code in the next years. Also, this means that you have to lose a lot of time right now while thinking about all the different use cases that people you don't know may have during using your code.
- To me, the creation of a Python Package is a good way of making a new module go into Sage. Being use publically for one or two years as a Python Package before being included into Sage allows to be sure about the proper interface and without losing much time thinking about how other will use your code.
- This is what I ended up doing for #13346, #13069 and #20343. Instead of waiting years for a review, I decided to put those module into my own python package (slabbe). And the day someone tells me that some of my code is interresting enough for others, then I will consider updating the ticket with the most recent version of the desired module. Meanwhile, I will not update my code at two places in parallel. The most recent version is in my package and slowly, it converges to something usable for many usage.
- In the next two years, the code base of Sage may change and this can break the application the branch of this ticket (like right now today!), which makes your code unusable, untestable.

Here are examples of Python packages for Sage:

- https://pypi.org/project/surface_dynamics/ (include Python, Cython, and C code)
- https://pypi.org/project/slabbe/  (includes Cython code)
- https://pypi.org/project/train-track/ (that you know)
- https://github.com/miltminz/EkEkstar (simple: on single Python file)
- https://github.com/sagemath/sage_sample (a demo with uptodate travis setup, etc.)

Good luck:)



---

archive/issue_comments_370854.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-01-14T18:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_370855.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-02-11T12:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370855",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_370856.json:
```json
{
    "body": "Changing component from packages: optional to packages: standard.",
    "created_at": "2019-02-11T12:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370856",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

Changing component from packages: optional to packages: standard.



---

archive/issue_comments_370857.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+Define a class DetAutomaton that permits to manipulate deterministic automata, and a class CAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.\n+\n+a class DetAutomatonGenerators is usefull to generate easily DetAutomaton.\n+ \n+The ticket has bee refactore and is in now in a correct situation with doc test, documentation in thematic tutorial.\n+\n+This ticket is necessary to for the ticket b-adic and the usage of its tools\n \n \n Author: Paul Mercat, Dominique Benielli\n```\n",
    "created_at": "2019-02-11T12:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370857",
    "user": "https://trac.sagemath.org/admin/accounts/users/dbenielli"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+Define a class DetAutomaton that permits to manipulate deterministic automata, and a class CAutomaton for non-deterministic automata. It implement efficient operations writted in C language to manipulate automata and regular languages.
+
+a class DetAutomatonGenerators is usefull to generate easily DetAutomaton.
+ 
+The ticket has bee refactore and is in now in a correct situation with doc test, documentation in thematic tutorial.
+
+This ticket is necessary to for the ticket b-adic and the usage of its tools
 
 
 Author: Paul Mercat, Dominique Benielli
```




---

archive/issue_comments_370858.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2019-02-11T14:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370858",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_370859.json:
```json
{
    "body": "<a id='comment:78'></a>This is certainly not a package: http://doc.sagemath.org/html/en/developer/packaging.html",
    "created_at": "2019-02-11T14:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370859",
    "user": "https://github.com/videlec"
}
```

<a id='comment:78'></a>This is certainly not a package: http://doc.sagemath.org/html/en/developer/packaging.html



---

archive/issue_comments_370860.json:
```json
{
    "body": "<a id='comment:79'></a>Are the two methods `get_automatonc` and `get_Automaton` the only things you will do to make the current Sage code and your code interact?",
    "created_at": "2019-02-11T14:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370860",
    "user": "https://github.com/videlec"
}
```

<a id='comment:79'></a>Are the two methods `get_automatonc` and `get_Automaton` the only things you will do to make the current Sage code and your code interact?



---

archive/issue_comments_370861.json:
```json
{
    "body": "<a id='comment:80'></a>If you intend to include your Python code in Sage sources then\n- all method names must be lower case with as few abbreviations as possible (e.g. `proji` is not acceptable)\n- all class names must be CAML case with as few abbreviations as possible (e.g. `DetAutomaton` should be `DeterministicAutomaton`)\nThis is not an especially nice convention, but this is how it is.",
    "created_at": "2019-02-11T14:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370861",
    "user": "https://github.com/videlec"
}
```

<a id='comment:80'></a>If you intend to include your Python code in Sage sources then
- all method names must be lower case with as few abbreviations as possible (e.g. `proji` is not acceptable)
- all class names must be CAML case with as few abbreviations as possible (e.g. `DetAutomaton` should be `DeterministicAutomaton`)
This is not an especially nice convention, but this is how it is.



---

archive/issue_comments_370862.json:
```json
{
    "body": "<a id='comment:81'></a>Why `ON PLACE` in the documentation of `permut_op` in upper case? What does `on place` mean? Do you want to say `inplace`?",
    "created_at": "2019-02-11T14:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370862",
    "user": "https://github.com/videlec"
}
```

<a id='comment:81'></a>Why `ON PLACE` in the documentation of `permut_op` in upper case? What does `on place` mean? Do you want to say `inplace`?



---

archive/issue_comments_370863.json:
```json
{
    "body": "<a id='comment:82'></a>Your usage of `sig_on/sig_off` is very wrong. For example, the function `getDict2` contains Python code on its first line\n\n```\n    A = list(A)\n```\nHowever, you wrote in the code of the method `duplicate`\n\n```\n        sig_on()\n        dC = getDict2(d, self.A, d1=d1)\n        sig_off()\n```\nAs written in the cysignals documentation, the code between `sig_on/sig_off` should not contain any Python code.",
    "created_at": "2019-02-11T14:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370863",
    "user": "https://github.com/videlec"
}
```

<a id='comment:82'></a>Your usage of `sig_on/sig_off` is very wrong. For example, the function `getDict2` contains Python code on its first line

```
    A = list(A)
```
However, you wrote in the code of the method `duplicate`

```
        sig_on()
        dC = getDict2(d, self.A, d1=d1)
        sig_off()
```
As written in the cysignals documentation, the code between `sig_on/sig_off` should not contain any Python code.



---

archive/issue_comments_370864.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-15T10:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370865.json:
```json
{
    "body": "<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-15T10:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370866.json:
```json
{
    "body": "<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-15T16:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370867.json:
```json
{
    "body": "<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-21T14:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370868.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-21T15:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370869.json:
```json
{
    "body": "<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-21T18:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370870.json:
```json
{
    "body": "<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-22T15:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25041#issuecomment-370870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:
