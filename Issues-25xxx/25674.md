# Issue 25674: Upgrade R to 3.5.2

archive/issues_025437.json:
```json
{
    "assignees": [],
    "body": "R 3.5.1 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.\n\nThe major difference is that attribute names are now always in a `name = value` form, instead of the names being seperated into `.Names`. Concrete example with `rs = r.summary(1)`:\n\nOld:\n\n```\nsage: P.eval('dput(%s)'%rs.name())\n'structure(c(1, 1, 1, 1, 1, 1), .Names = c(\"Min.\", \"1st Qu.\", \\n\"Median\", \"Mean\", \"3rd Qu.\", \"Max.\"), class = c(\"summaryDefault\", \\n\"table\"))'\n```\n\nNew:\n\n```\nsage: P.eval('dput(%s)'%rs.name())\n'structure(c(Min. = 1, `1st Qu.` = 1, Median = 1, Mean = 1, `3rd Qu.` = 1, \\nMax. = 1), class = c(\"summaryDefault\", \"table\"))'\n```\n\nIt is possible to pass `control = c(\"showAttributes\")` (disabling `niceNames`) to get most of the old behaviour back. Unfortunately that also changes the `structure` format, which already had the `name = value` format before, to the `.Names` format.\n\nDoctest failures with simple upgrade, no changes:\n\n```\nDoctesting 2 files using 4 threads.\nsage -t --long /nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py\", line 42, in sage.stats.r.ttest\nFailed example:\n    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.stats.r.ttest[0]>\", line 1, in <module>\n        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/stats/r.py\", line 48, in ttest\n        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1909, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1, in <module>\n    NameError: name 'structure' is not defined\n**********************************************************************\n1 item had failures:\n   1 of   2 in sage.stats.r.ttest\n    [2 tests, 1 failure, 0.69 s]\nsage -t --long /nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\", line 1295, in sage.interfaces.r.RElement.tilde\nFailed example:\n    d = a._sage_()\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.r.RElement.tilde[3]>\", line 1, in <module>\n        d = a._sage_()\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1909, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1\n        _r_structure(_r_list(structure([1, 2], _Names = [\"(Intercept)\", \"sage5\"]), _r_structure([1.40300389255584e-15, -1.89234786867138e-15, -4.90433114572042e-17, 1.6311465870518e-16, 3.7527262886>\n                                                                                                                                                                                                      >\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\", line 1296, in sage.interfaces.r.RElement.tilde\nFailed example:\n    d['DATA']['coefficients']['DATA'][1]\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.r.RElement.tilde[4]>\", line 1, in <module>\n        d['DATA']['coefficients']['DATA'][Integer(1)]\n    NameError: name 'd' is not defined\n**********************************************************************\n1 item had failures:\n   2 of   6 in sage.interfaces.r.RElement.tilde\n    [260 tests, 2 failures, 1.76 s]\n```\n\nDoctest failures with `control = c(\"showAttributes\")`:\n\n```\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\", line 194, in sage.interfaces.r\nFailed example:\n    d = rs._sage_()\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.r[52]>\", line 1, in <module>\n        d = rs._sage_()\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1905, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1\n        _r_structure([Min. = 1, `1st Qu.` = 1.75, Median = 3, Mean = 2.875, `3rd Qu.` = 4, Max_ = 5], _r_class = [\"summaryDefault\", \"table\"])\n                           ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\", line 1295, in sage.interfaces.r.RElement.tilde\nFailed example:\n    d = a._sage_()\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.r.RElement.tilde[3]>\", line 1, in <module>\n        d = a._sage_()\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1905, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1\n        _r_structure(_r_list(coefficients = [`(Intercept)` = 1, sage5 = 2],     residuals = [`1` = 1.40300389255584e-15, `2` = -1.89234786867138e-15,     `3` = -4.90433114572042e-17, `4` = 1.6311465870518e-16, `5` = 3.75272628867564e-16    ], effects = [`(Intercept)` = -15.6524758424985, sage5 = 6.32455532033676,     -8.88178419700125e-16, -1.33226762955019e-15, -1.77635683940025e-15    ], rank = Integer(2), fitted_values = [`1` = 3, `2` = 5, `3` = 7,     `4` = 9, `5` = 11], assign = range(0,2), qr = _r_structure(_r_list(qr = _r_structure([-2.23606797749979,     0.447213595499958, 0.447213595499958, 0.447213595499958,     0.447213595499958, -6.70820393249937, 3.16227766016838, -0.195439507584855,     -0.511667273601693, -0.827895039618531], _Dim = [Integer(5), Integer(2)], _Dimnames = _r_list(        [\"1\", \"2\", \"3\", \"4\", \"5\"], [\"(Intercept)\", \"sage5\"]), assign = range(0,2)),         qraux = [1.44721359549996, 1.12078825843198], pivot = range(1,3),         tol = 1e-07, rank = Integer(2)), _r_class = \"qr\"), df_residual = Integer(3),     xlevels = _r_structure(_r_list(), _Names = character(0)), call = \"lm(formula = sage24\",     terms = \"sage3 ~ sage5\", model = _r_structure(_r_list(sage3 = [3,     5, 7, 9, 11], sage5 = [1, 2, 3, 4, 5]), terms = \"sage3 ~         sage5\", row_names = [NA, Integer(5)], _r_class = \"data.frame\")), _r_class = \"lm\")\n                                                           ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py\", line 1808, in sage.interfaces.r.RElement._sage_\nFailed example:\n    d = rs._sage_()\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.r.RElement._sage_[1]>\", line 1, in <module>\n        d = rs._sage_()\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1905, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1\n        _r_structure([Min. = 1, `1st Qu.` = 1.75, Median = 3, Mean = 2.875, `3rd Qu.` = 4, Max_ = 5], _r_class = [\"summaryDefault\", \"table\"])\n                           ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py\", line 42, in sage.stats.r.ttest\nFailed example:\n    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.stats.r.ttest[0]>\", line 1, in <module>\n        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/stats/r.py\", line 48, in ttest\n        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()\n      File \"/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py\", line 1905, in _sage_\n        return eval(exp, globs, globs)\n      File \"<string>\", line 1\n        _r_structure(_r_list(statistic = [t = 0.0763364058813133], parameter = [df = 7.99838646300247],     p_value = 0.941026372027427, conf_int = _r_structure([-2.21408055475224,     2.36568055475224], conf_level = 0.95), estimate = [`mean of x` = 3,     `mean of y` = 2.9242], null_value = [`difference in means` = 0],     alternative = \"two.sided\", method = \"Welch Two Sample t-test\",     data_name = \"sage5 and sage11\"), _r_class = \"htest\")\n                                            ^\n    SyntaxError: invalid syntax\n```\n\nUnfortunately I don't understand the parsing code (and its intentions) well enough to fix this myself.\n\nCC'ing the same people as in the last upgrade.\n\n[1] https://stat.ethz.ch/pipermail/r-announce/2018/000628.html\n\ntarball: http://cran.r-project.org/src/base/R-3/R-3.5.2.tar.gz\n\nDepends on #27169\n\nCC:  @EmmanuelCharpentier @dimpase @embray @slel @antonio-rojas @infinity0\n\nKeywords: **r-project, upgrade**\n\nBranch/Commit: **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**\n\nReviewer: **Emmanuel Charpentier**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25674_\n\n",
    "closed_at": "2019-02-05T16:58:02Z",
    "created_at": "2018-06-27T10:26:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade R to 3.5.2",
    "type": "issue",
    "updated_at": "2019-02-05T16:58:02Z",
    "url": "https://github.com/sagemath/sage/issues/25674",
    "user": "https://github.com/timokau"
}
```
R 3.5.1 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.

The major difference is that attribute names are now always in a `name = value` form, instead of the names being seperated into `.Names`. Concrete example with `rs = r.summary(1)`:

Old:

```
sage: P.eval('dput(%s)'%rs.name())
'structure(c(1, 1, 1, 1, 1, 1), .Names = c("Min.", "1st Qu.", \n"Median", "Mean", "3rd Qu.", "Max."), class = c("summaryDefault", \n"table"))'
```

New:

```
sage: P.eval('dput(%s)'%rs.name())
'structure(c(Min. = 1, `1st Qu.` = 1, Median = 1, Mean = 1, `3rd Qu.` = 1, \nMax. = 1), class = c("summaryDefault", "table"))'
```

It is possible to pass `control = c("showAttributes")` (disabling `niceNames`) to get most of the old behaviour back. Unfortunately that also changes the `structure` format, which already had the `name = value` format before, to the `.Names` format.

Doctest failures with simple upgrade, no changes:

```
Doctesting 2 files using 4 threads.
sage -t --long /nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py", line 42, in sage.stats.r.ttest
Failed example:
    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.stats.r.ttest[0]>", line 1, in <module>
        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/stats/r.py", line 48, in ttest
        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1909, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1, in <module>
    NameError: name 'structure' is not defined
**********************************************************************
1 item had failures:
   1 of   2 in sage.stats.r.ttest
    [2 tests, 1 failure, 0.69 s]
sage -t --long /nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py", line 1295, in sage.interfaces.r.RElement.tilde
Failed example:
    d = a._sage_()
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.r.RElement.tilde[3]>", line 1, in <module>
        d = a._sage_()
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1909, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1
        _r_structure(_r_list(structure([1, 2], _Names = ["(Intercept)", "sage5"]), _r_structure([1.40300389255584e-15, -1.89234786867138e-15, -4.90433114572042e-17, 1.6311465870518e-16, 3.7527262886>
                                                                                                                                                                                                      >
    SyntaxError: invalid syntax
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py", line 1296, in sage.interfaces.r.RElement.tilde
Failed example:
    d['DATA']['coefficients']['DATA'][1]
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/0ibil6jw4mrqvclmrc504wg0b8zmwvhw-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.r.RElement.tilde[4]>", line 1, in <module>
        d['DATA']['coefficients']['DATA'][Integer(1)]
    NameError: name 'd' is not defined
**********************************************************************
1 item had failures:
   2 of   6 in sage.interfaces.r.RElement.tilde
    [260 tests, 2 failures, 1.76 s]
```

Doctest failures with `control = c("showAttributes")`:

```
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py", line 194, in sage.interfaces.r
Failed example:
    d = rs._sage_()
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.r[52]>", line 1, in <module>
        d = rs._sage_()
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1905, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1
        _r_structure([Min. = 1, `1st Qu.` = 1.75, Median = 3, Mean = 2.875, `3rd Qu.` = 4, Max_ = 5], _r_class = ["summaryDefault", "table"])
                           ^
    SyntaxError: invalid syntax
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py", line 1295, in sage.interfaces.r.RElement.tilde
Failed example:
    d = a._sage_()
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.r.RElement.tilde[3]>", line 1, in <module>
        d = a._sage_()
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1905, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1
        _r_structure(_r_list(coefficients = [`(Intercept)` = 1, sage5 = 2],     residuals = [`1` = 1.40300389255584e-15, `2` = -1.89234786867138e-15,     `3` = -4.90433114572042e-17, `4` = 1.6311465870518e-16, `5` = 3.75272628867564e-16    ], effects = [`(Intercept)` = -15.6524758424985, sage5 = 6.32455532033676,     -8.88178419700125e-16, -1.33226762955019e-15, -1.77635683940025e-15    ], rank = Integer(2), fitted_values = [`1` = 3, `2` = 5, `3` = 7,     `4` = 9, `5` = 11], assign = range(0,2), qr = _r_structure(_r_list(qr = _r_structure([-2.23606797749979,     0.447213595499958, 0.447213595499958, 0.447213595499958,     0.447213595499958, -6.70820393249937, 3.16227766016838, -0.195439507584855,     -0.511667273601693, -0.827895039618531], _Dim = [Integer(5), Integer(2)], _Dimnames = _r_list(        ["1", "2", "3", "4", "5"], ["(Intercept)", "sage5"]), assign = range(0,2)),         qraux = [1.44721359549996, 1.12078825843198], pivot = range(1,3),         tol = 1e-07, rank = Integer(2)), _r_class = "qr"), df_residual = Integer(3),     xlevels = _r_structure(_r_list(), _Names = character(0)), call = "lm(formula = sage24",     terms = "sage3 ~ sage5", model = _r_structure(_r_list(sage3 = [3,     5, 7, 9, 11], sage5 = [1, 2, 3, 4, 5]), terms = "sage3 ~         sage5", row_names = [NA, Integer(5)], _r_class = "data.frame")), _r_class = "lm")
                                                           ^
    SyntaxError: invalid syntax
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/interfaces/r.py", line 1808, in sage.interfaces.r.RElement._sage_
Failed example:
    d = rs._sage_()
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.r.RElement._sage_[1]>", line 1, in <module>
        d = rs._sage_()
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1905, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1
        _r_structure([Min. = 1, `1st Qu.` = 1.75, Median = 3, Mean = 2.875, `3rd Qu.` = 4, Max_ = 5], _r_class = ["summaryDefault", "table"])
                           ^
    SyntaxError: invalid syntax
**********************************************************************
File "/nix/store/zqyp15yakxl49zwd5phjb33fmxid9022-sage-src-8.2/src/sage/stats/r.py", line 42, in sage.stats.r.ttest
Failed example:
    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.stats.r.ttest[0]>", line 1, in <module>
        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/stats/r.py", line 48, in ttest
        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()
      File "/nix/store/j9c3db3xpl4d81glbpzqq3vyp6nvd3l6-python-2.7.15-env/lib/python2.7/site-packages/sage/interfaces/r.py", line 1905, in _sage_
        return eval(exp, globs, globs)
      File "<string>", line 1
        _r_structure(_r_list(statistic = [t = 0.0763364058813133], parameter = [df = 7.99838646300247],     p_value = 0.941026372027427, conf_int = _r_structure([-2.21408055475224,     2.36568055475224], conf_level = 0.95), estimate = [`mean of x` = 3,     `mean of y` = 2.9242], null_value = [`difference in means` = 0],     alternative = "two.sided", method = "Welch Two Sample t-test",     data_name = "sage5 and sage11"), _r_class = "htest")
                                            ^
    SyntaxError: invalid syntax
```

Unfortunately I don't understand the parsing code (and its intentions) well enough to fix this myself.

CC'ing the same people as in the last upgrade.

[1] https://stat.ethz.ch/pipermail/r-announce/2018/000628.html

tarball: http://cran.r-project.org/src/base/R-3/R-3.5.2.tar.gz

Depends on #27169

CC:  @EmmanuelCharpentier @dimpase @embray @slel @antonio-rojas @infinity0

Keywords: **r-project, upgrade**

Branch/Commit: **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**

Reviewer: **Emmanuel Charpentier**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/25674_





---

archive/issue_events_336955.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-06-27T10:26:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336955"
}
```



---

archive/issue_events_336956.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-06-27T10:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336956"
}
```



---

archive/issue_events_336957.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-06-27T10:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336957"
}
```



---

archive/issue_events_336958.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-06-27T10:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336958"
}
```



---

archive/issue_comments_397055.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nShould this ticket have #24107 (inclusion of OpenSSL, stage 1) as a dependency,\nas discussed in #24969 (upgrade to R 3.4.4)?",
    "created_at": "2018-06-27T12:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397055",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">Comment 1</div>

Should this ticket have #24107 (inclusion of OpenSSL, stage 1) as a dependency,
as discussed in #24969 (upgrade to R 3.4.4)?



---

archive/issue_comments_397056.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nYeah, probably. My package manager probably just fetched openSSL, I din't try it with the sage packaging mechanism.\n\nIt would still be a great first step for distributions if somebody knew how to fix the dput issue. Currently for example ArchLinux uses 3.5.0, resulting in failures.",
    "created_at": "2018-06-27T13:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397056",
    "user": "https://github.com/timokau"
}
```

<div id="comment:2" align="right">Comment 2</div>

Yeah, probably. My package manager probably just fetched openSSL, I din't try it with the sage packaging mechanism.

It would still be a great first step for distributions if somebody knew how to fix the dput issue. Currently for example ArchLinux uses 3.5.0, resulting in failures.



---

archive/issue_comments_397057.json:
```json
{
    "body": "Dependencies: **24107**",
    "created_at": "2018-06-27T13:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397057",
    "user": "https://github.com/timokau"
}
```

Dependencies: **24107**



---

archive/issue_comments_397058.json:
```json
{
    "body": "Changed dependencies from **24107** to **#24107**",
    "created_at": "2018-06-27T13:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397058",
    "user": "https://github.com/timokau"
}
```

Changed dependencies from **24107** to **#24107**



---

archive/issue_comments_397059.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@slel](#comment%3A1):\n> Should this ticket have #24107 (inclusion of OpenSSL, stage 1) as a dependency,\n> as discussed in #24969 (upgrade to R 3.4.4)?\n\nYes, indeed. Notwithstanding the dire objections of some, SSL support is now a necessity for R (and it should be...). \n\nI am still searching a way to ensure the possibility of compiling R without SSL support for the purists who whish that, but I have not been successful for now. I thoink I'm ready to throw the towel on this one, and rely on a (standard) openssl package or a systemwide one. stay tuned on #24107...\n\n`<ThinkingOutLoud>`\n\nFor `dput` change, the only way out is to rewrite the relevant parts of the interface, thus introducing a major incompatibility. This is a problem if we ever want to be able to call a systemwide R, as it has been proposed.\n\nIdeally, version checking should occur at interface initialization, and some function pointer should be initialized according to this check. This pointer should be used everywhere this conversion is needed. Not really easy, but the only way out if we want to be able to use a systemwide R which will not necessarily be >=3.5.0...\n\nA similar initialization is necessary for the (R) library interface. We probably should upgraded `Rpy` to a 3.5-compatible version. I'm not sure that the dus has already settled on this one...\n\n`</ThinkingOutLoud>`\n\nAnyway, R 3.5 seems to change a lot of small things. The problem with `dput` is not the only one, but I am not (yet) at the root of some other problems.\n\nIdeas ? Maybe calling for advice on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel) ?",
    "created_at": "2018-06-27T15:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397059",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@slel](#comment%3A1):
> Should this ticket have #24107 (inclusion of OpenSSL, stage 1) as a dependency,
> as discussed in #24969 (upgrade to R 3.4.4)?

Yes, indeed. Notwithstanding the dire objections of some, SSL support is now a necessity for R (and it should be...). 

I am still searching a way to ensure the possibility of compiling R without SSL support for the purists who whish that, but I have not been successful for now. I thoink I'm ready to throw the towel on this one, and rely on a (standard) openssl package or a systemwide one. stay tuned on #24107...

`<ThinkingOutLoud>`

For `dput` change, the only way out is to rewrite the relevant parts of the interface, thus introducing a major incompatibility. This is a problem if we ever want to be able to call a systemwide R, as it has been proposed.

Ideally, version checking should occur at interface initialization, and some function pointer should be initialized according to this check. This pointer should be used everywhere this conversion is needed. Not really easy, but the only way out if we want to be able to use a systemwide R which will not necessarily be >=3.5.0...

A similar initialization is necessary for the (R) library interface. We probably should upgraded `Rpy` to a 3.5-compatible version. I'm not sure that the dus has already settled on this one...

`</ThinkingOutLoud>`

Anyway, R 3.5 seems to change a lot of small things. The problem with `dput` is not the only one, but I am not (yet) at the root of some other problems.

Ideas ? Maybe calling for advice on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel) ?



---

archive/issue_comments_397060.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\n> For `dput` change, the only way out is to rewrite the relevant parts of the interface, thus introducing a major incompatibility. This is a problem if we ever want to be able to call a systemwide R, as it has been proposed.\n> \n> Ideally, version checking should occur at interface initialization, and some function pointer should be initialized according to this check. This pointer should be used everywhere this conversion is needed. Not really easy, but the only way out if we want to be able to use a systemwide R which will not necessarily be >=3.5.0...\n\nCouldn't we simply require the system version of R to be >=3.5.0 in order to be used, in that hypothetical case?\n\n> Anyway, R 3.5 seems to change a lot of small things. The problem with `dput` is not the only one, but I am not (yet) at the root of some other problems.\n\nFor me that seemed to be the only error, at least as far as the doctests are concerned.",
    "created_at": "2018-06-28T13:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397060",
    "user": "https://github.com/timokau"
}
```

<div id="comment:6" align="right">Comment 6</div>

> For `dput` change, the only way out is to rewrite the relevant parts of the interface, thus introducing a major incompatibility. This is a problem if we ever want to be able to call a systemwide R, as it has been proposed.
> 
> Ideally, version checking should occur at interface initialization, and some function pointer should be initialized according to this check. This pointer should be used everywhere this conversion is needed. Not really easy, but the only way out if we want to be able to use a systemwide R which will not necessarily be >=3.5.0...

Couldn't we simply require the system version of R to be >=3.5.0 in order to be used, in that hypothetical case?

> Anyway, R 3.5 seems to change a lot of small things. The problem with `dput` is not the only one, but I am not (yet) at the root of some other problems.

For me that seemed to be the only error, at least as far as the doctests are concerned.



---

archive/issue_events_336959.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-07-13T19:40:16Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "title_is": "Upgrade R to 3.5.1",
    "title_was": "Upgrade R to 3.5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336959"
}
```



---

archive/issue_comments_397061.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThe latest version is 3.5.1 now.",
    "created_at": "2018-07-13T19:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397061",
    "user": "https://github.com/timokau"
}
```

<div id="comment:8" align="right">Comment 8</div>

The latest version is 3.5.1 now.



---

archive/issue_comments_397062.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-R 3.5.0 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.\n+R 3.5.1 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.\n \n The major difference is that attribute names are now always in a `name = value` form, instead of the names being seperated into `.Names`. Concrete example with `rs = r.summary(1)`:\n \n``````\n",
    "created_at": "2018-07-13T19:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397062",
    "user": "https://github.com/timokau"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-R 3.5.0 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.
+R 3.5.1 is out and has changed the `dput` format (search [1] for dput). That is breaking the sage <-> r conversion in `_sage_()`, which parses the `dput` output.
 
 The major difference is that attribute names are now always in a `name = value` form, instead of the names being seperated into `.Names`. Concrete example with `rs = r.summary(1)`:
 
``````




---

archive/issue_comments_397063.json:
```json
{
    "body": "Changed keywords from **r-project** to **r-project, upgrade**",
    "created_at": "2018-09-11T09:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397063",
    "user": "https://github.com/slel"
}
```

Changed keywords from **r-project** to **r-project, upgrade**



---

archive/issue_comments_397064.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nNote that a duplicate ticket was opened at #26185.",
    "created_at": "2018-09-11T09:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397064",
    "user": "https://github.com/slel"
}
```

<div id="comment:10" align="right">Comment 10</div>

Note that a duplicate ticket was opened at #26185.



---

archive/issue_comments_397065.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nNote that that ticket has a patch from me that fixes 6/8 of the test failures, and describes the problem with the remaining 2/8. The parsing code is very very very very brittle and might need to be completely rewritten to work reliably. Or use another method than parsing R's REPL output.",
    "created_at": "2018-09-11T15:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397065",
    "user": "https://github.com/infinity0"
}
```

<div id="comment:11" align="right">Comment 11</div>

Note that that ticket has a patch from me that fixes 6/8 of the test failures, and describes the problem with the remaining 2/8. The parsing code is very very very very brittle and might need to be completely rewritten to work reliably. Or use another method than parsing R's REPL output.



---

archive/issue_comments_397066.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nFeel free to use that branch here too and/or amend the description. If you prefer we can also close this ticket and use #26185 instead.\n\n> The parsing code is very very very very brittle and might need to be completely rewritten to work reliably\n\nThat is what I fear too :/\n\n> Or use another method than parsing R's REPL output\n\nThat would be best if there is such a method.",
    "created_at": "2018-09-11T18:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397066",
    "user": "https://github.com/timokau"
}
```

<div id="comment:12" align="right">Comment 12</div>

Feel free to use that branch here too and/or amend the description. If you prefer we can also close this ticket and use #26185 instead.

> The parsing code is very very very very brittle and might need to be completely rewritten to work reliably

That is what I fear too :/

> Or use another method than parsing R's REPL output

That would be best if there is such a method.



---

archive/issue_comments_397067.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nI try to fix this in #26596 by replacing the regular expression + dput based interface with rpy2. Help and feedback wanted.",
    "created_at": "2018-10-29T23:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397067",
    "user": "https://github.com/timokau"
}
```

<div id="comment:13" align="right">Comment 13</div>

I try to fix this in #26596 by replacing the regular expression + dput based interface with rpy2. Help and feedback wanted.



---

archive/issue_comments_397068.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\n#26596 is ready now. Once that is merged, there is no technical issue with R 3.5 anymore.",
    "created_at": "2018-11-22T18:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397068",
    "user": "https://github.com/timokau"
}
```

<div id="comment:14" align="right">Comment 14</div>

#26596 is ready now. Once that is merged, there is no technical issue with R 3.5 anymore.



---

archive/issue_comments_397069.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nNote: the News section of the [R-project homepage](https://www.r-project.org/)\nsays R 3.5.2 was released on 2018-12-20.",
    "created_at": "2019-01-13T17:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397069",
    "user": "https://github.com/slel"
}
```

<div id="comment:15" align="right">Comment 15</div>

Note: the News section of the [R-project homepage](https://www.r-project.org/)
says R 3.5.2 was released on 2018-12-20.



---

archive/issue_events_336960.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T12:01:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "title_is": "Upgrade R to 3.5.2",
    "title_was": "Upgrade R to 3.5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336960"
}
```



---

archive/issue_comments_397070.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -167,3 +167,4 @@\n \n [1] https://stat.ethz.ch/pipermail/r-announce/2018/000628.html\n \n+tarball: http://cran.r-project.org/src/base/R-3/R-3.5.2.tar.gz\n``````\n",
    "created_at": "2019-01-29T12:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397070",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -167,3 +167,4 @@
 
 [1] https://stat.ethz.ch/pipermail/r-announce/2018/000628.html
 
+tarball: http://cran.r-project.org/src/base/R-3/R-3.5.2.tar.gz
``````




---

archive/issue_comments_397071.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nperhaps this would also fix #27163",
    "created_at": "2019-01-29T12:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397071",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

perhaps this would also fix #27163



---

archive/issue_comments_397072.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI'll post a branch in a moment, sorting out patches",
    "created_at": "2019-01-29T12:17:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397072",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">Comment 17</div>

I'll post a branch in a moment, sorting out patches



---

archive/issue_comments_397073.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-01-29T12:17:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397073",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_397074.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nAre you aware of the openssl issue?",
    "created_at": "2019-01-29T12:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397074",
    "user": "https://github.com/timokau"
}
```

<div id="comment:18" align="right">Comment 18</div>

Are you aware of the openssl issue?



---

archive/issue_comments_397075.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWhat openssl issue?",
    "created_at": "2019-01-29T12:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397075",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">Comment 19</div>

What openssl issue?



---

archive/issue_events_336961.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T12:45:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336961"
}
```



---

archive/issue_comments_397076.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd\">37036a4</a></td><td><code>update are to 3.5.2</code></td></tr></table>\n",
    "created_at": "2019-01-29T12:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397076",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd">37036a4</a></td><td><code>update are to 3.5.2</code></td></tr></table>




---

archive/issue_comments_397077.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/r352](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/r352)**",
    "created_at": "2019-01-29T12:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397077",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/r352](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/r352)**



---

archive/issue_comments_397078.json:
```json
{
    "body": "Commit: **[37036a4](https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd)**",
    "created_at": "2019-01-29T12:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397078",
    "user": "https://github.com/dimpase"
}
```

Commit: **[37036a4](https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd)**



---

archive/issue_comments_397079.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09\">3c90c03</a></td><td><code>update R to 3.5.2</code></td></tr></table>\n",
    "created_at": "2019-01-29T12:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397079",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09">3c90c03</a></td><td><code>update R to 3.5.2</code></td></tr></table>




---

archive/issue_comments_397080.json:
```json
{
    "body": "Changed commit from **[37036a4](https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd)** to **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**",
    "created_at": "2019-01-29T12:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37036a4](https://github.com/sagemath/sagetrac-mirror/commit/37036a4ef1696b2eb8d270cdbabdd6de789ad9dd)** to **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**



---

archive/issue_events_336962.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T12:50:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336962"
}
```



---

archive/issue_events_336963.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T12:50:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336963"
}
```



---

archive/issue_comments_397081.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI'm deleting the wishful thinking dependence #24107. We could not wait more years for OpenSSL to be re-licensed.",
    "created_at": "2019-01-29T12:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397081",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">Comment 23</div>

I'm deleting the wishful thinking dependence #24107. We could not wait more years for OpenSSL to be re-licensed.



---

archive/issue_comments_397082.json:
```json
{
    "body": "Changed dependencies from **#24107** to none",
    "created_at": "2019-01-29T12:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397082",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#24107** to none



---

archive/issue_comments_397083.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nSo what is the solution then? I haven't looked into this much, but my impression was that the R update was blocked by its requirement of openssl and the licensing issues. Can you still ship a newer R version without openssl?",
    "created_at": "2019-01-29T13:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397083",
    "user": "https://github.com/timokau"
}
```

<div id="comment:24" align="right">Comment 24</div>

So what is the solution then? I haven't looked into this much, but my impression was that the R update was blocked by its requirement of openssl and the licensing issues. Can you still ship a newer R version without openssl?



---

archive/issue_comments_397084.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI don't think anything has changed since R 3.4.4 in this respect. We are not bundling OpenSSL with it, there are no licensing issues to worry about.",
    "created_at": "2019-01-29T13:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397084",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">Comment 25</div>

I don't think anything has changed since R 3.4.4 in this respect. We are not bundling OpenSSL with it, there are no licensing issues to worry about.



---

archive/issue_comments_397085.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@dimpase](#comment%3A25):\n> I don't think anything has changed since R 3.4.4 in this respect. We are not bundling OpenSSL with it, there are no licensing issues to worry about.\n\nTherefore, we are now depending on OpenSSL (R is a standard package...).",
    "created_at": "2019-01-29T13:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397085",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@dimpase](#comment%3A25):
> I don't think anything has changed since R 3.4.4 in this respect. We are not bundling OpenSSL with it, there are no licensing issues to worry about.

Therefore, we are now depending on OpenSSL (R is a standard package...).



---

archive/issue_comments_397086.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI don't think R is the only Sage package that needs OpenSSL or some replacement for it.\nE.g. curl won't get you things from the web without OpenSSL.",
    "created_at": "2019-01-29T13:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397086",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">Comment 27</div>

I don't think R is the only Sage package that needs OpenSSL or some replacement for it.
E.g. curl won't get you things from the web without OpenSSL.



---

archive/issue_comments_397087.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@dimpase](#comment%3A27):\n> I don't think R is the only Sage package that needs OpenSSL or some replacement for it.\n> E.g. curl won't get you things from the web without OpenSSL. \n\nIndeed.\n\nBut some (quite vocally) argued against depending on OpenSSL ; for now it's just \"strongly recommended\", not a dependency.\n\nI tried (and failed) to avoid it, but proved that OpenSSL is necessary for R, for some Python and `pip` functions (among others)... Hence my proposal for integration (which stumbled on the fact that there are no acceptable substitute for some functions), and the wait for the godda OpenSSL relicensing...",
    "created_at": "2019-01-29T14:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397087",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@dimpase](#comment%3A27):
> I don't think R is the only Sage package that needs OpenSSL or some replacement for it.
> E.g. curl won't get you things from the web without OpenSSL. 

Indeed.

But some (quite vocally) argued against depending on OpenSSL ; for now it's just "strongly recommended", not a dependency.

I tried (and failed) to avoid it, but proved that OpenSSL is necessary for R, for some Python and `pip` functions (among others)... Hence my proposal for integration (which stumbled on the fact that there are no acceptable substitute for some functions), and the wait for the godda OpenSSL relicensing...



---

archive/issue_comments_397088.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nOn Debian `buster` (a. k. a. `testing`), won't give a graphics-able R (see also #27163) :\n\n```\ncharpent@zen-book-flip:/usr/local/sage-8$ sage -R\n\nR version 3.5.2 (2018-12-20) -- \"Eggshell Igloo\"\nCopyright (C) 2018 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR est un logiciel libre livr\u00e9 sans AUCUNE GARANTIE.\nVous pouvez le redistribuer sous certaines conditions.\nTapez 'license()' ou 'licence()' pour plus de d\u00e9tails.\n\nR est un projet collaboratif avec de nombreux contributeurs.\nTapez 'contributors()' pour plus d'information et\n'citation()' pour la fa\u00e7on de le citer dans les publications.\n\nTapez 'demo()' pour des d\u00e9monstrations, 'help()' pour l'aide\nen ligne ou 'help.start()' pour obtenir l'aide au format HTML.\nTapez 'q()' pour quitter R.\n\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE \nWarning message:\nIn doTryCatch(return(expr), name, parentenv, handler) :\n  impossible de charger l'objet partag\u00e9 '/usr/local/sage-8/local/lib/R//modules//R_X11.so':\n  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var\n> \n```\n\nFor comparison, on the same machine :\n\n```\nharpent@zen-book-flip:/usr/local/sage-8$ R\n\nR version 3.5.2 (2018-12-20) -- \"Eggshell Igloo\"\nCopyright (C) 2018 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR est un logiciel libre livr\u00e9 sans AUCUNE GARANTIE.\nVous pouvez le redistribuer sous certaines conditions.\nTapez 'license()' ou 'licence()' pour plus de d\u00e9tails.\n\nR est un projet collaboratif avec de nombreux contributeurs.\nTapez 'contributors()' pour plus d'information et\n'citation()' pour la fa\u00e7on de le citer dans les publications.\n\nTapez 'demo()' pour des d\u00e9monstrations, 'help()' pour l'aide\nen ligne ou 'help.start()' pour obtenir l'aide au format HTML.\nTapez 'q()' pour quitter R.\n\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n       TRUE        TRUE        TRUE        TRUE        TRUE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n> \n```",
    "created_at": "2019-01-29T14:06:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397088",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:29" align="right">Comment 29</div>

On Debian `buster` (a. k. a. `testing`), won't give a graphics-able R (see also #27163) :

```
charpent@zen-book-flip:/usr/local/sage-8$ sage -R

R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R est un logiciel libre livré sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de détails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la façon de le citer dans les publications.

Tapez 'demo()' pour des démonstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE 
Warning message:
In doTryCatch(return(expr), name, parentenv, handler) :
  impossible de charger l'objet partagé '/usr/local/sage-8/local/lib/R//modules//R_X11.so':
  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var
> 
```

For comparison, on the same machine :

```
harpent@zen-book-flip:/usr/local/sage-8$ R

R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R est un logiciel libre livré sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de détails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la façon de le citer dans les publications.

Tapez 'demo()' pour des démonstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
       TRUE        TRUE        TRUE        TRUE        TRUE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
> 
```



---

archive/issue_events_336964.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T14:06:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336964"
}
```



---

archive/issue_events_336965.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T14:06:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336965"
}
```



---

archive/issue_comments_397089.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nYou get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.\n\nIMHO this is for another ticket...",
    "created_at": "2019-01-29T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397089",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">Comment 30</div>

You get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.

IMHO this is for another ticket...



---

archive/issue_comments_397090.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@dimpase](#comment%3A30):\n> You get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.\n> \n> IMHO this is for another ticket...\n\nThat's why I opened #27163...",
    "created_at": "2019-01-29T14:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397090",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@dimpase](#comment%3A30):
> You get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.
> 
> IMHO this is for another ticket...

That's why I opened #27163...



---

archive/issue_comments_397091.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A31):\n> Replying to [@dimpase](#comment%3A30):\n> > You get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.\n> > \n> > IMHO this is for another ticket...\n\n> \n> That's why I opened #27163...\n\nTo be fair, the discrepancy between your (positive) results on `stretch` and my (negative) results on `buster` show tha the problem is system-dependent. I'll modify #27163 to make that clear.",
    "created_at": "2019-01-29T14:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397091",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@EmmanuelCharpentier](#comment%3A31):
> Replying to [@dimpase](#comment%3A30):
> > You get the same error on this machine with R 3.4.4. If you can dig up patches that make system's R work on your box, fine, but I have no means to test them.
> > 
> > IMHO this is for another ticket...

> 
> That's why I opened #27163...

To be fair, the discrepancy between your (positive) results on `stretch` and my (negative) results on `buster` show tha the problem is system-dependent. I'll modify #27163 to make that clear.



---

archive/issue_comments_397092.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nhow about we going forward with this upgrade? Your problem on buster is pretty much orthogonal to this ticket.",
    "created_at": "2019-01-29T14:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397092",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">Comment 33</div>

how about we going forward with this upgrade? Your problem on buster is pretty much orthogonal to this ticket.



---

archive/issue_events_336966.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T14:34:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336966"
}
```



---

archive/issue_events_336967.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T14:34:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336967"
}
```



---

archive/issue_comments_397093.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nFor what its worth, I agree that \"just use system openssl\" is good enough here. But I'm biased as a packager (who has already switched to the latest R as soon as the switch to rpy2 was merged).",
    "created_at": "2019-01-29T14:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397093",
    "user": "https://github.com/timokau"
}
```

<div id="comment:34" align="right">Comment 34</div>

For what its worth, I agree that "just use system openssl" is good enough here. But I'm biased as a packager (who has already switched to the latest R as soon as the switch to rpy2 was merged).



---

archive/issue_comments_397094.json:
```json
{
    "body": "Dependencies: **27169**",
    "created_at": "2019-01-30T16:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397094",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Dependencies: **27169**



---

archive/issue_events_336968.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-30T16:02:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336968"
}
```



---

archive/issue_events_336969.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-30T16:02:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336969"
}
```



---

archive/issue_comments_397095.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nWith #27169, passes `ptestlong` without permanent failure. It also passes its own test suite, up to numerical noise or expected failures (such as Internet tests).\n\nTherefore :\n* depends on #27169\n* `positive review`",
    "created_at": "2019-01-30T16:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397095",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:35" align="right">Comment 35</div>

With #27169, passes `ptestlong` without permanent failure. It also passes its own test suite, up to numerical noise or expected failures (such as Internet tests).

Therefore :
* depends on #27169
* `positive review`



---

archive/issue_comments_397096.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier**",
    "created_at": "2019-01-30T16:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397096",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Emmanuel Charpentier**



---

archive/issue_comments_397097.json:
```json
{
    "body": "Changed dependencies from **27169** to **#27169**",
    "created_at": "2019-01-30T16:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397097",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **27169** to **#27169**



---

archive/issue_comments_397098.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/r352](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/r352)** to **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**",
    "created_at": "2019-02-05T16:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25674#issuecomment-397098",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/r352](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/r352)** to **[3c90c03](https://github.com/sagemath/sagetrac-mirror/commit/3c90c0353d6629ee537a08639880b5030cb21d09)**



---

archive/issue_events_336970.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-05T16:58:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336970"
}
```



---

archive/issue_events_336971.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9930e0045ef6321c016fc7c1c58e2d55561f1040",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-05T16:58:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25674",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25674#event-336971"
}
```
