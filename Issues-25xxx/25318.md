# Issue 25318: Improve basic operations with fraction field elements

archive/issues_025081.json:
```json
{
    "body": "As discussed in\n[this 2018-06 sage-devel discussion](https://groups.google.com/d/topic/sage-devel/Sqt4N8eVq-o/discussion),\nthis is part of an effort to improve fraction field elements,\nand in particular rational fractions in several variables,\nspread across four tickets:\n\n- #25318: Improve basic operations with fraction field elements (the present ticket)\n- #25290: Don't use Karatsuba for multiplying polynomials over fraction fields\n- #23909; GCD for univariate polynomials over fraction fields\n- #16268: Better normalization for fraction field elements\n\nAt least for some applications, these tickets bring Sage fraction field elements\nfrom \"so slow they are unusable\" to \"not really great yet but reasonable\".\n\n\nCC:  @roed314 @xcaruso @slel @nthiery @anneschilling\n\nReviewer: Julian R\u00fcth\n\nAuthor: Marc Mezzarobba\n\nBranch: u/mmezzarobba/fractions_trivial\n\nStatus: needs_work\n\nDependencies: #16268\n\nCommit: 51c430873b0b8fe64865328afa73550241927866\n\nIssue created by migration from https://trac.sagemath.org/ticket/25318\n\n",
    "created_at": "2018-05-09T19:34:28Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Improve basic operations with fraction field elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25318",
    "user": "https://github.com/mezzarobba"
}
```
As discussed in
[this 2018-06 sage-devel discussion](https://groups.google.com/d/topic/sage-devel/Sqt4N8eVq-o/discussion),
this is part of an effort to improve fraction field elements,
and in particular rational fractions in several variables,
spread across four tickets:

- #25318: Improve basic operations with fraction field elements (the present ticket)
- #25290: Don't use Karatsuba for multiplying polynomials over fraction fields
- #23909; GCD for univariate polynomials over fraction fields
- #16268: Better normalization for fraction field elements

At least for some applications, these tickets bring Sage fraction field elements
from "so slow they are unusable" to "not really great yet but reasonable".


CC:  @roed314 @xcaruso @slel @nthiery @anneschilling

Reviewer: Julian Rüth

Author: Marc Mezzarobba

Branch: u/mmezzarobba/fractions_trivial

Status: needs_work

Dependencies: #16268

Commit: 51c430873b0b8fe64865328afa73550241927866

Issue created by migration from https://trac.sagemath.org/ticket/25318





---

archive/issue_comments_375632.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-09T19:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375633.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-09T19:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375633",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_375634.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2018-05-11T19:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375634",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_375635.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-11T19:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375636.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-12T05:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375636",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_375637.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-05-12T07:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_375638.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-12T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375639.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-12T10:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375640.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-12T16:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375641.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-12T17:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375641",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_375642.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-27T19:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_375643.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T08:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375643",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_375644.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-05-29T09:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_375645.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:12 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                               |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n> |[15d9f06](https://git.sagemath.org/sage.git/commit/?id=15d9f0654b5dc744cfe066372214025b06301ad1)|`#25318 fix doctest after merging with develop`|\n\n\nOops, this fix should have gone to #16268. Moved it there and rebased on top of it.",
    "created_at": "2018-05-29T09:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375645",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:14'></a>Replying to [comment:12 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                               |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
> |[15d9f06](https://git.sagemath.org/sage.git/commit/?id=15d9f0654b5dc744cfe066372214025b06301ad1)|`#25318 fix doctest after merging with develop`|


Oops, this fix should have gone to #16268. Moved it there and rebased on top of it.



---

archive/issue_comments_375646.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-06-10T12:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_375647.json:
```json
{
    "body": "<a id='comment:16'></a>Rebased on 8.3.beta5 along with #16268.",
    "created_at": "2018-06-10T12:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375647",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:16'></a>Rebased on 8.3.beta5 along with #16268.



---

archive/issue_comments_375648.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-10T12:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_375649.json:
```json
{
    "body": "<a id='comment:18'></a>Could you explain why you need to remove the p-adic doctest? You mentioned this in #25440 but I could not immediately find a reason for this in this ticket:\n\n```patch\n-        Check that inexact elements are treated correctly::\n-\n-            sage: K=Qp(2,5)\n-            sage: R.<x> = K[]\n-            sage: L = R.fraction_field()\n-            sage: S.<y> = L[]\n-            sage: y(K(1,1)/x)\n-            ((1 + O(2)))/((1 + O(2^5))*x)\n```",
    "created_at": "2018-06-11T06:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375649",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:18'></a>Could you explain why you need to remove the p-adic doctest? You mentioned this in #25440 but I could not immediately find a reason for this in this ticket:

```patch
-        Check that inexact elements are treated correctly::
-
-            sage: K=Qp(2,5)
-            sage: R.<x> = K[]
-            sage: L = R.fraction_field()
-            sage: S.<y> = L[]
-            sage: y(K(1,1)/x)
-            ((1 + O(2)))/((1 + O(2^5))*x)
```



---

archive/issue_comments_375650.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-06-11T06:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375650",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_375651.json:
```json
{
    "body": "<a id='comment:19'></a>Because it breaks again after this ticket, due to new code that uses `is_one()` to test if a leading coefficient (or something like that, I don't remember exactly) is one. And while I have nothing against the workaround you added in #25440 to accommodate the behavior of `is_one()` for p-adics as long as it doesn't break anything else, I don't think we want to block other changes due to what I see as a bug of p-adics...",
    "created_at": "2018-06-11T08:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375651",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:19'></a>Because it breaks again after this ticket, due to new code that uses `is_one()` to test if a leading coefficient (or something like that, I don't remember exactly) is one. And while I have nothing against the workaround you added in #25440 to accommodate the behavior of `is_one()` for p-adics as long as it doesn't break anything else, I don't think we want to block other changes due to what I see as a bug of p-adics...



---

archive/issue_comments_375652.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-06-11T08:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375652",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_375653.json:
```json
{
    "body": "<a id='comment:21'></a>I don't think it's a bug. p-adics make imho the less fortunate of two reasonable choices on how to implement `==`. No matter how you implement it, lots of implementations that are not aware of inexact elements break.\n\nIf you take the above doctest out, doesn't this mean that you produce a wrong result again now? I am not sure that it's valid to just claim that p-adics are broken, so we should not care about them.\n\nI also don't want to block progress on fraction fields which would be quite nice. But can't we have both?",
    "created_at": "2018-06-11T15:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375653",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>I don't think it's a bug. p-adics make imho the less fortunate of two reasonable choices on how to implement `==`. No matter how you implement it, lots of implementations that are not aware of inexact elements break.

If you take the above doctest out, doesn't this mean that you produce a wrong result again now? I am not sure that it's valid to just claim that p-adics are broken, so we should not care about them.

I also don't want to block progress on fraction fields which would be quite nice. But can't we have both?



---

archive/issue_comments_375654.json:
```json
{
    "body": "<a id='comment:22'></a>Let's hear what some other people think about this\u2026",
    "created_at": "2018-06-11T15:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375654",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>Let's hear what some other people think about this…



---

archive/issue_comments_375655.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 saraedum]:\n> I don't think it's a bug. p-adics make imho the less fortunate of two reasonable choices on how to implement `==`. No matter how you implement it, lots of implementations that are not aware of inexact elements break.\n\n\nOk, perhaps calling it a bug is a bit strong. But in the parts of Sage I'm familiar with, there are a number of generic algorithms that already use equality and (more importantly) `is_zero()`, `is_one()`, `bool()` in a way compatible with interval-like rings... but with the semantics of interval arithmetic, not those of p-adics.\n\n> If you take the above doctest out, doesn't this mean that you produce a wrong result again now?\n\n\nYes, I think so.\n\n> I am not sure that it's valid to just claim that p-adics are broken, so we should not care about them.\n> \n> I also don't want to block progress on fraction fields which would be quite nice. But can't we have both?\n\n\nIn the present case, I don't really see how without changing the implementation of p-adics, but if you have an idea I'd love to hear it!\n\nDo you think it would be break anything if we modified the p-adic `is_zero()` and `is_one()` without touching\u00a0`==`, though? While it can be argued that `==` is an \u201cinternal\u201d operation on each parent (using it in combination with coercion is known to be dangerous anyway), whose semantics could vary from parent to parent, I really don't see anyone calling `is_one()` and expecting it to return `True` on anything but the exact unit element, even for p-adics... And I guess that change already would be enough to make most generic algorithms work on p-adics.",
    "created_at": "2018-06-11T17:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375655",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:23'></a>Replying to [comment:21 saraedum]:
> I don't think it's a bug. p-adics make imho the less fortunate of two reasonable choices on how to implement `==`. No matter how you implement it, lots of implementations that are not aware of inexact elements break.


Ok, perhaps calling it a bug is a bit strong. But in the parts of Sage I'm familiar with, there are a number of generic algorithms that already use equality and (more importantly) `is_zero()`, `is_one()`, `bool()` in a way compatible with interval-like rings... but with the semantics of interval arithmetic, not those of p-adics.

> If you take the above doctest out, doesn't this mean that you produce a wrong result again now?


Yes, I think so.

> I am not sure that it's valid to just claim that p-adics are broken, so we should not care about them.
> 
> I also don't want to block progress on fraction fields which would be quite nice. But can't we have both?


In the present case, I don't really see how without changing the implementation of p-adics, but if you have an idea I'd love to hear it!

Do you think it would be break anything if we modified the p-adic `is_zero()` and `is_one()` without touching `==`, though? While it can be argued that `==` is an “internal” operation on each parent (using it in combination with coercion is known to be dangerous anyway), whose semantics could vary from parent to parent, I really don't see anyone calling `is_one()` and expecting it to return `True` on anything but the exact unit element, even for p-adics... And I guess that change already would be enough to make most generic algorithms work on p-adics.



---

archive/issue_comments_375656.json:
```json
{
    "body": "<a id='comment:24'></a>Currently, I think that the exact p-adic one does not exist in Sage (except for floating point arithmetics). So are you saying that `is_one` should always return `False`? Or that exact p-adic elements have to be implemented?",
    "created_at": "2018-06-15T12:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375656",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:24'></a>Currently, I think that the exact p-adic one does not exist in Sage (except for floating point arithmetics). So are you saying that `is_one` should always return `False`? Or that exact p-adic elements have to be implemented?



---

archive/issue_comments_375657.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 caruso]:\n> Currently, I think that the exact p-adic one does not exist in Sage (except for floating point arithmetics). So are you saying that `is_one` should always return `False`? Or that exact p-adic elements have to be implemented?\n\n\nI don't know. Perhaps it should always return `False`, or perhaps it should return `True` when the element is one up to the maximum precision of the ring... I guess it depends how you want generic objects to behave. For example, what should be the degree of a polynomial whose leading term is O(p<sup>k</sup>)? When should multiplication by \u201czero\u201d, resp. \u201cone\u201d yield `R.zero()`, resp. the other operand?",
    "created_at": "2018-06-15T12:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375657",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:25'></a>Replying to [comment:24 caruso]:
> Currently, I think that the exact p-adic one does not exist in Sage (except for floating point arithmetics). So are you saying that `is_one` should always return `False`? Or that exact p-adic elements have to be implemented?


I don't know. Perhaps it should always return `False`, or perhaps it should return `True` when the element is one up to the maximum precision of the ring... I guess it depends how you want generic objects to behave. For example, what should be the degree of a polynomial whose leading term is O(p<sup>k</sup>)? When should multiplication by “zero”, resp. “one” yield `R.zero()`, resp. the other operand?



---

archive/issue_comments_375658.json:
```json
{
    "body": "<a id='comment:26'></a>My personal philosophy is that a should be considered as equal to b as soon as they are indistinguishable (which is the current behavior), but I agree that this has disadvantages as well.\n\nI'm not sure that it's a good idea to let `a == 1` have a different meaning than `a.is_one()`. Personally, I consider the two constructions as equivalent.",
    "created_at": "2018-06-15T13:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375658",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:26'></a>My personal philosophy is that a should be considered as equal to b as soon as they are indistinguishable (which is the current behavior), but I agree that this has disadvantages as well.

I'm not sure that it's a good idea to let `a == 1` have a different meaning than `a.is_one()`. Personally, I consider the two constructions as equivalent.



---

archive/issue_comments_375659.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 caruso]:\n> My personal philosophy is that a should be considered as equal to b as soon as they are indistinguishable (which is the current behavior), but I agree that this has disadvantages as well.\n\n\nAnd I'm fine with that. But it seems hard to me to make generic algorithms (that must work over other parents too) accommodate that, unless you also agree that operations involving p-adics can return results \u201cequal\u201d to the correct one in that sense (but possibly more precise).\n\nI don't really like having `x.is_one()` differ from `== 1` either, but that would solve the problem in many cases...\n\nWhat do you think we should do in the case of the present ticket? Or, to take a similar but simpler example, what do you think `c*pol` should return when `pol` is a generic polynomial and `c` is a scalar with `c.is_one()`? And when `c.is_zero()`?",
    "created_at": "2018-06-15T14:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375659",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:27'></a>Replying to [comment:26 caruso]:
> My personal philosophy is that a should be considered as equal to b as soon as they are indistinguishable (which is the current behavior), but I agree that this has disadvantages as well.


And I'm fine with that. But it seems hard to me to make generic algorithms (that must work over other parents too) accommodate that, unless you also agree that operations involving p-adics can return results “equal” to the correct one in that sense (but possibly more precise).

I don't really like having `x.is_one()` differ from `== 1` either, but that would solve the problem in many cases...

What do you think we should do in the case of the present ticket? Or, to take a similar but simpler example, what do you think `c*pol` should return when `pol` is a generic polynomial and `c` is a scalar with `c.is_one()`? And when `c.is_zero()`?



---

archive/issue_comments_375660.json:
```json
{
    "body": "<a id='comment:28'></a>Something I'm using times to times is to add a named argument (I usually use `secure` but it can also be `exact`, it's possibly better). If `secure` is true, then `a == b` returns false (or raises an error) if one cannot assert that they are equal for sure; otherwise, it behaves as it does currently.\n\nI'm not very very enthusiastic with the solution, but I guess that it may solve the problem.",
    "created_at": "2018-06-15T15:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375660",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:28'></a>Something I'm using times to times is to add a named argument (I usually use `secure` but it can also be `exact`, it's possibly better). If `secure` is true, then `a == b` returns false (or raises an error) if one cannot assert that they are equal for sure; otherwise, it behaves as it does currently.

I'm not very very enthusiastic with the solution, but I guess that it may solve the problem.



---

archive/issue_comments_375661.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-06-24T11:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_375662.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-07-03T08:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_375663.json:
```json
{
    "body": "<a id='comment:31'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375663",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>update milestone 8.3 -> 8.4



---

archive/issue_events_063455.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63455"
}
```



---

archive/issue_comments_375664.json:
```json
{
    "body": "<a id='comment:32'></a>Could a few words be added to the ticket description?",
    "created_at": "2018-12-28T09:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375664",
    "user": "https://github.com/slel"
}
```

<a id='comment:32'></a>Could a few words be added to the ticket description?



---

archive/issue_events_063456.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-12-28T09:34:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63456"
}
```



---

archive/issue_events_063457.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-12-28T09:34:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63457"
}
```



---

archive/issue_comments_375665.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:32 slelievre]:\n> Could a few words be added to the ticket description?\n\n\nI'm not sure what to add to what already is in the commit messages. (And I don't remember much about this ticket.) What information would you like to see?",
    "created_at": "2019-01-04T13:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375665",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:33'></a>Replying to [comment:32 slelievre]:
> Could a few words be added to the ticket description?


I'm not sure what to add to what already is in the commit messages. (And I don't remember much about this ticket.) What information would you like to see?



---

archive/issue_comments_375666.json:
```json
{
    "body": "<a id='comment:34'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375666",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_063458.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63458"
}
```



---

archive/issue_events_063459.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63459"
}
```



---

archive/issue_comments_375667.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-02-01T13:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375668.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-02-03T12:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375669.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+As discussed in\n+[this 2018-06 sage-devel discussion](https://groups.google.com/d/topic/sage-devel/Sqt4N8eVq-o/discussion),\n+this is part of an effort to improve fraction field elements,\n+and in particular rational fractions in several variables,\n+spread across four tickets:\n+\n+- #25318: Improve basic operations with fraction field elements (the present ticket)\n+- #25290: Don't use Karatsuba for multiplying polynomials over fraction fields\n+- #23909; GCD for univariate polynomials over fraction fields\n+- #16268: Better normalization for fraction field elements\n+\n+At least for some applications, these tickets bring Sage fraction field elements\n+from \"so slow they are unusable\" to \"not really great yet but reasonable\".\n \n \n Author: Marc Mezzarobba\n```\n",
    "created_at": "2019-02-03T19:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375669",
    "user": "https://github.com/slel"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,16 @@
+As discussed in
+[this 2018-06 sage-devel discussion](https://groups.google.com/d/topic/sage-devel/Sqt4N8eVq-o/discussion),
+this is part of an effort to improve fraction field elements,
+and in particular rational fractions in several variables,
+spread across four tickets:
+
+- #25318: Improve basic operations with fraction field elements (the present ticket)
+- #25290: Don't use Karatsuba for multiplying polynomials over fraction fields
+- #23909; GCD for univariate polynomials over fraction fields
+- #16268: Better normalization for fraction field elements
+
+At least for some applications, these tickets bring Sage fraction field elements
+from "so slow they are unusable" to "not really great yet but reasonable".
 
 
 Author: Marc Mezzarobba
```




---

archive/issue_events_063460.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63460"
}
```



---

archive/issue_events_063461.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63461"
}
```



---

archive/issue_comments_375670.json:
```json
{
    "body": "<a id='comment:38'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375670",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_063462.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63462"
}
```



---

archive/issue_events_063463.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63463"
}
```



---

archive/issue_comments_375671.json:
```json
{
    "body": "<a id='comment:39'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375671",
    "user": "https://github.com/embray"
}
```

<a id='comment:39'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_375672.json:
```json
{
    "body": "<a id='comment:40'></a>Marc, I am likely to have a look next week (Sage days 100). If you have time to rebase, that would be appreciated).",
    "created_at": "2019-07-19T12:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375672",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'></a>Marc, I am likely to have a look next week (Sage days 100). If you have time to rebase, that would be appreciated).



---

archive/issue_comments_375673.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-19T12:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375673",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_375674.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-21T12:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375675.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:40 vdelecroix]:\n> Marc, I am likely to have a look next week (Sage days 100). If you have time to rebase, that would be appreciated).\n\n\nDone (but not tested at all: I'm on the train, on battery).",
    "created_at": "2019-07-21T12:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375675",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:43'></a>Replying to [comment:40 vdelecroix]:
> Marc, I am likely to have a look next week (Sage days 100). If you have time to rebase, that would be appreciated).


Done (but not tested at all: I'm on the train, on battery).



---

archive/issue_comments_375676.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-21T12:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375676",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_375677.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-11-21T16:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375678.json:
```json
{
    "body": "<a id='comment:46'></a>rebased (result not tested)",
    "created_at": "2019-11-21T16:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375678",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:46'></a>rebased (result not tested)



---

archive/issue_comments_375679.json:
```json
{
    "body": "<a id='comment:47'></a>Patchbot says\n\n```\nsage -t --long src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py  # 130 doctests failed\nsage -t --long src/sage/combinat/root_system/root_lattice_realization_algebras.py  # 11 doctests failed\nsage -t --long src/sage/combinat/root_system/hecke_algebra_representation.py  # 16 doctests failed\nsage -t --long src/sage/categories/coxeter_group_algebras.py  # 1 doctest failed\n```",
    "created_at": "2019-11-22T09:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375679",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>Patchbot says

```
sage -t --long src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py  # 130 doctests failed
sage -t --long src/sage/combinat/root_system/root_lattice_realization_algebras.py  # 11 doctests failed
sage -t --long src/sage/combinat/root_system/hecke_algebra_representation.py  # 16 doctests failed
sage -t --long src/sage/categories/coxeter_group_algebras.py  # 1 doctest failed
```



---

archive/issue_comments_375680.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-11-22T11:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375680",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_375681.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-12-17T14:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375682.json:
```json
{
    "body": "<a id='comment:50'></a>Ok, I think the actual issue behind these failures was in the py3 port of hecke_algebra_representations, see my last commit. (Phew, this one wasn't easy to track down!)",
    "created_at": "2019-12-17T14:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375682",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:50'></a>Ok, I think the actual issue behind these failures was in the py3 port of hecke_algebra_representations, see my last commit. (Phew, this one wasn't easy to track down!)



---

archive/issue_comments_375683.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-12-17T14:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375683",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_375684.json:
```json
{
    "body": "<a id='comment:51'></a>I think the last commit is correct, but perhaps Nicolas or Anne, could one of you verify?",
    "created_at": "2019-12-27T17:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375684",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:51'></a>I think the last commit is correct, but perhaps Nicolas or Anne, could one of you verify?



---

archive/issue_comments_375685.json:
```json
{
    "body": "<a id='comment:52'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375685",
    "user": "https://github.com/embray"
}
```

<a id='comment:52'></a>Ticket retargeted after milestone closed



---

archive/issue_events_063464.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63464"
}
```



---

archive/issue_events_063465.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63465"
}
```



---

archive/issue_comments_375686.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-01-10T12:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375687.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-01-10T12:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375688.json:
```json
{
    "body": "<a id='comment:55'></a>patchbot says that\n\n```\n++        Returns self raised to the `n^{th}` power.\n```\nshould be\n\n```\n++        Return ``self`` raised to the `n^{th}` power.\n```",
    "created_at": "2020-01-10T16:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375688",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:55'></a>patchbot says that

```
++        Returns self raised to the `n^{th}` power.
```
should be

```
++        Return ``self`` raised to the `n^{th}` power.
```



---

archive/issue_comments_375689.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-11T16:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_375690.json:
```json
{
    "body": "<a id='comment:57'></a>Thank you.",
    "created_at": "2020-01-11T16:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375690",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:57'></a>Thank you.



---

archive/issue_comments_375691.json:
```json
{
    "body": "<a id='comment:58'></a>In gcd, why is `self.__class__(self._parent, rnum*sden + rden*snum, rden*sden, coerce=False, reduce=False, is_reduced=True)` necessarily reduced? You then divide by `d` but in the `except:` case, it won't be reduced, right?",
    "created_at": "2020-02-06T23:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375691",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:58'></a>In gcd, why is `self.__class__(self._parent, rnum*sden + rden*snum, rden*sden, coerce=False, reduce=False, is_reduced=True)` necessarily reduced? You then divide by `d` but in the `except:` case, it won't be reduced, right?



---

archive/issue_comments_375692.json:
```json
{
    "body": "<a id='comment:59'></a>Same a few lines below of course.",
    "created_at": "2020-02-06T23:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375692",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:59'></a>Same a few lines below of course.



---

archive/issue_comments_375693.json:
```json
{
    "body": "<a id='comment:60'></a>I believe that this is only correct over exact rings:\n\n```\n        if rnum.is_zero() or snum.is_zero():\n            return self._parent.zero()\n        elif self.is_one():\n            return right\n        elif _right.is_one():\n            return self\n```",
    "created_at": "2020-02-06T23:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375693",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:60'></a>I believe that this is only correct over exact rings:

```
        if rnum.is_zero() or snum.is_zero():
            return self._parent.zero()
        elif self.is_one():
            return right
        elif _right.is_one():
            return self
```



---

archive/issue_comments_375694.json:
```json
{
    "body": "<a id='comment:61'></a>Why is this here automatically reduced in the except case?\n\n```\n+            tnum = rnum * snum\n+            tden = rden * sden\n+            res = self.__class__(self._parent, tnum, tden, coerce=False,\n+                   reduce=False)\n+            try:\n+                (<FractionFieldElement> res).normalize_unit_denominator()\n+            except (AttributeError, NotImplementedError):\n+                pass\n+            (<FractionFieldElement> res)._is_reduced = True\n```",
    "created_at": "2020-02-06T23:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375694",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:61'></a>Why is this here automatically reduced in the except case?

```
+            tnum = rnum * snum
+            tden = rden * sden
+            res = self.__class__(self._parent, tnum, tden, coerce=False,
+                   reduce=False)
+            try:
+                (<FractionFieldElement> res).normalize_unit_denominator()
+            except (AttributeError, NotImplementedError):
+                pass
+            (<FractionFieldElement> res)._is_reduced = True
```



---

archive/issue_comments_375695.json:
```json
{
    "body": "<a id='comment:62'></a>This is not correct for inexact rings I think:\n\n```\n+        elif self.is_one():\n+            return ~right\n```",
    "created_at": "2020-02-06T23:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375695",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:62'></a>This is not correct for inexact rings I think:

```
+        elif self.is_one():
+            return ~right
```



---

archive/issue_comments_375696.json:
```json
{
    "body": "<a id='comment:63'></a>Maybe I am missing something in general here but why would that be automatically reduced if `self` isn't?\n\n```\n             return self.__class__(self.parent(),\n-                snum**right, sden**right,\n-                coerce=False, reduce=False)\n+                snum**n, sden**n,\n+                coerce=False, reduce=False, is_reduced=True)\n```",
    "created_at": "2020-02-06T23:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375696",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:63'></a>Maybe I am missing something in general here but why would that be automatically reduced if `self` isn't?

```
             return self.__class__(self.parent(),
-                snum**right, sden**right,
-                coerce=False, reduce=False)
+                snum**n, sden**n,
+                coerce=False, reduce=False, is_reduced=True)
```



---

archive/issue_comments_375697.json:
```json
{
    "body": "<a id='comment:64'></a>Shouldn't that be protected by a try-except like in other places? This one is in pow.\n\n```\n+            (<FractionFieldElement> res).normalize_unit_denominator()\n+            (<FractionFieldElement> res)._is_reduced = True\n```",
    "created_at": "2020-02-06T23:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375697",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:64'></a>Shouldn't that be protected by a try-except like in other places? This one is in pow.

```
+            (<FractionFieldElement> res).normalize_unit_denominator()
+            (<FractionFieldElement> res)._is_reduced = True
```



---

archive/issue_comments_375698.json:
```json
{
    "body": "<a id='comment:65'></a>Again, here in `neg`. Can't it be that `self` is not reduced?\n\n```         \n     return self.__class__(self._parent,\n             -self.__numerator, self.__denominator,\n-            coerce=False, reduce=False)\n+            coerce=False, reduce=False, is_reduced=True)\n```",
    "created_at": "2020-02-06T23:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375698",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:65'></a>Again, here in `neg`. Can't it be that `self` is not reduced?

```         
     return self.__class__(self._parent,
             -self.__numerator, self.__denominator,
-            coerce=False, reduce=False)
+            coerce=False, reduce=False, is_reduced=True)
```



---

archive/issue_comments_375699.json:
```json
{
    "body": "<a id='comment:66'></a>In `inv`, should `normalize_unit_denominator` not be in try-except like in other places? Why is this reduced if `normalize_unit_denominator` failed silently? Why is this reduced if the original was not reduced?\n\n```\n+        (<FractionFieldElement> inv).normalize_unit_denominator()\n+        (<FractionFieldElement> inv)._is_reduced = True\n+        return inv\n```",
    "created_at": "2020-02-06T23:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375699",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:66'></a>In `inv`, should `normalize_unit_denominator` not be in try-except like in other places? Why is this reduced if `normalize_unit_denominator` failed silently? Why is this reduced if the original was not reduced?

```
+        (<FractionFieldElement> inv).normalize_unit_denominator()
+        (<FractionFieldElement> inv)._is_reduced = True
+        return inv
```



---

archive/issue_comments_375700.json:
```json
{
    "body": "<a id='comment:67'></a>Why did you drop this test?\n\n```\n-\n-        Check that inexact elements are treated correctly::\n-\n-            sage: K=Qp(2,5)\n-            sage: R.<x> = K[]\n-            sage: L = R.fraction_field()\n-            sage: S.<y> = L[]\n-            sage: y(K(1,1)/x)\n-            (1 + O(2))/((1 + O(2))*x)\n```",
    "created_at": "2020-02-06T23:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375700",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:67'></a>Why did you drop this test?

```
-
-        Check that inexact elements are treated correctly::
-
-            sage: K=Qp(2,5)
-            sage: R.<x> = K[]
-            sage: L = R.fraction_field()
-            sage: S.<y> = L[]
-            sage: y(K(1,1)/x)
-            (1 + O(2))/((1 + O(2))*x)
```



---

archive/issue_comments_375701.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-06T23:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375701",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_375702.json:
```json
{
    "body": "<a id='comment:69'></a>I like the idea of this ticket. Fraction fields are annoyingly slow and I am very much in favor of improving the situation. I might be misunderstanding a general pattern here, so looking forward to your comments.",
    "created_at": "2020-02-06T23:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375702",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:69'></a>I like the idea of this ticket. Fraction fields are annoyingly slow and I am very much in favor of improving the situation. I might be misunderstanding a general pattern here, so looking forward to your comments.



---

archive/issue_comments_375703.json:
```json
{
    "body": "<a id='comment:70'></a>Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375703",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_063466.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63466"
}
```



---

archive/issue_events_063467.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63467"
}
```



---

archive/issue_comments_375704.json:
```json
{
    "body": "<a id='comment:71'></a>Needs rebase",
    "created_at": "2020-08-18T21:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375704",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:71'></a>Needs rebase



---

archive/issue_comments_375705.json:
```json
{
    "body": "<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-19T14:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375706.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-19T14:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375706",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_375707.json:
```json
{
    "body": "<a id='comment:73'></a>Thanks a lot for your comments--and sorry for taking so long to reply, you caught me at a bad time!\n\nReplying to [comment:58 saraedum]:\n> In gcd, why is `self.__class__(self._parent, rnum*sden + rden*snum, rden*sden, coerce=False, reduce=False, is_reduced=True)` necessarily reduced? You then divide by `d` but in the `except:` case, it won't be reduced, right?\n\n\nI assume you mean in `_add_`? But even so I don't understand the question: this line is under `if d.is_unit()`, and I'm dividing by `d` (or trying to) when that's not the case.\n\nReplying to [comment:59 saraedum]:\n> Same a few lines below of course.\n\n\nA few lines below, the whole fraction is zero.\n\nReplying to [comment:60 saraedum]:\n> I believe that this is only correct over exact rings:\n> \n> ```\n>         if rnum.is_zero() or snum.is_zero():\n>             return self._parent.zero()\n>         elif self.is_one():\n>             return right\n>         elif _right.is_one():\n>             return self\n> ```\n\n\nReplying to [comment:62 saraedum]:\n> This is not correct for inexact rings I think:\n> \n> ```\n> +        elif self.is_one():\n> +            return ~right\n> ```\n\n\nReplying to [comment:67 saraedum]:\n> Why did you drop this test?\n> \n> ```\n> -\n> -        Check that inexact elements are treated correctly::\n> -\n> -            sage: K=Qp(2,5)\n> -            sage: R.<x> = K[]\n> -            sage: L = R.fraction_field()\n> -            sage: S.<y> = L[]\n> -            sage: y(K(1,1)/x)\n> -            (1 + O(2))/((1 + O(2))*x)\n> ```\n\n\nSee the discussion above: I think it is correct over most inexact rings (RR, RDF, RBF, RIF, CC, CDF, CBF, CIF, SR... and constructions over them), but apparently not over p-adic rings, unfortunately. For want of a proper solution, I'm now using this logic over exact rings only.\n\nI dropped the test because I didn't realize this behavior of `is_zero()` and `is_one()` was something the p-adics people actually wanted. I have restored it in the rebased branch.\n\nReplying to [comment:61 saraedum]:\n> Why is this here automatically reduced in the except case?\n> \n> ```\n> +            tnum = rnum * snum\n> +            tden = rden * sden\n> +            res = self.__class__(self._parent, tnum, tden, coerce=False,\n> +                   reduce=False)\n> +            try:\n> +                (<FractionFieldElement> res).normalize_unit_denominator()\n> +            except (AttributeError, NotImplementedError):\n> +                pass\n> +            (<FractionFieldElement> res)._is_reduced = True\n> ```\n\n\nStrictly speaking it isn't, but that's because we're unable to reduce over that ring, hence there is no point in trying again later. (Cf. the comment in front of the initial definition of `_is_reduced` in `__init__()`.)\n\nReplying to [comment:63 saraedum]:\n> Maybe I am missing something in general here but why would that be automatically reduced if `self` isn't?\n> \n> ```\n>              return self.__class__(self.parent(),\n> -                snum**right, sden**right,\n> -                coerce=False, reduce=False)\n> +                snum**n, sden**n,\n> +                coerce=False, reduce=False, is_reduced=True)\n> ```\n\n\nReplying to [comment:65 saraedum]:\n> Again, here in `neg`. Can't it be that `self` is not reduced?\n> \n> \n> ```         \n>      return self.__class__(self._parent,\n>              -self.__numerator, self.__denominator,\n> -            coerce=False, reduce=False)\n> +            coerce=False, reduce=False, is_reduced=True)\n> ```\n\n\nI think you are right, `is_reduced=self._is_reduced` would be better in these cases.\n\nReplying to [comment:64 saraedum]:\n> Shouldn't that be protected by a try-except like in other places? This one is in pow.\n> \n> ```\n> +            (<FractionFieldElement> res).normalize_unit_denominator()\n> +            (<FractionFieldElement> res)._is_reduced = True\n> ```\n\n\nReplying to [comment:66 saraedum]:\n> In `inv`, should `normalize_unit_denominator` not be in try-except like in other places?\n> Why is this reduced if `normalize_unit_denominator` failed silently?\n> Why is this reduced if the original was not reduced?\n> \n> \n> ```\n> +        (<FractionFieldElement> inv).normalize_unit_denominator()\n> +        (<FractionFieldElement> inv)._is_reduced = True\n> +        return inv\n> ```\n\n\nAFAICT it is the other way around: the try-excepts that are present in some cases are leftovers from a previous version and are unnecessary.\n\nSee above for the other points.\n\n---\nNew commits:",
    "created_at": "2020-08-19T14:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375707",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:73'></a>Thanks a lot for your comments--and sorry for taking so long to reply, you caught me at a bad time!

Replying to [comment:58 saraedum]:
> In gcd, why is `self.__class__(self._parent, rnum*sden + rden*snum, rden*sden, coerce=False, reduce=False, is_reduced=True)` necessarily reduced? You then divide by `d` but in the `except:` case, it won't be reduced, right?


I assume you mean in `_add_`? But even so I don't understand the question: this line is under `if d.is_unit()`, and I'm dividing by `d` (or trying to) when that's not the case.

Replying to [comment:59 saraedum]:
> Same a few lines below of course.


A few lines below, the whole fraction is zero.

Replying to [comment:60 saraedum]:
> I believe that this is only correct over exact rings:
> 
> ```
>         if rnum.is_zero() or snum.is_zero():
>             return self._parent.zero()
>         elif self.is_one():
>             return right
>         elif _right.is_one():
>             return self
> ```


Replying to [comment:62 saraedum]:
> This is not correct for inexact rings I think:
> 
> ```
> +        elif self.is_one():
> +            return ~right
> ```


Replying to [comment:67 saraedum]:
> Why did you drop this test?
> 
> ```
> -
> -        Check that inexact elements are treated correctly::
> -
> -            sage: K=Qp(2,5)
> -            sage: R.<x> = K[]
> -            sage: L = R.fraction_field()
> -            sage: S.<y> = L[]
> -            sage: y(K(1,1)/x)
> -            (1 + O(2))/((1 + O(2))*x)
> ```


See the discussion above: I think it is correct over most inexact rings (RR, RDF, RBF, RIF, CC, CDF, CBF, CIF, SR... and constructions over them), but apparently not over p-adic rings, unfortunately. For want of a proper solution, I'm now using this logic over exact rings only.

I dropped the test because I didn't realize this behavior of `is_zero()` and `is_one()` was something the p-adics people actually wanted. I have restored it in the rebased branch.

Replying to [comment:61 saraedum]:
> Why is this here automatically reduced in the except case?
> 
> ```
> +            tnum = rnum * snum
> +            tden = rden * sden
> +            res = self.__class__(self._parent, tnum, tden, coerce=False,
> +                   reduce=False)
> +            try:
> +                (<FractionFieldElement> res).normalize_unit_denominator()
> +            except (AttributeError, NotImplementedError):
> +                pass
> +            (<FractionFieldElement> res)._is_reduced = True
> ```


Strictly speaking it isn't, but that's because we're unable to reduce over that ring, hence there is no point in trying again later. (Cf. the comment in front of the initial definition of `_is_reduced` in `__init__()`.)

Replying to [comment:63 saraedum]:
> Maybe I am missing something in general here but why would that be automatically reduced if `self` isn't?
> 
> ```
>              return self.__class__(self.parent(),
> -                snum**right, sden**right,
> -                coerce=False, reduce=False)
> +                snum**n, sden**n,
> +                coerce=False, reduce=False, is_reduced=True)
> ```


Replying to [comment:65 saraedum]:
> Again, here in `neg`. Can't it be that `self` is not reduced?
> 
> 
> ```         
>      return self.__class__(self._parent,
>              -self.__numerator, self.__denominator,
> -            coerce=False, reduce=False)
> +            coerce=False, reduce=False, is_reduced=True)
> ```


I think you are right, `is_reduced=self._is_reduced` would be better in these cases.

Replying to [comment:64 saraedum]:
> Shouldn't that be protected by a try-except like in other places? This one is in pow.
> 
> ```
> +            (<FractionFieldElement> res).normalize_unit_denominator()
> +            (<FractionFieldElement> res)._is_reduced = True
> ```


Replying to [comment:66 saraedum]:
> In `inv`, should `normalize_unit_denominator` not be in try-except like in other places?
> Why is this reduced if `normalize_unit_denominator` failed silently?
> Why is this reduced if the original was not reduced?
> 
> 
> ```
> +        (<FractionFieldElement> inv).normalize_unit_denominator()
> +        (<FractionFieldElement> inv)._is_reduced = True
> +        return inv
> ```


AFAICT it is the other way around: the try-excepts that are present in some cases are leftovers from a previous version and are unnecessary.

See above for the other points.

---
New commits:



---

archive/issue_comments_375708.json:
```json
{
    "body": "<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-20T11:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_063468.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63468"
}
```



---

archive/issue_events_063469.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63469"
}
```



---

archive/issue_comments_375709.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-20T17:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375710.json:
```json
{
    "body": "<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-03-08T16:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_375711.json:
```json
{
    "body": "<a id='comment:78'></a>Rebased on 9.3.beta8.",
    "created_at": "2021-03-08T16:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375711",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:78'></a>Rebased on 9.3.beta8.



---

archive/issue_comments_375712.json:
```json
{
    "body": "<a id='comment:79'></a>Do you have some timings?",
    "created_at": "2021-03-09T00:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375712",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:79'></a>Do you have some timings?



---

archive/issue_comments_375713.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-09T10:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375713",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_375714.json:
```json
{
    "body": "<a id='comment:80'></a>Replying to [comment:79 tscrim]:\n> Do you have some timings?\n\n\nGood question. I am almost certain my version was faster when I first wrote it, but with the current Sage beta I no longer see any measurable improvement. For all I know the this ticket's branch may even be a bit slower. Thanks for asking! `:-/`",
    "created_at": "2021-03-09T10:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375714",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:80'></a>Replying to [comment:79 tscrim]:
> Do you have some timings?


Good question. I am almost certain my version was faster when I first wrote it, but with the current Sage beta I no longer see any measurable improvement. For all I know the this ticket's branch may even be a bit slower. Thanks for asking! `:-/`



---

archive/issue_events_063470.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63470"
}
```



---

archive/issue_events_063471.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63471"
}
```



---

archive/issue_comments_375715.json:
```json
{
    "body": "<a id='comment:81'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375715",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_375716.json:
```json
{
    "body": "<a id='comment:82'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25318#issuecomment-375716",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_063472.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63472"
}
```



---

archive/issue_events_063473.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63473"
}
```



---

archive/issue_events_063474.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63474"
}
```



---

archive/issue_events_063475.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63475"
}
```



---

archive/issue_events_063476.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63476"
}
```



---

archive/issue_events_063477.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63477"
}
```



---

archive/issue_events_063478.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63478"
}
```



---

archive/issue_events_063479.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25318",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25318#event-63479"
}
```
