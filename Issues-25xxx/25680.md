# Issue 25680: Upgrade to Python 3.7.x

archive/issues_025443.json:
```json
{
    "assignees": [],
    "body": "**Tarball**: https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz\n\nCC:  @fchapoton @embray @kiwifb @mkoeppe @slel\n\nKeywords: **upgrade, Python3**\n\nBranch: **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**\n\nReviewer: **Vincent Klein, Erik Bray, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25680_\n\n",
    "closed_at": "2019-03-31T22:43:40Z",
    "created_at": "2018-06-28T03:59:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to Python 3.7.x",
    "type": "issue",
    "updated_at": "2019-11-06T21:40:19Z",
    "url": "https://github.com/sagemath/sage/issues/25680",
    "user": "https://github.com/jdemeyer"
}
```
**Tarball**: https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz

CC:  @fchapoton @embray @kiwifb @mkoeppe @slel

Keywords: **upgrade, Python3**

Branch: **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**

Reviewer: **Vincent Klein, Erik Bray, Frédéric Chapoton**

Author: **Jeroen Demeyer**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/25680_





---

archive/issue_events_355115.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-28T03:59:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355115"
}
```



---

archive/issue_events_355116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-28T03:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355116"
}
```



---

archive/issue_events_355117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-28T03:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355117"
}
```



---

archive/issue_events_355118.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-28T03:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355118"
}
```



---

archive/issue_comments_394485.json:
```json
{
    "body": "Branch: **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**",
    "created_at": "2018-06-28T07:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394485",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**



---

archive/issue_comments_394486.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e\"><code>2c67605</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>\n",
    "created_at": "2018-06-28T07:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394486",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e"><code>2c67605</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>




---

archive/issue_comments_394487.json:
```json
{
    "body": "Commit: **[`2c67605`](https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e)**",
    "created_at": "2018-06-28T07:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394487",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`2c67605`](https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e)**



---

archive/issue_events_355119.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-28T07:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355119"
}
```



---

archive/issue_comments_394488.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2018-06-28T07:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394488",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_394489.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI don't think we should be in any hurry on this.  All the last ~year's work of Python 3 porting has been targeting Python 3.6, and I think I'd rather stick with that before risking throwing everything out of whack again.\n\nBetween Python 3.6 and 3.7 I suspect the differences, if any, will be minor.  But I'd rather try to stabilize on 3.6 first (to which we're quite close), then deal with those differences, rather than change Python versions again.  Also I don't know that Python 3.7 has been ported to Cygwin yet (although it does contain a number of useful fixes for Cygwin, I do know).\n\nThat said, if you know any specific changes in Python 3.7 (other than the aforementioned Cygwin fixes) that would actively make our porting effort easier I'd consider it...",
    "created_at": "2018-06-28T15:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394489",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

I don't think we should be in any hurry on this.  All the last ~year's work of Python 3 porting has been targeting Python 3.6, and I think I'd rather stick with that before risking throwing everything out of whack again.

Between Python 3.6 and 3.7 I suspect the differences, if any, will be minor.  But I'd rather try to stabilize on 3.6 first (to which we're quite close), then deal with those differences, rather than change Python versions again.  Also I don't know that Python 3.7 has been ported to Cygwin yet (although it does contain a number of useful fixes for Cygwin, I do know).

That said, if you know any specific changes in Python 3.7 (other than the aforementioned Cygwin fixes) that would actively make our porting effort easier I'd consider it...



---

archive/issue_events_355120.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-06-28T15:23:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355120"
}
```



---

archive/issue_events_355121.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-06-28T15:23:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355121"
}
```



---

archive/issue_comments_394490.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nJeroen has said elsewhere that islice will accept Sage integers instead of just ints.\n\nI am again becoming tired and frustated by the slow pace of progress towards py3. And by the large amount of difficult work that remains..",
    "created_at": "2018-06-28T15:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394490",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

Jeroen has said elsewhere that islice will accept Sage integers instead of just ints.

I am again becoming tired and frustated by the slow pace of progress towards py3. And by the large amount of difficult work that remains..



---

archive/issue_comments_394491.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAh, I remember making an issue about that, but I don't think I followed what the resolution was.",
    "created_at": "2018-06-28T15:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394491",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Ah, I remember making an issue about that, but I don't think I followed what the resolution was.



---

archive/issue_comments_394492.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2\"><code>1bfcdc8</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>\n",
    "created_at": "2018-06-28T15:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394492",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2"><code>1bfcdc8</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>




---

archive/issue_comments_394493.json:
```json
{
    "body": "Changed commit from **[`2c67605`](https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e)** to **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)**",
    "created_at": "2018-06-28T15:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2c67605`](https://github.com/sagemath/sagetrac-mirror/commit/2c67605bfb65c6d52b0697bbe0a027afb7172d4e)** to **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)**



---

archive/issue_comments_394494.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWell there's this https://github.com/python/cpython/pull/1918  But unless there are other fixes I'm not seeing it's annoying that this was *only* fixed for `islice`, where I believe there is other code affected by the same issue (e.g. range).  Also we've already worked aroudn the majority of those cases (sigh...)",
    "created_at": "2018-06-28T15:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394494",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Well there's this https://github.com/python/cpython/pull/1918  But unless there are other fixes I'm not seeing it's annoying that this was *only* fixed for `islice`, where I believe there is other code affected by the same issue (e.g. range).  Also we've already worked aroudn the majority of those cases (sigh...)



---

archive/issue_comments_394495.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fchapoton](#comment:5):\n> I am again becoming tired and frustated by the slow pace of progress towards py3. And by the large amount of difficult work that remains..\n\nUnfortunately I'm not convinced that upgrading Python yet again is going to make that go any faster.  In any case I don't actually have that much \"difficult\" work remaining.  Just dozens of little issues.  My Python 3 branch has < 600 modules failing, and most of it appears to minor issues (at one point I had it down to ~400 and I don't know why it ballooned up again, but one or two small changes in just the right places can do that with Sage...)\n\nAlso I'll add if you're not using a patched pynac you're going to have lots, lots more \"serious\" looking issues.  We still need to get a pynac upgrade in (I've been manually installing pynac with my Python 3 fixes every time I re-build sage).",
    "created_at": "2018-06-28T15:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394495",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fchapoton](#comment:5):
> I am again becoming tired and frustated by the slow pace of progress towards py3. And by the large amount of difficult work that remains..

Unfortunately I'm not convinced that upgrading Python yet again is going to make that go any faster.  In any case I don't actually have that much "difficult" work remaining.  Just dozens of little issues.  My Python 3 branch has < 600 modules failing, and most of it appears to minor issues (at one point I had it down to ~400 and I don't know why it ballooned up again, but one or two small changes in just the right places can do that with Sage...)

Also I'll add if you're not using a patched pynac you're going to have lots, lots more "serious" looking issues.  We still need to get a pynac upgrade in (I've been manually installing pynac with my Python 3 fixes every time I re-build sage).



---

archive/issue_comments_394496.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@embray](#comment:3):\n> That said, if you know any specific changes in Python 3.7 (other than the aforementioned Cygwin fixes) that would actively make our porting effort easier I'd consider it...\n\n#25391 is a pretty serious issue which is fixed by a Python upgrade (probably also by upgrading to 3.6.6 but I haven't tested that).",
    "created_at": "2018-06-28T15:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394496",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@embray](#comment:3):
> That said, if you know any specific changes in Python 3.7 (other than the aforementioned Cygwin fixes) that would actively make our porting effort easier I'd consider it...

#25391 is a pretty serious issue which is fixed by a Python upgrade (probably also by upgrading to 3.6.6 but I haven't tested that).



---

archive/issue_comments_394497.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@embray](#comment:3):\n> I don't think we should be in any hurry on this.  All the last ~year's work of Python 3 porting has been targeting Python 3.6, and I think I'd rather stick with that before risking throwing everything out of whack again.\n\nFirst of all, I *do not* think that this 3.6 -> 3.7 will throw everything out of whack.\n\nHowever, regardless of that, we'll have to upgrade sooner or later. I don't see the point of having a perfectly working Sage on an outdated Python version. And for the many issues that we still have to fix, it would be better to make sure that they work on Python 3.7 from the start.",
    "created_at": "2018-06-28T15:47:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394497",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@embray](#comment:3):
> I don't think we should be in any hurry on this.  All the last ~year's work of Python 3 porting has been targeting Python 3.6, and I think I'd rather stick with that before risking throwing everything out of whack again.

First of all, I *do not* think that this 3.6 -> 3.7 will throw everything out of whack.

However, regardless of that, we'll have to upgrade sooner or later. I don't see the point of having a perfectly working Sage on an outdated Python version. And for the many issues that we still have to fix, it would be better to make sure that they work on Python 3.7 from the start.



---

archive/issue_comments_394498.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI still think we have very hard remaining problems, among which\n\n* sorting issues in graphs\n* hashing and comparisons, especially for groups\n* coercion framework have broken parts",
    "created_at": "2018-06-28T15:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394498",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

I still think we have very hard remaining problems, among which

* sorting issues in graphs
* hashing and comparisons, especially for groups
* coercion framework have broken parts



---

archive/issue_comments_394499.json:
```json
{
    "body": "Attachment: **[python3-3.7.0.log](https://github.com/sagemath/sage/files/ticket25680/python3-3.7.0.log)**",
    "created_at": "2018-06-29T08:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394499",
    "user": "https://github.com/vinklein"
}
```

Attachment: **[python3-3.7.0.log](https://github.com/sagemath/sage/files/ticket25680/python3-3.7.0.log)**



---

archive/issue_comments_394500.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI get the following error\n\n```\n$ ./configure --with-python=3\n...\n$ make build\n...\n[python3-3.7.0] Testing importing of various modules...\n[python3-3.7.0] Traceback (most recent call last):\n[python3-3.7.0]   File \"<string>\", line 1, in <module>\n[python3-3.7.0]   File \"/home/vklein/odk/sage/local/var/tmp/sage/build/python3-3.7.0/src/Lib/ctypes/__init__.py\", line 7, in <module>\n[python3-3.7.0]     from _ctypes import Union, Structure, Array\n[python3-3.7.0] ModuleNotFoundError: No module named '_ctypes'\n[python3-3.7.0] ctypes module failed to import\n[python3-3.7.0] math module imported OK\n[python3-3.7.0] hashlib module imported OK\n[python3-3.7.0] crypt module imported OK\n[python3-3.7.0] readline module imported OK\n[python3-3.7.0] socket module imported OK\n[python3-3.7.0] Error: One or more modules failed to import.\n...\n```\n\nfull python3.7 install log in attachement",
    "created_at": "2018-06-29T08:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394500",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:14" align="right">comment:14</div>

I get the following error

```
$ ./configure --with-python=3
...
$ make build
...
[python3-3.7.0] Testing importing of various modules...
[python3-3.7.0] Traceback (most recent call last):
[python3-3.7.0]   File "<string>", line 1, in <module>
[python3-3.7.0]   File "/home/vklein/odk/sage/local/var/tmp/sage/build/python3-3.7.0/src/Lib/ctypes/__init__.py", line 7, in <module>
[python3-3.7.0]     from _ctypes import Union, Structure, Array
[python3-3.7.0] ModuleNotFoundError: No module named '_ctypes'
[python3-3.7.0] ctypes module failed to import
[python3-3.7.0] math module imported OK
[python3-3.7.0] hashlib module imported OK
[python3-3.7.0] crypt module imported OK
[python3-3.7.0] readline module imported OK
[python3-3.7.0] socket module imported OK
[python3-3.7.0] Error: One or more modules failed to import.
...
```

full python3.7 install log in attachement



---

archive/issue_comments_394501.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nFailure to build `_ctypes` usually means a problem with `ffi` (sometimes called libffi) may be there is minimum version requirement?",
    "created_at": "2018-06-29T08:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394501",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Failure to build `_ctypes` usually means a problem with `ffi` (sometimes called libffi) may be there is minimum version requirement?



---

archive/issue_comments_394502.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIndeed i don't get the error after installing `libffi-dev`. Thanks !\n\nNote : sage `make build` works fine in python 3.6 without that.",
    "created_at": "2018-06-29T08:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394502",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:16" align="right">comment:16</div>

Indeed i don't get the error after installing `libffi-dev`. Thanks !

Note : sage `make build` works fine in python 3.6 without that.



---

archive/issue_comments_394503.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nnext error during the build is :\n\n```\nInstalling collected packages: ipykernel\n  Running setup.py install for ipykernel: started\n    Running command /home/vklein/odk/sage/local/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-qoxsao1r-build/setup.py';f=getattr(tokenize\n, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" --no-user-cfg install --record /tmp/pip-vc23lh\npc-record/install-record.txt --single-version-externally-managed --compile\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-qoxsao1r-build/setup.py\", line 91, in <module>\n        from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME\n...\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/pexpect/spawnbase.py\", line 224\n        def expect(self, pattern, timeout=-1, searchwindowsize=-1, async=False):\n                                                                       ^\n    SyntaxError: invalid syntax\n    Running setup.py install for ipykernel: finished with status 'error'\nCleaning up...\n\n```\n\nIssue reference : https://github.com/pypa/pipenv/issues/956",
    "created_at": "2018-06-29T09:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394503",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:17" align="right">comment:17</div>

next error during the build is :

```
Installing collected packages: ipykernel
  Running setup.py install for ipykernel: started
    Running command /home/vklein/odk/sage/local/bin/python3 -u -c "import setuptools, tokenize;__file__='/tmp/pip-qoxsao1r-build/setup.py';f=getattr(tokenize
, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no-user-cfg install --record /tmp/pip-vc23lh
pc-record/install-record.txt --single-version-externally-managed --compile
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-qoxsao1r-build/setup.py", line 91, in <module>
        from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME
...
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/pexpect/spawnbase.py", line 224
        def expect(self, pattern, timeout=-1, searchwindowsize=-1, async=False):
                                                                       ^
    SyntaxError: invalid syntax
    Running setup.py install for ipykernel: finished with status 'error'
Cleaning up...

```

Issue reference : https://github.com/pypa/pipenv/issues/956



---

archive/issue_comments_394504.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nTo be honest we haven't updated pexpect in vanilla sage for a while. It may be a good idea to do that - in a separate ticket.",
    "created_at": "2018-06-29T10:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394504",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

To be honest we haven't updated pexpect in vanilla sage for a while. It may be a good idea to do that - in a separate ticket.



---

archive/issue_comments_394505.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDo we need to update pexpect or to patch pipenv ?",
    "created_at": "2018-06-29T10:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394505",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:19" align="right">comment:19</div>

Do we need to update pexpect or to patch pipenv ?



---

archive/issue_comments_394506.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNo, `pexpect`.",
    "created_at": "2018-06-29T10:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394506",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

No, `pexpect`.



---

archive/issue_comments_394507.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI am at `pexpect-4.2.1` in sage-on-gentoo (without any patches) and sage is at 4.1.0 + some patches.",
    "created_at": "2018-06-29T10:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394507",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

I am at `pexpect-4.2.1` in sage-on-gentoo (without any patches) and sage is at 4.1.0 + some patches.



---

archive/issue_comments_394508.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kiwifb](#comment:21):\n> I am at `pexpect-4.2.1` in sage-on-gentoo (without any patches) and sage is at 4.1.0 + some patches.\n\nThe patches in Sage are for performance. Without those patches, `pexpect` is really a lot slower.",
    "created_at": "2018-06-29T10:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394508",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kiwifb](#comment:21):
> I am at `pexpect-4.2.1` in sage-on-gentoo (without any patches) and sage is at 4.1.0 + some patches.

The patches in Sage are for performance. Without those patches, `pexpect` is really a lot slower.



---

archive/issue_comments_394509.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nLet's do that #25700.",
    "created_at": "2018-06-29T12:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394509",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:23" align="right">comment:23</div>

Let's do that #25700.



---

archive/issue_comments_394510.json:
```json
{
    "body": "Dependencies: **#25700**",
    "created_at": "2018-06-29T12:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394510",
    "user": "https://github.com/vinklein"
}
```

Dependencies: **#25700**



---

archive/issue_comments_394511.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@fchapoton](#comment:12):\n> I still think we have very hard remaining problems, among which\n> \n> * sorting issues in graphs\n> * hashing and comparisons, especially for groups\n> * coercion framework have broken parts\n\nMost of which Python 3.7 won't help with.  The one area where it might is sorting of dicts, since dict insertion order is now preserved (hooray!)\n\nWell, I'm not completely opposed to upgrading, just skeptical, and don't want to rush into it.  When I get a chance I'll compare how my python3 branch fares with and without it.",
    "created_at": "2018-06-29T14:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394511",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@fchapoton](#comment:12):
> I still think we have very hard remaining problems, among which
> 
> * sorting issues in graphs
> * hashing and comparisons, especially for groups
> * coercion framework have broken parts

Most of which Python 3.7 won't help with.  The one area where it might is sorting of dicts, since dict insertion order is now preserved (hooray!)

Well, I'm not completely opposed to upgrading, just skeptical, and don't want to rush into it.  When I get a chance I'll compare how my python3 branch fares with and without it.



---

archive/issue_comments_394512.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@embray](#comment:24):\n\n> Well, I'm not completely opposed to upgrading, just skeptical, and don't want to rush into it.  When I get a chance I'll compare how my python3 branch fares with and without it.\n\nOne of my goal reviewing this ticket is to produce a kind of diff between the doctests failures in 3.6 and 3.7. It can be helpful to decide what to do.",
    "created_at": "2018-06-29T14:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394512",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@embray](#comment:24):

> Well, I'm not completely opposed to upgrading, just skeptical, and don't want to rush into it.  When I get a chance I'll compare how my python3 branch fares with and without it.

One of my goal reviewing this ticket is to produce a kind of diff between the doctests failures in 3.6 and 3.7. It can be helpful to decide what to do.



---

archive/issue_comments_394513.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAnd now it's numpy's turn :\n\n```\n$ ./configure --with-python=3\n...\n$ make build\n...\n/home/vklein/odk/sage/local/lib/python3.7/distutils/dist.py:274: UserWarning: Un\nknown distribution option: 'define_macros'\n  warnings.warn(msg)\nnumpy/random/mtrand/mtrand.c: In function '__Pyx__ExceptionSave':\nnumpy/random/mtrand/mtrand.c:45208:19: error: 'PyThreadState {aka struct _ts}' h\nas no member named 'exc_type'\n     *type = tstate->exc_type;\n                   ^\nnumpy/random/mtrand/mtrand.c:45209:20: error: 'PyThreadState {aka struct _ts}' h\nas no member named 'exc_value'\n     *value = tstate->exc_value;\n...\n```\n\n\nnumpy's issue [#10500](https://github.com/numpy/numpy/issues/10500). I am not sure what is the right call here i will try with `numpy 1.14.5`",
    "created_at": "2018-07-02T09:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394513",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:26" align="right">comment:26</div>

And now it's numpy's turn :

```
$ ./configure --with-python=3
...
$ make build
...
/home/vklein/odk/sage/local/lib/python3.7/distutils/dist.py:274: UserWarning: Un
known distribution option: 'define_macros'
  warnings.warn(msg)
numpy/random/mtrand/mtrand.c: In function '__Pyx__ExceptionSave':
numpy/random/mtrand/mtrand.c:45208:19: error: 'PyThreadState {aka struct _ts}' h
as no member named 'exc_type'
     *type = tstate->exc_type;
                   ^
numpy/random/mtrand/mtrand.c:45209:20: error: 'PyThreadState {aka struct _ts}' h
as no member named 'exc_value'
     *value = tstate->exc_value;
...
```


numpy's issue [#10500](https://github.com/numpy/numpy/issues/10500). I am not sure what is the right call here i will try with `numpy 1.14.5`



---

archive/issue_comments_394514.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWhen updating to `numpy 1.14.5` with this following patch :\n\n```\ndiff --git a/numpy/distutils/system_info.py b/numpy/distutils/system_info.py\nindex 93a8e6f..6e31d30 100644\n--- a/numpy/distutils/system_info.py\n+++ b/numpy/distutils/system_info.py\n@@ -1740,7 +1740,7 @@ class blas_info(system_info):\n             lib = self.has_cblas(info)\n             if lib is not None:\n                 info['language'] = 'c'\n-                info['libraries'] = [lib]\n+                info['libraries'] = lib\n                 info['define_macros'] = [('HAVE_CBLAS', None)]\n         self.set_info(**info)\n \n@@ -1772,16 +1772,16 @@ class blas_info(system_info):\n                 # check for cblas lib, and if not present check for blas lib.\n                 try:\n                     c.link_executable(obj, os.path.join(tmpdir, \"a.out\"),\n-                                      libraries=[\"cblas\"],\n+                                      libraries=[\"libraries\"],\n                                       library_dirs=info['library_dirs'],\n                                       extra_postargs=info.get('extra_link_args', []))\n-                    res = \"cblas\"\n+                    res = info[\"libraries\"]\n                 except distutils.ccompiler.LinkError:\n                     c.link_executable(obj, os.path.join(tmpdir, \"a.out\"),\n                                       libraries=[\"blas\"],\n                                       library_dirs=info['library_dirs'],\n                                       extra_postargs=info.get('extra_link_args', []))\n-                    res = \"blas\"\n+                    res = [\"blas\"]\n             except distutils.ccompiler.CompileError:\n                 res = None\n         finally:\n```\n\nI get the following error :\n\n```\nFound local metadata for numpy-1.14.5.p0\nUsing cached file /home/vklein/odk/sage/upstream/numpy-1.14.5.zip\nnumpy-1.14.5.p0\n====================================================\nSetting up build directory for numpy-1.14.5.p0\nFinished extraction\nApplying patches from ../patches...\nApplying ../patches/numpy-1.14.5-no-hardcode-blas.patch\npatching file numpy/distutils/system_info.py\n****************************************************\nHost system:\nLinux tuono 4.13.0-45-generic #50~16.04.1-Ubuntu SMP Wed May 30 11:18:27 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/5/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 5.4.0-6ubuntu1~16.04.10' --with-bugurl=file:///usr/s\nhare/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suff\nix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=po\nsix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcx\nx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --en\nable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/\nusr/lib/jvm/java-1.5.0-gcj-5-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-amd64 -\n-with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share\n/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --wit\nh-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-g\nnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10) \n****************************************************\n\nNote: if you need reliable uninstall behavior, then install\nwith pip instead of using `setup.py install`:\n\n  - `pip install .`       (from a git repo or downloaded source\n                           release)\n  - `pip install numpy`   (last NumPy release on PyPi)\n\n\nblas_opt_info:\nblas_mkl_info:\nDisabled blas_mkl_info: (MKLROOT is None)\nDisabled blas_mkl_info: (MKLROOT is None)\ncustomize UnixCCompiler\n  libraries mkl_rt not found in []\n  NOT AVAILABLE\n\nblis_info:\ncustomize UnixCCompiler\n  libraries blis not found in ['/home/vklein/odk/sage/local/lib', '/usr/local/lib', '/usr/lib', '/usr/lib/x86_64-li\nnux-gnu']\n  NOT AVAILABLE\n\nopenblas_info:\ncustomize UnixCCompiler\nDisabled openblas_info: (OPENBLAS is None)\ncustomize UnixCCompiler\n  libraries openblas not found in []\n  NOT AVAILABLE\n\natlas_3_10_blas_threads_info:\nDisabled atlas_3_10_blas_threads_info: (PTATLAS is None)\ncustomize UnixCCompiler\n  libraries tatlas not found in []\n  NOT AVAILABLE\n\natlas_3_10_blas_info:\nDisabled atlas_3_10_blas_info: (ATLAS is None)\ncustomize UnixCCompiler\n  libraries satlas not found in []\n  NOT AVAILABLE\n\natlas_blas_threads_info:\nDisabled atlas_blas_threads_info: (PTATLAS is None)\ncustomize UnixCCompiler\n  libraries ptf77blas,ptcblas,atlas not found in []\n  NOT AVAILABLE\n\natlas_blas_info:\nDisabled atlas_blas_info: (ATLAS is None)\ncustomize UnixCCompiler\n  libraries f77blas,cblas,atlas not found in []\n  NOT AVAILABLE\n\nblas_info:\ncustomize UnixCCompiler\ncustomize UnixCCompiler\nC compiler: gcc -DNDEBUG -g -fwrapv -O3 -Wall -D__CEPHES_COMPLEX_H -fPIC\n\ncreating /tmp/tmpyq7p80or/tmp\ncreating /tmp/tmpyq7p80or/tmp/tmpyq7p80or\ncompile options: '-I/home/vklein/odk/sage/local/include -c'\ngcc: /tmp/tmpyq7p80or/source.c\ngcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/lib -llibraries -o /tmp/tmpyq7p80or/a.o\nut\n/usr/bin/ld: cannot find -llibraries\ncollect2: error: ld returned 1 exit status\n/usr/bin/ld: cannot find -llibraries\ncollect2: error: ld returned 1 exit status\ngcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/lib -lblas -o /tmp/tmpyq7p80or/a.out\nRunning from numpy source directory.\n/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/system_info.py:624: UserWarning:\n \n    Atlas (http://math-atlas.sourceforge.net/) libraries not found.\n    Directories to search for the libraries can be specified in the\n    numpy/distutils/site.cfg file (section [atlas]) or by setting\n    the ATLAS environment variable.\n  self.calc_info()\n/usr/bin/ld: cannot find -lblas\ncollect2: error: ld returned 1 exit status\n/usr/bin/ld: cannot find -lblas\ncollect2: error: ld returned 1 exit status\nTraceback (most recent call last):\n  File \"/home/vklein/odk/sage/local/lib/python3.7/distutils/unixccompiler.py\", line 197, in link\n    self.spawn(linker + ld_args)\n  File \"/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/ccompiler.py\", line 89, \nin <lambda>\n    m = lambda self, *args, **kw: func(self, *args, **kw)\n  File \"/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/ccompiler.py\", line 152,\n in CCompiler_spawn\n    raise DistutilsExecError('Command \"%s\" failed with exit status %d%s' % (cmd, s, msg))\ndistutils.errors.DistutilsExecError: Command \"gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage\n/local/lib -llibraries -o /tmp/tmpyq7p80or/a.out\" failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/system_info.py\", line 17\n77, in has_cblas\n    extra_postargs=info.get('extra_link_args', []))\n  File \"/home/vklein/odk/sage/local/lib/python3.7/distutils/ccompiler.py\", line 734, in link_executable\n    debug, extra_preargs, extra_postargs, None, target_lang)\n  File \"/home/vklein/odk/sage/local/lib/python3.7/distutils/unixccompiler.py\", line 199, in link\n    raise LinkError(msg)\ndistutils.errors.LinkError: Command \"gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/li\nb -llibraries -o /tmp/tmpyq7p80or/a.out\" failed with exit status 1\n```\n\nAdvices or help are welcome.\nI get the same errors with a sage with python2.7.",
    "created_at": "2018-07-02T14:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394514",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:27" align="right">comment:27</div>

When updating to `numpy 1.14.5` with this following patch :

```
diff --git a/numpy/distutils/system_info.py b/numpy/distutils/system_info.py
index 93a8e6f..6e31d30 100644
--- a/numpy/distutils/system_info.py
+++ b/numpy/distutils/system_info.py
@@ -1740,7 +1740,7 @@ class blas_info(system_info):
             lib = self.has_cblas(info)
             if lib is not None:
                 info['language'] = 'c'
-                info['libraries'] = [lib]
+                info['libraries'] = lib
                 info['define_macros'] = [('HAVE_CBLAS', None)]
         self.set_info(**info)
 
@@ -1772,16 +1772,16 @@ class blas_info(system_info):
                 # check for cblas lib, and if not present check for blas lib.
                 try:
                     c.link_executable(obj, os.path.join(tmpdir, "a.out"),
-                                      libraries=["cblas"],
+                                      libraries=["libraries"],
                                       library_dirs=info['library_dirs'],
                                       extra_postargs=info.get('extra_link_args', []))
-                    res = "cblas"
+                    res = info["libraries"]
                 except distutils.ccompiler.LinkError:
                     c.link_executable(obj, os.path.join(tmpdir, "a.out"),
                                       libraries=["blas"],
                                       library_dirs=info['library_dirs'],
                                       extra_postargs=info.get('extra_link_args', []))
-                    res = "blas"
+                    res = ["blas"]
             except distutils.ccompiler.CompileError:
                 res = None
         finally:
```

I get the following error :

```
Found local metadata for numpy-1.14.5.p0
Using cached file /home/vklein/odk/sage/upstream/numpy-1.14.5.zip
numpy-1.14.5.p0
====================================================
Setting up build directory for numpy-1.14.5.p0
Finished extraction
Applying patches from ../patches...
Applying ../patches/numpy-1.14.5-no-hardcode-blas.patch
patching file numpy/distutils/system_info.py
****************************************************
Host system:
Linux tuono 4.13.0-45-generic #50~16.04.1-Ubuntu SMP Wed May 30 11:18:27 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/5/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 5.4.0-6ubuntu1~16.04.10' --with-bugurl=file:///usr/s
hare/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suff
ix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=po
six --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcx
x-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --en
able-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/
usr/lib/jvm/java-1.5.0-gcj-5-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-amd64 -
-with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share
/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --wit
h-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-g
nu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10) 
****************************************************

Note: if you need reliable uninstall behavior, then install
with pip instead of using `setup.py install`:

  - `pip install .`       (from a git repo or downloaded source
                           release)
  - `pip install numpy`   (last NumPy release on PyPi)


blas_opt_info:
blas_mkl_info:
Disabled blas_mkl_info: (MKLROOT is None)
Disabled blas_mkl_info: (MKLROOT is None)
customize UnixCCompiler
  libraries mkl_rt not found in []
  NOT AVAILABLE

blis_info:
customize UnixCCompiler
  libraries blis not found in ['/home/vklein/odk/sage/local/lib', '/usr/local/lib', '/usr/lib', '/usr/lib/x86_64-li
nux-gnu']
  NOT AVAILABLE

openblas_info:
customize UnixCCompiler
Disabled openblas_info: (OPENBLAS is None)
customize UnixCCompiler
  libraries openblas not found in []
  NOT AVAILABLE

atlas_3_10_blas_threads_info:
Disabled atlas_3_10_blas_threads_info: (PTATLAS is None)
customize UnixCCompiler
  libraries tatlas not found in []
  NOT AVAILABLE

atlas_3_10_blas_info:
Disabled atlas_3_10_blas_info: (ATLAS is None)
customize UnixCCompiler
  libraries satlas not found in []
  NOT AVAILABLE

atlas_blas_threads_info:
Disabled atlas_blas_threads_info: (PTATLAS is None)
customize UnixCCompiler
  libraries ptf77blas,ptcblas,atlas not found in []
  NOT AVAILABLE

atlas_blas_info:
Disabled atlas_blas_info: (ATLAS is None)
customize UnixCCompiler
  libraries f77blas,cblas,atlas not found in []
  NOT AVAILABLE

blas_info:
customize UnixCCompiler
customize UnixCCompiler
C compiler: gcc -DNDEBUG -g -fwrapv -O3 -Wall -D__CEPHES_COMPLEX_H -fPIC

creating /tmp/tmpyq7p80or/tmp
creating /tmp/tmpyq7p80or/tmp/tmpyq7p80or
compile options: '-I/home/vklein/odk/sage/local/include -c'
gcc: /tmp/tmpyq7p80or/source.c
gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/lib -llibraries -o /tmp/tmpyq7p80or/a.o
ut
/usr/bin/ld: cannot find -llibraries
collect2: error: ld returned 1 exit status
/usr/bin/ld: cannot find -llibraries
collect2: error: ld returned 1 exit status
gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/lib -lblas -o /tmp/tmpyq7p80or/a.out
Running from numpy source directory.
/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/system_info.py:624: UserWarning:
 
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  self.calc_info()
/usr/bin/ld: cannot find -lblas
collect2: error: ld returned 1 exit status
/usr/bin/ld: cannot find -lblas
collect2: error: ld returned 1 exit status
Traceback (most recent call last):
  File "/home/vklein/odk/sage/local/lib/python3.7/distutils/unixccompiler.py", line 197, in link
    self.spawn(linker + ld_args)
  File "/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/ccompiler.py", line 89, 
in <lambda>
    m = lambda self, *args, **kw: func(self, *args, **kw)
  File "/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/ccompiler.py", line 152,
 in CCompiler_spawn
    raise DistutilsExecError('Command "%s" failed with exit status %d%s' % (cmd, s, msg))
distutils.errors.DistutilsExecError: Command "gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage
/local/lib -llibraries -o /tmp/tmpyq7p80or/a.out" failed with exit status 1

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vklein/odk/sage/local/var/tmp/sage/build/numpy-1.14.5.p0/src/numpy/distutils/system_info.py", line 17
77, in has_cblas
    extra_postargs=info.get('extra_link_args', []))
  File "/home/vklein/odk/sage/local/lib/python3.7/distutils/ccompiler.py", line 734, in link_executable
    debug, extra_preargs, extra_postargs, None, target_lang)
  File "/home/vklein/odk/sage/local/lib/python3.7/distutils/unixccompiler.py", line 199, in link
    raise LinkError(msg)
distutils.errors.LinkError: Command "gcc /tmp/tmpyq7p80or/tmp/tmpyq7p80or/source.o -L/home/vklein/odk/sage/local/li
b -llibraries -o /tmp/tmpyq7p80or/a.out" failed with exit status 1
```

Advices or help are welcome.
I get the same errors with a sage with python2.7.



---

archive/issue_comments_394515.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@vinklein](#comment:26):\n> numpy's issue [#10500](https://github.com/numpy/numpy/issues/10500).\n\nThe solution seems to be recythonizing. Maybe we should just do that when building numpy.",
    "created_at": "2018-07-02T14:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394515",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@vinklein](#comment:26):
> numpy's issue [#10500](https://github.com/numpy/numpy/issues/10500).

The solution seems to be recythonizing. Maybe we should just do that when building numpy.



---

archive/issue_comments_394516.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOk i will try.",
    "created_at": "2018-07-02T15:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394516",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:29" align="right">comment:29</div>

Ok i will try.



---

archive/issue_comments_394517.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@vinklein](#comment:29):\n> Ok i will try.\n\nIf you look in the `setup.py` file of `numpy`, you'll see\n\n```\n    from setuptools import setup\n    if run_build:\n        from numpy.distutils.core import setup\n        cwd = os.path.abspath(os.path.dirname(__file__))\n        if not os.path.exists(os.path.join(cwd, 'PKG-INFO')):\n            # Generate Cython sources, unless building from source release\n            generate_cython()\n```\n\nSo I guess that removing the `PKG-INFO` file in `spkg-install` will force recythonization.",
    "created_at": "2018-07-02T15:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394517",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@vinklein](#comment:29):
> Ok i will try.

If you look in the `setup.py` file of `numpy`, you'll see

```
    from setuptools import setup
    if run_build:
        from numpy.distutils.core import setup
        cwd = os.path.abspath(os.path.dirname(__file__))
        if not os.path.exists(os.path.join(cwd, 'PKG-INFO')):
            # Generate Cython sources, unless building from source release
            generate_cython()
```

So I guess that removing the `PKG-INFO` file in `spkg-install` will force recythonization.



---

archive/issue_comments_394518.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYour trick almost work. The problem is that the numpy file [tools/cythonize.py](https://github.com/numpy/numpy/blob/master/tools/cythonize.py) is not in numpy's source releases.",
    "created_at": "2018-07-02T16:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394518",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:31" align="right">comment:31</div>

Your trick almost work. The problem is that the numpy file [tools/cythonize.py](https://github.com/numpy/numpy/blob/master/tools/cythonize.py) is not in numpy's source releases.



---

archive/issue_comments_394519.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI confirm that numpy's install work if we remove `PKG-INFO` and add `cythonize.py` file.",
    "created_at": "2018-07-02T17:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394519",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:32" align="right">comment:32</div>

I confirm that numpy's install work if we remove `PKG-INFO` and add `cythonize.py` file.



---

archive/issue_comments_394520.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[u/vklein/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/upgrade_to_python_3_7_0)**",
    "created_at": "2018-07-03T08:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394520",
    "user": "https://github.com/vinklein"
}
```

Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[u/vklein/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/upgrade_to_python_3_7_0)**



---

archive/issue_comments_394521.json:
```json
{
    "body": "Changed commit from **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)** to **[`6e0c5b4`](https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33)**",
    "created_at": "2018-07-03T08:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394521",
    "user": "https://github.com/vinklein"
}
```

Changed commit from **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)** to **[`6e0c5b4`](https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33)**



---

archive/issue_comments_394522.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAdding a patch to fix `numpy`'s \u200bissue [#10500](https://github.com/numpy/numpy/issues/10500).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33\"><code>6e0c5b4</code></a></td><td><code>Trac #25680: Patch numpy to fix issue with python3.7</code></td></tr></table>\n",
    "created_at": "2018-07-03T08:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394522",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:34" align="right">comment:34</div>

Adding a patch to fix `numpy`'s ​issue [#10500](https://github.com/numpy/numpy/issues/10500).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33"><code>6e0c5b4</code></a></td><td><code>Trac #25680: Patch numpy to fix issue with python3.7</code></td></tr></table>




---

archive/issue_comments_394523.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nCan we please deal with numpy in a separate ticket.",
    "created_at": "2018-07-03T08:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394523",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Can we please deal with numpy in a separate ticket.



---

archive/issue_comments_394524.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI don't know. The patch doesn't make sense without python 3.7.",
    "created_at": "2018-07-03T08:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394524",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:36" align="right">comment:36</div>

I don't know. The patch doesn't make sense without python 3.7.



---

archive/issue_comments_394525.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@vinklein](#comment:36):\n> I don't know. The patch doesn't make sense without python 3.7.\n\nIt's needed for Python 3.7, but the fix is unrelated to it.",
    "created_at": "2018-07-03T08:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394525",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@vinklein](#comment:36):
> I don't know. The patch doesn't make sense without python 3.7.

It's needed for Python 3.7, but the fix is unrelated to it.



---

archive/issue_events_355122.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T08:33:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355122"
}
```



---

archive/issue_events_355123.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T08:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355123"
}
```



---

archive/issue_comments_394526.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nIf you're patching the sources anyway, I would prefer to patch `setup.py` instead of removing `PKG-INFO`.",
    "created_at": "2018-07-03T08:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394526",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

If you're patching the sources anyway, I would prefer to patch `setup.py` instead of removing `PKG-INFO`.



---

archive/issue_comments_394527.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nSure ! It will be cleaner to patch `setup.py`.",
    "created_at": "2018-07-03T08:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394527",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:39" align="right">comment:39</div>

Sure ! It will be cleaner to patch `setup.py`.



---

archive/issue_comments_394528.json:
```json
{
    "body": "Changed commit from **[`6e0c5b4`](https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33)** to **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)**",
    "created_at": "2018-07-03T08:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394528",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6e0c5b4`](https://github.com/sagemath/sagetrac-mirror/commit/6e0c5b41cf955cd1adfec7e10e5627682d652b33)** to **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)**



---

archive/issue_comments_394529.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-07-03T08:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394529",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_394530.json:
```json
{
    "body": "Changed dependencies from **#25700** to **#25700, #25755**",
    "created_at": "2018-07-03T08:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394530",
    "user": "https://github.com/vinklein"
}
```

Changed dependencies from **#25700** to **#25700, #25755**



---

archive/issue_comments_394531.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nscipy errors seems pretty similar to numpy's:\n\n```\nscipy/cluster/_vq.c: In function '__Pyx__ExceptionSave':\n    scipy/cluster/_vq.c:9728:19: error: 'PyThreadState {aka struct _ts}' has no member named 'exc_type'\n         *type = tstate->exc_type;\n                       ^\n    scipy/cluster/_vq.c:9729:20: error: 'PyThreadState {aka struct _ts}' has no member named 'exc_value'\n         *value = tstate->exc_value;\n```\n\nWith likely the same cause.\nIn `setup.py` file of `scipy` :\n        \n\n```\n        if not os.path.exists(os.path.join(cwd, 'PKG-INFO')):\n            # Generate Cython sources, unless building from source release\n            generate_cython()\n```",
    "created_at": "2018-07-03T14:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394531",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:42" align="right">comment:42</div>

scipy errors seems pretty similar to numpy's:

```
scipy/cluster/_vq.c: In function '__Pyx__ExceptionSave':
    scipy/cluster/_vq.c:9728:19: error: 'PyThreadState {aka struct _ts}' has no member named 'exc_type'
         *type = tstate->exc_type;
                       ^
    scipy/cluster/_vq.c:9729:20: error: 'PyThreadState {aka struct _ts}' has no member named 'exc_value'
         *value = tstate->exc_value;
```

With likely the same cause.
In `setup.py` file of `scipy` :
        

```
        if not os.path.exists(os.path.join(cwd, 'PKG-INFO')):
            # Generate Cython sources, unless building from source release
            generate_cython()
```



---

archive/issue_comments_394532.json:
```json
{
    "body": "Changed dependencies from **#25700, #25755** to **#25700, #25755,  #25759**",
    "created_at": "2018-07-03T14:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394532",
    "user": "https://github.com/vinklein"
}
```

Changed dependencies from **#25700, #25755** to **#25700, #25755,  #25759**



---

archive/issue_comments_394533.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nBuilding sage with this ticket and it's dependencies works fine.\n\nI have made two run of `sage -t -a --long`, one with a sage python3.6 and one with this ticket. Comparing the logs of the two runs (and weakly idenfying a failure by the tuple (<sage file with the failure>, <line of the failure>) with a little script, i get the following results:\n\n```\nnb doctests failures with python3.6: 42990\nnb doctests failures with python3.7: 43643\nnew python3.7 failures : 1366\npython3.6 failures not appearing with python 3.7 : 713\n```\n\nTwo exemple failures among 1366 :\n\n```\nFile \"src/sage/combinat/finite_state_machine.py\", line 10190, in sage.combinat.finite_state_machine.FiniteStateMachine.asymptotic_moments\nFailed example:\n    moments = T.asymptotic_moments()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 573, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 983, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.finite_state_machine.FiniteStateMachine.asymptotic_moments[2]>\", line 1, in <module>\n        moments = T.asymptotic_moments()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/combinat/finite_state_machine.py\", line 10540, in asymptotic_moments\n        if not final_component.digraph().is_aperiodic():\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/graphs/digraph.py\", line 3330, in is_aperiodic\n        import networkx\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/__init__.py\", line 114, in <module>\n        import networkx.generators\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/generators/__init__.py\", line 13, in <module>\n        from networkx.generators.geometric import *\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/generators/geometric.py\", line 27, in <module>\n        from scipy.spatial import cKDTree as KDTree\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/scipy/spatial/__init__.py\", line 95, in <module>\n        from .qhull import *\n      File \"qhull.pyx\", line 2224, in init scipy.spatial.qhull\n    AttributeError: 'cython_function_or_method' object has no attribute '__func__'\n\nsage -t --long src/sage/combinat/dyck_word.py\n**********************************************************************\nFile \"src/sage/combinat/dyck_word.py\", line 873, in sage.combinat.dyck_word.DyckWord.plot\nFailed example:\n    w.plot()\nExpected:\n    Graphics object consisting of 1 graphics primitive\nGot:\n    doctest:warning\n      File \"/home/vklein/odk/sage/src/bin/sage-runtests\", line 127, in <module>\n        err = DC.run()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/control.py\", line 1172, in run\n        self.run_doctests()\n      ...\n      File \"/home/vklein/odk/sage/local/lib/python3.7/collections/__init__.py\", line 52, in __getattr__\n        DeprecationWarning, stacklevel=2)\n            File \"/home/vklein/odk/sage/local/lib/python3.7/warnings.py\", line 99, in _showwarnmsg\n        msg.file, msg.line)\n    :\n    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\n    Graphics object consisting of 1 graphics primitive\n```\n\nNote : To see the script and logs used https://github.com/vinklein/Trac25680",
    "created_at": "2018-07-05T09:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394533",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:44" align="right">comment:44</div>

Building sage with this ticket and it's dependencies works fine.

I have made two run of `sage -t -a --long`, one with a sage python3.6 and one with this ticket. Comparing the logs of the two runs (and weakly idenfying a failure by the tuple (<sage file with the failure>, <line of the failure>) with a little script, i get the following results:

```
nb doctests failures with python3.6: 42990
nb doctests failures with python3.7: 43643
new python3.7 failures : 1366
python3.6 failures not appearing with python 3.7 : 713
```

Two exemple failures among 1366 :

```
File "src/sage/combinat/finite_state_machine.py", line 10190, in sage.combinat.finite_state_machine.FiniteStateMachine.asymptotic_moments
Failed example:
    moments = T.asymptotic_moments()
Exception raised:
    Traceback (most recent call last):
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 573, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 983, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.finite_state_machine.FiniteStateMachine.asymptotic_moments[2]>", line 1, in <module>
        moments = T.asymptotic_moments()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/combinat/finite_state_machine.py", line 10540, in asymptotic_moments
        if not final_component.digraph().is_aperiodic():
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/graphs/digraph.py", line 3330, in is_aperiodic
        import networkx
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/__init__.py", line 114, in <module>
        import networkx.generators
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/generators/__init__.py", line 13, in <module>
        from networkx.generators.geometric import *
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/networkx/generators/geometric.py", line 27, in <module>
        from scipy.spatial import cKDTree as KDTree
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/scipy/spatial/__init__.py", line 95, in <module>
        from .qhull import *
      File "qhull.pyx", line 2224, in init scipy.spatial.qhull
    AttributeError: 'cython_function_or_method' object has no attribute '__func__'

sage -t --long src/sage/combinat/dyck_word.py
**********************************************************************
File "src/sage/combinat/dyck_word.py", line 873, in sage.combinat.dyck_word.DyckWord.plot
Failed example:
    w.plot()
Expected:
    Graphics object consisting of 1 graphics primitive
Got:
    doctest:warning
      File "/home/vklein/odk/sage/src/bin/sage-runtests", line 127, in <module>
        err = DC.run()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/control.py", line 1172, in run
        self.run_doctests()
      ...
      File "/home/vklein/odk/sage/local/lib/python3.7/collections/__init__.py", line 52, in __getattr__
        DeprecationWarning, stacklevel=2)
            File "/home/vklein/odk/sage/local/lib/python3.7/warnings.py", line 99, in _showwarnmsg
        msg.file, msg.line)
    :
    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working
    Graphics object consisting of 1 graphics primitive
```

Note : To see the script and logs used https://github.com/vinklein/Trac25680



---

archive/issue_comments_394534.json:
```json
{
    "body": "Changed dependencies from **#25700, #25755,  #25759** to **#25700, #25755, #24766**",
    "created_at": "2018-07-22T20:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394534",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#25700, #25755,  #25759** to **#25700, #25755, #24766**



---

archive/issue_comments_394535.json:
```json
{
    "body": "Changed branch from **[u/vklein/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/upgrade_to_python_3_7_0)** to **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**",
    "created_at": "2018-07-22T20:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394535",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vklein/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/upgrade_to_python_3_7_0)** to **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**



---

archive/issue_comments_394536.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nPython 3.7 seems to require libffi as new dependency, so I guess we should add that as Sage package.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240\"><code>1c35bac</code></a></td><td><code>Upgrade pexpect</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7cb17143b36e96d553c88550e1fee96116016b\"><code>7a7cb17</code></a></td><td><code>Trac #25755: Patch numpy to fix issue with ptyhon3.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e291b148392de7b73bda1de1a2ca973b8474eaa\"><code>6e291b1</code></a></td><td><code>Trac #25755: update package version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48ceb84736e017d7984021c57f0464b6eb8c2e01\"><code>48ceb84</code></a></td><td><code>Trac #25755: recythonized numpy in every case</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c0cb67a0d4a6f2b590143537c60d6e1d7cb84e8\"><code>9c0cb67</code></a></td><td><code>Add cython as dependency of numpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7386ef8d0f25c2f25547d5e3fd69aa504f943157\"><code>7386ef8</code></a></td><td><code>Update scipy to 1.1.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b94a1bc10c2d97cda4ca93d793aa7c515f2d7449\"><code>b94a1bc</code></a></td><td><code>Remove deprecated iprint parameter</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dcadcc4311e780e134c6912c3636c35e2d9d8b3\"><code>0dcadcc</code></a></td><td><code>Remove scipy testsuite for now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e074fa34c488d924d30108f918d20ed0e912405e\"><code>e074fa3</code></a></td><td><code>Merge commit '1c35bacd91a87db59d19ab78c2ecbfa17e38e240'; commit '9c0cb67a0d4a6f2b590143537c60d6e1d7cb84e8'; commit '0dcadcc4311e780e134c6912c3636c35e2d9d8b3' into t/25680/upgrade_to_python_3_7_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c\"><code>24349a4</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>\n",
    "created_at": "2018-07-22T20:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394536",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Python 3.7 seems to require libffi as new dependency, so I guess we should add that as Sage package.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c35bacd91a87db59d19ab78c2ecbfa17e38e240"><code>1c35bac</code></a></td><td><code>Upgrade pexpect</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7cb17143b36e96d553c88550e1fee96116016b"><code>7a7cb17</code></a></td><td><code>Trac #25755: Patch numpy to fix issue with ptyhon3.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e291b148392de7b73bda1de1a2ca973b8474eaa"><code>6e291b1</code></a></td><td><code>Trac #25755: update package version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48ceb84736e017d7984021c57f0464b6eb8c2e01"><code>48ceb84</code></a></td><td><code>Trac #25755: recythonized numpy in every case</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c0cb67a0d4a6f2b590143537c60d6e1d7cb84e8"><code>9c0cb67</code></a></td><td><code>Add cython as dependency of numpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7386ef8d0f25c2f25547d5e3fd69aa504f943157"><code>7386ef8</code></a></td><td><code>Update scipy to 1.1.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b94a1bc10c2d97cda4ca93d793aa7c515f2d7449"><code>b94a1bc</code></a></td><td><code>Remove deprecated iprint parameter</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dcadcc4311e780e134c6912c3636c35e2d9d8b3"><code>0dcadcc</code></a></td><td><code>Remove scipy testsuite for now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e074fa34c488d924d30108f918d20ed0e912405e"><code>e074fa3</code></a></td><td><code>Merge commit '1c35bacd91a87db59d19ab78c2ecbfa17e38e240'; commit '9c0cb67a0d4a6f2b590143537c60d6e1d7cb84e8'; commit '0dcadcc4311e780e134c6912c3636c35e2d9d8b3' into t/25680/upgrade_to_python_3_7_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c"><code>24349a4</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>




---

archive/issue_comments_394537.json:
```json
{
    "body": "Changed commit from **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)** to **[`24349a4`](https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c)**",
    "created_at": "2018-07-22T20:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394537",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`1bfcdc8`](https://github.com/sagemath/sagetrac-mirror/commit/1bfcdc84ccc6bc18d36b2dd15a3daa0ae2e52ad2)** to **[`24349a4`](https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c)**



---

archive/issue_comments_394538.json:
```json
{
    "body": "Changed dependencies from **#25700, #25755, #24766** to **#25700, #25755, #24766, #25900**",
    "created_at": "2018-07-22T21:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394538",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#25700, #25755, #24766** to **#25700, #25755, #24766, #25900**



---

archive/issue_comments_394539.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed\"><code>8f6d830</code></a></td><td><code>Add libffi package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b8e43813174de6f8d261df489126c7cf4712ce7\"><code>3b8e438</code></a></td><td><code>Merge commit '8f6d8304420e0894d5e8221238adcb09ab7edbed' into t/25680/upgrade_to_python_3_7_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe\"><code>2f7648b</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>\n",
    "created_at": "2018-07-22T21:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394539",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f6d8304420e0894d5e8221238adcb09ab7edbed"><code>8f6d830</code></a></td><td><code>Add libffi package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b8e43813174de6f8d261df489126c7cf4712ce7"><code>3b8e438</code></a></td><td><code>Merge commit '8f6d8304420e0894d5e8221238adcb09ab7edbed' into t/25680/upgrade_to_python_3_7_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe"><code>2f7648b</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>




---

archive/issue_comments_394540.json:
```json
{
    "body": "Changed commit from **[`24349a4`](https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c)** to **[`2f7648b`](https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe)**",
    "created_at": "2018-07-22T21:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394540",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`24349a4`](https://github.com/sagemath/sagetrac-mirror/commit/24349a46b48fcd86f256200a954793b8b076260c)** to **[`2f7648b`](https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe)**



---

archive/issue_comments_394541.json:
```json
{
    "body": "Changed commit from **[`2f7648b`](https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe)** to **[`4e1b2be`](https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b)**",
    "created_at": "2018-07-22T21:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394541",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f7648b`](https://github.com/sagemath/sagetrac-mirror/commit/2f7648b2a74d32a4c815f0e2e9272df59bc0cdfe)** to **[`4e1b2be`](https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b)**



---

archive/issue_comments_394542.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b\"><code>4e1b2be</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>\n",
    "created_at": "2018-07-22T21:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394542",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b"><code>4e1b2be</code></a></td><td><code>Upgrade to Python 3.7.0</code></td></tr></table>




---

archive/issue_comments_394543.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@kiwifb](#comment:15):\n> Failure to build `_ctypes` usually means a problem with `ffi` (sometimes called libffi) may be there is minimum version requirement?\n\nIt seems that older Python versions vendored libffi but this was changed in Python 3.7. See https://docs.python.org/3/whatsnew/3.7.html#build-changes",
    "created_at": "2018-07-22T22:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394543",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@kiwifb](#comment:15):
> Failure to build `_ctypes` usually means a problem with `ffi` (sometimes called libffi) may be there is minimum version requirement?

It seems that older Python versions vendored libffi but this was changed in Python 3.7. See https://docs.python.org/3/whatsnew/3.7.html#build-changes



---

archive/issue_events_355124.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-22T22:06:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355124"
}
```



---

archive/issue_events_355125.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-22T22:06:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355125"
}
```



---

archive/issue_comments_394544.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThe build works fine with the new dependencies.",
    "created_at": "2018-07-23T09:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394544",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:53" align="right">comment:53</div>

The build works fine with the new dependencies.



---

archive/issue_events_355126.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-23T16:15:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355126"
}
```



---

archive/issue_events_355127.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-23T16:15:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355127"
}
```



---

archive/issue_comments_394545.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nOk, since this will be delayed until 8.4 (at least) I rescind my earlier concerns that this will hinder the Python 3 port.  After a thorough reading of the release notes I don't think there's anything that will hurt, and there are some things that will almost certainly help (such a `dict` insertion order preservation).\n\nI just need to see how Python 3.7 does on Cygwin (originally I was aiming to have CPython fully supported on Cygwin by 3.7, but I just didn't have the time, though we did get some important big fixes in).",
    "created_at": "2018-07-23T16:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394545",
    "user": "https://github.com/embray"
}
```

<div id="comment:54" align="right">comment:54</div>

Ok, since this will be delayed until 8.4 (at least) I rescind my earlier concerns that this will hinder the Python 3 port.  After a thorough reading of the release notes I don't think there's anything that will hurt, and there are some things that will almost certainly help (such a `dict` insertion order preservation).

I just need to see how Python 3.7 does on Cygwin (originally I was aiming to have CPython fully supported on Cygwin by 3.7, but I just didn't have the time, though we did get some important big fixes in).



---

archive/issue_comments_394546.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nbranch does not apply",
    "created_at": "2018-08-10T15:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394546",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:55" align="right">comment:55</div>

branch does not apply



---

archive/issue_events_355128.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-10T15:57:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355128"
}
```



---

archive/issue_events_355129.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-10T15:57:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355129"
}
```



---

archive/issue_comments_394547.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\n@embray Have you some news on Python3.7 on Cygwin ?",
    "created_at": "2018-09-26T08:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394547",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:56" align="right">comment:56</div>

@embray Have you some news on Python3.7 on Cygwin ?



---

archive/issue_comments_394548.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nMy only news is I have multiple upstream PRs necessary for 3.7 to at least build, at a bare minimum, on Cygwin, and they have been stalled for quite a bit.  I was just thinking yesterday of poking python-dev soon for someone to look at them.\n\nI actually now maintain an official CPython buildbot for Cygwin, but it's all but useless until those fixes are accepted: https://buildbot.python.org/all/#/builders/164",
    "created_at": "2018-09-26T09:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394548",
    "user": "https://github.com/embray"
}
```

<div id="comment:57" align="right">comment:57</div>

My only news is I have multiple upstream PRs necessary for 3.7 to at least build, at a bare minimum, on Cygwin, and they have been stalled for quite a bit.  I was just thinking yesterday of poking python-dev soon for someone to look at them.

I actually now maintain an official CPython buildbot for Cygwin, but it's all but useless until those fixes are accepted: https://buildbot.python.org/all/#/builders/164



---

archive/issue_comments_394549.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThe more I think about it, the more I'm also hesitant to make 3.7 the Python for Sage until 3.7 is in more distros.  But I'm not sure.  It would be easier to depend on an arbitrary Python 3 (or at least 3.4+) if we were also dropping Python 2 support completely.  I don't think we've set a schedule for doing that, but I doubt that will happen in Sage until *after* the Python 2 EoL.",
    "created_at": "2018-09-26T09:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394549",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

The more I think about it, the more I'm also hesitant to make 3.7 the Python for Sage until 3.7 is in more distros.  But I'm not sure.  It would be easier to depend on an arbitrary Python 3 (or at least 3.4+) if we were also dropping Python 2 support completely.  I don't think we've set a schedule for doing that, but I doubt that will happen in Sage until *after* the Python 2 EoL.



---

archive/issue_comments_394550.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nOk i see (https://github.com/python/cpython/pulls/embray). \n\nSo does that mean you think we should fix problems like `itertools.islice` in sage rather than waiting for 3.7 ?",
    "created_at": "2018-09-26T09:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394550",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:59" align="right">comment:59</div>

Ok i see (https://github.com/python/cpython/pulls/embray). 

So does that mean you think we should fix problems like `itertools.islice` in sage rather than waiting for 3.7 ?



---

archive/issue_comments_394551.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@vinklein](#comment:59):\n> Ok i see (https://github.com/python/cpython/pulls/embray). \n\nWow, I have several PRs pending...  FWIW the only two that are major blockers for Python on Cygwin are:\n\nhttps://github.com/python/cpython/pull/4348\nhttps://github.com/python/cpython/pull/8712\n\nOf course, that alone doesn't necessarily need to block Sage's Python 3 spkg--as it is I believe we already include some custom patches for Cygwin, and I'm okay with that for now.  I just brought it up since you asked about the status on Cygwin.  Also, beyond those patches, there may be other issues.  I actually haven't spent much time on it since I was hoping to get some movement on those bare minimum issues before I do much more... *sigh*\n \n> So does that mean you think we should fix problems like `itertools.islice` in sage rather than waiting for 3.7 ?\n\nYes, and for two reasons:\n\n1) We've already fixed those problems in several cases; probably even the majority of them (I have a few more in my Python 3 branch I haven't even made tickets for yet).\n\n2) We will likely have to work around that anyway for downstream distros, unless we want to make 3.7 a hard requirement for Sage.  But that might be tough, at least in the near term...",
    "created_at": "2018-09-26T10:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394551",
    "user": "https://github.com/embray"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@vinklein](#comment:59):
> Ok i see (https://github.com/python/cpython/pulls/embray). 

Wow, I have several PRs pending...  FWIW the only two that are major blockers for Python on Cygwin are:

https://github.com/python/cpython/pull/4348
https://github.com/python/cpython/pull/8712

Of course, that alone doesn't necessarily need to block Sage's Python 3 spkg--as it is I believe we already include some custom patches for Cygwin, and I'm okay with that for now.  I just brought it up since you asked about the status on Cygwin.  Also, beyond those patches, there may be other issues.  I actually haven't spent much time on it since I was hoping to get some movement on those bare minimum issues before I do much more... *sigh*
 
> So does that mean you think we should fix problems like `itertools.islice` in sage rather than waiting for 3.7 ?

Yes, and for two reasons:

1) We've already fixed those problems in several cases; probably even the majority of them (I have a few more in my Python 3 branch I haven't even made tickets for yet).

2) We will likely have to work around that anyway for downstream distros, unless we want to make 3.7 a hard requirement for Sage.  But that might be tough, at least in the near term...



---

archive/issue_comments_394552.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-**Tarball**: https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tar.xz\n+**Tarball**: https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz\n``````\n",
    "created_at": "2018-10-23T12:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394552",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-**Tarball**: https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tar.xz
+**Tarball**: https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz
``````




---

archive/issue_events_355130.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-23T12:43:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "title_is": "Upgrade to Python 3.7.x",
    "title_was": "Upgrade to Python 3.7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355130"
}
```



---

archive/issue_events_355131.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-23T12:43:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355131"
}
```



---

archive/issue_events_355132.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-23T12:43:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355132"
}
```



---

archive/issue_comments_394553.json:
```json
{
    "body": "Changed keywords from none to **upgrade, Python3**",
    "created_at": "2018-10-23T12:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394553",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, Python3**



---

archive/issue_comments_394554.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nPython 3.7.1 was released.",
    "created_at": "2018-10-23T12:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394554",
    "user": "https://github.com/slel"
}
```

<div id="comment:61" align="right">comment:61</div>

Python 3.7.1 was released.



---

archive/issue_comments_394555.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nPython 3.7.2rc1 was released: [Python insider blog post: Python 3.7.2rc1](https://blog.python.org/2018/12/python-372rc1-and-368rc1-now-available.html).",
    "created_at": "2018-12-15T17:13:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394555",
    "user": "https://github.com/slel"
}
```

<div id="comment:62" align="right">comment:62</div>

Python 3.7.2rc1 was released: [Python insider blog post: Python 3.7.2rc1](https://blog.python.org/2018/12/python-372rc1-and-368rc1-now-available.html).



---

archive/issue_comments_394556.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-**Tarball**: https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz\n+**Tarball**: https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz\n``````\n",
    "created_at": "2019-02-11T20:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394556",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-**Tarball**: https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz
+**Tarball**: https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz
``````




---

archive/issue_events_355133.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-11T20:19:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355133"
}
```



---

archive/issue_events_355134.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-11T20:19:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355134"
}
```



---

archive/issue_comments_394557.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a\"><code>3d98676</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr></table>\n",
    "created_at": "2019-02-11T20:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394557",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a"><code>3d98676</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr></table>




---

archive/issue_comments_394558.json:
```json
{
    "body": "Changed commit from **[`4e1b2be`](https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b)** to **[`3d98676`](https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a)**",
    "created_at": "2019-02-11T20:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394558",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e1b2be`](https://github.com/sagemath/sagetrac-mirror/commit/4e1b2bef2a974b1d58e6469e225a54be6d88c36b)** to **[`3d98676`](https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a)**



---

archive/issue_comments_394559.json:
```json
{
    "body": "Changed dependencies from **#25700, #25755, #24766, #25900** to none",
    "created_at": "2019-02-11T20:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394559",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#25700, #25755, #24766, #25900** to none



---

archive/issue_events_355135.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-11T20:33:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355135"
}
```



---

archive/issue_events_355136.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-11T20:33:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355136"
}
```



---

archive/issue_comments_394560.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nWhen running sage in py3 a difference with python3.6 is that we get a bunch of doctests errors of type `DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working`. They mainly comes form `matplotlib` package but also from packages `jinja2`, `networkx` and `werkzeug`.",
    "created_at": "2019-02-12T11:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394560",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:66" align="right">comment:66</div>

When running sage in py3 a difference with python3.6 is that we get a bunch of doctests errors of type `DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working`. They mainly comes form `matplotlib` package but also from packages `jinja2`, `networkx` and `werkzeug`.



---

archive/issue_comments_394561.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@vinklein](#comment:66):\n> When running sage in py3 a difference with python3.6 is that we get a bunch of doctests errors of type `DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working`. They mainly comes form `matplotlib` package but also from packages `jinja2`, `networkx` and `werkzeug`.\n\nWe could just hide that warning.",
    "created_at": "2019-02-12T16:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394561",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@vinklein](#comment:66):
> When running sage in py3 a difference with python3.6 is that we get a bunch of doctests errors of type `DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working`. They mainly comes form `matplotlib` package but also from packages `jinja2`, `networkx` and `werkzeug`.

We could just hide that warning.



---

archive/issue_comments_394562.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\n|                |                       |                  |\n|----------------|-----------------------|------------------|\n| Python version | Files having failures | failing doctests |\n| 3.6.6 | 166 | 717 |\n| 3.7.2 | 387 | 1104 |\n\nNumbers of `DeprecationWarning: Using or importing the ABCs from 'collections'...` : 230.\n\nnew python3.7 failures : 407\\\\\n\npython3.6 failures not appearing with python 3.7 : 18\n\nLink for the doctest logs [here](https://www.labri.fr/perso/vklein/python3.7.2.log.zip)",
    "created_at": "2019-02-12T16:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394562",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:68" align="right">comment:68</div>

|                |                       |                  |
|----------------|-----------------------|------------------|
| Python version | Files having failures | failing doctests |
| 3.6.6 | 166 | 717 |
| 3.7.2 | 387 | 1104 |

Numbers of `DeprecationWarning: Using or importing the ABCs from 'collections'...` : 230.

new python3.7 failures : 407\\

python3.6 failures not appearing with python 3.7 : 18

Link for the doctest logs [here](https://www.labri.fr/perso/vklein/python3.7.2.log.zip)



---

archive/issue_comments_394563.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nBy the way, I don't think that increasing the number of doctest failures should prevent this ticket from being merged. We'll need to support Python 3.7 sooner or later, so we might as well do it sooner.",
    "created_at": "2019-02-12T16:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394563",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

By the way, I don't think that increasing the number of doctest failures should prevent this ticket from being merged. We'll need to support Python 3.7 sooner or later, so we might as well do it sooner.



---

archive/issue_comments_394564.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nYes i agree with that. I am ok to give positive review for this ticket as you can now run sage with this python version. \n\n@embray can you confirm that it's ok for Cygwin now ? ((https://github.com/python/cpython/pull/4348 \u200bhttps://github.com/python/cpython/pull/8712 have been merged)",
    "created_at": "2019-02-12T17:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394564",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:70" align="right">comment:70</div>

Yes i agree with that. I am ok to give positive review for this ticket as you can now run sage with this python version. 

@embray can you confirm that it's ok for Cygwin now ? ((https://github.com/python/cpython/pull/4348 ​https://github.com/python/cpython/pull/8712 have been merged)



---

archive/issue_comments_394565.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\noh, great, 400 new doctests to fix.. really great.. I was afraid to start lacking things to do...\n\nDoes this pass the python3 test target ?\n\nIf not, it will fail on the buildbot that checks exactly that.. and maybe the release manager will say **niet**.",
    "created_at": "2019-02-12T17:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394565",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:71" align="right">comment:71</div>

oh, great, 400 new doctests to fix.. really great.. I was afraid to start lacking things to do...

Does this pass the python3 test target ?

If not, it will fail on the buildbot that checks exactly that.. and maybe the release manager will say **niet**.



---

archive/issue_comments_394566.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nLike I said, we would need to fix those failures at some point anyway. I don't think that we want to stay on Python 3.6 forever.",
    "created_at": "2019-02-12T17:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394566",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Like I said, we would need to fix those failures at some point anyway. I don't think that we want to stay on Python 3.6 forever.



---

archive/issue_comments_394567.json:
```json
{
    "body": "Changed commit from **[`3d98676`](https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a)** to **[`99cbc2d`](https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3)**",
    "created_at": "2019-02-12T21:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d98676`](https://github.com/sagemath/sagetrac-mirror/commit/3d986766849a48dc87ae51acd9d7803f0896736a)** to **[`99cbc2d`](https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3)**



---

archive/issue_comments_394568.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3\"><code>99cbc2d</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>\n",
    "created_at": "2019-02-12T21:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3"><code>99cbc2d</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>




---

archive/issue_comments_394569.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nMost remaining failures are of the form\n\n```\nsage -t --long src/sage/rings/number_field/galois_group.py\n**********************************************************************\nFile \"src/sage/rings/number_field/galois_group.py\", line 20, in sage.rings.number_field.galois_group\nFailed example:\n    G == loads(dumps(G))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.number_field.galois_group[3]>\", line 1, in <module>\n        G == loads(dumps(G))\n      File \"sage/misc/persist.pyx\", line 968, in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7256)\n        return unpickler.load()\n      File \"/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py\", line 573, in extend\n        self._require_mutable()\n      File \"/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py\", line 740, in _require_mutable\n        if self._is_immutable:\n      File \"/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py\", line 879, in __getattr__\n        raise AttributeError(\"'Sequence_generic' object has no attribute '%s'\"%name)\n    AttributeError: 'Sequence_generic' object has no attribute '_is_immutable'\n**********************************************************************\n```",
    "created_at": "2019-02-12T22:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394569",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">comment:74</div>

Most remaining failures are of the form

```
sage -t --long src/sage/rings/number_field/galois_group.py
**********************************************************************
File "src/sage/rings/number_field/galois_group.py", line 20, in sage.rings.number_field.galois_group
Failed example:
    G == loads(dumps(G))
Exception raised:
    Traceback (most recent call last):
      File "/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.number_field.galois_group[3]>", line 1, in <module>
        G == loads(dumps(G))
      File "sage/misc/persist.pyx", line 968, in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7256)
        return unpickler.load()
      File "/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py", line 573, in extend
        self._require_mutable()
      File "/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py", line 740, in _require_mutable
        if self._is_immutable:
      File "/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py", line 879, in __getattr__
        raise AttributeError("'Sequence_generic' object has no attribute '%s'"%name)
    AttributeError: 'Sequence_generic' object has no attribute '_is_immutable'
**********************************************************************
```



---

archive/issue_comments_394570.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThe filter works ! So it will be more something like 177 new doctests failures rather than 407.",
    "created_at": "2019-02-12T22:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394570",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:75" align="right">comment:75</div>

The filter works ! So it will be more something like 177 new doctests failures rather than 407.



---

archive/issue_comments_394571.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nAlso\n\n```\nDeprecationWarning: time.clock has been deprecated in Python 3.3 and will be removed from Python 3.8: use time.perf_counter or time.process_time instead\n```",
    "created_at": "2019-02-12T22:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394571",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">comment:76</div>

Also

```
DeprecationWarning: time.clock has been deprecated in Python 3.3 and will be removed from Python 3.8: use time.perf_counter or time.process_time instead
```



---

archive/issue_comments_394572.json:
```json
{
    "body": "Dependencies: **#27269**",
    "created_at": "2019-02-12T22:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394572",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27269**



---

archive/issue_comments_394573.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@fchapoton](#comment:71):\n> oh, great, 400 new doctests to fix.. really great.. I was afraid to start lacking things to do...\n\nIt's not as bad as it sounds. Those 400 doctests are mostly just instances of either of two failures. So fixing those two should bring that number down to a very small number.",
    "created_at": "2019-02-12T22:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394573",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@fchapoton](#comment:71):
> oh, great, 400 new doctests to fix.. really great.. I was afraid to start lacking things to do...

It's not as bad as it sounds. Those 400 doctests are mostly just instances of either of two failures. So fixing those two should bring that number down to a very small number.



---

archive/issue_comments_394574.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\ndoes not build on my patchbot (and others)",
    "created_at": "2019-02-14T10:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394574",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:79" align="right">comment:79</div>

does not build on my patchbot (and others)



---

archive/issue_comments_394575.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@fchapoton](#comment:79):\n> does not build\n\nDetails please...",
    "created_at": "2019-02-14T10:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394575",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@fchapoton](#comment:79):
> does not build

Details please...



---

archive/issue_comments_394576.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nThe only thing I can see from the patch bot is that the python 3.7 tarball is not mirrored so the bots fail to fetch it.",
    "created_at": "2019-02-14T10:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394576",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:81" align="right">comment:81</div>

The only thing I can see from the patch bot is that the python 3.7 tarball is not mirrored so the bots fail to fetch it.



---

archive/issue_comments_394577.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nyes, sorry for the noise..\n\nIs there good hope to fix here the \n\n```\nAttributeError: 'Sequence_generic' object has no attribute '_is_immutable\n```\nerrors ? I remember that the Galois group code is a bit antique and somewhat ugly..",
    "created_at": "2019-02-14T10:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394577",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:82" align="right">comment:82</div>

yes, sorry for the noise..

Is there good hope to fix here the 

```
AttributeError: 'Sequence_generic' object has no attribute '_is_immutable
```
errors ? I remember that the Galois group code is a bit antique and somewhat ugly..



---

archive/issue_comments_394578.json:
```json
{
    "body": "Changed dependencies from **#27269** to none",
    "created_at": "2019-02-21T09:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394578",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27269** to none



---

archive/issue_comments_394579.json:
```json
{
    "body": "<div id=\"comment:84\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4a4913949c94ad63b6a848f4197312afc974f1f\"><code>d4a4913</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f\"><code>f7bb957</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>\n",
    "created_at": "2019-02-21T09:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394579",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:84"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4a4913949c94ad63b6a848f4197312afc974f1f"><code>d4a4913</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f"><code>f7bb957</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>




---

archive/issue_comments_394580.json:
```json
{
    "body": "Changed commit from **[`99cbc2d`](https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3)** to **[`f7bb957`](https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f)**",
    "created_at": "2019-02-21T09:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`99cbc2d`](https://github.com/sagemath/sagetrac-mirror/commit/99cbc2d0705662afa3e7a971b5b9f1fd12aa85f3)** to **[`f7bb957`](https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f)**



---

archive/issue_comments_394581.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nI'm looking into this:\n\n```\nsage: L = Sequence(range(10))\nsage: L\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\nsage: loads(dumps(L))\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-3-21e74d398e6e> in <module>()\n----> 1 loads(dumps(L))\n\n/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/misc/persist.pyx in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7256)()\n    966 \n    967     unpickler = SageUnpickler(io.BytesIO(s))\n--> 968     return unpickler.load()\n    969 \n    970 \n\n/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in extend(self, iterable)\n    571             [1, 2, 3, 0, 1, 2, 3]\n    572         \"\"\"\n--> 573         self._require_mutable()\n    574         v = [self.__universe(x) for x in iterable]\n    575         list.extend(self, v)\n\n/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in _require_mutable(self)\n    738             ValueError: object is immutable; please change a copy instead.\n    739         \"\"\"\n--> 740         if self._is_immutable:\n    741             raise ValueError(\"object is immutable; please change a copy instead.\")\n    742 \n\n/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in __getattr__(self, name)\n    877             return self.__hash\n    878         else:\n--> 879             raise AttributeError(\"'Sequence_generic' object has no attribute '%s'\"%name)\n    880 seq = Sequence\n    881 \n\nAttributeError: 'Sequence_generic' object has no attribute '_is_immutable'\n```\nThis is causing the vast majority of all new doctest failures.",
    "created_at": "2019-02-21T10:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394581",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:85" align="right">comment:85</div>

I'm looking into this:

```
sage: L = Sequence(range(10))
sage: L
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
sage: loads(dumps(L))
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-3-21e74d398e6e> in <module>()
----> 1 loads(dumps(L))

/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/misc/persist.pyx in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7256)()
    966 
    967     unpickler = SageUnpickler(io.BytesIO(s))
--> 968     return unpickler.load()
    969 
    970 

/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in extend(self, iterable)
    571             [1, 2, 3, 0, 1, 2, 3]
    572         """
--> 573         self._require_mutable()
    574         v = [self.__universe(x) for x in iterable]
    575         list.extend(self, v)

/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in _require_mutable(self)
    738             ValueError: object is immutable; please change a copy instead.
    739         """
--> 740         if self._is_immutable:
    741             raise ValueError("object is immutable; please change a copy instead.")
    742 

/home/dimpase/sage-python3/local/lib/python3.7/site-packages/sage/structure/sequence.py in __getattr__(self, name)
    877             return self.__hash
    878         else:
--> 879             raise AttributeError("'Sequence_generic' object has no attribute '%s'"%name)
    880 seq = Sequence
    881 

AttributeError: 'Sequence_generic' object has no attribute '_is_immutable'
```
This is causing the vast majority of all new doctest failures.



---

archive/issue_comments_394582.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e233a9e97f9b5cd433d735ea58f9c4878f2d38a3\"><code>e233a9e</code></a></td><td><code>Implement pickling for Sequence_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d4139c295803142a38f65ea2c48db04d251af93\"><code>0d4139c</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd\"><code>830749c</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>\n",
    "created_at": "2019-02-21T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394582",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e233a9e97f9b5cd433d735ea58f9c4878f2d38a3"><code>e233a9e</code></a></td><td><code>Implement pickling for Sequence_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d4139c295803142a38f65ea2c48db04d251af93"><code>0d4139c</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd"><code>830749c</code></a></td><td><code>Disable collections.abc warnings</code></td></tr></table>




---

archive/issue_comments_394583.json:
```json
{
    "body": "Changed commit from **[`f7bb957`](https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f)** to **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)**",
    "created_at": "2019-02-21T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7bb957`](https://github.com/sagemath/sagetrac-mirror/commit/f7bb9577fe1d233c3cb11e5f2a993a61fef16e3f)** to **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)**



---

archive/issue_comments_394584.json:
```json
{
    "body": "Dependencies: **#27334**",
    "created_at": "2019-02-21T11:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394584",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27334**



---

archive/issue_comments_394585.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nThere is just one failure with `ptest-python3`: a timeout in `src/sage/parallel/map_reduce.py`",
    "created_at": "2019-02-21T14:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394585",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:88" align="right">comment:88</div>

There is just one failure with `ptest-python3`: a timeout in `src/sage/parallel/map_reduce.py`



---

archive/issue_comments_394586.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nIs this timeout somehow related with `python3.7` ? If not with #27334 i am ok to set this ticket in positive review.",
    "created_at": "2019-02-22T15:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394586",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:89" align="right">comment:89</div>

Is this timeout somehow related with `python3.7` ? If not with #27334 i am ok to set this ticket in positive review.



---

archive/issue_comments_394587.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nI'm not entirely sure what is causing that timeout... but I also don't think that it should prevent merging this ticket.",
    "created_at": "2019-02-22T16:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394587",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:90" align="right">comment:90</div>

I'm not entirely sure what is causing that timeout... but I also don't think that it should prevent merging this ticket.



---

archive/issue_comments_394588.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nOk then.",
    "created_at": "2019-02-22T16:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394588",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:91" align="right">comment:91</div>

Ok then.



---

archive/issue_events_355137.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-02-22T16:21:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355137"
}
```



---

archive/issue_events_355138.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-02-22T16:21:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355138"
}
```



---

archive/issue_comments_394589.json:
```json
{
    "body": "Reviewer: **Vincent Klein, Eric Bray**",
    "created_at": "2019-02-22T16:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394589",
    "user": "https://github.com/vinklein"
}
```

Reviewer: **Vincent Klein, Eric Bray**



---

archive/issue_comments_394590.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein, Eric Bray** to **Vincent Klein, Erik Bray**",
    "created_at": "2019-02-22T19:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394590",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Vincent Klein, Eric Bray** to **Vincent Klein, Erik Bray**



---

archive/issue_comments_394591.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nDoes this pass the refreshed python3 test target of 8.7.b5 (that checks more modules)?\n\nIf not, it will fail on the buildbot that checks exactly that.. and maybe the release manager will say **niet**.",
    "created_at": "2019-02-24T19:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394591",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:94" align="right">comment:94</div>

Does this pass the refreshed python3 test target of 8.7.b5 (that checks more modules)?

If not, it will fail on the buildbot that checks exactly that.. and maybe the release manager will say **niet**.



---

archive/issue_comments_394592.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI would argue that we can always change the list of passing doctests in this ticket. Otherwise, we are aiming for a moving target and this ticket won't ever be fixed.",
    "created_at": "2019-02-25T08:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394592",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:95" align="right">comment:95</div>

I would argue that we can always change the list of passing doctests in this ticket. Otherwise, we are aiming for a moving target and this ticket won't ever be fixed.



---

archive/issue_comments_394593.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nyes, sure. I would very much like this ticket to be fixed, and I do not want to do anything against it. But still maybe somebody should check if the passing doctests needs to be changed ?",
    "created_at": "2019-02-25T09:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394593",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:96" align="right">comment:96</div>

yes, sure. I would very much like this ticket to be fixed, and I do not want to do anything against it. But still maybe somebody should check if the passing doctests needs to be changed ?



---

archive/issue_comments_394594.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)**",
    "created_at": "2019-02-25T18:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394594",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)**



---

archive/issue_events_355139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-25T18:52:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355139"
}
```



---

archive/issue_events_355140.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-25T18:52:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355140"
}
```



---

archive/issue_comments_394595.json:
```json
{
    "body": "Changed branch from **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)** to **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**",
    "created_at": "2019-02-25T23:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394595",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)** to **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)**



---

archive/issue_comments_394596.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nIronically, this fails on py3:\n\n```\nsage -t --long src/sage_setup/docbuild/__init__.py\n**********************************************************************\nFile \"src/sage_setup/docbuild/__init__.py\", line 98, in sage_setup.docbuild.builder_helper\nFailed example:\n    build_many(build_ref_doc, [(\"docname\", \"en\", \"html\", {})])\nExpected:\n    Traceback (most recent call last):\n    ...\n    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation',))\nGot:\n    <BLANKLINE>\n    multiprocessing.pool.RemoteTraceback: \n    \"\"\"\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 129, in f\n        runsphinx()\n      File \"<doctest sage_setup.docbuild.builder_helper[3]>\", line 2, in raiseBaseException\n        raise BaseException(\"abort pool operation\")\n    BaseException: abort pool operation\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py\", line 121, in worker\n        result = (True, func(*args, **kwds))\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py\", line 44, in mapstar\n        return list(map(*args))\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 73, in build_ref_doc\n        getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 742, in _wrapper\n        getattr(DocBuilder, build_type)(self, *args, **kwds)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 138, in f\n        raise Exception(\"Non-exception during docbuild: %s\"%(e,), e)\n    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))\n    \"\"\"\n    <BLANKLINE>\n    The above exception was the direct cause of the following exception:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.docbuild.builder_helper[7]>\", line 1, in <module>\n        build_many(build_ref_doc, [(\"docname\", \"en\", \"html\", {})])\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 282, in build_many\n        ret = x.get(99999)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py\", line 657, in get\n        raise self._value\n    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))\n**********************************************************************\n1 item had failures:\n   1 of  10 in sage_setup.docbuild.builder_helper\n    [36 tests, 1 failure, 0.65 s]\n```",
    "created_at": "2019-02-25T23:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394596",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:98" align="right">comment:98</div>

Ironically, this fails on py3:

```
sage -t --long src/sage_setup/docbuild/__init__.py
**********************************************************************
File "src/sage_setup/docbuild/__init__.py", line 98, in sage_setup.docbuild.builder_helper
Failed example:
    build_many(build_ref_doc, [("docname", "en", "html", {})])
Expected:
    Traceback (most recent call last):
    ...
    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation',))
Got:
    <BLANKLINE>
    multiprocessing.pool.RemoteTraceback: 
    """
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 129, in f
        runsphinx()
      File "<doctest sage_setup.docbuild.builder_helper[3]>", line 2, in raiseBaseException
        raise BaseException("abort pool operation")
    BaseException: abort pool operation
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py", line 121, in worker
        result = (True, func(*args, **kwds))
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py", line 44, in mapstar
        return list(map(*args))
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 73, in build_ref_doc
        getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 742, in _wrapper
        getattr(DocBuilder, build_type)(self, *args, **kwds)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 138, in f
        raise Exception("Non-exception during docbuild: %s"%(e,), e)
    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))
    """
    <BLANKLINE>
    The above exception was the direct cause of the following exception:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.docbuild.builder_helper[7]>", line 1, in <module>
        build_many(build_ref_doc, [("docname", "en", "html", {})])
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 282, in build_many
        ret = x.get(99999)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/multiprocessing/pool.py", line 657, in get
        raise self._value
    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))
**********************************************************************
1 item had failures:
   1 of  10 in sage_setup.docbuild.builder_helper
    [36 tests, 1 failure, 0.65 s]
```



---

archive/issue_comments_394597.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nHere's what I got for the test suite on OS X:\n\n```\n\nRan 93 tests in 225.537s\n\nFAILED (errors=3, skipped=1)\n8 tests failed again:\n    test_normalization test_robotparser test_site test_ssl\n    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet\n\n== Tests result: FAILURE then FAILURE ==\n\n389 tests OK.\n\n8 tests failed:\n    test_normalization test_robotparser test_site test_ssl\n    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet\n\n16 tests skipped:\n    test_dbm_gnu test_devpoll test_epoll test_gdb test_msilib\n    test_multiprocessing_fork test_ossaudiodev test_spwd\n    test_startfile test_tix test_tk test_ttk_guionly test_winconsoleio\n    test_winreg test_winsound test_zipfile64\n\n8 re-run tests:\n    test_normalization test_robotparser test_site test_ssl\n    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet\n\n3 tests run no tests:\n    test_dtrace test_future4 test_largefile\n\nTotal duration: 48 min 44 sec\nTests result: FAILURE then FAILURE\nmake[2]: *** [test] Error 2\nAn error occurred while testing Python\n```",
    "created_at": "2019-02-26T00:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394597",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:99" align="right">comment:99</div>

Here's what I got for the test suite on OS X:

```

Ran 93 tests in 225.537s

FAILED (errors=3, skipped=1)
8 tests failed again:
    test_normalization test_robotparser test_site test_ssl
    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet

== Tests result: FAILURE then FAILURE ==

389 tests OK.

8 tests failed:
    test_normalization test_robotparser test_site test_ssl
    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet

16 tests skipped:
    test_dbm_gnu test_devpoll test_epoll test_gdb test_msilib
    test_multiprocessing_fork test_ossaudiodev test_spwd
    test_startfile test_tix test_tk test_ttk_guionly test_winconsoleio
    test_winreg test_winsound test_zipfile64

8 re-run tests:
    test_normalization test_robotparser test_site test_ssl
    test_sysconfig test_urllib test_urllib2 test_urllib2_localnet

3 tests run no tests:
    test_dtrace test_future4 test_largefile

Total duration: 48 min 44 sec
Tests result: FAILURE then FAILURE
make[2]: *** [test] Error 2
An error occurred while testing Python
```



---

archive/issue_comments_394598.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nPlease also don't set this back to positive review until I've had a chance to try it.  I didn't even know this had been closed.  I don't know why you added me to the reviewers when I haven't even commented on this ticket in 5 months (note: I'm not opposed to it but I haven't even looked at it since it started having activity again).",
    "created_at": "2019-02-26T11:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394598",
    "user": "https://github.com/embray"
}
```

<div id="comment:0" align="right">comment:0</div>

Please also don't set this back to positive review until I've had a chance to try it.  I didn't even know this had been closed.  I don't know why you added me to the reviewers when I haven't even commented on this ticket in 5 months (note: I'm not opposed to it but I haven't even looked at it since it started having activity again).



---

archive/issue_events_355141.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T11:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355141"
}
```



---

archive/issue_comments_394599.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein, Erik Bray** to **Vincent Klein**",
    "created_at": "2019-02-26T11:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394599",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Vincent Klein, Erik Bray** to **Vincent Klein**



---

archive/issue_comments_394600.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n(For some reason the workflow was in an odd state where I couldn't set it directly back to needs review)",
    "created_at": "2019-02-26T11:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394600",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

(For some reason the workflow was in an odd state where I couldn't set it directly back to needs review)



---

archive/issue_events_355142.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T11:01:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355142"
}
```



---

archive/issue_events_355143.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T11:01:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355143"
}
```



---

archive/issue_comments_394601.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere are two critical fixes needed for Python 3.7 to even *build* on Cygwin:\n\n* [One of them](https://github.com/python/cpython/pull/10734) has been backported to the 3.7 branch, and I confirmed is in 3.7.2.\n\n* [The other](https://github.com/python/cpython/pull/4348) has not been backported to 3.7, which is annoying.  I'm not sure why not; I'll have to look into what I have to do to request a backport.  In the meantime this patch needs to be included, at the very least.",
    "created_at": "2019-02-26T11:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394601",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

There are two critical fixes needed for Python 3.7 to even *build* on Cygwin:

* [One of them](https://github.com/python/cpython/pull/10734) has been backported to the 3.7 branch, and I confirmed is in 3.7.2.

* [The other](https://github.com/python/cpython/pull/4348) has not been backported to 3.7, which is annoying.  I'm not sure why not; I'll have to look into what I have to do to request a backport.  In the meantime this patch needs to be included, at the very least.



---

archive/issue_comments_394602.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@embray](#comment:100):\n> Please also don't set this back to positive review until I've had a chance to try it.  I didn't even know this had been closed.  I don't know why you added me to the reviewers when I haven't even commented on this ticket in 5 months (note: I'm not opposed to it but I haven't even looked at it since it started having activity again).\n\nSorry but i thought you already had validated `3.7.2` for OSX. I was wrong.",
    "created_at": "2019-02-26T12:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394602",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@embray](#comment:100):
> Please also don't set this back to positive review until I've had a chance to try it.  I didn't even know this had been closed.  I don't know why you added me to the reviewers when I haven't even commented on this ticket in 5 months (note: I'm not opposed to it but I haven't even looked at it since it started having activity again).

Sorry but i thought you already had validated `3.7.2` for OSX. I was wrong.



---

archive/issue_comments_394603.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor comparison, here is what happens when I run the tests with Python 3.6.6:\n\n```\nRan 93 tests in 225.364s\n\nFAILED (errors=3, skipped=1)\n10 tests failed again:\n    test_asyncio test_normalization test_pyexpat test_robotparser\n    test_site test_ssl test_sysconfig test_urllib test_urllib2\n    test_urllib2_localnet\n\n== Tests result: FAILURE then FAILURE ==\n\n382 tests OK.\n\n10 tests failed:\n    test_asyncio test_normalization test_pyexpat test_robotparser\n    test_site test_ssl test_sysconfig test_urllib test_urllib2\n    test_urllib2_localnet\n\n15 tests skipped:\n    test_dbm_gnu test_devpoll test_epoll test_gdb test_msilib\n    test_ossaudiodev test_spwd test_startfile test_tix test_tk\n    test_ttk_guionly test_winconsoleio test_winreg test_winsound\n    test_zipfile64\n\n10 re-run tests:\n    test_asyncio test_normalization test_pyexpat test_robotparser\n    test_site test_ssl test_sysconfig test_urllib test_urllib2\n    test_urllib2_localnet\n\nTotal duration: 49 min 37 sec\nTests result: FAILURE then FAILURE\nmake[2]: *** [test] Error 2\nAn error occurred while testing Python\n```",
    "created_at": "2019-02-26T18:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394603",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

For comparison, here is what happens when I run the tests with Python 3.6.6:

```
Ran 93 tests in 225.364s

FAILED (errors=3, skipped=1)
10 tests failed again:
    test_asyncio test_normalization test_pyexpat test_robotparser
    test_site test_ssl test_sysconfig test_urllib test_urllib2
    test_urllib2_localnet

== Tests result: FAILURE then FAILURE ==

382 tests OK.

10 tests failed:
    test_asyncio test_normalization test_pyexpat test_robotparser
    test_site test_ssl test_sysconfig test_urllib test_urllib2
    test_urllib2_localnet

15 tests skipped:
    test_dbm_gnu test_devpoll test_epoll test_gdb test_msilib
    test_ossaudiodev test_spwd test_startfile test_tix test_tk
    test_ttk_guionly test_winconsoleio test_winreg test_winsound
    test_zipfile64

10 re-run tests:
    test_asyncio test_normalization test_pyexpat test_robotparser
    test_site test_ssl test_sysconfig test_urllib test_urllib2
    test_urllib2_localnet

Total duration: 49 min 37 sec
Tests result: FAILURE then FAILURE
make[2]: *** [test] Error 2
An error occurred while testing Python
```



---

archive/issue_comments_394604.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe second Cygwin fix seems to have been merged, no ?\n\nhttps://github.com/python/cpython/pull/12063",
    "created_at": "2019-03-05T10:48:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394604",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

The second Cygwin fix seems to have been merged, no ?

https://github.com/python/cpython/pull/12063



---

archive/issue_comments_394605.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@fchapoton](#comment:105):\n> The second Cygwin fix seems to have been merged, no ?\n> \n> https://github.com/python/cpython/pull/12063\n\nYes, 6 days ago, after I made noise about it.",
    "created_at": "2019-03-05T15:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394605",
    "user": "https://github.com/embray"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@fchapoton](#comment:105):
> The second Cygwin fix seems to have been merged, no ?
> 
> https://github.com/python/cpython/pull/12063

Yes, 6 days ago, after I made noise about it.



---

archive/issue_comments_394606.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nShould we wait for a release of python 3.7 ?",
    "created_at": "2019-03-05T15:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394606",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

Should we wait for a release of python 3.7 ?



---

archive/issue_comments_394607.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNot necessarily, we can still include the patch now.",
    "created_at": "2019-03-05T15:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394607",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Not necessarily, we can still include the patch now.



---

archive/issue_comments_394608.json:
```json
{
    "body": "Changed dependencies from **#27334** to none",
    "created_at": "2019-03-05T15:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394608",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#27334** to none



---

archive/issue_comments_394609.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c12c27b4cbea157c0c2c1cf14e98fd37e745323\"><code>8c12c27</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb0564d3c325d7088854e8224aa312652c1216db\"><code>bb0564d</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28\"><code>b94ad2c</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T10:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394609",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c12c27b4cbea157c0c2c1cf14e98fd37e745323"><code>8c12c27</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb0564d3c325d7088854e8224aa312652c1216db"><code>bb0564d</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28"><code>b94ad2c</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr></table>




---

archive/issue_comments_394610.json:
```json
{
    "body": "Changed commit from **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)** to **[`b94ad2c`](https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28)**",
    "created_at": "2019-03-11T10:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`830749c`](https://github.com/sagemath/sagetrac-mirror/commit/830749c304e408cf8b4825f98649a990519495fd)** to **[`b94ad2c`](https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28)**



---

archive/issue_comments_394611.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b08639ce6d90b91e8cf504424f5b8593019117cf\"><code>b08639c</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d6bb9aeb257a7725875cc83bbd590614b05cc15\"><code>2d6bb9a</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325\"><code>a42152c</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T10:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b08639ce6d90b91e8cf504424f5b8593019117cf"><code>b08639c</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d6bb9aeb257a7725875cc83bbd590614b05cc15"><code>2d6bb9a</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325"><code>a42152c</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr></table>




---

archive/issue_comments_394612.json:
```json
{
    "body": "Changed commit from **[`b94ad2c`](https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28)** to **[`a42152c`](https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325)**",
    "created_at": "2019-03-11T10:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b94ad2c`](https://github.com/sagemath/sagetrac-mirror/commit/b94ad2c2e95900b66619deeeb1ce43d234adbe28)** to **[`a42152c`](https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325)**



---

archive/issue_comments_394613.json:
```json
{
    "body": "Changed commit from **[`a42152c`](https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325)** to **[`e5f3023`](https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3)**",
    "created_at": "2019-03-11T10:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394613",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a42152c`](https://github.com/sagemath/sagetrac-mirror/commit/a42152cab4f24c6db48a0263ccef9f68da151325)** to **[`e5f3023`](https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3)**



---

archive/issue_comments_394614.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36c93f1ec7c57d8edd967c5915bf865477e5d4fd\"><code>36c93f1</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b03a9f89a30dcd17f9d90814cff669d9ea3f7ab1\"><code>b03a9f8</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3\"><code>e5f3023</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T10:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36c93f1ec7c57d8edd967c5915bf865477e5d4fd"><code>36c93f1</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b03a9f89a30dcd17f9d90814cff669d9ea3f7ab1"><code>b03a9f8</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3"><code>e5f3023</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr></table>




---

archive/issue_comments_394615.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm getting a lot of failures due to\n\n```\nsage: gap_reset_workspace()\n---------------------------------------------------------------------------\nUnicodeDecodeError                        Traceback (most recent call last)\n<ipython-input-1-01843f720c90> in <module>()\n----> 1 gap_reset_workspace()\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in gap_reset_workspace(max_workspace_size, verbose)\n   1577     # Create new workspace with filename WORKSPACE\n   1578     g = Gap(use_workspace_cache=False, max_workspace_size=None)\n-> 1579     g.eval('SetUserPreference(\"HistoryMaxLines\", 30)')\n   1580     from sage.tests.gap_packages import all_installed_packages\n   1581     for pkg in all_installed_packages():\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in eval(self, x, newlines, strip, split_lines, **kwds)\n    581             if not input_line.endswith(';'):\n    582                 input_line += ';'\n--> 583         result = Expect.eval(self, input_line, **kwds)\n    584         if not newlines:\n    585             result = result.replace(\"\\\\\\n\",\"\")\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                    \n   1349                 elif split_lines:\n   1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1351                                         for L in code.split('\\n') if L != ''])\n   1352                 else:\n   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in <listcomp>(.0)\n   1349                 elif split_lines:\n   1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1351                                         for L in code.split('\\n') if L != ''])\n   1352                 else:\n   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)\n    741         try:\n    742             if self._expect is None:\n--> 743                 self._start()\n    744             E = self._expect\n    745             #import pdb; pdb.set_trace()\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _start(self)\n   1272 \n   1273         # set random seed\n-> 1274         self.set_seed(self._seed)\n   1275 \n   1276     def _function_class(self):\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in set_seed(self, seed)\n   1177         if seed is None:\n   1178             seed = self.rand_seed()\n-> 1179         self.eval(\"Reset(GlobalMersenneTwister,%d)\" % seed)\n   1180         self.eval(\"Reset(GlobalRandomSource,%d)\" % seed)\n   1181         self._seed = seed\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in eval(self, x, newlines, strip, split_lines, **kwds)\n    581             if not input_line.endswith(';'):\n    582                 input_line += ';'\n--> 583         result = Expect.eval(self, input_line, **kwds)\n    584         if not newlines:\n    585             result = result.replace(\"\\\\\\n\",\"\")\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)\n   1349                 elif split_lines:\n   1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1351                                         for L in code.split('\\n') if L != ''])\n   1352                 else:\n   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in <listcomp>(.0)\n   1349                 elif split_lines:\n   1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1351                                         for L in code.split('\\n') if L != ''])\n   1352                 else:\n   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)\n    753             # garbage should be filtered out by this point); here we decode\n    754             # them (on Python 3), currently just using the default encoding\n--> 755             normal, error = bytes_to_str(normal), bytes_to_str(error)\n    756 \n    757             if len(error):\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/cpython/string.pxd in sage.cpython.string.bytes_to_str (build/cythonized/sage/cpython/string.c:1515)()\n     29 \n     30 \n---> 31 cpdef inline str bytes_to_str(b, encoding=None, errors=None):\n     32     r\"\"\"\n     33     Convert ``bytes`` to ``str``.\n\n/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/cpython/string.pxd in sage.cpython.string.bytes_to_str (build/cythonized/sage/cpython/string.c:1399)()\n     58         return <str>b\n     59     else:\n---> 60         return _cstr_to_str(<bytes>b, encoding, errors)\n     61 \n     62 \n\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 15: invalid start byte\n```",
    "created_at": "2019-03-11T14:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394615",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm getting a lot of failures due to

```
sage: gap_reset_workspace()
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
<ipython-input-1-01843f720c90> in <module>()
----> 1 gap_reset_workspace()

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in gap_reset_workspace(max_workspace_size, verbose)
   1577     # Create new workspace with filename WORKSPACE
   1578     g = Gap(use_workspace_cache=False, max_workspace_size=None)
-> 1579     g.eval('SetUserPreference("HistoryMaxLines", 30)')
   1580     from sage.tests.gap_packages import all_installed_packages
   1581     for pkg in all_installed_packages():

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in eval(self, x, newlines, strip, split_lines, **kwds)
    581             if not input_line.endswith(';'):
    582                 input_line += ';'
--> 583         result = Expect.eval(self, input_line, **kwds)
    584         if not newlines:
    585             result = result.replace("\\\n","")

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                    
   1349                 elif split_lines:
   1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1351                                         for L in code.split('\n') if L != ''])
   1352                 else:
   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in <listcomp>(.0)
   1349                 elif split_lines:
   1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1351                                         for L in code.split('\n') if L != ''])
   1352                 else:
   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)
    741         try:
    742             if self._expect is None:
--> 743                 self._start()
    744             E = self._expect
    745             #import pdb; pdb.set_trace()

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _start(self)
   1272 
   1273         # set random seed
-> 1274         self.set_seed(self._seed)
   1275 
   1276     def _function_class(self):

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in set_seed(self, seed)
   1177         if seed is None:
   1178             seed = self.rand_seed()
-> 1179         self.eval("Reset(GlobalMersenneTwister,%d)" % seed)
   1180         self.eval("Reset(GlobalRandomSource,%d)" % seed)
   1181         self._seed = seed

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in eval(self, x, newlines, strip, split_lines, **kwds)
    581             if not input_line.endswith(';'):
    582                 input_line += ';'
--> 583         result = Expect.eval(self, input_line, **kwds)
    584         if not newlines:
    585             result = result.replace("\\\n","")

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)
   1349                 elif split_lines:
   1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1351                                         for L in code.split('\n') if L != ''])
   1352                 else:
   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/expect.py in <listcomp>(.0)
   1349                 elif split_lines:
   1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1351                                         for L in code.split('\n') if L != ''])
   1352                 else:
   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/gap.py in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)
    753             # garbage should be filtered out by this point); here we decode
    754             # them (on Python 3), currently just using the default encoding
--> 755             normal, error = bytes_to_str(normal), bytes_to_str(error)
    756 
    757             if len(error):

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/cpython/string.pxd in sage.cpython.string.bytes_to_str (build/cythonized/sage/cpython/string.c:1515)()
     29 
     30 
---> 31 cpdef inline str bytes_to_str(b, encoding=None, errors=None):
     32     r"""
     33     Convert ``bytes`` to ``str``.

/home/jdemeyer/sage-python3/local/lib/python3.7/site-packages/sage/cpython/string.pxd in sage.cpython.string.bytes_to_str (build/cythonized/sage/cpython/string.c:1399)()
     58         return <str>b
     59     else:
---> 60         return _cstr_to_str(<bytes>b, encoding, errors)
     61 
     62 

UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 15: invalid start byte
```



---

archive/issue_comments_394616.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nBut why is GAP producing a byte `0x80` in its output?",
    "created_at": "2019-03-11T14:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

But why is GAP producing a byte `0x80` in its output?



---

archive/issue_comments_394617.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nwhat is the locale used ?",
    "created_at": "2019-03-11T15:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394617",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

what is the locale used ?



---

archive/issue_comments_394618.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nReplying to [@fchapoton](#comment:115):\n> what is the locale used ?\n\nI have no idea, how do I figure that out?",
    "created_at": "2019-03-11T15:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394618",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:116" align="right">comment:116</div>

Replying to [@fchapoton](#comment:115):
> what is the locale used ?

I have no idea, how do I figure that out?



---

archive/issue_comments_394619.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIn any case, Python 3 was working quite well on this system before. So it's a regression since a few betas ago.",
    "created_at": "2019-03-11T15:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394619",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

In any case, Python 3 was working quite well on this system before. So it's a regression since a few betas ago.



---

archive/issue_comments_394620.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nMaybe using\n\n```\necho $LANG\necho $LC_ALL\n```",
    "created_at": "2019-03-11T16:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394620",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Maybe using

```
echo $LANG
echo $LC_ALL
```



---

archive/issue_comments_394621.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDoes the current branch include the patches required for Cygwin ?",
    "created_at": "2019-03-13T09:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394621",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Does the current branch include the patches required for Cygwin ?



---

archive/issue_comments_394622.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@fchapoton](#comment:119):\n> Does the current branch include the patches required for Cygwin ?\n\nYes, I added the patches that @embray mentioned.\n\nI have not looked further into the GAP issue. Maybe somebody else should try it.",
    "created_at": "2019-03-13T09:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394622",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@fchapoton](#comment:119):
> Does the current branch include the patches required for Cygwin ?

Yes, I added the patches that @embray mentioned.

I have not looked further into the GAP issue. Maybe somebody else should try it.



---

archive/issue_comments_394623.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI don't see the GAP problem when I do a Python 3 build with this branch on OS X:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.7.beta7, Release Date: 2019-03-10               \u2502\n\u2502 Using Python 3.7.2. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: gap_reset_workspace()\nsage: \n```\nand\n\n```\n$ ./sage -t src/sage/interfaces/gap.py \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-03-13-13-25-14-a8d0606b.\nGit branch: t/25680/upgrade_to_python_3_7_0\nUsing --optional=dochtml,mpir,python2,sage\nDoctesting 1 file.\nsage -t src/sage/interfaces/gap.py\n    [222 tests, 6.84 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 8.3 seconds\n    cpu time: 1.9 seconds\n    cumulative wall time: 6.8 seconds\n$ ./sage -t src/sage/interfaces/gap_workspace.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-03-13-13-25-35-b861aafd.\nGit branch: t/25680/upgrade_to_python_3_7_0\nUsing --optional=dochtml,mpir,python2,sage\nDoctesting 1 file.\nsage -t src/sage/interfaces/gap_workspace.py\n    [8 tests, 0.01 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.0 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\n```",
    "created_at": "2019-03-13T20:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394623",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

I don't see the GAP problem when I do a Python 3 build with this branch on OS X:

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.7.beta7, Release Date: 2019-03-10               │
│ Using Python 3.7.2. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: gap_reset_workspace()
sage: 
```
and

```
$ ./sage -t src/sage/interfaces/gap.py 
too many failed tests, not using stored timings
Running doctests with ID 2019-03-13-13-25-14-a8d0606b.
Git branch: t/25680/upgrade_to_python_3_7_0
Using --optional=dochtml,mpir,python2,sage
Doctesting 1 file.
sage -t src/sage/interfaces/gap.py
    [222 tests, 6.84 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 8.3 seconds
    cpu time: 1.9 seconds
    cumulative wall time: 6.8 seconds
$ ./sage -t src/sage/interfaces/gap_workspace.py
too many failed tests, not using stored timings
Running doctests with ID 2019-03-13-13-25-35-b861aafd.
Git branch: t/25680/upgrade_to_python_3_7_0
Using --optional=dochtml,mpir,python2,sage
Doctesting 1 file.
sage -t src/sage/interfaces/gap_workspace.py
    [8 tests, 0.01 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.0 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds
```



---

archive/issue_comments_394624.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI have two questions here:\n\n* do we have the approval of Erik (about Windows) ?\n* does the branch pass all the tests in the current python3 target ?\n\nEDIT: I have no problem with gap either.",
    "created_at": "2019-03-21T08:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394624",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

I have two questions here:

* do we have the approval of Erik (about Windows) ?
* does the branch pass all the tests in the current python3 target ?

EDIT: I have no problem with gap either.



---

archive/issue_comments_394625.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI reduced the problem to the shell command\n\n```\necho 'Reset(GlobalMersenneTwister,500837550);' | ./sage --gap -r -b -p -T -E local/share/sage/ext/gap/sage.g\n```\nThis is outputting binary garbage which Python 3 cannot convert to a string.\n\nI don't think it's caused by this ticket, but it does prevent me from working on Python 3.",
    "created_at": "2019-03-21T10:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394625",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I reduced the problem to the shell command

```
echo 'Reset(GlobalMersenneTwister,500837550);' | ./sage --gap -r -b -p -T -E local/share/sage/ext/gap/sage.g
```
This is outputting binary garbage which Python 3 cannot convert to a string.

I don't think it's caused by this ticket, but it does prevent me from working on Python 3.



---

archive/issue_comments_394626.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nEven in an interactive GAP session, I'm getting the same binary garbage:\n\n```\n *********   GAP 4.10.0 of 01-Nov-2018\n *  GAP  *   https://www.gap-system.org\n *********   Architecture: x86_64-pc-linux-gnu-default64\n Configuration:  gmp 6.0.0, readline\n Loading the library and packages ...\n Packages:   Alnuth 3.1.0, AtlasRep 1.5.1, AutPGrp 1.10, CRISP 1.4.4, CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, GAPDoc 1.6.2, IRREDSOL 1.4, LAGUNA 3.9.0, \n             Polycyclic 2.14, PrimGrp 3.3.2, SmallGrp 1.3, Sophus 1.24, TomLib 1.2.7, TransGrp 2.0.4\n Try '??help' for help. See also '?copyright', '?cite' and '?authors'\ngap> Reset(GlobalMersenneTwister,0);\n\ufffd>[>\ufffd1P[\ufffd\\\"\ufffd2\ufffd\u02a6\\005\ufffdt>\ufffd\ufffd\ufffdT\ufffd\ufffd\\020@\ufffd8\ufffd\ufffdl\ufffd\ufffd\ufffd\\023\ufffd%\ufffd\ufffd\\023hK\ufffdq\\033\ufffd'\ufffd\\026fB\\025\ufffd\ufffdP\ufffd\ufffd\\n~otM\ufffd\ufffd^\ufffd\ufffd\ufffd\ufffd\ufffd\u00c9)\\<[\\000\\b\\<G\\rs\ufffd\ufffd\ufffd\\n\ufffd\ufffd\ufffdQ[LN\ufffd\\030\\<\ufffd\\013\ufffdL~8\\\nx*\\t\ufffdx\ufffdp\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdl\\b\ufffd\\022P`\ufffd\ufffd\ufffd^\ufffd\ufffd\\021p\ufffd=j\ufffd\ufffdI8j\ufffd\ufffdrV\\023\ufffd~N\ufffd^l\ufffd9\ufffd'\ufffd\u1fb9\ufffd@^LI[\\\nI\\027\ufffd\ufffdj\\023\ufffd\ufffd\ufffd#\\03122q\\034\ufffd\ufffd\ufffdUv\ufffd\ufffdn\ufffdp\ufffd\ufffd\\\\014\ufffdH\\b\u05ef2\ufffd9W\ufffd.\ufffdNi\\034\ufffd\ufffd\ufffd4J\ufffdTb_\ufffd\\\ufffd2\\013\ufffdI\\000JM\ufffdn6ODt`_\\007!\\023:\ufffd*\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd_*\ufffdqj4\ufffdk\u02aa\ufffd-F<pr\ufffd\ufffdH\ufffd\ufffdxR\\005\ufffduS\ufffd\\026\\n\\\n\ufffd\\027\ufffd\ufffd\ufffd'\\005FT\ufffd\ufffda&]\\024\ufffd\\026\ufffd\ufffd\ufffdd\ufffd\ufffd\ufffd#\\rK\ufffd\ufffd)k\ufffd\\\\\ufffd\ufffdL\ufffd\ufffdI\ufffd\ufffd\\033o\ufffdF\ufffd\ufffdBY D\\>\ufffd\\006tF\ufffd\ufffd\ufffd^\\032-\\n\ufffd\ufffdz\ufffd\ufffd\ufffdf\\020>\ufffd\ufffdp\ufffd\\004K<\ufffd\n                                                                                                               \ufffdlCJ\ufffdo\\0278|\\027P3\ufffdQ%D\ufffdQ\ufffd\ufffdV\\bU\n\ufffdhR-\ufffd\ufffd\ufffd]\ufffd~N\ufffd\ufffd\ufffd\\c\ufffda\ufffd\\025[O\\036\ufffd\\037MJt\ufffd\ufffd5\ufffdi\ufffd\\014\\bu=)=f\ufffd\ufffd\\034\\c\ufffd\ufffd\\>\ufffd\ufffd\ufffd\ufffd*\ufffd\ufffd\\006\ufffd\ufffd{o\\\n\\016jws\ufffd1\ufffd&we5\ufffd[\ufffdBF\u01f4zl\ufffd'\ufffd_Q\ufffd\\021[x\ufffdR[\ufffd\\021\\t\ufffd\ufffd\ufffd\ufffd7F\u02f50[N\\t\ufffd\ufffd\ufffdU\ufffd/\ufffd\ufffdUP\\005\\t\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\\024\ufffd\ufffd\ufffdI\u05e0L(\ufffd\ufffd7\ufffd\ufffd9\ufffd\ufffdl`\ufffd\ufffdL\ufffd\\027\ufffdP\u00e8\ufffd8\ufffdTdO,r\ufffd\ufffd`RY\\\\W\\026s\ufffdh]\\c\ufffdj|\ufffdd\ufffd\ufffd\ufffd\\016\ufffd8\ufffd@\\\n\ufffd\\027\ufffd\\006\ufffd2.\ufffd\\005\ufffd\\n6\ufffd\ufffd\ufffd7`\\005[-)\\037\ufffdN4\ufffd=\ufffdW\ufffd\ufffdN\ufffd+\ufffd\\025\ufffd2a\ufffd\ufffd\\037T\u0374\ufffd\\0164:*k\ufffd\ufffdz\ufffd\\c,v\u0539\ufffd\ufffd&,\\025\\<&>Pk\n\ufffd4\ufffd\ufffd\\005\ufffd\ufffd\ufffd\ufffdI_\ufffd\ufffdQ\ufffdZ\ufffd\ufffd\ufffd\ufffdf(2\ufffd\\Iw\ufffd\ufffd\\023H\ufffdp\ufffd\\033\\c\\\\\\016\ufffd\ufffd\ufffd\ufffd\ufffdPTd\ufffdC\\020\ufffd\ufffd\uff80\ufffd8b\\025.\ufffd\ufffd\ufffd\ufffd\\034qc\ufffd\ufffd\\037?\ufffd\ufffd\ufffd)\ufffd6'Kd\ufffd\\033$\ufffd\ufffdMz\ufffd\ufffd\ufffd!t;Njn\ufffdwh\u02145\ufffd#D_\ufffd\ufffd \ufffd!<\u063e\u03db\\031O\ufffd\ufffd\ufffd\\\n\ufffd\ufffd2\ufffd,h8=\\blJ$\ufffd\ufffd\ufffd\ufffd\u036b\ufffd\ufffd)\ufffd\ufffd\ufffd\\031-<4\ufffd\ufffdz\ufffd\ufffd\ufffddj\\<\ufffd\\t<;\ufffdg\ufffd&u\ufffd<GS\\027\ufffd2E\ufffd|[\ufffd0{\\t\ufffdK\ufffd\\022}\n                                                                             \\030\ufffd\ufffd\\026cW\ufffde\ufffd\\020\ufffd\ufffd\ufffdB\ufffd\ufffdC\ufffd?]k&\ufffd\ufffd`\ufffd\\026\ufffd!\\017\\>\\ru5\ufffdj) \ufffd\u072e\ufffdY\\005\ufffd\ufffd\ufffd \\004\\\n\ufffd\ufffd\ufffdC\ufffd7        \ufffd\\>n\ufffdo\u04a4\\\\\\000\ufffd\\>,\ufffd\\026dJ\ufffdn)S#!l\ufffd/\ufffd8?\ufffd7Q\\004Jt\ufffd\u026d7\ufffd\\>*B`jmT\ufffdg\ufffd\ufffd\\036S|]\\006\\033\ufffd\\>|\\007\\004\ufffd\\037\\033                  \ufffdEV\ufffd&\ufffd\ufffd\\bS\ufffdP\ufffdR\\\n/\u07fe\ufffd\ufffd\u0262\ufffd\ufffda\\031{i\ufffd\\r\\020N\\030\ufffd\ufffd\\032)\ufffd&\ufffd\ufffd\\\"{\ufffd\u05be\ufffd.\ufffd\ufffd\ufffd~,\ufffd\ufffd\\034\ufffd\ufffd\ufffd\ufffdI6\\030\\034f\ufffd\\032\ufffd\ufffd\ufffd\ufffd(4\ufffd^`m&w\ufffd\ufffd\\000\ufffdD\\016,\\b\ufffd[7/ \ufffd\\025`\\030s@ZW;\ufffd\\024\ufffd\ufffd\ufffd\u00e6M\u04af4\ufffdHc\ufffd\\033\ufffd\\\"\ufffd\ufffd\\006\\<O-\ufffdFP\ud75b-\ufffdA\ufffd\ufffdKW2>p\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdq\\b\ufffd\\022\ufffdJ*\\031P\ufffd\ufffd^\ufffd\ufffd\ufffdyJ\ufffd\ufffd\ufffd\ufffd\ufffd\\016H\ufffdC9\ufffd,|\ufffdj\ufffd?\ufffd[U\ufffd\ufffd\\c\\                            \ufffd*\ufffdj\ufffd\ufffd\ufffdW[\\023|`\ufffd\ufffd.\ufffd\ufffd\ufffdh\ufffd9e{sy\ufffd\\rw\ufffd\ufffd\\b4\ufffd[z\\023\ufffd\ufffd\ufffdm\\022\ufffd\\027\u022f[\u0429O\u017e\\\n\\036\ufffd\u07be> J\\b\ufffdG\ufffd4;\ufffd\\r\ufffd\ufffdW\\022i\ufffd\ufffd\ufffdzs\ufffd\ufffd\ufffdzW=\\004\ufffd\ufffd\ufffdyT\ufffd\\007\ufffd\ufffd\ufffd\ufffd\ufffdLr30\ufffd\ufffd\\005\ufffdv\ufffd%D\ufffd\\025\ufffd\\032\\037\\c\\b\n                      1\ufffdFt\ufffd1\ufffd-\ufffd\\033[Z\\035\ufffd\ufffdt\ufffd\ufffd\ufffd\\030YY\ufffd-V\ufffdo\ufffdg\ufffd\ufffd\ufffdq\\007Lb\ufffd'J.R\ufffd4jC\ufffdC\ufffd\ufffd\ufffdU%\\>v\u01b8%C]\ufffd<\ufffd\ufffd[iK#8.\ufffdj>O1T\ufffd\ufffd\\cl\ufffd\ufffd[\ufffd\ufffd\ufffd\ufffd\ufffdB?_\\0277\ufffd\\004\\0275\ufffd\\000d\ufffd\ufffd\ufffdX\\\n\\014\\013\ufffd\\032ijv\ufffd.u\ufffd\ufffd\\016+\ufffd\ufffd\\017\ufffd:_\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdes\u037a\\023\ufffdH\\<z\ufffd\\n\\023E\ufffd\ufffd\ufffd\\r\ufffd\ufffd\ufffd\ufffd\\024k\ufffd\\n\ufffdW\ufffdT(\ufffd\ufffd\ufffd\ufffdk8\\032rJ|=8\\\"\ufffd|\ufffd\\004gU\ufffd\u05ed\ufffd\ufffd\ufffd\ufffdL=;\ufffdow\ufffd\u04be`:,\\>\ufffdmdQ-\u052a\ufffdBqy}\ufffd-\ufffd\ufffdbA{p\\<\\\n\\000\\0001234\" ]\n```",
    "created_at": "2019-03-21T10:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394626",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Even in an interactive GAP session, I'm getting the same binary garbage:

```
 *********   GAP 4.10.0 of 01-Nov-2018
 *  GAP  *   https://www.gap-system.org
 *********   Architecture: x86_64-pc-linux-gnu-default64
 Configuration:  gmp 6.0.0, readline
 Loading the library and packages ...
 Packages:   Alnuth 3.1.0, AtlasRep 1.5.1, AutPGrp 1.10, CRISP 1.4.4, CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, GAPDoc 1.6.2, IRREDSOL 1.4, LAGUNA 3.9.0, 
             Polycyclic 2.14, PrimGrp 3.3.2, SmallGrp 1.3, Sophus 1.24, TomLib 1.2.7, TransGrp 2.0.4
 Try '??help' for help. See also '?copyright', '?cite' and '?authors'
gap> Reset(GlobalMersenneTwister,0);
�>[>�1P[�\"�2�ʦ\005�t>���T��\020@�8��l���\023�%��\023hK�q\033�'�\026fB\025��P��\n~otM��^�����É)\<[\000\b\<G\rs���\n���Q[LN�\030\<�\013�L~8\
x*\t�x�p������l\b�\022P`���^��\021p�=j��I8j��rV\023�~N�^l�9�'�Ᾱ�@^LI[\
I\027��j\023���#\03122q\034���Uv��n�p��\\014�H\bׯ2�9W�.�Ni\034���4J�Tb_�\�2\013�I\000JM�n6ODt`_\007!\023:�*�������_*�qj4�kʪ�-F<pr��H��xR\005�uS�\026\n\
�\027���'\005FT��a&]\024�\026���d���#\rK��)k�\\��L��I��\033o�F��BY D\>�\006tF���^\032-\n��z���f\020>��p�\004K<�
                                                                                                               �lCJ�o\0278|\027P3�Q%D�Q��V\bU
�hR-���]�~N���\c�a�\025[O\036�\037MJt��5�i�\014\bu=)=f��\034\c��\>����*��\006��{o\
\016jws�1�&we5�[�BFǴzl�'�_Q�\021[x�R[�\021\t����7F˵0[N\t���U�/��UP\005\t������\024���IנL(��7��9��l`��L�\027�Pè�8�TdO,r��`RY\\W\026s�h]\c�j|�d���\016�8�@\
�\027�\006�2.�\005�\n6���7`\005[-)\037�N4�=�W��N�+�\025�2a��\037Tʹ�\0164:*k��z�\c,vԹ��&,\025\<&>Pk
�4��\005����I_��Q�Z����f(2�\Iw��\023H�p�\033\c\\\016�����PTd�C\020��ﾀ�8b\025.����\034qc��\037?���)�6'Kd�\033$��Mz���!t;Njn�whȔ5�#D_�� �!<ؾϛ\031O���\
��2�,h8=\blJ$����ͫ��)���\031-<4��z���dj\<�\t<;�g�&u�<GS\027�2E�|[�0{\t�K�\022}
                                                                             \030��\026cW�e�\020���B��C�?]k&��`�\026�!\017\>\ru5�j) �ܮ�Y\005��� \004\
���C�7        �\>n�oҤ\\\000�\>,�\026dJ�n)S#!l�/�8?�7Q\004Jt�ɭ7�\>*B`jmT�g��\036S|]\006\033�\>|\007\004�\037\033                  �EV�&��\bS�P�R\
/߾��ɢ��a\031{i�\r\020N\030��\032)�&��\"{�־�.���~,��\034����I6\030\034f�\032����(4�^`m&w��\000�D\016,\b�[7/ �\025`\030s@ZW;�\024���æMү4�Hc�\033�\"��\006\<O-�FP흛-�A��KW2>p��������q\b�\022�J*\031P��^���yJ�����\016H�C9�,|�j�?�[U��\c\                            �*�j���W[\023|`��.���h�9e{sy�\rw��\b4�[z\023���m\022�\027ȯ[ЩOž\
\036�޾> J\b�G�4;�\r��W\022i���zs���zW=\004���yT�\007�����Lr30��\005�v�%D�\025�\032\037\c\b
                      1�Ft�1�-�\033[Z\035��t���\030YY�-V�o�g���q\007Lb�'J.R�4jC�C���U%\>vƸ%C]�<��[iK#8.�j>O1T��\cl��[�����B?_\0277�\004\0275�\000d���X\
\014\013�\032ijv�.u��\016+��\017�:_������esͺ\023�H\<z�\n\023E���\r����\024k�\n�W�T(����k8\032rJ|=8\"�|�\004gU�׭����L=;�ow�Ҿ`:,\>�mdQ-Ԫ�Bqy}�-��bA{p\<\
\000\0001234" ]
```



---

archive/issue_comments_394627.json:
```json
{
    "body": "Dependencies: **#27523**",
    "created_at": "2019-03-21T11:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394627",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27523**



---

archive/issue_comments_394628.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f74ecc034966b6676ec2c9da3cfff25aa84202ec\"><code>f74ecc0</code></a></td><td><code>GAP: silence output from Reset(GlobalMersenneTwister)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93dfaafb88df4022a7e2b2d1f7668ff6be515e30\"><code>93dfaaf</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/700e51310fa557690ba1a199fc1086cf98ebfac3\"><code>700e513</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c\"><code>10442de</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr></table>\n",
    "created_at": "2019-03-21T11:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394628",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f74ecc034966b6676ec2c9da3cfff25aa84202ec"><code>f74ecc0</code></a></td><td><code>GAP: silence output from Reset(GlobalMersenneTwister)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93dfaafb88df4022a7e2b2d1f7668ff6be515e30"><code>93dfaaf</code></a></td><td><code>Upgrade to Python 3.7.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/700e51310fa557690ba1a199fc1086cf98ebfac3"><code>700e513</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c"><code>10442de</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr></table>




---

archive/issue_comments_394629.json:
```json
{
    "body": "Changed commit from **[`e5f3023`](https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3)** to **[`10442de`](https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c)**",
    "created_at": "2019-03-21T11:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e5f3023`](https://github.com/sagemath/sagetrac-mirror/commit/e5f3023841c01b369458244ccd7821b8911323e3)** to **[`10442de`](https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c)**



---

archive/issue_comments_394630.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@fchapoton](#comment:122):\n> I have two questions here:\n> \n> * do we have the approval of Erik (about Windows) ?\n> * does the branch pass all the tests in the current python3 target ?\n> \n> EDIT: I have no problem with gap either.\n\nFor myself, I've been waiting until some of the other issues with this branch are worked out--i.e. that it's otherwise good-to-go on Linux.\n\nBut if you think that's nearly the case I should start now, since building on Windows takes some time.",
    "created_at": "2019-03-21T12:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394630",
    "user": "https://github.com/embray"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@fchapoton](#comment:122):
> I have two questions here:
> 
> * do we have the approval of Erik (about Windows) ?
> * does the branch pass all the tests in the current python3 target ?
> 
> EDIT: I have no problem with gap either.

For myself, I've been waiting until some of the other issues with this branch are worked out--i.e. that it's otherwise good-to-go on Linux.

But if you think that's nearly the case I should start now, since building on Windows takes some time.



---

archive/issue_comments_394631.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI have got 3 doctests failure on the python3 test-suite:\n\n```\nsage -t --long src/sage/interacts/debugger.py  # 1 doctest failed\nsage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed\nsage -t --long src/sage/parallel/map_reduce.py  # Timed out after testing finished\n```\n\n**EDIT**: in particular, the \"abort pool operation\" is not fixed as claimed.",
    "created_at": "2019-03-21T13:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394631",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

I have got 3 doctests failure on the python3 test-suite:

```
sage -t --long src/sage/interacts/debugger.py  # 1 doctest failed
sage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed
sage -t --long src/sage/parallel/map_reduce.py  # Timed out after testing finished
```

**EDIT**: in particular, the "abort pool operation" is not fixed as claimed.



---

archive/issue_comments_394632.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@fchapoton](#comment:128):\n> I have got 3 doctests failure on the python3 test-suite:\n> \n> ```\n> sage -t --long src/sage/interacts/debugger.py  # 1 doctest failed\n> sage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed\n> sage -t --long src/sage/parallel/map_reduce.py  # Timed out after testing finished\n> ```\n\nThe first one I don't know about.\n\nThe second one I think Jeroen just fixed: https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c\n\nThe third one is a little concerning: That module tends to have some random failures in it and I have made a few fixes to it in the past.  Nevertheless apparently it still has bugs. Though I'm surprised it's timing out (albeit after testing finished, meaning it's probably hanging during interpreter shutdown...",
    "created_at": "2019-03-21T13:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394632",
    "user": "https://github.com/embray"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@fchapoton](#comment:128):
> I have got 3 doctests failure on the python3 test-suite:
> 
> ```
> sage -t --long src/sage/interacts/debugger.py  # 1 doctest failed
> sage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed
> sage -t --long src/sage/parallel/map_reduce.py  # Timed out after testing finished
> ```

The first one I don't know about.

The second one I think Jeroen just fixed: https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c

The third one is a little concerning: That module tends to have some random failures in it and I have made a few fixes to it in the past.  Nevertheless apparently it still has bugs. Though I'm surprised it's timing out (albeit after testing finished, meaning it's probably hanging during interpreter shutdown...



---

archive/issue_comments_394633.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\non the very latest branch, I still get\n\n```\nsage -t --long src/sage_setup/docbuild/__init__.py\n**********************************************************************\nFile \"src/sage_setup/docbuild/__init__.py\", line 105, in sage_setup.docbuild.builder_helper\nFailed example:\n    try:\n        build_many(build_ref_doc, [(\"docname\", \"en\", \"html\", {})])\n    except Exception as E:\n        \"Non-exception during docbuild: abort pool operation\" in E\nException raised:\n    multiprocessing.pool.RemoteTraceback: \n    \"\"\"\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 134, in f\n        runsphinx()\n      File \"<doctest sage_setup.docbuild.builder_helper[3]>\", line 2, in raiseBaseException\n        raise BaseException(\"abort pool operation\")\n    BaseException: abort pool operation\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py\", line 121, in worker\n        result = (True, func(*args, **kwds))\n      File \"/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py\", line 44, in mapstar\n        return list(map(*args))\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 80, in build_ref_doc\n        getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 761, in _wrapper\n        getattr(DocBuilder, build_type)(self, *args, **kwds)\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 143, in f\n        raise Exception(\"Non-exception during docbuild: %s\"%(e,), e)\n    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))\n    \"\"\"\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"<doctest sage_setup.docbuild.builder_helper[7]>\", line 2, in <module>\n        build_many(build_ref_doc, [(\"docname\", \"en\", \"html\", {})])\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 289, in build_many\n        ret = x.get(99999)\n      File \"/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py\", line 657, in get\n        raise self._value\n    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/chapoton/sage3/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.docbuild.builder_helper[7]>\", line 4, in <module>\n        \"Non-exception during docbuild: abort pool operation\" in E\n    TypeError: argument of type 'Exception' is not iterable\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage_setup.docbuild.builder_helper\n    [35 tests, 1 failure, 0.49 s]\n----------------------------------------------------------------------\nsage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nand\n\n```\nsage -t --long src/sage/interacts/debugger.py\n**********************************************************************\nFile \"src/sage/interacts/debugger.py\", line 102, in sage.interacts.debugger.Debug.curframe\nFailed example:\n    d.curframe()\nExpected:\n    <frame object at 0x...>\nGot:\n    <repr(<sage.interfaces.sage0.SageElement at 0x7f0c32222fc0>) failed: TypeError: replace() argument 2 must be str, not SageFunction>\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.interacts.debugger.Debug.curframe\n    [23 tests, 1 failure, 1.36 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/interacts/debugger.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nEDIT: The failing doctest in debugger works fine when run interactively.",
    "created_at": "2019-03-21T13:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394633",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">comment:0</div>

on the very latest branch, I still get

```
sage -t --long src/sage_setup/docbuild/__init__.py
**********************************************************************
File "src/sage_setup/docbuild/__init__.py", line 105, in sage_setup.docbuild.builder_helper
Failed example:
    try:
        build_many(build_ref_doc, [("docname", "en", "html", {})])
    except Exception as E:
        "Non-exception during docbuild: abort pool operation" in E
Exception raised:
    multiprocessing.pool.RemoteTraceback: 
    """
    Traceback (most recent call last):
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 134, in f
        runsphinx()
      File "<doctest sage_setup.docbuild.builder_helper[3]>", line 2, in raiseBaseException
        raise BaseException("abort pool operation")
    BaseException: abort pool operation

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py", line 121, in worker
        result = (True, func(*args, **kwds))
      File "/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py", line 44, in mapstar
        return list(map(*args))
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 80, in build_ref_doc
        getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 761, in _wrapper
        getattr(DocBuilder, build_type)(self, *args, **kwds)
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 143, in f
        raise Exception("Non-exception during docbuild: %s"%(e,), e)
    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))
    """

    The above exception was the direct cause of the following exception:

    Traceback (most recent call last):
      File "<doctest sage_setup.docbuild.builder_helper[7]>", line 2, in <module>
        build_many(build_ref_doc, [("docname", "en", "html", {})])
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 289, in build_many
        ret = x.get(99999)
      File "/home/chapoton/sage3/local/lib/python3.7/multiprocessing/pool.py", line 657, in get
        raise self._value
    Exception: ('Non-exception during docbuild: abort pool operation', BaseException('abort pool operation'))

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/chapoton/sage3/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.docbuild.builder_helper[7]>", line 4, in <module>
        "Non-exception during docbuild: abort pool operation" in E
    TypeError: argument of type 'Exception' is not iterable
**********************************************************************
1 item had failures:
   1 of   9 in sage_setup.docbuild.builder_helper
    [35 tests, 1 failure, 0.49 s]
----------------------------------------------------------------------
sage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed
----------------------------------------------------------------------
```
and

```
sage -t --long src/sage/interacts/debugger.py
**********************************************************************
File "src/sage/interacts/debugger.py", line 102, in sage.interacts.debugger.Debug.curframe
Failed example:
    d.curframe()
Expected:
    <frame object at 0x...>
Got:
    <repr(<sage.interfaces.sage0.SageElement at 0x7f0c32222fc0>) failed: TypeError: replace() argument 2 must be str, not SageFunction>
**********************************************************************
1 item had failures:
   1 of   4 in sage.interacts.debugger.Debug.curframe
    [23 tests, 1 failure, 1.36 s]
----------------------------------------------------------------------
sage -t --long src/sage/interacts/debugger.py  # 1 doctest failed
----------------------------------------------------------------------
```

EDIT: The failing doctest in debugger works fine when run interactively.



---

archive/issue_comments_394634.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHere is fix for the docbuild doctest, please add to your branch if you agree:\n\n```\n-- a/src/sage_setup/docbuild/__init__.py\n+++ b/src/sage_setup/docbuild/__init__.py\n@@ -105,7 +105,7 @@ def builder_helper(type):\n         sage: try:\n         ....:     build_many(build_ref_doc, [(\"docname\", \"en\", \"html\", {})])\n         ....: except Exception as E:\n-        ....:     \"Non-exception during docbuild: abort pool operation\" in E\n+        ....:     \"Non-exception during docbuild: abort pool operation\" in str(E)\n         True\n     \"\"\"\n     def f(self, *args, **kwds):\n```",
    "created_at": "2019-03-21T14:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394634",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Here is fix for the docbuild doctest, please add to your branch if you agree:

```
-- a/src/sage_setup/docbuild/__init__.py
+++ b/src/sage_setup/docbuild/__init__.py
@@ -105,7 +105,7 @@ def builder_helper(type):
         sage: try:
         ....:     build_many(build_ref_doc, [("docname", "en", "html", {})])
         ....: except Exception as E:
-        ....:     "Non-exception during docbuild: abort pool operation" in E
+        ....:     "Non-exception during docbuild: abort pool operation" in str(E)
         True
     """
     def f(self, *args, **kwds):
```



---

archive/issue_comments_394635.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01\"><code>7050a4b</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr></table>\n",
    "created_at": "2019-03-21T14:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394635",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01"><code>7050a4b</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr></table>




---

archive/issue_comments_394636.json:
```json
{
    "body": "Changed commit from **[`10442de`](https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c)** to **[`7050a4b`](https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01)**",
    "created_at": "2019-03-21T14:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394636",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10442de`](https://github.com/sagemath/sagetrac-mirror/commit/10442de1f848010ec373ea5afa9332885ffaf59c)** to **[`7050a4b`](https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01)**



---

archive/issue_comments_394637.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045\"><code>eed6a11</code></a></td><td><code>py3: fix for repr of frame objects</code></td></tr></table>\n",
    "created_at": "2019-03-21T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394637",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045"><code>eed6a11</code></a></td><td><code>py3: fix for repr of frame objects</code></td></tr></table>




---

archive/issue_comments_394638.json:
```json
{
    "body": "Changed commit from **[`7050a4b`](https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01)** to **[`eed6a11`](https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045)**",
    "created_at": "2019-03-21T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394638",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7050a4b`](https://github.com/sagemath/sagetrac-mirror/commit/7050a4b5d585c3b775244964678eeea546069e01)** to **[`eed6a11`](https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045)**



---

archive/issue_comments_394639.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI'm now down to one failure: the timeout in `map_reduce.py`",
    "created_at": "2019-03-21T14:22:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394639",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

I'm now down to one failure: the timeout in `map_reduce.py`



---

archive/issue_comments_394640.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe debugger failure is still there for me.",
    "created_at": "2019-03-21T14:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394640",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

The debugger failure is still there for me.



---

archive/issue_comments_394641.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nReplying to [@fchapoton](#comment:135):\n> The debugger failure is still there for me.\n\nCan you post the complete output of `./sage -t --long src/sage/interacts/debugger.py`?\n\nI get\n\n```\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2019-03-21-15-27-35-0a07308a.\nGit branch: HEAD\nUsing --optional=dochtml,memlimit,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/interacts/debugger.py\n    [23 tests, 2.38 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 2.4 seconds\n    cpu time: 0.1 seconds\n    cumulative wall time: 2.4 seconds\n```",
    "created_at": "2019-03-21T14:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394641",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:136" align="right">comment:136</div>

Replying to [@fchapoton](#comment:135):
> The debugger failure is still there for me.

Can you post the complete output of `./sage -t --long src/sage/interacts/debugger.py`?

I get

```
too few successful tests, not using stored timings
Running doctests with ID 2019-03-21-15-27-35-0a07308a.
Git branch: HEAD
Using --optional=dochtml,memlimit,mpir,python2,sage
Doctesting 1 file.
sage -t --long src/sage/interacts/debugger.py
    [23 tests, 2.38 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 2.4 seconds
    cpu time: 0.1 seconds
    cumulative wall time: 2.4 seconds
```



---

archive/issue_comments_394642.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI posted it already, but here it is again:\n\n```\n./sage -t --long src/sage/interacts/debugger.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-03-21-15-31-58-e3b050c6.\nGit branch: python3.7\nUsing --optional=dochtml,fricas,gfortran,memlimit,mpir,normaliz,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/interacts/debugger.py\n**********************************************************************\nFile \"src/sage/interacts/debugger.py\", line 102, in sage.interacts.debugger.Debug.curframe\nFailed example:\n    d.curframe()\nExpected:\n    <frame ...>\nGot:\n    <repr(<sage.interfaces.sage0.SageElement at 0x7f773c42f870>) failed: TypeError: replace() argument 2 must be str, not SageFunction>\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.interacts.debugger.Debug.curframe\n    [23 tests, 1 failure, 1.38 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/interacts/debugger.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 1.4 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 1.4 seconds\n```",
    "created_at": "2019-03-21T14:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394642",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

I posted it already, but here it is again:

```
./sage -t --long src/sage/interacts/debugger.py
too many failed tests, not using stored timings
Running doctests with ID 2019-03-21-15-31-58-e3b050c6.
Git branch: python3.7
Using --optional=dochtml,fricas,gfortran,memlimit,mpir,normaliz,python2,sage
Doctesting 1 file.
sage -t --long src/sage/interacts/debugger.py
**********************************************************************
File "src/sage/interacts/debugger.py", line 102, in sage.interacts.debugger.Debug.curframe
Failed example:
    d.curframe()
Expected:
    <frame ...>
Got:
    <repr(<sage.interfaces.sage0.SageElement at 0x7f773c42f870>) failed: TypeError: replace() argument 2 must be str, not SageFunction>
**********************************************************************
1 item had failures:
   1 of   4 in sage.interacts.debugger.Debug.curframe
    [23 tests, 1 failure, 1.38 s]
----------------------------------------------------------------------
sage -t --long src/sage/interacts/debugger.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 1.4 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 1.4 seconds
```



---

archive/issue_comments_394643.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI have no idea why that's failing for you...",
    "created_at": "2019-03-21T14:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394643",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I have no idea why that's failing for you...



---

archive/issue_comments_394644.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nLet me try on another machine (will take time)",
    "created_at": "2019-03-21T14:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394644",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Let me try on another machine (will take time)



---

archive/issue_comments_394645.json:
```json
{
    "body": "Changed commit from **[`eed6a11`](https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045)** to **[`919ca41`](https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324)**",
    "created_at": "2019-03-21T14:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eed6a11`](https://github.com/sagemath/sagetrac-mirror/commit/eed6a11a07b5efdff43ef711046e07e95fe5a045)** to **[`919ca41`](https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324)**



---

archive/issue_comments_394646.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324\"><code>919ca41</code></a></td><td><code>parallel/map_reduce.py times out</code></td></tr></table>\n",
    "created_at": "2019-03-21T14:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324"><code>919ca41</code></a></td><td><code>parallel/map_reduce.py times out</code></td></tr></table>




---

archive/issue_comments_394647.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis last commit is probably controversial, but it's the best I can do. I have no idea what's going on in `map_reduce.py`.",
    "created_at": "2019-03-21T14:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394647",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

This last commit is probably controversial, but it's the best I can do. I have no idea what's going on in `map_reduce.py`.



---

archive/issue_comments_394648.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAs far as I'm concerned, this is now actually ready for review.",
    "created_at": "2019-03-21T15:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394648",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

As far as I'm concerned, this is now actually ready for review.



---

archive/issue_comments_394649.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nCould we instead tag #py2 the doctest that triggers the time-out ?",
    "created_at": "2019-03-21T15:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394649",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

Could we instead tag #py2 the doctest that triggers the time-out ?



---

archive/issue_comments_394650.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nReplying to [@fchapoton](#comment:143):\n> Could we instead tag #py2 the doctest that triggers the time-out ?\n\nI'd rather not do that. For me, `# py2` means doctests that are clearly meant to pass only on Python 2; where the fact that it only works on Python 2 is not considered a bug.",
    "created_at": "2019-03-21T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394650",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:144" align="right">comment:144</div>

Replying to [@fchapoton](#comment:143):
> Could we instead tag #py2 the doctest that triggers the time-out ?

I'd rather not do that. For me, `# py2` means doctests that are clearly meant to pass only on Python 2; where the fact that it only works on Python 2 is not considered a bug.



---

archive/issue_comments_394651.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThen we should fix that bug, and not hide it under the carpet.",
    "created_at": "2019-03-21T15:38:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394651",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

Then we should fix that bug, and not hide it under the carpet.



---

archive/issue_comments_394652.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n`# py2` is hiding it under the carpet. Removing it from `python3-known-passing.txt` is just deferring it to another time.",
    "created_at": "2019-03-21T15:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394652",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

`# py2` is hiding it under the carpet. Removing it from `python3-known-passing.txt` is just deferring it to another time.



---

archive/issue_comments_394653.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI get the exact same failure in `src/sage/interacts/debugger.py` in another machine. So maybe this should not be neglected.",
    "created_at": "2019-03-21T16:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394653",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

I get the exact same failure in `src/sage/interacts/debugger.py` in another machine. So maybe this should not be neglected.



---

archive/issue_comments_394654.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI believe you, but I cannot reproduce the failure in `src/sage/interacts/debugger.py`",
    "created_at": "2019-03-21T16:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394654",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I believe you, but I cannot reproduce the failure in `src/sage/interacts/debugger.py`



---

archive/issue_comments_394655.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe appropriate tests pass for me on OS X. (I don't see a failure in `interacts/debugger.py`, either.)",
    "created_at": "2019-03-21T19:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394655",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

The appropriate tests pass for me on OS X. (I don't see a failure in `interacts/debugger.py`, either.)



---

archive/issue_comments_394656.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nSo maybe it's time for Erik to launch the Windows build..",
    "created_at": "2019-03-21T19:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394656",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">comment:0</div>

So maybe it's time for Erik to launch the Windows build..



---

archive/issue_comments_394657.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHopefully I'll have time tomorrow but not sure. Kinda crazy day. Monday otherwise.",
    "created_at": "2019-03-21T19:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394657",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

Hopefully I'll have time tomorrow but not sure. Kinda crazy day. Monday otherwise.



---

archive/issue_comments_394658.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWell, it compiled fine at least (which was to be expected since the necessary patches are applied) but I haven't had a chance to run any tests yet.",
    "created_at": "2019-03-22T12:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394658",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Well, it compiled fine at least (which was to be expected since the necessary patches are applied) but I haven't had a chance to run any tests yet.



---

archive/issue_comments_394659.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIf you agree to deprecate the whole module `src/sage/interacts/debugger.py` in #27531, then we could easily mark the failing test as `# py2` and not bother with it anymore.",
    "created_at": "2019-03-22T21:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394659",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

If you agree to deprecate the whole module `src/sage/interacts/debugger.py` in #27531, then we could easily mark the failing test as `# py2` and not bother with it anymore.



---

archive/issue_comments_394660.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nReplying to [@fchapoton](#comment:143):\n> Could we instead tag #py2 the doctest that triggers the time-out ?\n\nYour suggestion of checking which specific doctest triggers the time-out is a good one. I'll try that now.",
    "created_at": "2019-03-22T21:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394660",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:154" align="right">comment:154</div>

Replying to [@fchapoton](#comment:143):
> Could we instead tag #py2 the doctest that triggers the time-out ?

Your suggestion of checking which specific doctest triggers the time-out is a good one. I'll try that now.



---

archive/issue_comments_394661.json:
```json
{
    "body": "Changed commit from **[`919ca41`](https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324)** to **[`2bf16e8`](https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b)**",
    "created_at": "2019-03-22T22:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`919ca41`](https://github.com/sagemath/sagetrac-mirror/commit/919ca41c9ad361af2588cc5a25d654269e6cc324)** to **[`2bf16e8`](https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b)**



---

archive/issue_comments_394662.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e646670a8d00eaecffa305a2a49e0c4ebd2c7957\"><code>e646670</code></a></td><td><code>Mark a test for deprecated functionality as Python 2 only</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b\"><code>2bf16e8</code></a></td><td><code>Mark a few tests as known bug (#27537)</code></td></tr></table>\n",
    "created_at": "2019-03-22T22:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e646670a8d00eaecffa305a2a49e0c4ebd2c7957"><code>e646670</code></a></td><td><code>Mark a test for deprecated functionality as Python 2 only</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b"><code>2bf16e8</code></a></td><td><code>Mark a few tests as known bug (#27537)</code></td></tr></table>




---

archive/issue_comments_394663.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNew attempt, hopefully more acceptable. Still needs to be tested.",
    "created_at": "2019-03-22T22:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394663",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

New attempt, hopefully more acceptable. Still needs to be tested.



---

archive/issue_comments_394664.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis passes `make ptest-python3` for me.",
    "created_at": "2019-03-23T10:20:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394664",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

This passes `make ptest-python3` for me.



---

archive/issue_comments_394665.json:
```json
{
    "body": "<div id=\"comment:158\" align=\"right\">comment:158</div>\n\nReplying to [@jdemeyer](#comment:157):\n> This passes `make ptest-python3` for me.\n\nSame here.",
    "created_at": "2019-03-23T11:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394665",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:158" align="right">comment:158</div>

Replying to [@jdemeyer](#comment:157):
> This passes `make ptest-python3` for me.

Same here.



---

archive/issue_comments_394666.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI used the updated version of `src/ext/doctest/python3-known-passing.txt` from #27519, and I also added \"--long\" to the appropriate line of `Makefile` (why don't we have this option already?). Tests passed.",
    "created_at": "2019-03-23T18:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394666",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I used the updated version of `src/ext/doctest/python3-known-passing.txt` from #27519, and I also added "--long" to the appropriate line of `Makefile` (why don't we have this option already?). Tests passed.



---

archive/issue_comments_394667.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nSo, is anybody willing to give positive review here?",
    "created_at": "2019-03-23T19:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394667",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

So, is anybody willing to give positive review here?



---

archive/issue_comments_394668.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nShould we wait for Erik's green light ?",
    "created_at": "2019-03-23T19:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394668",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Should we wait for Erik's green light ?



---

archive/issue_comments_394669.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCame home after a weekend afk to find that although python3 succeeded in building, the build stopped at cysignals with a strange problem. I think there might have been something else odd going on with my build though so I'll start it again and then run the tests.",
    "created_at": "2019-03-25T09:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394669",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Came home after a weekend afk to find that although python3 succeeded in building, the build stopped at cysignals with a strange problem. I think there might have been something else odd going on with my build though so I'll start it again and then run the tests.



---

archive/issue_events_355144.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355144"
}
```



---

archive/issue_events_355145.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355145"
}
```



---

archive/issue_comments_394670.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394670",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_394671.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSeeing lots of\n\n```\n[dochtml] [misc     ] loading pickled environment... failed: 'str' object has no attribute '__dict__'\n```\n\nwhen building the docs.  Probably not directly related to this ticket, but worth making note of.",
    "created_at": "2019-03-25T20:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394671",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

Seeing lots of

```
[dochtml] [misc     ] loading pickled environment... failed: 'str' object has no attribute '__dict__'
```

when building the docs.  Probably not directly related to this ticket, but worth making note of.



---

archive/issue_comments_394672.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-**Tarball**: https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz\n+**Tarball**: https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz\n``````\n",
    "created_at": "2019-03-26T09:24:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394672",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-**Tarball**: https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz
+**Tarball**: https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz
``````




---

archive/issue_events_355146.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T09:24:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355146"
}
```



---

archive/issue_events_355147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T09:24:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355147"
}
```



---

archive/issue_comments_394673.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPython 3.7.3 was just released, so we might as well upgrade to that.",
    "created_at": "2019-03-26T09:24:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394673",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Python 3.7.3 was just released, so we might as well upgrade to that.



---

archive/issue_comments_394674.json:
```json
{
    "body": "Changed commit from **[`2bf16e8`](https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b)** to **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**",
    "created_at": "2019-03-26T09:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2bf16e8`](https://github.com/sagemath/sagetrac-mirror/commit/2bf16e852f564ab6f351eff364e739499216bf0b)** to **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**



---

archive/issue_comments_394675.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d2c0c48cb518bd991a18276dea8d1c97d47be72\"><code>9d2c0c4</code></a></td><td><code>Upgrade to Python 3.7.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/438c3f46894da7134ef6c7b94ad81cb4c7b1fd50\"><code>438c3f4</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e62ddf877b8d517831c30466172e0ff2cdf82434\"><code>e62ddf8</code></a></td><td><code>Fix \"abort pool operation\" docbuild doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ad1dc19f0fe5d34d5621420e7a8c49c50b423e7\"><code>0ad1dc1</code></a></td><td><code>Mark a test for deprecated functionality as Python 2 only</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c\"><code>5a09cf1</code></a></td><td><code>Mark a few tests as known bug (#27537)</code></td></tr></table>\n",
    "created_at": "2019-03-26T09:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394675",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d2c0c48cb518bd991a18276dea8d1c97d47be72"><code>9d2c0c4</code></a></td><td><code>Upgrade to Python 3.7.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/438c3f46894da7134ef6c7b94ad81cb4c7b1fd50"><code>438c3f4</code></a></td><td><code>Disable collections.abc warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e62ddf877b8d517831c30466172e0ff2cdf82434"><code>e62ddf8</code></a></td><td><code>Fix "abort pool operation" docbuild doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ad1dc19f0fe5d34d5621420e7a8c49c50b423e7"><code>0ad1dc1</code></a></td><td><code>Mark a test for deprecated functionality as Python 2 only</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c"><code>5a09cf1</code></a></td><td><code>Mark a few tests as known bug (#27537)</code></td></tr></table>




---

archive/issue_comments_394676.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nCool, I'll try it.",
    "created_at": "2019-03-26T09:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394676",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Cool, I'll try it.



---

archive/issue_events_355148.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T09:47:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355148"
}
```



---

archive/issue_events_355149.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T09:47:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355149"
}
```



---

archive/issue_comments_394677.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n3.7.3 allowed me to remove one more Cygwin patch (the one related to the `.exe` suffix)",
    "created_at": "2019-03-26T09:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394677",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

3.7.3 allowed me to remove one more Cygwin patch (the one related to the `.exe` suffix)



---

archive/issue_comments_394678.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nIs there any reason its version is \"3.7.3.p0\" and not just \"3.7.3\"? Just because we do still apply *some* patches?  Not that I think it matters much, just curious.",
    "created_at": "2019-03-26T10:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394678",
    "user": "https://github.com/embray"
}
```

<div id="comment:0" align="right">comment:0</div>

Is there any reason its version is "3.7.3.p0" and not just "3.7.3"? Just because we do still apply *some* patches?  Not that I think it matters much, just curious.



---

archive/issue_comments_394679.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI thought the rule was to use `.pX` when there are patches. But it's certainly not enforced strictly.",
    "created_at": "2019-03-26T10:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394679",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

I thought the rule was to use `.pX` when there are patches. But it's certainly not enforced strictly.



---

archive/issue_comments_394680.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think that makes sense--after all it is no longer \"purely\" the 3.7.3 release at that point.",
    "created_at": "2019-03-26T10:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394680",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

I think that makes sense--after all it is no longer "purely" the 3.7.3 release at that point.



---

archive/issue_comments_394681.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm getting docbuild failures due to\n\n```\nWARNING: cannot copy static file OSError(40, 'Too many levels of symbolic links')\n```",
    "created_at": "2019-03-26T12:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394681",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm getting docbuild failures due to

```
WARNING: cannot copy static file OSError(40, 'Too many levels of symbolic links')
```



---

archive/issue_comments_394682.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't see this warning. You don't have that stupid mathjax recursive link, do you? Oh, `make ptest-python3` passes for me.",
    "created_at": "2019-03-26T19:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394682",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't see this warning. You don't have that stupid mathjax recursive link, do you? Oh, `make ptest-python3` passes for me.



---

archive/issue_comments_394683.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't know what was wrong with the docs. I did `make doc-clean` and then it worked.",
    "created_at": "2019-03-27T06:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394683",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't know what was wrong with the docs. I did `make doc-clean` and then it worked.



---

archive/issue_comments_394684.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI am having a bad problem when running the tests where every test outputs something like:\n\n```\nException ignored in: <function _TemporaryFileCloser.__del__ at 0x6ffff4d92f0>\nTraceback (most recent call last):\n  File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.7/tempfile.py\", line 448, in __del__\n    self.close()\n  File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.7/tempfile.py\", line 444, in close\n    unlink(self.name)\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpw4zt6tfq'\n```\n\neven if the test succeeds.  I think this may be a bug (big shock) in the `tempfile` module itself.  I believe it might even be one that I already have a patch for (I seem to recall fixing some issues in `tempfile` back when I was trying to get all of the Python test suite to pass on Cygwin) but I will need to look into that before saying anything more.",
    "created_at": "2019-03-27T11:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394684",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

I am having a bad problem when running the tests where every test outputs something like:

```
Exception ignored in: <function _TemporaryFileCloser.__del__ at 0x6ffff4d92f0>
Traceback (most recent call last):
  File "/home/embray/src/sagemath/sage-python3/local/lib/python3.7/tempfile.py", line 448, in __del__
    self.close()
  File "/home/embray/src/sagemath/sage-python3/local/lib/python3.7/tempfile.py", line 444, in close
    unlink(self.name)
FileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpw4zt6tfq'
```

even if the test succeeds.  I think this may be a bug (big shock) in the `tempfile` module itself.  I believe it might even be one that I already have a patch for (I seem to recall fixing some issues in `tempfile` back when I was trying to get all of the Python test suite to pass on Cygwin) but I will need to look into that before saying anything more.



---

archive/issue_comments_394685.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n(Obviously the bug itself is relatively harmless: It's just running a `__del__` method that unlinks a file but doesn't ignore errors that occur if the file was already deleted.  It's more a nuisance than anything).",
    "created_at": "2019-03-27T11:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394685",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

(Obviously the bug itself is relatively harmless: It's just running a `__del__` method that unlinks a file but doesn't ignore errors that occur if the file was already deleted.  It's more a nuisance than anything).



---

archive/issue_comments_394686.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI see; this is a recurrence of the problem I originally described here: [#25107 comment:14](https://github.com/sagemath/sage/issues/25107#comment:14)\n\nIt's resurfaced, because the `tempfile` module has been refactored, now in such a way that merely setting the `_TemporaryFileWrapper.deleted` attribute no longer has *any* effect whatsoever (it should really probably be a property which delegates to the new `_TemporaryFileCloser` object.\n\nI think this may be a broader issue with `NamedTemporaryFile` that is not unique just to Cygwin: If you create a `NamedTemporaryFile(delete=True)` in a parent process, then add it as an attribute on a `Process` subclass, when the worker process exits the file is deleted. But then when the temporary file is closed on the parent side it tries to re-delete the already deleted file.  I think more generally it would be best if ENOENT errors were just ignored in this case.",
    "created_at": "2019-03-27T14:38:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394686",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

I see; this is a recurrence of the problem I originally described here: [#25107 comment:14](https://github.com/sagemath/sage/issues/25107#comment:14)

It's resurfaced, because the `tempfile` module has been refactored, now in such a way that merely setting the `_TemporaryFileWrapper.deleted` attribute no longer has *any* effect whatsoever (it should really probably be a property which delegates to the new `_TemporaryFileCloser` object.

I think this may be a broader issue with `NamedTemporaryFile` that is not unique just to Cygwin: If you create a `NamedTemporaryFile(delete=True)` in a parent process, then add it as an attribute on a `Process` subclass, when the worker process exits the file is deleted. But then when the temporary file is closed on the parent side it tries to re-delete the already deleted file.  I think more generally it would be best if ENOENT errors were just ignored in this case.



---

archive/issue_comments_394687.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIf you would consider including [this commit](https://github.com/sagemath/sagetrac-mirror/commit/b124a898c7315412a071a8ccc7028604192f3af8), or something like it, that would resolve the problem I'm having with unhandled exceptions in `_TemporaryFileCloser.__del__ `.\n\nWith this fix, I can see more clearly that there are two test failures remaining on Cygwin:\n\n```\nsage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed\nsage -t --long src/sage/manifolds/differentiable/vectorfield.py  # Killed due to segmentation fault\n```\n\nThe first one is merely a manifestation of #27514.  Still need to rethink exactly how that test is implemented.\n\nThe second is more disconcerting, being a segfault (but at least repeatable).  I will look into it next.",
    "created_at": "2019-03-27T16:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394687",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

If you would consider including [this commit](https://github.com/sagemath/sagetrac-mirror/commit/b124a898c7315412a071a8ccc7028604192f3af8), or something like it, that would resolve the problem I'm having with unhandled exceptions in `_TemporaryFileCloser.__del__ `.

With this fix, I can see more clearly that there are two test failures remaining on Cygwin:

```
sage -t --long src/sage_setup/docbuild/__init__.py  # 1 doctest failed
sage -t --long src/sage/manifolds/differentiable/vectorfield.py  # Killed due to segmentation fault
```

The first one is merely a manifestation of #27514.  Still need to rethink exactly how that test is implemented.

The second is more disconcerting, being a segfault (but at least repeatable).  I will look into it next.



---

archive/issue_comments_394688.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**",
    "created_at": "2019-03-27T16:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394688",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**



---

archive/issue_events_355150.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-27T16:56:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355150"
}
```



---

archive/issue_events_355151.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-27T16:56:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355151"
}
```



---

archive/issue_comments_394689.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI think the segfault might be related to openblas issues that I've already fixed, but may not be incorporated in my current build (since I started building this Python 3 branch some time ago, possibly before all the relevant openblas fixes were incorporated).",
    "created_at": "2019-03-27T17:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394689",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

I think the segfault might be related to openblas issues that I've already fixed, but may not be incorporated in my current build (since I started building this Python 3 branch some time ago, possibly before all the relevant openblas fixes were incorporated).



---

archive/issue_comments_394690.json:
```json
{
    "body": "Changed dependencies from **#27523** to none",
    "created_at": "2019-03-29T19:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394690",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#27523** to none



---

archive/issue_comments_394691.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein, Erik Bray** to **Vincent Klein, Erik Bray, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-03-30T16:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394691",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Vincent Klein, Erik Bray** to **Vincent Klein, Erik Bray, Frédéric Chapoton**



---

archive/issue_events_355152.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-30T16:20:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355152"
}
```



---

archive/issue_events_355153.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-30T16:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355153"
}
```



---

archive/issue_comments_394692.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI am setting this to positive **now**, so that we can start again making progress on #27519. We can always fix details in later tickets.",
    "created_at": "2019-03-30T16:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394692",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

I am setting this to positive **now**, so that we can start again making progress on #27519. We can always fix details in later tickets.



---

archive/issue_events_355154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-31T22:43:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355154"
}
```



---

archive/issue_events_355155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7bde05c988bef81f937e5a6b8150d73167fae2d9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-31T22:43:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25680#event-355155"
}
```



---

archive/issue_comments_394693.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**",
    "created_at": "2019-03-31T22:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394693",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/upgrade_to_python_3_7_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_python_3_7_0)** to **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)**



---

archive/issue_comments_394694.json:
```json
{
    "body": "<div id=\"comment:185\" align=\"right\">comment:185</div>\n\nReplying to [@fchapoton](#comment:183):\n> I am setting this to positive **now**, so that we can start again making progress on #27519. We can always fix details in later tickets.\n\nWhy would you do that?  I explicitly pointed out that something was broken and proposed a fix, but that fix wasn't applied yet.  Doing this \"**now**\" has no direct impact on making progress on #27519.  You're just rushing things for no reason and leaving them broken.",
    "created_at": "2019-04-01T09:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394694",
    "user": "https://github.com/embray"
}
```

<div id="comment:185" align="right">comment:185</div>

Replying to [@fchapoton](#comment:183):
> I am setting this to positive **now**, so that we can start again making progress on #27519. We can always fix details in later tickets.

Why would you do that?  I explicitly pointed out that something was broken and proposed a fix, but that fix wasn't applied yet.  Doing this "**now**" has no direct impact on making progress on #27519.  You're just rushing things for no reason and leaving them broken.



---

archive/issue_comments_394695.json:
```json
{
    "body": "Changed commit from **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)** to none",
    "created_at": "2019-04-01T09:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394695",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`5a09cf1`](https://github.com/sagemath/sagetrac-mirror/commit/5a09cf14a56f4da514b40b7734327eb4ea33c16c)** to none



---

archive/issue_comments_394696.json:
```json
{
    "body": "<div id=\"comment:186\" align=\"right\">comment:186</div>\n\nReplying to [@embray](#comment:181):\n> I think the segfault might be related to openblas issues that I've already fixed, but may not be incorporated in my current build (since I started building this Python 3 branch some time ago, possibly before all the relevant openblas fixes were incorporated).\n\nI meant to follow up here.  The segfault was nothing to do with Python 3 (fortunately) and is fixed by #27565 .  Not exactly sure why I wasn't seeing that bug before--it's possible I was building OpenBLAS out of its recent `develop` branch which already had that fixed.",
    "created_at": "2019-04-01T10:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394696",
    "user": "https://github.com/embray"
}
```

<div id="comment:186" align="right">comment:186</div>

Replying to [@embray](#comment:181):
> I think the segfault might be related to openblas issues that I've already fixed, but may not be incorporated in my current build (since I started building this Python 3 branch some time ago, possibly before all the relevant openblas fixes were incorporated).

I meant to follow up here.  The segfault was nothing to do with Python 3 (fortunately) and is fixed by #27565 .  Not exactly sure why I wasn't seeing that bug before--it's possible I was building OpenBLAS out of its recent `develop` branch which already had that fixed.



---

archive/issue_comments_394697.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nDo we have a follow up on that ticket anywhere? In sage-on-gentoo I have a segfault when building the documentation with python 3.7.3 (but not 2.7 or 3.6). Am I alone with that issue?\n\n```\npython3.7: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/matrix/matrix1.c:14275: __pyx_pf_4sage_6matrix_7matrix1_6Matrix_60matrix_from_columns: Assertion `PyList_Check(__pyx_v_columns)' failed.\n```",
    "created_at": "2019-04-16T23:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394697",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Do we have a follow up on that ticket anywhere? In sage-on-gentoo I have a segfault when building the documentation with python 3.7.3 (but not 2.7 or 3.6). Am I alone with that issue?

```
python3.7: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/matrix/matrix1.c:14275: __pyx_pf_4sage_6matrix_7matrix1_6Matrix_60matrix_from_columns: Assertion `PyList_Check(__pyx_v_columns)' failed.
```



---

archive/issue_comments_394698.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nInteresting. You're building with assertions enabled.",
    "created_at": "2019-04-17T07:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394698",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Interesting. You're building with assertions enabled.



---

archive/issue_comments_394699.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCan you attach or send me that `matrix1.c` file? In my version of that file, I don't find such an assertion.",
    "created_at": "2019-04-17T07:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394699",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Can you attach or send me that `matrix1.c` file? In my version of that file, I don't find such an assertion.



---

archive/issue_comments_394700.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nAttachment: **[matrix1.c.bz2.gz](https://github.com/sagemath/sage/files/ticket25680/matrix1.c.bz2.gz)**\n\nAttached as requested (compressed).",
    "created_at": "2019-04-17T08:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394700",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:0" align="right">comment:0</div>

Attachment: **[matrix1.c.bz2.gz](https://github.com/sagemath/sage/files/ticket25680/matrix1.c.bz2.gz)**

Attached as requested (compressed).



---

archive/issue_comments_394701.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks, that clears things up. Follow-up ticket at #27688.",
    "created_at": "2019-04-17T08:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25680",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25680#issuecomment-394701",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks, that clears things up. Follow-up ticket at #27688.
