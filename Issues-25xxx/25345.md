# Issue 25345: Make it possible to test sage without htmldoc

archive/issues_025108.json:
```json
{
    "assignees": [],
    "body": "Because the html docs are non-essential and take up a lot of space, distributions usually make them an optional dependency of sage.\n\nI am doing the same for nix and I would like to be able to test sage and the docs independent from each other.\n\nThis patch makes the doctests that depend on the htmldocs optional, but enables those doctests by default. So to exclude them, one has to explicitly specify `--optional=sage`.\n\nFor that to work I also make sure that the optional `py2` tag is only added if `sage` is in the optionals list. I don't know if it was intended that way, but it was definitely surprising to me that all tests marked as `py2` were *always* run, even with `--optional=asdf-does-not-exists`.\n\n(The same goes for `--long`: I expected it to act as an `AND` as in \"in optionals list AND long\", but instead it just includes all tests marked as long. I left that unchanged.)\n\nBranch: **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**\n\nReviewer: **Erik Bray**\n\nAuthor: **Timo Kaufmann**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25345_\n\n",
    "closed_at": "2018-08-07T20:40:41Z",
    "created_at": "2018-05-11T15:41:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20distribution",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make it possible to test sage without htmldoc",
    "type": "issue",
    "updated_at": "2018-08-23T09:26:03Z",
    "url": "https://github.com/sagemath/sage/issues/25345",
    "user": "https://github.com/timokau"
}
```
Because the html docs are non-essential and take up a lot of space, distributions usually make them an optional dependency of sage.

I am doing the same for nix and I would like to be able to test sage and the docs independent from each other.

This patch makes the doctests that depend on the htmldocs optional, but enables those doctests by default. So to exclude them, one has to explicitly specify `--optional=sage`.

For that to work I also make sure that the optional `py2` tag is only added if `sage` is in the optionals list. I don't know if it was intended that way, but it was definitely surprising to me that all tests marked as `py2` were *always* run, even with `--optional=asdf-does-not-exists`.

(The same goes for `--long`: I expected it to act as an `AND` as in "in optionals list AND long", but instead it just includes all tests marked as long. I left that unchanged.)

Branch: **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**

Reviewer: **Erik Bray**

Author: **Timo Kaufmann**

_Issue created by migration from https://trac.sagemath.org/ticket/25345_





---

archive/issue_events_320644.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-11T15:41:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320644"
}
```



---

archive/issue_events_320645.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-11T15:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320645"
}
```



---

archive/issue_events_320646.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-11T15:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320646"
}
```



---

archive/issue_events_320647.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-11T15:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320647"
}
```



---

archive/issue_events_320648.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-11T15:42:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320648"
}
```



---

archive/issue_comments_390305.json:
```json
{
    "body": "Changed commit from **[c693f39](https://github.com/sagemath/sagetrac-mirror/commit/c693f3967b72c3129a14de02eff465aa8ef3bd3d)** to **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)**",
    "created_at": "2018-05-11T15:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c693f39](https://github.com/sagemath/sagetrac-mirror/commit/c693f3967b72c3129a14de02eff465aa8ef3bd3d)** to **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)**



---

archive/issue_comments_390306.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8\">e477287</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-11T15:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390306",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8">e477287</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390307.json:
```json
{
    "body": "Changed commit from **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)** to none",
    "created_at": "2018-05-11T15:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390307",
    "user": "https://github.com/timokau"
}
```

Changed commit from **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)** to none



---

archive/issue_comments_390308.json:
```json
{
    "body": "Changed branch from **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)** to none",
    "created_at": "2018-05-11T15:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390308",
    "user": "https://github.com/timokau"
}
```

Changed branch from **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)** to none



---

archive/issue_comments_390309.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a612c169b083ee046da3c8e3c5e6504237664083\">a612c16</a></td><td><code>Only add auto_optional_tags in addition to sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8\">e477287</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-11T15:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390309",
    "user": "https://github.com/timokau"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a612c169b083ee046da3c8e3c5e6504237664083">a612c16</a></td><td><code>Only add auto_optional_tags in addition to sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8">e477287</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390310.json:
```json
{
    "body": "Commit: **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)**",
    "created_at": "2018-05-11T15:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390310",
    "user": "https://github.com/timokau"
}
```

Commit: **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)**



---

archive/issue_comments_390311.json:
```json
{
    "body": "Branch: **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)**",
    "created_at": "2018-05-11T15:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390311",
    "user": "https://github.com/timokau"
}
```

Branch: **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)**



---

archive/issue_comments_390312.json:
```json
{
    "body": "Changed branch from **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)** to **[u/gh-timokau/make-htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/make-htmldoc-optional)**",
    "created_at": "2018-05-11T15:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390312",
    "user": "https://github.com/timokau"
}
```

Changed branch from **[u/gh-timokau/htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/htmldoc-optional)** to **[u/gh-timokau/make-htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/make-htmldoc-optional)**



---

archive/issue_comments_390313.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nSomehow trac has problems with my branch, I can't figure out why.",
    "created_at": "2018-05-11T15:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390313",
    "user": "https://github.com/timokau"
}
```

<a id='comment:6'>Comment 6:</a>
Somehow trac has problems with my branch, I can't figure out why.



---

archive/issue_comments_390314.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAlso looking back at the tests, it tells me `Using --optional=gfortran,mpir,python2,sage`, so apparently adding `htmldoc` didn't work. Does anybody know why?",
    "created_at": "2018-05-11T15:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390314",
    "user": "https://github.com/timokau"
}
```

<a id='comment:7'>Comment 7:</a>
Also looking back at the tests, it tells me `Using --optional=gfortran,mpir,python2,sage`, so apparently adding `htmldoc` didn't work. Does anybody know why?



---

archive/issue_comments_390315.json:
```json
{
    "body": "Changed commit from **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)** to **[b08a0b6](https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0)**",
    "created_at": "2018-05-11T16:05:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390315",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e477287](https://github.com/sagemath/sagetrac-mirror/commit/e477287939cb5568e0e79930efa98c680df391e8)** to **[b08a0b6](https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0)**



---

archive/issue_comments_390316.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0\">b08a0b6</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-11T16:05:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390316",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0">b08a0b6</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390317.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nWe just pushed an update to Trac--there might still be some bugs after all.  Probably not your branch's fault.",
    "created_at": "2018-05-11T16:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390317",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'>Comment 9:</a>
We just pushed an update to Trac--there might still be some bugs after all.  Probably not your branch's fault.



---

archive/issue_comments_390318.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAh, apparently it works now.",
    "created_at": "2018-05-11T16:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390318",
    "user": "https://github.com/timokau"
}
```

<a id='comment:10'>Comment 10:</a>
Ah, apparently it works now.



---

archive/issue_comments_390319.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n1. You're adding bogus files like `octave-workspace`.\n\n2. I'm not too happy with the name `htmldoc`. It doesn't correspond to anything.\n\n3. As I mentioned on some other ticket, the `# optional` should only be on the first line of a test example.",
    "created_at": "2018-05-11T21:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390319",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
1. You're adding bogus files like `octave-workspace`.

2. I'm not too happy with the name `htmldoc`. It doesn't correspond to anything.

3. As I mentioned on some other ticket, the `# optional` should only be on the first line of a test example.



---

archive/issue_events_320649.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-11T21:08:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320649"
}
```



---

archive/issue_events_320650.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-11T21:08:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320650"
}
```



---

archive/issue_comments_390320.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4\">51b549b</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-12T14:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390320",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4">51b549b</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390321.json:
```json
{
    "body": "Changed commit from **[b08a0b6](https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0)** to **[51b549b](https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4)**",
    "created_at": "2018-05-12T14:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390321",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b08a0b6](https://github.com/sagemath/sagetrac-mirror/commit/b08a0b691998f0462208ddbf3f16c22be6124dd0)** to **[51b549b](https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4)**



---

archive/issue_comments_390322.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\n1. Sorry, I thought I double checked this time. Don't know how I missed this. By the way, should `octave-workspace` be in `.gitignore`? Somehow that always gets generated when I run the tests.\n\n2. I thought the makefile calls it `htmldoc`, but apparently its `dochtml`. Would that be better?\n\n3. I thought that was only because it was an `if` or something. I didn't know a single `#optional` will skip the whole test.\n\nWhile changing (2) I noticed that there are some tests that are marked as `long` and `dochtml`. That means that its impossible to run them without running *all* other `long` tests too. Is that behaviour of `long` on purpose?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4\">51b549b</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-12T14:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390322",
    "user": "https://github.com/timokau"
}
```

<a id='comment:14'>Comment 14:</a>
1. Sorry, I thought I double checked this time. Don't know how I missed this. By the way, should `octave-workspace` be in `.gitignore`? Somehow that always gets generated when I run the tests.

2. I thought the makefile calls it `htmldoc`, but apparently its `dochtml`. Would that be better?

3. I thought that was only because it was an `if` or something. I didn't know a single `#optional` will skip the whole test.

While changing (2) I noticed that there are some tests that are marked as `long` and `dochtml`. That means that its impossible to run them without running *all* other `long` tests too. Is that behaviour of `long` on purpose?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4">51b549b</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_events_320651.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-12T14:11:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320651"
}
```



---

archive/issue_events_320652.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-05-12T14:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320652"
}
```



---

archive/issue_comments_390323.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62\">37a6f5e</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-13T14:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390323",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62">37a6f5e</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390324.json:
```json
{
    "body": "Changed commit from **[51b549b](https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4)** to **[37a6f5e](https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62)**",
    "created_at": "2018-05-13T14:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390324",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[51b549b](https://github.com/sagemath/sagetrac-mirror/commit/51b549b628cbd1c0258db079646e26d7ff1e5cb4)** to **[37a6f5e](https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62)**



---

archive/issue_comments_390325.json:
```json
{
    "body": "Changed commit from **[37a6f5e](https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62)** to **[7c41eed](https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714)**",
    "created_at": "2018-05-13T16:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390325",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37a6f5e](https://github.com/sagemath/sagetrac-mirror/commit/37a6f5e06c8ba18fc65c3e093dce2aa5fed7df62)** to **[7c41eed](https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714)**



---

archive/issue_comments_390326.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714\">7c41eed</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-13T16:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390326",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714">7c41eed</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390327.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73\">94ee038</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-13T23:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390327",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73">94ee038</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390328.json:
```json
{
    "body": "Changed commit from **[7c41eed](https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714)** to **[94ee038](https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73)**",
    "created_at": "2018-05-13T23:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390328",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7c41eed](https://github.com/sagemath/sagetrac-mirror/commit/7c41eed218db94fcea994576bde73d9ad9e78714)** to **[94ee038](https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73)**



---

archive/issue_comments_390329.json:
```json
{
    "body": "Changed commit from **[94ee038](https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73)** to **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**",
    "created_at": "2018-05-14T09:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390329",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[94ee038](https://github.com/sagemath/sagetrac-mirror/commit/94ee038f3fdf02edb2929a1b40945b79cd412b73)** to **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**



---

archive/issue_comments_390330.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485\">db7bf45</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>\n",
    "created_at": "2018-05-14T09:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390330",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485">db7bf45</a></td><td><code>Make dochtml tests optional and enabled by default</code></td></tr></table>




---

archive/issue_comments_390331.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI'm not going to dwell on this, and if others think this is worth doing, I'm not going to argue about it, but I disagree with the premises of this ticket:\n\n> Because the html docs are non-essential\n\nDocumentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.\n\n> and take up a lot of space, distributions usually make them an optional dependency of sage. \n\n650MB is not that much space these days, is it?",
    "created_at": "2018-05-14T14:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390331",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'>Comment 19:</a>
I'm not going to dwell on this, and if others think this is worth doing, I'm not going to argue about it, but I disagree with the premises of this ticket:

> Because the html docs are non-essential

Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.

> and take up a lot of space, distributions usually make them an optional dependency of sage. 

650MB is not that much space these days, is it?



---

archive/issue_comments_390332.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@jhpalmieri](#comment%3A19):\n> Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.\n\nWithout html documentation sage still offers the `?` function (as in `abs?`) that should suffice for a lot of use cases.\n\n> 650MB is not that much space these days, is it?\n\nMaybe not for you, but for somebody with a slow internet connection that wants to \"quickly check out this software\" its a lot of space/time.",
    "created_at": "2018-05-14T15:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390332",
    "user": "https://github.com/timokau"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@jhpalmieri](#comment%3A19):
> Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.

Without html documentation sage still offers the `?` function (as in `abs?`) that should suffice for a lot of use cases.

> 650MB is not that much space these days, is it?

Maybe not for you, but for somebody with a slow internet connection that wants to "quickly check out this software" its a lot of space/time.



---

archive/issue_comments_390333.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nIt would also be great if `?` could selectively pull docs from the internet whenever possible.",
    "created_at": "2018-05-14T16:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390333",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>Comment 21:</a>
It would also be great if `?` could selectively pull docs from the internet whenever possible.



---

archive/issue_comments_390334.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@timokau](#comment%3A20):\n> Replying to [@jhpalmieri](#comment%3A19):\n> > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.\n\n> \n> Without html documentation sage still offers the `?` function (as in `abs?`) that should suffice for a lot of use cases.\n\nI think you should analyze this more carefully before making this change. \"Should suffice\": when will it or won't it? For \"a lot of use cases\": which ones won't it suffice for? Reading the tutorial is one which is especially relevant to beginners; are there others? When you first start Sage, it says to run `help()` for help, and if you run this, it advertises two command which won't work without the docs: `tutorial()` and `manual()`.\n\nDeciding not to include documentation is, in my experience, almost always a bad choice.\n\n> > 650MB is not that much space these days, is it?\n\n> \n> Maybe not for you, but for somebody with a slow internet connection that wants to \"quickly check out this software\" its a lot of space/time.\n\nIt's not about me, it's compared to the size of the rest of the Sage installation.",
    "created_at": "2018-05-14T16:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390334",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@timokau](#comment%3A20):
> Replying to [@jhpalmieri](#comment%3A19):
> > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it. Sage's philosophy has always been that documentation is a key part of the package, and an installation without it is incomplete. I think if someone chooses to not build the docs, then they should have the natural consequence of having some doctests fail.

> 
> Without html documentation sage still offers the `?` function (as in `abs?`) that should suffice for a lot of use cases.

I think you should analyze this more carefully before making this change. "Should suffice": when will it or won't it? For "a lot of use cases": which ones won't it suffice for? Reading the tutorial is one which is especially relevant to beginners; are there others? When you first start Sage, it says to run `help()` for help, and if you run this, it advertises two command which won't work without the docs: `tutorial()` and `manual()`.

Deciding not to include documentation is, in my experience, almost always a bad choice.

> > 650MB is not that much space these days, is it?

> 
> Maybe not for you, but for somebody with a slow internet connection that wants to "quickly check out this software" its a lot of space/time.

It's not about me, it's compared to the size of the rest of the Sage installation.



---

archive/issue_comments_390335.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\n> I think you should analyze this more carefully before making this change.\n\nThis change does not disable documentation in any way. It is still enabled by default and tested by default. It simply makes it *possible* to disable.\n\n> \"Should suffice\": when will it or won't it? For \"a lot of use cases\": which ones won't it suffice for? Reading the tutorial is one which is especially relevant to beginners; are there others? When you first start Sage, it says to run `help()` for help, and if you run this, it advertises two command which won't work without the docs: `tutorial()` and `manual()`.\n\nWithout any facts to back it up, I'd guess that most beginners start with the online documentation.\n\n> Deciding not to include documentation is, in my experience, almost always a bad choice.\n\nIts the users choice.\n\n> > > 650MB is not that much space these days, is it?\n\n> > \n> > Maybe not for you, but for somebody with a slow internet connection that wants to \"quickly check out this software\" its a lot of space/time.\n\n> \n> It's not about me, it's compared to the size of the rest of the Sage installation.\n\nWell `sagelib` (basically everything sage excluding dependencies and docs) only takes up 257M.\nOf course realistically sage as a lot of dependencies that a user will not have pre-installed, but the documentation basically triples the minimum the user has to download.",
    "created_at": "2018-05-14T16:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390335",
    "user": "https://github.com/timokau"
}
```

<a id='comment:23'>Comment 23:</a>
> I think you should analyze this more carefully before making this change.

This change does not disable documentation in any way. It is still enabled by default and tested by default. It simply makes it *possible* to disable.

> "Should suffice": when will it or won't it? For "a lot of use cases": which ones won't it suffice for? Reading the tutorial is one which is especially relevant to beginners; are there others? When you first start Sage, it says to run `help()` for help, and if you run this, it advertises two command which won't work without the docs: `tutorial()` and `manual()`.

Without any facts to back it up, I'd guess that most beginners start with the online documentation.

> Deciding not to include documentation is, in my experience, almost always a bad choice.

Its the users choice.

> > > 650MB is not that much space these days, is it?

> > 
> > Maybe not for you, but for somebody with a slow internet connection that wants to "quickly check out this software" its a lot of space/time.

> 
> It's not about me, it's compared to the size of the rest of the Sage installation.

Well `sagelib` (basically everything sage excluding dependencies and docs) only takes up 257M.
Of course realistically sage as a lot of dependencies that a user will not have pre-installed, but the documentation basically triples the minimum the user has to download.



---

archive/issue_comments_390336.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@jhpalmieri](#comment%3A19):\n> Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.\n\nI don't think that this ticket changes that.\n\nI see little harm in marking those tests `optional` provided that `make (p)test(long)` still test them by default.",
    "created_at": "2018-05-15T13:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390336",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@jhpalmieri](#comment%3A19):
> Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.

I don't think that this ticket changes that.

I see little harm in marking those tests `optional` provided that `make (p)test(long)` still test them by default.



---

archive/issue_comments_390337.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@jdemeyer](#comment%3A24):\n> Replying to [@jhpalmieri](#comment%3A19):\n> > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.\n\n> \n> I don't think that this ticket changes that.\n\nThis ticket makes it easier for people to make bad choices. That's its whole point.",
    "created_at": "2018-05-15T14:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390337",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@jdemeyer](#comment%3A24):
> Replying to [@jhpalmieri](#comment%3A19):
> > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.

> 
> I don't think that this ticket changes that.

This ticket makes it easier for people to make bad choices. That's its whole point.



---

archive/issue_comments_390338.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@jhpalmieri](#comment%3A25):\n> Replying to [@jdemeyer](#comment%3A24):\n> > Replying to [@jhpalmieri](#comment%3A19):\n> > > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.\n\n> > \n> > I don't think that this ticket changes that.\n\n> \n> This ticket makes it easier for people to make bad choices. That's its whole point.\n\nI think users should be able to make that choice. And distros already do allow them make that choice. The only thing that patch does is allowing them to stay closer to vanilla sage doing that (and pass the tests).",
    "created_at": "2018-05-15T16:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390338",
    "user": "https://github.com/timokau"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@jhpalmieri](#comment%3A25):
> Replying to [@jdemeyer](#comment%3A24):
> > Replying to [@jhpalmieri](#comment%3A19):
> > > Documentation is an essential part of any software, so we should encourage everyone to build it or distribute it.

> > 
> > I don't think that this ticket changes that.

> 
> This ticket makes it easier for people to make bad choices. That's its whole point.

I think users should be able to make that choice. And distros already do allow them make that choice. The only thing that patch does is allowing them to stay closer to vanilla sage doing that (and pass the tests).



---

archive/issue_comments_390339.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nAre there any remaining objections?",
    "created_at": "2018-06-30T16:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390339",
    "user": "https://github.com/timokau"
}
```

<a id='comment:27'>Comment 27:</a>
Are there any remaining objections?



---

archive/issue_comments_390340.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI agree--shipping Sage without the full documentation is perfectly reasonable in my cases.  We should just ensure that code which assumes that the documentation is installed has a reasonable fallback (e.g. `tutorial()` returns a reasonable error message).\n\nIt should also be perfectly possible to run the tests without the docs (especially since the only tests that fail without them are tests that test the docs, so if the docs are not built it would be reasonable to skip those tests).",
    "created_at": "2018-07-10T14:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390340",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'>Comment 28:</a>
I agree--shipping Sage without the full documentation is perfectly reasonable in my cases.  We should just ensure that code which assumes that the documentation is installed has a reasonable fallback (e.g. `tutorial()` returns a reasonable error message).

It should also be perfectly possible to run the tests without the docs (especially since the only tests that fail without them are tests that test the docs, so if the docs are not built it would be reasonable to skip those tests).



---

archive/issue_comments_390341.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\n> It should also be perfectly possible to run the tests without the docs (especially since the only tests that fail without them are tests that test the docs, so if the docs are not built it would be reasonable to skip those tests).\n\nYes that is exactly what this ticket accomplishes :) In fact I already applied this patch on the nixpkgs package and all doctests pass without documentation. I then run `sage -t --optional=dochtml --all` after building the documentation. That also has the advantage of being able to test the base installation and build the documentation at the same time. That advantage is limited however, since in practice the doctests and the docbuild both use all the resources they can get anyways. It can be nice for a distributed build however.",
    "created_at": "2018-07-10T14:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390341",
    "user": "https://github.com/timokau"
}
```

<a id='comment:29'>Comment 29:</a>
> It should also be perfectly possible to run the tests without the docs (especially since the only tests that fail without them are tests that test the docs, so if the docs are not built it would be reasonable to skip those tests).

Yes that is exactly what this ticket accomplishes :) In fact I already applied this patch on the nixpkgs package and all doctests pass without documentation. I then run `sage -t --optional=dochtml --all` after building the documentation. That also has the advantage of being able to test the base installation and build the documentation at the same time. That advantage is limited however, since in practice the doctests and the docbuild both use all the resources they can get anyways. It can be nice for a distributed build however.



---

archive/issue_comments_390342.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390342",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'>Comment 30:</a>
update milestone 8.3 -> 8.4



---

archive/issue_events_320653.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320653"
}
```



---

archive/issue_events_320654.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320654"
}
```



---

archive/issue_events_320655.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-05T11:44:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "title_is": "Make it possible to test sage without htmldoc",
    "title_was": "Make htmldoc doctests optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320655"
}
```



---

archive/issue_events_320656.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-06T14:32:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320656"
}
```



---

archive/issue_events_320657.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-06T14:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320657"
}
```



---

archive/issue_comments_390343.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-08-06T14:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390343",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_390344.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nWe should ensure that built-ins like `tutorial()` behave reasonably when the docs are not installed, but the fact remains that Sage is already shipped by default in many cases without the docs, so that's a separate issue.  In the meantime we should certainly allow the tests to pass without docs.\n\nI would kind of like it if `dochtml` were automatically disabled if the docs are not found, but that could also hide a legitimate problem.  So I'm not sure what to do there.",
    "created_at": "2018-08-06T14:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390344",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'>Comment 32:</a>
We should ensure that built-ins like `tutorial()` behave reasonably when the docs are not installed, but the fact remains that Sage is already shipped by default in many cases without the docs, so that's a separate issue.  In the meantime we should certainly allow the tests to pass without docs.

I would kind of like it if `dochtml` were automatically disabled if the docs are not found, but that could also hide a legitimate problem.  So I'm not sure what to do there.



---

archive/issue_comments_390345.json:
```json
{
    "body": "Changed branch from **[u/gh-timokau/make-htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/make-htmldoc-optional)** to **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**",
    "created_at": "2018-08-07T20:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390345",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-timokau/make-htmldoc-optional](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-timokau/make-htmldoc-optional)** to **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)**



---

archive/issue_events_320658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-07T20:40:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320658"
}
```



---

archive/issue_events_320659.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6081d6f06d64935a98235406301fa1309d2b282d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-07T20:40:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25345#event-320659"
}
```



---

archive/issue_comments_390346.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nThis is broken: tests marked `optional - dochtml` are not run by default. See #26110.",
    "created_at": "2018-08-22T20:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390346",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'>Comment 34:</a>
This is broken: tests marked `optional - dochtml` are not run by default. See #26110.



---

archive/issue_comments_390347.json:
```json
{
    "body": "Changed commit from **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)** to none",
    "created_at": "2018-08-22T20:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390347",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[db7bf45](https://github.com/sagemath/sagetrac-mirror/commit/db7bf45015e736ca2383597a2c63e4fae97c9485)** to none



---

archive/issue_comments_390348.json:
```json
{
    "body": "Replying to [ticket:25345 gh-timokau]:\n> I also make sure that the optional `py2` tag is only added if `sage` is in the optionals list.\n\nThis change doesn't really make sense to me. I think it's a feature that `# py2` tests are always run on Python 2, regardless of the `--optional` option. So I'm reverting this part in #26110.",
    "created_at": "2018-08-23T09:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25345#issuecomment-390348",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:25345 gh-timokau]:
> I also make sure that the optional `py2` tag is only added if `sage` is in the optionals list.

This change doesn't really make sense to me. I think it's a feature that `# py2` tests are always run on Python 2, regardless of the `--optional` option. So I'm reverting this part in #26110.
