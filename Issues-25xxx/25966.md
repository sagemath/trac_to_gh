# Issue 25966: Upgrade Arb to 2.14.0

archive/issues_025729.json:
```json
{
    "assignees": [],
    "body": "https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz\n\nBecause of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.\n\nCC:  @timokau @jdemeyer\n\nComponent: **packages: standard**\n\nAuthor: **Fredrik Johansson**\n\nBranch: **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**\n\nReviewer: **Travis Scrimshaw, Timo Kaufmann**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25966_\n\n",
    "closed_at": "2018-08-09T21:27:50Z",
    "created_at": "2018-07-28T20:32:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Arb to 2.14.0",
    "type": "issue",
    "updated_at": "2018-08-16T15:06:03Z",
    "url": "https://github.com/sagemath/sage/issues/25966",
    "user": "https://github.com/fredrik-johansson"
}
```
https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz

Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.

CC:  @timokau @jdemeyer

Component: **packages: standard**

Author: **Fredrik Johansson**

Branch: **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**

Reviewer: **Travis Scrimshaw, Timo Kaufmann**

_Issue created by migration from https://trac.sagemath.org/ticket/25966_





---

archive/issue_events_355678.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:32:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355678"
}
```



---

archive/issue_events_355679.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355679"
}
```



---

archive/issue_comments_399631.json:
```json
{
    "body": "Branch: **[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)**",
    "created_at": "2018-07-28T20:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399631",
    "user": "https://github.com/fredrik-johansson"
}
```

Branch: **[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)**



---

archive/issue_events_355680.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355680"
}
```



---

archive/issue_comments_399632.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d22edee61a6fefdaeeae7727d86bfe01aec0652d\"><code>d22edee</code></a></td><td><code>update arb to 2.14.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f0646b0c8cdb45c01b5df190376f5672dd72fb8\"><code>6f0646b</code></a></td><td><code>update doctests affected by accuracy changes in arb 2.14</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84\"><code>d4295f0</code></a></td><td><code>Merge branch 'arb214' into t/25966/upgrade_arb_to_2_14_0</code></td></tr></table>\n",
    "created_at": "2018-07-28T20:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399632",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d22edee61a6fefdaeeae7727d86bfe01aec0652d"><code>d22edee</code></a></td><td><code>update arb to 2.14.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f0646b0c8cdb45c01b5df190376f5672dd72fb8"><code>6f0646b</code></a></td><td><code>update doctests affected by accuracy changes in arb 2.14</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84"><code>d4295f0</code></a></td><td><code>Merge branch 'arb214' into t/25966/upgrade_arb_to_2_14_0</code></td></tr></table>




---

archive/issue_comments_399633.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz\n \n+Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.\n``````\n",
    "created_at": "2018-07-28T20:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399633",
    "user": "https://github.com/fredrik-johansson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz
 
+Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.
``````




---

archive/issue_comments_399634.json:
```json
{
    "body": "Commit: **[`d4295f0`](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)**",
    "created_at": "2018-07-28T20:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399634",
    "user": "https://github.com/fredrik-johansson"
}
```

Commit: **[`d4295f0`](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)**



---

archive/issue_events_355681.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355681"
}
```



---

archive/issue_events_355682.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355682"
}
```



---

archive/issue_comments_399635.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nBuildbots ahoy! *cough*authorname*cough*",
    "created_at": "2018-07-30T07:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399635",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Buildbots ahoy! *cough*authorname*cough*



---

archive/issue_comments_399636.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-07-30T07:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399636",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_355683.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-30T07:28:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355683"
}
```



---

archive/issue_events_355684.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-30T07:28:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355684"
}
```



---

archive/issue_comments_399637.json:
```json
{
    "body": "Author: **Fredrik Johansson**",
    "created_at": "2018-07-30T07:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399637",
    "user": "https://github.com/tscrim"
}
```

Author: **Fredrik Johansson**



---

archive/issue_events_355685.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-06T21:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355685"
}
```



---

archive/issue_events_355686.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-06T21:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355686"
}
```



---

archive/issue_comments_399638.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 1029, in sage.rings.complex_arb.ComplexBallField.?\nFailed example:\n    C.integral(lambda x, _: (x + x.exp()).sin(), 0, 8) # long time\nExpected:\n    [0.34740017...55347713 +/- 6.72e-598]\nGot:\n    [0.347400172657247807879512159119893124657456254866180183885492713616748213988785320529685104346604105756813796172006018707302714228197618073704004353678452866627436279471970216410908716043577412909956068587776704710948691279593004567821091508925369957240639547298886452332685264381903039098870525160076005978168808062746564134987731050142119306346307812114504420398584159417131096900798039662018221641127266271301569159908541386062975763888813212164702872661085356464323603726722886936732008463756755254875678750234857309302489895429562039632272592695502596880447563060128384223515181416786355347713 +/- 5.71e-598]\n**********************************************************************\n1 item had failures:\n   1 of  56 in sage.rings.complex_arb.ComplexBallField.?\n    [622 tests, 1 failure, 3.69 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/rings/complex_arb.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2018-08-06T21:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399638",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>


```
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 1029, in sage.rings.complex_arb.ComplexBallField.?
Failed example:
    C.integral(lambda x, _: (x + x.exp()).sin(), 0, 8) # long time
Expected:
    [0.34740017...55347713 +/- 6.72e-598]
Got:
    [0.347400172657247807879512159119893124657456254866180183885492713616748213988785320529685104346604105756813796172006018707302714228197618073704004353678452866627436279471970216410908716043577412909956068587776704710948691279593004567821091508925369957240639547298886452332685264381903039098870525160076005978168808062746564134987731050142119306346307812114504420398584159417131096900798039662018221641127266271301569159908541386062975763888813212164702872661085356464323603726722886936732008463756755254875678750234857309302489895429562039632272592695502596880447563060128384223515181416786355347713 +/- 5.71e-598]
**********************************************************************
1 item had failures:
   1 of  56 in sage.rings.complex_arb.ComplexBallField.?
    [622 tests, 1 failure, 3.69 s]
----------------------------------------------------------------------
sage -t --long src/sage/rings/complex_arb.pyx  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_399639.json:
```json
{
    "body": "Changed commit from **[`d4295f0`](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)** to **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**",
    "created_at": "2018-08-06T22:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399639",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`d4295f0`](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)** to **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**



---

archive/issue_comments_399640.json:
```json
{
    "body": "Changed branch from **[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)** to **[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)**",
    "created_at": "2018-08-06T22:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399640",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)** to **[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)**



---

archive/issue_events_355687.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-08-06T22:15:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355687"
}
```



---

archive/issue_events_355688.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-08-06T22:15:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355688"
}
```



---

archive/issue_comments_399641.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI must have done the same thing and not run `--long`. Mea culpa. Fixed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61e2d8ef79124f4056df4bd01f072c2b81b507ce\"><code>61e2d8e</code></a></td><td><code>Merge branch 'u/fredrik.johansson/upgrade_arb_to_2_14_0' of git://trac.sagemath.org/sage into u/fredrik.johansson/upgrade_arb_to_2_14_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e\"><code>8bef4fd</code></a></td><td><code>Fix one doctest.</code></td></tr></table>\n",
    "created_at": "2018-08-06T22:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399641",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

I must have done the same thing and not run `--long`. Mea culpa. Fixed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61e2d8ef79124f4056df4bd01f072c2b81b507ce"><code>61e2d8e</code></a></td><td><code>Merge branch 'u/fredrik.johansson/upgrade_arb_to_2_14_0' of git://trac.sagemath.org/sage into u/fredrik.johansson/upgrade_arb_to_2_14_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e"><code>8bef4fd</code></a></td><td><code>Fix one doctest.</code></td></tr></table>




---

archive/issue_comments_399642.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAm I allowed to give the positive review to the reviewer's patch? Are we waiting for other reviewing?",
    "created_at": "2018-08-07T02:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399642",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:8" align="right">comment:8</div>

Am I allowed to give the positive review to the reviewer's patch? Are we waiting for other reviewing?



---

archive/issue_comments_399643.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fredrik-johansson](#comment%3A8):\n> Am I allowed to give the positive review to the reviewer's patch?\n\nYes.\n\n> Are we waiting for other reviewing?\n\nNot that I am aware of.",
    "created_at": "2018-08-07T03:00:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399643",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fredrik-johansson](#comment%3A8):
> Am I allowed to give the positive review to the reviewer's patch?

Yes.

> Are we waiting for other reviewing?

Not that I am aware of.



---

archive/issue_comments_399644.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nUnfortunately Sage fails to build for me right now (for unrelated reasons) so I can't verify that the tests pass.",
    "created_at": "2018-08-07T06:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399644",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:10" align="right">comment:10</div>

Unfortunately Sage fails to build for me right now (for unrelated reasons) so I can't verify that the tests pass.



---

archive/issue_events_355689.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T09:57:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355689"
}
```



---

archive/issue_events_355690.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T09:57:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355690"
}
```



---

archive/issue_comments_399645.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Timo Kaufmann**",
    "created_at": "2018-08-07T09:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399645",
    "user": "https://github.com/timokau"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Timo Kaufmann**



---

archive/issue_comments_399646.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nTests pass.",
    "created_at": "2018-08-07T09:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399646",
    "user": "https://github.com/timokau"
}
```

<div id="comment:11" align="right">comment:11</div>

Tests pass.



---

archive/issue_comments_399647.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIn the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.",
    "created_at": "2018-08-07T10:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399647",
    "user": "https://github.com/timokau"
}
```

<div id="comment:12" align="right">comment:12</div>

In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.



---

archive/issue_events_355691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-09T21:27:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355691"
}
```



---

archive/issue_events_355692.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "42694c652613b4b3a357b670ca93966690936f28",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-09T21:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-355692"
}
```



---

archive/issue_comments_399648.json:
```json
{
    "body": "Changed branch from **[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)** to **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**",
    "created_at": "2018-08-09T21:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399648",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)** to **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)**



---

archive/issue_comments_399649.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@timokau](#comment%3A12):\n> In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.\n\nSee the discussion at #18560. IMO it would be time to switch to using tolerances indeed. Jeroen, did you view of the issue change since that ticket?",
    "created_at": "2018-08-14T16:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399649",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@timokau](#comment%3A12):
> In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.

See the discussion at #18560. IMO it would be time to switch to using tolerances indeed. Jeroen, did you view of the issue change since that ticket?



---

archive/issue_comments_399650.json:
```json
{
    "body": "Changed commit from **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)** to none",
    "created_at": "2018-08-14T16:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399650",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`8bef4fd`](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)** to none



---

archive/issue_comments_399651.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nDifferences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.",
    "created_at": "2018-08-16T14:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399651",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:15" align="right">comment:15</div>

Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.



---

archive/issue_comments_399652.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@fredrik-johansson](#comment%3A15):\n> Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.\n\nThey are an issue when using sage outside of sage-the-distribution. They make it necessary that either the arb version used is the exact arb version sage-the-distribution uses or that patches are applied to sage. With tolerances we could potentially update sage and arb independently. And this is not only an issue for distributions. It could in the long run also allow sage-the-distribution to use the system's arb version (#24919).\n\nIn my opinion ideal sage tests should only fail if something is actually broken in sage, upstream projects or packaging. \"broken\" here may be an actual error or a api change.",
    "created_at": "2018-08-16T15:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-399652",
    "user": "https://github.com/timokau"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@fredrik-johansson](#comment%3A15):
> Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.

They are an issue when using sage outside of sage-the-distribution. They make it necessary that either the arb version used is the exact arb version sage-the-distribution uses or that patches are applied to sage. With tolerances we could potentially update sage and arb independently. And this is not only an issue for distributions. It could in the long run also allow sage-the-distribution to use the system's arb version (#24919).

In my opinion ideal sage tests should only fail if something is actually broken in sage, upstream projects or packaging. "broken" here may be an actual error or a api change.
