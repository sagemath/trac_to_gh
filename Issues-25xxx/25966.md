# Issue 25966: Upgrade Arb to 2.14.0

archive/issues_025729.json:
```json
{
    "body": "https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz\n\nBecause of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.\n\n**CC:**  @timokau @jdemeyer\n\n**Branch:** [8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)\n\n**Reviewer:** Travis Scrimshaw, Timo Kaufmann\n\n**Author:** Fredrik Johansson\n\nIssue created by migration from https://trac.sagemath.org/ticket/25966\n\n",
    "closed_at": "2018-08-09T21:27:50Z",
    "created_at": "2018-07-28T20:32:23Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "title": "Upgrade Arb to 2.14.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/25966",
    "user": "https://github.com/fredrik-johansson"
}
```
https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz

Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.

**CC:**  @timokau @jdemeyer

**Branch:** [8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)

**Reviewer:** Travis Scrimshaw, Timo Kaufmann

**Author:** Fredrik Johansson

Issue created by migration from https://trac.sagemath.org/ticket/25966





---

archive/issue_comments_402297.json:
```json
{
    "body": "**Branch:** [u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)",
    "created_at": "2018-07-28T20:51:30Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402297",
    "user": "https://github.com/fredrik-johansson"
}
```

**Branch:** [u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)



---

archive/issue_events_230334.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230334"
}
```



---

archive/issue_comments_402298.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d22edee61a6fefdaeeae7727d86bfe01aec0652d\">d22edee</a></td><td><code>update arb to 2.14.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f0646b0c8cdb45c01b5df190376f5672dd72fb8\">6f0646b</a></td><td><code>update doctests affected by accuracy changes in arb 2.14</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84\">d4295f0</a></td><td><code>Merge branch 'arb214' into t/25966/upgrade_arb_to_2_14_0</code></td></tr></table>\n",
    "created_at": "2018-07-28T20:53:45Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402298",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d22edee61a6fefdaeeae7727d86bfe01aec0652d">d22edee</a></td><td><code>update arb to 2.14.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f0646b0c8cdb45c01b5df190376f5672dd72fb8">6f0646b</a></td><td><code>update doctests affected by accuracy changes in arb 2.14</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84">d4295f0</a></td><td><code>Merge branch 'arb214' into t/25966/upgrade_arb_to_2_14_0</code></td></tr></table>




---

archive/issue_comments_402299.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz\n \n+Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.\n``````\n",
    "created_at": "2018-07-28T20:53:45Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402299",
    "user": "https://github.com/fredrik-johansson"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+https://github.com/fredrik-johansson/arb/archive/2.14.0.tar.gz
 
+Because of more accurate error bounds (mainly for trigonometric functions), a large number of doctests have to be updated.
``````




---

archive/issue_comments_402300.json:
```json
{
    "body": "**Commit:** [d4295f0ca10661a5fc97d7656d844e9deba74c84](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)",
    "created_at": "2018-07-28T20:53:45Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402300",
    "user": "https://github.com/fredrik-johansson"
}
```

**Commit:** [d4295f0ca10661a5fc97d7656d844e9deba74c84](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)



---

archive/issue_events_230335.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "component: packages: standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230335"
}
```



---

archive/issue_events_230336.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2018-07-28T20:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230336"
}
```



---

archive/issue_comments_402301.json:
```json
{
    "body": "<a id='comment:3'></a>\nBuildbots ahoy! *cough*authorname*cough*",
    "created_at": "2018-07-30T07:28:09Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402301",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Buildbots ahoy! *cough*authorname*cough*



---

archive/issue_comments_402302.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2018-07-30T07:28:09Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402302",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_230337.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-30T07:28:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230337"
}
```



---

archive/issue_events_230338.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-30T07:28:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230338"
}
```



---

archive/issue_comments_402303.json:
```json
{
    "body": "**Author:** Fredrik Johansson",
    "created_at": "2018-07-30T07:28:21Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402303",
    "user": "https://github.com/tscrim"
}
```

**Author:** Fredrik Johansson



---

archive/issue_events_230339.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-06T21:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230339"
}
```



---

archive/issue_events_230340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-06T21:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230340"
}
```



---

archive/issue_comments_402304.json:
```json
{
    "body": "<a id='comment:5'></a>\n\n```\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 1029, in sage.rings.complex_arb.ComplexBallField.?\nFailed example:\n    C.integral(lambda x, _: (x + x.exp()).sin(), 0, 8) # long time\nExpected:\n    [0.34740017...55347713 +/- 6.72e-598]\nGot:\n    [0.347400172657247807879512159119893124657456254866180183885492713616748213988785320529685104346604105756813796172006018707302714228197618073704004353678452866627436279471970216410908716043577412909956068587776704710948691279593004567821091508925369957240639547298886452332685264381903039098870525160076005978168808062746564134987731050142119306346307812114504420398584159417131096900798039662018221641127266271301569159908541386062975763888813212164702872661085356464323603726722886936732008463756755254875678750234857309302489895429562039632272592695502596880447563060128384223515181416786355347713 +/- 5.71e-598]\n**********************************************************************\n1 item had failures:\n   1 of  56 in sage.rings.complex_arb.ComplexBallField.?\n    [622 tests, 1 failure, 3.69 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/rings/complex_arb.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2018-08-06T21:42:55Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402304",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>

```
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 1029, in sage.rings.complex_arb.ComplexBallField.?
Failed example:
    C.integral(lambda x, _: (x + x.exp()).sin(), 0, 8) # long time
Expected:
    [0.34740017...55347713 +/- 6.72e-598]
Got:
    [0.347400172657247807879512159119893124657456254866180183885492713616748213988785320529685104346604105756813796172006018707302714228197618073704004353678452866627436279471970216410908716043577412909956068587776704710948691279593004567821091508925369957240639547298886452332685264381903039098870525160076005978168808062746564134987731050142119306346307812114504420398584159417131096900798039662018221641127266271301569159908541386062975763888813212164702872661085356464323603726722886936732008463756755254875678750234857309302489895429562039632272592695502596880447563060128384223515181416786355347713 +/- 5.71e-598]
**********************************************************************
1 item had failures:
   1 of  56 in sage.rings.complex_arb.ComplexBallField.?
    [622 tests, 1 failure, 3.69 s]
----------------------------------------------------------------------
sage -t --long src/sage/rings/complex_arb.pyx  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_402305.json:
```json
{
    "body": "**Changing commit** from \"[d4295f0ca10661a5fc97d7656d844e9deba74c84](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)\" to \"[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)\".",
    "created_at": "2018-08-06T22:15:13Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402305",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[d4295f0ca10661a5fc97d7656d844e9deba74c84](https://github.com/sagemath/sagetrac-mirror/commit/d4295f0ca10661a5fc97d7656d844e9deba74c84)" to "[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)".



---

archive/issue_comments_402306.json:
```json
{
    "body": "**Changing branch** from \"[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)\" to \"[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)\".",
    "created_at": "2018-08-06T22:15:13Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402306",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/fredrik.johansson/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/fredrik.johansson/upgrade_arb_to_2_14_0)" to "[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)".



---

archive/issue_events_230341.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-08-06T22:15:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230341"
}
```



---

archive/issue_events_230342.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-08-06T22:15:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230342"
}
```



---

archive/issue_comments_402307.json:
```json
{
    "body": "<a id='comment:7'></a>\nI must have done the same thing and not run `--long`. Mea culpa. Fixed.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61e2d8ef79124f4056df4bd01f072c2b81b507ce\">61e2d8e</a></td><td><code>Merge branch 'u/fredrik.johansson/upgrade_arb_to_2_14_0' of git://trac.sagemath.org/sage into u/fredrik.johansson/upgrade_arb_to_2_14_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e\">8bef4fd</a></td><td><code>Fix one doctest.</code></td></tr></table>\n",
    "created_at": "2018-08-06T22:15:13Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402307",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
I must have done the same thing and not run `--long`. Mea culpa. Fixed.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61e2d8ef79124f4056df4bd01f072c2b81b507ce">61e2d8e</a></td><td><code>Merge branch 'u/fredrik.johansson/upgrade_arb_to_2_14_0' of git://trac.sagemath.org/sage into u/fredrik.johansson/upgrade_arb_to_2_14_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e">8bef4fd</a></td><td><code>Fix one doctest.</code></td></tr></table>




---

archive/issue_comments_402308.json:
```json
{
    "body": "<a id='comment:8'></a>\nAm I allowed to give the positive review to the reviewer's patch? Are we waiting for other reviewing?",
    "created_at": "2018-08-07T02:48:44Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402308",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:8'></a>
Am I allowed to give the positive review to the reviewer's patch? Are we waiting for other reviewing?



---

archive/issue_comments_402309.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [fredrik.johansson](#comment%3A8):\n> Am I allowed to give the positive review to the reviewer's patch?\n\nYes.\n\n> Are we waiting for other reviewing?\n\nNot that I am aware of.",
    "created_at": "2018-08-07T03:00:09Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402309",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Replying to [fredrik.johansson](#comment%3A8):
> Am I allowed to give the positive review to the reviewer's patch?

Yes.

> Are we waiting for other reviewing?

Not that I am aware of.



---

archive/issue_comments_402310.json:
```json
{
    "body": "<a id='comment:10'></a>\nUnfortunately Sage fails to build for me right now (for unrelated reasons) so I can't verify that the tests pass.",
    "created_at": "2018-08-07T06:20:54Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402310",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:10'></a>
Unfortunately Sage fails to build for me right now (for unrelated reasons) so I can't verify that the tests pass.



---

archive/issue_events_230343.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T09:57:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230343"
}
```



---

archive/issue_events_230344.json:
```json
{
    "actor": "https://github.com/timokau",
    "created_at": "2018-08-07T09:57:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230344"
}
```



---

archive/issue_comments_402311.json:
```json
{
    "body": "**Changing reviewer** from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Timo Kaufmann\".",
    "created_at": "2018-08-07T09:57:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402311",
    "user": "https://github.com/timokau"
}
```

**Changing reviewer** from "Travis Scrimshaw" to "Travis Scrimshaw, Timo Kaufmann".



---

archive/issue_comments_402312.json:
```json
{
    "body": "<a id='comment:11'></a>\nTests pass.",
    "created_at": "2018-08-07T09:57:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402312",
    "user": "https://github.com/timokau"
}
```

<a id='comment:11'></a>
Tests pass.



---

archive/issue_comments_402313.json:
```json
{
    "body": "<a id='comment:12'></a>\nIn the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.",
    "created_at": "2018-08-07T10:04:22Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402313",
    "user": "https://github.com/timokau"
}
```

<a id='comment:12'></a>
In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.



---

archive/issue_events_230345.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-09T21:27:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230345"
}
```



---

archive/issue_events_230346.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "42694c652613b4b3a357b670ca93966690936f28",
    "created_at": "2018-08-09T21:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25966#event-230346"
}
```



---

archive/issue_comments_402314.json:
```json
{
    "body": "**Changing branch** from \"[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)\" to \"[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)\".",
    "created_at": "2018-08-09T21:27:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402314",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/tscrim/upgrade_arb_to_2_14_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_arb_to_2_14_0)" to "[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)".



---

archive/issue_comments_402315.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [gh-timokau](#comment%3A12):\n> In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.\n\nSee the discussion at #18560. IMO it would be time to switch to using tolerances indeed. Jeroen, did you view of the issue change since that ticket?",
    "created_at": "2018-08-14T16:57:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402315",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:14'></a>
Replying to [gh-timokau](#comment%3A12):
> In the future it would be preferable to make use of `# abs tol 1e-42` feature to reduce the doctest precision. It would make the doctests less brittle.

See the discussion at #18560. IMO it would be time to switch to using tolerances indeed. Jeroen, did you view of the issue change since that ticket?



---

archive/issue_comments_402316.json:
```json
{
    "body": "**Changing commit** from \"[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)\" to \"\".",
    "created_at": "2018-08-14T16:57:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402316",
    "user": "https://github.com/mezzarobba"
}
```

**Changing commit** from "[8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e](https://github.com/sagemath/sagetrac-mirror/commit/8bef4fd2876a61969b516fe4eb3b8ad7cc076c5e)" to "".



---

archive/issue_comments_402317.json:
```json
{
    "body": "<a id='comment:15'></a>\nDifferences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.",
    "created_at": "2018-08-16T14:09:31Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402317",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:15'></a>
Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.



---

archive/issue_comments_402318.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [fredrik.johansson](#comment%3A15):\n> Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.\n\nThey are an issue when using sage outside of sage-the-distribution. They make it necessary that either the arb version used is the exact arb version sage-the-distribution uses or that patches are applied to sage. With tolerances we could potentially update sage and arb independently. And this is not only an issue for distributions. It could in the long run also allow sage-the-distribution to use the system's arb version (#24919).\n\nIn my opinion ideal sage tests should only fail if something is actually broken in sage, upstream projects or packaging. \"broken\" here may be an actual error or a api change.",
    "created_at": "2018-08-16T15:06:03Z",
    "issue": "https://github.com/sagemath/sage/issues/25966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25966#issuecomment-402318",
    "user": "https://github.com/timokau"
}
```

<a id='comment:16'></a>
Replying to [fredrik.johansson](#comment%3A15):
> Differences when upgrading Arb are not a big issue IMO. In fact, it's helpful (for me) to look at the Sage doctests to see what improved or got worse between two versions. However, divergence between 32-bit and 64-bit results is plausible in the future and tolerances may be the best solution for that.

They are an issue when using sage outside of sage-the-distribution. They make it necessary that either the arb version used is the exact arb version sage-the-distribution uses or that patches are applied to sage. With tolerances we could potentially update sage and arb independently. And this is not only an issue for distributions. It could in the long run also allow sage-the-distribution to use the system's arb version (#24919).

In my opinion ideal sage tests should only fail if something is actually broken in sage, upstream projects or packaging. "broken" here may be an actual error or a api change.
