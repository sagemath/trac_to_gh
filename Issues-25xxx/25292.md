# Issue 25292: Upgrade to Cython 0.29.1

archive/issues_025055.json:
```json
{
    "body": "**Tarball**: https://files.pythonhosted.org/packages/f0/f8/7f406aac4c6919d5a4ce16509bbe059cd256e9ad94bae5ccac14094b7c51/Cython-0.29.1.tar.gz\n\nFollow-up tickets:\n\n- #25288: Enable Cython caching again\n- #26403: Compile Sage with Cython language_level=3str\n\nCC:  @kiwifb @embray @saraedum\n\nBranch/Commit: 4c3e31492939d3de3bff61755045afe0dd40ff00\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Timo Kaufmann\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/25292\n\n",
    "closed_at": "2018-11-30T23:33:49Z",
    "created_at": "2018-05-04T15:12:23Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Upgrade to Cython 0.29.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25292",
    "user": "https://github.com/jdemeyer"
}
```
**Tarball**: https://files.pythonhosted.org/packages/f0/f8/7f406aac4c6919d5a4ce16509bbe059cd256e9ad94bae5ccac14094b7c51/Cython-0.29.1.tar.gz

Follow-up tickets:

- #25288: Enable Cython caching again
- #26403: Compile Sage with Cython language_level=3str

CC:  @kiwifb @embray @saraedum

Branch/Commit: 4c3e31492939d3de3bff61755045afe0dd40ff00

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Timo Kaufmann

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/25292





---

archive/issue_comments_482889.json:
```json
{
    "body": "<a id='comment:1'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482889",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>update milestone 8.3 -> 8.4



---

archive/issue_events_063401.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25292#event-63401"
}
```



---

archive/issue_comments_482890.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,8 @@\n \n - #25284: Move some declarations from Sage to Cython\n - #25288: Enable Cython caching again\n+\n+**Tarball**: https://github.com/cython/cython/archive/0.29b1.tar.gz\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-09-18T08:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482890",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,8 @@
 
 - #25284: Move some declarations from Sage to Cython
 - #25288: Enable Cython caching again
+
+**Tarball**: https://github.com/cython/cython/archive/0.29b1.tar.gz
 
 Comment: 1
 
``````




---

archive/issue_comments_482891.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2018-10-04T12:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482891",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_482892.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#26396\"",
    "created_at": "2018-10-04T12:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482892",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#26396"



---

archive/issue_comments_482893.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+There is no Cython 0.29 yet, but consider this as a metaticket for Cython issues which would be fixed by that.\n \n+- #25284: Move some declarations from Sage to Cython\n+- #25288: Enable Cython caching again\n+\n+**Tarball**: https://github.com/cython/cython/archive/0.29rc2.tar.gz\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-10-04T12:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482893",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
+There is no Cython 0.29 yet, but consider this as a metaticket for Cython issues which would be fixed by that.
 
+- #25284: Move some declarations from Sage to Cython
+- #25288: Enable Cython caching again
+
+**Tarball**: https://github.com/cython/cython/archive/0.29rc2.tar.gz
 
 Comment: 1
 
``````




---

archive/issue_comments_482894.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/upgrade_to_cython_0_29\"",
    "created_at": "2018-10-04T14:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482894",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/upgrade_to_cython_0_29"



---

archive/issue_comments_482895.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-04T15:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_482896.json:
```json
{
    "body": "Changing commit from \"\" to \"32756374dc60e6a34730ae05424a3467701b1e9b\"",
    "created_at": "2018-10-04T15:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "32756374dc60e6a34730ae05424a3467701b1e9b"



---

archive/issue_comments_482897.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n+There is no Cython 0.29 yet, but there is a release candidate\n \n+**Tarball**: https://github.com/cython/cython/archive/0.29rc2.tar.gz\n+\n+Follow-up tickets:\n+\n+- #25288: Enable Cython caching again\n+- #26403: Compile Sage with Cython language_level=3str\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-10-04T15:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482897",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
+There is no Cython 0.29 yet, but there is a release candidate
 
+**Tarball**: https://github.com/cython/cython/archive/0.29rc2.tar.gz
+
+Follow-up tickets:
+
+- #25288: Enable Cython caching again
+- #26403: Compile Sage with Cython language_level=3str
 
 Comment: 1
 
``````




---

archive/issue_comments_482898.json:
```json
{
    "body": "Changing dependencies from \"#26396\" to \"#26396, #26402\"",
    "created_at": "2018-10-04T15:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482898",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#26396" to "#26396, #26402"



---

archive/issue_comments_482899.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+**Tarball**: https://files.pythonhosted.org/packages/f0/66/6309291b19b498b672817bd237caec787d1b18013ee659f17b1ec5844887/Cython-0.29.tar.gz\n \n+Follow-up tickets:\n+\n+- #25288: Enable Cython caching again\n+- #26403: Compile Sage with Cython language_level=3str\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-10-14T20:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482899",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
+**Tarball**: https://files.pythonhosted.org/packages/f0/66/6309291b19b498b672817bd237caec787d1b18013ee659f17b1ec5844887/Cython-0.29.tar.gz
 
+Follow-up tickets:
+
+- #25288: Enable Cython caching again
+- #26403: Compile Sage with Cython language_level=3str
 
 Comment: 1
 
``````




---

archive/issue_comments_482900.json:
```json
{
    "body": "Changing dependencies from \"#26396, #26402\" to \"#26396\"",
    "created_at": "2018-10-14T20:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482900",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#26396, #26402" to "#26396"



---

archive/issue_comments_482901.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-14T21:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_482902.json:
```json
{
    "body": "Changing commit from \"32756374dc60e6a34730ae05424a3467701b1e9b\" to \"f77de1d0e7f90ee12761140500cb8cbbb789ab20\"",
    "created_at": "2018-10-14T21:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "32756374dc60e6a34730ae05424a3467701b1e9b" to "f77de1d0e7f90ee12761140500cb8cbbb789ab20"



---

archive/issue_comments_482903.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-15T08:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482903",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_482904.json:
```json
{
    "body": "<a id='comment:13'></a>Attachment [cython-0.29.log](tarball://root/attachments/some-uuid/ticket25292/cython-0.29.log) by @Konrad127123 created at 2018-10-15 11:13:06\n\nRunning `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).\n\n(The two failing tests in #26450 don't seem to be an issue anymore in 0.29.)",
    "created_at": "2018-10-15T11:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482904",
    "user": "https://github.com/Konrad127123"
}
```

<a id='comment:13'></a>Attachment [cython-0.29.log](tarball://root/attachments/some-uuid/ticket25292/cython-0.29.log) by @Konrad127123 created at 2018-10-15 11:13:06

Running `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).

(The two failing tests in #26450 don't seem to be an issue anymore in 0.29.)



---

archive/issue_comments_482905.json:
```json
{
    "body": "Changing commit from \"f77de1d0e7f90ee12761140500cb8cbbb789ab20\" to \"7ffa94631d3a74861bdde7c467757822297c24e7\"",
    "created_at": "2018-10-23T09:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f77de1d0e7f90ee12761140500cb8cbbb789ab20" to "7ffa94631d3a74861bdde7c467757822297c24e7"



---

archive/issue_comments_482906.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-23T09:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_482907.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2018-10-23T09:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482907",
    "user": "https://github.com/jdemeyer"
}
```

Changing upstream from "N/A" to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_482908.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 Konrad127123]:\n> Running `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).\n\n\nFixed by https://github.com/cython/cython/pull/2674",
    "created_at": "2018-10-23T09:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482908",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Replying to [comment:13 Konrad127123]:
> Running `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).


Fixed by https://github.com/cython/cython/pull/2674



---

archive/issue_comments_482909.json:
```json
{
    "body": "Changing dependencies from \"#26396\" to \"\"",
    "created_at": "2018-10-23T11:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482909",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#26396" to ""



---

archive/issue_comments_482910.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 jdemeyer]:\n> Replying to [comment:13 Konrad127123]:\n> > Running `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).\n\n> \n> Fixed by https://github.com/cython/cython/pull/2674\n\n\nI can confirm that cython now builds with `SAGE_CHECK=yes`. I've not tested it apart from that.",
    "created_at": "2018-10-23T12:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482910",
    "user": "https://github.com/Konrad127123"
}
```

<a id='comment:18'></a>Replying to [comment:16 jdemeyer]:
> Replying to [comment:13 Konrad127123]:
> > Running `make distclean && make cython` with `SAGE_CHECK=yes`, I'm reproducibly getting one test failing (see log).

> 
> Fixed by https://github.com/cython/cython/pull/2674


I can confirm that cython now builds with `SAGE_CHECK=yes`. I've not tested it apart from that.



---

archive/issue_comments_482911.json:
```json
{
    "body": "<a id='comment:19'></a>Can somebody review this please? There are follow-up tickets depending on this one.",
    "created_at": "2018-10-29T22:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482911",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Can somebody review this please? There are follow-up tickets depending on this one.



---

archive/issue_comments_482912.json:
```json
{
    "body": "<a id='comment:20'></a>Does this mean Cython 0.29 will become a hard dependency of Sage?  I don't mind that ofc, but maybe the tickets that depend on it can be done in such a way that checks this (e.g., checks the Cython version before enabling those features).\n\nI'm going to give this a quick check on Cygwin, but I doubt there will be any problem, so positive_review from me if it that works.",
    "created_at": "2018-10-31T12:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482912",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>Does this mean Cython 0.29 will become a hard dependency of Sage?  I don't mind that ofc, but maybe the tickets that depend on it can be done in such a way that checks this (e.g., checks the Cython version before enabling those features).

I'm going to give this a quick check on Cygwin, but I doubt there will be any problem, so positive_review from me if it that works.



---

archive/issue_events_063402.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-31T12:30:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25292#event-63402"
}
```



---

archive/issue_events_063403.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-31T12:30:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25292#event-63403"
}
```



---

archive/issue_comments_482913.json:
```json
{
    "body": "<a id='comment:22'></a>Erik, any updates? This works for me, and I am ready to set a positive review.",
    "created_at": "2018-11-06T05:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482913",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>Erik, any updates? This works for me, and I am ready to set a positive review.



---

archive/issue_comments_482914.json:
```json
{
    "body": "<a id='comment:23'></a>Works for me, AFAICT.  I think my previous question \"Does this mean Cython 0.29 will become a hard dependency of Sage?\" should be answered though.",
    "created_at": "2018-11-06T10:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482914",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>Works for me, AFAICT.  I think my previous question "Does this mean Cython 0.29 will become a hard dependency of Sage?" should be answered though.



---

archive/issue_comments_482915.json:
```json
{
    "body": "<a id='comment:24'></a>I can only really talk about the cycache ticket. There we could of course only enable caching when we find that it actually works.\n\nI guess the same could be done for the other ticket but I do not know enough about it.\n\nAnyway, sure, let's keep that in mind!",
    "created_at": "2018-11-06T12:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482915",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:24'></a>I can only really talk about the cycache ticket. There we could of course only enable caching when we find that it actually works.

I guess the same could be done for the other ticket but I do not know enough about it.

Anyway, sure, let's keep that in mind!



---

archive/issue_comments_482916.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:23 embray]:\n> Does this mean Cython 0.29 will become a hard dependency of Sage?\n\n\nYes. But I don't see why that should be a problem.",
    "created_at": "2018-11-06T12:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482916",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>Replying to [comment:23 embray]:
> Does this mean Cython 0.29 will become a hard dependency of Sage?


Yes. But I don't see why that should be a problem.



---

archive/issue_comments_482917.json:
```json
{
    "body": "<a id='comment:26'></a>It's not necessarily a problem.  It just means that the Cython package on any system that packages Sage must also be updated to 0.29.  This would be a good thing to do anyways: it's just not obvious that it's so simple.  Sage tests Cython very well, but rebuilding every debian package that relies on Cython is an even bigger test.  I think it will probably go fine but we do need to make sure it gets done...",
    "created_at": "2018-11-06T13:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482917",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>It's not necessarily a problem.  It just means that the Cython package on any system that packages Sage must also be updated to 0.29.  This would be a good thing to do anyways: it's just not obvious that it's so simple.  Sage tests Cython very well, but rebuilding every debian package that relies on Cython is an even bigger test.  I think it will probably go fine but we do need to make sure it gets done...



---

archive/issue_comments_482918.json:
```json
{
    "body": "<a id='comment:27'></a>With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.\n\nSo what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.",
    "created_at": "2018-11-06T13:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482918",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.

So what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.



---

archive/issue_comments_482919.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:\n> With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.\n> \n> So what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.\n\n\nThat might be wise, as annoying as it might be.  Hopefully it won't be long though.  Also I'm just using Debian as a general barometer.",
    "created_at": "2018-11-08T15:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482919",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:
> With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.
> 
> So what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.


That might be wise, as annoying as it might be.  Hopefully it won't be long though.  Also I'm just using Debian as a general barometer.



---

archive/issue_comments_482920.json:
```json
{
    "body": "<a id='comment:29'></a>For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.",
    "created_at": "2018-11-26T21:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482920",
    "user": "https://github.com/timokau"
}
```

<a id='comment:29'></a>For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.



---

archive/issue_comments_482921.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 gh-timokau]:\n> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.\n\n\nGentoo main tree, doesn't have it yet. But the sage-on-gentoo repo does have a package ready for when this ticket makes it regardless of the main tree.",
    "created_at": "2018-11-26T21:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482921",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'></a>Replying to [comment:29 gh-timokau]:
> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.


Gentoo main tree, doesn't have it yet. But the sage-on-gentoo repo does have a package ready for when this ticket makes it regardless of the main tree.



---

archive/issue_comments_482922.json:
```json
{
    "body": "<a id='comment:31'></a>Note that Cython 0.29.1 has now been released.",
    "created_at": "2018-11-26T22:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482922",
    "user": "https://github.com/Konrad127123"
}
```

<a id='comment:31'></a>Note that Cython 0.29.1 has now been released.



---

archive/issue_comments_482923.json:
```json
{
    "body": "<a id='comment:32'></a>Actually the Gentoo main tree caught up to me yesterday and 0.29.1 is in the main tree.",
    "created_at": "2018-11-26T23:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482923",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>Actually the Gentoo main tree caught up to me yesterday and 0.29.1 is in the main tree.



---

archive/issue_comments_482924.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-11-27T08:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482924",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_482925.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+**Tarball**: https://files.pythonhosted.org/packages/f0/f8/7f406aac4c6919d5a4ce16509bbe059cd256e9ad94bae5ccac14094b7c51/Cython-0.29.1.tar.gz\n \n+Follow-up tickets:\n+\n+- #25288: Enable Cython caching again\n+- #26403: Compile Sage with Cython language_level=3str\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-11-27T08:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482925",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
+**Tarball**: https://files.pythonhosted.org/packages/f0/f8/7f406aac4c6919d5a4ce16509bbe059cd256e9ad94bae5ccac14094b7c51/Cython-0.29.1.tar.gz
 
+Follow-up tickets:
+
+- #25288: Enable Cython caching again
+- #26403: Compile Sage with Cython language_level=3str
 
 Comment: 1
 
``````




---

archive/issue_comments_482926.json:
```json
{
    "body": "Changing commit from \"7ffa94631d3a74861bdde7c467757822297c24e7\" to \"4c3e31492939d3de3bff61755045afe0dd40ff00\"",
    "created_at": "2018-11-27T09:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7ffa94631d3a74861bdde7c467757822297c24e7" to "4c3e31492939d3de3bff61755045afe0dd40ff00"



---

archive/issue_comments_482927.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-11-27T09:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_482928.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-11-27T09:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482928",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_482929.json:
```json
{
    "body": "<a id='comment:35'></a>Not tested yet...",
    "created_at": "2018-11-27T09:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482929",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>Not tested yet...



---

archive/issue_comments_482930.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:29 gh-timokau]:\n> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.\n\n\nThat's a cool site--I was not aware of it before.  It doesn't look like it tracks conda-forge or cygwin packages either.  I wonder how hard it would be to add trackers for new repositories to the site...",
    "created_at": "2018-11-27T10:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482930",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>Replying to [comment:29 gh-timokau]:
> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.


That's a cool site--I was not aware of it before.  It doesn't look like it tracks conda-forge or cygwin packages either.  I wonder how hard it would be to add trackers for new repositories to the site...



---

archive/issue_comments_482931.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 embray]:\n> Replying to [comment:29 gh-timokau]:\n> > For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.\n\n> \n> That's a cool site--I was not aware of it before.  It doesn't look like it tracks conda-forge or cygwin packages either.  I wonder how hard it would be to add trackers for new repositories to the site...\n\n\nYeah its pretty neat. Nix uses a bot that automatically generates trivial package update PRs based on repology data. I think adding support for another repo would basically sonsist of (1) finding a relibale data source that gives current metadata about all packages and (2) converting that datasource into the format repology expects. There are already issues for [conda-forge](https://github.com/repology/repology/issues/518) and [cygwin](https://github.com/repology/repology/issues/269).",
    "created_at": "2018-11-27T14:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482931",
    "user": "https://github.com/timokau"
}
```

<a id='comment:37'></a>Replying to [comment:36 embray]:
> Replying to [comment:29 gh-timokau]:
> > For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.

> 
> That's a cool site--I was not aware of it before.  It doesn't look like it tracks conda-forge or cygwin packages either.  I wonder how hard it would be to add trackers for new repositories to the site...


Yeah its pretty neat. Nix uses a bot that automatically generates trivial package update PRs based on repology data. I think adding support for another repo would basically sonsist of (1) finding a relibale data source that gives current metadata about all packages and (2) converting that datasource into the format repology expects. There are already issues for [conda-forge](https://github.com/repology/repology/issues/518) and [cygwin](https://github.com/repology/repology/issues/269).



---

archive/issue_comments_482932.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:27 jdemeyer]:\n> With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.\n> \n> So what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.\n\n\nBack to topic: So in its current state this ticket is not backwards compatible?",
    "created_at": "2018-11-27T14:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482932",
    "user": "https://github.com/timokau"
}
```

<a id='comment:38'></a>Replying to [comment:27 jdemeyer]:
> With only this ticket applied (not the follow-up tickets), it requires only minor adjustments to support both Cython 0.28 and Cython 0.29.
> 
> So what you are saying is maybe more an argument to postpone the follow-up tickets until we know for sure that Debian is ready for Cython 0.29.


Back to topic: So in its current state this ticket is not backwards compatible?



---

archive/issue_comments_482933.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:29 gh-timokau]:\n> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.\n\n\nThe curating is imperfect and for some distros it is listed under \"cython\" and for other under \"python:cython\" https://repology.org/metapackage/python:cython/versions not much you can do about that.",
    "created_at": "2018-11-27T19:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482933",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:39'></a>Replying to [comment:29 gh-timokau]:
> For what its worth, [here is the status of cython on various distros](https://repology.org/metapackage/cython/versions) and [these are the distros that package sage](https://repology.org/metapackage/sagemath/versions). Debian Unstable hasn't upgraded yet. Arch and Nix have. Gentoo isn't listed for some reason.


The curating is imperfect and for some distros it is listed under "cython" and for other under "python:cython" https://repology.org/metapackage/python:cython/versions not much you can do about that.



---

archive/issue_comments_482934.json:
```json
{
    "body": "<a id='comment:40'></a>You can report it (I just did). Every time I've done that it has been resolved within a couple of hours.",
    "created_at": "2018-11-27T22:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482934",
    "user": "https://github.com/timokau"
}
```

<a id='comment:40'></a>You can report it (I just did). Every time I've done that it has been resolved within a couple of hours.



---

archive/issue_comments_482935.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:38 gh-timokau]:\n> Back to topic: So in its current state this ticket is not backwards compatible?\n\n\nNo, it is not. The difference is really small though, packagers that insist on Cython 0.28 can easily revert this patch.",
    "created_at": "2018-11-28T11:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482935",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>Replying to [comment:38 gh-timokau]:
> Back to topic: So in its current state this ticket is not backwards compatible?


No, it is not. The difference is really small though, packagers that insist on Cython 0.28 can easily revert this patch.



---

archive/issue_comments_482936.json:
```json
{
    "body": "<a id='comment:42'></a>Okay since the majority have already switched (all but debian I think) and its very possible that debian will have switched by the time 8.5 is released, I think we can go forward. Any other opinions?",
    "created_at": "2018-11-28T11:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482936",
    "user": "https://github.com/timokau"
}
```

<a id='comment:42'></a>Okay since the majority have already switched (all but debian I think) and its very possible that debian will have switched by the time 8.5 is released, I think we can go forward. Any other opinions?



---

archive/issue_comments_482937.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:41 jdemeyer]:\n> Replying to [comment:38 gh-timokau]:\n> > Back to topic: So in its current state this ticket is not backwards compatible?\n\n> \n> No, it is not. The difference is really small though, packagers that insist on Cython 0.28 can easily revert this patch.\n\n\nI think that's a bit presumptuous.  But I agree there's no reason for anyone to hold back up on updating Cython and that it should/will happen before long so I don't object to moving forward on this.",
    "created_at": "2018-11-29T09:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482937",
    "user": "https://github.com/embray"
}
```

<a id='comment:43'></a>Replying to [comment:41 jdemeyer]:
> Replying to [comment:38 gh-timokau]:
> > Back to topic: So in its current state this ticket is not backwards compatible?

> 
> No, it is not. The difference is really small though, packagers that insist on Cython 0.28 can easily revert this patch.


I think that's a bit presumptuous.  But I agree there's no reason for anyone to hold back up on updating Cython and that it should/will happen before long so I don't object to moving forward on this.



---

archive/issue_comments_482938.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Timo Kaufmann\"",
    "created_at": "2018-11-29T09:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482938",
    "user": "https://github.com/timokau"
}
```

Changing reviewer from "" to "Timo Kaufmann"



---

archive/issue_comments_482939.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-29T09:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482939",
    "user": "https://github.com/timokau"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_482940.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/upgrade_to_cython_0_29\" to \"4c3e31492939d3de3bff61755045afe0dd40ff00\"",
    "created_at": "2018-11-30T23:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482940",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/upgrade_to_cython_0_29" to "4c3e31492939d3de3bff61755045afe0dd40ff00"



---

archive/issue_comments_482941.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-30T23:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25292#issuecomment-482941",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_063404.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-30T23:33:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25292",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25292#event-63404"
}
```
