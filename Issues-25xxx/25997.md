# Issue 25997: Fix bug in matrix space with prescribed implementation

archive/issues_025760.json:
```json
{
    "body": "Currently, with SharedMeatAxe being installed, I get\n\n```\nsage: MS = MatrixSpace(GF(3),5, implementation='meataxe')\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-3-d39fb0c2de0f> in <module>()\n----> 1 MS = MatrixSpace(GF(Integer(3)),Integer(5), implementation='meataxe')\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1639)()\n    327         \"\"\"\n    328         if cls.classcall is not None:\n--> 329             return cls.classcall(cls, *args, **kwds)\n    330         else:\n    331             # Fast version of type.__call__(cls, *args, **kwds)\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in __classcall__(cls, base_ring, nrows, ncols, sparse, implementation)\n    478             raise OverflowError(\"number of rows and columns may be at most %s\" % sys.maxsize)\n    479 \n--> 480         matrix_cls = get_matrix_class(base_ring, nrows, ncols, sparse, implementation)\n    481         return super(MatrixSpace, cls).__classcall__(\n    482                 cls, base_ring, nrows, ncols, sparse, matrix_cls)\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in get_matrix_class(R, nrows, ncols, sparse, implementation)\n    306         # generic fallback\n    307         if implementation != 'generic' and implementation is not None:\n--> 308             raise ValueError(\"unknown matrix implementation %r over %r\" % (implementation, R))\n    309         else:\n    310             return matrix_generic_dense.Matrix_generic_dense\n\nValueError: unknown matrix implementation 'meataxe' over Finite Field of size 3\n```\n\nI am unsure what component to choose. The bug isn't really about the optional package itself.\n\n**CC:**  @videlec @jdemeyer @tscrim\n\n**Keywords:** meataxe matrix space\n\n**Branch/Commit:** [7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Simon King\n\nIssue created by migration from https://trac.sagemath.org/ticket/25997\n\n",
    "closed_at": "2020-02-25T19:51:14Z",
    "created_at": "2018-08-04T10:17:46Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Fix bug in matrix space with prescribed implementation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25997",
    "user": "https://github.com/simon-king-jena"
}
```
Currently, with SharedMeatAxe being installed, I get

```
sage: MS = MatrixSpace(GF(3),5, implementation='meataxe')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-3-d39fb0c2de0f> in <module>()
----> 1 MS = MatrixSpace(GF(Integer(3)),Integer(5), implementation='meataxe')

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1639)()
    327         """
    328         if cls.classcall is not None:
--> 329             return cls.classcall(cls, *args, **kwds)
    330         else:
    331             # Fast version of type.__call__(cls, *args, **kwds)

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in __classcall__(cls, base_ring, nrows, ncols, sparse, implementation)
    478             raise OverflowError("number of rows and columns may be at most %s" % sys.maxsize)
    479 
--> 480         matrix_cls = get_matrix_class(base_ring, nrows, ncols, sparse, implementation)
    481         return super(MatrixSpace, cls).__classcall__(
    482                 cls, base_ring, nrows, ncols, sparse, matrix_cls)

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in get_matrix_class(R, nrows, ncols, sparse, implementation)
    306         # generic fallback
    307         if implementation != 'generic' and implementation is not None:
--> 308             raise ValueError("unknown matrix implementation %r over %r" % (implementation, R))
    309         else:
    310             return matrix_generic_dense.Matrix_generic_dense

ValueError: unknown matrix implementation 'meataxe' over Finite Field of size 3
```

I am unsure what component to choose. The bug isn't really about the optional package itself.

**CC:**  @videlec @jdemeyer @tscrim

**Keywords:** meataxe matrix space

**Branch/Commit:** [7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)

**Reviewer:** Vincent Delecroix

**Author:** Simon King

Issue created by migration from https://trac.sagemath.org/ticket/25997





---

archive/issue_comments_404628.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"meataxe matrix space\".",
    "created_at": "2018-08-04T10:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404628",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing keywords** from "" to "meataxe matrix space".



---

archive/issue_comments_404629.json:
```json
{
    "body": "<a id='comment:2'></a>\n\n```\nsage: from sage.matrix.matrix_space import get_matrix_class\nsage: get_matrix_class(GF(3),4,4,False, 'meataxe')\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-2-9827f9b2c640> in <module>()\n----> 1 get_matrix_class(GF(Integer(3)),Integer(4),Integer(4),False, 'meataxe')\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in get_matrix_class(R, nrows, ncols, sparse, implementation)\n    306         # generic fallback\n    307         if implementation != 'generic' and implementation is not None:\n--> 308             raise ValueError(\"unknown matrix implementation %r over %r\" % (implementation, R))\n    309         else:\n    310             return matrix_generic_dense.Matrix_generic_dense\n\nValueError: unknown matrix implementation 'meataxe' over Finite Field of size 3\n```\n\nOddly enough, it turns out that `get_matrix_class` doesn't even get as far as testing whether the base ring is a finite field.",
    "created_at": "2018-08-04T10:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404629",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>

```
sage: from sage.matrix.matrix_space import get_matrix_class
sage: get_matrix_class(GF(3),4,4,False, 'meataxe')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-2-9827f9b2c640> in <module>()
----> 1 get_matrix_class(GF(Integer(3)),Integer(4),Integer(4),False, 'meataxe')

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in get_matrix_class(R, nrows, ncols, sparse, implementation)
    306         # generic fallback
    307         if implementation != 'generic' and implementation is not None:
--> 308             raise ValueError("unknown matrix implementation %r over %r" % (implementation, R))
    309         else:
    310             return matrix_generic_dense.Matrix_generic_dense

ValueError: unknown matrix implementation 'meataxe' over Finite Field of size 3
```

Oddly enough, it turns out that `get_matrix_class` doesn't even get as far as testing whether the base ring is a finite field.



---

archive/issue_comments_404630.json:
```json
{
    "body": "<a id='comment:3'></a>\nGosh, the bug is in the test for an integer mod ring:\n\n```\nsage: sage.rings.finite_rings.integer_mod_ring.is_IntegerModRing(GF(3))\nTrue\n```\n\nSo, apparently its implementation has changed. I am not gonna argue about `is_IntegerModRing`, because mathematically `GF(3)` IS an integer mod ring. but then to the very least `get_matrix_class` should first test for finite fields and only later for integer mod rings.",
    "created_at": "2018-08-04T10:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404630",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
Gosh, the bug is in the test for an integer mod ring:

```
sage: sage.rings.finite_rings.integer_mod_ring.is_IntegerModRing(GF(3))
True
```

So, apparently its implementation has changed. I am not gonna argue about `is_IntegerModRing`, because mathematically `GF(3)` IS an integer mod ring. but then to the very least `get_matrix_class` should first test for finite fields and only later for integer mod rings.



---

archive/issue_comments_404631.json:
```json
{
    "body": "<a id='comment:4'></a>\nA finite prime field is at the same time an integer mod ring. So, if the implementation \"meataxe\" is requested for a matrix over a finite prime field, this case should be dealt with in the \"if\" clause testing for an integer mod ring. With that fix, at least the tests in src/sage/matrix pass. So, I'll push the branch in a minute...",
    "created_at": "2018-08-04T10:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404631",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
A finite prime field is at the same time an integer mod ring. So, if the implementation "meataxe" is requested for a matrix over a finite prime field, this case should be dealt with in the "if" clause testing for an integer mod ring. With that fix, at least the tests in src/sage/matrix pass. So, I'll push the branch in a minute...



---

archive/issue_comments_404632.json:
```json
{
    "body": "**Branch:** [u/SimonKing/matrix_space_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/matrix_space_meataxe)",
    "created_at": "2018-08-04T10:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404632",
    "user": "https://github.com/simon-king-jena"
}
```

**Branch:** [u/SimonKing/matrix_space_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/matrix_space_meataxe)



---

archive/issue_comments_404633.json:
```json
{
    "body": "**Commit:** [9c67d1a9bc7639ad292739d9beb3813dd14aa117](https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117)",
    "created_at": "2018-08-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404633",
    "user": "https://github.com/simon-king-jena"
}
```

**Commit:** [9c67d1a9bc7639ad292739d9beb3813dd14aa117](https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117)



---

archive/issue_events_234809.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-04T10:56:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234809"
}
```



---

archive/issue_comments_404634.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2018-08-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404634",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_404635.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117\">9c67d1a</a></td><td><code>Fix: Allow to choose meataxe as backend for matrices over a finite prime field</code></td></tr></table>\n",
    "created_at": "2018-08-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404635",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117">9c67d1a</a></td><td><code>Fix: Allow to choose meataxe as backend for matrices over a finite prime field</code></td></tr></table>




---

archive/issue_comments_404636.json:
```json
{
    "body": "<a id='comment:7'></a>\nI don't really like the logic of the code and the code duplication. That being said, this isn't your fault and maybe it would be too much to ask to refactor the code just to fix this bug.",
    "created_at": "2018-08-04T11:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404636",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I don't really like the logic of the code and the code duplication. That being said, this isn't your fault and maybe it would be too much to ask to refactor the code just to fix this bug.



---

archive/issue_comments_404637.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A7):\n> I don't really like the logic of the code and the code duplication. That being said, this isn't your fault and maybe it would be too much to ask to refactor the code just to fix this bug.\n\n\nI'll try to see if I can simplify it a bit.",
    "created_at": "2018-08-04T11:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404637",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A7):
> I don't really like the logic of the code and the code duplication. That being said, this isn't your fault and maybe it would be too much to ask to refactor the code just to fix this bug.


I'll try to see if I can simplify it a bit.



---

archive/issue_comments_404638.json:
```json
{
    "body": "<a id='comment:9'></a>\nI guess the logic should be:\n1. Is a specific implementation requested? If this is the case, test whether this specific implementation supports the given base ring.\n2. Otherwise, choose a default implementation according to whether R is finite, a field, a quotient ring, etc.\n\nCurrently, these two tasks are intertwined. First, some properties of the ring are checked and only then it is considered whether an implementation is requested.",
    "created_at": "2018-08-04T11:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404638",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>
I guess the logic should be:
1. Is a specific implementation requested? If this is the case, test whether this specific implementation supports the given base ring.
2. Otherwise, choose a default implementation according to whether R is finite, a field, a quotient ring, etc.

Currently, these two tasks are intertwined. First, some properties of the ring are checked and only then it is considered whether an implementation is requested.



---

archive/issue_comments_404639.json:
```json
{
    "body": "**Changing commit** from \"[9c67d1a9bc7639ad292739d9beb3813dd14aa117](https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117)\" to \"[427ca0673c084319feffc85ed7eb6c60c6107dba](https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba)\".",
    "created_at": "2018-08-04T13:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9c67d1a9bc7639ad292739d9beb3813dd14aa117](https://github.com/sagemath/sagetrac-mirror/commit/9c67d1a9bc7639ad292739d9beb3813dd14aa117)" to "[427ca0673c084319feffc85ed7eb6c60c6107dba](https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba)".



---

archive/issue_comments_404640.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba\">427ca06</a></td><td><code>Untangle the logic of choosing a matrix implementation</code></td></tr></table>\n",
    "created_at": "2018-08-04T13:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba">427ca06</a></td><td><code>Untangle the logic of choosing a matrix implementation</code></td></tr></table>




---

archive/issue_comments_404641.json:
```json
{
    "body": "<a id='comment:11'></a>\nI think the new commit provides a cleaner way of choosing the implementation for a matrix. The tests in src/sage/matrix pass (with optional meataxe), but I didn't run the full test suite yet.\n\nStill needs review, of course.",
    "created_at": "2018-08-04T13:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404641",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
I think the new commit provides a cleaner way of choosing the implementation for a matrix. The tests in src/sage/matrix pass (with optional meataxe), but I didn't run the full test suite yet.

Still needs review, of course.



---

archive/issue_comments_404642.json:
```json
{
    "body": "<a id='comment:13'></a>\nJust two quick minor comments:\n\nI believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.\n\nI don't think you need the nested `if` inside of the `CDF` case (as you already have `not implementation` being `True`).",
    "created_at": "2018-08-04T22:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404642",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Just two quick minor comments:

I believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.

I don't think you need the nested `if` inside of the `CDF` case (as you already have `not implementation` being `True`).



---

archive/issue_comments_404643.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [tscrim](#comment%3A13):\n> Just two quick minor comments:\n> \n> I believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.\n> \n> I don't think you need the nested `if` inside of the `CDF` case (as you already have `not implementation` being `True`).\n\n\nI just notice that I forgot to react.\n\nDo you recall what \"mild behaviour change\" you see?",
    "created_at": "2019-07-21T07:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404643",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:14'></a>
Replying to [tscrim](#comment%3A13):
> Just two quick minor comments:
> 
> I believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.
> 
> I don't think you need the nested `if` inside of the `CDF` case (as you already have `not implementation` being `True`).


I just notice that I forgot to react.

Do you recall what "mild behaviour change" you see?



---

archive/issue_comments_404644.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [SimonKing](#comment%3A14):\n> Replying to [tscrim](#comment%3A13):\n> > Just two quick minor comments:\n> > \n> > I believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.\n\n>\n> Do you recall what \"mild behaviour change\" you see?\n\n\nBefore this would result in an error, but with you change, it now should get treated as if you passed `None`. It is not a bad thing IMO, but just something I noticed and am pointing out.",
    "created_at": "2019-07-21T07:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404644",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Replying to [SimonKing](#comment%3A14):
> Replying to [tscrim](#comment%3A13):
> > Just two quick minor comments:
> > 
> > I believe there is a very mild behavior change when passing `implementation=''` (or `0` or `[]`, etc.) as now that will be treated the same as `implementation=None`.

>
> Do you recall what "mild behaviour change" you see?


Before this would result in an error, but with you change, it now should get treated as if you passed `None`. It is not a bad thing IMO, but just something I noticed and am pointing out.



---

archive/issue_events_234810.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-21T15:38:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234810"
}
```



---

archive/issue_events_234811.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-21T15:38:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234811"
}
```



---

archive/issue_events_234812.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234812"
}
```



---

archive/issue_events_234813.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234813"
}
```



---

archive/issue_comments_404645.json:
```json
{
    "body": "<a id='comment:17'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404645",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_234814.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T15:45:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234814"
}
```



---

archive/issue_events_234815.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T15:45:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234815"
}
```



---

archive/issue_comments_404646.json:
```json
{
    "body": "<a id='comment:18'></a>\nI also think that `if implementation is None` should be prefered to `if not implementation`.",
    "created_at": "2020-02-22T15:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404646",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
I also think that `if implementation is None` should be prefered to `if not implementation`.



---

archive/issue_comments_404647.json:
```json
{
    "body": "<a id='comment:19'></a>\nCould you put appropriate spacings as any other example in the file?\n\n```\nsage: get_matrix_class(GF(25,'x'),4,4,False, 'meataxe')\n```\nshould be\n\n```\nsage: get_matrix_class(GF(25, 'x'), 4, 4, False, 'meataxe')\n```",
    "created_at": "2020-02-22T15:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404647",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
Could you put appropriate spacings as any other example in the file?

```
sage: get_matrix_class(GF(25,'x'),4,4,False, 'meataxe')
```
should be

```
sage: get_matrix_class(GF(25, 'x'), 4, 4, False, 'meataxe')
```



---

archive/issue_comments_404648.json:
```json
{
    "body": "<a id='comment:20'></a>\nWhy am I getting errors when checking out the ticket branch?\n\n```\nremote branch: u/SimonKing/matrix_space_meataxe\n\nFrom git://trac.sagemath.org/sage\n * branch                  u/SimonKing/matrix_space_meataxe -> FETCH_HEAD\n\nTraceback (most recent call last):\n  File \"/home/king/.local/bin/git-trac\", line 18, in <module>\n    cmdline.launch()\n  File \"/home/king/Sage/git/git-trac-command/git_trac/cmdline.py\", line 224, in launch\n    app.pull(args.ticket_or_branch)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/app.py\", line 93, in pull\n    self.repo.pull(remote)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_repository.py\", line 190, in pull\n    self.git.echo.merge('FETCH_HEAD')\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 341, in meth\n    return self.execute(git_cmd, *args, **kwds)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 98, in execute\n    popen_stderr=subprocess.PIPE)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 263, in _run\n    raise GitError(result)\ngit_trac.git_error.GitError: git returned with non-zero exit code (1) when executing \"git merge FETCH_HEAD\"\n    STDOUT: Auto-merging src/sage/matrix/matrix_space.py\n    STDOUT: CONFLICT (content): Merge conflict in src/sage/matrix/matrix_space.py\n    STDOUT: Automatic merge failed; fix conflicts and then commit the result.\n    STDERR: Recorded preimage for 'src/sage/matrix/matrix_space.py'\n```\nI guess I will delete my local branch and try again.",
    "created_at": "2020-02-22T16:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404648",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'></a>
Why am I getting errors when checking out the ticket branch?

```
remote branch: u/SimonKing/matrix_space_meataxe

From git://trac.sagemath.org/sage
 * branch                  u/SimonKing/matrix_space_meataxe -> FETCH_HEAD

Traceback (most recent call last):
  File "/home/king/.local/bin/git-trac", line 18, in <module>
    cmdline.launch()
  File "/home/king/Sage/git/git-trac-command/git_trac/cmdline.py", line 224, in launch
    app.pull(args.ticket_or_branch)
  File "/home/king/Sage/git/git-trac-command/git_trac/app.py", line 93, in pull
    self.repo.pull(remote)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_repository.py", line 190, in pull
    self.git.echo.merge('FETCH_HEAD')
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 341, in meth
    return self.execute(git_cmd, *args, **kwds)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 98, in execute
    popen_stderr=subprocess.PIPE)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 263, in _run
    raise GitError(result)
git_trac.git_error.GitError: git returned with non-zero exit code (1) when executing "git merge FETCH_HEAD"
    STDOUT: Auto-merging src/sage/matrix/matrix_space.py
    STDOUT: CONFLICT (content): Merge conflict in src/sage/matrix/matrix_space.py
    STDOUT: Automatic merge failed; fix conflicts and then commit the result.
    STDERR: Recorded preimage for 'src/sage/matrix/matrix_space.py'
```
I guess I will delete my local branch and try again.



---

archive/issue_comments_404649.json:
```json
{
    "body": "**Changing commit** from \"[427ca0673c084319feffc85ed7eb6c60c6107dba](https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba)\" to \"[6c9edb6f58370c17c754bf575386d2e901d75cb8](https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8)\".",
    "created_at": "2020-02-22T16:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[427ca0673c084319feffc85ed7eb6c60c6107dba](https://github.com/sagemath/sagetrac-mirror/commit/427ca0673c084319feffc85ed7eb6c60c6107dba)" to "[6c9edb6f58370c17c754bf575386d2e901d75cb8](https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8)".



---

archive/issue_comments_404650.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8\">6c9edb6</a></td><td><code>Fix spacing</code></td></tr></table>\n",
    "created_at": "2020-02-22T16:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8">6c9edb6</a></td><td><code>Fix spacing</code></td></tr></table>




---

archive/issue_events_234816.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2020-02-22T16:22:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234816"
}
```



---

archive/issue_events_234817.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2020-02-22T16:22:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234817"
}
```



---

archive/issue_comments_404651.json:
```json
{
    "body": "<a id='comment:23'></a>\nI did some global cleaning. If it fits you, you can set positive review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9\">7741f08</a></td><td><code>25997: uniformize error message and code organization</code></td></tr></table>\n",
    "created_at": "2020-02-22T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404651",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
I did some global cleaning. If it fits you, you can set positive review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9">7741f08</a></td><td><code>25997: uniformize error message and code organization</code></td></tr></table>




---

archive/issue_comments_404652.json:
```json
{
    "body": "**Changing commit** from \"[6c9edb6f58370c17c754bf575386d2e901d75cb8](https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8)\" to \"[7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)\".",
    "created_at": "2020-02-22T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404652",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[6c9edb6f58370c17c754bf575386d2e901d75cb8](https://github.com/sagemath/sagetrac-mirror/commit/6c9edb6f58370c17c754bf575386d2e901d75cb8)" to "[7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)".



---

archive/issue_comments_404653.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2020-02-22T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404653",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_404654.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/matrix_space_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/matrix_space_meataxe)\" to \"[public/25997](https://github.com/sagemath/sagetrac-mirror/tree/public/25997)\".",
    "created_at": "2020-02-22T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404654",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/SimonKing/matrix_space_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/matrix_space_meataxe)" to "[public/25997](https://github.com/sagemath/sagetrac-mirror/tree/public/25997)".



---

archive/issue_comments_404655.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [vdelecroix](#comment%3A23):\n> I did some global cleaning. If it fits you, you can set positive review.\n> \n> ---\n> **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9\">7741f08</a></td><td><code>25997: uniformize error message and code organization</code></td></tr></table>\n\n\nLooks good, but I'd like to wait till there is a green blob... (or tests pass on my laptop, at least...).",
    "created_at": "2020-02-22T16:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404655",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:24'></a>
Replying to [vdelecroix](#comment%3A23):
> I did some global cleaning. If it fits you, you can set positive review.
> 
> ---
> **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9">7741f08</a></td><td><code>25997: uniformize error message and code organization</code></td></tr></table>


Looks good, but I'd like to wait till there is a green blob... (or tests pass on my laptop, at least...).



---

archive/issue_events_234818.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2020-02-23T11:55:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234818"
}
```



---

archive/issue_events_234819.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2020-02-23T11:55:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234819"
}
```



---

archive/issue_comments_404656.json:
```json
{
    "body": "<a id='comment:25'></a>\nTests pass both without and with meataxe installed. Hence, I guess it is positive review.",
    "created_at": "2020-02-23T11:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404656",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:25'></a>
Tests pass both without and with meataxe installed. Hence, I guess it is positive review.



---

archive/issue_comments_404657.json:
```json
{
    "body": "**Changing branch** from \"[public/25997](https://github.com/sagemath/sagetrac-mirror/tree/public/25997)\" to \"[7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)\".",
    "created_at": "2020-02-25T19:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25997#issuecomment-404657",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/25997](https://github.com/sagemath/sagetrac-mirror/tree/public/25997)" to "[7741f086c35387969cf1b41cf30c3dd320b932e9](https://github.com/sagemath/sagetrac-mirror/commit/7741f086c35387969cf1b41cf30c3dd320b932e9)".



---

archive/issue_events_234820.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-25T19:51:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234820"
}
```



---

archive/issue_events_234821.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-25T19:51:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25997",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25997#event-234821"
}
```
