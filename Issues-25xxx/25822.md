# Issue 25822: integral computation with giac crashes giac

archive/issues_025585.json:
```json
{
    "assignees": [],
    "body": "As reported on [this Ask Sage question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/), Giac crashes on the following integral:\n\n```\nsage: print(version())\nSageMath version 8.3.rc0, Release Date: 2018-07-08\nsage: a, b, c, d, e, x = SR.var('a b c d e x')\nsage: F = sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4\nsage: FF = integrate(F, x, algorithm='giac')\nGiac crashed -- automatically restarting.\nsage:\n```\n\nThis is fixed upstream and will be part of the next stable version of Giac.\n\nAnother issue when using Giac for integration is the following:\n\n```\nsage: print(version())\nSageMath version 8.3.rc0, Release Date: 2018-07-08\nsage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\nsage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\nsage: GG = integrate(G, x, algorithm='giac')\nsage: GG\nDone\nsage:\n```\n\nQuoting Frederic Han's comment (with minor edits):\n\n> this is a bug of the pexpect Giac interface that takes the string\n> representation of the Giac output. The computation is done in Giac\n> but when the output is large Giac just prints Done, and that is\n> the string that the pxepect interface gets. It is not specific to\n> integrate: it will concern all large Giac output.\n\nQuoting Bernard Parisse's comment:\n\n> The maximal size of objects that will be printed should be\n> controllable with the environment variable `GIAC_TAILLEMAX`\n> (default 1000). Size is not the length of the printed string,\n> but the size of the `giac::gen` as defined in `symbolic.h`:\n> \n> ```\n> unsigned taille(const gen & g,unsigned max);\n> ```\n\n\nDepends on #26315\n\nCC:  @frederichan-IMJPRG @sagetrac-parisse @slel\n\nKeywords: **giac, integrate, crash, pexpect**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/25822_\n\n",
    "closed_at": "2019-02-26T13:58:00Z",
    "created_at": "2018-07-11T11:06:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "integral computation with giac crashes giac",
    "type": "issue",
    "updated_at": "2019-02-26T13:58:00Z",
    "url": "https://github.com/sagemath/sage/issues/25822",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
As reported on [this Ask Sage question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/), Giac crashes on the following integral:

```
sage: print(version())
SageMath version 8.3.rc0, Release Date: 2018-07-08
sage: a, b, c, d, e, x = SR.var('a b c d e x')
sage: F = sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4
sage: FF = integrate(F, x, algorithm='giac')
Giac crashed -- automatically restarting.
sage:
```

This is fixed upstream and will be part of the next stable version of Giac.

Another issue when using Giac for integration is the following:

```
sage: print(version())
SageMath version 8.3.rc0, Release Date: 2018-07-08
sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
sage: GG = integrate(G, x, algorithm='giac')
sage: GG
Done
sage:
```

Quoting Frederic Han's comment (with minor edits):

> this is a bug of the pexpect Giac interface that takes the string
> representation of the Giac output. The computation is done in Giac
> but when the output is large Giac just prints Done, and that is
> the string that the pxepect interface gets. It is not specific to
> integrate: it will concern all large Giac output.

Quoting Bernard Parisse's comment:

> The maximal size of objects that will be printed should be
> controllable with the environment variable `GIAC_TAILLEMAX`
> (default 1000). Size is not the length of the printed string,
> but the size of the `giac::gen` as defined in `symbolic.h`:
> 
> ```
> unsigned taille(const gen & g,unsigned max);
> ```


Depends on #26315

CC:  @frederichan-IMJPRG @sagetrac-parisse @slel

Keywords: **giac, integrate, crash, pexpect**

Upstream: **Fixed upstream, but not in a stable release.**

_Issue created by migration from https://trac.sagemath.org/ticket/25822_





---

archive/issue_events_338802.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-07-11T11:06:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338802"
}
```



---

archive/issue_events_338803.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-07-11T11:06:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338803"
}
```



---

archive/issue_events_338804.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-07-11T11:06:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338804"
}
```



---

archive/issue_events_338805.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2018-07-11T11:06:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338805"
}
```



---

archive/issue_comments_399375.json:
```json
{
    "body": "Changed keywords from **** to **giac, integrate**",
    "created_at": "2018-07-11T14:20:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399375",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **giac, integrate**



---

archive/issue_comments_399376.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nHere is another bug in GIAC/XCAS, may be it should be added to above? since it is also in integrate? I did not know if I should open a new one or not, since it is same system. Here it is. This is a bug in giac used by sagemath. It returns \"done\" as result of integrate.\n\n```\nsage: version()\n'SageMath version 8.3.rc0, Release Date: 2018-07-08'\nsage: var('x g b f n c a d');\nsage: integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3),x, algorithm=\"giac\")\nDone\nsage: \n```",
    "created_at": "2018-07-11T23:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399376",
    "user": "https://github.com/nasser1"
}
```

<div id="comment:2" align="right">Comment 2</div>

Here is another bug in GIAC/XCAS, may be it should be added to above? since it is also in integrate? I did not know if I should open a new one or not, since it is same system. Here it is. This is a bug in giac used by sagemath. It returns "done" as result of integrate.

```
sage: version()
'SageMath version 8.3.rc0, Release Date: 2018-07-08'
sage: var('x g b f n c a d');
sage: integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3),x, algorithm="giac")
Done
sage: 
```



---

archive/issue_comments_399377.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThis is expected, if the output is too large.\n\n- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+k=integrate(1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3),x)&+factor(diff(k))&) (open link with Firefox)",
    "created_at": "2018-07-12T04:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399377",
    "user": "https://github.com/sagetrac-parisse"
}
```

<div id="comment:3" align="right">Comment 3</div>

This is expected, if the output is too large.

- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+k=integrate(1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3),x)&+factor(diff(k))&) (open link with Firefox)



---

archive/issue_comments_399378.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nIndeed, this is a bug of the pexpect giac interface that takes the string representation of the giac output. The computation is done in giac but when the output is large giac just prints Done, and that is this string that the pxepect interface get. It is not typical for integrate it will concern  all large output. \n\nBernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?\n\nNote that this problem doesn't appear in giacpy_sage (optionnal package)\n\n```\nsage: var('x g b f n c a d');\nsage: F=(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3))\nsage: \nsage: integrate(F,x, algorithm=\"giac\")\nDone\nsage: from giacpy_sage import libgiac\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\nHelp file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found\nAdded 0 synonyms\nsage: libgiac(F).integrate(x)\n(2*a*d^2*g-a*d*f*exp(1)+3*a*d*g*x*exp(1)-a*f*x*exp(1)^2+a*g*x^2*exp(1)^2+2*b*d^2*g*n*ln(d+x*exp(1))+2*b*d^2*g*ln(c)-b*d*f*n*exp(1)*ln(d+x*exp(1))-b*d*f*n*exp(1)-b*d*f*exp(1)*ln(c)+3*b*d*g*n*x*exp(1)*ln(d+x*exp(1))-b*d*g*n*x*exp(1)+3*b*d*g*x*exp(1)*ln(c)-b*f*n*x*exp(1)^2*ln(d+x*exp(1))-b*f*n*x*exp(1)^2-b*f*x*exp(1)^2*ln(c)+b*g*n*x^2*exp(1)^2*ln(d+x*exp(1))-b*g*n*x^2*exp(1)^2+b*g*x^2*exp(1)^2*ln(c))/(2*a^2*b^2*f^3*n^2*exp(1)^2+6*a^2*b^2*f^2*g*n^2*x*exp(1)^2+6*a^2*b^2*f*g^2*n^2*x^2*exp(1)^2+2*a^2*b^2*g^3*n^2*x^3*exp(1)^2+4*a*b^3*f^3*n^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*f^3*n^2*exp(1)^2*ln(c)+12*a*b^3*f^2*g*n^3*x*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f^2*g*n^2*x*exp(1)^2*ln(c)+12*a*b^3*f*g^2*n^3*x^2*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f*g^2*n^2*x^2*exp(1)^2*ln(c)+4*a*b^3*g^3*n^3*x^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*g^3*n^2*x^3*exp(1)^2*ln(c)+2*b^4*f^3*n^4*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*f^3*n^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*f^3*n^2*exp(1)^2*ln(c)^2+6*b^4*f^2*g*n^4*x*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f^2*g*n^3*x*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f^2*g*n^2*x*exp(1)^2*ln(c)^2+6*b^4*f*g^2*n^4*x^2*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f*g^2*n^3*x^2*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f*g^2*n^2*x^2*exp(1)^2*ln(c)^2+2*b^4*g^3*n^4*x^3*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*g^3*n^3*x^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*g^3*n^2*x^3*exp(1)^2*ln(c)^2)+integrate((-x^2*g^2*exp(1)^2+4*x*f*g*exp(1)^2-6*x*g^2*exp(1)*d-f^2*exp(1)^2+6*f*g*exp(1)*d-6*g^2*d^2)/(-2*ln(d+x*exp(1))*x^4*g^4*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x^3*f*g^3*b^3*n^3*exp(1)^2-12*ln(d+x*exp(1))*x^2*f^2*g^2*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x*f^3*g*b^3*n^3*exp(1)^2-2*ln(d+x*exp(1))*f^4*b^3*n^3*exp(1)^2-2*x^4*a*g^4*b^2*n^2*exp(1)^2-2*x^4*g^4*b^3*n^2*ln(c)*exp(1)^2-8*x^3*a*f*g^3*b^2*n^2*exp(1)^2-8*x^3*f*g^3*b^3*n^2*ln(c)*exp(1)^2-12*x^2*a*f^2*g^2*b^2*n^2*exp(1)^2-12*x^2*f^2*g^2*b^3*n^2*ln(c)*exp(1)^2-8*x*a*f^3*g*b^2*n^2*exp(1)^2-8*x*f^3*g*b^3*n^2*ln(c)*exp(1)^2-2*a*f^4*b^2*n^2*exp(1)^2-2*f^4*b^3*n^2*ln(c)*exp(1)^2),x)\n\n```",
    "created_at": "2018-07-12T06:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399378",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:4" align="right">Comment 4</div>

Indeed, this is a bug of the pexpect giac interface that takes the string representation of the giac output. The computation is done in giac but when the output is large giac just prints Done, and that is this string that the pxepect interface get. It is not typical for integrate it will concern  all large output. 

Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?

Note that this problem doesn't appear in giacpy_sage (optionnal package)

```
sage: var('x g b f n c a d');
sage: F=(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3))
sage: 
sage: integrate(F,x, algorithm="giac")
Done
sage: from giacpy_sage import libgiac
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
Help file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found
Added 0 synonyms
sage: libgiac(F).integrate(x)
(2*a*d^2*g-a*d*f*exp(1)+3*a*d*g*x*exp(1)-a*f*x*exp(1)^2+a*g*x^2*exp(1)^2+2*b*d^2*g*n*ln(d+x*exp(1))+2*b*d^2*g*ln(c)-b*d*f*n*exp(1)*ln(d+x*exp(1))-b*d*f*n*exp(1)-b*d*f*exp(1)*ln(c)+3*b*d*g*n*x*exp(1)*ln(d+x*exp(1))-b*d*g*n*x*exp(1)+3*b*d*g*x*exp(1)*ln(c)-b*f*n*x*exp(1)^2*ln(d+x*exp(1))-b*f*n*x*exp(1)^2-b*f*x*exp(1)^2*ln(c)+b*g*n*x^2*exp(1)^2*ln(d+x*exp(1))-b*g*n*x^2*exp(1)^2+b*g*x^2*exp(1)^2*ln(c))/(2*a^2*b^2*f^3*n^2*exp(1)^2+6*a^2*b^2*f^2*g*n^2*x*exp(1)^2+6*a^2*b^2*f*g^2*n^2*x^2*exp(1)^2+2*a^2*b^2*g^3*n^2*x^3*exp(1)^2+4*a*b^3*f^3*n^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*f^3*n^2*exp(1)^2*ln(c)+12*a*b^3*f^2*g*n^3*x*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f^2*g*n^2*x*exp(1)^2*ln(c)+12*a*b^3*f*g^2*n^3*x^2*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f*g^2*n^2*x^2*exp(1)^2*ln(c)+4*a*b^3*g^3*n^3*x^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*g^3*n^2*x^3*exp(1)^2*ln(c)+2*b^4*f^3*n^4*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*f^3*n^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*f^3*n^2*exp(1)^2*ln(c)^2+6*b^4*f^2*g*n^4*x*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f^2*g*n^3*x*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f^2*g*n^2*x*exp(1)^2*ln(c)^2+6*b^4*f*g^2*n^4*x^2*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f*g^2*n^3*x^2*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f*g^2*n^2*x^2*exp(1)^2*ln(c)^2+2*b^4*g^3*n^4*x^3*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*g^3*n^3*x^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*g^3*n^2*x^3*exp(1)^2*ln(c)^2)+integrate((-x^2*g^2*exp(1)^2+4*x*f*g*exp(1)^2-6*x*g^2*exp(1)*d-f^2*exp(1)^2+6*f*g*exp(1)*d-6*g^2*d^2)/(-2*ln(d+x*exp(1))*x^4*g^4*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x^3*f*g^3*b^3*n^3*exp(1)^2-12*ln(d+x*exp(1))*x^2*f^2*g^2*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x*f^3*g*b^3*n^3*exp(1)^2-2*ln(d+x*exp(1))*f^4*b^3*n^3*exp(1)^2-2*x^4*a*g^4*b^2*n^2*exp(1)^2-2*x^4*g^4*b^3*n^2*ln(c)*exp(1)^2-8*x^3*a*f*g^3*b^2*n^2*exp(1)^2-8*x^3*f*g^3*b^3*n^2*ln(c)*exp(1)^2-12*x^2*a*f^2*g^2*b^2*n^2*exp(1)^2-12*x^2*f^2*g^2*b^3*n^2*ln(c)*exp(1)^2-8*x*a*f^3*g*b^2*n^2*exp(1)^2-8*x*f^3*g*b^3*n^2*ln(c)*exp(1)^2-2*a*f^4*b^2*n^2*exp(1)^2-2*f^4*b^3*n^2*ln(c)*exp(1)^2),x)

```



---

archive/issue_comments_399379.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThe maximal size of objects that will be printed should be controllable with the environment variable GIAC_TAILLEMAX (default 1000). Size is not the length of the printed string, but the size of the giac::gen as defined in symbolic.h:  unsigned taille(const gen & g,unsigned max);",
    "created_at": "2018-07-12T08:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399379",
    "user": "https://github.com/sagetrac-parisse"
}
```

<div id="comment:5" align="right">Comment 5</div>

The maximal size of objects that will be printed should be controllable with the environment variable GIAC_TAILLEMAX (default 1000). Size is not the length of the printed string, but the size of the giac::gen as defined in symbolic.h:  unsigned taille(const gen & g,unsigned max);



---

archive/issue_comments_399380.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2018-07-12T08:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399380",
    "user": "https://github.com/slel"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_399381.json:
```json
{
    "body": "Changed keywords from **giac, integrate** to **giac, integrate, crash, pexpect**",
    "created_at": "2018-07-12T08:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399381",
    "user": "https://github.com/slel"
}
```

Changed keywords from **giac, integrate** to **giac, integrate, crash, pexpect**



---

archive/issue_comments_399382.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,46 @@\n-As reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):\n+As reported on [this Ask Sage question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/), Giac crashes on the following integral:\n \n ```\n-sage: var('x d a c b')\n-(x, d, a, c, b)\n-sage: integrate(sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4,x, algorithm=\"giac\")\n+sage: print(version())\n+SageMath version 8.3.rc0, Release Date: 2018-07-08\n+sage: a, b, c, d, e, x = SR.var('a b c d e x')\n+sage: F = sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4\n+sage: FF = integrate(F, x, algorithm='giac')\n Giac crashed -- automatically restarting.\n-sage0*x\n+sage:\n ```\n \n+This is fixed upstream and will be part of the next stable version of Giac.\n+\n+Another issue when using Giac for integration is the following:\n+\n+```\n+sage: print(version())\n+SageMath version 8.3.rc0, Release Date: 2018-07-08\n+sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\n+sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\n+sage: GG = integrate(G, x, algorithm='giac')\n+sage: GG\n+Done\n+sage:\n+```\n+\n+Quoting Frederic Han's comment (with minor edits):\n+\n+> this is a bug of the pexpect Giac interface that takes the string\n+> representation of the Giac output. The computation is done in Giac\n+> but when the output is large Giac just prints Done, and that is\n+> the string that the pxepect interface gets. It is not specific to\n+> integrate: it will concern all large Giac output.\n+\n+Quoting Bernard Parisse's comment:\n+\n+> The maximal size of objects that will be printed should be\n+> controllable with the environment variable `GIAC_TAILLEMAX`\n+> (default 1000). Size is not the length of the printed string,\n+> but the size of the `giac::gen` as defined in `symbolic.h`:\n+> \n+> ```\n+> unsigned taille(const gen & g,unsigned max);\n+> ```\n+\n``````\n",
    "created_at": "2018-07-12T08:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399382",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,46 @@
-As reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):
+As reported on [this Ask Sage question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/), Giac crashes on the following integral:
 
 ```
-sage: var('x d a c b')
-(x, d, a, c, b)
-sage: integrate(sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4,x, algorithm="giac")
+sage: print(version())
+SageMath version 8.3.rc0, Release Date: 2018-07-08
+sage: a, b, c, d, e, x = SR.var('a b c d e x')
+sage: F = sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4
+sage: FF = integrate(F, x, algorithm='giac')
 Giac crashed -- automatically restarting.
-sage0*x
+sage:
 ```
 
+This is fixed upstream and will be part of the next stable version of Giac.
+
+Another issue when using Giac for integration is the following:
+
+```
+sage: print(version())
+SageMath version 8.3.rc0, Release Date: 2018-07-08
+sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
+sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
+sage: GG = integrate(G, x, algorithm='giac')
+sage: GG
+Done
+sage:
+```
+
+Quoting Frederic Han's comment (with minor edits):
+
+> this is a bug of the pexpect Giac interface that takes the string
+> representation of the Giac output. The computation is done in Giac
+> but when the output is large Giac just prints Done, and that is
+> the string that the pxepect interface gets. It is not specific to
+> integrate: it will concern all large Giac output.
+
+Quoting Bernard Parisse's comment:
+
+> The maximal size of objects that will be printed should be
+> controllable with the environment variable `GIAC_TAILLEMAX`
+> (default 1000). Size is not the length of the printed string,
+> but the size of the `giac::gen` as defined in `symbolic.h`:
+> 
+> ```
+> unsigned taille(const gen & g,unsigned max);
+> ```
+
``````




---

archive/issue_comments_399383.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@frederichan-IMJPRG](#comment%3A4):\n> Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?\n\nIt seems we can ask Giac for the string representation using `str`.\n\nAt least in the web interface, it  not return the shorter \"Done\" output:\n- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+G=1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3)&+GG=integrate(G,x)&+factor(diff(GG))&+str(GG)&) (open link in Firefox)",
    "created_at": "2018-07-12T08:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399383",
    "user": "https://github.com/slel"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@frederichan-IMJPRG](#comment%3A4):
> Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?

It seems we can ask Giac for the string representation using `str`.

At least in the web interface, it  not return the shorter "Done" output:
- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+G=1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3)&+GG=integrate(G,x)&+factor(diff(GG))&+str(GG)&) (open link in Firefox)



---

archive/issue_comments_399384.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBut sage's pxepect interface is calling icas/giac so it is different than working with the library as does giacpy or the javascript interface. Adding string before evaluation will break manythings such as mulple commands, and after evaluation we will get the Done from icas.\n\nSo I think that the easiest thing is to change this in icas.cc, moreover there is already an \"insage\" booleen flag. I have test successfully the following patch.\n\nBernard, do you plan to remove the \"Done\" output in icas.cc when the insage flag is on so that next giac version will solve this without patch?\n\n```\n--- a/src/icas.cc\t2017-10-02 10:25:46.000000000 +0200\n+++ b/src/icas.cc\t2018-07-14 10:50:01.650323754 +0200\n@@ -1581,7 +1581,7 @@\n \tint taillemax=1000;\n \tif (getenv(\"GIAC_TAILLEMAX\"))\n \t  taillemax=atoi(getenv(\"GIAC_TAILLEMAX\"));\n-\tstring s=taille(ge,taillemax)>taillemax?\"Done\":ge.print(contextptr);\n+\tstring s=((taille(ge,taillemax)>taillemax)&&(!insage))?\"Done\":ge.print(contextptr);\n \tcout << s;\n       }\n       cout << endl;\n```",
    "created_at": "2018-07-14T12:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399384",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:8" align="right">Comment 8</div>

But sage's pxepect interface is calling icas/giac so it is different than working with the library as does giacpy or the javascript interface. Adding string before evaluation will break manythings such as mulple commands, and after evaluation we will get the Done from icas.

So I think that the easiest thing is to change this in icas.cc, moreover there is already an "insage" booleen flag. I have test successfully the following patch.

Bernard, do you plan to remove the "Done" output in icas.cc when the insage flag is on so that next giac version will solve this without patch?

```
--- a/src/icas.cc	2017-10-02 10:25:46.000000000 +0200
+++ b/src/icas.cc	2018-07-14 10:50:01.650323754 +0200
@@ -1581,7 +1581,7 @@
 	int taillemax=1000;
 	if (getenv("GIAC_TAILLEMAX"))
 	  taillemax=atoi(getenv("GIAC_TAILLEMAX"));
-	string s=taille(ge,taillemax)>taillemax?"Done":ge.print(contextptr);
+	string s=((taille(ge,taillemax)>taillemax)&&(!insage))?"Done":ge.print(contextptr);
 	cout << s;
       }
       cout << endl;
```



---

archive/issue_comments_399385.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nYes, I made the change in my source (with !insage first).",
    "created_at": "2018-07-14T13:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399385",
    "user": "https://github.com/sagetrac-parisse"
}
```

<div id="comment:9" align="right">Comment 9</div>

Yes, I made the change in my source (with !insage first).



---

archive/issue_comments_399386.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThank you, so in sage the next giac update should solve these problems automatically.",
    "created_at": "2018-07-14T19:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399386",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:10" align="right">Comment 10</div>

Thank you, so in sage the next giac update should solve these problems automatically.



---

archive/issue_comments_399387.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nfyi, this is similar giac crash. I tried to report it to giac, but could not get an account on giac tracking. I submitted request to join and never heard back. So posting it here. May be someone who knows how to report them to giac bugs database would be able to do this since I can't.\n\n\n```\nsage: version()\n'SageMath version 8.3.rc0, Release Date: 2018-07-08\n\nsage: var('d x c b a f e')\n(d, x, c, b, a, f, e)\nsage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e),x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage0*x\n\n\nsage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e)^2,x,algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage4*x\n\nsage:  integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e),x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage8*x\n\nsage: integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e)^2,x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage12*x\n\n\n```",
    "created_at": "2018-07-17T18:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399387",
    "user": "https://github.com/nasser1"
}
```

<div id="comment:11" align="right">Comment 11</div>

fyi, this is similar giac crash. I tried to report it to giac, but could not get an account on giac tracking. I submitted request to join and never heard back. So posting it here. May be someone who knows how to report them to giac bugs database would be able to do this since I can't.


```
sage: version()
'SageMath version 8.3.rc0, Release Date: 2018-07-08

sage: var('d x c b a f e')
(d, x, c, b, a, f, e)
sage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e),x, algorithm="giac")
Giac crashed -- automatically restarting.
sage0*x


sage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e)^2,x,algorithm="giac")
Giac crashed -- automatically restarting.
sage4*x

sage:  integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e),x, algorithm="giac")
Giac crashed -- automatically restarting.
sage8*x

sage: integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e)^2,x, algorithm="giac")
Giac crashed -- automatically restarting.
sage12*x


```



---

archive/issue_comments_399388.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nCrash fixed in source.\nIf you want to register in the Xcas forum, please choose a login or an email that can not be confused with a spammer, or send me a mail asking explicitly for activation.",
    "created_at": "2018-07-17T19:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399388",
    "user": "https://github.com/sagetrac-parisse"
}
```

<div id="comment:12" align="right">Comment 12</div>

Crash fixed in source.
If you want to register in the Xcas forum, please choose a login or an email that can not be confused with a spammer, or send me a mail asking explicitly for activation.



---

archive/issue_comments_399389.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\ncrash fixed by #26315.\nThe 2nd integral is however not computed by giac 1.5.0-37, I get\n\n```\nsage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\nsage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\nsage: GG = integrate(G, x, algorithm='giac')\nsage: GG\nintegrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3), x)\nsage: GG = integrate(G, x)\nsage: GG\n1/2*((a*e^2*g - (e^2*g*n - e^2*g*log(c))*b)*x^2 - (d*e*f - 2*d^2*g)*a - (d*e*f*n + (d*e*f - 2*d^2*g)*log(c))*b - ((e^2*f - 3*d*e*g)*a + (e^2*f*n + d*e*g*n + (e^2*f - 3*d*e*g)*log(c))*b)*x + (b*e^2*g*x^2 - (e^2*f - 3*d*e*g)*b*x - (d*e*f - 2*d^2*g)*b)*log((e*x + d)^n))/(b^4*e^2*f^3*n^2*log(c)^2 + 2*a*b^3*e^2*f^3*n^2*log(c) + a^2*b^2*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c)^2 + 2*a*b^3*e^2*g^3*n^2*log(c) + a^2*b^2*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c)^2 + 2*a*b^3*e^2*f*g^2*n^2*log(c) + a^2*b^2*e^2*f*g^2*n^2)*x^2 + (b^4*e^2*g^3*n^2*x^3 + 3*b^4*e^2*f*g^2*n^2*x^2 + 3*b^4*e^2*f^2*g*n^2*x + b^4*e^2*f^3*n^2)*log((e*x + d)^n)^2 + 3*(b^4*e^2*f^2*g*n^2*log(c)^2 + 2*a*b^3*e^2*f^2*g*n^2*log(c) + a^2*b^2*e^2*f^2*g*n^2)*x + 2*(b^4*e^2*f^3*n^2*log(c) + a*b^3*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c) + a*b^3*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c) + a*b^3*e^2*f*g^2*n^2)*x^2 + 3*(b^4*e^2*f^2*g*n^2*log(c) + a*b^3*e^2*f^2*g*n^2)*x)*log((e*x + d)^n)) + integrate(1/2*(e^2*g^2*x^2 + e^2*f^2 - 6*d*e*f*g + 6*d^2*g^2 - 2*(2*e^2*f*g - 3*d*e*g^2)*x)/(b^3*e^2*f^4*n^2*log(c) + a*b^2*e^2*f^4*n^2 + (b^3*e^2*g^4*n^2*log(c) + a*b^2*e^2*g^4*n^2)*x^4 + 4*(b^3*e^2*f*g^3*n^2*log(c) + a*b^2*e^2*f*g^3*n^2)*x^3 + 6*(b^3*e^2*f^2*g^2*n^2*log(c) + a*b^2*e^2*f^2*g^2*n^2)*x^2 + 4*(b^3*e^2*f^3*g*n^2*log(c) + a*b^2*e^2*f^3*g*n^2)*x + (b^3*e^2*g^4*n^2*x^4 + 4*b^3*e^2*f*g^3*n^2*x^3 + 6*b^3*e^2*f^2*g^2*n^2*x^2 + 4*b^3*e^2*f^3*g*n^2*x + b^3*e^2*f^4*n^2)*log((e*x + d)^n)), x)\n```\nIt appears however that the latter integration (by maxima?) is not correct. Can this integral be computed in elementary functions?",
    "created_at": "2019-01-16T10:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399389",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

crash fixed by #26315.
The 2nd integral is however not computed by giac 1.5.0-37, I get

```
sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
sage: GG = integrate(G, x, algorithm='giac')
sage: GG
integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3), x)
sage: GG = integrate(G, x)
sage: GG
1/2*((a*e^2*g - (e^2*g*n - e^2*g*log(c))*b)*x^2 - (d*e*f - 2*d^2*g)*a - (d*e*f*n + (d*e*f - 2*d^2*g)*log(c))*b - ((e^2*f - 3*d*e*g)*a + (e^2*f*n + d*e*g*n + (e^2*f - 3*d*e*g)*log(c))*b)*x + (b*e^2*g*x^2 - (e^2*f - 3*d*e*g)*b*x - (d*e*f - 2*d^2*g)*b)*log((e*x + d)^n))/(b^4*e^2*f^3*n^2*log(c)^2 + 2*a*b^3*e^2*f^3*n^2*log(c) + a^2*b^2*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c)^2 + 2*a*b^3*e^2*g^3*n^2*log(c) + a^2*b^2*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c)^2 + 2*a*b^3*e^2*f*g^2*n^2*log(c) + a^2*b^2*e^2*f*g^2*n^2)*x^2 + (b^4*e^2*g^3*n^2*x^3 + 3*b^4*e^2*f*g^2*n^2*x^2 + 3*b^4*e^2*f^2*g*n^2*x + b^4*e^2*f^3*n^2)*log((e*x + d)^n)^2 + 3*(b^4*e^2*f^2*g*n^2*log(c)^2 + 2*a*b^3*e^2*f^2*g*n^2*log(c) + a^2*b^2*e^2*f^2*g*n^2)*x + 2*(b^4*e^2*f^3*n^2*log(c) + a*b^3*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c) + a*b^3*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c) + a*b^3*e^2*f*g^2*n^2)*x^2 + 3*(b^4*e^2*f^2*g*n^2*log(c) + a*b^3*e^2*f^2*g*n^2)*x)*log((e*x + d)^n)) + integrate(1/2*(e^2*g^2*x^2 + e^2*f^2 - 6*d*e*f*g + 6*d^2*g^2 - 2*(2*e^2*f*g - 3*d*e*g^2)*x)/(b^3*e^2*f^4*n^2*log(c) + a*b^2*e^2*f^4*n^2 + (b^3*e^2*g^4*n^2*log(c) + a*b^2*e^2*g^4*n^2)*x^4 + 4*(b^3*e^2*f*g^3*n^2*log(c) + a*b^2*e^2*f*g^3*n^2)*x^3 + 6*(b^3*e^2*f^2*g^2*n^2*log(c) + a*b^2*e^2*f^2*g^2*n^2)*x^2 + 4*(b^3*e^2*f^3*g*n^2*log(c) + a*b^2*e^2*f^3*g*n^2)*x + (b^3*e^2*g^4*n^2*x^4 + 4*b^3*e^2*f*g^3*n^2*x^3 + 6*b^3*e^2*f^2*g^2*n^2*x^2 + 4*b^3*e^2*f^3*g*n^2*x + b^3*e^2*f^4*n^2)*log((e*x + d)^n)), x)
```
It appears however that the latter integration (by maxima?) is not correct. Can this integral be computed in elementary functions?



---

archive/issue_events_338806.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T10:02:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338806"
}
```



---

archive/issue_events_338807.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T10:02:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338807"
}
```



---

archive/issue_events_338808.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T10:02:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338808"
}
```



---

archive/issue_comments_399390.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@dimpase](#comment%3A13):\n> crash fixed by #26315.\n> The 2nd integral is however not computed by giac 1.5.0-37, I get\n> \n> ```\n> sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\n> sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\n> ```\n> Can this integral be computed in elementary functions?\n\nVery unlikely:\n\n```\nsage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\nsage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\nsage: G1 = G.subs(n=1, c=1, b=1, f=1, g=1, a=0, e=1); G1\n1/((x + 1)^2*log(d + x)^3)\nsage: integrate(G1, x, algorithm=\"fricas\")\nintegral(1/((x^2 + 2*x + 1)*log(d + x)^3), x)\n```\n(I also tried a well known online tool.)",
    "created_at": "2019-01-16T10:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399390",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@dimpase](#comment%3A13):
> crash fixed by #26315.
> The 2nd integral is however not computed by giac 1.5.0-37, I get
> 
> ```
> sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
> sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
> ```
> Can this integral be computed in elementary functions?

Very unlikely:

```
sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
sage: G1 = G.subs(n=1, c=1, b=1, f=1, g=1, a=0, e=1); G1
1/((x + 1)^2*log(d + x)^3)
sage: integrate(G1, x, algorithm="fricas")
integral(1/((x^2 + 2*x + 1)*log(d + x)^3), x)
```
(I also tried a well known online tool.)



---

archive/issue_events_338809.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T11:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338809"
}
```



---

archive/issue_events_338810.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T11:43:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338810"
}
```



---

archive/issue_events_338811.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T11:43:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338811"
}
```



---

archive/issue_events_338812.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T11:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338812"
}
```



---

archive/issue_events_338813.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T11:43:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338813"
}
```



---

archive/issue_comments_399391.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nYes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.",
    "created_at": "2019-01-16T11:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399391",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.



---

archive/issue_comments_399392.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@dimpase](#comment%3A16):\n> Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.\n\nNo, the result is correct, it is just not very helpful:\n\n```\nsage: (diff(integrate(G1, x), x) - G1).simplify_full()\n0\n```",
    "created_at": "2019-01-16T12:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399392",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@dimpase](#comment%3A16):
> Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.

No, the result is correct, it is just not very helpful:

```
sage: (diff(integrate(G1, x), x) - G1).simplify_full()
0
```



---

archive/issue_comments_399393.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@mantepse](#comment%3A17):\n> Replying to [@dimpase](#comment%3A16):\n> > Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.\n\n> \n> No, the result is correct, it is just not very helpful:\n> \n> ```\n> sage: (diff(integrate(G1, x), x) - G1).simplify_full()\n> 0\n> ```\n\nthe result of the computation without fixing parameters seems to be incorrect, that's what I was trying to say.",
    "created_at": "2019-01-16T12:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399393",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@mantepse](#comment%3A17):
> Replying to [@dimpase](#comment%3A16):
> > Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.

> 
> No, the result is correct, it is just not very helpful:
> 
> ```
> sage: (diff(integrate(G1, x), x) - G1).simplify_full()
> 0
> ```

the result of the computation without fixing parameters seems to be incorrect, that's what I was trying to say.



---

archive/issue_events_338814.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-01-16T19:05:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338814"
}
```



---

archive/issue_events_338815.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-01-16T19:05:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338815"
}
```



---

archive/issue_events_338816.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-01-16T19:05:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338816"
}
```



---

archive/issue_comments_399394.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThis is not fixed in 8.6, i still get the errors. This ticket should depend on #26315 and requires a dedicated doctest.",
    "created_at": "2019-01-16T19:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399394",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:19" align="right">Comment 19</div>

This is not fixed in 8.6, i still get the errors. This ticket should depend on #26315 and requires a dedicated doctest.



---

archive/issue_comments_399395.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nPlease add all the doctests you see fit on the branch of #26315 - I just don't see why we should test giac more than it tests itself...",
    "created_at": "2019-01-16T19:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399395",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

Please add all the doctests you see fit on the branch of #26315 - I just don't see why we should test giac more than it tests itself...



---

archive/issue_comments_399396.json:
```json
{
    "body": "Dependencies: **#26315**",
    "created_at": "2019-01-16T19:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399396",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#26315**



---

archive/issue_events_338817.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T19:35:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338817"
}
```



---

archive/issue_events_338818.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T19:35:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338818"
}
```



---

archive/issue_events_338819.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T19:35:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338819"
}
```



---

archive/issue_comments_399397.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nno work should be done on this ticket, hence positive review.",
    "created_at": "2019-01-16T19:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399397",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">Comment 21</div>

no work should be done on this ticket, hence positive review.



---

archive/issue_events_338820.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338820"
}
```



---

archive/issue_events_338821.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25822#event-338821"
}
```



---

archive/issue_comments_399398.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nPresuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/25822",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25822#issuecomment-399398",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">Comment 22</div>

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.
