# Issue 30400: doctest failing in designs/incidence_structures.py

archive/issues_030400.json:
```json
{
    "body": "With Ubuntu 18.04 + 9.2.beta13, running\n\n```\nsage -t src/sage/combinat/designs/incidence_structures.py\n```\n\nand\n\n```\nUsing\n--optional=4ti2,build,ccache,cryptominisat,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin\n```\n\ngives\n\n```\n**********************************************************************\nFile \"src/sage/combinat/designs/incidence_structures.py\", line 2027, in sage.combinat.designs.incidence_structures.IncidenceStructure.coloring\nFailed example:\n    len(designs.steiner_triple_system(7).coloring())\nExpected:\n    3\nGot:\n    2\n**********************************************************************\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30637\n\n",
    "created_at": "2020-09-22T20:45:46Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "doctest failing in designs/incidence_structures.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30400",
    "user": "slabbe"
}
```
With Ubuntu 18.04 + 9.2.beta13, running

```
sage -t src/sage/combinat/designs/incidence_structures.py
```

and

```
Using
--optional=4ti2,build,ccache,cryptominisat,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin
```

gives

```
**********************************************************************
File "src/sage/combinat/designs/incidence_structures.py", line 2027, in sage.combinat.designs.incidence_structures.IncidenceStructure.coloring
Failed example:
    len(designs.steiner_triple_system(7).coloring())
Expected:
    3
Got:
    2
**********************************************************************
```


Issue created by migration from https://trac.sagemath.org/ticket/30637





---

archive/issue_comments_433652.json:
```json
{
    "body": "This might be related to #29551",
    "created_at": "2020-09-23T09:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433652",
    "user": "dcoudert"
}
```

This might be related to #29551



---

archive/issue_comments_433653.json:
```json
{
    "body": "S\u00e9bastien, can you check if this also fails with bliss?",
    "created_at": "2020-09-26T16:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433653",
    "user": "slelievre"
}
```

SÃ©bastien, can you check if this also fails with bliss?



---

archive/issue_comments_433654.json:
```json
{
    "body": "same error with bliss installed",
    "created_at": "2020-10-02T10:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433654",
    "user": "slabbe"
}
```

same error with bliss installed



---

archive/issue_comments_433655.json:
```json
{
    "body": "With `SageMath version 9.2.rc3, Release Date: 2020-10-18`, I do no get the issue anymore:\n\n\n```\n$ sage -t src/sage/combinat/designs/incidence_structures.py\nRunning doctests with ID 2020-10-23-13-27-09-1ce86d69.\nGit branch: develop\nUsing --optional=4ti2,build,cbc,ccache,cryptominisat,database_jones_numfield,debian,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg\nDoctesting 1 file.\nsage -t --warn-long 50.5 --random-seed=0 src/sage/combinat/designs/incidence_structures.py\n    [337 tests, 0.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n",
    "created_at": "2020-10-23T11:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433655",
    "user": "slabbe"
}
```

With `SageMath version 9.2.rc3, Release Date: 2020-10-18`, I do no get the issue anymore:


```
$ sage -t src/sage/combinat/designs/incidence_structures.py
Running doctests with ID 2020-10-23-13-27-09-1ce86d69.
Git branch: develop
Using --optional=4ti2,build,cbc,ccache,cryptominisat,database_jones_numfield,debian,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg
Doctesting 1 file.
sage -t --warn-long 50.5 --random-seed=0 src/sage/combinat/designs/incidence_structures.py
    [337 tests, 0.94 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```




---

archive/issue_comments_433656.json:
```json
{
    "body": "no error on macOS 10.15.17 with 9.2.rc3 and bliss\n\n```\nsapristi:sage dcoudert$ ./sage -version\nSageMath version 9.2.rc3, Release Date: 2020-10-18\nsapristi:sage dcoudert$ ./sage -t --long src/sage/combinat/designs/incidence_structures.py\nRunning doctests with ID 2020-10-23-13-33-10-0e7e4eb3.\nGit branch: develop\nUsing --optional=benzene,bliss,build,dochtml,homebrew,igraph,pip,plantri,python_igraph,sage,sage_numerical_backends_cplex,sage_spkg,tdlib\nDoctesting 1 file.\nsage -t --long --warn-long 263.3 --random-seed=0 src/sage/combinat/designs/incidence_structures.py\n    [337 tests, 3.74 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 3.8 seconds\n    cpu time: 1.4 seconds\n    cumulative wall time: 3.7 seconds\n```\n\n\nif we don't see the error anymore (don't know why), may be we can close this ticket.",
    "created_at": "2020-10-23T11:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433656",
    "user": "dcoudert"
}
```

no error on macOS 10.15.17 with 9.2.rc3 and bliss

```
sapristi:sage dcoudert$ ./sage -version
SageMath version 9.2.rc3, Release Date: 2020-10-18
sapristi:sage dcoudert$ ./sage -t --long src/sage/combinat/designs/incidence_structures.py
Running doctests with ID 2020-10-23-13-33-10-0e7e4eb3.
Git branch: develop
Using --optional=benzene,bliss,build,dochtml,homebrew,igraph,pip,plantri,python_igraph,sage,sage_numerical_backends_cplex,sage_spkg,tdlib
Doctesting 1 file.
sage -t --long --warn-long 263.3 --random-seed=0 src/sage/combinat/designs/incidence_structures.py
    [337 tests, 3.74 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 3.8 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 3.7 seconds
```


if we don't see the error anymore (don't know why), may be we can close this ticket.



---

archive/issue_comments_433657.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-23T14:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433657",
    "user": "slabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433658.json:
```json
{
    "body": "The issue has gone.",
    "created_at": "2020-10-23T14:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433658",
    "user": "slabbe"
}
```

The issue has gone.



---

archive/issue_comments_433659.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-23T15:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433659",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433660.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-10-23T16:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433660",
    "user": "slelievre"
}
```

Resolution: worksforme



---

archive/issue_comments_433661.json:
```json
{
    "body": "Follow-up at #32053.",
    "created_at": "2021-07-26T14:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30400#issuecomment-433661",
    "user": "slelievre"
}
```

Follow-up at #32053.
