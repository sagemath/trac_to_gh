# Issue 30400: doctest failing in designs/incidence_structures.py

Issue created by migration from https://trac.sagemath.org/ticket/30637

Original creator: slabbe

Original creation time: 2020-09-22 20:45:46

With Ubuntu 18.04 + 9.2.beta13, running

```
sage -t src/sage/combinat/designs/incidence_structures.py
```

and

```
Using
--optional=4ti2,build,ccache,cryptominisat,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin
```

gives

```
**********************************************************************
File "src/sage/combinat/designs/incidence_structures.py", line 2027, in sage.combinat.designs.incidence_structures.IncidenceStructure.coloring
Failed example:
    len(designs.steiner_triple_system(7).coloring())
Expected:
    3
Got:
    2
**********************************************************************
```



---

Comment by dcoudert created at 2020-09-23 09:20:58

This might be related to #29551


---

Comment by slelievre created at 2020-09-26 16:07:59

SÃ©bastien, can you check if this also fails with bliss?


---

Comment by slabbe created at 2020-10-02 10:04:43

same error with bliss installed


---

Comment by slabbe created at 2020-10-23 11:28:27

With `SageMath version 9.2.rc3, Release Date: 2020-10-18`, I do no get the issue anymore:


```
$ sage -t src/sage/combinat/designs/incidence_structures.py
Running doctests with ID 2020-10-23-13-27-09-1ce86d69.
Git branch: develop
Using --optional=4ti2,build,cbc,ccache,cryptominisat,database_jones_numfield,debian,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg
Doctesting 1 file.
sage -t --warn-long 50.5 --random-seed=0 src/sage/combinat/designs/incidence_structures.py
    [337 tests, 0.94 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

Comment by dcoudert created at 2020-10-23 11:36:35

no error on macOS 10.15.17 with 9.2.rc3 and bliss

```
sapristi:sage dcoudert$ ./sage -version
SageMath version 9.2.rc3, Release Date: 2020-10-18
sapristi:sage dcoudert$ ./sage -t --long src/sage/combinat/designs/incidence_structures.py
Running doctests with ID 2020-10-23-13-33-10-0e7e4eb3.
Git branch: develop
Using --optional=benzene,bliss,build,dochtml,homebrew,igraph,pip,plantri,python_igraph,sage,sage_numerical_backends_cplex,sage_spkg,tdlib
Doctesting 1 file.
sage -t --long --warn-long 263.3 --random-seed=0 src/sage/combinat/designs/incidence_structures.py
    [337 tests, 3.74 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 3.8 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 3.7 seconds
```


if we don't see the error anymore (don't know why), may be we can close this ticket.


---

Comment by slabbe created at 2020-10-23 14:33:04

Changing status from new to needs_review.


---

Comment by slabbe created at 2020-10-23 14:33:04

The issue has gone.


---

Comment by dcoudert created at 2020-10-23 15:05:18

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2020-10-23 16:00:40

Resolution: worksforme


---

Comment by slelievre created at 2021-07-26 14:38:33

Follow-up at #32053.
