# Issue 10171: Rational Point algorithm bug

archive/issues_010171.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  minz\n\nWhen you have a curve defined over a projective space over a finite field, it looks like sometimes the rational point list coming from the Brill-Noether package in Singular is not the full list of rational points.\n\n\n```\nsage: S.<x,y,z> = GF(5)[]\nsage: g = x*z+z^2\nsage: G = Curve(g)\nsage: G.rational_points('enum')\n[(0 : 1 : 0), (1 : 0 : 0), (1 : 1 : 0), (2 : 1 : 0), (3 : 1 : 0), (4 : 0 : 1), (4 : 1 : 0), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]\nsage: G.rational_points('bn')\n[(0 : 1 : 0), (4 : 0 : 1), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]\n```\n\n\nIt's not clear yet whether this is a Sage or a Singular problem.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10172\n\n",
    "created_at": "2010-10-25T19:42:12Z",
    "labels": [
        "algebraic geometry",
        "major",
        "bug"
    ],
    "title": "Rational Point algorithm bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10171",
    "user": "nkaplan"
}
```
Assignee: AlexGhitza

CC:  minz

When you have a curve defined over a projective space over a finite field, it looks like sometimes the rational point list coming from the Brill-Noether package in Singular is not the full list of rational points.


```
sage: S.<x,y,z> = GF(5)[]
sage: g = x*z+z^2
sage: G = Curve(g)
sage: G.rational_points('enum')
[(0 : 1 : 0), (1 : 0 : 0), (1 : 1 : 0), (2 : 1 : 0), (3 : 1 : 0), (4 : 0 : 1), (4 : 1 : 0), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]
sage: G.rational_points('bn')
[(0 : 1 : 0), (4 : 0 : 1), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]
```


It's not clear yet whether this is a Sage or a Singular problem.

Issue created by migration from https://trac.sagemath.org/ticket/10172





---

archive/issue_comments_103086.json:
```json
{
    "body": "Part of the problem was the same as in the computation of Riemann-Roch spaces [#8997](http://trac.sagemath.org/sage_trac/ticket/8997).\n\nThere still remains a problem: The above example works fine now if we replace z by y (which shouldn't make a difference in terms of correctness of the algorithms involved). Maybe the current singular interface makes certain assumptions about the variable names and their ordering that we still need to pay attention to here?",
    "created_at": "2011-04-15T13:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103086",
    "user": "minz"
}
```

Part of the problem was the same as in the computation of Riemann-Roch spaces [#8997](http://trac.sagemath.org/sage_trac/ticket/8997).

There still remains a problem: The above example works fine now if we replace z by y (which shouldn't make a difference in terms of correctness of the algorithms involved). Maybe the current singular interface makes certain assumptions about the variable names and their ordering that we still need to pay attention to here?



---

archive/issue_comments_103087.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-04-15T13:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103087",
    "user": "minz"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_103088.json:
```json
{
    "body": "correctly wraps Singular's Brill-Noether method and adds doctest",
    "created_at": "2011-11-18T10:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103088",
    "user": "minz"
}
```

correctly wraps Singular's Brill-Noether method and adds doctest



---

archive/issue_comments_103089.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-18T13:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103089",
    "user": "minz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_103090.json:
```json
{
    "body": "Attachment\n\nWe were missing so far that and how Singular dehomogenizes the defining polynomial of the curve: Always with respect to the last variable. If the corresponding line is a component of the curve, the output was missing those points.",
    "created_at": "2011-11-18T13:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103090",
    "user": "minz"
}
```

Attachment

We were missing so far that and how Singular dehomogenizes the defining polynomial of the curve: Always with respect to the last variable. If the corresponding line is a component of the curve, the output was missing those points.



---

archive/issue_comments_103091.json:
```json
{
    "body": "The patch looks good to me and applies cleanly to 4.8.alpha4.  All long tests in sage/scheme pass.  I am happy with this.",
    "created_at": "2011-12-15T16:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103091",
    "user": "cremona"
}
```

The patch looks good to me and applies cleanly to 4.8.alpha4.  All long tests in sage/scheme pass.  I am happy with this.



---

archive/issue_comments_103092.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-15T16:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103092",
    "user": "cremona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_103093.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-17T09:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10171#issuecomment-103093",
    "user": "jdemeyer"
}
```

Resolution: fixed
