# Issue 10171: Rational Point algorithm bug

Issue created by migration from Trac.

Original creator: nkaplan

Original creation time: 2010-10-25 19:42:12

Assignee: AlexGhitza

CC:  minz

When you have a curve defined over a projective space over a finite field, it looks like sometimes the rational point list coming from the Brill-Noether package in Singular is not the full list of rational points.


```
sage: S.<x,y,z> = GF(5)[]
sage: g = x*z+z^2
sage: G = Curve(g)
sage: G.rational_points('enum')
[(0 : 1 : 0), (1 : 0 : 0), (1 : 1 : 0), (2 : 1 : 0), (3 : 1 : 0), (4 : 0 : 1), (4 : 1 : 0), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]
sage: G.rational_points('bn')
[(0 : 1 : 0), (4 : 0 : 1), (4 : 1 : 1), (4 : 2 : 1), (4 : 3 : 1), (4 : 4 : 1)]
```


It's not clear yet whether this is a Sage or a Singular problem.


---

Comment by minz created at 2011-04-15 13:05:55

Part of the problem was the same as in the computation of Riemann-Roch spaces [#8997](http://trac.sagemath.org/sage_trac/ticket/8997).

There still remains a problem: The above example works fine now if we replace z by y (which shouldn't make a difference in terms of correctness of the algorithms involved). Maybe the current singular interface makes certain assumptions about the variable names and their ordering that we still need to pay attention to here?


---

Comment by minz created at 2011-04-15 13:05:55

Changing status from new to needs_work.


---

Comment by minz created at 2011-11-18 10:13:55

correctly wraps Singular's Brill-Noether method and adds doctest


---

Comment by minz created at 2011-11-18 13:48:19

Changing status from needs_work to needs_review.


---

Attachment

We were missing so far that and how Singular dehomogenizes the defining polynomial of the curve: Always with respect to the last variable. If the corresponding line is a component of the curve, the output was missing those points.


---

Comment by cremona created at 2011-12-15 16:35:43

The patch looks good to me and applies cleanly to 4.8.alpha4.  All long tests in sage/scheme pass.  I am happy with this.


---

Comment by cremona created at 2011-12-15 16:35:43

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-17 09:12:16

Resolution: fixed
