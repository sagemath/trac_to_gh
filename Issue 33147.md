# Issue 33147: Deprecate global imports of CombinatorialObject, CombinatorialClass, MapCombinatorialClass

Issue created by migration from https://trac.sagemath.org/ticket/33384

Original creator: mkoeppe

Original creation time: 2022-02-19 22:13:06

CC:  tscrim chapoton




---

Comment by mkoeppe created at 2022-02-19 22:19:21

New commits:


---

Comment by git created at 2022-02-19 22:34:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-02-19 22:35:11

The deprecation via lazy imports unfortunately does not work very well:

```
sage -t --random-seed=332440843511251861710123815794934176969 src/sage/combinat/combinat.py
**********************************************************************
File "src/sage/combinat/combinat.py", line 1198, in sage.combinat.combinat.CombinatorialObject.__eq__
Failed example:
    class Bar(Element, CombinatorialObject):
        def __init__(self, l):
            CombinatorialObject.__init__(self, l)
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.combinat.CombinatorialObject.__eq__[7]>", line 1, in <module>
        class Bar(Element, CombinatorialObject):
    TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases
```



---

Comment by tscrim created at 2022-02-22 05:11:44

Hmm...that is a bit strange. Perhaps something is not being resolved correctly? I don't know from a quick look what is going on. However, +1 for doing this ticket.
