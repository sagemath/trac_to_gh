# Issue 33620: configure: Exit with error if system gmp is in use but distutils cannot find gmp header

Issue created by migration from https://trac.sagemath.org/ticket/33857

Original creator: mkoeppe

Original creation time: 2022-05-16 20:57:30

CC:  dimpase

Short of a proper solution (#31348), this will detect that `.homebrew-build-env` has not been used, a frequent pitfall. We can issue a helpful error message



---

Comment by mkoeppe created at 2022-07-19 23:12:17

This could be checked in `SAGE_CHECK_PYTHON_FOR_VENV` / `SAGE_PYTHON_CHECK_DISTUTILS`


---

Comment by dimpase created at 2022-07-20 09:22:23

maybe we can conditionally source `.homebrew-build-env` in `./bootstrap` ?

Another question is how to source it before running `./sage`.
(we can do the same, a conditional sourcing`)


---

Comment by mkoeppe created at 2022-07-20 16:12:41

Replying to [comment:2 dimpase]:
> maybe we can conditionally source `.homebrew-build-env` in `./bootstrap` ?

People who install Sage from the source tarball do not run `bootstrap`.


---

Comment by dimpase created at 2022-07-20 16:29:20

well, ./configure is the 3rd place where homebrew-build-env ought to be conditionally sourced.
