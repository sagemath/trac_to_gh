# Issue 28627: 1 internet doctest failing in findstat.py

archive/issues_028627.json:
```json
{
    "body": "CC:  @mantepse stumpc5\n\n\n```\nsage -t --optional=sage,internet src/sage/databases/findstat.py\n```\n\n\ngives\n\n\n```\nUsing --optional=internet,memlimit,sage\nDoctesting 1 file.\nsage -t --warn-long 69.4 src/sage/databases/findstat.py\n**********************************************************************\nFile \"src/sage/databases/findstat.py\", line 2117, in sage.databases.findstat.FindStatCollection.in_range\nFailed example:\n    for c in l:                                                   # optional -- internet, random\n        if c.id() not in long and c.is_supported():\n            f = c.first_terms(lambda x: 1, max_values=10000)\n            print(\"{} {} {}\".format(c, len(f), all(c.in_range(e) for e, _ in f)))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.databases.findstat.FindStatCollection.in_range[8]>\", line 3, in <module>\n        f = c.first_terms(lambda x: Integer(1), max_values=Integer(10000))\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py\", line 2174, in first_terms\n        return [(x, statistic(x)) for (x,_) in zip(g, range(max_values))]\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py\", line 2174, in <listcomp>\n        return [(x, statistic(x)) for (x,_) in zip(g, range(max_values))]\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py\", line 2170, in <genexpr>\n        g = (x for n in self._levels.keys() for x in self._sageconstructor(n))\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py\", line 2453, in <lambda>\n        19: [None, None, None, SemistandardTableau,   lambda x: SemistandardTableaux(x),\n      File \"sage/misc/classcall_metaclass.pyx\", line 334, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1741)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/combinat/tableau.py\", line 5941, in __classcall_private__\n        raise ValueError( \"shape must be a (skew) partition\" )\n    ValueError: shape must be a (skew) partition\n**********************************************************************\n\n----------------------------------------------------------------------\nsage -t --warn-long 69.4 src/sage/databases/findstat.py  # 1 doctests failed\n----------------------------------------------------------------------\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28864\n\n",
    "created_at": "2019-12-10T08:18:49Z",
    "labels": [
        "component: doctest coverage",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "1 internet doctest failing in findstat.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28627",
    "user": "https://github.com/seblabbe"
}
```
CC:  @mantepse stumpc5


```
sage -t --optional=sage,internet src/sage/databases/findstat.py
```


gives


```
Using --optional=internet,memlimit,sage
Doctesting 1 file.
sage -t --warn-long 69.4 src/sage/databases/findstat.py
**********************************************************************
File "src/sage/databases/findstat.py", line 2117, in sage.databases.findstat.FindStatCollection.in_range
Failed example:
    for c in l:                                                   # optional -- internet, random
        if c.id() not in long and c.is_supported():
            f = c.first_terms(lambda x: 1, max_values=10000)
            print("{} {} {}".format(c, len(f), all(c.in_range(e) for e, _ in f)))
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.databases.findstat.FindStatCollection.in_range[8]>", line 3, in <module>
        f = c.first_terms(lambda x: Integer(1), max_values=Integer(10000))
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py", line 2174, in first_terms
        return [(x, statistic(x)) for (x,_) in zip(g, range(max_values))]
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py", line 2174, in <listcomp>
        return [(x, statistic(x)) for (x,_) in zip(g, range(max_values))]
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py", line 2170, in <genexpr>
        g = (x for n in self._levels.keys() for x in self._sageconstructor(n))
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py", line 2453, in <lambda>
        19: [None, None, None, SemistandardTableau,   lambda x: SemistandardTableaux(x),
      File "sage/misc/classcall_metaclass.pyx", line 334, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1741)
        return cls.classcall(cls, *args, **kwds)
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/combinat/tableau.py", line 5941, in __classcall_private__
        raise ValueError( "shape must be a (skew) partition" )
    ValueError: shape must be a (skew) partition
**********************************************************************

----------------------------------------------------------------------
sage -t --warn-long 69.4 src/sage/databases/findstat.py  # 1 doctests failed
----------------------------------------------------------------------
```


Issue created by migration from https://trac.sagemath.org/ticket/28864





---

archive/issue_comments_403651.json:
```json
{
    "body": "any idea of what the problem could be ? some problem for empty shape, maybe ?",
    "created_at": "2019-12-11T19:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403651",
    "user": "https://github.com/fchapoton"
}
```

any idea of what the problem could be ? some problem for empty shape, maybe ?



---

archive/issue_comments_403652.json:
```json
{
    "body": "Essentially the problem is (very very likely) that there is a new collection on findstat.org (skew partitions), which is not reflected in the sage interface (yet).\n\nVery unfortunately, findstat.org itself has (technical) problems which I was unable to resolve so far.\n\nOn top of that, investing time into the old code is going to delay the deployment of the new and shiny and proper api for the website even further, although it is almost done (since an embarassingly long time).\n\nOne way to speed up the process would be to decide to drop support for the old way to access findstat completely.  This would mean that, that I would switch findstat.org and the sage interface to the new api simultaneously, and that old versions of sage could not use findstat anymore.  I doubt that this is a very good idea, but it is a possibility.",
    "created_at": "2019-12-13T08:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403652",
    "user": "https://github.com/mantepse"
}
```

Essentially the problem is (very very likely) that there is a new collection on findstat.org (skew partitions), which is not reflected in the sage interface (yet).

Very unfortunately, findstat.org itself has (technical) problems which I was unable to resolve so far.

On top of that, investing time into the old code is going to delay the deployment of the new and shiny and proper api for the website even further, although it is almost done (since an embarassingly long time).

One way to speed up the process would be to decide to drop support for the old way to access findstat completely.  This would mean that, that I would switch findstat.org and the sage interface to the new api simultaneously, and that old versions of sage could not use findstat anymore.  I doubt that this is a very good idea, but it is a possibility.



---

archive/issue_comments_403653.json:
```json
{
    "body": "a brief update:\n\n* I am now finished with implementing a proper api on the server side of FindStat, it is currently in testing - findstat.org itself is using this api since 31.12.2019.\n\n* My next task is to rewrite the sage-findstat interface, I will use this as a testcase to check whether the api is well designed.  I intend to publish the api and the new interface at the same time.\n\nIn the meantime, the sage interface should be fully functional.",
    "created_at": "2020-01-02T06:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403653",
    "user": "https://github.com/mantepse"
}
```

a brief update:

* I am now finished with implementing a proper api on the server side of FindStat, it is currently in testing - findstat.org itself is using this api since 31.12.2019.

* My next task is to rewrite the sage-findstat interface, I will use this as a testcase to check whether the api is well designed.  I intend to publish the api and the new interface at the same time.

In the meantime, the sage interface should be fully functional.



---

archive/issue_comments_403654.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403654",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_403655.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-13T16:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403656.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-13T22:23:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403657.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-14T11:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403658.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-14T15:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403659.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-14T21:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403660.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-15T08:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403661.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-15T08:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403662.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-16T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403663.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-16T23:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403664.json:
```json
{
    "body": "Here are some first comments:\n\n* \"\"\"\n  There is a new collection available at `The Combinatorial Statistic Finder\n  (https://www.findstat.org/)`: Signed permutations.\n  To use it with this interface, it has to be added to the dictionary \n  SupportedFindStatCollections in src/sage/databases/findstat.py of the [SageMath](SageMath) distribution.\n  Please open a ticket on trac!\n  \"\"\"\n\n  Would it be possible to automatize this? Otherwise, every user will see this on startup and likely get confused.\n\n* I would prefer a single entry point (maybe `FindStat` with `FindStat.find_statistic` and `FindStat.find_map`?). If I know `findstat` but not `findmap`, I might completely miss the latter? Also, using `FindStat?` would immediately give instructions how to proceed.\n\n* (This is not for this ticket but for the backend:) Queries from the interface are not yet logged in the findstat log.\n\n* `41: St001489oMp00081oMp00059 (quality [100, 100])` The term `quality` is not obviously explained. In the doc, it might be referred to as \"a number which says how many values...\". a proper definition of this quality might be helpful.\n\n* The term `distribution` is not explained how to be used in the input section of `findstat`: it is twice referred to as \"distribution must be None\".\n\n* It remains unclear (I think, to a new user) what \"a new statistic\" means. I would suggest to not show this as one of the \"results\" of a `DababaseQuery`. Instead, I would suggest to have this available as a method `submit_as_new_statistic`. \n  * This method fails if the input datum is not a statistic (but a distribution).\n  * If there is no result, the user gets prompted a message that this method is available in case she wants to submit the data.\n\n* The term `offset` is not exlained, is it?\n\n* What about two methods `matching values` and `unmatched_values` ?\n  * Each of these could consist of lists of pairs of the form `( ( elt1, elt2, elt3 ), val )`.\n\n* Finally: Since the output might be long and confusing, I think it would be great if `FindStatMatchingStatistic` had a method `info` or `detailed_info` or alike which would in detail present this match:\n\n  {{{\n  sage: A = findstat(\"Permutations\", distribution = lambda pi: pi.number_of_descents())\n  sage: a = A[37]; a\n  St001169oMp00012oMp00061 (quality [100, 100])\n  sage: a.info()\n  After applying\n\n    Mp00061: to increasing tree\n    Mp00012: to Dyck path: up step, left tree, down step, right tree\n    (see `a.maps()` for details)\n\n  your input data matches\n\n    St001169: Number of simple modules with projective dimension at least two in the corresponding Nakayama algebra.\n    (see `a.statistic()` for details)\n\n  with offset 0 in xxx / yyy many values and xxx/yyy many different values (see `a.matching_values()` and `a.unmatched_values()` for details).\n  }}}",
    "created_at": "2020-01-17T08:34:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403664",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Here are some first comments:

* """
  There is a new collection available at `The Combinatorial Statistic Finder
  (https://www.findstat.org/)`: Signed permutations.
  To use it with this interface, it has to be added to the dictionary 
  SupportedFindStatCollections in src/sage/databases/findstat.py of the [SageMath](SageMath) distribution.
  Please open a ticket on trac!
  """

  Would it be possible to automatize this? Otherwise, every user will see this on startup and likely get confused.

* I would prefer a single entry point (maybe `FindStat` with `FindStat.find_statistic` and `FindStat.find_map`?). If I know `findstat` but not `findmap`, I might completely miss the latter? Also, using `FindStat?` would immediately give instructions how to proceed.

* (This is not for this ticket but for the backend:) Queries from the interface are not yet logged in the findstat log.

* `41: St001489oMp00081oMp00059 (quality [100, 100])` The term `quality` is not obviously explained. In the doc, it might be referred to as "a number which says how many values...". a proper definition of this quality might be helpful.

* The term `distribution` is not explained how to be used in the input section of `findstat`: it is twice referred to as "distribution must be None".

* It remains unclear (I think, to a new user) what "a new statistic" means. I would suggest to not show this as one of the "results" of a `DababaseQuery`. Instead, I would suggest to have this available as a method `submit_as_new_statistic`. 
  * This method fails if the input datum is not a statistic (but a distribution).
  * If there is no result, the user gets prompted a message that this method is available in case she wants to submit the data.

* The term `offset` is not exlained, is it?

* What about two methods `matching values` and `unmatched_values` ?
  * Each of these could consist of lists of pairs of the form `( ( elt1, elt2, elt3 ), val )`.

* Finally: Since the output might be long and confusing, I think it would be great if `FindStatMatchingStatistic` had a method `info` or `detailed_info` or alike which would in detail present this match:

  {{{
  sage: A = findstat("Permutations", distribution = lambda pi: pi.number_of_descents())
  sage: a = A[37]; a
  St001169oMp00012oMp00061 (quality [100, 100])
  sage: a.info()
  After applying

    Mp00061: to increasing tree
    Mp00012: to Dyck path: up step, left tree, down step, right tree
    (see `a.maps()` for details)

  your input data matches

    St001169: Number of simple modules with projective dimension at least two in the corresponding Nakayama algebra.
    (see `a.statistic()` for details)

  with offset 0 in xxx / yyy many values and xxx/yyy many different values (see `a.matching_values()` and `a.unmatched_values()` for details).
  }}}



---

archive/issue_comments_403665.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-17T18:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403666.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-19T10:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403667.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-20T15:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403668.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-23T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403669.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-24T12:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403670.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T20:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403671.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T22:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403672.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T14:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403673.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T16:25:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403674.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T18:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403675.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T20:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403676.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T22:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403677.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-26T22:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403677",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_403678.json:
```json
{
    "body": "Changing keywords from \"\" to \"FindStat\".",
    "created_at": "2020-01-26T22:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403678",
    "user": "https://github.com/mantepse"
}
```

Changing keywords from "" to "FindStat".



---

archive/issue_comments_403679.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T22:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T06:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403681.json:
```json
{
    "body": "Replying to [comment:15 stumpc5]:\n> Here are some first comments:\n> \n> * \"\"\"\n>   There is a new collection available at `The Combinatorial Statistic Finder\n>   (https://www.findstat.org/)`: Signed permutations.\n>   To use it with this interface, it has to be added to the dictionary \n>   SupportedFindStatCollections in src/sage/databases/findstat.py of the [SageMath](SageMath) distribution.\n>   Please open a ticket on trac!\n>   \"\"\"\n> \n>   Would it be possible to automatize this? Otherwise, every user will see this on startup and likely get confused.\n\nUnfortunately, support of new collections cannot be made automatic.  However, a new collection appears possibly once a year, so it shouldn't be a big problem.  I cleaned the message a bit.\n\n > * I would prefer a single entry point (maybe `FindStat` with `FindStat.find_statistic` and `FindStat.find_map`?). If I know `findstat` but not `findmap`, I might completely miss the latter? Also, using `FindStat?` would immediately give instructions how to proceed.\n\nNo, I don't want to do this.  If you discover `findstat`, I am sure you will discover `findstat`, too.  Introducing a new layer introduces more typing with very little benefit - it is extremely unlikely that there will be a third item analogous to `findstat` and `findmap`.  To get the tutorial, `sage.databases.findstat?` suffices, as with all of sage.\n \n> * `41: St001489oMp00081oMp00059 (quality [100, 100])` The term `quality` is not obviously explained. In the doc, it might be referred to as \"a number which says how many values...\". a proper definition of this quality might be helpful.\n\nThe quality is explained in the tutorial, but I agree it should also be explained in `findstat?` and `findmap?`.  Patches welcome.\n\n> * The term `distribution` is not explained how to be used in the input section of `findstat`: it is twice referred to as \"distribution must be None\".\n\nIndeed, the documentation of `findstat` and `findmap` still needs to be improved.\n\n> * It remains unclear (I think, to a new user) what \"a new statistic\" means. I would suggest to not show this as one of the \"results\" of a `DababaseQuery`. Instead, I would suggest to have this available as a method `submit_as_new_statistic`. \n>   * This method fails if the input datum is not a statistic (but a distribution).\n>   * If there is no result, the user gets prompted a message that this method is available in case she wants to submit the data.\n\nDone, with the exception of failing for \"distributions\", because it is not clear when to fail exactly.  I think it is better (and easier) to allow submission in case of doubt.\n\n> * The term `offset` is not exlained, is it?\n\nIt is now in the tutorial, but should also be explained by `findstat?`\n\n> * What about two methods `matching values` and `unmatched_values` ?\n>   * Each of these could consist of lists of pairs of the form `( ( elt1, elt2, elt3 ), val )`.\n\nThat's non-trivial, and I'd therefore like not to do it now. \n\n> * Finally: Since the output might be long and confusing, I think it would be great if `FindStatMatchingStatistic` had a method `info` or `detailed_info` or alike which would in detail present this match:\n\ndone.",
    "created_at": "2020-01-27T08:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403681",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:15 stumpc5]:
> Here are some first comments:
> 
> * """
>   There is a new collection available at `The Combinatorial Statistic Finder
>   (https://www.findstat.org/)`: Signed permutations.
>   To use it with this interface, it has to be added to the dictionary 
>   SupportedFindStatCollections in src/sage/databases/findstat.py of the [SageMath](SageMath) distribution.
>   Please open a ticket on trac!
>   """
> 
>   Would it be possible to automatize this? Otherwise, every user will see this on startup and likely get confused.

Unfortunately, support of new collections cannot be made automatic.  However, a new collection appears possibly once a year, so it shouldn't be a big problem.  I cleaned the message a bit.

 > * I would prefer a single entry point (maybe `FindStat` with `FindStat.find_statistic` and `FindStat.find_map`?). If I know `findstat` but not `findmap`, I might completely miss the latter? Also, using `FindStat?` would immediately give instructions how to proceed.

No, I don't want to do this.  If you discover `findstat`, I am sure you will discover `findstat`, too.  Introducing a new layer introduces more typing with very little benefit - it is extremely unlikely that there will be a third item analogous to `findstat` and `findmap`.  To get the tutorial, `sage.databases.findstat?` suffices, as with all of sage.
 
> * `41: St001489oMp00081oMp00059 (quality [100, 100])` The term `quality` is not obviously explained. In the doc, it might be referred to as "a number which says how many values...". a proper definition of this quality might be helpful.

The quality is explained in the tutorial, but I agree it should also be explained in `findstat?` and `findmap?`.  Patches welcome.

> * The term `distribution` is not explained how to be used in the input section of `findstat`: it is twice referred to as "distribution must be None".

Indeed, the documentation of `findstat` and `findmap` still needs to be improved.

> * It remains unclear (I think, to a new user) what "a new statistic" means. I would suggest to not show this as one of the "results" of a `DababaseQuery`. Instead, I would suggest to have this available as a method `submit_as_new_statistic`. 
>   * This method fails if the input datum is not a statistic (but a distribution).
>   * If there is no result, the user gets prompted a message that this method is available in case she wants to submit the data.

Done, with the exception of failing for "distributions", because it is not clear when to fail exactly.  I think it is better (and easier) to allow submission in case of doubt.

> * The term `offset` is not exlained, is it?

It is now in the tutorial, but should also be explained by `findstat?`

> * What about two methods `matching values` and `unmatched_values` ?
>   * Each of these could consist of lists of pairs of the form `( ( elt1, elt2, elt3 ), val )`.

That's non-trivial, and I'd therefore like not to do it now. 

> * Finally: Since the output might be long and confusing, I think it would be great if `FindStatMatchingStatistic` had a method `info` or `detailed_info` or alike which would in detail present this match:

done.



---

archive/issue_comments_403682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T09:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403683.json:
```json
{
    "body": "I just tried this for the first time and get\n\n```\nsage: findstat(3)\n<repr(<sage.databases.findstat.FindStatStatistics_with_category.element_class at 0x1be3bcfc0>) failed: requests.exceptions.SSLError: Can't connect to HTTPS URL because the SSL module is not available.>\n```\n\nWhat do I do?\n\nIt appears that `openssl` is not installed on macOS Catalina:\n\n```\nsage: import ssl\n---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\n<ipython-input-3-bc7fc2b48773> in <module>()\n----> 1 import ssl\n\n/Users/kathrinmeier/sage/local/lib/python3.7/ssl.py in <module>()\n     96 from enum import Enum as _Enum, IntEnum as _IntEnum, IntFlag as _IntFlag\n     97 \n---> 98 import _ssl             # if we can't import it, let the error propagate\n     99 \n    100 from _ssl import OPENSSL_VERSION_NUMBER, OPENSSL_VERSION_INFO, OPENSSL_VERSION\n\nModuleNotFoundError: No module named '_ssl'\n```\n",
    "created_at": "2020-01-28T08:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403683",
    "user": "https://github.com/kathrin2006"
}
```

I just tried this for the first time and get

```
sage: findstat(3)
<repr(<sage.databases.findstat.FindStatStatistics_with_category.element_class at 0x1be3bcfc0>) failed: requests.exceptions.SSLError: Can't connect to HTTPS URL because the SSL module is not available.>
```

What do I do?

It appears that `openssl` is not installed on macOS Catalina:

```
sage: import ssl
---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
<ipython-input-3-bc7fc2b48773> in <module>()
----> 1 import ssl

/Users/kathrinmeier/sage/local/lib/python3.7/ssl.py in <module>()
     96 from enum import Enum as _Enum, IntEnum as _IntEnum, IntFlag as _IntFlag
     97 
---> 98 import _ssl             # if we can't import it, let the error propagate
     99 
    100 from _ssl import OPENSSL_VERSION_NUMBER, OPENSSL_VERSION_INFO, OPENSSL_VERSION

ModuleNotFoundError: No module named '_ssl'
```




---

archive/issue_comments_403684.json:
```json
{
    "body": "Hi Kathrin!  I'm afraid I can't help you here (I am unfamiliar with macOS), maybe you can ask on sage-devel or sage-support.  Did you try whether `oeis([1,2,5,14,42])` works?\n\nHere is a (very stupid) workaround - but you absolutely have to fix openssl support:\n\n```\nsage: from sage.databases.findstat import FINDSTAT_URL\nsage: sage.databases.findstat.FINDSTAT_URL = 'http://www.findstat.org/'\n```\n",
    "created_at": "2020-01-28T08:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403684",
    "user": "https://github.com/mantepse"
}
```

Hi Kathrin!  I'm afraid I can't help you here (I am unfamiliar with macOS), maybe you can ask on sage-devel or sage-support.  Did you try whether `oeis([1,2,5,14,42])` works?

Here is a (very stupid) workaround - but you absolutely have to fix openssl support:

```
sage: from sage.databases.findstat import FINDSTAT_URL
sage: sage.databases.findstat.FINDSTAT_URL = 'http://www.findstat.org/'
```




---

archive/issue_comments_403685.json:
```json
{
    "body": "Hi,\nunfortunately neither `oeis([1,2,5,14,42])` nor your workaround worked.\n\nI even tried\n\n```\nsage -i pip openssl\n```\n\nnow but without any new result.",
    "created_at": "2020-01-28T08:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403685",
    "user": "https://github.com/kathrin2006"
}
```

Hi,
unfortunately neither `oeis([1,2,5,14,42])` nor your workaround worked.

I even tried

```
sage -i pip openssl
```

now but without any new result.



---

archive/issue_comments_403686.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-28T18:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403687.json:
```json
{
    "body": "Replying to [comment:35 gh-kathrin2006]:\n> Hi,\n> unfortunately neither `oeis([1,2,5,14,42])` nor your workaround worked.\n> \n> I even tried\n> {{{\n> sage -i pip openssl\n> }}}\n> now but without any new result. \n\nInstalling openssl should be followed by `sage -f python` that will rebuild all of sage.",
    "created_at": "2020-01-28T20:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403687",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:35 gh-kathrin2006]:
> Hi,
> unfortunately neither `oeis([1,2,5,14,42])` nor your workaround worked.
> 
> I even tried
> {{{
> sage -i pip openssl
> }}}
> now but without any new result. 

Installing openssl should be followed by `sage -f python` that will rebuild all of sage.



---

archive/issue_comments_403688.json:
```json
{
    "body": "Is the following a bug?\n\n```\nsage: sts = findstat(\"DyckPaths\", [ ( list(DyckWords(n)), [inner_trians(T,n+2) for T in trians(n+2)] ) for n in [2 .. 5] ])\nsage: sts.submit()\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-42-ef4ef8d3bffa> in <module>()\n----> 1 sts.submit()\n\n/home/stumpcl2/Programs/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py in submit(self, max_values)\n   2319         else:\n   2320             url = FINDSTAT_NEWSTATISTIC_FORM_HEADER % (FINDSTAT_URL_EDIT_STATISTIC + self.id_str())\n-> 2321         _submit(args, url)\n   2322 \n   2323     # editing and submitting is really the same thing\n\n/home/stumpcl2/Programs/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py in _submit(args, url)\n    443     verbose(\"Created temporary file %s\" % f.name, caller_name='FindStat')\n    444     f.write(FINDSTAT_POST_HEADER)\n--> 445     if not int(id_str[2:]):\n    446         f.write(url_header % url_new)\n    447     else:\n\nNameError: name 'id_str' is not defined\n```\n\n\nAlso, `submit_as_new_statistic` is more explicit than `submit`. The docstring says \"Open the FindStat web page for editing the statistic in a browser.\" even though this data is not an existing statistic that can be edited.",
    "created_at": "2020-01-29T13:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403688",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Is the following a bug?

```
sage: sts = findstat("DyckPaths", [ ( list(DyckWords(n)), [inner_trians(T,n+2) for T in trians(n+2)] ) for n in [2 .. 5] ])
sage: sts.submit()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-42-ef4ef8d3bffa> in <module>()
----> 1 sts.submit()

/home/stumpcl2/Programs/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py in submit(self, max_values)
   2319         else:
   2320             url = FINDSTAT_NEWSTATISTIC_FORM_HEADER % (FINDSTAT_URL_EDIT_STATISTIC + self.id_str())
-> 2321         _submit(args, url)
   2322 
   2323     # editing and submitting is really the same thing

/home/stumpcl2/Programs/sage/local/lib/python3.7/site-packages/sage/databases/findstat.py in _submit(args, url)
    443     verbose("Created temporary file %s" % f.name, caller_name='FindStat')
    444     f.write(FINDSTAT_POST_HEADER)
--> 445     if not int(id_str[2:]):
    446         f.write(url_header % url_new)
    447     else:

NameError: name 'id_str' is not defined
```


Also, `submit_as_new_statistic` is more explicit than `submit`. The docstring says "Open the FindStat web page for editing the statistic in a browser." even though this data is not an existing statistic that can be edited.



---

archive/issue_comments_403689.json:
```json
{
    "body": "The docstring of the method `quality` does not explain the tuple of two integers. Should it?",
    "created_at": "2020-01-29T13:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403689",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

The docstring of the method `quality` does not explain the tuple of two integers. Should it?



---

archive/issue_comments_403690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-29T17:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403691.json:
```json
{
    "body": "unfortunately, I have a problem with submit, it doesn't do the right thing with line breaks :-(",
    "created_at": "2020-01-29T17:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403691",
    "user": "https://github.com/mantepse"
}
```

unfortunately, I have a problem with submit, it doesn't do the right thing with line breaks :-(



---

archive/issue_comments_403692.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-30T10:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403693.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-30T19:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403694.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-02T14:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403694",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_403695.json:
```json
{
    "body": "With sage-9.1.beta2 + this branch, the command\n\n\n```\nsage -t --optional=sage,internet src/sage/databases/findstat.py\n```\n\n\ngives\n\n\n```\nsage -t src/sage/databases/findstat.py\n**********************************************************************\nFile \"src/sage/databases/findstat.py\", line 49, in sage.databases.findstat\nFailed example:\n    r = findstat([(m, m.number_of_nestings()) for n in range(6) for m in PM(2*n)]); r # optional -- internet\nExpected:\n    0: St000042oMp00116 (quality [100, 100])\n    1: St000041 (quality [20, 100])\n    ...\nGot:\n    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:\n        Cc0026: Decorated permutations\n    To use it with this interface, it has to be added to the dictionary\n        _SupportedFindStatCollections in src/sage/databases/findstat.py\n    of the SageMath distribution.  Please open a ticket on trac!\n    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:\n        Cc0025: Plane partitions\n    To use it with this interface, it has to be added to the dictionary\n        _SupportedFindStatCollections in src/sage/databases/findstat.py\n    of the SageMath distribution.  Please open a ticket on trac!\n    0: St000042oMp00116 (quality [100, 100])\n    1: St000041 (quality [20, 100])\n    2: St000232oMp00115oMp00092 (quality [17, 70])\n    3: St000233oMp00092 (quality [16, 100])\n    4: St000496oMp00092 (quality [16, 100])\n    5: St000123oMp00087oMp00058 (quality [13, 70])\n    6: St000359oMp00087oMp00058 (quality [13, 70])\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.databases.findstat\n    [382 tests, 1 failure, 39.76 s]\n----------------------------------------------------------------------\nsage -t src/sage/databases/findstat.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2020-02-02T14:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403695",
    "user": "https://github.com/seblabbe"
}
```

With sage-9.1.beta2 + this branch, the command


```
sage -t --optional=sage,internet src/sage/databases/findstat.py
```


gives


```
sage -t src/sage/databases/findstat.py
**********************************************************************
File "src/sage/databases/findstat.py", line 49, in sage.databases.findstat
Failed example:
    r = findstat([(m, m.number_of_nestings()) for n in range(6) for m in PM(2*n)]); r # optional -- internet
Expected:
    0: St000042oMp00116 (quality [100, 100])
    1: St000041 (quality [20, 100])
    ...
Got:
    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:
        Cc0026: Decorated permutations
    To use it with this interface, it has to be added to the dictionary
        _SupportedFindStatCollections in src/sage/databases/findstat.py
    of the SageMath distribution.  Please open a ticket on trac!
    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:
        Cc0025: Plane partitions
    To use it with this interface, it has to be added to the dictionary
        _SupportedFindStatCollections in src/sage/databases/findstat.py
    of the SageMath distribution.  Please open a ticket on trac!
    0: St000042oMp00116 (quality [100, 100])
    1: St000041 (quality [20, 100])
    2: St000232oMp00115oMp00092 (quality [17, 70])
    3: St000233oMp00092 (quality [16, 100])
    4: St000496oMp00092 (quality [16, 100])
    5: St000123oMp00087oMp00058 (quality [13, 70])
    6: St000359oMp00087oMp00058 (quality [13, 70])
**********************************************************************
1 item had failures:
   1 of  16 in sage.databases.findstat
    [382 tests, 1 failure, 39.76 s]
----------------------------------------------------------------------
sage -t src/sage/databases/findstat.py  # 1 doctest failed
----------------------------------------------------------------------
```




---

archive/issue_comments_403696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-29T16:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403697.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403697",
    "user": "https://github.com/mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_403698.json:
```json
{
    "body": "Merge conflict with 9.2.beta0.",
    "created_at": "2020-06-04T11:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403698",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Merge conflict with 9.2.beta0.



---

archive/issue_comments_403699.json:
```json
{
    "body": "\n```\nThe Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:\n    Cc0026: Decorated permutations\n    Cc0025: Plane partitions\nTo use it with this interface, it has to be added to the dictionary\n    _SupportedFindStatCollections in src/sage/databases/findstat.py\nof the SageMath distribution.  Please open a ticket on trac!\n```\n",
    "created_at": "2020-06-04T11:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403699",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```


```
The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:
    Cc0026: Decorated permutations
    Cc0025: Plane partitions
To use it with this interface, it has to be added to the dictionary
    _SupportedFindStatCollections in src/sage/databases/findstat.py
of the SageMath distribution.  Please open a ticket on trac!
```




---

archive/issue_comments_403700.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T13:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403701.json:
```json
{
    "body": "Updating the description of the ticket to mention the 17 failing doctests.",
    "created_at": "2020-06-29T14:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403701",
    "user": "https://github.com/seblabbe"
}
```

Updating the description of the ticket to mention the 17 failing doctests.



---

archive/issue_comments_403702.json:
```json
{
    "body": "Testing the current branch, I get only one doctest failure copied below:\n\n\n```\nsage -t src/sage/databases/findstat.py\n**********************************************************************\nFile \"src/sage/databases/findstat.py\", line 49, in sage.databases.findstat\nFailed example:\n    r = findstat([(m, m.number_of_nestings()) for n in range(6) for m in PM(2*n)]); r # optional -- internet\nExpected:\n    0: St000042oMp00116 (quality [100, 100])\n    1: St000041 (quality [20, 100])\n    ...\nGot:\n    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:\n        Cc0026: Decorated permutations\n    To use it with this interface, it has to be added to the dictionary\n        _SupportedFindStatCollections in src/sage/databases/findstat.py\n    of the SageMath distribution.  Please open a ticket on trac!\n    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:\n        Cc0025: Plane partitions\n    To use it with this interface, it has to be added to the dictionary\n        _SupportedFindStatCollections in src/sage/databases/findstat.py\n    of the SageMath distribution.  Please open a ticket on trac!\n    0: St000042oMp00116 (quality [100, 100])\n    1: St000041 (quality [20, 100])\n    2: St000232oMp00115oMp00092 (quality [17, 70])\n    3: St000233oMp00092 (quality [16, 100])\n    4: St000496oMp00092 (quality [16, 100])\n    5: St000123oMp00087oMp00058 (quality [13, 70])\n    6: St000359oMp00087oMp00058 (quality [13, 70])\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.databases.findstat\n    [382 tests, 1 failure, 46.16 s]\n----------------------------------------------------------------------\nsage -t src/sage/databases/findstat.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\n\nTell me when this needs review again or change the status to needs review.",
    "created_at": "2020-06-29T14:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403702",
    "user": "https://github.com/seblabbe"
}
```

Testing the current branch, I get only one doctest failure copied below:


```
sage -t src/sage/databases/findstat.py
**********************************************************************
File "src/sage/databases/findstat.py", line 49, in sage.databases.findstat
Failed example:
    r = findstat([(m, m.number_of_nestings()) for n in range(6) for m in PM(2*n)]); r # optional -- internet
Expected:
    0: St000042oMp00116 (quality [100, 100])
    1: St000041 (quality [20, 100])
    ...
Got:
    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:
        Cc0026: Decorated permutations
    To use it with this interface, it has to be added to the dictionary
        _SupportedFindStatCollections in src/sage/databases/findstat.py
    of the SageMath distribution.  Please open a ticket on trac!
    The Combinatorial Statistic Finder (https://www.findstat.org/) provides a new collection:
        Cc0025: Plane partitions
    To use it with this interface, it has to be added to the dictionary
        _SupportedFindStatCollections in src/sage/databases/findstat.py
    of the SageMath distribution.  Please open a ticket on trac!
    0: St000042oMp00116 (quality [100, 100])
    1: St000041 (quality [20, 100])
    2: St000232oMp00115oMp00092 (quality [17, 70])
    3: St000233oMp00092 (quality [16, 100])
    4: St000496oMp00092 (quality [16, 100])
    5: St000123oMp00087oMp00058 (quality [13, 70])
    6: St000359oMp00087oMp00058 (quality [13, 70])
**********************************************************************
1 item had failures:
   1 of  16 in sage.databases.findstat
    [382 tests, 1 failure, 46.16 s]
----------------------------------------------------------------------
sage -t src/sage/databases/findstat.py  # 1 doctest failed
----------------------------------------------------------------------
```


Tell me when this needs review again or change the status to needs review.



---

archive/issue_comments_403703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-04T21:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T18:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403705.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T15:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403706.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T15:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T19:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403708.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-12T12:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403709.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-12T22:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403710.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-12T22:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403710",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403711.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T06:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403712.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T19:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403713.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-14T06:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403714.json:
```json
{
    "body": "python3 says:\n\n```\ninside file:  b/src/sage/databases/findstat.py\n@@ -171,13 +205,12 @@ Classes and methods\n+from six import string_types\nPython3 incompatible code inserted on 1 non-empty lines\n```\n\nIs there a more python3 way to import it? Maybe among:\n\n```\nsage: import_statements('string_types')                                         \n# **Warning**: distinct objects with name 'string_types' in:\n#   - ipython_genutils.py3compat\n#   - pexpect.utils\n#   - pickleshare\n#   - pygments.filters\n#   - pygments.formatter\n#   - pygments.formatters.html\n#   - pygments.util\n#   - six\n#   - traitlets.utils.importstring\n# ** Warning **: several modules for the object (<class 'str'>,): pygments.filters, pygments.formatter, pygments.formatters.html, pygments.util\nfrom pygments.util import string_types\n```\n\n\nAlso pyflakes still says:\n\n```\nsrc/sage/combinat/decorated_permutation.py:23:1 'sage.misc.classcall_metaclass.ClasscallMetaclass' imported but unused\n\nfound 1 pyflakes errors in the modified files\n```\n\nIs it really unused?",
    "created_at": "2020-09-14T07:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403714",
    "user": "https://github.com/seblabbe"
}
```

python3 says:

```
inside file:  b/src/sage/databases/findstat.py
@@ -171,13 +205,12 @@ Classes and methods
+from six import string_types
Python3 incompatible code inserted on 1 non-empty lines
```

Is there a more python3 way to import it? Maybe among:

```
sage: import_statements('string_types')                                         
# **Warning**: distinct objects with name 'string_types' in:
#   - ipython_genutils.py3compat
#   - pexpect.utils
#   - pickleshare
#   - pygments.filters
#   - pygments.formatter
#   - pygments.formatters.html
#   - pygments.util
#   - six
#   - traitlets.utils.importstring
# ** Warning **: several modules for the object (<class 'str'>,): pygments.filters, pygments.formatter, pygments.formatters.html, pygments.util
from pygments.util import string_types
```


Also pyflakes still says:

```
src/sage/combinat/decorated_permutation.py:23:1 'sage.misc.classcall_metaclass.ClasscallMetaclass' imported but unused

found 1 pyflakes errors in the modified files
```

Is it really unused?



---

archive/issue_comments_403715.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-09-14T07:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403715",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_403716.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-14T07:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403717.json:
```json
{
    "body": "Hi S\u00e9bastien!\n\nThank you for looking into this!\n\nDo you happen to know the replacement for `string_types`?  (The interface was incredibly sensitive to str-unicode issues in the past, which is why I'm a bit hesitant.)",
    "created_at": "2020-09-14T07:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403717",
    "user": "https://github.com/mantepse"
}
```

Hi Sébastien!

Thank you for looking into this!

Do you happen to know the replacement for `string_types`?  (The interface was incredibly sensitive to str-unicode issues in the past, which is why I'm a bit hesitant.)



---

archive/issue_comments_403718.json:
```json
{
    "body": "now that sage is python3 only, we should not use six at all. Use `str`\n\nAnd use the python3 syntax for metaclass. `git grep` will help you to find existing examples.",
    "created_at": "2020-09-14T07:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403718",
    "user": "https://github.com/fchapoton"
}
```

now that sage is python3 only, we should not use six at all. Use `str`

And use the python3 syntax for metaclass. `git grep` will help you to find existing examples.



---

archive/issue_comments_403719.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-14T07:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403720.json:
```json
{
    "body": "Concerning metaclass: isn't\n\n```\nclass FindStatMap(Element,\n                  FindStatFunction,\n                  FindStatCombinatorialMap,\n                  metaclass=InheritComparisonClasscallMetaclass):\n```\n\ncorrect?\n\nI replaced `string_types` with `str`\n----\nNew commits:",
    "created_at": "2020-09-14T07:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403720",
    "user": "https://github.com/mantepse"
}
```

Concerning metaclass: isn't

```
class FindStatMap(Element,
                  FindStatFunction,
                  FindStatCombinatorialMap,
                  metaclass=InheritComparisonClasscallMetaclass):
```

correct?

I replaced `string_types` with `str`
----
New commits:



---

archive/issue_comments_403721.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-09-14T07:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403721",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_403722.json:
```json
{
    "body": "(I guess I should also update the ticket description, right?)",
    "created_at": "2020-09-14T07:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403722",
    "user": "https://github.com/mantepse"
}
```

(I guess I should also update the ticket description, right?)



---

archive/issue_comments_403723.json:
```json
{
    "body": "Changing component from doctest coverage to combinatorics.",
    "created_at": "2020-09-14T10:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403723",
    "user": "https://github.com/mantepse"
}
```

Changing component from doctest coverage to combinatorics.



---

archive/issue_comments_403724.json:
```json
{
    "body": "python3 + pyflakes now ok. Doc builds ok (according to patchbot). All normal test passed on patchbot (except a unrelated singular error). All tests including internet pass on my machine for the file findstat. Positive review.",
    "created_at": "2020-09-14T12:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403724",
    "user": "https://github.com/seblabbe"
}
```

python3 + pyflakes now ok. Doc builds ok (according to patchbot). All normal test passed on patchbot (except a unrelated singular error). All tests including internet pass on my machine for the file findstat. Positive review.



---

archive/issue_comments_403725.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-14T12:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403725",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403726.json:
```json
{
    "body": "Wow, that was quick!  Thank you!",
    "created_at": "2020-09-14T12:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403726",
    "user": "https://github.com/mantepse"
}
```

Wow, that was quick!  Thank you!



---

archive/issue_comments_403727.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-18T20:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28627#issuecomment-403727",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_026479.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-18T20:23:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28627",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28627#event-26479"
}
```
