# Issue 17081: openssl-dependent tests in notebook_ipython should be marked optional

archive/issues_017081.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/17318\n\n",
    "created_at": "2014-11-12T09:43:02Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "openssl-dependent tests in notebook_ipython should be marked optional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17081",
    "user": "https://github.com/dimpase"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/17318





---

archive/issue_comments_226868.json:
```json
{
    "body": "Changing component from interfaces to notebook.",
    "created_at": "2014-11-13T17:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226868",
    "user": "https://github.com/vbraun"
}
```

Changing component from interfaces to notebook.



---

archive/issue_comments_226869.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-11-13T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226869",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_226870.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-13T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226870",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226871.json:
```json
{
    "body": "The problem is how to test if this does the thing without ssl installed.\nWould it be enough to build Sage and do not install openssl spkg?",
    "created_at": "2014-11-16T20:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226871",
    "user": "https://github.com/dimpase"
}
```

The problem is how to test if this does the thing without ssl installed.
Would it be enough to build Sage and do not install openssl spkg?



---

archive/issue_comments_226872.json:
```json
{
    "body": "easiest way is to rename `_ssl.so`",
    "created_at": "2014-11-16T21:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226872",
    "user": "https://github.com/vbraun"
}
```

easiest way is to rename `_ssl.so`



---

archive/issue_comments_226873.json:
```json
{
    "body": "Replying to [comment:5 vbraun]:\n> easiest way is to rename `_ssl.so`then \n\nit seems to me that the patch goes too far in making tests pass no matter what. Indeed, if I do this renaming and do\n\n```\nsage -bt --long --optional=ssl src/sage/repl/ipython_extension.py\n```\n\nI see\n\n```\n...\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nAll tests passed\n```\n\ninstead of a meaningful error.",
    "created_at": "2014-11-16T21:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226873",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 vbraun]:
> easiest way is to rename `_ssl.so`then 

it seems to me that the patch goes too far in making tests pass no matter what. Indeed, if I do this renaming and do

```
sage -bt --long --optional=ssl src/sage/repl/ipython_extension.py
```

I see

```
...
    [0 tests, 0.00 s]
----------------------------------------------------------------------
All tests passed
```

instead of a meaningful error.



---

archive/issue_comments_226874.json:
```json
{
    "body": "The only ssl dependence is in `src/sage/repl/notebook_ipython.py`",
    "created_at": "2014-11-16T21:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226874",
    "user": "https://github.com/vbraun"
}
```

The only ssl dependence is in `src/sage/repl/notebook_ipython.py`



---

archive/issue_comments_226875.json:
```json
{
    "body": "While running `sage -t --optional=ssl` I get failures like \n\n```\nFile \"src/sage/repl/notebook_ipython.py\", line 81, in sage.repl.notebook_ipython.SageNotebookApp.load_config_file\nFailed example:\n    app = SageNotebookApp()   # optional - ssl\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 851, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.repl.notebook_ipython.SageNotebookApp.load_config_file[0]>\", line 1, in <module>\n        app = SageNotebookApp()   # optional - ssl\n    NameError: name 'SageNotebookApp' is not defined\n```\n\nwhile the same code works fine at the Sage prompt. Don't know what's going on here...",
    "created_at": "2014-11-17T09:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226875",
    "user": "https://github.com/dimpase"
}
```

While running `sage -t --optional=ssl` I get failures like 

```
File "src/sage/repl/notebook_ipython.py", line 81, in sage.repl.notebook_ipython.SageNotebookApp.load_config_file
Failed example:
    app = SageNotebookApp()   # optional - ssl
Exception raised:
    Traceback (most recent call last):
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 851, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.repl.notebook_ipython.SageNotebookApp.load_config_file[0]>", line 1, in <module>
        app = SageNotebookApp()   # optional - ssl
    NameError: name 'SageNotebookApp' is not defined
```

while the same code works fine at the Sage prompt. Don't know what's going on here...



---

archive/issue_comments_226876.json:
```json
{
    "body": "You need `--optional=sage,ssl`.",
    "created_at": "2014-11-17T11:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226876",
    "user": "https://github.com/vbraun"
}
```

You need `--optional=sage,ssl`.



---

archive/issue_comments_226877.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> You need `--optional=sage,ssl`.\n\nyeah, right. Sorry for noise.",
    "created_at": "2014-11-17T14:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226877",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:9 vbraun]:
> You need `--optional=sage,ssl`.

yeah, right. Sorry for noise.



---

archive/issue_comments_226878.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-17T14:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226878",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226879.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-19T08:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17081#issuecomment-226879",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050014.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-19T08:32:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17081",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17081#event-50014"
}
```
