# Issue 17081: openssl-dependent tests in notebook_ipython should be marked optional

Issue created by migration from https://trac.sagemath.org/ticket/17318

Original creator: dimpase

Original creation time: 2014-11-12 09:43:02




---

Comment by vbraun created at 2014-11-13 17:20:06

Changing component from interfaces to notebook.


---

Comment by vbraun created at 2014-11-13 17:46:30

New commits:


---

Comment by vbraun created at 2014-11-13 17:46:30

Changing status from new to needs_review.


---

Comment by dimpase created at 2014-11-16 20:45:13

The problem is how to test if this does the thing without ssl installed.
Would it be enough to build Sage and do not install openssl spkg?


---

Comment by vbraun created at 2014-11-16 21:07:59

easiest way is to rename `_ssl.so`


---

Comment by dimpase created at 2014-11-16 21:26:40

Replying to [comment:5 vbraun]:
> easiest way is to rename `_ssl.so`then 

it seems to me that the patch goes too far in making tests pass no matter what. Indeed, if I do this renaming and do

```
sage -bt --long --optional=ssl src/sage/repl/ipython_extension.py
```

I see

```
...
    [0 tests, 0.00 s]
----------------------------------------------------------------------
All tests passed
```

instead of a meaningful error.


---

Comment by vbraun created at 2014-11-16 21:50:57

The only ssl dependence is in `src/sage/repl/notebook_ipython.py`


---

Comment by dimpase created at 2014-11-17 09:36:49

While running `sage -t --optional=ssl` I get failures like 

```
File "src/sage/repl/notebook_ipython.py", line 81, in sage.repl.notebook_ipython.SageNotebookApp.load_config_file
Failed example:
    app = SageNotebookApp()   # optional - ssl
Exception raised:
    Traceback (most recent call last):
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 851, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.repl.notebook_ipython.SageNotebookApp.load_config_file[0]>", line 1, in <module>
        app = SageNotebookApp()   # optional - ssl
    NameError: name 'SageNotebookApp' is not defined
```

while the same code works fine at the Sage prompt. Don't know what's going on here...


---

Comment by vbraun created at 2014-11-17 11:28:04

You need `--optional=sage,ssl`.


---

Comment by dimpase created at 2014-11-17 14:27:27

Replying to [comment:9 vbraun]:
> You need `--optional=sage,ssl`.

yeah, right. Sorry for noise.


---

Comment by dimpase created at 2014-11-17 14:28:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-19 08:32:11

Resolution: fixed
