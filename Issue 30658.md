# Issue 30658: Developers' guide: Update "Packaging Third-Party Code" regarding upstream_url

archive/issues_030658.json:
```json
{
    "body": "CC:  slabbe @tobiasdiez jhpalmieri dimpase paulmasson\n\n... and other features of `sage --package`.\n\nhttps://doc.sagemath.org/html/en/developer/packaging.html\n\nSources:\n- https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1\n- https://wiki.sagemath.org/ReleaseTours/sage-9.2#For_developers:_Upgrading_packages\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30895\n\n",
    "created_at": "2020-11-11T17:16:13Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "title": "Developers' guide: Update \"Packaging Third-Party Code\" regarding upstream_url",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30658",
    "user": "mkoeppe"
}
```
CC:  slabbe @tobiasdiez jhpalmieri dimpase paulmasson

... and other features of `sage --package`.

https://doc.sagemath.org/html/en/developer/packaging.html

Sources:
- https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1
- https://wiki.sagemath.org/ReleaseTours/sage-9.2#For_developers:_Upgrading_packages


Issue created by migration from https://trac.sagemath.org/ticket/30895





---

archive/issue_comments_438209.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-21T19:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438209",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_438210.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-21T19:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438210",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438211.json:
```json
{
    "body": "this is a bit off-topic:\n\nIs there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url.",
    "created_at": "2020-11-21T21:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438211",
    "user": "dimpase"
}
```

this is a bit off-topic:

Is there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url.



---

archive/issue_comments_438212.json:
```json
{
    "body": "Replying to [comment:4 dimpase]:\n> Is there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url. \n\nYou can edit the file `upstream/mirror_list`.",
    "created_at": "2020-11-21T23:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438212",
    "user": "mkoeppe"
}
```

Replying to [comment:4 dimpase]:
> Is there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url. 

You can edit the file `upstream/mirror_list`.



---

archive/issue_comments_438213.json:
```json
{
    "body": "Can you add after\n\n```\n+--enable-download-from-upstream-url``.  Then Sage will fall back to\n+downloading package tarballs from the ``upstream_url``.  It is then no\n+longer necessary to manually download upstream tarballs.\n```\n\nsomething like \n\n```\nOne can manually trim `upstream/mirror_list` to fewer mirrors so that the fallback\nhappens quicker.\n```\n",
    "created_at": "2020-11-22T08:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438213",
    "user": "dimpase"
}
```

Can you add after

```
+--enable-download-from-upstream-url``.  Then Sage will fall back to
+downloading package tarballs from the ``upstream_url``.  It is then no
+longer necessary to manually download upstream tarballs.
```

something like 

```
One can manually trim `upstream/mirror_list` to fewer mirrors so that the fallback
happens quicker.
```




---

archive/issue_comments_438214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-22T20:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438214",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-27T08:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438215",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438216.json:
```json
{
    "body": "bot is green for the doc changes.",
    "created_at": "2020-11-27T08:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438216",
    "user": "slabbe"
}
```

bot is green for the doc changes.



---

archive/issue_comments_438217.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-11-27T18:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438217",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_438218.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-05T22:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30658#issuecomment-438218",
    "user": "vbraun"
}
```

Resolution: fixed
