# Issue 30658: Developers' guide: Update "Packaging Third-Party Code" regarding upstream_url

Issue created by migration from https://trac.sagemath.org/ticket/30895

Original creator: mkoeppe

Original creation time: 2020-11-11 17:16:13

CC:  slabbe @tobiasdiez jhpalmieri dimpase paulmasson

... and other features of `sage --package`.

https://doc.sagemath.org/html/en/developer/packaging.html

Sources:
 - https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1
 - https://wiki.sagemath.org/ReleaseTours/sage-9.2#For_developers:_Upgrading_packages



---

Comment by mkoeppe created at 2020-11-21 19:47:14

New commits:


---

Comment by mkoeppe created at 2020-11-21 19:47:14

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-11-21 21:15:35

this is a bit off-topic:

Is there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url.


---

Comment by mkoeppe created at 2020-11-21 23:03:43

Replying to [comment:4 dimpase]:
> Is there away to minimize checking of mirrors for tarballs that aren't there; if one adds an upstream_url, and starts installing this package, then it takes long time for Sage to discover that the tarball is not on mirrors, before using upstream_url. 

You can edit the file `upstream/mirror_list`.


---

Comment by dimpase created at 2020-11-22 08:08:41

Can you add after

```
+--enable-download-from-upstream-url``.  Then Sage will fall back to
+downloading package tarballs from the ``upstream_url``.  It is then no
+longer necessary to manually download upstream tarballs.
```

something like 

```
One can manually trim `upstream/mirror_list` to fewer mirrors so that the fallback
happens quicker.
```



---

Comment by git created at 2020-11-22 20:44:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2020-11-27 08:17:26

Changing status from needs_review to positive_review.


---

Comment by slabbe created at 2020-11-27 08:17:26

bot is green for the doc changes.


---

Comment by mkoeppe created at 2020-11-27 18:32:36

Thanks!


---

Comment by vbraun created at 2020-12-05 22:13:13

Resolution: fixed
