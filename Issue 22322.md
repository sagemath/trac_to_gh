# Issue 22322: Matchings in Bipartite Graphs

archive/issues_022322.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/22559\n\n",
    "created_at": "2017-03-09T19:26:12Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Matchings in Bipartite Graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22322",
    "user": "zgershkoff"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/22559





---

archive/issue_comments_310231.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2017-03-09T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310231",
    "user": "zgershkoff"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_310232.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-03-09T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310232",
    "user": "zgershkoff"
}
```

Changing priority from major to minor.



---

archive/issue_comments_310233.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-03-09T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310233",
    "user": "zgershkoff"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_310234.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-09T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310234",
    "user": "zgershkoff"
}
```

New commits:



---

archive/issue_comments_310235.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-09T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310235",
    "user": "zgershkoff"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_310236.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-09T22:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310236",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-10T03:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310238.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-14T21:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310238",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_310239.json:
```json
{
    "body": "zgershkoff, I could not find your handle on the wiki home page.",
    "created_at": "2017-03-14T21:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310239",
    "user": "saraedum"
}
```

zgershkoff, I could not find your handle on the wiki home page.



---

archive/issue_comments_310240.json:
```json
{
    "body": "I don't see anything in the developer's guide about this. Is this sufficient?",
    "created_at": "2017-03-14T23:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310240",
    "user": "zgershkoff"
}
```

I don't see anything in the developer's guide about this. Is this sufficient?



---

archive/issue_comments_310241.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-14T23:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310241",
    "user": "zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T00:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310243.json:
```json
{
    "body": "Replying to [comment:6 zgershkoff]:\n> I don't see anything in the developer's guide about this. Is this sufficient?\nYes. It is probably not in the developer's guide. But the merge commit uses that information (and the Reviewer field) afaik. It would be great if you could also add yourself to the list on the wiki's homepage.",
    "created_at": "2017-03-15T10:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310243",
    "user": "saraedum"
}
```

Replying to [comment:6 zgershkoff]:
> I don't see anything in the developer's guide about this. Is this sufficient?
Yes. It is probably not in the developer's guide. But the merge commit uses that information (and the Reviewer field) afaik. It would be great if you could also add yourself to the list on the wiki's homepage.



---

archive/issue_comments_310244.json:
```json
{
    "body": "I made some minor changes. Let's see what the patchbots think about this.",
    "created_at": "2017-03-15T10:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310244",
    "user": "saraedum"
}
```

I made some minor changes. Let's see what the patchbots think about this.



---

archive/issue_comments_310245.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T11:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310245",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310246.json:
```json
{
    "body": "The patchbot says it fails python3 compatibility when it calls six.iteritems, which I find confusing-- I thought the purpose of the six library was python2-3 compatibility.",
    "created_at": "2017-03-20T02:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310246",
    "user": "zgershkoff"
}
```

The patchbot says it fails python3 compatibility when it calls six.iteritems, which I find confusing-- I thought the purpose of the six library was python2-3 compatibility.



---

archive/issue_comments_310247.json:
```json
{
    "body": "Just a hunch here: maybe you need to write \"for (u, v) in six.iteritems...\"?\n\nI couldn't find anything online justifying this.",
    "created_at": "2017-03-20T04:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310247",
    "user": "Stefan"
}
```

Just a hunch here: maybe you need to write "for (u, v) in six.iteritems..."?

I couldn't find anything online justifying this.



---

archive/issue_comments_310248.json:
```json
{
    "body": "Patchbot is not smart enough to recognize the six before iteritems.\n\nYou should rather use\n\n```\nfrom six import iteritems\n\n...\n\nfor u,v in iteritems\n```\n",
    "created_at": "2017-03-20T08:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310248",
    "user": "chapoton"
}
```

Patchbot is not smart enough to recognize the six before iteritems.

You should rather use

```
from six import iteritems

...

for u,v in iteritems
```




---

archive/issue_comments_310249.json:
```json
{
    "body": "Three other minor things:\n\n* You should start with\n  {{{#!diff\n    def matching(self, value_only=False, algorithm=\"Hopcroft-Karp\",\n                 use_edge_labels=False, solver=None, verbose=0):\n        r\"\"\"\n  }}}\n  (and end with `\"\"\"`).\n* For the wikipedia, use\n  {{{\n  :wikipedia:`Matching_(graph_theory)`\n  }}}\n  which handles all of the linking and formatting.\n* Change the first ``use_edge_labels`` to:\n  {{{\n          - when set to ``True``, computes a weighted matching where each\n            edge is weighted by its label (if an edge has no label, `1` is\n            assumed); ignored if ``algorithm`` is not ``\"Edmonds\"``, ``\"LP\"``\n  }}}",
    "created_at": "2017-03-20T08:39:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310249",
    "user": "tscrim"
}
```

Three other minor things:

* You should start with
  {{{#!diff
    def matching(self, value_only=False, algorithm="Hopcroft-Karp",
                 use_edge_labels=False, solver=None, verbose=0):
        r"""
  }}}
  (and end with `"""`).
* For the wikipedia, use
  {{{
  :wikipedia:`Matching_(graph_theory)`
  }}}
  which handles all of the linking and formatting.
* Change the first ``use_edge_labels`` to:
  {{{
          - when set to ``True``, computes a weighted matching where each
            edge is weighted by its label (if an edge has no label, `1` is
            assumed); ignored if ``algorithm`` is not ``"Edmonds"``, ``"LP"``
  }}}



---

archive/issue_comments_310250.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-20T16:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310250",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310251.json:
```json
{
    "body": "I made all the documentation changes tscrim suggested except the last one, which I believe saraedum already addressed.\n\nReplying to [comment:16 chapoton]:\n> Patchbot is not smart enough to recognize the six before iteritems.\n> \n\nI changed it to just `iteritems` in bipartite_graph.py, but the way I had it before is exactly how it was used in graph.py. I didn't fix it in graph.py since it's not broken.",
    "created_at": "2017-03-20T17:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310251",
    "user": "zgershkoff"
}
```

I made all the documentation changes tscrim suggested except the last one, which I believe saraedum already addressed.

Replying to [comment:16 chapoton]:
> Patchbot is not smart enough to recognize the six before iteritems.
> 

I changed it to just `iteritems` in bipartite_graph.py, but the way I had it before is exactly how it was used in graph.py. I didn't fix it in graph.py since it's not broken.



---

archive/issue_comments_310252.json:
```json
{
    "body": "No, Julian did not address it already; in particular there are still 2 commas separated by a space. I also (slightly) think you should aim to make it not use periods to be consistent and concise.",
    "created_at": "2017-03-20T17:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310252",
    "user": "tscrim"
}
```

No, Julian did not address it already; in particular there are still 2 commas separated by a space. I also (slightly) think you should aim to make it not use periods to be consistent and concise.



---

archive/issue_comments_310253.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-20T17:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310253",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310254.json:
```json
{
    "body": "Ok, I see. Thank you for the feedback. I fixed the things you pointed out, but I changed the phrasing away from \"ignored if ``algorithm`` is not ``\"Edmonds\"``, ``\"LP\"``\" because it's now configured to raise an error if `use_edge_labels==True` but `algorithm` is not set to `\"Edmonds\"` or `\"LP\"`.\n----\nNew commits:",
    "created_at": "2017-03-20T17:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310254",
    "user": "zgershkoff"
}
```

Ok, I see. Thank you for the feedback. I fixed the things you pointed out, but I changed the phrasing away from "ignored if ``algorithm`` is not ``"Edmonds"``, ``"LP"``" because it's now configured to raise an error if `use_edge_labels==True` but `algorithm` is not set to `"Edmonds"` or `"LP"`.
----
New commits:



---

archive/issue_comments_310255.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-20T17:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310255",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310256.json:
```json
{
    "body": "You need to revert back the indentation by 2 spaces.",
    "created_at": "2017-03-20T17:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310256",
    "user": "tscrim"
}
```

You need to revert back the indentation by 2 spaces.



---

archive/issue_comments_310257.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-20T18:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310257",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310258.json:
```json
{
    "body": "You also need to do the other two lines. See comment:17 (also, it would be good if the arguments for the function started at the same level, it's a PEP8 thing).",
    "created_at": "2017-03-20T23:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310258",
    "user": "tscrim"
}
```

You also need to do the other two lines. See comment:17 (also, it would be good if the arguments for the function started at the same level, it's a PEP8 thing).



---

archive/issue_comments_310259.json:
```json
{
    "body": "Replying to [comment:27 tscrim]:\n> You also need to do the other two lines. See comment:17 (also, it would be good if the arguments for the function started at the same level, it's a PEP8 thing).\nI believe the lines you're referring to are addressed in this commit https://git.sagemath.org/sage.git/commit/?h=e3c353ee32fec6fe8f5f84c3d51bea6b5045dc1a&id=5339528b85dd389a3e7633678fe609796fe787b0 - I'm not sure why it didn't show up in the trac ticket.\n\nI'll look into PEP8 and make changes shortly.",
    "created_at": "2017-03-21T00:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310259",
    "user": "zgershkoff"
}
```

Replying to [comment:27 tscrim]:
> You also need to do the other two lines. See comment:17 (also, it would be good if the arguments for the function started at the same level, it's a PEP8 thing).
I believe the lines you're referring to are addressed in this commit https://git.sagemath.org/sage.git/commit/?h=e3c353ee32fec6fe8f5f84c3d51bea6b5045dc1a&id=5339528b85dd389a3e7633678fe609796fe787b0 - I'm not sure why it didn't show up in the trac ticket.

I'll look into PEP8 and make changes shortly.



---

archive/issue_comments_310260.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-21T00:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310260",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310261.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-21T00:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310261",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310262.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-21T00:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310262",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310263.json:
```json
{
    "body": "I think this looks good now. Travis, do you agree?",
    "created_at": "2017-05-05T01:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310263",
    "user": "Stefan"
}
```

I think this looks good now. Travis, do you agree?



---

archive/issue_comments_310264.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-05T01:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310264",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310265.json:
```json
{
    "body": "Whoops, sorry this fell of my radar. Yep, looks good.",
    "created_at": "2017-05-05T01:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310265",
    "user": "tscrim"
}
```

Whoops, sorry this fell of my radar. Yep, looks good.



---

archive/issue_comments_310266.json:
```json
{
    "body": "Why don't you use `G.networkx_graph()` to get the networkx version of the graph ?",
    "created_at": "2017-05-05T06:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310266",
    "user": "dcoudert"
}
```

Why don't you use `G.networkx_graph()` to get the networkx version of the graph ?



---

archive/issue_comments_310267.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-05T22:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310267",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_310268.json:
```json
{
    "body": "\n```\n[sagelib-8.0.beta5] byte-compiling /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py to bipartite_graph.pyc\n[sagelib-8.0.beta5]   File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py\", line 1369\n[sagelib-8.0.beta5]     raise ValueError(\"use_edge_labels can not be used with\n[sagelib-8.0.beta5]                                                          ^\n[sagelib-8.0.beta5] SyntaxError: EOL while scanning string literal\n```\n",
    "created_at": "2017-05-05T22:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310268",
    "user": "vbraun"
}
```


```
[sagelib-8.0.beta5] byte-compiling /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py to bipartite_graph.pyc
[sagelib-8.0.beta5]   File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py", line 1369
[sagelib-8.0.beta5]     raise ValueError("use_edge_labels can not be used with
[sagelib-8.0.beta5]                                                          ^
[sagelib-8.0.beta5] SyntaxError: EOL while scanning string literal
```




---

archive/issue_comments_310269.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T22:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310269",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310270.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-11T22:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310270",
    "user": "zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310271.json:
```json
{
    "body": "Looks like I wasn't careful enough while following the PEP8 guidelines. All doctests pass so it should be fine now.\n\nReplying to [comment:34 dcoudert]:\n> Why don't you use `G.networkx_graph()` to get the networkx version of the graph ?\n\nI adapted the code from the matching method of graph.py. Perhaps that would have been cleaner.",
    "created_at": "2017-05-11T22:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310271",
    "user": "zgershkoff"
}
```

Looks like I wasn't careful enough while following the PEP8 guidelines. All doctests pass so it should be fine now.

Replying to [comment:34 dcoudert]:
> Why don't you use `G.networkx_graph()` to get the networkx version of the graph ?

I adapted the code from the matching method of graph.py. Perhaps that would have been cleaner.



---

archive/issue_comments_310272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-12T00:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310272",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310273.json:
```json
{
    "body": "I adopted dcoudert's suggestion and saved a line of code.",
    "created_at": "2017-05-12T00:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310273",
    "user": "zgershkoff"
}
```

I adopted dcoudert's suggestion and saved a line of code.



---

archive/issue_comments_310274.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-12T12:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310274",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310275.json:
```json
{
    "body": "Passes all tests, so looks good to me.",
    "created_at": "2017-05-12T12:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310275",
    "user": "dcoudert"
}
```

Passes all tests, so looks good to me.



---

archive/issue_comments_310276.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-14T08:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310276",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_310277.json:
```json
{
    "body": "Documentation doesn't build",
    "created_at": "2017-05-14T08:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310277",
    "user": "vbraun"
}
```

Documentation doesn't build



---

archive/issue_comments_310278.json:
```json
{
    "body": "it's the bullet `- when set to ``True``, computes ...`. You must add 2 spaces on the next lines. Then the doc builds.\n\n```\n          - when set to ``True``, computes a weighted matching where each edge\n            is weighted by its label (if an edge has no label, `1` is assumed);\n            only if ``algorithm`` is ``\"Edmonds\"``, ``\"LP\"``\n```\n",
    "created_at": "2017-05-14T08:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310278",
    "user": "dcoudert"
}
```

it's the bullet `- when set to ``True``, computes ...`. You must add 2 spaces on the next lines. Then the doc builds.

```
          - when set to ``True``, computes a weighted matching where each edge
            is weighted by its label (if an edge has no label, `1` is assumed);
            only if ``algorithm`` is ``"Edmonds"``, ``"LP"``
```




---

archive/issue_comments_310279.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-14T20:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310279",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310280.json:
```json
{
    "body": "Thanks for catching that. It's curious that the doctest didn't notice.\n\nI'll set it to needs review again. Third time's a charm...",
    "created_at": "2017-05-14T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310280",
    "user": "zgershkoff"
}
```

Thanks for catching that. It's curious that the doctest didn't notice.

I'll set it to needs review again. Third time's a charm...



---

archive/issue_comments_310281.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-14T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310281",
    "user": "zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310282.json:
```json
{
    "body": "Well... actually, there is a another issue with the wikipedia link. Sorry.\n\nThis\n\n```\n        For more information, see the `Wikipedia article on matchings\n        :wikipedia:`Matching_(graph_theory)`\n```\n\nproduces something like `For more information, see the Wikipediaarticleonmatchings:wikipedia:\u2018Matching(graphtheory)`. Check the html.\n\nSo you should write\n\n```\n        For more information, see :wikipedia:`Matching_(graph_theory)`\n```\n\nor even better\n\n```\n    .. SEEALSO::\n\n        - :wikipedia:`Matching_(graph_theory)`\n        - :meth:`~Graph.matching`\n```\n\nno need for blank line between bullets here.",
    "created_at": "2017-05-14T21:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310282",
    "user": "dcoudert"
}
```

Well... actually, there is a another issue with the wikipedia link. Sorry.

This

```
        For more information, see the `Wikipedia article on matchings
        :wikipedia:`Matching_(graph_theory)`
```

produces something like `For more information, see the Wikipediaarticleonmatchings:wikipedia:â€˜Matching(graphtheory)`. Check the html.

So you should write

```
        For more information, see :wikipedia:`Matching_(graph_theory)`
```

or even better

```
    .. SEEALSO::

        - :wikipedia:`Matching_(graph_theory)`
        - :meth:`~Graph.matching`
```

no need for blank line between bullets here.



---

archive/issue_comments_310283.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-14T21:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310283",
    "user": "dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_310284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-14T22:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310284",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310285.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-14T22:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310285",
    "user": "zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310286.json:
```json
{
    "body": "Is there a way I can build the documentation myself to check for errors? `./sage -t src/sage/graphs/bipartite_graph.py` doesn't seem to do it, and I don't see anything in the documentation.",
    "created_at": "2017-05-14T22:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310286",
    "user": "zgershkoff"
}
```

Is there a way I can build the documentation myself to check for errors? `./sage -t src/sage/graphs/bipartite_graph.py` doesn't seem to do it, and I don't see anything in the documentation.



---

archive/issue_comments_310287.json:
```json
{
    "body": "`./sage -docbuild reference html` and  `./sage -docbuild reference/graphs html` to rebuild only the graphs part.\n\nNote that from time to time I have to do `make doc-clean && make` to rebuild the documentation from scratch. For this patch you should not have to do it.",
    "created_at": "2017-05-14T22:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310287",
    "user": "dcoudert"
}
```

`./sage -docbuild reference html` and  `./sage -docbuild reference/graphs html` to rebuild only the graphs part.

Note that from time to time I have to do `make doc-clean && make` to rebuild the documentation from scratch. For this patch you should not have to do it.



---

archive/issue_comments_310288.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-16T19:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310288",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310289.json:
```json
{
    "body": "Thanks. It took some effort but the documentation seems to render correctly now.",
    "created_at": "2017-05-16T19:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310289",
    "user": "zgershkoff"
}
```

Thanks. It took some effort but the documentation seems to render correctly now.



---

archive/issue_comments_310290.json:
```json
{
    "body": "Back to positive review.",
    "created_at": "2017-05-16T20:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310290",
    "user": "tscrim"
}
```

Back to positive review.



---

archive/issue_comments_310291.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-16T20:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310291",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310292.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-20T21:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310292",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_310293.json:
```json
{
    "body": "Various doctest failures, e.g.\n\n```\nsage -t --long --warn-long 71.2 src/sage/combinat/permutation.py\n**********************************************************************\nFile \"src/sage/combinat/permutation.py\", line 6926, in sage.combinat.permutation.bistochastic_as_sum_of_permutations\nFailed example:\n    decomp = bistochastic_as_sum_of_permutations(M)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.permutation.bistochastic_as_sum_of_permutations[7]>\", line 1, in <module>\n        decomp = bistochastic_as_sum_of_permutations(M)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/combinat/permutation.py\", line 6973, in bistochastic_as_sum_of_permutations\n        matching = G.matching(use_edge_labels=True)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py\", line 1365, in matching\n        \"Hopcroft-Karp or Eppstein\")\n    ValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein\n**********************************************************************\n```\n",
    "created_at": "2017-05-20T21:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310293",
    "user": "vbraun"
}
```

Various doctest failures, e.g.

```
sage -t --long --warn-long 71.2 src/sage/combinat/permutation.py
**********************************************************************
File "src/sage/combinat/permutation.py", line 6926, in sage.combinat.permutation.bistochastic_as_sum_of_permutations
Failed example:
    decomp = bistochastic_as_sum_of_permutations(M)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.permutation.bistochastic_as_sum_of_permutations[7]>", line 1, in <module>
        decomp = bistochastic_as_sum_of_permutations(M)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/combinat/permutation.py", line 6973, in bistochastic_as_sum_of_permutations
        matching = G.matching(use_edge_labels=True)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/bipartite_graph.py", line 1365, in matching
        "Hopcroft-Karp or Eppstein")
    ValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein
**********************************************************************
```




---

archive/issue_comments_310294.json:
```json
{
    "body": "Sorry I did not pass tests on the full library when reviewing this ticket. \n\n\nOne solution is to set the algorithm to `None` \n\n```\n    def matching(self, value_only=False, algorithm=None,\n                 use_edge_labels=False, solver=None, verbose=0):\n```\n\nand then to add after `self._scream_if_not_simple()`:\n\n```\n        if algorithm is None:\n            if use_edge_labels:\n                algorithm = \"Edmonds\"\n            else:\n                algorithm = \"Hopcroft-Karp\"\n```\n\nYou will have to update the documentation accordingly, for instance like \n\n```\n        - ``algorithm`` -- string (default: ``\"Hopcroft-Karp\"`` if\n          ``use_edge_labels==False``, otherwise ``\"Edmonds\"``)\n\n```\n \n\nand add a tests on a weighted graph like:\n\n```\nsage: G = graphs.CycleGraph(4)\nsage: B = BipartiteGraph([(u,v,2) for u,v in G.edges(labels=0)])\nsage: B.matching(use_edge_labels=True)\n[(0, 3, 2), (1, 2, 2)]\nsage: B.matching(use_edge_labels=True, value_only=True)\n4\nsage: B.matching(use_edge_labels=True, value_only=True, algorithm='Edmonds')\n4\nsage: B.matching(use_edge_labels=True, value_only=True, algorithm='LP')\n4.0\nsage: B.matching(use_edge_labels=True, value_only=True, algorithm='Eppstein')\nTraceback (most recent call last):\n...\nValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein\nsage: B.matching(use_edge_labels=True, value_only=True, algorithm='Hopcroft-Karp')\nTraceback (most recent call last):\n...\nValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein\nsage: B.matching(use_edge_labels=False, value_only=True, algorithm='Hopcroft-Karp')\n2\nsage: B.matching(use_edge_labels=False, value_only=True, algorithm='Eppstein')\n2\nsage: B.matching(use_edge_labels=False, value_only=True, algorithm='Edmonds')\n2\nsage: B.matching(use_edge_labels=False, value_only=True, algorithm='LP')\n2\n```\n",
    "created_at": "2017-05-21T06:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310294",
    "user": "dcoudert"
}
```

Sorry I did not pass tests on the full library when reviewing this ticket. 


One solution is to set the algorithm to `None` 

```
    def matching(self, value_only=False, algorithm=None,
                 use_edge_labels=False, solver=None, verbose=0):
```

and then to add after `self._scream_if_not_simple()`:

```
        if algorithm is None:
            if use_edge_labels:
                algorithm = "Edmonds"
            else:
                algorithm = "Hopcroft-Karp"
```

You will have to update the documentation accordingly, for instance like 

```
        - ``algorithm`` -- string (default: ``"Hopcroft-Karp"`` if
          ``use_edge_labels==False``, otherwise ``"Edmonds"``)

```
 

and add a tests on a weighted graph like:

```
sage: G = graphs.CycleGraph(4)
sage: B = BipartiteGraph([(u,v,2) for u,v in G.edges(labels=0)])
sage: B.matching(use_edge_labels=True)
[(0, 3, 2), (1, 2, 2)]
sage: B.matching(use_edge_labels=True, value_only=True)
4
sage: B.matching(use_edge_labels=True, value_only=True, algorithm='Edmonds')
4
sage: B.matching(use_edge_labels=True, value_only=True, algorithm='LP')
4.0
sage: B.matching(use_edge_labels=True, value_only=True, algorithm='Eppstein')
Traceback (most recent call last):
...
ValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein
sage: B.matching(use_edge_labels=True, value_only=True, algorithm='Hopcroft-Karp')
Traceback (most recent call last):
...
ValueError: use_edge_labels can not be used with Hopcroft-Karp or Eppstein
sage: B.matching(use_edge_labels=False, value_only=True, algorithm='Hopcroft-Karp')
2
sage: B.matching(use_edge_labels=False, value_only=True, algorithm='Eppstein')
2
sage: B.matching(use_edge_labels=False, value_only=True, algorithm='Edmonds')
2
sage: B.matching(use_edge_labels=False, value_only=True, algorithm='LP')
2
```




---

archive/issue_comments_310295.json:
```json
{
    "body": "+1 Can you make the appropriate changes David?",
    "created_at": "2017-05-21T14:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310295",
    "user": "tscrim"
}
```

+1 Can you make the appropriate changes David?



---

archive/issue_comments_310296.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-21T16:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310296",
    "user": "dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310297.json:
```json
{
    "body": "I had to create a new branch since I cannot push in branch `u/zgershkoff/matchings_in_bipartite_graphs`. The new branch is in `public/`, so you can push commits as well.\n\nBipartite graphs are used in the following modules. The new branch passes all tests (on my computer), but it's better to double check (as well as docbuild, etc.).\n\n```\nsrc/sage/combinat/\nsrc/sage/game_theory/\nsrc/sage/graphs/\nsrc/sage/groups/\nsrc/sage/matrix/\nsrc/sage/matroids/\n```\n\n\nLet's hope this ticket will soon be finalized ;)\n----\nNew commits:",
    "created_at": "2017-05-21T16:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310297",
    "user": "dcoudert"
}
```

I had to create a new branch since I cannot push in branch `u/zgershkoff/matchings_in_bipartite_graphs`. The new branch is in `public/`, so you can push commits as well.

Bipartite graphs are used in the following modules. The new branch passes all tests (on my computer), but it's better to double check (as well as docbuild, etc.).

```
src/sage/combinat/
src/sage/game_theory/
src/sage/graphs/
src/sage/groups/
src/sage/matrix/
src/sage/matroids/
```


Let's hope this ticket will soon be finalized ;)
----
New commits:



---

archive/issue_comments_310298.json:
```json
{
    "body": "Replying to [comment:56 dcoudert]:\n> I had to create a new branch since I cannot push in branch `u/zgershkoff/matchings_in_bipartite_graphs`. The new branch is in `public/`, so you can push commits as well.\n\nThat is the correct behavior and the correct thing to do.\n\n> Bipartite graphs are used in the following modules. The new branch passes all tests (on my computer), but it's better to double check (as well as docbuild, etc.).\n\nLGTM too. Thanks.",
    "created_at": "2017-05-22T01:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310298",
    "user": "tscrim"
}
```

Replying to [comment:56 dcoudert]:
> I had to create a new branch since I cannot push in branch `u/zgershkoff/matchings_in_bipartite_graphs`. The new branch is in `public/`, so you can push commits as well.

That is the correct behavior and the correct thing to do.

> Bipartite graphs are used in the following modules. The new branch passes all tests (on my computer), but it's better to double check (as well as docbuild, etc.).

LGTM too. Thanks.



---

archive/issue_comments_310299.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-22T01:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310299",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310300.json:
```json
{
    "body": "I agree with this solution-- better than the options I was considering. Thanks for taking care of it.",
    "created_at": "2017-05-23T19:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310300",
    "user": "zgershkoff"
}
```

I agree with this solution-- better than the options I was considering. Thanks for taking care of it.



---

archive/issue_comments_310301.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-24T19:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22322#issuecomment-310301",
    "user": "vbraun"
}
```

Resolution: fixed
