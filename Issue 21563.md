# Issue 21563: Better error handling in sage-cleaner

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2016-11-02 19:50:50

My `sage-cleaner` instance is randomly killing jobs. Reason:

```
Checking PIDs [18654]
Process 18654 is no longer running, so we clean up
Killing 18654's spawned jobs
--> Killing 'gp' with PID 18743 and parent PID 18654
--> Killing 'gp' with PID 18759 and parent PID 18654
--> Killing 'gp' with PID 18841 and parent PID 18654
--> Killing 'gp' with PID 18851 and parent PID 18654
--> Killing 'gp' with PID 18868 and parent PID 18654
--> Killing 'gp' with PID 18878 and parent PID 18654
--> Killing 'gp' with PID 18982 and parent PID 18654
--> Killing 'gp' with PID 19333 and parent PID 18654
Exception while cleaning up PID 18654:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/src/bin/sage-cleaner", line 94, in cleanup
    or kill_spawned_jobs(spawned_processes, parent_pid):
  File "/usr/local/src/sage-config/src/bin/sage-cleaner", line 106, in kill_spawned_jobs
    pid, cmd = job.strip().split(' ', 1)
ValueError: need more than 1 value to unpack
```


Probably the `jobfile` got corrupted somehow and we need to handle this gracefully.


---

Comment by jdemeyer created at 2016-11-02 19:58:55

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-11-02 19:58:55

New commits:


---

Comment by chapoton created at 2016-11-08 20:00:34

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2016-11-08 20:00:34

ok, let it be


---

Comment by vbraun created at 2016-11-09 18:16:12

Resolution: fixed
