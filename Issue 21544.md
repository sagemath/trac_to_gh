# Issue 21544: Document "git format-patch" workflow

archive/issues_021544.json:
```json
{
    "body": "CC:  @dimpase @jdemeyer @vbraun @nexttime @kiwifb @embray @tscrim jpflori jakobkroeker\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21781\n\n",
    "created_at": "2016-10-29T00:31:15Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Document \"git format-patch\" workflow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21544",
    "user": "@mkoeppe"
}
```
CC:  @dimpase @jdemeyer @vbraun @nexttime @kiwifb @embray @tscrim jpflori jakobkroeker



Issue created by migration from https://trac.sagemath.org/ticket/21781





---

archive/issue_comments_299086.json:
```json
{
    "body": "My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).\n\nA sane workflow in this case would be to maintain Sage patches as a branch for the Maxima git repo, that can be rebased against their updates. This would be then (semi)automatic to produce a new set of patches.",
    "created_at": "2016-10-29T00:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299086",
    "user": "@dimpase"
}
```

My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).

A sane workflow in this case would be to maintain Sage patches as a branch for the Maxima git repo, that can be rebased against their updates. This would be then (semi)automatic to produce a new set of patches.



---

archive/issue_comments_299087.json:
```json
{
    "body": "Replying to [comment:1 dimpase]:\n> My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).\n\nNothing wrong with that as far as I can see.\n\n> A sane workflow in this case would be to maintain Sage patches as a branch for the Maxima git repo, that can be rebased against their updates. This would be then (semi)automatic to produce a new set of patches. \n\nYes. Actually create a new branch before rebasing, so that the old branch is kept.",
    "created_at": "2016-10-29T00:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299087",
    "user": "@mkoeppe"
}
```

Replying to [comment:1 dimpase]:
> My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).

Nothing wrong with that as far as I can see.

> A sane workflow in this case would be to maintain Sage patches as a branch for the Maxima git repo, that can be rebased against their updates. This would be then (semi)automatic to produce a new set of patches. 

Yes. Actually create a new branch before rebasing, so that the old branch is kept.



---

archive/issue_comments_299088.json:
```json
{
    "body": "Replying to [comment:1 dimpase]:\n> My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).\n\nOne patch per file really makes no sense. One patch per commit makes a lot more sense.",
    "created_at": "2016-10-29T06:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299088",
    "user": "@jdemeyer"
}
```

Replying to [comment:1 dimpase]:
> My biggest issue on #18920 was that git produces patches per commit, not per file (the latter was the original structure of patches in Sage, it seems).

One patch per file really makes no sense. One patch per commit makes a lot more sense.



---

archive/issue_comments_299089.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-10-29T20:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299089",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_299090.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-29T20:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299090",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299091.json:
```json
{
    "body": "Needs review.",
    "created_at": "2016-11-01T18:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299091",
    "user": "@mkoeppe"
}
```

Needs review.



---

archive/issue_comments_299092.json:
```json
{
    "body": "Please apply #21793 when writing documentation :-) You left some TABs.\n\nIs there *any* package which actually uses the procedure explained in \"How to maintain a set of patches\"? It would be strange to document that as if it is standard practice, when in reality it is never done.",
    "created_at": "2016-11-04T13:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299092",
    "user": "@jdemeyer"
}
```

Please apply #21793 when writing documentation :-) You left some TABs.

Is there *any* package which actually uses the procedure explained in "How to maintain a set of patches"? It would be strange to document that as if it is standard practice, when in reality it is never done.



---

archive/issue_comments_299093.json:
```json
{
    "body": "Replying to [comment:9 jdemeyer]:\n> Please apply #21793 when writing documentation :-) You left some TABs.\n> \n> Is there *any* package which actually uses the procedure explained in \"How to maintain a set of patches\"? It would be strange to document that as if it is standard practice, when in reality it is never done.\n\nI am trying to follow this as I work on Maxima update in #18920, as we bring a number of upstream patches in.",
    "created_at": "2016-11-04T21:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299093",
    "user": "@dimpase"
}
```

Replying to [comment:9 jdemeyer]:
> Please apply #21793 when writing documentation :-) You left some TABs.
> 
> Is there *any* package which actually uses the procedure explained in "How to maintain a set of patches"? It would be strange to document that as if it is standard practice, when in reality it is never done.

I am trying to follow this as I work on Maxima update in #18920, as we bring a number of upstream patches in.



---

archive/issue_comments_299094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-06T21:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299094",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299095.json:
```json
{
    "body": "Replying to [comment:9 jdemeyer]:\n> Please apply #21793 when writing documentation :-) You left some TABs.\n\nDone.\n\n> Is there *any* package which actually uses the procedure explained in \"How to maintain a set of patches\"? It would be strange to document that as if it is standard practice, when in reality it is never done.\n\nNot fully yet. \n\n- I've created a patch for `gc` like this from the fork at https://github.com/mkoeppe/bdwgc -- but I did not import the existing `cygwin64.patch` that was in the sage patches.\n\n- I've created the SCIPoptsuite patches like this -- but I cannot use a public github for the changed SCIP sources because of its licensing.",
    "created_at": "2016-11-06T22:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299095",
    "user": "@mkoeppe"
}
```

Replying to [comment:9 jdemeyer]:
> Please apply #21793 when writing documentation :-) You left some TABs.

Done.

> Is there *any* package which actually uses the procedure explained in "How to maintain a set of patches"? It would be strange to document that as if it is standard practice, when in reality it is never done.

Not fully yet. 

- I've created a patch for `gc` like this from the fork at https://github.com/mkoeppe/bdwgc -- but I did not import the existing `cygwin64.patch` that was in the sage patches.

- I've created the SCIPoptsuite patches like this -- but I cannot use a public github for the changed SCIP sources because of its licensing.



---

archive/issue_comments_299096.json:
```json
{
    "body": "Look good to me, thanks!",
    "created_at": "2016-11-07T11:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299096",
    "user": "@embray"
}
```

Look good to me, thanks!



---

archive/issue_comments_299097.json:
```json
{
    "body": "Is this a \"positive review\"?",
    "created_at": "2016-11-10T06:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299097",
    "user": "@mkoeppe"
}
```

Is this a "positive review"?



---

archive/issue_comments_299098.json:
```json
{
    "body": "From me, yes, but I was going to wait for someone like Jeroen or Volker to sign off on this.",
    "created_at": "2016-11-10T11:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299098",
    "user": "@embray"
}
```

From me, yes, but I was going to wait for someone like Jeroen or Volker to sign off on this.



---

archive/issue_comments_299099.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-10T11:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299099",
    "user": "@embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299100.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-11T17:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21544#issuecomment-299100",
    "user": "@vbraun"
}
```

Resolution: fixed
