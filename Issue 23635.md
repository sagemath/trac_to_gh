# Issue 23635: Singular expansion for implicitly defined function

archive/issues_023635.json:
```json
{
    "body": "CC:  @cheuberg @dkrenn\n\nGiven an implicitly defined function `y(z) = z \\Phi(y(z))`, there is a well-known approach (Analytic Combinatorics, Flajolet+Sedgewick, Chapter VI.7) of how to determine a singular expansion for `y(z)`.\n\nThis branch adds a new asymptotic generator which computes this singular expansion.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23872\n\n",
    "created_at": "2017-09-16T07:46:49Z",
    "labels": [
        "asymptotic expansions",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Singular expansion for implicitly defined function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23635",
    "user": "@behackl"
}
```
CC:  @cheuberg @dkrenn

Given an implicitly defined function `y(z) = z \Phi(y(z))`, there is a well-known approach (Analytic Combinatorics, Flajolet+Sedgewick, Chapter VI.7) of how to determine a singular expansion for `y(z)`.

This branch adds a new asymptotic generator which computes this singular expansion.

Issue created by migration from https://trac.sagemath.org/ticket/23872





---

archive/issue_comments_331037.json:
```json
{
    "body": "Before this can be properly reviewed, there are at least two things that I'd like to take care of beforehand:\n\n- There is still a small bit of functionality missing, namely the handling of periodicities.\n- I'd also like to have some more (verified) doctests.\n\nOtherwise, I'm open for suggestions and improvements.",
    "created_at": "2017-09-16T07:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331037",
    "user": "@behackl"
}
```

Before this can be properly reviewed, there are at least two things that I'd like to take care of beforehand:

- There is still a small bit of functionality missing, namely the handling of periodicities.
- I'd also like to have some more (verified) doctests.

Otherwise, I'm open for suggestions and improvements.



---

archive/issue_comments_331038.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-16T22:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331038",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331039.json:
```json
{
    "body": "(Note: I currently have no compiled version of 8.1.beta5 available; so I locally rebased your branch on 8.0 ... so it might be that this is an incompatibility between 8.0 and 8.1.beta5)\n\n`./sage -docbuild -u -k` yields\n\n\n```\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:8: WARNING: Inline interpreted text or phrase reference start-string without end-string.\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:12: WARNING: Block quote ends without a blank line; unexpected unindent.\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:35: WARNING: Block quote ends without a blank line; unexpected unindent.\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:36: WARNING: Inline interpreted text or phrase reference start-string without end-string.\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:39: WARNING: Inline interpreted text or phrase reference start-string without end-string.\n[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:40: WARNING: Definition list ends without a blank line; unexpected unindent.\n```\n",
    "created_at": "2017-09-17T16:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331039",
    "user": "@cheuberg"
}
```

(Note: I currently have no compiled version of 8.1.beta5 available; so I locally rebased your branch on 8.0 ... so it might be that this is an incompatibility between 8.0 and 8.1.beta5)

`./sage -docbuild -u -k` yields


```
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:8: WARNING: Inline interpreted text or phrase reference start-string without end-string.
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:12: WARNING: Block quote ends without a blank line; unexpected unindent.
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:35: WARNING: Block quote ends without a blank line; unexpected unindent.
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:36: WARNING: Inline interpreted text or phrase reference start-string without end-string.
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:39: WARNING: Inline interpreted text or phrase reference start-string without end-string.
[asymptoti] ...:docstring of sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.ImplicitExpansion:40: WARNING: Definition list ends without a blank line; unexpected unindent.
```




---

archive/issue_comments_331040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-18T09:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331040",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331041.json:
```json
{
    "body": "Replying to [comment:4 cheuberg]:\n> (Note: I currently have no compiled version of 8.1.beta5 available; so I locally rebased your branch on 8.0 ... so it might be that this is an incompatibility between 8.0 and 8.1.beta5)\n> \n> `./sage -docbuild -u -k` yields [...]\n> \n\nThanks, fixed.\n\nAs far as I was able to check, the code yields correct results in both the periodic as well as the aperiodic case. I am, however, inclined to improve the documentation a little bit before putting this up for review (more examples + tests; maybe even a description of the algorithm? Also, a reference to The Book would probably be a good idea).",
    "created_at": "2017-09-18T09:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331041",
    "user": "@behackl"
}
```

Replying to [comment:4 cheuberg]:
> (Note: I currently have no compiled version of 8.1.beta5 available; so I locally rebased your branch on 8.0 ... so it might be that this is an incompatibility between 8.0 and 8.1.beta5)
> 
> `./sage -docbuild -u -k` yields [...]
> 

Thanks, fixed.

As far as I was able to check, the code yields correct results in both the periodic as well as the aperiodic case. I am, however, inclined to improve the documentation a little bit before putting this up for review (more examples + tests; maybe even a description of the algorithm? Also, a reference to The Book would probably be a good idea).



---

archive/issue_comments_331042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-20T15:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331043.json:
```json
{
    "body": "I added two reviewer commits.\nPlease\n1. Add function to toc and to docstring of class `AsymptoticExpansionGenerators`\n2. \"to be not\" -> \"not to be\"\n3. Phi must be analytic around 0\n4. tau: list assumption of Flajolet-Sedgewick.\n5. comparison with known expansion of Catalan GF\n6. Move all assumptions on Phi to the description\n7. Check input as far as reasonable (phi(0) != 0, phi not affine linear)\n8. examples: symbolic tau is possible \n9. examples: tau can be stupid.\n10. Cite Flajolet-Sedgewick\n21. examples: how to do singularity analysis afterwards.",
    "created_at": "2017-09-20T15:58:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331043",
    "user": "@cheuberg"
}
```

I added two reviewer commits.
Please
1. Add function to toc and to docstring of class `AsymptoticExpansionGenerators`
2. "to be not" -> "not to be"
3. Phi must be analytic around 0
4. tau: list assumption of Flajolet-Sedgewick.
5. comparison with known expansion of Catalan GF
6. Move all assumptions on Phi to the description
7. Check input as far as reasonable (phi(0) != 0, phi not affine linear)
8. examples: symbolic tau is possible 
9. examples: tau can be stupid.
10. Cite Flajolet-Sedgewick
21. examples: how to do singularity analysis afterwards.



---

archive/issue_comments_331044.json:
```json
{
    "body": "I forgot to add: I am not convinced by the code for periodic phi.\n----\nNew commits:",
    "created_at": "2017-09-21T11:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331044",
    "user": "@cheuberg"
}
```

I forgot to add: I am not convinced by the code for periodic phi.
----
New commits:



---

archive/issue_comments_331045.json:
```json
{
    "body": "After some more discussions with cheuberg, this is the current status:\n\n- Take care of 1-10 mentioned in the comment above,\n- Remove the part of `ImplicitExpansion` handling the periodic part,\n- Add another function (e.g. `ImplicitExpansionPeriodicPart`) returning the expansion for `g(z)` where `y(z)/z = g(z^p)`.\n- And add yet another function (e.g. `InverseFunctionAnalysis`) returning the asymptotic expansion describing the coefficient growth.",
    "created_at": "2017-09-21T13:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331045",
    "user": "@behackl"
}
```

After some more discussions with cheuberg, this is the current status:

- Take care of 1-10 mentioned in the comment above,
- Remove the part of `ImplicitExpansion` handling the periodic part,
- Add another function (e.g. `ImplicitExpansionPeriodicPart`) returning the expansion for `g(z)` where `y(z)/z = g(z^p)`.
- And add yet another function (e.g. `InverseFunctionAnalysis`) returning the asymptotic expansion describing the coefficient growth.



---

archive/issue_comments_331046.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-09-21T15:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331046",
    "user": "@behackl"
}
```

New commits:



---

archive/issue_comments_331047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-21T16:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331048.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-22T10:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331048",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331049.json:
```json
{
    "body": "I had a look at your changes, thank you. I added a few reviewer commits, please cross-review. Setting to needs_review such that patchbots see the ticket.",
    "created_at": "2017-09-22T10:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331049",
    "user": "@cheuberg"
}
```

I had a look at your changes, thank you. I added a few reviewer commits, please cross-review. Setting to needs_review such that patchbots see the ticket.



---

archive/issue_comments_331050.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-22T10:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331050",
    "user": "@cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_331051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-22T10:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331051",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331052.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-09-22T15:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331052",
    "user": "@behackl"
}
```

New commits:



---

archive/issue_comments_331053.json:
```json
{
    "body": "Thanks, I've cross-reviewed your changes, LGTM.\n\nThere is now also the \"final\" method, `InverseFunctionAnalysis`, returning the asymptotic expansion of the coefficient growth via singularity analysis.\n\nNote that currently there is a minor issue with this method: in case `tau` is not specified when calling the method (or when `tau` is symbolic), this leads to a coercion problem to be solved at #23921.",
    "created_at": "2017-09-22T15:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331053",
    "user": "@behackl"
}
```

Thanks, I've cross-reviewed your changes, LGTM.

There is now also the "final" method, `InverseFunctionAnalysis`, returning the asymptotic expansion of the coefficient growth via singularity analysis.

Note that currently there is a minor issue with this method: in case `tau` is not specified when calling the method (or when `tau` is symbolic), this leads to a coercion problem to be solved at #23921.



---

archive/issue_comments_331054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-23T08:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331054",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331055.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-09-23T08:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331055",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_331056.json:
```json
{
    "body": "I reviewed the new method; added a few reviewer commits. Please fix the error documented in my last commit.",
    "created_at": "2017-09-23T08:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331056",
    "user": "@cheuberg"
}
```

I reviewed the new method; added a few reviewer commits. Please fix the error documented in my last commit.



---

archive/issue_comments_331057.json:
```json
{
    "body": "The bug should be fixed with my last commit -- however, I'm not sure about leaving the doctest as-is (of course with changed output and description), as the default precision is rather high and the computation of such a precise expansion might be too much.\n\nWhat do you think?\n----\nNew commits:",
    "created_at": "2017-09-23T16:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331057",
    "user": "@behackl"
}
```

The bug should be fixed with my last commit -- however, I'm not sure about leaving the doctest as-is (of course with changed output and description), as the default precision is rather high and the computation of such a precise expansion might be too much.

What do you think?
----
New commits:



---

archive/issue_comments_331058.json:
```json
{
    "body": "142 seconds for the tests for this file [on a patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-24%2000:12:05?short) vs. 51 seconds before [on the same patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-22%2018:35:47) seem to be excessive; so we should remove the test. The variant would be to include a test where the default precision has been set to a small python integer.",
    "created_at": "2017-09-24T05:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331058",
    "user": "@cheuberg"
}
```

142 seconds for the tests for this file [on a patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-24%2000:12:05?short) vs. 51 seconds before [on the same patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-22%2018:35:47) seem to be excessive; so we should remove the test. The variant would be to include a test where the default precision has been set to a small python integer.



---

archive/issue_comments_331059.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-26T13:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331059",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331060.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-09-26T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331060",
    "user": "@behackl"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_331061.json:
```json
{
    "body": "Replying to [comment:25 cheuberg]:\n> 142 seconds for the tests for this file [on a patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-24%2000:12:05?short) vs. 51 seconds before [on the same patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-22%2018:35:47) seem to be excessive; so we should remove the test. The variant would be to include a test where the default precision has been set to a small python integer.\n\nIt took me some time, but I finally managed to fix the issue with `default_prec`. Up for review again.",
    "created_at": "2017-09-26T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331061",
    "user": "@behackl"
}
```

Replying to [comment:25 cheuberg]:
> 142 seconds for the tests for this file [on a patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-24%2000:12:05?short) vs. 51 seconds before [on the same patchbot](https://patchbot.sagemath.org/log/23872/LinuxMint/18.1/x86_64/4.4.0-89-generic/rk02-math/2017-09-22%2018:35:47) seem to be excessive; so we should remove the test. The variant would be to include a test where the default precision has been set to a small python integer.

It took me some time, but I finally managed to fix the issue with `default_prec`. Up for review again.



---

archive/issue_comments_331062.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-28T05:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331062",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331063.json:
```json
{
    "body": "The test needed to be modified: we need to set a python integer to actually trigger the error fixed in [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b). For test purposes, I then reverted [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b) and the bug reappeared, so to be sure that the test now tests what needs to tested.\n\ndkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).",
    "created_at": "2017-09-28T05:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331063",
    "user": "@cheuberg"
}
```

The test needed to be modified: we need to set a python integer to actually trigger the error fixed in [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b). For test purposes, I then reverted [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b) and the bug reappeared, so to be sure that the test now tests what needs to tested.

dkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).



---

archive/issue_comments_331064.json:
```json
{
    "body": "Replying to [comment:30 cheuberg]:\n> The test needed to be modified: we need to set a python integer to actually trigger the error fixed in [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b). For test purposes, I then reverted [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b) and the bug reappeared, so to be sure that the test now tests what needs to tested.\n> \n> dkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).\n\nJust FYI: I changed the `default_prec` code for asymptotic rings, because the precision was cached upon creation of the first asymptotic ring and could then not be changed, i.e. changes of the `series_precision()` parameter were not picked up.",
    "created_at": "2017-09-28T06:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331064",
    "user": "@behackl"
}
```

Replying to [comment:30 cheuberg]:
> The test needed to be modified: we need to set a python integer to actually trigger the error fixed in [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b). For test purposes, I then reverted [a6358f1](https://git.sagemath.org/sage.git/commit?id=a6358f1b57e955f7f15ea6541ffa3edcea42949b) and the bug reappeared, so to be sure that the test now tests what needs to tested.
> 
> dkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).

Just FYI: I changed the `default_prec` code for asymptotic rings, because the precision was cached upon creation of the first asymptotic ring and could then not be changed, i.e. changes of the `series_precision()` parameter were not picked up.



---

archive/issue_comments_331065.json:
```json
{
    "body": "Replying to [comment:30 cheuberg]:\n> dkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).\nReplying to [comment:31 behackl]:\n> Just FYI: I changed the default_prec code for asymptotic rings, because the precision was cached upon creation of the first asymptotic ring and could then not be changed, i.e. changes of the series_precision() parameter were not picked up.\n\nThis change is fine for me (even preferable over the now old implementation).",
    "created_at": "2017-10-10T08:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331065",
    "user": "@dkrenn"
}
```

Replying to [comment:30 cheuberg]:
> dkrenn: please have a look at commit [e619e5d](https://git.sagemath.org/sage.git/commit/?id=e619e5d01e2c11baeee076910655d5a67ef60b27) because it heavily modifies your commit [3214c83](http://git.sagemath.org/sage.git/commit/?id=3214c83c3a91f0eea73ad0068473661b1c228bfc) from #19532. (The new code, however, is now equivalent to the comparable situations in Laurent series and power series rings).
Replying to [comment:31 behackl]:
> Just FYI: I changed the default_prec code for asymptotic rings, because the precision was cached upon creation of the first asymptotic ring and could then not be changed, i.e. changes of the series_precision() parameter were not picked up.

This change is fine for me (even preferable over the now old implementation).



---

archive/issue_comments_331066.json:
```json
{
    "body": "Replying to [comment:32 dkrenn]:\n> This change is fine for me (even preferable over the now old implementation).\n\nThanks for having a look.\n\n`@`cheuberg: what remains to be done here? The patchbots also seem to be happy with the changes.",
    "created_at": "2017-10-10T12:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331066",
    "user": "@behackl"
}
```

Replying to [comment:32 dkrenn]:
> This change is fine for me (even preferable over the now old implementation).

Thanks for having a look.

`@`cheuberg: what remains to be done here? The patchbots also seem to be happy with the changes.



---

archive/issue_comments_331067.json:
```json
{
    "body": "Replying to [comment:33 behackl]:\n> `@`cheuberg: what remains to be done here? The patchbots also seem to be happy with the changes.\n\nPlease cross-review my last commit [317eb16](https://git.sagemath.org/sage.git/commit/?id=317eb16079189d8e6f1b03c377fe36add34bc239) if this has not yet happened (Reviewing should include a check whether the test tests what it should be test; see my comments in [comment:30 cheuberg]. If satisfied, set to positive review. (At the moment, we have an unhappy patchbot, but this is a timeout somewhere else).",
    "created_at": "2017-10-10T17:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331067",
    "user": "@cheuberg"
}
```

Replying to [comment:33 behackl]:
> `@`cheuberg: what remains to be done here? The patchbots also seem to be happy with the changes.

Please cross-review my last commit [317eb16](https://git.sagemath.org/sage.git/commit/?id=317eb16079189d8e6f1b03c377fe36add34bc239) if this has not yet happened (Reviewing should include a check whether the test tests what it should be test; see my comments in [comment:30 cheuberg]. If satisfied, set to positive review. (At the moment, we have an unhappy patchbot, but this is a timeout somewhere else).



---

archive/issue_comments_331068.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-10T19:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331068",
    "user": "@behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_331069.json:
```json
{
    "body": "In this case: I cross-reviewed your commit, everything looks good to me, and the test tests the correct thing.\n\nThus this is `positive_review`.",
    "created_at": "2017-10-10T19:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331069",
    "user": "@behackl"
}
```

In this case: I cross-reviewed your commit, everything looks good to me, and the test tests the correct thing.

Thus this is `positive_review`.



---

archive/issue_comments_331070.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-16T22:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23635#issuecomment-331070",
    "user": "@vbraun"
}
```

Resolution: fixed
