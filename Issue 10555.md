# Issue 10555: Generating polynomial rings over matrices hangs

Issue created by migration from https://trac.sagemath.org/ticket/10608

Original creator: spancratz

Original creation time: 2011-01-12 21:09:49

Assignee: was

Keywords: matrix polynomial ring

As of 4.6.0, the following code hangs:

```
    sage: MS = MatrixSpace(ZZ, 2, 2)
    sage: R.<x> = MS[]
```

whereas 

```
    sage: MS = MatrixSpace(ZZ, 2, 2)
    sage: R.<x> = PolynomialRing(MS)
```

works.


---

Attachment

I got the following error on sage-4.6.1.rc1:

rlm-book:sage-4.6.1.rc1 aly$ ./sage -t devel/sage/sage/matrix/matrix_space.py 
sage -t  "devel/sage/sage/matrix/matrix_space.py"           
**********************************************************************
File "/Users/aly/Desktop/sage-4.6.1.rc1/devel/sage/sage/matrix/matrix_space.py", line 630:
    sage: R.<x> = MS[]
Exception raised:
    Traceback (most recent call last):
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_14[6]>", line 1, in <module>
        R = MS['x']; (x,) = R._first_ngens(1)###line 630:
    sage: R.<x> = MS[]
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/matrix/matrix_space.py", line 655, in __getitem__
        P = PolynomialRing(self, x)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 319, in PolynomialRing
        raise TypeError, 'base_ring must be a ring'
    TypeError: base_ring must be a ring
**********************************************************************
File "/Users/aly/Desktop/sage-4.6.1.rc1/devel/sage/sage/matrix/matrix_space.py", line 640:
    sage: MS[This is the Trac macro *'t'* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#'t'-macro)
Exception raised:
    Traceback (most recent call last):
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_14[8]>", line 1, in <module>
        MS[This is the Trac macro *'t'* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#'t'-macro)###line 640:
    sage: MS[This is the Trac macro *'t'* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#'t'-macro)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/matrix/matrix_space.py", line 682, in __getitem__
        R = P(self, x)
      File "/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/rings/power_series_ring.py", line 211, in PowerSeriesRing
        raise TypeError, "base_ring must be a commutative ring"
    TypeError: base_ring must be a commutative ring
**********************************************************************
1 items had failures:
   2 of   9 in __main__.example_14
***Test Failed*** 2 failures.
For whitespace errors, see the file /Users/aly/.sage//tmp/.doctest_matrix_space.py
	 [19.8 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "devel/sage/sage/matrix/matrix_space.py"
Total time for all tests: 19.9 seconds


---

Comment by aly.deines created at 2011-01-13 19:19:10

Changing status from new to needs_work.


---

Comment by tscrim created at 2013-04-14 14:06:27

Changing component from user interface to website/wiki.


---

Comment by tscrim created at 2013-04-14 14:06:27

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2013-04-14 14:06:27

This is a duplicate of #8389.


---

Comment by tscrim created at 2013-04-17 13:40:48

Changing component from website/wiki to algebra.


---

Comment by mhansen created at 2013-07-24 16:41:57

Resolution: duplicate
