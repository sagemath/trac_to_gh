# Issue 31754: Efficient numerical computations with tensor trains

archive/issues_031754.json:
```json
{
    "body": "CC:  @mkoeppe @egourgoulhon @dimpase\n\nFollowing the progress with Ticket #30307, we propose to add computational functionalities with tensors via the tensor train decomposition, which is an idea in fact originally named \"Density Matrix Renormalization Group (DMRG)\" and later popularized by Prof. Ivan Oseledets. \n\nThis functionality is especially useful for high dimensional tasks to prevent the curse of dimensionality (such as in Riemannian optimization), currently supported in MATLAB, Python, and C++. The MATLAB version is currently most versatile and robust.\n\nWe may consider internalizing this computational library for Sage, as an effort to formalize the currently available implementations. This addition can either be an additional child class under `tensor`, and overwrite the arithmetics; or a separate module. The backend is currently proposed to be TensorFlow, however this may change / be flexible based on how the refactoring of `Components` progresses. \n\nOne can look at this github page for an example implementation (https://github.com/oseledets/ttpy).\n\nIdeally after the implementation of this ticket, users can specify a fixed rank tensor for a general manifold using `tensor.modules`, specify a ring and a frame, and perform useful and normally computationally intractable tasks using tensor train as a backend. Based on the progress of this ticket, one may also consider implementing other backends for storing a numerical tensor such as tensor rings and quantized tensor train.\n\nFor the theory behind why one can reduce a normally exponential (in the number of dimensions) task to a linear task, see (https://epubs.siam.org/doi/abs/10.1137/090752286?journalCode=sjoce3).\n\nIssue created by migration from https://trac.sagemath.org/ticket/31991\n\n",
    "created_at": "2021-06-16T17:27:03Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Efficient numerical computations with tensor trains",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31754",
    "user": "https://github.com/honglizhaobob"
}
```
CC:  @mkoeppe @egourgoulhon @dimpase

Following the progress with Ticket #30307, we propose to add computational functionalities with tensors via the tensor train decomposition, which is an idea in fact originally named "Density Matrix Renormalization Group (DMRG)" and later popularized by Prof. Ivan Oseledets. 

This functionality is especially useful for high dimensional tasks to prevent the curse of dimensionality (such as in Riemannian optimization), currently supported in MATLAB, Python, and C++. The MATLAB version is currently most versatile and robust.

We may consider internalizing this computational library for Sage, as an effort to formalize the currently available implementations. This addition can either be an additional child class under `tensor`, and overwrite the arithmetics; or a separate module. The backend is currently proposed to be TensorFlow, however this may change / be flexible based on how the refactoring of `Components` progresses. 

One can look at this github page for an example implementation (https://github.com/oseledets/ttpy).

Ideally after the implementation of this ticket, users can specify a fixed rank tensor for a general manifold using `tensor.modules`, specify a ring and a frame, and perform useful and normally computationally intractable tasks using tensor train as a backend. Based on the progress of this ticket, one may also consider implementing other backends for storing a numerical tensor such as tensor rings and quantized tensor train.

For the theory behind why one can reduce a normally exponential (in the number of dimensions) task to a linear task, see (https://epubs.siam.org/doi/abs/10.1137/090752286?journalCode=sjoce3).

Issue created by migration from https://trac.sagemath.org/ticket/31991





---

archive/issue_comments_453104.json:
```json
{
    "body": "Is `ttpy` still being maintained? I tried to install it (using `sage -pip install ttpy`) and ran into a Fortran issue:\n\n```\n    Error: Type mismatch between actual argument at (1) and actual argument at (2) (REAL(8)/COMPLEX(8)).\n    tt/tt-fort/ort.f90:271:22:\n    \n      271 |    call dgemv('t',n,r,1.d0,yy,n,x,1, 0.d0,gv,1)\n```\n",
    "created_at": "2021-06-16T17:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453104",
    "user": "https://github.com/mkoeppe"
}
```

Is `ttpy` still being maintained? I tried to install it (using `sage -pip install ttpy`) and ran into a Fortran issue:

```
    Error: Type mismatch between actual argument at (1) and actual argument at (2) (REAL(8)/COMPLEX(8)).
    tt/tt-fort/ort.f90:271:22:
    
      271 |    call dgemv('t',n,r,1.d0,yy,n,x,1, 0.d0,gv,1)
```




---

archive/issue_comments_453105.json:
```json
{
    "body": "(This is with gfortran 11.1 on macOS; this may be similar to the many issues that we had when gfortran 10 came along - #29456)",
    "created_at": "2021-06-16T17:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453105",
    "user": "https://github.com/mkoeppe"
}
```

(This is with gfortran 11.1 on macOS; this may be similar to the many issues that we had when gfortran 10 came along - #29456)



---

archive/issue_comments_453106.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> (This is with gfortran 11.1 on macOS; this may be similar to the many issues that we had when gfortran 10 came along - #29456)\n\nI didn't have an issue with downloading since I wasn't using pip but directly cloned the code on github. Based on their github's commit history it doesn't seem to be frequently maintained.. The MATLAB version is what I now use for my projects. I will update the MATLAB link in the ticket description.",
    "created_at": "2021-06-16T18:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453106",
    "user": "https://github.com/honglizhaobob"
}
```

Replying to [comment:6 mkoeppe]:
> (This is with gfortran 11.1 on macOS; this may be similar to the many issues that we had when gfortran 10 came along - #29456)

I didn't have an issue with downloading since I wasn't using pip but directly cloned the code on github. Based on their github's commit history it doesn't seem to be frequently maintained.. The MATLAB version is what I now use for my projects. I will update the MATLAB link in the ticket description.



---

archive/issue_comments_453107.json:
```json
{
    "body": "Waouh! This looks promising!",
    "created_at": "2021-06-16T18:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453107",
    "user": "https://github.com/egourgoulhon"
}
```

Waouh! This looks promising!



---

archive/issue_comments_453108.json:
```json
{
    "body": "I have opened an upstream issue for the compilation errors: https://github.com/oseledets/ttpy/issues/82",
    "created_at": "2021-06-16T19:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453108",
    "user": "https://github.com/mkoeppe"
}
```

I have opened an upstream issue for the compilation errors: https://github.com/oseledets/ttpy/issues/82



---

archive/issue_comments_453109.json:
```json
{
    "body": "Replying to [comment:9 egourgoulhon]:\n> Waouh! This looks promising!\nTo make it clear: the above comment was about the ticket main goal and was not some ironical statement about the ttpy issue with gfortran ;-)",
    "created_at": "2021-06-16T19:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453109",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:9 egourgoulhon]:
> Waouh! This looks promising!
To make it clear: the above comment was about the ticket main goal and was not some ironical statement about the ttpy issue with gfortran ;-)



---

archive/issue_comments_453110.json:
```json
{
    "body": "slightly modified description",
    "created_at": "2021-06-19T21:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31754#issuecomment-453110",
    "user": "https://github.com/honglizhaobob"
}
```

slightly modified description
