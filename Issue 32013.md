# Issue 32013: Make the definition of (magmatic) algebras precise

Issue created by migration from https://trac.sagemath.org/ticket/32250

Original creator: pbruin

Original creation time: 2021-07-20 12:55:07

CC:  mjo nthiery

There is currently no precise definition of algebras (as in MagmaticAlgebra) in the documentation.  A useful definition seems to be the following.

Let _R_ be a ring (unital and associative as usual, but not necessarily commutative).  Note that if _A_ is an _R_-bimodule, then the tensor product _A_ ⊗<sub>_R_</sub> _A_ exists and is again an _R_-bimodule.

Definition: An _R-algebra_ is an _R_-bimodule _A_ together with an _R_-bimodule homomorphism ⋆: _A_ ⊗<sub>_R_</sub> _A_ → _A_.

See the attached branch for a definition that does not use tensor products.

Two remarks:

- With this definition, a unital associative _R_-algebra is "the same" as a ring _A_ together with a ring homomorphism _R_ → _A_.

- There is no requirement that left and right multiplication agree (in the sense that _r_ ⋆ _a_ = _a_ ⋆ _r_ for _r_ ∈ _R_ and _a_ ∈ _A_).  This additional condition is only really sensible if _R_ is commutative.  In that case, an _R_-algebra _A_ satisfying the condition could be called "central", although this conflicts with the usual definition of central algebras in which _A_ is unital and associative and the image of _R_ under the canonical ring homomorphism _R_ → _A_ is required to be equal to (not just contained in) the centre of _A_.  Skew polynomial algebras are examples of algebras that are unital and associative, but not in general central.


---

Comment by pbruin created at 2021-07-20 12:56:57

Changing status from new to needs_review.


---

Comment by mjo created at 2021-07-21 15:45:28

I've struggled with this in the past, and wound up defining a (magmatic) algebra to involve a module over a _commutative_ ring. Sage doesn't really do modules over non-commutative rings:


```
sage: Q = QuaternionAlgebra(QQ,-1,-1)                                           
sage: FreeModule(Q,2)                                                           
/home/mjo/src/sage.git/local/lib/python3.9/site-packages/sage/modules/free_module.py:235: UserWarning: You are constructing a free module
over a noncommutative ring. Sage does not have a concept
of left/right and both sided modules, so be careful.
It's also not guaranteed that all multiplications are
done from the right side.
```


So, when you say "An algebra over a (not necessarily commutative) ring `R` is a bimodule..." you are suggesting more generality than what sage is actually capable of.

The rest looks OK to me. The explicit mention that "Algebras" are actually "associative unital algebras" would have saved me a lot of time at one point.


---

Comment by pbruin created at 2021-07-23 15:09:41

Replying to [comment:2 mjo]:
> I've struggled with this in the past, and wound up defining a (magmatic) algebra to involve a module over a _commutative_ ring. Sage doesn't really do modules over non-commutative rings:
> 
> {{{
> sage: Q = QuaternionAlgebra(QQ,-1,-1)                                           
> sage: FreeModule(Q,2)                                                           
> /home/mjo/src/sage.git/local/lib/python3.9/site-packages/sage/modules/free_module.py:235: UserWarning: You are constructing a free module
> over a noncommutative ring. Sage does not have a concept
> of left/right and both sided modules, so be careful.
> It's also not guaranteed that all multiplications are
> done from the right side.
> }}}
> 
> So, when you say "An algebra over a (not necessarily commutative) ring `R` is a bimodule..." you are suggesting more generality than what sage is actually capable of.
For me, the aim at this moment is just to have a conceptual starting point for a more precisely-defined category hierarchy.  At least on the category level there is support for left, right and bimodules, possibly over non-commutative rings.

It is true that not all modules implemented in Sage have support for non-commutative rings, and moreover the documentation of `sage.categories.modules` contains the following warning:

```
        Outside of the context of symmetric modules over a commutative
        ring, the specifications of this category are fuzzy and not
        yet set in stone (see below). The code in this category and
        its subcategories is therefore prone to bugs or arbitrary
        limitations in this case.
```

This is actually also a point where a precise definition would be useful.  Maybe modules (without left/right/bi-) should indeed be defined only over commutative rings, and should be defined as bimodules such that the left and right multiplication coincide.  Equivalently, a module over a commutative ring could simply be defined as a left module which can then be viewed as a bimodule by defining the right multiplication to be equal to the left multiplication (this works because the base ring is commutative).  I guess this is what "symmetric" means in the above warning.

Analogously, and as an alternative to the definition of algebras I am proposing on this ticket, we could in principle say that (magmatic) algebras should be defined only over commutative rings and should be defined as modules (in the above sense) with a bilinear multiplication map.  If I understand correctly, that is how you define algebras.  The only problem with this is that then we cannot say that skew polynomial rings are algebras over their base ring, because the left and right multiplication do not agree.  To solve this, we could use "prealgebras" (or some nicer name) for the concept I am proposing, and demote skew polynomial rings to prealgebras.


---

Comment by klee created at 2021-07-30 07:52:11

This ticket seems deserve attention on sage-devel. Below is my comment.


I think the category system of Sage aims to be practical rather than mathematically precise. Definition of a category should essentially be a description of properties that elements and operators of objects in the category should satisfy. Hence I suggest you to separate the practical description of the category from the mathematical description of objects in the category. Thus the practical description should be free of tensor products and homomorphisms and maps. I also doubt if the term bimodule is appropriate in the practical description.


---

Comment by pbruin created at 2021-07-30 08:17:55

Replying to [comment:4 klee]:
> This ticket seems deserve attention on sage-devel.
I agree, I did not get around to sending a message there but will do that.
> I think the category system of Sage aims to be practical rather than mathematically precise. Definition of a category should essentially be a description of properties that elements and operators of objects in the category should satisfy.
Some people may view it like this, but I think this is a mistake.  If we can't agree on a definition (or if there is no clear definition as in this case), then it is practically guaranteed to lead to bugs or confusion sooner or later.
> Hence I suggest you to separate the practical description of the category from the mathematical description of objects in the category. Thus the practical description should be free of tensor products and homomorphisms and maps. I also doubt if the term bimodule is appropriate in the practical description. 
I have no problem with separating the "mathematical" and the "practical" description, but this ticket is only about the former.  I think the definition of the Sage category is an entirely appropriate place to put the mathematical definition.  Any practical description should be based on the mathematical one.


---

Comment by tscrim created at 2021-08-09 03:51:30

Thank you trying to make this more precise. Something I would want for a magmatic algebra: We should not require a ring with an identity, but only a rng. That way a rng is an associative magmatic algebra over itself.


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.
