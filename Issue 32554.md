# Issue 32554: Human Readable Error-Message for Elliptic curve constructor.

Issue created by migration from https://trac.sagemath.org/ticket/32791

Original creator: @Florianjw

Original creation time: 2021-10-29 15:15:16

Keywords: User-Experience

At the moment the error-message when trying to create an elliptic curve from a formula that defines a singular curve is not particularly user-friendly:


```
sage: EllipticCurve(GF(7), [-2,0,0,0,0])
[...]
ArithmeticError: invariants (5, 0, 0, 0, 0) define a singular curve
```


This is trivially improvable by a one-line-fix with the tools that are already implemented (patch at the end) to give the following much more comprehensible error:


```
ArithmeticError: y^2 + 5*x*y = x^3 defines a singular curve
```


I wanted to create this as a pull-request, but github told me that they don't get accepted there and I couldn't figure out where to create one directly, so please just apply the following patch:


```
--- a/src/sage/schemes/elliptic_curves/ell_generic.py
+++ b/src/sage/schemes/elliptic_curves/ell_generic.py
@@ -145,7 +145,7 @@ class EllipticCurve_generic(WithEqualityById, plane_curve.ProjectivePlaneCurve):
         self.__base_ring = K
         self.__ainvs = tuple(K(a) for a in ainvs)
         if self.discriminant() == 0:
-            raise ArithmeticError("invariants " + str(ainvs) + " define a singular curve")
+            raise ArithmeticError(self._equation_string() + " defines a singular curve")
         PP = projective_space.ProjectiveSpace(2, K, names='xyz')
         x, y, z = PP.coordinate_ring().gens()
         a1, a2, a3, a4, a6 = ainvs

```




---

Comment by slelievre created at 2021-10-30 00:41:43

While we don't support pull requests at github,
we support merge requests at gitlab.

- https://gitlab.com/sagemath/sage

Or someone can commit on your behalf and push
a branch here with your proposed change.

I think one can use `GIT_COMMIT_AUTHOR` for that.


---

Comment by lorenz created at 2021-10-30 03:04:39

Changing status from new to needs_review.


---

Comment by git created at 2021-11-04 06:16:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by lorenz created at 2021-11-05 02:18:39

Changing status from needs_review to positive_review.


---

Comment by lorenz created at 2021-11-05 02:18:39

Changing priority from minor to trivial.


---

Comment by lorenz created at 2021-11-05 02:18:39

Changing keywords from "User-Experience" to "elliptic curve constructor, error message, readability, user experience".


---

Comment by lorenz created at 2021-11-05 02:18:39

The remaining test failures appear to be a problem with that particular patchbot (see for instance the first patchbot run at #32823, which contains the same errors).


---

Comment by vbraun created at 2021-11-18 23:37:52

Resolution: fixed
