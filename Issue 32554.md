# Issue 32554: Human Readable Error-Message for Elliptic curve constructor.

archive/issues_032554.json:
```json
{
    "body": "Keywords: User-Experience\n\nAt the moment the error-message when trying to create an elliptic curve from a formula that defines a singular curve is not particularly user-friendly:\n\n\n```\nsage: EllipticCurve(GF(7), [-2,0,0,0,0])\n[...]\nArithmeticError: invariants (5, 0, 0, 0, 0) define a singular curve\n```\n\n\nThis is trivially improvable by a one-line-fix with the tools that are already implemented (patch at the end) to give the following much more comprehensible error:\n\n\n```\nArithmeticError: y^2 + 5*x*y = x^3 defines a singular curve\n```\n\n\nI wanted to create this as a pull-request, but github told me that they don't get accepted there and I couldn't figure out where to create one directly, so please just apply the following patch:\n\n\n```\n--- a/src/sage/schemes/elliptic_curves/ell_generic.py\n+++ b/src/sage/schemes/elliptic_curves/ell_generic.py\n@@ -145,7 +145,7 @@ class EllipticCurve_generic(WithEqualityById, plane_curve.ProjectivePlaneCurve):\n         self.__base_ring = K\n         self.__ainvs = tuple(K(a) for a in ainvs)\n         if self.discriminant() == 0:\n-            raise ArithmeticError(\"invariants \" + str(ainvs) + \" define a singular curve\")\n+            raise ArithmeticError(self._equation_string() + \" defines a singular curve\")\n         PP = projective_space.ProjectiveSpace(2, K, names='xyz')\n         x, y, z = PP.coordinate_ring().gens()\n         a1, a2, a3, a4, a6 = ainvs\n\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32791\n\n",
    "created_at": "2021-10-29T15:15:16Z",
    "labels": [
        "elliptic curves",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Human Readable Error-Message for Elliptic curve constructor.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32554",
    "user": "@Florianjw"
}
```
Keywords: User-Experience

At the moment the error-message when trying to create an elliptic curve from a formula that defines a singular curve is not particularly user-friendly:


```
sage: EllipticCurve(GF(7), [-2,0,0,0,0])
[...]
ArithmeticError: invariants (5, 0, 0, 0, 0) define a singular curve
```


This is trivially improvable by a one-line-fix with the tools that are already implemented (patch at the end) to give the following much more comprehensible error:


```
ArithmeticError: y^2 + 5*x*y = x^3 defines a singular curve
```


I wanted to create this as a pull-request, but github told me that they don't get accepted there and I couldn't figure out where to create one directly, so please just apply the following patch:


```
--- a/src/sage/schemes/elliptic_curves/ell_generic.py
+++ b/src/sage/schemes/elliptic_curves/ell_generic.py
@@ -145,7 +145,7 @@ class EllipticCurve_generic(WithEqualityById, plane_curve.ProjectivePlaneCurve):
         self.__base_ring = K
         self.__ainvs = tuple(K(a) for a in ainvs)
         if self.discriminant() == 0:
-            raise ArithmeticError("invariants " + str(ainvs) + " define a singular curve")
+            raise ArithmeticError(self._equation_string() + " defines a singular curve")
         PP = projective_space.ProjectiveSpace(2, K, names='xyz')
         x, y, z = PP.coordinate_ring().gens()
         a1, a2, a3, a4, a6 = ainvs

```



Issue created by migration from https://trac.sagemath.org/ticket/32791





---

archive/issue_comments_464496.json:
```json
{
    "body": "While we don't support pull requests at github,\nwe support merge requests at gitlab.\n\n- https://gitlab.com/sagemath/sage\n\nOr someone can commit on your behalf and push\na branch here with your proposed change.\n\nI think one can use `GIT_COMMIT_AUTHOR` for that.",
    "created_at": "2021-10-30T00:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464496",
    "user": "@slel"
}
```

While we don't support pull requests at github,
we support merge requests at gitlab.

- https://gitlab.com/sagemath/sage

Or someone can commit on your behalf and push
a branch here with your proposed change.

I think one can use `GIT_COMMIT_AUTHOR` for that.



---

archive/issue_comments_464497.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-30T03:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464497",
    "user": "@yyyyx4"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464498.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T06:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464498",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_464499.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-05T02:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464499",
    "user": "@yyyyx4"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_464500.json:
```json
{
    "body": "Changing priority from minor to trivial.",
    "created_at": "2021-11-05T02:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464500",
    "user": "@yyyyx4"
}
```

Changing priority from minor to trivial.



---

archive/issue_comments_464501.json:
```json
{
    "body": "Changing keywords from \"User-Experience\" to \"elliptic curve constructor, error message, readability, user experience\".",
    "created_at": "2021-11-05T02:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464501",
    "user": "@yyyyx4"
}
```

Changing keywords from "User-Experience" to "elliptic curve constructor, error message, readability, user experience".



---

archive/issue_comments_464502.json:
```json
{
    "body": "The remaining test failures appear to be a problem with that particular patchbot (see for instance the first patchbot run at #32823, which contains the same errors).",
    "created_at": "2021-11-05T02:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464502",
    "user": "@yyyyx4"
}
```

The remaining test failures appear to be a problem with that particular patchbot (see for instance the first patchbot run at #32823, which contains the same errors).



---

archive/issue_comments_464503.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-11-18T23:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32554#issuecomment-464503",
    "user": "@vbraun"
}
```

Resolution: fixed
