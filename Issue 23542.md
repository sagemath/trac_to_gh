# Issue 23542: dev_tools is wrongly using globals()

Issue created by migration from https://trac.sagemath.org/ticket/23779

Original creator: vdelecroix

Original creation time: 2017-09-04 06:36:06

CC:  chapoton

The built-in function `globals()` is restricted in the module where it is defined. From Python doc

```
globals()

    Return a dictionary representing the current global symbol
    table. This is always the dictionary of the current module
    (inside a function or method, this is the module where it
     is defined, not the module from which it is called).
```

Its usage in `dev_tools.find_objects_from_name` is just completely wrong as it should check for the `sage` global namespace. Moreover, such check in globals would better be done in `import_statements` directly.

As reported in #19444 there is the following misbehavior

```
sage: import_statements('log')
# **Warning**: distinct objects with name 'log' in:
#   - sage.functions.log
#   - math
#   - sage.functions
#   - sage.misc.functional
from sage.misc.functional import log
```

that is corrected into

```
sage: import_statements('log')
from sage.functions.log import log
```



---

Comment by vdelecroix created at 2017-09-04 06:41:30

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2017-09-04 06:41:30

New commits:


---

Comment by slabbe created at 2017-09-14 13:44:23

I postive review your commit.

I added a commit to update the doc of the function `find_objects_from_name`.

Note that I rebased your commit on top of 8.1.beta5.

Feel free to change the status to positive review if you agree with my changes.

----
New commits:


---

Comment by slabbe created at 2017-09-14 13:46:07

Changing keywords from "" to "thursdaysbdx".


---

Comment by vdelecroix created at 2017-09-14 13:48:41

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2017-09-14 13:48:41

Good! Thanks.


---

Comment by vbraun created at 2017-09-18 22:15:32

Resolution: fixed
