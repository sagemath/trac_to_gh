# Issue 12323: Bring plot.py to 100% coverage

archive/issues_012323.json:
```json
{
    "body": "Assignee: mvngu\n\n\n```\n\n$ ./sage -coverage devel/sage/sage/plot/plot.py \n----------------------------------------------------------------------\ndevel/sage/sage/plot/plot.py\nSCORE devel/sage/sage/plot/plot.py: 76% (53 of 69)\n\nMissing documentation:\n\t * SelectiveFormatter(formatter, skip_values):\n\t * _plot(funcs, xrange, parametric=False, polar=False, fill=False, label='', randomize=True, **options):\n\t * __init__(self, array):\n\t * _repr_(self):\n\t * __str__(self):\n\t * nrows(self):\n\t * ncols(self):\n\t * __getitem__(self, i):\n\t * __setitem__(self, i, g):\n\t * __set_figsize__(self, list):\n\t * __len__(self):\n\t * append(self, g):\n\t * reshape(v, n, m):\n\n\nMissing doctests:\n\t * add_primitive(self, primitive):\n\t * _render(self, filename, dpi=None, figsize=None, axes=None, **args):\n\t * save(self, filename=None, dpi=DEFAULT_DPI, figsize=None, axes = None, **args):\n\n----------------------------------------------------------------------\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12495\n\n",
    "created_at": "2012-02-11T07:36:38Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Bring plot.py to 100% coverage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12323",
    "user": "https://github.com/kcrisman"
}
```
Assignee: mvngu


```

$ ./sage -coverage devel/sage/sage/plot/plot.py 
----------------------------------------------------------------------
devel/sage/sage/plot/plot.py
SCORE devel/sage/sage/plot/plot.py: 76% (53 of 69)

Missing documentation:
	 * SelectiveFormatter(formatter, skip_values):
	 * _plot(funcs, xrange, parametric=False, polar=False, fill=False, label='', randomize=True, **options):
	 * __init__(self, array):
	 * _repr_(self):
	 * __str__(self):
	 * nrows(self):
	 * ncols(self):
	 * __getitem__(self, i):
	 * __setitem__(self, i, g):
	 * __set_figsize__(self, list):
	 * __len__(self):
	 * append(self, g):
	 * reshape(v, n, m):


Missing doctests:
	 * add_primitive(self, primitive):
	 * _render(self, filename, dpi=None, figsize=None, axes=None, **args):
	 * save(self, filename=None, dpi=DEFAULT_DPI, figsize=None, axes = None, **args):

----------------------------------------------------------------------
```


Issue created by migration from https://trac.sagemath.org/ticket/12495





---

archive/issue_comments_144846.json:
```json
{
    "body": "Well, fixing the first one consists of \n\n```diff\ndiff --git a/plot.py b/plot.py\n--- a/plot.py\n+++ b/plot.py\n@@ -1,3 +1,2 @@\ndef SelectiveFormatter(formatter, skip_values):\n-\n    \"\"\"\n```\n\nHopefully the rest will all be one character fixes...",
    "created_at": "2012-02-17T02:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144846",
    "user": "https://github.com/kcrisman"
}
```

Well, fixing the first one consists of 

```diff
diff --git a/plot.py b/plot.py
--- a/plot.py
+++ b/plot.py
@@ -1,3 +1,2 @@
def SelectiveFormatter(formatter, skip_values):
-
    """
```

Hopefully the rest will all be one character fixes...



---

archive/issue_comments_144847.json:
```json
{
    "body": "And most of the rest are for `GraphicsArray`.",
    "created_at": "2012-02-17T03:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144847",
    "user": "https://github.com/kcrisman"
}
```

And most of the rest are for `GraphicsArray`.



---

archive/issue_comments_144848.json:
```json
{
    "body": "Patch coming up.  Most of this was straightforward.  I ended up having to turn one function into a `NotImplementedError`, because it could never have worked as written.  \n\nAlso, trying to deal with `figsize` reminded me of the following related tickets where such things should happen.  I tried to make `figsize` be doable not just from `show` and `save`, but it wasn't worth the effort on a coverage ticket, so it should happen at one of these.\n* #11160 - Graphics Arrays need suboptions somehow\n* #10656 - Graphics Arrays should be able to become Graphics objects\n* #10657 - options should be passed to all graphics, and they should be set separately if desired",
    "created_at": "2012-02-17T20:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144848",
    "user": "https://github.com/kcrisman"
}
```

Patch coming up.  Most of this was straightforward.  I ended up having to turn one function into a `NotImplementedError`, because it could never have worked as written.  

Also, trying to deal with `figsize` reminded me of the following related tickets where such things should happen.  I tried to make `figsize` be doable not just from `show` and `save`, but it wasn't worth the effort on a coverage ticket, so it should happen at one of these.
* #11160 - Graphics Arrays need suboptions somehow
* #10656 - Graphics Arrays should be able to become Graphics objects
* #10657 - options should be passed to all graphics, and they should be set separately if desired



---

archive/issue_comments_144849.json:
```json
{
    "body": "Attachment [trac_12495.patch](tarball://root/attachments/some-uuid/ticket12495/trac_12495.patch) by @kcrisman created at 2012-02-17 21:15:45\n\nBased on 5.0.beta4",
    "created_at": "2012-02-17T21:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144849",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12495.patch](tarball://root/attachments/some-uuid/ticket12495/trac_12495.patch) by @kcrisman created at 2012-02-17 21:15:45

Based on 5.0.beta4



---

archive/issue_comments_144850.json:
```json
{
    "body": "Okay, hopefully this is okay.",
    "created_at": "2012-02-17T21:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144850",
    "user": "https://github.com/kcrisman"
}
```

Okay, hopefully this is okay.



---

archive/issue_comments_144851.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-17T21:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144851",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_144852.json:
```json
{
    "body": "Looks mostly great, I just have a few small corrections; see the referee's patch. If you're happy with my changes, feel free to give the ticket a positive review.\n\nNot too important because underscore methods aren't included in the reference manual by default, but line 3863\n\n```\nWe can make commands not display their plots by default. \n```\n\nshould probably end with a double colon: `by default. ::`.  Same with line 3888.\n\nLine 3899 (the last line reproduced here) is wrong:\n\n```\n     def nrows(self): \n         \"\"\" \n         String representation of the graphics array.\n```\n\n\nWhile fixing these, I also added a blank line after line 3114:\n\n```\n    ``exclude`` and ``detect_poles`` can be used together::\n        sage: f(x) = (floor(x)+0.5) / (1-(x-0.5)^2)\n```\n",
    "created_at": "2012-02-27T02:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144852",
    "user": "https://github.com/jhpalmieri"
}
```

Looks mostly great, I just have a few small corrections; see the referee's patch. If you're happy with my changes, feel free to give the ticket a positive review.

Not too important because underscore methods aren't included in the reference manual by default, but line 3863

```
We can make commands not display their plots by default. 
```

should probably end with a double colon: `by default. ::`.  Same with line 3888.

Line 3899 (the last line reproduced here) is wrong:

```
     def nrows(self): 
         """ 
         String representation of the graphics array.
```


While fixing these, I also added a blank line after line 3114:

```
    ``exclude`` and ``detect_poles`` can be used together::
        sage: f(x) = (floor(x)+0.5) / (1-(x-0.5)^2)
```




---

archive/issue_comments_144853.json:
```json
{
    "body": "Attachment [trac_12495-ref.patch](tarball://root/attachments/some-uuid/ticket12495/trac_12495-ref.patch) by @jhpalmieri created at 2012-02-27 02:26:47",
    "created_at": "2012-02-27T02:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144853",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_12495-ref.patch](tarball://root/attachments/some-uuid/ticket12495/trac_12495-ref.patch) by @jhpalmieri created at 2012-02-27 02:26:47



---

archive/issue_comments_144854.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-27T15:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144854",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_144855.json:
```json
{
    "body": "It applies and the changes are definitely all good, so great.  Thanks for catching those.",
    "created_at": "2012-02-27T15:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144855",
    "user": "https://github.com/kcrisman"
}
```

It applies and the changes are definitely all good, so great.  Thanks for catching those.



---

archive/issue_comments_144856.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-04T21:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144856",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012322.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2012-03-04T21:17:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12323#event-12322"
}
```



---

archive/issue_comments_144857.json:
```json
{
    "body": "I think that some/most of these plotting tests should be marked `# long time`.  The time for doctesting this file (without `--long`) is **more than double** that of any other file in the Sage library.  When the system is busy, I easily get timeouts (all this on boxen.math).  Of course, the slow-down mentioned at #12854 is also responsible, but even without it, the file would still take too long to test.",
    "created_at": "2012-04-18T06:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144857",
    "user": "https://github.com/jdemeyer"
}
```

I think that some/most of these plotting tests should be marked `# long time`.  The time for doctesting this file (without `--long`) is **more than double** that of any other file in the Sage library.  When the system is busy, I easily get timeouts (all this on boxen.math).  Of course, the slow-down mentioned at #12854 is also responsible, but even without it, the file would still take too long to test.



---

archive/issue_comments_144858.json:
```json
{
    "body": "I don't know that there are any particular plots here that are \"long\".  It's just a really big file, and plotting takes a while.  It really should be split up... but in any case that would all be another ticket.",
    "created_at": "2012-04-18T14:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144858",
    "user": "https://github.com/kcrisman"
}
```

I don't know that there are any particular plots here that are "long".  It's just a really big file, and plotting takes a while.  It really should be split up... but in any case that would all be another ticket.



---

archive/issue_comments_144859.json:
```json
{
    "body": "Replying to [comment:11 kcrisman]:\n> I don't know that there are any particular plots here that are \"long\".  It's just a really big file, and plotting takes a while.\nCould you live with just marking some large portion of tests as \"# long time\" just to get the total testing time down?",
    "created_at": "2012-04-18T17:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144859",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 kcrisman]:
> I don't know that there are any particular plots here that are "long".  It's just a really big file, and plotting takes a while.
Could you live with just marking some large portion of tests as "# long time" just to get the total testing time down?



---

archive/issue_comments_144860.json:
```json
{
    "body": "Let's hear concrete description of which tests (ones that are largely testing internal methods or are repeats would be best) you would like to do this to on another ticket.",
    "created_at": "2012-04-19T00:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144860",
    "user": "https://github.com/kcrisman"
}
```

Let's hear concrete description of which tests (ones that are largely testing internal methods or are repeats would be best) you would like to do this to on another ticket.



---

archive/issue_comments_144861.json:
```json
{
    "body": "See #12857 for further discussion.",
    "created_at": "2012-04-19T07:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12323#issuecomment-144861",
    "user": "https://github.com/jdemeyer"
}
```

See #12857 for further discussion.
