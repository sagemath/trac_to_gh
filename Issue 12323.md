# Issue 12323: Bring plot.py to 100% coverage

Issue created by migration from https://trac.sagemath.org/ticket/12495

Original creator: kcrisman

Original creation time: 2012-02-11 07:36:38

Assignee: mvngu


```

$ ./sage -coverage devel/sage/sage/plot/plot.py 
----------------------------------------------------------------------
devel/sage/sage/plot/plot.py
SCORE devel/sage/sage/plot/plot.py: 76% (53 of 69)

Missing documentation:
	 * SelectiveFormatter(formatter, skip_values):
	 * _plot(funcs, xrange, parametric=False, polar=False, fill=False, label='', randomize=True, **options):
	 * __init__(self, array):
	 * _repr_(self):
	 * __str__(self):
	 * nrows(self):
	 * ncols(self):
	 * __getitem__(self, i):
	 * __setitem__(self, i, g):
	 * __set_figsize__(self, list):
	 * __len__(self):
	 * append(self, g):
	 * reshape(v, n, m):


Missing doctests:
	 * add_primitive(self, primitive):
	 * _render(self, filename, dpi=None, figsize=None, axes=None, **args):
	 * save(self, filename=None, dpi=DEFAULT_DPI, figsize=None, axes = None, **args):

----------------------------------------------------------------------
```



---

Comment by kcrisman created at 2012-02-17 02:35:51

Well, fixing the first one consists of 

```diff
diff --git a/plot.py b/plot.py
--- a/plot.py
+++ b/plot.py
@@ -1,3 +1,2 @@
def SelectiveFormatter(formatter, skip_values):
-
    """
```

Hopefully the rest will all be one character fixes...


---

Comment by kcrisman created at 2012-02-17 03:00:09

And most of the rest are for `GraphicsArray`.


---

Comment by kcrisman created at 2012-02-17 20:43:23

Patch coming up.  Most of this was straightforward.  I ended up having to turn one function into a `NotImplementedError`, because it could never have worked as written.  

Also, trying to deal with `figsize` reminded me of the following related tickets where such things should happen.  I tried to make `figsize` be doable not just from `show` and `save`, but it wasn't worth the effort on a coverage ticket, so it should happen at one of these.
 * #11160 - Graphics Arrays need suboptions somehow
 * #10656 - Graphics Arrays should be able to become Graphics objects
 * #10657 - options should be passed to all graphics, and they should be set separately if desired


---

Attachment

Based on 5.0.beta4


---

Comment by kcrisman created at 2012-02-17 21:16:35

Okay, hopefully this is okay.


---

Comment by kcrisman created at 2012-02-17 21:16:35

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2012-02-27 02:26:32

Looks mostly great, I just have a few small corrections; see the referee's patch. If you're happy with my changes, feel free to give the ticket a positive review.

Not too important because underscore methods aren't included in the reference manual by default, but line 3863

```
We can make commands not display their plots by default. 
```

should probably end with a double colon: `by default. ::`.  Same with line 3888.

Line 3899 (the last line reproduced here) is wrong:

```
     def nrows(self): 
         """ 
         String representation of the graphics array.
```


While fixing these, I also added a blank line after line 3114:

```
    ``exclude`` and ``detect_poles`` can be used together::
        sage: f(x) = (floor(x)+0.5) / (1-(x-0.5)^2)
```



---

Attachment


---

Comment by kcrisman created at 2012-02-27 15:39:30

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-02-27 15:39:30

It applies and the changes are definitely all good, so great.  Thanks for catching those.


---

Comment by jdemeyer created at 2012-03-04 21:17:20

Resolution: fixed


---

Comment by jdemeyer created at 2012-04-18 06:33:22

I think that some/most of these plotting tests should be marked `# long time`.  The time for doctesting this file (without `--long`) is *more than double* that of any other file in the Sage library.  When the system is busy, I easily get timeouts (all this on boxen.math).  Of course, the slow-down mentioned at #12854 is also responsible, but even without it, the file would still take too long to test.


---

Comment by kcrisman created at 2012-04-18 14:07:50

I don't know that there are any particular plots here that are "long".  It's just a really big file, and plotting takes a while.  It really should be split up... but in any case that would all be another ticket.


---

Comment by jdemeyer created at 2012-04-18 17:05:41

Replying to [comment:11 kcrisman]:
> I don't know that there are any particular plots here that are "long".  It's just a really big file, and plotting takes a while.
Could you live with just marking some large portion of tests as "# long time" just to get the total testing time down?


---

Comment by kcrisman created at 2012-04-19 00:25:13

Let's hear concrete description of which tests (ones that are largely testing internal methods or are repeats would be best) you would like to do this to on another ticket.


---

Comment by jdemeyer created at 2012-04-19 07:29:27

See #12857 for further discussion.
