# Issue 13192: Upgrade Maxima to 5.28

archive/issues_013192.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  jpflori @dimpase @nbruin @zimmermann6\n\n\n```\nMessage: 5\nDate: Sun, 12 Aug 2012 23:18:05 +0000 (UTC)\nFrom: Robert Dodier <robert.dodier@gmail.com>\nTo: maxima@math.utexas.edu\nSubject: [Maxima] Maxima 5.28.0 release\nMessage-ID: <k09djd$dvj$2@dough.gmane.org>\n\nHi, I've created branch-5_28 in Git and tagged branch-5_28-base and\n5.28.0. I've created tar.gz, srpm, and rpm's and uploaded them to the\nSourceForge file manager. (http://sourceforge.net/projects/maxima/files)\n\n```\n\nThis should fix at least a few tickets.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13364\n\n",
    "created_at": "2012-08-14T01:16:01Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Upgrade Maxima to 5.28",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13192",
    "user": "@kcrisman"
}
```
Assignee: tbd

CC:  jpflori @dimpase @nbruin @zimmermann6


```
Message: 5
Date: Sun, 12 Aug 2012 23:18:05 +0000 (UTC)
From: Robert Dodier <robert.dodier@gmail.com>
To: maxima@math.utexas.edu
Subject: [Maxima] Maxima 5.28.0 release
Message-ID: <k09djd$dvj$2@dough.gmane.org>

Hi, I've created branch-5_28 in Git and tagged branch-5_28-base and
5.28.0. I've created tar.gz, srpm, and rpm's and uploaded them to the
SourceForge file manager. (http://sourceforge.net/projects/maxima/files)

```

This should fix at least a few tickets.

Issue created by migration from https://trac.sagemath.org/ticket/13364





---

archive/issue_comments_161070.json:
```json
{
    "body": "From my test with 5.27.0 that will break a number of things.... The interface to a number of functions changed and requires extra arguments which throws things all over the place of course.",
    "created_at": "2012-08-14T09:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161070",
    "user": "@kiwifb"
}
```

From my test with 5.27.0 that will break a number of things.... The interface to a number of functions changed and requires extra arguments which throws things all over the place of course.



---

archive/issue_comments_161071.json:
```json
{
    "body": "True.  I just opened this in order to have a ticket for it at all; I couldn't find one for 5.27 update alone (as opposed to things noting that 5.27 would fix various things) so I opened this. Feel free to close it if it's a dup.",
    "created_at": "2012-08-14T12:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161071",
    "user": "@kcrisman"
}
```

True.  I just opened this in order to have a ticket for it at all; I couldn't find one for 5.27 update alone (as opposed to things noting that 5.27 would fix various things) so I opened this. Feel free to close it if it's a dup.



---

archive/issue_comments_161072.json:
```json
{
    "body": "No duplicate that I know off. May be an opportunity to update ecl as well, 12.2.1 works well with a few tweaks. 12.7.1 seems to have issues see #12985.",
    "created_at": "2012-08-15T09:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161072",
    "user": "@kiwifb"
}
```

No duplicate that I know off. May be an opportunity to update ecl as well, 12.2.1 works well with a few tweaks. 12.7.1 seems to have issues see #12985.



---

archive/issue_comments_161073.json:
```json
{
    "body": "The newest Maxima is now 5.29.  Ugrading ECL is #13324 and hopefully will have positive review soon.",
    "created_at": "2012-12-05T15:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161073",
    "user": "@kcrisman"
}
```

The newest Maxima is now 5.29.  Ugrading ECL is #13324 and hopefully will have positive review soon.



---

archive/issue_comments_161074.json:
```json
{
    "body": "We'll have to make some change to spkg-install when ECL >= 12.12.1 gets in.\nSee\nhttp://trac.sagemath.org/sage_trac/ticket/13324#comment:77\n\nI'm waiting for more info from upstream ECL on this change.",
    "created_at": "2012-12-14T17:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161074",
    "user": "jpflori"
}
```

We'll have to make some change to spkg-install when ECL >= 12.12.1 gets in.
See
http://trac.sagemath.org/sage_trac/ticket/13324#comment:77

I'm waiting for more info from upstream ECL on this change.



---

archive/issue_comments_161075.json:
```json
{
    "body": "Changing keywords from \"\" to \"maxima spkg\".",
    "created_at": "2012-12-14T17:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161075",
    "user": "jpflori"
}
```

Changing keywords from "" to "maxima spkg".



---

archive/issue_comments_161076.json:
```json
{
    "body": "Here comes a 5.29.1 spkg at\nhttp://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg\n\nIt builds and runs and passes most tests in sage/calculus on Linux.\nSome tests fails because Maxima adds ? in some strings in calculus.py.",
    "created_at": "2012-12-14T18:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161076",
    "user": "jpflori"
}
```

Here comes a 5.29.1 spkg at
http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg

It builds and runs and passes most tests in sage/calculus on Linux.
Some tests fails because Maxima adds ? in some strings in calculus.py.



---

archive/issue_comments_161077.json:
```json
{
    "body": "Your spkg diff for the readme says that you removed a patch, but I don't see that in the diff.  But we track the patches directory, right?",
    "created_at": "2012-12-14T18:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161077",
    "user": "@kcrisman"
}
```

Your spkg diff for the readme says that you removed a patch, but I don't see that in the diff.  But we track the patches directory, right?



---

archive/issue_comments_161078.json:
```json
{
    "body": "Yup, I forgot to run hg addremove.",
    "created_at": "2012-12-14T18:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161078",
    "user": "jpflori"
}
```

Yup, I forgot to run hg addremove.



---

archive/issue_comments_161079.json:
```json
{
    "body": "It also seems Maxima does not integrate sqrt(x + sqrt(x)) anymore, maybe that needs assumptions which were incorectly assumed before, don't want to think about that now.",
    "created_at": "2012-12-14T19:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161079",
    "user": "jpflori"
}
```

It also seems Maxima does not integrate sqrt(x + sqrt(x)) anymore, maybe that needs assumptions which were incorectly assumed before, don't want to think about that now.



---

archive/issue_comments_161080.json:
```json
{
    "body": "Yes, don't worry about this now, as Fran\u00e7ois has put a lot of time into cataloguing things anyway on some sage-devel discussion a while ago.",
    "created_at": "2012-12-14T19:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161080",
    "user": "@kcrisman"
}
```

Yes, don't worry about this now, as François has put a lot of time into cataloguing things anyway on some sage-devel discussion a while ago.



---

archive/issue_comments_161081.json:
```json
{
    "body": "Could you provide a link to that discussion?",
    "created_at": "2012-12-14T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161081",
    "user": "jpflori"
}
```

Could you provide a link to that discussion?



---

archive/issue_comments_161082.json:
```json
{
    "body": "No, it's too old, I'm not sure how to find it.  It wasn't part of a thread only about this, I think.  Fran\u00e7ois, do you remember?",
    "created_at": "2012-12-14T20:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161082",
    "user": "@kcrisman"
}
```

No, it's too old, I'm not sure how to find it.  It wasn't part of a thread only about this, I think.  François, do you remember?



---

archive/issue_comments_161083.json:
```json
{
    "body": "Haven't tried 5.29.1 only 5.28 after it came out. I remember that a number of function now require an extra argument (an assumption) as you have found out. But I haven't looked at it in a long time. I'll check what I can find.",
    "created_at": "2012-12-14T23:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161083",
    "user": "@kiwifb"
}
```

Haven't tried 5.29.1 only 5.28 after it came out. I remember that a number of function now require an extra argument (an assumption) as you have found out. But I haven't looked at it in a long time. I'll check what I can find.



---

archive/issue_comments_161084.json:
```json
{
    "body": "Actually I haven't done a report on upgrade that break things badly for a little while. You may remember a report from a long time ago. I don't have as much time to write those these days.",
    "created_at": "2012-12-14T23:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161084",
    "user": "@kiwifb"
}
```

Actually I haven't done a report on upgrade that break things badly for a little while. You may remember a report from a long time ago. I don't have as much time to write those these days.



---

archive/issue_comments_161085.json:
```json
{
    "body": "Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\n\n```\nsage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n```\n\nProbably ecl/maxima rather than pure maxima it goes in a panic\n\n```\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n```\n\nfor quite a bit before getting killed. The other interesting bits:\n\n```\nsage -t -long \"devel/sage-main/sage/interfaces/maxima_abstract.py\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 422:\n    sage: maxima.version()\nExpected:\n    '5.26.0'\nGot:\n    '5.29.1'\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 2354:\n    sage: maxima_version()\nExpected:\n    '5.26.0'\nGot:\n    '5.29.1'\n**********************************************************************\n2 items had failures:\n   1 of   4 in __main__.example_13\n   1 of   5 in __main__.example_84\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py\n         [7.4 s]\nsage -t -long \"devel/sage-main/sage/interfaces/maxima_lib.py\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 716:\n    sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()\nExpected:\n    1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))\nGot:\n    integrate(sqrt(x + sqrt(x)), x)\n#0: simplify_sum(expr='sum(q^k,k,0,inf))\n#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 819:\n    sage: limit(x^a,x=0)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Computation failed since Maxima requested additional\n    constraints; using the 'assume' command before limit evaluation\n    *may* help (see `assume?` for more details)\n    Is a an integer?\nGot:\n    Traceback (most recent call last):\n      File \"/usr/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_26[9]>\", line 1, in <module>\n        limit(x**a,x=Integer(0))###line 819:\n    sage: limit(x^a,x=0)\n      File \"/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py\", line 1188, in limit\n        l = maxima.sr_limit(ex, v, a)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py\", line 856, in sr_limit\n        raise ValueError, \"Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\\n\" + s\n    ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n    Is a an ?integer?\n**********************************************************************\n2 items had failures:\n   1 of  25 in __main__.example_24\n   1 of  19 in __main__.example_26\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py\n         [4.0 s]\n```\n\nit is not as bad as I remember but it is just pinpointing on some obvious tests right now.",
    "created_at": "2012-12-15T10:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161085",
    "user": "@kiwifb"
}
```

Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty

```
sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
```

Probably ecl/maxima rather than pure maxima it goes in a panic

```
;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;

```

for quite a bit before getting killed. The other interesting bits:

```
sage -t -long "devel/sage-main/sage/interfaces/maxima_abstract.py"
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 422:
    sage: maxima.version()
Expected:
    '5.26.0'
Got:
    '5.29.1'
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 2354:
    sage: maxima_version()
Expected:
    '5.26.0'
Got:
    '5.29.1'
**********************************************************************
2 items had failures:
   1 of   4 in __main__.example_13
   1 of   5 in __main__.example_84
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py
         [7.4 s]
sage -t -long "devel/sage-main/sage/interfaces/maxima_lib.py"
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 716:
    sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()
Expected:
    1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))
Got:
    integrate(sqrt(x + sqrt(x)), x)
#0: simplify_sum(expr='sum(q^k,k,0,inf))
#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 819:
    sage: limit(x^a,x=0)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Computation failed since Maxima requested additional
    constraints; using the 'assume' command before limit evaluation
    *may* help (see `assume?` for more details)
    Is a an integer?
Got:
    Traceback (most recent call last):
      File "/usr/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_26[9]>", line 1, in <module>
        limit(x**a,x=Integer(0))###line 819:
    sage: limit(x^a,x=0)
      File "/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py", line 1188, in limit
        l = maxima.sr_limit(ex, v, a)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 856, in sr_limit
        raise ValueError, "Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n" + s
    ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)
    Is a an ?integer?
**********************************************************************
2 items had failures:
   1 of  25 in __main__.example_24
   1 of  19 in __main__.example_26
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py
         [4.0 s]
```

it is not as bad as I remember but it is just pinpointing on some obvious tests right now.



---

archive/issue_comments_161086.json:
```json
{
    "body": "Replying to [comment:17 fbissey]:\n> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\nYup 12.12.1 plus 5.29.1.\nAbout the name changes I mentioned here and on #13324, I got upstream confimation it was expected and is not a problem, see\nhttp://sourceforge.net/mailarchive/message.php?msg_id=30232028\n\nI'd prefer to postpone Unicode and deal with it in let's say #12985, unless it is really trivial. \n> {{{\n> sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> }}}\n> Probably ecl/maxima rather than pure maxima it goes in a panic\n> {{{\n> ;;;\n> ;;; Stack overflow.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> }}}\nNice, I did not get that one though.\n> for quite a bit before getting killed. The other interesting bits:\n> {{{\n> sage -t -long \"devel/sage-main/sage/interfaces/maxima_abstract.py\"\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 422:\n>     sage: maxima.version()\n> Expected:\n>     '5.26.0'\n> Got:\n>     '5.29.1'\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 2354:\n>     sage: maxima_version()\n> Expected:\n>     '5.26.0'\n> Got:\n>     '5.29.1'\n> **********************************************************************\n> 2 items had failures:\n>    1 of   4 in __main__.example_13\n>    1 of   5 in __main__.example_84\n> ***Test Failed*** 2 failures.\n> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py\n>          [7.4 s]\n> sage -t -long \"devel/sage-main/sage/interfaces/maxima_lib.py\"\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 716:\n>     sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()\n> Expected:\n>     1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))\n> Got:\n>     integrate(sqrt(x + sqrt(x)), x)\n> #0: simplify_sum(expr='sum(q^k,k,0,inf))\n> #1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 819:\n>     sage: limit(x^a,x=0)\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     ValueError: Computation failed since Maxima requested additional\n>     constraints; using the 'assume' command before limit evaluation\n>     *may* help (see `assume?` for more details)\n>     Is a an integer?\n> Got:\n>     Traceback (most recent call last):\n>       File \"/usr/bin/ncadoctest.py\", line 1231, in run_one_test\n>         self.run_one_example(test, example, filename, compileflags)\n>       File \"/usr/bin/sagedoctest.py\", line 38, in run_one_example\n>         OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n>       File \"/usr/bin/ncadoctest.py\", line 1172, in run_one_example\n>         compileflags, 1) in test.globs\n>       File \"<doctest __main__.example_26[9]>\", line 1, in <module>\n>         limit(x**a,x=Integer(0))###line 819:\n>     sage: limit(x^a,x=0)\n>       File \"/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py\", line 1188, in limit\n>         l = maxima.sr_limit(ex, v, a)\n>       File \"/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py\", line 856, in sr_limit\n>         raise ValueError, \"Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\\n\" + s\n>     ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n>     Is a an ?integer?\n> **********************************************************************\n> 2 items had failures:\n>    1 of  25 in __main__.example_24\n>    1 of  19 in __main__.example_26\n> ***Test Failed*** 2 failures.\n> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py\n>          [4.0 s]\n> }}}\n> it is not as bad as I remember but it is just pinpointing on some obvious tests right now.\n> \nGot these ones and similar in other places.\nEverything looked trivial to fix and consisted in:\n- version number changes,\n- integration which did nothing, surely the assumption stuff we mentioned here,\n- trivial simplification which was not done anymore, maybe a call to simplify could fix these,\n- the strange ? things.",
    "created_at": "2012-12-15T11:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161086",
    "user": "jpflori"
}
```

Replying to [comment:17 fbissey]:
> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty
Yup 12.12.1 plus 5.29.1.
About the name changes I mentioned here and on #13324, I got upstream confimation it was expected and is not a problem, see
http://sourceforge.net/mailarchive/message.php?msg_id=30232028

I'd prefer to postpone Unicode and deal with it in let's say #12985, unless it is really trivial. 
> {{{
> sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> }}}
> Probably ecl/maxima rather than pure maxima it goes in a panic
> {{{
> ;;;
> ;;; Stack overflow.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> }}}
Nice, I did not get that one though.
> for quite a bit before getting killed. The other interesting bits:
> {{{
> sage -t -long "devel/sage-main/sage/interfaces/maxima_abstract.py"
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 422:
>     sage: maxima.version()
> Expected:
>     '5.26.0'
> Got:
>     '5.29.1'
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 2354:
>     sage: maxima_version()
> Expected:
>     '5.26.0'
> Got:
>     '5.29.1'
> **********************************************************************
> 2 items had failures:
>    1 of   4 in __main__.example_13
>    1 of   5 in __main__.example_84
> ***Test Failed*** 2 failures.
> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py
>          [7.4 s]
> sage -t -long "devel/sage-main/sage/interfaces/maxima_lib.py"
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 716:
>     sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()
> Expected:
>     1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))
> Got:
>     integrate(sqrt(x + sqrt(x)), x)
> #0: simplify_sum(expr='sum(q^k,k,0,inf))
> #1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 819:
>     sage: limit(x^a,x=0)
> Expected:
>     Traceback (most recent call last):
>     ...
>     ValueError: Computation failed since Maxima requested additional
>     constraints; using the 'assume' command before limit evaluation
>     *may* help (see `assume?` for more details)
>     Is a an integer?
> Got:
>     Traceback (most recent call last):
>       File "/usr/bin/ncadoctest.py", line 1231, in run_one_test
>         self.run_one_example(test, example, filename, compileflags)
>       File "/usr/bin/sagedoctest.py", line 38, in run_one_example
>         OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
>       File "/usr/bin/ncadoctest.py", line 1172, in run_one_example
>         compileflags, 1) in test.globs
>       File "<doctest __main__.example_26[9]>", line 1, in <module>
>         limit(x**a,x=Integer(0))###line 819:
>     sage: limit(x^a,x=0)
>       File "/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py", line 1188, in limit
>         l = maxima.sr_limit(ex, v, a)
>       File "/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 856, in sr_limit
>         raise ValueError, "Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n" + s
>     ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)
>     Is a an ?integer?
> **********************************************************************
> 2 items had failures:
>    1 of  25 in __main__.example_24
>    1 of  19 in __main__.example_26
> ***Test Failed*** 2 failures.
> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py
>          [4.0 s]
> }}}
> it is not as bad as I remember but it is just pinpointing on some obvious tests right now.
> 
Got these ones and similar in other places.
Everything looked trivial to fix and consisted in:
- version number changes,
- integration which did nothing, surely the assumption stuff we mentioned here,
- trivial simplification which was not done anymore, maybe a call to simplify could fix these,
- the strange ? things.



---

archive/issue_comments_161087.json:
```json
{
    "body": "The Maxima spkg fails to build for me because `makeinfo` is missing... :-)",
    "created_at": "2012-12-15T14:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161087",
    "user": "@nexttime"
}
```

The Maxima spkg fails to build for me because `makeinfo` is missing... :-)



---

archive/issue_comments_161088.json:
```json
{
    "body": "Ok, now the build \"succeeded\", although I get:\n\n```\nNow installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\ncp: cannot stat `maxima.fasb': No such file or directory\n\nreal    18m37.266s\nuser    14m24.494s\nsys     1m52.139s\nSuccessfully installed maxima-5.29.1.p0\n...\n```\n\n\n(I think this was already mentioned on the ECL ticket.  Not sure how the *new* library is supposed to work when it doesn't get installed...)\n\n\n\n\nI also get a couple of new warnings (w.r.t. Maxima 5.26.0 and the old ECL) like\n\n```\n;;; Compiling (DEFUN HAIPART ...).\n;;; Warning:\n;;;   in file clmacs.lisp, position 6071\n;;;   at (DEFUN HAIPART ...)\n;;;   ! Too few arguments for proclaimed function LOGAND\n```\n\n\n(I.e., 164/2 [I think] instances of *\"Too few arguments for proclaimed function LOGAND\"*.)",
    "created_at": "2012-12-15T15:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161088",
    "user": "@nexttime"
}
```

Ok, now the build "succeeded", although I get:

```
Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
cp: cannot stat `maxima.fasb': No such file or directory

real    18m37.266s
user    14m24.494s
sys     1m52.139s
Successfully installed maxima-5.29.1.p0
...
```


(I think this was already mentioned on the ECL ticket.  Not sure how the *new* library is supposed to work when it doesn't get installed...)




I also get a couple of new warnings (w.r.t. Maxima 5.26.0 and the old ECL) like

```
;;; Compiling (DEFUN HAIPART ...).
;;; Warning:
;;;   in file clmacs.lisp, position 6071
;;;   at (DEFUN HAIPART ...)
;;;   ! Too few arguments for proclaimed function LOGAND
```


(I.e., 164/2 [I think] instances of *"Too few arguments for proclaimed function LOGAND"*.)



---

archive/issue_comments_161089.json:
```json
{
    "body": "Replying to [comment:22 leif]:\n> Ok, now the build \"succeeded\", although I get:\n> {{{\n> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> cp: cannot stat `maxima.fasb': No such file or directory\n> }}}\nas far as I understand, the name might have changed, due to asdf changes in ECL.\nIt might be maxima-system.* rather than maxima.*",
    "created_at": "2012-12-15T15:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161089",
    "user": "@dimpase"
}
```

Replying to [comment:22 leif]:
> Ok, now the build "succeeded", although I get:
> {{{
> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> cp: cannot stat `maxima.fasb': No such file or directory
> }}}
as far as I understand, the name might have changed, due to asdf changes in ECL.
It might be maxima-system.* rather than maxima.*



---

archive/issue_comments_161090.json:
```json
{
    "body": "Replying to [comment:22 leif]:\n> Ok, now the build \"succeeded\", although I get:\n> {{{\n> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> cp: cannot stat `maxima.fasb': No such file or directory\n> \n> real    18m37.266s\n> user    14m24.494s\n> sys     1m52.139s\n> Successfully installed maxima-5.29.1.p0\n> ...\n> }}}\n\nThat the build \"succeeded\" despite of the error is due to a subtle bug in `spkg-install`:\n\n```sh\n...\ncheck_error() {\n    if [[ $? -ne 0 ]]; then\n        echo >&2 \"***********************************************************\"\n        echo >&2 \"Error:\" $@\n        echo >&2 \"***********************************************************\"\n        exit 1\n    fi\n}\n\n...\n\necho \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\ncp -f maxima.fasb \"$ECLLIB/maxima.fas\"\ncheck_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n\n...\n```\n\n\nThe exit status (`$?`) tested in `check_error()` is that of ``pwd``, not the one we're interested in, namely that of `cp`.",
    "created_at": "2012-12-15T16:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161090",
    "user": "@nexttime"
}
```

Replying to [comment:22 leif]:
> Ok, now the build "succeeded", although I get:
> {{{
> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> cp: cannot stat `maxima.fasb': No such file or directory
> 
> real    18m37.266s
> user    14m24.494s
> sys     1m52.139s
> Successfully installed maxima-5.29.1.p0
> ...
> }}}

That the build "succeeded" despite of the error is due to a subtle bug in `spkg-install`:

```sh
...
check_error() {
    if [[ $? -ne 0 ]]; then
        echo >&2 "***********************************************************"
        echo >&2 "Error:" $@
        echo >&2 "***********************************************************"
        exit 1
    fi
}

...

echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
cp -f maxima.fasb "$ECLLIB/maxima.fas"
check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."

...
```


The exit status (`$?`) tested in `check_error()` is that of ``pwd``, not the one we're interested in, namely that of `cp`.



---

archive/issue_comments_161091.json:
```json
{
    "body": "Replying to [comment:23 dimpase]:\n> Replying to [comment:22 leif]:\n> > Ok, now the build \"succeeded\", although I get:\n> > {{{\n> > Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> > cp: cannot stat `maxima.fasb': No such file or directory\n> > }}}\n> as far as I understand, the name might have changed, due to asdf changes in ECL.\n> It might be maxima-system.* rather than maxima.*\n\nI do have `$SPKG_BUILD_DIR/src/src/maxima.system.fasb` (i.e., with a period rather than a hyphen).",
    "created_at": "2012-12-15T16:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161091",
    "user": "@nexttime"
}
```

Replying to [comment:23 dimpase]:
> Replying to [comment:22 leif]:
> > Ok, now the build "succeeded", although I get:
> > {{{
> > Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> > cp: cannot stat `maxima.fasb': No such file or directory
> > }}}
> as far as I understand, the name might have changed, due to asdf changes in ECL.
> It might be maxima-system.* rather than maxima.*

I do have `$SPKG_BUILD_DIR/src/src/maxima.system.fasb` (i.e., with a period rather than a hyphen).



---

archive/issue_comments_161092.json:
```json
{
    "body": "The fact that this spkg would not install the maxima library (and the error was undetected) was expected.\nThat is what I meant by \"build with latest ECL\".\nAnd thanks for finding out why the error was undetected!!!\nAnd yes the new library file is the maxima.system.fasb.\nSee\nhttp://sourceforge.net/mailarchive/message.php?msg_id=30232028\nI've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\nWe'll just change the filename in spkg-install.\n\nThe makeinfo thing reminds me of something.\nIt should definitely not be required.\nI think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.",
    "created_at": "2012-12-15T18:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161092",
    "user": "jpflori"
}
```

The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
That is what I meant by "build with latest ECL".
And thanks for finding out why the error was undetected!!!
And yes the new library file is the maxima.system.fasb.
See
http://sourceforge.net/mailarchive/message.php?msg_id=30232028
I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
We'll just change the filename in spkg-install.

The makeinfo thing reminds me of something.
It should definitely not be required.
I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.



---

archive/issue_comments_161093.json:
```json
{
    "body": "Replying to [comment:26 jpflori]:\n> The fact that this spkg would not install the maxima library (and the error was undetected) was expected.\n> That is what I meant by \"build with latest ECL\".\n\n? \n\n> And thanks for finding out why the error was undetected!!!\n> And yes the new library file is the maxima.system.fasb.\n> See\n> http://sourceforge.net/mailarchive/message.php?msg_id=30232028\n> I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\n> We'll just change the filename in spkg-install.\n\nI just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)\n\nOr should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?\n\n\n\n\n> The makeinfo thing reminds me of something.\n> It should definitely not be required.\n> I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.\n\nPresumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)\n\nProbably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get \"needless\" questions regarding such on the IRC.)",
    "created_at": "2012-12-15T19:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161093",
    "user": "@nexttime"
}
```

Replying to [comment:26 jpflori]:
> The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
> That is what I meant by "build with latest ECL".

? 

> And thanks for finding out why the error was undetected!!!
> And yes the new library file is the maxima.system.fasb.
> See
> http://sourceforge.net/mailarchive/message.php?msg_id=30232028
> I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
> We'll just change the filename in spkg-install.

I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)

Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?




> The makeinfo thing reminds me of something.
> It should definitely not be required.
> I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.

Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)

Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get "needless" questions regarding such on the IRC.)



---

archive/issue_comments_161094.json:
```json
{
    "body": "Replying to [comment:27 leif]:\n> Replying to [comment:26 jpflori]:\n> > The fact that this spkg would not install the maxima library (and the error was undetected) was expected.\n> > That is what I meant by \"build with latest ECL\".\n> \n> ? \nI mean the fact that the produced file for Maxima in Lisp libary mode is no longer maxima.fasb but maxima.system.fasb and its not because of the updated Maxima, but of the updated ECL.\n> \n> > And thanks for finding out why the error was undetected!!!\n> > And yes the new library file is the maxima.system.fasb.\n> > See\n> > http://sourceforge.net/mailarchive/message.php?msg_id=30232028\n> > I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\n> > We'll just change the filename in spkg-install.\n> \n> I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)\n> \n> Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?\nI thing we keep maxima.fas as the name of the file in the Sage library ($SAGE_???/lib/ecl/).\n\n> \n> \n\n> \n> > The makeinfo thing reminds me of something.\n> > It should definitely not be required.\n> > I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.\n> \n> Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)\n> \n> Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get \"needless\" questions regarding such on the IRC.)\n>   \n>",
    "created_at": "2012-12-15T19:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161094",
    "user": "jpflori"
}
```

Replying to [comment:27 leif]:
> Replying to [comment:26 jpflori]:
> > The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
> > That is what I meant by "build with latest ECL".
> 
> ? 
I mean the fact that the produced file for Maxima in Lisp libary mode is no longer maxima.fasb but maxima.system.fasb and its not because of the updated Maxima, but of the updated ECL.
> 
> > And thanks for finding out why the error was undetected!!!
> > And yes the new library file is the maxima.system.fasb.
> > See
> > http://sourceforge.net/mailarchive/message.php?msg_id=30232028
> > I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
> > We'll just change the filename in spkg-install.
> 
> I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)
> 
> Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?
I thing we keep maxima.fas as the name of the file in the Sage library ($SAGE_???/lib/ecl/).

> 
> 

> 
> > The makeinfo thing reminds me of something.
> > It should definitely not be required.
> > I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.
> 
> Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)
> 
> Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get "needless" questions regarding such on the IRC.)
>   
>



---

archive/issue_comments_161095.json:
```json
{
    "body": "P.S.:  The new Maxima (and/or ECL) seems to [*somehow<sup>TM</sup>*] fix #13831...",
    "created_at": "2012-12-15T20:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161095",
    "user": "@nexttime"
}
```

P.S.:  The new Maxima (and/or ECL) seems to [*somehow<sup>TM</sup>*] fix #13831...



---

archive/issue_comments_161096.json:
```json
{
    "body": "Replying to [comment:21 leif]:\n> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n\nI had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.",
    "created_at": "2012-12-15T20:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161096",
    "user": "@kiwifb"
}
```

Replying to [comment:21 leif]:
> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)

I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.



---

archive/issue_comments_161097.json:
```json
{
    "body": "> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n> \n> I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.\n\nYeah, that sounded familiar to me too.",
    "created_at": "2012-12-16T03:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161097",
    "user": "@kcrisman"
}
```

> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)
> 
> I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.

Yeah, that sounded familiar to me too.



---

archive/issue_comments_161098.json:
```json
{
    "body": "Replying to [comment:17 fbissey]:\n> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\n> {{{\n> sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> }}}\n> Probably ecl/maxima rather than pure maxima it goes in a panic\n> {{{\n> ;;;\n> ;;; Stack overflow.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> }}}\n> for quite a bit before getting killed.\n\nOn Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n\n```\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n```\n\nand finally\n\n```\nSegmentation fault\n\n\t [56.5 s]\n\n...\n\nThe following tests failed:\n\n\tsage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 66.3 seconds\n```\n\n(with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).\n\n\n\n\nP.S.: The *\"kwown\"* is not a copy-paste accident.  Probably some ECL idiom, like ''\"outermost toplevel\"'... ;-)",
    "created_at": "2012-12-16T03:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161098",
    "user": "@nexttime"
}
```

Replying to [comment:17 fbissey]:
> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty
> {{{
> sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> }}}
> Probably ecl/maxima rather than pure maxima it goes in a panic
> {{{
> ;;;
> ;;; Stack overflow.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> }}}
> for quite a bit before getting killed.

On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of

```
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;
```

and finally

```
Segmentation fault

	 [56.5 s]

...

The following tests failed:

	sage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed
----------------------------------------------------------------------
Total time for all tests: 66.3 seconds
```

(with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).




P.S.: The *"kwown"* is not a copy-paste accident.  Probably some ECL idiom, like ''"outermost toplevel"'... ;-)



---

archive/issue_comments_161099.json:
```json
{
    "body": "The other failing doctests seem to be the same you already reported:\n\n```\nThe following tests failed:\n\n        sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed\n        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed\n```\n\n\nNot sure whether you also get\n\n```\nsage -t --long -force_lib devel/sage/sage/functions/exp_integral.py\n**********************************************************************\nFile \"$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py\", line 1074:\n    sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\nExpected:\n    0.125872409703453 + 1.57079632679490*I\nGot:\n    0.125872409703453\n**********************************************************************\n1 items had failures:\n   1 of  18 in __main__.example_31\n***Test Failed*** 1 failures.\n```\n",
    "created_at": "2012-12-16T04:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161099",
    "user": "@nexttime"
}
```

The other failing doctests seem to be the same you already reported:

```
The following tests failed:

        sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed
        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed
```


Not sure whether you also get

```
sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py
**********************************************************************
File "$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py", line 1074:
    sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
Expected:
    0.125872409703453 + 1.57079632679490*I
Got:
    0.125872409703453
**********************************************************************
1 items had failures:
   1 of  18 in __main__.example_31
***Test Failed*** 1 failures.
```




---

archive/issue_comments_161100.json:
```json
{
    "body": "Replying to [comment:32 leif]:\n> Replying to [comment:17 fbissey]:\n> > I have a nasty\n> > {{{\n> > sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> > }}}\n> > Probably ecl/maxima rather than pure maxima it goes in a panic\n> > {{{\n> > ;;;\n> > ;;; Stack overflow.\n> > ;;; Jumping to the outermost toplevel prompt\n> > ;;;\n> > \n> > }}}\n> > for quite a bit before getting killed.\n> \n> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n> {{{\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> }}}\n> and finally\n> {{{\n> Segmentation fault\n> \n> \t [56.5 s]\n> \n> ...\n> \n> The following tests failed:\n> \n> \tsage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed\n> ----------------------------------------------------------------------\n> Total time for all tests: 66.3 seconds\n> }}}\n> (with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).\n\nThe offending test seems to be\n\n```\n...\n\nTrying:\n    f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))\nExpecting nothing\nok\nTrying:\n    integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)\nExpecting:\n    integrate(abs(sin(x)), x, 0, 2*pi)\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n...\n```\n\n(provided the output is in sync, which is not always the case with `-verbose`).",
    "created_at": "2012-12-16T04:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161100",
    "user": "@nexttime"
}
```

Replying to [comment:32 leif]:
> Replying to [comment:17 fbissey]:
> > I have a nasty
> > {{{
> > sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> > }}}
> > Probably ecl/maxima rather than pure maxima it goes in a panic
> > {{{
> > ;;;
> > ;;; Stack overflow.
> > ;;; Jumping to the outermost toplevel prompt
> > ;;;
> > 
> > }}}
> > for quite a bit before getting killed.
> 
> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of
> {{{
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> }}}
> and finally
> {{{
> Segmentation fault
> 
> 	 [56.5 s]
> 
> ...
> 
> The following tests failed:
> 
> 	sage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed
> ----------------------------------------------------------------------
> Total time for all tests: 66.3 seconds
> }}}
> (with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).

The offending test seems to be

```
...

Trying:
    f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))
Expecting nothing
ok
Trying:
    integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)
Expecting:
    integrate(abs(sin(x)), x, 0, 2*pi)
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

...
```

(provided the output is in sync, which is not always the case with `-verbose`).



---

archive/issue_comments_161101.json:
```json
{
    "body": "Replying to [comment:34 leif]:\n> The offending test seems to be\n> {{{\n> ...\n> \n> Trying:\n>     f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))\n> Expecting nothing\n> ok\n> Trying:\n>     integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)\n> Expecting:\n>     integrate(abs(sin(x)), x, 0, 2*pi)\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> ...\n> }}}\n> (provided the output is in sync, which is not always the case with `-verbose`).\n\nYep,\n\n```\nsage: f = abs(sin(x))\nsage: integrate(f, x, 0, 2*pi)\n```\n\nbehaves exactly the same, i.e., the interpreter \"exits\" with a segmentation fault, after thousands of *\"Detected access to protected memory ...\"* messages.\n\n(Sage's own signal handler doesn't get called.)",
    "created_at": "2012-12-16T04:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161101",
    "user": "@nexttime"
}
```

Replying to [comment:34 leif]:
> The offending test seems to be
> {{{
> ...
> 
> Trying:
>     f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))
> Expecting nothing
> ok
> Trying:
>     integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)
> Expecting:
>     integrate(abs(sin(x)), x, 0, 2*pi)
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> ...
> }}}
> (provided the output is in sync, which is not always the case with `-verbose`).

Yep,

```
sage: f = abs(sin(x))
sage: integrate(f, x, 0, 2*pi)
```

behaves exactly the same, i.e., the interpreter "exits" with a segmentation fault, after thousands of *"Detected access to protected memory ..."* messages.

(Sage's own signal handler doesn't get called.)



---

archive/issue_comments_161102.json:
```json
{
    "body": "P.S.: That's the only test that fails in `.../symbolic/integration/integral.py` (i.e., all other tests pass if I comment it out).",
    "created_at": "2012-12-16T04:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161102",
    "user": "@nexttime"
}
```

P.S.: That's the only test that fails in `.../symbolic/integration/integral.py` (i.e., all other tests pass if I comment it out).



---

archive/issue_comments_161103.json:
```json
{
    "body": "Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.",
    "created_at": "2012-12-16T05:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161103",
    "user": "@kiwifb"
}
```

Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.



---

archive/issue_comments_161104.json:
```json
{
    "body": "Replying to [comment:37 fbissey]:\n> Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n\nWell, using the Maxima library segfaults.\n\nI'm not at all familiar with Maxima, but\n\n```\n\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp ECL 12.12.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(sin(x)),x,0,2*pi);\n                              2 pi\n                             /\n                             [\n(%o1)                        I     abs(sin(x)) dx\n                             ]\n                             /\n                              0\n(%i2) display2d : false$\n\n(%i3) integrate(abs(sin(x)),x,0,2*pi);\n\n(%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n(%i4)\n```\n\n\nFWIW.",
    "created_at": "2012-12-16T06:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161104",
    "user": "@nexttime"
}
```

Replying to [comment:37 fbissey]:
> Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.

Well, using the Maxima library segfaults.

I'm not at all familiar with Maxima, but

```

Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp ECL 12.12.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(sin(x)),x,0,2*pi);
                              2 pi
                             /
                             [
(%o1)                        I     abs(sin(x)) dx
                             ]
                             /
                              0
(%i2) display2d : false$

(%i3) integrate(abs(sin(x)),x,0,2*pi);

(%o3) 'integrate(abs(sin(x)),x,0,2*pi)
(%i4)
```


FWIW.



---

archive/issue_comments_161105.json:
```json
{
    "body": "I tried the spkg, and I needed to modify it as follows \n\n```\ndiff -r 31ff16046f0b spkg-install\n--- a/spkg-install      Fri Dec 14 19:46:53 2012 +0100\n+++ b/spkg-install      Sun Dec 16 15:13:21 2012 +0800\n@@ -110,7 +110,7 @@\n ECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n echo\n echo \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\n-cp -f maxima.fasb \"$ECLLIB/maxima.fas\"\n+cp -f maxima.system.fasb \"$ECLLIB/maxima.fas\"\n check_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n```\n\nto get it installed.\n\nI can confirm the trouble with `integrate(abs(sin(x)))`. It's in the library interface, I reckon.",
    "created_at": "2012-12-16T07:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161105",
    "user": "@dimpase"
}
```

I tried the spkg, and I needed to modify it as follows 

```
diff -r 31ff16046f0b spkg-install
--- a/spkg-install      Fri Dec 14 19:46:53 2012 +0100
+++ b/spkg-install      Sun Dec 16 15:13:21 2012 +0800
@@ -110,7 +110,7 @@
 ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
 echo
 echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
-cp -f maxima.fasb "$ECLLIB/maxima.fas"
+cp -f maxima.system.fasb "$ECLLIB/maxima.fas"
 check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."
```

to get it installed.

I can confirm the trouble with `integrate(abs(sin(x)))`. It's in the library interface, I reckon.



---

archive/issue_comments_161106.json:
```json
{
    "body": "Replying to [comment:32 leif]:\n\n> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n> {{{\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> }}}\nthis comes from ECL, namely, from `handler_fn_prototype` in `src/src/c/unixint.d`.",
    "created_at": "2012-12-16T07:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161106",
    "user": "@dimpase"
}
```

Replying to [comment:32 leif]:

> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of
> {{{
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> }}}
this comes from ECL, namely, from `handler_fn_prototype` in `src/src/c/unixint.d`.



---

archive/issue_comments_161107.json:
```json
{
    "body": "Replying to [comment:38 leif]:\n> Replying to [comment:37 fbissey]:\n> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n> \n> Well, using the Maxima library segfaults.\n> \n> I'm not at all familiar with Maxima, but\n> {{{\n> \n> Maxima 5.29.1 http://maxima.sourceforge.net\n> using Lisp ECL 12.12.1\n> Distributed under the GNU Public License. See the file COPYING.\n> Dedicated to the memory of William Schelter.\n> The function bug_report() provides bug reporting information.\n> (%i1) integrate(abs(sin(x)),x,0,2*pi);\n>                               2 pi\n>                              /\n>                              [\n> (%o1)                        I     abs(sin(x)) dx\n>                              ]\n>                              /\n>                               0\n> (%i2) display2d : false$\n> \n> (%i3) integrate(abs(sin(x)),x,0,2*pi);\n> \n> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n> (%i4)\n> }}}\n> \n> FWIW.\nWhich according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.",
    "created_at": "2012-12-16T09:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161107",
    "user": "@kiwifb"
}
```

Replying to [comment:38 leif]:
> Replying to [comment:37 fbissey]:
> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.
> 
> Well, using the Maxima library segfaults.
> 
> I'm not at all familiar with Maxima, but
> {{{
> 
> Maxima 5.29.1 http://maxima.sourceforge.net
> using Lisp ECL 12.12.1
> Distributed under the GNU Public License. See the file COPYING.
> Dedicated to the memory of William Schelter.
> The function bug_report() provides bug reporting information.
> (%i1) integrate(abs(sin(x)),x,0,2*pi);
>                               2 pi
>                              /
>                              [
> (%o1)                        I     abs(sin(x)) dx
>                              ]
>                              /
>                               0
> (%i2) display2d : false$
> 
> (%i3) integrate(abs(sin(x)),x,0,2*pi);
> 
> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)
> (%i4)
> }}}
> 
> FWIW.
Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.



---

archive/issue_comments_161108.json:
```json
{
    "body": "Replying to [comment:33 leif]:\n> The other failing doctests seem to be the same you already reported:\n> {{{\n> The following tests failed:\n> \n>         sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed\n> }}}\n> \n> Not sure whether you also get\n> {{{\n> sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py\n> **********************************************************************\n> File \"$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py\", line 1074:\n>     sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\n> Expected:\n>     0.125872409703453 + 1.57079632679490*I\n> Got:\n>     0.125872409703453\n> **********************************************************************\n> 1 items had failures:\n>    1 of  18 in __main__.example_31\n> ***Test Failed*** 1 failures.\n> }}}\nI get all of these and that last doctest is actually a good thing<sup>TM</sup> from the file\n\n```\n    Note that due to some problems with the way Maxima handles these\n    expressions, definite integrals can sometimes give unexpected\n    results (typically when using inexact endpoints) due to\n    inconsistent branching::\n\n       sage: integrate(sinh_integral(x), x, 0, 1/2)\n        -cosh(1/2) + 1/2*sinh_integral(1/2) + 1\n        sage: integrate(sinh_integral(x), x, 0, 1/2).n() # correct\n        0.125872409703453\n        sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\n        0.125872409703453 + 1.57079632679490*I\n```\n\nOne problem may be fixed here.",
    "created_at": "2012-12-16T10:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161108",
    "user": "@kiwifb"
}
```

Replying to [comment:33 leif]:
> The other failing doctests seem to be the same you already reported:
> {{{
> The following tests failed:
> 
>         sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed
>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed
> }}}
> 
> Not sure whether you also get
> {{{
> sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py
> **********************************************************************
> File "$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py", line 1074:
>     sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
> Expected:
>     0.125872409703453 + 1.57079632679490*I
> Got:
>     0.125872409703453
> **********************************************************************
> 1 items had failures:
>    1 of  18 in __main__.example_31
> ***Test Failed*** 1 failures.
> }}}
I get all of these and that last doctest is actually a good thing<sup>TM</sup> from the file

```
    Note that due to some problems with the way Maxima handles these
    expressions, definite integrals can sometimes give unexpected
    results (typically when using inexact endpoints) due to
    inconsistent branching::

       sage: integrate(sinh_integral(x), x, 0, 1/2)
        -cosh(1/2) + 1/2*sinh_integral(1/2) + 1
        sage: integrate(sinh_integral(x), x, 0, 1/2).n() # correct
        0.125872409703453
        sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
        0.125872409703453 + 1.57079632679490*I
```

One problem may be fixed here.



---

archive/issue_comments_161109.json:
```json
{
    "body": "Replying to [comment:21 leif]:\n> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\nDo you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.",
    "created_at": "2012-12-16T10:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161109",
    "user": "@kiwifb"
}
```

Replying to [comment:21 leif]:
> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)
Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.



---

archive/issue_comments_161110.json:
```json
{
    "body": "Replying to [comment:41 fbissey]:\n[...]\n\n> Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.\n\n\nI checked that the new ECL is (probably) not guilty, as this example with Maxima 5.26.0 works as expected.",
    "created_at": "2012-12-16T12:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161110",
    "user": "@dimpase"
}
```

Replying to [comment:41 fbissey]:
[...]

> Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.


I checked that the new ECL is (probably) not guilty, as this example with Maxima 5.26.0 works as expected.



---

archive/issue_comments_161111.json:
```json
{
    "body": "Replying to [comment:43 fbissey]:\n> Replying to [comment:21 leif]:\n> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n> Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.\n\nWell, if you **like to**... -- Have fun, it's [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/maxima-5.29.1.p0.failed_build-makeinfo_missing.log).",
    "created_at": "2012-12-16T14:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161111",
    "user": "@nexttime"
}
```

Replying to [comment:43 fbissey]:
> Replying to [comment:21 leif]:
> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)
> Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.

Well, if you **like to**... -- Have fun, it's [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/maxima-5.29.1.p0.failed_build-makeinfo_missing.log).



---

archive/issue_comments_161112.json:
```json
{
    "body": "Hmmm, I was probably quicker (but I'm leaving it up to you to fix this! :-) ):\n\n\n```sh\n\n# Touching html and info files to avoid to regenerate them.\n# This must be done after configuration since the timestamps need\n# to be later than include-maxima.texi which is generated at\n# configuration time:\nfor i in doc/info/*.html ; do\n    touch \"${i}\"\ndone\ntouch doc/info/maxima.info*\n\n```\n\n\n\n```\n...\nconfig.status: creating doc/info/Makefile\nconfig.status: creating doc/info/include-maxima.texi\nconfig.status: creating doc/info/de/Makefile\n...\n```\n\n\n(The TeXinfo file is created twice, since `config.status` gets run when *building* Maxima as well.)\n\n\n\n\nThere are also\n\n```\nmaxima-5.29.1.p0/src/interfaces/xmaxima/doc/xmaxima.info\nmaxima-5.29.1.p0/src/interfaces/emacs/imaxima/imaxima.info\n```\n\nso we should perhaps use\n\n```sh\ntouch `find doc/info -name \\*.info\\*`\n```\n\nor\n\n```sh\nfind doc/info -name \\*.info\\* -exec touch {} \\;\n```\n\n\nUsing `-name \\*.info\\* -o -name \\*.html` in a single statement (instead of the `for`-loop) would also make sense.",
    "created_at": "2012-12-16T14:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161112",
    "user": "@nexttime"
}
```

Hmmm, I was probably quicker (but I'm leaving it up to you to fix this! :-) ):


```sh

# Touching html and info files to avoid to regenerate them.
# This must be done after configuration since the timestamps need
# to be later than include-maxima.texi which is generated at
# configuration time:
for i in doc/info/*.html ; do
    touch "${i}"
done
touch doc/info/maxima.info*

```



```
...
config.status: creating doc/info/Makefile
config.status: creating doc/info/include-maxima.texi
config.status: creating doc/info/de/Makefile
...
```


(The TeXinfo file is created twice, since `config.status` gets run when *building* Maxima as well.)




There are also

```
maxima-5.29.1.p0/src/interfaces/xmaxima/doc/xmaxima.info
maxima-5.29.1.p0/src/interfaces/emacs/imaxima/imaxima.info
```

so we should perhaps use

```sh
touch `find doc/info -name \*.info\*`
```

or

```sh
find doc/info -name \*.info\* -exec touch {} \;
```


Using `-name \*.info\* -o -name \*.html` in a single statement (instead of the `for`-loop) would also make sense.



---

archive/issue_comments_161113.json:
```json
{
    "body": "P.S.:  Now that I've *read* the comment in `spkg-install`...  We probably have to \"patch\" `config.status` after configuring Maxima, to avoid \"recreation\" of the TeXinfo file.",
    "created_at": "2012-12-16T14:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161113",
    "user": "@nexttime"
}
```

P.S.:  Now that I've *read* the comment in `spkg-install`...  We probably have to "patch" `config.status` after configuring Maxima, to avoid "recreation" of the TeXinfo file.



---

archive/issue_comments_161114.json:
```json
{
    "body": "Back to integration:\n\nDid anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n\n```\nsage: integrate(abs(cos(x)),x,0,pi)\n-1\nsage: integrate(abs(cos(x)),x,0,2*pi)\n0\nsage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n-2\n```\n\n\nUnless I'm missing something...",
    "created_at": "2012-12-16T18:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161114",
    "user": "@nexttime"
}
```

Back to integration:

Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:

```
sage: integrate(abs(cos(x)),x,0,pi)
-1
sage: integrate(abs(cos(x)),x,0,2*pi)
0
sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
-2
```


Unless I'm missing something...



---

archive/issue_comments_161115.json:
```json
{
    "body": "Replying to [comment:48 leif]:\n> Back to integration:\n> \n> Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> {{{\n> sage: integrate(abs(cos(x)),x,0,pi)\n> -1\n> sage: integrate(abs(cos(x)),x,0,2*pi)\n> 0\n> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> -2\n> }}}\n> \n> Unless I'm missing something...\n\nJust noticed Sage 5.4 gives the same results.",
    "created_at": "2012-12-16T18:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161115",
    "user": "@nexttime"
}
```

Replying to [comment:48 leif]:
> Back to integration:
> 
> Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> {{{
> sage: integrate(abs(cos(x)),x,0,pi)
> -1
> sage: integrate(abs(cos(x)),x,0,2*pi)
> 0
> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> -2
> }}}
> 
> Unless I'm missing something...

Just noticed Sage 5.4 gives the same results.



---

archive/issue_comments_161116.json:
```json
{
    "body": "Replying to [comment:49 leif]:\n> Replying to [comment:48 leif]:\n> > Back to integration:\n> > \n> > Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> > {{{\n> > sage: integrate(abs(cos(x)),x,0,pi)\n> > -1\n> > sage: integrate(abs(cos(x)),x,0,2*pi)\n> > 0\n> > sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> > -2\n> > }}}\n> > \n> > Unless I'm missing something...\n> \n> Just noticed Sage 5.4 gives the same results.\n\nIn contrast:\n\n```\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: integrate(abs(sin(x)),x,0,2*pi)\n0\nsage: integrate(abs(cos(x)),x,0,2*pi)\nintegrate(abs(cos(x)), x, 0, 2*pi)\nsage: integrate(abs(cos(x)),x,0,pi)\nintegrate(abs(cos(x)), x, 0, pi)\nsage: integrate(abs(cos(x)),x,1/2*pi,3/2*pi)\nintegrate(abs(cos(x)), x, 1/2*pi, 3/2*pi)\n```\n\n(Same for Sage 4.8.)",
    "created_at": "2012-12-16T18:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161116",
    "user": "@nexttime"
}
```

Replying to [comment:49 leif]:
> Replying to [comment:48 leif]:
> > Back to integration:
> > 
> > Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> > {{{
> > sage: integrate(abs(cos(x)),x,0,pi)
> > -1
> > sage: integrate(abs(cos(x)),x,0,2*pi)
> > 0
> > sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> > -2
> > }}}
> > 
> > Unless I'm missing something...
> 
> Just noticed Sage 5.4 gives the same results.

In contrast:

```
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: integrate(abs(sin(x)),x,0,2*pi)
0
sage: integrate(abs(cos(x)),x,0,2*pi)
integrate(abs(cos(x)), x, 0, 2*pi)
sage: integrate(abs(cos(x)),x,0,pi)
integrate(abs(cos(x)), x, 0, pi)
sage: integrate(abs(cos(x)),x,1/2*pi,3/2*pi)
integrate(abs(cos(x)), x, 1/2*pi, 3/2*pi)
```

(Same for Sage 4.8.)



---

archive/issue_comments_161117.json:
```json
{
    "body": "Replying to [comment:48 leif]:\n> Back to integration:\n> \n> Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> {{{\n> sage: integrate(abs(cos(x)),x,0,pi)\n> -1\n> sage: integrate(abs(cos(x)),x,0,2*pi)\n> 0\n> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> -2\n> }}}\n> \n> Unless I'm missing something...\n\nsame for 5.1. So I suppose this is a bug in Maxima 5.26, which remained in 5.29. Oh dear. Both 5.26 and 5.29 give the following nonsense:\n\n```\nsage: from sage.symbolic.integration.external import maxima_integrator\nsage: g(x)=maxima_integrator(abs(cos(x)), x); g(x)\n-((2*sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) - 1)*sgn(sin(x)/(cos(x) + 1) - 1) - 2)*sgn(sin(x)/(cos(x) + 1) + 1)\nsage: g(0)                                                            \n1\nsage: g.limit(x=pi)\nx |--> 0\n```\n\nThis, indeed, one gets -1...\n\nthey also both \"can\" compute maxima_integrator(abs(sin(x)), x)...\n\n```\nsage: g(x)=maxima_integrator(abs(sin(x)), x); g(x)\n-(2*sin(x)*arctan(sin(x)/(cos(x) + 1))/(cos(x) + 1) - log(2))*sgn(1/(cos(x) + 1))*sgn(sin(x)) + log(sin(x)^2/(cos(x) + 1)^2 + 1)*sgn(1/(cos(x) + 1))*sgn(sin(x)) - log(2*sin(x)^2/(cos(x) + 1)^2 + 2)*sgn(1/(cos(x) + 1))*sgn(sin(x)) + 2*(sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) + arctan(sin(x)/(cos(x) + 1)))*abs(sin(x))/abs(cos(x) + 1)\nsage: g(0)\n0\n```\n",
    "created_at": "2012-12-17T04:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161117",
    "user": "@dimpase"
}
```

Replying to [comment:48 leif]:
> Back to integration:
> 
> Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> {{{
> sage: integrate(abs(cos(x)),x,0,pi)
> -1
> sage: integrate(abs(cos(x)),x,0,2*pi)
> 0
> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> -2
> }}}
> 
> Unless I'm missing something...

same for 5.1. So I suppose this is a bug in Maxima 5.26, which remained in 5.29. Oh dear. Both 5.26 and 5.29 give the following nonsense:

```
sage: from sage.symbolic.integration.external import maxima_integrator
sage: g(x)=maxima_integrator(abs(cos(x)), x); g(x)
-((2*sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) - 1)*sgn(sin(x)/(cos(x) + 1) - 1) - 2)*sgn(sin(x)/(cos(x) + 1) + 1)
sage: g(0)                                                            
1
sage: g.limit(x=pi)
x |--> 0
```

This, indeed, one gets -1...

they also both "can" compute maxima_integrator(abs(sin(x)), x)...

```
sage: g(x)=maxima_integrator(abs(sin(x)), x); g(x)
-(2*sin(x)*arctan(sin(x)/(cos(x) + 1))/(cos(x) + 1) - log(2))*sgn(1/(cos(x) + 1))*sgn(sin(x)) + log(sin(x)^2/(cos(x) + 1)^2 + 1)*sgn(1/(cos(x) + 1))*sgn(sin(x)) - log(2*sin(x)^2/(cos(x) + 1)^2 + 2)*sgn(1/(cos(x) + 1))*sgn(sin(x)) + 2*(sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) + arctan(sin(x)/(cos(x) + 1)))*abs(sin(x))/abs(cos(x) + 1)
sage: g(0)
0
```




---

archive/issue_comments_161118.json:
```json
{
    "body": "see http://trac.sagemath.org/sage_trac/ticket/11483#comment:12 (this is where maxima's abs_integrate was added, to Sage 5.0).",
    "created_at": "2012-12-17T06:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161118",
    "user": "@dimpase"
}
```

see http://trac.sagemath.org/sage_trac/ticket/11483#comment:12 (this is where maxima's abs_integrate was added, to Sage 5.0).



---

archive/issue_comments_161119.json:
```json
{
    "body": "Replying to [comment:38 leif]:\n> Replying to [comment:37 fbissey]:\n> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n> \n> Well, using the Maxima library segfaults.\n> \n> I'm not at all familiar with Maxima, but\n> {{{\n> \n> Maxima 5.29.1 http://maxima.sourceforge.net\n> using Lisp ECL 12.12.1\n> Distributed under the GNU Public License. See the file COPYING.\n> Dedicated to the memory of William Schelter.\n> The function bug_report() provides bug reporting information.\n> (%i1) integrate(abs(sin(x)),x,0,2*pi);\n>                               2 pi\n>                              /\n>                              [\n> (%o1)                        I     abs(sin(x)) dx\n>                              ]\n>                              /\n>                               0\n> (%i2) display2d : false$\n> \n> (%i3) integrate(abs(sin(x)),x,0,2*pi);\n> \n> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n> (%i4)\n> }}}\n> \n> FWIW.\nno, you  need to load some stuff, as spelled out at `maxima_lib.py`:\n\n```\ninit_code = ['display2d : false', 'domain : complex', 'keepfloat : true',\n            'load(to_poly_solver)', 'load(simplify_sum)',\n            'load(abs_integrate)']\n```\n\nIn maxima, you type in\n\n```\ndisplay2d : false;\ndomain : complex;\nkeepfloat : true;\nload(to_poly_solver);\nload(simplify_sum);\nload(abs_integrate);\nintegrate(abs(sin(x)),x);\n```\n\nto get a symbolic answer. It's weird that the definite integral does not get computed, perhaps due to an uncaught error...",
    "created_at": "2012-12-17T08:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161119",
    "user": "@dimpase"
}
```

Replying to [comment:38 leif]:
> Replying to [comment:37 fbissey]:
> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.
> 
> Well, using the Maxima library segfaults.
> 
> I'm not at all familiar with Maxima, but
> {{{
> 
> Maxima 5.29.1 http://maxima.sourceforge.net
> using Lisp ECL 12.12.1
> Distributed under the GNU Public License. See the file COPYING.
> Dedicated to the memory of William Schelter.
> The function bug_report() provides bug reporting information.
> (%i1) integrate(abs(sin(x)),x,0,2*pi);
>                               2 pi
>                              /
>                              [
> (%o1)                        I     abs(sin(x)) dx
>                              ]
>                              /
>                               0
> (%i2) display2d : false$
> 
> (%i3) integrate(abs(sin(x)),x,0,2*pi);
> 
> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)
> (%i4)
> }}}
> 
> FWIW.
no, you  need to load some stuff, as spelled out at `maxima_lib.py`:

```
init_code = ['display2d : false', 'domain : complex', 'keepfloat : true',
            'load(to_poly_solver)', 'load(simplify_sum)',
            'load(abs_integrate)']
```

In maxima, you type in

```
display2d : false;
domain : complex;
keepfloat : true;
load(to_poly_solver);
load(simplify_sum);
load(abs_integrate);
integrate(abs(sin(x)),x);
```

to get a symbolic answer. It's weird that the definite integral does not get computed, perhaps due to an uncaught error...



---

archive/issue_comments_161120.json:
```json
{
    "body": "An uncaught error?\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) display2d : false;\n(%o1) false\n(%i2)  domain : complex;\n(%o2) complex\n(%i3)  keepfloat : true;\n(%o3) true\n(%i4)  load(to_poly_solver);\nto_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.\nLoading maxima-grobner $Revision: 1.6 $ $Date: 2009-06-02 07:49:49 $\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o4) \"/usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solver.mac\"\n(%i5)  load(simplify_sum);\n(%o5) \"/usr/share/maxima/5.29.1/share/solve_rec/simplify_sum.mac\"\n(%i6)  load(abs_integrate);\n(%o6) \"/usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\"\n(%i7)  integrate(abs(sin(x)),x);\n(%o7) 4*(abs(sin(x))*(atan(sin(x)/(cos(x)+1))/2\n                     +sin(x)/((cos(x)+1)*(2*sin(x)^2/(cos(x)+1)^2+2)))\n        /abs(cos(x)+1)\n        -(signum(1/(cos(x)+1))*signum(sin(x))*log(2*sin(x)^2/(cos(x)+1)^2+2)\n         -signum(1/(cos(x)+1))*signum(sin(x))*log(sin(x)^2/(cos(x)+1)^2+1)\n         +signum(1/(cos(x)+1))*signum(sin(x))\n                              *(2*sin(x)*atan(sin(x)/(cos(x)+1))/(cos(x)+1)\n                               -log(2)))\n         /4)\n(%i8)\n```\n\nDo you think that could be that obsolete module?",
    "created_at": "2012-12-17T08:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161120",
    "user": "@kiwifb"
}
```

An uncaught error?

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) display2d : false;
(%o1) false
(%i2)  domain : complex;
(%o2) complex
(%i3)  keepfloat : true;
(%o3) true
(%i4)  load(to_poly_solver);
to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.
Loading maxima-grobner $Revision: 1.6 $ $Date: 2009-06-02 07:49:49 $
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o4) "/usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solver.mac"
(%i5)  load(simplify_sum);
(%o5) "/usr/share/maxima/5.29.1/share/solve_rec/simplify_sum.mac"
(%i6)  load(abs_integrate);
(%o6) "/usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac"
(%i7)  integrate(abs(sin(x)),x);
(%o7) 4*(abs(sin(x))*(atan(sin(x)/(cos(x)+1))/2
                     +sin(x)/((cos(x)+1)*(2*sin(x)^2/(cos(x)+1)^2+2)))
        /abs(cos(x)+1)
        -(signum(1/(cos(x)+1))*signum(sin(x))*log(2*sin(x)^2/(cos(x)+1)^2+2)
         -signum(1/(cos(x)+1))*signum(sin(x))*log(sin(x)^2/(cos(x)+1)^2+1)
         +signum(1/(cos(x)+1))*signum(sin(x))
                              *(2*sin(x)*atan(sin(x)/(cos(x)+1))/(cos(x)+1)
                               -log(2)))
         /4)
(%i8)
```

Do you think that could be that obsolete module?



---

archive/issue_comments_161121.json:
```json
{
    "body": "Replying to [comment:54 fbissey]:\n> Do you think that could be that obsolete module?\nno, it does not matter. It suffices to load abs_integrate only.\nActually, then I can reproduce \n\n```\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n```\n\nfrom within maxima (so no, the library interface does not matter!) if I try \n\n```\nintegrate(abs(sin(x)),x,0,2*%pi);\n```\n\nWhat will you get with the CLISP-based maxima here? \n\nIf I try the same on 5.26.0 (from Sage 5.5.rc0 on OSX 10.6.8) , I don't get a segfault; I just get back an unevaluated integral, if I try definite integral, and I get the same (wrong) symbolic expression for the indefinite integral.",
    "created_at": "2012-12-17T08:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161121",
    "user": "@dimpase"
}
```

Replying to [comment:54 fbissey]:
> Do you think that could be that obsolete module?
no, it does not matter. It suffices to load abs_integrate only.
Actually, then I can reproduce 

```
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;
```

from within maxima (so no, the library interface does not matter!) if I try 

```
integrate(abs(sin(x)),x,0,2*%pi);
```

What will you get with the CLISP-based maxima here? 

If I try the same on 5.26.0 (from Sage 5.5.rc0 on OSX 10.6.8) , I don't get a segfault; I just get back an unevaluated integral, if I try definite integral, and I get the same (wrong) symbolic expression for the indefinite integral.



---

archive/issue_comments_161122.json:
```json
{
    "body": "Do you mean doing this?\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x);\n                             sin(x)\n                      atan(----------)\n                           cos(x) + 1                 sin(x)\n         abs(sin(x)) (---------------- + --------------------------------)\n                             2                                2\n                                                         2 sin (x)\n                                         (cos(x) + 1) (------------- + 2)\n                                                                   2\n                                                       (cos(x) + 1)\n(%o2) 4 (-----------------------------------------------------------------\n                                  abs(cos(x) + 1)\n                                                 2\n               1                            2 sin (x)\n - (signum(----------) signum(sin(x)) log(------------- + 2)\n           cos(x) + 1                                 2\n                                          (cos(x) + 1)\n                                               2\n              1                             sin (x)\n - signum(----------) signum(sin(x)) log(------------- + 1)\n          cos(x) + 1                                 2\n                                         (cos(x) + 1)\n                                                      sin(x)\n                                      2 sin(x) atan(----------)\n              1                                     cos(x) + 1\n + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)\n          cos(x) + 1                         cos(x) + 1\n(%i3)\n```\n",
    "created_at": "2012-12-17T08:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161122",
    "user": "@kiwifb"
}
```

Do you mean doing this?

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x);
                             sin(x)
                      atan(----------)
                           cos(x) + 1                 sin(x)
         abs(sin(x)) (---------------- + --------------------------------)
                             2                                2
                                                         2 sin (x)
                                         (cos(x) + 1) (------------- + 2)
                                                                   2
                                                       (cos(x) + 1)
(%o2) 4 (-----------------------------------------------------------------
                                  abs(cos(x) + 1)
                                                 2
               1                            2 sin (x)
 - (signum(----------) signum(sin(x)) log(------------- + 2)
           cos(x) + 1                                 2
                                          (cos(x) + 1)
                                               2
              1                             sin (x)
 - signum(----------) signum(sin(x)) log(------------- + 1)
          cos(x) + 1                                 2
                                         (cos(x) + 1)
                                                      sin(x)
                                      2 sin(x) atan(----------)
              1                                     cos(x) + 1
 + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)
          cos(x) + 1                         cos(x) + 1
(%i3)
```




---

archive/issue_comments_161123.json:
```json
{
    "body": "And i get the same thing with ecl in fact (all system maxima):\n\n```\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/sb-bsd-sockets.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/sockets.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/defsystem.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/cmp.fas\"\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp ECL 12.12.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x);\n                             sin(x)\n                      atan(----------)\n                           cos(x) + 1                 sin(x)\n         abs(sin(x)) (---------------- + --------------------------------)\n                             2                                2\n                                                         2 sin (x)\n                                         (cos(x) + 1) (------------- + 2)\n                                                                   2\n                                                       (cos(x) + 1)\n(%o2) 4 (-----------------------------------------------------------------\n                                  abs(cos(x) + 1)\n                                                 2\n               1                            2 sin (x)\n - (signum(----------) signum(sin(x)) log(------------- + 2)\n           cos(x) + 1                                 2\n                                          (cos(x) + 1)\n                                               2\n              1                             sin (x)\n - signum(----------) signum(sin(x)) log(------------- + 1)\n          cos(x) + 1                                 2\n                                         (cos(x) + 1)\n                                                      sin(x)\n                                      2 sin(x) atan(----------)\n              1                                     cos(x) + 1\n + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)\n          cos(x) + 1                         cos(x) + 1\n(%i3)\n```\n",
    "created_at": "2012-12-17T09:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161123",
    "user": "@kiwifb"
}
```

And i get the same thing with ecl in fact (all system maxima):

```
;;; Loading #P"/usr/lib64/ecl-12.12.1/sb-bsd-sockets.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/sockets.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/defsystem.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/cmp.fas"
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp ECL 12.12.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x);
                             sin(x)
                      atan(----------)
                           cos(x) + 1                 sin(x)
         abs(sin(x)) (---------------- + --------------------------------)
                             2                                2
                                                         2 sin (x)
                                         (cos(x) + 1) (------------- + 2)
                                                                   2
                                                       (cos(x) + 1)
(%o2) 4 (-----------------------------------------------------------------
                                  abs(cos(x) + 1)
                                                 2
               1                            2 sin (x)
 - (signum(----------) signum(sin(x)) log(------------- + 2)
           cos(x) + 1                                 2
                                          (cos(x) + 1)
                                               2
              1                             sin (x)
 - signum(----------) signum(sin(x)) log(------------- + 1)
          cos(x) + 1                                 2
                                         (cos(x) + 1)
                                                      sin(x)
                                      2 sin(x) atan(----------)
              1                                     cos(x) + 1
 + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)
          cos(x) + 1                         cos(x) + 1
(%i3)
```




---

archive/issue_comments_161124.json:
```json
{
    "body": "Replying to [comment:56 fbissey]:\n> Do you mean doing this?\nI meant the definite integral, which causes the segfault for us:\n\n```\nintegrate(abs(sin(x)),x,0,2*%pi);\n```\n",
    "created_at": "2012-12-17T09:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161124",
    "user": "@dimpase"
}
```

Replying to [comment:56 fbissey]:
> Do you mean doing this?
I meant the definite integral, which causes the segfault for us:

```
integrate(abs(sin(x)),x,0,2*%pi);
```




---

archive/issue_comments_161125.json:
```json
{
    "body": "OK didn\u00b4t spot the definite bit, fails also with clisp:\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x,0,2*%pi);\n\n*** - Program stack overflow. RESET\n\n[../src/eval.d:573] reset() found no driver frame (sp=0x7fff1606f430-0x7fff160690b0)\nExiting on signal 6\nAborted\n```\n",
    "created_at": "2012-12-17T09:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161125",
    "user": "@kiwifb"
}
```

OK didn´t spot the definite bit, fails also with clisp:

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x,0,2*%pi);

*** - Program stack overflow. RESET

[../src/eval.d:573] reset() found no driver frame (sp=0x7fff1606f430-0x7fff160690b0)
Exiting on signal 6
Aborted
```




---

archive/issue_comments_161126.json:
```json
{
    "body": "Replying to [comment:59 fbissey]:\n> OK didn\u00b4t spot the definite bit, fails also with clisp:\nOK, now we have something to report upstream... The homepage of the author of abs_integrate is [here](http://www.unk.edu/facultyandstaff.aspx?id=669). Perhaps one should at least cc him when reporting. Can you do this?",
    "created_at": "2012-12-17T09:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161126",
    "user": "@dimpase"
}
```

Replying to [comment:59 fbissey]:
> OK didn´t spot the definite bit, fails also with clisp:
OK, now we have something to report upstream... The homepage of the author of abs_integrate is [here](http://www.unk.edu/facultyandstaff.aspx?id=669). Perhaps one should at least cc him when reporting. Can you do this?



---

archive/issue_comments_161127.json:
```json
{
    "body": "I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.",
    "created_at": "2012-12-17T09:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161127",
    "user": "@kiwifb"
}
```

I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.



---

archive/issue_comments_161128.json:
```json
{
    "body": "Replying to [comment:62 fbissey]:\n> I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.\n\nOK, I'll take care of this.",
    "created_at": "2012-12-17T09:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161128",
    "user": "@dimpase"
}
```

Replying to [comment:62 fbissey]:
> I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.

OK, I'll take care of this.



---

archive/issue_comments_161129.json:
```json
{
    "body": "Reported as maxima's bug [2520](https://sourceforge.net/p/maxima/bugs/2520/).",
    "created_at": "2012-12-17T10:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161129",
    "user": "@dimpase"
}
```

Reported as maxima's bug [2520](https://sourceforge.net/p/maxima/bugs/2520/).



---

archive/issue_comments_161130.json:
```json
{
    "body": "I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory and I think this triggers the regeneration of some autocrap and finally lead to running a second time config.status.\n\nI'm reuploading a proper spkg in a few minutes.",
    "created_at": "2012-12-17T10:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161130",
    "user": "jpflori"
}
```

I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory and I think this triggers the regeneration of some autocrap and finally lead to running a second time config.status.

I'm reuploading a proper spkg in a few minutes.



---

archive/issue_comments_161131.json:
```json
{
    "body": "New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.",
    "created_at": "2012-12-17T11:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161131",
    "user": "jpflori"
}
```

New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.



---

archive/issue_comments_161132.json:
```json
{
    "body": "makeinfo is still invoked, too bad.",
    "created_at": "2012-12-17T11:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161132",
    "user": "jpflori"
}
```

makeinfo is still invoked, too bad.



---

archive/issue_comments_161133.json:
```json
{
    "body": "> > I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.\n> \n> OK, I'll take care of this.\nJust for future reference, bug tracker is best, but also putting something on the mailing list as a \"heads up\" doesn't hurt - but my experience is that the mailing list either gets lots of traction or none.",
    "created_at": "2012-12-17T13:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161133",
    "user": "@kcrisman"
}
```

> > I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.
> 
> OK, I'll take care of this.
Just for future reference, bug tracker is best, but also putting something on the mailing list as a "heads up" doesn't hurt - but my experience is that the mailing list either gets lots of traction or none.



---

archive/issue_comments_161134.json:
```json
{
    "body": "> New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.\nThis installed properly on Cygwin on XP.  How do I check whether the library is correct (other than the fact that there is a `local/lib/ecl/maxima.fas`) since #9671 is still unresolved?",
    "created_at": "2012-12-17T15:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161134",
    "user": "@kcrisman"
}
```

> New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.
This installed properly on Cygwin on XP.  How do I check whether the library is correct (other than the fact that there is a `local/lib/ecl/maxima.fas`) since #9671 is still unresolved?



---

archive/issue_comments_161135.json:
```json
{
    "body": "I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).\nThis should not be affected by #9671.",
    "created_at": "2012-12-17T16:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161135",
    "user": "jpflori"
}
```

I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).
This should not be affected by #9671.



---

archive/issue_comments_161136.json:
```json
{
    "body": "Ok, I just copied pasted some of the above find command and modified it and did not think, and what happens is that the *.info* files are not touched.\nSo the fix is easy.",
    "created_at": "2012-12-17T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161136",
    "user": "jpflori"
}
```

Ok, I just copied pasted some of the above find command and modified it and did not think, and what happens is that the *.info* files are not touched.
So the fix is easy.



---

archive/issue_comments_161137.json:
```json
{
    "body": "Replying to [comment:65 jpflori]:\n> I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory\n\nYeah, I also noticed that and made an spkg with \"fresh\" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.\n\nIMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.",
    "created_at": "2012-12-17T16:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161137",
    "user": "@nexttime"
}
```

Replying to [comment:65 jpflori]:
> I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory

Yeah, I also noticed that and made an spkg with "fresh" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.

IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.



---

archive/issue_comments_161138.json:
```json
{
    "body": "With the just uploaded spkg, everything is correctly touched, timestamps are ok and makeinfo is not invoked.\n\nSo I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok.",
    "created_at": "2012-12-17T16:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161138",
    "user": "jpflori"
}
```

With the just uploaded spkg, everything is correctly touched, timestamps are ok and makeinfo is not invoked.

So I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok.



---

archive/issue_comments_161139.json:
```json
{
    "body": "Ok, building Sage 5.5.rc0 from scratch with the ECL and Maxima spkgs replaced, this time with GCC 4.4.3 and without setting any flags, gives exactly the same doctest errors (plus those due to not having applied the patch from #13324), including the famous *access to protected memory* messages.\n\n(Haven't tried or looked at JP's new p0 yet.)",
    "created_at": "2012-12-17T17:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161139",
    "user": "@nexttime"
}
```

Ok, building Sage 5.5.rc0 from scratch with the ECL and Maxima spkgs replaced, this time with GCC 4.4.3 and without setting any flags, gives exactly the same doctest errors (plus those due to not having applied the patch from #13324), including the famous *access to protected memory* messages.

(Haven't tried or looked at JP's new p0 yet.)



---

archive/issue_comments_161140.json:
```json
{
    "body": "Replying to [comment:73 jpflori]:\n> I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok. \n\nWell, presumably we'll never merge a new Maxima without new *known* bugs (although fixing some old ones), probably even regressions, but I feel a bit uncomfortable with *how* symbolic integration (using the Maxima library interface) now fails, since Sage actually *crashes* (without itself catching the segfault).\n\n(Others may say that's better than \"silently\" giving a wrong answer... ;-) )\n\nWe could mark the doctest `# not tested` for now, but who knows where else similar can or will happen.\n\nThoughts?",
    "created_at": "2012-12-17T17:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161140",
    "user": "@nexttime"
}
```

Replying to [comment:73 jpflori]:
> I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok. 

Well, presumably we'll never merge a new Maxima without new *known* bugs (although fixing some old ones), probably even regressions, but I feel a bit uncomfortable with *how* symbolic integration (using the Maxima library interface) now fails, since Sage actually *crashes* (without itself catching the segfault).

(Others may say that's better than "silently" giving a wrong answer... ;-) )

We could mark the doctest `# not tested` for now, but who knows where else similar can or will happen.

Thoughts?



---

archive/issue_comments_161141.json:
```json
{
    "body": "Replying to [comment:54 fbissey]:\n> {{{\n> ...\n> (%i4)  load(to_poly_solver);\n> to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.\n> ...\n> }}}\n\nWe should probably fix that in `sage/interfaces/maxima_lib.py` (in the `init_code` list), perhaps `sage/calculus/calculus.py` (where the code is commented out, and is there for explanation only, apparently), and in a couple of docstrings elsewhere (`sage/symbolic/{expression,relation}.py*`).",
    "created_at": "2012-12-17T18:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161141",
    "user": "@nexttime"
}
```

Replying to [comment:54 fbissey]:
> {{{
> ...
> (%i4)  load(to_poly_solver);
> to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.
> ...
> }}}

We should probably fix that in `sage/interfaces/maxima_lib.py` (in the `init_code` list), perhaps `sage/calculus/calculus.py` (where the code is commented out, and is there for explanation only, apparently), and in a couple of docstrings elsewhere (`sage/symbolic/{expression,relation}.py*`).



---

archive/issue_comments_161142.json:
```json
{
    "body": "Replying to [comment:72 leif]:\n> Replying to [comment:65 jpflori]:\n> > I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory\n> \n> Yeah, I also noticed that and made an spkg with \"fresh\" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.\n> \n> IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.\n\nYes, that fixed the issue.\n\nI used\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -38,14 +38,16 @@\n ./configure --prefix=\"$SAGE_LOCAL\" --libdir=\"$SAGE_LOCAL/lib\" --enable-ecl\n check_error \"Failed to configure Maxima.\"\n\n+echo\n # Touching html and info files to avoid to regenerate them.\n # This must be done after configuration since the timestamps need\n # to be later than include-maxima.texi which is generated at\n # configuration time:\n-for i in doc/info/*.html ; do\n-    touch \"${i}\"\n+echo \"Touching some HTML and info files to avoid their regeneration...\"\n+for f in doc/info/*.html doc/info/maxima.info*; do\n+    echo \"  $f\"\n+    touch \"$f\"\n done\n-touch doc/info/maxima.info*\n\n\n echo\n@@ -108,10 +110,13 @@\n check_error \"Failed to build Maxima as an ECL library.\"\n\n ECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n+src_dir=`pwd`\n+src_name=\"maxima.system.fasb\" # This has changed from 'maxima.fasb'.\n+tgt_name=\"maxima.fas\"\n echo\n-echo \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\n-cp -f maxima.fasb \"$ECLLIB/maxima.fas\"\n-check_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n+echo \"Now installing the Maxima library as '$ECLLIB/${tgt_name}'...\"\n+cp -f \"${src_dir}/${src_name}\" \"$ECLLIB/${tgt_name}\"\n+check_error \"Failed to install '${src_dir}/${src_name}' as '$ECLLIB/${tgt_name}'.\"\n\n\n if [[ \"$SAGE_SPKG_INSTALL_DOCS\" = yes ]] ; then\n```\n\n\nbut JP's solution looks ok as well.",
    "created_at": "2012-12-17T19:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161142",
    "user": "@nexttime"
}
```

Replying to [comment:72 leif]:
> Replying to [comment:65 jpflori]:
> > I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory
> 
> Yeah, I also noticed that and made an spkg with "fresh" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.
> 
> IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.

Yes, that fixed the issue.

I used

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -38,14 +38,16 @@
 ./configure --prefix="$SAGE_LOCAL" --libdir="$SAGE_LOCAL/lib" --enable-ecl
 check_error "Failed to configure Maxima."

+echo
 # Touching html and info files to avoid to regenerate them.
 # This must be done after configuration since the timestamps need
 # to be later than include-maxima.texi which is generated at
 # configuration time:
-for i in doc/info/*.html ; do
-    touch "${i}"
+echo "Touching some HTML and info files to avoid their regeneration..."
+for f in doc/info/*.html doc/info/maxima.info*; do
+    echo "  $f"
+    touch "$f"
 done
-touch doc/info/maxima.info*


 echo
@@ -108,10 +110,13 @@
 check_error "Failed to build Maxima as an ECL library."

 ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
+src_dir=`pwd`
+src_name="maxima.system.fasb" # This has changed from 'maxima.fasb'.
+tgt_name="maxima.fas"
 echo
-echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
-cp -f maxima.fasb "$ECLLIB/maxima.fas"
-check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."
+echo "Now installing the Maxima library as '$ECLLIB/${tgt_name}'..."
+cp -f "${src_dir}/${src_name}" "$ECLLIB/${tgt_name}"
+check_error "Failed to install '${src_dir}/${src_name}' as '$ECLLIB/${tgt_name}'."


 if [[ "$SAGE_SPKG_INSTALL_DOCS" = yes ]] ; then
```


but JP's solution looks ok as well.



---

archive/issue_comments_161143.json:
```json
{
    "body": "Replying to [comment:70 jpflori]:\n> I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).\n> This should not be affected by #9671.\n\n```\n$ ./sage -ecl\nECL (Embeddable Common-Lisp) 12.12.1 (git:UNKNOWN)\nCopyright (C) 1984 Taiichi Yuasa and Masami Hagiya\nCopyright (C) 1993 Giuseppe Attardi\nCopyright (C) 2000 Juan J. Garcia-Ripoll\nECL is free software, and you are welcome to redistribute it\nunder certain conditions; see file 'Copyright' for details.\nType :h for Help.\nTop level.\n> (require :maxima)\n\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/maxima.fas\"\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sockets.fas\"\n(\"SB-BSD-SOCKETS\" \"SOCKETS\" \"MAXIMA\")\n> (+ 2 2);\n\n4\n```\n\nThough I didn't know how to run a Maxima command in this, the fact that no error was raised seems good.",
    "created_at": "2012-12-17T20:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161143",
    "user": "@kcrisman"
}
```

Replying to [comment:70 jpflori]:
> I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).
> This should not be affected by #9671.

```
$ ./sage -ecl
ECL (Embeddable Common-Lisp) 12.12.1 (git:UNKNOWN)
Copyright (C) 1984 Taiichi Yuasa and Masami Hagiya
Copyright (C) 1993 Giuseppe Attardi
Copyright (C) 2000 Juan J. Garcia-Ripoll
ECL is free software, and you are welcome to redistribute it
under certain conditions; see file 'Copyright' for details.
Type :h for Help.
Top level.
> (require :maxima)

;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/maxima.fas"
;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sockets.fas"
("SB-BSD-SOCKETS" "SOCKETS" "MAXIMA")
> (+ 2 2);

4
```

Though I didn't know how to run a Maxima command in this, the fact that no error was raised seems good.



---

archive/issue_comments_161144.json:
```json
{
    "body": "there is quite a bit of activity on maxima's tracker on the reported bug. There seem to be several(?) bugs triggered, not in abs_integrate package, but in the \"core\" maxima.",
    "created_at": "2012-12-17T23:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161144",
    "user": "@dimpase"
}
```

there is quite a bit of activity on maxima's tracker on the reported bug. There seem to be several(?) bugs triggered, not in abs_integrate package, but in the "core" maxima.



---

archive/issue_comments_161145.json:
```json
{
    "body": "Anybody a clue where the extra question mark (in e.g. \"Is a an ?integer?\") may originate from?\n\nI don't get it with `sage --maxima`.",
    "created_at": "2012-12-17T23:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161145",
    "user": "@nexttime"
}
```

Anybody a clue where the extra question mark (in e.g. "Is a an ?integer?") may originate from?

I don't get it with `sage --maxima`.



---

archive/issue_comments_161146.json:
```json
{
    "body": "I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?",
    "created_at": "2012-12-18T00:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161146",
    "user": "jpflori"
}
```

I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?



---

archive/issue_comments_161147.json:
```json
{
    "body": "Replying to [comment:82 jpflori]:\n> I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?\n\nAhem, yes, presumably... ;-)  [AFAICS the original `retrieve` function hasn't changed.]\n\nI was wondering whether some non-printable character (like ASCII BEL) gets mapped to a literal `?`, but at least the position is strange, and e.g. \"Is  a  positve, negative, or zero?\" (note the [IMHO inconsistent] extra spaces) in contrast is just as before (at least on the Python level, i.e., the string passed with the exception, before we strip \"ECL says: Maxima asks: \").",
    "created_at": "2012-12-18T00:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161147",
    "user": "@nexttime"
}
```

Replying to [comment:82 jpflori]:
> I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?

Ahem, yes, presumably... ;-)  [AFAICS the original `retrieve` function hasn't changed.]

I was wondering whether some non-printable character (like ASCII BEL) gets mapped to a literal `?`, but at least the position is strange, and e.g. "Is  a  positve, negative, or zero?" (note the [IMHO inconsistent] extra spaces) in contrast is just as before (at least on the Python level, i.e., the string passed with the exception, before we strip "ECL says: Maxima asks: ").



---

archive/issue_comments_161148.json:
```json
{
    "body": "for the record, maxima 5.26.0 cannot do similar definite integrals involving abs, either:\n\n```\n(%i2) integrate(abs(cos(x)),x,0,2*%pi);\n\nlog: encountered log(0).\n[...]\n(%o2)                                  0\n```\n",
    "created_at": "2012-12-19T16:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161148",
    "user": "@dimpase"
}
```

for the record, maxima 5.26.0 cannot do similar definite integrals involving abs, either:

```
(%i2) integrate(abs(cos(x)),x,0,2*%pi);

log: encountered log(0).
[...]
(%o2)                                  0
```




---

archive/issue_comments_161149.json:
```json
{
    "body": "Dima's Maxima 5.26.0.p1 spkg from #13860 now builds with both the old (our current) and the new ECL (from #13324), so the spkg here should be (re-)based on that one.  (It would then no longer depend on #13324, too.)",
    "created_at": "2012-12-24T17:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161149",
    "user": "@nexttime"
}
```

Dima's Maxima 5.26.0.p1 spkg from #13860 now builds with both the old (our current) and the new ECL (from #13324), so the spkg here should be (re-)based on that one.  (It would then no longer depend on #13324, too.)



---

archive/issue_comments_161150.json:
```json
{
    "body": "added to the spkg patch (from Maxima bug tracker: a [patch](http://sourceforge.net/p/maxima/bugs/_discuss/thread/5a346754/e3a5/attachment/0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch) for bug 2520) gets rid of the segfaults on `integrate(abs(sin(x)),x,0,2*pi)` reported here.",
    "created_at": "2012-12-29T11:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161150",
    "user": "@dimpase"
}
```

added to the spkg patch (from Maxima bug tracker: a [patch](http://sourceforge.net/p/maxima/bugs/_discuss/thread/5a346754/e3a5/attachment/0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch) for bug 2520) gets rid of the segfaults on `integrate(abs(sin(x)),x,0,2*pi)` reported here.



---

archive/issue_comments_161151.json:
```json
{
    "body": "There is a regression: maxima 5.29 (and 5.28) cannot compute `integrate(sqrt(x + sqrt(x)), x)`. Reported as issue [2526](https://sourceforge.net/p/maxima/bugs/2526/) on Maxima's tracker. This leads to a doctest failure in `maxima_lib.py` (line 716).",
    "created_at": "2012-12-29T14:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161151",
    "user": "@dimpase"
}
```

There is a regression: maxima 5.29 (and 5.28) cannot compute `integrate(sqrt(x + sqrt(x)), x)`. Reported as issue [2526](https://sourceforge.net/p/maxima/bugs/2526/) on Maxima's tracker. This leads to a doctest failure in `maxima_lib.py` (line 716).



---

archive/issue_comments_161152.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-12-29T15:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161152",
    "user": "@dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_161153.json:
```json
{
    "body": "remaining doctest issues are due to extra `?` characters appearing in Maxima library interactions in `sage/calculus.py`, such as \n\n```\n    Is a an ?integer?\n```\n \nand \n\n```\n    Is a an ?even?\\ ?number?\n```\n\ninstead of \n\n```\n    Is a an integer?\n```\n \nand \n\n```\n    Is a an even number?\n```\n\nThis needs to be investigated, IMHO.",
    "created_at": "2012-12-29T15:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161153",
    "user": "@dimpase"
}
```

remaining doctest issues are due to extra `?` characters appearing in Maxima library interactions in `sage/calculus.py`, such as 

```
    Is a an ?integer?
```
 
and 

```
    Is a an ?even?\ ?number?
```

instead of 

```
    Is a an integer?
```
 
and 

```
    Is a an even number?
```

This needs to be investigated, IMHO.



---

archive/issue_comments_161154.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-12-29T15:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161154",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_161155.json:
```json
{
    "body": "Replying to [comment:90 dimpase]:\n\nthe spkg is updated to work with ECL 11.1.1, as well as with the new ECL 12.12. Doctests show that the `?integer?` stuff does not go away if ECL 11.1.1 is used. So this is the new Maxima to blame for.",
    "created_at": "2012-12-29T18:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161155",
    "user": "@dimpase"
}
```

Replying to [comment:90 dimpase]:

the spkg is updated to work with ECL 11.1.1, as well as with the new ECL 12.12. Doctests show that the `?integer?` stuff does not go away if ECL 11.1.1 is used. So this is the new Maxima to blame for.



---

archive/issue_comments_161156.json:
```json
{
    "body": "I'm doing `git bisect` on the Maxima repo to try to find the places to blame. It looks it was a long story, more than just a single change to undo. The first bad commit after the clean situation, as if in 5.26.0, is\n\n```\n4e2e7fb738e6f9f1955a5378ae392a1930b30bce\nMerge branch 'share-cleanup-branch-2011-10'\n```\n\nMaxima identifies itself as `Maxima 5.26.0_70_g4e2e7fb_dirty`, and one gets\n\n```\nsage: var('a');assume(a>0);limit(x^a,x=0)\na\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line string', (205, 187))\n[...]\nRuntimeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n```\n\nlooking at the commit more carefully, one sees renaming `to_poly_solver` to `to_poly_solve`.\nIf I make this change in sage/interfaces/maxima_lib.py, line 142, the error go away. So in fact these `?integer?` things got in later.\n\nBack to `git bisect` now.",
    "created_at": "2012-12-30T12:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161156",
    "user": "@dimpase"
}
```

I'm doing `git bisect` on the Maxima repo to try to find the places to blame. It looks it was a long story, more than just a single change to undo. The first bad commit after the clean situation, as if in 5.26.0, is

```
4e2e7fb738e6f9f1955a5378ae392a1930b30bce
Merge branch 'share-cleanup-branch-2011-10'
```

Maxima identifies itself as `Maxima 5.26.0_70_g4e2e7fb_dirty`, and one gets

```
sage: var('a');assume(a>0);limit(x^a,x=0)
a
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line string', (205, 187))
[...]
RuntimeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
```

looking at the commit more carefully, one sees renaming `to_poly_solver` to `to_poly_solve`.
If I make this change in sage/interfaces/maxima_lib.py, line 142, the error go away. So in fact these `?integer?` things got in later.

Back to `git bisect` now.



---

archive/issue_comments_161157.json:
```json
{
    "body": "After some more `git bisect`, finally, it is here:\nhttps://sourceforge.net/p/maxima/code/ci/f5e9b0f7eb122c4e48ea9df144dd57221e5ea0ca\n\nto blame for `?integer?`\n\nIt was meant to fix [this](http://www.math.utexas.edu/pipermail/maxima/2012/027927.html), but Sage has it fixed already. I will post a patched spkg with this patch undone.",
    "created_at": "2012-12-30T15:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161157",
    "user": "@dimpase"
}
```

After some more `git bisect`, finally, it is here:
https://sourceforge.net/p/maxima/code/ci/f5e9b0f7eb122c4e48ea9df144dd57221e5ea0ca

to blame for `?integer?`

It was meant to fix [this](http://www.math.utexas.edu/pipermail/maxima/2012/027927.html), but Sage has it fixed already. I will post a patched spkg with this patch undone.



---

archive/issue_comments_161158.json:
```json
{
    "body": "the update tested on Sage 5.5, and passes all the longtests (provided the doctests.patch is installed, of course). Needs review!",
    "created_at": "2012-12-31T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161158",
    "user": "@dimpase"
}
```

the update tested on Sage 5.5, and passes all the longtests (provided the doctests.patch is installed, of course). Needs review!



---

archive/issue_comments_161159.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-31T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161159",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_161160.json:
```json
{
    "body": "I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put \"needs work\" for such things either.",
    "created_at": "2013-01-03T20:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161160",
    "user": "@kcrisman"
}
```

I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put "needs work" for such things either.



---

archive/issue_comments_161161.json:
```json
{
    "body": "This does work!   Nicely done.  \"Needs info\" for the whole spkg rebasing issue.",
    "created_at": "2013-01-03T20:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161161",
    "user": "@kcrisman"
}
```

This does work!   Nicely done.  "Needs info" for the whole spkg rebasing issue.



---

archive/issue_comments_161162.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-01-03T20:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161162",
    "user": "@kcrisman"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_161163.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-01-04T01:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161163",
    "user": "@dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_161164.json:
```json
{
    "body": "Replying to [comment:95 kcrisman]:\n> I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put \"needs work\" for such things either.\n\n#13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.",
    "created_at": "2013-01-04T01:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161164",
    "user": "@dimpase"
}
```

Replying to [comment:95 kcrisman]:
> I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put "needs work" for such things either.

#13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.



---

archive/issue_comments_161165.json:
```json
{
    "body": "> #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.\nI just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.",
    "created_at": "2013-01-04T01:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161165",
    "user": "@kcrisman"
}
```

> #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.
I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.



---

archive/issue_comments_161166.json:
```json
{
    "body": "Replying to [comment:98 kcrisman]:\n> > #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.\n> I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.\n\nI don't understand. Indeed, 5.26.0.p1 and 5.29.1.p1 are separate branches. So what?",
    "created_at": "2013-01-04T02:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161166",
    "user": "@dimpase"
}
```

Replying to [comment:98 kcrisman]:
> > #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.
> I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.

I don't understand. Indeed, 5.26.0.p1 and 5.29.1.p1 are separate branches. So what?



---

archive/issue_comments_161167.json:
```json
{
    "body": "Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.",
    "created_at": "2013-01-04T03:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161167",
    "user": "@kiwifb"
}
```

Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.



---

archive/issue_comments_161168.json:
```json
{
    "body": "Replying to [comment:100 fbissey]:\n> Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.\n\nI think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.",
    "created_at": "2013-01-04T03:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161168",
    "user": "@dimpase"
}
```

Replying to [comment:100 fbissey]:
> Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.

I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.



---

archive/issue_comments_161169.json:
```json
{
    "body": "> > Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.\n*been* chastised - just for those reading\n> I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.\nFair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.",
    "created_at": "2013-01-04T03:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161169",
    "user": "@kcrisman"
}
```

> > Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.
*been* chastised - just for those reading
> I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.
Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.



---

archive/issue_comments_161170.json:
```json
{
    "body": "> > I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.\n> Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.\nActually, he had fewer changes than I thought.  The change in Dima's package to deal with various names for the library was already positively reviewed at #13860.  So... lookin' good.  Shall we say positive review?  It's certainly been tested quite a bit.",
    "created_at": "2013-01-05T03:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161170",
    "user": "@kcrisman"
}
```

> > I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.
> Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.
Actually, he had fewer changes than I thought.  The change in Dima's package to deal with various names for the library was already positively reviewed at #13860.  So... lookin' good.  Shall we say positive review?  It's certainly been tested quite a bit.



---

archive/issue_comments_161171.json:
```json
{
    "body": "a minor point: for the test in functional.py that (now) takes a long time, without the\n`-long` option, the variable `t` is not defined, and the test on\n`t.simplify_exp()` fails with:\n\n```\nNameError: name 't' is not defined\n```\n\nProbably the `t.simplify_exp()` line should be commented with `# long time` too.\n\nOtherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...\n\nPaul",
    "created_at": "2013-01-07T14:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161171",
    "user": "@zimmermann6"
}
```

a minor point: for the test in functional.py that (now) takes a long time, without the
`-long` option, the variable `t` is not defined, and the test on
`t.simplify_exp()` fails with:

```
NameError: name 't' is not defined
```

Probably the `t.simplify_exp()` line should be commented with `# long time` too.

Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...

Paul



---

archive/issue_comments_161172.json:
```json
{
    "body": "Use this patch",
    "created_at": "2013-01-07T14:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161172",
    "user": "@kcrisman"
}
```

Use this patch



---

archive/issue_comments_161173.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-07T14:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161173",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_161174.json:
```json
{
    "body": "Attachment [doctests.2.patch](tarball://root/attachments/some-uuid/ticket13364/doctests.2.patch) by @kcrisman created at 2013-01-07 14:50:36\n\n> Probably the `t.simplify_exp()` line should be commented with `# long time` too.\nGreat point, I've updated the patch.\n> Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...\nLet's do it and see what happens.  At some point we have to try it, and it looks like it's been tested on Mac and several Linuces.",
    "created_at": "2013-01-07T14:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161174",
    "user": "@kcrisman"
}
```

Attachment [doctests.2.patch](tarball://root/attachments/some-uuid/ticket13364/doctests.2.patch) by @kcrisman created at 2013-01-07 14:50:36

> Probably the `t.simplify_exp()` line should be commented with `# long time` too.
Great point, I've updated the patch.
> Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...
Let's do it and see what happens.  At some point we have to try it, and it looks like it's been tested on Mac and several Linuces.



---

archive/issue_comments_161175.json:
```json
{
    "body": "Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n\n```\n    Note that due to some problems with the way Maxima handles these\n    expressions, definite integrals can sometimes give unexpected\n    results (typically when using inexact endpoints) due to\n    inconsistent branching::\n```\n\nThat may be a bit pedantic however.",
    "created_at": "2013-01-08T10:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161175",
    "user": "@kiwifb"
}
```

Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:

```
    Note that due to some problems with the way Maxima handles these
    expressions, definite integrals can sometimes give unexpected
    results (typically when using inexact endpoints) due to
    inconsistent branching::
```

That may be a bit pedantic however.



---

archive/issue_comments_161176.json:
```json
{
    "body": "Replying to [comment:107 fbissey]:\n> Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n> {{{\n>     Note that due to some problems with the way Maxima handles these\n>     expressions, definite integrals can sometimes give unexpected\n>     results (typically when using inexact endpoints) due to\n>     inconsistent branching::\n> }}}\n> That may be a bit pedantic however.\nNo, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)",
    "created_at": "2013-01-08T15:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161176",
    "user": "@kcrisman"
}
```

Replying to [comment:107 fbissey]:
> Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:
> {{{
>     Note that due to some problems with the way Maxima handles these
>     expressions, definite integrals can sometimes give unexpected
>     results (typically when using inexact endpoints) due to
>     inconsistent branching::
> }}}
> That may be a bit pedantic however.
No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)



---

archive/issue_comments_161177.json:
```json
{
    "body": "Replying to [comment:108 jdemeyer]:\n\nThis ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\n\nBut the dependency is probably some artificial one for the release process, some I'm leaving it as is...",
    "created_at": "2013-01-08T17:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161177",
    "user": "@nexttime"
}
```

Replying to [comment:108 jdemeyer]:

This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.

But the dependency is probably some artificial one for the release process, some I'm leaving it as is...



---

archive/issue_comments_161178.json:
```json
{
    "body": "Replying to [comment:110 leif]:\n> Replying to [comment:108 jdemeyer]:\n> \n> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\n\nP.S.: ... as stated in the ticket's description btw. :-)",
    "created_at": "2013-01-08T17:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161178",
    "user": "@nexttime"
}
```

Replying to [comment:110 leif]:
> Replying to [comment:108 jdemeyer]:
> 
> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.

P.S.: ... as stated in the ticket's description btw. :-)



---

archive/issue_comments_161179.json:
```json
{
    "body": "Replying to [comment:110 leif]:\n> Replying to [comment:108 jdemeyer]:\n> \n> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\nThen I was confused by a comment on #13324.",
    "created_at": "2013-01-08T19:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161179",
    "user": "@jdemeyer"
}
```

Replying to [comment:110 leif]:
> Replying to [comment:108 jdemeyer]:
> 
> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.
Then I was confused by a comment on #13324.



---

archive/issue_comments_161180.json:
```json
{
    "body": "Replying to [comment:109 kcrisman]:\n> Replying to [comment:107 fbissey]:\n> > Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n> > {{{\n> >     Note that due to some problems with the way Maxima handles these\n> >     expressions, definite integrals can sometimes give unexpected\n> >     results (typically when using inexact endpoints) due to\n> >     inconsistent branching::\n> > }}}\n> > That may be a bit pedantic however.\n> No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)\n\nYou are welcome, I guess :P",
    "created_at": "2013-01-09T09:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161180",
    "user": "@kiwifb"
}
```

Replying to [comment:109 kcrisman]:
> Replying to [comment:107 fbissey]:
> > Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:
> > {{{
> >     Note that due to some problems with the way Maxima handles these
> >     expressions, definite integrals can sometimes give unexpected
> >     results (typically when using inexact endpoints) due to
> >     inconsistent branching::
> > }}}
> > That may be a bit pedantic however.
> No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)

You are welcome, I guess :P



---

archive/issue_comments_161181.json:
```json
{
    "body": "This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.",
    "created_at": "2013-01-10T10:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161181",
    "user": "@jdemeyer"
}
```

This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.



---

archive/issue_comments_161182.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-01-10T10:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161182",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_161183.json:
```json
{
    "body": "Replying to [comment:114 jdemeyer]:\n> This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.\n\nas far as I am concerned, maxima-5.26.0.p1 may just as well die. It would cost me half an hour of fooling around with hg, with 0 benefit for anything.",
    "created_at": "2013-01-10T10:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161183",
    "user": "@dimpase"
}
```

Replying to [comment:114 jdemeyer]:
> This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.

as far as I am concerned, maxima-5.26.0.p1 may just as well die. It would cost me half an hour of fooling around with hg, with 0 benefit for anything.



---

archive/issue_comments_161184.json:
```json
{
    "body": "Replying to [comment:115 dimpase]:\n> 0 benefit for anything.\nSo all the changes in #13860 were completely pointless then?",
    "created_at": "2013-01-10T10:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161184",
    "user": "@jdemeyer"
}
```

Replying to [comment:115 dimpase]:
> 0 benefit for anything.
So all the changes in #13860 were completely pointless then?



---

archive/issue_comments_161185.json:
```json
{
    "body": "Replying to [comment:116 jdemeyer]:\n> Replying to [comment:115 dimpase]:\n> > 0 benefit for anything.\n> So all the changes in #13860 were completely pointless then?\nWhen I worked on #13860 it was not clear that the current ticket can be done so fast.\n\nThe  changes on #13860 are all basically repeated, in a slightly different way, on this ticket. Due to our scheme of working on packages it wasn't trivial to properly merge the changes, so I just copy/pasted from source.",
    "created_at": "2013-01-10T10:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161185",
    "user": "@dimpase"
}
```

Replying to [comment:116 jdemeyer]:
> Replying to [comment:115 dimpase]:
> > 0 benefit for anything.
> So all the changes in #13860 were completely pointless then?
When I worked on #13860 it was not clear that the current ticket can be done so fast.

The  changes on #13860 are all basically repeated, in a slightly different way, on this ticket. Due to our scheme of working on packages it wasn't trivial to properly merge the changes, so I just copy/pasted from source.



---

archive/issue_comments_161186.json:
```json
{
    "body": "OK, I rebased.  diff attached.\n\nI also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.",
    "created_at": "2013-01-10T10:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161186",
    "user": "@jdemeyer"
}
```

OK, I rebased.  diff attached.

I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.



---

archive/issue_comments_161187.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-01-10T10:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161187",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_161188.json:
```json
{
    "body": "spkg diff, for review only",
    "created_at": "2013-01-10T10:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161188",
    "user": "@jdemeyer"
}
```

spkg diff, for review only



---

archive/issue_comments_161189.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-10T10:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161189",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_161190.json:
```json
{
    "body": "Attachment [maxima-5.29.1.p1.diff](tarball://root/attachments/some-uuid/ticket13364/maxima-5.29.1.p1.diff) by jpflori created at 2013-01-10 10:42:40",
    "created_at": "2013-01-10T10:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161190",
    "user": "jpflori"
}
```

Attachment [maxima-5.29.1.p1.diff](tarball://root/attachments/some-uuid/ticket13364/maxima-5.29.1.p1.diff) by jpflori created at 2013-01-10 10:42:40



---

archive/issue_comments_161191.json:
```json
{
    "body": "Replying to [comment:118 jdemeyer]:\n> OK, I rebased.  diff attached.\n> \n> I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.\ndank u wel!",
    "created_at": "2013-01-10T12:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161191",
    "user": "@dimpase"
}
```

Replying to [comment:118 jdemeyer]:
> OK, I rebased.  diff attached.
> 
> I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.
dank u wel!



---

archive/issue_comments_161192.json:
```json
{
    "body": "> > I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.\n> dank u wel!\nAgreed!",
    "created_at": "2013-01-10T16:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161192",
    "user": "@kcrisman"
}
```

> > I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.
> dank u wel!
Agreed!



---

archive/issue_comments_161193.json:
```json
{
    "body": "I've opened #13973 to deal with including the latest upstream patches.",
    "created_at": "2013-01-19T12:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161193",
    "user": "@dimpase"
}
```

I've opened #13973 to deal with including the latest upstream patches.



---

archive/issue_comments_161194.json:
```json
{
    "body": "Here are some tickets the current ticket should fix (i.e., they just need a patch to doctest it).  Not that I've tried them, just that in theory they are in 5.29.1.  Unfortunately, so far I only found these two...\n* #8728\n* #12708",
    "created_at": "2013-01-20T01:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161194",
    "user": "@kcrisman"
}
```

Here are some tickets the current ticket should fix (i.e., they just need a patch to doctest it).  Not that I've tried them, just that in theory they are in 5.29.1.  Unfortunately, so far I only found these two...
* #8728
* #12708



---

archive/issue_comments_161195.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-21T21:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161195",
    "user": "@jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_161196.json:
```json
{
    "body": "Note that [this commit](https://sourceforge.net/p/maxima/code/ci/3ca4235b8206b44e6670788696e6614b616f8994/) in Maxima apparently fixes one of the problems in question.",
    "created_at": "2021-11-15T12:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13192#issuecomment-161196",
    "user": "@kcrisman"
}
```

Note that [this commit](https://sourceforge.net/p/maxima/code/ci/3ca4235b8206b44e6670788696e6614b616f8994/) in Maxima apparently fixes one of the problems in question.
