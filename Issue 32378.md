# Issue 32378: Faster arithmetic with function field ideals

archive/issues_032378.json:
```json
{
    "body": "We make ideal arithmetic faster for ideals with two generator representations.\n \n\n```sage\nsage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]\n....: L.<y> = K.extension(Y^7 - x^3*Y - x)\n....: O = L.maximal_order()\n....: I = O.ideal(y)\n....: J = O.ideal(x + y)\nsage: def naive_power(i, n):\n....:     j = i\n....:     for s in range(n - 1):\n....:         j *= i\n....:     return j\n....: \nsage: n = 100\nsage: i = I / J\nsage: %timeit naive_power(i, n)\n683 ms \u00b1 8.82 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\nsage: %timeit i^n\n34.3 ms \u00b1 454 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: p, q = i.gens_two()\nsage: %timeit naive_power(i, n)  # faster multiplication\n147 ms \u00b1 4.08 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: %timeit i^n                # faster powering\n16.2 ms \u00b1 149 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\nsage: naive_power(i, n) == i^n\nTrue\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32615\n\n",
    "created_at": "2021-10-03T01:32:28Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Faster arithmetic with function field ideals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32378",
    "user": "klee"
}
```
We make ideal arithmetic faster for ideals with two generator representations.
 

```sage
sage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]
....: L.<y> = K.extension(Y^7 - x^3*Y - x)
....: O = L.maximal_order()
....: I = O.ideal(y)
....: J = O.ideal(x + y)
sage: def naive_power(i, n):
....:     j = i
....:     for s in range(n - 1):
....:         j *= i
....:     return j
....: 
sage: n = 100
sage: i = I / J
sage: %timeit naive_power(i, n)
683 ms ± 8.82 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit i^n
34.3 ms ± 454 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: p, q = i.gens_two()
sage: %timeit naive_power(i, n)  # faster multiplication
147 ms ± 4.08 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: %timeit i^n                # faster powering
16.2 ms ± 149 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: naive_power(i, n) == i^n
True
```


Issue created by migration from https://trac.sagemath.org/ticket/32615





---

archive/issue_comments_462013.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-03T01:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462013",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462014.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-03T01:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462014",
    "user": "klee"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462015.json:
```json
{
    "body": "One trivial little change:\n\n```diff\n      def _gens_two(self):\n-         \"\"\"\n+         r\"\"\"\n```\n\nOnce done, you can set a positive review on my behalf.\n\nI do find this line\n\n```\nif len(self._gens_two.cache) == 2:\n```\n\nto be a little strange though.",
    "created_at": "2021-10-03T08:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462015",
    "user": "tscrim"
}
```

One trivial little change:

```diff
      def _gens_two(self):
-         """
+         r"""
```

Once done, you can set a positive review on my behalf.

I do find this line

```
if len(self._gens_two.cache) == 2:
```

to be a little strange though.



---

archive/issue_comments_462016.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-03T09:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462016",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462017.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-03T09:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462017",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462018.json:
```json
{
    "body": "Replying to [comment:4 tscrim]:\n\nSorry for the mess. I somehow lost a commit that I thought I uploaded.\n\n> One trivial little change:\n> {{{#!diff\n>       def _gens_two(self):\n> -         \"\"\"\n> +         r\"\"\"\n> }}}\n> Once done, you can set a positive review on my behalf.\n\nDone now.\n\n> I do find this line\n> {{{\n> if len(self._gens_two.cache) == 2:\n> }}}\n> to be a little strange though.\n\nI had deleted this in the lost commit. Now done again.\n\nI will wait for a green bot. Thank you for quick review.",
    "created_at": "2021-10-03T09:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462018",
    "user": "klee"
}
```

Replying to [comment:4 tscrim]:

Sorry for the mess. I somehow lost a commit that I thought I uploaded.

> One trivial little change:
> {{{#!diff
>       def _gens_two(self):
> -         """
> +         r"""
> }}}
> Once done, you can set a positive review on my behalf.

Done now.

> I do find this line
> {{{
> if len(self._gens_two.cache) == 2:
> }}}
> to be a little strange though.

I had deleted this in the lost commit. Now done again.

I will wait for a green bot. Thank you for quick review.



---

archive/issue_comments_462019.json:
```json
{
    "body": "Thanks. Sounds good. Green bot => positive review.",
    "created_at": "2021-10-03T11:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462019",
    "user": "tscrim"
}
```

Thanks. Sounds good. Green bot => positive review.



---

archive/issue_comments_462020.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-03T13:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462020",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462021.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-13T22:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32378#issuecomment-462021",
    "user": "vbraun"
}
```

Resolution: fixed
