# Issue 31683: pynac: Build failure when MACOSX_DEPLOYMENT_TARGET=11.1 is set

Issue created by migration from https://trac.sagemath.org/ticket/31920

Original creator: mkoeppe

Original creation time: 2021-06-07 00:43:07

CC:  dimpase jhpalmieri

Building `pynac` fails in Sage 9.4.beta1 when a user has set `MACOSX_DEPLOYMENT_TARGET=11.1`.

This is due to an outdated libtool shipped with pynac, similar to https://gcc.gnu.org/bugzilla/show_bug.cgi?id=97865, which fails to use `-Wl,-undefined -Wl,dynamic_lookup`






---

Comment by dimpase created at 2021-06-07 10:59:59

does this mean we just need to re-run a modern autoconf on Pynac source?


---

Comment by jhpalmieri created at 2021-06-07 18:22:14

Why would a user set `MACOSX_DEPLOYMENT_TARGET=11.1`?


---

Comment by mkoeppe created at 2021-06-07 18:30:31

Replying to [comment:1 dimpase]:
> does this mean we just need to re-run a modern autoconf on Pynac source?

Yes, I think so, see #31694


---

Comment by mkoeppe created at 2021-06-07 18:32:42

Replying to [comment:2 jhpalmieri]:
> Why would a user set `MACOSX_DEPLOYMENT_TARGET=11.1`?

I don't have a good answer to that except that I had to set this in order to build correctly tagged wheels with XCode's python3 in #31396


---

Comment by mkoeppe created at 2021-08-16 22:05:08

No longer relevant with #32386


---

Comment by mkoeppe created at 2021-08-16 22:05:08

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2021-08-16 22:33:32

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-09-02 18:48:47

Resolution: invalid
