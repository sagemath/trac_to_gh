# Issue 23415: py3 some change in imports

Issue created by migration from https://trac.sagemath.org/ticket/23652

Original creator: chapoton

Original creation time: 2017-08-19 15:58:58

CC:  jdemeyer tscrim jhpalmieri embray

trying to avoid some circularity


---

Comment by chapoton created at 2017-08-19 15:59:31

New commits:


---

Comment by chapoton created at 2017-08-19 15:59:31

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-08-19 19:30:17

green bot, please review


---

Comment by tscrim created at 2017-08-20 17:45:09

I'm not sure about the changes in `real_double.pyx` as those extra imports do take some time, and they are in code that I could see being used in tight loops. While I am not sure if those will make a difference in real code, at least my simple testing says:

```
sage: x = RDF(3)
sage: %timeit x.is_integer()
The slowest run took 102.35 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 2.05 Âµs per loop
```

vs old

```
sage: x = RDF(3)
sage: %timeit x.is_integer()
The slowest run took 223.61 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 818 ns per loop
sage: %timeit from sage.rings.integer_ring import ZZ
The slowest run took 8.38 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 825 ns per loop
```

Again, I am not saying those changes need to be reverted, but maybe there is a better place to break circular imports.


---

Comment by git created at 2017-08-20 17:52:44

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2017-08-20 17:53:03

right. I reverted these changes
----
New commits:
----
New commits:


---

Comment by tscrim created at 2017-08-20 18:10:58

LGTM.


---

Comment by tscrim created at 2017-08-20 18:10:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-26 09:57:54

Resolution: fixed
