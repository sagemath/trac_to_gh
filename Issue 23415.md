# Issue 23415: py3 some change in imports

archive/issues_023415.json:
```json
{
    "body": "CC:  @jdemeyer @tscrim @jhpalmieri @embray\n\ntrying to avoid some circularity\n\nIssue created by migration from https://trac.sagemath.org/ticket/23652\n\n",
    "created_at": "2017-08-19T15:58:58Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "py3 some change in imports",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23415",
    "user": "https://github.com/fchapoton"
}
```
CC:  @jdemeyer @tscrim @jhpalmieri @embray

trying to avoid some circularity

Issue created by migration from https://trac.sagemath.org/ticket/23652





---

archive/issue_comments_327323.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-19T15:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327323",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_327324.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-19T15:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327324",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_327325.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2017-08-19T19:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327325",
    "user": "https://github.com/fchapoton"
}
```

green bot, please review



---

archive/issue_comments_327326.json:
```json
{
    "body": "I'm not sure about the changes in `real_double.pyx` as those extra imports do take some time, and they are in code that I could see being used in tight loops. While I am not sure if those will make a difference in real code, at least my simple testing says:\n\n```\nsage: x = RDF(3)\nsage: %timeit x.is_integer()\nThe slowest run took 102.35 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 2.05 \u00b5s per loop\n```\n\nvs old\n\n```\nsage: x = RDF(3)\nsage: %timeit x.is_integer()\nThe slowest run took 223.61 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 818 ns per loop\nsage: %timeit from sage.rings.integer_ring import ZZ\nThe slowest run took 8.38 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 825 ns per loop\n```\n\nAgain, I am not saying those changes need to be reverted, but maybe there is a better place to break circular imports.",
    "created_at": "2017-08-20T17:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327326",
    "user": "https://github.com/tscrim"
}
```

I'm not sure about the changes in `real_double.pyx` as those extra imports do take some time, and they are in code that I could see being used in tight loops. While I am not sure if those will make a difference in real code, at least my simple testing says:

```
sage: x = RDF(3)
sage: %timeit x.is_integer()
The slowest run took 102.35 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 2.05 Âµs per loop
```

vs old

```
sage: x = RDF(3)
sage: %timeit x.is_integer()
The slowest run took 223.61 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 818 ns per loop
sage: %timeit from sage.rings.integer_ring import ZZ
The slowest run took 8.38 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 825 ns per loop
```

Again, I am not saying those changes need to be reverted, but maybe there is a better place to break circular imports.



---

archive/issue_comments_327327.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-08-20T17:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_327328.json:
```json
{
    "body": "right. I reverted these changes\n----\nNew commits:\n----\nNew commits:",
    "created_at": "2017-08-20T17:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327328",
    "user": "https://github.com/fchapoton"
}
```

right. I reverted these changes
----
New commits:
----
New commits:



---

archive/issue_comments_327329.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-08-20T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327329",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_327330.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-20T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327330",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327331.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-26T09:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23415#issuecomment-327331",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
