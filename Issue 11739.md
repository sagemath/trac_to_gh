# Issue 11739: Fix missing uniqueness of parents when unpickling libsingular polynomial rings

Issue created by migration from Trac.

Original creator: SimonKing

Original creation time: 2011-10-10 12:28:39

Assignee: was

CC:  malb

Keywords: unpickle libsingular unique parents

First session:

```
sage: P.<foo,bar> = PolynomialRing(QQ)
sage: save(P,'tmp')
```


Second session:

```
sage: Q = load('tmp.sobj')
sage: P.<foo,bar> = PolynomialRing(QQ)
sage: Q is P
False
sage: Q2 = load('tmp.sobj')
sage: Q2 is P
True
sage: Q2 is Q
False
```


That is fixed with the attached patch.


---

Comment by SimonKing created at 2011-10-10 12:30:56

Changing status from new to needs_review.


---

Comment by SimonKing created at 2011-10-10 12:32:14

Remark: I consider it a feature of my patch that old pickles of polynomial rings will automatically be transformed into a new format, should Sage ever drop libsingular.


---

Comment by malb created at 2011-10-10 12:53:42

Changing status from needs_review to positive_review.


---

Comment by malb created at 2011-10-10 12:53:42

Patch looks good so I'll give it a positive review. In case doctests break (didn't run any) it can be reverted.


---

Comment by jdemeyer created at 2011-10-10 13:15:27

Please fix this comment, I believe it contains at least three mistakes :-)

```
# If future Sage versions remove libsingular by a different implementation,
# the unpickled ring will be long the the new implementation.
```



---

Comment by jdemeyer created at 2011-10-10 13:16:01

Changing status from positive_review to needs_work.


---

Comment by SimonKing created at 2011-10-10 13:25:22

Preserve uniqueness of parents when unpickling a libsingular polynomial ring


---

Comment by SimonKing created at 2011-10-10 13:26:24

Changing status from needs_work to needs_review.


---

Attachment

I replaced the patch. If you think the comment is now fine, then reinstate the positive review please.


---

Comment by vbraun created at 2011-10-26 16:26:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2011-10-26 16:26:18

That comment still won't win the Nobel price in literature, but at least I get what is meant. Applies fine to sage-4.7.2.rc0. Positive review.


---

Comment by jdemeyer created at 2011-11-03 08:51:02

Resolution: fixed


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted
