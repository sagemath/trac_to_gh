# Issue 11739: Fix missing uniqueness of parents when unpickling libsingular polynomial rings

archive/issues_011739.json:
```json
{
    "body": "Assignee: was\n\nCC:  malb\n\nKeywords: unpickle libsingular unique parents\n\nFirst session:\n\n```\nsage: P.<foo,bar> = PolynomialRing(QQ)\nsage: save(P,'tmp')\n```\n\n\nSecond session:\n\n```\nsage: Q = load('tmp.sobj')\nsage: P.<foo,bar> = PolynomialRing(QQ)\nsage: Q is P\nFalse\nsage: Q2 = load('tmp.sobj')\nsage: Q2 is P\nTrue\nsage: Q2 is Q\nFalse\n```\n\n\nThat is fixed with the attached patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11911\n\n",
    "created_at": "2011-10-10T12:28:39Z",
    "labels": [
        "pickling",
        "major",
        "bug"
    ],
    "title": "Fix missing uniqueness of parents when unpickling libsingular polynomial rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11739",
    "user": "SimonKing"
}
```
Assignee: was

CC:  malb

Keywords: unpickle libsingular unique parents

First session:

```
sage: P.<foo,bar> = PolynomialRing(QQ)
sage: save(P,'tmp')
```


Second session:

```
sage: Q = load('tmp.sobj')
sage: P.<foo,bar> = PolynomialRing(QQ)
sage: Q is P
False
sage: Q2 = load('tmp.sobj')
sage: Q2 is P
True
sage: Q2 is Q
False
```


That is fixed with the attached patch.

Issue created by migration from https://trac.sagemath.org/ticket/11911





---

archive/issue_comments_133490.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-10-10T12:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133490",
    "user": "SimonKing"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_133491.json:
```json
{
    "body": "Remark: I consider it a feature of my patch that old pickles of polynomial rings will automatically be transformed into a new format, should Sage ever drop libsingular.",
    "created_at": "2011-10-10T12:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133491",
    "user": "SimonKing"
}
```

Remark: I consider it a feature of my patch that old pickles of polynomial rings will automatically be transformed into a new format, should Sage ever drop libsingular.



---

archive/issue_comments_133492.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-10T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133492",
    "user": "malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_133493.json:
```json
{
    "body": "Patch looks good so I'll give it a positive review. In case doctests break (didn't run any) it can be reverted.",
    "created_at": "2011-10-10T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133493",
    "user": "malb"
}
```

Patch looks good so I'll give it a positive review. In case doctests break (didn't run any) it can be reverted.



---

archive/issue_comments_133494.json:
```json
{
    "body": "Please fix this comment, I believe it contains at least three mistakes :-)\n\n```\n# If future Sage versions remove libsingular by a different implementation,\n# the unpickled ring will be long the the new implementation.\n```\n",
    "created_at": "2011-10-10T13:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133494",
    "user": "jdemeyer"
}
```

Please fix this comment, I believe it contains at least three mistakes :-)

```
# If future Sage versions remove libsingular by a different implementation,
# the unpickled ring will be long the the new implementation.
```




---

archive/issue_comments_133495.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-10-10T13:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133495",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_133496.json:
```json
{
    "body": "Preserve uniqueness of parents when unpickling a libsingular polynomial ring",
    "created_at": "2011-10-10T13:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133496",
    "user": "SimonKing"
}
```

Preserve uniqueness of parents when unpickling a libsingular polynomial ring



---

archive/issue_comments_133497.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-10-10T13:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133497",
    "user": "SimonKing"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_133498.json:
```json
{
    "body": "Attachment [trac11911_libsingular_pickling.patch](tarball://root/attachments/some-uuid/ticket11911/trac11911_libsingular_pickling.patch) by SimonKing created at 2011-10-10 13:26:24\n\nI replaced the patch. If you think the comment is now fine, then reinstate the positive review please.",
    "created_at": "2011-10-10T13:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133498",
    "user": "SimonKing"
}
```

Attachment [trac11911_libsingular_pickling.patch](tarball://root/attachments/some-uuid/ticket11911/trac11911_libsingular_pickling.patch) by SimonKing created at 2011-10-10 13:26:24

I replaced the patch. If you think the comment is now fine, then reinstate the positive review please.



---

archive/issue_comments_133499.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-26T16:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133499",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_133500.json:
```json
{
    "body": "That comment still won't win the Nobel price in literature, but at least I get what is meant. Applies fine to sage-4.7.2.rc0. Positive review.",
    "created_at": "2011-10-26T16:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133500",
    "user": "vbraun"
}
```

That comment still won't win the Nobel price in literature, but at least I get what is meant. Applies fine to sage-4.7.2.rc0. Positive review.



---

archive/issue_comments_133501.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-03T08:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133501",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_133502.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11739#issuecomment-133502",
    "user": "jdemeyer"
}
```

Milestone sage-4.7.3 deleted
