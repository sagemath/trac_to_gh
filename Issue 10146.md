# Issue 10146: Inconsistent behaviour of p.roots(ring=CC) for p(x) in QQ['y']['x'] (incl. crashing)

archive/issues_010146.json:
```json
{
    "body": "Assignee: @aghitza\n\nCC:  @jasongrout\n\n`p.roots(ring=CC)` where `p` is an element `QQ['y']['x']` whose coefficient do not depend on `y` leads to several different errors depending on the value of p.  I guess there are in fact several distinct issues.  The final crash might be related to #9826.\n\n\n```\n~$ sage\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: R.<x> = QQ['y'][]\nsage: (-x+1).roots(ring=CC)\n[(1.00000000000000, 1)]\nsage: (-1/2*x+1).roots(ring=CC)\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (19469, 0))\n| Sage Version 4.5.3, Release Date: 2010-09-04                       |\n| Type notebook() for the GUI, and license() for information.        |\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/marc/<ipython console> in <module>()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31226)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.change_ring (sage/rings/polynomial/polynomial_element.c:16456)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6407)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3108)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3010)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _element_constructor_(self, x, check, is_gen, construct, **kwds)\n    311                 x = x.Polrev()\n    312 \n--> 313         return C(self, x, check, is_gen, construct=construct, **kwds)\n    314 \n    315     def is_integral_domain(self, proof = True):\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.so in sage.rings.polynomial.polynomial_real_mpfr_dense.PolynomialRealDense.__init__ (sage/rings/polynomial/polynomial_real_mpfr_dense.c:3609)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6407)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3108)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3010)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealField_class._element_constructor_ (sage/rings/real_mpfr.c:5058)()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8767)()\n\nTypeError: Unable to convert x (='-1/2') to real number.\nsage: (-1/2*x+1/2).roots()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n\n/home/marc/<ipython console> in <module>()\n\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31591)()\n\nNotImplementedError: root finding for this polynomial not implemented\nsage: (-1/2*x+1/2).roots(ring=CC)\n*** glibc detected *** python: munmap_chunk(): invalid pointer: 0x0000000001208958 ***\n======= Backtrace: =========\n/lib/libc.so.6[0x3c38271ad6]\n/home/marc/opt/sage-4.5.3/local/lib/libmpfr.so.1(mpfr_clear+0x45)[0x7fc911f80a45]\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.so(+0x7867)[0x7fc90a74d867]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0xa241c)[0x7fc91e85841c]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x3af3)[0x7fc91e89f973]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0x730df)[0x7fc91e8290df]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0x5819f)[0x7fc91e80e19f]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so(+0x12724)[0x7fc910609724]\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so(+0x25ec2)[0x7fc9174a2ec2]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0xaba8c)[0x7fc91e861a8c]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so(+0xd3c2)[0x7fc90bc873c2]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]\n/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so(+0xd191c)[0x7fc90bd4b91c]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5a8e)[0x7fc91e8a190e]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7fc91e8a2df2]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x6244)[0x7fc91e8a20c4]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5ab2)[0x7fc91e8a1932]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7fc91e8a2df2]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7fc91e8c2c90]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdc)[0x7fc91e8c2e5c]\n/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(Py_Main+0xb36)[0x7fc91e8d0186]\n/lib/libc.so.6(__libc_start_main+0xfd)[0x3c3821ec4d]\npython[0x400699]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:0a 1787644                            /home/marc/opt/sage-4.5.3/local/bin/python\n00600000-00601000 rw-p 00000000 08:0a 1787644                            /home/marc/opt/sage-4.5.3/local/bin/python\n00cb1000-05306000 rw-p 00000000 00:00 0                                  [heap]\n32b2c00000-32b2c16000 r-xp 00000000 08:06 40741                          /lib/libgcc_s.so.1\n32b2c16000-32b2e15000 ---p 00016000 08:06 40741                          /lib/libgcc_s.so.1\n32b2e15000-32b2e16000 rw-p 00015000 08:06 40741                          /lib/libgcc_s.so.1\n3c37e00000-3c37e1e000 r-xp 00000000 08:06 40724                          /lib/ld-2.11.2.so\n3c3801d000-3c3801e000 r--p 0001d000 08:06 40724                          /lib/ld-2.11.2.so\n3c3801e000-3c3801f000 rw-p 0001e000 08:06 40724                          /lib/ld-2.11.2.so\n3c3801f000-3c38020000 rw-p 00000000 00:00 0 \n3c38200000-3c38358000 r-xp 00000000 08:06 40737                          /lib/libc-2.11.2.so\n3c38358000-3c38557000 ---p 00158000 08:06 40737                          /lib/libc-2.11.2.so\n3c38557000-3c3855b000 r--p 00157000 08:06 40737                          /lib/libc-2.11.2.so\n3c3855b000-3c3855c000 rw-p 0015b000 08:06 40737                          /lib/libc-2.11.2.so\n3c3855c000-3c38561000 rw-p 00000000 00:00 0 \n3c38600000-3c38680000 r-xp 00000000 08:06 40787                          /lib/libm-2.11.2.so\n3c38680000-3c38880000 ---p 00080000 08:06 40787                          /lib/libm-2.11.2.so\n3c38880000-3c38881000 r--p 00080000 08:06 40787                          /lib/libm-2.11.2.so\n3c38881000-3c38882000 rw-p 00081000 08:06 40787                          /lib/libm-2.11.2.so\n3c38a00000-3c38a02000 r-xp 00000000 08:06 40738                          /lib/libdl-2.11.2.so\n3c38a02000-3c38c02000 ---p 00002000 08:06 40738                          /lib/libdl-2.11.2.so\n3c38c02000-3c38c03000 r--p 00002000 08:06 40738                          /lib/libdl-2.11.2.so\n3c38c03000-3c38c04000 rw-p 00003000 08:06 40738                          /lib/libdl-2.11.2.so\n3c38e00000-3c38e17000 r-xp 00000000 08:06 40766                          /lib/libpthread-2.11.2.so\n3c38e17000-3c39016000 ---p 00017000 08:06 40766                          /lib/libpthread-2.11.2.so\n3c39016000-3c39017000 r--p 00016000 08:06 40766                          /lib/libpthread-2.11.2.so\n3c39017000-3c39018000 rw-p 00017000 08:06 40766                          /lib/libpthread-2.11.2.so\n3c39018000-3c3901c000 rw-p 00000000 00:00 0 \n3c4ba00000-3c4ba08000 r-xp 00000000 08:06 40917                          /lib/libcrypt-2.11.2.so\n3c4ba08000-3c4bc07000 ---p 00008000 08:06 40917                          /lib/libcrypt-2.11.2.so\n3c4bc07000-3c4bc08000 r--p 00007000 08:06 40917                          /lib/libcrypt-2.11.2.so\n3c4bc08000-3c4bc09000 rw-p 00008000 08:06 40917                          /lib/libcrypt-2.11.2.so\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10147\n\n",
    "created_at": "2010-10-20T18:55:44Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Inconsistent behaviour of p.roots(ring=CC) for p(x) in QQ['y']['x'] (incl. crashing)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10146",
    "user": "https://github.com/mezzarobba"
}
```
Assignee: @aghitza

CC:  @jasongrout

`p.roots(ring=CC)` where `p` is an element `QQ['y']['x']` whose coefficient do not depend on `y` leads to several different errors depending on the value of p.  I guess there are in fact several distinct issues.  The final crash might be related to #9826.


```
~$ sage
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: R.<x> = QQ['y'][]
sage: (-x+1).roots(ring=CC)
[(1.00000000000000, 1)]
sage: (-1/2*x+1).roots(ring=CC)
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (19469, 0))
| Sage Version 4.5.3, Release Date: 2010-09-04                       |
| Type notebook() for the GUI, and license() for information.        |
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/marc/<ipython console> in <module>()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31226)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.change_ring (sage/rings/polynomial/polynomial_element.c:16456)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6407)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3108)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3010)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _element_constructor_(self, x, check, is_gen, construct, **kwds)
    311                 x = x.Polrev()
    312 
--> 313         return C(self, x, check, is_gen, construct=construct, **kwds)
    314 
    315     def is_integral_domain(self, proof = True):

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.so in sage.rings.polynomial.polynomial_real_mpfr_dense.PolynomialRealDense.__init__ (sage/rings/polynomial/polynomial_real_mpfr_dense.c:3609)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6407)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3108)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3010)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealField_class._element_constructor_ (sage/rings/real_mpfr.c:5058)()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8767)()

TypeError: Unable to convert x (='-1/2') to real number.
sage: (-1/2*x+1/2).roots()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)

/home/marc/<ipython console> in <module>()

/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31591)()

NotImplementedError: root finding for this polynomial not implemented
sage: (-1/2*x+1/2).roots(ring=CC)
*** glibc detected *** python: munmap_chunk(): invalid pointer: 0x0000000001208958 ***
======= Backtrace: =========
/lib/libc.so.6[0x3c38271ad6]
/home/marc/opt/sage-4.5.3/local/lib/libmpfr.so.1(mpfr_clear+0x45)[0x7fc911f80a45]
/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.so(+0x7867)[0x7fc90a74d867]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0xa241c)[0x7fc91e85841c]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x3af3)[0x7fc91e89f973]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0x730df)[0x7fc91e8290df]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0x5819f)[0x7fc91e80e19f]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so(+0x12724)[0x7fc910609724]
/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/structure/parent.so(+0x25ec2)[0x7fc9174a2ec2]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(+0xaba8c)[0x7fc91e861a8c]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so(+0xd3c2)[0x7fc90bc873c2]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7fc91e7fce13]
/home/marc/opt/sage-4.5.3/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_element.so(+0xd191c)[0x7fc90bd4b91c]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5a8e)[0x7fc91e8a190e]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7fc91e8a2df2]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x6244)[0x7fc91e8a20c4]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5ab2)[0x7fc91e8a1932]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5235)[0x7fc91e8a10b5]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x8cd)[0x7fc91e8a2d1d]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7fc91e8a2df2]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7fc91e8c2c90]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdc)[0x7fc91e8c2e5c]
/home/marc/opt/sage-4.5.3/local/lib/libpython2.6.so.1.0(Py_Main+0xb36)[0x7fc91e8d0186]
/lib/libc.so.6(__libc_start_main+0xfd)[0x3c3821ec4d]
python[0x400699]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:0a 1787644                            /home/marc/opt/sage-4.5.3/local/bin/python
00600000-00601000 rw-p 00000000 08:0a 1787644                            /home/marc/opt/sage-4.5.3/local/bin/python
00cb1000-05306000 rw-p 00000000 00:00 0                                  [heap]
32b2c00000-32b2c16000 r-xp 00000000 08:06 40741                          /lib/libgcc_s.so.1
32b2c16000-32b2e15000 ---p 00016000 08:06 40741                          /lib/libgcc_s.so.1
32b2e15000-32b2e16000 rw-p 00015000 08:06 40741                          /lib/libgcc_s.so.1
3c37e00000-3c37e1e000 r-xp 00000000 08:06 40724                          /lib/ld-2.11.2.so
3c3801d000-3c3801e000 r--p 0001d000 08:06 40724                          /lib/ld-2.11.2.so
3c3801e000-3c3801f000 rw-p 0001e000 08:06 40724                          /lib/ld-2.11.2.so
3c3801f000-3c38020000 rw-p 00000000 00:00 0 
3c38200000-3c38358000 r-xp 00000000 08:06 40737                          /lib/libc-2.11.2.so
3c38358000-3c38557000 ---p 00158000 08:06 40737                          /lib/libc-2.11.2.so
3c38557000-3c3855b000 r--p 00157000 08:06 40737                          /lib/libc-2.11.2.so
3c3855b000-3c3855c000 rw-p 0015b000 08:06 40737                          /lib/libc-2.11.2.so
3c3855c000-3c38561000 rw-p 00000000 00:00 0 
3c38600000-3c38680000 r-xp 00000000 08:06 40787                          /lib/libm-2.11.2.so
3c38680000-3c38880000 ---p 00080000 08:06 40787                          /lib/libm-2.11.2.so
3c38880000-3c38881000 r--p 00080000 08:06 40787                          /lib/libm-2.11.2.so
3c38881000-3c38882000 rw-p 00081000 08:06 40787                          /lib/libm-2.11.2.so
3c38a00000-3c38a02000 r-xp 00000000 08:06 40738                          /lib/libdl-2.11.2.so
3c38a02000-3c38c02000 ---p 00002000 08:06 40738                          /lib/libdl-2.11.2.so
3c38c02000-3c38c03000 r--p 00002000 08:06 40738                          /lib/libdl-2.11.2.so
3c38c03000-3c38c04000 rw-p 00003000 08:06 40738                          /lib/libdl-2.11.2.so
3c38e00000-3c38e17000 r-xp 00000000 08:06 40766                          /lib/libpthread-2.11.2.so
3c38e17000-3c39016000 ---p 00017000 08:06 40766                          /lib/libpthread-2.11.2.so
3c39016000-3c39017000 r--p 00016000 08:06 40766                          /lib/libpthread-2.11.2.so
3c39017000-3c39018000 rw-p 00017000 08:06 40766                          /lib/libpthread-2.11.2.so
3c39018000-3c3901c000 rw-p 00000000 00:00 0 
3c4ba00000-3c4ba08000 r-xp 00000000 08:06 40917                          /lib/libcrypt-2.11.2.so
3c4ba08000-3c4bc07000 ---p 00008000 08:06 40917                          /lib/libcrypt-2.11.2.so
3c4bc07000-3c4bc08000 r--p 00007000 08:06 40917                          /lib/libcrypt-2.11.2.so
3c4bc08000-3c4bc09000 rw-p 00008000 08:06 40917                          /lib/libcrypt-2.11.2.so
```


Issue created by migration from https://trac.sagemath.org/ticket/10147





---

archive/issue_comments_102517.json:
```json
{
    "body": "No longer crashes; the errors in the cases that are not implemented make sense; I doubt this is worth adding tests.",
    "created_at": "2021-03-09T17:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102517",
    "user": "https://github.com/mezzarobba"
}
```

No longer crashes; the errors in the cases that are not implemented make sense; I doubt this is worth adding tests.



---

archive/issue_comments_102518.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-09T17:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102518",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_102519.json:
```json
{
    "body": "In sage-9.3.beta7 the example fails because of\n\n```\nsage: RR(QQ['y'](-1/2)) \nTraceback (most recent call last):\n...\nTypeError: unable to convert '-1/2' to a real number\n```\n\nwhich is worth fixing.",
    "created_at": "2021-03-14T18:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102519",
    "user": "https://github.com/videlec"
}
```

In sage-9.3.beta7 the example fails because of

```
sage: RR(QQ['y'](-1/2)) 
Traceback (most recent call last):
...
TypeError: unable to convert '-1/2' to a real number
```

which is worth fixing.



---

archive/issue_comments_102520.json:
```json
{
    "body": "As a matter of comparison, it works in QQ\n\n```\nsage: R.<x> = QQ['y'][]\nsage: (-1/2*x+1).roots(ring=QQ)\n[(2, 1)]\n```\n\nThis is because the conversion works\n\n```\nsage: QQ(QQ['y'](1/2))\n1/2\n```\n\nThis is explained by the fact that the conversion method `_rational_` is implemented on polynomial\n\n```\nsage: QQ['x'](1/2)._rational_()\n1/2\n```\n\nIt is worth adding the corresponding conversion methods for floating point numbers\n- `_mpfr_` for `RealField`\n- `_real_mpfi_` for `RealIntervalField`\nThough, complex numbers do not have a conversion method (set in the constructor via `self._populate_coercion_lists_(convert_method_name='XXX')`).",
    "created_at": "2021-03-14T18:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102520",
    "user": "https://github.com/videlec"
}
```

As a matter of comparison, it works in QQ

```
sage: R.<x> = QQ['y'][]
sage: (-1/2*x+1).roots(ring=QQ)
[(2, 1)]
```

This is because the conversion works

```
sage: QQ(QQ['y'](1/2))
1/2
```

This is explained by the fact that the conversion method `_rational_` is implemented on polynomial

```
sage: QQ['x'](1/2)._rational_()
1/2
```

It is worth adding the corresponding conversion methods for floating point numbers
- `_mpfr_` for `RealField`
- `_real_mpfi_` for `RealIntervalField`
Though, complex numbers do not have a conversion method (set in the constructor via `self._populate_coercion_lists_(convert_method_name='XXX')`).



---

archive/issue_comments_102521.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-03-14T18:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102521",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_102522.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-03-14T20:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102522",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_102523.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2021-03-14T20:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102523",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_102524.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-14T23:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102524",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_102525.json:
```json
{
    "body": "Patchbot shows doctest errors",
    "created_at": "2021-03-14T23:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102525",
    "user": "https://github.com/mkoeppe"
}
```

Patchbot shows doctest errors



---

archive/issue_comments_102526.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> Patchbot shows doctest errors \n\nwhich one?",
    "created_at": "2021-03-17T19:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102526",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:13 mkoeppe]:
> Patchbot shows doctest errors 

which one?



---

archive/issue_comments_102527.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-17T19:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102527",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_102528.json:
```json
{
    "body": "This one https://patchbot.sagemath.org/log/10147/Linux/1_SMP_Debian_4.19.171-2_(2021-01-30)/x86_64/4.19.0-14-amd64/tmonteil-lxc3/2021-03-17%2017:45:45",
    "created_at": "2021-03-17T19:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102528",
    "user": "https://github.com/mkoeppe"
}
```

This one https://patchbot.sagemath.org/log/10147/Linux/1_SMP_Debian_4.19.171-2_(2021-01-30)/x86_64/4.19.0-14-amd64/tmonteil-lxc3/2021-03-17%2017:45:45



---

archive/issue_comments_102529.json:
```json
{
    "body": "thx",
    "created_at": "2021-03-17T19:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102529",
    "user": "https://github.com/videlec"
}
```

thx



---

archive/issue_comments_102530.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-17T19:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102530",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_102531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-17T19:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_102532.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-17T19:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102532",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_102533.json:
```json
{
    "body": "LGTM",
    "created_at": "2021-03-18T03:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102533",
    "user": "https://github.com/mkoeppe"
}
```

LGTM



---

archive/issue_comments_102534.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-18T03:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102534",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_102535.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-20T15:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10146#issuecomment-102535",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_010263.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-03-20T15:27:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10146",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10146#event-10263"
}
```
