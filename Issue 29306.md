# Issue 29306: normal_basis() for positive-dimensional ideals

Issue created by migration from https://trac.sagemath.org/ticket/29543

Original creator: @mwageringel

Original creation time: 2020-04-21 18:58:07

CC:  klee

This ticket adds a `degree` option to the `normal_basis` method of ideals.

This allows to limit the output to monomials of a particular degree, which is useful when the corresponding quotient ring is not finite-dimensional as a vector space.


```
sage: R.<x,y,z> = QQ[]
sage: I = R.ideal(x^2 + y^2 - 1)
sage: [I.normal_basis(d) for d in (0..3)]
[[1],
 [z, y, x],
 [z^2, y*z, x*z, y^2, x*y],
 [z^3, y*z^2, x*z^2, y^2*z, x*y*z, y^3, x*y^2]]
```


Previously, the method could only be used when the quotient ring was finite-dimensional.

This functionality is provided by Singular. For reference, the corresponding Singular function is [kbase](https://www.singular.uni-kl.de/Manual/4-1-2/sing_275.htm#SEC315).



---

Comment by @mwageringel created at 2020-04-21 19:03:40

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2020-04-21 19:03:40

Changing keywords from "" to "singular".


---

Comment by @mwageringel created at 2020-04-21 19:03:40

New commits:


---

Comment by tscrim created at 2020-04-22 02:38:30

Note that this change is backwards incompatible for anyone who was passing `algorithm` to `normal_basis` but not as a keyword. IMO, this is sufficiently unlikely to warrant additional action, but you could do a deprecation warning `if isinstance(degree, str):` to possibly catch this. I leave that choice up to you. Either way you decide, you can set a positive review (after adding the deprecation).


---

Comment by klee created at 2020-04-22 07:26:13

Some comments:

(1) An explicit OUTPUT seems better.

```
         INPUT:
 
-        - ``degree`` -- integer; if not ``None``, return only the monomials of
-          the given degree
+        - ``degree`` -- ``None`` or integer
+
+        OUTPUT:
+
+        If ``degree`` is an integer, only the monomials of the given degree in
+        the normal basis.
```

(2) Some trimming.

```
         """
-        Return a vector space basis (consisting of monomials) of the
-        quotient ring of this ideal.
+        Return a vector space basis of the quotient ring of this ideal.
 
         INPUT:
 
-        - ``degree`` -- integer (default: ``None``); if not ``None``, return
-          only the monomials of the given degree
-
-        - ``algorithm`` -- string (default: ``"libsingular"``); if different
-          from the default, this will use the ``kbase()`` command from
-          Singular instead of libsingular
-
-        - ``singular`` -- instance of Singular interface (default: the default
-          instance); the singular interpreter to use when ``algorithm`` is not
-          ``"libsingular"``
+        - ``degree`` -- integer (default: ``None``)
+
+        - ``algorithm`` -- string (default: ``"libsingular"``); if not the
+          default, this will use the ``kbase()`` command from Singular
+
+        - ``singular`` -- the singular interpreter to use when ``algorithm`` is
+          not ``"libsingular"`` (default: the default instance)
+
+        OUTPUT:
+
+        Monomials in the basis. If ``degree`` is given, only the monomials of
+        the given degree.
```



---

Comment by git created at 2020-04-22 18:09:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2020-04-22 19:07:04

Thanks for the suggestions. I have implemented them accordingly. Indeed, it is good to keep backward compatibility when possible.


---

Comment by klee created at 2020-04-23 05:18:40

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-04-24 22:28:09

Resolution: fixed
