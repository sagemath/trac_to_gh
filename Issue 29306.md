# Issue 29306: normal_basis for positive-dimensional ideals

archive/issues_029306.json:
```json
{
    "body": "CC:  @kwankyu\n\nKeywords: singular\n\nThis ticket adds a `degree` option to the `normal_basis` method of ideals.\n\nThis allows to limit the output to monomials of a particular degree, which is useful when the corresponding quotient ring is not finite-dimensional as a vector space.\n\n```\nsage: R.<x,y,z> = QQ[]\nsage: I = R.ideal(x^2 + y^2 - 1)\nsage: [I.normal_basis(d) for d in (0..3)]\n[[1],\n [z, y, x],\n [z^2, y*z, x*z, y^2, x*y],\n [z^3, y*z^2, x*z^2, y^2*z, x*y*z, y^3, x*y^2]]\n```\n\nPreviously, the method could only be used when the quotient ring was finite-dimensional.\n\nThis functionality is provided by Singular. For reference, the corresponding Singular function is [kbase](https://www.singular.uni-kl.de/Manual/4-1-2/sing_275.htm#SEC315).\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29543\n\n",
    "closed_at": "2020-04-24T22:28:09Z",
    "created_at": "2020-04-21T18:58:07Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "normal_basis for positive-dimensional ideals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29306",
    "user": "https://github.com/mwageringel"
}
```
CC:  @kwankyu

Keywords: singular

This ticket adds a `degree` option to the `normal_basis` method of ideals.

This allows to limit the output to monomials of a particular degree, which is useful when the corresponding quotient ring is not finite-dimensional as a vector space.

```
sage: R.<x,y,z> = QQ[]
sage: I = R.ideal(x^2 + y^2 - 1)
sage: [I.normal_basis(d) for d in (0..3)]
[[1],
 [z, y, x],
 [z^2, y*z, x*z, y^2, x*y],
 [z^3, y*z^2, x*z^2, y^2*z, x*y*z, y^3, x*y^2]]
```

Previously, the method could only be used when the quotient ring was finite-dimensional.

This functionality is provided by Singular. For reference, the corresponding Singular function is [kbase](https://www.singular.uni-kl.de/Manual/4-1-2/sing_275.htm#SEC315).


Issue created by migration from https://trac.sagemath.org/ticket/29543





---

archive/issue_comments_414970.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414970",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414971.json:
```json
{
    "body": "Changing keywords from \"\" to \"singular\".",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414971",
    "user": "https://github.com/mwageringel"
}
```

Changing keywords from "" to "singular".



---

archive/issue_comments_414972.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414972",
    "user": "https://github.com/mwageringel"
}
```

New commits:



---

archive/issue_comments_414973.json:
```json
{
    "body": "Note that this change is backwards incompatible for anyone who was passing `algorithm` to `normal_basis` but not as a keyword. IMO, this is sufficiently unlikely to warrant additional action, but you could do a deprecation warning `if isinstance(degree, str):` to possibly catch this. I leave that choice up to you. Either way you decide, you can set a positive review (after adding the deprecation).",
    "created_at": "2020-04-22T02:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414973",
    "user": "https://github.com/tscrim"
}
```

Note that this change is backwards incompatible for anyone who was passing `algorithm` to `normal_basis` but not as a keyword. IMO, this is sufficiently unlikely to warrant additional action, but you could do a deprecation warning `if isinstance(degree, str):` to possibly catch this. I leave that choice up to you. Either way you decide, you can set a positive review (after adding the deprecation).



---

archive/issue_comments_414974.json:
```json
{
    "body": "Some comments:\n\n(1) An explicit OUTPUT seems better.\n\n```\n         INPUT:\n \n-        - ``degree`` -- integer; if not ``None``, return only the monomials of\n-          the given degree\n+        - ``degree`` -- ``None`` or integer\n+\n+        OUTPUT:\n+\n+        If ``degree`` is an integer, only the monomials of the given degree in\n+        the normal basis.\n```\n(2) Some trimming.\n\n```\n         \"\"\"\n-        Return a vector space basis (consisting of monomials) of the\n-        quotient ring of this ideal.\n+        Return a vector space basis of the quotient ring of this ideal.\n \n         INPUT:\n \n-        - ``degree`` -- integer (default: ``None``); if not ``None``, return\n-          only the monomials of the given degree\n-\n-        - ``algorithm`` -- string (default: ``\"libsingular\"``); if different\n-          from the default, this will use the ``kbase()`` command from\n-          Singular instead of libsingular\n-\n-        - ``singular`` -- instance of Singular interface (default: the default\n-          instance); the singular interpreter to use when ``algorithm`` is not\n-          ``\"libsingular\"``\n+        - ``degree`` -- integer (default: ``None``)\n+\n+        - ``algorithm`` -- string (default: ``\"libsingular\"``); if not the\n+          default, this will use the ``kbase()`` command from Singular\n+\n+        - ``singular`` -- the singular interpreter to use when ``algorithm`` is\n+          not ``\"libsingular\"`` (default: the default instance)\n+\n+        OUTPUT:\n+\n+        Monomials in the basis. If ``degree`` is given, only the monomials of\n+        the given degree.\n```",
    "created_at": "2020-04-22T07:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414974",
    "user": "https://github.com/kwankyu"
}
```

Some comments:

(1) An explicit OUTPUT seems better.

```
         INPUT:
 
-        - ``degree`` -- integer; if not ``None``, return only the monomials of
-          the given degree
+        - ``degree`` -- ``None`` or integer
+
+        OUTPUT:
+
+        If ``degree`` is an integer, only the monomials of the given degree in
+        the normal basis.
```
(2) Some trimming.

```
         """
-        Return a vector space basis (consisting of monomials) of the
-        quotient ring of this ideal.
+        Return a vector space basis of the quotient ring of this ideal.
 
         INPUT:
 
-        - ``degree`` -- integer (default: ``None``); if not ``None``, return
-          only the monomials of the given degree
-
-        - ``algorithm`` -- string (default: ``"libsingular"``); if different
-          from the default, this will use the ``kbase()`` command from
-          Singular instead of libsingular
-
-        - ``singular`` -- instance of Singular interface (default: the default
-          instance); the singular interpreter to use when ``algorithm`` is not
-          ``"libsingular"``
+        - ``degree`` -- integer (default: ``None``)
+
+        - ``algorithm`` -- string (default: ``"libsingular"``); if not the
+          default, this will use the ``kbase()`` command from Singular
+
+        - ``singular`` -- the singular interpreter to use when ``algorithm`` is
+          not ``"libsingular"`` (default: the default instance)
+
+        OUTPUT:
+
+        Monomials in the basis. If ``degree`` is given, only the monomials of
+        the given degree.
```



---

archive/issue_comments_414975.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-22T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414976.json:
```json
{
    "body": "Thanks for the suggestions. I have implemented them accordingly. Indeed, it is good to keep backward compatibility when possible.",
    "created_at": "2020-04-22T19:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414976",
    "user": "https://github.com/mwageringel"
}
```

Thanks for the suggestions. I have implemented them accordingly. Indeed, it is good to keep backward compatibility when possible.



---

archive/issue_comments_414977.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-23T05:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414977",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_414978.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-24T22:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29306#issuecomment-414978",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075397.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-24T22:28:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29306#event-75397"
}
```



---

archive/issue_events_075398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T02:15:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29306",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29306#event-75398"
}
```
