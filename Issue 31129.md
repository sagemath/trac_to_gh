# Issue 31129: docbuild: switch from optparse to argparse

archive/issues_031129.json:
```json
{
    "body": "Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).\n\nIssue created by migration from https://trac.sagemath.org/ticket/31366\n\n",
    "created_at": "2021-02-09T03:05:38Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "title": "docbuild: switch from optparse to argparse",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31129",
    "user": "jhpalmieri"
}
```
Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).

Issue created by migration from https://trac.sagemath.org/ticket/31366





---

archive/issue_comments_444714.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444714",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_444715.json:
```json
{
    "body": "a little bit in #32331",
    "created_at": "2021-08-03T19:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444715",
    "user": "chapoton"
}
```

a little bit in #32331



---

archive/issue_comments_444716.json:
```json
{
    "body": "first tentative\n----\nNew commits:",
    "created_at": "2021-08-04T08:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444716",
    "user": "chapoton"
}
```

first tentative
----
New commits:



---

archive/issue_comments_444717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-04T08:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444717",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444718.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-21T09:12:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444718",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444719.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T18:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444719",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444720.json:
```json
{
    "body": "not quite sure that it works perfectly, but it seems so",
    "created_at": "2021-10-29T18:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444720",
    "user": "chapoton"
}
```

not quite sure that it works perfectly, but it seems so



---

archive/issue_comments_444721.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-29T18:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444721",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_444722.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-10-30T06:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444722",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_444723.json:
```json
{
    "body": "needs work\n\n```\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 1558, in setup_parser\n[dochtml]     description=help_description(compact=True))\n[dochtml] TypeError: __init__() got an unexpected keyword argument 'add_help_option'\n```\n",
    "created_at": "2021-10-30T06:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444723",
    "user": "chapoton"
}
```

needs work

```
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1558, in setup_parser
[dochtml]     description=help_description(compact=True))
[dochtml] TypeError: __init__() got an unexpected keyword argument 'add_help_option'
```




---

archive/issue_comments_444724.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-30T08:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444724",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444725.json:
```json
{
    "body": "I'm getting the message `AttributeError: module 'argparse' has no attribute 'OptionGroup'`. I can't tell what the right replacement is \u2014\u00a0`add_argument_group`? `add_subparser`?",
    "created_at": "2021-10-31T01:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444725",
    "user": "jhpalmieri"
}
```

I'm getting the message `AttributeError: module 'argparse' has no attribute 'OptionGroup'`. I can't tell what the right replacement is — `add_argument_group`? `add_subparser`?



---

archive/issue_comments_444726.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-31T07:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444726",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444727.json:
```json
{
    "body": "here is a tentative. I had no time to check",
    "created_at": "2021-10-31T07:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444727",
    "user": "chapoton"
}
```

here is a tentative. I had no time to check



---

archive/issue_comments_444728.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-31T09:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444728",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444729.json:
```json
{
    "body": "more fixes, but apparently not ok yet",
    "created_at": "2021-10-31T09:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444729",
    "user": "chapoton"
}
```

more fixes, but apparently not ok yet



---

archive/issue_comments_444730.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-31T17:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444730",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444731.json:
```json
{
    "body": "I tried implementing this a while ago (before your branch), so here are some contributions to your branch from my attempts. They help, but not sure if they are good enough yet.",
    "created_at": "2021-10-31T17:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444731",
    "user": "jhpalmieri"
}
```

I tried implementing this a while ago (before your branch), so here are some contributions to your branch from my attempts. They help, but not sure if they are good enough yet.



---

archive/issue_comments_444732.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-31T18:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444732",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444733.json:
```json
{
    "body": "I was working on that right now. I had to merge my branch with yours, hopefully in a correct way. Starts to look better.",
    "created_at": "2021-10-31T18:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444733",
    "user": "chapoton"
}
```

I was working on that right now. I had to merge my branch with yours, hopefully in a correct way. Starts to look better.



---

archive/issue_comments_444734.json:
```json
{
    "body": "Yes, much better. We have to figure how to allow commands like `./sage --docbuild -h`, which currently says\n\n```\nusage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n__main__.py: error: the following arguments are required: document, format\n```\n",
    "created_at": "2021-10-31T21:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444734",
    "user": "jhpalmieri"
}
```

Yes, much better. We have to figure how to allow commands like `./sage --docbuild -h`, which currently says

```
usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)
__main__.py: error: the following arguments are required: document, format
```




---

archive/issue_comments_444735.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-01T09:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444735",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444736.json:
```json
{
    "body": "more progress done.",
    "created_at": "2021-11-01T09:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444736",
    "user": "chapoton"
}
```

more progress done.



---

archive/issue_comments_444737.json:
```json
{
    "body": "and the bot+linter are now green ; still needs tests and double-check, for sure",
    "created_at": "2021-11-01T10:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444737",
    "user": "chapoton"
}
```

and the bot+linter are now green ; still needs tests and double-check, for sure



---

archive/issue_comments_444738.json:
```json
{
    "body": "Looks very close now, docs build and tests pass.\n\nThe old version exited gracefully with the help message if you ran `./sage --docbuild`, whereas this one prints an error message instead.\n\nAnother difference. Old:\n\n```\n% ./sage --docbuild -h\nUsage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n\nBuild or return information about Sage documentation.\n\n    DOCUMENT    name of the document to build\n    FORMAT      document output format\n    COMMAND     document-specific command\n\nNote that DOCUMENT may have the form 'file=/path/to/FILE',\nwhich builds the documentation for the specified file.\n\nA DOCUMENT and either a FORMAT or a COMMAND are required,\nunless a list of one or more of these is requested.\n\nOPTIONS:\n  Standard:\n```\n\nNew:\n\n```\n% ./sage --docbuild -h\nusage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n\nBuild or return information about Sage documentation. DOCUMENT name of the document to\nbuild FORMAT document output format COMMAND document-specific command Note that DOCUMENT\nmay have the form 'file=/path/to/FILE', which builds the documentation for the specified\nfile. A DOCUMENT and either a FORMAT or a COMMAND are required, unless a list of one or\nmore of these is requested.\n\npositional arguments:\n  document\n  {html,pdf,changes,htmlhelp,inventory,json,latex,linkcheck,pickle,web}\n\nStandard:\n```\n\nAny idea why it's not preserving the line breaks in the help message? We could try the following changes, but I would like to understand why it's not respecting our formatting for the strings.\n\n```diff\ndiff --git a/src/sage_docbuild/__init__.py b/src/sage_docbuild/__init__.py\nindex 1f692f1abe..84a6444ec1 100644\n--- a/src/sage_docbuild/__init__.py\n+++ b/src/sage_docbuild/__init__.py\n@@ -1385,9 +1385,6 @@ def help_description(s=\"\", compact=False):\n     character.\n     \"\"\"\n     s += \"Build or return information about Sage documentation.\\n\\n\"\n-    s += \"    DOCUMENT    name of the document to build\\n\"\n-    s += \"    FORMAT      document output format\\n\"\n-    s += \"    COMMAND     document-specific command\\n\\n\"\n     s += \"Note that DOCUMENT may have the form 'file=/path/to/FILE',\\n\"\n     s += \"which builds the documentation for the specified file.\\n\\n\"\n     s += \"A DOCUMENT and either a FORMAT or a COMMAND are required,\\n\"\n@@ -1625,8 +1622,10 @@ def setup_parser():\n                           help=\"if ARG is 'reference', list all subdocuments\"\n                           \" of en/reference. If ARG is 'all', list all main\"\n                           \" documents\")\n-    parser.add_argument(\"document\", nargs='?', type=str)\n-    parser.add_argument(\"format\", nargs='?', type=str, choices=get_formats())\n+    parser.add_argument(\"document\", nargs='?', type=str,\n+                        help='name of the document to build')\n+    parser.add_argument(\"format\", nargs='?', type=str, choices=get_formats(),\n+                        help='document output format')\n     return parser\n \n \n@@ -1722,7 +1721,8 @@ def main():\n     # trying to build.\n     name, typ = args.document, args.format\n     if not name or not type:\n-        raise ValueError('both document and format should be given')\n+        parser.print_help()\n+        sys.exit(1)\n \n     # Set up module-wide logging.\n     setup_logger(args.verbose, args.color)\n```\n",
    "created_at": "2021-11-02T03:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444738",
    "user": "jhpalmieri"
}
```

Looks very close now, docs build and tests pass.

The old version exited gracefully with the help message if you ran `./sage --docbuild`, whereas this one prints an error message instead.

Another difference. Old:

```
% ./sage --docbuild -h
Usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)

Build or return information about Sage documentation.

    DOCUMENT    name of the document to build
    FORMAT      document output format
    COMMAND     document-specific command

Note that DOCUMENT may have the form 'file=/path/to/FILE',
which builds the documentation for the specified file.

A DOCUMENT and either a FORMAT or a COMMAND are required,
unless a list of one or more of these is requested.

OPTIONS:
  Standard:
```

New:

```
% ./sage --docbuild -h
usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)

Build or return information about Sage documentation. DOCUMENT name of the document to
build FORMAT document output format COMMAND document-specific command Note that DOCUMENT
may have the form 'file=/path/to/FILE', which builds the documentation for the specified
file. A DOCUMENT and either a FORMAT or a COMMAND are required, unless a list of one or
more of these is requested.

positional arguments:
  document
  {html,pdf,changes,htmlhelp,inventory,json,latex,linkcheck,pickle,web}

Standard:
```

Any idea why it's not preserving the line breaks in the help message? We could try the following changes, but I would like to understand why it's not respecting our formatting for the strings.

```diff
diff --git a/src/sage_docbuild/__init__.py b/src/sage_docbuild/__init__.py
index 1f692f1abe..84a6444ec1 100644
--- a/src/sage_docbuild/__init__.py
+++ b/src/sage_docbuild/__init__.py
@@ -1385,9 +1385,6 @@ def help_description(s="", compact=False):
     character.
     """
     s += "Build or return information about Sage documentation.\n\n"
-    s += "    DOCUMENT    name of the document to build\n"
-    s += "    FORMAT      document output format\n"
-    s += "    COMMAND     document-specific command\n\n"
     s += "Note that DOCUMENT may have the form 'file=/path/to/FILE',\n"
     s += "which builds the documentation for the specified file.\n\n"
     s += "A DOCUMENT and either a FORMAT or a COMMAND are required,\n"
@@ -1625,8 +1622,10 @@ def setup_parser():
                           help="if ARG is 'reference', list all subdocuments"
                           " of en/reference. If ARG is 'all', list all main"
                           " documents")
-    parser.add_argument("document", nargs='?', type=str)
-    parser.add_argument("format", nargs='?', type=str, choices=get_formats())
+    parser.add_argument("document", nargs='?', type=str,
+                        help='name of the document to build')
+    parser.add_argument("format", nargs='?', type=str, choices=get_formats(),
+                        help='document output format')
     return parser
 
 
@@ -1722,7 +1721,8 @@ def main():
     # trying to build.
     name, typ = args.document, args.format
     if not name or not type:
-        raise ValueError('both document and format should be given')
+        parser.print_help()
+        sys.exit(1)
 
     # Set up module-wide logging.
     setup_logger(args.verbose, args.color)
```




---

archive/issue_comments_444739.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-05T19:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444739",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444740.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-05T20:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444740",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444741.json:
```json
{
    "body": "here is a new tentative",
    "created_at": "2021-11-05T20:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444741",
    "user": "chapoton"
}
```

here is a new tentative



---

archive/issue_comments_444742.json:
```json
{
    "body": "Looks good. I have a few more proposed changes: two of the \"examples\" in `help_examples` don't work, so I am fixing one and changing one. Also, `./sage --docbuild -H` used to print a longer message, and I am restoring that. Let me know if you object to any of these changes, of course.",
    "created_at": "2021-11-06T02:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444742",
    "user": "jhpalmieri"
}
```

Looks good. I have a few more proposed changes: two of the "examples" in `help_examples` don't work, so I am fixing one and changing one. Also, `./sage --docbuild -H` used to print a longer message, and I am restoring that. Let me know if you object to any of these changes, of course.



---

archive/issue_comments_444743.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-06T02:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444743",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444744.json:
```json
{
    "body": "A bit more explanation: `./sage -FDC all` used to print formats, documents, and commands, but now it just prints formats and exits. Also, the `-S` option requires `-S=-OPTS` because of the hyphen in `OPTS`; this appears to be a known issue with argparse: https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it. Finally, `./sage --docbuild developer -j html` is not good: the document and format should come first, the `-j` just confuses things (and isn't necessary anyway, since mathjax has been the default forever).",
    "created_at": "2021-11-06T02:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444744",
    "user": "jhpalmieri"
}
```

A bit more explanation: `./sage -FDC all` used to print formats, documents, and commands, but now it just prints formats and exits. Also, the `-S` option requires `-S=-OPTS` because of the hyphen in `OPTS`; this appears to be a known issue with argparse: https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it. Finally, `./sage --docbuild developer -j html` is not good: the document and format should come first, the `-j` just confuses things (and isn't necessary anyway, since mathjax has been the default forever).



---

archive/issue_comments_444745.json:
```json
{
    "body": "Ready for review? I am happy with your changes.",
    "created_at": "2021-11-27T00:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444745",
    "user": "jhpalmieri"
}
```

Ready for review? I am happy with your changes.



---

archive/issue_comments_444746.json:
```json
{
    "body": "I would say so. I have forgotten if there were remaining issues or not.",
    "created_at": "2021-11-27T07:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444746",
    "user": "chapoton"
}
```

I would say so. I have forgotten if there were remaining issues or not.



---

archive/issue_comments_444747.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-27T07:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444747",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_444748.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-29T21:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444748",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-29T21:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444749",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_444750.json:
```json
{
    "body": "Okay, let's merge it. (I added #32946 as a dependency because otherwise there would be a merge conflict.)",
    "created_at": "2021-11-29T21:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444750",
    "user": "jhpalmieri"
}
```

Okay, let's merge it. (I added #32946 as a dependency because otherwise there would be a merge conflict.)



---

archive/issue_comments_444751.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-12T15:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31129#issuecomment-444751",
    "user": "vbraun"
}
```

Resolution: fixed
