# Issue 13123: p_group_cohomology 2.1.3

archive/issues_013123.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  david.green@uni-jena.de @jhpalmieri\n\nKeywords: group cohomology\n\nThere is a new version of the optional p_group_cohomology package.\n\n**__Installation__**\n\nFirst, install Gap's Small Groups library (contained in the database_gap spkg). Then, do\n\n```\nsage -i http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg\n```\n\n\n**__Testing__**\n\nIf the environment variable `SAGE_CHECK` is set to `yes`, then a test suite is run. This will take a considerable amount of time (the test coverage is 100%). Parallel testing is possible by setting the environment variable `SAGE_NUMBER_THREADS` to the number of threads being used.\n\n**__Documentation__**\n\nSet the environment variable SAGE_SPKG_INSTALL_DOCS to yes. Then, while installing the package, the documentation will be put into `SAGE_ROOT/local/share/doc/p_group_cohomology/html/`. Or see [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)\n\n**__Reasons for upgrading__**\n\n__Name mangling__\n\nThere has been yet another Cython upgrade between sage-5.0 and sage-5.2. By consequence, Python's infamous name mangling now also applies to Python classes defined in Cython code:\n\n```\nsage: cython(\"\"\"\n....: class Foo:\n....:     def __init__(self):\n....:         self.__cache = \"hi\"\n....: \"\"\")\nsage: F = Foo()\nsage: F.__cache\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/home/simon/SAGE/prerelease/sage-5.2.rc0/<ipython console> in <module>()\n\nAttributeError: Foo instance has no attribute '__cache'\nsage: F._Foo__cache\n'hi'\n```\n\nIn Sage-5.0, the attribute `F.__cache` would be available. Hence, I had to rename some attributes.\n\n__Storing Gap data__\n\nSome computed data (e.g., ideals in the cohomology ring simultaneously restricting to zero on a given set of subgroups) are defined in terms of data in Gap (namely, subgroups). We would like to store such data, since obviously we don't want to recompute everything from scratch.\n\nUnfortunately, pickling of general Gap objects is not available. The new spkg version works around, so that pickling works, provided that the Gap object can be reconstructed from its string representation (which holds, e.g., for permutation groups).\n\n__Use lower bounds for the depth__\n\nSome completeness criteria benefit from knowing a good estimate for the depth. In some cases, a good estimate is difficult to obtain. In the new spkg version, the computation of a good bound can be interrupted by Ctrl-C, and then an easier (but potentially weaker) bound is used.\n\n__New web repository__\n\nDue to a hardware problem on sage.math, the data in the old web repository are lost. Meanwhile I reconstructed the data and put them to a new location (namely my home directory on sage.math) which has a back-up. The new spkg version knows about the new location of the repository.\n\n__Creating a private data base__\n\nWhen creating a \"private\" data base of cohomology rings, symbolic links to the \"public\" data base (shipped with the package) are created. The old spkg version did sometimes fail to create the symbolic links.\n\n__A fix for `MeatAxe` matrices__\n\nIn the old spkg version, comparing an MTX matrix with None would have resulted in a crash.\n\n**__Information for the reviewer__**\n\nI successfully installed and tested the package with sage-5.2.rc0 on an `OpenSuse` laptop and on bsd.math. It would be nice to test it on a variety of platforms, in particular on machines of different endianness, or on 32-bit machines.\n\nApart from that, there is not much new mathematics in the spkg: It is mainly a bug fix release (coping with the Cython upgrade).\n\n__SPKG__\n\nhttp://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/13295\n\n",
    "created_at": "2012-07-26T15:35:36Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "p_group_cohomology 2.1.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13123",
    "user": "@simon-king-jena"
}
```
Assignee: tbd

CC:  david.green@uni-jena.de @jhpalmieri

Keywords: group cohomology

There is a new version of the optional p_group_cohomology package.

**__Installation__**

First, install Gap's Small Groups library (contained in the database_gap spkg). Then, do

```
sage -i http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg
```


**__Testing__**

If the environment variable `SAGE_CHECK` is set to `yes`, then a test suite is run. This will take a considerable amount of time (the test coverage is 100%). Parallel testing is possible by setting the environment variable `SAGE_NUMBER_THREADS` to the number of threads being used.

**__Documentation__**

Set the environment variable SAGE_SPKG_INSTALL_DOCS to yes. Then, while installing the package, the documentation will be put into `SAGE_ROOT/local/share/doc/p_group_cohomology/html/`. Or see [here](http://sage.math.washington.edu/home/SimonKing/Cohomology/)

**__Reasons for upgrading__**

__Name mangling__

There has been yet another Cython upgrade between sage-5.0 and sage-5.2. By consequence, Python's infamous name mangling now also applies to Python classes defined in Cython code:

```
sage: cython("""
....: class Foo:
....:     def __init__(self):
....:         self.__cache = "hi"
....: """)
sage: F = Foo()
sage: F.__cache
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/simon/SAGE/prerelease/sage-5.2.rc0/<ipython console> in <module>()

AttributeError: Foo instance has no attribute '__cache'
sage: F._Foo__cache
'hi'
```

In Sage-5.0, the attribute `F.__cache` would be available. Hence, I had to rename some attributes.

__Storing Gap data__

Some computed data (e.g., ideals in the cohomology ring simultaneously restricting to zero on a given set of subgroups) are defined in terms of data in Gap (namely, subgroups). We would like to store such data, since obviously we don't want to recompute everything from scratch.

Unfortunately, pickling of general Gap objects is not available. The new spkg version works around, so that pickling works, provided that the Gap object can be reconstructed from its string representation (which holds, e.g., for permutation groups).

__Use lower bounds for the depth__

Some completeness criteria benefit from knowing a good estimate for the depth. In some cases, a good estimate is difficult to obtain. In the new spkg version, the computation of a good bound can be interrupted by Ctrl-C, and then an easier (but potentially weaker) bound is used.

__New web repository__

Due to a hardware problem on sage.math, the data in the old web repository are lost. Meanwhile I reconstructed the data and put them to a new location (namely my home directory on sage.math) which has a back-up. The new spkg version knows about the new location of the repository.

__Creating a private data base__

When creating a "private" data base of cohomology rings, symbolic links to the "public" data base (shipped with the package) are created. The old spkg version did sometimes fail to create the symbolic links.

__A fix for `MeatAxe` matrices__

In the old spkg version, comparing an MTX matrix with None would have resulted in a crash.

**__Information for the reviewer__**

I successfully installed and tested the package with sage-5.2.rc0 on an `OpenSuse` laptop and on bsd.math. It would be nice to test it on a variety of platforms, in particular on machines of different endianness, or on 32-bit machines.

Apart from that, there is not much new mathematics in the spkg: It is mainly a bug fix release (coping with the Cython upgrade).

__SPKG__

http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg

Issue created by migration from https://trac.sagemath.org/ticket/13295





---

archive/issue_comments_159715.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-29T23:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159715",
    "user": "@simon-king-jena"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_159716.json:
```json
{
    "body": "A few minutes ago, I posted a [modified spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg) (still version 2.1.3). I am sorry if you already downloaded the previously posted spkg.\n\nPlease make sure you got the right spkg: There should now be a mew method `pGroupCohomology.modular_cohomology.MODCOHO.parameter_degrees_over_field_extension`.\n\nThe reason for the change is that in the last few days I improved the heuristics to choose between different methods to construct or to prove the existence of parameters. For example, consider the mod 2 cohomology of `SmallGroup(384, 5602)` (which occurs when computing the mod 2 cohomology of the symmetric group of degree 8). The cohomology ring can be presented in degree 6, but the previously posted spkg could detect completeness only in degree 10, using Symonds' criterion. But the current spkg can prove completeness in degree 7, using the Hilbert-Poincar\u00e9 criterion.\n\nThis is a new doctest.\n\nSpeaking about doctests: I still need to run the test suite on bsd.math, and post the current documentation on the project page.",
    "created_at": "2012-07-29T23:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159716",
    "user": "@simon-king-jena"
}
```

A few minutes ago, I posted a [modified spkg](http://sage.math.washington.edu/home/SimonKing/Cohomology/p_group_cohomology-2.1.3.spkg) (still version 2.1.3). I am sorry if you already downloaded the previously posted spkg.

Please make sure you got the right spkg: There should now be a mew method `pGroupCohomology.modular_cohomology.MODCOHO.parameter_degrees_over_field_extension`.

The reason for the change is that in the last few days I improved the heuristics to choose between different methods to construct or to prove the existence of parameters. For example, consider the mod 2 cohomology of `SmallGroup(384, 5602)` (which occurs when computing the mod 2 cohomology of the symmetric group of degree 8). The cohomology ring can be presented in degree 6, but the previously posted spkg could detect completeness only in degree 10, using Symonds' criterion. But the current spkg can prove completeness in degree 7, using the Hilbert-Poincaré criterion.

This is a new doctest.

Speaking about doctests: I still need to run the test suite on bsd.math, and post the current documentation on the project page.



---

archive/issue_comments_159717.json:
```json
{
    "body": "The tests on bsd.math pass. Building the documentation, I found a typo (wrong indentation) in the docs of the new method. Hence, unfortunately, I had to repost the package again (I am sorry).\n\nThe documentation is now put on the [project page](http://sage.math.washington.edu/home/SimonKing/Cohomology/).",
    "created_at": "2012-07-30T00:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159717",
    "user": "@simon-king-jena"
}
```

The tests on bsd.math pass. Building the documentation, I found a typo (wrong indentation) in the docs of the new method. Hence, unfortunately, I had to repost the package again (I am sorry).

The documentation is now put on the [project page](http://sage.math.washington.edu/home/SimonKing/Cohomology/).



---

archive/issue_comments_159718.json:
```json
{
    "body": "I already heard of users who tried to install the package version that is currently shipped with Sage - which fails for the reasons stated in the ticket description. Hence, I'd appreciate a review of the new version, so that people do not need to get an inofficial version from my web pages.\n\nNote, however, that the currently posted new package will not work with the new versions of GAP (#13211) and Singular (#13237). I had not the time to analyse what happened, but I guess that the errors are due to a change in the random number generator in GAP - I expect the results will still be correct up to isomorphism, but differ from the expected ring presentations. At some point I'll have to take care of that.",
    "created_at": "2012-09-02T15:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159718",
    "user": "@simon-king-jena"
}
```

I already heard of users who tried to install the package version that is currently shipped with Sage - which fails for the reasons stated in the ticket description. Hence, I'd appreciate a review of the new version, so that people do not need to get an inofficial version from my web pages.

Note, however, that the currently posted new package will not work with the new versions of GAP (#13211) and Singular (#13237). I had not the time to analyse what happened, but I guess that the errors are due to a change in the random number generator in GAP - I expect the results will still be correct up to isomorphism, but differ from the expected ring presentations. At some point I'll have to take care of that.



---

archive/issue_comments_159719.json:
```json
{
    "body": "Hi Simon,\n\nI'm going to try building this on several platforms. Meanwhile, here are one or two things which need easy fixes:\n\n- the repository isn't clean: there is a file \"spkg-check.orig\" present.\n- In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.",
    "created_at": "2012-09-03T05:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159719",
    "user": "@jhpalmieri"
}
```

Hi Simon,

I'm going to try building this on several platforms. Meanwhile, here are one or two things which need easy fixes:

- the repository isn't clean: there is a file "spkg-check.orig" present.
- In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.



---

archive/issue_comments_159720.json:
```json
{
    "body": "Replying to [comment:5 jhpalmieri]:\n> Hi Simon,\n> \n> I'm going to try building this on several platforms. Meanwhile, here are one or two things which need easy fixes:\n> \n> - the repository isn't clean: there is a file \"spkg-check.orig\" present.\n\nThank you for spotting that!\n\n> - In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.\n\nCool, I didn't know about that one. Hence, if you define `MAKE=\"make -j4` then the variable will automatically be fine?",
    "created_at": "2012-09-03T05:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159720",
    "user": "@simon-king-jena"
}
```

Replying to [comment:5 jhpalmieri]:
> Hi Simon,
> 
> I'm going to try building this on several platforms. Meanwhile, here are one or two things which need easy fixes:
> 
> - the repository isn't clean: there is a file "spkg-check.orig" present.

Thank you for spotting that!

> - In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.

Cool, I didn't know about that one. Hence, if you define `MAKE="make -j4` then the variable will automatically be fine?



---

archive/issue_comments_159721.json:
```json
{
    "body": "Replying to [comment:6 SimonKing]:\n> Replying to [comment:5 jhpalmieri]:\n> > - In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.\n> \n> Cool, I didn't know about that one. Hence, if you define `MAKE=\"make -j4\"` then the variable will automatically be fine?\n\nThat's right. If you want, you could mention in the documentation (or in the comments in spkg-check) that it suffices to set `MAKE`.",
    "created_at": "2012-09-03T05:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159721",
    "user": "@jhpalmieri"
}
```

Replying to [comment:6 SimonKing]:
> Replying to [comment:5 jhpalmieri]:
> > - In spkg-check, I would suggest changing `SAGE_NUMBER_THREADS` to `SAGE_NUM_THREADS`, since the latter variable is set automatically in `SAGE_ROOT/spkg/bin/sage-env`.
> 
> Cool, I didn't know about that one. Hence, if you define `MAKE="make -j4"` then the variable will automatically be fine?

That's right. If you want, you could mention in the documentation (or in the comments in spkg-check) that it suffices to set `MAKE`.



---

archive/issue_comments_159722.json:
```json
{
    "body": "Otherwise, this looks good to me. It builds and passes tests on several different platforms (linux, OS X 10.7, OpenSolaris). So if you fix the two small issues, positive review.",
    "created_at": "2012-09-03T17:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159722",
    "user": "@jhpalmieri"
}
```

Otherwise, this looks good to me. It builds and passes tests on several different platforms (linux, OS X 10.7, OpenSolaris). So if you fix the two small issues, positive review.



---

archive/issue_comments_159723.json:
```json
{
    "body": "Sorry that it took so long to fix the remaining issues. I have updated the spkg.\n\nhg status is now fine, and am now using `SAGE_NUM_THREADS` instead of `SAGE_NUMBER_THREADS`.\n\nCaveat: I need to test it (e.g., on bsd.math) with the latest sage prerelease - just in case. As much as I know, upgrading GAP #13211 will break a couple of things. So, the current spkg version may soon be obsolete... :(",
    "created_at": "2012-10-10T10:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159723",
    "user": "@simon-king-jena"
}
```

Sorry that it took so long to fix the remaining issues. I have updated the spkg.

hg status is now fine, and am now using `SAGE_NUM_THREADS` instead of `SAGE_NUMBER_THREADS`.

Caveat: I need to test it (e.g., on bsd.math) with the latest sage prerelease - just in case. As much as I know, upgrading GAP #13211 will break a couple of things. So, the current spkg version may soon be obsolete... :(



---

archive/issue_comments_159724.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-10T10:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159724",
    "user": "@simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_159725.json:
```json
{
    "body": "Arrgh.\n\n```\nWriting /scratch/sking/sage-5.4.rc0/local/lib/python2.7/site-packages/pGroupCohomology-2.1.1-py2.7.egg-info\nTraceback (most recent call last):\n  File \"setup.py\", line 144, in <module>\n    from sage.misc.misc import SAGE_DATA\nImportError: cannot import name SAGE_DATA\n```\n\nThis happens after a seemingly successful installation.\n\nHas `SAGE_DATA` been relocated? How unfortunate. Need to fix it.",
    "created_at": "2012-10-10T10:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159725",
    "user": "@simon-king-jena"
}
```

Arrgh.

```
Writing /scratch/sking/sage-5.4.rc0/local/lib/python2.7/site-packages/pGroupCohomology-2.1.1-py2.7.egg-info
Traceback (most recent call last):
  File "setup.py", line 144, in <module>
    from sage.misc.misc import SAGE_DATA
ImportError: cannot import name SAGE_DATA
```

This happens after a seemingly successful installation.

Has `SAGE_DATA` been relocated? How unfortunate. Need to fix it.



---

archive/issue_comments_159726.json:
```json
{
    "body": "Apparently #13123 has changed SAGE_DATA. In particular, it seems that it is still available as an environment variable, but is not available from sage.misc.misc (which used to be the case until recently).",
    "created_at": "2012-10-10T10:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159726",
    "user": "@simon-king-jena"
}
```

Apparently #13123 has changed SAGE_DATA. In particular, it seems that it is still available as an environment variable, but is not available from sage.misc.misc (which used to be the case until recently).



---

archive/issue_comments_159727.json:
```json
{
    "body": "The spkg is now updated again. The package and its documentation build fine on bsd.math.\n\nI am now running the tests on bsd.math, and i already found some that fail (although most seem to pass). No idea if that is due to a recent Singular upgrade...\n\nAnyway, it again needs work, because of the test failures.",
    "created_at": "2012-10-10T11:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159727",
    "user": "@simon-king-jena"
}
```

The spkg is now updated again. The package and its documentation build fine on bsd.math.

I am now running the tests on bsd.math, and i already found some that fail (although most seem to pass). No idea if that is due to a recent Singular upgrade...

Anyway, it again needs work, because of the test failures.



---

archive/issue_comments_159728.json:
```json
{
    "body": "I got\n\n```\nSummary\n-------\n\nThe following tests fail:\n  pGroupCohomology\n  pGroupCohomology.barcode\n  pGroupCohomology.cochain.COCH.__init__\n  pGroupCohomology.cochain.ChMap.__setitem__\n  pGroupCohomology.cohomology.COHO.bar_code\n  pGroupCohomology.cohomology.COHO.essential_ideal\n  pGroupCohomology.factory.CohomologyRingFactory.set_web_db\nTotal time: 1154.94 sec\n```\n\nThe good news is that `export MAKE=\"make -j3\"` was enough to get parallel tests. The bad news is that the errors seem to have different reasons, and so far I don't understand any of them. In some case, it seems that files have not been written.",
    "created_at": "2012-10-10T12:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159728",
    "user": "@simon-king-jena"
}
```

I got

```
Summary
-------

The following tests fail:
  pGroupCohomology
  pGroupCohomology.barcode
  pGroupCohomology.cochain.COCH.__init__
  pGroupCohomology.cochain.ChMap.__setitem__
  pGroupCohomology.cohomology.COHO.bar_code
  pGroupCohomology.cohomology.COHO.essential_ideal
  pGroupCohomology.factory.CohomologyRingFactory.set_web_db
Total time: 1154.94 sec
```

The good news is that `export MAKE="make -j3"` was enough to get parallel tests. The bad news is that the errors seem to have different reasons, and so far I don't understand any of them. In some case, it seems that files have not been written.



---

archive/issue_comments_159729.json:
```json
{
    "body": "Here are some of the failures:\n\n----\n\n\n```\n    sage: (I*I).NF('std(0)').interred()  #long time\nExpected:\n    a_4_8*a_6_8*a_1_0^3*a_1_3\nGot:\n    a_4_8*a_6_8*a_1_0^3*a_1_3,\n    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3\n```\n\nThat's serious, because it is a different result.\n\n----\n\n\n```\n    RuntimeError: Gap produced error output\n    Error, no 1st choice method found for `ReadLine' on 1 arguments\n\n       executing makeThisSmallGroup([16,2],\"/Users/SimonKing/.sage/pGroupCohomology/db/\");\n```\n\nIndeed:\n\n```\nsage: from pGroupCohomology import CohomologyRing\nsage: H = CohomologyRing(16,2,from_scratch=True, options='prot')\n    Computing from scratch\nGroup data are rooted at /Users/SimonKing/.sage/pGroupCohomology/db/\n    Initialize cohomology ring of SmallGroup(16,2)\n    Computing data for Small Group number 2 of order 16\nTraceback (most recent call last):\n...\nRuntimeError: Gap produced error output\nError, no 1st choice method found for `ReadLine' on 1 arguments\n\n   executing makeThisSmallGroup([16,2],\"/Users/SimonKing/.sage/pGroupCohomology/db/\");\n```\n\n\n----\n\n\n```\npGroupCohomology.cochain.COCH.__init__:\nsage -t -optional -long \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_6.py\"\nError: saveUrbildGB: opening outfile.\n```\n\n\n```\npGroupCohomology.cochain.ChMap.__setitem__:\nsage -t -optional -long \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_116.py\"\nError: saveUrbildGB: opening outfile.\n\n\t [2.3 s]\n```\n\n\n----\n\n\n```\npGroupCohomology.factory.CohomologyRingFactory.set_web_db:\nsage -t -optional -long \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_21.py\"\n**********************************************************************\nFile \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_21.py\", line 22:\n    sage: H=CohomologyRing.web_db('8gp3') # optional - internet\nException raised:\n    Traceback (most recent call last):\n    ...\n    IOError: [Errno 2] No such file or directory: '/Users/SimonKing/.sage/pGroupCohomology/db/8gp3/dat/L8gp3n3d2.sobj'\n```\n\n\n----\n\nCould it be that these are all I/O errors, except the first error? Perhaps a race condition when running parallel tests (one test blocking file access of other tests)?",
    "created_at": "2012-10-10T12:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159729",
    "user": "@simon-king-jena"
}
```

Here are some of the failures:

----


```
    sage: (I*I).NF('std(0)').interred()  #long time
Expected:
    a_4_8*a_6_8*a_1_0^3*a_1_3
Got:
    a_4_8*a_6_8*a_1_0^3*a_1_3,
    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3
```

That's serious, because it is a different result.

----


```
    RuntimeError: Gap produced error output
    Error, no 1st choice method found for `ReadLine' on 1 arguments

       executing makeThisSmallGroup([16,2],"/Users/SimonKing/.sage/pGroupCohomology/db/");
```

Indeed:

```
sage: from pGroupCohomology import CohomologyRing
sage: H = CohomologyRing(16,2,from_scratch=True, options='prot')
    Computing from scratch
Group data are rooted at /Users/SimonKing/.sage/pGroupCohomology/db/
    Initialize cohomology ring of SmallGroup(16,2)
    Computing data for Small Group number 2 of order 16
Traceback (most recent call last):
...
RuntimeError: Gap produced error output
Error, no 1st choice method found for `ReadLine' on 1 arguments

   executing makeThisSmallGroup([16,2],"/Users/SimonKing/.sage/pGroupCohomology/db/");
```


----


```
pGroupCohomology.cochain.COCH.__init__:
sage -t -optional -long "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_6.py"
Error: saveUrbildGB: opening outfile.
```


```
pGroupCohomology.cochain.ChMap.__setitem__:
sage -t -optional -long "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_116.py"
Error: saveUrbildGB: opening outfile.

	 [2.3 s]
```


----


```
pGroupCohomology.factory.CohomologyRingFactory.set_web_db:
sage -t -optional -long "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_21.py"
**********************************************************************
File "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/39746/dir_0/file_21.py", line 22:
    sage: H=CohomologyRing.web_db('8gp3') # optional - internet
Exception raised:
    Traceback (most recent call last):
    ...
    IOError: [Errno 2] No such file or directory: '/Users/SimonKing/.sage/pGroupCohomology/db/8gp3/dat/L8gp3n3d2.sobj'
```


----

Could it be that these are all I/O errors, except the first error? Perhaps a race condition when running parallel tests (one test blocking file access of other tests)?



---

archive/issue_comments_159730.json:
```json
{
    "body": "Rerunning the tests with a single thread, I get less errors:\n\n```\nThe following tests fail:\n  pGroupCohomology\n  pGroupCohomology.barcode\n  pGroupCohomology.cohomology.COHO.bar_code\n  pGroupCohomology.cohomology.COHO.essential_ideal\n  pGroupCohomology.factory.CohomologyRingFactory.set_web_db\nTotal time: 2656.55 sec\n```\n\nNext, I'll try again after wiping the .sage/pGroupCohomology/db/.",
    "created_at": "2012-10-10T13:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159730",
    "user": "@simon-king-jena"
}
```

Rerunning the tests with a single thread, I get less errors:

```
The following tests fail:
  pGroupCohomology
  pGroupCohomology.barcode
  pGroupCohomology.cohomology.COHO.bar_code
  pGroupCohomology.cohomology.COHO.essential_ideal
  pGroupCohomology.factory.CohomologyRingFactory.set_web_db
Total time: 2656.55 sec
```

Next, I'll try again after wiping the .sage/pGroupCohomology/db/.



---

archive/issue_comments_159731.json:
```json
{
    "body": "Indeed it seems to be some kind of corruption in my home directory. After removing `~/.sage/pGroupCohomology` and re-installation of the package, I'm left with two copies of a single error:\n\n```\npGroupCohomology:\nFile \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/77179/dir_0/file_0.py\"\n, line 941:\n    sage: (I*I).NF('std(0)').interred()  #long time\nExpected: \n    a_4_8*a_6_8*a_1_0^3*a_1_3\nGot:\n    a_4_8*a_6_8*a_1_0^3*a_1_3,\n    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3\n**********************************************************************\npGroupCohomology.cohomology.COHO.essential_ideal:\nFile \"/Users/SimonKing/.sage/temp/bsd.math.washington.edu/77179/dir_0/file_67.py\", line 140:\n    sage: (I*I).NF('std(0)').interred()  #long time\nExpected:\n    a_4_8*a_6_8*a_1_0^3*a_1_3\nGot:\n    a_4_8*a_6_8*a_1_0^3*a_1_3,\n    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3\n```\n\n\nIsn't that actually a Singular bug? After all, I do interreduction, and `a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3` is clearly reducible by `a_4_8*a_6_8*a_1_0^3*a_1_3`.\n\nProvided that it is an upstream bug, what shall we do? The point of that test is that the square of the essential ideal is generated by a single non-zero element.",
    "created_at": "2012-10-10T14:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159731",
    "user": "@simon-king-jena"
}
```

Indeed it seems to be some kind of corruption in my home directory. After removing `~/.sage/pGroupCohomology` and re-installation of the package, I'm left with two copies of a single error:

```
pGroupCohomology:
File "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/77179/dir_0/file_0.py"
, line 941:
    sage: (I*I).NF('std(0)').interred()  #long time
Expected: 
    a_4_8*a_6_8*a_1_0^3*a_1_3
Got:
    a_4_8*a_6_8*a_1_0^3*a_1_3,
    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3
**********************************************************************
pGroupCohomology.cohomology.COHO.essential_ideal:
File "/Users/SimonKing/.sage/temp/bsd.math.washington.edu/77179/dir_0/file_67.py", line 140:
    sage: (I*I).NF('std(0)').interred()  #long time
Expected:
    a_4_8*a_6_8*a_1_0^3*a_1_3
Got:
    a_4_8*a_6_8*a_1_0^3*a_1_3,
    a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3
```


Isn't that actually a Singular bug? After all, I do interreduction, and `a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3` is clearly reducible by `a_4_8*a_6_8*a_1_0^3*a_1_3`.

Provided that it is an upstream bug, what shall we do? The point of that test is that the square of the essential ideal is generated by a single non-zero element.



---

archive/issue_comments_159732.json:
```json
{
    "body": "Remove assignee tbd.",
    "created_at": "2012-10-10T14:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159732",
    "user": "@simon-king-jena"
}
```

Remove assignee tbd.



---

archive/issue_comments_159733.json:
```json
{
    "body": "Strange. I can not reproduce the problem in pure Singular. I don't know if there is any nasty side effect of a loaded library or so.",
    "created_at": "2012-10-10T14:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159733",
    "user": "@simon-king-jena"
}
```

Strange. I can not reproduce the problem in pure Singular. I don't know if there is any nasty side effect of a loaded library or so.



---

archive/issue_comments_159734.json:
```json
{
    "body": "Spoke too soon. I *can* reproduce it in Singular, when I add the option `redSB`. Interesting that `redSB` is responsible for an *incomplete* reduction! I have opened this [Singular ticket](http://www.singular.uni-kl.de:8002/trac/ticket/456).\n\nBut what does that mean to us? Of course, I could work around by temporarily switch off `redSB`.",
    "created_at": "2012-10-10T15:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159734",
    "user": "@simon-king-jena"
}
```

Spoke too soon. I *can* reproduce it in Singular, when I add the option `redSB`. Interesting that `redSB` is responsible for an *incomplete* reduction! I have opened this [Singular ticket](http://www.singular.uni-kl.de:8002/trac/ticket/456).

But what does that mean to us? Of course, I could work around by temporarily switch off `redSB`.



---

archive/issue_comments_159735.json:
```json
{
    "body": "Replying to [comment:18 SimonKing]:\n> But what does that mean to us? Of course, I could work around by temporarily switch off `redSB`.\n\nIt would be as follow:\n\n```\nsage: from pGroupCohomology import CohomologyRing\nsage: H = CohomologyRing(64,245)\nsage: I = H.essential_ideal()\nsage: singular.option()\n//options: redSB redTail redThrough redefine loadLib usage prompt\nsage: singular.option(\"noredSB\")\nsage: singular.option()\n//options: redTail redThrough redefine loadLib usage prompt\nsage: (I*I).NF('std(0)').interred()            \na_4_8*a_6_8*a_1_0^3*a_1_3\nsage: singular.option(\"redSB\")\nsage: (I*I).NF('std(0)').interred()\na_4_8*a_6_8*a_1_0^3*a_1_3,\na_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3\n```\n\n\nDoes the reviewer think that it is a valid work-around?",
    "created_at": "2012-10-10T15:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159735",
    "user": "@simon-king-jena"
}
```

Replying to [comment:18 SimonKing]:
> But what does that mean to us? Of course, I could work around by temporarily switch off `redSB`.

It would be as follow:

```
sage: from pGroupCohomology import CohomologyRing
sage: H = CohomologyRing(64,245)
sage: I = H.essential_ideal()
sage: singular.option()
//options: redSB redTail redThrough redefine loadLib usage prompt
sage: singular.option("noredSB")
sage: singular.option()
//options: redTail redThrough redefine loadLib usage prompt
sage: (I*I).NF('std(0)').interred()            
a_4_8*a_6_8*a_1_0^3*a_1_3
sage: singular.option("redSB")
sage: (I*I).NF('std(0)').interred()
a_4_8*a_6_8*a_1_0^3*a_1_3,
a_4_8*a_6_8*c_8_16*a_1_0^3*a_1_3
```


Does the reviewer think that it is a valid work-around?



---

archive/issue_comments_159736.json:
```json
{
    "body": "Regarding the Singular problems: you could also include the original doctest, marked as `# known bug in Singular`. \"known bug\" should tell Sage to skip the doctest. In any case, you should put in a comment about the fact that Singular has a bug which requires a workaround. \n\nShould we test this spkg with the new GAP spkg from #13211?",
    "created_at": "2012-10-10T15:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159736",
    "user": "@jhpalmieri"
}
```

Regarding the Singular problems: you could also include the original doctest, marked as `# known bug in Singular`. "known bug" should tell Sage to skip the doctest. In any case, you should put in a comment about the fact that Singular has a bug which requires a workaround. 

Should we test this spkg with the new GAP spkg from #13211?



---

archive/issue_comments_159737.json:
```json
{
    "body": "Replying to [comment:20 jhpalmieri]:\n> Regarding the Singular problems: you could also include the original doctest, marked as `# known bug in Singular`. \"known bug\" should tell Sage to skip the doctest. In any case, you should put in a comment about the fact that Singular has a bug which requires a workaround. \n\nI have just updated my spkg, temporarily switching `redSB` off. I think that would be better than skipping the test.\n\n> Should we test this spkg with the new GAP spkg from #13211?\n\nIIRC, I have already tried, and there were various errors (including GAP crashes, so, it isn't just random noise). I guess this will be version 2.1.4 of the spkg...\n\nI am now testing the updated spkg, but I think it should again be ready for review...",
    "created_at": "2012-10-10T15:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159737",
    "user": "@simon-king-jena"
}
```

Replying to [comment:20 jhpalmieri]:
> Regarding the Singular problems: you could also include the original doctest, marked as `# known bug in Singular`. "known bug" should tell Sage to skip the doctest. In any case, you should put in a comment about the fact that Singular has a bug which requires a workaround. 

I have just updated my spkg, temporarily switching `redSB` off. I think that would be better than skipping the test.

> Should we test this spkg with the new GAP spkg from #13211?

IIRC, I have already tried, and there were various errors (including GAP crashes, so, it isn't just random noise). I guess this will be version 2.1.4 of the spkg...

I am now testing the updated spkg, but I think it should again be ready for review...



---

archive/issue_comments_159738.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-10T15:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159738",
    "user": "@simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_159739.json:
```json
{
    "body": "I modified the ticket description, since `SAGE_NUMBER_THREADS` now became `SAGE_NUM_THREADS`.",
    "created_at": "2012-10-10T15:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159739",
    "user": "@simon-king-jena"
}
```

I modified the ticket description, since `SAGE_NUMBER_THREADS` now became `SAGE_NUM_THREADS`.



---

archive/issue_comments_159740.json:
```json
{
    "body": "\n```\n-------------------------------------------------------------\nAll doc tests passed!\n-------------------------------------------------------------\n\nTotal time: 1076.99 sec\n```\n\nHooray!",
    "created_at": "2012-10-10T20:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159740",
    "user": "@simon-king-jena"
}
```


```
-------------------------------------------------------------
All doc tests passed!
-------------------------------------------------------------

Total time: 1076.99 sec
```

Hooray!



---

archive/issue_comments_159741.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-10T22:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159741",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_159742.json:
```json
{
    "body": "All tests passed for me on sage.math and on OS X 10.8 (Mountain Lion) with the new scipy spkg from #13541. I haven't tested on a 32-bit machine, but I'm going to give it a positive review anyway.",
    "created_at": "2012-10-10T22:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159742",
    "user": "@jhpalmieri"
}
```

All tests passed for me on sage.math and on OS X 10.8 (Mountain Lion) with the new scipy spkg from #13541. I haven't tested on a 32-bit machine, but I'm going to give it a positive review anyway.



---

archive/issue_comments_159743.json:
```json
{
    "body": "All tests also pass on OpenSolaris.",
    "created_at": "2012-10-11T01:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159743",
    "user": "@jhpalmieri"
}
```

All tests also pass on OpenSolaris.



---

archive/issue_comments_159744.json:
```json
{
    "body": "Just for the record: Hans Sch\u00f6nemann apparently was able to fix the bug in Singular - so, it will be fine in future, even without temporarily disabling `redSB`.",
    "created_at": "2012-10-11T15:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159744",
    "user": "@simon-king-jena"
}
```

Just for the record: Hans Schönemann apparently was able to fix the bug in Singular - so, it will be fine in future, even without temporarily disabling `redSB`.



---

archive/issue_comments_159745.json:
```json
{
    "body": "i just updated this optional spkg!",
    "created_at": "2012-10-14T19:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159745",
    "user": "@haraldschilly"
}
```

i just updated this optional spkg!



---

archive/issue_comments_159746.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-10-15T20:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-159746",
    "user": "@jdemeyer"
}
```

Resolution: fixed
