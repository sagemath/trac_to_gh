# Issue 22850: Occasional test failure on sage.repl.configuration

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2017-05-26 15:45:02

Sometimes when I run `make ptestlong` on Cygwin (possibly without parallel too but I'm not sure) I get a failure in this test:


```
sage -t --long --warn-long 136.5 src/sage/repl/configuration.py
**********************************************************************
File "src/sage/repl/configuration.py", line 14, in sage.repl.configuration
Failed example:
    'In [1]: [False, True]' in output
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   5 in sage.repl.configuration
    [18 tests, 1 failure, 33.12 s]
```


Seems like probably just a subtle test ordering issue.  Not sure if it fails on other platforms.


---

Comment by embray created at 2017-05-26 15:47:09

Just to get a better idea what's going on might be helpful if, instead of testing `sage: 'In [1]: [False, True]' in output`, the test output was something resembling the expected contents of `output` (with ellipses as needed).


---

Comment by embray created at 2017-05-29 13:54:32

I updated the test to be a little more informative (in particular, if the test fails we'll get what the actual output was).  However, on my last test full test run this test did not fail.

I think the update to the test is good to have in its own right, but I'm going to try a few more times to see if I can get it to fail.
----
New commits:


---

Comment by embray created at 2017-05-29 13:54:32

Changing status from new to needs_info.


---

Comment by embray created at 2018-07-07 18:13:05

Changing keywords from "" to "cygwin".


---

Comment by @timokau created at 2019-08-02 13:25:15

Our nixos buildservers just encountered this failure for the second time. So its not specific to cygwin.

Not sure if I like the test change in general (seems to test more irrelevant details), but at least temporarily they do seem like a good idea to debug this. Should we get this merged?


---

Comment by @timokau created at 2019-08-02 13:30:07

Just realized that it's not strictly necessary to get this merged. I can just cherry-pick the patch for nixos and wait for our buildservers (which rebuild sage often) to stumble about it again. I don't like abusing the buildservers like this, but seems better than just disabling the test.
