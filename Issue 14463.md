# Issue 14463: Matroid union

Issue created by migration from https://trac.sagemath.org/ticket/14667

Original creator: Stefan

Original creation time: 2013-05-30 18:17:54

Assignee: sage-combinat

CC:  darij

Keywords: matroid

Add matroid union to the matroids module.


---

Comment by Stefan created at 2013-09-13 13:44:18

Changing component from combinatorics to matroid theory.


---

Comment by Stefan created at 2013-09-13 13:44:18

Changing assignee from sage-combinat to Stefanf.


---

Comment by Rajesh_Veeranki created at 2014-02-14 14:26:43

Hi,
I want to implement the function.May i know the preferred signature of the function and where should i add it.
Thanks!


---

Comment by Rajesh_Veeranki created at 2014-02-16 02:47:58

Changing status from new to needs_review.


---

Comment by Stefan created at 2014-02-17 19:26:04

Changing status from needs_review to needs_work.


---

Comment by Stefan created at 2014-02-17 19:26:04

1) I would not import this into the main namespace; rather I'd create a "submenu" matroids.constructions, just like we have matroids.named_matroids now.

2) Instead of computing the full list of bases, which is an expensive operation, I'd return a RankMatroid with the appropriate rank function (implemented efficiently using matroid intersection). Matroid Union is likely to be applied to fairly large matroids, derived from graphs, whereas BasisMatroid is optimized for small matroids.

----
New commits:


---

Comment by Rajesh_Veeranki created at 2014-02-23 07:27:26

Dear Prof.Stefan,

I have implemented the matroid union (for 2 matroids) using Rank Matroid.The rank function I used is
rank_(M1UM2)(X) = max ( |Y|+rM2(X)) where Y belongs to M1 intersection M2*, Y subset of X


```
def MatroidUnion(M0,M1):

	#Constructing matroid union from two matroids
	#rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to M0 \cap M1.dual()

	common_ground_set = M0.groundset()
	common_ground_set = common_ground_set.union(M1.groundset())

	def f(X):
		ground_set = common_ground_set.intersection(X)
		delSet = common_ground_set-ground_set

		def h(X):
			return M0.rank(set(X).intersection(M0.groundset()))

		#Extending matroid M0 to the union of groundsets
		I0 = RankMatroid(groundset=common_ground_set,rank_function=h)

		def g(X):
			return M1.rank(set(X).intersection(M1.groundset()))

		#Extending matroid M1 to the  union of groundsets
		I1 = RankMatroid(groundset=common_ground_set,rank_function=g)

		#Restricting matroid M0 to set X
		I0 = I0.delete(delSet)

		#Taking M1 dual and restricting to set X
		I1 = I1.dual()
		I1 = I1.delete(delSet)

		# rank(X) = max ( |Y| + rM2(X) ) where Y subset of X, and Y belongs to I0 \cap I1
		r1 = len(I0.intersection(I1))
		r2 = M1.rank(set(X).intersection(M1.groundset()))
		return r1+r2


	return RankMatroid(groundset=common_ground_set,rank_function=f)
```


This works just fine. What are your comments on this?
I plan to implement MatroidUnion for any no.of matroids, by calling MatriodUnion for 2 matroids each time.

Thanks!


---

Comment by Stefan created at 2016-04-04 19:08:49

Already implemented in sage.matroids.union_matroid


---

Comment by chapoton created at 2017-06-02 13:17:38

Changing status from needs_work to positive_review.


---

Comment by embray created at 2017-07-13 07:54:31

Resolution: wontfix


---

Comment by embray created at 2017-07-13 07:54:31

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).
