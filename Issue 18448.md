# Issue 18448: Add basis status functions get_col_stat, get_row_stat to GLPK backend

archive/issues_018448.json:
```json
{
    "body": "CC:  @nathanncohen @yuan-zhou\n\nKeywords: LP, glpk\n\nExpose the GLPK functions get_col_stat, get_row_stat in Sage's GLPKBackend class.\n\nThese functions are essential for any serious linear programming.\nFor example, if one wants to extract the exact rational basic solution from the dictionary, one needs the information returned by these functions.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18685\n\n",
    "created_at": "2015-06-11T21:57:32Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add basis status functions get_col_stat, get_row_stat to GLPK backend",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18448",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @nathanncohen @yuan-zhou

Keywords: LP, glpk

Expose the GLPK functions get_col_stat, get_row_stat in Sage's GLPKBackend class.

These functions are essential for any serious linear programming.
For example, if one wants to extract the exact rational basic solution from the dictionary, one needs the information returned by these functions.


Issue created by migration from https://trac.sagemath.org/ticket/18685





---

archive/issue_comments_250336.json:
```json
{
    "body": "I am curious to know how you would use it in Sage, but you will not have any problem exposing them. That's easy Cython.",
    "created_at": "2015-06-11T22:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250336",
    "user": "https://github.com/nathanncohen"
}
```

I am curious to know how you would use it in Sage, but you will not have any problem exposing them. That's easy Cython.



---

archive/issue_comments_250337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-11T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250337",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_250338.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-11T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250338",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_250339.json:
```json
{
    "body": "Your code needs documentation and doctests. You can mimic what is done on the other functions of the same file, and will find some documentation here:\n\nhttp://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n\nNathann",
    "created_at": "2015-06-12T07:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250339",
    "user": "https://github.com/nathanncohen"
}
```

Your code needs documentation and doctests. You can mimic what is done on the other functions of the same file, and will find some documentation here:

http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings

Nathann



---

archive/issue_comments_250340.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-12T07:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250340",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_250341.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T17:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250342.json:
```json
{
    "body": "Doctests have been added; please review",
    "created_at": "2015-06-12T17:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250342",
    "user": "https://github.com/mkoeppe"
}
```

Doctests have been added; please review



---

archive/issue_comments_250343.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-12T17:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250343",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_250344.json:
```json
{
    "body": "Could you protect against reading out-of-bounds constraints? Right now it crashes Sage. Could you also add a doctest for that?\n\nNathann",
    "created_at": "2015-06-12T18:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250344",
    "user": "https://github.com/nathanncohen"
}
```

Could you protect against reading out-of-bounds constraints? Right now it crashes Sage. Could you also add a doctest for that?

Nathann



---

archive/issue_comments_250345.json:
```json
{
    "body": "I am not sure if this ticket is the right place to introduce bounds checking for these functions.\nOther GLPK backend functions don't do that either (below is an example) -- after all, GLPK does check the bounds; it only chooses to terminate the process with abort()....\n\nDoes this rather need to be handled with sig_on() / sig_off() somehow?\n\n\n```\nsage: lp.add_linear_constraint(zip([0, 1, 2], [8, 6, 1]), None, 48)\nsage: lp.add_linear_constraint(zip([0, 1, 2], [4, 2, 1.5]), None, 20)\nsage: lp.add_linear_constraint(zip([0, 1, 2], [2, 1.5, 0.5]), None, 8)\nsage: lp.set_objective([60, 30, 20])\nsage: import sage.numerical.backends.glpk_backend as backend\nsage: lp.solver_parameter(backend.glp_simplex_or_intopt, backend.glp_simplex_only)\nsage: lp.solve()\nsage: lp.get_variable_value(-1)\nglp_get_col_prim: j = 0; column number out of range\nError detected in file glpapi06.c at line 739\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```\n",
    "created_at": "2015-06-13T02:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250345",
    "user": "https://github.com/mkoeppe"
}
```

I am not sure if this ticket is the right place to introduce bounds checking for these functions.
Other GLPK backend functions don't do that either (below is an example) -- after all, GLPK does check the bounds; it only chooses to terminate the process with abort()....

Does this rather need to be handled with sig_on() / sig_off() somehow?


```
sage: lp.add_linear_constraint(zip([0, 1, 2], [8, 6, 1]), None, 48)
sage: lp.add_linear_constraint(zip([0, 1, 2], [4, 2, 1.5]), None, 20)
sage: lp.add_linear_constraint(zip([0, 1, 2], [2, 1.5, 0.5]), None, 8)
sage: lp.set_objective([60, 30, 20])
sage: import sage.numerical.backends.glpk_backend as backend
sage: lp.solver_parameter(backend.glp_simplex_or_intopt, backend.glp_simplex_only)
sage: lp.solve()
sage: lp.get_variable_value(-1)
glp_get_col_prim: j = 0; column number out of range
Error detected in file glpapi06.c at line 739
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```




---

archive/issue_comments_250346.json:
```json
{
    "body": "> I am not sure if this ticket is the right place to introduce bounds checking for these functions.\n\nIf you are ready to pay for a Python function call, you may as well avoid segfaults.\n\n> Other GLPK backend functions don't do that either (below is an example)\n\nOh. Right. Well, that's because we hardly ever use this function by giving it integers, I'd say. We always give it symbolic LP variable, for which it is not a problem. You can fix both here if you like, but you should at least make the one you introduce check for this.\n\n> Does this rather need to be handled with sig_on() / sig_off() somehow?\n\nNo, `sig_on/sig_off` is only meant to handle `KeyboardInterrupt`. \n\nNathann",
    "created_at": "2015-06-13T07:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250346",
    "user": "https://github.com/nathanncohen"
}
```

> I am not sure if this ticket is the right place to introduce bounds checking for these functions.

If you are ready to pay for a Python function call, you may as well avoid segfaults.

> Other GLPK backend functions don't do that either (below is an example)

Oh. Right. Well, that's because we hardly ever use this function by giving it integers, I'd say. We always give it symbolic LP variable, for which it is not a problem. You can fix both here if you like, but you should at least make the one you introduce check for this.

> Does this rather need to be handled with sig_on() / sig_off() somehow?

No, `sig_on/sig_off` is only meant to handle `KeyboardInterrupt`. 

Nathann



---

archive/issue_comments_250347.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-13T10:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250348.json:
```json
{
    "body": "Looks good! The patchbot complains that there are 'tab' characters in `glpk_backend.pxd`, however.",
    "created_at": "2015-06-13T10:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250348",
    "user": "https://github.com/nathanncohen"
}
```

Looks good! The patchbot complains that there are 'tab' characters in `glpk_backend.pxd`, however.



---

archive/issue_comments_250349.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-13T10:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250349",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250350.json:
```json
{
    "body": "Gooooooood to go!\n\nNathann\n\nP.S.: Please fill the \"Author\" field with your full name",
    "created_at": "2015-06-13T10:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250350",
    "user": "https://github.com/nathanncohen"
}
```

Gooooooood to go!

Nathann

P.S.: Please fill the "Author" field with your full name



---

archive/issue_comments_250351.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-13T10:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250351",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_250352.json:
```json
{
    "body": "Thanks!",
    "created_at": "2015-06-13T10:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250352",
    "user": "https://github.com/yuan-zhou"
}
```

Thanks!



---

archive/issue_events_017657.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2015-06-14T19:54:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18448#event-17657"
}
```



---

archive/issue_comments_250353.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-14T19:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18448",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18448#issuecomment-250353",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
