# Issue 17516: move pexpect-maxima code to maxima_lib

archive/issues_017516.json:
```json
{
    "body": "This metaticket tracks efforts to remove the usage of pexpect for calling maxima, either by using `maxima_lib` or replacing it altogether. Code that is dependent on the maxima expect interface is in:\n\n* *`calculus/desolvers.py`*: `desolve_*()`\n* *`combinat/combinat.py`*: `euler_number()`\n* *`geometry/lattice_polytope.py`*: `positive_integer_relations()`\n* *`functions/orthogonal_polys.py`*: `hermite()`, `jacobi_P()`, `laguerre()` (obsolete with #16813), `legendre_P/Q()` (obsolete with #17151), ultraspherical()\n* *`functions/piecewise.py`*: `Piecewise.convolution()`\n* *`matrix/matrix1.pyx`*: `Matrix._maxima_init_()`\n* *`matrix/matrix_symbolic_dense.pyx`*: `Matrix_symbolic_dense.exp()` \n* *`structure/sage_object.pyx`*: `SageObject._maxima_()`, `_maxima_init_()`\n* *`symbolic/assumptions.py`*: `GenericDeclaration.assume()`\n* *`symbolic/expression.pyx`*: `Ex.assume()`, `forget()`, `assume_str()`, `assert()`, `expand_trig()`, `reduce_trig()`, `coefficients()`, `poly()`, `maxima_methods()`, `rectform()`, `simplify()`, `simplify_real()`, `simplify_rational()`, `simplify_log()`, `expand_log()`, `factor()`, `solve()`, `sum()`\n* *`symbolic/maxima_wrapper.py`*: *\n\nThis can be considered part of the metaticket #16688.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17753\n\n",
    "created_at": "2015-02-09T14:35:03Z",
    "labels": [
        "interfaces",
        "major",
        "enhancement"
    ],
    "title": "move pexpect-maxima code to maxima_lib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17516",
    "user": "rws"
}
```
This metaticket tracks efforts to remove the usage of pexpect for calling maxima, either by using `maxima_lib` or replacing it altogether. Code that is dependent on the maxima expect interface is in:

* *`calculus/desolvers.py`*: `desolve_*()`
* *`combinat/combinat.py`*: `euler_number()`
* *`geometry/lattice_polytope.py`*: `positive_integer_relations()`
* *`functions/orthogonal_polys.py`*: `hermite()`, `jacobi_P()`, `laguerre()` (obsolete with #16813), `legendre_P/Q()` (obsolete with #17151), ultraspherical()
* *`functions/piecewise.py`*: `Piecewise.convolution()`
* *`matrix/matrix1.pyx`*: `Matrix._maxima_init_()`
* *`matrix/matrix_symbolic_dense.pyx`*: `Matrix_symbolic_dense.exp()` 
* *`structure/sage_object.pyx`*: `SageObject._maxima_()`, `_maxima_init_()`
* *`symbolic/assumptions.py`*: `GenericDeclaration.assume()`
* *`symbolic/expression.pyx`*: `Ex.assume()`, `forget()`, `assume_str()`, `assert()`, `expand_trig()`, `reduce_trig()`, `coefficients()`, `poly()`, `maxima_methods()`, `rectform()`, `simplify()`, `simplify_real()`, `simplify_rational()`, `simplify_log()`, `expand_log()`, `factor()`, `solve()`, `sum()`
* *`symbolic/maxima_wrapper.py`*: *

This can be considered part of the metaticket #16688.

Issue created by migration from https://trac.sagemath.org/ticket/17753





---

archive/issue_comments_233931.json:
```json
{
    "body": "I am confused about the meaning of Absolute vs Optional dependencies mentioned on the wiki, could you elaborate?",
    "created_at": "2017-11-27T09:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17516#issuecomment-233931",
    "user": "dimpase"
}
```

I am confused about the meaning of Absolute vs Optional dependencies mentioned on the wiki, could you elaborate?



---

archive/issue_comments_233932.json:
```json
{
    "body": "As far as I recall, I named that code optional that I thought is only executed when certain non-default keywords are given. Looking at the three items,\n* `symbolic_expression_from_maxima_string` is only used in doctests of `calculs.py` but is absolutely imported by `ex.factor()` and in `relation.py:string_to_list_of_solutions()` which is used by `solve()` so the assessment was wrong\n* `stirling_number2` in `combinat/combinat.py`: default is not Maxima, okay\n* `integration/*`: certainly Maxima is called, so it's wrong\n\nThanks for asking, I'm changing it.",
    "created_at": "2017-11-27T10:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17516#issuecomment-233932",
    "user": "rws"
}
```

As far as I recall, I named that code optional that I thought is only executed when certain non-default keywords are given. Looking at the three items,
* `symbolic_expression_from_maxima_string` is only used in doctests of `calculs.py` but is absolutely imported by `ex.factor()` and in `relation.py:string_to_list_of_solutions()` which is used by `solve()` so the assessment was wrong
* `stirling_number2` in `combinat/combinat.py`: default is not Maxima, okay
* `integration/*`: certainly Maxima is called, so it's wrong

Thanks for asking, I'm changing it.



---

archive/issue_comments_233933.json:
```json
{
    "body": "there are places where `maxima.eval` instead of considerably faster `maxima_calculus.eval` is used for no good reason, e.g. in `src/doc`, see #30071.",
    "created_at": "2020-07-05T13:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17516#issuecomment-233933",
    "user": "dimpase"
}
```

there are places where `maxima.eval` instead of considerably faster `maxima_calculus.eval` is used for no good reason, e.g. in `src/doc`, see #30071.
