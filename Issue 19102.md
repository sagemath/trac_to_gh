# Issue 19102: Use digraph labels if present for ClusterAlgebra and ClusterQuiver

archive/issues_019102.json:
```json
{
    "body": "CC:  gmoose05 benstrasser @egunawan @thecaligarmo\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19339\n\n",
    "created_at": "2015-10-03T15:26:34Z",
    "labels": [],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Use digraph labels if present for ClusterAlgebra and ClusterQuiver",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19102",
    "user": "https://github.com/thecaligarmo"
}
```
CC:  gmoose05 benstrasser @egunawan @thecaligarmo



Issue created by migration from https://trac.sagemath.org/ticket/19339





---

archive/issue_comments_261783.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2015-10-03T15:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261783",
    "user": "https://github.com/thecaligarmo"
}
```

Changing priority from major to minor.



---

archive/issue_comments_261784.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2015-10-03T15:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261784",
    "user": "https://github.com/thecaligarmo"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_261785.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-10-03T15:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261785",
    "user": "https://github.com/thecaligarmo"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_261786.json:
```json
{
    "body": "Changing keywords from \"\" to \"clusters\".",
    "created_at": "2015-10-03T15:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261786",
    "user": "https://github.com/thecaligarmo"
}
```

Changing keywords from "" to "clusters".



---

archive/issue_comments_261787.json:
```json
{
    "body": "Changing keywords from \"clusters\" to \"cluster\".",
    "created_at": "2015-10-07T14:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261787",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "clusters" to "cluster".



---

archive/issue_comments_261788.json:
```json
{
    "body": "I am working on a review patch for this ticket.  This will include:\n\n1) A small bug fix to address the issue where digraph labels get lost if the ClusterSeed is mutated:\n\n```\nsage: dg = DiGraph([[5,6]])\nsage: S = ClusterSeed(dg); S.quiver().digraph().vertices()\n[5, 6]\nsage: S.mutate(0)\nsage: S.quiver().digraph().vertices()\n[0, 1]\n```\n\n\n2) An enhancement allowing users to specify a list of frozen variables.\n----\nNew commits:",
    "created_at": "2015-11-09T21:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261788",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

I am working on a review patch for this ticket.  This will include:

1) A small bug fix to address the issue where digraph labels get lost if the ClusterSeed is mutated:

```
sage: dg = DiGraph([[5,6]])
sage: S = ClusterSeed(dg); S.quiver().digraph().vertices()
[5, 6]
sage: S.mutate(0)
sage: S.quiver().digraph().vertices()
[0, 1]
```


2) An enhancement allowing users to specify a list of frozen variables.
----
New commits:



---

archive/issue_comments_261789.json:
```json
{
    "body": "Replying to [comment:7 benstrasser]:\n\nI changed ClusterQuiver and ClusterSeed to maintain lists of mutable and immutable vertices throughout, and ensured that they pass these lists around when necessary.  Thus, the user should be able to submit lists of frozen vertices and mutate them freely.  Let me know what you think.  If these seem like good changes, we can clean up the documentation and finalize.\n----\nNew commits:",
    "created_at": "2015-11-28T19:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261789",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Replying to [comment:7 benstrasser]:

I changed ClusterQuiver and ClusterSeed to maintain lists of mutable and immutable vertices throughout, and ensured that they pass these lists around when necessary.  Thus, the user should be able to submit lists of frozen vertices and mutate them freely.  Let me know what you think.  If these seem like good changes, we can clean up the documentation and finalize.
----
New commits:



---

archive/issue_comments_261790.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-09T02:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261791.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-24T19:23:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261792.json:
```json
{
    "body": "Merged to sage.7.1.beta5",
    "created_at": "2016-03-02T14:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261792",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

Merged to sage.7.1.beta5



---

archive/issue_comments_261793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-19T03:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261794.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-31T02:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261795.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-20T03:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261795",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261796.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-21T04:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261797.json:
```json
{
    "body": "Changing keywords from \"cluster\" to \"cluster, cluster algebra, quiver, cluster quiver\".",
    "created_at": "2016-06-30T00:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261797",
    "user": "https://github.com/egunawan"
}
```

Changing keywords from "cluster" to "cluster, cluster algebra, quiver, cluster quiver".



---

archive/issue_comments_261798.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-01T16:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261799.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-01T16:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261799",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261800.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-08T07:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261800",
    "user": "https://github.com/egunawan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_261801.json:
```json
{
    "body": "Hi Ben,\nThese are my suggestions for now:\n* In the doc for `ClusterQuiver` taking digraph as input, could you add another line `sage: for Q.nlist()` so the user will read that `ClusterQuiver` will remember labels from the input digraph.\n\n* The following bug does not exist before this ticket was pulled:\n\n```\nsage: Q=ClusterQuiver(DiGraph([[0,5]]))\nsage: Q.b_matrix()\n[ 0  1]\n[-1  0]\nsage: Q.mutate(0)\nIndexError: index out of range\n```\n\n\n* Also, I think we should either explain the following behavior in the doc, or change the code so that the behavior for `mutation` is more consistent. I think either is fine. The following works well\n\n```\nsage: S=ClusterSeed(DiGraph([['a','b']]))\nsage: S.mutate('a')\n```\n  \nbut the following throws an error\n\n```\nsage: S=ClusterSeed(DiGraph([[5,'b']]))\nsage: S.mutate(5)\nValueError: The quiver can only be mutated at a vertex or at a sequence of vertices\n```\n\n\n* If possible, could you get the recent version of Sage (if not 7.3beta 6, then at least 7.2 master branch), and then add your code on top of this recent Sage? Currently your branch is marked as red because it cannot automatically merge.",
    "created_at": "2016-07-08T07:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261801",
    "user": "https://github.com/egunawan"
}
```

Hi Ben,
These are my suggestions for now:
* In the doc for `ClusterQuiver` taking digraph as input, could you add another line `sage: for Q.nlist()` so the user will read that `ClusterQuiver` will remember labels from the input digraph.

* The following bug does not exist before this ticket was pulled:

```
sage: Q=ClusterQuiver(DiGraph([[0,5]]))
sage: Q.b_matrix()
[ 0  1]
[-1  0]
sage: Q.mutate(0)
IndexError: index out of range
```


* Also, I think we should either explain the following behavior in the doc, or change the code so that the behavior for `mutation` is more consistent. I think either is fine. The following works well

```
sage: S=ClusterSeed(DiGraph([['a','b']]))
sage: S.mutate('a')
```
  
but the following throws an error

```
sage: S=ClusterSeed(DiGraph([[5,'b']]))
sage: S.mutate(5)
ValueError: The quiver can only be mutated at a vertex or at a sequence of vertices
```


* If possible, could you get the recent version of Sage (if not 7.3beta 6, then at least 7.2 master branch), and then add your code on top of this recent Sage? Currently your branch is marked as red because it cannot automatically merge.



---

archive/issue_comments_261802.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-22T17:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261802",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

New commits:



---

archive/issue_comments_261803.json:
```json
{
    "body": "Some quick comments:\n\n- I believe you want `user_labels` to be a list, so once we switch to Python3, the current code won't work. So I recommend (and is also faster):\n  {{{\nuser_labels = [ZZ(x) if type(x) == int else x for x in user_labels]\n  }}}\n- Instead of `elif type(user_labels[i]) in [list,tuple]:`, you should use `elif isinstance(user_labels[i], (list, tuple)):` (unless you want to explicitly forbid any subclasses of `list` or `tuple`).\n- Python uses different conventions than, e.g., C++/Java. So variables `isVertices` should be `is_vertices`.\n- You have an erroneous character:\n  {{{#!diff\n  For the compendium on the cluster algebra and quiver package see ::\n-\n+f\n     http://arxiv.org/abs/1102.4844.\n \n  }}}",
    "created_at": "2016-07-22T20:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261803",
    "user": "https://github.com/tscrim"
}
```

Some quick comments:

- I believe you want `user_labels` to be a list, so once we switch to Python3, the current code won't work. So I recommend (and is also faster):
  {{{
user_labels = [ZZ(x) if type(x) == int else x for x in user_labels]
  }}}
- Instead of `elif type(user_labels[i]) in [list,tuple]:`, you should use `elif isinstance(user_labels[i], (list, tuple)):` (unless you want to explicitly forbid any subclasses of `list` or `tuple`).
- Python uses different conventions than, e.g., C++/Java. So variables `isVertices` should be `is_vertices`.
- You have an erroneous character:
  {{{#!diff
  For the compendium on the cluster algebra and quiver package see ::
-
+f
     http://arxiv.org/abs/1102.4844.
 
  }}}



---

archive/issue_comments_261804.json:
```json
{
    "body": "doc does not build:\n\n```\n+[dochtml] [combinat ] /home/kevin/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/cluster_seed.py:docstring of sage.combinat.cluster_algebra_quiver.cluster_seed.ClusterSeed.mutate:29: ERROR: Unexpected indentation.\n+[dochtml] [combinat ] /home/kevin/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver:21: ERROR: Unexpected indentation.\n```\n",
    "created_at": "2016-08-03T19:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261804",
    "user": "https://github.com/fchapoton"
}
```

doc does not build:

```
+[dochtml] [combinat ] /home/kevin/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/cluster_seed.py:docstring of sage.combinat.cluster_algebra_quiver.cluster_seed.ClusterSeed.mutate:29: ERROR: Unexpected indentation.
+[dochtml] [combinat ] /home/kevin/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver:21: ERROR: Unexpected indentation.
```




---

archive/issue_comments_261805.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-08-07T05:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261805",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

Last 10 new commits:



---

archive/issue_comments_261806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-08-07T19:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_261807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-07T21:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261808.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-10T04:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261808",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

New commits:



---

archive/issue_comments_261809.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-13T00:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261810.json:
```json
{
    "body": "Anyone know why the branch name (in the above description) isn't green?",
    "created_at": "2016-08-13T00:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261810",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

Anyone know why the branch name (in the above description) isn't green?



---

archive/issue_comments_261811.json:
```json
{
    "body": "Typically it means a conflict with the latest beta.",
    "created_at": "2016-08-13T00:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261811",
    "user": "https://github.com/tscrim"
}
```

Typically it means a conflict with the latest beta.



---

archive/issue_comments_261812.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-21T16:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261812",
    "user": "https://github.com/thecaligarmo"
}
```

New commits:



---

archive/issue_events_053520.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2016-08-21T16:59:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53520"
}
```



---

archive/issue_comments_261813.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-07T21:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261813",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

New commits:



---

archive/issue_events_053521.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/benstrasser",
    "created_at": "2017-08-07T21:59:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53521"
}
```



---

archive/issue_events_053522.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/benstrasser",
    "created_at": "2017-08-07T21:59:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53522"
}
```



---

archive/issue_comments_261814.json:
```json
{
    "body": "aram.dermenjian",
    "created_at": "2017-08-07T21:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261814",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

aram.dermenjian



---

archive/issue_comments_261815.json:
```json
{
    "body": "Do not use xrange in .py files (see patchbot plugin report).\n\nIf you need an iterator range, use `from from six.moves import range`",
    "created_at": "2017-08-08T06:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261815",
    "user": "https://github.com/fchapoton"
}
```

Do not use xrange in .py files (see patchbot plugin report).

If you need an iterator range, use `from from six.moves import range`



---

archive/issue_comments_261816.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-08T15:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261817.json:
```json
{
    "body": "Passes src/sage/rings/function_field and src/sage/graphs locally even though it times out on the patch bot.\n----\nNew commits:",
    "created_at": "2017-08-08T21:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261817",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Passes src/sage/rings/function_field and src/sage/graphs locally even though it times out on the patch bot.
----
New commits:



---

archive/issue_comments_261818.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-08T21:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261818",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_261819.json:
```json
{
    "body": "Changing keywords from \"cluster, cluster algebra, quiver, cluster quiver\" to \"cluster, cluster algebra, quiver, cluster quiver, IMA coding sprints\".",
    "created_at": "2017-08-08T21:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261819",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing keywords from "cluster, cluster algebra, quiver, cluster quiver" to "cluster, cluster algebra, quiver, cluster quiver, IMA coding sprints".



---

archive/issue_comments_261820.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-09T16:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261820",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_261821.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-09T17:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261821",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

New commits:



---

archive/issue_comments_261822.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-09T18:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261822",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_261823.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-10T00:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261823",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_261824.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-10T00:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261825.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-10T17:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261826.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-10T17:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261826",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_261827.json:
```json
{
    "body": "Seems to be working as intended, and the patchbot is green.",
    "created_at": "2017-08-10T21:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261827",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmatherne"
}
```

Seems to be working as intended, and the patchbot is green.



---

archive/issue_comments_261828.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-10T21:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261828",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmatherne"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261829.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-08-10T22:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261829",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_events_053523.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-10T22:07:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53523"
}
```



---

archive/issue_events_053524.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-10T22:07:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53524"
}
```



---

archive/issue_comments_261830.json:
```json
{
    "body": "Some comments, most of them are minor:\n\n- There is a `warn` function (see, e.g., `sets/disjoint_union_enumerated_sets.py`). I feel like you should use that instead of `print` statements, but I'm not 100% sure.\n- The `copy` is redundant here `copy( list(data._nlist) )` because `list` already makes a (shallow) copy.\n- The `keys()` is unnecessary in `labelset = set(user_labels.keys())`.\n- Do you really only want to test `type(x) == int` in this line:\n  {{{#!python\nuser_labels = [ZZ(x) if type(x) == int else x for x in user_labels]\n  }}}\n  I feel it would be better to do `if x in ZZ`.\n- If `user_labels` does conflict, are you sure you only want a string printed? This feels like it should be an error.\n- Change\n  {{{#!diff\n-type(user_labels[key]) in [list,tuple]\n+isinstance(user_labels[key], (list, tuple))\n  }}}\n- You need a blank line here between text and doctests, e.g., here:\n  {{{#!diff\n         For a cluster seed from an arbitrarily labelled digraph::\n+\n             sage: S = ClusterSeed(DiGraph([['a','b'],['b','c']]),frozen=['b'])\n             sage: S.cluster_class()\n             [[a, c], [a, (b + 1)/c], [(b + 1)/a, c], [(b + 1)/a, (b + 1)/c]]\n  }}}\n  There is at least one other place where this is needed.\n- From the warning message, I don't understand the added check here:\n  {{{\n            if frozen is not None and type(frozen) in [int,Integer]:\n                print('The input data is a matrix, therefore the additional parameter frozen is ignored.  Frozen vertices read off accordingly if the matrix is not square.')\n  }}}\n- Why is this downgraded to only a warning?\n  {{{#!diff\n+            warning_given = False\n             for edge in dg.edge_iterator():\n-                if edge[0] >= n and edge[1] >= n:\n-                    raise ValueError(\"The input digraph contains edges within the frozen vertices\")\n+                if edge[0] >= n and edge[1] >= n and not warning_given:\n+                    #raise ValueError(\"The input digraph contains edges within the frozen vertices\")\n+                    print('Warning: The input digraph contained edges within the frozen vertices. Use remove_frozen_edges to remove these edges.')\n+                    warning_given = True\n  }}}\n- `nlist()` and `mlist()` are not very descriptive method names (however, it is fine for the internal attributes). I think it would be better to call them `free_vertices()` and `frozen_vertices()`.\n- Never do `keep_previous_frozen == False`. Simply do `not keep_previous_frozen`. Similar for `keep_previous_frozen == True`.\n- You are breaking PEP8 in a lot of places:\n  * Arguments should not have spaces around the `=`, e.g., `def foo(x=5)` and not `def foo(x = 5)`.\n  * Same holds true for default arguments to functions.\n  * Binary operations should have spaces to either side: `strng = strng + \"_\" + j`. Although IMO you should leave this type alone `user_labels.keys()[n:n+m]` as the `[]` operator takes priority.\n  * `dict` input as, e.g., `{x: -x for x in range(5)}`.\n  * Commas will always have spaces after them.\n- Break long (> 80 characters) docstrings.\n- Use `Return` instead of `Returns` in the 1-line doc description (at least do not make things worse in your added functions/methods).\n- There are a number of docstring formatting issues, e.g., you should code format things like ```self``` or variable names.\n- You have added a lot of unnecessary whitespace to the docstrings. For example:\n  {{{#!diff\n`@``@` -120,6 +121,14 `@``@` class ClusterSeed(SageObject):\n \n         sage: S = ClusterSeed(['A',4]); S.use_fpolys(False); S._use_fpolys\n         False\n+        \n+        sage: S = ClusterSeed(DiGraph([['a','b'],['c','b'],['c','d'],['e','d']]),frozen = ['c']); S\n+        A seed for a cluster algebra of rank 4 with 1 frozen variable\n+\n+        sage: S = ClusterSeed(['D',4],user_labels = [-1,0,1,2]);S\n+        A seed for a cluster algebra of rank 4 of type ['D', 4]\n+\n+\n \n     \"\"\"\n     def __init__(self, data, frozen=None, is_principal=False, user_labels=None, user_labels_prefix='x'):\n  }}}\n  It is good to be consistent with the rest of Sage (at most 1 line after doctests before the `\"\"\"`).\n- Remove trailing whitespace.",
    "created_at": "2017-08-10T22:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261830",
    "user": "https://github.com/tscrim"
}
```

Some comments, most of them are minor:

- There is a `warn` function (see, e.g., `sets/disjoint_union_enumerated_sets.py`). I feel like you should use that instead of `print` statements, but I'm not 100% sure.
- The `copy` is redundant here `copy( list(data._nlist) )` because `list` already makes a (shallow) copy.
- The `keys()` is unnecessary in `labelset = set(user_labels.keys())`.
- Do you really only want to test `type(x) == int` in this line:
  {{{#!python
user_labels = [ZZ(x) if type(x) == int else x for x in user_labels]
  }}}
  I feel it would be better to do `if x in ZZ`.
- If `user_labels` does conflict, are you sure you only want a string printed? This feels like it should be an error.
- Change
  {{{#!diff
-type(user_labels[key]) in [list,tuple]
+isinstance(user_labels[key], (list, tuple))
  }}}
- You need a blank line here between text and doctests, e.g., here:
  {{{#!diff
         For a cluster seed from an arbitrarily labelled digraph::
+
             sage: S = ClusterSeed(DiGraph([['a','b'],['b','c']]),frozen=['b'])
             sage: S.cluster_class()
             [[a, c], [a, (b + 1)/c], [(b + 1)/a, c], [(b + 1)/a, (b + 1)/c]]
  }}}
  There is at least one other place where this is needed.
- From the warning message, I don't understand the added check here:
  {{{
            if frozen is not None and type(frozen) in [int,Integer]:
                print('The input data is a matrix, therefore the additional parameter frozen is ignored.  Frozen vertices read off accordingly if the matrix is not square.')
  }}}
- Why is this downgraded to only a warning?
  {{{#!diff
+            warning_given = False
             for edge in dg.edge_iterator():
-                if edge[0] >= n and edge[1] >= n:
-                    raise ValueError("The input digraph contains edges within the frozen vertices")
+                if edge[0] >= n and edge[1] >= n and not warning_given:
+                    #raise ValueError("The input digraph contains edges within the frozen vertices")
+                    print('Warning: The input digraph contained edges within the frozen vertices. Use remove_frozen_edges to remove these edges.')
+                    warning_given = True
  }}}
- `nlist()` and `mlist()` are not very descriptive method names (however, it is fine for the internal attributes). I think it would be better to call them `free_vertices()` and `frozen_vertices()`.
- Never do `keep_previous_frozen == False`. Simply do `not keep_previous_frozen`. Similar for `keep_previous_frozen == True`.
- You are breaking PEP8 in a lot of places:
  * Arguments should not have spaces around the `=`, e.g., `def foo(x=5)` and not `def foo(x = 5)`.
  * Same holds true for default arguments to functions.
  * Binary operations should have spaces to either side: `strng = strng + "_" + j`. Although IMO you should leave this type alone `user_labels.keys()[n:n+m]` as the `[]` operator takes priority.
  * `dict` input as, e.g., `{x: -x for x in range(5)}`.
  * Commas will always have spaces after them.
- Break long (> 80 characters) docstrings.
- Use `Return` instead of `Returns` in the 1-line doc description (at least do not make things worse in your added functions/methods).
- There are a number of docstring formatting issues, e.g., you should code format things like ```self``` or variable names.
- You have added a lot of unnecessary whitespace to the docstrings. For example:
  {{{#!diff
`@``@` -120,6 +121,14 `@``@` class ClusterSeed(SageObject):
 
         sage: S = ClusterSeed(['A',4]); S.use_fpolys(False); S._use_fpolys
         False
+        
+        sage: S = ClusterSeed(DiGraph([['a','b'],['c','b'],['c','d'],['e','d']]),frozen = ['c']); S
+        A seed for a cluster algebra of rank 4 with 1 frozen variable
+
+        sage: S = ClusterSeed(['D',4],user_labels = [-1,0,1,2]);S
+        A seed for a cluster algebra of rank 4 of type ['D', 4]
+
+
 
     """
     def __init__(self, data, frozen=None, is_principal=False, user_labels=None, user_labels_prefix='x'):
  }}}
  It is good to be consistent with the rest of Sage (at most 1 line after doctests before the `"""`).
- Remove trailing whitespace.



---

archive/issue_comments_261831.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-11T20:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261832.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-11T21:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261833.json:
```json
{
    "body": "Thanks for the detailed comments, Travis. I've done my best to address your concerns, although its possible I missed something. \n\n* Some of the 'print('Warning: ... 's which I added were really just clarifying default behavior, so I am not sure they should be warnings. I have removed the `Warning' from this string. I am not sure if this is the correct way to do such a thing in general, but it is at least consistent with the rest of the cluster_algebra_quiver package (see, for example, the messages about ignoring frozen vertices). Perhaps a later ticket should go through and add the `warn` command where appropriate.\n\n* Regarding the warning vs error message for edges between frozen vertices, I had downgraded the error to a warning in order to play nicely with the new `set_frozen` command. I can't remember exactly why Gregg and I decided to add this functionality. Furthermore, this seems to go a bit beyond the stated goals of this ticket. For the moment I've decided to remove the `set_frozen` and `remove_frozen_edges` methods. I can add these commands (with or without the warning message) with a later ticket if someone wants it. \n\n* I did my best to change 'returns' to 'return' on the docstrings for the methods which we added here. As you point out, this is one of many stylistic inconsistencies throughout the cluster_algebra_quiver package. Perhaps a later ticket could go through and ensure the rest of the package conforms with this. The PEP8 issues are similar - I've done my best to make the new code conform, but there appears to be existing code which doesn't quite follow these standards. If this is a serious issue, someone could try to make the entire package conform with PEP8 at a later date.\n\nPlease let me know if I've missed anything of misinterpreted any of your comments!\n----\nNew commits:",
    "created_at": "2017-08-11T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261833",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Thanks for the detailed comments, Travis. I've done my best to address your concerns, although its possible I missed something. 

* Some of the 'print('Warning: ... 's which I added were really just clarifying default behavior, so I am not sure they should be warnings. I have removed the `Warning' from this string. I am not sure if this is the correct way to do such a thing in general, but it is at least consistent with the rest of the cluster_algebra_quiver package (see, for example, the messages about ignoring frozen vertices). Perhaps a later ticket should go through and add the `warn` command where appropriate.

* Regarding the warning vs error message for edges between frozen vertices, I had downgraded the error to a warning in order to play nicely with the new `set_frozen` command. I can't remember exactly why Gregg and I decided to add this functionality. Furthermore, this seems to go a bit beyond the stated goals of this ticket. For the moment I've decided to remove the `set_frozen` and `remove_frozen_edges` methods. I can add these commands (with or without the warning message) with a later ticket if someone wants it. 

* I did my best to change 'returns' to 'return' on the docstrings for the methods which we added here. As you point out, this is one of many stylistic inconsistencies throughout the cluster_algebra_quiver package. Perhaps a later ticket could go through and ensure the rest of the package conforms with this. The PEP8 issues are similar - I've done my best to make the new code conform, but there appears to be existing code which doesn't quite follow these standards. If this is a serious issue, someone could try to make the entire package conform with PEP8 at a later date.

Please let me know if I've missed anything of misinterpreted any of your comments!
----
New commits:



---

archive/issue_comments_261834.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-14T18:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261834",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_261835.json:
```json
{
    "body": "I just changed it.  Thanks for the input!",
    "created_at": "2017-08-14T18:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261835",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

I just changed it.  Thanks for the input!



---

archive/issue_comments_261836.json:
```json
{
    "body": "Replying to [comment:59 benstrasser]:\n> Thanks for the detailed comments, Travis. I've done my best to address your concerns, although its possible I missed something. \n\nThanks. I went through and made some additional changes and fixes as well, but there's too much to standardize to do it all on this ticket.\n\n> * Some of the 'print('Warning: ... 's which I added were really just clarifying default behavior, so I am not sure they should be warnings. I have removed the `Warning' from this string. I am not sure if this is the correct way to do such a thing in general, but it is at least consistent with the rest of the cluster_algebra_quiver package (see, for example, the messages about ignoring frozen vertices). Perhaps a later ticket should go through and add the `warn` command where appropriate.\n\nI would say no, but since the rest of the code here does it, it is better to be consistent.\n\n> * I did my best to change 'returns' to 'return' on the docstrings for the methods which we added here. As you point out, this is one of many stylistic inconsistencies throughout the cluster_algebra_quiver package. Perhaps a later ticket could go through and ensure the rest of the package conforms with this. The PEP8 issues are similar - I've done my best to make the new code conform, but there appears to be existing code which doesn't quite follow these standards. If this is a serious issue, someone could try to make the entire package conform with PEP8 at a later date.\n\nSerious, not really. Yet, it makes the code a little more difficult to parse quickly, and it would help give Sage a more polished feel.\n\nIf my changes are good, then positive review.\n----\nNew commits:",
    "created_at": "2017-08-15T01:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261836",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:59 benstrasser]:
> Thanks for the detailed comments, Travis. I've done my best to address your concerns, although its possible I missed something. 

Thanks. I went through and made some additional changes and fixes as well, but there's too much to standardize to do it all on this ticket.

> * Some of the 'print('Warning: ... 's which I added were really just clarifying default behavior, so I am not sure they should be warnings. I have removed the `Warning' from this string. I am not sure if this is the correct way to do such a thing in general, but it is at least consistent with the rest of the cluster_algebra_quiver package (see, for example, the messages about ignoring frozen vertices). Perhaps a later ticket should go through and add the `warn` command where appropriate.

I would say no, but since the rest of the code here does it, it is better to be consistent.

> * I did my best to change 'returns' to 'return' on the docstrings for the methods which we added here. As you point out, this is one of many stylistic inconsistencies throughout the cluster_algebra_quiver package. Perhaps a later ticket could go through and ensure the rest of the package conforms with this. The PEP8 issues are similar - I've done my best to make the new code conform, but there appears to be existing code which doesn't quite follow these standards. If this is a serious issue, someone could try to make the entire package conform with PEP8 at a later date.

Serious, not really. Yet, it makes the code a little more difficult to parse quickly, and it would help give Sage a more polished feel.

If my changes are good, then positive review.
----
New commits:



---

archive/issue_comments_261837.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-15T01:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261838.json:
```json
{
    "body": "There seems to be a new error found by the patchbot now:\n\nsage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py\n\nFile \"src/sage/combinat/cluster_algebra_quiver/cluster_seed.py\", line 2356, in sage.combinat.cluster_algebra_quiver.cluster_seed.ClusterSeed.mutate\nFailed example:\n    S = ClusterSeed(['A', 4], user_labels=['a', 'b', 'c']);\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: The number of user-defined labels is not the number of exchangeable and frozen variables.\nGot:\n    <BLANKLINE>\n\nI think once this is fixed, that the code would be ready for a positive review.",
    "created_at": "2017-08-15T16:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261838",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

There seems to be a new error found by the patchbot now:

sage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py

File "src/sage/combinat/cluster_algebra_quiver/cluster_seed.py", line 2356, in sage.combinat.cluster_algebra_quiver.cluster_seed.ClusterSeed.mutate
Failed example:
    S = ClusterSeed(['A', 4], user_labels=['a', 'b', 'c']);
Expected:
    Traceback (most recent call last):
    ...
    ValueError: The number of user-defined labels is not the number of exchangeable and frozen variables.
Got:
    <BLANKLINE>

I think once this is fixed, that the code would be ready for a positive review.



---

archive/issue_comments_261839.json:
```json
{
    "body": "Hmm I've run into this kind of issue before...  I don't really know how to deal with it since it doesn't seem to occur outside of doctests (i.e. if you manually enter it in terminal).  Has anyone seen this before?  What tends to cause this?\n\nI'll try to work it out tomorrow.",
    "created_at": "2017-08-15T21:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261839",
    "user": "https://trac.sagemath.org/admin/accounts/users/benstrasser"
}
```

Hmm I've run into this kind of issue before...  I don't really know how to deal with it since it doesn't seem to occur outside of doctests (i.e. if you manually enter it in terminal).  Has anyone seen this before?  What tends to cause this?

I'll try to work it out tomorrow.



---

archive/issue_comments_261840.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-16T00:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261841.json:
```json
{
    "body": "It is not a blankline; the patchbot reports an actual error traceback (although the blankline is annoying to have it in the output, it is not something that is actually is checked). It is a simple fix because of changes I made to the error messages to conform to our (and Python's) convention of error messages being lowercase and without periods.\n\nI have also fixed the docbuilding issues reported by the patchbot.",
    "created_at": "2017-08-16T00:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261841",
    "user": "https://github.com/tscrim"
}
```

It is not a blankline; the patchbot reports an actual error traceback (although the blankline is annoying to have it in the output, it is not something that is actually is checked). It is a simple fix because of changes I made to the error messages to conform to our (and Python's) convention of error messages being lowercase and without periods.

I have also fixed the docbuilding issues reported by the patchbot.



---

archive/issue_comments_261842.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-20T02:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261842",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261843.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-21T19:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261843",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053525.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-21T19:23:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19102#event-53525"
}
```



---

archive/issue_comments_261844.json:
```json
{
    "body": "Why use `reduce()` here?\n\n```\nis_cluster_vars = reduce(lambda x, y: isinstance(y, str), seqq, 1) and seed._use_fpolys\n```\n\n\nThis code is equivalent to\n\n```\nif len(seqq) == 0 or isinstance(seqq[-1], str):\n    is_cluster_vars = seed._use_fpolys\nelse:\n    is_cluster_vars = False\n```\n\nbut is that what is intented?\n\nOr did you perhaps mean\n\n```\nis_cluster_vars = all(isinstance(y, str) for y in seqq) and seed._use_fpolys\n```\n\n\nI ask because we trying to clean this up in #25571.",
    "created_at": "2018-06-14T09:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19102#issuecomment-261844",
    "user": "https://github.com/jdemeyer"
}
```

Why use `reduce()` here?

```
is_cluster_vars = reduce(lambda x, y: isinstance(y, str), seqq, 1) and seed._use_fpolys
```


This code is equivalent to

```
if len(seqq) == 0 or isinstance(seqq[-1], str):
    is_cluster_vars = seed._use_fpolys
else:
    is_cluster_vars = False
```

but is that what is intented?

Or did you perhaps mean

```
is_cluster_vars = all(isinstance(y, str) for y in seqq) and seed._use_fpolys
```


I ask because we trying to clean this up in #25571.
