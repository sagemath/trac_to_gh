# Issue 25018: Support C++17 code in packages

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2018-04-27 16:04:46

This is at the moment a ticket for a nonexisting defect, as no standard package uses C++17 code at the moment.

The compiler situation is that C++17 is fully supported by `clang-4 --std=c++17` and `gcc-7 --std=c++17`. So, compiler-wise Sage could support it without raising requirements (currently at gcc-4.8) by building gcc if system has gcc<7. But for full support `libstdc++-gcc7` or `libc++-4` is needed too, so `gcc-7` would be the system requirement.

How much is gcc-7 already in the wild?


---

Comment by jdemeyer created at 2018-04-27 18:15:06

What is this ticket about? The description reads more like a comment than an actual issue to be solved. If the ticket cannot be made more concrete, I suggest closing it. We can always open a ticket whenever a real problem occurs.


---

Comment by rws created at 2018-04-28 05:10:14

I have an implementation of commutative matching (needed to fix #25168) in the works that depends on `std::optional`. This ticket is useful to define the amount of changes needed for it, and for reference. Even if we won't fix #25168 in the near future I'm playing with a project that needs the matching algorithm too, and which I'll release in an experimental branch.


---

Comment by rws created at 2018-04-28 06:32:18

Note also that #25168 is more an enhancement as the old behaviour will stay for backward compatibility (in principle it's good to have many different types of matching algorithms).


---

Comment by rws created at 2018-04-28 06:48:50

Actually, even Python2.7 (not 3.4) has `register` in its headers (`unicodeobject.h` and `stringobject.h`), and so C++17 code must not include `Python.h`. Interesting, I opened https://github.com/pynac/pynac/issues/325


---

Comment by jdemeyer created at 2018-04-28 12:09:49

A Trac ticket is about a concrete issue to be fixed. The stuff you are talking about fits more on a mailing list, wiki or something like that.


---

Comment by rws created at 2018-05-05 13:32:12

Changing status from new to needs_review.


---

Comment by rws created at 2018-05-05 13:32:12

I agree. I just replaced `std::optional` usage with that of https://github.com/martinmoene/optional-lite and no longer have a need for C++17.


---

Comment by rws created at 2018-05-05 13:32:25

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2018-05-18 17:16:26

closing positively reviewed duplicates


---

Comment by vdelecroix created at 2018-05-18 17:16:26

Resolution: wontfix
