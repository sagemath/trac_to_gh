# Issue 17094: Numerical noise is back in src/sage/matrix/matrix_double_dense.pyx

archive/issues_017094.json:
```json
{
    "body": "CC:  @vbraun @jdemeyer\n\nKeywords: numerical noise, doctest failure\n\n\n```\nsage -t src/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1012, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps=None)  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 9.87312834948426e-17]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     1.1163357483229223e-05,\n     4.0823761103637633e-07,\n     1.1228610665566416e-08,\n     2.251964510803022e-10,\n     3.1113474636612192e-12,\n     2.6497213779939672e-14,\n     1.048419319427735e-16]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1014, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps='auto')  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 0.0]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     1.1163357483229223e-05,\n     4.0823761103637633e-07,\n     1.1228610665566416e-08,\n     2.251964510803022e-10,\n     3.1113474636612192e-12,\n     2.6497213779939672e-14,\n     0.0]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1016, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps=1e-4)  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\n1 item had failures:\n   3 of  31 in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\n    [642 tests, 3 failures, 1.54 s]\n```\n\nThis is on a virtualized Ubuntu\n\n```\ndarij@travis-virtualbox:~/gitsage$ uname -s -r -v\nLinux 3.2.0-70-generic #105-Ubuntu SMP Wed Sep 24 19:49:46 UTC 2014\n```\n\non a Win7 64bit host.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17331\n\n",
    "created_at": "2014-11-13T04:31:21Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Numerical noise is back in src/sage/matrix/matrix_double_dense.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17094",
    "user": "https://github.com/darijgr"
}
```
CC:  @vbraun @jdemeyer

Keywords: numerical noise, doctest failure


```
sage -t src/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1012, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps=None)  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 9.87312834948426e-17]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     1.1163357483229223e-05,
     4.0823761103637633e-07,
     1.1228610665566416e-08,
     2.251964510803022e-10,
     3.1113474636612192e-12,
     2.6497213779939672e-14,
     1.048419319427735e-16]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1014, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps='auto')  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 0.0]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     1.1163357483229223e-05,
     4.0823761103637633e-07,
     1.1228610665566416e-08,
     2.251964510803022e-10,
     3.1113474636612192e-12,
     2.6497213779939672e-14,
     0.0]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1016, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps=1e-4)  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
1 item had failures:
   3 of  31 in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
    [642 tests, 3 failures, 1.54 s]
```

This is on a virtualized Ubuntu

```
darij@travis-virtualbox:~/gitsage$ uname -s -r -v
Linux 3.2.0-70-generic #105-Ubuntu SMP Wed Sep 24 19:49:46 UTC 2014
```

on a Win7 64bit host.

Issue created by migration from https://trac.sagemath.org/ticket/17331





---

archive/issue_comments_227040.json:
```json
{
    "body": "Can you post a patch that increases the tolerance suitably?",
    "created_at": "2014-11-13T14:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227040",
    "user": "https://github.com/vbraun"
}
```

Can you post a patch that increases the tolerance suitably?



---

archive/issue_comments_227041.json:
```json
{
    "body": "OK, done. But is this really the right thing to do, or could it be that there is an actual lack of precision that the failing doctests expose?\n----\nNew commits:",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227041",
    "user": "https://github.com/darijgr"
}
```

OK, done. But is this really the right thing to do, or could it be that there is an actual lack of precision that the failing doctests expose?
----
New commits:



---

archive/issue_comments_227042.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227042",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_227043.json:
```json
{
    "body": "This is just fallout from printing more digits #16858, nothing serious.",
    "created_at": "2014-11-13T18:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227043",
    "user": "https://github.com/vbraun"
}
```

This is just fallout from printing more digits #16858, nothing serious.



---

archive/issue_comments_227044.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-13T18:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227044",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227045.json:
```json
{
    "body": "Thank you!",
    "created_at": "2014-11-13T19:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227045",
    "user": "https://github.com/darijgr"
}
```

Thank you!



---

archive/issue_comments_227046.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-14T12:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17094#issuecomment-227046",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_016523.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-11-14T12:08:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17094",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17094#event-16523"
}
```
