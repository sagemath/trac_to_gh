# Issue 29855: FreeQuadraticModule needs richer categories

archive/issues_029855.json:
```json
{
    "body": "CC:  tscrim sbrandhorst gourgoulhon @mjungmath\n\n\n```\nsage: VectorSpace(QQ, 5, inner_product_matrix=matrix.identity(5)).category()\nCategory of finite dimensional vector spaces with basis over (number fields and quotient fields and metric spaces)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30092\n\n",
    "created_at": "2020-07-08T20:12:38Z",
    "labels": [
        "linear algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "FreeQuadraticModule needs richer categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29855",
    "user": "mkoeppe"
}
```
CC:  tscrim sbrandhorst gourgoulhon @mjungmath


```
sage: VectorSpace(QQ, 5, inner_product_matrix=matrix.identity(5)).category()
Category of finite dimensional vector spaces with basis over (number fields and quotient fields and metric spaces)
```


Issue created by migration from https://trac.sagemath.org/ticket/30092





---

archive/issue_comments_424044.json:
```json
{
    "body": "Also, the classes in `sage.modules` do not make it possible to pass a `category` argument at initialization.",
    "created_at": "2020-07-17T17:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424044",
    "user": "mkoeppe"
}
```

Also, the classes in `sage.modules` do not make it possible to pass a `category` argument at initialization.



---

archive/issue_comments_424045.json:
```json
{
    "body": "I have here a preliminary implementation (trying to learn from `FilteredModules` and `MetricSpaces`) of `NormedSpacesCategory` and `NormedVectorSpaces`.\n\nTravis, if you could take a quick look to see if this seems to be going in the right direction...\n----\nNew commits:",
    "created_at": "2020-07-17T23:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424045",
    "user": "mkoeppe"
}
```

I have here a preliminary implementation (trying to learn from `FilteredModules` and `MetricSpaces`) of `NormedSpacesCategory` and `NormedVectorSpaces`.

Travis, if you could take a quick look to see if this seems to be going in the right direction...
----
New commits:



---

archive/issue_comments_424046.json:
```json
{
    "body": "Why is this a functorial construction and not an axiom? I don't see why this wouldn't commute with other axioms, such as `WithBasis`.",
    "created_at": "2020-07-17T23:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424046",
    "user": "tscrim"
}
```

Why is this a functorial construction and not an axiom? I don't see why this wouldn't commute with other axioms, such as `WithBasis`.



---

archive/issue_comments_424047.json:
```json
{
    "body": "Thanks. I'll look into this.",
    "created_at": "2020-07-18T00:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424047",
    "user": "mkoeppe"
}
```

Thanks. I'll look into this.



---

archive/issue_comments_424048.json:
```json
{
    "body": "Ah, no, this is good. I thought I implemented metric spaces as an axiom, but it is a functorial construction. So please keep the current approach.",
    "created_at": "2020-07-18T00:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424048",
    "user": "tscrim"
}
```

Ah, no, this is good. I thought I implemented metric spaces as an axiom, but it is a functorial construction. So please keep the current approach.



---

archive/issue_comments_424049.json:
```json
{
    "body": "Thanks. I am still quite confused about many basic things in the category system, thanks for your patience.  I am getting this:\n\n```\nsage: VectorSpaces(QQ).Filtered().Normed()\nJoin of Category of filtered vector spaces over Rational Field and Category of metric spaces\n```\n\nWhat am I missing for \"normed spaces\" to show up?",
    "created_at": "2020-07-18T00:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424049",
    "user": "mkoeppe"
}
```

Thanks. I am still quite confused about many basic things in the category system, thanks for your patience.  I am getting this:

```
sage: VectorSpaces(QQ).Filtered().Normed()
Join of Category of filtered vector spaces over Rational Field and Category of metric spaces
```

What am I missing for "normed spaces" to show up?



---

archive/issue_comments_424050.json:
```json
{
    "body": "Try\n\n```diff\n-class NormedSpacesCategory(RegressiveCovariantConstructionCategory, Category_over_base_ring):\n+class NormedSpacesCategory(RegressiveCovariantConstructionCategory):\n```\n",
    "created_at": "2020-07-18T00:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424050",
    "user": "tscrim"
}
```

Try

```diff
-class NormedSpacesCategory(RegressiveCovariantConstructionCategory, Category_over_base_ring):
+class NormedSpacesCategory(RegressiveCovariantConstructionCategory):
```




---

archive/issue_comments_424051.json:
```json
{
    "body": "Also remove the `__init__`.",
    "created_at": "2020-07-18T00:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424051",
    "user": "tscrim"
}
```

Also remove the `__init__`.



---

archive/issue_comments_424052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-18T00:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424053.json:
```json
{
    "body": "I also have a question. Do we need this to be be a subcategory for vector spaces? I would think it would be sufficient for a module structure for the definition to make sense. For example, **Z** is naturally a normed **Z**-module that is not a vector space.\n\nAddendum - Well, we actually need normed fields and rings as well for this to make sense. In fact, any additive monoid with a metric (function) becomes naturally normed. So we should also set that additional category link. I am not sure how to do that off-hand.",
    "created_at": "2020-07-18T00:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424053",
    "user": "tscrim"
}
```

I also have a question. Do we need this to be be a subcategory for vector spaces? I would think it would be sufficient for a module structure for the definition to make sense. For example, **Z** is naturally a normed **Z**-module that is not a vector space.

Addendum - Well, we actually need normed fields and rings as well for this to make sense. In fact, any additive monoid with a metric (function) becomes naturally normed. So we should also set that additional category link. I am not sure how to do that off-hand.



---

archive/issue_comments_424054.json:
```json
{
    "body": "Well, I wanted `NormedSpacesCategory` to actually work also for modules, but I did not want to introduce the word \"normed module\" -- because this does not seem to be in widespread use.",
    "created_at": "2020-07-18T00:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424054",
    "user": "mkoeppe"
}
```

Well, I wanted `NormedSpacesCategory` to actually work also for modules, but I did not want to introduce the word "normed module" -- because this does not seem to be in widespread use.



---

archive/issue_comments_424055.json:
```json
{
    "body": "However, moving it up one category level higher is a no-cost operation. Plus it means you don't have to deal with distinguishing the two categories (which can be slightly annoying at times).",
    "created_at": "2020-07-18T00:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424055",
    "user": "tscrim"
}
```

However, moving it up one category level higher is a no-cost operation. Plus it means you don't have to deal with distinguishing the two categories (which can be slightly annoying at times).



---

archive/issue_comments_424056.json:
```json
{
    "body": "Still getting\n\n```\nsage: VectorSpaces(QQ).Filtered().Normed()\nJoin of Category of filtered vector spaces over Rational Field and Category of metric spaces\n```\n\nafter the changes from your comments 11/12",
    "created_at": "2020-07-18T00:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424056",
    "user": "mkoeppe"
}
```

Still getting

```
sage: VectorSpaces(QQ).Filtered().Normed()
Join of Category of filtered vector spaces over Rational Field and Category of metric spaces
```

after the changes from your comments 11/12



---

archive/issue_comments_424057.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-18T00:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424057",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424058.json:
```json
{
    "body": "Of course, there's always more generality. Here's one: https://mathworld.wolfram.com/NormedBanachModule.html",
    "created_at": "2020-07-18T00:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424058",
    "user": "mkoeppe"
}
```

Of course, there's always more generality. Here's one: https://mathworld.wolfram.com/NormedBanachModule.html



---

archive/issue_comments_424059.json:
```json
{
    "body": "and we could do https://en.wikipedia.org/wiki/Normed_algebra (which places a restriction on the norm wrt multiplication)\n\n... but I was hoping to first implement things that would be useful in a first course in linear algebra.",
    "created_at": "2020-07-18T00:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424059",
    "user": "mkoeppe"
}
```

and we could do https://en.wikipedia.org/wiki/Normed_algebra (which places a restriction on the norm wrt multiplication)

... but I was hoping to first implement things that would be useful in a first course in linear algebra.



---

archive/issue_comments_424060.json:
```json
{
    "body": "Another direction of generalization is, of course, through valuations on the field; instead of just informally using the absolute value function...",
    "created_at": "2020-07-18T00:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424060",
    "user": "mkoeppe"
}
```

Another direction of generalization is, of course, through valuations on the field; instead of just informally using the absolute value function...



---

archive/issue_comments_424061.json:
```json
{
    "body": "I am not really sure at this point why it is not working from looking at the code. The only thing I can think of at this point is that `default_super_categories` is not picking up the vector spaces category somehow. Perhaps something to look at is what is happening here\n\n```python\n        return Category.join([getattr(cat, cls._functor_category)(*args)\n                              for cat in category._super_categories\n                              if hasattr(cat, cls._functor_category)])\n```\n\nin `CovariantConstructionCategory.default_super_categories`. I can do some experimentation when I get back to my office on Monday.\n\nI generally prefer to implement things in the first category where they make sense, which then follows up to the category that I really want it.\n\nThe other issue here is that you need the other normed categories in order for the definition of a norm to make sense. So they kind of have to come along for the ride. However, it should be easy enough to use the same functorial construction, the meaning of the word \"normed\" changes slightly, but everything is compatible, so there is no issue (and it is something we regularly do in the math).",
    "created_at": "2020-07-18T01:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424061",
    "user": "tscrim"
}
```

I am not really sure at this point why it is not working from looking at the code. The only thing I can think of at this point is that `default_super_categories` is not picking up the vector spaces category somehow. Perhaps something to look at is what is happening here

```python
        return Category.join([getattr(cat, cls._functor_category)(*args)
                              for cat in category._super_categories
                              if hasattr(cat, cls._functor_category)])
```

in `CovariantConstructionCategory.default_super_categories`. I can do some experimentation when I get back to my office on Monday.

I generally prefer to implement things in the first category where they make sense, which then follows up to the category that I really want it.

The other issue here is that you need the other normed categories in order for the definition of a norm to make sense. So they kind of have to come along for the ride. However, it should be easy enough to use the same functorial construction, the meaning of the word "normed" changes slightly, but everything is compatible, so there is no issue (and it is something we regularly do in the math).



---

archive/issue_comments_424062.json:
```json
{
    "body": "Thanks a lot already!",
    "created_at": "2020-07-18T01:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424062",
    "user": "mkoeppe"
}
```

Thanks a lot already!



---

archive/issue_comments_424063.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-18T01:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424063",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424064.json:
```json
{
    "body": "Replying to [comment:22 tscrim]:\n> I generally prefer to implement things in the first category where they make sense, which then follows up to the category that I really want it.\n\nRight. It looks it's best to start with normed additive groups (https://ncatlab.org/nlab/show/normed+group) - which use slightly weaker conditions.\n\n> The other issue here is that you need the other normed categories in order for the definition of a norm to make sense. So they kind of have to come along for the ride. However, it should be easy enough to use the same functorial construction, the meaning of the word \"normed\" changes slightly, but everything is compatible, so there is no issue (and it is something we regularly do in the math).\n\nI agree, this type of overloading seems unproblematic in this case.",
    "created_at": "2020-07-18T06:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424064",
    "user": "mkoeppe"
}
```

Replying to [comment:22 tscrim]:
> I generally prefer to implement things in the first category where they make sense, which then follows up to the category that I really want it.

Right. It looks it's best to start with normed additive groups (https://ncatlab.org/nlab/show/normed+group) - which use slightly weaker conditions.

> The other issue here is that you need the other normed categories in order for the definition of a norm to make sense. So they kind of have to come along for the ride. However, it should be easy enough to use the same functorial construction, the meaning of the word "normed" changes slightly, but everything is compatible, so there is no issue (and it is something we regularly do in the math).

I agree, this type of overloading seems unproblematic in this case.



---

archive/issue_comments_424065.json:
```json
{
    "body": "I didn't have time to look at this.\nJust in case: Please be aware that there are no restrictions whatsoever on the inner product.\nIt is just a bilinear form. For instance it could be zero.",
    "created_at": "2020-07-18T11:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424065",
    "user": "sbrandhorst"
}
```

I didn't have time to look at this.
Just in case: Please be aware that there are no restrictions whatsoever on the inner product.
It is just a bilinear form. For instance it could be zero.



---

archive/issue_comments_424066.json:
```json
{
    "body": "Replying to [comment:26 sbrandhorst]:\n> Please be aware that there are no restrictions whatsoever on the inner product.\n> It is just a bilinear form. For instance it could be zero. \n\nThanks. This is important to keep it mind.",
    "created_at": "2020-07-18T20:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424066",
    "user": "mkoeppe"
}
```

Replying to [comment:26 sbrandhorst]:
> Please be aware that there are no restrictions whatsoever on the inner product.
> It is just a bilinear form. For instance it could be zero. 

Thanks. This is important to keep it mind.



---

archive/issue_comments_424067.json:
```json
{
    "body": "I figured out the problem: There is no link to the `NormedVectorSpaces`. So you need to add this to `VectorSpaces`:\n\n```\n    Normed = LazyImport('sage.categories.normed_vector_spaces', 'NormedVectorSpaces',\n                        'Normed')\n```\n\nHowever, as we discussed, we wanted to lift this up. Are you currently working on this or would you like me to do it?",
    "created_at": "2020-07-20T02:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424067",
    "user": "tscrim"
}
```

I figured out the problem: There is no link to the `NormedVectorSpaces`. So you need to add this to `VectorSpaces`:

```
    Normed = LazyImport('sage.categories.normed_vector_spaces', 'NormedVectorSpaces',
                        'Normed')
```

However, as we discussed, we wanted to lift this up. Are you currently working on this or would you like me to do it?



---

archive/issue_comments_424068.json:
```json
{
    "body": "Please go ahead, I can't work on this until mid next week.",
    "created_at": "2020-07-20T03:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424068",
    "user": "mkoeppe"
}
```

Please go ahead, I can't work on this until mid next week.



---

archive/issue_comments_424069.json:
```json
{
    "body": "(Mid this week in your timezone)",
    "created_at": "2020-07-20T03:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424069",
    "user": "mkoeppe"
}
```

(Mid this week in your timezone)



---

archive/issue_comments_424070.json:
```json
{
    "body": "It is still lacking a bit in implementation, but here is a proof-of-concept for the normed (additive) monoids and various other subcategories with concrete implementations for `ZZ` and `QQ` (which likely require more trivial doctest changes throughout Sage, but we should get all of the categories that we want done first in case it causes the output to change).\n----\nNew commits:",
    "created_at": "2020-07-21T00:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424070",
    "user": "tscrim"
}
```

It is still lacking a bit in implementation, but here is a proof-of-concept for the normed (additive) monoids and various other subcategories with concrete implementations for `ZZ` and `QQ` (which likely require more trivial doctest changes throughout Sage, but we should get all of the categories that we want done first in case it causes the output to change).
----
New commits:



---

archive/issue_comments_424071.json:
```json
{
    "body": "Thanks very much! Looks great on a quick glance -- I'll take a closer look soon",
    "created_at": "2020-07-21T01:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424071",
    "user": "mkoeppe"
}
```

Thanks very much! Looks great on a quick glance -- I'll take a closer look soon



---

archive/issue_comments_424072.json:
```json
{
    "body": "Some quick thoughts on the test functions.\n- `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`\n- the one in additive groups - perhaps just have `_test_norm_symmetric` and use the inherited `_test_norm_on_additive_monoid` - if that makes sense\n- `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`",
    "created_at": "2020-07-21T02:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424072",
    "user": "mkoeppe"
}
```

Some quick thoughts on the test functions.
- `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`
- the one in additive groups - perhaps just have `_test_norm_symmetric` and use the inherited `_test_norm_on_additive_monoid` - if that makes sense
- `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`



---

archive/issue_comments_424073.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-21T04:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424073",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424074.json:
```json
{
    "body": "Replying to [comment:33 mkoeppe]:\n> Some quick thoughts on the test functions.\n>  - `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`\n>  - `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`\n\nI don't want to do that for the multiplicative test because a ring, which is a monoid, does not satisfy the normed monoid properties because the norm of the multiplicative identity is not `0`. I guess that actually means this is not a regressive functorial construction. We only get a semigroup with a \"weak norm,\" a function `S -> R` that satisfies `|ab| <= |a| + |b|` (do you know if something like this has a name?). Or we just have to acknowledge the abuse somewhere.\n\n>  - the one in additive groups - perhaps just have `_test_norm_symmetric` and use the inherited `_test_norm_on_additive_monoid` - if that makes sense\n\nThat is a good idea. Done.",
    "created_at": "2020-07-21T04:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424074",
    "user": "tscrim"
}
```

Replying to [comment:33 mkoeppe]:
> Some quick thoughts on the test functions.
>  - `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`
>  - `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`

I don't want to do that for the multiplicative test because a ring, which is a monoid, does not satisfy the normed monoid properties because the norm of the multiplicative identity is not `0`. I guess that actually means this is not a regressive functorial construction. We only get a semigroup with a "weak norm," a function `S -> R` that satisfies `|ab| <= |a| + |b|` (do you know if something like this has a name?). Or we just have to acknowledge the abuse somewhere.

>  - the one in additive groups - perhaps just have `_test_norm_symmetric` and use the inherited `_test_norm_on_additive_monoid` - if that makes sense

That is a good idea. Done.



---

archive/issue_comments_424075.json:
```json
{
    "body": "Replying to [comment:35 tscrim]:\n> Replying to [comment:33 mkoeppe]:\n> > Some quick thoughts on the test functions.\n> >  - `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`\n> >  - `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`\n> \n> I don't want to do that for the multiplicative test because a ring, which is a monoid, does not satisfy the normed monoid properties because the norm of the multiplicative identity is not `0`. I guess that actually means this is not a regressive functorial construction. We only get a semigroup with a \"weak norm,\" a function `S -> R` that satisfies `|ab| <= |a| + |b|` (do you know if something like this has a name?). Or we just have to acknowledge the abuse somewhere.\n\nLet's see. I think this just means that there should be a separate category/functor for normed multiplicatively written monoids - satisfying `|ab| <= |a| + |b|` (and then multiplicative identities necessarily have norm 0). Call it `MultiplicativeNormed`. Just like `AdditiveCommutative` and `Commutative` are distinguished. \n\nThis has nothing to do with the positive homogeneity property of norms on modules.",
    "created_at": "2020-07-21T05:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424075",
    "user": "mkoeppe"
}
```

Replying to [comment:35 tscrim]:
> Replying to [comment:33 mkoeppe]:
> > Some quick thoughts on the test functions.
> >  - `_test_norm_additive` in `AdditiveSemigroups` ... perhaps change to `_test_norm_on_additive_monoid`
> >  - `_test_norm_multiplication` ... likewise change to `test_norm_on_multiplicative_monoid`
> 
> I don't want to do that for the multiplicative test because a ring, which is a monoid, does not satisfy the normed monoid properties because the norm of the multiplicative identity is not `0`. I guess that actually means this is not a regressive functorial construction. We only get a semigroup with a "weak norm," a function `S -> R` that satisfies `|ab| <= |a| + |b|` (do you know if something like this has a name?). Or we just have to acknowledge the abuse somewhere.

Let's see. I think this just means that there should be a separate category/functor for normed multiplicatively written monoids - satisfying `|ab| <= |a| + |b|` (and then multiplicative identities necessarily have norm 0). Call it `MultiplicativeNormed`. Just like `AdditiveCommutative` and `Commutative` are distinguished. 

This has nothing to do with the positive homogeneity property of norms on modules.



---

archive/issue_comments_424076.json:
```json
{
    "body": "... OK, I forgot about rings.\n\nYes, there needs to be a `_test_norm_submultiplicative` that tests the ring multiplication. (That's in the category `Normed` - not `MultiplicativeNormed`.)",
    "created_at": "2020-07-21T05:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424076",
    "user": "mkoeppe"
}
```

... OK, I forgot about rings.

Yes, there needs to be a `_test_norm_submultiplicative` that tests the ring multiplication. (That's in the category `Normed` - not `MultiplicativeNormed`.)



---

archive/issue_comments_424077.json:
```json
{
    "body": "I'll make a few quick edits",
    "created_at": "2020-07-22T08:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424077",
    "user": "mkoeppe"
}
```

I'll make a few quick edits



---

archive/issue_comments_424078.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-22T08:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424078",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424079.json:
```json
{
    "body": "more on another day",
    "created_at": "2020-07-22T08:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424079",
    "user": "mkoeppe"
}
```

more on another day



---

archive/issue_comments_424080.json:
```json
{
    "body": "I am -1 on calling the test `norm_symmetric` since I think that is too vague of a name. Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.\n\nI think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.",
    "created_at": "2020-07-24T00:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424080",
    "user": "tscrim"
}
```

I am -1 on calling the test `norm_symmetric` since I think that is too vague of a name. Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.

I think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.



---

archive/issue_comments_424081.json:
```json
{
    "body": "Replying to [comment:41 tscrim]:\n> I am -1 on calling the test `norm_symmetric` since I think that is too vague of a name.\n\nOK, I agree.\n\n> Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.\n\nHaven't seen and I don't think it would be useful.\n\n> I think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.\n\nWe could also make `norm` a map and then go through #30193...",
    "created_at": "2020-07-24T00:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424081",
    "user": "mkoeppe"
}
```

Replying to [comment:41 tscrim]:
> I am -1 on calling the test `norm_symmetric` since I think that is too vague of a name.

OK, I agree.

> Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.

Haven't seen and I don't think it would be useful.

> I think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.

We could also make `norm` a map and then go through #30193...



---

archive/issue_comments_424082.json:
```json
{
    "body": "Replying to [comment:42 mkoeppe]:\n> Replying to [comment:41 tscrim]:\n> > Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.\n> \n> Haven't seen and I don't think it would be useful.\n\nI agree, but sometimes you never know...\n\n> > I think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.\n> \n> We could also make `norm` a map and then go through #30193...\n\nPossibly. Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).",
    "created_at": "2020-07-24T01:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424082",
    "user": "tscrim"
}
```

Replying to [comment:42 mkoeppe]:
> Replying to [comment:41 tscrim]:
> > Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.
> 
> Haven't seen and I don't think it would be useful.

I agree, but sometimes you never know...

> > I think splitting the tests into finer pieces with finer categories is the right way to do things. The submultiplicative can then go into a new normed semigroups (maybe magmas?) category, etc.
> 
> We could also make `norm` a map and then go through #30193...

Possibly. Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).



---

archive/issue_comments_424083.json:
```json
{
    "body": "Replying to [comment:43 tscrim]:\n> Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).\n\nOK, sounds like a plan. I'll work on it a little bit now",
    "created_at": "2020-07-24T01:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424083",
    "user": "mkoeppe"
}
```

Replying to [comment:43 tscrim]:
> Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).

OK, sounds like a plan. I'll work on it a little bit now



---

archive/issue_comments_424084.json:
```json
{
    "body": "Replying to [comment:44 mkoeppe]:\n> Replying to [comment:43 tscrim]:\n> > Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).\n> \n> OK, sounds like a plan. I'll work on it a little bit now\n\nThank you. I can probably do it today too if you want.",
    "created_at": "2020-07-24T02:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424084",
    "user": "tscrim"
}
```

Replying to [comment:44 mkoeppe]:
> Replying to [comment:43 tscrim]:
> > Although at least for now we can implement everything here in the respective categories and refine it later on (well, just moving the respective methods around).
> 
> OK, sounds like a plan. I'll work on it a little bit now

Thank you. I can probably do it today too if you want.



---

archive/issue_comments_424085.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-24T02:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424085",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_424086.json:
```json
{
    "body": "Replying to [comment:43 tscrim]:\n> Replying to [comment:42 mkoeppe]:\n> > Replying to [comment:41 tscrim]:\n> > > Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.\n\nI would suggest that we just ignore norms on multiplicative monoids on this ticket. \n\nThen we can decide later whether we want the shared code to go through axioms on functionals, or through other means. \n\nAlso, norms on multiplicative monoids have a close connection to valuations on fields -- and getting all of that right on one ticket is too large a scope.",
    "created_at": "2020-07-24T02:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424086",
    "user": "mkoeppe"
}
```

Replying to [comment:43 tscrim]:
> Replying to [comment:42 mkoeppe]:
> > Replying to [comment:41 tscrim]:
> > > Are there objects that satisfy both the multiplicative and additive inverse norm properties? If so, then there will be a name clash too.

I would suggest that we just ignore norms on multiplicative monoids on this ticket. 

Then we can decide later whether we want the shared code to go through axioms on functionals, or through other means. 

Also, norms on multiplicative monoids have a close connection to valuations on fields -- and getting all of that right on one ticket is too large a scope.



---

archive/issue_comments_424087.json:
```json
{
    "body": "Replying to [comment:45 tscrim]:\n> I can probably do it today too if you want.\n\nFeel free to take over -- I have to take a break for dinner now anyway",
    "created_at": "2020-07-24T02:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424087",
    "user": "mkoeppe"
}
```

Replying to [comment:45 tscrim]:
> I can probably do it today too if you want.

Feel free to take over -- I have to take a break for dinner now anyway



---

archive/issue_comments_424088.json:
```json
{
    "body": "Narrowed the ticket description",
    "created_at": "2020-07-25T21:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424088",
    "user": "mkoeppe"
}
```

Narrowed the ticket description



---

archive/issue_comments_424089.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29855#issuecomment-424089",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
