# Issue 24391: fix pcre build on Solaris 11

archive/issues_024391.json:
```json
{
    "body": "CC:  @mkoeppe @dimpase @EmmanuelCharpentier\n\nit fails its self-tests, segfaulting (see #24596)\n\nIssue created by migration from https://trac.sagemath.org/ticket/24628\n\n",
    "created_at": "2018-02-01T01:41:56Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "fix pcre build on Solaris 11",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24391",
    "user": "https://github.com/dimpase"
}
```
CC:  @mkoeppe @dimpase @EmmanuelCharpentier

it fails its self-tests, segfaulting (see #24596)

Issue created by migration from https://trac.sagemath.org/ticket/24628





---

archive/issue_comments_341310.json:
```json
{
    "body": "I believe PCRE is used in Polymake, and in Sage's polymake interface. I guess without JIT they (as well as R, as R is using it too) might get slower...",
    "created_at": "2018-02-05T10:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341310",
    "user": "https://github.com/dimpase"
}
```

I believe PCRE is used in Polymake, and in Sage's polymake interface. I guess without JIT they (as well as R, as R is using it too) might get slower...



---

archive/issue_comments_341311.json:
```json
{
    "body": "Replying to [comment:3 dimpase]:\n> I believe PCRE is used in Polymake, and in Sage's polymake interface. I guess without JIT they (as well as R, as R is using it too) might get slower...\n\nSlower but functional should be acceptable. Note that my patch still uses JIT on systems where it is supported.\n----\nNew commits:",
    "created_at": "2018-02-05T10:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341311",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 dimpase]:
> I believe PCRE is used in Polymake, and in Sage's polymake interface. I guess without JIT they (as well as R, as R is using it too) might get slower...

Slower but functional should be acceptable. Note that my patch still uses JIT on systems where it is supported.
----
New commits:



---

archive/issue_comments_341312.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-05T11:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341312",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_341313.json:
```json
{
    "body": "\n```\nreal    9m46.453s\nuser    7m32.365s\nsys     2m2.237s\nCopying package files from temporary location /datapool/jeroen/sage/local/var/tmp/sage/build/pcre-8.40.p1/inst to /datapool/jeroen/sage/local\nSuccessfully installed pcre-8.40.p1\nDeleting temporary build directory\n/datapool/jeroen/sage/local/var/tmp/sage/build/pcre-8.40.p1\nFinished installing pcre-8.40.p1.spkg\n```\n",
    "created_at": "2018-02-05T11:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341313",
    "user": "https://github.com/jdemeyer"
}
```


```
real    9m46.453s
user    7m32.365s
sys     2m2.237s
Copying package files from temporary location /datapool/jeroen/sage/local/var/tmp/sage/build/pcre-8.40.p1/inst to /datapool/jeroen/sage/local
Successfully installed pcre-8.40.p1
Deleting temporary build directory
/datapool/jeroen/sage/local/var/tmp/sage/build/pcre-8.40.p1
Finished installing pcre-8.40.p1.spkg
```




---

archive/issue_comments_341314.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-05T12:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341314",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_341315.json:
```json
{
    "body": "looks good to me",
    "created_at": "2018-02-05T12:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341315",
    "user": "https://github.com/dimpase"
}
```

looks good to me



---

archive/issue_events_022774.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2018-02-09T08:03:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24391#event-22774"
}
```



---

archive/issue_comments_341316.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-09T08:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341316",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_341317.json:
```json
{
    "body": "Wish someone had CC'd me on this (I don't read every ticket that gets opened).  The test suite for PCRE has always failed on Cygwin (with or without JIT) so this broke the build on Cygwin.",
    "created_at": "2018-02-16T15:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341317",
    "user": "https://github.com/embray"
}
```

Wish someone had CC'd me on this (I don't read every ticket that gets opened).  The test suite for PCRE has always failed on Cygwin (with or without JIT) so this broke the build on Cygwin.



---

archive/issue_comments_341318.json:
```json
{
    "body": "IMHO on Cygwin, and, in fact on any system that provides PCRE,\nwe should just use the system's one.",
    "created_at": "2018-02-16T15:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341318",
    "user": "https://github.com/dimpase"
}
```

IMHO on Cygwin, and, in fact on any system that provides PCRE,
we should just use the system's one.



---

archive/issue_comments_341319.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> IMHO on Cygwin, and, in fact on any system that provides PCRE,\n> we should just use the system's one.\n\nAgreed. Working on that :)",
    "created_at": "2018-02-16T15:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341319",
    "user": "https://github.com/embray"
}
```

Replying to [comment:11 dimpase]:
> IMHO on Cygwin, and, in fact on any system that provides PCRE,
> we should just use the system's one.

Agreed. Working on that :)



---

archive/issue_comments_341320.json:
```json
{
    "body": "Replying to [comment:12 embray]:\n> Replying to [comment:11 dimpase]:\n> > IMHO on Cygwin, and, in fact on any system that provides PCRE,\n> > we should just use the system's one.\n> \n> Agreed. Working on that :)\n\nThis is a **general** need : unless we have specific needs not solvable in an interface, we should use whatever is installed systemwide.\n\nA mechanism to do that in the toplevel configuration file would be useful. IIRC, Erik has undertaken to refactor parts of this cofiguraion system (that's why I haven't yet progresed much on OpenSSL, BTW : I'm waiting for the dust to settle a bit...), this might be one of his objectives.\n\nHowever, I can think of difficulties to extende such a mechanism to //library// interfaces...",
    "created_at": "2018-02-16T15:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341320",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Replying to [comment:12 embray]:
> Replying to [comment:11 dimpase]:
> > IMHO on Cygwin, and, in fact on any system that provides PCRE,
> > we should just use the system's one.
> 
> Agreed. Working on that :)

This is a **general** need : unless we have specific needs not solvable in an interface, we should use whatever is installed systemwide.

A mechanism to do that in the toplevel configuration file would be useful. IIRC, Erik has undertaken to refactor parts of this cofiguraion system (that's why I haven't yet progresed much on OpenSSL, BTW : I'm waiting for the dust to settle a bit...), this might be one of his objectives.

However, I can think of difficulties to extende such a mechanism to //library// interfaces...



---

archive/issue_comments_341321.json:
```json
{
    "body": "I already have a prototype for this that I'm pretty happy with, but I've been waiting, as you say, for the dust to settle on #21524 before moving forward on it.  That ticket is ready for review BTW.",
    "created_at": "2018-02-16T16:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24391#issuecomment-341321",
    "user": "https://github.com/embray"
}
```

I already have a prototype for this that I'm pretty happy with, but I've been waiting, as you say, for the dust to settle on #21524 before moving forward on it.  That ticket is ready for review BTW.
