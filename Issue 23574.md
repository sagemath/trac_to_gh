# Issue 23574: Failure of specialization over some rings

Issue created by migration from https://trac.sagemath.org/ticket/23811

Original creator: paulfili

Original creation time: 2017-09-08 22:31:18

Keywords: polynomials, specialization

The following code used to fail in the specialization for polynomials over some rings:

```python
            sage: R.<c>=RR[]
            sage: P.<z>=AffineSpace(R,1)
            sage: H=End(P)
            sage: f=H([z^2+c])
            sage: f.specialization({c:1})
```

should return:

```python
            Scheme endomorphism of Affine Space of dimension 1 over Real Field with 53 bits of precision
              Defn: Defined on coordinates by sending (z) to
                    (z^2 + 1.00000000000000)
```


If the base ring of R was QQ, this would work, but if it was RR, it would fail. The problem was in the specialization function, which used a dictionary psi whose keys were supposed to belong to the flattened ring, but instead belonged to the unflattened polynomial ring. Over some rings the built-in coercion functions would fix this while over others they would not. The dictionary psi has been corrected so that the specialization function works as desired. 


---

Comment by bhutz created at 2017-09-09 14:46:44

New commits:


---

Comment by bhutz created at 2017-09-09 14:46:44

Changing status from new to needs_review.


---

Comment by bhutz created at 2017-09-09 14:48:16

Changing status from needs_review to positive_review.


---

Comment by bhutz created at 2017-09-09 14:48:16

Changing priority from major to minor.


---

Comment by bhutz created at 2017-09-09 14:48:16

This fixes the issue. I just made a minor whitespace change.

I think this is just a minor priority since Sage is failing with an error message, we just should be able to deal with that case.


---

Comment by paulfili created at 2017-09-09 17:03:10

Changing status from positive_review to needs_review.


---

Comment by paulfili created at 2017-09-09 17:03:10

Fixed a typo where the doc test added referred to the wrong trac #, otherwise unchanged and should be good to go. 
----
New commits:


---

Comment by bhutz created at 2017-09-09 17:20:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-09-24 13:03:53

Resolution: fixed
