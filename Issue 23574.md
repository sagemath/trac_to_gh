# Issue 23574: Failure of specialization over some rings

archive/issues_023574.json:
```json
{
    "body": "Keywords: polynomials, specialization\n\nThe following code used to fail in the specialization for polynomials over some rings:\n\n```python\n            sage: R.<c>=RR[]\n            sage: P.<z>=AffineSpace(R,1)\n            sage: H=End(P)\n            sage: f=H([z^2+c])\n            sage: f.specialization({c:1})\n```\n\nshould return:\n\n```python\n            Scheme endomorphism of Affine Space of dimension 1 over Real Field with 53 bits of precision\n              Defn: Defined on coordinates by sending (z) to\n                    (z^2 + 1.00000000000000)\n```\n\n\nIf the base ring of R was QQ, this would work, but if it was RR, it would fail. The problem was in the specialization function, which used a dictionary psi whose keys were supposed to belong to the flattened ring, but instead belonged to the unflattened polynomial ring. Over some rings the built-in coercion functions would fix this while over others they would not. The dictionary psi has been corrected so that the specialization function works as desired. \n\nIssue created by migration from https://trac.sagemath.org/ticket/23811\n\n",
    "created_at": "2017-09-08T22:31:18Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Failure of specialization over some rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23574",
    "user": "https://github.com/pfili"
}
```
Keywords: polynomials, specialization

The following code used to fail in the specialization for polynomials over some rings:

```python
            sage: R.<c>=RR[]
            sage: P.<z>=AffineSpace(R,1)
            sage: H=End(P)
            sage: f=H([z^2+c])
            sage: f.specialization({c:1})
```

should return:

```python
            Scheme endomorphism of Affine Space of dimension 1 over Real Field with 53 bits of precision
              Defn: Defined on coordinates by sending (z) to
                    (z^2 + 1.00000000000000)
```


If the base ring of R was QQ, this would work, but if it was RR, it would fail. The problem was in the specialization function, which used a dictionary psi whose keys were supposed to belong to the flattened ring, but instead belonged to the unflattened polynomial ring. Over some rings the built-in coercion functions would fix this while over others they would not. The dictionary psi has been corrected so that the specialization function works as desired. 

Issue created by migration from https://trac.sagemath.org/ticket/23811





---

archive/issue_comments_329908.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-09-09T14:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329908",
    "user": "https://github.com/bhutz"
}
```

New commits:



---

archive/issue_comments_329909.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-09T14:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329909",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329910.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-09T14:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329910",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_329911.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-09-09T14:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329911",
    "user": "https://github.com/bhutz"
}
```

Changing priority from major to minor.



---

archive/issue_comments_329912.json:
```json
{
    "body": "This fixes the issue. I just made a minor whitespace change.\n\nI think this is just a minor priority since Sage is failing with an error message, we just should be able to deal with that case.",
    "created_at": "2017-09-09T14:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329912",
    "user": "https://github.com/bhutz"
}
```

This fixes the issue. I just made a minor whitespace change.

I think this is just a minor priority since Sage is failing with an error message, we just should be able to deal with that case.



---

archive/issue_comments_329913.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-09-09T17:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329913",
    "user": "https://github.com/pfili"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_329914.json:
```json
{
    "body": "Fixed a typo where the doc test added referred to the wrong trac #, otherwise unchanged and should be good to go. \n----\nNew commits:",
    "created_at": "2017-09-09T17:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329914",
    "user": "https://github.com/pfili"
}
```

Fixed a typo where the doc test added referred to the wrong trac #, otherwise unchanged and should be good to go. 
----
New commits:



---

archive/issue_comments_329915.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-09T17:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329915",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_329916.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-24T13:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23574#issuecomment-329916",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_022084.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-09-24T13:03:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23574",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23574#event-22084"
}
```
