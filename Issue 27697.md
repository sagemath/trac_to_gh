# Issue 27697: Added minimum eccentricity selection

Issue created by migration from https://trac.sagemath.org/ticket/27934

Original creator: @Rithesh17

Original creation time: 2019-06-05 10:55:48

CC:  dcoudert




---

Comment by @Rithesh17 created at 2019-06-05 11:01:26

Changing type from PLEASE CHANGE to task.


---

Comment by @Rithesh17 created at 2019-06-05 11:01:26

Changing component from PLEASE CHANGE to graph theory.


---

Comment by @Rithesh17 created at 2019-06-05 11:32:15

Changing status from new to needs_review.


---

Comment by @Rithesh17 created at 2019-06-05 11:32:15

New commits:


---

Comment by dcoudert created at 2019-06-12 15:23:29

Can you motivate the need of these methods and in particular what these methods do. It's unclear to me from the code...


---

Comment by @Rithesh17 created at 2019-06-15 06:25:14

The current method to find the `radius` and the `diameter` of the graph calculates the `eccentricity` of the graph and them takes the `minimum` and `maximum` of all the eccentricities.

The method I have implemented here calculates the *vertex with minimum eccentricity* without computing the complete eccentricity of the graph. This information, along with the partially computed eccentricities of other nodes, acts as a `certificate` to find the radius and the diameter of the graph.

I am yet to implement the algorithm for the diameter.


---

Comment by git created at 2019-06-15 07:10:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dcoudert created at 2019-06-15 08:35:35

> The method I have implemented here calculates the *vertex with minimum eccentricity* without computing the complete eccentricity of the graph. This information, along with the partially computed eccentricities of other nodes, acts as a `certificate` to find the radius and the diameter of the graph.

How ? from the code, my understanding is that you have implemented a heuristic, not an exact algorithm. So please give details, proof, references, etc. Are you aware of recent results on this problem ?


---

Comment by @Rithesh17 created at 2019-06-16 06:33:50

> So please give details, proof, references, etc. 
> 
The algorithm might look like a heuristic one (especially with the while loop). But the paper guarantees the convergence of the algorithm. I have referred to this paper for the algorithm: 

```
Dragan, Feodor & Habib, Michel & Viennot, Laurent. (2018). 
Revisiting Radius, Diameter, and all Eccentricity Computation in Graphs 
through Certificates.
```

https://arxiv.org/abs/1803.04660




> Are you aware of recent results on this problem ?
>
I have gone through a few of the recent papers, and I found this paper having pretty good results.


---

Comment by dcoudert created at 2019-06-16 08:01:52

I don't recognize the algorithms in â€‹https://arxiv.org/abs/1803.04660 in your code. For instance, I don't see in the paper a loop like `for _ in range(5):`.


general remarks:
- why using numpy ?
- your code is not documented
- you must add doctests


---

Comment by @Rithesh17 created at 2019-06-16 11:53:48

> I don't see in the paper a loop like `for _ in range(5)`:
>
Oh sorry. I had done that for debugging purpose. It should have been a `repeat` loop.



> why using numpy ?
>
I felt like I could gain a little more speed when using `numpy` methods (like element-wise minimum values between two arrays).



> you must add doctests
>
I thought of doing this after implementing all the algorithms. I will be changing the functions (arguments, return values, etc.) depending on the callee methods, so I thought it'd be better to document it after implementing all the related algorithms.

And can I get a few examples of large graphs so that I can check the performance of my algorithm?


---

Comment by dcoudert created at 2019-06-17 08:43:07

Code and algorithms: If you don't put enough details in the code, I cannot review it. It must be clear enough.

Performances: You can try with a 100x100 2D-grid, a large random Barabasi Albert graph, etc. In particular, compare the running time with existing implementation for undirected graphs.


---

Comment by @Rithesh17 created at 2019-06-18 06:42:22

>Code and algorithms: If you don't put enough details in the code, I cannot review it. It must be clear enough.
>
Ok. Will add the comments soon.



>Performances: You can try with a 100x100 2D-grid, a large random Barabasi Albert graph, etc. In particular, compare the running time with existing implementation for undirected graphs.
>
Will try it out


---

Comment by git created at 2019-06-23 14:17:55

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by @vipul79321 created at 2020-06-08 20:20:47

Changing type from task to enhancement.


---

Comment by @vipul79321 created at 2020-06-08 20:20:47

Changing keywords from "" to "gsoc20".


---

Comment by git created at 2020-06-08 20:22:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-08 20:26:10

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-06-08 20:53:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-06-08 21:03:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-08 21:08:32

Before exposing in method eccentricity :- [https://git.sagemath.org/sage.git/commit/?id=3763266aa13d3e637292e2091c360a670bf441bf](https://git.sagemath.org/sage.git/commit/?id=3763266aa13d3e637292e2091c360a670bf441bf) or comment 20.

```
sage: from sage.graphs.distances_all_pairs import all_eccentricity_DHV
sage: G = graphs.FoldedCubeGraph(13)
sage: G.eccentricity() == all_eccentricity_DHV(G)
True
```



----


comment 21 or [https://git.sagemath.org/sage.git/commit/?id=6529e6f8281aba63143d17e211b93abe7aa1713e](https://git.sagemath.org/sage.git/commit/?id=6529e6f8281aba63143d17e211b93abe7aa1713e)//

After exposing in eccentricity method, following unexpected behavior happens.I tried printing the values, there are lot of garbage values, some eccentricity are even 0.
this happens for many other graphs too.


```
sage: from sage.graphs.distances_all_pairs import eccentricity
sage: G = graphs.FoldedCubeGraph(13)
sage: G.eccentricity() == eccentricity(G, algorithm='DHV')
False
```



---

Comment by @vipul79321 created at 2020-06-08 21:08:52

Changing status from needs_work to needs_review.


---

Comment by @vipul79321 created at 2020-06-09 04:35:44

Replying to [comment:22 gh-vipul79321]:
> Before exposing in method eccentricity :- [https://git.sagemath.org/sage.git/commit/?id=3763266aa13d3e637292e2091c360a670bf441bf](https://git.sagemath.org/sage.git/commit/?id=3763266aa13d3e637292e2091c360a670bf441bf) or comment 20.
> {{{
> sage: from sage.graphs.distances_all_pairs import all_eccentricity_DHV
> sage: G = graphs.FoldedCubeGraph(13)
> sage: G.eccentricity() == all_eccentricity_DHV(G)
> True
> }}}
> 
> 
> ----
> 
> 
> comment 21 or [https://git.sagemath.org/sage.git/commit/?id=6529e6f8281aba63143d17e211b93abe7aa1713e](https://git.sagemath.org/sage.git/commit/?id=6529e6f8281aba63143d17e211b93abe7aa1713e)//
> 
> After exposing in eccentricity method, following unexpected behavior happens.I tried printing the values, there are lot of garbage values, some eccentricity are even 0.
> this happens for many other graphs too.
> 
> {{{
> sage: from sage.graphs.distances_all_pairs import eccentricity
> sage: G = graphs.FoldedCubeGraph(13)
> sage: G.eccentricity() == eccentricity(G, algorithm='DHV')
> False
> }}}
I figured out my mistake. I was using `MemoryAllocator` for memory allocation and it was freeing all the memory on returing from function.
I am fixing that


---

Comment by git created at 2020-06-09 05:25:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-09 05:26:16

Replying to [comment:25 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[e852305](https://git.sagemath.org/sage.git/commit/?id=e8523050bac734eec13d82bffa0050c0e0e53550)||`Fixed and finalized`||

Ready for review.


---

Comment by git created at 2020-06-09 07:54:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-06-09 07:58:07

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2020-06-09 07:58:07

I did some improvements in the code, but it's not finalized yet. For instance, make sure that corner cases are handled, like graph of order 1. Also that all defined variables are used.

FYI: Barabasi-Albert are usually used with low degree (2 or 3), never with 7.


---

Comment by dcoudert created at 2020-06-09 07:58:43

Changing keywords from "gsoc20" to "gsoc2020".


---

Comment by git created at 2020-06-10 13:21:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-10 13:30:02

Replying to [comment:28 dcoudert]:
> I did some improvements in the code, but it's not finalized yet.

Yeah, I saw that. Code sure now looks clean and much readable.

> For instance, make sure that corner cases are handled, like graph of order 1. Also that all defined variables are used.
Checked it. No problem.

> FYI: Barabasi-Albert are usually used with low degree (2 or 3), never with 7.  
Noted

One thing, I would like to mention. I haven't added reference [Dragan2018]_ in rst file. As we have added reference in #29715.
Do we need to add it here too?

Rest all looks good to me


---

Comment by @vipul79321 created at 2020-06-10 16:27:44

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2020-06-10 16:46:50

as for radius and diameter, you can add the weighted method with boost.

Concerning the reference, I suggest to wait a little bit. The other tickets will be merged soon. Then the reference will be added.


---

Comment by @vipul79321 created at 2020-06-10 16:51:23

Replying to [comment:33 dcoudert]:
> as for radius and diameter, you can add the weighted method with boost.
Yeah sure. I will start working on weighted version of this method. 
> Concerning the reference, I suggest to wait a little bit. The other tickets will be merged soon. Then the reference will be added.
Ok


---

Comment by git created at 2020-06-12 19:32:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-12 19:38:18

TODO:

- Expose the method in `graph.py` file. For this, we have to wait for merging of #29715.


---

Comment by git created at 2020-06-13 09:47:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-06-13 09:48:27

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2020-06-13 09:48:27

I pushed some improvements.


---

Comment by git created at 2020-06-13 20:12:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-13 20:16:28

Replying to [comment:37 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[a4c6ff8](https://git.sagemath.org/sage.git/commit/?id=a4c6ff89dc8cc984cc0eead75616424f51117f59)||`trac #27934: minor improvements`||

One thing, that we missed was we were only popping from active while updating lower bounds. So, I have fixed that.

Taking the above idea, I had done similar modification in unweighted version. Benefit of this modification is overall consistency and one less loop. Although there is slight reduction in simplicity of code, but in my opinion its not that much.\\

What are your opinion on this, shall we keep it or revert to previous version?


---

Comment by dcoudert created at 2020-06-14 06:19:08

I agree with these changes, although I don't know if it is faster this way or not.


---

Comment by @vipul79321 created at 2020-06-17 12:50:08

Replying to [comment:41 dcoudert]:
> I agree with these changes, although I don't know if it is faster this way or not.
It is supposed to be fast since there is a less loop and also amount of swapping and popping will still be same.


---

Comment by git created at 2020-06-27 17:22:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-06-27 17:24:28

I fixed the merge conflict. It remains to expose the methods in `graph.py`.


---

Comment by git created at 2020-06-29 07:04:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @vipul79321 created at 2020-06-29 07:05:37

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2020-06-29 07:46:18

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2020-06-29 07:46:18

LGTM.


---

Comment by git created at 2020-06-30 06:09:07

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-06-30 06:09:07

Changing status from positive_review to needs_review.


---

Comment by @vipul79321 created at 2020-06-30 06:10:58

Replying to [comment:48 git]:
> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
> ||[f9c6e53](https://git.sagemath.org/sage.git/commit/?id=f9c6e5354f0153c0a27db95d171ea7db1afee36e)||`minor edit in documentation`||

Earlier I misinterpreted something. But now I have changed and fixed it.

Rest looks fine to me.


---

Comment by @vipul79321 created at 2020-06-30 06:10:58

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2020-06-30 06:22:40

OK.


---

Comment by git created at 2020-07-08 07:05:59

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-07-08 07:05:59

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by @vipul79321 created at 2020-07-08 07:10:04

Replying to [comment:51 git]:
> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
> ||[c4719ec](https://git.sagemath.org/sage.git/commit/?id=c4719ec8f0afacff688e522b9d9b196c9e9d38bd)||`Merge branch 'public/graphs/29734_eccentricity_dhv' of git://trac.sagemath.org/sage into ecc`||
> ||[dd2f346](https://git.sagemath.org/sage.git/commit/?id=dd2f34614f545bcd6701a8cee4bcda7956937325)||`minor change in documentation`||

Done minor change in documentation


---

Comment by dcoudert created at 2020-07-08 07:18:19

OK


---

Comment by dcoudert created at 2020-07-08 07:18:19

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-07-08 23:18:12

Resolution: fixed


---

Comment by mkoeppe created at 2020-07-08 23:18:12

These have been merged into 9.2.beta4
