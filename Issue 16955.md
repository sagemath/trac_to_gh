# Issue 16955: Update orthogonal polynomials to add errors for negative index

archive/issues_016955.json:
```json
{
    "body": "Keywords: beginner, special, functions\n\nThese accept bad input without warning - the docs are right, apparently, but [don't protect against user error very well](http://ask.sagemath.org/question/24563/a-bug-in-laguerre-l/).\n  As in that report, \n> laguerre(-1,1) returns 0 in Sage but returns exp(1) in Maple and Mathematica.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17192\n\n",
    "closed_at": "2014-11-25T11:25:55Z",
    "created_at": "2014-10-22T00:22:44Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Update orthogonal polynomials to add errors for negative index",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16955",
    "user": "https://github.com/kcrisman"
}
```
Keywords: beginner, special, functions

These accept bad input without warning - the docs are right, apparently, but [don't protect against user error very well](http://ask.sagemath.org/question/24563/a-bug-in-laguerre-l/).
  As in that report, 
> laguerre(-1,1) returns 0 in Sage but returns exp(1) in Maple and Mathematica.

Issue created by migration from https://trac.sagemath.org/ticket/17192





---

archive/issue_comments_224426.json:
```json
{
    "body": "Probably other things in sage/functions/orthogonal_polys.py could use similar upgrades.",
    "created_at": "2014-10-22T00:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224426",
    "user": "https://github.com/kcrisman"
}
```

Probably other things in sage/functions/orthogonal_polys.py could use similar upgrades.



---

archive/issue_comments_224427.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-28T18:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224427",
    "user": "https://trac.sagemath.org/admin/accounts/users/captaintrunky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_224428.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-28T18:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224428",
    "user": "https://trac.sagemath.org/admin/accounts/users/captaintrunky"
}
```

New commits:



---

archive/issue_comments_224429.json:
```json
{
    "body": "You disallow Legendre `P(n,m,x)` with negative `n`, but this is too restrictive, see\n\n```\nsage: pari.pollegendre(-3,x)\n3/2*x^2 - 1/2\n```\nthe implementation in ticket #17151, and http://dlmf.nist.gov/14.9#E3",
    "created_at": "2014-11-07T16:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224429",
    "user": "https://github.com/rwst"
}
```

You disallow Legendre `P(n,m,x)` with negative `n`, but this is too restrictive, see

```
sage: pari.pollegendre(-3,x)
3/2*x^2 - 1/2
```
the implementation in ticket #17151, and http://dlmf.nist.gov/14.9#E3



---

archive/issue_comments_224430.json:
```json
{
    "body": "Replying to [comment:4 rws]:\n> the implementation in ticket #17151\n\noops, make that #16813.",
    "created_at": "2014-11-07T16:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224430",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:4 rws]:
> the implementation in ticket #17151

oops, make that #16813.



---

archive/issue_comments_224431.json:
```json
{
    "body": "Replying to [comment:4 rws]:\n> You disallow Legendre `P(n,m,x)` with negative `n`, but this is too restrictive, see\n> \n> ```\n> sage: pari.pollegendre(-3,x)\n> 3/2*x^2 - 1/2\n> ```\n> the implementation in ticket #17151, and http://dlmf.nist.gov/14.9#E3\n\n\nDoes it mean that docs are inconsistent for these functions: legendre_P, legendre_Q, gen_legendre_P, gen_Legendre_Q? All of them have the  constraint:\n\n```\nReturns the generalized (or associated) Legendre function of the second kind for integers `n>-1`, `m>-1`.\n```\nor something similar.",
    "created_at": "2014-11-08T14:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224431",
    "user": "https://trac.sagemath.org/admin/accounts/users/captaintrunky"
}
```

Replying to [comment:4 rws]:
> You disallow Legendre `P(n,m,x)` with negative `n`, but this is too restrictive, see
> 
> ```
> sage: pari.pollegendre(-3,x)
> 3/2*x^2 - 1/2
> ```
> the implementation in ticket #17151, and http://dlmf.nist.gov/14.9#E3


Does it mean that docs are inconsistent for these functions: legendre_P, legendre_Q, gen_legendre_P, gen_Legendre_Q? All of them have the  constraint:

```
Returns the generalized (or associated) Legendre function of the second kind for integers `n>-1`, `m>-1`.
```
or something similar.



---

archive/issue_comments_224432.json:
```json
{
    "body": "That too. It also means that implementing the more general solution makes the Legendre part of your ticket obsolete. I also want encourage people to review #16813.",
    "created_at": "2014-11-08T15:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224432",
    "user": "https://github.com/rwst"
}
```

That too. It also means that implementing the more general solution makes the Legendre part of your ticket obsolete. I also want encourage people to review #16813.



---

archive/issue_comments_224433.json:
```json
{
    "body": "Replying to [comment:7 rws]:\n> That too. It also means that implementing the more general solution makes the Legendre part of your ticket obsolete. I also want encourage people to review #16813.\n\n\nOk, then I just recover original state for these functions.",
    "created_at": "2014-11-08T15:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224433",
    "user": "https://trac.sagemath.org/admin/accounts/users/captaintrunky"
}
```

Replying to [comment:7 rws]:
> That too. It also means that implementing the more general solution makes the Legendre part of your ticket obsolete. I also want encourage people to review #16813.


Ok, then I just recover original state for these functions.



---

archive/issue_comments_224434.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-08T20:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_224435.json:
```json
{
    "body": "BTW, even Laguerre polynomials can have extensions with negative or noninteger `n`, for example mpmath's numeric implementation: https://mpmath.googlecode.com/svn/trunk/doc/build/functions/orthogonal.html#laguerre-polynomials\nI'm using this function in #17151 and so the restriction will fall there as well. You can experiment with what mpmath returns like this in Sage, as long as #17151 is not included:\n\n```\nsage: from mpmath import laguerre as lag\nsage: lag(1/2,0,1)\nmpf('0.42519582689040547')\nsage: lag(-1,0,1)\nmpf('0.0')\nsage: lag(-1+I,0,1)\nmpc(real='2.224699152616044', imag='-2.1127345594510065')\nsage: lag(1,I,1)\nmpc(real='6.3272150395398353e-23', imag='1.0')\n```",
    "created_at": "2014-11-09T09:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224435",
    "user": "https://github.com/rwst"
}
```

BTW, even Laguerre polynomials can have extensions with negative or noninteger `n`, for example mpmath's numeric implementation: https://mpmath.googlecode.com/svn/trunk/doc/build/functions/orthogonal.html#laguerre-polynomials
I'm using this function in #17151 and so the restriction will fall there as well. You can experiment with what mpmath returns like this in Sage, as long as #17151 is not included:

```
sage: from mpmath import laguerre as lag
sage: lag(1/2,0,1)
mpf('0.42519582689040547')
sage: lag(-1,0,1)
mpf('0.0')
sage: lag(-1+I,0,1)
mpc(real='2.224699152616044', imag='-2.1127345594510065')
sage: lag(1,I,1)
mpc(real='6.3272150395398353e-23', imag='1.0')
```



---

archive/issue_comments_224436.json:
```json
{
    "body": "Replying to [comment:10 rws]:\n> BTW, even Laguerre polynomials can have extensions with negative or noninteger `n`, for example mpmath's numeric implementation: https://mpmath.googlecode.com/svn/trunk/doc/build/functions/orthogonal.html#laguerre-polynomials\n> I'm using this function in #17151 and so the restriction will fall there as well. You can experiment with what mpmath returns like this in Sage, as long as #17151 is not included:\n> \n> ```\n> sage: from mpmath import laguerre as lag\n> sage: lag(1/2,0,1)\n> mpf('0.42519582689040547')\n> sage: lag(-1,0,1)\n> mpf('0.0')\n> sage: lag(-1+I,0,1)\n> mpc(real='2.224699152616044', imag='-2.1127345594510065')\n> sage: lag(1,I,1)\n> mpc(real='6.3272150395398353e-23', imag='1.0')\n> ```\n\nI've played with it a little bit. As far as I understand, there is no way to use negative or non-integer `n` with a current implementation. My question is, is it worth it to support it in this particular code? There is some activity on the general solution already, so probably there is no point in doing such modifications?",
    "created_at": "2014-11-10T19:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224436",
    "user": "https://trac.sagemath.org/admin/accounts/users/captaintrunky"
}
```

Replying to [comment:10 rws]:
> BTW, even Laguerre polynomials can have extensions with negative or noninteger `n`, for example mpmath's numeric implementation: https://mpmath.googlecode.com/svn/trunk/doc/build/functions/orthogonal.html#laguerre-polynomials
> I'm using this function in #17151 and so the restriction will fall there as well. You can experiment with what mpmath returns like this in Sage, as long as #17151 is not included:
> 
> ```
> sage: from mpmath import laguerre as lag
> sage: lag(1/2,0,1)
> mpf('0.42519582689040547')
> sage: lag(-1,0,1)
> mpf('0.0')
> sage: lag(-1+I,0,1)
> mpc(real='2.224699152616044', imag='-2.1127345594510065')
> sage: lag(1,I,1)
> mpc(real='6.3272150395398353e-23', imag='1.0')
> ```

I've played with it a little bit. As far as I understand, there is no way to use negative or non-integer `n` with a current implementation. My question is, is it worth it to support it in this particular code? There is some activity on the general solution already, so probably there is no point in doing such modifications?



---

archive/issue_comments_224437.json:
```json
{
    "body": "What I can say is, our two proposals cause mutual merge conflict, but since no one knows which will be reviewed and included first, there is no good plan. It may take a few weeks until I am free to review your ticket.",
    "created_at": "2014-11-10T19:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224437",
    "user": "https://github.com/rwst"
}
```

What I can say is, our two proposals cause mutual merge conflict, but since no one knows which will be reviewed and included first, there is no good plan. It may take a few weeks until I am free to review your ticket.



---

archive/issue_comments_224438.json:
```json
{
    "body": "Changing keywords from \"beginner\" to \"beginner, special, functions\".",
    "created_at": "2014-11-24T16:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224438",
    "user": "https://github.com/rwst"
}
```

Changing keywords from "beginner" to "beginner, special, functions".



---

archive/issue_comments_224439.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-24T17:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224439",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_224440.json:
```json
{
    "body": "I removed some lines that prevented the doc being built. The code passes `make ptestlong` and is straightforward, so it's positive review.\n\n---\nNew commits:",
    "created_at": "2014-11-24T17:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224440",
    "user": "https://github.com/rwst"
}
```

I removed some lines that prevented the doc being built. The code passes `make ptestlong` and is straightforward, so it's positive review.

---
New commits:



---

archive/issue_events_049818.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-25T11:25:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16955#event-49818"
}
```



---

archive/issue_comments_224441.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-25T11:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16955#issuecomment-224441",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
