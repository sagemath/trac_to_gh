# Issue 15503: Better support for root systems which do not come from a Cartan type

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2014-01-27 07:48:32

Assignee: sage-combinat

CC:  sage-combinat nthiery


```
sage: d = DynkinDiagram()
sage: d.add_edge(1,2,3)
sage: d.add_edge(2,3)
sage: d.add_edge(3,4,3) 
sage: d.cartan_matrix()
[ 2 -1  0  0]
[-3  2 -1  0]
[ 0 -1  2 -1]
[ 0  0 -3  2]
sage: Q = d.root_system().root_lattice()
sage: Q
Root lattice of the Root system of type Dynkin diagram of rank 4
sage: al = Q.simple_roots()
sage: al[1].reflection(al[2]) # Boom
```


This shouldn't be too hard to fix, just check if the Cartan type is `None` (where applicable) and if so, call the corresponding Cartan matrix.


---

Comment by tscrim created at 2014-01-27 08:16:58

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-01-27 08:16:58

I fixed this by giving a method `symmetrizer` to the Dynkin diagrams. This uncovered another small bug in that the index set wasn't being taking from the Dynkin diagram (i.e. its vertices) which is also fixed here.
----
New commits:


---

Comment by chapoton created at 2014-01-27 20:49:09

Looks good to me, but maybe one could add a test for the index_set correct behavior ?


---

Comment by tscrim created at 2014-01-27 22:29:24

It's implicitly there in the symmetrizer test, but I'll add an explicit test.


---

Comment by git created at 2014-01-27 23:58:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-01-28 00:04:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2014-01-28 00:05:55

After a little error with git (I forgot to base the branch off `develop`), I've added the requested doctest.


---

Comment by chapoton created at 2014-01-28 08:54:08

ok, good to go.


---

Comment by chapoton created at 2014-01-28 08:54:08

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2014-01-28 08:54:08

Changing keywords from "" to "root systems".


---

Comment by tscrim created at 2014-01-28 15:26:38

Thanks Frederic.


---

Comment by vbraun created at 2014-02-03 16:07:47

Resolution: fixed
