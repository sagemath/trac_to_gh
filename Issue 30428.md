# Issue 30428: Optimize edge iterator for graphs

archive/issues_030428.json:
```json
{
    "body": "Keywords: edge iterator, graph\n\nThis ticket reorganizes and improves the iterator over edges in the graph backends.\n\nCurrently, the code is duplicated for dense and sparse graphs. Also the iterator works by creating successive lists of neighbors. Mostly, an iterator should not create lists of things.\n\nIn case of multiple edges, it might be desirable to create lists of all arcs from `u` to `v`. Otherwise we might risk segmentation faults, if messing with the graph while iterating through it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30665\n\n",
    "created_at": "2020-09-26T07:55:28Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Optimize edge iterator for graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30428",
    "user": "https://github.com/kliem"
}
```
Keywords: edge iterator, graph

This ticket reorganizes and improves the iterator over edges in the graph backends.

Currently, the code is duplicated for dense and sparse graphs. Also the iterator works by creating successive lists of neighbors. Mostly, an iterator should not create lists of things.

In case of multiple edges, it might be desirable to create lists of all arcs from `u` to `v`. Otherwise we might risk segmentation faults, if messing with the graph while iterating through it.

Issue created by migration from https://trac.sagemath.org/ticket/30665





---

archive/issue_comments_433548.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-09-26T09:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_433549.json:
```json
{
    "body": "in method `next_in_neighbor_unsafe` in `dense_graph.pyx`,  instead of `for i in range(u, self.active_vertices.size)`, you could use `bitset_next(self.active_vertices, u)`.",
    "created_at": "2020-09-26T10:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433549",
    "user": "https://github.com/dcoudert"
}
```

in method `next_in_neighbor_unsafe` in `dense_graph.pyx`,  instead of `for i in range(u, self.active_vertices.size)`, you could use `bitset_next(self.active_vertices, u)`.



---

archive/issue_comments_433550.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-26T13:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433551.json:
```json
{
    "body": "Replying to [comment:3 dcoudert]:\n> in method `next_in_neighbor_unsafe` in `dense_graph.pyx`,  instead of `for i in range(u, self.active_vertices.size)`, you could use `bitset_next(self.active_vertices, u)`.\n\n\nI'm not sure I understand.\n\nThere are a bunch of bitsets (a total of `self.active_vertices.size - u`) and I'm trying to figure out, if one of them contains `v`. I don't see, how to apply `bitset_next` in this situation.\n\ndense graphs shouldn't reimplement bitsets for their edges, but that is a different story.",
    "created_at": "2020-09-26T13:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433551",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:3 dcoudert]:
> in method `next_in_neighbor_unsafe` in `dense_graph.pyx`,  instead of `for i in range(u, self.active_vertices.size)`, you could use `bitset_next(self.active_vertices, u)`.


I'm not sure I understand.

There are a bunch of bitsets (a total of `self.active_vertices.size - u`) and I'm trying to figure out, if one of them contains `v`. I don't see, how to apply `bitset_next` in this situation.

dense graphs shouldn't reimplement bitsets for their edges, but that is a different story.



---

archive/issue_comments_433552.json:
```json
{
    "body": "I'm just saying that we can do something like:\n\n```\ncdef size_t i = u\nwhile i != -1:\n    if self.edges[place + i * self.num_longs] & word:\n        return i\n    i = bitset_next(self.active_vertices, i)\nreturn -1\n```\nI don't know if it is faster or not for dense graphs.",
    "created_at": "2020-09-26T13:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433552",
    "user": "https://github.com/dcoudert"
}
```

I'm just saying that we can do something like:

```
cdef size_t i = u
while i != -1:
    if self.edges[place + i * self.num_longs] & word:
        return i
    i = bitset_next(self.active_vertices, i)
return -1
```
I don't know if it is faster or not for dense graphs.



---

archive/issue_comments_433553.json:
```json
{
    "body": "Ok. Sure. It is cleaner.",
    "created_at": "2020-09-26T13:54:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433553",
    "user": "https://github.com/kliem"
}
```

Ok. Sure. It is cleaner.



---

archive/issue_comments_433554.json:
```json
{
    "body": "Btw, `bitset_next(foo, i)` will give the next element including `i`.\n\nContrary to that `next_in_neighbor_unsafe(v, u, l)` will give the next element not including `u`. The reason for this is that in sparse graphs the arcs are grouped into a couple of trees according to `u & hash_mask`. So it is much easier to obtain the next arc in the same tree. So `next_in_neighbor_unsafe` will sort the `u`s not by total order but different.\n\nI don't want `CGraph` to know how this works, so this way `CGraph` can just trust the specification to figure out, what would be the next neighbor.",
    "created_at": "2020-09-26T14:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433554",
    "user": "https://github.com/kliem"
}
```

Btw, `bitset_next(foo, i)` will give the next element including `i`.

Contrary to that `next_in_neighbor_unsafe(v, u, l)` will give the next element not including `u`. The reason for this is that in sparse graphs the arcs are grouped into a couple of trees according to `u & hash_mask`. So it is much easier to obtain the next arc in the same tree. So `next_in_neighbor_unsafe` will sort the `u`s not by total order but different.

I don't want `CGraph` to know how this works, so this way `CGraph` can just trust the specification to figure out, what would be the next neighbor.



---

archive/issue_comments_433555.json:
```json
{
    "body": "For now I would leave static sparse as it is and just define `iterator_unsorted_edges = iterator_edges`.\n\nIn order to specify `next_in_neighbor_unsafe` for static sparse efficiently, one should add something like `u_index` to the signature. I don't know if there is much need for it.",
    "created_at": "2020-09-26T14:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433555",
    "user": "https://github.com/kliem"
}
```

For now I would leave static sparse as it is and just define `iterator_unsorted_edges = iterator_edges`.

In order to specify `next_in_neighbor_unsafe` for static sparse efficiently, one should add something like `u_index` to the signature. I don't know if there is much need for it.



---

archive/issue_comments_433556.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-26T14:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433557.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-26T15:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433558.json:
```json
{
    "body": "Code uses an edge iterator to relabel or vertices for example.\n\nI documented that this is somewhat safe. This was one of my problem. In between I had segmentation faults because of this, because I was storing pointers to nodes, which were no longer valid.",
    "created_at": "2020-09-26T15:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433558",
    "user": "https://github.com/kliem"
}
```

Code uses an edge iterator to relabel or vertices for example.

I documented that this is somewhat safe. This was one of my problem. In between I had segmentation faults because of this, because I was storing pointers to nodes, which were no longer valid.



---

archive/issue_comments_433559.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-26T15:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433559",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433560.json:
```json
{
    "body": "I pretty much happy with it for now.\n\nI even managed to reduce the overall number of lines in the code while optimizing.\n\nThere are some optimizations that were simply not necessary. The compiler will figure out case distinctions like `label` pretty good itself. If not, it usually doesn't matter for performance. I guess there are some cases, were compilers are pretty bad, but here it works all right and there is no need to duplicate code.",
    "created_at": "2020-09-26T15:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433560",
    "user": "https://github.com/kliem"
}
```

I pretty much happy with it for now.

I even managed to reduce the overall number of lines in the code while optimizing.

There are some optimizations that were simply not necessary. The compiler will figure out case distinctions like `label` pretty good itself. If not, it usually doesn't matter for performance. I guess there are some cases, were compilers are pretty bad, but here it works all right and there is no need to duplicate code.



---

archive/issue_comments_433561.json:
```json
{
    "body": "This is nice.\n\nYou added `unsorted` to `edge_iterator`. You could also add it to `edges` and to  `EdgesView` in `views.pyx`. We can of course let that for another ticket. We will have to check in many methods if we can benefit from this new parameter or not. Reducing the number of places where we sort is an important objective.",
    "created_at": "2020-09-26T15:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433561",
    "user": "https://github.com/dcoudert"
}
```

This is nice.

You added `unsorted` to `edge_iterator`. You could also add it to `edges` and to  `EdgesView` in `views.pyx`. We can of course let that for another ticket. We will have to check in many methods if we can benefit from this new parameter or not. Reducing the number of places where we sort is an important objective.



---

archive/issue_comments_433562.json:
```json
{
    "body": "Once this is in you may want to check whether this also solves\nother \"edge\"-y tickets:\n\n- https://trac.sagemath.org/query?order=id&desc=1&status=!closed&summary=~edge",
    "created_at": "2020-09-26T16:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433562",
    "user": "https://github.com/slel"
}
```

Once this is in you may want to check whether this also solves
other "edge"-y tickets:

- https://trac.sagemath.org/query?order=id&desc=1&status=!closed&summary=~edge



---

archive/issue_comments_433563.json:
```json
{
    "body": "Patchbot reports doctest failures :\n\nThere is a problem in `src/sage/combinat/cluster_algebra_quiver/mutation_class.py`\naround line 520, where one iterates over edges and modify the edges at the same time (direct access to the backend).",
    "created_at": "2020-09-27T06:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433563",
    "user": "https://github.com/fchapoton"
}
```

Patchbot reports doctest failures :

There is a problem in `src/sage/combinat/cluster_algebra_quiver/mutation_class.py`
around line 520, where one iterates over edges and modify the edges at the same time (direct access to the backend).



---

archive/issue_comments_433564.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-27T17:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433565.json:
```json
{
    "body": "Replying to [comment:17 chapoton]:\n> Patchbot reports doctest failures :\n> \n> There is a problem in `src/sage/combinat/cluster_algebra_quiver/mutation_class.py`\n> around line 520, where one iterates over edges and modify the edges at the same time (direct access to the backend). \n\n\nThank you. That was an easy one. I think it is just wrong to modify the vertices and not specify ``vertices``. It is difficult to know, what a user wants at this point.\n\nI fixed it and documented this.\n\nIt is also kind of wrong to modify the edges while iterating, but as long as the vertices are well-defined this works and its the users problem to deal with whether new edges will appear in this run or not (unless you modify the current edge, like relabeling or deleting, then things are well-defined).",
    "created_at": "2020-09-27T17:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433565",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:17 chapoton]:
> Patchbot reports doctest failures :
> 
> There is a problem in `src/sage/combinat/cluster_algebra_quiver/mutation_class.py`
> around line 520, where one iterates over edges and modify the edges at the same time (direct access to the backend). 


Thank you. That was an easy one. I think it is just wrong to modify the vertices and not specify ``vertices``. It is difficult to know, what a user wants at this point.

I fixed it and documented this.

It is also kind of wrong to modify the edges while iterating, but as long as the vertices are well-defined this works and its the users problem to deal with whether new edges will appear in this run or not (unless you modify the current edge, like relabeling or deleting, then things are well-defined).



---

archive/issue_comments_433566.json:
```json
{
    "body": "It is generally unsafe to modify the graph while iterating over the edges.\nSi I'm not sure the proposed modification is sufficient to solve the issue",
    "created_at": "2020-09-28T09:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433566",
    "user": "https://github.com/dcoudert"
}
```

It is generally unsafe to modify the graph while iterating over the edges.
Si I'm not sure the proposed modification is sufficient to solve the issue



---

archive/issue_comments_433567.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-28T10:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433568.json:
```json
{
    "body": "Replying to [comment:20 dcoudert]:\n> It is generally unsafe to modify the graph while iterating over the edges.\n> Si I'm not sure the proposed modification is sufficient to solve the issue\n\n\nI agree that iterating over something while modifying it, is not a good idea usually. It is nice, if you can relabel edges or delete some of them, without getting a complete list.\n\nI added a quick check, that `v_int` is still and active vertex. This indeed was a big issue (potentially segmentation fault), but also the only issue I can think of (which doesn't mean that it is the only one). Here are my thoughts about it:\n\n`next_neighbor_unsafe` will just pick the next neighbor as long as `v_int` is an active vertex. If there are multiple arcs, they will be cached in a list, before yielding anything. This way things should be safe.\n\nHowever, if you delete an edge and then add one, it might happen that the meaning of `v_int` changes. I think, this is the users problem. You shouldn't ask for all edges out of a vertex and then along the way delete it and assume that things are fine.\n\nIf you have multiple arcs and delete them after obtaining the first arc was yield by the iterator, this is the users problem. The other arcs will still be output, but things should be safe as long as you use safe methods.\n\nIf you add/delete/modify edges, things are fine otherwise. However, it might happen that a new edge will be yield by the iterator or not (according to internal order). If you use the edge iterator to relabel edges things are fine, as long as you do not have multiple edges. (Once you have seen an edge `(1,2)`, you know that it will not be output according to internal order again.)",
    "created_at": "2020-09-28T10:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433568",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:20 dcoudert]:
> It is generally unsafe to modify the graph while iterating over the edges.
> Si I'm not sure the proposed modification is sufficient to solve the issue


I agree that iterating over something while modifying it, is not a good idea usually. It is nice, if you can relabel edges or delete some of them, without getting a complete list.

I added a quick check, that `v_int` is still and active vertex. This indeed was a big issue (potentially segmentation fault), but also the only issue I can think of (which doesn't mean that it is the only one). Here are my thoughts about it:

`next_neighbor_unsafe` will just pick the next neighbor as long as `v_int` is an active vertex. If there are multiple arcs, they will be cached in a list, before yielding anything. This way things should be safe.

However, if you delete an edge and then add one, it might happen that the meaning of `v_int` changes. I think, this is the users problem. You shouldn't ask for all edges out of a vertex and then along the way delete it and assume that things are fine.

If you have multiple arcs and delete them after obtaining the first arc was yield by the iterator, this is the users problem. The other arcs will still be output, but things should be safe as long as you use safe methods.

If you add/delete/modify edges, things are fine otherwise. However, it might happen that a new edge will be yield by the iterator or not (according to internal order). If you use the edge iterator to relabel edges things are fine, as long as you do not have multiple edges. (Once you have seen an edge `(1,2)`, you know that it will not be output according to internal order again.)



---

archive/issue_comments_433569.json:
```json
{
    "body": "OK, we can let it like that for the moment. This patch has only exhibit an issue in that code that is now fixed.\nIf something goes wrong, a specific bug will be raised by a user.",
    "created_at": "2020-09-28T14:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433569",
    "user": "https://github.com/dcoudert"
}
```

OK, we can let it like that for the moment. This patch has only exhibit an issue in that code that is now fixed.
If something goes wrong, a specific bug will be raised by a user.



---

archive/issue_comments_433570.json:
```json
{
    "body": "I know. It's not like this was very stable before. In my opinion the only difference is, that before the edge iterator cached all arcs from `v`, yield them all and then went on to the next vertex.\n\nNow, we only cache all arcs from `v` to `u`. If there is only one arc, there is nothing to cache.\n\nEither way, you can make the iterator behave strangely, by modifying the graph along the way. It shouldn't crash hard, this I think is important. Also the strange behavior should be somewhat foreseeable: If you add an arc `(1,2)` along the way, it would be strange if `(3,4)` appears twice now. It would be okay, if `(1,2)` pops up again at some point.\nIf you delete an edge, I think it would even be fine, if it still appears in the iterator (even so it doesn't), but all the other edges should be yield correctly regardless.",
    "created_at": "2020-09-28T14:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433570",
    "user": "https://github.com/kliem"
}
```

I know. It's not like this was very stable before. In my opinion the only difference is, that before the edge iterator cached all arcs from `v`, yield them all and then went on to the next vertex.

Now, we only cache all arcs from `v` to `u`. If there is only one arc, there is nothing to cache.

Either way, you can make the iterator behave strangely, by modifying the graph along the way. It shouldn't crash hard, this I think is important. Also the strange behavior should be somewhat foreseeable: If you add an arc `(1,2)` along the way, it would be strange if `(3,4)` appears twice now. It would be okay, if `(1,2)` pops up again at some point.
If you delete an edge, I think it would even be fine, if it still appears in the iterator (even so it doesn't), but all the other edges should be yield correctly regardless.



---

archive/issue_comments_433571.json:
```json
{
    "body": "Can you add the new `unsorted` parameter to `edges` and `EdgesView` ?",
    "created_at": "2020-09-28T14:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433571",
    "user": "https://github.com/dcoudert"
}
```

Can you add the new `unsorted` parameter to `edges` and `EdgesView` ?



---

archive/issue_comments_433572.json:
```json
{
    "body": "Sure. What about naming it `sorted` instead of unsorted (not in the backend), but for `edges`, `EdgesView`, `edge_iterator`?",
    "created_at": "2020-09-28T14:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433572",
    "user": "https://github.com/kliem"
}
```

Sure. What about naming it `sorted` instead of unsorted (not in the backend), but for `edges`, `EdgesView`, `edge_iterator`?



---

archive/issue_comments_433573.json:
```json
{
    "body": "Well, `edges` and `EgesView` already have parameter `sort` to sort or not the edges. The new parameter must be sufficiently different. I'm not sure of the best choice...",
    "created_at": "2020-09-28T15:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433573",
    "user": "https://github.com/dcoudert"
}
```

Well, `edges` and `EgesView` already have parameter `sort` to sort or not the edges. The new parameter must be sufficiently different. I'm not sure of the best choice...



---

archive/issue_comments_433574.json:
```json
{
    "body": "How about `sort_ends`?",
    "created_at": "2020-09-28T15:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433574",
    "user": "https://github.com/kliem"
}
```

How about `sort_ends`?



---

archive/issue_comments_433575.json:
```json
{
    "body": "Both `sort_ends` and `sort_vertices` are good to me.",
    "created_at": "2020-09-28T15:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433575",
    "user": "https://github.com/dcoudert"
}
```

Both `sort_ends` and `sort_vertices` are good to me.



---

archive/issue_comments_433576.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-28T17:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433577.json:
```json
{
    "body": "LGTM.\n\nThanks a lot.",
    "created_at": "2020-10-02T15:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433577",
    "user": "https://github.com/dcoudert"
}
```

LGTM.

Thanks a lot.



---

archive/issue_comments_433578.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-02T15:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433578",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433579.json:
```json
{
    "body": "Thank you for reviewing.",
    "created_at": "2020-10-02T18:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433579",
    "user": "https://github.com/kliem"
}
```

Thank you for reviewing.



---

archive/issue_comments_433580.json:
```json
{
    "body": "There is a slowdown in the case that we do not access all vertices:\n\nBefore:\n\n```\nsage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              \nsage: V = list(G)                                                                                                                                                                   \nsage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        \n454 \u00b5s \u00b1 266 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n```\nAfter:\n\n```\nsage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              \nsage: V = list(G)                                                                                                                                                                   \nsage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        \n2.72 ms \u00b1 1.4 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n```",
    "created_at": "2020-10-12T06:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433580",
    "user": "https://github.com/kliem"
}
```

There is a slowdown in the case that we do not access all vertices:

Before:

```
sage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              
sage: V = list(G)                                                                                                                                                                   
sage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        
454 µs ± 266 ns per loop (mean ± std. dev. of 7 runs, 1000 loops each)
```
After:

```
sage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              
sage: V = list(G)                                                                                                                                                                   
sage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        
2.72 ms ± 1.4 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
```



---

archive/issue_comments_433581.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-12T06:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433581",
    "user": "https://github.com/kliem"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_433582.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-10-12T07:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_433583.json:
```json
{
    "body": "One simple commit:\n\nBefore this ticket:\n\n```\nsage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              \nsage: V = list(G)                                                                                                                                                                   \nsage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        \n449 \u00b5s \u00b1 588 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\nsage: %timeit list(G.edge_iterator(V[:5000]))                                                                                                                                       \n4.97 ms \u00b1 4.5 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\nsage: G = graphs.CompleteGraph(1000)                                                                                                                                                \nsage: V = list(G)                                                                                                                                                                   \nsage: %timeit list(G.edge_iterator(V[:100]))                                                                                                                                        \n20.1 ms \u00b1 24.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: %timeit list(G.edge_iterator(V[:800]))                                                                                                                                        \n130 ms \u00b1 1.45 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n```\n\nWith this ticket:\n\n```\nsage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              \nsage: V = list(G)                                                                                                                                                                   \nsage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        \n377 \u00b5s \u00b1 2.14 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\nsage: %timeit list(G.edge_iterator(V[:500], sort_vertices=False))                                                                                                                   \n338 \u00b5s \u00b1 2.08 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\nsage: %timeit list(G.edge_iterator(V[:5000]))                                                                                                                                       \n4.3 ms \u00b1 4.44 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\nsage: %timeit list(G.edge_iterator(V[:5000], sort_vertices=False))                                                                                                                  \n3.85 ms \u00b1 2.35 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\nsage: G = graphs.CompleteGraph(1000)                                                                                                                                                \nsage: V = list(G)                                                                                                                                                                                                                                                                                                          \nsage: %timeit list(G.edge_iterator(V[:100], sort_vertices=False))                                                                                                                   \n14.8 ms \u00b1 103 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\nsage: %timeit list(G.edge_iterator(V[:800]))                                                                                                                                        \n102 ms \u00b1 67 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: %timeit list(G.edge_iterator(V[:800], sort_vertices=False))                                                                                                                   \n92.3 ms \u00b1 1.61 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: %timeit list(G.edge_iterator())  # note that this is still slower, so we gain something by requesting only some vertices                                                                                                                                     \n110 ms \u00b1 177 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n```",
    "created_at": "2020-10-12T07:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433583",
    "user": "https://github.com/kliem"
}
```

One simple commit:

Before this ticket:

```
sage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              
sage: V = list(G)                                                                                                                                                                   
sage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        
449 µs ± 588 ns per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit list(G.edge_iterator(V[:5000]))                                                                                                                                       
4.97 ms ± 4.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

sage: G = graphs.CompleteGraph(1000)                                                                                                                                                
sage: V = list(G)                                                                                                                                                                   
sage: %timeit list(G.edge_iterator(V[:100]))                                                                                                                                        
20.1 ms ± 24.2 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: %timeit list(G.edge_iterator(V[:800]))                                                                                                                                        
130 ms ± 1.45 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
```

With this ticket:

```
sage: G = graphs.Grid2dGraph(100, 100)                                                                                                                                              
sage: V = list(G)                                                                                                                                                                   
sage: %timeit list(G.edge_iterator(V[:500]))                                                                                                                                        
377 µs ± 2.14 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit list(G.edge_iterator(V[:500], sort_vertices=False))                                                                                                                   
338 µs ± 2.08 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit list(G.edge_iterator(V[:5000]))                                                                                                                                       
4.3 ms ± 4.44 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: %timeit list(G.edge_iterator(V[:5000], sort_vertices=False))                                                                                                                  
3.85 ms ± 2.35 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

sage: G = graphs.CompleteGraph(1000)                                                                                                                                                
sage: V = list(G)                                                                                                                                                                                                                                                                                                          
sage: %timeit list(G.edge_iterator(V[:100], sort_vertices=False))                                                                                                                   
14.8 ms ± 103 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: %timeit list(G.edge_iterator(V[:800]))                                                                                                                                        
102 ms ± 67 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: %timeit list(G.edge_iterator(V[:800], sort_vertices=False))                                                                                                                   
92.3 ms ± 1.61 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: %timeit list(G.edge_iterator())  # note that this is still slower, so we gain something by requesting only some vertices                                                                                                                                     
110 ms ± 177 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
```



---

archive/issue_comments_433584.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-10-12T07:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433584",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_433585.json:
```json
{
    "body": "I have numerous failing doctests like:\n\n```\n**********************************************************************\nFile \"src/sage/graphs/independent_sets.pyx\", line 164, in sage.graphs.independent_sets.IndependentSets.__init__\nFailed example:\n    for i in range(5):\n        check_with_subgraph_search(graphs.RandomGNP(11, .3))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.independent_sets.IndependentSets.__init__[8]>\", line 2, in <module>\n        check_with_subgraph_search(graphs.RandomGNP(Integer(11), RealNumber('.3')))\n      File \"<doctest sage.graphs.independent_sets.IndependentSets.__init__[7]>\", line 3, in check_with_subgraph_search\n        if not all(G.subgraph(l).is_independent_set() for l in IS):\n      File \"<doctest sage.graphs.independent_sets.IndependentSets.__init__[7]>\", line 3, in <genexpr>\n        if not all(G.subgraph(l).is_independent_set() for l in IS):\n      File \"/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 12589, in subgraph\n        return self._subgraph_by_adding(vertices=vertices, edges=edges,\n      File \"/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 12724, in _subgraph_by_adding\n        edges_to_keep = [e for e in self.edges(vertices=vertices, sort=False)\n      File \"/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 12724, in <listcomp>\n        edges_to_keep = [e for e in self.edges(vertices=vertices, sort=False)\n      File \"sage/graphs/views.pyx\", line 438, in __iter__ (build/cythonized/sage/graphs/views.c:3991)\n        yield from self._iter_unsorted(vertices)\n      File \"sage/graphs/views.pyx\", line 410, in _iter_unsorted (build/cythonized/sage/graphs/views.c:3607)\n        yield from self._graph._backend.iterator_edges(vertices, self._labels)\n      File \"sage/graphs/base/c_graph.pyx\", line 3683, in _iterator_edges (build/cythonized/sage/graphs/base/c_graph.cpp:25263)\n        b_vertices = FrozenBitset(foo for foo in b_vertices_2 if foo >= 0)\n      File \"sage/data_structures/bitset.pyx\", line 398, in sage.data_structures.bitset.FrozenBitset.__init__ (build/cythonized/sage/data_structures/bitset.c:2753)\n        raise ValueError(\"Bitsets must not be empty\")\n    ValueError: Bitsets must not be empty\n**********************************************************************\nFile \"src/sage/graphs/views.pyx\", line 209, in sage.graphs.views.EdgesView\nFailed example:\n    E = EdgesView(G, vertices=[0, 3], labels=False, sort=True); E\nExpected:\n    []\nGot:\n    <repr(<sage.graphs.views.EdgesView at 0x15bfdef40>) failed: ValueError: Bitsets must not be empty>\n```",
    "created_at": "2020-10-12T09:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433585",
    "user": "https://github.com/dcoudert"
}
```

I have numerous failing doctests like:

```
**********************************************************************
File "src/sage/graphs/independent_sets.pyx", line 164, in sage.graphs.independent_sets.IndependentSets.__init__
Failed example:
    for i in range(5):
        check_with_subgraph_search(graphs.RandomGNP(11, .3))
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.independent_sets.IndependentSets.__init__[8]>", line 2, in <module>
        check_with_subgraph_search(graphs.RandomGNP(Integer(11), RealNumber('.3')))
      File "<doctest sage.graphs.independent_sets.IndependentSets.__init__[7]>", line 3, in check_with_subgraph_search
        if not all(G.subgraph(l).is_independent_set() for l in IS):
      File "<doctest sage.graphs.independent_sets.IndependentSets.__init__[7]>", line 3, in <genexpr>
        if not all(G.subgraph(l).is_independent_set() for l in IS):
      File "/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 12589, in subgraph
        return self._subgraph_by_adding(vertices=vertices, edges=edges,
      File "/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 12724, in _subgraph_by_adding
        edges_to_keep = [e for e in self.edges(vertices=vertices, sort=False)
      File "/Users/dcoudert/sage/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 12724, in <listcomp>
        edges_to_keep = [e for e in self.edges(vertices=vertices, sort=False)
      File "sage/graphs/views.pyx", line 438, in __iter__ (build/cythonized/sage/graphs/views.c:3991)
        yield from self._iter_unsorted(vertices)
      File "sage/graphs/views.pyx", line 410, in _iter_unsorted (build/cythonized/sage/graphs/views.c:3607)
        yield from self._graph._backend.iterator_edges(vertices, self._labels)
      File "sage/graphs/base/c_graph.pyx", line 3683, in _iterator_edges (build/cythonized/sage/graphs/base/c_graph.cpp:25263)
        b_vertices = FrozenBitset(foo for foo in b_vertices_2 if foo >= 0)
      File "sage/data_structures/bitset.pyx", line 398, in sage.data_structures.bitset.FrozenBitset.__init__ (build/cythonized/sage/data_structures/bitset.c:2753)
        raise ValueError("Bitsets must not be empty")
    ValueError: Bitsets must not be empty
**********************************************************************
File "src/sage/graphs/views.pyx", line 209, in sage.graphs.views.EdgesView
Failed example:
    E = EdgesView(G, vertices=[0, 3], labels=False, sort=True); E
Expected:
    []
Got:
    <repr(<sage.graphs.views.EdgesView at 0x15bfdef40>) failed: ValueError: Bitsets must not be empty>
```



---

archive/issue_comments_433586.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-12T09:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433587.json:
```json
{
    "body": "Right.\n\n---\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[07b7a8e](https://git.sagemath.org/sage.git/commit?id=07b7a8ea5d44447cd8b66d00d7a4485b2dd4b8ec)|`bitset must not be empty`|\n---\nNew commits:",
    "created_at": "2020-10-12T09:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433587",
    "user": "https://github.com/kliem"
}
```

Right.

---
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[07b7a8e](https://git.sagemath.org/sage.git/commit?id=07b7a8ea5d44447cd8b66d00d7a4485b2dd4b8ec)|`bitset must not be empty`|
---
New commits:



---

archive/issue_comments_433588.json:
```json
{
    "body": "It's much better like that.\n\nWe have the case `len(vertices) == 1`. Why not adding the case `not vertices` (empty).",
    "created_at": "2020-10-12T09:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433588",
    "user": "https://github.com/dcoudert"
}
```

It's much better like that.

We have the case `len(vertices) == 1`. Why not adding the case `not vertices` (empty).



---

archive/issue_comments_433589.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-12T09:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433590.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-12T15:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433590",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433591.json:
```json
{
    "body": "A bug I noticed while trying to make #30753 work.",
    "created_at": "2020-10-12T15:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433591",
    "user": "https://github.com/kliem"
}
```

A bug I noticed while trying to make #30753 work.



---

archive/issue_comments_433592.json:
```json
{
    "body": "LGTM and better than previous version. Thank you.",
    "created_at": "2020-10-12T22:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433592",
    "user": "https://github.com/dcoudert"
}
```

LGTM and better than previous version. Thank you.



---

archive/issue_comments_433593.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-12T22:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433593",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433594.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-10-14T19:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_433595.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-10-14T19:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_433596.json:
```json
{
    "body": "Tiny change. Sorry, but it was wrong before.",
    "created_at": "2020-10-14T19:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433596",
    "user": "https://github.com/kliem"
}
```

Tiny change. Sorry, but it was wrong before.



---

archive/issue_comments_433597.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-10-15T09:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433597",
    "user": "https://github.com/dcoudert"
}
```

LGTM.



---

archive/issue_comments_433598.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-15T09:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433598",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_079774.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30428#event-79774"
}
```



---

archive/issue_comments_433599.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-31T18:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30428#issuecomment-433599",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079775.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-31T18:07:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30428#event-79775"
}
```
