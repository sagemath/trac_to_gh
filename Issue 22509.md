# Issue 22509: Update sage.lfunctions.dokchitser.Dokchitser to use only one gp interpreter

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2017-04-03 09:31:26

This updates the `Dokchitser` class to share a single `gp` interpreter instance for all instances of the `Dokchitser` class.  Previously each instance spun up its own `gp` interpreter, and would keep it running until the instance is garbage-collected.

That situation was less than ideal in general, and even worse on platforms where file descriptors are limited (which could be any depending on the user's ulimits).  See #22718

This provides a temporary workaround to something like #15809, which might be a preferable solution.  But this solution was quick to hack together, works now, is needed for Cygwin, and will be easy enough to excise once a better solution is available.  Please read the commit message for more implementation details.

(please set the correct component if not "elliptic curves"--it just seemed the most relevant out of what was available)


---

Comment by embray created at 2017-04-03 09:35:41

A possible enhancement would be to allow an N-process pool, for faster parallel computation.  But I don't know if that's really an important use-case here.


---

Comment by embray created at 2017-04-17 17:30:16

Changing status from new to needs_review.


---

Comment by git created at 2017-04-17 17:30:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-04-18 09:57:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-18 10:14:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2017-04-18 17:30:46

Changing status from needs_review to needs_work.


---

Comment by embray created at 2017-04-18 17:30:46

Still finding new issues with this...


---

Comment by git created at 2017-04-19 09:13:46

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-04-19 09:15:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2017-04-19 09:16:28

Changing status from needs_work to needs_review.


---

Comment by embray created at 2017-04-19 09:16:28

Okay, looks like I have this right now.  I actually did have it working before but broke it with an unnecessary earlier commit that stemmed from misunderstanding how variable scoping works in pari.


---

Comment by jpflori created at 2017-04-25 11:31:34

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-04-27 20:11:52

Resolution: fixed
