# Issue 18624: Three apparently useless polyhedron methods

archive/issues_018624.json:
```json
{
    "body": "CC:  @dimpase @vbraun @videlec @fchapoton\n\nIt seems that the three following functions are not used anywhere\n\n\n```\n(polgraph|\u271a2\u2026)~/sage/geometry$ grep _make_polyh . -R\n./polyhedron/base.py:#    _make_polyhedron_face.\n./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):\n./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,))\n./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)\n(polgraph|\u271a2\u2026)~/sage/geometry$ grep _init_fac . -R  \n./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and\n./polyhedron/backend_cdd.py:    def _init_facet_adjacency_matrix(self, verbose=False):\n./polyhedron/backend_cdd.py:            sage: p._init_facet_adjacency_matrix()\n(polgraph|\u271a2\u2026)~/sage/geometry$ grep _init_vertex . -R\n./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and\n./polyhedron/backend_cdd.py:    def _init_vertex_adjacency_matrix(self, verbose=False):\n./polyhedron/backend_cdd.py:            sage: p._init_vertex_adjacency_matrix()\n```\n\n\nShould they be removed, or used somewhere?\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/18861\n\n",
    "created_at": "2015-07-07T18:27:00Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Three apparently useless polyhedron methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18624",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @dimpase @vbraun @videlec @fchapoton

It seems that the three following functions are not used anywhere


```
(polgraph|✚2…)~/sage/geometry$ grep _make_polyh . -R
./polyhedron/base.py:#    _make_polyhedron_face.
./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):
./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,))
./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)
(polgraph|✚2…)~/sage/geometry$ grep _init_fac . -R  
./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and
./polyhedron/backend_cdd.py:    def _init_facet_adjacency_matrix(self, verbose=False):
./polyhedron/backend_cdd.py:            sage: p._init_facet_adjacency_matrix()
(polgraph|✚2…)~/sage/geometry$ grep _init_vertex . -R
./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and
./polyhedron/backend_cdd.py:    def _init_vertex_adjacency_matrix(self, verbose=False):
./polyhedron/backend_cdd.py:            sage: p._init_vertex_adjacency_matrix()
```


Should they be removed, or used somewhere?

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/18861





---

archive/issue_comments_253319.json:
```json
{
    "body": "`_make_polyhedron_face` is used in `face_lattice`.",
    "created_at": "2016-03-29T05:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253319",
    "user": "https://github.com/mkoeppe"
}
```

`_make_polyhedron_face` is used in `face_lattice`.



---

archive/issue_events_052708.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-26T11:49:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18624#event-52708"
}
```



---

archive/issue_comments_253320.json:
```json
{
    "body": "With sage8.9:\n\n\n```\nsage/src/sage/geometry$ grep _make_polyh . -R\n./polyhedron/base.py:#    _make_polyhedron_face.\n./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):\n./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,)).ambient_V_indices()\n./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)\nsage/src/sage/geometry$ grep _init_fac . -R\nsage/src/sage/geometry$ grep _init_vertex . -R\n```\n\n\nThis has been indirectly taken care of. The first function is used in `face_lattice`.\n\nFor this reason, I would set this as a \"won't fix\".",
    "created_at": "2019-10-26T11:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253320",
    "user": "https://github.com/jplab"
}
```

With sage8.9:


```
sage/src/sage/geometry$ grep _make_polyh . -R
./polyhedron/base.py:#    _make_polyhedron_face.
./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):
./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,)).ambient_V_indices()
./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)
sage/src/sage/geometry$ grep _init_fac . -R
sage/src/sage/geometry$ grep _init_vertex . -R
```


This has been indirectly taken care of. The first function is used in `face_lattice`.

For this reason, I would set this as a "won't fix".



---

archive/issue_comments_253321.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-26T11:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253321",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_253322.json:
```json
{
    "body": "Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?",
    "created_at": "2019-10-26T20:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253322",
    "user": "https://github.com/fchapoton"
}
```

Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?



---

archive/issue_comments_253323.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?\n\nGood idea. I'll do that.",
    "created_at": "2019-10-27T07:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253323",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:4 chapoton]:
> Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?

Good idea. I'll do that.



---

archive/issue_events_052709.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-27T15:29:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18624#event-52709"
}
```



---

archive/issue_events_052710.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-27T15:29:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18624#event-52710"
}
```



---

archive/issue_comments_253324.json:
```json
{
    "body": "It turns out that it can simply be deleted and merged into the already present function.\n\n... when `face_lattice` will be renovated through CombinatorialPolyhedron the face lattice function will change again, but it will make the transition a bit easier. So I would say it is a good first step.\n----\nNew commits:",
    "created_at": "2019-10-27T15:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253324",
    "user": "https://github.com/jplab"
}
```

It turns out that it can simply be deleted and merged into the already present function.

... when `face_lattice` will be renovated through CombinatorialPolyhedron the face lattice function will change again, but it will make the transition a bit easier. So I would say it is a good first step.
----
New commits:



---

archive/issue_comments_253325.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2019-10-27T15:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253325",
    "user": "https://github.com/jplab"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_253326.json:
```json
{
    "body": "* you forgot the first argument `self` in the function call.\n\n* I would put the import outside of the auxiliary function\n\n* One could replace \n`if len(atoms) == 0:`\nby\n`if not atoms`",
    "created_at": "2019-10-27T16:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253326",
    "user": "https://github.com/fchapoton"
}
```

* you forgot the first argument `self` in the function call.

* I would put the import outside of the auxiliary function

* One could replace 
`if len(atoms) == 0:`
by
`if not atoms`



---

archive/issue_comments_253327.json:
```json
{
    "body": "Merde. I thought about it when I cut the function, and after I pasted, I forgot to change it's format.\n\nUpcoming...",
    "created_at": "2019-10-27T16:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253327",
    "user": "https://github.com/jplab"
}
```

Merde. I thought about it when I cut the function, and after I pasted, I forgot to change it's format.

Upcoming...



---

archive/issue_comments_253328.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-10-27T16:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_253329.json:
```json
{
    "body": "I looked at it and I think that the first two items are not correct:\n\nwhat happened is\n\n- the method `_make_polyhedron_face` is removed.\n- the only place where it was used was related to an internally defined function `face_constructor` inside of the `face_lattice` method.\n\nSo, I believe that the import should be inside the internal function, right?\n\nThus, there is no need of the self argument.\n\nI changed the if statement. Let's see what the bot says, just to make sure that the calls are correct. If I looked correctly, it should essentially be the same, but only function call less...",
    "created_at": "2019-10-27T16:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253329",
    "user": "https://github.com/jplab"
}
```

I looked at it and I think that the first two items are not correct:

what happened is

- the method `_make_polyhedron_face` is removed.
- the only place where it was used was related to an internally defined function `face_constructor` inside of the `face_lattice` method.

So, I believe that the import should be inside the internal function, right?

Thus, there is no need of the self argument.

I changed the if statement. Let's see what the bot says, just to make sure that the calls are correct. If I looked correctly, it should essentially be the same, but only function call less...



---

archive/issue_comments_253330.json:
```json
{
    "body": "Still very very broken...",
    "created_at": "2019-10-27T20:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253330",
    "user": "https://github.com/fchapoton"
}
```

Still very very broken...



---

archive/issue_comments_253331.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-28T09:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253331",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253332.json:
```json
{
    "body": "Wow, yes... I missed that `self` argument... Should be better now...",
    "created_at": "2019-10-28T09:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253332",
    "user": "https://github.com/jplab"
}
```

Wow, yes... I missed that `self` argument... Should be better now...



---

archive/issue_comments_253333.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-28T13:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253333",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_253334.json:
```json
{
    "body": "Merci, feu vert.",
    "created_at": "2019-10-28T13:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253334",
    "user": "https://github.com/fchapoton"
}
```

Merci, feu vert.



---

archive/issue_events_052711.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-29T23:42:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18624#event-52711"
}
```



---

archive/issue_comments_253335.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-29T23:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18624#issuecomment-253335",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
