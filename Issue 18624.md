# Issue 18624: Three apparently useless polyhedron methods

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-07-07 18:27:00

CC:  dimpase vbraun vdelecroix chapoton

It seems that the three following functions are not used anywhere


```
(polgraph|✚2…)~/sage/geometry$ grep _make_polyh . -R
./polyhedron/base.py:#    _make_polyhedron_face.
./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):
./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,))
./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)
(polgraph|✚2…)~/sage/geometry$ grep _init_fac . -R  
./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and
./polyhedron/backend_cdd.py:    def _init_facet_adjacency_matrix(self, verbose=False):
./polyhedron/backend_cdd.py:            sage: p._init_facet_adjacency_matrix()
(polgraph|✚2…)~/sage/geometry$ grep _init_vertex . -R
./polyhedron/base.py:#    _init_facet_adjacency_matrix, _init_vertex_adjacency_matrix, and
./polyhedron/backend_cdd.py:    def _init_vertex_adjacency_matrix(self, verbose=False):
./polyhedron/backend_cdd.py:            sage: p._init_vertex_adjacency_matrix()
```


Should they be removed, or used somewhere?

Nathann


---

Comment by mkoeppe created at 2016-03-29 05:48:34

`_make_polyhedron_face` is used in `face_lattice`.


---

Comment by jipilab created at 2019-10-26 11:49:29

With sage8.9:


```
sage/src/sage/geometry$ grep _make_polyh . -R
./polyhedron/base.py:#    _make_polyhedron_face.
./polyhedron/base.py:    def _make_polyhedron_face(self, Vindices, Hindices):
./polyhedron/base.py:            sage: square._make_polyhedron_face((0,2), (1,)).ambient_V_indices()
./polyhedron/base.py:            return self._make_polyhedron_face(Vindices, Hindices)
sage/src/sage/geometry$ grep _init_fac . -R
sage/src/sage/geometry$ grep _init_vertex . -R
```


This has been indirectly taken care of. The first function is used in `face_lattice`.

For this reason, I would set this as a "won't fix".


---

Comment by jipilab created at 2019-10-26 11:49:45

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-10-26 20:05:05

Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?


---

Comment by jipilab created at 2019-10-27 07:37:35

Replying to [comment:4 chapoton]:
> Maybe `_make_polyhedron_face` could just be inserted where it is called, as it is very short and called in just one place ?

Good idea. I'll do that.


---

Comment by jipilab created at 2019-10-27 15:29:48

It turns out that it can simply be deleted and merged into the already present function.

... when `face_lattice` will be renovated through CombinatorialPolyhedron the face lattice function will change again, but it will make the transition a bit easier. So I would say it is a good first step.
----
New commits:


---

Comment by jipilab created at 2019-10-27 15:29:48

Changing type from defect to enhancement.


---

Comment by chapoton created at 2019-10-27 16:28:46

* you forgot the first argument `self` in the function call.

* I would put the import outside of the auxiliary function

* One could replace 
`if len(atoms) == 0:`
by
`if not atoms`


---

Comment by jipilab created at 2019-10-27 16:44:32

Merde. I thought about it when I cut the function, and after I pasted, I forgot to change it's format.

Upcoming...


---

Comment by git created at 2019-10-27 16:50:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jipilab created at 2019-10-27 16:54:02

I looked at it and I think that the first two items are not correct:

what happened is

 - the method `_make_polyhedron_face` is removed.
 - the only place where it was used was related to an internally defined function `face_constructor` inside of the `face_lattice` method.

So, I believe that the import should be inside the internal function, right?

Thus, there is no need of the self argument.

I changed the if statement. Let's see what the bot says, just to make sure that the calls are correct. If I looked correctly, it should essentially be the same, but only function call less...


---

Comment by chapoton created at 2019-10-27 20:14:00

Still very very broken...


---

Comment by git created at 2019-10-28 09:16:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2019-10-28 09:17:23

Wow, yes... I missed that `self` argument... Should be better now...


---

Comment by chapoton created at 2019-10-28 13:41:59

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-10-28 13:41:59

Merci, feu vert.


---

Comment by vbraun created at 2019-10-29 23:42:01

Resolution: fixed
