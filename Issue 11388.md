# Issue 11388: update sympy to 0.7.0

archive/issues_011388.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  asmeurer certik wdj\n\nSympy-0.7.0 has been released on the 28th of June 2011. It is interacting much better with sage than previous release. Term ordering has changed compared to previous release. Only one patch (of which upstream sympy is already aware) is needed to make sympy work nicely with sage.\nSee [https://groups.google.com/forum/#!topic/sympy/XgoLZcIaa3U](https://groups.google.com/forum/#!topic/sympy/XgoLZcIaa3U) for discussion about the release and the fix needed for sage.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11560\n\n",
    "created_at": "2011-07-01T01:13:22Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "update sympy to 0.7.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11388",
    "user": "fbissey"
}
```
Assignee: tbd

CC:  asmeurer certik wdj

Sympy-0.7.0 has been released on the 28th of June 2011. It is interacting much better with sage than previous release. Term ordering has changed compared to previous release. Only one patch (of which upstream sympy is already aware) is needed to make sympy work nicely with sage.
See [https://groups.google.com/forum/#!topic/sympy/XgoLZcIaa3U](https://groups.google.com/forum/#!topic/sympy/XgoLZcIaa3U) for discussion about the release and the fix needed for sage.

Issue created by migration from https://trac.sagemath.org/ticket/11560





---

archive/issue_comments_126425.json:
```json
{
    "body": "patch to sympy",
    "created_at": "2011-07-01T01:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126425",
    "user": "fbissey"
}
```

patch to sympy



---

archive/issue_comments_126426.json:
```json
{
    "body": "Attachment",
    "created_at": "2011-07-01T01:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126426",
    "user": "fbissey"
}
```

Attachment



---

archive/issue_comments_126427.json:
```json
{
    "body": "Attachment\n\nRemove deprecated each_char option for converting sympy expression",
    "created_at": "2011-07-01T02:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126427",
    "user": "fbissey"
}
```

Attachment

Remove deprecated each_char option for converting sympy expression



---

archive/issue_comments_126428.json:
```json
{
    "body": "Attached two patches for sage. A new spkg should follow in the near future.",
    "created_at": "2011-07-01T02:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126428",
    "user": "fbissey"
}
```

Attached two patches for sage. A new spkg should follow in the near future.



---

archive/issue_comments_126429.json:
```json
{
    "body": "Forwarding Ond\u0159ej \u010cert\u00edk since he is the official maintainer for this spkg.",
    "created_at": "2011-07-01T02:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126429",
    "user": "fbissey"
}
```

Forwarding Ondřej Čertík since he is the official maintainer for this spkg.



---

archive/issue_comments_126430.json:
```json
{
    "body": "The spkg itself will need revamping since the mercurial instructions to update it are now obsolete. Do you want to take care of it Ond\u0159ej, or should I just go ahead?",
    "created_at": "2011-07-01T02:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126430",
    "user": "fbissey"
}
```

The spkg itself will need revamping since the mercurial instructions to update it are now obsolete. Do you want to take care of it Ondřej, or should I just go ahead?



---

archive/issue_comments_126431.json:
```json
{
    "body": "Ond\u0159ej will be away for a couple of weeks (he's getting married), so you should do it.\n\nWhat instructions, by the way?",
    "created_at": "2011-07-01T02:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126431",
    "user": "asmeurer"
}
```

Ondřej will be away for a couple of weeks (he's getting married), so you should do it.

What instructions, by the way?



---

archive/issue_comments_126432.json:
```json
{
    "body": "the README has the following text\n\n```\nHow to create a SymPy spkg package:\n\n$ ./get-orig-sources\n\nThen rename the sympy-spkg directory to sympy-0.5.13 (choose the correct\nversion) and execute from the parent directory:\n\n$ sage -pkg sympy-0.5.13\n```\n\nwhich calls\n{{{#! /bin/sh\n#execute this script from the same directory, where spkg-install is.\n#it will remove the src dir (!) and create a new one instead\nver=0.6.4\nwget http://sympy.googlecode.com/files/sympy-$ver.tar.gz\ntar xzf sympy-$ver.tar.gz\nrm -rf src sympy-$ver.tar.gz\nmv sympy-$ver src\n```\n\nwhich I guess would still work once \"ver\" is put to the right value. But there is an old stale file (which the first one I saw) which pulls on hg\n{{{#! /bin/sh\n# execute this script from the same directory, where spkg-install is.\n# it will remove the src dir (!) and create a new one instead from the\n# Mercurial sources of SymPy, located in ~/sympy\nver=0.5.15-hg\ndir=`pwd`\ncd ~/sympy\n./setup.py sdist\ncp dist/sympy-$ver.tar.gz $dir\ncd $dir\ntar xzf sympy-$ver.tar.gz\nrm -rf src sympy-$ver.tar.gz\nmv sympy-$ver src\n```\n\nThis one will have to go.",
    "created_at": "2011-07-01T02:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126432",
    "user": "fbissey"
}
```

the README has the following text

```
How to create a SymPy spkg package:

$ ./get-orig-sources

Then rename the sympy-spkg directory to sympy-0.5.13 (choose the correct
version) and execute from the parent directory:

$ sage -pkg sympy-0.5.13
```

which calls
{{{#! /bin/sh
#execute this script from the same directory, where spkg-install is.
#it will remove the src dir (!) and create a new one instead
ver=0.6.4
wget http://sympy.googlecode.com/files/sympy-$ver.tar.gz
tar xzf sympy-$ver.tar.gz
rm -rf src sympy-$ver.tar.gz
mv sympy-$ver src
```

which I guess would still work once "ver" is put to the right value. But there is an old stale file (which the first one I saw) which pulls on hg
{{{#! /bin/sh
# execute this script from the same directory, where spkg-install is.
# it will remove the src dir (!) and create a new one instead from the
# Mercurial sources of SymPy, located in ~/sympy
ver=0.5.15-hg
dir=`pwd`
cd ~/sympy
./setup.py sdist
cp dist/sympy-$ver.tar.gz $dir
cd $dir
tar xzf sympy-$ver.tar.gz
rm -rf src sympy-$ver.tar.gz
mv sympy-$ver src
```

This one will have to go.



---

archive/issue_comments_126433.json:
```json
{
    "body": "Where did you find that?  I don't see it anywhere in the source.\n\nThe only guide I know of is http://code.google.com/p/sympy/wiki/SymPyspkg, which I already know is out of date.",
    "created_at": "2011-07-01T03:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126433",
    "user": "asmeurer"
}
```

Where did you find that?  I don't see it anywhere in the source.

The only guide I know of is http://code.google.com/p/sympy/wiki/SymPyspkg, which I already know is out of date.



---

archive/issue_comments_126434.json:
```json
{
    "body": "It is not in sympy's source. Sage uses special packages called spkg with sources, patches and build instructions. When you update a spkg you start with the old one.\n\nThe current spkg for sympy in sage is here:\n[http://sage.math.washington.edu/home/release/sage-4.7/sage-4.7/spkg/standard/sympy-0.6.4.p0.spkg](http://sage.math.washington.edu/home/release/sage-4.7/sage-4.7/spkg/standard/sympy-0.6.4.p0.spkg) in spite of the .spkg ending it is just a tar.bz2 file and \"tar xvfj\" will work just fine on it. The source are usually in a src subfolder and the top folder is build/install instructions + documentation. I am almost done with it. I just have to update one of my patches for something I missed:\n\n```\nsage -t -long -force_lib \"devel/sage-main/sage/symbolic/expression_conversions.py\"\n**********************************************************************\nFile \"/home/work/fbissey/sandbox/sage-4.7.1.alpha2/devel/sage-main/sage/symbolic/expression_conversions.py\", line 559:\n    sage: f._sympy_()\nExpected:\n    exp(x**2) - asin(pi + x)/y\nGot:\n    exp(x**2) - asin(x + pi)/y\n```\n\nI didn't notice the re-ordering in asin...",
    "created_at": "2011-07-01T03:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126434",
    "user": "fbissey"
}
```

It is not in sympy's source. Sage uses special packages called spkg with sources, patches and build instructions. When you update a spkg you start with the old one.

The current spkg for sympy in sage is here:
[http://sage.math.washington.edu/home/release/sage-4.7/sage-4.7/spkg/standard/sympy-0.6.4.p0.spkg](http://sage.math.washington.edu/home/release/sage-4.7/sage-4.7/spkg/standard/sympy-0.6.4.p0.spkg) in spite of the .spkg ending it is just a tar.bz2 file and "tar xvfj" will work just fine on it. The source are usually in a src subfolder and the top folder is build/install instructions + documentation. I am almost done with it. I just have to update one of my patches for something I missed:

```
sage -t -long -force_lib "devel/sage-main/sage/symbolic/expression_conversions.py"
**********************************************************************
File "/home/work/fbissey/sandbox/sage-4.7.1.alpha2/devel/sage-main/sage/symbolic/expression_conversions.py", line 559:
    sage: f._sympy_()
Expected:
    exp(x**2) - asin(pi + x)/y
Got:
    exp(x**2) - asin(x + pi)/y
```

I didn't notice the re-ordering in asin...



---

archive/issue_comments_126435.json:
```json
{
    "body": "Ah, thanks. I didn't know about that.  I added a note about it to our release guide.",
    "created_at": "2011-07-01T03:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126435",
    "user": "asmeurer"
}
```

Ah, thanks. I didn't know about that.  I added a note about it to our release guide.



---

archive/issue_comments_126436.json:
```json
{
    "body": "fix doctest for the new ordering",
    "created_at": "2011-07-01T03:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126436",
    "user": "fbissey"
}
```

fix doctest for the new ordering



---

archive/issue_comments_126437.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-01T03:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126437",
    "user": "fbissey"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126438.json:
```json
{
    "body": "Attachment",
    "created_at": "2011-07-01T03:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126438",
    "user": "fbissey"
}
```

Attachment



---

archive/issue_comments_126439.json:
```json
{
    "body": "I posted a sympy spkg to\nhttp://boxen.math.washington.edu/home/wdj/patches/sympy-0.7.1.p0.spkg",
    "created_at": "2011-08-18T13:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126439",
    "user": "wdj"
}
```

I posted a sympy spkg to
http://boxen.math.washington.edu/home/wdj/patches/sympy-0.7.1.p0.spkg



---

archive/issue_comments_126440.json:
```json
{
    "body": "Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. There are are a number of things:\n* .p0 is not necessary in this case.\n* None of the change I had made in 0.7.0 were in yours, that included a bit of cleaning of the scripts included.\n* I made the deleting work for for any python2 install rather than just 2.6, so once we get #9958 in, the spkg doesn't have to be updated.\n* I wanted to align what's done in sympy with what leif has done with sphinx in #11665, only delete the old sympy when the build is successful.\n\nAt install there is a message about two syntax error in the included mpmath. I didn't take action on these as they are also in the logs of mpmath-0.17 and only concern the tests shipped with mpmath and no functionality is affected.\n\nOne step further would be to mirror the work I have done in Gentoo and remove the shipped mpmath to use the version already installed in sage. Of course that means we would have to be careful and then upgrade them in sync.",
    "created_at": "2011-09-15T23:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126440",
    "user": "fbissey"
}
```

Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. There are are a number of things:
* .p0 is not necessary in this case.
* None of the change I had made in 0.7.0 were in yours, that included a bit of cleaning of the scripts included.
* I made the deleting work for for any python2 install rather than just 2.6, so once we get #9958 in, the spkg doesn't have to be updated.
* I wanted to align what's done in sympy with what leif has done with sphinx in #11665, only delete the old sympy when the build is successful.

At install there is a message about two syntax error in the included mpmath. I didn't take action on these as they are also in the logs of mpmath-0.17 and only concern the tests shipped with mpmath and no functionality is affected.

One step further would be to mirror the work I have done in Gentoo and remove the shipped mpmath to use the version already installed in sage. Of course that means we would have to be careful and then upgrade them in sync.



---

archive/issue_comments_126441.json:
```json
{
    "body": "The mpmath errors are actually for Python 3 compatibility, not tests.  Those files have syntax that is invalid in Python 2, but will never be run there.  I think you can just delete them if you don't care about Python 3 and don't like the errors.  I think Fredrik is going to fix these for the next version of mpmath (see http://code.google.com/p/mpmath/issues/detail?id=204 and http://code.google.com/p/mpmath/issues/detail?id=209).",
    "created_at": "2011-09-16T17:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126441",
    "user": "asmeurer"
}
```

The mpmath errors are actually for Python 3 compatibility, not tests.  Those files have syntax that is invalid in Python 2, but will never be run there.  I think you can just delete them if you don't care about Python 3 and don't like the errors.  I think Fredrik is going to fix these for the next version of mpmath (see http://code.google.com/p/mpmath/issues/detail?id=204 and http://code.google.com/p/mpmath/issues/detail?id=209).



---

archive/issue_comments_126442.json:
```json
{
    "body": "Thanks for piping in Aaron, I actually knew that! I am not that concerned but a reviewer could be. Thank you for adding this fact as it prove that these messages have no consequences.",
    "created_at": "2011-09-16T20:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126442",
    "user": "fbissey"
}
```

Thanks for piping in Aaron, I actually knew that! I am not that concerned but a reviewer could be. Thank you for adding this fact as it prove that these messages have no consequences.



---

archive/issue_comments_126443.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-09-18T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126443",
    "user": "wdj"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_126444.json:
```json
{
    "body": "Replying to [comment:13 fbissey]:\n> Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. \n\n\nThat's fine. Please post a link to your spkg when you finish it.\n\nChanging this to needs work, for now.\n\n...\n\n> One step further would be to mirror the work I have done in Gentoo and remove the shipped mpmath to use the version already installed in sage. Of course that means we would have to be careful and then upgrade them in sync.",
    "created_at": "2011-09-18T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126444",
    "user": "wdj"
}
```

Replying to [comment:13 fbissey]:
> Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. 


That's fine. Please post a link to your spkg when you finish it.

Changing this to needs work, for now.

...

> One step further would be to mirror the work I have done in Gentoo and remove the shipped mpmath to use the version already installed in sage. Of course that means we would have to be careful and then upgrade them in sync.



---

archive/issue_comments_126445.json:
```json
{
    "body": "Replying to [comment:16 wdj]:\n> Replying to [comment:13 fbissey]:\n> > Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. \n> \n> \n> That's fine. Please post a link to your spkg when you finish it.\n> \n\nThere is a link to a spkg in the description. Has been since my comment about David's spkg... \n\nThanks for volunteering for a review.",
    "created_at": "2011-09-18T21:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126445",
    "user": "fbissey"
}
```

Replying to [comment:16 wdj]:
> Replying to [comment:13 fbissey]:
> > Sorry David but I decided to roll a new one of my own rather than giving you the thumb up. 
> 
> 
> That's fine. Please post a link to your spkg when you finish it.
> 

There is a link to a spkg in the description. Has been since my comment about David's spkg... 

Thanks for volunteering for a review.



---

archive/issue_comments_126446.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-09-18T21:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126446",
    "user": "fbissey"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126447.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-10-01T08:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126447",
    "user": "wdj"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_126448.json:
```json
{
    "body": "Replying to [comment:17 fbissey]:\n> Replying to [comment:16 wdj]:\n\n...\n\n> \n> There is a link to a spkg in the description. Has been since my comment about David's spkg... \n> \n> Thanks for volunteering for a review.\n\n\nI tested this on sage 4.7.2.a3 and came up with the following failures:\n\n```\nThe following tests failed:\n\n\n        sage -t  -force_lib \"devel/sage/sage/calculus/test_sympy.py\"\n        sage -t  -force_lib \"devel/sage/sage/functions/trig.py\"\n        sage -t  -force_lib \"devel/sage/sage/misc/functional.py\"\n        sage -t  -force_lib \"devel/sage/sage/symbolic/expression_conversions.py\"\n        sage -t  -force_lib \"devel/sage/sage/symbolic/integration/external.py\"\n        sage -t  -force_lib \"devel/sage/sage/symbolic/integration/integral.py\"\n```\n\nFor example,\n\n\n```\nshe:sage-4.7.2.alpha3 davidjoyner$ ./sage -t  -force_lib \"devel/sage/sage/calculus/test_sympy.py\"\nsage -t -force_lib \"devel/sage/sage/calculus/test_sympy.py\" \n**********************************************************************\nFile \"/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py\", line 139:\n    sage: sympy.sympify(var(\"y\"))+sympy.Symbol(\"x\")\nExpected:\n    x + y\nGot:\n    doctest:289: DeprecationWarning: The each_char option to symbols() and var() is deprecated.  Separate symbol names by spaces or commas instead.\n    x + y\n**********************************************************************\nFile \"/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py\", line 154:\n    sage: e\nExpected:\n    cos(x) + sin(y)\nGot:\n    sin(y) + cos(x)\n**********************************************************************\n```\n",
    "created_at": "2011-10-01T08:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126448",
    "user": "wdj"
}
```

Replying to [comment:17 fbissey]:
> Replying to [comment:16 wdj]:

...

> 
> There is a link to a spkg in the description. Has been since my comment about David's spkg... 
> 
> Thanks for volunteering for a review.


I tested this on sage 4.7.2.a3 and came up with the following failures:

```
The following tests failed:


        sage -t  -force_lib "devel/sage/sage/calculus/test_sympy.py"
        sage -t  -force_lib "devel/sage/sage/functions/trig.py"
        sage -t  -force_lib "devel/sage/sage/misc/functional.py"
        sage -t  -force_lib "devel/sage/sage/symbolic/expression_conversions.py"
        sage -t  -force_lib "devel/sage/sage/symbolic/integration/external.py"
        sage -t  -force_lib "devel/sage/sage/symbolic/integration/integral.py"
```

For example,


```
she:sage-4.7.2.alpha3 davidjoyner$ ./sage -t  -force_lib "devel/sage/sage/calculus/test_sympy.py"
sage -t -force_lib "devel/sage/sage/calculus/test_sympy.py" 
**********************************************************************
File "/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py", line 139:
    sage: sympy.sympify(var("y"))+sympy.Symbol("x")
Expected:
    x + y
Got:
    doctest:289: DeprecationWarning: The each_char option to symbols() and var() is deprecated.  Separate symbol names by spaces or commas instead.
    x + y
**********************************************************************
File "/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py", line 154:
    sage: e
Expected:
    cos(x) + sin(y)
Got:
    sin(y) + cos(x)
**********************************************************************
```




---

archive/issue_comments_126449.json:
```json
{
    "body": "Replying to [comment:18 wdj]:\n> Replying to [comment:17 fbissey]:\n> > Replying to [comment:16 wdj]:\n> \n> ...\n> \n> > \n> > There is a link to a spkg in the description. Has been since my comment about David's spkg... \n> > \n> > Thanks for volunteering for a review.\n> \n> \n> I tested this on sage 4.7.2.a3 and came up with the following failures:\n> {{{\n> The following tests failed:\n> \n> \n>         sage -t  -force_lib \"devel/sage/sage/calculus/test_sympy.py\"\n>         sage -t  -force_lib \"devel/sage/sage/functions/trig.py\"\n>         sage -t  -force_lib \"devel/sage/sage/misc/functional.py\"\n>         sage -t  -force_lib \"devel/sage/sage/symbolic/expression_conversions.py\"\n>         sage -t  -force_lib \"devel/sage/sage/symbolic/integration/external.py\"\n>         sage -t  -force_lib \"devel/sage/sage/symbolic/integration/integral.py\"\n> }}}\n> For example,\n> \n> {{{\n> she:sage-4.7.2.alpha3 davidjoyner$ ./sage -t  -force_lib \"devel/sage/sage/calculus/test_sympy.py\"\n> sage -t -force_lib \"devel/sage/sage/calculus/test_sympy.py\" \n> **********************************************************************\n> File \"/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py\", line 139:\n>     sage: sympy.sympify(var(\"y\"))+sympy.Symbol(\"x\")\n> Expected:\n>     x + y\n> Got:\n>     doctest:289: DeprecationWarning: The each_char option to symbols() and var() is deprecated.  Separate symbol names by spaces or commas instead.\n>     x + y\n> **********************************************************************\n> File \"/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py\", line 154:\n>     sage: e\n> Expected:\n>     cos(x) + sin(y)\n> Got:\n>     sin(y) + cos(x)\n> **********************************************************************\n> }}}\n> \nHi David,\n\n(now I have noticed that wdj is your handle). Did you apply the two patches that the description says you have to apply?\n\nFrancois",
    "created_at": "2011-10-01T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126449",
    "user": "fbissey"
}
```

Replying to [comment:18 wdj]:
> Replying to [comment:17 fbissey]:
> > Replying to [comment:16 wdj]:
> 
> ...
> 
> > 
> > There is a link to a spkg in the description. Has been since my comment about David's spkg... 
> > 
> > Thanks for volunteering for a review.
> 
> 
> I tested this on sage 4.7.2.a3 and came up with the following failures:
> {{{
> The following tests failed:
> 
> 
>         sage -t  -force_lib "devel/sage/sage/calculus/test_sympy.py"
>         sage -t  -force_lib "devel/sage/sage/functions/trig.py"
>         sage -t  -force_lib "devel/sage/sage/misc/functional.py"
>         sage -t  -force_lib "devel/sage/sage/symbolic/expression_conversions.py"
>         sage -t  -force_lib "devel/sage/sage/symbolic/integration/external.py"
>         sage -t  -force_lib "devel/sage/sage/symbolic/integration/integral.py"
> }}}
> For example,
> 
> {{{
> she:sage-4.7.2.alpha3 davidjoyner$ ./sage -t  -force_lib "devel/sage/sage/calculus/test_sympy.py"
> sage -t -force_lib "devel/sage/sage/calculus/test_sympy.py" 
> **********************************************************************
> File "/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py", line 139:
>     sage: sympy.sympify(var("y"))+sympy.Symbol("x")
> Expected:
>     x + y
> Got:
>     doctest:289: DeprecationWarning: The each_char option to symbols() and var() is deprecated.  Separate symbol names by spaces or commas instead.
>     x + y
> **********************************************************************
> File "/Volumes/Bay4/sagefiles2/sage-4.7.2.alpha3/devel/sage/sage/calculus/test_sympy.py", line 154:
>     sage: e
> Expected:
>     cos(x) + sin(y)
> Got:
>     sin(y) + cos(x)
> **********************************************************************
> }}}
> 
Hi David,

(now I have noticed that wdj is your handle). Did you apply the two patches that the description says you have to apply?

Francois



---

archive/issue_comments_126450.json:
```json
{
    "body": "Replying to [comment:19 fbissey]:\n\n...\n\n> Hi David,\n> \n> (now I have noticed that wdj is your handle). Did you apply the two \n> patches that the description says you have to apply?\n\n\nI forgot to, sorry. Changing back to needs review (which I will do now).\n\n> \n> Francois",
    "created_at": "2011-10-02T14:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126450",
    "user": "wdj"
}
```

Replying to [comment:19 fbissey]:

...

> Hi David,
> 
> (now I have noticed that wdj is your handle). Did you apply the two 
> patches that the description says you have to apply?


I forgot to, sorry. Changing back to needs review (which I will do now).

> 
> Francois



---

archive/issue_comments_126451.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-10-02T14:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126451",
    "user": "wdj"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126452.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-02T15:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126452",
    "user": "wdj"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126453.json:
```json
{
    "body": "Applies fine to 4.7.2.a3 and passes all tests, once the two patches are applied. The patches fix some sage functions which use sympy, resulting form changes in sympy.\n\nsympy 0.7.1 is much better than the old version which is currently in sage. Thanks for creating this spkg and patches Francois !",
    "created_at": "2011-10-02T15:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126453",
    "user": "wdj"
}
```

Applies fine to 4.7.2.a3 and passes all tests, once the two patches are applied. The patches fix some sage functions which use sympy, resulting form changes in sympy.

sympy 0.7.1 is much better than the old version which is currently in sage. Thanks for creating this spkg and patches Francois !



---

archive/issue_comments_126454.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-10-12T07:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126454",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_126455.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126455",
    "user": "jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_comments_126456.json:
```json
{
    "body": "Someone is asking on sage-release (Sage 5.10.beta4 thread) whether we're planning to upgrade to SymPy 0.7.2.  There doesn't seem to be a ticket for doing so yet, but maybe I just didn't find it...",
    "created_at": "2013-05-23T19:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126456",
    "user": "leif"
}
```

Someone is asking on sage-release (Sage 5.10.beta4 thread) whether we're planning to upgrade to SymPy 0.7.2.  There doesn't seem to be a ticket for doing so yet, but maybe I just didn't find it...



---

archive/issue_comments_126457.json:
```json
{
    "body": "I don't think there is. sage-on-gentoo is on 0.7.2 that breaks two doctests. One would need attention the other is pretty printing.",
    "created_at": "2013-05-23T21:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126457",
    "user": "fbissey"
}
```

I don't think there is. sage-on-gentoo is on 0.7.2 that breaks two doctests. One would need attention the other is pretty printing.



---

archive/issue_comments_126458.json:
```json
{
    "body": "This is now #14694.",
    "created_at": "2013-06-06T01:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11388#issuecomment-126458",
    "user": "eviatarbach"
}
```

This is now #14694.
