# Issue 18186: Restricted partitions doesn't like getting a partition as "outer" input

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2015-05-14 20:41:31

CC:  tscrim aschilling jdemeyer

Keywords: partition, IntegerListsLex,


```
sage: Partitions(5, inner=Partition([2,1]), outer=Partition([3,2]))
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-13-b4958b2a2c2a> in <module>()
----> 1 Partitions(Integer(5), inner=Partition([Integer(2),Integer(1)]), outer=Partition([Integer(3),Integer(2)]))

/scratch/sage-6.4.beta2/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1269)()
    323         """
    324         if cls.classcall is not None:
--> 325             return cls.classcall(cls, *args, **kwds)
    326         else:
    327             # Fast version of type.__call__(cls, *args, **kwds)

/scratch/sage-6.4.beta2/local/lib/python2.7/site-packages/sage/combinat/partition.pyc in __classcall_private__(cls, n, **kwargs)
   4997             kwargs['element_class'] = Partition
   4998             kwargs['global_options'] = Partitions.global_options
-> 4999             return IntegerListsLex(n, **kwargs)
   5000         else:
   5001             raise ValueError("n must be an integer or be equal to one of "+

/scratch/sage-6.4.beta2/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1269)()
    323         """
    324         if cls.classcall is not None:
--> 325             return cls.classcall(cls, *args, **kwds)
    326         else:
    327             # Fast version of type.__call__(cls, *args, **kwds)

/scratch/sage-6.4.beta2/local/lib/python2.7/site-packages/sage/combinat/integer_list.pyc in __classcall_private__(cls, n, **kwargs)
    815             return DisjointUnionEnumeratedSets(Family(n, lambda i: IntegerListsLex(i, **kwargs)))
    816         else:
--> 817             return typecall(cls, n=n, **kwargs)
    818 
    819     def __init__(self,

/scratch/sage-6.4.beta2/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.typecall (build/cythonized/sage/misc/classcall_metaclass.c:1673)()
    490             TypeError: Argument 'cls' has incorrect type (expected type, got classobj)
    491     """
--> 492     return (<PyTypeObject*>type).tp_call(cls, args, kwds)
    493 
    494 # Class for timing::

/scratch/sage-6.4.beta2/local/lib/python2.7/site-packages/sage/combinat/integer_list.pyc in __init__(self, n, length, min_length, max_length, floor, ceiling, min_part, max_part, min_slope, max_slope, min_sum, max_sum, name, category, element_constructor, element_class, global_options, check)
    909             self._floor_or_ceiling_is_function = True
    910         else:
--> 911             raise ValueError("Unable to parse value of parameter ceiling")
    912         self._ceiling = Envelope(ceiling, sign=1,
    913                                min_part=  self._min_part,  max_part= self._max_part,

ValueError: Unable to parse value of parameter ceiling
```


This would work perfectly well if I passed `outer=[3,2]` instead; also the format of `inner` doesn't seem to matter.


---

Comment by nthiery created at 2015-05-14 21:47:38

On it ...


---

Comment by nthiery created at 2015-05-14 22:00:46

Changing status from new to needs_review.


---

Comment by nthiery created at 2015-05-14 22:00:46

This was probably broken by #17979, and the fix is easy (`IntegerListsLex` takes lists/tuples as input for ceiling and floor).
----
New commits:


---

Comment by darij created at 2015-05-14 22:05:01

Changing status from needs_review to positive_review.


---

Comment by darij created at 2015-05-14 22:05:15

Nice, thank you!


---

Comment by vbraun created at 2015-05-18 21:11:52

Resolution: fixed
