# Issue 32415: sage.geometry.polyhedron: Mark doctests # optional - sage.rings.number_field

archive/issues_032415.json:
```json
{
    "body": "CC:  @kliem tscrim\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32652\n\n",
    "created_at": "2021-10-08T02:00:32Z",
    "labels": [
        "refactoring",
        "major",
        "enhancement"
    ],
    "title": "sage.geometry.polyhedron: Mark doctests # optional - sage.rings.number_field",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32415",
    "user": "mkoeppe"
}
```
CC:  @kliem tscrim



Issue created by migration from https://trac.sagemath.org/ticket/32652





---

archive/issue_comments_462456.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-10-08T02:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462456",
    "user": "mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_462457.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-08T02:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462457",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462458.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-10T20:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462458",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462459.json:
```json
{
    "body": "Does `sage.symbolic` imply `sage.rings.number_field`?\n\n\n```diff\n-    sage: Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)])\n+    sage: Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)])                          # optional - sage.symbolic\n     Traceback (most recent call last):\n     ...\n     ValueError: no default backend for computations with Symbolic Ring\n \n-    sage: SR.is_exact()\n+    sage: SR.is_exact()                                                         # optional - sage.symbolic\n     False\n```\n",
    "created_at": "2021-10-11T05:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462459",
    "user": "@kliem"
}
```

Does `sage.symbolic` imply `sage.rings.number_field`?


```diff
-    sage: Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)])
+    sage: Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)])                          # optional - sage.symbolic
     Traceback (most recent call last):
     ...
     ValueError: no default backend for computations with Symbolic Ring
 
-    sage: SR.is_exact()
+    sage: SR.is_exact()                                                         # optional - sage.symbolic
     False
```




---

archive/issue_comments_462460.json:
```json
{
    "body": "Replying to [comment:5 gh-kliem]:\n> Does `sage.symbolic` imply `sage.rings.number_field`?\n\nNo, but number fields are not used in this example",
    "created_at": "2021-10-11T05:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462460",
    "user": "mkoeppe"
}
```

Replying to [comment:5 gh-kliem]:
> Does `sage.symbolic` imply `sage.rings.number_field`?

No, but number fields are not used in this example



---

archive/issue_comments_462461.json:
```json
{
    "body": "Although here:\n\n```diff\n--- a/src/sage/geometry/polyhedron/constructor.py\n+++ b/src/sage/geometry/polyhedron/constructor.py\n@@ -177,8 +177,8 @@ equilateral triangle whose vertex coordinates involve `\\sqrt{3}`. An\n exact way to work with roots in Sage is the :mod:`Algebraic Real Field\n <sage.rings.qqbar>` ::\n \n-    sage: triangle = Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)], base_ring=AA)\n-    sage: triangle.Hrepresentation()\n+    sage: triangle = Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)], base_ring=AA) # optional - sage.rings.number_field\n+    sage: triangle.Hrepresentation()                                            # optional - sage.rings.number_field\n     (An inequality (-1, -0.5773502691896258?) x + 1 >= 0,\n      An inequality (1, -0.5773502691896258?) x + 0 >= 0,\n      An inequality (0, 1.154700538379252?) x + 0 >= 0)\n```\n\nI should have marked it `optional - sage.rings.number_field sage.symbolic`",
    "created_at": "2021-10-11T05:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462461",
    "user": "mkoeppe"
}
```

Although here:

```diff
--- a/src/sage/geometry/polyhedron/constructor.py
+++ b/src/sage/geometry/polyhedron/constructor.py
@@ -177,8 +177,8 @@ equilateral triangle whose vertex coordinates involve `\sqrt{3}`. An
 exact way to work with roots in Sage is the :mod:`Algebraic Real Field
 <sage.rings.qqbar>` ::
 
-    sage: triangle = Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)], base_ring=AA)
-    sage: triangle.Hrepresentation()
+    sage: triangle = Polyhedron([(0,0), (1,0), (1/2, sqrt(3)/2)], base_ring=AA) # optional - sage.rings.number_field
+    sage: triangle.Hrepresentation()                                            # optional - sage.rings.number_field
     (An inequality (-1, -0.5773502691896258?) x + 1 >= 0,
      An inequality (1, -0.5773502691896258?) x + 0 >= 0,
      An inequality (0, 1.154700538379252?) x + 0 >= 0)
```

I should have marked it `optional - sage.rings.number_field sage.symbolic`



---

archive/issue_comments_462462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-11T05:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462462",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462463.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-10-11T05:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462463",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_462464.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-11T05:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462464",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462465.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-10-11T05:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462465",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_462466.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-10-11T22:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462466",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_462467.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-10-11T22:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462467",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_462468.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-11T22:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462468",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462469.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-19T20:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32415#issuecomment-462469",
    "user": "vbraun"
}
```

Resolution: fixed
