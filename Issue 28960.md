# Issue 28960: mcqd needs legacy_uninstall, and  an update of spkg-install

Issue created by migration from https://trac.sagemath.org/ticket/29197

Original creator: dimpase

Original creation time: 2020-02-14 14:32:51

CC:  dcoudert

otherwise rebuilding Sage 9.1.beta4 with mcqd installed fails at it. 


---

Comment by dimpase created at 2020-02-14 17:19:47

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-02-14 17:19:47

please test on MacOS in particular

It would also be interesting to find out whether the new upstream gitlab repo for the package has any updates (and then we should apply thhem).


---

Comment by dcoudert created at 2020-02-14 18:00:46

I tried on my linux computer and it seems that it fixes the problem (compilation no longer complaining).

I tried on my macOS laptop, but I had to install mcqd first, so it's not a good test. Someone else should try, or tell me which sequence of operation I have to do.


---

Comment by jhpalmieri created at 2020-02-14 18:27:01

The branch doesn't touch any files related to `mcqd`. Am I missing something?


---

Comment by dimpase created at 2020-02-14 18:29:32

try cloning it. it seems that trac is confused.


---

Comment by git created at 2020-02-14 18:37:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-02-14 18:39:40

oops, sorry. now the branch is right


---

Comment by jhpalmieri created at 2020-02-14 21:47:55

I can't reproduce any problem with OS X: I took 9.1.beta3, installed mcqd, then did `git trac pull develop` to get to 9.1.beta4. `make` succeeded.

`make` also succeeded with the branch here, and so did `./sage -f mcqd`, so it didn't break anything. Is there any reason to bump up the package patch-level?


---

Comment by dimpase created at 2020-02-14 22:35:39

It could be that MacOS just doesn't need `-fPIC`.

While we're at it, it's good to understand whether `mcqd` was updated after out release.
I'll take a look now.


---

Comment by dimpase created at 2020-02-14 22:44:33

no, it's the same, only README has changed (becoming README.md, and getting a bit longer).


---

Comment by mkoeppe created at 2020-04-15 05:49:32

Error confirmed on `debian-stretch-standard-python2` (https://github.com/mkoeppe/sage/runs/584777841)

Needs rebase.


---

Comment by mkoeppe created at 2020-04-15 05:49:32

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-04-15 10:16:26

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dimpase created at 2020-04-15 10:17:00

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-04-15 15:08:21

Thanks! I'll test this


---

Comment by mkoeppe created at 2020-04-16 00:17:41

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-04-16 00:17:41

Installation seems to work well. https://github.com/mkoeppe/sage/runs/589959544


---

Comment by vbraun created at 2020-04-18 08:35:05

Resolution: fixed
