# Issue 21805: Three.js: reduce CPU load for static scenes

Issue created by migration from https://trac.sagemath.org/ticket/22042

Original creator: paulmasson

Original creation time: 2016-12-10 01:35:09

CC:  tdumont dimpase vbraun

Keywords: threejs




---

Comment by paulmasson created at 2016-12-10 03:56:52

New commits:


---

Comment by paulmasson created at 2016-12-10 03:56:52

Changing status from new to needs_review.


---

Comment by dimpase created at 2016-12-10 08:44:13

Does this change just disable the animation? 
I'd have expected something on the Python end of it too.


---

Comment by paulmasson created at 2016-12-10 20:33:55

Replying to [comment:4 dimpase]:
> I'd have expected something on the Python end of it too.
Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.


---

Comment by dimpase created at 2016-12-10 21:17:01

Replying to [comment:5 paulmasson]:
> Replying to [comment:4 dimpase]:
> > I'd have expected something on the Python end of it too.
> Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.

I mean, `animate` is set to `false` and remains so, and several pieces in the code
are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 

I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?


---

Comment by paulmasson created at 2016-12-10 22:15:27

Replying to [comment:6 dimpase]:
> Replying to [comment:5 paulmasson]:
> > Replying to [comment:4 dimpase]:
> I mean, `animate` is set to `false` and remains so, and several pieces in the code
> are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 
Animation is not currently supported by this viewer but will be, at which point there will be a keyword option `animate` that will set the JavaScript variable. The conditionals will be necessary at some point in the near future and are included in preparation for additional functionality.
> I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?
The examples are embedded in the documentation for this viewer. If you build the documentation, you'll see them in the file `threejs.html` in `reference/plot3d`.


---

Comment by dimpase created at 2016-12-11 22:15:14

I'd like to see a comment in the code explaining the change, as it's
quite counter-intuitive.


---

Comment by git created at 2016-12-11 23:55:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by paulmasson created at 2016-12-11 23:57:05

Replying to [comment:8 dimpase]:
> I'd like to see a comment in the code explaining the change, as it's
> quite counter-intuitive.  
Done.


---

Comment by dimpase created at 2016-12-14 23:20:11

looks good to me, thanks!


---

Comment by dimpase created at 2016-12-14 23:20:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-12-24 19:47:29

Resolution: fixed
