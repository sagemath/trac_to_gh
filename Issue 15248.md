# Issue 15248: Implement fusion algebras

archive/issues_015248.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat aschilling darij bump\n\nKeywords: fusion algebras, rings, quantum groups, CFT\n\nAs defined by Fuchs for WZW and conformal field theories.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15485\n\n",
    "created_at": "2013-12-05T01:52:24Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Implement fusion algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15248",
    "user": "tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat aschilling darij bump

Keywords: fusion algebras, rings, quantum groups, CFT

As defined by Fuchs for WZW and conformal field theories.

Issue created by migration from https://trac.sagemath.org/ticket/15485





---

archive/issue_comments_196042.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-12-05T02:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196042",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_196043.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-05T02:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196043",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196044.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-02-08T17:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196044",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_196045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-04-09T02:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_196046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T02:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196046",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-05-17T21:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_196048.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-25T07:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196048",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-17T18:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196049",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196050.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-22T09:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196050",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-24T18:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196051",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-11T14:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_196053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-09T19:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196053",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196054.json:
```json
{
    "body": "Merge conflict with sage 8.1.beta3 needs to be resolved",
    "created_at": "2017-08-30T19:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196054",
    "user": "mderickx"
}
```

Merge conflict with sage 8.1.beta3 needs to be resolved



---

archive/issue_comments_196055.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-30T19:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196055",
    "user": "mderickx"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196056.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-30T22:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196056",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196057.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-30T22:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196057",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_196058.json:
```json
{
    "body": "Boring trivial rebase.",
    "created_at": "2017-08-30T22:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196058",
    "user": "tscrim"
}
```

Boring trivial rebase.



---

archive/issue_comments_196059.json:
```json
{
    "body": "Hi,\n\nI thought maybe it was not to much work to learn what fusion algebras are, but this seems more work then expected. So here some non mathematical comments.\n\n\n1. in the class docstring it might be good to list the INPUT:  heading before all the mathematical explanation going on (but after the only senctence description of this class). This is something you want to be able to see at a quick glance if you sort of know how to use this class but forgot what the exact input was.\n2. The examples in the __init__ function should be in a TESTS: section instead\n3. Is there a reason you don't subclass `sage.algebras.finite_dimensional_algebras.finite_dimensional_algebra.FiniteDimensionalAlgebra` Otherwise, if this gives problems, you should at least make it behave more like a FiniteDimensionalAlgebra, by making a function that computes the underlying FiniteDimensionalAlgebra and delegates the most important function to the abstract underlying algebra to make it behave like a FiniteDimensionalAlgebra in order for users to have a consistent user experience.\n4. This raises an error:\n\n```\nsage: F(F.monomial(0))*F(F.monomial(1))\n```\n\n5. While this works\n\n```\nsage: F.gens()[0] * F.gens()[1]\nF[Lambda[2]]\n```\n\n5. It would be nice to have a method `gen` like FreeModule(QQ,42) has (although admittedly this is a shortcoming of CombinatorialFreeModule) I just found this out in testing this ticket.",
    "created_at": "2017-08-31T02:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196059",
    "user": "mderickx"
}
```

Hi,

I thought maybe it was not to much work to learn what fusion algebras are, but this seems more work then expected. So here some non mathematical comments.


1. in the class docstring it might be good to list the INPUT:  heading before all the mathematical explanation going on (but after the only senctence description of this class). This is something you want to be able to see at a quick glance if you sort of know how to use this class but forgot what the exact input was.
2. The examples in the __init__ function should be in a TESTS: section instead
3. Is there a reason you don't subclass `sage.algebras.finite_dimensional_algebras.finite_dimensional_algebra.FiniteDimensionalAlgebra` Otherwise, if this gives problems, you should at least make it behave more like a FiniteDimensionalAlgebra, by making a function that computes the underlying FiniteDimensionalAlgebra and delegates the most important function to the abstract underlying algebra to make it behave like a FiniteDimensionalAlgebra in order for users to have a consistent user experience.
4. This raises an error:

```
sage: F(F.monomial(0))*F(F.monomial(1))
```

5. While this works

```
sage: F.gens()[0] * F.gens()[1]
F[Lambda[2]]
```

5. It would be nice to have a method `gen` like FreeModule(QQ,42) has (although admittedly this is a shortcoming of CombinatorialFreeModule) I just found this out in testing this ticket.



---

archive/issue_comments_196060.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-31T02:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196060",
    "user": "mderickx"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196061.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-01T00:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196061",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196062.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-10-01T00:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196062",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_196063.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-01T01:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196063",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_196064.json:
```json
{
    "body": "Replying to [comment:22 mderickx]:\n> I thought maybe it was not to much work to learn what fusion algebras are, but this seems more work then expected. So here some non mathematical comments.\n\nAll the same, thank you for taking a look at the ticket.\n\n> 1. in the class docstring it might be good to list the INPUT:  heading before all the mathematical explanation going on (but after the only senctence description of this class). This is something you want to be able to see at a quick glance if you sort of know how to use this class but forgot what the exact input was.\n\nI disagree with this as I feel it is better to define your objects for people. If you need to look at the inputs, it takes 3 seconds to scroll to find the `INPUT:` block. Also, I think Sage more consistently has things this way.\n\n> 2. The examples in the __init__ function should be in a TESTS: section instead\n\nThis really doesn't matter, but done.\n\n> 3. Is there a reason you don't subclass `sage.algebras.finite_dimensional_algebras.finite_dimensional_algebra.FiniteDimensionalAlgebra` Otherwise, if this gives problems, you should at least make it behave more like a FiniteDimensionalAlgebra, by making a function that computes the underlying FiniteDimensionalAlgebra and delegates the most important function to the abstract underlying algebra to make it behave like a FiniteDimensionalAlgebra in order for users to have a consistent user experience.\n\nYes, there are many. Most importantly, it would mean we have to construct the entire multiplication table upon initialization rather than on-demand, which could be **very** expensive. Also, `FiniteDimensionalAlgebra` is a more concrete implementation than `CombinatorialFreeModule` and does not have the same feature set in terms of indexing of the basis. The consistency should be controlled through the category (is `gen` the thing you are talking about?); so if you want something, lift it from `FiniteDimensionalAlgebra` (or have some generic implementation or requirement added to the API).\n\n> 4. This raises an error:\n> {{{\n> sage: F(F.monomial(0))*F(F.monomial(1))\n> }}}\n\nAs it should. `monomial` wants something of the index set (although this is not checked currently for speed reasons and Python's \"consenting adults\" philosophy). While `0` could be considered in the index set, `1` definitely is not.\n\n> 5. While this works\n> {{{\n> sage: F.gens()[0] * F.gens()[1]\n> F[Lambda[2]]\n> }}}\n\nYou should not do this. See below.\n\n> 5. It would be nice to have a method `gen` like FreeModule(QQ,42) has (although admittedly this is a shortcoming of CombinatorialFreeModule) I just found this out in testing this ticket.\n\nI completely disagree because `gens` (and hence `gen`) is ambiguous, and hence, should generally be avoided. In particular, the generators as a what? See #15381 and #17768.\n\nIn this case, there is not a good way to determine what generates it as an algebra, so the generators as an R-algebra are the same as those as a free R-module. Yet, in this case, there is no natural order on the generators because there is no natural order on the indexing set.",
    "created_at": "2017-10-01T01:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196064",
    "user": "tscrim"
}
```

Replying to [comment:22 mderickx]:
> I thought maybe it was not to much work to learn what fusion algebras are, but this seems more work then expected. So here some non mathematical comments.

All the same, thank you for taking a look at the ticket.

> 1. in the class docstring it might be good to list the INPUT:  heading before all the mathematical explanation going on (but after the only senctence description of this class). This is something you want to be able to see at a quick glance if you sort of know how to use this class but forgot what the exact input was.

I disagree with this as I feel it is better to define your objects for people. If you need to look at the inputs, it takes 3 seconds to scroll to find the `INPUT:` block. Also, I think Sage more consistently has things this way.

> 2. The examples in the __init__ function should be in a TESTS: section instead

This really doesn't matter, but done.

> 3. Is there a reason you don't subclass `sage.algebras.finite_dimensional_algebras.finite_dimensional_algebra.FiniteDimensionalAlgebra` Otherwise, if this gives problems, you should at least make it behave more like a FiniteDimensionalAlgebra, by making a function that computes the underlying FiniteDimensionalAlgebra and delegates the most important function to the abstract underlying algebra to make it behave like a FiniteDimensionalAlgebra in order for users to have a consistent user experience.

Yes, there are many. Most importantly, it would mean we have to construct the entire multiplication table upon initialization rather than on-demand, which could be **very** expensive. Also, `FiniteDimensionalAlgebra` is a more concrete implementation than `CombinatorialFreeModule` and does not have the same feature set in terms of indexing of the basis. The consistency should be controlled through the category (is `gen` the thing you are talking about?); so if you want something, lift it from `FiniteDimensionalAlgebra` (or have some generic implementation or requirement added to the API).

> 4. This raises an error:
> {{{
> sage: F(F.monomial(0))*F(F.monomial(1))
> }}}

As it should. `monomial` wants something of the index set (although this is not checked currently for speed reasons and Python's "consenting adults" philosophy). While `0` could be considered in the index set, `1` definitely is not.

> 5. While this works
> {{{
> sage: F.gens()[0] * F.gens()[1]
> F[Lambda[2]]
> }}}

You should not do this. See below.

> 5. It would be nice to have a method `gen` like FreeModule(QQ,42) has (although admittedly this is a shortcoming of CombinatorialFreeModule) I just found this out in testing this ticket.

I completely disagree because `gens` (and hence `gen`) is ambiguous, and hence, should generally be avoided. In particular, the generators as a what? See #15381 and #17768.

In this case, there is not a good way to determine what generates it as an algebra, so the generators as an R-algebra are the same as those as a free R-module. Yet, in this case, there is no natural order on the generators because there is no natural order on the indexing set.



---

archive/issue_comments_196065.json:
```json
{
    "body": "The documentation in algebras/verlinde_algebra.py .mentions the \"Kac-Waldron formula\". I think this should be \"Kac-Walton\".\n\nWalton, Mark A. Fusion rules in Wess-Zumino-Witten models. Nuclear Phys. B 340 (1990), no. 2-3, 777\u2013790.\n\nAlso in algebras/verlinde_algebra.py [Feigngold2004] should be [Feingold2004].",
    "created_at": "2018-10-04T17:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196065",
    "user": "bump"
}
```

The documentation in algebras/verlinde_algebra.py .mentions the "Kac-Waldron formula". I think this should be "Kac-Walton".

Walton, Mark A. Fusion rules in Wess-Zumino-Witten models. Nuclear Phys. B 340 (1990), no. 2-3, 777–790.

Also in algebras/verlinde_algebra.py [Feigngold2004] should be [Feingold2004].



---

archive/issue_comments_196066.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-08T00:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196066",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_196067.json:
```json
{
    "body": "I have fixed Dan's comment:27 (Waldron must have been a Freudenthal slip `:P`). I also rebased this over the current develop to help clean up the history a bit.",
    "created_at": "2018-10-08T00:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196067",
    "user": "tscrim"
}
```

I have fixed Dan's comment:27 (Waldron must have been a Freudenthal slip `:P`). I also rebased this over the current develop to help clean up the history a bit.



---

archive/issue_comments_196068.json:
```json
{
    "body": "red branch => needs work",
    "created_at": "2021-03-26T09:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196068",
    "user": "chapoton"
}
```

red branch => needs work



---

archive/issue_comments_196069.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-26T09:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196069",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196070.json:
```json
{
    "body": "This is a duplicate of #26440.",
    "created_at": "2021-03-26T23:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196070",
    "user": "tscrim"
}
```

This is a duplicate of #26440.



---

archive/issue_comments_196071.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-03-26T23:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196071",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_196072.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2021-03-27T07:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15248",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15248#issuecomment-196072",
    "user": "chapoton"
}
```

Resolution: duplicate
