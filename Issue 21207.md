# Issue 21207: SR.wild and maxima don't mix

Issue created by migration from https://trac.sagemath.org/ticket/21444

Original creator: nbruin

Original creation time: 2016-09-08 05:42:19

CC:  rws

This came up in [ask-sage](https://ask.sagemath.org/question/34767/replacing-mathematical-functions-of-expressions-with-different-mathematical-functions-of-the-same-expression/?answer=34769#post-id-34769):

```
sage: tanh(SR.wild(0)) #for references; this works
tanh($0)
sage: coth(SR.wild(0))
ValueError: The name "" is not a valid Python identifier.
```

The traceback shows that this error happens when trying to parse back a maxima result with bare `_SAGE_VAR_` in it (i.e., a sage variable with an empty name)

It seems #20134 is implicated.

Another problem arises when a wildcard expression gets sent to maxima:


```
sage: sin(SR.wild(0)).simplify_full()
TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
```


It may be that we can resolve both errors by ensuring that wildcards roundtrip properly to maxima (e.g., convert them to `_SAGE_WILDCARD_0` rather than the syntactically illegal `_SAGE_VAR_$0` and parse them back properly too).

It may also be that by giving `coth` and friends a slightly different treatment we can get them in line with `tanh` etc.


---

Comment by nbruin created at 2016-09-08 05:42:43

Changing component from PLEASE CHANGE to symbolics.


---

Comment by nbruin created at 2016-09-08 06:04:45

Changing type from PLEASE CHANGE to defect.


---

Comment by rws created at 2016-09-08 06:08:18

This works in 7.4beta3, i.e., the `coth(SR.wild(0))` part, not the simplify of course.


---

Comment by kcrisman created at 2016-09-08 18:07:14

> This works in 7.4beta3, i.e., the `coth(SR.wild(0))` part, not the simplify of course.
I was figuring that a Pynac upgrade might do it, because I remembered you adding those functions recently.  Should we have one ticket just to doctest that works, and then leave this ticket for the round-trip issue?


---

Comment by rws created at 2016-09-08 18:16:38

Yes please.


---

Comment by kcrisman created at 2016-09-08 19:04:19

See #21455


---

Comment by rws created at 2017-10-02 06:33:16

Changing status from new to needs_review.


---

Comment by rws created at 2017-10-02 06:33:16

Probably a duplicate of #16335.


---

Comment by mjo created at 2021-09-18 11:32:08

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-09-18 17:51:47

Resolution: invalid
