# Issue 27020: Fix sagenb build

Issue created by migration from https://trac.sagemath.org/ticket/27257

Original creator: jdemeyer

Original creation time: 2019-02-11 21:42:51

CC:  konrad127123 zimmerma




---

Comment by Konrad127123 created at 2019-02-11 22:10:11

New commits:


---

Comment by jdemeyer created at 2019-02-11 23:00:08

Can you please try to reproduce the problem from #26686 with this branch?


---

Comment by zimmerma created at 2019-02-12 07:02:18

Replying to [comment:3 jdemeyer]:
> Can you please try to reproduce the problem from #26686 with this branch?

sorry I cannot. I only build Sage **releases** on my laptop (this takes ages and I have to make sure it does not heat too much).


---

Comment by zimmerma created at 2019-02-12 07:06:06

after trying comment 18 in #26686, I can build Sage with `make sagenb`, but `make -j1` still does not want to build the documentation:

```
$ make -j1
...
[dochtml] [tutorial ] Merging js index files...
[dochtml] [tutorial ] ... done (2115 js index entries)
[dochtml] [tutorial ] The HTML pages are in local/share/doc/sage/html/de/tutorial.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1715, in main
[dochtml]     builder()
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 342, in _wrapper
[dochtml]     build_many(build_other_doc, L)
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 283, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/usr/local/sage-8.6/local/lib/python2.7/multiprocessing/pool.py", line 572, in get
[dochtml]     raise self._value
[dochtml] OSError: WARNING: search index couldn't be loaded, but not all documents will be built: the index will be incomplete.
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
Makefile:1993: recipe for target 'doc-html' failed
make[3]: *** [doc-html] Error 1
make[3]: Leaving directory '/usr/local/sage-8.6/build/make'
Makefile:1803: recipe for target 'all-start' failed
make[2]: *** [all-start] Error 2
make[2]: Leaving directory '/usr/local/sage-8.6/build/make'
```



---

Comment by jdemeyer created at 2019-02-12 08:26:56

Does `make doc-clean` fix that latter error?


---

Comment by zimmerma created at 2019-02-13 20:28:41

Replying to [comment:6 jdemeyer]:
> Does `make doc-clean` fix that latter error?

yes it does. Thank you. But it was the first time since years that building Sage from source does not work.


---

Comment by jdemeyer created at 2019-02-13 21:48:56

So is there anybody that can actually reproduce the problem from #26686? If not, this should be closed as "worksforme".


---

Comment by zimmerma created at 2019-02-15 09:19:11

Replying to [comment:8 jdemeyer]:
> So is there anybody that can actually reproduce the problem from #26686? If not, this should be closed as "worksforme".

I will try to rebuild Sage 8.6 from scratch, to see if the problem is reproducible.

By the way, while creating this ticket, you should have copied the description of the problem I had, since the description of this ticket is not very informative...


---

Comment by zimmerma created at 2019-02-20 17:40:35

Resolution: worksforme


---

Comment by zimmerma created at 2019-02-20 17:40:35

I tried again building Sage 8.6 from scratch and it worked fine. Since I'm unable to reproduce the problem, we can close that ticket.
