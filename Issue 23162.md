# Issue 23162: Some additions to matrix_mod_gfpn_dense

Issue created by migration from https://trac.sagemath.org/ticket/23399

Original creator: SimonKing

Original creation time: 2017-07-10 19:15:12

CC:  tscrim

Ticket #21437 is supposed to be split into smaller chunks, and this is one of them: Add documentation to the `_rawlist_` and add methods to get and set horizontal slices.


---

Comment by SimonKing created at 2017-07-10 19:43:06

Changing status from new to needs_review.


---

Comment by SimonKing created at 2017-07-10 19:43:06

New commits:


---

Comment by git created at 2017-07-11 08:54:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by SimonKing created at 2017-07-11 08:54:19

It turns out that auto-merging of #23352 into #23400 doesn't work. I hate git. Therefore, I do a manual merge here and rebase #23400 on top of it.
----
New commits:
----
New commits:


---

Comment by SimonKing created at 2017-07-12 16:06:33

Changing status from needs_review to needs_work.


---

Comment by SimonKing created at 2017-12-07 23:02:35

Note to self: Work on this ticket. After all, the dependencies are now fixed.


---

Comment by SimonKing created at 2017-12-08 14:13:25

The branch doesn't cleanly merge. I thus suggest to rebase the changes on top of the current development branch, that _should_ contain all dependencies of this ticket.


---

Comment by git created at 2017-12-08 15:23:45

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-12-08 15:26:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by SimonKing created at 2017-12-08 15:28:27

Changing status from needs_work to needs_review.


---

Comment by SimonKing created at 2017-12-08 15:28:27

Thanks to breaking all MeatAxe-related changes into smaller chunks, the new commit here is relatively small: Just add two new methods and add documentation to an existing method.

Needs review!


---

Comment by vdelecroix created at 2017-12-16 21:56:13

Looks ok, but

- please add spaces `0<=i<j<=self.Data.Nor` -> `0 <= i < j <= self.Data.Nor`.
- first line of documentation string should end with a point.


---

Comment by git created at 2017-12-16 22:28:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by SimonKing created at 2017-12-16 22:29:04

Replying to [comment:15 vdelecroix]:
> Looks ok, but
> 
> - please add spaces `0<=i<j<=self.Data.Nor` -> `0 <= i < j <= self.Data.Nor`.
> - first line of documentation string should end with a point.

Done!


---

Comment by vdelecroix created at 2017-12-16 22:42:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-17 17:54:49


```
sage -t --long --warn-long 66.1 src/sage/matrix/matrix_gfpn_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 873, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
Failed example:
    M
Expected:
    [      4     4*x   x + 3 4*x + 2 3*x + 4]
    [  x + 2 3*x + 1       3       0       3]
    [    3*x 2*x + 4       1       0     2*x]
    [4*x + 4 2*x + 3     4*x       1 3*x + 1]
    [3*x + 3   x + 3   x + 2   x + 1 3*x + 2]
Got:
    [      2 3*x + 2   x + 4       2 3*x + 1]
    [3*x + 1 4*x + 1 4*x + 3     3*x       4]
    [      2       0 4*x + 2 2*x + 3       4]
    [2*x + 2   x + 4 2*x + 2 4*x + 1 3*x + 1]
    [    3*x     3*x     3*x 2*x + 4   x + 1]
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 879, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
Failed example:
    M._rowlist_(1)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_[2]>", line 1, in <module>
        M._rowlist_(Integer(1))
      File "sage/structure/element.pyx", line 486, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4443)
        return self.getattr_from_category(name)
      File "sage/structure/element.pyx", line 499, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4552)
        return getattr_from_other_class(self, cls, name)
      File "sage/cpython/getattr.pyx", line 254, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1901)
        raise dummy_attribute_error
    AttributeError: 'sage.matrix.matrix_generic_dense.Matrix_generic_dense' object has no attribute '_rowlist_'
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 881, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
Failed example:
    [M[1,i]._int_repr() for i in range(5)]
Expected:
    ['7', '16', '3', '0', '3']
Got:
    ['16', '21', '23', '15', '4']
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 883, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
Failed example:
    M._rowlist_(2,4)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_[4]>", line 1, in <module>
        M._rowlist_(Integer(2),Integer(4))
      File "sage/structure/element.pyx", line 486, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4443)
        return self.getattr_from_category(name)
      File "sage/structure/element.pyx", line 499, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4552)
        return getattr_from_other_class(self, cls, name)
      File "sage/cpython/getattr.pyx", line 254, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1901)
        raise dummy_attribute_error
    AttributeError: 'sage.matrix.matrix_generic_dense.Matrix_generic_dense' object has no attribute '_rowlist_'
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 885, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
Failed example:
    [[M[i,j]._int_repr() for j in range(5)] for i in range(2,5)]
Expected:
    [['15', '14', '1', '0', '10'],
     ['24', '13', '20', '1', '16'],
     ['18', '8', '7', '6', '17']]
Got:
    [['2', '0', '22', '13', '4'],
     ['12', '9', '12', '21', '16'],
     ['15', '15', '15', '14', '6']]
**********************************************************************
1 item had failures:
   5 of   7 in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._rowlist_
    [173 tests, 5 failures, 29.52 s]
----------------------------------------------------------------------
sage -t --long --warn-long 66.1 src/sage/matrix/matrix_gfpn_dense.pyx  # 5 doctests failed
----------------------------------------------------------------------
Total time for all tests: 29.6 seconds
    cpu time: 28.9 seconds
    cumulative wall time: 29.5 seconds
```



---

Comment by vbraun created at 2017-12-17 17:54:49

Changing status from positive_review to needs_work.


---

Comment by SimonKing created at 2017-12-17 18:02:06

Apparently I forgot to mark a couple of tests as "optional". As you can see in the error message, the meataxe package isn't install on whatever machine the tests were done.


---

Comment by git created at 2017-12-17 18:04:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by SimonKing created at 2017-12-17 18:04:35

Changing status from needs_work to needs_review.


---

Comment by SimonKing created at 2017-12-17 18:04:35

Should be fixed.


---

Comment by vdelecroix created at 2017-12-21 16:30:24

Looks like it is.


---

Comment by vdelecroix created at 2017-12-21 16:30:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-25 18:21:50

Resolution: fixed
