# Issue 26151: Bug in comparison of integers and libgap integers

archive/issues_026151.json:
```json
{
    "body": "\n```\nsage: 1 > libgap(1)\nTrue\nsage: 1 < libgap(1)\nFalse\nsage: 1 == libgap(1)\nTrue\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26388\n\n",
    "created_at": "2018-10-03T09:49:05Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Bug in comparison of integers and libgap integers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26151",
    "user": "https://github.com/simon-king-jena"
}
```

```
sage: 1 > libgap(1)
True
sage: 1 < libgap(1)
False
sage: 1 == libgap(1)
True
```


Issue created by migration from https://trac.sagemath.org/ticket/26388





---

archive/issue_comments_368199.json:
```json
{
    "body": "Changing keywords from \"\" to \"libgap\".",
    "created_at": "2018-10-03T09:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368199",
    "user": "https://github.com/simon-king-jena"
}
```

Changing keywords from "" to "libgap".



---

archive/issue_comments_368200.json:
```json
{
    "body": "comes from\n\n```\nsage: x=1\nsage: y=libgap(1)\nsage: x._cmp_(y)\n1\n```\n",
    "created_at": "2018-10-03T18:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368200",
    "user": "https://github.com/fchapoton"
}
```

comes from

```
sage: x=1
sage: y=libgap(1)
sage: x._cmp_(y)
1
```




---

archive/issue_comments_368201.json:
```json
{
    "body": "`GapElement_Integer`'s `__gt__()` seems bugged too.\n\n\n```\nsage: x=1\nsage: y=libgap(1)\nsage: x > y\nTrue\nsage: y > x \nTrue\nsage: libgap(1).__gt__(1)\nTrue\n```\n",
    "created_at": "2018-10-04T13:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368201",
    "user": "https://github.com/vinklein"
}
```

`GapElement_Integer`'s `__gt__()` seems bugged too.


```
sage: x=1
sage: y=libgap(1)
sage: x > y
True
sage: y > x 
True
sage: libgap(1).__gt__(1)
True
```




---

archive/issue_comments_368202.json:
```json
{
    "body": "Set assignee to @vinklein.",
    "created_at": "2018-10-04T14:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368202",
    "user": "https://github.com/vinklein"
}
```

Set assignee to @vinklein.



---

archive/issue_comments_368203.json:
```json
{
    "body": "Remove assignee @vinklein.",
    "created_at": "2018-10-04T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368203",
    "user": "https://github.com/vinklein"
}
```

Remove assignee @vinklein.



---

archive/issue_comments_368204.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-10-04T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368204",
    "user": "https://github.com/vinklein"
}
```

New commits:



---

archive/issue_comments_368205.json:
```json
{
    "body": "This doesn't fix `x._cmp_(y)` but i am not sure where `_cmp_` is called, and it is not in this ticket's cases.",
    "created_at": "2018-10-04T15:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368205",
    "user": "https://github.com/vinklein"
}
```

This doesn't fix `x._cmp_(y)` but i am not sure where `_cmp_` is called, and it is not in this ticket's cases.



---

archive/issue_comments_368206.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-04T15:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368206",
    "user": "https://github.com/vinklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368207.json:
```json
{
    "body": "instead of\n\n```\nTEST #26388 is fixed::\n```\n\nwrite\n\n```\nCheck that :trac:`26388` is fixed::\n```\n",
    "created_at": "2018-10-04T18:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368207",
    "user": "https://github.com/fchapoton"
}
```

instead of

```
TEST #26388 is fixed::
```

write

```
Check that :trac:`26388` is fixed::
```




---

archive/issue_comments_368208.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-05T08:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368209.json:
```json
{
    "body": "Done. Thanks.",
    "created_at": "2018-10-05T08:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368209",
    "user": "https://github.com/vinklein"
}
```

Done. Thanks.



---

archive/issue_comments_368210.json:
```json
{
    "body": "Could you also include doctests for `1 >= libgap(1)` and `1 <= libgap(1)`?",
    "created_at": "2018-10-06T12:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368210",
    "user": "https://github.com/videlec"
}
```

Could you also include doctests for `1 >= libgap(1)` and `1 <= libgap(1)`?



---

archive/issue_comments_368211.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-08T09:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368212.json:
```json
{
    "body": "Sure ! Done.",
    "created_at": "2018-10-08T09:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368212",
    "user": "https://github.com/vinklein"
}
```

Sure ! Done.



---

archive/issue_comments_368213.json:
```json
{
    "body": "Actually `x < y` (calling `x` comparison method) is not the same thing as `y > x` (calling `y` comparison method). If you want to be sure that libgap comparison is checked, the libgap integer should be first.\n\nIt is of course reasonable to check whether `x < y` is the same thing as `y > x` but that is somehow a different matter.",
    "created_at": "2018-10-08T09:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368213",
    "user": "https://github.com/videlec"
}
```

Actually `x < y` (calling `x` comparison method) is not the same thing as `y > x` (calling `y` comparison method). If you want to be sure that libgap comparison is checked, the libgap integer should be first.

It is of course reasonable to check whether `x < y` is the same thing as `y > x` but that is somehow a different matter.



---

archive/issue_comments_368214.json:
```json
{
    "body": "Yes only the modified comparison operators are tested right now. Do you prefer having a more complete test suite between `libgap(1)` and `Integer(1)` ? (with `<`, `<=` and `==`).",
    "created_at": "2018-10-08T09:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368214",
    "user": "https://github.com/vinklein"
}
```

Yes only the modified comparison operators are tested right now. Do you prefer having a more complete test suite between `libgap(1)` and `Integer(1)` ? (with `<`, `<=` and `==`).



---

archive/issue_comments_368215.json:
```json
{
    "body": "Make sense!",
    "created_at": "2018-10-08T09:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368215",
    "user": "https://github.com/videlec"
}
```

Make sense!



---

archive/issue_comments_368216.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-08T09:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368216",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368217.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-20T11:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368217",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_024297.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2018-10-20T11:58:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26151#event-24297"
}
```



---

archive/issue_comments_368218.json:
```json
{
    "body": "This should be re-targeted for 8.5.",
    "created_at": "2018-10-28T14:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368218",
    "user": "https://github.com/embray"
}
```

This should be re-targeted for 8.5.
