# Issue 26151: Bug in comparison of integers and libgap integers

archive/issues_026151.json:
```json
{
    "body": "\n```\nsage: 1 > libgap(1)\nTrue\nsage: 1 < libgap(1)\nFalse\nsage: 1 == libgap(1)\nTrue\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26388\n\n",
    "created_at": "2018-10-03T09:49:05Z",
    "labels": [
        "interfaces",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Bug in comparison of integers and libgap integers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26151",
    "user": "SimonKing"
}
```

```
sage: 1 > libgap(1)
True
sage: 1 < libgap(1)
False
sage: 1 == libgap(1)
True
```


Issue created by migration from https://trac.sagemath.org/ticket/26388





---

archive/issue_comments_368610.json:
```json
{
    "body": "Changing keywords from \"\" to \"libgap\".",
    "created_at": "2018-10-03T09:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368610",
    "user": "SimonKing"
}
```

Changing keywords from "" to "libgap".



---

archive/issue_comments_368611.json:
```json
{
    "body": "comes from\n\n```\nsage: x=1\nsage: y=libgap(1)\nsage: x._cmp_(y)\n1\n```\n",
    "created_at": "2018-10-03T18:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368611",
    "user": "chapoton"
}
```

comes from

```
sage: x=1
sage: y=libgap(1)
sage: x._cmp_(y)
1
```




---

archive/issue_comments_368612.json:
```json
{
    "body": "`GapElement_Integer`'s `__gt__()` seems bugged too.\n\n\n```\nsage: x=1\nsage: y=libgap(1)\nsage: x > y\nTrue\nsage: y > x \nTrue\nsage: libgap(1).__gt__(1)\nTrue\n```\n",
    "created_at": "2018-10-04T13:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368612",
    "user": "vklein"
}
```

`GapElement_Integer`'s `__gt__()` seems bugged too.


```
sage: x=1
sage: y=libgap(1)
sage: x > y
True
sage: y > x 
True
sage: libgap(1).__gt__(1)
True
```




---

archive/issue_comments_368613.json:
```json
{
    "body": "Set assignee to vklein.",
    "created_at": "2018-10-04T14:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368613",
    "user": "vklein"
}
```

Set assignee to vklein.



---

archive/issue_comments_368614.json:
```json
{
    "body": "Remove assignee vklein.",
    "created_at": "2018-10-04T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368614",
    "user": "vklein"
}
```

Remove assignee vklein.



---

archive/issue_comments_368615.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-10-04T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368615",
    "user": "vklein"
}
```

New commits:



---

archive/issue_comments_368616.json:
```json
{
    "body": "This doesn't fix `x._cmp_(y)` but i am not sure where `_cmp_` is called, and it is not in this ticket's cases.",
    "created_at": "2018-10-04T15:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368616",
    "user": "vklein"
}
```

This doesn't fix `x._cmp_(y)` but i am not sure where `_cmp_` is called, and it is not in this ticket's cases.



---

archive/issue_comments_368617.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-04T15:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368617",
    "user": "vklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368618.json:
```json
{
    "body": "instead of\n\n```\nTEST #26388 is fixed::\n```\n\nwrite\n\n```\nCheck that :trac:`26388` is fixed::\n```\n",
    "created_at": "2018-10-04T18:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368618",
    "user": "chapoton"
}
```

instead of

```
TEST #26388 is fixed::
```

write

```
Check that :trac:`26388` is fixed::
```




---

archive/issue_comments_368619.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-05T08:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368619",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368620.json:
```json
{
    "body": "Done. Thanks.",
    "created_at": "2018-10-05T08:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368620",
    "user": "vklein"
}
```

Done. Thanks.



---

archive/issue_comments_368621.json:
```json
{
    "body": "Could you also include doctests for `1 >= libgap(1)` and `1 <= libgap(1)`?",
    "created_at": "2018-10-06T12:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368621",
    "user": "vdelecroix"
}
```

Could you also include doctests for `1 >= libgap(1)` and `1 <= libgap(1)`?



---

archive/issue_comments_368622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-08T09:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368622",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368623.json:
```json
{
    "body": "Sure ! Done.",
    "created_at": "2018-10-08T09:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368623",
    "user": "vklein"
}
```

Sure ! Done.



---

archive/issue_comments_368624.json:
```json
{
    "body": "Actually `x < y` (calling `x` comparison method) is not the same thing as `y > x` (calling `y` comparison method). If you want to be sure that libgap comparison is checked, the libgap integer should be first.\n\nIt is of course reasonable to check whether `x < y` is the same thing as `y > x` but that is somehow a different matter.",
    "created_at": "2018-10-08T09:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368624",
    "user": "vdelecroix"
}
```

Actually `x < y` (calling `x` comparison method) is not the same thing as `y > x` (calling `y` comparison method). If you want to be sure that libgap comparison is checked, the libgap integer should be first.

It is of course reasonable to check whether `x < y` is the same thing as `y > x` but that is somehow a different matter.



---

archive/issue_comments_368625.json:
```json
{
    "body": "Yes only the modified comparison operators are tested right now. Do you prefer having a more complete test suite between `libgap(1)` and `Integer(1)` ? (with `<`, `<=` and `==`).",
    "created_at": "2018-10-08T09:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368625",
    "user": "vklein"
}
```

Yes only the modified comparison operators are tested right now. Do you prefer having a more complete test suite between `libgap(1)` and `Integer(1)` ? (with `<`, `<=` and `==`).



---

archive/issue_comments_368626.json:
```json
{
    "body": "Make sense!",
    "created_at": "2018-10-08T09:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368626",
    "user": "vdelecroix"
}
```

Make sense!



---

archive/issue_comments_368627.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-08T09:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368627",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368628.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-20T11:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368628",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_368629.json:
```json
{
    "body": "This should be re-targeted for 8.5.",
    "created_at": "2018-10-28T14:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26151#issuecomment-368629",
    "user": "embray"
}
```

This should be re-targeted for 8.5.
