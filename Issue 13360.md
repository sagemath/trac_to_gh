# Issue 13360: Improve diagonal from matrix/matrix2.pyx

archive/issues_013360.json:
```json
{
    "body": "Assignee: jason, was\n\nKeywords: matrix, diagonal\n\nThe method diagonal could have a parameter so that it can return any diagonal parallel to the main diagonal.\n\n---\nApply only [attachment:trac_13564-diagonal.patch] to `devel/sage`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13564\n\n",
    "created_at": "2012-10-03T23:47:14Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Improve diagonal from matrix/matrix2.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13360",
    "user": "https://trac.sagemath.org/admin/accounts/users/r.gaia.cs"
}
```
Assignee: jason, was

Keywords: matrix, diagonal

The method diagonal could have a parameter so that it can return any diagonal parallel to the main diagonal.

---
Apply only [attachment:trac_13564-diagonal.patch] to `devel/sage`.

Issue created by migration from https://trac.sagemath.org/ticket/13564





---

archive/issue_comments_163933.json:
```json
{
    "body": "Attachment [diagonal.patch](tarball://root/attachments/some-uuid/ticket13564/diagonal.patch) by @mwhansen created at 2012-10-06 03:55:29",
    "created_at": "2012-10-06T03:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163933",
    "user": "https://github.com/mwhansen"
}
```

Attachment [diagonal.patch](tarball://root/attachments/some-uuid/ticket13564/diagonal.patch) by @mwhansen created at 2012-10-06 03:55:29



---

archive/issue_comments_163934.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2012-10-06T03:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163934",
    "user": "https://github.com/mwhansen"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_163935.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-06T03:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163935",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_163936.json:
```json
{
    "body": "Hello, this comment is with respect to the statement \"- Unknown: No author specified in the file from 2012-10-03\" in your patch. The authors are mentioned in the beginning of the file.\n\nAs such, I think typically no authors are added at the top unless some major change is effected. The author names and history is preserved in mercurial anyway. You can run `sage -hg blame filename` to see which revision modified which line of the file `filename`. The revision number can then be used to pinpoint the author.",
    "created_at": "2012-10-08T09:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163936",
    "user": "https://github.com/ppurka"
}
```

Hello, this comment is with respect to the statement "- Unknown: No author specified in the file from 2012-10-03" in your patch. The authors are mentioned in the beginning of the file.

As such, I think typically no authors are added at the top unless some major change is effected. The author names and history is preserved in mercurial anyway. You can run `sage -hg blame filename` to see which revision modified which line of the file `filename`. The revision number can then be used to pinpoint the author.



---

archive/issue_comments_163937.json:
```json
{
    "body": "Make correction sugested by ppurka.",
    "created_at": "2012-10-08T14:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163937",
    "user": "https://trac.sagemath.org/admin/accounts/users/r.gaia.cs"
}
```

Make correction sugested by ppurka.



---

archive/issue_comments_163938.json:
```json
{
    "body": "Attachment [trac_13564-diagonal.patch](tarball://root/attachments/some-uuid/ticket13564/trac_13564-diagonal.patch) by @ppurka created at 2012-10-10 13:21:04",
    "created_at": "2012-10-10T13:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163938",
    "user": "https://github.com/ppurka"
}
```

Attachment [trac_13564-diagonal.patch](tarball://root/attachments/some-uuid/ticket13564/trac_13564-diagonal.patch) by @ppurka created at 2012-10-10 13:21:04



---

archive/issue_comments_163939.json:
```json
{
    "body": "Have to force the patchbot :(\nPatchbot apply trac_13564-diagonal.patch",
    "created_at": "2012-10-12T08:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163939",
    "user": "https://github.com/ppurka"
}
```

Have to force the patchbot :(
Patchbot apply trac_13564-diagonal.patch



---

archive/issue_comments_163940.json:
```json
{
    "body": "Some comments:\n1. Should we be raising an error or simply returning an empty list if the `d` for the `d`-th diagonal is provided outside the range of the number of rows or columns? For instance, the empty matrix is returning an empty diagonal. Also, [Mathematica](http://www.wolframalpha.com/input/?i=Diagonal%5B%7B%7B1%2C+2%2C+3%2C+4%7D%2C+%7B5%2C+6%2C+7%2C+8%7D%2C+%7B9%2C+10%2C+11%2C+12%7D%7D%2C+4%5D) and Matlab silently return empty matrices. Octave raises an error. Numpy gives an empty matrix until `nrows()` or `ncols()` and then raises an error.\n2. If it seems more proper to raise an error, the error string could be written like the statements below. Note that `d` is always *less than* and never equal to `nrows()` or `ncols()`.\n\n```\nThe value `d` should be less than the number of columns in the matrix.\nThe value `-d` should be less than the number of rows of the matrix.\n```\n\nEDIT: The numpy error seems to stem from its refusal to create arrays which have one dimension negative. So, 0x1 array is ok, but not -1x1. The error is probably not from the diagonal code itself.",
    "created_at": "2012-10-12T15:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163940",
    "user": "https://github.com/ppurka"
}
```

Some comments:
1. Should we be raising an error or simply returning an empty list if the `d` for the `d`-th diagonal is provided outside the range of the number of rows or columns? For instance, the empty matrix is returning an empty diagonal. Also, [Mathematica](http://www.wolframalpha.com/input/?i=Diagonal%5B%7B%7B1%2C+2%2C+3%2C+4%7D%2C+%7B5%2C+6%2C+7%2C+8%7D%2C+%7B9%2C+10%2C+11%2C+12%7D%7D%2C+4%5D) and Matlab silently return empty matrices. Octave raises an error. Numpy gives an empty matrix until `nrows()` or `ncols()` and then raises an error.
2. If it seems more proper to raise an error, the error string could be written like the statements below. Note that `d` is always *less than* and never equal to `nrows()` or `ncols()`.

```
The value `d` should be less than the number of columns in the matrix.
The value `-d` should be less than the number of rows of the matrix.
```

EDIT: The numpy error seems to stem from its refusal to create arrays which have one dimension negative. So, 0x1 array is ok, but not -1x1. The error is probably not from the diagonal code itself.



---

archive/issue_comments_163941.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-02-10T22:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163941",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_163942.json:
```json
{
    "body": "I am changing this to \"needs_info\" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.",
    "created_at": "2013-02-10T22:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163942",
    "user": "https://github.com/KPanComputes"
}
```

I am changing this to "needs_info" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.



---

archive/issue_comments_163943.json:
```json
{
    "body": "Replying to [comment:6 knsam]:\n> I am changing this to \"needs_info\" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.\n\nThere is no user called \"sage-devel\". If you want to \"cc sage-devel\" then you need to put a post to the sage-devel mailing list. I was waiting for a reply from the author for clarification on the current implementation - thanks for setting this to needs_info. However, the author seems [inactive](http://trac.sagemath.org/sage_trac/search?noquickjump=1&ticket=on&wiki=on&q=r.gaia.cs) since last November.",
    "created_at": "2013-02-11T07:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13360#issuecomment-163943",
    "user": "https://github.com/ppurka"
}
```

Replying to [comment:6 knsam]:
> I am changing this to "needs_info" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.

There is no user called "sage-devel". If you want to "cc sage-devel" then you need to put a post to the sage-devel mailing list. I was waiting for a reply from the author for clarification on the current implementation - thanks for setting this to needs_info. However, the author seems [inactive](http://trac.sagemath.org/sage_trac/search?noquickjump=1&ticket=on&wiki=on&q=r.gaia.cs) since last November.



---

archive/issue_events_037738.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37738"
}
```



---

archive/issue_events_037739.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37739"
}
```



---

archive/issue_events_037740.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37740"
}
```



---

archive/issue_events_037741.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37741"
}
```



---

archive/issue_events_037742.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37742"
}
```



---

archive/issue_events_037743.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37743"
}
```



---

archive/issue_events_037744.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13360",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13360#event-37744"
}
```
