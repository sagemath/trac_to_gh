# Issue 13360: Improve diagonal from matrix/matrix2.pyx

Issue created by migration from https://trac.sagemath.org/ticket/13564

Original creator: r.gaia.cs

Original creation time: 2012-10-03 23:47:14

Assignee: jason, was

Keywords: matrix, diagonal

The method diagonal could have a parameter so that it can return any diagonal parallel to the main diagonal.


---

Attachment


---

Comment by mhansen created at 2012-10-06 03:55:29

Changing type from PLEASE CHANGE to enhancement.


---

Comment by mhansen created at 2012-10-06 03:55:29

Changing status from new to needs_review.


---

Comment by ppurka created at 2012-10-08 09:18:21

Hello, this comment is with respect to the statement "- Unknown: No author specified in the file from 2012-10-03" in your patch. The authors are mentioned in the beginning of the file.

As such, I think typically no authors are added at the top unless some major change is effected. The author names and history is preserved in mercurial anyway. You can run `sage -hg blame filename` to see which revision modified which line of the file `filename`. The revision number can then be used to pinpoint the author.


---

Comment by r.gaia.cs created at 2012-10-08 14:54:29

Make correction sugested by ppurka.


---

Attachment


---

Comment by ppurka created at 2012-10-12 08:00:54

Have to force the patchbot :(
Patchbot apply trac_13564-diagonal.patch


---

Comment by ppurka created at 2012-10-12 15:24:22

Some comments:
1. Should we be raising an error or simply returning an empty list if the `d` for the `d`-th diagonal is provided outside the range of the number of rows or columns? For instance, the empty matrix is returning an empty diagonal. Also, [Mathematica](http://www.wolframalpha.com/input/?i=Diagonal%5B%7B%7B1%2C+2%2C+3%2C+4%7D%2C+%7B5%2C+6%2C+7%2C+8%7D%2C+%7B9%2C+10%2C+11%2C+12%7D%7D%2C+4%5D) and Matlab silently return empty matrices. Octave raises an error. Numpy gives an empty matrix until `nrows()` or `ncols()` and then raises an error.
2. If it seems more proper to raise an error, the error string could be written like the statements below. Note that `d` is always _less than_ and never equal to `nrows()` or `ncols()`.

```
The value `d` should be less than the number of columns in the matrix.
The value `-d` should be less than the number of rows of the matrix.
```


EDIT: The numpy error seems to stem from its refusal to create arrays which have one dimension negative. So, 0x1 array is ok, but not -1x1. The error is probably not from the diagonal code itself.


---

Comment by knsam created at 2013-02-10 22:24:57

Changing status from needs_review to needs_info.


---

Comment by knsam created at 2013-02-10 22:24:57

I am changing this to "needs_info" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.


---

Comment by ppurka created at 2013-02-11 07:35:14

Replying to [comment:6 knsam]:
> I am changing this to "needs_info" for now as it seems to me that, there is still some design decisions to make. I am adding cc: sage-devel so that this could be discussed.
There is no user called "sage-devel". If you want to "cc sage-devel" then you need to put a post to the sage-devel mailing list. I was waiting for a reply from the author for clarification on the current implementation - thanks for setting this to needs_info. However, the author seems [inactive](http://trac.sagemath.org/sage_trac/search?noquickjump=1&ticket=on&wiki=on&q=r.gaia.cs) since last November.
