# Issue 20170: Add Magma interface for orders and ideals of number fields

archive/issues_020170.json:
```json
{
    "body": "Keywords: ideals, orders, magma\n\nThis ticket adds functionality to convert orders and ideals of number fields from Sage to Magma and back.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20407\n\n",
    "created_at": "2016-04-09T21:55:46Z",
    "labels": [
        "interfaces: optional",
        "major",
        "enhancement"
    ],
    "title": "Add Magma interface for orders and ideals of number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20170",
    "user": "mmasdeu"
}
```
Keywords: ideals, orders, magma

This ticket adds functionality to convert orders and ideals of number fields from Sage to Magma and back.

Issue created by migration from https://trac.sagemath.org/ticket/20407





---

archive/issue_comments_278147.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-04-09T21:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278147",
    "user": "mmasdeu"
}
```

New commits:



---

archive/issue_comments_278148.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-09T21:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278148",
    "user": "mmasdeu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_278149.json:
```json
{
    "body": "There is a problem with the copy of the script directory on the server\n\n```\nsage: magma=Magma(...) # custom server config\nsage: magma('1')\nTraceback (most recent call last):\n...\nTypeError: Can't open package spec file ... for reading (No such file or directory)\n```\n\n\nThe solution might be to create the directory remotely if it does not exist. Something like\n\n```\nos.system(\"ssh SERVE 'mkdir -p THE_GOOD_DIR'\")\n```\n",
    "created_at": "2016-04-28T23:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278149",
    "user": "vdelecroix"
}
```

There is a problem with the copy of the script directory on the server

```
sage: magma=Magma(...) # custom server config
sage: magma('1')
Traceback (most recent call last):
...
TypeError: Can't open package spec file ... for reading (No such file or directory)
```


The solution might be to create the directory remotely if it does not exist. Something like

```
os.system("ssh SERVE 'mkdir -p THE_GOOD_DIR'")
```




---

archive/issue_comments_278150.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-28T23:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278150",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278151.json:
```json
{
    "body": "This ticket is independent of #20388... It won't work unless Magma is installed locally. Once #20388 is merged this should be rebased, I guess...",
    "created_at": "2016-04-29T11:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278151",
    "user": "mmasdeu"
}
```

This ticket is independent of #20388... It won't work unless Magma is installed locally. Once #20388 is merged this should be rebased, I guess...



---

archive/issue_comments_278152.json:
```json
{
    "body": "Indeed, #20388 is merged in the last beta and I was able to use magma.\n\nHowever\n\n```\nsage: K.<a> = NumberField(x^3 + 2)\nsage: I = K.ideal(5)\nsage: I._magma_init_(magma)\nTraceback (most recent call last):\n...\nTypeError: Error evaluating Magma code.\nIN:_sage_[3]:=SageCreateWithNames(PolynomialRing(_sage_ref1),[\"x\"]);\nOUT:\nIn file \"/home/delecroi/tmp/data//sage/basic.m\", line 104, column 6:\n>>   if IsPrimeField(X) then\n        ^\nRuntime error: Undefined reference 'IsPrimeField' in package \"/home/delecroi/tmp/data//sage/basic.m\"\n```\n",
    "created_at": "2016-04-29T17:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278152",
    "user": "vdelecroix"
}
```

Indeed, #20388 is merged in the last beta and I was able to use magma.

However

```
sage: K.<a> = NumberField(x^3 + 2)
sage: I = K.ideal(5)
sage: I._magma_init_(magma)
Traceback (most recent call last):
...
TypeError: Error evaluating Magma code.
IN:_sage_[3]:=SageCreateWithNames(PolynomialRing(_sage_ref1),["x"]);
OUT:
In file "/home/delecroi/tmp/data//sage/basic.m", line 104, column 6:
>>   if IsPrimeField(X) then
        ^
Runtime error: Undefined reference 'IsPrimeField' in package "/home/delecroi/tmp/data//sage/basic.m"
```




---

archive/issue_comments_278153.json:
```json
{
    "body": "ok, for me, with m4gm4 version Magma V2.22-3",
    "created_at": "2018-06-30T06:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278153",
    "user": "chapoton"
}
```

ok, for me, with m4gm4 version Magma V2.22-3



---

archive/issue_comments_278154.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-06-30T06:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278154",
    "user": "chapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_278155.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-07-03T23:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20170#issuecomment-278155",
    "user": "vbraun"
}
```

Resolution: fixed
