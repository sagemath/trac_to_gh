# Issue 25137: Fix cryptominisat build on Cygwin

archive/issues_025137.json:
```json
{
    "body": "CC:  @slel @tscrim @jm58660 @embray @jdemeyer @saraedum tmonteil @videlec @orlitzky @novoselt @kiwifb @dimpase\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25374\n\n",
    "created_at": "2018-05-16T14:55:09Z",
    "labels": [
        "porting: Cygwin",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix cryptominisat build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25137",
    "user": "@embray"
}
```
CC:  @slel @tscrim @jm58660 @embray @jdemeyer @saraedum tmonteil @videlec @orlitzky @novoselt @kiwifb @dimpase



Issue created by migration from https://trac.sagemath.org/ticket/25374





---

archive/issue_comments_353790.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-16T14:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353790",
    "user": "@embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_353791.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-05-16T14:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353791",
    "user": "@embray"
}
```

New commits:



---

archive/issue_comments_353792.json:
```json
{
    "body": "Turns out there's nothing to report upstream, because the problems with Cygwin are already fixed there.  However, the Cygwin fixes are kind of incidental to other changes.  Until/unless we upgrade this package in Sage, these specifically targeted fixes are simpler to patch in than the larger changes in upstream.",
    "created_at": "2018-05-16T15:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353792",
    "user": "@embray"
}
```

Turns out there's nothing to report upstream, because the problems with Cygwin are already fixed there.  However, the Cygwin fixes are kind of incidental to other changes.  Until/unless we upgrade this package in Sage, these specifically targeted fixes are simpler to patch in than the larger changes in upstream.



---

archive/issue_comments_353793.json:
```json
{
    "body": "I'm confused. Doesn't this add `-g` twice?",
    "created_at": "2018-05-26T17:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353793",
    "user": "@saraedum"
}
```

I'm confused. Doesn't this add `-g` twice?



---

archive/issue_comments_353794.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-05-26T17:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353794",
    "user": "@saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_353795.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-05-28T14:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353795",
    "user": "@embray"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_353796.json:
```json
{
    "body": "Yes, I had intended to remove the `-g` from those earlier lines.",
    "created_at": "2018-05-28T14:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353796",
    "user": "@embray"
}
```

Yes, I had intended to remove the `-g` from those earlier lines.



---

archive/issue_comments_353797.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-28T17:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353797",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353798.json:
```json
{
    "body": "Please see how it looks like with the new release #25480. Do you want to put this ticket as a dependency?",
    "created_at": "2018-05-31T10:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353798",
    "user": "@videlec"
}
```

Please see how it looks like with the new release #25480. Do you want to put this ticket as a dependency?



---

archive/issue_comments_353799.json:
```json
{
    "body": "This might be mostly superseded by #25480, except maybe for the `spkg-install` updates.\nI'll test and see...",
    "created_at": "2018-05-31T12:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353799",
    "user": "@embray"
}
```

This might be mostly superseded by #25480, except maybe for the `spkg-install` updates.
I'll test and see...



---

archive/issue_comments_353800.json:
```json
{
    "body": "Any update on this?",
    "created_at": "2018-07-04T17:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353800",
    "user": "@saraedum"
}
```

Any update on this?



---

archive/issue_comments_353801.json:
```json
{
    "body": "I believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353801",
    "user": "@embray"
}
```

I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_comments_353802.json:
```json
{
    "body": "Retargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353802",
    "user": "@embray"
}
```

Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_comments_353803.json:
```json
{
    "body": "What's the status of this now after #25480?",
    "created_at": "2019-01-24T09:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353803",
    "user": "@jdemeyer"
}
```

What's the status of this now after #25480?



---

archive/issue_comments_353804.json:
```json
{
    "body": "I'll have to give it another try. Maybe this is fixed by #25480? I haven't checked.",
    "created_at": "2019-03-07T15:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353804",
    "user": "@embray"
}
```

I'll have to give it another try. Maybe this is fixed by #25480? I haven't checked.



---

archive/issue_comments_353805.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-07T15:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353805",
    "user": "@embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_353806.json:
```json
{
    "body": "Set assignee to @embray.",
    "created_at": "2019-03-07T15:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353806",
    "user": "@embray"
}
```

Set assignee to @embray.



---

archive/issue_comments_353807.json:
```json
{
    "body": "Moving all my in-progress tickets to 8.8 milestone.",
    "created_at": "2019-03-25T10:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353807",
    "user": "@embray"
}
```

Moving all my in-progress tickets to 8.8 milestone.



---

archive/issue_comments_353808.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353808",
    "user": "@embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_353809.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353809",
    "user": "@embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_353810.json:
```json
{
    "body": "Building cryptominisat is still broken with 9.1.rc2 (https://github.com/mkoeppe/sage/runs/641394520)\n\n```\n-- Found python interpreter, libs and header files\n-- Building python interface\nCMake Error at python/CMakeLists.txt:44 (string):\n  string sub-command REPLACE requires at least four arguments.\n\n\n-- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/build=/usr/src/debug/python37-3.7.7-1 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/src/Python-3.7.7=/usr/src/debug/python37-3.7.7-1 -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/build=/usr/src/debug/python37-3.7.7-1 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/src/Python-3.7.7=/usr/src/debug/python37-3.7.7-1'\n-- Python LDFLAGS: '-lcrypt -lintl -ldl'\n-- Python LINKFORSHARED flags: ''\n-- Python module will be installed to : '/cygdrive/d/a/sage/sage/local'\n-- Configuring incomplete, errors occurred!\nSee also \"/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeOutput.log\".\nSee also \"/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeError.log\".\n********************************************************************************\nError configuring cryptominisat-5.6.8 with cmake\nSee the file\n    /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeOutput.log\nfor details.\n********************************************************************************\n```\n",
    "created_at": "2020-05-04T02:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353810",
    "user": "@mkoeppe"
}
```

Building cryptominisat is still broken with 9.1.rc2 (https://github.com/mkoeppe/sage/runs/641394520)

```
-- Found python interpreter, libs and header files
-- Building python interface
CMake Error at python/CMakeLists.txt:44 (string):
  string sub-command REPLACE requires at least four arguments.


-- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/build=/usr/src/debug/python37-3.7.7-1 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/src/Python-3.7.7=/usr/src/debug/python37-3.7.7-1 -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/build=/usr/src/debug/python37-3.7.7-1 -fdebug-prefix-map=/cygdrive/d/cyg_pub/devel/python/python37/python37-3.7.7-1.x86_64/src/Python-3.7.7=/usr/src/debug/python37-3.7.7-1'
-- Python LDFLAGS: '-lcrypt -lintl -ldl'
-- Python LINKFORSHARED flags: ''
-- Python module will be installed to : '/cygdrive/d/a/sage/sage/local'
-- Configuring incomplete, errors occurred!
See also "/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeOutput.log".
See also "/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeError.log".
********************************************************************************
Error configuring cryptominisat-5.6.8 with cmake
See the file
    /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/cryptominisat-5.6.8/src/CMakeFiles/CMakeOutput.log
for details.
********************************************************************************
```




---

archive/issue_comments_353811.json:
```json
{
    "body": "There's a new release of CryptoMiniSat. The issue here\nwas said to be fixed upstream so it might be enough\nto upgrade to CryptoMiniSat 5.7.1.",
    "created_at": "2020-05-04T09:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353811",
    "user": "@slel"
}
```

There's a new release of CryptoMiniSat. The issue here
was said to be fixed upstream so it might be enough
to upgrade to CryptoMiniSat 5.7.1.



---

archive/issue_comments_353812.json:
```json
{
    "body": "Replying to [comment:21 slelievre]:\n> There's a new release of CryptoMiniSat. The issue here\n> was said to be fixed upstream so it might be enough\n> to upgrade to CryptoMiniSat 5.7.1.\nOK who wants to work on it?",
    "created_at": "2020-05-04T15:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353812",
    "user": "@mkoeppe"
}
```

Replying to [comment:21 slelievre]:
> There's a new release of CryptoMiniSat. The issue here
> was said to be fixed upstream so it might be enough
> to upgrade to CryptoMiniSat 5.7.1.
OK who wants to work on it?



---

archive/issue_comments_353813.json:
```json
{
    "body": "CryptoMiniSat 5.8.0 was released on 2020-07-06.",
    "created_at": "2020-07-14T14:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353813",
    "user": "@slel"
}
```

CryptoMiniSat 5.8.0 was released on 2020-07-06.



---

archive/issue_comments_353814.json:
```json
{
    "body": "Instructions for doing the upgrade:\n\n1) Add `upstream_url` field to `checksums.ini` https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1\n\n2) Run `./sage -package update cryptominisat 5.8.0`\n\n3) Remove patches\n\n4) Try build on local machine\n\n5) Push to the ticket",
    "created_at": "2020-07-14T16:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353814",
    "user": "@mkoeppe"
}
```

Instructions for doing the upgrade:

1) Add `upstream_url` field to `checksums.ini` https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1

2) Run `./sage -package update cryptominisat 5.8.0`

3) Remove patches

4) Try build on local machine

5) Push to the ticket



---

archive/issue_comments_353815.json:
```json
{
    "body": "The needed URL is\n\n```\nupstream_url=https://github.com/msoos/cryptominisat/archive/VERSION.tar.gz\n```\n",
    "created_at": "2020-07-15T19:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353815",
    "user": "@novoselt"
}
```

The needed URL is

```
upstream_url=https://github.com/msoos/cryptominisat/archive/VERSION.tar.gz
```




---

archive/issue_comments_353816.json:
```json
{
    "body": "Forgot about this and opened #30264. I'm setting it to duplicate.",
    "created_at": "2020-08-02T14:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353816",
    "user": "@slel"
}
```

Forgot about this and opened #30264. I'm setting it to duplicate.



---

archive/issue_comments_353817.json:
```json
{
    "body": "Would someone like to update the branch please?",
    "created_at": "2020-08-12T18:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353817",
    "user": "@mkoeppe"
}
```

Would someone like to update the branch please?



---

archive/issue_comments_353818.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, cryptominisat\".",
    "created_at": "2020-08-13T13:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353818",
    "user": "@slel"
}
```

Changing keywords from "" to "upgrade, cryptominisat".



---

archive/issue_comments_353819.json:
```json
{
    "body": "With this branch, `make cryptominisat` and `sage -i cryptominisat` succeed.\n\nThey used to fail with Sage 9.x for the previous version of the package.\n\nTested on Debian 10 buster and macOS 10.14.6 Mojave. Cygwin testing needed.\n\nNew doctest failure (both on Debian and macOS):\n\n```bash\n$ OPT='--optional=build,cryptominisat,dochtml,memlimit,sage'\n$ ./sage -t --long $OPT --random-seed=0 src/sage/sat/boolean_polynomials.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2020-08-13-14-39-55-b4ff37bc.\nGit branch: develop\nUsing --optional=build,cryptominisat,dochtml,memlimit,sage\nDoctesting 1 file.\nsage -t --long --random-seed=0 src/sage/sat/boolean_polynomials.py\n**********************************************************************\nFile \"src/sage/sat/boolean_polynomials.py\", line 131, in sage.sat.boolean_polynomials.solve\nFailed example:\n    sr = sage.crypto.mq.SR(1, 4, 4, 8, allow_zero_inversions = True)                  # optional - cryptominisat, long time\nExpected nothing\nGot:\n    c [g 0] truth-find prop checks  : 156\n    c [g 0] -> of which prop        : 22.44 %\n    c [g 0] -> of which confl       :  0.64 %\n    c [g 0] elim called             : 54\n    c [g 0] ---> which lead to prop : 22.22 %\n    c [g 0] ---> which lead to confl:  0.00 %\n    c [g 0] size: 12    x 24\n    c [g 1] truth-find prop checks  : 178\n    c [g 1] -> of which prop        : 51.12 %\n    c [g 1] -> of which confl       :  0.00 %\n    c [g 1] elim called             : 150\n    c [g 1] ---> which lead to prop : 11.33 %\n    c [g 1] ---> which lead to confl:  0.00 %\n    c [g 1] size: 12    x 24\n**********************************************************************\n1 item had failures:\n   1 of  40 in sage.sat.boolean_polynomials.solve\n    [45 tests, 1 failure, 80.53 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 80.6 seconds\n    cpu time: 82.1 seconds\n    cumulative wall time: 80.5 seconds\n```\n\n----\nNew commits:",
    "created_at": "2020-08-13T13:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353819",
    "user": "@slel"
}
```

With this branch, `make cryptominisat` and `sage -i cryptominisat` succeed.

They used to fail with Sage 9.x for the previous version of the package.

Tested on Debian 10 buster and macOS 10.14.6 Mojave. Cygwin testing needed.

New doctest failure (both on Debian and macOS):

```bash
$ OPT='--optional=build,cryptominisat,dochtml,memlimit,sage'
$ ./sage -t --long $OPT --random-seed=0 src/sage/sat/boolean_polynomials.py
too many failed tests, not using stored timings
Running doctests with ID 2020-08-13-14-39-55-b4ff37bc.
Git branch: develop
Using --optional=build,cryptominisat,dochtml,memlimit,sage
Doctesting 1 file.
sage -t --long --random-seed=0 src/sage/sat/boolean_polynomials.py
**********************************************************************
File "src/sage/sat/boolean_polynomials.py", line 131, in sage.sat.boolean_polynomials.solve
Failed example:
    sr = sage.crypto.mq.SR(1, 4, 4, 8, allow_zero_inversions = True)                  # optional - cryptominisat, long time
Expected nothing
Got:
    c [g 0] truth-find prop checks  : 156
    c [g 0] -> of which prop        : 22.44 %
    c [g 0] -> of which confl       :  0.64 %
    c [g 0] elim called             : 54
    c [g 0] ---> which lead to prop : 22.22 %
    c [g 0] ---> which lead to confl:  0.00 %
    c [g 0] size: 12    x 24
    c [g 1] truth-find prop checks  : 178
    c [g 1] -> of which prop        : 51.12 %
    c [g 1] -> of which confl       :  0.00 %
    c [g 1] elim called             : 150
    c [g 1] ---> which lead to prop : 11.33 %
    c [g 1] ---> which lead to confl:  0.00 %
    c [g 1] size: 12    x 24
**********************************************************************
1 item had failures:
   1 of  40 in sage.sat.boolean_polynomials.solve
    [45 tests, 1 failure, 80.53 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/sat/boolean_polynomials.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 80.6 seconds
    cpu time: 82.1 seconds
    cumulative wall time: 80.5 seconds
```

----
New commits:



---

archive/issue_comments_353820.json:
```json
{
    "body": "For broader testing, push a tag to github...",
    "created_at": "2020-08-13T15:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353820",
    "user": "@mkoeppe"
}
```

For broader testing, push a tag to github...



---

archive/issue_comments_353821.json:
```json
{
    "body": "The extra verbosity needs fixing before wider testing. Help needed.",
    "created_at": "2020-08-21T17:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353821",
    "user": "@slel"
}
```

The extra verbosity needs fixing before wider testing. Help needed.



---

archive/issue_comments_353822.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-31T18:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353822",
    "user": "@slel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_353823.json:
```json
{
    "body": "Or maybe it only happens on my machine?",
    "created_at": "2020-08-31T18:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353823",
    "user": "@slel"
}
```

Or maybe it only happens on my machine?



---

archive/issue_comments_353824.json:
```json
{
    "body": "I had a look some time ago, i also had such issues, so it is not only on your machine. If i understood correctly (to be checked), it is possible that the verbosity happens when a cryptominisat instance is run while another is still running, as if we got the log of the previous instance (?). You could inspect by adding some sleep between doctests, just to check.",
    "created_at": "2020-09-01T18:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353824",
    "user": "tmonteil"
}
```

I had a look some time ago, i also had such issues, so it is not only on your machine. If i understood correctly (to be checked), it is possible that the verbosity happens when a cryptominisat instance is run while another is still running, as if we got the log of the previous instance (?). You could inspect by adding some sleep between doctests, just to check.



---

archive/issue_comments_353825.json:
```json
{
    "body": "So, i expect the doctest to fail.",
    "created_at": "2020-09-01T18:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353825",
    "user": "tmonteil"
}
```

So, i expect the doctest to fail.



---

archive/issue_comments_353826.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-01T18:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353826",
    "user": "tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_353827.json:
```json
{
    "body": "Currently we build cryptominisat including its Python bindings (`pycryptosat`).\nThis is slightly problematic for the plan to separate non-Python packages (`SAGE_LOCAL`) from Python packages (`SAGE_VENV`), see #29013 (and #30534 for `pynac`).\n\nBut there is also https://pypi.org/project/pycryptosat/, which can be installed separately.  Its release history seems to be out of sync with cryptominisat.",
    "created_at": "2020-11-14T02:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353827",
    "user": "@mkoeppe"
}
```

Currently we build cryptominisat including its Python bindings (`pycryptosat`).
This is slightly problematic for the plan to separate non-Python packages (`SAGE_LOCAL`) from Python packages (`SAGE_VENV`), see #29013 (and #30534 for `pynac`).

But there is also https://pypi.org/project/pycryptosat/, which can be installed separately.  Its release history seems to be out of sync with cryptominisat.



---

archive/issue_comments_353828.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353828",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_353829.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353829",
    "user": "@mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_353830.json:
```json
{
    "body": "I forgot the existence of this ticket and created #32545 to get a faster cryptominisat, here is a branch that fixes the issue: i removed the `s_verbosity=1` option of some doctest, since it produces noise to another unrelated doctest that appears later in the same file (which confirms [comment:36 comment:36]).\n\nI could not test on Cygwin.",
    "created_at": "2021-09-22T10:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353830",
    "user": "tmonteil"
}
```

I forgot the existence of this ticket and created #32545 to get a faster cryptominisat, here is a branch that fixes the issue: i removed the `s_verbosity=1` option of some doctest, since it produces noise to another unrelated doctest that appears later in the same file (which confirms [comment:36 comment:36]).

I could not test on Cygwin.



---

archive/issue_comments_353831.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-09-22T10:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353831",
    "user": "tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_353832.json:
```json
{
    "body": "It would be good to address comment:39",
    "created_at": "2021-09-22T15:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353832",
    "user": "@mkoeppe"
}
```

It would be good to address comment:39



---

archive/issue_comments_353833.json:
```json
{
    "body": "Replying to [comment:43 mkoeppe]:\n> It would be good to address comment:39\n\nI am not sure i understand the rationale in favor of such a move:\n\n- installing `pycryptosat` from `pypi` still requires that we ship `cryptominisat` binaries, so we just add one dependency without removing work on our side (worse, i guess we will have to ensure that the `pycryptosat` shipped by the author in the tarball is *not* installed)\n\n- relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me\n\n- if `pycryptosat` shipped by `pypi` stops being updated, then we are locked to update `cryptominisat`\n\nOr do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?",
    "created_at": "2021-09-22T19:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353833",
    "user": "tmonteil"
}
```

Replying to [comment:43 mkoeppe]:
> It would be good to address comment:39

I am not sure i understand the rationale in favor of such a move:

- installing `pycryptosat` from `pypi` still requires that we ship `cryptominisat` binaries, so we just add one dependency without removing work on our side (worse, i guess we will have to ensure that the `pycryptosat` shipped by the author in the tarball is *not* installed)

- relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me

- if `pycryptosat` shipped by `pypi` stops being updated, then we are locked to update `cryptominisat`

Or do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?



---

archive/issue_comments_353834.json:
```json
{
    "body": "Replying to [comment:44 tmonteil]:\n> Or do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?\n\nYes, this part at least would be a useful step, as the package will then work with the new separation of SAGE_LOCAL and SAGE_VENV (see for example #32442)",
    "created_at": "2021-09-22T19:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353834",
    "user": "@mkoeppe"
}
```

Replying to [comment:44 tmonteil]:
> Or do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?

Yes, this part at least would be a useful step, as the package will then work with the new separation of SAGE_LOCAL and SAGE_VENV (see for example #32442)



---

archive/issue_comments_353835.json:
```json
{
    "body": "Replying to [comment:44 tmonteil]:\n> - relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me\n\nYes, this is an unfortunate situation, perhaps we should contact the maintainers of the packages to help clarify it...",
    "created_at": "2021-09-22T19:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353835",
    "user": "@mkoeppe"
}
```

Replying to [comment:44 tmonteil]:
> - relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me

Yes, this is an unfortunate situation, perhaps we should contact the maintainers of the packages to help clarify it...



---

archive/issue_comments_353836.json:
```json
{
    "body": "Replying to [comment:45 mkoeppe]:\n> Replying to [comment:44 tmonteil]:\n> > Or do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?\n> \n> Yes, this part at least would be a useful step, as the package will then work with the new separation of SAGE_LOCAL and SAGE_VENV (see for example #32442)\n\nOK. It seems nontrivial since the `python/README.rst` in the tarball states:\n\n\n```\nThe pycryptosat python package compiles while compiling CryptoMiniSat. It\ncannotbe compiled on its own, it must be compiled at the same time as\nCryptoMiniSat.\n```\n\n\nSo, perhaps the way is to keep a single spkg, compile the whole, and then install the various stuff according to the respective variables SAGE_LOCAL and SAGE_VENV ?",
    "created_at": "2021-09-22T21:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353836",
    "user": "tmonteil"
}
```

Replying to [comment:45 mkoeppe]:
> Replying to [comment:44 tmonteil]:
> > Or do you mean that we should make 2 spkg with different names (`cryptominisat` and `pycryptosat`) with the same upstream tarball, one with `sdh_make` and one with `sdh_pip_install` ?
> 
> Yes, this part at least would be a useful step, as the package will then work with the new separation of SAGE_LOCAL and SAGE_VENV (see for example #32442)

OK. It seems nontrivial since the `python/README.rst` in the tarball states:


```
The pycryptosat python package compiles while compiling CryptoMiniSat. It
cannotbe compiled on its own, it must be compiled at the same time as
CryptoMiniSat.
```


So, perhaps the way is to keep a single spkg, compile the whole, and then install the various stuff according to the respective variables SAGE_LOCAL and SAGE_VENV ?



---

archive/issue_comments_353837.json:
```json
{
    "body": "Replying to [comment:47 tmonteil]:\n> It seems nontrivial since the `python/README.rst` in the tarball states:\n> \n> {{{\n> The pycryptosat python package compiles while compiling CryptoMiniSat. It\n> cannotbe compiled on its own, it must be compiled at the same time as\n> CryptoMiniSat.\n> }}}\n> \n> So, perhaps the way is to keep a single spkg, compile the whole, and then install the various stuff according to the respective variables SAGE_LOCAL and SAGE_VENV ?\n\nThat wouldn't work so well because of the way how we keep installation records for packages.\n\nI think we should try to split it into two packages and just build, but not install, the library a second time.",
    "created_at": "2021-09-23T03:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353837",
    "user": "@mkoeppe"
}
```

Replying to [comment:47 tmonteil]:
> It seems nontrivial since the `python/README.rst` in the tarball states:
> 
> {{{
> The pycryptosat python package compiles while compiling CryptoMiniSat. It
> cannotbe compiled on its own, it must be compiled at the same time as
> CryptoMiniSat.
> }}}
> 
> So, perhaps the way is to keep a single spkg, compile the whole, and then install the various stuff according to the respective variables SAGE_LOCAL and SAGE_VENV ?

That wouldn't work so well because of the way how we keep installation records for packages.

I think we should try to split it into two packages and just build, but not install, the library a second time.



---

archive/issue_comments_353838.json:
```json
{
    "body": "This fails for me on Cygwin. For details, see:\n\n- https://www.math.u-psud.fr/~lelievre/t/slel-25374.tar.gz",
    "created_at": "2021-09-23T14:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353838",
    "user": "@slel"
}
```

This fails for me on Cygwin. For details, see:

- https://www.math.u-psud.fr/~lelievre/t/slel-25374.tar.gz



---

archive/issue_comments_353839.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-10-01T03:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353839",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_353840.json:
```json
{
    "body": "It seems pycryptosat might land on PyPI soon, see\n\n- https://github.com/msoos/cryptominisat/issues/663#issuecomment-949415672",
    "created_at": "2021-10-22T14:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353840",
    "user": "@slel"
}
```

It seems pycryptosat might land on PyPI soon, see

- https://github.com/msoos/cryptominisat/issues/663#issuecomment-949415672



---

archive/issue_comments_353841.json:
```json
{
    "body": "In fact it has been there for a while:\n\n- https://pypi.org/project/pycryptosat/\n\nbut probably we are waiting on a new release?",
    "created_at": "2021-11-08T12:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353841",
    "user": "@slel"
}
```

In fact it has been there for a while:

- https://pypi.org/project/pycryptosat/

but probably we are waiting on a new release?



---

archive/issue_comments_353842.json:
```json
{
    "body": "See also\n\n- #33162: Fix installation of cryptominisat and pycryptosat",
    "created_at": "2022-01-13T20:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353842",
    "user": "@slel"
}
```

See also

- #33162: Fix installation of cryptominisat and pycryptosat



---

archive/issue_comments_353843.json:
```json
{
    "body": "Changing component from porting: Cygwin to packages: optional.",
    "created_at": "2022-01-14T23:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353843",
    "user": "@mkoeppe"
}
```

Changing component from porting: Cygwin to packages: optional.



---

archive/issue_comments_353844.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2022-01-14T23:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353844",
    "user": "@mkoeppe"
}
```

Changing priority from minor to major.



---

archive/issue_comments_353845.json:
```json
{
    "body": "Replying to [comment:46 mkoeppe]:\n> Replying to [comment:44 tmonteil]:\n> > - relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me\n> \n> Yes, this is an unfortunate situation, perhaps we should contact the maintainers of the packages to help clarify it...\n\nPyPI now lists msoos as the maintainer.",
    "created_at": "2022-01-16T10:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353845",
    "user": "@dimpase"
}
```

Replying to [comment:46 mkoeppe]:
> Replying to [comment:44 tmonteil]:
> > - relying on `pypi` + `pierrev` (the anonymous maintainer of `pycryptosat` in `pypi`) adds 2 intermediates, for which the web of trust is not very clear to me
> 
> Yes, this is an unfortunate situation, perhaps we should contact the maintainers of the packages to help clarify it...

PyPI now lists msoos as the maintainer.



---

archive/issue_comments_353846.json:
```json
{
    "body": "needs testing on cygwin in partiular\n----\nNew commits:",
    "created_at": "2022-01-16T13:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353846",
    "user": "@dimpase"
}
```

needs testing on cygwin in partiular
----
New commits:



---

archive/issue_comments_353847.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-01-16T13:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353847",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_353848.json:
```json
{
    "body": "running tests on https://github.com/sagemath/sagetrac-mirror/actions/runs/1704383865",
    "created_at": "2022-01-16T13:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353848",
    "user": "@dimpase"
}
```

running tests on https://github.com/sagemath/sagetrac-mirror/actions/runs/1704383865



---

archive/issue_comments_353849.json:
```json
{
    "body": "Note that you need to run the workflows `tox-optional` and `cygwin-standard` to test it...",
    "created_at": "2022-01-16T18:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353849",
    "user": "@mkoeppe"
}
```

Note that you need to run the workflows `tox-optional` and `cygwin-standard` to test it...



---

archive/issue_comments_353850.json:
```json
{
    "body": "Replying to [comment:60 dimpase]:\n> running tests on https://github.com/sagemath/sagetrac-mirror/actions/runs/1704383865\n\nmany (all?) runs failed with \n\n```\n  [sagemath_doc_html-none]   make[3]: *** [Makefile:37: doc-inventory-reference] Error 2\n  [sagemath_doc_html-none]   make[3]: Target 'doc-html' not remade because of errors.\n```\n\n(I cancelled after all docker ubuntu/debian runs failed)",
    "created_at": "2022-01-17T09:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353850",
    "user": "@dimpase"
}
```

Replying to [comment:60 dimpase]:
> running tests on https://github.com/sagemath/sagetrac-mirror/actions/runs/1704383865

many (all?) runs failed with 

```
  [sagemath_doc_html-none]   make[3]: *** [Makefile:37: doc-inventory-reference] Error 2
  [sagemath_doc_html-none]   make[3]: Target 'doc-html' not remade because of errors.
```

(I cancelled after all docker ubuntu/debian runs failed)



---

archive/issue_comments_353851.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-01-17T19:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353851",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-01-17T19:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353852",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353853.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-01-22T22:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353853",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353854.json:
```json
{
    "body": "Is there something missing to get this ticket approved ?",
    "created_at": "2022-06-17T21:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353854",
    "user": "tmonteil"
}
```

Is there something missing to get this ticket approved ?



---

archive/issue_comments_353855.json:
```json
{
    "body": "It needs to be tested on Cygwin",
    "created_at": "2022-06-17T21:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353855",
    "user": "@mkoeppe"
}
```

It needs to be tested on Cygwin



---

archive/issue_comments_353856.json:
```json
{
    "body": "Replying to [comment:69 mkoeppe]:\n> It needs to be tested on Cygwin\n\nIsn't it unmaintained ?",
    "created_at": "2022-06-17T22:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353856",
    "user": "tmonteil"
}
```

Replying to [comment:69 mkoeppe]:
> It needs to be tested on Cygwin

Isn't it unmaintained ?



---

archive/issue_comments_353857.json:
```json
{
    "body": "Fine with me to just declare that this optional package is not supported on Cygwin.\nBut the ticket title promises something about Cygwin, so at least that should be changed.",
    "created_at": "2022-06-17T22:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353857",
    "user": "@mkoeppe"
}
```

Fine with me to just declare that this optional package is not supported on Cygwin.
But the ticket title promises something about Cygwin, so at least that should be changed.



---

archive/issue_comments_353858.json:
```json
{
    "body": "Replying to [comment:69 mkoeppe]:\n> It needs to be tested on Cygwin\n\nCan it be tested with GH Actions?",
    "created_at": "2022-06-18T07:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353858",
    "user": "@dimpase"
}
```

Replying to [comment:69 mkoeppe]:
> It needs to be tested on Cygwin

Can it be tested with GH Actions?



---

archive/issue_comments_353859.json:
```json
{
    "body": "I can try to setup a Cygwin build and test on Monday when I get to my office since my computer there has Windows 11.",
    "created_at": "2022-06-18T09:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353859",
    "user": "@tscrim"
}
```

I can try to setup a Cygwin build and test on Monday when I get to my office since my computer there has Windows 11.



---

archive/issue_comments_353860.json:
```json
{
    "body": "Attachment [cryptominisat-5.8.0.log](tarball://root/attachments/some-uuid/ticket25374/cryptominisat-5.8.0.log) by @tscrim created at 2022-06-22 04:45:19",
    "created_at": "2022-06-22T04:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353860",
    "user": "@tscrim"
}
```

Attachment [cryptominisat-5.8.0.log](tarball://root/attachments/some-uuid/ticket25374/cryptominisat-5.8.0.log) by @tscrim created at 2022-06-22 04:45:19



---

archive/issue_comments_353861.json:
```json
{
    "body": "I was not able to build it following the installation instructions for Cygwin, building Sage from source, and running `sage -i cryptominisat`. I have attached the log. Let me know what other data you might need.",
    "created_at": "2022-06-22T04:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353861",
    "user": "@tscrim"
}
```

I was not able to build it following the installation instructions for Cygwin, building Sage from source, and running `sage -i cryptominisat`. I have attached the log. Let me know what other data you might need.



---

archive/issue_comments_353862.json:
```json
{
    "body": "What version of cmake was used?",
    "created_at": "2022-06-22T04:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353862",
    "user": "@kiwifb"
}
```

What version of cmake was used?



---

archive/issue_comments_353863.json:
```json
{
    "body": "Replying to [comment:75 fbissey]:\n> What version of cmake was used?\n\n\n```\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ cmake --version\ncmake version 3.20.0\n\nCMake suite maintained and supported by Kitware (kitware.com/cmake).\n```\n",
    "created_at": "2022-06-22T04:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353863",
    "user": "@tscrim"
}
```

Replying to [comment:75 fbissey]:
> What version of cmake was used?


```
tscri@DESKTOP-I0BK7J0 ~/sage
$ cmake --version
cmake version 3.20.0

CMake suite maintained and supported by Kitware (kitware.com/cmake).
```




---

archive/issue_comments_353864.json:
```json
{
    "body": "Can you attach those two as well\n\n```\nSee also \"/home/tscri/sage/local/var/tmp/sage/build/cryptominisat-5.8.0/src/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/tscri/sage/local/var/tmp/sage/build/cryptominisat-5.8.0/src/CMakeFiles/CMakeError.log\".\n```\n\nI suspect a variable is empty when it shouldn't. It may just be a matter of an extra option, but it could be a windows special.\n\nThis is where cmake says it fails\n\n```\nstring(REPLACE \"\\n\" \" \" PY_LINKFORSHARED_CONFIG ${PY_LINKFORSHARED_CONFIG})\n```\n\nIf shared linking doesn't make sense on cygwin, it is not looking good.",
    "created_at": "2022-06-22T05:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353864",
    "user": "@kiwifb"
}
```

Can you attach those two as well

```
See also "/home/tscri/sage/local/var/tmp/sage/build/cryptominisat-5.8.0/src/CMakeFiles/CMakeOutput.log".
See also "/home/tscri/sage/local/var/tmp/sage/build/cryptominisat-5.8.0/src/CMakeFiles/CMakeError.log".
```

I suspect a variable is empty when it shouldn't. It may just be a matter of an extra option, but it could be a windows special.

This is where cmake says it fails

```
string(REPLACE "\n" " " PY_LINKFORSHARED_CONFIG ${PY_LINKFORSHARED_CONFIG})
```

If shared linking doesn't make sense on cygwin, it is not looking good.



---

archive/issue_comments_353865.json:
```json
{
    "body": "Attachment [CMakeError.log](tarball://root/attachments/some-uuid/ticket25374/CMakeError.log) by @tscrim created at 2022-06-22 05:26:22",
    "created_at": "2022-06-22T05:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353865",
    "user": "@tscrim"
}
```

Attachment [CMakeError.log](tarball://root/attachments/some-uuid/ticket25374/CMakeError.log) by @tscrim created at 2022-06-22 05:26:22



---

archive/issue_comments_353866.json:
```json
{
    "body": "Attachment [CMakeOutput.log](tarball://root/attachments/some-uuid/ticket25374/CMakeOutput.log) by @tscrim created at 2022-06-22 05:26:29",
    "created_at": "2022-06-22T05:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353866",
    "user": "@tscrim"
}
```

Attachment [CMakeOutput.log](tarball://root/attachments/some-uuid/ticket25374/CMakeOutput.log) by @tscrim created at 2022-06-22 05:26:29



---

archive/issue_comments_353867.json:
```json
{
    "body": "Done.",
    "created_at": "2022-06-22T05:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353867",
    "user": "@tscrim"
}
```

Done.



---

archive/issue_comments_353868.json:
```json
{
    "body": "Thanks. I always forgot how those two files are usually useless. I don't think we can easily build the python interface on cygwin. Mostly because to build the python module it wants dynamic flags - on linux for example\n\n```\n-- Found python interpreter, libs and header files\n-- Building python interface\n-- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG'\n-- Python LDFLAGS: '-ldl  -lm'\n-- Python LINKFORSHARED flags: '-Xlinker -export-dynamic'\n-- Python module installation prefix: --prefix=/usr\n```\n\nIf we can hand feed an appropriate `-DPY_LINKFORSHARED_CONFIG=...` to cmake on cygwin, we may be able to get something. The other option is to turn off python support on the platform :(\n\nAnyone wanting to test flags can do so by running\n\n```\nEXTRA_OPTS=\"-DPY_LINKFORSHARED_CONFIG='$my_flags'\" ./sage -i cryptominisat\n```\n\ncourtesy of the cmake configure line in `spkg-install.in`\n\n```\nsdh_cmake -DUSE_GAUSS='ON' $EXTRA_OPTS\n```\n",
    "created_at": "2022-06-22T08:33:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353868",
    "user": "@kiwifb"
}
```

Thanks. I always forgot how those two files are usually useless. I don't think we can easily build the python interface on cygwin. Mostly because to build the python module it wants dynamic flags - on linux for example

```
-- Found python interpreter, libs and header files
-- Building python interface
-- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG'
-- Python LDFLAGS: '-ldl  -lm'
-- Python LINKFORSHARED flags: '-Xlinker -export-dynamic'
-- Python module installation prefix: --prefix=/usr
```

If we can hand feed an appropriate `-DPY_LINKFORSHARED_CONFIG=...` to cmake on cygwin, we may be able to get something. The other option is to turn off python support on the platform :(

Anyone wanting to test flags can do so by running

```
EXTRA_OPTS="-DPY_LINKFORSHARED_CONFIG='$my_flags'" ./sage -i cryptominisat
```

courtesy of the cmake configure line in `spkg-install.in`

```
sdh_cmake -DUSE_GAUSS='ON' $EXTRA_OPTS
```




---

archive/issue_comments_353869.json:
```json
{
    "body": "Replying to [comment:79 fbissey]:\n> Anyone wanting to test flags can do so by running\n> {{{\n> EXTRA_OPTS=\"-DPY_LINKFORSHARED_CONFIG='$my_flags'\" ./sage -i cryptominisat\n> }}}\n\nI ran this and it also did not work for me. Maybe the key bit in the log is this:\n\n```\n[cryptominisat-5.8.0] -- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall'\n[cryptominisat-5.8.0] -- Python LDFLAGS: '-lcrypt -lintl -ldl'\n[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''\n```\n\nI can post updated logs if desired, but I don't think much has changed...",
    "created_at": "2022-06-22T23:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353869",
    "user": "@tscrim"
}
```

Replying to [comment:79 fbissey]:
> Anyone wanting to test flags can do so by running
> {{{
> EXTRA_OPTS="-DPY_LINKFORSHARED_CONFIG='$my_flags'" ./sage -i cryptominisat
> }}}

I ran this and it also did not work for me. Maybe the key bit in the log is this:

```
[cryptominisat-5.8.0] -- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall'
[cryptominisat-5.8.0] -- Python LDFLAGS: '-lcrypt -lintl -ldl'
[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''
```

I can post updated logs if desired, but I don't think much has changed...



---

archive/issue_comments_353870.json:
```json
{
    "body": "Well you were supposed to replace `$my_flags` by what you think should be there if you have a clue. And yes the key bit is\n\n```\n[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''\n```\n\nthe cmake script cannot handle an empty string here.",
    "created_at": "2022-06-22T23:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353870",
    "user": "@kiwifb"
}
```

Well you were supposed to replace `$my_flags` by what you think should be there if you have a clue. And yes the key bit is

```
[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''
```

the cmake script cannot handle an empty string here.



---

archive/issue_comments_353871.json:
```json
{
    "body": "That is what I was thinking, but I have no idea what to actually put there as I am ignorant/dumb wrt most of the build stuff. I also tried with what was in your post, but it didn't like the `-export-dynamic`. Trying it with `-Xlinker` also results in\n\n```\n[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''\n```\n",
    "created_at": "2022-06-23T00:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353871",
    "user": "@tscrim"
}
```

That is what I was thinking, but I have no idea what to actually put there as I am ignorant/dumb wrt most of the build stuff. I also tried with what was in your post, but it didn't like the `-export-dynamic`. Trying it with `-Xlinker` also results in

```
[cryptominisat-5.8.0] -- Python LINKFORSHARED flags: ''
```




---

archive/issue_comments_353872.json:
```json
{
    "body": "I thought you could override the autodetection by providing it but may be you cannot. I'd have to run it interactively with `ccmake` to see what is possible.",
    "created_at": "2022-06-23T00:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353872",
    "user": "@kiwifb"
}
```

I thought you could override the autodetection by providing it but may be you cannot. I'd have to run it interactively with `ccmake` to see what is possible.



---

archive/issue_comments_353873.json:
```json
{
    "body": "OK, no possible override, it is not visible from the interface. Disabling python on cygwin is the only we'll build this out of the box.",
    "created_at": "2022-06-23T00:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353873",
    "user": "@kiwifb"
}
```

OK, no possible override, it is not visible from the interface. Disabling python on cygwin is the only we'll build this out of the box.



---

archive/issue_comments_353874.json:
```json
{
    "body": "Is the python build used on cygwin only static? Or is there a dynamic library somewhere?",
    "created_at": "2022-06-23T00:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353874",
    "user": "@kiwifb"
}
```

Is the python build used on cygwin only static? Or is there a dynamic library somewhere?



---

archive/issue_comments_353875.json:
```json
{
    "body": "Replying to [comment:85 fbissey]:\n> Is the python build used on cygwin only static? Or is there a dynamic library somewhere?\n\nI have no idea. How can I check this?",
    "created_at": "2022-06-23T00:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353875",
    "user": "@tscrim"
}
```

Replying to [comment:85 fbissey]:
> Is the python build used on cygwin only static? Or is there a dynamic library somewhere?

I have no idea. How can I check this?



---

archive/issue_comments_353876.json:
```json
{
    "body": "I don't know, I am not a windows person at all. I don't know how cygwin works. I am inspecting the source to figure out whether this particular is ever used. It may be possible to just edit it out.",
    "created_at": "2022-06-23T00:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353876",
    "user": "@kiwifb"
}
```

I don't know, I am not a windows person at all. I don't know how cygwin works. I am inspecting the source to figure out whether this particular is ever used. It may be possible to just edit it out.



---

archive/issue_comments_353877.json:
```json
{
    "body": "It seems like it is dynamic:\n\n```\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ ./sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/home/tscri/sage\n\n(sage-sh) tscri@DESKTOP-I0BK7J0:sage$ which python\n/home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python\n\n(sage-sh) tscri@DESKTOP-I0BK7J0:sage$ exit\nExited Sage subshell.\n\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ ls -al /home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python\n-rwxr-xr-x 1 tscri tscri 9747 Jun 22 11:05 /home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python\n\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ ldd local/var/lib/sage/venv-python3.9/bin/python\n        ntdll.dll => /cygdrive/c/Windows/SYSTEM32/ntdll.dll (0x7ffd1ac00000)\n        KERNEL32.DLL => /cygdrive/c/Windows/System32/KERNEL32.DLL (0x7ffd1a0d0000)\n        KERNELBASE.dll => /cygdrive/c/Windows/System32/KERNELBASE.dll (0x7ffd180e0000)\n        cygwin1.dll => /usr/bin/cygwin1.dll (0x180040000)\n        libpython3.9.dll => /usr/bin/libpython3.9.dll (0x3fcb60000)\n        cygintl-8.dll => /usr/bin/cygintl-8.dll (0x3fe870000)\n        cyggcc_s-seh-1.dll => /usr/bin/cyggcc_s-seh-1.dll (0x3ff490000)\n        cygiconv-2.dll => /usr/bin/cygiconv-2.dll (0x3fe900000)\n```\n\nHere is also the Cygwin Python's install, which seems to be different:\n\n```\n\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ python\nPython 3.9.10 (main, Jan 20 2022, 21:37:52)\n[GCC 11.2.0] on cygwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>\n\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ which python\n/usr/bin/python\n\ntscri@DESKTOP-I0BK7J0 ~/sage\n$ ldd /usr/bin/python\n        ntdll.dll => /cygdrive/c/Windows/SYSTEM32/ntdll.dll (0x7ffd1ac00000)\n        KERNEL32.DLL => /cygdrive/c/Windows/System32/KERNEL32.DLL (0x7ffd1a0d0000)\n        KERNELBASE.dll => /cygdrive/c/Windows/System32/KERNELBASE.dll (0x7ffd180e0000)\n        cygwin1.dll => /usr/bin/cygwin1.dll (0x180040000)\n        libpython3.9.dll => /usr/bin/libpython3.9.dll (0x3fcb60000)\n        cygintl-8.dll => /usr/bin/cygintl-8.dll (0x3fe870000)\n        cyggcc_s-seh-1.dll => /usr/bin/cyggcc_s-seh-1.dll (0x3ff490000)\n        cygiconv-2.dll => /usr/bin/cygiconv-2.dll (0x3fe900000)\n```\n",
    "created_at": "2022-06-23T00:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353877",
    "user": "@tscrim"
}
```

It seems like it is dynamic:

```
tscri@DESKTOP-I0BK7J0 ~/sage
$ ./sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/home/tscri/sage

(sage-sh) tscri@DESKTOP-I0BK7J0:sage$ which python
/home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python

(sage-sh) tscri@DESKTOP-I0BK7J0:sage$ exit
Exited Sage subshell.

tscri@DESKTOP-I0BK7J0 ~/sage
$ ls -al /home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python
-rwxr-xr-x 1 tscri tscri 9747 Jun 22 11:05 /home/tscri/sage/local/var/lib/sage/venv-python3.9/bin/python

tscri@DESKTOP-I0BK7J0 ~/sage
$ ldd local/var/lib/sage/venv-python3.9/bin/python
        ntdll.dll => /cygdrive/c/Windows/SYSTEM32/ntdll.dll (0x7ffd1ac00000)
        KERNEL32.DLL => /cygdrive/c/Windows/System32/KERNEL32.DLL (0x7ffd1a0d0000)
        KERNELBASE.dll => /cygdrive/c/Windows/System32/KERNELBASE.dll (0x7ffd180e0000)
        cygwin1.dll => /usr/bin/cygwin1.dll (0x180040000)
        libpython3.9.dll => /usr/bin/libpython3.9.dll (0x3fcb60000)
        cygintl-8.dll => /usr/bin/cygintl-8.dll (0x3fe870000)
        cyggcc_s-seh-1.dll => /usr/bin/cyggcc_s-seh-1.dll (0x3ff490000)
        cygiconv-2.dll => /usr/bin/cygiconv-2.dll (0x3fe900000)
```

Here is also the Cygwin Python's install, which seems to be different:

```

tscri@DESKTOP-I0BK7J0 ~/sage
$ python
Python 3.9.10 (main, Jan 20 2022, 21:37:52)
[GCC 11.2.0] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>>

tscri@DESKTOP-I0BK7J0 ~/sage
$ which python
/usr/bin/python

tscri@DESKTOP-I0BK7J0 ~/sage
$ ldd /usr/bin/python
        ntdll.dll => /cygdrive/c/Windows/SYSTEM32/ntdll.dll (0x7ffd1ac00000)
        KERNEL32.DLL => /cygdrive/c/Windows/System32/KERNEL32.DLL (0x7ffd1a0d0000)
        KERNELBASE.dll => /cygdrive/c/Windows/System32/KERNELBASE.dll (0x7ffd180e0000)
        cygwin1.dll => /usr/bin/cygwin1.dll (0x180040000)
        libpython3.9.dll => /usr/bin/libpython3.9.dll (0x3fcb60000)
        cygintl-8.dll => /usr/bin/cygintl-8.dll (0x3fe870000)
        cyggcc_s-seh-1.dll => /usr/bin/cyggcc_s-seh-1.dll (0x3ff490000)
        cygiconv-2.dll => /usr/bin/cygiconv-2.dll (0x3fe900000)
```




---

archive/issue_comments_353878.json:
```json
{
    "body": "Good, to know. The bits that are blocking cmake are not actually doing anything in practise. So we can edit them out. Are you OK with trying a patch?",
    "created_at": "2022-06-23T00:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353878",
    "user": "@kiwifb"
}
```

Good, to know. The bits that are blocking cmake are not actually doing anything in practise. So we can edit them out. Are you OK with trying a patch?



---

archive/issue_comments_353879.json:
```json
{
    "body": "Replying to [comment:89 fbissey]:\n> Good, to know. The bits that are blocking cmake are not actually doing anything in practise. So we can edit them out. Are you OK with trying a patch?\n\nYep, just tell me what to do.",
    "created_at": "2022-06-23T00:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353879",
    "user": "@tscrim"
}
```

Replying to [comment:89 fbissey]:
> Good, to know. The bits that are blocking cmake are not actually doing anything in practise. So we can edit them out. Are you OK with trying a patch?

Yep, just tell me what to do.



---

archive/issue_comments_353880.json:
```json
{
    "body": "Attachment [cryptominisat-5.8.0-rm_extra_python_vars.patch](tarball://root/attachments/some-uuid/ticket25374/cryptominisat-5.8.0-rm_extra_python_vars.patch) by @kiwifb created at 2022-06-23 00:53:21\n\nexperimental patch for cryptominisat on cygwin",
    "created_at": "2022-06-23T00:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353880",
    "user": "@kiwifb"
}
```

Attachment [cryptominisat-5.8.0-rm_extra_python_vars.patch](tarball://root/attachments/some-uuid/ticket25374/cryptominisat-5.8.0-rm_extra_python_vars.patch) by @kiwifb created at 2022-06-23 00:53:21

experimental patch for cryptominisat on cygwin



---

archive/issue_comments_353881.json:
```json
{
    "body": "OK, I have just attached a patch to the ticket. From the sage root create the folder `build/pkgs/cryptominisat/patches/` and copy the patch in that folder.\n\nOnce done you can proceed with the normal `./sage -i cryptominisat`.",
    "created_at": "2022-06-23T00:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353881",
    "user": "@kiwifb"
}
```

OK, I have just attached a patch to the ticket. From the sage root create the folder `build/pkgs/cryptominisat/patches/` and copy the patch in that folder.

Once done you can proceed with the normal `./sage -i cryptominisat`.



---

archive/issue_comments_353882.json:
```json
{
    "body": "With the patch, it built successfully.",
    "created_at": "2022-06-23T01:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353882",
    "user": "@tscrim"
}
```

With the patch, it built successfully.



---

archive/issue_comments_353883.json:
```json
{
    "body": "Great, I believe the patch is platform neutral because it only remove parts that are functionally dead. I will update the branch and once we had some retest on other platform we can get this in.",
    "created_at": "2022-06-23T01:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353883",
    "user": "@kiwifb"
}
```

Great, I believe the patch is platform neutral because it only remove parts that are functionally dead. I will update the branch and once we had some retest on other platform we can get this in.



---

archive/issue_comments_353884.json:
```json
{
    "body": "Now are tests in `src/sage/sat/solvers/cryptominisat.py` expected to pass? They are marked by `pycryptosat`, and when I run\n\n```\n$ ./sage -tp --optional=sage,pycryptosat src/sage/sat/solvers/cryptominisat.py\n```\n\nI get lots of failures coming down to this:\n\n```\n**********************************************************************\nFile \"src/sage/sat/solvers/cryptominisat.py\", line 50, in sage.sat.solvers.cryptominisat.CryptoMiniSat\nFailed example:\n    solver = CryptoMiniSat()                                  # optional - pycryptosat\nException raised:\n    Traceback (most recent call last):\n      File \"sage/misc/lazy_import.pyx\", line 253, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2942)\n        self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)\n    ModuleNotFoundError: No module named 'pycryptosat'\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.sat.solvers.cryptominisat.CryptoMiniSat[1]>\", line 1, in <module>\n        solver = CryptoMiniSat()                                  # optional - pycryptosat\n      File \"/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/sat/solvers/cryptominisat.py\", line 69, in __init__\n        self._solver = Solver(verbose=int(verbosity), confl_limit=int(confl_limit), threads=int(threads))\n      File \"sage/misc/lazy_import.pyx\", line 391, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:4237)\n        return self.get_object()(*args, **kwds)\n      File \"sage/misc/lazy_import.pyx\", line 217, in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2619)\n        return self._get_object()\n      File \"sage/misc/lazy_import.pyx\", line 256, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:3057)\n        raise FeatureNotPresentError(self._feature, reason=f'Importing {self._name} failed: {e}')\n    sage.features.FeatureNotPresentError: pycryptosat is not available.\n    Importing Solver failed: No module named 'pycryptosat'\n    No equivalent system packages for cygwin are known to Sage.\n    To install pycryptosat using the Sage package manager, you can try to run:\n      !sage -i cryptominisat\n    No equivalent system packages for pip are known to Sage.\n```\n",
    "created_at": "2022-06-23T01:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353884",
    "user": "@tscrim"
}
```

Now are tests in `src/sage/sat/solvers/cryptominisat.py` expected to pass? They are marked by `pycryptosat`, and when I run

```
$ ./sage -tp --optional=sage,pycryptosat src/sage/sat/solvers/cryptominisat.py
```

I get lots of failures coming down to this:

```
**********************************************************************
File "src/sage/sat/solvers/cryptominisat.py", line 50, in sage.sat.solvers.cryptominisat.CryptoMiniSat
Failed example:
    solver = CryptoMiniSat()                                  # optional - pycryptosat
Exception raised:
    Traceback (most recent call last):
      File "sage/misc/lazy_import.pyx", line 253, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2942)
        self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)
    ModuleNotFoundError: No module named 'pycryptosat'

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.sat.solvers.cryptominisat.CryptoMiniSat[1]>", line 1, in <module>
        solver = CryptoMiniSat()                                  # optional - pycryptosat
      File "/home/tscri/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/sat/solvers/cryptominisat.py", line 69, in __init__
        self._solver = Solver(verbose=int(verbosity), confl_limit=int(confl_limit), threads=int(threads))
      File "sage/misc/lazy_import.pyx", line 391, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:4237)
        return self.get_object()(*args, **kwds)
      File "sage/misc/lazy_import.pyx", line 217, in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2619)
        return self._get_object()
      File "sage/misc/lazy_import.pyx", line 256, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:3057)
        raise FeatureNotPresentError(self._feature, reason=f'Importing {self._name} failed: {e}')
    sage.features.FeatureNotPresentError: pycryptosat is not available.
    Importing Solver failed: No module named 'pycryptosat'
    No equivalent system packages for cygwin are known to Sage.
    To install pycryptosat using the Sage package manager, you can try to run:
      !sage -i cryptominisat
    No equivalent system packages for pip are known to Sage.
```




---

archive/issue_comments_353885.json:
```json
{
    "body": "Ok it installed but obviously it doesn't work. There should be a file with a name starting with `pycryptominisat` inside the `site-packages` folder of python. Can you see it? and if so what is the exact name?",
    "created_at": "2022-06-23T01:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353885",
    "user": "@kiwifb"
}
```

Ok it installed but obviously it doesn't work. There should be a file with a name starting with `pycryptominisat` inside the `site-packages` folder of python. Can you see it? and if so what is the exact name?



---

archive/issue_comments_353886.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-06-23T01:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353886",
    "user": "@kiwifb"
}
```

New commits:



---

archive/issue_comments_353887.json:
```json
{
    "body": "Because I was stupid and didn't realize that was a separate package because I probably mistyped the name when doing `./sage -i pycryptosat`. Although I am back with a very familiar error:\n\n```\n[pycryptosat-5.8.0] -- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall'\n[pycryptosat-5.8.0] -- Python LDFLAGS: '-lcrypt -lintl -ldl'\n[pycryptosat-5.8.0] -- Python LINKFORSHARED flags: ''\n[pycryptosat-5.8.0] -- Python module installation prefix: --prefix=/home/tscri/sage/local/var/lib/sage/venv-python3.9\n[pycryptosat-5.8.0] -- Configuring incomplete, errors occurred!\n[pycryptosat-5.8.0] See also \"/home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeOutput.log\".\n[pycryptosat-5.8.0] See also \"/home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeError.log\".\n[pycryptosat-5.8.0] ****************************************************************************************************************************************************\n[pycryptosat-5.8.0] Error configuring pycryptosat-5.8.0 with cmake\n[pycryptosat-5.8.0] See the file\n[pycryptosat-5.8.0]     /home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeOutput.log\n[pycryptosat-5.8.0] for details.\n[pycryptosat-5.8.0] ****************************************************************************************************************************************************\n```\n",
    "created_at": "2022-06-23T01:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353887",
    "user": "@tscrim"
}
```

Because I was stupid and didn't realize that was a separate package because I probably mistyped the name when doing `./sage -i pycryptosat`. Although I am back with a very familiar error:

```
[pycryptosat-5.8.0] -- Python CFLAGS:  '-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall'
[pycryptosat-5.8.0] -- Python LDFLAGS: '-lcrypt -lintl -ldl'
[pycryptosat-5.8.0] -- Python LINKFORSHARED flags: ''
[pycryptosat-5.8.0] -- Python module installation prefix: --prefix=/home/tscri/sage/local/var/lib/sage/venv-python3.9
[pycryptosat-5.8.0] -- Configuring incomplete, errors occurred!
[pycryptosat-5.8.0] See also "/home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeOutput.log".
[pycryptosat-5.8.0] See also "/home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeError.log".
[pycryptosat-5.8.0] ****************************************************************************************************************************************************
[pycryptosat-5.8.0] Error configuring pycryptosat-5.8.0 with cmake
[pycryptosat-5.8.0] See the file
[pycryptosat-5.8.0]     /home/tscri/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pycryptosat-5.8.0/src/CMakeFiles/CMakeOutput.log
[pycryptosat-5.8.0] for details.
[pycryptosat-5.8.0] ****************************************************************************************************************************************************
```




---

archive/issue_comments_353888.json:
```json
{
    "body": "Go figure, it needs patching too since it is the same package. I am going to update the branch.",
    "created_at": "2022-06-23T01:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353888",
    "user": "@kiwifb"
}
```

Go figure, it needs patching too since it is the same package. I am going to update the branch.



---

archive/issue_comments_353889.json:
```json
{
    "body": "I am now trying with the same patch copied over. This seems to be working...",
    "created_at": "2022-06-23T01:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353889",
    "user": "@tscrim"
}
```

I am now trying with the same patch copied over. This seems to be working...



---

archive/issue_comments_353890.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-23T01:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353890",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353891.json:
```json
{
    "body": "That worked and the tests in that file pass.",
    "created_at": "2022-06-23T01:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353891",
    "user": "@tscrim"
}
```

That worked and the tests in that file pass.



---

archive/issue_comments_353892.json:
```json
{
    "body": "Cool and now that the branch is updated we should make sure `./sage -i pycryptosat` works properly from this branch.",
    "created_at": "2022-06-23T01:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353892",
    "user": "@kiwifb"
}
```

Cool and now that the branch is updated we should make sure `./sage -i pycryptosat` works properly from this branch.



---

archive/issue_comments_353893.json:
```json
{
    "body": "And I should upstream the thing too, fixing this was just a matter of removing dead branches :)",
    "created_at": "2022-06-23T01:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353893",
    "user": "@kiwifb"
}
```

And I should upstream the thing too, fixing this was just a matter of removing dead branches :)



---

archive/issue_comments_353894.json:
```json
{
    "body": "I just did a force rebuild of `./sage -i -f pycryptosat` with the new branch and it is working.",
    "created_at": "2022-06-23T01:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353894",
    "user": "@tscrim"
}
```

I just did a force rebuild of `./sage -i -f pycryptosat` with the new branch and it is working.



---

archive/issue_comments_353895.json:
```json
{
    "body": "I have added myself to authors, does anyone need to add themselves? Dima?\n\nNext we need some reviewers to put their hands up. `@`tscrim just did cygwin so I added him there.",
    "created_at": "2022-06-23T01:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353895",
    "user": "@kiwifb"
}
```

I have added myself to authors, does anyone need to add themselves? Dima?

Next we need some reviewers to put their hands up. `@`tscrim just did cygwin so I added him there.



---

archive/issue_comments_353896.json:
```json
{
    "body": "The force rebuild finished and the tests in files that mention `pycryptosat` and `cryptominisat` passed on Cygwin.",
    "created_at": "2022-06-23T01:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353896",
    "user": "@tscrim"
}
```

The force rebuild finished and the tests in files that mention `pycryptosat` and `cryptominisat` passed on Cygwin.



---

archive/issue_comments_353897.json:
```json
{
    "body": "We should also add https://github.com/msoos/cryptominisat/pull/679 as a patch so that the next `setuptools` upgrade (#33866) does not break `cryptominisat`",
    "created_at": "2022-06-27T02:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353897",
    "user": "@mkoeppe"
}
```

We should also add https://github.com/msoos/cryptominisat/pull/679 as a patch so that the next `setuptools` upgrade (#33866) does not break `cryptominisat`



---

archive/issue_comments_353898.json:
```json
{
    "body": "Very sensible. I'll add it to my branch in the next few hours if no one else does it.",
    "created_at": "2022-06-27T02:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353898",
    "user": "@kiwifb"
}
```

Very sensible. I'll add it to my branch in the next few hours if no one else does it.



---

archive/issue_comments_353899.json:
```json
{
    "body": "On macOS, I also get:\n\n```\n[cryptominisat-5.8.0] cd /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/cryptominisat-5.8.0/src/pycryptosat && /Users/mkoeppe/s/sage/sage-rebasing/local/bin/cmake -E env CFLAGS='-isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\\ -g\\ -O2' /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.8/bin/python3 setup.py build_ext --inplace --rpath ../lib\n[cryptominisat-5.8.0] [100%] Built target cryptominisat5-bin\n[cryptominisat-5.8.0] clang: warning: no such sysroot directory: '/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -g -O2' [-Wmissing-sysroot]\n[cryptominisat-5.8.0] In file included from /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/cryptominisat-5.8.0/src/pycryptosat/src/pycryptosat.cpp:27:\n[cryptominisat-5.8.0] In file included from /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/include/python3.8/Python.h:25:\n[cryptominisat-5.8.0] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/stdio.h:107:15: fatal error: 'stdio.h' file not found\n```\n",
    "created_at": "2022-06-27T02:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353899",
    "user": "@mkoeppe"
}
```

On macOS, I also get:

```
[cryptominisat-5.8.0] cd /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/cryptominisat-5.8.0/src/pycryptosat && /Users/mkoeppe/s/sage/sage-rebasing/local/bin/cmake -E env CFLAGS='-isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\ -g\ -O2' /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.8/bin/python3 setup.py build_ext --inplace --rpath ../lib
[cryptominisat-5.8.0] [100%] Built target cryptominisat5-bin
[cryptominisat-5.8.0] clang: warning: no such sysroot directory: '/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -g -O2' [-Wmissing-sysroot]
[cryptominisat-5.8.0] In file included from /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/cryptominisat-5.8.0/src/pycryptosat/src/pycryptosat.cpp:27:
[cryptominisat-5.8.0] In file included from /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/include/python3.8/Python.h:25:
[cryptominisat-5.8.0] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/stdio.h:107:15: fatal error: 'stdio.h' file not found
```




---

archive/issue_comments_353900.json:
```json
{
    "body": "This appears to come from https://github.com/msoos/cryptominisat/blob/master/python/CMakeLists.txt#L85",
    "created_at": "2022-06-27T03:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353900",
    "user": "@mkoeppe"
}
```

This appears to come from https://github.com/msoos/cryptominisat/blob/master/python/CMakeLists.txt#L85



---

archive/issue_comments_353901.json:
```json
{
    "body": "I don't see a fix for this in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/cryptominisat.rb",
    "created_at": "2022-06-27T03:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353901",
    "user": "@mkoeppe"
}
```

I don't see a fix for this in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/cryptominisat.rb



---

archive/issue_comments_353902.json:
```json
{
    "body": "cryptominisat master already contains a workaround for likely the same issue of misquoting: https://github.com/msoos/cryptominisat/pull/621/files",
    "created_at": "2022-06-27T03:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353902",
    "user": "@mkoeppe"
}
```

cryptominisat master already contains a workaround for likely the same issue of misquoting: https://github.com/msoos/cryptominisat/pull/621/files



---

archive/issue_comments_353903.json:
```json
{
    "body": "This whole broken `-isysroot` thing added in https://github.com/msoos/cryptominisat/commit/8e5c38b8f4099bf558ef1a18b2a8b893460e9943 should probably be removed upstream. But the path of least resistance for us would be to apply https://github.com/msoos/cryptominisat/pull/621 as a patch and to fake `NIX_CC`.",
    "created_at": "2022-06-27T03:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353903",
    "user": "@mkoeppe"
}
```

This whole broken `-isysroot` thing added in https://github.com/msoos/cryptominisat/commit/8e5c38b8f4099bf558ef1a18b2a8b893460e9943 should probably be removed upstream. But the path of least resistance for us would be to apply https://github.com/msoos/cryptominisat/pull/621 as a patch and to fake `NIX_CC`.



---

archive/issue_comments_353904.json:
```json
{
    "body": "Next error:\n\n```\n[cryptominisat-5.8.0] [100%] Built target cryptominisat5-bin\n[cryptominisat-5.8.0] In file included from src/pycryptosat.cpp:32:\n[cryptominisat-5.8.0] In file included from ../cmsat5-src/cryptominisat5/cryptominisat.h:35:\n[cryptominisat-5.8.0] ../cmsat5-src/cryptominisat5/solvertypesmini.h:33:1: error: unknown type name 'constexpr'\n[cryptominisat-5.8.0] constexpr uint32_t var_Undef(0xffffffffU >> 4);\n```\n\n----\nNew commits:",
    "created_at": "2022-06-27T03:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353904",
    "user": "@mkoeppe"
}
```

Next error:

```
[cryptominisat-5.8.0] [100%] Built target cryptominisat5-bin
[cryptominisat-5.8.0] In file included from src/pycryptosat.cpp:32:
[cryptominisat-5.8.0] In file included from ../cmsat5-src/cryptominisat5/cryptominisat.h:35:
[cryptominisat-5.8.0] ../cmsat5-src/cryptominisat5/solvertypesmini.h:33:1: error: unknown type name 'constexpr'
[cryptominisat-5.8.0] constexpr uint32_t var_Undef(0xffffffffU >> 4);
```

----
New commits:



---

archive/issue_comments_353905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T03:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353905",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353906.json:
```json
{
    "body": "Now it builds at least `cryptominisat` for me.",
    "created_at": "2022-06-27T03:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353906",
    "user": "@mkoeppe"
}
```

Now it builds at least `cryptominisat` for me.



---

archive/issue_comments_353907.json:
```json
{
    "body": "It should work for `pycryptomini` provided you add the `NIX_CC=fake` thing to its `spkg-install.in` since I made its patches folder a link to the `cryptominisat` one, so patches would match.",
    "created_at": "2022-06-27T04:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353907",
    "user": "@kiwifb"
}
```

It should work for `pycryptomini` provided you add the `NIX_CC=fake` thing to its `spkg-install.in` since I made its patches folder a link to the `cryptominisat` one, so patches would match.



---

archive/issue_comments_353908.json:
```json
{
    "body": "pycryptosat currently fails for me with the `constexpr` problem (same as comment:115). This looks like it is the same as https://github.com/msoos/cryptominisat/issues/684",
    "created_at": "2022-06-27T04:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353908",
    "user": "@mkoeppe"
}
```

pycryptosat currently fails for me with the `constexpr` problem (same as comment:115). This looks like it is the same as https://github.com/msoos/cryptominisat/issues/684



---

archive/issue_comments_353909.json:
```json
{
    "body": "Homebrew fixes it like this: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/cryptominisat.rb#L39",
    "created_at": "2022-06-27T04:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353909",
    "user": "@mkoeppe"
}
```

Homebrew fixes it like this: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/cryptominisat.rb#L39



---

archive/issue_comments_353910.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T04:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353910",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353911.json:
```json
{
    "body": "Now this builds for me. Strangely I didn't need the `NIX_CC` workaround. Looks like this broken stuff is only used when the Python module build is done from within the cmake build.",
    "created_at": "2022-06-27T04:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353911",
    "user": "@mkoeppe"
}
```

Now this builds for me. Strangely I didn't need the `NIX_CC` workaround. Looks like this broken stuff is only used when the Python module build is done from within the cmake build.



---

archive/issue_comments_353912.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-27T04:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353912",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353913.json:
```json
{
    "body": "So here's a simpler version without the NIX_CC workaround.",
    "created_at": "2022-06-27T04:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353913",
    "user": "@mkoeppe"
}
```

So here's a simpler version without the NIX_CC workaround.



---

archive/issue_comments_353914.json:
```json
{
    "body": "Builds OK and passes `./sage -tp src/sage/sat`",
    "created_at": "2022-06-27T04:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353914",
    "user": "@mkoeppe"
}
```

Builds OK and passes `./sage -tp src/sage/sat`



---

archive/issue_comments_353915.json:
```json
{
    "body": "I am a bit uncertain as to where the c++11 flags are supposed to come from in https://github.com/msoos/cryptominisat/issues/684 and where they got missing. I'll dig that if I have time later, but some stuff is clearly not going well on OS X. I am not even sure how the above issue avoided the isysroot issue.",
    "created_at": "2022-06-27T04:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353915",
    "user": "@kiwifb"
}
```

I am a bit uncertain as to where the c++11 flags are supposed to come from in https://github.com/msoos/cryptominisat/issues/684 and where they got missing. I'll dig that if I have time later, but some stuff is clearly not going well on OS X. I am not even sure how the above issue avoided the isysroot issue.



---

archive/issue_comments_353916.json:
```json
{
    "body": "That pycryptosat setup.py.in is a big mess. Upstream should probably rewrite it using setuptools instead of distutils and back out the `sysconfig` manipulation.",
    "created_at": "2022-06-27T04:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353916",
    "user": "@mkoeppe"
}
```

That pycryptosat setup.py.in is a big mess. Upstream should probably rewrite it using setuptools instead of distutils and back out the `sysconfig` manipulation.



---

archive/issue_comments_353917.json:
```json
{
    "body": "Replying to [comment:128 fbissey]:\n> I am not even sure how the above [...] avoided the isysroot issue.\n\nJust by using `-DENABLE_PYTHON_INTERFACE=OFF` in the cryptominisat build",
    "created_at": "2022-06-27T04:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353917",
    "user": "@mkoeppe"
}
```

Replying to [comment:128 fbissey]:
> I am not even sure how the above [...] avoided the isysroot issue.

Just by using `-DENABLE_PYTHON_INTERFACE=OFF` in the cryptominisat build



---

archive/issue_comments_353918.json:
```json
{
    "body": "Replying to [comment:130 mkoeppe]:\n> Replying to [comment:128 fbissey]:\n> > I am not even sure how the above [...] avoided the isysroot issue.\n> \n> Just by using `-DENABLE_PYTHON_INTERFACE=OFF` in the cryptominisat build\n\nI was talking about https://github.com/msoos/cryptominisat/issues/684 which I guess means there were no `CFLAGS`.",
    "created_at": "2022-06-27T04:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353918",
    "user": "@kiwifb"
}
```

Replying to [comment:130 mkoeppe]:
> Replying to [comment:128 fbissey]:
> > I am not even sure how the above [...] avoided the isysroot issue.
> 
> Just by using `-DENABLE_PYTHON_INTERFACE=OFF` in the cryptominisat build

I was talking about https://github.com/msoos/cryptominisat/issues/684 which I guess means there were no `CFLAGS`.



---

archive/issue_comments_353919.json:
```json
{
    "body": "With #34017 merged, also `tox -e docker-debian-stretch-standard -- pycryptosat` passes.",
    "created_at": "2022-06-27T04:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353919",
    "user": "@mkoeppe"
}
```

With #34017 merged, also `tox -e docker-debian-stretch-standard -- pycryptosat` passes.



---

archive/issue_comments_353920.json:
```json
{
    "body": "Replying to [comment:131 fbissey]:\n> Replying to [comment:130 mkoeppe]:\n> > Replying to [comment:128 fbissey]:\n> > > I am not even sure how the above [...] avoided the isysroot issue.\n> > \n> I was talking about https://github.com/msoos/cryptominisat/issues/684 which I guess means there were no `CFLAGS`.\n\nI agree, that's the likely explanation.",
    "created_at": "2022-06-27T04:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353920",
    "user": "@mkoeppe"
}
```

Replying to [comment:131 fbissey]:
> Replying to [comment:130 mkoeppe]:
> > Replying to [comment:128 fbissey]:
> > > I am not even sure how the above [...] avoided the isysroot issue.
> > 
> I was talking about https://github.com/msoos/cryptominisat/issues/684 which I guess means there were no `CFLAGS`.

I agree, that's the likely explanation.



---

archive/issue_comments_353921.json:
```json
{
    "body": "I would be happy with setting this ticket to positive review. Perhaps it should be checked that the changes did not break anything on Cygwin, but I think it's unlikely",
    "created_at": "2022-06-27T05:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353921",
    "user": "@mkoeppe"
}
```

I would be happy with setting this ticket to positive review. Perhaps it should be checked that the changes did not break anything on Cygwin, but I think it's unlikely



---

archive/issue_comments_353922.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-27T17:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353922",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_353923.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-03T22:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353923",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_353924.json:
```json
{
    "body": "Replying to [comment:129 Matthias K\u00f6ppe]:\n> That pycryptosat setup.py.in is a big mess. Upstream should probably rewrite it using setuptools instead of distutils and back out the `sysconfig` manipulation.\n\nHi, this is upstream talking :) Yep, that is a big mess. Sorry. So, I fixed it up, and it's waaaaay more modern now. Also, there is a Python package, with pip install working etc:\n\nhttps://pypi.org/project/pycryptosat/\n\nAuto-builds the binary package using [GitHub](GitHub) actions so that's sweet. Let me know how it could be changed to be better. However, I think it should be a lot closer to \"good\" than the previous setup.\n\nMate",
    "created_at": "2022-10-23T22:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353924",
    "user": "msoos"
}
```

Replying to [comment:129 Matthias Kppe]:
> That pycryptosat setup.py.in is a big mess. Upstream should probably rewrite it using setuptools instead of distutils and back out the `sysconfig` manipulation.

Hi, this is upstream talking :) Yep, that is a big mess. Sorry. So, I fixed it up, and it's waaaaay more modern now. Also, there is a Python package, with pip install working etc:

https://pypi.org/project/pycryptosat/

Auto-builds the binary package using [GitHub](GitHub) actions so that's sweet. Let me know how it could be changed to be better. However, I think it should be a lot closer to "good" than the previous setup.

Mate



---

archive/issue_comments_353925.json:
```json
{
    "body": "Next update in #34687",
    "created_at": "2022-10-23T22:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25137#issuecomment-353925",
    "user": "@mkoeppe"
}
```

Next update in #34687
