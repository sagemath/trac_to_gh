# Issue 17890: Optional package lrs-4.2b.p1.spkg needs updating

archive/issues_017890.json:
```json
{
    "body": "CC:  @theref mhampton mabshoff @videlec @nathanncohen @ptigwe @drvinceknight @dimpase\n\nKeywords: lrs, redund\n\nThe current Sage optional package lrs refers to the version 4.2b released on 2006.2.14. A few bugs have been reported and fixed since then. In particular, I encountered a bug when calling the `redund` function provided by lrs-4.2b.p1.spkg to an H-representation input file which contains redundant linearities. \nThe latest version lrslib-051.tar.gz available at http://cgm.cs.mcgill.ca/~avis/C/lrslib/ solves the problem and is much faster.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18127\n\n",
    "created_at": "2015-04-05T22:43:54Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Optional package lrs-4.2b.p1.spkg needs updating",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17890",
    "user": "https://github.com/yuan-zhou"
}
```
CC:  @theref mhampton mabshoff @videlec @nathanncohen @ptigwe @drvinceknight @dimpase

Keywords: lrs, redund

The current Sage optional package lrs refers to the version 4.2b released on 2006.2.14. A few bugs have been reported and fixed since then. In particular, I encountered a bug when calling the `redund` function provided by lrs-4.2b.p1.spkg to an H-representation input file which contains redundant linearities. 
The latest version lrslib-051.tar.gz available at http://cgm.cs.mcgill.ca/~avis/C/lrslib/ solves the problem and is much faster.

Issue created by migration from https://trac.sagemath.org/ticket/18127





---

archive/issue_comments_239797.json:
```json
{
    "body": "As a first step, I have imported the old-style spkg lrs-4.2b.p1\n\nI called the new-style spkg \"lrslib\" -- that's the current name of the upstream packages.\n----\nNew commits:",
    "created_at": "2015-06-14T07:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239797",
    "user": "https://github.com/mkoeppe"
}
```

As a first step, I have imported the old-style spkg lrs-4.2b.p1

I called the new-style spkg "lrslib" -- that's the current name of the upstream packages.
----
New commits:



---

archive/issue_comments_239798.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-14T07:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239798",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239799.json:
```json
{
    "body": "Hellooooooo,\n\n- You cannot 'just rename' the package: there are many doctests flagged with\n  \"optional - lrs\" (which are only tested if 'lrs' is installed), and if you\n  rename the package but not those doctests then they will not be tested as they\n  should. You will find them in three files:\n  {{{\n  game_theory/normal_form_game.py\n  game_theory/parser.py\n  geometry/polyhedron/base.py\n  }}}\n\n- A ticket that updates a package must contain a direct url toward the archive\n  that is to be added (for the release manager who will have to merge the\n  ticket)\n\n- Do you know what are the differences between lrs and lrslib (if any)? It seems\n  that the author's website still lists 'lrs' as something different from\n  'lrslib'.\n\n- You can drop the \"Changelog\" section of SPKG.txt. That's because we now have\n  the history in the main git tree.\n\nNathann",
    "created_at": "2015-06-14T07:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239799",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooo,

- You cannot 'just rename' the package: there are many doctests flagged with
  "optional - lrs" (which are only tested if 'lrs' is installed), and if you
  rename the package but not those doctests then they will not be tested as they
  should. You will find them in three files:
  {{{
  game_theory/normal_form_game.py
  game_theory/parser.py
  geometry/polyhedron/base.py
  }}}

- A ticket that updates a package must contain a direct url toward the archive
  that is to be added (for the release manager who will have to merge the
  ticket)

- Do you know what are the differences between lrs and lrslib (if any)? It seems
  that the author's website still lists 'lrs' as something different from
  'lrslib'.

- You can drop the "Changelog" section of SPKG.txt. That's because we now have
  the history in the main git tree.

Nathann



---

archive/issue_comments_239800.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-14T07:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239800",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239801.json:
```json
{
    "body": "`@`ncohen: note that the ticket was not set to \"needs_review\", so I assume that the author is just still working on it.",
    "created_at": "2015-06-14T12:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239801",
    "user": "https://github.com/jdemeyer"
}
```

`@`ncohen: note that the ticket was not set to "needs_review", so I assume that the author is just still working on it.



---

archive/issue_comments_239802.json:
```json
{
    "body": "> `@`ncohen: note that the ticket was not set to \"needs_review\", so I assume that the author is just still working on it.\n\nYepyep. I chose to interpret as \"needs_review\" the fact that I was added in Cc of this ticket right after a commit was pushed.",
    "created_at": "2015-06-14T13:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239802",
    "user": "https://github.com/nathanncohen"
}
```

> `@`ncohen: note that the ticket was not set to "needs_review", so I assume that the author is just still working on it.

Yepyep. I chose to interpret as "needs_review" the fact that I was added in Cc of this ticket right after a commit was pushed.



---

archive/issue_comments_239803.json:
```json
{
    "body": "Thanks, Nathann, for your helpful comments. \n\nAs far as I know, lrs has, since version 4.0 (2000), only been released in the form of lrslib. Since that version, the upstream tarball has always been called lrslib-VERSION.tar.gz, where 4.0 is rendered as 040 and 4.2b as 042b etc.\nSee https://web.archive.org/web/20140506162045/http://cgm.cs.mcgill.ca/~avis/C/lrslib/archive/\nThe website is indeed a bit unclear.\n\nI'll update the doctests and remove the changelog.",
    "created_at": "2015-06-14T14:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239803",
    "user": "https://github.com/mkoeppe"
}
```

Thanks, Nathann, for your helpful comments. 

As far as I know, lrs has, since version 4.0 (2000), only been released in the form of lrslib. Since that version, the upstream tarball has always been called lrslib-VERSION.tar.gz, where 4.0 is rendered as 040 and 4.2b as 042b etc.
See https://web.archive.org/web/20140506162045/http://cgm.cs.mcgill.ca/~avis/C/lrslib/archive/
The website is indeed a bit unclear.

I'll update the doctests and remove the changelog.



---

archive/issue_comments_239804.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-14T17:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239805.json:
```json
{
    "body": "Using historical tarball lrslib-042b; some tests fail. I will investigate.",
    "created_at": "2015-06-14T17:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239805",
    "user": "https://github.com/mkoeppe"
}
```

Using historical tarball lrslib-042b; some tests fail. I will investigate.



---

archive/issue_comments_239806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-14T22:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239807.json:
```json
{
    "body": "Turns out that lrslib-042b.tar.gz was retroactively changed in 2009. The 2009 version fails Sage's doctests.\nThe version available at https://web.archive.org/web/20080606032009/http://cgm.cs.mcgill.ca/~avis/C/lrslib/lrslib-042b.tar.gz (time stamp 30-Oct-2006) is better and is identical to the version used by the old spkg.\nThis passes the doctests.\n\nUpdate: lrslib-043.tar.gz has the same doctest failures.\n\n\n```\n sage -t src/sage/game_theory/parser.py\n**********************************************************************\nFile \"src/sage/game_theory/parser.py\", line 155, in sage.game_theory.parser.Parser.format_lrs\nFailed example:\n    lrs_output[5:-4]  # optional - lrslib\nExpected:\n    ['\\n', '***** 4 4 rational\\n', '2  0  1  2 \\n', '1  1/2  1/2 -2 \\n', '\\n', '2  0  1  2 \\n', '1  0  1 -2 \\n', '\\n', '*Number of equilibria found: 2\\n', '*Player 1: vertices=3 bases=3 pivots=5\\n', '*Player 2: vertices=2 bases=1 pivots=6\\n']\nGot:\n    ['\\n',\n     '***** 4 4 rational\\n',\n     '2  0  1  2 \\n',\n     '1  1/2  1/2 -2 \\n',\n     '\\n',\n     '2  0  1  2 \\n',\n     '1  0  1 -2 \\n',\n     '\\n',\n     '*Number of equilibria found: 2\\n',\n     '*Player 1: vertices=3 bases=3 pivots=5\\n']\n**********************************************************************\nFile \"src/sage/game_theory/parser.py\", line 185, in sage.game_theory.parser.Parser.format_lrs\nFailed example:\n    print lrs_output[5:-4]  # optional - lrslib\nExpected:\n    ['\\n', '***** 5 5 rational\\n', '2  0  1/6  5/6  10/3 \\n', '2  1/7  0  6/7  23/7 \\n', '1  1/3  2/3  0  1 \\n', '\\n', '2  0  0  1  5 \\n', '1  1  0  0  9 \\n', '\\n', '2  1  0  0  5 \\n', '1  0  1  0  6 \\n', '\\n', '*Number of equilibria found: 4\\n', '*Player 1: vertices=6 bases=7 pivots=10\\n', '*Player 2: vertices=4 bases=2 pivots=14\\n']\nGot:\n    ['\\n', '***** 5 5 rational\\n', '2  0  1/6  5/6  10/3 \\n', '2  1/7  0  6/7  23/7 \\n', '1  1/3  2/3  0  1 \\n', '\\n', '2  0  0  1  5 \\n', '1  1  0  0  9 \\n', '\\n', '2  1  0  0  5 \\n', '1  0  1  0  6 \\n', '\\n', '*Number of equilibria found: 4\\n', '*Player 1: vertices=6 bases=7 pivots=10\\n']\n**********************************************************************\n1 item had failures:\n   2 of  36 in sage.game_theory.parser.Parser.format_lrs\n    [58 tests, 2 failures, 0.13 s]\n----------------------------------------------------------------------\nsage -t src/sage/game_theory/parser.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 7.3 seconds\n    cpu time: 6.4 seconds\n    cumulative wall time: 6.9 seconds\negret-2:~/s/sage/sage-develop (t/18127/optional_package_lrs_4_2b_p1_spkg_needs_updating *)$ sage -t --optional=sage,lrslib src/sage/geometry/polyhedron\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2015-06-14-15-28-49-379c9269.\nGit branch: t/18127/optional_package_lrs_4_2b_p1_spkg_needs_updating\nUsing --optional=lrslib,sage\nDoctesting 23 files.\nsage -t src/sage/geometry/polyhedron/__init__.py\n    [0 tests, 0.00 s]\nsage -t src/sage/geometry/polyhedron/all.py\n    [0 tests, 0.00 s]\nsage -t src/sage/geometry/polyhedron/backend_cdd.py\n    [40 tests, 0.33 s]\nsage -t src/sage/geometry/polyhedron/backend_field.py\n    [37 tests, 0.58 s]\nsage -t src/sage/geometry/polyhedron/backend_ppl.py\n    [27 tests, 0.11 s]\nsage -t src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 3392, in sage.geometry.polyhedron.base.Polyhedron_base.volume\nFailed example:\n    P5.volume(engine='lrs') #optional - lrslib\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.volume[8]>\", line 1, in <module>\n        P5.volume(engine='lrs') #optional - lrslib\n      File \"sage/misc/cachefunc.pyx\", line 1896, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/mkoeppe/cvs/sage/src/build/cythonized/sage/misc/cachefunc.c:11432)\n        w = self._cachedmethod._instance_call(self._instance, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 2552, in sage.misc.cachefunc.CachedMethod._instance_call (/Users/mkoeppe/cvs/sage/src/build/cythonized/sage/misc/cachefunc.c:14878)\n        return self._cachedfunc.f(inst, *args, **kwds)\n      File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 3396, in volume\n        return self._volume_lrs(**kwds)\n      File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 3346, in _volume_lrs\n        raise ValueError(\"lrs did not return a volume\")\n    ValueError: lrs did not return a volume\n**********************************************************************\n1 item had failures:\n   1 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.volume\n    [635 tests, 1 failure, 23.10 s]\n```\n",
    "created_at": "2015-06-14T22:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239807",
    "user": "https://github.com/mkoeppe"
}
```

Turns out that lrslib-042b.tar.gz was retroactively changed in 2009. The 2009 version fails Sage's doctests.
The version available at https://web.archive.org/web/20080606032009/http://cgm.cs.mcgill.ca/~avis/C/lrslib/lrslib-042b.tar.gz (time stamp 30-Oct-2006) is better and is identical to the version used by the old spkg.
This passes the doctests.

Update: lrslib-043.tar.gz has the same doctest failures.


```
 sage -t src/sage/game_theory/parser.py
**********************************************************************
File "src/sage/game_theory/parser.py", line 155, in sage.game_theory.parser.Parser.format_lrs
Failed example:
    lrs_output[5:-4]  # optional - lrslib
Expected:
    ['\n', '***** 4 4 rational\n', '2  0  1  2 \n', '1  1/2  1/2 -2 \n', '\n', '2  0  1  2 \n', '1  0  1 -2 \n', '\n', '*Number of equilibria found: 2\n', '*Player 1: vertices=3 bases=3 pivots=5\n', '*Player 2: vertices=2 bases=1 pivots=6\n']
Got:
    ['\n',
     '***** 4 4 rational\n',
     '2  0  1  2 \n',
     '1  1/2  1/2 -2 \n',
     '\n',
     '2  0  1  2 \n',
     '1  0  1 -2 \n',
     '\n',
     '*Number of equilibria found: 2\n',
     '*Player 1: vertices=3 bases=3 pivots=5\n']
**********************************************************************
File "src/sage/game_theory/parser.py", line 185, in sage.game_theory.parser.Parser.format_lrs
Failed example:
    print lrs_output[5:-4]  # optional - lrslib
Expected:
    ['\n', '***** 5 5 rational\n', '2  0  1/6  5/6  10/3 \n', '2  1/7  0  6/7  23/7 \n', '1  1/3  2/3  0  1 \n', '\n', '2  0  0  1  5 \n', '1  1  0  0  9 \n', '\n', '2  1  0  0  5 \n', '1  0  1  0  6 \n', '\n', '*Number of equilibria found: 4\n', '*Player 1: vertices=6 bases=7 pivots=10\n', '*Player 2: vertices=4 bases=2 pivots=14\n']
Got:
    ['\n', '***** 5 5 rational\n', '2  0  1/6  5/6  10/3 \n', '2  1/7  0  6/7  23/7 \n', '1  1/3  2/3  0  1 \n', '\n', '2  0  0  1  5 \n', '1  1  0  0  9 \n', '\n', '2  1  0  0  5 \n', '1  0  1  0  6 \n', '\n', '*Number of equilibria found: 4\n', '*Player 1: vertices=6 bases=7 pivots=10\n']
**********************************************************************
1 item had failures:
   2 of  36 in sage.game_theory.parser.Parser.format_lrs
    [58 tests, 2 failures, 0.13 s]
----------------------------------------------------------------------
sage -t src/sage/game_theory/parser.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 7.3 seconds
    cpu time: 6.4 seconds
    cumulative wall time: 6.9 seconds
egret-2:~/s/sage/sage-develop (t/18127/optional_package_lrs_4_2b_p1_spkg_needs_updating *)$ sage -t --optional=sage,lrslib src/sage/geometry/polyhedron
too few successful tests, not using stored timings
Running doctests with ID 2015-06-14-15-28-49-379c9269.
Git branch: t/18127/optional_package_lrs_4_2b_p1_spkg_needs_updating
Using --optional=lrslib,sage
Doctesting 23 files.
sage -t src/sage/geometry/polyhedron/__init__.py
    [0 tests, 0.00 s]
sage -t src/sage/geometry/polyhedron/all.py
    [0 tests, 0.00 s]
sage -t src/sage/geometry/polyhedron/backend_cdd.py
    [40 tests, 0.33 s]
sage -t src/sage/geometry/polyhedron/backend_field.py
    [37 tests, 0.58 s]
sage -t src/sage/geometry/polyhedron/backend_ppl.py
    [27 tests, 0.11 s]
sage -t src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 3392, in sage.geometry.polyhedron.base.Polyhedron_base.volume
Failed example:
    P5.volume(engine='lrs') #optional - lrslib
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.volume[8]>", line 1, in <module>
        P5.volume(engine='lrs') #optional - lrslib
      File "sage/misc/cachefunc.pyx", line 1896, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/mkoeppe/cvs/sage/src/build/cythonized/sage/misc/cachefunc.c:11432)
        w = self._cachedmethod._instance_call(self._instance, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 2552, in sage.misc.cachefunc.CachedMethod._instance_call (/Users/mkoeppe/cvs/sage/src/build/cythonized/sage/misc/cachefunc.c:14878)
        return self._cachedfunc.f(inst, *args, **kwds)
      File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 3396, in volume
        return self._volume_lrs(**kwds)
      File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 3346, in _volume_lrs
        raise ValueError("lrs did not return a volume")
    ValueError: lrs did not return a volume
**********************************************************************
1 item had failures:
   1 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.volume
    [635 tests, 1 failure, 23.10 s]
```




---

archive/issue_comments_239808.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T00:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239809.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-15T00:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239809",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239810.json:
```json
{
    "body": "Done with updating the package; needs review now.",
    "created_at": "2015-06-15T00:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239810",
    "user": "https://github.com/mkoeppe"
}
```

Done with updating the package; needs review now.



---

archive/issue_comments_239811.json:
```json
{
    "body": "Replying to [comment:16 mkoeppe]:\n> Done with updating the package; needs review now. \nThanks a lot! \nThe function `redund` from the updated package lrslib-051 succeeded on the bug example that I encountered with lrslib-042b previously.",
    "created_at": "2015-06-15T01:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239811",
    "user": "https://github.com/yuan-zhou"
}
```

Replying to [comment:16 mkoeppe]:
> Done with updating the package; needs review now. 
Thanks a lot! 
The function `redund` from the updated package lrslib-051 succeeded on the bug example that I encountered with lrslib-042b previously.



---

archive/issue_comments_239812.json:
```json
{
    "body": "My experience is that a simple hand-written makefile for building libraries is not portable. It might work on one particular operating system, but almost certainly not an all.\n\nSo I think you should use autotools (autoconf + automake + libtool) to build the package (or make the package \"experimental\" such that it's explicit that it might not work).",
    "created_at": "2015-06-15T06:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239812",
    "user": "https://github.com/jdemeyer"
}
```

My experience is that a simple hand-written makefile for building libraries is not portable. It might work on one particular operating system, but almost certainly not an all.

So I think you should use autotools (autoconf + automake + libtool) to build the package (or make the package "experimental" such that it's explicit that it might not work).



---

archive/issue_comments_239813.json:
```json
{
    "body": "I just replaced the url by the 'official one', given by the software's author. The hash is the same, so no problem ahead.\n\nHe is now aware of the 404 error on his 'download' link, and should get it fixed soon.",
    "created_at": "2015-06-15T10:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239813",
    "user": "https://github.com/nathanncohen"
}
```

I just replaced the url by the 'official one', given by the software's author. The hash is the same, so no problem ahead.

He is now aware of the 404 error on his 'download' link, and should get it fixed soon.



---

archive/issue_comments_239814.json:
```json
{
    "body": "Helloooooooooo,\n\nInstead of a full copy of the files, the patches/ folder usually contains... patches. Could you only keep .patch files in there?\n\nI will send an email to the author in a second about an autotools versions.\n\nNathann",
    "created_at": "2015-06-15T12:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239814",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooo,

Instead of a full copy of the files, the patches/ folder usually contains... patches. Could you only keep .patch files in there?

I will send an email to the author in a second about an autotools versions.

Nathann



---

archive/issue_comments_239815.json:
```json
{
    "body": "Cc:ing a few folks who will want to know about any changes in game theory tests so as to avoid conflicts during GSOC.",
    "created_at": "2015-06-15T14:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239815",
    "user": "https://github.com/kcrisman"
}
```

Cc:ing a few folks who will want to know about any changes in game theory tests so as to avoid conflicts during GSOC.



---

archive/issue_comments_239816.json:
```json
{
    "body": "Adding James also.",
    "created_at": "2015-06-15T14:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239816",
    "user": "https://github.com/drvinceknight"
}
```

Adding James also.



---

archive/issue_comments_239817.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T18:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239817",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239818.json:
```json
{
    "body": "I got several errors when installing this package. The log follows\n\n```\n~$ sage -f lrslib\nFound local metadata for lrslib-051\nUsing cached file /home/ncohen/.Sage/upstream/lrslib-051.tar.gz\nlrslib-051\n====================================================\nSetting up build directory for lrslib-051\nFinished set up\n****************************************************\nHost system:\nLinux weightless 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=/home/ncohen/.Sage/local/bin/gcc\nCOLLECT_LTO_WRAPPER=/home/ncohen/.Sage/local/libexec/gcc/x86_64-unknown-linux-gnu/4.9.2/lto-wrapper\nTarget: x86_64-unknown-linux-gnu\nConfigured with: ../src/configure --prefix=/home/ncohen/.Sage/local --with-local-prefix=/home/ncohen/.Sage/local --with-gmp=/home/ncohen/.Sage/local --with-mpfr=/home/ncohen/.Sage/local --with-mpc=/home/ncohen/.Sage/local --with-system-zlib --disable-multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm  \nThread model: posix\ngcc version 4.9.2 (GCC) \n****************************************************\ncp: cannot stat 'patches/makefile': No such file or directory\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrslib-GMP.o lrslib.c\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrsgmp-GMP.o lrsgmp.c\nar r liblrsgmp.a lrslib-GMP.o lrsgmp-GMP.o\nar: creating liblrsgmp.a\nranlib liblrsgmp.a\nmake -j4 LRSGMPLIB=liblrsgmp.a all\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nmake[1]: Entering directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o 2nash-GMP.o 2nash.c\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrs-GMP.o lrs.c\ngcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DLONG -o lrs1 lrs.c lrslib.c lrslong.c\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o nash-GMP.o nash.c\ngcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o redund-GMP.o redund.c\ngcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DLONG -o redund1 redund.c lrslib.c lrslong.c\ngcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -o setnash setupnash.c lrslib.c lrsmp.c\ngcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -o setnash2 setupnash2.c lrslib.c lrsmp.c\ngcc 2nash-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o 2nash\ngcc lrs-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o lrs\ngcc nash-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o nash\ngcc redund-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o redund\nrm 2nash-GMP.o lrs-GMP.o nash-GMP.o redund-GMP.o\nmake[1]: Leaving directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'\nmake -j4 LRSGMPLIB=liblrsgmp.a all\nmkdir -p /usr/local/bin\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\ninstall -t /usr/local/bin 2nash lrs lrs1 nash redund redund1 setnash setnash2\ninstall: cannot create regular file '/usr/local/bin/2nash': Permission denied\ninstall: cannot create regular file '/usr/local/bin/lrs': Permission denied\ninstall: cannot create regular file '/usr/local/bin/lrs1': Permission denied\ninstall: cannot create regular file '/usr/local/bin/nash': Permission denied\ninstall: cannot create regular file '/usr/local/bin/redund': Permission denied\ninstall: cannot create regular file '/usr/local/bin/redund1': Permission denied\ninstall: cannot create regular file '/usr/local/bin/setnash': Permission denied\ninstall: cannot create regular file '/usr/local/bin/setnash2': Permission denied\nmakefile:119: recipe for target 'install-common' failed\nmake: *** [install-common] Error 1\nmake: *** Waiting for unfinished jobs....\nmake[1]: Entering directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'\nmake[1]: Nothing to be done for 'all'.\nmake[1]: Leaving directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'\nError installing lrs\n\nreal\t0m3.036s\nuser\t0m10.768s\nsys\t0m0.208s\n************************************************************************\nError installing package lrslib-051\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the relevant part of the log file\n  /home/ncohen/.Sage/logs/pkgs/lrslib-051.log\nDescribe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051 and type 'make' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n  (cd '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051' && '/home/ncohen/.Sage/sage' --sh)\nWhen you are done debugging, you can type \"exit\" to leave the subshell.\n************************************************************************\n```\n\n\nNote in particular the \n\n```\ncp: cannot stat 'patches/makefile': No such file or directory\n```\n",
    "created_at": "2015-06-15T21:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239818",
    "user": "https://github.com/nathanncohen"
}
```

I got several errors when installing this package. The log follows

```
~$ sage -f lrslib
Found local metadata for lrslib-051
Using cached file /home/ncohen/.Sage/upstream/lrslib-051.tar.gz
lrslib-051
====================================================
Setting up build directory for lrslib-051
Finished set up
****************************************************
Host system:
Linux weightless 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=/home/ncohen/.Sage/local/bin/gcc
COLLECT_LTO_WRAPPER=/home/ncohen/.Sage/local/libexec/gcc/x86_64-unknown-linux-gnu/4.9.2/lto-wrapper
Target: x86_64-unknown-linux-gnu
Configured with: ../src/configure --prefix=/home/ncohen/.Sage/local --with-local-prefix=/home/ncohen/.Sage/local --with-gmp=/home/ncohen/.Sage/local --with-mpfr=/home/ncohen/.Sage/local --with-mpc=/home/ncohen/.Sage/local --with-system-zlib --disable-multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm  
Thread model: posix
gcc version 4.9.2 (GCC) 
****************************************************
cp: cannot stat 'patches/makefile': No such file or directory
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrslib-GMP.o lrslib.c
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrsgmp-GMP.o lrsgmp.c
ar r liblrsgmp.a lrslib-GMP.o lrsgmp-GMP.o
ar: creating liblrsgmp.a
ranlib liblrsgmp.a
make -j4 LRSGMPLIB=liblrsgmp.a all
make[1]: warning: -jN forced in submake: disabling jobserver mode.
make[1]: Entering directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o 2nash-GMP.o 2nash.c
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o lrs-GMP.o lrs.c
gcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DLONG -o lrs1 lrs.c lrslib.c lrslong.c
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o nash-GMP.o nash.c
gcc -c -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DGMP -o redund-GMP.o redund.c
gcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -DLONG -o redund1 redund.c lrslib.c lrslong.c
gcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -o setnash setupnash.c lrslib.c lrsmp.c
gcc -O3 -DLRS_QUIET -DTIMES -DSIGNALS -o setnash2 setupnash2.c lrslib.c lrsmp.c
gcc 2nash-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o 2nash
gcc lrs-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o lrs
gcc nash-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o nash
gcc redund-GMP.o -L. -llrsgmp -L/usr/lib  -lgmp -o redund
rm 2nash-GMP.o lrs-GMP.o nash-GMP.o redund-GMP.o
make[1]: Leaving directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'
make -j4 LRSGMPLIB=liblrsgmp.a all
mkdir -p /usr/local/bin
make[1]: warning: -jN forced in submake: disabling jobserver mode.
install -t /usr/local/bin 2nash lrs lrs1 nash redund redund1 setnash setnash2
install: cannot create regular file '/usr/local/bin/2nash': Permission denied
install: cannot create regular file '/usr/local/bin/lrs': Permission denied
install: cannot create regular file '/usr/local/bin/lrs1': Permission denied
install: cannot create regular file '/usr/local/bin/nash': Permission denied
install: cannot create regular file '/usr/local/bin/redund': Permission denied
install: cannot create regular file '/usr/local/bin/redund1': Permission denied
install: cannot create regular file '/usr/local/bin/setnash': Permission denied
install: cannot create regular file '/usr/local/bin/setnash2': Permission denied
makefile:119: recipe for target 'install-common' failed
make: *** [install-common] Error 1
make: *** Waiting for unfinished jobs....
make[1]: Entering directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051/src'
Error installing lrs

real	0m3.036s
user	0m10.768s
sys	0m0.208s
************************************************************************
Error installing package lrslib-051
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /home/ncohen/.Sage/logs/pkgs/lrslib-051.log
Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051 and type 'make' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '/home/ncohen/.Sage/local/var/tmp/sage/build/lrslib-051' && '/home/ncohen/.Sage/sage' --sh)
When you are done debugging, you can type "exit" to leave the subshell.
************************************************************************
```


Note in particular the 

```
cp: cannot stat 'patches/makefile': No such file or directory
```




---

archive/issue_comments_239819.json:
```json
{
    "body": "sorry, forgot to commit 1 file",
    "created_at": "2015-06-15T21:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239819",
    "user": "https://github.com/mkoeppe"
}
```

sorry, forgot to commit 1 file



---

archive/issue_comments_239820.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T21:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239821.json:
```json
{
    "body": "For those interested in software archaeology, I have created a github repository that tracks the contents of the historical tarballs of lrslib since version 4.0 (040): https://github.com/mkoeppe/lrslib",
    "created_at": "2015-06-16T04:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239821",
    "user": "https://github.com/mkoeppe"
}
```

For those interested in software archaeology, I have created a github repository that tracks the contents of the historical tarballs of lrslib since version 4.0 (040): https://github.com/mkoeppe/lrslib



---

archive/issue_comments_239822.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-16T05:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239823.json:
```json
{
    "body": "Needs review again",
    "created_at": "2015-06-16T05:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239823",
    "user": "https://github.com/mkoeppe"
}
```

Needs review again



---

archive/issue_comments_239824.json:
```json
{
    "body": "Hello !\n\nThe package was installed correctly with this new branch, but several doctests were breaking. There are leftovet 'lrs' in the code, which you probably do not see if you have installed the former version of the 'lrs' spkg on your computer. I fixed them in a commit at `public/18127`.\n\nWith this commit, the branch is (in my opinion) ready to go.\n\nFor those who are not in Cc of the mail exchange with the package's author: he told us that his makefile was custom-made to work with polymake, and that it had been tested on \"several OS/architecture without problem\". The changes we make to their makefile are very simple:\n- change harcoded paths to include SAGE_ROOT\n- replace 'install' by 'cp'\n\nAbout autotool: they see no point in doing it themselves, but they would not mind such a contribution.\n\nAs this package has been optional for a long while now, I believe that we can keep it as it is for the moment, and autotoolize it later if we need it.\n\nWhat about you, Jeroen?\n\nNathann\n\nP.S.: The 'download' link on the author's website is now fixed\nP.S2: One of the authors 'would not mind' an autotoolized build system, while the other would prefer to update his makefile if that's possible, whenever we meet a problem on some architecture.",
    "created_at": "2015-06-16T07:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239824",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

The package was installed correctly with this new branch, but several doctests were breaking. There are leftovet 'lrs' in the code, which you probably do not see if you have installed the former version of the 'lrs' spkg on your computer. I fixed them in a commit at `public/18127`.

With this commit, the branch is (in my opinion) ready to go.

For those who are not in Cc of the mail exchange with the package's author: he told us that his makefile was custom-made to work with polymake, and that it had been tested on "several OS/architecture without problem". The changes we make to their makefile are very simple:
- change harcoded paths to include SAGE_ROOT
- replace 'install' by 'cp'

About autotool: they see no point in doing it themselves, but they would not mind such a contribution.

As this package has been optional for a long while now, I believe that we can keep it as it is for the moment, and autotoolize it later if we need it.

What about you, Jeroen?

Nathann

P.S.: The 'download' link on the author's website is now fixed
P.S2: One of the authors 'would not mind' an autotoolized build system, while the other would prefer to update his makefile if that's possible, whenever we meet a problem on some architecture.



---

archive/issue_comments_239825.json:
```json
{
    "body": "I would prefer to make *minimal* changes to the `makefile`, I think these changes can be removed:\n\n```diff\n+### modified for Sage\n+\n```\n\nand the commenting-out of the unused targets `plrs` and `plrsmp`.",
    "created_at": "2015-06-16T09:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239825",
    "user": "https://github.com/jdemeyer"
}
```

I would prefer to make *minimal* changes to the `makefile`, I think these changes can be removed:

```diff
+### modified for Sage
+
```

and the commenting-out of the unused targets `plrs` and `plrsmp`.



---

archive/issue_comments_239826.json:
```json
{
    "body": "There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:\n\n```\n* ``'lrs'``: Reverse search vertex enumeration for 2 player games. This\n  algorithm uses the optional 'lrs' package. To install it type ``sage -i\n  lrslib`` at the command line. For more information see [A2000]_.\n```\n\n\n```\nNote that if no algorithm argument is passed then the default will be\nselected according to the following order (if the corresponding package is\ninstalled):\n\n    1. ``'lrs'`` (requires 'lrs')\n```\n\n\n```\n        if not algorithm:\n            if is_package_installed('lrs'):\n                algorithm = \"lrs\"\n            else:\n                algorithm = \"enumeration\"\n\n        if algorithm == \"lrs\":\n            if not is_package_installed('lrs'):\n                raise NotImplementedError(\"lrs is not installed\")\n```\n",
    "created_at": "2015-06-16T09:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239826",
    "user": "https://github.com/jdemeyer"
}
```

There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:

```
* ``'lrs'``: Reverse search vertex enumeration for 2 player games. This
  algorithm uses the optional 'lrs' package. To install it type ``sage -i
  lrslib`` at the command line. For more information see [A2000]_.
```


```
Note that if no algorithm argument is passed then the default will be
selected according to the following order (if the corresponding package is
installed):

    1. ``'lrs'`` (requires 'lrs')
```


```
        if not algorithm:
            if is_package_installed('lrs'):
                algorithm = "lrs"
            else:
                algorithm = "enumeration"

        if algorithm == "lrs":
            if not is_package_installed('lrs'):
                raise NotImplementedError("lrs is not installed")
```




---

archive/issue_comments_239827.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-16T09:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239827",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239828.json:
```json
{
    "body": "> There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:\n\nI fixed those in `public/18127` (see [comment:32]).\n\nNathann",
    "created_at": "2015-06-16T09:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239828",
    "user": "https://github.com/nathanncohen"
}
```

> There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:

I fixed those in `public/18127` (see [comment:32]).

Nathann



---

archive/issue_comments_239829.json:
```json
{
    "body": "Also, don't `print` exceptions, but `raise` them:\n\n```\nprint 'You must install the optional lrslib package ' \\\n    'for this function to work'\n```\n",
    "created_at": "2015-06-16T09:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239829",
    "user": "https://github.com/jdemeyer"
}
```

Also, don't `print` exceptions, but `raise` them:

```
print 'You must install the optional lrslib package ' \
    'for this function to work'
```




---

archive/issue_comments_239830.json:
```json
{
    "body": "Replying to [comment:35 ncohen]:\n> I fixed those in `public/18127` (see [comment:32]).\n\nBut the branch under review is `u/mkoeppe/optional_package_lrs_4_2b_p1_spkg_needs_updating`. If you want a different branch to be reviewed, then change the branch...",
    "created_at": "2015-06-16T09:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239830",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:35 ncohen]:
> I fixed those in `public/18127` (see [comment:32]).

But the branch under review is `u/mkoeppe/optional_package_lrs_4_2b_p1_spkg_needs_updating`. If you want a different branch to be reviewed, then change the branch...



---

archive/issue_comments_239831.json:
```json
{
    "body": "> But the branch under review is `u/mkoeppe/optional_package_lrs_4_2b_p1_spkg_needs_updating`. If you want a different branch to be reviewed, then change the branch...\n\nI do not change the branch of somebody else's ticket. The author will do that if he agrees with the changes.",
    "created_at": "2015-06-16T09:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239831",
    "user": "https://github.com/nathanncohen"
}
```

> But the branch under review is `u/mkoeppe/optional_package_lrs_4_2b_p1_spkg_needs_updating`. If you want a different branch to be reviewed, then change the branch...

I do not change the branch of somebody else's ticket. The author will do that if he agrees with the changes.



---

archive/issue_comments_239832.json:
```json
{
    "body": "Replying to [comment:32 ncohen]:\n> it had been tested on \"several OS/architecture without problem\"\n\nI see that we are only using the executable, not the library. That's acceptable for now, but I bet that there will be build problems if we ever decide to use `lrslib` as a library, without using `libtool`.",
    "created_at": "2015-06-16T09:20:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239832",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:32 ncohen]:
> it had been tested on "several OS/architecture without problem"

I see that we are only using the executable, not the library. That's acceptable for now, but I bet that there will be build problems if we ever decide to use `lrslib` as a library, without using `libtool`.



---

archive/issue_comments_239833.json:
```json
{
    "body": "Replying to [comment:38 ncohen]:\n> The author will do that if he agrees with the changes.\nFine, but then don't set the ticket to needs_review.",
    "created_at": "2015-06-16T09:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239833",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:38 ncohen]:
> The author will do that if he agrees with the changes.
Fine, but then don't set the ticket to needs_review.



---

archive/issue_comments_239834.json:
```json
{
    "body": "Well...",
    "created_at": "2015-06-16T09:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239834",
    "user": "https://github.com/dimpase"
}
```

Well...



---

archive/issue_comments_239835.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-16T09:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239835",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239836.json:
```json
{
    "body": "See [comment:33] and [comment:36]",
    "created_at": "2015-06-16T09:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239836",
    "user": "https://github.com/jdemeyer"
}
```

See [comment:33] and [comment:36]



---

archive/issue_comments_239837.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-16T09:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239837",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239838.json:
```json
{
    "body": "Also, replace\n\n```\nis_package_installed('lrslib') != True\n```\n\nby\n\n```\nnot is_package_installed('lrslib')\n```\n",
    "created_at": "2015-06-16T09:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239838",
    "user": "https://github.com/jdemeyer"
}
```

Also, replace

```
is_package_installed('lrslib') != True
```

by

```
not is_package_installed('lrslib')
```




---

archive/issue_comments_239839.json:
```json
{
    "body": "> There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:\n\nRegardless of the branch involved, it would be nice if the folks *actively developing* that file could have a chance to comment.  Or Dima, do you have any comments from the GSOC group as to preferred name etc.?",
    "created_at": "2015-06-16T11:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239839",
    "user": "https://github.com/kcrisman"
}
```

> There are still some references to a `lrs` package in `src/sage/game_theory/normal_form_game.py`:

Regardless of the branch involved, it would be nice if the folks *actively developing* that file could have a chance to comment.  Or Dima, do you have any comments from the GSOC group as to preferred name etc.?



---

archive/issue_comments_239840.json:
```json
{
    "body": "Hi all, thanks again for pinging us here. James, Tobenna and I have been following along and can't say that we have strong feelings either way. Depending on which branch gets merged in to develop first we should be able to adjust.\n\nAs James said:\n\n> 'As long as everything gets changed and it all works'",
    "created_at": "2015-06-16T14:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239840",
    "user": "https://github.com/drvinceknight"
}
```

Hi all, thanks again for pinging us here. James, Tobenna and I have been following along and can't say that we have strong feelings either way. Depending on which branch gets merged in to develop first we should be able to adjust.

As James said:

> 'As long as everything gets changed and it all works'



---

archive/issue_comments_239841.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-16T20:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239842.json:
```json
{
    "body": "Replying to [comment:46 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[32e2f2e](http://git.sagemath.org/sage.git/commit/?id=32e2f2e69c58fefdacecff490d5fde97977f58d3)||`fixed as requested in comments #33 and #36`||\n\nand comment 43 too.",
    "created_at": "2015-06-16T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239842",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:46 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[32e2f2e](http://git.sagemath.org/sage.git/commit/?id=32e2f2e69c58fefdacecff490d5fde97977f58d3)||`fixed as requested in comments #33 and #36`||

and comment 43 too.



---

archive/issue_comments_239843.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-16T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239843",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239844.json:
```json
{
    "body": "If it passes `make ptestlong` (I haven't checked), this is good for me.",
    "created_at": "2015-06-16T20:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239844",
    "user": "https://github.com/jdemeyer"
}
```

If it passes `make ptestlong` (I haven't checked), this is good for me.



---

archive/issue_comments_239845.json:
```json
{
    "body": "Replying to [comment:48 jdemeyer]:\n> If it passes `make ptestlong` (I haven't checked), this is good for me.\n\nit does.",
    "created_at": "2015-06-16T20:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239845",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:48 jdemeyer]:
> If it passes `make ptestlong` (I haven't checked), this is good for me.

it does.



---

archive/issue_comments_239846.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-16T20:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239846",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239847.json:
```json
{
    "body": "Thanks, Nathann and Dima, for your fixes, Jeroen for the positive review, and everyone for their comments and their help with the ticket.\n\nMatthias",
    "created_at": "2015-06-16T21:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239847",
    "user": "https://github.com/mkoeppe"
}
```

Thanks, Nathann and Dima, for your fixes, Jeroen for the positive review, and everyone for their comments and their help with the ticket.

Matthias



---

archive/issue_comments_239848.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-06-17T18:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239848",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_239849.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 3405, in sage.geometry.polyhedron.base.Polyhedron_base.volume\nFailed example:\n    I.volume(engine='lrs')\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.volume[11]>\", line 1, in <module>\n        I.volume(engine='lrs')\n      File \"sage/misc/cachefunc.pyx\", line 1896, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:11437)\n        w = self._cachedmethod._instance_call(self._instance, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 2552, in sage.misc.cachefunc.CachedMethod._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:14883)\n        return self._cachedfunc.f(inst, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 3409, in volume\n        return self._volume_lrs(**kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 3319, in _volume_lrs\n        raise NotImplementedError('You must install the optional lrslib package '\n    NotImplementedError: You must install the optional lrslib package for this function to work\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.geometry.polyhedron.base.Polyhedron_base.volume\n    [637 tests, 1 failure, 28.11 s]\n```\n",
    "created_at": "2015-06-17T18:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239849",
    "user": "https://github.com/vbraun"
}
```


```
sage -t --long src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 3405, in sage.geometry.polyhedron.base.Polyhedron_base.volume
Failed example:
    I.volume(engine='lrs')
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.volume[11]>", line 1, in <module>
        I.volume(engine='lrs')
      File "sage/misc/cachefunc.pyx", line 1896, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:11437)
        w = self._cachedmethod._instance_call(self._instance, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 2552, in sage.misc.cachefunc.CachedMethod._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:14883)
        return self._cachedfunc.f(inst, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 3409, in volume
        return self._volume_lrs(**kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 3319, in _volume_lrs
        raise NotImplementedError('You must install the optional lrslib package '
    NotImplementedError: You must install the optional lrslib package for this function to work
**********************************************************************
1 item had failures:
   1 of  13 in sage.geometry.polyhedron.base.Polyhedron_base.volume
    [637 tests, 1 failure, 28.11 s]
```




---

archive/issue_comments_239850.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T18:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239851.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-17T18:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239851",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239852.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-17T19:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239852",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239853.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-18T17:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17890#issuecomment-239853",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-18T17:58:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17890",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17890#event-17187"
}
```
