# Issue 13040: discriminant of Hecke algebra is broken

Issue created by migration from Trac.

Original creator: AlexGhitza

Original creation time: 2012-07-08 00:44:58

Assignee: craigcitro

Keywords: discriminant hecke


```

----------------------------------------------------------------------
----------------------------------------------------------------------
sage: H = CuspForms(1, 24).hecke_algebra()
sage: H.discriminant()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
| Sage Version 5.0, Release Date: 2012-05-14                         |
| Type notebook() for the GUI, and license() for information.        |
/home/ghitza/<ipython console> in <module>()

/opt/sage-5.0/local/lib/python2.7/site-packages/sage/modular/hecke/algebra.pyc in discriminant(self)
    523         except AttributeError:
    524             pass
--> 525         basis = self.basis()
    526         d = len(basis)
    527         if d <= 1:

/opt/sage-5.0/local/lib/python2.7/site-packages/sage/modular/hecke/algebra.pyc in basis(self)
    472             pass
    473         level = self.level()
--> 474         bound = self.__M.hecke_bound()
    475         dim = self.__M.rank()
    476         if dim == 0:

/opt/sage-5.0/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:6732)()

/opt/sage-5.0/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:3248)()

AttributeError: 'CuspidalSubmodule_level1_Q_with_category' object has no attribute 'hecke_bound'
```



---

Comment by davidloeffler created at 2013-07-22 17:25:17

Changing keywords from "discriminant hecke" to "discriminant hecke beginner sd51".


---

Comment by davidloeffler created at 2013-07-22 17:25:17

This can be corrected in one line by replacing the call to `hecke_bound` with `sturm_bound`.


---

Comment by davidloeffler created at 2013-07-23 14:14:46

Correction: what I posted above is wrong -- this would be dangerous and introduce some odd bugs! Better would be to move the definition of `hecke_bound` in ` sage/modular/modsym/subspace.py` to `sage/modular/hecke/submodule.py`. That is, I think, the minimally invasive way to make Hecke algebras of cuspidal modform spaces work properly.


---

Attachment

Sage 5.10


---

Comment by davidloeffler created at 2013-07-24 09:11:24

Changing status from new to needs_review.


---

Comment by AlexGhitza created at 2013-07-24 14:25:02

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-08-16 21:17:41

Resolution: fixed
