# Issue 31467: Remove Python 2 compatibility from manifolds

archive/issues_031467.json:
```json
{
    "body": "CC:  @egourgoulhon @tscrim\n\nCurrently, the manifolds code has still things like\n\n\n```python\n__nonzero__ = __bool__  # For Python2 compatibility\n```\n\n\nwhich should be removed by now.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31704\n\n",
    "created_at": "2021-04-20T14:14:51Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Remove Python 2 compatibility from manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31467",
    "user": "https://github.com/mjungmath"
}
```
CC:  @egourgoulhon @tscrim

Currently, the manifolds code has still things like


```python
__nonzero__ = __bool__  # For Python2 compatibility
```


which should be removed by now.

Issue created by migration from https://trac.sagemath.org/ticket/31704





---

archive/issue_comments_449576.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449576",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_449577.json:
```json
{
    "body": "Thanks for catching this. Here we go...\n----\nNew commits:",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449577",
    "user": "https://github.com/egourgoulhon"
}
```

Thanks for catching this. Here we go...
----
New commits:



---

archive/issue_comments_449578.json:
```json
{
    "body": "Changing type from task to defect.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449578",
    "user": "https://github.com/egourgoulhon"
}
```

Changing type from task to defect.



---

archive/issue_comments_449579.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449579",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_449580.json:
```json
{
    "body": "LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n\n\n```python\nif basis is None: basis = self._fmodule._def_basis\n```\n\n\nShould we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449580",
    "user": "https://github.com/mjungmath"
}
```

LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:


```python
if basis is None: basis = self._fmodule._def_basis
```


Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?



---

archive/issue_comments_449581.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449581",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_449582.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_449583.json:
```json
{
    "body": "Replying to [comment:2 gh-mjungmath]:\n> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n> \n> {{{#!python\n> if basis is None: basis = self._fmodule._def_basis\n> }}}\n> \n> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?\n\nYou're right; let's fix it here (cf. the latest commit).",
    "created_at": "2021-04-21T15:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449583",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:2 gh-mjungmath]:
> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:
> 
> {{{#!python
> if basis is None: basis = self._fmodule._def_basis
> }}}
> 
> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?

You're right; let's fix it here (cf. the latest commit).



---

archive/issue_comments_449584.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449584",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_449585.json:
```json
{
    "body": "Morally green. LGTM.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449585",
    "user": "https://github.com/mjungmath"
}
```

Morally green. LGTM.



---

archive/issue_events_028742.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-06-19T20:58:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31467#event-28742"
}
```



---

archive/issue_comments_449586.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-449586",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
