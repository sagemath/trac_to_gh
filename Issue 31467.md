# Issue 31467: Remove Python 2 compatibility from manifolds

Issue created by migration from https://trac.sagemath.org/ticket/31704

Original creator: @mjungmath

Original creation time: 2021-04-20 14:14:51

CC:  egourgoulhon tscrim

Currently, the manifolds code has still things like


```python
__nonzero__ = __bool__  # For Python2 compatibility
```


which should be removed by now.


---

Comment by egourgoulhon created at 2021-04-21 07:23:52

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2021-04-21 07:23:52

Thanks for catching this. Here we go...
----
New commits:


---

Comment by egourgoulhon created at 2021-04-21 07:23:52

Changing type from task to defect.


---

Comment by @mjungmath created at 2021-04-21 13:29:32

Changing status from needs_review to positive_review.


---

Comment by @mjungmath created at 2021-04-21 13:29:32

LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:


```python
if basis is None: basis = self._fmodule._def_basis
```


Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?


---

Comment by git created at 2021-04-21 15:02:06

Changing status from positive_review to needs_review.


---

Comment by git created at 2021-04-21 15:02:06

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by egourgoulhon created at 2021-04-21 15:03:49

Replying to [comment:2 gh-mjungmath]:
> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:
> 
> {{{#!python
> if basis is None: basis = self._fmodule._def_basis
> }}}
> 
> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?

You're right; let's fix it here (cf. the latest commit).


---

Comment by @mjungmath created at 2021-04-21 17:32:45

Changing status from needs_review to positive_review.


---

Comment by @mjungmath created at 2021-04-21 17:32:45

Morally green. LGTM.


---

Comment by vbraun created at 2021-06-19 20:58:18

Resolution: fixed
