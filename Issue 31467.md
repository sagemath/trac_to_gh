# Issue 31467: Remove Python 2 compatibility from manifolds

archive/issues_031467.json:
```json
{
    "body": "CC:  @egourgoulhon @tscrim\n\nCurrently, the manifolds code has still things like\n\n\n```python\n__nonzero__ = __bool__  # For Python2 compatibility\n```\n\n\nwhich should be removed by now.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31704\n\n",
    "created_at": "2021-04-20T14:14:51Z",
    "labels": [
        "manifolds",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Remove Python 2 compatibility from manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31467",
    "user": "@mjungmath"
}
```
CC:  @egourgoulhon @tscrim

Currently, the manifolds code has still things like


```python
__nonzero__ = __bool__  # For Python2 compatibility
```


which should be removed by now.

Issue created by migration from https://trac.sagemath.org/ticket/31704





---

archive/issue_comments_450117.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450117",
    "user": "@egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_450118.json:
```json
{
    "body": "Thanks for catching this. Here we go...\n----\nNew commits:",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450118",
    "user": "@egourgoulhon"
}
```

Thanks for catching this. Here we go...
----
New commits:



---

archive/issue_comments_450119.json:
```json
{
    "body": "Changing type from task to defect.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450119",
    "user": "@egourgoulhon"
}
```

Changing type from task to defect.



---

archive/issue_comments_450120.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450120",
    "user": "@mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_450121.json:
```json
{
    "body": "LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n\n\n```python\nif basis is None: basis = self._fmodule._def_basis\n```\n\n\nShould we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450121",
    "user": "@mjungmath"
}
```

LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:


```python
if basis is None: basis = self._fmodule._def_basis
```


Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?



---

archive/issue_comments_450122.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450122",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_450123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_450124.json:
```json
{
    "body": "Replying to [comment:2 gh-mjungmath]:\n> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n> \n> {{{#!python\n> if basis is None: basis = self._fmodule._def_basis\n> }}}\n> \n> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?\n\nYou're right; let's fix it here (cf. the latest commit).",
    "created_at": "2021-04-21T15:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450124",
    "user": "@egourgoulhon"
}
```

Replying to [comment:2 gh-mjungmath]:
> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:
> 
> {{{#!python
> if basis is None: basis = self._fmodule._def_basis
> }}}
> 
> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?

You're right; let's fix it here (cf. the latest commit).



---

archive/issue_comments_450125.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450125",
    "user": "@mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_450126.json:
```json
{
    "body": "Morally green. LGTM.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450126",
    "user": "@mjungmath"
}
```

Morally green. LGTM.



---

archive/issue_comments_450127.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31467#issuecomment-450127",
    "user": "@vbraun"
}
```

Resolution: fixed
