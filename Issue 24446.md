# Issue 24446: fix docs for weighted Hamiltonian path.

Issue created by migration from Trac.

Original creator: dimpase

Original creation time: 2018-02-07 14:42:18

CC:  jmantysalo

It says "minimal", but computes "maximal". The latter actually makes sense, as the unweighted case by right computes a longest path.


---

Comment by dcoudert created at 2018-02-11 16:53:28

While playing with the `hamiltonian_path` method, I found the following bug:

```
sage: H = Graph([(0, 1, 1), (0, 2, 3), (1, 3, 1), (2, 3, 1)])
sage: H.hamiltonian_path(use_edge_labels=1, s=0, t=2)
(0, None)
sage: H.longest_path(use_edge_labels=1, s=0, t=2)
(3, Subgraph of (): Graph on 2 vertices)
```

A hamiltonian path in H is `[0, 1, 3, 2]` and has weight 3. The `longest_path` method also finds a path between 0 to 2 of weight 3, but it has only 1 edge and so is not hamiltonian.

Given this bug, I propose to stop calling longest path when searching for a hamiltonian path.

This way, it will also be easier to find a hamiltonian path of minimum or maximum weight.
I will push a branch soon.


---

Comment by dcoudert created at 2018-02-11 19:06:42

Changing status from new to needs_review.


---

Comment by dcoudert created at 2018-02-11 19:06:42

New commits:


---

Comment by git created at 2018-02-11 19:09:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-02-12 08:02:34

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2018-02-12 08:02:34

At least


```
sage: g = Graph()
sage: g.allow_multiple_edges(True)
sage: g.add_edges([(0, 1, 10), (0, 1, 11), (0, 1, 12)])
sage: g.hamiltonian_path()
```


raises an error `NameError: global name 'use_edge_label' is not defined`.

I did not look the code yet.


---

Comment by git created at 2018-02-12 08:08:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-02-12 08:09:35

done.


---

Comment by dcoudert created at 2018-02-12 08:09:35

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2018-02-12 08:14:27

The correction works, and I did not found more bugs by fast search. However, it might take time until I will do a real review.


---

Comment by dcoudert created at 2018-02-12 09:42:38

Thank you for your help.


---

Comment by jmantysalo created at 2018-02-13 10:40:59

Value of `algorithm` is not tested, so `g.hamiltonian_path(algorithm="junk")` is accepted. I don't know if this makes an error now, but it is kind of time-bomb for future changes.

(Not the only place in [SageMath](SageMath) with missing test like this...)

E: Also "We modify the graph to search for a Hamiltonian Cycle starting from" should be Hamiltonian path, not cycle.

E2: Typo "paramter".


---

Comment by jmantysalo created at 2018-02-13 13:06:32

OK, I think I understood this. Was simpler than seen by first. Apart from those minor things I think this is good to go.


---

Comment by git created at 2018-02-13 14:17:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-02-13 14:19:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-02-13 14:28:47

I tried to better explain how I turn the hamiltonian path problem into a hamiltonian cycle problem. Hope it's easier to understand now.

Roughly, If the source (resp. destination) is not given, I add a fake source (resp. destination) and an arc from it to each vertex in the (di)graph (resp. from each vertex of the (di)graph to it). Then I add an extra vertex to force in the cycle the subpath [source, extra vertex, destination] in this order. Given the cycle, it remains to remove the added vertices to get the requested hamiltonian path.


---

Comment by jmantysalo created at 2018-02-13 14:42:21

Seems to be good now. Thanks.


---

Comment by jmantysalo created at 2018-02-13 14:42:21

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2018-02-13 14:47:40

Thanks you for the review.


---

Comment by vbraun created at 2018-02-15 22:46:16

Resolution: fixed
