# Issue 24446: fix docs for weighted Hamiltonian path.

archive/issues_024446.json:
```json
{
    "body": "CC:  jmantysalo\n\nIt says \"minimal\", but computes \"maximal\". The latter actually makes sense, as the unweighted case by right computes a longest path.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24683\n\n",
    "created_at": "2018-02-07T14:42:18Z",
    "labels": [
        "graph theory",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "fix docs for weighted Hamiltonian path.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24446",
    "user": "dimpase"
}
```
CC:  jmantysalo

It says "minimal", but computes "maximal". The latter actually makes sense, as the unweighted case by right computes a longest path.

Issue created by migration from https://trac.sagemath.org/ticket/24683





---

archive/issue_comments_342892.json:
```json
{
    "body": "While playing with the `hamiltonian_path` method, I found the following bug:\n\n```\nsage: H = Graph([(0, 1, 1), (0, 2, 3), (1, 3, 1), (2, 3, 1)])\nsage: H.hamiltonian_path(use_edge_labels=1, s=0, t=2)\n(0, None)\nsage: H.longest_path(use_edge_labels=1, s=0, t=2)\n(3, Subgraph of (): Graph on 2 vertices)\n```\n\nA hamiltonian path in H is `[0, 1, 3, 2]` and has weight 3. The `longest_path` method also finds a path between 0 to 2 of weight 3, but it has only 1 edge and so is not hamiltonian.\n\nGiven this bug, I propose to stop calling longest path when searching for a hamiltonian path.\n\nThis way, it will also be easier to find a hamiltonian path of minimum or maximum weight.\nI will push a branch soon.",
    "created_at": "2018-02-11T16:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342892",
    "user": "dcoudert"
}
```

While playing with the `hamiltonian_path` method, I found the following bug:

```
sage: H = Graph([(0, 1, 1), (0, 2, 3), (1, 3, 1), (2, 3, 1)])
sage: H.hamiltonian_path(use_edge_labels=1, s=0, t=2)
(0, None)
sage: H.longest_path(use_edge_labels=1, s=0, t=2)
(3, Subgraph of (): Graph on 2 vertices)
```

A hamiltonian path in H is `[0, 1, 3, 2]` and has weight 3. The `longest_path` method also finds a path between 0 to 2 of weight 3, but it has only 1 edge and so is not hamiltonian.

Given this bug, I propose to stop calling longest path when searching for a hamiltonian path.

This way, it will also be easier to find a hamiltonian path of minimum or maximum weight.
I will push a branch soon.



---

archive/issue_comments_342893.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-11T19:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342893",
    "user": "dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_342894.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-02-11T19:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342894",
    "user": "dcoudert"
}
```

New commits:



---

archive/issue_comments_342895.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-11T19:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342895",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342896.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-12T08:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342896",
    "user": "jmantysalo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342897.json:
```json
{
    "body": "At least\n\n\n```\nsage: g = Graph()\nsage: g.allow_multiple_edges(True)\nsage: g.add_edges([(0, 1, 10), (0, 1, 11), (0, 1, 12)])\nsage: g.hamiltonian_path()\n```\n\n\nraises an error `NameError: global name 'use_edge_label' is not defined`.\n\nI did not look the code yet.",
    "created_at": "2018-02-12T08:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342897",
    "user": "jmantysalo"
}
```

At least


```
sage: g = Graph()
sage: g.allow_multiple_edges(True)
sage: g.add_edges([(0, 1, 10), (0, 1, 11), (0, 1, 12)])
sage: g.hamiltonian_path()
```


raises an error `NameError: global name 'use_edge_label' is not defined`.

I did not look the code yet.



---

archive/issue_comments_342898.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-12T08:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342898",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342899.json:
```json
{
    "body": "done.",
    "created_at": "2018-02-12T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342899",
    "user": "dcoudert"
}
```

done.



---

archive/issue_comments_342900.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-12T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342900",
    "user": "dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342901.json:
```json
{
    "body": "The correction works, and I did not found more bugs by fast search. However, it might take time until I will do a real review.",
    "created_at": "2018-02-12T08:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342901",
    "user": "jmantysalo"
}
```

The correction works, and I did not found more bugs by fast search. However, it might take time until I will do a real review.



---

archive/issue_comments_342902.json:
```json
{
    "body": "Thank you for your help.",
    "created_at": "2018-02-12T09:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342902",
    "user": "dcoudert"
}
```

Thank you for your help.



---

archive/issue_comments_342903.json:
```json
{
    "body": "Value of `algorithm` is not tested, so `g.hamiltonian_path(algorithm=\"junk\")` is accepted. I don't know if this makes an error now, but it is kind of time-bomb for future changes.\n\n(Not the only place in [SageMath](SageMath) with missing test like this...)\n\nE: Also \"We modify the graph to search for a Hamiltonian Cycle starting from\" should be Hamiltonian path, not cycle.\n\nE2: Typo \"paramter\".",
    "created_at": "2018-02-13T10:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342903",
    "user": "jmantysalo"
}
```

Value of `algorithm` is not tested, so `g.hamiltonian_path(algorithm="junk")` is accepted. I don't know if this makes an error now, but it is kind of time-bomb for future changes.

(Not the only place in [SageMath](SageMath) with missing test like this...)

E: Also "We modify the graph to search for a Hamiltonian Cycle starting from" should be Hamiltonian path, not cycle.

E2: Typo "paramter".



---

archive/issue_comments_342904.json:
```json
{
    "body": "OK, I think I understood this. Was simpler than seen by first. Apart from those minor things I think this is good to go.",
    "created_at": "2018-02-13T13:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342904",
    "user": "jmantysalo"
}
```

OK, I think I understood this. Was simpler than seen by first. Apart from those minor things I think this is good to go.



---

archive/issue_comments_342905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-13T14:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342905",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342906.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-13T14:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342906",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342907.json:
```json
{
    "body": "I tried to better explain how I turn the hamiltonian path problem into a hamiltonian cycle problem. Hope it's easier to understand now.\n\nRoughly, If the source (resp. destination) is not given, I add a fake source (resp. destination) and an arc from it to each vertex in the (di)graph (resp. from each vertex of the (di)graph to it). Then I add an extra vertex to force in the cycle the subpath [source, extra vertex, destination] in this order. Given the cycle, it remains to remove the added vertices to get the requested hamiltonian path.",
    "created_at": "2018-02-13T14:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342907",
    "user": "dcoudert"
}
```

I tried to better explain how I turn the hamiltonian path problem into a hamiltonian cycle problem. Hope it's easier to understand now.

Roughly, If the source (resp. destination) is not given, I add a fake source (resp. destination) and an arc from it to each vertex in the (di)graph (resp. from each vertex of the (di)graph to it). Then I add an extra vertex to force in the cycle the subpath [source, extra vertex, destination] in this order. Given the cycle, it remains to remove the added vertices to get the requested hamiltonian path.



---

archive/issue_comments_342908.json:
```json
{
    "body": "Seems to be good now. Thanks.",
    "created_at": "2018-02-13T14:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342908",
    "user": "jmantysalo"
}
```

Seems to be good now. Thanks.



---

archive/issue_comments_342909.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-13T14:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342909",
    "user": "jmantysalo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_342910.json:
```json
{
    "body": "Thanks you for the review.",
    "created_at": "2018-02-13T14:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342910",
    "user": "dcoudert"
}
```

Thanks you for the review.



---

archive/issue_comments_342911.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-15T22:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24446#issuecomment-342911",
    "user": "vbraun"
}
```

Resolution: fixed
