# Issue 17950: Move the planarity files to a spkg

archive/issues_017950.json:
```json
{
    "body": "CC:  @mezzarobba @videlec tmonteil @dcoudert @jdemeyer\n\nThe contents of sage/graphs/planarity_c is not Sage source but a copy of John Boyer's planarity code [1]. This branch turns it into a (standard) spkg.\n\nNathann\n\n\n[1] https://code.google.com/p/planarity/\n\nIssue created by migration from https://trac.sagemath.org/ticket/18187\n\n",
    "created_at": "2015-04-14T11:59:04Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Move the planarity files to a spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17950",
    "user": "@nathanncohen"
}
```
CC:  @mezzarobba @videlec tmonteil @dcoudert @jdemeyer

The contents of sage/graphs/planarity_c is not Sage source but a copy of John Boyer's planarity code [1]. This branch turns it into a (standard) spkg.

Nathann


[1] https://code.google.com/p/planarity/

Issue created by migration from https://trac.sagemath.org/ticket/18187





---

archive/issue_comments_241171.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-14T12:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241171",
    "user": "@nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241172.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-04-14T12:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241172",
    "user": "@nathanncohen"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_241173.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-14T12:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241173",
    "user": "@nathanncohen"
}
```

New commits:



---

archive/issue_comments_241174.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2015-04-14T12:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241174",
    "user": "@nathanncohen"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_241175.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-14T12:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241175",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241176.json:
```json
{
    "body": "Is this meant to be a standard or optional package? In any case, the current branch obviously doesn't work if `planarity` is not installed:\n\n\n```\n$ make\n...\nbuilding 'sage.graphs.planarity' extension\nExecuting 1 command (using 1 thread)\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/c_lib/include -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/graphs/planarity.c -o build/temp.linux-x86_64-2.7/build/cythonized/sage/graphs/planarity.o -fno-strict-aliasing -w -fno-tree-dominator-opts\nbuild/cythonized/sage/graphs/planarity.c:276:29: fatal error: planarity/graph.h: No such file or directory\n #include \"planarity/graph.h\"\n                             ^\ncompilation terminated.\nerror: command 'gcc' failed with exit status 1\nMakefile:19: recipe for target 'build' failed\nmake: *** [build] Error 1\n```\n\n\nAlso: to be safe, you might want to rebase on top of #18145, especially if you make further changes to the build system.",
    "created_at": "2015-04-14T12:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241176",
    "user": "@jdemeyer"
}
```

Is this meant to be a standard or optional package? In any case, the current branch obviously doesn't work if `planarity` is not installed:


```
$ make
...
building 'sage.graphs.planarity' extension
Executing 1 command (using 1 thread)
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/c_lib/include -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/graphs/planarity.c -o build/temp.linux-x86_64-2.7/build/cythonized/sage/graphs/planarity.o -fno-strict-aliasing -w -fno-tree-dominator-opts
build/cythonized/sage/graphs/planarity.c:276:29: fatal error: planarity/graph.h: No such file or directory
 #include "planarity/graph.h"
                             ^
compilation terminated.
error: command 'gcc' failed with exit status 1
Makefile:19: recipe for target 'build' failed
make: *** [build] Error 1
```


Also: to be safe, you might want to rebase on top of #18145, especially if you make further changes to the build system.



---

archive/issue_comments_241177.json:
```json
{
    "body": "> Is this meant to be a standard or optional package?\n\nA standard package. This code is already part of Sage.\n\n> Also: to be safe, you might want to rebase on top of #18145, especially if you make further changes to the build system.\n\nSecond time I have to rebase on top of that one `:-P`\n\nNathann",
    "created_at": "2015-04-14T12:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241177",
    "user": "@nathanncohen"
}
```

> Is this meant to be a standard or optional package?

A standard package. This code is already part of Sage.

> Also: to be safe, you might want to rebase on top of #18145, especially if you make further changes to the build system.

Second time I have to rebase on top of that one `:-P`

Nathann



---

archive/issue_comments_241178.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-14T12:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241178",
    "user": "@nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241179.json:
```json
{
    "body": "I just checked, and there are no conflicts with #18145 (trivial merge).\n\nNathann",
    "created_at": "2015-04-14T12:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241179",
    "user": "@nathanncohen"
}
```

I just checked, and there are no conflicts with #18145 (trivial merge).

Nathann



---

archive/issue_comments_241180.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-14T12:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241180",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241181.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n> I just checked, and there are no conflicts with #18145 (trivial merge).\n\nI know, that ticket is just prone to conflicts. But it's also an important ticket. I hope you like the new syntax for optional packages in #18145.",
    "created_at": "2015-04-14T12:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241181",
    "user": "@jdemeyer"
}
```

Replying to [comment:4 ncohen]:
> I just checked, and there are no conflicts with #18145 (trivial merge).

I know, that ticket is just prone to conflicts. But it's also an important ticket. I hope you like the new syntax for optional packages in #18145.



---

archive/issue_comments_241182.json:
```json
{
    "body": "> I know, that ticket is just prone to conflicts. But it's also an important ticket. I hope you like the new syntax for optional packages in #18145.\n\nYepyep, it's indeed much much cleaner!!\n\nNathann",
    "created_at": "2015-04-14T13:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241182",
    "user": "@nathanncohen"
}
```

> I know, that ticket is just prone to conflicts. But it's also an important ticket. I hope you like the new syntax for optional packages in #18145.

Yepyep, it's indeed much much cleaner!!

Nathann



---

archive/issue_comments_241183.json:
```json
{
    "body": "When building a library in a portable way, you must use some program like `libtool`.",
    "created_at": "2015-04-22T11:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241183",
    "user": "@jdemeyer"
}
```

When building a library in a portable way, you must use some program like `libtool`.



---

archive/issue_comments_241184.json:
```json
{
    "body": "I wonder if you could not use install the `.c` and `.h` sources somewhere instead of building a library.",
    "created_at": "2015-04-22T11:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241184",
    "user": "@jdemeyer"
}
```

I wonder if you could not use install the `.c` and `.h` sources somewhere instead of building a library.



---

archive/issue_comments_241185.json:
```json
{
    "body": "Or move `planarity` not to a spkg but to `src/ext/planarity`.",
    "created_at": "2015-04-22T12:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241185",
    "user": "@jdemeyer"
}
```

Or move `planarity` not to a spkg but to `src/ext/planarity`.



---

archive/issue_comments_241186.json:
```json
{
    "body": "> Or move `planarity` not to a spkg but to `src/ext/planarity`.\n\nHmmmm... I prefer the libtool way out. These files haven't been reviewed, so I do not think that they should be in our code directly.",
    "created_at": "2015-04-22T13:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241186",
    "user": "@nathanncohen"
}
```

> Or move `planarity` not to a spkg but to `src/ext/planarity`.

Hmmmm... I prefer the libtool way out. These files haven't been reviewed, so I do not think that they should be in our code directly.



---

archive/issue_comments_241187.json:
```json
{
    "body": "Replying to [comment:11 ncohen]:\n> These files haven't been reviewed, so I do not think that they should be in our code directly.\nWell, `src/ext` is not considered \"our code\", so that's not a problem.",
    "created_at": "2015-04-22T13:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241187",
    "user": "@jdemeyer"
}
```

Replying to [comment:11 ncohen]:
> These files haven't been reviewed, so I do not think that they should be in our code directly.
Well, `src/ext` is not considered "our code", so that's not a problem.



---

archive/issue_comments_241188.json:
```json
{
    "body": "What exactly is it meant to contain? There is also a src/sage/ext/ directory `O_o`",
    "created_at": "2015-04-22T14:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241188",
    "user": "@nathanncohen"
}
```

What exactly is it meant to contain? There is also a src/sage/ext/ directory `O_o`



---

archive/issue_comments_241189.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> What exactly is it meant to contain?\nWell, that's not so clear :-)\n\nAt least, it contains certain non-Sage code for PARI and GAP.",
    "created_at": "2015-04-22T14:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241189",
    "user": "@jdemeyer"
}
```

Replying to [comment:13 ncohen]:
> What exactly is it meant to contain?
Well, that's not so clear :-)

At least, it contains certain non-Sage code for PARI and GAP.



---

archive/issue_comments_241190.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-25T22:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241190",
    "user": "@nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241191.json:
```json
{
    "body": "Now with an autotooled package `;-)`\n\nSo ? So ? So ? `:-P`\n\nNathann",
    "created_at": "2015-04-25T22:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241191",
    "user": "@nathanncohen"
}
```

Now with an autotooled package `;-)`

So ? So ? So ? `:-P`

Nathann



---

archive/issue_comments_241192.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-25T22:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241192",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241193.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-26T08:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241193",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241194.json:
```json
{
    "body": "Well, the spkg is still not built by default (see `build/deps` and `build/install`).\n\nDid you report your changes upstream?",
    "created_at": "2015-04-26T08:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241194",
    "user": "@jdemeyer"
}
```

Well, the spkg is still not built by default (see `build/deps` and `build/install`).

Did you report your changes upstream?



---

archive/issue_comments_241195.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-26T08:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241195",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241196.json:
```json
{
    "body": "Helloooooo,\n\n> Well, the spkg is still not built by default (see `build/deps` and `build/install`).\n\nRight! Fixed.\n\n> Did you report your changes upstream?\n\nNo I didn't, and for two reasons:\n1) What we have in Sage is apparently an old version of the files. When building the first version of this package (without autotools) I tried to use the new ones, but did not figure out how they should be compiled.\n\n2) The makefiles this archive contains are only made to build everything as a shared library, while upstream also builds an independent executable and maybe some other things. They probably wouldn't like what I wrote.\n\nI plan to do both, however, and I will start by sending them an email to ask whether they would accept such a pull request. Then I will try to figure out how to make it all work properly, and we will update our version of this package.\n\nNathann",
    "created_at": "2015-04-26T08:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241196",
    "user": "@nathanncohen"
}
```

Helloooooo,

> Well, the spkg is still not built by default (see `build/deps` and `build/install`).

Right! Fixed.

> Did you report your changes upstream?

No I didn't, and for two reasons:
1) What we have in Sage is apparently an old version of the files. When building the first version of this package (without autotools) I tried to use the new ones, but did not figure out how they should be compiled.

2) The makefiles this archive contains are only made to build everything as a shared library, while upstream also builds an independent executable and maybe some other things. They probably wouldn't like what I wrote.

I plan to do both, however, and I will start by sending them an email to ask whether they would accept such a pull request. Then I will try to figure out how to make it all work properly, and we will update our version of this package.

Nathann



---

archive/issue_comments_241197.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-26T08:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241197",
    "user": "@nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241198.json:
```json
{
    "body": "Nathann, I will make a new package using your autotools tarball.",
    "created_at": "2015-05-05T12:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241198",
    "user": "@jdemeyer"
}
```

Nathann, I will make a new package using your autotools tarball.



---

archive/issue_comments_241199.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-05T12:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241199",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241200.json:
```json
{
    "body": "The version of planarity in Sage seems to be version 2.2.0 (but not completely vanilla). So I would try checking out version 2.2.0 from the svn repo and add your autotools system and use that here.",
    "created_at": "2015-05-05T12:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241200",
    "user": "@jdemeyer"
}
```

The version of planarity in Sage seems to be version 2.2.0 (but not completely vanilla). So I would try checking out version 2.2.0 from the svn repo and add your autotools system and use that here.



---

archive/issue_comments_241201.json:
```json
{
    "body": "Oh... You do this because you want us to make sure that we ship the original version of the files ?",
    "created_at": "2015-05-05T12:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241201",
    "user": "@nathanncohen"
}
```

Oh... You do this because you want us to make sure that we ship the original version of the files ?



---

archive/issue_comments_241202.json:
```json
{
    "body": "Replying to [comment:23 ncohen]:\n> Oh... You do this because you want us to make sure that we ship the original version of the files ?\nYes. Also I do it because it's a test of your updated autotools files.",
    "created_at": "2015-05-05T13:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241202",
    "user": "@jdemeyer"
}
```

Replying to [comment:23 ncohen]:
> Oh... You do this because you want us to make sure that we ship the original version of the files ?
Yes. Also I do it because it's a test of your updated autotools files.



---

archive/issue_comments_241203.json:
```json
{
    "body": "`needs_review` ?",
    "created_at": "2015-05-05T14:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241203",
    "user": "@nathanncohen"
}
```

`needs_review` ?



---

archive/issue_comments_241204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-05T14:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241205.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-05T14:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241205",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241206.json:
```json
{
    "body": "I took vanilla upstream version 2.2.0 and your autotools files (with a few modifications in the list of source files) and made the new package with `make dist`. The files are not exactly equal as what was in Sage before, but all `--long` tests in `sage/graphs` pass.",
    "created_at": "2015-05-05T14:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241206",
    "user": "@jdemeyer"
}
```

I took vanilla upstream version 2.2.0 and your autotools files (with a few modifications in the list of source files) and made the new package with `make dist`. The files are not exactly equal as what was in Sage before, but all `--long` tests in `sage/graphs` pass.



---

archive/issue_comments_241207.json:
```json
{
    "body": "Okay, for me it's good to go. Why did you add those lines to apply patches, given that we don't have any in there?",
    "created_at": "2015-05-05T14:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241207",
    "user": "@nathanncohen"
}
```

Okay, for me it's good to go. Why did you add those lines to apply patches, given that we don't have any in there?



---

archive/issue_comments_241208.json:
```json
{
    "body": "Replying to [comment:30 ncohen]:\n> Why did you add those lines to apply patches, given that we don't have any in there?\nJust in case a future ticket wants to add patches.",
    "created_at": "2015-05-05T14:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241208",
    "user": "@jdemeyer"
}
```

Replying to [comment:30 ncohen]:
> Why did you add those lines to apply patches, given that we don't have any in there?
Just in case a future ticket wants to add patches.



---

archive/issue_comments_241209.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-05T14:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241209",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241210.json:
```json
{
    "body": "Fails on OSX. Also, appears to compile nauty which isn't free (definitely not BSD)\n\n```\nlibtool: compile:  gcc -DPACKAGE_NAME=\\\"planarity\\\" -DPACKAGE_TARNAME=\\\"planarity\\\" -DPACKAGE_VERSION=\\\"2.2.0\\\" \"-DPACKAGE_STRING=\\\"planarity 2.2.0\\\"\" -DPACKAGE_BUGREPORT=\\\"John.Boyer.PhD@gmail.com\\\" -DPACKAGE_URL=\\\"\\\" -DPACKAGE=\\\"planarity\\\" -DVERSION=\\\"2.2.0\\\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\\\".libs/\\\" -I. -O3 -MT nauty/nauty.lo -MD -MP -MF nauty/.deps/nauty.Tpo -c nauty/nauty.c  -fno-common -DPIC -o nauty/.libs/nauty.o\nIn file included from nauty/nautil.c:37:0:\nnauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory\n #include <malloc.h>\n                    ^\ncompilation terminated.\nmake[4]: *** [nauty/nautil.lo] Error 1\nlibtool: compile:  gcc -DPACKAGE_NAME=\\\"planarity\\\" -DPACKAGE_TARNAME=\\\"planarity\\\" -DPACKAGE_VERSION=\\\"2.2.0\\\" \"-DPACKAGE_STRING=\\\"planarity 2.2.0\\\"\" -DPACKAGE_BUGREPORT=\\\"John.Boyer.PhD@gmail.com\\\" -DPACKAGE_URL=\\\"\\\" -DPACKAGE=\\\"planarity\\\" -DVERSION=\\\"2.2.0\\\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\\\".libs/\\\" -I. -O3 -MT nauty/outproc.lo -MD -MP -MF nauty/.deps/outproc.Tpo -c nauty/outproc.c  -fno-common -DPIC -o nauty/.libs/outproc.o\nIn file included from nauty/nauty.c:38:0:\nnauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory\n #include <malloc.h>\n                    ^\ncompilation terminated.\nmake[4]: *** [nauty/nauty.lo] Error 1\nIn file included from nauty/naututil.h:56:0,\n                 from nauty/outproc.c:11:\nnauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory\n #include <malloc.h>\n                    ^\ncompilation terminated.\nmake[4]: *** [nauty/outproc.lo] Error 1\n```\n",
    "created_at": "2015-05-06T11:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241210",
    "user": "@vbraun"
}
```

Fails on OSX. Also, appears to compile nauty which isn't free (definitely not BSD)

```
libtool: compile:  gcc -DPACKAGE_NAME=\"planarity\" -DPACKAGE_TARNAME=\"planarity\" -DPACKAGE_VERSION=\"2.2.0\" "-DPACKAGE_STRING=\"planarity 2.2.0\"" -DPACKAGE_BUGREPORT=\"John.Boyer.PhD@gmail.com\" -DPACKAGE_URL=\"\" -DPACKAGE=\"planarity\" -DVERSION=\"2.2.0\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -I. -O3 -MT nauty/nauty.lo -MD -MP -MF nauty/.deps/nauty.Tpo -c nauty/nauty.c  -fno-common -DPIC -o nauty/.libs/nauty.o
In file included from nauty/nautil.c:37:0:
nauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory
 #include <malloc.h>
                    ^
compilation terminated.
make[4]: *** [nauty/nautil.lo] Error 1
libtool: compile:  gcc -DPACKAGE_NAME=\"planarity\" -DPACKAGE_TARNAME=\"planarity\" -DPACKAGE_VERSION=\"2.2.0\" "-DPACKAGE_STRING=\"planarity 2.2.0\"" -DPACKAGE_BUGREPORT=\"John.Boyer.PhD@gmail.com\" -DPACKAGE_URL=\"\" -DPACKAGE=\"planarity\" -DVERSION=\"2.2.0\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -I. -O3 -MT nauty/outproc.lo -MD -MP -MF nauty/.deps/outproc.Tpo -c nauty/outproc.c  -fno-common -DPIC -o nauty/.libs/outproc.o
In file included from nauty/nauty.c:38:0:
nauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory
 #include <malloc.h>
                    ^
compilation terminated.
make[4]: *** [nauty/nauty.lo] Error 1
In file included from nauty/naututil.h:56:0,
                 from nauty/outproc.c:11:
nauty/nauty.h:570:20: fatal error: malloc.h: No such file or directory
 #include <malloc.h>
                    ^
compilation terminated.
make[4]: *** [nauty/outproc.lo] Error 1
```




---

archive/issue_comments_241211.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-06T11:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241211",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_241212.json:
```json
{
    "body": "`>_<`\n\nOkay, I thought that this was only a *part* of Nauty and that the author has negociated specific bits with Brendan McKay to have this license, but it seems that there is indeed a non-GPL compatible usage restriction (against military applications) in `nauty.h`.\n\nThat's twice in two days that I learn that a massive amount of work was done for naught.\n\nSorry for that. I will write to the author. And I guess we should go back to the initial sources (which do not include Nauty). And there is this malloc problem to solve.\n\n`>_<`\n\nNathann",
    "created_at": "2015-05-06T11:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241212",
    "user": "@nathanncohen"
}
```

`>_<`

Okay, I thought that this was only a *part* of Nauty and that the author has negociated specific bits with Brendan McKay to have this license, but it seems that there is indeed a non-GPL compatible usage restriction (against military applications) in `nauty.h`.

That's twice in two days that I learn that a massive amount of work was done for naught.

Sorry for that. I will write to the author. And I guess we should go back to the initial sources (which do not include Nauty). And there is this malloc problem to solve.

`>_<`

Nathann



---

archive/issue_comments_241213.json:
```json
{
    "body": "Turns out that the 'malloc' problem is just that the POSIX location for `malloc` is `stdlib.h`. That was probably one of the things that were changed in Sage's copy of the planarity files.",
    "created_at": "2015-05-06T13:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241213",
    "user": "@nathanncohen"
}
```

Turns out that the 'malloc' problem is just that the POSIX location for `malloc` is `stdlib.h`. That was probably one of the things that were changed in Sage's copy of the planarity files.



---

archive/issue_comments_241214.json:
```json
{
    "body": "> Turns out that the 'malloc' problem is just that the POSIX\n> location for malloc is stdlib.h. That was probably one of the\n> things that were changed in Sage's copy of the planarity files.\n\nIn any case, that's the least of our problem..",
    "created_at": "2015-05-06T13:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241214",
    "user": "@jdemeyer"
}
```

> Turns out that the 'malloc' problem is just that the POSIX
> location for malloc is stdlib.h. That was probably one of the
> things that were changed in Sage's copy of the planarity files.

In any case, that's the least of our problem..



---

archive/issue_comments_241215.json:
```json
{
    "body": "> In any case, that's the least of our problem...\n\nWell, why do you say so? We just have to use the first package I\nbuilt, don't we? This one does not contain any nauty files. And\nwe must patch this malloc.h thing of course.\n\nNathann",
    "created_at": "2015-05-06T13:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241215",
    "user": "@nathanncohen"
}
```

> In any case, that's the least of our problem...

Well, why do you say so? We just have to use the first package I
built, don't we? This one does not contain any nauty files. And
we must patch this malloc.h thing of course.

Nathann



---

archive/issue_comments_241216.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-07T09:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241216",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241217.json:
```json
{
    "body": "Hello Jeroen !\n\nCould you explain what exactly you did to the original sources? Did you checkout some specific commit on upstream's svn repository (can you give the commit hash?) and removed the nauty directory?",
    "created_at": "2015-05-07T09:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241217",
    "user": "@nathanncohen"
}
```

Hello Jeroen !

Could you explain what exactly you did to the original sources? Did you checkout some specific commit on upstream's svn repository (can you give the commit hash?) and removed the nauty directory?



---

archive/issue_comments_241218.json:
```json
{
    "body": "Replying to [comment:40 ncohen]:\n> Did you checkout some specific commit on upstream's svn repository\nI checked out version tag 2.2.0\n\n> and removed the nauty directory?\nYes, exactly.\n\nAnd then I added your autotools project, adjusting the list of source files accordingly.",
    "created_at": "2015-05-07T09:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241218",
    "user": "@jdemeyer"
}
```

Replying to [comment:40 ncohen]:
> Did you checkout some specific commit on upstream's svn repository
I checked out version tag 2.2.0

> and removed the nauty directory?
Yes, exactly.

And then I added your autotools project, adjusting the list of source files accordingly.



---

archive/issue_comments_241219.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-07T09:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241219",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241220.json:
```json
{
    "body": "> I checked out version tag 2.2.0\n\nCan you tell me how? I have been checking all versions from 300 to 340 and none of them seems to matche the code in your archive `O_o`\n\nNathann",
    "created_at": "2015-05-07T11:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241220",
    "user": "@nathanncohen"
}
```

> I checked out version tag 2.2.0

Can you tell me how? I have been checking all versions from 300 to 340 and none of them seems to matche the code in your archive `O_o`

Nathann



---

archive/issue_comments_241221.json:
```json
{
    "body": "\n```\n/tmp/b/planarity-read-only$ svn ls -v ^/tags\n    424 John.Boy              Oct 30  2012 ./\n    319 boyerj@c              Sep 19  2010 Version 2.0.0/\n    318 boyerj@c              Sep 19  2010 Version 2.1.0/\n    320 boyerj@c              Sep 19  2010 Version 2.2.0/\n    322 boyerj@c              Sep 19  2010 Version 2.2.1/\n    402 John.Boy              Dec 20  2010 Version 3.0.0/\n    424 John.Boy              Oct 30  2012 Version 3.0.0.1/\n```\n",
    "created_at": "2015-05-07T11:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241221",
    "user": "@nathanncohen"
}
```


```
/tmp/b/planarity-read-only$ svn ls -v ^/tags
    424 John.Boy              Oct 30  2012 ./
    319 boyerj@c              Sep 19  2010 Version 2.0.0/
    318 boyerj@c              Sep 19  2010 Version 2.1.0/
    320 boyerj@c              Sep 19  2010 Version 2.2.0/
    322 boyerj@c              Sep 19  2010 Version 2.2.1/
    402 John.Boy              Dec 20  2010 Version 3.0.0/
    424 John.Boy              Oct 30  2012 Version 3.0.0.1/
```




---

archive/issue_comments_241222.json:
```json
{
    "body": "By dichotomy, it seems that the first revision containing 'version 2.2' is number 193. But that does not match the one that you packages either.",
    "created_at": "2015-05-07T11:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241222",
    "user": "@nathanncohen"
}
```

By dichotomy, it seems that the first revision containing 'version 2.2' is number 193. But that does not match the one that you packages either.



---

archive/issue_comments_241223.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-05-07T11:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241223",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_241224.json:
```json
{
    "body": "Okay, I got it with `svn checkout http://planarity.googlecode.com/svn/tags/ planarity-read-only`.\n\nThe correspondance that command above gave me between revisions and tags is quite a wonder.",
    "created_at": "2015-05-07T11:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241224",
    "user": "@nathanncohen"
}
```

Okay, I got it with `svn checkout http://planarity.googlecode.com/svn/tags/ planarity-read-only`.

The correspondance that command above gave me between revisions and tags is quite a wonder.



---

archive/issue_comments_241225.json:
```json
{
    "body": "Okay okay, good to go ! (again) `:-P`\n\nThank you Jeroen, by the way.\n\nNathann",
    "created_at": "2015-05-07T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241225",
    "user": "@nathanncohen"
}
```

Okay okay, good to go ! (again) `:-P`

Thank you Jeroen, by the way.

Nathann



---

archive/issue_comments_241226.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2015-05-07T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241226",
    "user": "@nathanncohen"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_241227.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-08T10:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241227",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_241228.json:
```json
{
    "body": "Still fails on OSX, this time with:\n\n```\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -I.. -I/Users/buildslave-sage/slave/sage_git/build/local/include -I/Users/buildslave-sage/slave/sage_git/build/local/include -O2 -g -fPIC -MT set_ui.lo -MD -MP -MF .deps/set_ui.Tpo -c set_ui.c  -fno-common -DPIC -o .libs/set_ui.o\nduplicate symbol _Line in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _quietMode in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _AdjListsForEmbeddingsOut in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _ObstructedOut in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _EmbeddableOut in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _OrigOut in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _Mode in:\n    .libs/planarity.o\n    .libs/planarityCommandLine.o\nduplicate symbol _Line in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _quietMode in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _OrigOut in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _ObstructedOut in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _EmbeddableOut in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _AdjListsForEmbeddingsOut in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _Mode in:\n    .libs/planarity.o\n    .libs/planarityRandomGraphs.o\nduplicate symbol _Line in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _quietMode in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _AdjListsForEmbeddingsOut in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _ObstructedOut in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _EmbeddableOut in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _OrigOut in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _Mode in:\n    .libs/planarity.o\n    .libs/planaritySpecificGraph.o\nduplicate symbol _quietMode in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _Mode in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _OrigOut in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _EmbeddableOut in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _ObstructedOut in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _AdjListsForEmbeddingsOut in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nduplicate symbol _Line in:\n    .libs/planarity.o\n    .libs/planarityUtils.o\nld: 28 duplicate symbols for architecture x86_64\ncollect2: error: ld returned 1 exit status\nmake[4]: *** [libplanarity.la] Error 1\nmake[4]: Target `install' not remade because of errors.\ngcc -O2 --param max-inline-insns-single=1200  -o insdelln ../obj_s/insdelln.o -Wl,-search_paths_first -I. -I../../test -I../test -DHAVE_CONFIG_H -I. -I../include -I../../test/../include -I/Users/buildslave-sage/slave/sage_git/build/local/include   -D_DARWIN_C_SOURCE -DNDEBUG -O2 --param max-inline-insns-single=1200  -dynamic  `echo \"-L../lib -lform -lmenu -lpanel -lncurses -ltinfo  \" | sed -e 's/-lform.*-lpanel[^ ]*//'` -lutil  \n```\n\nJeroen: I can make an account on the OSX buildbot if you need one...",
    "created_at": "2015-05-08T10:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241228",
    "user": "@vbraun"
}
```

Still fails on OSX, this time with:

```
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -I.. -I/Users/buildslave-sage/slave/sage_git/build/local/include -I/Users/buildslave-sage/slave/sage_git/build/local/include -O2 -g -fPIC -MT set_ui.lo -MD -MP -MF .deps/set_ui.Tpo -c set_ui.c  -fno-common -DPIC -o .libs/set_ui.o
duplicate symbol _Line in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _quietMode in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _AdjListsForEmbeddingsOut in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _ObstructedOut in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _EmbeddableOut in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _OrigOut in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _Mode in:
    .libs/planarity.o
    .libs/planarityCommandLine.o
duplicate symbol _Line in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _quietMode in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _OrigOut in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _ObstructedOut in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _EmbeddableOut in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _AdjListsForEmbeddingsOut in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _Mode in:
    .libs/planarity.o
    .libs/planarityRandomGraphs.o
duplicate symbol _Line in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _quietMode in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _AdjListsForEmbeddingsOut in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _ObstructedOut in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _EmbeddableOut in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _OrigOut in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _Mode in:
    .libs/planarity.o
    .libs/planaritySpecificGraph.o
duplicate symbol _quietMode in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _Mode in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _OrigOut in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _EmbeddableOut in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _ObstructedOut in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _AdjListsForEmbeddingsOut in:
    .libs/planarity.o
    .libs/planarityUtils.o
duplicate symbol _Line in:
    .libs/planarity.o
    .libs/planarityUtils.o
ld: 28 duplicate symbols for architecture x86_64
collect2: error: ld returned 1 exit status
make[4]: *** [libplanarity.la] Error 1
make[4]: Target `install' not remade because of errors.
gcc -O2 --param max-inline-insns-single=1200  -o insdelln ../obj_s/insdelln.o -Wl,-search_paths_first -I. -I../../test -I../test -DHAVE_CONFIG_H -I. -I../include -I../../test/../include -I/Users/buildslave-sage/slave/sage_git/build/local/include   -D_DARWIN_C_SOURCE -DNDEBUG -O2 --param max-inline-insns-single=1200  -dynamic  `echo "-L../lib -lform -lmenu -lpanel -lncurses -ltinfo  " | sed -e 's/-lform.*-lpanel[^ ]*//'` -lutil  
```

Jeroen: I can make an account on the OSX buildbot if you need one...



---

archive/issue_comments_241229.json:
```json
{
    "body": "Sure, you can make me an account.",
    "created_at": "2015-05-09T09:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241229",
    "user": "@jdemeyer"
}
```

Sure, you can make me an account.



---

archive/issue_comments_241230.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-09T10:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241230",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_241231.json:
```json
{
    "body": "I updated the autotools project inside the tarball. I guess it should work but I haven't tested on OS X.",
    "created_at": "2015-05-09T10:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241231",
    "user": "@jdemeyer"
}
```

I updated the autotools project inside the tarball. I guess it should work but I haven't tested on OS X.



---

archive/issue_comments_241232.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-09T10:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241232",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241233.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-09T10:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241233",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-09T10:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241234",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_241235.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T10:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241235",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241236.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-05-12T11:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241236",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_241237.json:
```json
{
    "body": "This now works on OS X.",
    "created_at": "2015-05-12T11:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241237",
    "user": "@jdemeyer"
}
```

This now works on OS X.



---

archive/issue_comments_241238.json:
```json
{
    "body": "\n```\n>>> Trying to download http://www.sagemath.org/packages/upstream/planarity/planarity-2.2.0.tar.bz2\n[...............................................]\nChecksum: 3ef0985a2b8476123969cef5c1273d11286605f2 vs 90ff1db146aeffcc330cc9117a72e72aaf4a4fec\nInvalid checksum for planarity-2.2.0.tar.bz2.tmp\n```\n\nYou need to change the version number when changing the tarball. The buildbots have the old tarball cached now.",
    "created_at": "2015-05-12T23:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241238",
    "user": "@vbraun"
}
```


```
>>> Trying to download http://www.sagemath.org/packages/upstream/planarity/planarity-2.2.0.tar.bz2
[...............................................]
Checksum: 3ef0985a2b8476123969cef5c1273d11286605f2 vs 90ff1db146aeffcc330cc9117a72e72aaf4a4fec
Invalid checksum for planarity-2.2.0.tar.bz2.tmp
```

You need to change the version number when changing the tarball. The buildbots have the old tarball cached now.



---

archive/issue_comments_241239.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-12T23:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241239",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_241240.json:
```json
{
    "body": "Replying to [comment:59 vbraun]:\n> You need to change the version number when changing the tarball. The buildbots have the old tarball cached now.\n\nSorry Volker, but I don't get it. Just because the buildbots have *tested* an earlier version, I have to change the tarball name? Can't you change the buildbot script such that it re-downloads the tarball every time (using `wget -N` if you use `wget`) or at least whenever the checksum check failed?",
    "created_at": "2015-05-13T05:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241240",
    "user": "@jdemeyer"
}
```

Replying to [comment:59 vbraun]:
> You need to change the version number when changing the tarball. The buildbots have the old tarball cached now.

Sorry Volker, but I don't get it. Just because the buildbots have *tested* an earlier version, I have to change the tarball name? Can't you change the buildbot script such that it re-downloads the tarball every time (using `wget -N` if you use `wget`) or at least whenever the checksum check failed?



---

archive/issue_comments_241241.json:
```json
{
    "body": "The buildbot just relies on Sage to download tarballs.",
    "created_at": "2015-05-13T08:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241241",
    "user": "@vbraun"
}
```

The buildbot just relies on Sage to download tarballs.



---

archive/issue_comments_241242.json:
```json
{
    "body": "PS: #15642 will re-download tarballs whose checksum does not match",
    "created_at": "2015-05-13T08:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241242",
    "user": "@vbraun"
}
```

PS: #15642 will re-download tarballs whose checksum does not match



---

archive/issue_comments_241243.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-05-13T15:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241243",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_241244.json:
```json
{
    "body": "So, since you added the #15642 as dependency, there is no problem, right?",
    "created_at": "2015-05-13T15:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241244",
    "user": "@jdemeyer"
}
```

So, since you added the #15642 as dependency, there is no problem, right?



---

archive/issue_comments_241245.json:
```json
{
    "body": "Turns out sage-spkg doesn't even call sage-download-files if the checksum doesn't match, this is now #18417",
    "created_at": "2015-05-14T09:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241245",
    "user": "@vbraun"
}
```

Turns out sage-spkg doesn't even call sage-download-files if the checksum doesn't match, this is now #18417



---

archive/issue_comments_241246.json:
```json
{
    "body": "Fixing the downloading is now #18428",
    "created_at": "2015-05-16T08:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241246",
    "user": "@vbraun"
}
```

Fixing the downloading is now #18428



---

archive/issue_comments_241247.json:
```json
{
    "body": "Needs work because of #18431",
    "created_at": "2015-05-20T07:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241247",
    "user": "@jdemeyer"
}
```

Needs work because of #18431



---

archive/issue_comments_241248.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-20T07:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241248",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_241249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-03T08:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241249",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241250.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-03T09:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241250",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241251.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-04T08:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241251",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241252.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-04T22:46:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17950#issuecomment-241252",
    "user": "@vbraun"
}
```

Resolution: fixed
