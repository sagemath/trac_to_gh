# Issue 10798: Optional package openmpi-1.4.3 fails to install on OpenSolaris 06/2009

archive/issues_010798.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  maldun @vbraun @jhpalmieri @fchapoton @dimpase\n\n## Build environment\n* Sun Ultra 27 \n* 3.33 GHz Intel W3580 Xeon. Quad core. 8 threads. \n* 12 GB RAM\n* OpenSolaris 2009.06 snv_134 X86\n* Sage 4.6.2.rc0\n* gcc 4.5.0\n\n## How gcc 4.5.0 was configured\nSince the configuration of gcc is fairly critical on OpenSolaris, here's how it was built. \n\n\n```\ndrkirkby@hawk:~/sage-4.6.2.rc0$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper\nTarget: i386-pc-solaris2.10\nConfigured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld\nThread model: posix\ngcc version 4.5.0 (GCC) \ndrkirkby@hawk:~/sage-4.6.2.rc0$ \n\n```\n\n\n## A bit of history on Solaris and OpenMPI issues in Sage\n\nI don't believe this optional OpenMPI package in Sage has ever built on Solaris SPARC - see #8522 Updating OpenMPI (#8537) did not fix the problems. I know that we have never built this optional package on OpenSolaris. \n\n## The problem with the current version in Sage\n\n\n```\nCreating mpi/man/man3/MPI_Type_c2f.3 man page...\nCreating mpi/man/man3/MPI_Type_commit.3 man page...\nCreating mpi/man/man3/MPI_Type_contiguous.3 man page...\nCreating mpi/man/man3/MPI_Type_create_darray.3 man page...\nCreating mpi/man/man3/MPI_Type_create_f90_complex.3 man page...\nCreating mpi/man/man3/MPI_Type_create_f90_integer.3 man page...\nCreating mpi/man/man3/MPI_Type_create_f90_real.3 man page...\nCreating mpi/man/man3/MPI_Type_create_hindexed.3 man page...\nCreating mpi/man/man3/MPI_Type_create_hvector.3 man page...\nCreating mpi/man/man3/MPI_Type_create_indexed_block.3 man page...\nCreating mpi/man/man3/MPI_Type_create_keyval.3 man page...\nCreating mpi/man/man3/MPI_Type_create_resized.3 man page...\nCreating mpi/man/man3/MPI_Type_create_struct.3 man page...\nCreating mpi/man/man3/MPI_Type_create_subarray.3 man page...\nCreating mpi/man/man3/MPI_Type_delete_attr.3 man page...\nCreating mpi/man/man3/MPI_Type_dup.3 man page...\nCreating mpi/man/man3/MPI_Type_extent.3 man page...\nCreating mpi/man/man3/MPI_Type_f2c.3 man page...\nCreating mpi/man/man3/MPI_Type_free.3 man page...\nCreating mpi/man/man3/MPI_Type_free_keyval.3 man page...\nCreating mpi/man/man3/MPI_Type_get_attr.3 man page...\nCreating mpi/man/man3/MPI_Type_get_contents.3 man page...\nCreating mpi/man/man3/MPI_Type_get_envelope.3 man page...\nCreating mpi/man/man3/MPI_Type_get_extent.3 man page...\nCreating mpi/man/man3/MPI_Type_get_name.3 man page...\nCreating mpi/man/man3/MPI_Type_get_true_extent.3 man page...\nCreating mpi/man/man3/MPI_Type_hindexed.3 man page...\nCreating mpi/man/man3/MPI_Type_hvector.3 man page...\nCreating mpi/man/man3/MPI_Type_indexed.3 man page...\nCreating mpi/man/man3/MPI_Type_lb.3 man page...\nCreating mpi/man/man3/MPI_Type_match_size.3 man page...\nCreating mpi/man/man3/MPI_Type_set_attr.3 man page...\nCreating mpi/man/man3/MPI_Type_set_name.3 man page...\nCreating mpi/man/man3/MPI_Type_size.3 man page...\nCreating mpi/man/man3/MPI_Type_struct.3 man page...\nCreating mpi/man/man3/MPI_Type_ub.3 man page...\nCreating mpi/man/man3/MPI_Type_vector.3 man page...\nCreating mpi/man/man3/MPI_Unpack.3 man page...\nCreating mpi/man/man3/MPI_Unpack_external.3 man page...\nCreating mpi/man/man3/MPI_Unpublish_name.3 man page...\nCreating mpi/man/man3/MPI_Wait.3 man page...\nCreating mpi/man/man3/MPI_Waitall.3 man page...\nCreating mpi/man/man3/MPI_Waitany.3 man page...\nCreating mpi/man/man3/MPI_Waitsome.3 man page...\nCreating mpi/man/man3/MPI_Win_c2f.3 man page...\nCreating mpi/man/man3/MPI_Win_call_errhandler.3 man page...\nCreating mpi/man/man3/MPI_Win_complete.3 man page...\nCreating mpi/man/man3/MPI_Win_create.3 man page...\nCreating mpi/man/man3/MPI_Win_create_errhandler.3 man page...\nCreating mpi/man/man3/MPI_Win_create_keyval.3 man page...\nCreating mpi/man/man3/MPI_Win_delete_attr.3 man page...\nCreating mpi/man/man3/MPI_Win_f2c.3 man page...\nCreating mpi/man/man3/MPI_Win_fence.3 man page...\nCreating mpi/man/man3/MPI_Win_free.3 man page...\nCreating mpi/man/man3/MPI_Win_free_keyval.3 man page...\nCreating mpi/man/man3/MPI_Win_get_attr.3 man page...\nCreating mpi/man/man3/MPI_Win_get_errhandler.3 man page...\nCreating mpi/man/man3/MPI_Win_get_group.3 man page...\nCreating mpi/man/man3/MPI_Win_get_name.3 man page...\nCreating mpi/man/man3/MPI_Win_lock.3 man page...\nCreating mpi/man/man3/MPI_Win_post.3 man page...\nCreating mpi/man/man3/MPI_Win_set_attr.3 man page...\nCreating mpi/man/man3/MPI_Win_set_errhandler.3 man page...\nCreating mpi/man/man3/MPI_Win_set_name.3 man page...\nCreating mpi/man/man3/MPI_Win_start.3 man page...\nCreating mpi/man/man3/MPI_Win_test.3 man page...\nCreating mpi/man/man3/MPI_Win_unlock.3 man page...\nCreating mpi/man/man3/MPI_Win_wait.3 man page...\nCreating mpi/man/man3/MPI_Wtick.3 man page...\nCreating mpi/man/man3/MPI_Wtime.3 man page...\nCreating mpi/man/man3/OpenMPI.3 man page...\nmake[2]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi'\nMaking all in mpi/cxx\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/mpi/cxx'\ndepbase=`echo mpicxx.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT mpicxx.lo -MD -MP -MF $depbase.Tpo -c -o mpicxx.lo mpicxx.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT mpicxx.lo -MD -MP -MF .deps/mpicxx.Tpo -c mpicxx.cc  -fPIC -DPIC -o .libs/mpicxx.o\ndepbase=`echo intercepts.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT intercepts.lo -MD -MP -MF $depbase.Tpo -c -o intercepts.lo intercepts.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT intercepts.lo -MD -MP -MF .deps/intercepts.Tpo -c intercepts.cc  -fPIC -DPIC -o .libs/intercepts.o\ndepbase=`echo comm.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT comm.lo -MD -MP -MF $depbase.Tpo -c -o comm.lo comm.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT comm.lo -MD -MP -MF .deps/comm.Tpo -c comm.cc  -fPIC -DPIC -o .libs/comm.o\ndepbase=`echo datatype.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT datatype.lo -MD -MP -MF $depbase.Tpo -c -o datatype.lo datatype.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT datatype.lo -MD -MP -MF .deps/datatype.Tpo -c datatype.cc  -fPIC -DPIC -o .libs/datatype.o\ndepbase=`echo win.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT win.lo -MD -MP -MF $depbase.Tpo -c -o win.lo win.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT win.lo -MD -MP -MF .deps/win.Tpo -c win.cc  -fPIC -DPIC -o .libs/win.o\ndepbase=`echo file.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\n\t/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT file.lo -MD -MP -MF $depbase.Tpo -c -o file.lo file.cc &&\\\n\tmv -f $depbase.Tpo $depbase.Plo\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT file.lo -MD -MP -MF .deps/file.Tpo -c file.cc  -fPIC -DPIC -o .libs/file.o\n/bin/sh ../../../libtool --tag=CXX   --mode=link g++  -O3 -DNDEBUG -finline-functions  -version-info 0:1:0 -export-dynamic   -o libmpi_cxx.la -rpath /export/home/drkirkby/sage-4.6.2.rc0/local/lib mpicxx.lo intercepts.lo comm.lo datatype.lo win.lo file.lo ../../../ompi/libmpi.la -lsocket -lnsl  -lm -lthread\nlibtool: link: g++ -shared -nostdlib -export-dynamic   /usr/lib/crti.o /usr/lib/values-Xa.o /usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/crtbegin.o  .libs/mpicxx.o .libs/intercepts.o .libs/comm.o .libs/datatype.o .libs/win.o .libs/file.o   -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/.libs -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs -Wl,-R -Wl,/usr/local/gcc-4.5.0/lib -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/local/lib -Wl,-R -Wl,/usr/local/gcc-4.5.0/lib -L/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs -L/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs ../../../ompi/.libs/libmpi.so /export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs/libopen-rte.so /export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs/libopen-pal.so -lsocket -lnsl -lthread -L/export/home/drkirkby/sage-4.6.2.rc0/local/lib -L/usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0 -L/usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/../../.. /usr/local/gcc-4.5.0/lib/libstdc++.so -lm -lgcc_s /usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/crtend.o /usr/lib/crtn.o    -Wl,-h -Wl,libmpi_cxx.so.0 -o .libs/libmpi_cxx.so.0.0.1\nld: fatal: entry point symbol `xport-dynamic' is undefined\ncollect2: ld returned 1 exit status\nmake[2]: *** [libmpi_cxx.la] Error 1\nmake[2]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/mpi/cxx'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi'\nmake: *** [all-recursive] Error 1\nError building\n\nreal\t2m44.506s\nuser\t1m38.124s\nsys\t1m0.653s\nsage: An error occurred while installing openmpi-1.4.3\n\n```\n\n\n## Hints found with Google\nThe Google search on the error message\n\n\n```\nld: fatal: entry point symbol `xport-dynamic' is undefined\n```\n\n\nthrows up quite a few hits with a few pieces of software (not MPI related). E.g.\n\n* Ethereal http://www.ethereal.com/lists/ethereal-users/200309/msg00162.html\n* GnuPG http://lists.gnupg.org/pipermail/gnupg-devel/1998-December/015163.html \n\nDave\n\nIssue created by migration from https://trac.sagemath.org/ticket/10866\n\n",
    "created_at": "2011-03-03T00:35:55Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Optional package openmpi-1.4.3 fails to install on OpenSolaris 06/2009",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10798",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
Assignee: tbd

CC:  maldun @vbraun @jhpalmieri @fchapoton @dimpase

## Build environment
* Sun Ultra 27 
* 3.33 GHz Intel W3580 Xeon. Quad core. 8 threads. 
* 12 GB RAM
* OpenSolaris 2009.06 snv_134 X86
* Sage 4.6.2.rc0
* gcc 4.5.0

## How gcc 4.5.0 was configured
Since the configuration of gcc is fairly critical on OpenSolaris, here's how it was built. 


```
drkirkby@hawk:~/sage-4.6.2.rc0$ gcc -v
Using built-in specs.
COLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper
Target: i386-pc-solaris2.10
Configured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld
Thread model: posix
gcc version 4.5.0 (GCC) 
drkirkby@hawk:~/sage-4.6.2.rc0$ 

```


## A bit of history on Solaris and OpenMPI issues in Sage

I don't believe this optional OpenMPI package in Sage has ever built on Solaris SPARC - see #8522 Updating OpenMPI (#8537) did not fix the problems. I know that we have never built this optional package on OpenSolaris. 

## The problem with the current version in Sage


```
Creating mpi/man/man3/MPI_Type_c2f.3 man page...
Creating mpi/man/man3/MPI_Type_commit.3 man page...
Creating mpi/man/man3/MPI_Type_contiguous.3 man page...
Creating mpi/man/man3/MPI_Type_create_darray.3 man page...
Creating mpi/man/man3/MPI_Type_create_f90_complex.3 man page...
Creating mpi/man/man3/MPI_Type_create_f90_integer.3 man page...
Creating mpi/man/man3/MPI_Type_create_f90_real.3 man page...
Creating mpi/man/man3/MPI_Type_create_hindexed.3 man page...
Creating mpi/man/man3/MPI_Type_create_hvector.3 man page...
Creating mpi/man/man3/MPI_Type_create_indexed_block.3 man page...
Creating mpi/man/man3/MPI_Type_create_keyval.3 man page...
Creating mpi/man/man3/MPI_Type_create_resized.3 man page...
Creating mpi/man/man3/MPI_Type_create_struct.3 man page...
Creating mpi/man/man3/MPI_Type_create_subarray.3 man page...
Creating mpi/man/man3/MPI_Type_delete_attr.3 man page...
Creating mpi/man/man3/MPI_Type_dup.3 man page...
Creating mpi/man/man3/MPI_Type_extent.3 man page...
Creating mpi/man/man3/MPI_Type_f2c.3 man page...
Creating mpi/man/man3/MPI_Type_free.3 man page...
Creating mpi/man/man3/MPI_Type_free_keyval.3 man page...
Creating mpi/man/man3/MPI_Type_get_attr.3 man page...
Creating mpi/man/man3/MPI_Type_get_contents.3 man page...
Creating mpi/man/man3/MPI_Type_get_envelope.3 man page...
Creating mpi/man/man3/MPI_Type_get_extent.3 man page...
Creating mpi/man/man3/MPI_Type_get_name.3 man page...
Creating mpi/man/man3/MPI_Type_get_true_extent.3 man page...
Creating mpi/man/man3/MPI_Type_hindexed.3 man page...
Creating mpi/man/man3/MPI_Type_hvector.3 man page...
Creating mpi/man/man3/MPI_Type_indexed.3 man page...
Creating mpi/man/man3/MPI_Type_lb.3 man page...
Creating mpi/man/man3/MPI_Type_match_size.3 man page...
Creating mpi/man/man3/MPI_Type_set_attr.3 man page...
Creating mpi/man/man3/MPI_Type_set_name.3 man page...
Creating mpi/man/man3/MPI_Type_size.3 man page...
Creating mpi/man/man3/MPI_Type_struct.3 man page...
Creating mpi/man/man3/MPI_Type_ub.3 man page...
Creating mpi/man/man3/MPI_Type_vector.3 man page...
Creating mpi/man/man3/MPI_Unpack.3 man page...
Creating mpi/man/man3/MPI_Unpack_external.3 man page...
Creating mpi/man/man3/MPI_Unpublish_name.3 man page...
Creating mpi/man/man3/MPI_Wait.3 man page...
Creating mpi/man/man3/MPI_Waitall.3 man page...
Creating mpi/man/man3/MPI_Waitany.3 man page...
Creating mpi/man/man3/MPI_Waitsome.3 man page...
Creating mpi/man/man3/MPI_Win_c2f.3 man page...
Creating mpi/man/man3/MPI_Win_call_errhandler.3 man page...
Creating mpi/man/man3/MPI_Win_complete.3 man page...
Creating mpi/man/man3/MPI_Win_create.3 man page...
Creating mpi/man/man3/MPI_Win_create_errhandler.3 man page...
Creating mpi/man/man3/MPI_Win_create_keyval.3 man page...
Creating mpi/man/man3/MPI_Win_delete_attr.3 man page...
Creating mpi/man/man3/MPI_Win_f2c.3 man page...
Creating mpi/man/man3/MPI_Win_fence.3 man page...
Creating mpi/man/man3/MPI_Win_free.3 man page...
Creating mpi/man/man3/MPI_Win_free_keyval.3 man page...
Creating mpi/man/man3/MPI_Win_get_attr.3 man page...
Creating mpi/man/man3/MPI_Win_get_errhandler.3 man page...
Creating mpi/man/man3/MPI_Win_get_group.3 man page...
Creating mpi/man/man3/MPI_Win_get_name.3 man page...
Creating mpi/man/man3/MPI_Win_lock.3 man page...
Creating mpi/man/man3/MPI_Win_post.3 man page...
Creating mpi/man/man3/MPI_Win_set_attr.3 man page...
Creating mpi/man/man3/MPI_Win_set_errhandler.3 man page...
Creating mpi/man/man3/MPI_Win_set_name.3 man page...
Creating mpi/man/man3/MPI_Win_start.3 man page...
Creating mpi/man/man3/MPI_Win_test.3 man page...
Creating mpi/man/man3/MPI_Win_unlock.3 man page...
Creating mpi/man/man3/MPI_Win_wait.3 man page...
Creating mpi/man/man3/MPI_Wtick.3 man page...
Creating mpi/man/man3/MPI_Wtime.3 man page...
Creating mpi/man/man3/OpenMPI.3 man page...
make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi'
Making all in mpi/cxx
make[2]: Entering directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/mpi/cxx'
depbase=`echo mpicxx.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT mpicxx.lo -MD -MP -MF $depbase.Tpo -c -o mpicxx.lo mpicxx.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT mpicxx.lo -MD -MP -MF .deps/mpicxx.Tpo -c mpicxx.cc  -fPIC -DPIC -o .libs/mpicxx.o
depbase=`echo intercepts.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT intercepts.lo -MD -MP -MF $depbase.Tpo -c -o intercepts.lo intercepts.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT intercepts.lo -MD -MP -MF .deps/intercepts.Tpo -c intercepts.cc  -fPIC -DPIC -o .libs/intercepts.o
depbase=`echo comm.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT comm.lo -MD -MP -MF $depbase.Tpo -c -o comm.lo comm.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT comm.lo -MD -MP -MF .deps/comm.Tpo -c comm.cc  -fPIC -DPIC -o .libs/comm.o
depbase=`echo datatype.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT datatype.lo -MD -MP -MF $depbase.Tpo -c -o datatype.lo datatype.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT datatype.lo -MD -MP -MF .deps/datatype.Tpo -c datatype.cc  -fPIC -DPIC -o .libs/datatype.o
depbase=`echo win.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT win.lo -MD -MP -MF $depbase.Tpo -c -o win.lo win.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT win.lo -MD -MP -MF .deps/win.Tpo -c win.cc  -fPIC -DPIC -o .libs/win.o
depbase=`echo file.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
	/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa  -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../..  -D_REENTRANT  -O3 -DNDEBUG -finline-functions  -MT file.lo -MD -MP -MF $depbase.Tpo -c -o file.lo file.cc &&\
	mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../opal/include -I../../../orte/include -I../../../ompi/include -I../../../opal/mca/paffinity/linux/plpa/src/libplpa -DOMPI_BUILDING_CXX_BINDINGS_LIBRARY=1 -DOMPI_SKIP_MPICXX=1 -I../../.. -D_REENTRANT -O3 -DNDEBUG -finline-functions -MT file.lo -MD -MP -MF .deps/file.Tpo -c file.cc  -fPIC -DPIC -o .libs/file.o
/bin/sh ../../../libtool --tag=CXX   --mode=link g++  -O3 -DNDEBUG -finline-functions  -version-info 0:1:0 -export-dynamic   -o libmpi_cxx.la -rpath /export/home/drkirkby/sage-4.6.2.rc0/local/lib mpicxx.lo intercepts.lo comm.lo datatype.lo win.lo file.lo ../../../ompi/libmpi.la -lsocket -lnsl  -lm -lthread
libtool: link: g++ -shared -nostdlib -export-dynamic   /usr/lib/crti.o /usr/lib/values-Xa.o /usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/crtbegin.o  .libs/mpicxx.o .libs/intercepts.o .libs/comm.o .libs/datatype.o .libs/win.o .libs/file.o   -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/.libs -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs -Wl,-R -Wl,/usr/local/gcc-4.5.0/lib -Wl,-R -Wl,/export/home/drkirkby/sage-4.6.2.rc0/local/lib -Wl,-R -Wl,/usr/local/gcc-4.5.0/lib -L/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs -L/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs ../../../ompi/.libs/libmpi.so /export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/orte/.libs/libopen-rte.so /export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/opal/.libs/libopen-pal.so -lsocket -lnsl -lthread -L/export/home/drkirkby/sage-4.6.2.rc0/local/lib -L/usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0 -L/usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/../../.. /usr/local/gcc-4.5.0/lib/libstdc++.so -lm -lgcc_s /usr/local/gcc-4.5.0/lib/gcc/i386-pc-solaris2.10/4.5.0/crtend.o /usr/lib/crtn.o    -Wl,-h -Wl,libmpi_cxx.so.0 -o .libs/libmpi_cxx.so.0.0.1
ld: fatal: entry point symbol `xport-dynamic' is undefined
collect2: ld returned 1 exit status
make[2]: *** [libmpi_cxx.la] Error 1
make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi/mpi/cxx'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/export/home/drkirkby/sage-4.6.2.rc0/spkg/build/openmpi-1.4.3/src/ompi'
make: *** [all-recursive] Error 1
Error building

real	2m44.506s
user	1m38.124s
sys	1m0.653s
sage: An error occurred while installing openmpi-1.4.3

```


## Hints found with Google
The Google search on the error message


```
ld: fatal: entry point symbol `xport-dynamic' is undefined
```


throws up quite a few hits with a few pieces of software (not MPI related). E.g.

* Ethereal http://www.ethereal.com/lists/ethereal-users/200309/msg00162.html
* GnuPG http://lists.gnupg.org/pipermail/gnupg-devel/1998-December/015163.html 

Dave

Issue created by migration from https://trac.sagemath.org/ticket/10866





---

archive/issue_comments_114146.json:
```json
{
    "body": "The failure of OpenMPI 1.4.3 to build with gcc on Solaris is totally bizare. \n\n* If I download the 1.4.3 source code, it builds OK with gcc outside of Sage. \n* If I run `sage -sh` and try to build the source I've downloaded in the Sage shell, so it fails. \n\nSo it seems that something that is set in the Sage shell screws up the build of OpenMPI with gcc on OpenSolaris.",
    "created_at": "2011-03-09T07:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10798#issuecomment-114146",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

The failure of OpenMPI 1.4.3 to build with gcc on Solaris is totally bizare. 

* If I download the 1.4.3 source code, it builds OK with gcc outside of Sage. 
* If I run `sage -sh` and try to build the source I've downloaded in the Sage shell, so it fails. 

So it seems that something that is set in the Sage shell screws up the build of OpenMPI with gcc on OpenSolaris.



---

archive/issue_comments_114147.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-19T18:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10798#issuecomment-114147",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114148.json:
```json
{
    "body": "solaris tickets should be closed as outdated",
    "created_at": "2020-06-19T18:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10798#issuecomment-114148",
    "user": "https://github.com/mkoeppe"
}
```

solaris tickets should be closed as outdated



---

archive/issue_events_010922.json:
```json
{
    "actor": "@fchapoton",
    "created_at": "2020-06-19T18:47:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10798",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10798#event-10922"
}
```



---

archive/issue_comments_114149.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-06-19T18:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10798#issuecomment-114149",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
