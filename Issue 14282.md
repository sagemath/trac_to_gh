# Issue 14282: 0 == Set([0]) raises error

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-04-25 09:31:07

Assignee: jason

CC:  ncohen was nthiery

See https://groups.google.com/d/msg/sage-devel/2y1knINMAy0/rev2RbskKgwJ

```
sage: 0 == Set([1]) 
... 
AttributeError: 'Set_object_enumerated_with_category' object has no 
attribute '_richcmp_' 
```



---

Comment by vbraun created at 2013-04-25 09:33:07

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-04-25 11:07:26

Updated patch


---

Attachment

Forgot to also check for Python ints, should work now.


---

Comment by ncohen created at 2013-04-25 11:21:30

Oh, I see... Well, unless you see a more generic way to avoid the problem, could you also add floats to the list ?


```
sage: Set(float(0))      
Set of elements of 0.0
sage: list(Set(float(0)))
...
AttributeError: 'float' object has no attribute '__iter__'
```


I don't see anything else that we should avoid, but one never knows... ^^;

Oh !


```
sage: Set(True) 
...
ValueError: underlying object cannot be an integer
```


What about doing it on a "whitelist" base ? Something like "if is an iterable we accept to build a Set from it", and otherwise we refuse ?

Looks lke it is what `frozenset` does

```
sage: frozenset(1)
...
TypeError: 'sage.rings.integer.Integer' object is not iterable
```


I'm sorry for only coming with problems and not solutions `^^;`

Nathann


---

Comment by vbraun created at 2013-04-25 11:37:02

Those are all problems with the `Set` factory function and not with the `Set_object.__init__` constructor. Feel free to open a separate ticket for them.


---

Comment by ncohen created at 2013-04-25 11:42:00

Provided that I would spend the lifetime necessary to fix all broken doctests, what would be your idea of such a patch ?

Nathann


---

Attachment


---

Comment by vbraun created at 2013-04-25 11:53:11

The Set function should check that its argument is iterable using `isinstance(X, collections.Iterable)`. This will probably uncover bugs in sage where iterables are not deriving from collections.Iterable that then need to be fixed up. 

In a different ticket.


---

Comment by ncohen created at 2013-04-25 12:09:00

Okayyyyyyyyyyyyyy ! Well, then if you agree with this ...

Nathann


---

Attachment


---

Comment by vbraun created at 2013-04-25 12:13:04

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2013-04-25 12:13:51

THanks !

Nathann


---

Comment by jdemeyer created at 2013-04-30 09:40:25

Resolution: fixed
