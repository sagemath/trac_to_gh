# Issue 14282: 0 == Set([0]) raises error

archive/issues_014282.json:
```json
{
    "body": "Assignee: jason\n\nCC:  ncohen was nthiery\n\nSee https://groups.google.com/d/msg/sage-devel/2y1knINMAy0/rev2RbskKgwJ\n\n```\nsage: 0 == Set([1]) \n... \nAttributeError: 'Set_object_enumerated_with_category' object has no \nattribute '_richcmp_' \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14486\n\n",
    "created_at": "2013-04-25T09:31:07Z",
    "labels": [
        "misc",
        "major",
        "bug"
    ],
    "title": "0 == Set([0]) raises error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14282",
    "user": "vbraun"
}
```
Assignee: jason

CC:  ncohen was nthiery

See https://groups.google.com/d/msg/sage-devel/2y1knINMAy0/rev2RbskKgwJ

```
sage: 0 == Set([1]) 
... 
AttributeError: 'Set_object_enumerated_with_category' object has no 
attribute '_richcmp_' 
```


Issue created by migration from https://trac.sagemath.org/ticket/14486





---

archive/issue_comments_180019.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-25T09:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180019",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_180020.json:
```json
{
    "body": "Updated patch",
    "created_at": "2013-04-25T11:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180020",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_180021.json:
```json
{
    "body": "Attachment\n\nForgot to also check for Python ints, should work now.",
    "created_at": "2013-04-25T11:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180021",
    "user": "vbraun"
}
```

Attachment

Forgot to also check for Python ints, should work now.



---

archive/issue_comments_180022.json:
```json
{
    "body": "Oh, I see... Well, unless you see a more generic way to avoid the problem, could you also add floats to the list ?\n\n\n```\nsage: Set(float(0))      \nSet of elements of 0.0\nsage: list(Set(float(0)))\n...\nAttributeError: 'float' object has no attribute '__iter__'\n```\n\n\nI don't see anything else that we should avoid, but one never knows... ^^;\n\nOh !\n\n\n```\nsage: Set(True) \n...\nValueError: underlying object cannot be an integer\n```\n\n\nWhat about doing it on a \"whitelist\" base ? Something like \"if is an iterable we accept to build a Set from it\", and otherwise we refuse ?\n\nLooks lke it is what `frozenset` does\n\n```\nsage: frozenset(1)\n...\nTypeError: 'sage.rings.integer.Integer' object is not iterable\n```\n\n\nI'm sorry for only coming with problems and not solutions `^^;`\n\nNathann",
    "created_at": "2013-04-25T11:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180022",
    "user": "ncohen"
}
```

Oh, I see... Well, unless you see a more generic way to avoid the problem, could you also add floats to the list ?


```
sage: Set(float(0))      
Set of elements of 0.0
sage: list(Set(float(0)))
...
AttributeError: 'float' object has no attribute '__iter__'
```


I don't see anything else that we should avoid, but one never knows... ^^;

Oh !


```
sage: Set(True) 
...
ValueError: underlying object cannot be an integer
```


What about doing it on a "whitelist" base ? Something like "if is an iterable we accept to build a Set from it", and otherwise we refuse ?

Looks lke it is what `frozenset` does

```
sage: frozenset(1)
...
TypeError: 'sage.rings.integer.Integer' object is not iterable
```


I'm sorry for only coming with problems and not solutions `^^;`

Nathann



---

archive/issue_comments_180023.json:
```json
{
    "body": "Those are all problems with the `Set` factory function and not with the `Set_object.__init__` constructor. Feel free to open a separate ticket for them.",
    "created_at": "2013-04-25T11:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180023",
    "user": "vbraun"
}
```

Those are all problems with the `Set` factory function and not with the `Set_object.__init__` constructor. Feel free to open a separate ticket for them.



---

archive/issue_comments_180024.json:
```json
{
    "body": "Provided that I would spend the lifetime necessary to fix all broken doctests, what would be your idea of such a patch ?\n\nNathann",
    "created_at": "2013-04-25T11:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180024",
    "user": "ncohen"
}
```

Provided that I would spend the lifetime necessary to fix all broken doctests, what would be your idea of such a patch ?

Nathann



---

archive/issue_comments_180025.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-04-25T11:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180025",
    "user": "ncohen"
}
```

Attachment



---

archive/issue_comments_180026.json:
```json
{
    "body": "The Set function should check that its argument is iterable using `isinstance(X, collections.Iterable)`. This will probably uncover bugs in sage where iterables are not deriving from collections.Iterable that then need to be fixed up. \n\nIn a different ticket.",
    "created_at": "2013-04-25T11:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180026",
    "user": "vbraun"
}
```

The Set function should check that its argument is iterable using `isinstance(X, collections.Iterable)`. This will probably uncover bugs in sage where iterables are not deriving from collections.Iterable that then need to be fixed up. 

In a different ticket.



---

archive/issue_comments_180027.json:
```json
{
    "body": "Okayyyyyyyyyyyyyy ! Well, then if you agree with this ...\n\nNathann",
    "created_at": "2013-04-25T12:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180027",
    "user": "ncohen"
}
```

Okayyyyyyyyyyyyyy ! Well, then if you agree with this ...

Nathann



---

archive/issue_comments_180028.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-04-25T12:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180028",
    "user": "vbraun"
}
```

Attachment



---

archive/issue_comments_180029.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-25T12:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180029",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_180030.json:
```json
{
    "body": "THanks !\n\nNathann",
    "created_at": "2013-04-25T12:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180030",
    "user": "ncohen"
}
```

THanks !

Nathann



---

archive/issue_comments_180031.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-30T09:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14282#issuecomment-180031",
    "user": "jdemeyer"
}
```

Resolution: fixed
