# Issue 23496: Get rid of src/bin/sage-arch-env, SAGE_LOCAL/etc/sage-64.txt

archive/issues_023496.json:
```json
{
    "body": "CC:  @dimpase\n\nI propose to get rid of src/bin/sage-arch-env, SAGE_LOCAL/etc/sage-64.txt, \nwhich is a very specialized mechanism of storing a bit of configuration in SAGE_LOCAL.\nInstead, SAGE64 should become a configure option (see #23570).\n\nIssue created by migration from https://trac.sagemath.org/ticket/23733\n\n",
    "created_at": "2017-08-28T03:25:44Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Get rid of src/bin/sage-arch-env, SAGE_LOCAL/etc/sage-64.txt",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23496",
    "user": "@mkoeppe"
}
```
CC:  @dimpase

I propose to get rid of src/bin/sage-arch-env, SAGE_LOCAL/etc/sage-64.txt, 
which is a very specialized mechanism of storing a bit of configuration in SAGE_LOCAL.
Instead, SAGE64 should become a configure option (see #23570).

Issue created by migration from https://trac.sagemath.org/ticket/23733





---

archive/issue_comments_329267.json:
```json
{
    "body": "Replying to [ticket:23733 mkoeppe]:\n> Instead, SAGE64 should become a configure option (see #23570).\n\nIs anybody actually using that option? I would go for deprecating it and getting rid of it eventually.",
    "created_at": "2017-08-28T10:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329267",
    "user": "@jdemeyer"
}
```

Replying to [ticket:23733 mkoeppe]:
> Instead, SAGE64 should become a configure option (see #23570).

Is anybody actually using that option? I would go for deprecating it and getting rid of it eventually.



---

archive/issue_comments_329268.json:
```json
{
    "body": "Replying to [comment:1 jdemeyer]:\n> Is anybody actually using that option? I would go for deprecating it and getting rid of it eventually.\n\nGood idea. Should as well get rid of it in the installation manual eventually (it mentions some ancient Mac OS versions, for which probably no working build infrastructure exists any more anyway).",
    "created_at": "2017-08-29T18:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329268",
    "user": "@mkoeppe"
}
```

Replying to [comment:1 jdemeyer]:
> Is anybody actually using that option? I would go for deprecating it and getting rid of it eventually.

Good idea. Should as well get rid of it in the installation manual eventually (it mentions some ancient Mac OS versions, for which probably no working build infrastructure exists any more anyway).



---

archive/issue_comments_329269.json:
```json
{
    "body": "I added two deprecation warnings: once at the beginning and once at the end of the file `build/make/install`: at the beginning so that it appears near the start and is there if someone interrupts the build with ctrl-C, and at the end so that it is clearly displayed. (If I put it in `sage-arch-env` instead, it gets buried with all of the other build messages.) I tested with `SAGE64=yes make`.\n\nI asked on sage-devel whether anyone is using this. Let's wait a bit for responses.\n----\nNew commits:",
    "created_at": "2017-09-01T22:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329269",
    "user": "@jhpalmieri"
}
```

I added two deprecation warnings: once at the beginning and once at the end of the file `build/make/install`: at the beginning so that it appears near the start and is there if someone interrupts the build with ctrl-C, and at the end so that it is clearly displayed. (If I put it in `sage-arch-env` instead, it gets buried with all of the other build messages.) I tested with `SAGE64=yes make`.

I asked on sage-devel whether anyone is using this. Let's wait a bit for responses.
----
New commits:



---

archive/issue_comments_329270.json:
```json
{
    "body": "From the few responses on sage-devel so far, I think that SAGE64 is only useful on Solaris. Do we keep the variable? (Do we keep \"supporting\" Solaris?) Can it be merged into some configure option, in which the system type is detected and `-m64` is added to the appropriate flags automatically?",
    "created_at": "2017-09-02T20:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329270",
    "user": "@jhpalmieri"
}
```

From the few responses on sage-devel so far, I think that SAGE64 is only useful on Solaris. Do we keep the variable? (Do we keep "supporting" Solaris?) Can it be merged into some configure option, in which the system type is detected and `-m64` is added to the appropriate flags automatically?



---

archive/issue_comments_329271.json:
```json
{
    "body": "I don't believe that SAGE64 only adds -m64, as if that had been the case, there are obviously easier ways to do it. Adding -m64 is the case in some packages, but not all of them. \n\nDave",
    "created_at": "2017-09-11T13:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329271",
    "user": "drkirkby"
}
```

I don't believe that SAGE64 only adds -m64, as if that had been the case, there are obviously easier ways to do it. Adding -m64 is the case in some packages, but not all of them. 

Dave



---

archive/issue_comments_329272.json:
```json
{
    "body": "We now have access to a SPARC T4 running Solaris 11, things don't look too bad for Solaris at the moment. I've opened #24596 to track this.",
    "created_at": "2018-01-26T14:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329272",
    "user": "@dimpase"
}
```

We now have access to a SPARC T4 running Solaris 11, things don't look too bad for Solaris at the moment. I've opened #24596 to track this.



---

archive/issue_comments_329273.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-01-30T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329273",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_329274.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-30T18:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329274",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_329275.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-31T06:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329275",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329276.json:
```json
{
    "body": "Do we need ABI=64 set on Solaris 64-bit, or not?",
    "created_at": "2018-01-31T12:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329276",
    "user": "@dimpase"
}
```

Do we need ABI=64 set on Solaris 64-bit, or not?



---

archive/issue_comments_329277.json:
```json
{
    "body": "Replying to [comment:14 dimpase]:\n> Do we need ABI=64 set on Solaris 64-bit, or not?\n\nNo idea. So far I have *not* been setting it and it seems to work like that.",
    "created_at": "2018-01-31T13:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329277",
    "user": "@jdemeyer"
}
```

Replying to [comment:14 dimpase]:
> Do we need ABI=64 set on Solaris 64-bit, or not?

No idea. So far I have *not* been setting it and it seems to work like that.



---

archive/issue_comments_329278.json:
```json
{
    "body": "(Disclaimer: Last time I used Solaris was 10 years ago.)  The only time that I remember using the ABI environment variable was for configuring GMP if one wants to do a 32-bit build on 64-bit hardware - a quirk of GMP's configuration scripts. I don't think it's a standard variable at all.",
    "created_at": "2018-02-03T20:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329278",
    "user": "@mkoeppe"
}
```

(Disclaimer: Last time I used Solaris was 10 years ago.)  The only time that I remember using the ABI environment variable was for configuring GMP if one wants to do a 32-bit build on 64-bit hardware - a quirk of GMP's configuration scripts. I don't think it's a standard variable at all.



---

archive/issue_comments_329279.json:
```json
{
    "body": "A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`, and\nnot doing dodgy and error-prone setting of  `CFLAGS`, `CXXFLAGS`, `FCFLAGS`, `FFLAGS`, `LDFLAGS`, etc etc\nto take `-m64/32`.\n\nIn particular, ABI and `-m64` should persist, i.e. written by `./configure` to the Makefile or something like this.",
    "created_at": "2018-02-03T23:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329279",
    "user": "@dimpase"
}
```

A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`, and
not doing dodgy and error-prone setting of  `CFLAGS`, `CXXFLAGS`, `FCFLAGS`, `FFLAGS`, `LDFLAGS`, etc etc
to take `-m64/32`.

In particular, ABI and `-m64` should persist, i.e. written by `./configure` to the Makefile or something like this.



---

archive/issue_comments_329280.json:
```json
{
    "body": "As well, numpy's (and all the other packages that like to test stuff without `CFLAGS` etc set to non-empty values) spkg-install will break, as `-m64` won't be passed. \nThe current version of this spkg-install modifies `CC` to include the flag.\n\nWe cannot and should not modify `CC` globally to have flags in them, as there might be places where `CC` is assumed not to have spaces (GAP is one such place, I think).",
    "created_at": "2018-02-03T23:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329280",
    "user": "@dimpase"
}
```

As well, numpy's (and all the other packages that like to test stuff without `CFLAGS` etc set to non-empty values) spkg-install will break, as `-m64` won't be passed. 
The current version of this spkg-install modifies `CC` to include the flag.

We cannot and should not modify `CC` globally to have flags in them, as there might be places where `CC` is assumed not to have spaces (GAP is one such place, I think).



---

archive/issue_comments_329281.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-03T23:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329281",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_329282.json:
```json
{
    "body": "Replying to [comment:18 dimpase]:\n> dodgy and error-prone setting of  `CFLAGS`, `CXXFLAGS`, `FCFLAGS`, `FFLAGS`, `LDFLAGS`, etc etc to take `-m64/32`.\n\nThese are very standard flags. Setting them is a normal thing.",
    "created_at": "2018-02-04T12:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329282",
    "user": "@jdemeyer"
}
```

Replying to [comment:18 dimpase]:
> dodgy and error-prone setting of  `CFLAGS`, `CXXFLAGS`, `FCFLAGS`, `FFLAGS`, `LDFLAGS`, etc etc to take `-m64/32`.

These are very standard flags. Setting them is a normal thing.



---

archive/issue_comments_329283.json:
```json
{
    "body": "Replying to [comment:18 dimpase]:\n> A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`\n> \n> In particular, ABI and `-m64` should persist, i.e. written by `./configure` to the Makefile or something like this.\n\nOf course. But adding `./configure` options is outside the scope of this ticket. This ticket is about removing something which is unmaintained and almost certainly broken.",
    "created_at": "2018-02-04T12:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329283",
    "user": "@jdemeyer"
}
```

Replying to [comment:18 dimpase]:
> A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`
> 
> In particular, ABI and `-m64` should persist, i.e. written by `./configure` to the Makefile or something like this.

Of course. But adding `./configure` options is outside the scope of this ticket. This ticket is about removing something which is unmaintained and almost certainly broken.



---

archive/issue_comments_329284.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-04T12:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329284",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_329285.json:
```json
{
    "body": "Replying to [comment:19 dimpase]:\n> As well, numpy's (and all the other packages that like to test stuff without `CFLAGS` etc set to non-empty values) spkg-install will break, as `-m64` won't be passed. \n> The current version of this spkg-install modifies `CC` to include the flag.\n> \n> We cannot and should not modify `CC` globally to have flags in them, as there might be places where `CC` is assumed not to have spaces (GAP is one such place, I think).  \n\nI would argue that it's simply better to build/use a GCC version which has the correct flags *by default*.",
    "created_at": "2018-02-04T12:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329285",
    "user": "@jdemeyer"
}
```

Replying to [comment:19 dimpase]:
> As well, numpy's (and all the other packages that like to test stuff without `CFLAGS` etc set to non-empty values) spkg-install will break, as `-m64` won't be passed. 
> The current version of this spkg-install modifies `CC` to include the flag.
> 
> We cannot and should not modify `CC` globally to have flags in them, as there might be places where `CC` is assumed not to have spaces (GAP is one such place, I think).  

I would argue that it's simply better to build/use a GCC version which has the correct flags *by default*.



---

archive/issue_comments_329286.json:
```json
{
    "body": "this patch makes it impossible to build Sage in one go. I  have already explained why, cause you cannot set CC to `gcc -m64` as this will break GAP, but otherwise you will break numpy...",
    "created_at": "2018-02-04T12:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329286",
    "user": "@dimpase"
}
```

this patch makes it impossible to build Sage in one go. I  have already explained why, cause you cannot set CC to `gcc -m64` as this will break GAP, but otherwise you will break numpy...



---

archive/issue_comments_329287.json:
```json
{
    "body": "Replying to [comment:24 dimpase]:\n> this patch makes it impossible to build Sage in one go.\n\nFirst of all, I don't know what you mean with \"build Sage in one go\".\n\nSecond, regardless of what you mean: is it a regression? Suppose that the following are true:\n\n(A) It is impossible to build Sage in one go *without* this patch.\n\n(B) It is impossible to build Sage in one go *with* this patch.\n\nIn these are both true (since I don't know what you mean, I can't say whether that is the case), then your complaint is not meaningful.",
    "created_at": "2018-02-04T13:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329287",
    "user": "@jdemeyer"
}
```

Replying to [comment:24 dimpase]:
> this patch makes it impossible to build Sage in one go.

First of all, I don't know what you mean with "build Sage in one go".

Second, regardless of what you mean: is it a regression? Suppose that the following are true:

(A) It is impossible to build Sage in one go *without* this patch.

(B) It is impossible to build Sage in one go *with* this patch.

In these are both true (since I don't know what you mean, I can't say whether that is the case), then your complaint is not meaningful.



---

archive/issue_comments_329288.json:
```json
{
    "body": "I am saying that with this patch on a platform that needs SAGE64 set one will not be able to get Sage built by running configure+make.\n\n\nThe build will break, at some point you will need to build individual packages with adjusted flags.",
    "created_at": "2018-02-04T15:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329288",
    "user": "@dimpase"
}
```

I am saying that with this patch on a platform that needs SAGE64 set one will not be able to get Sage built by running configure+make.


The build will break, at some point you will need to build individual packages with adjusted flags.



---

archive/issue_comments_329289.json:
```json
{
    "body": "Replying to [comment:26 dimpase]:\n> I am saying that with this patch on a platform that needs SAGE64 set one will not be able to get Sage built by running configure+make.\n\nOK. I am saying that **without this patch** on a platform that needs `SAGE64` set one will not be able to get Sage built by running configure+make. So, this patch doesn't break anything that wasn't already broken before.",
    "created_at": "2018-02-05T07:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329289",
    "user": "@jdemeyer"
}
```

Replying to [comment:26 dimpase]:
> I am saying that with this patch on a platform that needs SAGE64 set one will not be able to get Sage built by running configure+make.

OK. I am saying that **without this patch** on a platform that needs `SAGE64` set one will not be able to get Sage built by running configure+make. So, this patch doesn't break anything that wasn't already broken before.



---

archive/issue_comments_329290.json:
```json
{
    "body": "I am saying that it breaks more than it fixes, e.g. it removes all the traces of the fact that numpy needs a special treatment.",
    "created_at": "2018-02-05T08:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329290",
    "user": "@dimpase"
}
```

I am saying that it breaks more than it fixes, e.g. it removes all the traces of the fact that numpy needs a special treatment.



---

archive/issue_comments_329291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-05T08:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329291",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_329292.json:
```json
{
    "body": "OK fine. I've kept the special-casing for numpy.",
    "created_at": "2018-02-05T08:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329292",
    "user": "@jdemeyer"
}
```

OK fine. I've kept the special-casing for numpy.



---

archive/issue_comments_329293.json:
```json
{
    "body": "In Atlas configuration you did the following:\n\n```\n-conf['32bit?'] = not conf['64bit?']\n+conf['64bit?'] = (conf['bits'] == '64bit')\n+conf['32bit?'] = (conf['bits'] == '32bit')\n```\n\nThis is a different logic for `conf['32bit?']` vs. the originally intended one.\nBy right, you should have just done\n\n```\n+conf['64bit?'] = (conf['bits'] == '64bit')\nconf['32bit?'] = not conf['64bit?']\n...\n\n```\n",
    "created_at": "2018-02-05T10:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329293",
    "user": "@dimpase"
}
```

In Atlas configuration you did the following:

```
-conf['32bit?'] = not conf['64bit?']
+conf['64bit?'] = (conf['bits'] == '64bit')
+conf['32bit?'] = (conf['bits'] == '32bit')
```

This is a different logic for `conf['32bit?']` vs. the originally intended one.
By right, you should have just done

```
+conf['64bit?'] = (conf['bits'] == '64bit')
conf['32bit?'] = not conf['64bit?']
...

```




---

archive/issue_comments_329294.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-05T11:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329294",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_329295.json:
```json
{
    "body": "This reverts the ATLAS logic.",
    "created_at": "2018-02-05T11:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329295",
    "user": "@jdemeyer"
}
```

This reverts the ATLAS logic.



---

archive/issue_comments_329296.json:
```json
{
    "body": "What does this patch do to CFLAG64? (which is a documented Sage variable after all).\n\nIt's not clear. The ticket description does not mention it, but in several places\nyou remove special-casing for it.",
    "created_at": "2018-02-05T11:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329296",
    "user": "@dimpase"
}
```

What does this patch do to CFLAG64? (which is a documented Sage variable after all).

It's not clear. The ticket description does not mention it, but in several places
you remove special-casing for it.



---

archive/issue_comments_329297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-06T11:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329297",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_329298.json:
```json
{
    "body": "Replying to [comment:18 dimpase]:\n> A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`\n\nI created #24672 for that.",
    "created_at": "2018-02-06T16:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329298",
    "user": "@jdemeyer"
}
```

Replying to [comment:18 dimpase]:
> A proper way to do this is to allow something like `--abi=32/64` (or `ABI=32/64`) to `./configure`

I created #24672 for that.



---

archive/issue_comments_329299.json:
```json
{
    "body": "Since the work I'm doing in #24024 will likely conflict heavily with this, I'm trying to remove SAGE64 support from individual packages as I go.  So that work can basically merged with this.  I'll try to pay attention to what changes this is making to the relevant packages.\n\nAlternatively we merge this now, and I rebase everything on top of this.",
    "created_at": "2018-03-28T10:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329299",
    "user": "@embray"
}
```

Since the work I'm doing in #24024 will likely conflict heavily with this, I'm trying to remove SAGE64 support from individual packages as I go.  So that work can basically merged with this.  I'll try to pay attention to what changes this is making to the relevant packages.

Alternatively we merge this now, and I rebase everything on top of this.



---

archive/issue_comments_329300.json:
```json
{
    "body": "Also, if you would prefer to just do the latter, then positive review from me.",
    "created_at": "2018-03-28T10:25:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329300",
    "user": "@embray"
}
```

Also, if you would prefer to just do the latter, then positive review from me.



---

archive/issue_comments_329301.json:
```json
{
    "body": "I suppose this needs a bit more testing. Should we try to put together a new branch for Solaris and try this out there?",
    "created_at": "2018-03-28T11:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329301",
    "user": "@dimpase"
}
```

I suppose this needs a bit more testing. Should we try to put together a new branch for Solaris and try this out there?



---

archive/issue_comments_329302.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-29T12:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329302",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_329303.json:
```json
{
    "body": "Replying to [comment:41 dimpase]:\n> I suppose this needs a bit more testing. Should we try to put together a new branch for Solaris and try this out there?\n\nFine, I just rebased it to 8.2.rc0.",
    "created_at": "2018-03-29T12:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329303",
    "user": "@jdemeyer"
}
```

Replying to [comment:41 dimpase]:
> I suppose this needs a bit more testing. Should we try to put together a new branch for Solaris and try this out there?

Fine, I just rebased it to 8.2.rc0.



---

archive/issue_comments_329304.json:
```json
{
    "body": "OK, this works on 64-bit SPARC Solaris.",
    "created_at": "2018-03-31T19:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329304",
    "user": "@dimpase"
}
```

OK, this works on 64-bit SPARC Solaris.



---

archive/issue_comments_329305.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-31T19:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329305",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_329306.json:
```json
{
    "body": "Just as a note, this will currently conflict with most of the tickets listed under\n\n[This is the Trac macro *TicketQuery* that was inherited from the migration called with arguments (keywords~=destdir))](https://trac.sagemath.org/wiki/WikiMacros#TicketQuery-macro)\n\nHowever, I will merge this branch into those tickets and add this ticket as a dependency.  This one should definitely be merged first though.",
    "created_at": "2018-04-04T08:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329306",
    "user": "@embray"
}
```

Just as a note, this will currently conflict with most of the tickets listed under

[This is the Trac macro *TicketQuery* that was inherited from the migration called with arguments (keywords~=destdir))](https://trac.sagemath.org/wiki/WikiMacros#TicketQuery-macro)

However, I will merge this branch into those tickets and add this ticket as a dependency.  This one should definitely be merged first though.



---

archive/issue_comments_329307.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23496#issuecomment-329307",
    "user": "@vbraun"
}
```

Resolution: fixed
