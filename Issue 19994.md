# Issue 19994: Blacklist GCC 4.8.x

archive/issues_019994.json:
```json
{
    "body": "While working on #20226, I got hit by a similar problem as #14460. Since that bug is supposed to be fixed upstream in GCC 4.9.0, I think the time has come to blacklist all GCC versions older than 4.9.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20231\n\n",
    "created_at": "2016-03-18T11:09:38Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Blacklist GCC 4.8.x",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19994",
    "user": "@jdemeyer"
}
```
While working on #20226, I got hit by a similar problem as #14460. Since that bug is supposed to be fixed upstream in GCC 4.9.0, I think the time has come to blacklist all GCC versions older than 4.9.

Issue created by migration from https://trac.sagemath.org/ticket/20231





---

archive/issue_comments_275373.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-03-18T17:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275373",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_275374.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-18T17:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275374",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_275375.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-18T20:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275375",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_275376.json:
```json
{
    "body": "looks good to me",
    "created_at": "2016-03-18T20:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275376",
    "user": "@fchapoton"
}
```

looks good to me



---

archive/issue_comments_275377.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-23T12:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275377",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_275378.json:
```json
{
    "body": "Was this announced in sage-devel?  After rebasing branch I was working in on the current develop sage suddenly wants to compile gcc because of this.  gcc 4.8 is the default version on Ubuntu 14.04 which is the current LTS (not counting 16.04 which hasn't quite yet been released).\n\nIt seems extreme to me to blacklist an entire compiler when there's a simple workaround (`-fno-tree-dominator-opts`) that can be applied only for that version.  As a compromise, perhaps issue a loud warning when the workaround is used as it may affect performance, for anyone who cares.  It would only need to be enabled for those modules that need it.",
    "created_at": "2016-04-20T14:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275378",
    "user": "@embray"
}
```

Was this announced in sage-devel?  After rebasing branch I was working in on the current develop sage suddenly wants to compile gcc because of this.  gcc 4.8 is the default version on Ubuntu 14.04 which is the current LTS (not counting 16.04 which hasn't quite yet been released).

It seems extreme to me to blacklist an entire compiler when there's a simple workaround (`-fno-tree-dominator-opts`) that can be applied only for that version.  As a compromise, perhaps issue a loud warning when the workaround is used as it may affect performance, for anyone who cares.  It would only need to be enabled for those modules that need it.



---

archive/issue_comments_275379.json:
```json
{
    "body": "Replying to [comment:6 embray]:\n> Was this announced in sage-devel?\nNo.\n\n> It seems extreme to me to blacklist an entire compiler when there's a simple workaround (`-fno-tree-dominator-opts`) that can be applied only for that version.\n\nThere is no simple workaround. The `-fno-tree-dominator-opts` workaround happens to fix one particular instance of the problem, not the problem in general. In particular, `-fno-tree-dominator-opts` does not fix the similar issue from #20226. I was too lazy to investigate yet another workaround for #20226.",
    "created_at": "2016-04-20T14:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275379",
    "user": "@jdemeyer"
}
```

Replying to [comment:6 embray]:
> Was this announced in sage-devel?
No.

> It seems extreme to me to blacklist an entire compiler when there's a simple workaround (`-fno-tree-dominator-opts`) that can be applied only for that version.

There is no simple workaround. The `-fno-tree-dominator-opts` workaround happens to fix one particular instance of the problem, not the problem in general. In particular, `-fno-tree-dominator-opts` does not fix the similar issue from #20226. I was too lazy to investigate yet another workaround for #20226.



---

archive/issue_comments_275380.json:
```json
{
    "body": "Don't you think dropping support for an entire series of compiler versions that is still relatively commonly in use, without a deprecation process and without warning is a bit of a problem?\n\nI'm sure there's a workaround in the other case too.",
    "created_at": "2016-04-21T07:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275380",
    "user": "@embray"
}
```

Don't you think dropping support for an entire series of compiler versions that is still relatively commonly in use, without a deprecation process and without warning is a bit of a problem?

I'm sure there's a workaround in the other case too.



---

archive/issue_comments_275381.json:
```json
{
    "body": "For that matter even if it `-fno-tree-dominator-opts` were the workaround it doesn't need to be applied to the whole module. It could be applied at the function level too.  If there's some optimization that's producing incorrect code around `setjmp` that's not surprising but I'm sure we could see what it's doing and disable that.",
    "created_at": "2016-04-21T07:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275381",
    "user": "@embray"
}
```

For that matter even if it `-fno-tree-dominator-opts` were the workaround it doesn't need to be applied to the whole module. It could be applied at the function level too.  If there's some optimization that's producing incorrect code around `setjmp` that's not surprising but I'm sure we could see what it's doing and disable that.



---

archive/issue_comments_275382.json:
```json
{
    "body": "Reverting in #20594.",
    "created_at": "2016-05-11T19:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19994#issuecomment-275382",
    "user": "@jdemeyer"
}
```

Reverting in #20594.
