# Issue 15123: Implement custom max()

archive/issues_015123.json:
```json
{
    "body": "Assignee: tmonteil\n\nCC:  @videlec\n\nKeywords: RIF\n\n```\nsage: max(RIF(2,3), RIF(1,4)).endpoints()\n(2.00000000000000, 3.00000000000000)\n```\n\nWe should check that all python builtin functions are overwritten for `RealIntervalField` (or work consistently by default).\n\nIssue created by migration from https://trac.sagemath.org/ticket/15360\n\n",
    "created_at": "2013-11-06T12:15:54Z",
    "labels": [
        "component: numerical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Implement custom max()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15123",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
Assignee: tmonteil

CC:  @videlec

Keywords: RIF

```
sage: max(RIF(2,3), RIF(1,4)).endpoints()
(2.00000000000000, 3.00000000000000)
```

We should check that all python builtin functions are overwritten for `RealIntervalField` (or work consistently by default).

Issue created by migration from https://trac.sagemath.org/ticket/15360





---

archive/issue_comments_193579.json:
```json
{
    "body": "The first problem is I think a problem of the builtin max in Python (which never fails).\n\nFor the second problem, you should use floor and not int. But anyway, there is a bug in the function as x_interval.upper().floor() may fail with a `ValueError` if the upper is infinity (line 582 and 583 in sage/functions/other.py). I guess one should fix floor at that point.\n\nGood luck!",
    "created_at": "2013-11-08T03:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193579",
    "user": "https://github.com/videlec"
}
```

The first problem is I think a problem of the builtin max in Python (which never fails).

For the second problem, you should use floor and not int. But anyway, there is a bug in the function as x_interval.upper().floor() may fail with a `ValueError` if the upper is infinity (line 582 and 583 in sage/functions/other.py). I guess one should fix floor at that point.

Good luck!



---

archive/issue_events_044601.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44601"
}
```



---

archive/issue_events_044602.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44602"
}
```



---

archive/issue_events_044603.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44603"
}
```



---

archive/issue_events_044604.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44604"
}
```



---

archive/issue_events_044605.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44605"
}
```



---

archive/issue_comments_193580.json:
```json
{
    "body": "With Sage 7.0:\n\n```\nsage: x =  -(25510582*pi - 80143857)/(52746197*pi - 165707065)\nsage: int(x)\n1\n```",
    "created_at": "2016-01-19T21:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193580",
    "user": "https://github.com/jdemeyer"
}
```

With Sage 7.0:

```
sage: x =  -(25510582*pi - 80143857)/(52746197*pi - 165707065)
sage: int(x)
1
```



---

archive/issue_comments_193581.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-19T21:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193581",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_events_044606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-19T21:33:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44606"
}
```



---

archive/issue_events_044607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-19T21:33:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44607"
}
```



---

archive/issue_comments_193582.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-19T21:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193582",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_193583.json:
```json
{
    "body": "We cannot fix this (that is just how Python's `max()` works):\n\n```\nsage: max(RIF(2,3), RIF(1,4)).endpoints()\n(2.00000000000000, 3.00000000000000)\n```\nbut this works:\n\n```\nsage: RIF(2,3).max(RIF(1,4)).endpoints()\n(2.00000000000000, 4.00000000000000)\n```",
    "created_at": "2016-01-19T21:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193583",
    "user": "https://github.com/jdemeyer"
}
```

We cannot fix this (that is just how Python's `max()` works):

```
sage: max(RIF(2,3), RIF(1,4)).endpoints()
(2.00000000000000, 3.00000000000000)
```
but this works:

```
sage: RIF(2,3).max(RIF(1,4)).endpoints()
(2.00000000000000, 4.00000000000000)
```



---

archive/issue_comments_193584.json:
```json
{
    "body": "I wonder whether it is acceptable to overwrite the `max` fuction, by using `__max__` method if available and the builtin Python `max` otherwise. Also whether could-it be requested to Python to allow such override as part of the language ?\n\n\nNote that this particular issue with `max` also exists for the symbolic ring.",
    "created_at": "2016-01-20T21:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193584",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I wonder whether it is acceptable to overwrite the `max` fuction, by using `__max__` method if available and the builtin Python `max` otherwise. Also whether could-it be requested to Python to allow such override as part of the language ?


Note that this particular issue with `max` also exists for the symbolic ring.



---

archive/issue_comments_193585.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-01-20T21:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15123#issuecomment-193585",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_events_044608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-24T22:21:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44608"
}
```



---

archive/issue_events_044609.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-24T22:21:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15123",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15123#event-44609"
}
```
