# Issue 10454: In Generic graphs, adjacency matrices with non-negative non-integral entries are treated as "multi-edge" instead of "weighted"

Issue created by migration from Trac.

Original creator: xqwang

Original creation time: 2010-12-21 08:12:38

Assignee: jason, ncohen, rlm

CC:  tscrim

Keywords: weighted adjacency matrix

Let M be a symmetric, non-negative, and non-integral valued matrix. The Graph Theory module (graph.py) treats is as the adjacency matrix of a multi-edge graph, which does not make sense. It is more reasonable and intuitive to treat is as the adjacency matrix of a weight graph.

This defect is observed in Sage 4.4.1 and Sage 4.6

{{{ 
sage: M = Matrix([[0,1,1],[1,0,1/2],[1,1/2,0]]); M    
[  0   1   1]
[  1   0 1/2]
[  1 1/2   0]
sage: Graph(M)
Multi-graph on 3 vertices
}}}


---

Comment by xqwang created at 2010-12-21 08:21:23

Changing assignee from jason, ncohen, rlm to xqwang.


---

Comment by xqwang created at 2010-12-21 08:21:23

This defect can be fixed by changing the following two lines of code in $SAGE_HOME/local/lib/python/site-packages/sage/graphs/graph.py

    918                     e = int(e)


    919                     assert e >= 0 
TO

    918                     e_flr = int(e)


    919                     assert (e_flr >= 0 and e_flr == e)

This change will make sure that if the adjacency matrix is non-integral then its entries are treated as weights (in stead of # of edges).


---

Comment by jmantysalo created at 2016-08-20 05:55:36

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-08-20 05:55:36

This has been corrected at some point. Travis, can you confirm and put to positive_review.


---

Comment by chapoton created at 2016-08-20 07:09:01

ok, seems to work smoothly


---

Comment by chapoton created at 2016-08-20 07:09:01

Changing status from needs_review to positive_review.


---

Comment by embray created at 2016-08-30 13:32:25

Resolution: wontfix


---

Comment by embray created at 2016-08-30 13:32:25

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).
