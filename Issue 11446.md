# Issue 11446: solve with solution_dict=True doesn't always return a list

archive/issues_011446.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @kcrisman\n\nKeywords: solve, solution_dict\n\nAs pointed out in a post on sage-support:\n\n```\nvar('x')\ng(x)=0\nprint solve(g(x)==0,x)\nprint solve(g(x)==0,x,solution_dict=True) \n```\ngives\n\n```\n[x == r1]\n{x: r1}\n```\nIt should be [{x: r1}] to be consistent.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11618\n\n",
    "created_at": "2011-07-22T01:03:04Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "solve with solution_dict=True doesn't always return a list",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11446",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```
Assignee: @burcin

CC:  @kcrisman

Keywords: solve, solution_dict

As pointed out in a post on sage-support:

```
var('x')
g(x)=0
print solve(g(x)==0,x)
print solve(g(x)==0,x,solution_dict=True) 
```
gives

```
[x == r1]
{x: r1}
```
It should be [{x: r1}] to be consistent.

Issue created by migration from https://trac.sagemath.org/ticket/11618





---

archive/issue_comments_127596.json:
```json
{
    "body": "Yep:\n\n```\n       * ``solution_dict`` - bool (default: False); if True or non-zero,\n         return a list of dictionaries containing the solutions. If there\n         are no solutions, return an empty list (rather than a list\n         containing an empty dictionary). Likewise, if there's only a\n         single solution, return a list containing one dictionary with\n         that solution.\n```\n\nA doctest for a similar case got deleted by a reviewer, which still works though:\n\n```\nsage: solve([x+y==6, x-y==4], x, y, solution_dict=-1)\n[{y: 1, x: 5}]\n```\nAnd also the following works as expected:\n\n```\nsage: solve([x==0],x,solution_dict=True)\n[{x: 0}]\n```\n(Sage 4.7.1.{alpha2,rc0})",
    "created_at": "2011-07-22T02:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127596",
    "user": "https://github.com/nexttime"
}
```

Yep:

```
       * ``solution_dict`` - bool (default: False); if True or non-zero,
         return a list of dictionaries containing the solutions. If there
         are no solutions, return an empty list (rather than a list
         containing an empty dictionary). Likewise, if there's only a
         single solution, return a list containing one dictionary with
         that solution.
```

A doctest for a similar case got deleted by a reviewer, which still works though:

```
sage: solve([x+y==6, x-y==4], x, y, solution_dict=-1)
[{y: 1, x: 5}]
```
And also the following works as expected:

```
sage: solve([x==0],x,solution_dict=True)
[{x: 0}]
```
(Sage 4.7.1.{alpha2,rc0})



---

archive/issue_comments_127597.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-22T06:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127597",
    "user": "https://github.com/nexttime"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127598.json:
```json
{
    "body": "The attached patch fixes the inconsistency and adds a doctest for the case given.\n\nI've removed superfluous parentheses (and white space) and also converted some tabs to spaces. (I thought the merge script would reject patches introducing new tabs after all got converted a while ago.)",
    "created_at": "2011-07-22T06:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127598",
    "user": "https://github.com/nexttime"
}
```

The attached patch fixes the inconsistency and adds a doctest for the case given.

I've removed superfluous parentheses (and white space) and also converted some tabs to spaces. (I thought the merge script would reject patches introducing new tabs after all got converted a while ago.)



---

archive/issue_comments_127599.json:
```json
{
    "body": "Hmmm,\n\n```python\nans = [ {x: self.parent().var('r1')} ]\n```\nwould perhaps have been a bit more readable...",
    "created_at": "2011-07-22T06:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127599",
    "user": "https://github.com/nexttime"
}
```

Hmmm,

```python
ans = [ {x: self.parent().var('r1')} ]
```
would perhaps have been a bit more readable...



---

archive/issue_comments_127600.json:
```json
{
    "body": "Sage library patch. (Updated version.) Based on Sage 4.7.1.rc0.",
    "created_at": "2011-07-22T19:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127600",
    "user": "https://github.com/nexttime"
}
```

Sage library patch. (Updated version.) Based on Sage 4.7.1.rc0.



---

archive/issue_comments_127601.json:
```json
{
    "body": "Attachment [trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch](tarball://root/attachments/some-uuid/ticket11618/trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch) by @nexttime created at 2011-07-22 19:29:11\n\nReplying to [comment:3 leif]:\n> [...] would perhaps have been a bit more readable.\n\n\nI've updated the patch to directly construct the solution dictionary.\n\n(Leif doesn't work without coffee.)\n\n---\n\nHey patchbot, apply: [attachment:trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch]!",
    "created_at": "2011-07-22T19:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127601",
    "user": "https://github.com/nexttime"
}
```

Attachment [trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch](tarball://root/attachments/some-uuid/ticket11618/trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch) by @nexttime created at 2011-07-22 19:29:11

Replying to [comment:3 leif]:
> [...] would perhaps have been a bit more readable.


I've updated the patch to directly construct the solution dictionary.

(Leif doesn't work without coffee.)

---

Hey patchbot, apply: [attachment:trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch]!



---

archive/issue_comments_127602.json:
```json
{
    "body": "The dependency I've added is (more or less) just for the patchbot. (#8553 was merged into Sage 4.7.1.alpha2.)",
    "created_at": "2011-07-22T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127602",
    "user": "https://github.com/nexttime"
}
```

The dependency I've added is (more or less) just for the patchbot. (#8553 was merged into Sage 4.7.1.alpha2.)



---

archive/issue_comments_127603.json:
```json
{
    "body": "Thanks for posting this patch - I'll try to take a look at this (relatively) soon, as it looks straightforward.",
    "created_at": "2011-07-29T19:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127603",
    "user": "https://github.com/kcrisman"
}
```

Thanks for posting this patch - I'll try to take a look at this (relatively) soon, as it looks straightforward.



---

archive/issue_comments_127604.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127604",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127605.json:
```json
{
    "body": "Patch looks good.  Performs as advertised.   Thanks!",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127605",
    "user": "https://github.com/kcrisman"
}
```

Patch looks good.  Performs as advertised.   Thanks!



---

archive/issue_events_030476.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:04:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11446#event-30476"
}
```



---

archive/issue_comments_127606.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-18T22:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11446#issuecomment-127606",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
