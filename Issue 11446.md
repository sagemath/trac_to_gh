# Issue 11446: solve with solution_dict=True doesn't always return a list

Issue created by migration from Trac.

Original creator: mhampton

Original creation time: 2011-07-22 01:03:04

Assignee: burcin

CC:  kcrisman

Keywords: solve, solution_dict

As pointed out in a post on sage-support:

```
var('x')
g(x)=0
print solve(g(x)==0,x)
print solve(g(x)==0,x,solution_dict=True) 
```

gives

```
[x == r1]
{x: r1}
```

It should be [{x: r1}] to be consistent.


---

Comment by leif created at 2011-07-22 02:24:42

Yep:

```
       * ``solution_dict`` - bool (default: False); if True or non-zero,
         return a list of dictionaries containing the solutions. If there
         are no solutions, return an empty list (rather than a list
         containing an empty dictionary). Likewise, if there's only a
         single solution, return a list containing one dictionary with
         that solution.
```


A doctest for a similar case got deleted by a reviewer, which still works though:

```
sage: solve([x+y==6, x-y==4], x, y, solution_dict=-1)
[{y: 1, x: 5}]
```

And also the following works as expected:

```
sage: solve([x==0],x,solution_dict=True)
[{x: 0}]
```

(Sage 4.7.1.{alpha2,rc0})


---

Comment by leif created at 2011-07-22 06:01:15

Changing status from new to needs_review.


---

Comment by leif created at 2011-07-22 06:01:15

The attached patch fixes the inconsistency and adds a doctest for the case given.

I've removed superfluous parentheses (and white space) and also converted some tabs to spaces. (I thought the merge script would reject patches introducing new tabs after all got converted a while ago.)


---

Comment by leif created at 2011-07-22 06:18:45

Hmmm,

```python
ans = [ {x: self.parent().var('r1')} ]
```

would perhaps have been a bit more readable...


---

Comment by leif created at 2011-07-22 19:05:48

Sage library patch. (Updated version.) Based on Sage 4.7.1.rc0.


---

Attachment

Replying to [comment:3 leif]:
> [...] would perhaps have been a bit more readable.

I've updated the patch to directly construct the solution dictionary.

(Leif doesn't work without coffee.)

----

Hey patchbot, apply: [attachment:trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch]!


---

Comment by leif created at 2011-07-22 20:01:28

The dependency I've added is (more or less) just for the patchbot. (#8553 was merged into Sage 4.7.1.alpha2.)


---

Comment by kcrisman created at 2011-07-29 19:10:09

Thanks for posting this patch - I'll try to take a look at this (relatively) soon, as it looks straightforward.


---

Comment by kcrisman created at 2011-08-01 18:37:42

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2011-08-01 18:37:42

Patch looks good.  Performs as advertised.   Thanks!


---

Comment by jdemeyer created at 2011-08-18 22:04:57

Resolution: fixed
