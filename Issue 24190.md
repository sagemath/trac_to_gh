# Issue 24190: Upgrade to GAP 4.8.9

Issue created by migration from https://trac.sagemath.org/ticket/24427

Original creator: slelievre

Original creation time: 2017-12-25 00:26:33

CC:  dimpase fbissey jdemeyer slelievre vbraun @timokau @sebasguts nthiery embray

Keywords: GAP, database_gap, gap_packages, libgap

GAP 4.8.9 was released on 2017-12-18.

Release announcement:
  * https://mail.gap-system.org/pipermail/forum/2017/005628.html

GAP 4.8.9 page:
  * https://www.gap-system.org/Releases/4.8.9.html

Changelog:
  * https://www.gap-system.org/Manuals/doc/changes/chap2.html#X803A9F0685295E01

From SageMath 7.6.beta3 to the current SageMath 8.2.beta1,
we use GAP 4.8.6, introduced in #20914. Time to upgrade!

Tarball for GAP:
  * https://www.gap-system.org/pub/gap/gap48/tar.bz2/gap4r8p9_2017_12_18-23_44.tar.bz2

Tarballs for database_gap, gap_packages, libgap:
  * ...
  * ...
  * ...

Note that #22626 will upgrade to the upcoming GAP 4.9,
but let's upgrade to GAP 4.8.9 for now.


---

Comment by slelievre created at 2018-01-18 13:36:51

Changing the goal of this ticket from "GAP 4.8.9" to "GAP 4.8.10".


---

Comment by dimpase created at 2018-02-17 12:24:36

GAP 4.9 beta is already out.

https://www.gap-system.org/pub/gap/gap-4.9/beta/


---

Comment by slelievre created at 2018-02-17 19:20:44

I suggest getting GAP 4.8.10 in Sage 8.2, if it's not too much work, since:

- GAP 4.9 might still be in beta when Sage 8.2 is released.
- GAP 4.9 has major changes, so #22626 (Upgrade to GAP 4.9) might take time.


---

Comment by slelievre created at 2018-03-26 14:58:24

Changing type from PLEASE CHANGE to enhancement.


---

Comment by slelievre created at 2018-03-26 14:58:24

Although the release of GAP 4.9.1 is approaching, I don't know if it will still be a beta
or considered the official 4.9 release.

It might still be possible to get GAP 4.8.10 in Sage 8.2. What are the steps to produce
tarballs for database_gap, gap_packages, libgap?


---

Comment by dimpase created at 2018-03-26 15:14:28

Replying to [comment:4 slelievre]:
> Although the release of GAP 4.9.1 is approaching, I don't know if it will still be a beta
> or considered the official 4.9 release.
> 
> It might still be possible to get GAP 4.8.10 in Sage 8.2. What are the steps to produce
> tarballs for database_gap, gap_packages, libgap?

Updating libgap is potentially time-consuming and error-prone. See https://bitbucket.org/vbraun/libgap


---

Comment by slelievre created at 2018-04-26 12:32:44

Replying to [comment:5 dimpase]:
> Replying to [comment:4 slelievre]:
> > Although the release of GAP 4.9.1 is approaching, I don't know
> > if it will still be a beta or considered the official 4.9 release.
> > 
> > It might still be possible to get GAP 4.8.10 in Sage 8.2. What are the
> > steps to produce tarballs for database_gap, gap_packages, libgap?
> 
> Updating libgap is potentially time-consuming and error-prone. See
> https://bitbucket.org/vbraun/libgap

Hard to know in advance, but one might hope that minor version bumps
in GAP would be relatively easy to deal with.

The upgrade to GAP 4.8.10 in the ArchLinux packaging of SageMath
seems pretty straightforward:

https://git.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/libgap#n20


---

Comment by dimpase created at 2018-04-26 12:58:28

This looks fishy - just version bumps...


---

Comment by jdemeyer created at 2018-04-26 15:07:50

Worse than fishy: plain wrong!

It looks like they took the 4.8.6 tarball and artificially renamed it 4.8.10.


---

Comment by slelievre created at 2018-04-29 11:20:44

In Debian they use GAP 4.8.8, does that mean they produced libgap for 4.8.8?


---

Comment by dimpase created at 2018-04-29 11:50:50

Replying to [comment:9 slelievre]:
> In Debian they use GAP 4.8.8, does that mean they produced libgap for 4.8.8?
Probably they did. Last time I worked on upgrade to 4.8.6, I used Debian's work, IIRC.


---

Attachment

gap 4.8.10 sources after running spkg-src


---

Comment by nthiery created at 2018-05-01 15:27:50

To get the ball rolling, I updated the GAP sources according to the instructions in the SPKG.
I haven't run the tests yet (rebuilding my Sage).
----
New commits:


---

Comment by tscrim created at 2018-05-01 23:37:22

Just noting #13426, which adds more things to `gap_packages`.


---

Comment by slelievre created at 2018-05-01 23:45:54

Sebastian Gutsche produced a tentative tarball for libgap-4.8.10:
https://bitbucket.org/sebasguts/libgap/downloads/libgap-4.8.10.tar.gz


---

Comment by fbissey created at 2018-05-02 00:07:27

We should note that the only thing changing since 4.8.8 is the packages distributed with gap. 
https://www.gap-system.org/Manuals/doc/changes/chap2.html#X803A9F0685295E01

Core gap code and databases have not changed since 4.8.8. The libgap for 4.8.8 that debian made should be identical for 4.8.10.


---

Comment by nthiery created at 2018-05-02 16:20:50

Thanks FranÃ§ois for the info.

The branch as is is not yet functional, as libgap needs to be the same version as gap.
Sebastian's libgap above is missing the prefixing; he will work on this tonight, and then I'll update this branch and rerun the tests.


---

Comment by slelievre created at 2018-07-24 08:58:39

Replying to [comment:16 nthiery]:
> The branch as is is not yet functional, as libgap needs to be the same version as gap.
> Sebastian's libgap above is missing the prefixing; he will work on this tonight, and then I'll update this branch and rerun the tests.

Did the prefixing happen in the end? What remains to be done here?


---

Comment by chapoton created at 2019-01-04 20:12:41

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-01-04 20:12:41

can we close this one now ?


---

Comment by tscrim created at 2019-01-04 20:13:50

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-01-04 20:13:50

I believe so.


---

Comment by embray created at 2019-01-07 14:18:00

Resolution: wontfix


---

Comment by embray created at 2019-01-07 14:18:00

Superseded by #22626.
