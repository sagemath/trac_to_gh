# Issue 12534: monomials of 0

Issue created by migration from Trac.

Original creator: vferay

Original creation time: 2012-03-20 12:31:59

Assignee: sage-combinat

The _monomials_ method applied to the null polynomials returns [0].

According to me, it should return []. This can be problematic because when we ask the coefficients of the monomial 0, an error is raised.

If nobody objects, I will write a patch


```div style="font-size: 80%"
  {{{#!python
    sage: QX=PolynomialRing(QQ,'x',2)
    sage: P=QX(0)
    sage: P.monomials()
    [0]
    sage: [P.coefficient(mon) for mon in P.monomials()]
    TypeError: degrees must be a monomial
  }}}
```



---

Comment by vferay created at 2012-03-20 12:32:16

Changing status from new to needs_info.


---

Comment by nthiery created at 2012-03-21 06:51:30

Hi Valentin!

On the principle, I totally agree that the result should be the empty list. And this would be consistent with CombinatorialFreeModule.

However the feature was documented and this change is backward
incompatible. So I guess this requires a call for votes on sage-devel.

Another thing to be careful with is that there are several implementations of monomials::

```
sage: search_def("monomials")
combinat/free_module.py:589:    def monomials(self):
rings/multi_power_series_ring_element.py:950:    def monomials(self):
rings/quotient_ring_element.py:658:    def monomials(self):
rings/monomials.py:27:def monomials(v, n):
rings/polynomial/pbori.pyx:3657:    def monomials(self): 
rings/polynomial/multi_polynomial_sequence.py:480:    def monomials(self):
rings/polynomial/multi_polynomial_sequence.py:497:    def nmonomials(self):
rings/polynomial/multi_polynomial_libsingular.pyx:3271:    def monomials(self):
rings/polynomial/plural.pyx:2387:    def monomials(self):
rings/polynomial/multi_polynomial_element.py:979:    def monomials(self):
crypto/mq/mpolynomialsystem.py:394:    def monomials(self):
crypto/mq/mpolynomialsystem.py:863:    def monomials(self):
```


All the above should be checked and fixed (when needed) at once.

Thanks for volunteering on cleaning up work!

Cheers,
                           Nicolas


---

Attachment

Here is a ticket, that works. 

It seems that changing the behaviour of 0.monomials() could trigger some problems in the is_homogeneous method in other places. I have found and corrected one. Maybe there are some others. Let us see the tests by the patchbot.

Could somebody ask the question on sage-devel for the backward incomp. change ?


---

Comment by chapoton created at 2012-07-09 16:21:48

Changing status from needs_info to needs_review.


---

Comment by chapoton created at 2012-07-09 16:22:25

Changing keywords from "" to "polynomial, zero".


---

Comment by chapoton created at 2012-07-09 16:51:37

Changing component from combinatorics to commutative algebra.


---

Comment by chapoton created at 2012-07-10 08:03:10

Ok, tests seems to be ok, as the bot is green. Could somebody please review ?


---

Comment by kini created at 2012-07-10 14:33:50

It looks good to me!


---

Comment by kini created at 2012-07-10 14:33:50

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2012-07-13 08:51:21

As this is a (small) backward incompatible change, a vote has been opened here :

https://groups.google.com/d/topic/sage-devel/jqzOxgfQItE/discussion

So far, everybody has voted in favor of the change. Maybe one can consider that the change is approved ?


---

Comment by kini created at 2012-07-13 08:52:18

I don't think a vote was even necessary, but sure (IMO).


---

Comment by jdemeyer created at 2012-07-13 11:43:57

Resolution: fixed
