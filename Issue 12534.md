# Issue 12534: monomials of 0

archive/issues_012534.json:
```json
{
    "body": "Assignee: sage-combinat\n\nThe *monomials* method applied to the null polynomials returns [0].\n\nAccording to me, it should return []. This can be problematic because when we ask the coefficients of the monomial 0, an error is raised.\n\nIf nobody objects, I will write a patch\n\n\n```div style=\"font-size: 80%\"\n  {{{#!python\n    sage: QX=PolynomialRing(QQ,'x',2)\n    sage: P=QX(0)\n    sage: P.monomials()\n    [0]\n    sage: [P.coefficient(mon) for mon in P.monomials()]\n    TypeError: degrees must be a monomial\n  }}}\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12706\n\n",
    "created_at": "2012-03-20T12:31:59Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "monomials of 0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12534",
    "user": "vferay"
}
```
Assignee: sage-combinat

The *monomials* method applied to the null polynomials returns [0].

According to me, it should return []. This can be problematic because when we ask the coefficients of the monomial 0, an error is raised.

If nobody objects, I will write a patch


```div style="font-size: 80%"
  {{{#!python
    sage: QX=PolynomialRing(QQ,'x',2)
    sage: P=QX(0)
    sage: P.monomials()
    [0]
    sage: [P.coefficient(mon) for mon in P.monomials()]
    TypeError: degrees must be a monomial
  }}}
```


Issue created by migration from https://trac.sagemath.org/ticket/12706





---

archive/issue_comments_148543.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2012-03-20T12:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148543",
    "user": "vferay"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_148544.json:
```json
{
    "body": "Hi Valentin!\n\nOn the principle, I totally agree that the result should be the empty list. And this would be consistent with CombinatorialFreeModule.\n\nHowever the feature was documented and this change is backward\nincompatible. So I guess this requires a call for votes on sage-devel.\n\nAnother thing to be careful with is that there are several implementations of monomials::\n\n```\nsage: search_def(\"monomials\")\ncombinat/free_module.py:589:    def monomials(self):\nrings/multi_power_series_ring_element.py:950:    def monomials(self):\nrings/quotient_ring_element.py:658:    def monomials(self):\nrings/monomials.py:27:def monomials(v, n):\nrings/polynomial/pbori.pyx:3657:    def monomials(self): \nrings/polynomial/multi_polynomial_sequence.py:480:    def monomials(self):\nrings/polynomial/multi_polynomial_sequence.py:497:    def nmonomials(self):\nrings/polynomial/multi_polynomial_libsingular.pyx:3271:    def monomials(self):\nrings/polynomial/plural.pyx:2387:    def monomials(self):\nrings/polynomial/multi_polynomial_element.py:979:    def monomials(self):\ncrypto/mq/mpolynomialsystem.py:394:    def monomials(self):\ncrypto/mq/mpolynomialsystem.py:863:    def monomials(self):\n```\n\n\nAll the above should be checked and fixed (when needed) at once.\n\nThanks for volunteering on cleaning up work!\n\nCheers,\n                           Nicolas",
    "created_at": "2012-03-21T06:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148544",
    "user": "nthiery"
}
```

Hi Valentin!

On the principle, I totally agree that the result should be the empty list. And this would be consistent with CombinatorialFreeModule.

However the feature was documented and this change is backward
incompatible. So I guess this requires a call for votes on sage-devel.

Another thing to be careful with is that there are several implementations of monomials::

```
sage: search_def("monomials")
combinat/free_module.py:589:    def monomials(self):
rings/multi_power_series_ring_element.py:950:    def monomials(self):
rings/quotient_ring_element.py:658:    def monomials(self):
rings/monomials.py:27:def monomials(v, n):
rings/polynomial/pbori.pyx:3657:    def monomials(self): 
rings/polynomial/multi_polynomial_sequence.py:480:    def monomials(self):
rings/polynomial/multi_polynomial_sequence.py:497:    def nmonomials(self):
rings/polynomial/multi_polynomial_libsingular.pyx:3271:    def monomials(self):
rings/polynomial/plural.pyx:2387:    def monomials(self):
rings/polynomial/multi_polynomial_element.py:979:    def monomials(self):
crypto/mq/mpolynomialsystem.py:394:    def monomials(self):
crypto/mq/mpolynomialsystem.py:863:    def monomials(self):
```


All the above should be checked and fixed (when needed) at once.

Thanks for volunteering on cleaning up work!

Cheers,
                           Nicolas



---

archive/issue_comments_148545.json:
```json
{
    "body": "Attachment [trac_12706_monomials_of_zero-fc.patch](tarball://root/attachments/some-uuid/ticket12706/trac_12706_monomials_of_zero-fc.patch) by chapoton created at 2012-07-09 16:21:15\n\nHere is a ticket, that works. \n\nIt seems that changing the behaviour of 0.monomials() could trigger some problems in the is_homogeneous method in other places. I have found and corrected one. Maybe there are some others. Let us see the tests by the patchbot.\n\nCould somebody ask the question on sage-devel for the backward incomp. change ?",
    "created_at": "2012-07-09T16:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148545",
    "user": "chapoton"
}
```

Attachment [trac_12706_monomials_of_zero-fc.patch](tarball://root/attachments/some-uuid/ticket12706/trac_12706_monomials_of_zero-fc.patch) by chapoton created at 2012-07-09 16:21:15

Here is a ticket, that works. 

It seems that changing the behaviour of 0.monomials() could trigger some problems in the is_homogeneous method in other places. I have found and corrected one. Maybe there are some others. Let us see the tests by the patchbot.

Could somebody ask the question on sage-devel for the backward incomp. change ?



---

archive/issue_comments_148546.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-07-09T16:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148546",
    "user": "chapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_148547.json:
```json
{
    "body": "Changing keywords from \"\" to \"polynomial, zero\".",
    "created_at": "2012-07-09T16:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148547",
    "user": "chapoton"
}
```

Changing keywords from "" to "polynomial, zero".



---

archive/issue_comments_148548.json:
```json
{
    "body": "Changing component from combinatorics to commutative algebra.",
    "created_at": "2012-07-09T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148548",
    "user": "chapoton"
}
```

Changing component from combinatorics to commutative algebra.



---

archive/issue_comments_148549.json:
```json
{
    "body": "Ok, tests seems to be ok, as the bot is green. Could somebody please review ?",
    "created_at": "2012-07-10T08:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148549",
    "user": "chapoton"
}
```

Ok, tests seems to be ok, as the bot is green. Could somebody please review ?



---

archive/issue_comments_148550.json:
```json
{
    "body": "It looks good to me!",
    "created_at": "2012-07-10T14:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148550",
    "user": "kini"
}
```

It looks good to me!



---

archive/issue_comments_148551.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-10T14:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148551",
    "user": "kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148552.json:
```json
{
    "body": "As this is a (small) backward incompatible change, a vote has been opened here :\n\nhttps://groups.google.com/d/topic/sage-devel/jqzOxgfQItE/discussion\n\nSo far, everybody has voted in favor of the change. Maybe one can consider that the change is approved ?",
    "created_at": "2012-07-13T08:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148552",
    "user": "chapoton"
}
```

As this is a (small) backward incompatible change, a vote has been opened here :

https://groups.google.com/d/topic/sage-devel/jqzOxgfQItE/discussion

So far, everybody has voted in favor of the change. Maybe one can consider that the change is approved ?



---

archive/issue_comments_148553.json:
```json
{
    "body": "I don't think a vote was even necessary, but sure (IMO).",
    "created_at": "2012-07-13T08:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148553",
    "user": "kini"
}
```

I don't think a vote was even necessary, but sure (IMO).



---

archive/issue_comments_148554.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-13T11:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12534",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12534#issuecomment-148554",
    "user": "jdemeyer"
}
```

Resolution: fixed
