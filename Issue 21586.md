# Issue 21586: LatticePosets: Faster is_pseudocomplemented()

Issue created by migration from https://trac.sagemath.org/ticket/21823

Original creator: jmantysalo

Original creation time: 2016-11-04 18:43:54

CC:  chapoton tscrim

After


```
P = Posets.BooleanLattice(3)
_ = P.is_pseudocomplemented()
P = Posets.BooleanLattice(9)
_ = P.meet_matrix()
_ = P.join_matrix()
```


without this patch:


```
sage: timeit('P.is_pseudocomplemented()')
5 loops, best of 3: 143 ms per loop
```


after this patch:


```
sage: timeit('P.is_pseudocomplemented()')
125 loops, best of 3: 4.09 ms per loop
```




---

Comment by jmantysalo created at 2016-11-04 18:47:20

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-11-04 18:47:20

Frédéric, can you check the reference? I found it from http://cams.ehess.fr/docannexe.php?id=1111, but do not understand French.
----
New commits:


---

Comment by chapoton created at 2016-11-04 20:18:11

proof seems ok to me

it says that the pseucomplement of x is the meet of the pseudocomplements of the atoms below x

proof is very simple, take 7 lines at start of proof of Theoreme 3.3 page 96

You just need 3 French words : évident = obvious, montrer = show, implique = implies

:)


---

Comment by jmantysalo created at 2016-11-05 05:34:02

Thanks Frédéric!

Travis, can you review this trivial patch? I will optimize `skeleton()` in another ticket.


---

Comment by tscrim created at 2016-11-05 16:37:17

I think you should add the reference and put a short description (perhaps an `ALGORITHM:` block) in the docstring.


---

Comment by git created at 2016-11-05 16:57:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-05 16:58:09

Replying to [comment:5 tscrim]:
> I think you should add the reference and put a short description (perhaps an `ALGORITHM:` block) in the docstring.

Done.

(Contains a non-related typo correction "fintie" -> "finite".)


---

Comment by tscrim created at 2016-11-05 17:35:15

Now we have that master reference file, so the reference should go in there.


---

Comment by git created at 2016-11-05 17:53:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-05 17:54:28

Replying to [comment:8 tscrim]:
> Now we have that master reference file, so the reference should go in there.

Good point. This should work, but takes time to compile... How to doc-compile only master references file?


---

Comment by tscrim created at 2016-11-05 18:15:19

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-11-05 18:15:19

I don't know. (Personally I wasn't so happy with this shift.) LGTM though.


---

Comment by vbraun created at 2016-11-08 23:42:04

Resolution: fixed
