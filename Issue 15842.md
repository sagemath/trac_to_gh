# Issue 15842: Python 3 preparation: In Py3 there is only one string type "str" (which is unicode!)

Issue created by migration from https://trac.sagemath.org/ticket/16079

Original creator: wluebbe

Original creation time: 2014-04-07 09:02:53

CC:  tscrim jmantysalo jdemeyer

Keywords: python3

This is often considered the most important change in Py3. The approach still has to be determined!

The tool 2to3 simple changes `unicode` to `str` and removes the u-prefix from string literals (`u'xxx'` to `'xxx'`).


But the code has to depend on the Python version! 

This ticket is tracked as a dependency of meta-ticket ticket:16052.


---

Comment by aapitzsch created at 2015-05-25 21:23:27

The u-prefix has been readded to python 3.3, so we don't have to care about it (now).


---

Comment by aapitzsch created at 2015-05-25 21:23:27

Changing status from new to needs_review.


---

Comment by chapoton created at 2015-05-27 19:39:25

this breaks the doc building, see patchbot report


---

Comment by chapoton created at 2015-05-27 19:39:25

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2016-04-28 06:50:45

Changing component from distribution to python3.


---

Comment by chapoton created at 2016-05-15 07:59:13

New commits:


---

Comment by git created at 2016-06-29 19:19:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-03 08:05:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-03 13:05:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-08-05 10:16:21

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-08-05 10:16:21

bot is green

maybe this is only a good step, to be done in another ticket ?


---

Comment by jdemeyer created at 2016-08-12 09:19:27

I don't believe that `src/sage/misc/lazy_string.pyx` needs any changes at all. There is nothing wrong with having a `__unicode__` method (I guess it would not be used in Python 3, but that is fine).


---

Comment by jdemeyer created at 2016-08-12 09:26:49

In `src/sage/misc/sage_input.py` and `six.string_types`, I would use `six.string_types` instead of `(str, six.text_type)` or `[str, six.text_type]`.

For the docbuilder and related modules (like `sageinspect.py`), maybe we should do that in a separate ticket and go unicode all-the-way in that ticket.


---

Comment by git created at 2016-08-13 08:03:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-19 09:21:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-08-27 06:47:30

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2017-04-30 18:21:11

see #14153 for the documentation framework


---

Comment by git created at 2017-04-30 19:37:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-04-30 19:39:18

see #22916 for a preliminary tiny step


---

Comment by chapoton created at 2017-05-01 12:09:23

Changing keywords from "python3" to "python3, unicode".


---

Comment by git created at 2017-06-20 11:58:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-20 12:04:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-29 08:22:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-29 08:23:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-10-19 19:00:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-11-10 13:28:46

I have created a new ticket that just wants to introduce the conversion tools: #24186.


---

Comment by embray created at 2020-01-07 15:23:49

Resolution: worksforme


---

Comment by embray created at 2020-01-07 15:23:49

I think this can be considered "fixed"--we've addressed all major string-related issues in the Python 3 port.
