# Issue 22153: Support for unary plus in sage_input expressions

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2017-02-18 19:16:18

CC:  vdelecroix vbraun tscrim




---

Comment by mkoeppe created at 2017-02-18 19:19:50

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2017-02-18 19:19:50

New commits:


---

Comment by vdelecroix created at 2020-02-22 15:27:40


```
+        elif op == '+':
+            prec = _prec_negate
```

Shouldn't there be instead a

```diff
_prec_negate = 28
+_prec_positive = 29
_prec_bitnot = 30
```

(BTW the section 5.14 of the Python reference manual is now 6.16 "Operator precedence")


---

Comment by vdelecroix created at 2020-02-22 15:27:51

Changing status from needs_review to needs_info.


---

Comment by tscrim created at 2020-02-23 00:08:31

Sorry, I lost track of this ticket. Also, minor point but since this is considered formal writing `don't` -> `do not`, and also `unary +.::` -> `unary +::` as the `.::` will become `.:` in the compiled documentation. If you really want the period, then use `unary +. ::` will get rid of the colon in the compiled doc.


---

Comment by git created at 2020-02-24 16:56:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-02-24 17:02:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-02-24 17:06:48

Replying to [comment:5 vdelecroix]:
> {{{
> +        elif op == '+':
> +            prec = _prec_negate
> }}}
> Shouldn't there be instead a
> {{{#!diff
> _prec_negate = 28
> +_prec_positive = 29
> _prec_bitnot = 30
> }}}

No, both in Python 2 and Python 3 unary + and - have the same precedence. (Also ~ (bitnot) has the same precedence as these two, but I consider it outside the scope of this ticket to fix this.)


---

Comment by git created at 2020-02-24 17:08:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-02-24 17:08:54

Changing status from needs_info to needs_review.


---

Comment by mkoeppe created at 2020-03-01 00:05:55

Ready for review


---

Comment by mkoeppe created at 2020-03-15 18:44:26

Is there still an interest in this ticket?


---

Comment by vdelecroix created at 2020-03-15 19:07:55

Sure, but I am confused about the priorities.


---

Comment by vdelecroix created at 2020-03-15 19:08:23

(I meant operator precedence)


---

Comment by vdelecroix created at 2020-03-15 19:11:54

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-15 19:13:16

Thank you!


---

Comment by vbraun created at 2020-03-18 22:40:48

Resolution: fixed
