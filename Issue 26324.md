# Issue 26324: clean static_sparse_graph.pyx

Issue created by migration from https://trac.sagemath.org/ticket/26561

Original creator: dcoudert

Original creation time: 2018-10-26 17:21:52

CC:  tscrim chapoton nthiery

Keywords: py3, graph

Done in this ticket:
- update the module's documentation as we forgot to do it in #26447
- use `vertex_list` in several methods and also free data structure
- PEP8

Not done:
- method `spectral_radius` is untouched to avoid conflict with #26559


---

Comment by dcoudert created at 2018-10-26 17:23:29

New commits:


---

Comment by dcoudert created at 2018-10-26 17:23:29

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-10-27 02:18:43

Little thing, but is is probably better to do `Integer(count[i]/2)` -> `Integer(count[i]//2)` (do we even need the `Integer` after that change?). Otherwise LGTM.


---

Comment by tscrim created at 2018-10-27 02:19:41

Actually, the patchbot has one seemingly real failure:

```
sage -t --long src/sage/categories/finite_semigroups.py  # 1 doctest failed
```

due to a change in the output order.


---

Comment by git created at 2018-10-27 06:45:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-10-27 07:09:28

Without `Integer`, we get:

```
sage: triangles_count(graphs.PetersenGraph())
{0: 0L, 1: 0L, 2: 0L, 3: 0L, 4: 0L, 5: 0L, 6: 0L, 7: 0L, 8: 0L, 9: 0L}
```


`@`Nicolas: can you check the impact of what is done here on `finite_semigroups`. Roughly, we change the internal ordering of vertices during computations, and so the order in which strongly connected components are returned might change. Thanks.


---

Comment by nthiery created at 2018-10-27 10:27:26

Thanks for the notice. As far as I can remember, the algorithm in finite semigroups do not depend on the order in which strongly connected components are returned. So worst comes to worst, this will only require to update some doctests w.r.t. change of orders.


---

Comment by dcoudert created at 2018-10-27 10:29:55

Thank you Nicolas. We have already change the failing doctest in `finite_semigroups`.


---

Comment by tscrim created at 2018-10-27 13:10:32

`@`dcoudert Thanks for checking. LGTM.


---

Comment by tscrim created at 2018-10-27 13:10:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-10-28 20:26:14

Resolution: fixed
