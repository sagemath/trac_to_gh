# Issue 32696: Put SAGE_ROOT/src/bin in PATH only when invoked by SAGE_ROOT/sage or sage-build-env

Issue created by migration from https://trac.sagemath.org/ticket/32933

Original creator: mkoeppe

Original creation time: 2021-11-25 18:41:32

CC:  klee jhpalmieri

The installed `sage` script should only use the installed helper scripts.


---

Comment by mkoeppe created at 2021-11-26 02:07:55

New commits:


---

Comment by mkoeppe created at 2021-11-26 02:07:55

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2021-11-27 00:46:23

Is this supposed to solve a particular problem, or is it general cleanup?


---

Comment by mkoeppe created at 2021-11-27 00:59:59

It fixes a problem when *sagemath-standard* is installed in a user-defined venv. In this case, before this ticket, the installed `sage` script would actually end up running `sage` from `SAGE_ROOT/venv`. 

We ran into this in #29865. The distribution *sagemath-objects*, as of #29865, also installs the `sage` script, and it had this behavior.


---

Comment by klee created at 2021-11-27 01:10:25

Replying to [comment:4 mkoeppe]:
> We ran into this in #29865. The distribution *sagemath-objects*, as of #29865, also installs the `sage` script, and it had this behavior. 

As this is merged with #29865, we can set the status when we do so for #29865. Is this okay?


---

Comment by mkoeppe created at 2021-11-27 03:18:52

That's fine, but the idea with opening this separate ticket was that it can be reviewed separately.


---

Comment by klee created at 2021-11-27 04:21:32

Replying to [comment:6 mkoeppe]:
> That's fine, but the idea with opening this separate ticket was that it can be reviewed separately.

Of course, it is okay that someone else, perhaps John, reviews this, earlier than #29865.


---

Comment by klee created at 2021-11-29 13:25:58

Already merged with #29865


---

Comment by mkoeppe created at 2021-11-29 17:45:48

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-11-29 17:45:48

It's better to merge it, so that the ticket description is included in the commit message.


---

Comment by mkoeppe created at 2021-12-12 17:51:26

Changing priority from major to critical.


---

Comment by vbraun created at 2021-12-23 20:26:27

Resolution: fixed
