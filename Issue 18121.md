# Issue 18121: a cython function that produces long given python input

archive/issues_018121.json:
```json
{
    "body": "CC:  @nathanncohen\n\nI met twice the same problem which is the nedd for a standalone function that given a python objects return an associated long (if it makes sense).\n\nThe following is not safe\n\n```\ncdef long f(x):\n    return x\n```\n\nsince `f(2/3)` would return `0` (see e.g. #18278). Moreover, one could expect something that would be very fast for both Python int and Sage integers (see #18346).\n\nIssue created by migration from https://trac.sagemath.org/ticket/18358\n\n",
    "created_at": "2015-05-03T20:25:38Z",
    "labels": [
        "component: coercion"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "a cython function that produces long given python input",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18121",
    "user": "https://github.com/videlec"
}
```
CC:  @nathanncohen

I met twice the same problem which is the nedd for a standalone function that given a python objects return an associated long (if it makes sense).

The following is not safe

```
cdef long f(x):
    return x
```

since `f(2/3)` would return `0` (see e.g. #18278). Moreover, one could expect something that would be very fast for both Python int and Sage integers (see #18346).

Issue created by migration from https://trac.sagemath.org/ticket/18358





---

archive/issue_comments_244020.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-03T20:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244020",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244021.json:
```json
{
    "body": "That's not a bug report, but a support request. If you post this to `sage-support`, I'll answer.",
    "created_at": "2015-05-03T20:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244021",
    "user": "https://github.com/jdemeyer"
}
```

That's not a bug report, but a support request. If you post this to `sage-support`, I'll answer.



---

archive/issue_comments_244022.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-03T20:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244022",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244023.json:
```json
{
    "body": "Replying to [comment:1 jdemeyer]:\n> That's not a bug report, but a support request. If you post this to `sage-support`, I'll answer.\n\nhttps://groups.google.com/forum/#!topic/sage-support/0ATjCgQlq4c",
    "created_at": "2015-05-03T20:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244023",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:1 jdemeyer]:
> That's not a bug report, but a support request. If you post this to `sage-support`, I'll answer.

https://groups.google.com/forum/#!topic/sage-support/0ATjCgQlq4c



---

archive/issue_comments_244024.json:
```json
{
    "body": "In view of your answer on sage-support, it might still be worth to have something along\n\n```\ncdef inline long long_or_LONG_MIN(x):\n    if PyInt_CheckExact(x):\n        return PyInt_AS_LONG(x)\n    elif type(x) is Integer:\n        if mpz_fits_slong_p((<Integer>x).value):\n            return mpz_get_si((<Integer>x).value)\n        else:\n            return LONG_MIN\n    else:\n        try:\n            return PyNumber_Index(x)\n        except Exception:\n            return LONG_MIN \n```\n\nIt would be faster for Python ints and Sage integers.\n\nVincent",
    "created_at": "2015-05-04T13:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244024",
    "user": "https://github.com/videlec"
}
```

In view of your answer on sage-support, it might still be worth to have something along

```
cdef inline long long_or_LONG_MIN(x):
    if PyInt_CheckExact(x):
        return PyInt_AS_LONG(x)
    elif type(x) is Integer:
        if mpz_fits_slong_p((<Integer>x).value):
            return mpz_get_si((<Integer>x).value)
        else:
            return LONG_MIN
    else:
        try:
            return PyNumber_Index(x)
        except Exception:
            return LONG_MIN 
```

It would be faster for Python ints and Sage integers.

Vincent



---

archive/issue_comments_244025.json:
```json
{
    "body": "For Python `int`s, there will not be much difference (calling `PyNumber_Index(x)` on an `int` just returns `x`, so the only overhead is a function call and some reference counting).\n\nFor `Integer`, there is a larger gain. It's just annoying that Python doesn't allow defining a fast conversion `ArbitraryType` -> C `long`.",
    "created_at": "2015-05-04T13:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244025",
    "user": "https://github.com/jdemeyer"
}
```

For Python `int`s, there will not be much difference (calling `PyNumber_Index(x)` on an `int` just returns `x`, so the only overhead is a function call and some reference counting).

For `Integer`, there is a larger gain. It's just annoying that Python doesn't allow defining a fast conversion `ArbitraryType` -> C `long`.



---

archive/issue_comments_244026.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-04T14:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244026",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_244027.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n\n> For `Integer`, there is a larger gain. It's just annoying that Python doesn't allow defining a fast conversion `ArbitraryType` -> C `long`.\n\nIt does! It's called `tp_hash` :-). It's of course already taken for other purposes. We'd need an extra slot. Something along the lines of the conversion macro suggested in comment:4 would probably be the best we can do without it.",
    "created_at": "2015-05-04T16:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244027",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:5 jdemeyer]:

> For `Integer`, there is a larger gain. It's just annoying that Python doesn't allow defining a fast conversion `ArbitraryType` -> C `long`.

It does! It's called `tp_hash` :-). It's of course already taken for other purposes. We'd need an extra slot. Something along the lines of the conversion macro suggested in comment:4 would probably be the best we can do without it.



---

archive/issue_comments_244028.json:
```json
{
    "body": "Replying to [comment:7 nbruin]:\n> We'd need an extra slot.\nSometimes I wish I could just patch Python...\n\n> Something along the lines of the conversion macro suggested in comment:4 would probably be the best we can do without it.\nIndeed.",
    "created_at": "2015-05-04T17:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244028",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 nbruin]:
> We'd need an extra slot.
Sometimes I wish I could just patch Python...

> Something along the lines of the conversion macro suggested in comment:4 would probably be the best we can do without it.
Indeed.



---

archive/issue_comments_244029.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-05T13:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244029",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244030.json:
```json
{
    "body": "Here is an experimental branch with a macro `pyobject_to_long` in `sage.misc.long`. I do not like the gestion of error but I do not know how to do better without affecting performance. Please tell me.\n\nIt is used in `Integer.__pow__` and `Rational.__pow__` as a proof of concept. And we win 20 precious nano seconds when the exponent is a small Sage Integer (~10%):\n\n```\nsage: timeit(\"2**5\", number=400000, repeat=20)\n400000 loops, best of 20: 248 ns per loop\nsage: timeit(\"(2/3)**2\", number=100000, repeat=20)\n100000 loops, best of 20: 1.1 \u00b5s per loop\n```\n\nagainst\n\n```\nsage: timeit(\"2**5\", number=400000, repeat=20)\n400000 loops, best of 20: 228 ns per loop\nsage: timeit(\"(2/3)**2\", number=100000, repeat=20)\n200000 loops, best of 30: 990 ns per loop\n```\n\n\nVincent\n----\nNew commits:",
    "created_at": "2015-05-05T13:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244030",
    "user": "https://github.com/videlec"
}
```

Here is an experimental branch with a macro `pyobject_to_long` in `sage.misc.long`. I do not like the gestion of error but I do not know how to do better without affecting performance. Please tell me.

It is used in `Integer.__pow__` and `Rational.__pow__` as a proof of concept. And we win 20 precious nano seconds when the exponent is a small Sage Integer (~10%):

```
sage: timeit("2**5", number=400000, repeat=20)
400000 loops, best of 20: 248 ns per loop
sage: timeit("(2/3)**2", number=100000, repeat=20)
100000 loops, best of 20: 1.1 Âµs per loop
```

against

```
sage: timeit("2**5", number=400000, repeat=20)
400000 loops, best of 20: 228 ns per loop
sage: timeit("(2/3)**2", number=100000, repeat=20)
200000 loops, best of 30: 990 ns per loop
```


Vincent
----
New commits:



---

archive/issue_comments_244031.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-05T13:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_244032.json:
```json
{
    "body": "`except LONG_MIN` -> `except? LONG_MIN` and there is no need to document `LONG_MIN` in the docstring.",
    "created_at": "2015-05-05T14:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244032",
    "user": "https://github.com/jdemeyer"
}
```

`except LONG_MIN` -> `except? LONG_MIN` and there is no need to document `LONG_MIN` in the docstring.



---

archive/issue_comments_244033.json:
```json
{
    "body": "`PyInt_CheckExact(...)` -> `isinstance(..., int)`",
    "created_at": "2015-05-05T14:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244033",
    "user": "https://github.com/jdemeyer"
}
```

`PyInt_CheckExact(...)` -> `isinstance(..., int)`



---

archive/issue_comments_244034.json:
```json
{
    "body": "`OverflowError` -> `OverflowError(\"Integer too large to convert to C long\")` or something like that.\n\nAnd obviously: doctests please.",
    "created_at": "2015-05-05T14:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244034",
    "user": "https://github.com/jdemeyer"
}
```

`OverflowError` -> `OverflowError("Integer too large to convert to C long")` or something like that.

And obviously: doctests please.



---

archive/issue_comments_244035.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-05T14:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244035",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244036.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> `OverflowError` -> `OverflowError(\"Integer too large to convert to C long\")` or something like that.\n> \n> And obviously: doctests please.\n\nHow? Should I use `Integer.__pow__` and `Rational.__pow__` with indirect doctests?",
    "created_at": "2015-05-05T15:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244036",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:13 jdemeyer]:
> `OverflowError` -> `OverflowError("Integer too large to convert to C long")` or something like that.
> 
> And obviously: doctests please.

How? Should I use `Integer.__pow__` and `Rational.__pow__` with indirect doctests?



---

archive/issue_comments_244037.json:
```json
{
    "body": "Replying to [comment:14 vdelecroix]:\n> Replying to [comment:13 jdemeyer]:\n> > `OverflowError` -> `OverflowError(\"Integer too large to convert to C long\")` or something like that.\n> > \n> > And obviously: doctests please.\n> \n> How? Should I use `Integer.__pow__` and `Rational.__pow__` with indirect doctests?\nThat's actually not a bad idea. You should probably test the following numbers: `int(10)`, `long(10)`, `long(10^100)`, `10`, `10^100`, `QQ(10)`, `QQ(10^100)`, `1/2`.",
    "created_at": "2015-05-05T19:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244037",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 vdelecroix]:
> Replying to [comment:13 jdemeyer]:
> > `OverflowError` -> `OverflowError("Integer too large to convert to C long")` or something like that.
> > 
> > And obviously: doctests please.
> 
> How? Should I use `Integer.__pow__` and `Rational.__pow__` with indirect doctests?
That's actually not a bad idea. You should probably test the following numbers: `int(10)`, `long(10)`, `long(10^100)`, `10`, `10^100`, `QQ(10)`, `QQ(10^100)`, `1/2`.



---

archive/issue_comments_244038.json:
```json
{
    "body": "It would make sense to merge 6.7.beta4 and replace all occurances of `PyNumber_Index` and `PyNumber_AsSsize_t` by this new function.",
    "created_at": "2015-05-05T21:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244038",
    "user": "https://github.com/jdemeyer"
}
```

It would make sense to merge 6.7.beta4 and replace all occurances of `PyNumber_Index` and `PyNumber_AsSsize_t` by this new function.



---

archive/issue_comments_244039.json:
```json
{
    "body": "Replying to [comment:16 jdemeyer]:\n> It would make sense to merge 6.7.beta4 and replace all occurances of `PyNumber_Index` and `PyNumber_AsSsize_t` by this new function.\n\nIt might not be good everywhere as the overflow might not be appropriate. I will have a look at occurrences.",
    "created_at": "2015-05-05T21:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244039",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:16 jdemeyer]:
> It would make sense to merge 6.7.beta4 and replace all occurances of `PyNumber_Index` and `PyNumber_AsSsize_t` by this new function.

It might not be good everywhere as the overflow might not be appropriate. I will have a look at occurrences.



---

archive/issue_comments_244040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-06T07:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_244041.json:
```json
{
    "body": "Rebased on sage-6.7.beta4. I used `pyobject_to_long` where it seemed appropriate.\n\nVincent",
    "created_at": "2015-05-06T07:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244041",
    "user": "https://github.com/videlec"
}
```

Rebased on sage-6.7.beta4. I used `pyobject_to_long` where it seemed appropriate.

Vincent



---

archive/issue_comments_244042.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-06T07:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244042",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244043.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-06T07:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244043",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244044.json:
```json
{
    "body": "In `c_graph`, if you call a variable `u_long`, actually make it a `long` (now it's still an `int` which means it can silently overflow).",
    "created_at": "2015-05-06T07:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244044",
    "user": "https://github.com/jdemeyer"
}
```

In `c_graph`, if you call a variable `u_long`, actually make it a `long` (now it's still an `int` which means it can silently overflow).



---

archive/issue_comments_244045.json:
```json
{
    "body": "You're not actually using this:\n\n```\nsage: tens = [10r, 10l, 10, 10/1]\n```\n",
    "created_at": "2015-05-06T07:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244045",
    "user": "https://github.com/jdemeyer"
}
```

You're not actually using this:

```
sage: tens = [10r, 10l, 10, 10/1]
```




---

archive/issue_comments_244046.json:
```json
{
    "body": "I would prefer to replace\n\n```\ntry:\n    n = pyobject_to_long(exp)\nexcept TypeError:\n    raise TypeError(\"non-integral exponents not supported\")\n```\n\nby\n\n```\nn = pyobject_to_long(exp)\n```\n",
    "created_at": "2015-05-06T07:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244046",
    "user": "https://github.com/jdemeyer"
}
```

I would prefer to replace

```
try:
    n = pyobject_to_long(exp)
except TypeError:
    raise TypeError("non-integral exponents not supported")
```

by

```
n = pyobject_to_long(exp)
```




---

archive/issue_comments_244047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-11T17:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244048.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-11T17:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244048",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244049.json:
```json
{
    "body": "Two more points:\n\n1. `raied` -> `raised`\n\n2. The doctests for `Integer.__pow__` and `Rational.__pow__` seem redundant. It's sufficient to keep just one.",
    "created_at": "2015-05-12T12:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244049",
    "user": "https://github.com/jdemeyer"
}
```

Two more points:

1. `raied` -> `raised`

2. The doctests for `Integer.__pow__` and `Rational.__pow__` seem redundant. It's sufficient to keep just one.



---

archive/issue_comments_244050.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-12T12:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244050",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-13T16:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244052.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-13T16:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244052",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244053.json:
```json
{
    "body": "I didn't run doctests again, but positive_review assuming that they pass.",
    "created_at": "2015-05-13T19:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244053",
    "user": "https://github.com/jdemeyer"
}
```

I didn't run doctests again, but positive_review assuming that they pass.



---

archive/issue_comments_244054.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-13T19:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244054",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_017377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-14T22:40:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18121#event-17377"
}
```



---

archive/issue_comments_244055.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-14T22:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18121#issuecomment-244055",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
