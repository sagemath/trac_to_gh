# Issue 12381: Add interface for PALP polytope databases

archive/issues_012381.json:
```json
{
    "body": "Assignee: was\n\nCC:  novoselt jdemeyer\n\nKeywords: PALP reflexive polytopes\n\nThis ticket implements an interface to read databases of reflexive polytopes:\n* Add databases in PALP format to the `polytopes_db.spkg`. \n* A class `PALPreader` that can read the palp output and yield it in various Sage representations.\n* Finally, this ticket contains a specialized PPL lattice polytope that is fast enough to construct to go through the 500 million 4-d reflexive polytopes and compute integral points.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12553\n\n",
    "created_at": "2012-02-21T07:16:03Z",
    "labels": [
        "packages: huge",
        "major",
        "enhancement"
    ],
    "title": "Add interface for PALP polytope databases",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12381",
    "user": "vbraun"
}
```
Assignee: was

CC:  novoselt jdemeyer

Keywords: PALP reflexive polytopes

This ticket implements an interface to read databases of reflexive polytopes:
* Add databases in PALP format to the `polytopes_db.spkg`. 
* A class `PALPreader` that can read the palp output and yield it in various Sage representations.
* Finally, this ticket contains a specialized PPL lattice polytope that is fast enough to construct to go through the 500 million 4-d reflexive polytopes and compute integral points.

Issue created by migration from https://trac.sagemath.org/ticket/12553





---

archive/issue_comments_145935.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-21T07:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145935",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_145936.json:
```json
{
    "body": "I've updated the patches with various minor improvements.",
    "created_at": "2012-06-03T22:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145936",
    "user": "vbraun"
}
```

I've updated the patches with various minor improvements.



---

archive/issue_comments_145937.json:
```json
{
    "body": "I had a look and have some remarks to do:\n* now spkg-install checks for SAGE_DATA before using SAGE_DATA (the one in sage 5.0 checks SAGE_ROOT before using SAGE_DATA...), which is good!\n* the sources aren't in a directory src/ but in reflexive_polytopes/ -- isn't it against the conventions?\n* both build.sh scripts lack a shebang ;\n* is it normal that the installation is dumping everything in SAGE_DATA/reflexive_polytopes/ ? Shouldn't the spkg (1) depend on palp (2) in the build phase, use it to create the database (3) in the install phase, only install the resulting database?",
    "created_at": "2012-06-11T15:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145937",
    "user": "Snark"
}
```

I had a look and have some remarks to do:
* now spkg-install checks for SAGE_DATA before using SAGE_DATA (the one in sage 5.0 checks SAGE_ROOT before using SAGE_DATA...), which is good!
* the sources aren't in a directory src/ but in reflexive_polytopes/ -- isn't it against the conventions?
* both build.sh scripts lack a shebang ;
* is it normal that the installation is dumping everything in SAGE_DATA/reflexive_polytopes/ ? Shouldn't the spkg (1) depend on palp (2) in the build phase, use it to create the database (3) in the install phase, only install the resulting database?



---

archive/issue_comments_145938.json:
```json
{
    "body": "I've added the shebang to the build.sh scripts, even though we are entering deep into bikeshedding territory here as these are not executed but only show how the database can be built.\n\nI've also renamed the directory to `src/`, thats just something I inherited from the previous version.\n\nAll databases in Sage just copy their content. Usually they require non-trivial computer resources to build, so you specifically don't want to recompute them when you are installing Sage. In this case its actually computationally easy, but just wait until we add the 4-d case ;-)",
    "created_at": "2012-06-11T16:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145938",
    "user": "vbraun"
}
```

I've added the shebang to the build.sh scripts, even though we are entering deep into bikeshedding territory here as these are not executed but only show how the database can be built.

I've also renamed the directory to `src/`, thats just something I inherited from the previous version.

All databases in Sage just copy their content. Usually they require non-trivial computer resources to build, so you specifically don't want to recompute them when you are installing Sage. In this case its actually computationally easy, but just wait until we add the 4-d case ;-)



---

archive/issue_comments_145939.json:
```json
{
    "body": "Copying the contents is ok -- what bothers me is that you copy the scripts too.\n\nYou says that \"these are not executed but only show how the database can be built\" -- does that mean you don't guarantee they effectively work?",
    "created_at": "2012-06-11T16:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145939",
    "user": "Snark"
}
```

Copying the contents is ok -- what bothers me is that you copy the scripts too.

You says that "these are not executed but only show how the database can be built" -- does that mean you don't guarantee they effectively work?



---

archive/issue_comments_145940.json:
```json
{
    "body": "Well you have my word that the scripts work :-P I think having the scripts is better than not having them. Who cares if they end up in the database directory or not.",
    "created_at": "2012-06-11T17:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145940",
    "user": "vbraun"
}
```

Well you have my word that the scripts work :-P I think having the scripts is better than not having them. Who cares if they end up in the database directory or not.



---

archive/issue_comments_145941.json:
```json
{
    "body": "I see two reasons to care:\n1. sage is big enough ;\n2. if it's not data, it doesn't belong to SAGE_DATA.",
    "created_at": "2012-06-11T18:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145941",
    "user": "Snark"
}
```

I see two reasons to care:
1. sage is big enough ;
2. if it's not data, it doesn't belong to SAGE_DATA.



---

archive/issue_comments_145942.json:
```json
{
    "body": "Lets call it documentation, then, shall we?",
    "created_at": "2012-06-11T18:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145942",
    "user": "vbraun"
}
```

Lets call it documentation, then, shall we?



---

archive/issue_comments_145943.json:
```json
{
    "body": "If it's documentation, it belongs into SAGE_DOC ; installing things in correct places isn't as frivolous as you seem to think...",
    "created_at": "2012-06-11T19:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145943",
    "user": "Snark"
}
```

If it's documentation, it belongs into SAGE_DOC ; installing things in correct places isn't as frivolous as you seem to think...



---

archive/issue_comments_145944.json:
```json
{
    "body": "`$SAGE_DOC` contains docs like the developer manual. You want me to typeset the script in sphinx and include it in the developer manual? That doesn't sound reasonable to me.",
    "created_at": "2012-06-12T17:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145944",
    "user": "vbraun"
}
```

`$SAGE_DOC` contains docs like the developer manual. You want me to typeset the script in sphinx and include it in the developer manual? That doesn't sound reasonable to me.



---

archive/issue_comments_145945.json:
```json
{
    "body": "Why not just cp the right files into $SAGE_DATA?",
    "created_at": "2012-06-12T18:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145945",
    "user": "Snark"
}
```

Why not just cp the right files into $SAGE_DATA?



---

archive/issue_comments_145946.json:
```json
{
    "body": "I've deleted the build.sh scripts. Updated spkg at the same location.",
    "created_at": "2012-06-12T19:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145946",
    "user": "vbraun"
}
```

I've deleted the build.sh scripts. Updated spkg at the same location.



---

archive/issue_comments_145947.json:
```json
{
    "body": "Updating the database patch for the new `PointCollection` output introduced in #12544, which is one of the possible output formats.",
    "created_at": "2012-07-01T16:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145947",
    "user": "vbraun"
}
```

Updating the database patch for the new `PointCollection` output introduced in #12544, which is one of the possible output formats.



---

archive/issue_comments_145948.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-07-01T16:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145948",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_145949.json:
```json
{
    "body": "Attachment\n\nRediffed patch",
    "created_at": "2012-07-02T20:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145949",
    "user": "vbraun"
}
```

Attachment

Rediffed patch



---

archive/issue_comments_145950.json:
```json
{
    "body": "Attachment\n\ncan this ticket be rebased so that it does not depend upon anything that is in `sage-pending`, such as #11310 ?",
    "created_at": "2012-07-09T13:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145950",
    "user": "dimpase"
}
```

Attachment

can this ticket be rebased so that it does not depend upon anything that is in `sage-pending`, such as #11310 ?



---

archive/issue_comments_145951.json:
```json
{
    "body": "I **think** Jeroen just used sage-pending in #11310 since we didn't have a sage-5.3 milestone at that time and sage-5.2 is supposed to be just a new sagenb + trivial tickets. But maybe Jeroen had some other reason?",
    "created_at": "2012-07-09T14:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145951",
    "user": "vbraun"
}
```

I **think** Jeroen just used sage-pending in #11310 since we didn't have a sage-5.3 milestone at that time and sage-5.2 is supposed to be just a new sagenb + trivial tickets. But maybe Jeroen had some other reason?



---

archive/issue_comments_145952.json:
```json
{
    "body": "It's mainly because of #13109.  The current plan is to merge #13109 in sage-5.2 but all follow-ups (including #11310) in sage-5.3.  It's certainly not meant to be a long-term sage-pending.",
    "created_at": "2012-07-09T14:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145952",
    "user": "jdemeyer"
}
```

It's mainly because of #13109.  The current plan is to merge #13109 in sage-5.2 but all follow-ups (including #11310) in sage-5.3.  It's certainly not meant to be a long-term sage-pending.



---

archive/issue_comments_145953.json:
```json
{
    "body": "Hi Volker, do you actually have the package for 4d polytopes which is mentioned in the patch documentation?\n\n(By the way, maybe `polytopes_reflexive_4d_db` would be a better name for it?)",
    "created_at": "2012-07-25T18:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145953",
    "user": "novoselt"
}
```

Hi Volker, do you actually have the package for 4d polytopes which is mentioned in the patch documentation?

(By the way, maybe `polytopes_reflexive_4d_db` would be a better name for it?)



---

archive/issue_comments_145954.json:
```json
{
    "body": "Sorry forgot to reply.. I haven't packaged the 4d database... 10 GB spkg? ;-) But the updated spkg contains the 2d and 3d analogues in PALP's binary database format.",
    "created_at": "2012-08-04T15:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145954",
    "user": "vbraun"
}
```

Sorry forgot to reply.. I haven't packaged the 4d database... 10 GB spkg? ;-) But the updated spkg contains the 2d and 3d analogues in PALP's binary database format.



---

archive/issue_comments_145955.json:
```json
{
    "body": "somewhere down in the first patch you have\n\n```\nThe database is very large and not installed by default. You can \ninstall it with the command ``install_package('polytopes_db_4d')``.\n```\n\nbut this does not work. Was it meant to be added later?",
    "created_at": "2013-04-17T16:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145955",
    "user": "dimpase"
}
```

somewhere down in the first patch you have

```
The database is very large and not installed by default. You can 
install it with the command ``install_package('polytopes_db_4d')``.
```

but this does not work. Was it meant to be added later?



---

archive/issue_comments_145956.json:
```json
{
    "body": "Yes. Though there is also the question whether we want to host a 4+gb database (and I don't have a firm opinion either way)",
    "created_at": "2013-04-17T17:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145956",
    "user": "vbraun"
}
```

Yes. Though there is also the question whether we want to host a 4+gb database (and I don't have a firm opinion either way)



---

archive/issue_comments_145957.json:
```json
{
    "body": "For fun: http://boxen.math.washington.edu/home/vbraun/www/polytopes_db_4d-1.0.spkg\n\nStill takes a day or so to upload...",
    "created_at": "2013-04-17T18:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145957",
    "user": "vbraun"
}
```

For fun: http://boxen.math.washington.edu/home/vbraun/www/polytopes_db_4d-1.0.spkg

Still takes a day or so to upload...



---

archive/issue_comments_145958.json:
```json
{
    "body": "Replying to [comment:22 vbraun]:\n> Yes. Though there is also the question whether we want to host a 4+gb database (and I don't have a firm opinion either way)\nIMHO, if it is hosted elsewhere, we might rather want to host an interface only.\nAnyhow that comment in the source about `install_package('polytopes_db_4d')` is misleading, and should be rectified.",
    "created_at": "2013-04-18T08:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145958",
    "user": "dimpase"
}
```

Replying to [comment:22 vbraun]:
> Yes. Though there is also the question whether we want to host a 4+gb database (and I don't have a firm opinion either way)
IMHO, if it is hosted elsewhere, we might rather want to host an interface only.
Anyhow that comment in the source about `install_package('polytopes_db_4d')` is misleading, and should be rectified.



---

archive/issue_comments_145959.json:
```json
{
    "body": "Updated `polytopes_db-20120220.spkg` to merge in the changes that others have done in the year+ that it has been lingering here.",
    "created_at": "2013-04-20T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145959",
    "user": "vbraun"
}
```

Updated `polytopes_db-20120220.spkg` to merge in the changes that others have done in the year+ that it has been lingering here.



---

archive/issue_comments_145960.json:
```json
{
    "body": "I made a ticket for the 4-d database at #14467.",
    "created_at": "2013-04-20T15:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145960",
    "user": "vbraun"
}
```

I made a ticket for the 4-d database at #14467.



---

archive/issue_comments_145961.json:
```json
{
    "body": "Replying to [comment:25 vbraun]:\n> Updated `polytopes_db-20120220.spkg` to merge in the changes that others have done in the year+ that it has been lingering here.\nThis spkg can only be found on `http://www.stp.dias.ie/~vbraun/Sage/spkg/`.\nIs this how this is meant to be?",
    "created_at": "2013-04-22T06:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145961",
    "user": "dimpase"
}
```

Replying to [comment:25 vbraun]:
> Updated `polytopes_db-20120220.spkg` to merge in the changes that others have done in the year+ that it has been lingering here.
This spkg can only be found on `http://www.stp.dias.ie/~vbraun/Sage/spkg/`.
Is this how this is meant to be?



---

archive/issue_comments_145962.json:
```json
{
    "body": "I'm leaving Ireland and my DIAS account will be closed in the coming weeks. I uploaded the spkg to boxen, and this is where it should be. The link in the ticket description works for me.",
    "created_at": "2013-04-22T08:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145962",
    "user": "vbraun"
}
```

I'm leaving Ireland and my DIAS account will be closed in the coming weeks. I uploaded the spkg to boxen, and this is where it should be. The link in the ticket description works for me.



---

archive/issue_comments_145963.json:
```json
{
    "body": "Replying to [comment:28 vbraun]:\n> I'm leaving Ireland and my DIAS account will be closed in the coming weeks. I uploaded the spkg to boxen, and this is where it should be. The link in the ticket description works for me.\n\nWohin, Volker?",
    "created_at": "2013-04-25T06:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145963",
    "user": "dimpase"
}
```

Replying to [comment:28 vbraun]:
> I'm leaving Ireland and my DIAS account will be closed in the coming weeks. I uploaded the spkg to boxen, and this is where it should be. The link in the ticket description works for me.

Wohin, Volker?



---

archive/issue_comments_145964.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-25T06:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145964",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_145965.json:
```json
{
    "body": "Attachment\n\nUpdated patch",
    "created_at": "2013-05-05T15:41:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145965",
    "user": "vbraun"
}
```

Attachment

Updated patch



---

archive/issue_comments_145966.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-08T07:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12381",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12381#issuecomment-145966",
    "user": "jdemeyer"
}
```

Resolution: fixed
