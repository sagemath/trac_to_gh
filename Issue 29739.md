# Issue 29739: Make matrix doctests ready for random seeds

archive/issues_029739.json:
```json
{
    "body": "CC:  slelievre\n\nThis ticket makes\n\n```\nsage -t --long --random-seed=n src/sage/matrix/\n```\n\npass for different values `n` than just `0`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29976\n\n",
    "created_at": "2020-06-24T21:29:41Z",
    "labels": [
        "doctest framework",
        "major",
        "enhancement"
    ],
    "title": "Make matrix doctests ready for random seeds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29739",
    "user": "@kliem"
}
```
CC:  slelievre

This ticket makes

```
sage -t --long --random-seed=n src/sage/matrix/
```

pass for different values `n` than just `0`.

Issue created by migration from https://trac.sagemath.org/ticket/29976





---

archive/issue_comments_422452.json:
```json
{
    "body": "I have a very partial fix. But even after that the following still need to be taken care of\n\n```\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_cyclo_dense.pyx  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_generic_dense.pyx  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_gf2e_dense.pyx  # 67 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_integer_dense_saturation.py  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_integer_dense.pyx  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_double.pyx  # 13 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_float.pyx  # 12 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_template.pxi  # 77 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_sparse.pyx  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_rational_dense.pyx  # 4 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_space.py  # 5 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_sparse.pyx  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix1.pyx  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/special.py  # 37 doctests failed\n```\n",
    "created_at": "2020-06-24T21:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422452",
    "user": "@kliem"
}
```

I have a very partial fix. But even after that the following still need to be taken care of

```
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_cyclo_dense.pyx  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_generic_dense.pyx  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_gf2e_dense.pyx  # 67 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_integer_dense_saturation.py  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_integer_dense.pyx  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_double.pyx  # 13 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_float.pyx  # 12 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_dense_template.pxi  # 77 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_modn_sparse.pyx  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_rational_dense.pyx  # 4 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_space.py  # 5 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix_sparse.pyx  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/matrix1.pyx  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/matrix/special.py  # 37 doctests failed
```




---

archive/issue_comments_422453.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-24T21:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422453",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422454.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422454",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_422455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-04-30T10:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422455",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_422456.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-04T13:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422456",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_422457.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-06-04T13:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422457",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_422458.json:
```json
{
    "body": "Changing keywords from \"\" to \"random_seed, fuzz\".",
    "created_at": "2021-06-07T22:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422458",
    "user": "slelievre"
}
```

Changing keywords from "" to "random_seed, fuzz".



---

archive/issue_comments_422459.json:
```json
{
    "body": "A typo in `src/sage/matrix/matrix_rational_dense.pyx`\nprevents the HTML documentation from building.\n\nTo fix it, change this in the docstring of `randomize`:\n\n```\n-        The default density is ``6/9`::\n+        The default density is `6/9`::\n```\n\n\nAfter fixing that, success doctesting `src/sage/matrix`\nbe it with the random seed in the ticket description\nor with a few extra random ones.\n\nInstead of using `l` (lowercase L) to name a list,\nin many cases a more descriptive name can be used\nand is less confusing; for a list of matrix entries,\nwhy not call it `entries` for example?",
    "created_at": "2021-06-07T22:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422459",
    "user": "slelievre"
}
```

A typo in `src/sage/matrix/matrix_rational_dense.pyx`
prevents the HTML documentation from building.

To fix it, change this in the docstring of `randomize`:

```
-        The default density is ``6/9`::
+        The default density is `6/9`::
```


After fixing that, success doctesting `src/sage/matrix`
be it with the random seed in the ticket description
or with a few extra random ones.

Instead of using `l` (lowercase L) to name a list,
in many cases a more descriptive name can be used
and is less confusing; for a list of matrix entries,
why not call it `entries` for example?



---

archive/issue_comments_422460.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-08T06:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422460",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422461.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-08T15:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422461",
    "user": "slelievre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_422462.json:
```json
{
    "body": "Minor improvements such as renaming a list\nfrom `l` to `entries` can be done later.",
    "created_at": "2021-06-08T15:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422462",
    "user": "slelievre"
}
```

Minor improvements such as renaming a list
from `l` to `entries` can be done later.



---

archive/issue_comments_422463.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-06-08T17:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422463",
    "user": "@kliem"
}
```

Thank you.



---

archive/issue_comments_422464.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-20T08:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29739#issuecomment-422464",
    "user": "vbraun"
}
```

Resolution: fixed
