# Issue 21409: Devel manual about docstrings

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2016-10-05 07:32:15

CC:  tscrim chapoton

This patch will slightly modify instructions for docstrings.

I would like to have even more pre-specified formats for some classes of functions. For example should Boolean-valued `is_something()` function be "Return `True` if...", "Test whether" or something else? Also we have an arbitrary decision to use `algorithm=` instead of `implementation=`, `method=` etc.

But as a first part, what you think about these changes?



---

Comment by jmantysalo created at 2016-10-05 07:54:54

Hmm... There are already a "What doctests should test" -part, so at least part of this patch is duplicate.
----
New commits:


---

Comment by git created at 2016-10-15 08:15:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-10-15 12:58:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-10-15 13:00:33

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-10-15 13:00:33

No comments got.

Anyways, this now encourages slightly more to use TESTS block. Also I documented some arbitrary decisions made.


---

Comment by jdemeyer created at 2016-10-15 15:47:52

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-10-15 15:47:52

1. The example of a `TESTS` block is badly indented (it was already badly indented by 3 spaces only).

2. I don't like advice of the form `Do not use ...` Be positive, say only what should be used.


---

Comment by git created at 2016-10-15 16:36:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-10-15 16:38:40

Replying to [comment:6 jdemeyer]:
> 1. The example of a `TESTS` block is badly indented (it was already badly indented by 3 spaces only).

There were tabs. Corrected.

> 2. I don't like advice of the form `Do not use ...` Be positive, say only what should be used.

How about this "instead of" -formulation?


---

Comment by jmantysalo created at 2016-10-15 17:54:10

Changing status from needs_work to needs_review.


---

Comment by jhpalmieri created at 2016-10-15 20:47:48

There is still one more tab. Could you also make this grammatical fix:

```diff
diff --git a/src/doc/en/developer/coding_basics.rst b/src/doc/en/developer/coding_basics.rst
index 60e49ec..d65e6d7 100644
--- a/src/doc/en/developer/coding_basics.rst
+++ b/src/doc/en/developer/coding_basics.rst
`@``@` -283,7 +283,7 `@``@` information. You can use the existing functions of Sage as templates.
    They should have good coverage of the functionality in question.
 
 -  A **SEEALSO** block (highly recommended) with links to related parts of
-   Sage. This helps users find the features that interests them and discover
+   Sage. This helps users find the features that interest them and discover
    the new ones. ::
 
        .. SEEALSO::
```



---

Comment by jdemeyer created at 2016-10-15 21:09:13

Replying to [comment:8 jmantysalo]:
> How about this "instead of" -formulation?

Why not simply say "Use X"?


---

Comment by git created at 2016-10-17 06:53:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-10-17 06:58:05

Replying to [comment:10 jhpalmieri]:
> There is still one more tab. Could you also make this grammatical fix:

Arghs, Emacs. Tab removed and fix applied.

Replying to [comment:11 jdemeyer]:

> > How about this "instead of" -formulation?
> 
> Why not simply say "Use X"?

Sohehow "Use `algorithm` if there are several algorithms or backend programs to select from." sounds odd to me. It left me wondering what else I could use or what is the meaning of this sentence. Compare to "- - describes the function or method's effect as a command - - _not_ as a description - -"

But as you wish, this is now changed too.


---

Comment by jdemeyer created at 2016-10-17 07:32:45

I was thinking that you could document a few standard keywords in the same way:

- `algorithm`: choose between various implementation (with `None` meaning a sensible default, which could depend on installed optional packages).

- `proof`: is this is `True`, require a mathematically proven computation. With `False`, a probabilistic algorithm may be used.

- `check`: do some additional checks to verify the input parameters. This should not otherwise influence the functioning of the code (if code works with `check=True`, it should also work with `check=False`).

- `coerce`: convert the input parameters to a suitable parent. This is typically used in constructors. You can call a method with `coerce=False` to skip some checks if the parent is known to be correct.

- ...


---

Comment by jmantysalo created at 2016-10-17 07:52:21

Replying to [comment:14 jdemeyer]:
> I was thinking that you could document a few standard keywords in the same way:

This is exactly what I hope to have in this list; and for example `inplace` should be added. But I still think that "Do not use"-list could be added; it will make this more explicit. An alternative for `inplace` with default `False` could be for example `return_copy` with default `True`, and that could be explained.

Has there been or suggested some other parameter name for `coerce`?


---

Comment by git created at 2016-10-17 08:11:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-10-17 08:18:35

Replying to [comment:15 jmantysalo]:
> But I still think that "Do not use"-list could be added; it will make this more explicit.

As a _separate_ list, it would already make more sense to me. That wouldn't clutter the original "keywords to use" list.

> Has there been or suggested some other parameter name for `coerce`?

Not that I know, at least `coerce` is used consistently for this. But I guess that `convert` would be a better name.


---

Comment by jmantysalo created at 2016-10-17 10:34:02

Replying to [comment:17 jdemeyer]:
> Replying to [comment:15 jmantysalo]:
> > But I still think that "Do not use"-list could be added; it will make this more explicit.
> 
> As a _separate_ list, it would already make more sense to me. That wouldn't clutter the original "keywords to use" list.

Tried, but found no good way to express this as separate list.

Should we go with this patch?


---

Comment by jdemeyer created at 2016-10-17 12:48:26

Here is a proposal: replace

```
* Function parameter names:
```

by

```
* Common function keyword arguments:

  This is a list of some keyword arguments that many functions and methods take.
  For consistency, you should use the keywords from the list below with the meaning
  as explained here. Do not use a different keyword with the same meaning
  (for example, do not use ``method``; use ``algorithm`` instead).
```



---

Comment by git created at 2016-10-18 03:00:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-10-18 03:03:33

Replying to [comment:19 jdemeyer]:
> Here is a proposal: - -

A good proposal!

Now I think I am happy with this. I am compiling and hoping that Sphinx is also happy. Put to _needs_review_ to wait for that.


---

Comment by jmantysalo created at 2016-10-18 03:03:33

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-10-18 03:39:04

Compiled.


---

Comment by jmantysalo created at 2016-10-18 03:39:04

Changing status from needs_work to needs_review.


---

Comment by mantepse created at 2016-10-18 09:22:35


```
Some decisions are arbitrary, but common convention makes the program
to look polished and professional.
```

should be

```
Some decisions are arbitrary, but common convention make the program
look more polished and professional.
```

Actually, I'd prefer

```
Some decisions are arbitrary, but common convention make life easier.
```

----
New commits:


---

Comment by mantepse created at 2016-10-18 09:23:57

Also, I think it is conventional to start in lower case after a colon.


---

Comment by jdemeyer created at 2016-10-18 09:26:19

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-10-18 10:23:25

Replying to [comment:24 mantepse]:

>common convention make life easier.

Good and short, changed.

Replying to [comment:25 mantepse]:
> Also, I think it is conventional to start in lower case after a colon.

I trust you on this.

(Finnish has clear rule for this: use lowercase if and only if the part before the colon refers to one clause only, and uppercase otherwise.)
----
New commits:


---

Comment by mantepse created at 2016-10-18 10:30:47

Sorry, I missed a plural "s", it should be 


```
Some decisions are arbitrary, but common conventions make life easier.
```



---

Comment by git created at 2016-10-18 10:42:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-10-18 10:43:32

Replying to [comment:29 mantepse]:
> Sorry, I missed a plural "s", it should be 
> 
> {{{
> Some decisions are arbitrary, but common conventions make life easier.
> }}}

's' added.


---

Comment by jmantysalo created at 2016-10-18 10:43:32

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2016-10-18 10:52:22

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-10-18 13:55:12

Replying to [comment:25 mantepse]:
> Also, I think it is conventional to start in lower case after a colon.

That can be capitalized or not because the part after the colon could be a complete separate sentence. However, I feel it is better to not have it capitalized because it is being used as an explanatory clause.


---

Comment by vbraun created at 2016-10-19 21:24:41

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-10-19 21:24:41

merge conflict


---

Comment by git created at 2016-10-20 07:07:12

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by jmantysalo created at 2016-10-20 07:08:33

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-10-20 07:08:33

New try.


---

Comment by jdemeyer created at 2016-10-21 08:58:10

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-10-21 08:58:10

Conflicts with 7.5.beta0


---

Comment by git created at 2016-10-21 10:35:57

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by jmantysalo created at 2016-10-21 10:37:02

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-10-21 10:37:02

Another try.


---

Comment by jdemeyer created at 2016-10-21 10:42:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-10-29 14:26:40

Resolution: fixed
