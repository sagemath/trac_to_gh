# Issue 25811: Implement the universal Askey-Wilson algebra

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2018-08-11 23:23:56

Keywords: askey wilson

Because math physicists like it and it is connected with Askey-Wilson polynomials.


---

Comment by tscrim created at 2018-08-11 23:24:34

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-08-11 23:24:34

New commits:


---

Comment by soehms created at 2018-09-15 16:37:23

Changing status from needs_review to needs_work.


---

Comment by soehms created at 2018-09-15 16:37:23

1) Terwilliger assumes `q^4 != 1, q != 0` and the base ring to be a field. You don't check this, maybe since this seems not to be essential for the definition (except `q=0`):


```
sage: AW = algebras.AskeyWilson(ZZ, q=-1)
sage: AW.inject_variables()
Defining A, B, C, a, b, g
sage: B*A
A*B
sage: AW = algebras.AskeyWilson(QQ, q=0)
sage: AW.inject_variables()
Defining A, B, C, a, b, g
sage: B*A
Traceback (most recent call last):
...
ValueError: libGAP: Error, Rational operations: <divisor> must not be zero
```


But, since the violation of these assumption may effect Terwilliger's results, you should give at least a warning here.

2) Furthermore, I would replace the generator name `g` by `c`, since `g` might cause some confusion as in your own example:


```
sage: all(x * g == g * x for g in AW.algebra_generators() for x in [a,b,g])
True
```


The names `(a, b, c)` would coincide with the notion used in [Terwilliger2011]_ for the specialization of `alpha, beta` and `gamma`, as well. If you don't like to change the generator name you should at least change the example:
 

```
sage: all(x * f == f * x for f in AW.algebra_generators() for x in [a,b,g])
True
```


since:


```
sage: [ (g,x) for g in AW.algebra_generators() for x in [a,b,g]]
[(A, a),
 (A, b),
 (A, A),
....
 (g, g)]
```



3) Surely, your `product on basis` method can be completely understood from the code. But for such people as me it would be nicer to have some additional comments explaining the intentions. For example a headline above the first block saying something like "First commute the central part of the monomial to the right". Than explain that recursion is used which must terminate by degree reduction ...

4) As you know, I appreciate to have the possibility of a more familiar view on abstract elements. Using your `AlgebraMorphism` class it is not difficult to have Terwilliger's map `pi` (Lemma 3.11) implemented. I think, it would be helpful to have it included in the class (even though not injective).


5) Finally, I was not able to build the documentation


```
[algebras ] /home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/algebras/askey_wilson.py:docstring of sage.algebras.askey_wilson.AskeyWilsonAlgebra:52: WARNING: citation not found: Zhedanov1991
[algebras ] /home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/algebras/askey_wilson.py:docstring of sage.algebras.askey_wilson.AskeyWilsonAlgebra:116: WARNING: citation not found: Terwilliger2011
[algebras ] /home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/algebras/askey_wilson.py:docstring of sage.algebras.askey_wilson.AskeyWilsonAlgebra:127: WARNING: citation not found: Terwilliger2011
[algebras ] /home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/algebras/askey_wilson.py:docstring of sage.algebras.askey_wilson.AskeyWilsonAlgebra:168: WARNING: citation not found: Terwilliger2011
[algebras ] The HTML pages are in local/share/doc/sage/html/en/reference/algebras.
Error building the documentation.
Traceback (most recent call last):
...
OSError: /home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/algebras/askey_wilson.py:docstring of sage.algebras.askey_wilson.AskeyWilsonAlgebra:52: WARNING: citation not found: Zhedanov1991
```


even though the citations where supplied in `src/doc/en/reference/references/index.rst`. What did I do wrong?


---

Comment by git created at 2018-09-15 23:20:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-09-15 23:45:22

Thank you for taking a look at this.

Replying to [comment:2 soehms]:
> 1) Terwilliger assumes `q^4 != 1, q != 0` and the base ring to be a field. You don't check this, maybe since this seems not to be essential for the definition (except `q=0`):

The q = 0 case now raises and error (along if the base ring is not commutative).

> But, since the violation of these assumption may effect Terwilliger's results, you should give at least a warning here.

I added a `.. NOTE::` about this in the documentation, but as far as I can tell, nothing requires `R` to be a field and the q not a (fourth) root of unity does not seem to violate the algebra aspects of it.

> 2) Furthermore, I would replace the generator name `g` by `c`, since `g` might cause some confusion as in your own example:

That is a good point. I changed all of those `g`'s to `gen`'s.

> The names `(a, b, c)` would coincide with the notion used in [Terwilliger2011]_ for the specialization of `alpha, beta` and `gamma`, as well. If you don't like to change the generator name you should at least change the example:

I called it `g` for `gamma` instead of `c` because `a,b,c` are for the specialized universal AW algebra. I can change it, but I prefer the `g` to keep the association with `gamma`.

> 3) Surely, your `product on basis` method can be completely understood from the code. But for such people as me it would be nicer to have some additional comments explaining the intentions. For example a headline above the first block saying something like "First commute the central part of the monomial to the right". Than explain that recursion is used which must terminate by degree reduction ...

I added a few more comments about this.

> 4) As you know, I appreciate to have the possibility of a more familiar view on abstract elements. Using your `AlgebraMorphism` class it is not difficult to have Terwilliger's map `pi` (Lemma 3.11) implemented. I think, it would be helpful to have it included in the class (even though not injective).

That is a good idea. I have added this and gave this representation of the AW an explicit name.

> 5) Finally, I was not able to build the documentation
>
> even though the citations where supplied in `src/doc/en/reference/references/index.rst`. What did I do wrong?

Were you using `make doc`? I am guessing that you ran `sage --docbuild reference html`. The patchbots were able to build the doc as well, so it seems like something local to you.


---

Comment by tscrim created at 2018-09-15 23:45:31

Changing status from needs_work to needs_review.


---

Comment by git created at 2018-09-16 10:36:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2018-09-16 10:37:46

I did some minor corrections in the documentation layout (one missing & and two overfull h-boxes). If you agree with these changes, you may switch to positive review!


---

Comment by tscrim created at 2018-09-16 11:45:29

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-09-16 11:45:29

Thank you.


---

Comment by vbraun created at 2018-09-19 08:09:22

Resolution: fixed


---

Comment by dimpase created at 2021-04-13 17:26:02

how about Askey-Wilson polynomials? I need them, they appear in theory of distance-regular graphs.


---

Comment by tscrim created at 2021-04-14 00:27:06

This won't immediately generate them as it is related to the representation theory of this algebra (see http://www.scholarpedia.org/article/Askey-Wilson_polynomial). They are probably best implemented using the 3-term recurrence using p<sub>-1</sub>(x) = 0 and p<sub>0</sub>(x) = 1.
