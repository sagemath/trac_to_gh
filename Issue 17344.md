# Issue 17344: resolvable BIBD

archive/issues_017344.json:
```json
{
    "body": "CC:  @videlec @dimpase\n\nThis branch adds resolvable_bibd.py to combinat/designs/. It contains a couple of constructions for resolvable (v,k,1)-BIBD when k=3,4.\n\nNot all RBIBD with k=3,4 can be built, but I have on my computer the general construction for RBIBD with k=3. This is part of it, and the rest will follow in small pieces, as there are many \"design questions\" involved.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17581\n\n",
    "created_at": "2015-01-04T06:40:22Z",
    "labels": [
        "component: combinatorial designs"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "resolvable BIBD",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17344",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @videlec @dimpase

This branch adds resolvable_bibd.py to combinat/designs/. It contains a couple of constructions for resolvable (v,k,1)-BIBD when k=3,4.

Not all RBIBD with k=3,4 can be built, but I have on my computer the general construction for RBIBD with k=3. This is part of it, and the rest will follow in small pieces, as there are many "design questions" involved.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17581





---

archive/issue_comments_230780.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-04T06:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230780",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230781.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-04T06:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230782.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-04T06:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_230783.json:
```json
{
    "body": "Hello Nathann,\n\n1) What's the point of\n\n```\n-Balanced Incomplete Block Designs (BIBD)\n+(BIBD) Balanced Incomplete Block Designs\n```\n\nI prefer the former.\n\n2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)\n\nwill continue later.\nVincent",
    "created_at": "2015-01-14T18:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230783",
    "user": "https://github.com/videlec"
}
```

Hello Nathann,

1) What's the point of

```
-Balanced Incomplete Block Designs (BIBD)
+(BIBD) Balanced Incomplete Block Designs
```

I prefer the former.

2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)

will continue later.
Vincent



---

archive/issue_comments_230784.json:
```json
{
    "body": "Yooooooo !\n\n> 1) What's the point of\n> {{{\n> -Balanced Incomplete Block Designs (BIBD)\n> +(BIBD) Balanced Incomplete Block Designs\n> }}}\n> I prefer the former.\n\nOh. I made that change because ultimately it will be easier to read in this page:\n\nhttp://www.sagemath.org/doc/reference/combinat/designs.html\n\nThe lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.\n\n> 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)\n\nI think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`\n\nNathann",
    "created_at": "2015-01-14T18:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230784",
    "user": "https://github.com/nathanncohen"
}
```

Yooooooo !

> 1) What's the point of
> {{{
> -Balanced Incomplete Block Designs (BIBD)
> +(BIBD) Balanced Incomplete Block Designs
> }}}
> I prefer the former.

Oh. I made that change because ultimately it will be easier to read in this page:

http://www.sagemath.org/doc/reference/combinat/designs.html

The lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.

> 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)

I think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`

Nathann



---

archive/issue_comments_230785.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Yooooooo !\n> \n> > 1) What's the point of\n> > {{{\n> > -Balanced Incomplete Block Designs (BIBD)\n> > +(BIBD) Balanced Incomplete Block Designs\n> > }}}\n> > I prefer the former.\n> \n> Oh. I made that change because ultimately it will be easier to read in this page:\n> \n> http://www.sagemath.org/doc/reference/combinat/designs.html\n>\n> The lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.\n\nI do not find it easier to read. Could we stick with\n\n```\nCrazy Complete Name (CCN)\n```\n\n> > 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)\n> \n> I think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`\n\nNot simple... parallel classes do not fit very well with group actions.\n\nVincent",
    "created_at": "2015-01-16T17:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230785",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:5 ncohen]:
> Yooooooo !
> 
> > 1) What's the point of
> > {{{
> > -Balanced Incomplete Block Designs (BIBD)
> > +(BIBD) Balanced Incomplete Block Designs
> > }}}
> > I prefer the former.
> 
> Oh. I made that change because ultimately it will be easier to read in this page:
> 
> http://www.sagemath.org/doc/reference/combinat/designs.html
>
> The lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.

I do not find it easier to read. Could we stick with

```
Crazy Complete Name (CCN)
```

> > 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)
> 
> I think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`

Not simple... parallel classes do not fit very well with group actions.

Vincent



---

archive/issue_comments_230786.json:
```json
{
    "body": "Yo,\n\n> I do not find it easier to read. Could we stick with\n> {{{\n> Crazy Complete Name (CCN)\n> }}}\n\nIf you insist.... Please tell me what other things you would like to change in this commit, I'll address all of it at once.\n\n> Not simple... parallel classes do not fit very well with group actions.\n\nDepends.. In the constrution I have on my computer for KTS there are several designs built from difference families.\n\nThey are resolvable, but then some new points are added to build larger designs. Well, you will see.\n\nFor the moment it is not a Sage patch because there are many things in `needs_review`, and that writing the commit now will mean a lot of conflicts to solve later.\n\nNathann",
    "created_at": "2015-01-16T17:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230786",
    "user": "https://github.com/nathanncohen"
}
```

Yo,

> I do not find it easier to read. Could we stick with
> {{{
> Crazy Complete Name (CCN)
> }}}

If you insist.... Please tell me what other things you would like to change in this commit, I'll address all of it at once.

> Not simple... parallel classes do not fit very well with group actions.

Depends.. In the constrution I have on my computer for KTS there are several designs built from difference families.

They are resolvable, but then some new points are added to build larger designs. Well, you will see.

For the moment it is not a Sage patch because there are many things in `needs_review`, and that writing the commit now will mean a lot of conflicts to solve later.

Nathann



---

archive/issue_comments_230787.json:
```json
{
    "body": "Hello,\n\nSee my commit at `u/vdelecroix/17581`.\n\n1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)\n\n2) The lines\n\n```\nbla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])\n```\n\nare ugly... I changed a bit one of them but I am still not happy to have a quadratic complexity when linear is doable.\n\n3) I used `discrete_log` where you did a `while` loop... should be faster.\n\nVincent",
    "created_at": "2015-01-16T21:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230787",
    "user": "https://github.com/videlec"
}
```

Hello,

See my commit at `u/vdelecroix/17581`.

1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)

2) The lines

```
bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
```

are ugly... I changed a bit one of them but I am still not happy to have a quadratic complexity when linear is doable.

3) I used `discrete_log` where you did a `while` loop... should be faster.

Vincent



---

archive/issue_comments_230788.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-01-17T03:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230788",
    "user": "https://github.com/nathanncohen"
}
```

New commits:



---

archive/issue_comments_230789.json:
```json
{
    "body": "Yo !\n\n> See my commit at `u/vdelecroix/17581`.\n\nLooks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.\n\n> 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)\n\nI do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?\n\n> 2) The lines\n> {{{\n> bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])\n> }}}\n\nAHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.\n\n> 3) I used `discrete_log` where you did a `while` loop... should be faster.\n\nOh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.\n\nAssuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`\n\nNathann",
    "created_at": "2015-01-17T03:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230789",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> See my commit at `u/vdelecroix/17581`.

Looks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.

> 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)

I do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?

> 2) The lines
> {{{
> bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
> }}}

AHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.

> 3) I used `discrete_log` where you did a `while` loop... should be faster.

Oh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.

Assuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`

Nathann



---

archive/issue_comments_230790.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-17T03:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230790",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230791.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-01-17T09:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230791",
    "user": "https://github.com/videlec"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_230792.json:
```json
{
    "body": "Replying to [comment:10 ncohen]:\n> Yo !\n> \n> > See my commit at `u/vdelecroix/17581`.\n> \n> Looks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.\n\nRight. I found it so ugly...\n\n> > 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)\n> \n> I do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?\n\nlook at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way\n\n```\nsage: KTS = designs.resolvable_balanced_incomplete_block_design(8,2); KTS\nTraceback (most recent call last):\n...\nTypeError: unhashable type: 'list'\n```\n\n\n> > 2) The lines\n> > {{{\n> > bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])\n> > }}}\n> \n> AHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.\n\nRight. These are `n log(n)`, I realized that after I put on \"submit changes\".\n\n> > 3) I used `discrete_log` where you did a `while` loop... should be faster.\n> \n> Oh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.\n\nHum, strange. That you who spot these to me in a previous ticket ;-)\n \n> Assuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`\n\nPlease fix the case `k=2`\n\nVincent",
    "created_at": "2015-01-17T09:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230792",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:10 ncohen]:
> Yo !
> 
> > See my commit at `u/vdelecroix/17581`.
> 
> Looks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.

Right. I found it so ugly...

> > 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)
> 
> I do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?

look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way

```
sage: KTS = designs.resolvable_balanced_incomplete_block_design(8,2); KTS
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
```


> > 2) The lines
> > {{{
> > bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
> > }}}
> 
> AHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.

Right. These are `n log(n)`, I realized that after I put on "submit changes".

> > 3) I used `discrete_log` where you did a `while` loop... should be faster.
> 
> Oh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.

Hum, strange. That you who spot these to me in a previous ticket ;-)
 
> Assuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`

Please fix the case `k=2`

Vincent



---

archive/issue_comments_230793.json:
```json
{
    "body": "Yo !\n\n> look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way\n\nOkay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.\n\nNathann",
    "created_at": "2015-01-17T11:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230793",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way

Okay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.

Nathann



---

archive/issue_comments_230794.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-17T11:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230794",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230795.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-01-17T11:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230795",
    "user": "https://github.com/nathanncohen"
}
```

New commits:



---

archive/issue_comments_230796.json:
```json
{
    "body": "Replying to [comment:12 ncohen]:\n> Yo !\n> \n> > look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way\n> \n> Okay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.\n\nIt was precisely the case `k=2` which did not\n\n```\nclasses = B._classes\nreturn classes\n```\n\n\nVincent",
    "created_at": "2015-01-17T11:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230796",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:12 ncohen]:
> Yo !
> 
> > look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way
> 
> Okay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.

It was precisely the case `k=2` which did not

```
classes = B._classes
return classes
```


Vincent



---

archive/issue_comments_230797.json:
```json
{
    "body": "> It was precisely the case `k=2` which did not\n> {{{\n> classes = B._classes\n> return classes\n> }}}\n\nNope. I still don't get it. There is not a single occurrence of \"return classes\" in the file.\n\nNathann",
    "created_at": "2015-01-17T11:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230797",
    "user": "https://github.com/nathanncohen"
}
```

> It was precisely the case `k=2` which did not
> {{{
> classes = B._classes
> return classes
> }}}

Nope. I still don't get it. There is not a single occurrence of "return classes" in the file.

Nathann



---

archive/issue_comments_230798.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-17T14:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230798",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230799.json:
```json
{
    "body": "Sorry, I was being stupid.\n\nVincent",
    "created_at": "2015-01-17T14:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230799",
    "user": "https://github.com/videlec"
}
```

Sorry, I was being stupid.

Vincent



---

archive/issue_comments_230800.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-24T13:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17344#issuecomment-230800",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-24T13:19:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17344",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17344#event-50444"
}
```
