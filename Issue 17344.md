# Issue 17344: resolvable BIBD

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-01-04 06:40:22

CC:  vdelecroix dimpase

This branch adds resolvable_bibd.py to combinat/designs/. It contains a couple of constructions for resolvable (v,k,1)-BIBD when k=3,4.

Not all RBIBD with k=3,4 can be built, but I have on my computer the general construction for RBIBD with k=3. This is part of it, and the rest will follow in small pieces, as there are many "design questions" involved.

Nathann


---

Comment by ncohen created at 2015-01-04 06:40:37

Changing status from new to needs_review.


---

Comment by git created at 2015-01-04 06:41:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-01-04 06:54:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-01-14 18:00:10

Hello Nathann,

1) What's the point of

```
-Balanced Incomplete Block Designs (BIBD)
+(BIBD) Balanced Incomplete Block Designs
```

I prefer the former.

2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)

will continue later.
Vincent


---

Comment by ncohen created at 2015-01-14 18:52:27

Yooooooo !

> 1) What's the point of
> {{{
> -Balanced Incomplete Block Designs (BIBD)
> +(BIBD) Balanced Incomplete Block Designs
> }}}
> I prefer the former.

Oh. I made that change because ultimately it will be easier to read in this page:

http://www.sagemath.org/doc/reference/combinat/designs.html

The lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.

> 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)

I think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`

Nathann


---

Comment by vdelecroix created at 2015-01-16 17:51:48

Replying to [comment:5 ncohen]:
> Yooooooo !
> 
> > 1) What's the point of
> > {{{
> > -Balanced Incomplete Block Designs (BIBD)
> > +(BIBD) Balanced Incomplete Block Designs
> > }}}
> > I prefer the former.
> 
> Oh. I made that change because ultimately it will be easier to read in this page:
> 
> http://www.sagemath.org/doc/reference/combinat/designs.html
>
> The lines will begin with BIBD/BIBD,GDD, i.e. the signs that we are used to see and spot easily.

I do not find it easier to read. Could we stick with

```
Crazy Complete Name (CCN)
```

> > 2) Do you know if difference family/difference set can be used to generate RBIBD? (It seems to be no, I will think about it)
> 
> I think that I saw something like that in the `Beth/Jungnickel/Lenz` book I sent you. No clearer memory, sorry `:-/`

Not simple... parallel classes do not fit very well with group actions.

Vincent


---

Comment by ncohen created at 2015-01-16 17:57:37

Yo,

> I do not find it easier to read. Could we stick with
> {{{
> Crazy Complete Name (CCN)
> }}}

If you insist.... Please tell me what other things you would like to change in this commit, I'll address all of it at once.

> Not simple... parallel classes do not fit very well with group actions.

Depends.. In the constrution I have on my computer for KTS there are several designs built from difference families.

They are resolvable, but then some new points are added to build larger designs. Well, you will see.

For the moment it is not a Sage patch because there are many things in `needs_review`, and that writing the commit now will mean a lot of conflicts to solve later.

Nathann


---

Comment by vdelecroix created at 2015-01-16 21:13:07

Hello,

See my commit at `u/vdelecroix/17581`.

1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)

2) The lines

```
bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
```

are ugly... I changed a bit one of them but I am still not happy to have a quadratic complexity when linear is doable.

3) I used `discrete_log` where you did a `while` loop... should be faster.

Vincent


---

Comment by ncohen created at 2015-01-17 03:24:56

New commits:


---

Comment by ncohen created at 2015-01-17 03:42:00

Yo !

> See my commit at `u/vdelecroix/17581`.

Looks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.

> 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)

I do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?

> 2) The lines
> {{{
> bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
> }}}

AHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.

> 3) I used `discrete_log` where you did a `while` loop... should be faster.

Oh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.

Assuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`

Nathann


---

Comment by ncohen created at 2015-01-17 03:42:00

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2015-01-17 09:01:51

Changing status from positive_review to needs_work.


---

Comment by vdelecroix created at 2015-01-17 09:01:51

Replying to [comment:10 ncohen]:
> Yo !
> 
> > See my commit at `u/vdelecroix/17581`.
> 
> Looks good. About the example of KTS at the beginning of the doc: I tried to write it in such a way that it is both informative and readable by users. Yours is prettier indeed, but.. Clearly harder to read. Anyway let's talk about this before it is changed, next time.

Right. I found it so ugly...

> > 1) Why not return an object with type `BalancedIncompleteBlockDesign`. That way you can add to the examples `.is_resolvable()`. (moreover, contrarily to the others `v_4_1_rbibd` does!?)
> 
> I do not understand your sentence. Where isn't a `BalancedIncompleteBlockDesign` object returned?

look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way

```
sage: KTS = designs.resolvable_balanced_incomplete_block_design(8,2); KTS
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
```


> > 2) The lines
> > {{{
> > bla.extend([a**(i+j0),a**(i+j1),a**(i+j2)] for i in a_big_list])
> > }}}
> 
> AHahah. Well compared to the complexity of other parts of the algorithm I am sure that it makes no difference. By the way isn't it a `nlog(n)` complexity ? Exponents are cheap.

Right. These are `n log(n)`, I realized that after I put on "submit changes".

> > 3) I used `discrete_log` where you did a `while` loop... should be faster.
> 
> Oh thanks, I did not know that we had that. There must be some other spot where it is needed in the code then, for I am sure that I missed it once at least.

Hum, strange. That you who spot these to me in a previous ticket ;-)
 
> Assuming that you see nothing else to change, I set this ticket to `positive_review`. Thanks for your help again, there would be no design code in Sage if not for that `^^;`

Please fix the case `k=2`

Vincent


---

Comment by ncohen created at 2015-01-17 11:06:44

Yo !

> look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way

Okay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.

Nathann


---

Comment by ncohen created at 2015-01-17 11:07:08

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-01-17 11:07:08

New commits:


---

Comment by vdelecroix created at 2015-01-17 11:11:40

Replying to [comment:12 ncohen]:
> Yo !
> 
> > look at the case for `k=2` in `resolvable_balanced_incomplete_block_design`. And by the way
> 
> Okay, that was a bug and actually there were other bugs. It is fixed with this commit. This being said I still do not understand why you say that some part of the code does not return a BIBD, so I wouldn't mind if you could tell me exactly what the problem is.

It was precisely the case `k=2` which did not

```
classes = B._classes
return classes
```


Vincent


---

Comment by ncohen created at 2015-01-17 11:19:28

> It was precisely the case `k=2` which did not
> {{{
> classes = B._classes
> return classes
> }}}

Nope. I still don't get it. There is not a single occurrence of "return classes" in the file.

Nathann


---

Comment by vdelecroix created at 2015-01-17 14:37:18

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2015-01-17 14:37:18

Sorry, I was being stupid.

Vincent


---

Comment by vbraun created at 2015-01-24 13:19:09

Resolution: fixed
