# Issue 33283: scipy, networkx: Update install-requires.txt

archive/issues_033283.json:
```json
{
    "body": "CC:  @antonio-rojas @tobiasdiez @kiwifb\n\nAfter #33336 and #33495, we should change the upper version bounds in `build/pkgs/.../install-requires.txt`\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33520\n\n",
    "created_at": "2022-03-17T19:41:43Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "scipy, networkx: Update install-requires.txt",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33283",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @antonio-rojas @tobiasdiez @kiwifb

After #33336 and #33495, we should change the upper version bounds in `build/pkgs/.../install-requires.txt`



Issue created by migration from https://trac.sagemath.org/ticket/33520





---

archive/issue_comments_473218.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-03-17T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473218",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_473219.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-17T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473219",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_473220.json:
```json
{
    "body": "Why are upper bounds needed for these packages? For example, networkx doesn't yet have a version 2.8 released (at least on pip) and I couldn't find a ticket that says that this version is indeed not compatible with the current version of sagelib.",
    "created_at": "2022-03-17T20:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473220",
    "user": "https://github.com/tobiasdiez"
}
```

Why are upper bounds needed for these packages? For example, networkx doesn't yet have a version 2.8 released (at least on pip) and I couldn't find a ticket that says that this version is indeed not compatible with the current version of sagelib.



---

archive/issue_comments_473221.json:
```json
{
    "body": "It's part of best practices to set upper bounds so that incompatible releases of these third-party packages do not retroactively break our release.",
    "created_at": "2022-03-17T20:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473221",
    "user": "https://github.com/mkoeppe"
}
```

It's part of best practices to set upper bounds so that incompatible releases of these third-party packages do not retroactively break our release.



---

archive/issue_comments_473222.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> It's part of best practices to set upper bounds so that incompatible releases of these third-party packages do not retroactively break our release.\n\n\nBest practice is to only set a upper limit for versions that are known to cause incompatibilities. For example, have a look at:\n> Libraries/packages should be setting a floor, and if necessary excluding known buggy versions, but otherwise don't cap the maximum version as you can't predict future compatibility\n\n\n(https://snarky.ca/why-i-dont-like-semver/, from one of the core members of the python team)\n\nand https://iscinumpy.dev/post/bound-version-constraints/ for a very detailed analysis ending with the recommendation\n> Valid reasons to add an upper limit are:\n\n>\n>    1. If a dependency is known to be broken, block out the broken version. ...\n>    2. If you know upstream is about to make a major change that is very likely to break your usage, you can cap. ...\n>    ...",
    "created_at": "2022-03-17T22:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473222",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:4 mkoeppe]:
> It's part of best practices to set upper bounds so that incompatible releases of these third-party packages do not retroactively break our release.


Best practice is to only set a upper limit for versions that are known to cause incompatibilities. For example, have a look at:
> Libraries/packages should be setting a floor, and if necessary excluding known buggy versions, but otherwise don't cap the maximum version as you can't predict future compatibility


(https://snarky.ca/why-i-dont-like-semver/, from one of the core members of the python team)

and https://iscinumpy.dev/post/bound-version-constraints/ for a very detailed analysis ending with the recommendation
> Valid reasons to add an upper limit are:

>
>    1. If a dependency is known to be broken, block out the broken version. ...
>    2. If you know upstream is about to make a major change that is very likely to break your usage, you can cap. ...
>    ...



---

archive/issue_comments_473223.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-17T22:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473223",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_473224.json:
```json
{
    "body": "For each of the updates of these packages from x.y to x.(y+1) we had tickets for fixing doctest failures that they introduced. So yes, we can predict future incompatibility. `scipy` and `networkx` are fast-moving active projects.",
    "created_at": "2022-03-17T22:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473224",
    "user": "https://github.com/mkoeppe"
}
```

For each of the updates of these packages from x.y to x.(y+1) we had tickets for fixing doctest failures that they introduced. So yes, we can predict future incompatibility. `scipy` and `networkx` are fast-moving active projects.



---

archive/issue_comments_473225.json:
```json
{
    "body": "Note also our release cadence (https://wiki.sagemath.org/ReleaseTours) is on the order of months to half a year.\n\nWhich means when an incompatibility arises, we are not able to react quickly, and we will be months with broken dependencies.",
    "created_at": "2022-03-17T22:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473225",
    "user": "https://github.com/mkoeppe"
}
```

Note also our release cadence (https://wiki.sagemath.org/ReleaseTours) is on the order of months to half a year.

Which means when an incompatibility arises, we are not able to react quickly, and we will be months with broken dependencies.



---

archive/issue_comments_473226.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-17T22:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473226",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_473227.json:
```json
{
    "body": "Replying to [comment:7 mkoeppe]:\n> Note also our release cadence (https://wiki.sagemath.org/ReleaseTours) is on the order of months to half a year.\n> \n> Which means when an incompatibility arises, we are not able to react quickly, and we will be months with broken dependencies.\n\n\nThat conversely means that people cannot upgrade networkx for a very long time although there might be no or only minor incompatibilities.\n\nBig -1 from my side on upper limits that don't satisfy one of the criteria outlined in the linked articles.",
    "created_at": "2022-03-17T22:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473227",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:7 mkoeppe]:
> Note also our release cadence (https://wiki.sagemath.org/ReleaseTours) is on the order of months to half a year.
> 
> Which means when an incompatibility arises, we are not able to react quickly, and we will be months with broken dependencies.


That conversely means that people cannot upgrade networkx for a very long time although there might be no or only minor incompatibilities.

Big -1 from my side on upper limits that don't satisfy one of the criteria outlined in the linked articles.



---

archive/issue_comments_473228.json:
```json
{
    "body": "All those \"requirements\" are only indications for pip to manage dependencies on its own. If you are not using pip to manage your package (say apt, emerge, pacman...) those requirements are only indication for you as a packager, you can ignore them.\n\nI usually pay attention to lower bounds, but the upper one is checked by running the testsuite if there is one, and comparing the result with the highest version that fits the upper limit.\n\nI tend to agree that higher limits are bets about future development - unless you happen to have inside knowledge about upcoming breakage.",
    "created_at": "2022-03-18T00:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473228",
    "user": "https://github.com/kiwifb"
}
```

All those "requirements" are only indications for pip to manage dependencies on its own. If you are not using pip to manage your package (say apt, emerge, pacman...) those requirements are only indication for you as a packager, you can ignore them.

I usually pay attention to lower bounds, but the upper one is checked by running the testsuite if there is one, and comparing the result with the highest version that fits the upper limit.

I tend to agree that higher limits are bets about future development - unless you happen to have inside knowledge about upcoming breakage.



---

archive/issue_comments_473229.json:
```json
{
    "body": "Replying to [comment:11 fbissey]:\n> I usually pay attention to lower bounds, but the upper one is checked by running the testsuite if there is one, and comparing the result with the highest version that fits the upper limit.\n\n\nYes, input from you and other packagers of cutting-edge distributions can inform us about upper bounds that we need to set in `install-requires.txt` if we are not immediately able to adjust tests and code.",
    "created_at": "2022-03-18T01:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473229",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:11 fbissey]:
> I usually pay attention to lower bounds, but the upper one is checked by running the testsuite if there is one, and comparing the result with the highest version that fits the upper limit.


Yes, input from you and other packagers of cutting-edge distributions can inform us about upper bounds that we need to set in `install-requires.txt` if we are not immediately able to adjust tests and code.



---

archive/issue_comments_473230.json:
```json
{
    "body": "In addition to our experience with the upgrades of these packages over the years, \nwhat is relevant is the policy of the package regarding deprecations - for scipy that's  https://scipy.github.io/devdocs/dev/core-dev/index.html#deprecations\n\nscipy used the MAJOR.MINOR.MICRO versioning, and the policy https://scipy.github.io/devdocs/dev/core-dev/index.html#version-numbering advises that \"Minor versions are typically released twice a year and can contain new features, deprecations and bug-fixes.\" (Micro version steps cannot make new deprecations.)\n\nSo such deprecation warnings are routinely introduced twice a year with the release of a new MINOR versions. \n\nSage users/developers traditionally value spotless doctest runs (see typical sage-devel posts); the conservative policy of excluding an increase of the MINOR version (`scipy<1.9`, as per this ticket - as our current version is 1.7.x and compatibility with 1.8.x has been taken care of in #33336) protects against such deprecation warnings. \n\nOf course, it would be valid to argue that this is too conservative. A more relaxed policy would consider that within 6 months a hard incompatibility can only be introduced when the next MINOR version is released; so this would justify setting `scipy<1.10`.\n\nBut what is the right policy is for the Sage community to decide and cannot be resolved by a generic appeal to (selected) authority.",
    "created_at": "2022-03-18T01:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473230",
    "user": "https://github.com/mkoeppe"
}
```

In addition to our experience with the upgrades of these packages over the years, 
what is relevant is the policy of the package regarding deprecations - for scipy that's  https://scipy.github.io/devdocs/dev/core-dev/index.html#deprecations

scipy used the MAJOR.MINOR.MICRO versioning, and the policy https://scipy.github.io/devdocs/dev/core-dev/index.html#version-numbering advises that "Minor versions are typically released twice a year and can contain new features, deprecations and bug-fixes." (Micro version steps cannot make new deprecations.)

So such deprecation warnings are routinely introduced twice a year with the release of a new MINOR versions. 

Sage users/developers traditionally value spotless doctest runs (see typical sage-devel posts); the conservative policy of excluding an increase of the MINOR version (`scipy<1.9`, as per this ticket - as our current version is 1.7.x and compatibility with 1.8.x has been taken care of in #33336) protects against such deprecation warnings. 

Of course, it would be valid to argue that this is too conservative. A more relaxed policy would consider that within 6 months a hard incompatibility can only be introduced when the next MINOR version is released; so this would justify setting `scipy<1.10`.

But what is the right policy is for the Sage community to decide and cannot be resolved by a generic appeal to (selected) authority.



---

archive/issue_comments_473231.json:
```json
{
    "body": "Guidance on upper bounds for numpy is in https://numpy.org/devdocs/user/depending_on_numpy.html#runtime-dependency-version-ranges\n(we currently do not set an upper bound).",
    "created_at": "2022-03-19T20:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473231",
    "user": "https://github.com/mkoeppe"
}
```

Guidance on upper bounds for numpy is in https://numpy.org/devdocs/user/depending_on_numpy.html#runtime-dependency-version-ranges
(we currently do not set an upper bound).



---

archive/issue_comments_473232.json:
```json
{
    "body": "Also relevant, from the scipy core-dev documentation: https://docs.scipy.org/doc/scipy/dev/core-dev/index.html#version-ranges-for-numpy-and-other-dependencies and https://docs.scipy.org/doc/scipy/dev/core-dev/index.html#updating-upper-bounds-of-dependencies",
    "created_at": "2022-03-19T21:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473232",
    "user": "https://github.com/mkoeppe"
}
```

Also relevant, from the scipy core-dev documentation: https://docs.scipy.org/doc/scipy/dev/core-dev/index.html#version-ranges-for-numpy-and-other-dependencies and https://docs.scipy.org/doc/scipy/dev/core-dev/index.html#updating-upper-bounds-of-dependencies



---

archive/issue_comments_473233.json:
```json
{
    "body": "And here is the networkx deprecation policy.\nhttps://networkx.org/documentation/stable/developer/deprecations.html#policy",
    "created_at": "2022-03-22T02:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473233",
    "user": "https://github.com/mkoeppe"
}
```

And here is the networkx deprecation policy.
https://networkx.org/documentation/stable/developer/deprecations.html#policy



---

archive/issue_comments_473234.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-03-22T19:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473234",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_473235.json:
```json
{
    "body": "Bumping this up so we can get this fix into 9.6.",
    "created_at": "2022-03-22T19:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473235",
    "user": "https://github.com/mkoeppe"
}
```

Bumping this up so we can get this fix into 9.6.



---

archive/issue_comments_473236.json:
```json
{
    "body": "I don't see how these last comments of yours address any point that is brought forward in comment:11 above and in https://iscinumpy.dev/post/bound-version-constraints/.\n\nMoreover, they actually are arguments for why these upper bounds are not a good idea:\n> Note that setting an upper bound on NumPy may affect the ability of your library to be installed alongside other, newer packages.\n\n\nAnd\n> you can set an upper bound of <MAJOR.MINOR + N with N no less than 3, and MAJOR.MINOR being the current release of NumPy\n\n\nIn this ticket N=1.",
    "created_at": "2022-03-22T19:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473236",
    "user": "https://github.com/tobiasdiez"
}
```

I don't see how these last comments of yours address any point that is brought forward in comment:11 above and in https://iscinumpy.dev/post/bound-version-constraints/.

Moreover, they actually are arguments for why these upper bounds are not a good idea:
> Note that setting an upper bound on NumPy may affect the ability of your library to be installed alongside other, newer packages.


And
> you can set an upper bound of <MAJOR.MINOR + N with N no less than 3, and MAJOR.MINOR being the current release of NumPy


In this ticket N=1.



---

archive/issue_comments_473237.json:
```json
{
    "body": "So which N do you think we should use?",
    "created_at": "2022-03-22T19:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473237",
    "user": "https://github.com/mkoeppe"
}
```

So which N do you think we should use?



---

archive/issue_comments_473238.json:
```json
{
    "body": "From the packaging perspective in Gentoo, most packages only include lower limits. Upper limits, when they exist, are added after the fact in 99.9% of the cases (notable exceptions would be stuff like `pynac` which was known to break things at every single release). While I don't want to impose my views on this on you and don't feel as strongly as Tobias, upper limits are mostly just a guess and assuming them means that you should be ready to update them frequently.\n\nPart of the reasons I don't care that much about the limits on this ticket, is that I know they exist and rarely bother reading them :)",
    "created_at": "2022-03-22T19:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473238",
    "user": "https://github.com/kiwifb"
}
```

From the packaging perspective in Gentoo, most packages only include lower limits. Upper limits, when they exist, are added after the fact in 99.9% of the cases (notable exceptions would be stuff like `pynac` which was known to break things at every single release). While I don't want to impose my views on this on you and don't feel as strongly as Tobias, upper limits are mostly just a guess and assuming them means that you should be ready to update them frequently.

Part of the reasons I don't care that much about the limits on this ticket, is that I know they exist and rarely bother reading them :)



---

archive/issue_comments_473239.json:
```json
{
    "body": "This makes sense for Gentoo, which is a fast moving cutting edge distribution.",
    "created_at": "2022-03-22T20:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473239",
    "user": "https://github.com/mkoeppe"
}
```

This makes sense for Gentoo, which is a fast moving cutting edge distribution.



---

archive/issue_comments_473240.json:
```json
{
    "body": "We are talking here about the metadata that comes with releases of Sage (= releases about 2-3 times a year, with no bugfix releases ever). The idea is to provide each release with upper bounds for its key dependencies that ensures that this version can be used within its lifespan.",
    "created_at": "2022-03-22T20:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473240",
    "user": "https://github.com/mkoeppe"
}
```

We are talking here about the metadata that comes with releases of Sage (= releases about 2-3 times a year, with no bugfix releases ever). The idea is to provide each release with upper bounds for its key dependencies that ensures that this version can be used within its lifespan.



---

archive/issue_comments_473241.json:
```json
{
    "body": "I do understand your intent, even if fundamentally living in Gentoo land for about 20 years makes me think it is misguided. It is something I associate with proprietary software. Which of course sagemath is a competition to. I just always feel I and Tobias and Antonio are just the wrong persons to help you make those kind of decisions - our investment in that aspect is low.",
    "created_at": "2022-03-22T20:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473241",
    "user": "https://github.com/kiwifb"
}
```

I do understand your intent, even if fundamentally living in Gentoo land for about 20 years makes me think it is misguided. It is something I associate with proprietary software. Which of course sagemath is a competition to. I just always feel I and Tobias and Antonio are just the wrong persons to help you make those kind of decisions - our investment in that aspect is low.



---

archive/issue_comments_473242.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> So which N do you think we should use?\n\n\nInfinity?\n\nThe numpy docs explicitly have a frequent release cycle as a requirement for an upper version limit. The reason for this is also explained in the the second link cited above:\n\n> This means every single major release of every dependency you cap immediately requires you to make a new release or everyone using your library can no longer use the latest version of those libraries. If \u201cmake a new release quickly\u201d from above bothered you; well, now you have to make it on every version bump of every pinned dependency.\n\n\nAnd sage at it current dev speed cannot guarantee such quick releases. \n\nFor example, what if scipy 1.9 contains an urgent hotfix? Then users of sage + scipy cannot upgrade their scipy for a few months just because we were guessing that scipy 1.9 might break a couple of doctests.",
    "created_at": "2022-03-22T20:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473242",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:19 mkoeppe]:
> So which N do you think we should use?


Infinity?

The numpy docs explicitly have a frequent release cycle as a requirement for an upper version limit. The reason for this is also explained in the the second link cited above:

> This means every single major release of every dependency you cap immediately requires you to make a new release or everyone using your library can no longer use the latest version of those libraries. If “make a new release quickly” from above bothered you; well, now you have to make it on every version bump of every pinned dependency.


And sage at it current dev speed cannot guarantee such quick releases. 

For example, what if scipy 1.9 contains an urgent hotfix? Then users of sage + scipy cannot upgrade their scipy for a few months just because we were guessing that scipy 1.9 might break a couple of doctests.



---

archive/issue_comments_473243.json:
```json
{
    "body": "Replying to [comment:24 gh-tobiasdiez]:\n> Replying to [comment:19 mkoeppe]:\n> > So which N do you think we should use?\n\n> \n> Infinity?\n\n\nThat's an extreme position which puts 0 emphasis on stability.\n\n> For example, what if scipy 1.9 contains an urgent hotfix? \n\n\nFirst of all, scipy has just only started the 1.8 series and will continue making 1.8.x fixes.\n\n> Then users of sage + scipy cannot upgrade their scipy for a few months just because we were guessing that scipy 1.9 might break a couple of doctests.\n\n\nThat's an argument that supports setting N higher, but it does not support N=infinity.",
    "created_at": "2022-03-22T20:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473243",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:24 gh-tobiasdiez]:
> Replying to [comment:19 mkoeppe]:
> > So which N do you think we should use?

> 
> Infinity?


That's an extreme position which puts 0 emphasis on stability.

> For example, what if scipy 1.9 contains an urgent hotfix? 


First of all, scipy has just only started the 1.8 series and will continue making 1.8.x fixes.

> Then users of sage + scipy cannot upgrade their scipy for a few months just because we were guessing that scipy 1.9 might break a couple of doctests.


That's an argument that supports setting N higher, but it does not support N=infinity.



---

archive/issue_comments_473244.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> Replying to [comment:24 gh-tobiasdiez]:\n> > Replying to [comment:19 mkoeppe]:\n> > > So which N do you think we should use?\n\n> > \n> > Infinity?\n\n> \n> That's an extreme position which puts 0 emphasis on stability.\n\n\nNot at all. It's very easy (through mildly annoying) for *users* to set upper limits for these dependencies in their installation as they see fit; potentially trading new shiny bug fixes of scipy with some issues in sage's usage of scipy. But that tradeoff depends on the needs of the particular use case (maybe she doesn't need anything new from scipy vs she doesn't care that half of sage is broken with a new version of scipy as long as the other half works). Artificial upper version limits just remove this flexibility.\n\nSomething like `N=4` seems also okay, although I don't really see the benefit of this.",
    "created_at": "2022-03-22T20:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473244",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:25 mkoeppe]:
> Replying to [comment:24 gh-tobiasdiez]:
> > Replying to [comment:19 mkoeppe]:
> > > So which N do you think we should use?

> > 
> > Infinity?

> 
> That's an extreme position which puts 0 emphasis on stability.


Not at all. It's very easy (through mildly annoying) for *users* to set upper limits for these dependencies in their installation as they see fit; potentially trading new shiny bug fixes of scipy with some issues in sage's usage of scipy. But that tradeoff depends on the needs of the particular use case (maybe she doesn't need anything new from scipy vs she doesn't care that half of sage is broken with a new version of scipy as long as the other half works). Artificial upper version limits just remove this flexibility.

Something like `N=4` seems also okay, although I don't really see the benefit of this.



---

archive/issue_comments_473245.json:
```json
{
    "body": "Replying to [comment:26 gh-tobiasdiez]:\n> It's very easy (through mildly annoying) for *users* to set upper limits for these dependencies \n\n\nThis asymmetry between setting limits (easy) and removing limits (hard) is, of course, an important argument in favor of looser bounds; but it still does not support N=infinity.",
    "created_at": "2022-03-22T21:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473245",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:26 gh-tobiasdiez]:
> It's very easy (through mildly annoying) for *users* to set upper limits for these dependencies 


This asymmetry between setting limits (easy) and removing limits (hard) is, of course, an important argument in favor of looser bounds; but it still does not support N=infinity.



---

archive/issue_comments_473246.json:
```json
{
    "body": "I'll prepare a version based on the deprecation policies linked to in comment:14 to comment:16",
    "created_at": "2022-03-22T21:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473246",
    "user": "https://github.com/mkoeppe"
}
```

I'll prepare a version based on the deprecation policies linked to in comment:14 to comment:16



---

archive/issue_comments_473247.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-22T21:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473247",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_473248.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> I'll prepare a version based on the deprecation policies linked to in comment:14 to comment:16\n\n\nThanks!\n\nNote that just because something is deprecated (and later removed) doesn't mean that sage is affected by it. Thus one doesn't have to strictly follow the deprecation timeline, although it makes sense to take them as orientation.",
    "created_at": "2022-03-22T21:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473248",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:28 mkoeppe]:
> I'll prepare a version based on the deprecation policies linked to in comment:14 to comment:16


Thanks!

Note that just because something is deprecated (and later removed) doesn't mean that sage is affected by it. Thus one doesn't have to strictly follow the deprecation timeline, although it makes sense to take them as orientation.



---

archive/issue_comments_473249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-26T23:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_473250.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-26T23:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_473251.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-26T23:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473251",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_473252.json:
```json
{
    "body": "Thanks for the changes.\n\nShouldn't it be `< 1.12` for scipy? Some feature might be deprecated in `1.9`, then it stays deprecated for half a year (= 2 minor releases, i.e. 1.10 and 1.11) before it is potentially removed in `1.12`.\n\nMoreover, I think it would be a good idea to distill our discussion and add a remark to the dev docs that upper bounds should be used carefully and need to be documented.",
    "created_at": "2022-03-27T09:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473252",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks for the changes.

Shouldn't it be `< 1.12` for scipy? Some feature might be deprecated in `1.9`, then it stays deprecated for half a year (= 2 minor releases, i.e. 1.10 and 1.11) before it is potentially removed in `1.12`.

Moreover, I think it would be a good idea to distill our discussion and add a remark to the dev docs that upper bounds should be used carefully and need to be documented.



---

archive/issue_comments_473253.json:
```json
{
    "body": "Replying to [comment:33 gh-tobiasdiez]:\n> Shouldn't it be `< 1.12` for scipy? Some feature might be deprecated in `1.9`, then it stays deprecated for half a year (= 2 minor releases, i.e. 1.10 and 1.11) before it is potentially removed in `1.12`.\n\n\nno, half a year is one minor release.",
    "created_at": "2022-03-27T15:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473253",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:33 gh-tobiasdiez]:
> Shouldn't it be `< 1.12` for scipy? Some feature might be deprecated in `1.9`, then it stays deprecated for half a year (= 2 minor releases, i.e. 1.10 and 1.11) before it is potentially removed in `1.12`.


no, half a year is one minor release.



---

archive/issue_comments_473254.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-27T15:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_473255.json:
```json
{
    "body": "Okay, looks good to me.\n\nFeel free to set it to positive review once https://github.com/sagemath/sagetrac-mirror/runs/5710585148?check_suite_focus=true passes.",
    "created_at": "2022-03-27T16:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473255",
    "user": "https://github.com/tobiasdiez"
}
```

Okay, looks good to me.

Feel free to set it to positive review once https://github.com/sagemath/sagetrac-mirror/runs/5710585148?check_suite_focus=true passes.



---

archive/issue_comments_473256.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-30T00:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473256",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_473257.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-03-30T00:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473257",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_events_088265.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:53:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33283#event-88265"
}
```



---

archive/issue_comments_473258.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-02T10:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33283#issuecomment-473258",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
