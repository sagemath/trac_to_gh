# Issue 10992: Add logging for Dokchitser scripts

archive/issues_010992.json:
```json
{
    "body": "Assignee: @williamstein\n\nKeywords: dokchitser gp\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11134\n\n",
    "created_at": "2011-04-06T07:35:06Z",
    "labels": [
        "component: interfaces",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.1",
    "title": "Add logging for Dokchitser scripts",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10992",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: @williamstein

Keywords: dokchitser gp



Issue created by migration from https://trac.sagemath.org/ticket/11134





---

archive/issue_comments_119128.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-04-06T07:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119128",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_119129.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-04-11T20:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119129",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_119130.json:
```json
{
    "body": "Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.\n\nWould it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?\n\nJohn",
    "created_at": "2011-04-11T20:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119130",
    "user": "https://github.com/JohnCremona"
}
```

Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.

Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?

John



---

archive/issue_comments_119131.json:
```json
{
    "body": "Replying to [comment:2 cremona]:\n> Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.\n\nLet me just point out that `gp` (from PARI/GP) always logs by default (but this might be a bad thing too).",
    "created_at": "2011-04-11T20:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119131",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:2 cremona]:
> Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.

Let me just point out that `gp` (from PARI/GP) always logs by default (but this might be a bad thing too).



---

archive/issue_comments_119132.json:
```json
{
    "body": "Replying to [comment:2 cremona]:\n> Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?\n\nNot sure, because the Dokchitser stuff is often initialized indirectly.\n\nI could live with the following:\n\n```\nlogfile = None\n# For debugging\n#logfile = os.path.join(DOT_SAGE, 'dokchitser.log')\ng = sage.interfaces.gp.Gp(script_subdirectory='dokchitser', logfile=logfile)\n```\n",
    "created_at": "2011-04-11T20:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119132",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:2 cremona]:
> Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?

Not sure, because the Dokchitser stuff is often initialized indirectly.

I could live with the following:

```
logfile = None
# For debugging
#logfile = os.path.join(DOT_SAGE, 'dokchitser.log')
g = sage.interfaces.gp.Gp(script_subdirectory='dokchitser', logfile=logfile)
```




---

archive/issue_comments_119133.json:
```json
{
    "body": "I had not noticed that gp always produces a logfile!  I would vote to remove that and make it optional.\n\nI prefer your \"debugging\" option.  This may well need revisiting after we have put in the new-style Dokchitser interface as worked on by Henri Cohen and me and Martin Raum recently -- I ost track of where that got to.",
    "created_at": "2011-04-11T20:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119133",
    "user": "https://github.com/JohnCremona"
}
```

I had not noticed that gp always produces a logfile!  I would vote to remove that and make it optional.

I prefer your "debugging" option.  This may well need revisiting after we have put in the new-style Dokchitser interface as worked on by Henri Cohen and me and Martin Raum recently -- I ost track of where that got to.



---

archive/issue_comments_119134.json:
```json
{
    "body": "The best solution would be to have some kind of global \"logging\" option, similar to the \"proof\" option that we have currently in Sage.  However, this is certainly a more complex solution and not high on my priority list.",
    "created_at": "2011-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119134",
    "user": "https://github.com/jdemeyer"
}
```

The best solution would be to have some kind of global "logging" option, similar to the "proof" option that we have currently in Sage.  However, this is certainly a more complex solution and not high on my priority list.



---

archive/issue_comments_119135.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2011-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119135",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_119136.json:
```json
{
    "body": "Attachment [11134_dokchitser.patch](tarball://root/attachments/some-uuid/ticket11134/11134_dokchitser.patch) by @jdemeyer created at 2011-04-14 18:51:33",
    "created_at": "2011-04-14T18:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119136",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [11134_dokchitser.patch](tarball://root/attachments/some-uuid/ticket11134/11134_dokchitser.patch) by @jdemeyer created at 2011-04-14 18:51:33



---

archive/issue_comments_119137.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-04-14T18:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119137",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_119138.json:
```json
{
    "body": "Replying to [comment:5 cremona]:\n> I prefer your \"debugging\" option.\nDone.  I chose the simplest solution for this ticket, but you are right that there is work to be done concerning logging (but not on this ticket).",
    "created_at": "2011-04-14T18:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119138",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:5 cremona]:
> I prefer your "debugging" option.
Done.  I chose the simplest solution for this ticket, but you are right that there is work to be done concerning logging (but not on this ticket).



---

archive/issue_comments_119139.json:
```json
{
    "body": "Looks fine, testing now...",
    "created_at": "2011-04-15T15:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119139",
    "user": "https://github.com/JohnCremona"
}
```

Looks fine, testing now...



---

archive/issue_comments_119140.json:
```json
{
    "body": "Replying to [comment:8 cremona]:\n> Looks fine, testing now...\n... and all passed.",
    "created_at": "2011-04-15T16:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119140",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:8 cremona]:
> Looks fine, testing now...
... and all passed.



---

archive/issue_comments_119141.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-04-15T16:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119141",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_119142.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-20T12:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10992#issuecomment-119142",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_011101.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T12:51:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10992",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10992#event-11101"
}
```
