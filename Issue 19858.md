# Issue 19858: Report broken links in the doc of graphs/

Issue created by migration from https://trac.sagemath.org/ticket/20095

Original creator: ncohen

Original creation time: 2016-02-22 12:10:34

CC:  jmantysalo kcrisman jhpalmieri dcoudert vdelecroix

With this branch, no new broken link can appear in the documentation of the graph/ files. All currently broken links are also fixed.

Nathann


---

Comment by ncohen created at 2016-02-22 12:11:03

Changing status from new to needs_review.


---

Comment by ncohen created at 2016-02-22 12:11:03

New commits:


---

Comment by git created at 2016-02-22 12:15:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-02-22 12:34:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2016-02-22 14:36:48

Hmmm...`make doc-clean doc' gives

```
[graphs   ] writing output... [  3%] sage/combinat/designs/incidence_structures
[graphs   ] Exception occurred:
[graphs   ] File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/environment.py", line 1408, in _warn_missing_reference
[graphs   ] if domain.name == 'std' and (typ, target) in self._nitpick_ignore:
[graphs   ] AttributeError: 'NoneType' object has no attribute 'name'
[graphs   ] The full traceback has been saved in /tmp/sphinx-err-Jb11SJ.log, if you want to report the issue to the developers.
[graphs   ] Please also report this if it was a user error, so that a better error message can be provided next time.
[graphs   ] A bug report can be filed in the tracker at <https://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!
```

Details:

```
Traceback (most recent call last):
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/cmdline.py", line 254, in main
    app.build(force_all, filenames)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/application.py", line 212, in build
    self.builder.build_update()
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/builders/__init__.py", line 214, in build_update
    'out of date' % len(to_build))
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/builders/__init__.py", line 276, in build
    self.write(docnames, list(updated_docnames), method)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/builders/__init__.py", line 320, in write
    self._write_serial(sorted(docnames), warnings)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/builders/__init__.py", line 331, in _write_serial
    doctree = self.env.get_and_resolve_doctree(docname, self)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/environment.py", line 1116, in get_and_resolve_doctree
    self.resolve_references(doctree, docname, builder)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/environment.py", line 1388, in resolve_references
    fromdocname, typ, target, node, domain)
  File "/local/dakrenn/sage/7.1.beta4/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/environment.py", line 1408, in _warn_missing_reference
    if domain.name == 'std' and (typ, target) in self._nitpick_ignore:
AttributeError: 'NoneType' object has no attribute 'name'
```



---

Comment by ncohen created at 2016-02-22 14:51:06

Hmmmm... I had this message at some point and then is disappeared while I was working on the branch. Weird.


---

Comment by ncohen created at 2016-02-22 14:53:37

Seems reported and fixed in sphinx: https://github.com/sphinx-doc/sphinx/issues/1673


---

Comment by ncohen created at 2016-02-22 15:05:06

Sigh... Looks like the right way to go is to upgrade Sphinx (our version is ancient) as it is fixed in the latest version. Funny how I expect to end up with 999 others bugs to solve by trying that.


---

Comment by ncohen created at 2016-02-22 16:08:44

Almost found a way out. Except that Sphinx now complains that all links outside of graph/ are broken. I don't remember if there is a 'first phase' in Sphinx compilation, during which this nitpicky mode should be disabled... What a waste of time. 1 hour....


---

Comment by ncohen created at 2016-02-22 16:36:52

1 hour and a half. Seems impossible because of our `f******` 2-pass doc building hack.


---

Comment by ncohen created at 2016-02-22 16:42:28

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2016-02-22 16:42:28

Okay, let it go to hell. I'm sick and tired of trying to figure out other people's hacks.

Nathann


---

Comment by git created at 2016-02-22 16:43:31

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2016-02-22 16:43:31

Changing status from positive_review to needs_review.


---

Comment by jmantysalo created at 2016-02-22 18:28:53

I don't understand. If there are bugs in Sphinx and you made a code that would work without those bugs, shouldn't this be put on wishlist-queue to wait for Sphinx?


---

Comment by ncohen created at 2016-02-22 18:36:45

Jori: I don't care anymore. Do whatever you want with this ticket.


---

Comment by jmantysalo created at 2016-02-22 18:57:38

Replying to [comment:13 ncohen]:
> Jori: I don't care anymore. Do whatever you want with this ticket.

Take a break? Decide that you don't touch Sage development until 2016-03-22.


---

Comment by jmantysalo created at 2016-04-23 12:55:29

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-04-23 12:55:29

Something should be done to automatically forbid broken links, or at least to found them easily.

However, I suggest that in this patch we correct those in graphs-directory, and talk more general question at sage-devel. I did that modification.

But I am now compiling and testing, so this is not ready for review yet.
----
New commits:


---

Comment by jmantysalo created at 2016-04-23 12:55:29

Changing component from graph theory to documentation.


---

Comment by jmantysalo created at 2016-04-23 16:52:51

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-04-23 16:52:51

Tests passed.


---

Comment by dcoudert created at 2016-04-25 11:10:38

I fully agree with what you did.
For me the patch is good to go (passes tests, fix broken links, etc.).
David.


---

Comment by dcoudert created at 2016-04-25 11:10:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-04-26 12:58:45

Resolution: fixed
