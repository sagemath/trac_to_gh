# Issue 20966: basic element and parent for k-regular sequences

archive/issues_020966.json:
```json
{
    "body": "CC:  @rwst @galipnik\n\nImplement minimal element and parent classes for working with k-regular sequences\n\nSee also Meta ticket #21202.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21203\n\n",
    "created_at": "2016-08-10T13:11:00Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "basic element and parent for k-regular sequences",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20966",
    "user": "@dkrenn"
}
```
CC:  @rwst @galipnik

Implement minimal element and parent classes for working with k-regular sequences

See also Meta ticket #21202.

Issue created by migration from https://trac.sagemath.org/ticket/21203





---

archive/issue_comments_290034.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-08-10T13:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290034",
    "user": "@dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_290035.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-11T06:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290035",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-08-18T15:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290036",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_290037.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-08-19T12:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290037",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_290038.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-19T12:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290038",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290039.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-19T12:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290039",
    "user": "@dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_290040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-22T12:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290040",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290041.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-22T15:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290041",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-08-23T18:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_290043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-25T11:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290043",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290044.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-25T11:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290044",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290045.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-25T11:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290045",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290046",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290048.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290048",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290049.json:
```json
{
    "body": "python3 patchbot plugin failure",
    "created_at": "2017-01-05T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290049",
    "user": "@cheuberg"
}
```

python3 patchbot plugin failure



---

archive/issue_comments_290050.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-24T13:05:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290050",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290051.json:
```json
{
    "body": "Replying to [comment:18 cheuberg]:\n> python3 patchbot plugin failure\n\nShould be fixed. Branch is now on 7.5.",
    "created_at": "2017-01-24T13:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290051",
    "user": "@dkrenn"
}
```

Replying to [comment:18 cheuberg]:
> python3 patchbot plugin failure

Should be fixed. Branch is now on 7.5.



---

archive/issue_comments_290052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-24T13:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290053.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-24T13:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290053",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T07:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290054",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290055.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-29T08:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290055",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290056.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-02-10T11:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290056",
    "user": "@cheuberg"
}
```

New commits:



---

archive/issue_comments_290057.json:
```json
{
    "body": "1. Example Binary sum of digits: It would be helpful to explain why this is a linear representation of the binary sum of digits. (However: why not choosing a simpler representation having the sum of digits and a constant sequence in the vector? Here, the first component is one minus the sum of digits)\n\n2. Example Number of odd entries in Pascal's triangle: u(n) seems to be the number of odd entries up to row n-1. This could be made more explicit and the linear representation as well as the recursive formula could be explained, possibly with a reference.\n\n3. `kRegularSequence`: please add an explanation on how to access elements of the sequence to the documentation of the class (it is now in the documentation of the module, but without explanation, and the docstrings of `__getitem__` and `__iter__` are not shown in the documentation.\n\n4. `kRegularSequenceSpace`: I think that to the casual user, the use of the word \"coefficient\" might be surprising.\n\n5. `_n_to_index_`: I would prefer a `ValueError` with meaningful message instead of an `OverflowError`.",
    "created_at": "2021-02-10T11:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290057",
    "user": "@cheuberg"
}
```

1. Example Binary sum of digits: It would be helpful to explain why this is a linear representation of the binary sum of digits. (However: why not choosing a simpler representation having the sum of digits and a constant sequence in the vector? Here, the first component is one minus the sum of digits)

2. Example Number of odd entries in Pascal's triangle: u(n) seems to be the number of odd entries up to row n-1. This could be made more explicit and the linear representation as well as the recursive formula could be explained, possibly with a reference.

3. `kRegularSequence`: please add an explanation on how to access elements of the sequence to the documentation of the class (it is now in the documentation of the module, but without explanation, and the docstrings of `__getitem__` and `__iter__` are not shown in the documentation.

4. `kRegularSequenceSpace`: I think that to the casual user, the use of the word "coefficient" might be surprising.

5. `_n_to_index_`: I would prefer a `ValueError` with meaningful message instead of an `OverflowError`.



---

archive/issue_comments_290058.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-04-19T08:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290058",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290059.json:
```json
{
    "body": "6. Please move reference AS2003 to src/doc/en/reference/references/index.rst as per the developer's guide \u200bhttps://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content \n\n7. The examples in the developer's guide do not have a closing punctuation for INPUT and OUTPUT items",
    "created_at": "2021-04-19T08:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290059",
    "user": "@cheuberg"
}
```

6. Please move reference AS2003 to src/doc/en/reference/references/index.rst as per the developer's guide ​https://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content 

7. The examples in the developer's guide do not have a closing punctuation for INPUT and OUTPUT items



---

archive/issue_comments_290060.json:
```json
{
    "body": "8. One more very minor detail: docstring of `__getitem__`: Apparently ``n`th` is not recognised correctly: there is an error message \"docstring of `sage.combinat.k_regular_sequence.kRegularSequence.__getitem__`:1: WARNING: Inline interpreted text or phrase reference start-string without end-string.\" when running `./sage --docbuild --underscore reference/combinat html`, and no LaTeX formatting occurs.",
    "created_at": "2021-04-19T08:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290060",
    "user": "@cheuberg"
}
```

8. One more very minor detail: docstring of `__getitem__`: Apparently ``n`th` is not recognised correctly: there is an error message "docstring of `sage.combinat.k_regular_sequence.kRegularSequence.__getitem__`:1: WARNING: Inline interpreted text or phrase reference start-string without end-string." when running `./sage --docbuild --underscore reference/combinat html`, and no LaTeX formatting occurs.



---

archive/issue_comments_290061.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-29T11:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290061",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290062.json:
```json
{
    "body": "I pushed a clean merge of #21295 in order to have a base for #27940.",
    "created_at": "2021-04-29T11:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290062",
    "user": "@cheuberg"
}
```

I pushed a clean merge of #21295 in order to have a base for #27940.



---

archive/issue_comments_290063.json:
```json
{
    "body": "Started working on this ticket again. Merge in the dependency #21295 and adapted the code.\n\nReplying to [comment:27 cheuberg]:\n> 6. Please move reference AS2003 to src/doc/en/reference/references/index.rst as per the developer's guide \u200bhttps://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content \n\nDone.\n\n> 7. The examples in the developer's guide do not have a closing punctuation for INPUT and OUTPUT items\n\nDone.\n----\nLast 10 new commits:",
    "created_at": "2021-05-06T08:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290063",
    "user": "@dkrenn"
}
```

Started working on this ticket again. Merge in the dependency #21295 and adapted the code.

Replying to [comment:27 cheuberg]:
> 6. Please move reference AS2003 to src/doc/en/reference/references/index.rst as per the developer's guide ​https://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content 

Done.

> 7. The examples in the developer's guide do not have a closing punctuation for INPUT and OUTPUT items

Done.
----
Last 10 new commits:



---

archive/issue_comments_290064.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-06T17:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290064",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290065.json:
```json
{
    "body": "Replying to [comment:28 cheuberg]:\n> 8. One more very minor detail: docstring of `__getitem__`: Apparently ``n`th` is not recognised correctly: there is an error message \"docstring of `sage.combinat.k_regular_sequence.kRegularSequence.__getitem__`:1: WARNING: Inline interpreted text or phrase reference start-string without end-string.\" when running `./sage --docbuild --underscore reference/combinat html`, and no LaTeX formatting occurs. \n\nFixed",
    "created_at": "2021-05-06T17:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290065",
    "user": "@dkrenn"
}
```

Replying to [comment:28 cheuberg]:
> 8. One more very minor detail: docstring of `__getitem__`: Apparently ``n`th` is not recognised correctly: there is an error message "docstring of `sage.combinat.k_regular_sequence.kRegularSequence.__getitem__`:1: WARNING: Inline interpreted text or phrase reference start-string without end-string." when running `./sage --docbuild --underscore reference/combinat html`, and no LaTeX formatting occurs. 

Fixed



---

archive/issue_comments_290066.json:
```json
{
    "body": "Replying to [comment:26 cheuberg]:\n> 1. Example Binary sum of digits: It would be helpful to explain why this is a linear representation of the binary sum of digits. (However: why not choosing a simpler representation having the sum of digits and a constant sequence in the vector? Here, the first component is one minus the sum of digits)\n\nExample changed (easier representation used) and more explanations.\n\n> 2. Example Number of odd entries in Pascal's triangle: u(n) seems to be the number of odd entries up to row n-1. This could be made more explicit and the linear representation as well as the recursive formula could be explained, possibly with a reference.\n\nLinear representation changed and some text added. For sure more could always be made...\n\n> 3. `kRegularSequence`: please add an explanation on how to access elements of the sequence to the documentation of the class (it is now in the documentation of the module, but without explanation, and the docstrings of `__getitem__` and `__iter__` are not shown in the documentation.\n\nExample added.\n\n> 4. `kRegularSequenceSpace`: I think that to the casual user, the use of the word \"coefficient\" might be surprising.\n\nYes, indeed. Naming is not that easy here. Everything with \"base\" seems to be no option was we have \"k\" that is called base as well. I now give \"coefficient_ring\" a try (also changed at at #21295), but I am very open to other, better suggestions.\n\n> 5. `_n_to_index_`: I would prefer a `ValueError` with meaningful message instead of an `OverflowError`.\n\nChanged.",
    "created_at": "2021-05-06T17:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290066",
    "user": "@dkrenn"
}
```

Replying to [comment:26 cheuberg]:
> 1. Example Binary sum of digits: It would be helpful to explain why this is a linear representation of the binary sum of digits. (However: why not choosing a simpler representation having the sum of digits and a constant sequence in the vector? Here, the first component is one minus the sum of digits)

Example changed (easier representation used) and more explanations.

> 2. Example Number of odd entries in Pascal's triangle: u(n) seems to be the number of odd entries up to row n-1. This could be made more explicit and the linear representation as well as the recursive formula could be explained, possibly with a reference.

Linear representation changed and some text added. For sure more could always be made...

> 3. `kRegularSequence`: please add an explanation on how to access elements of the sequence to the documentation of the class (it is now in the documentation of the module, but without explanation, and the docstrings of `__getitem__` and `__iter__` are not shown in the documentation.

Example added.

> 4. `kRegularSequenceSpace`: I think that to the casual user, the use of the word "coefficient" might be surprising.

Yes, indeed. Naming is not that easy here. Everything with "base" seems to be no option was we have "k" that is called base as well. I now give "coefficient_ring" a try (also changed at at #21295), but I am very open to other, better suggestions.

> 5. `_n_to_index_`: I would prefer a `ValueError` with meaningful message instead of an `OverflowError`.

Changed.



---

archive/issue_comments_290067.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-06T17:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290067",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290068.json:
```json
{
    "body": "Thank you for your changes.\n\nI have one question and another minor suggestion.\n\n9. What was the motivation to remove \"If not specified (`None`), then the integer ring is used.\" ?\n\n10. I suggest to use `raise ... from None` where appropriate (e.g., the `OverflowError` caught in `_n_to_index_`) to avoid lengthy stack traces like\n\n```\n...\n/local/cheuberg/local/sage-9.3.rc3/local/lib/python3.6/site-packages/sage/combinat/words/word_char.pyx in sage.combinat.words.word_char.WordDatatype_char._set_data (build/cythonized/sage/combinat/words/word_char.c:3830)()\n    110         for i in range(self._length):\n--> 111             self._data[i] = data[i]\n    112 \n\nOverflowError: can't convert negative value to unsigned char\n\nDuring handling of the above exception, another exception occurred:\n\nValueError                                Traceback (most recent call last)\n<ipython-input-1-b7387a9417cd> in <module>\n      2 Seq2._n_to_index_(Integer(6))\n      3 word: Integer(11)\n----> 4 Seq2._n_to_index_(-Integer(1))\n\n/local/cheuberg/local/sage-9.3.rc3/local/lib/python3.6/site-packages/sage/combinat/k_regular_sequence.py in _n_to_index_(self, n)\n    353             return W(n.digits(self.k))\n    354         except OverflowError:\n--> 355             raise ValueError('value {} of index is negative'.format(n))\n\nValueError: value -1 of index is negative\n```\n",
    "created_at": "2021-05-06T19:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290068",
    "user": "@cheuberg"
}
```

Thank you for your changes.

I have one question and another minor suggestion.

9. What was the motivation to remove "If not specified (`None`), then the integer ring is used." ?

10. I suggest to use `raise ... from None` where appropriate (e.g., the `OverflowError` caught in `_n_to_index_`) to avoid lengthy stack traces like

```
...
/local/cheuberg/local/sage-9.3.rc3/local/lib/python3.6/site-packages/sage/combinat/words/word_char.pyx in sage.combinat.words.word_char.WordDatatype_char._set_data (build/cythonized/sage/combinat/words/word_char.c:3830)()
    110         for i in range(self._length):
--> 111             self._data[i] = data[i]
    112 

OverflowError: can't convert negative value to unsigned char

During handling of the above exception, another exception occurred:

ValueError                                Traceback (most recent call last)
<ipython-input-1-b7387a9417cd> in <module>
      2 Seq2._n_to_index_(Integer(6))
      3 word: Integer(11)
----> 4 Seq2._n_to_index_(-Integer(1))

/local/cheuberg/local/sage-9.3.rc3/local/lib/python3.6/site-packages/sage/combinat/k_regular_sequence.py in _n_to_index_(self, n)
    353             return W(n.digits(self.k))
    354         except OverflowError:
--> 355             raise ValueError('value {} of index is negative'.format(n))

ValueError: value -1 of index is negative
```




---

archive/issue_comments_290069.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-05-06T19:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290069",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290070.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-10T11:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290070",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290071.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T13:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290071",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290072.json:
```json
{
    "body": "Replying to [comment:38 cheuberg]:\n> Thank you for your changes.\n> 9. What was the motivation to remove \"If not specified (`None`), then the integer ring is used.\" ?\n\nI believe that there is no obvious/canonical base ring for regular sequences, so I think, there should not be set a somehow artificial choice. (BTW, never used in the the tests, except for one specific test on this default argument.)\n\n> 10. I suggest to use `raise ... from None` where appropriate (e.g., the `OverflowError` caught in `_n_to_index_`) to avoid lengthy stack traces like [...]\n\nYes, indeed, this output is quite lengthy and does not bring anything. Done.",
    "created_at": "2021-05-11T13:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290072",
    "user": "@dkrenn"
}
```

Replying to [comment:38 cheuberg]:
> Thank you for your changes.
> 9. What was the motivation to remove "If not specified (`None`), then the integer ring is used." ?

I believe that there is no obvious/canonical base ring for regular sequences, so I think, there should not be set a somehow artificial choice. (BTW, never used in the the tests, except for one specific test on this default argument.)

> 10. I suggest to use `raise ... from None` where appropriate (e.g., the `OverflowError` caught in `_n_to_index_`) to avoid lengthy stack traces like [...]

Yes, indeed, this output is quite lengthy and does not bring anything. Done.



---

archive/issue_comments_290073.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-11T13:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290073",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290074.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-11T18:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290074",
    "user": "@cheuberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290075.json:
```json
{
    "body": "Thank you, all seems to be fine. For the record: the lint warnings do not concern the files changed in this ticket.",
    "created_at": "2021-05-11T18:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290075",
    "user": "@cheuberg"
}
```

Thank you, all seems to be fine. For the record: the lint warnings do not concern the files changed in this ticket.



---

archive/issue_comments_290076.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-06T13:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20966#issuecomment-290076",
    "user": "@vbraun"
}
```

Resolution: fixed
