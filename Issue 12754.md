# Issue 12754: `sage -ipython` doesn't use the sage directory for ipython.

Issue created by migration from Trac.

Original creator: itaibn

Original creation time: 2012-05-08 21:25:17

Assignee: itaibn

Keywords: ipython

The command `sage -ipython` uses `~/.ipython` as it's configurations directory. This is probably not the intended behaviour, since programs installed through `sage` are not supposed to interfere with installed independently. In fact, if one installs the latest version of `ipython` and runs `sage ipython` it returns the following error message:

```
WARNING: Configuration file ipythonrc not found. Ignoring request.
------------------------------------------------------------
Traceback (most recent call last):
  File "/home/itaibn/sage-5.0.beta7/local/lib/python2.7/site-packages/IPython/ConfigLoader.py", line 66, in load
    fname = filefind(fname,incpath)
  File "/home/itaibn/sage-5.0.beta7/local/lib/python2.7/site-packages/IPython/genutils.py", line 554, in filefind
    ' not found in current or supplied directories:' + `alt_dirs`
IOError: File'ipythonrc' not found in current or supplied directories:u'/home/itaibn/.ipython'

WARNING: Problems loading configuration file 'ipythonrc'
Starting with default -bare bones- configuration.
```


And then then continues with `ipython` in what is presumably the `-bare bones-` configuration.


---

Comment by jhpalmieri created at 2012-05-08 22:33:56

This is probably a duplicate of #12911.


---

Attachment


---

Comment by itaibn created at 2012-05-08 22:42:15

Replying to [comment:1 jhpalmieri]:
> This is probably a duplicate of #12911.
It seems similar, but I'm not sure. That ticket looks like it is about running something internal in `sage` rather the command-line interface, but it does seem similar.


---

Comment by jhpalmieri created at 2012-05-09 20:04:18

Maybe it's not a duplicate. Unfortunately, the "obvious" patch

```diff
diff --git a/spkg/bin/sage-env b/spkg/bin/sage-env
--- a/spkg/bin/sage-env
+++ b/spkg/bin/sage-env
`@``@` -298,6 +298,8 `@``@` if [ "$SAGE_STARTUP_FILE" = "" ]; then
     export SAGE_STARTUP_FILE
 fi
 
+IPYTHONDIR="$DOT_SAGE/ipython" && export IPYTHONDIR
+
 if [ -d "$SAGE_ROOT/local/lib/python" ]; then
     PYTHONPATH="$SAGE_ROOT/local/lib/python"
     if [ -n "$SAGE_PATH" ]; then
```

doesn't work: then `sage --ipython` has "sage: " as a prompt. I think that someone needs to improve how we deal with the IPython config files. See also #12167.


---

Comment by jdemeyer created at 2013-01-25 09:07:02

Fixed by #12719.


---

Comment by jdemeyer created at 2013-01-25 09:07:02

Resolution: duplicate
