# Issue 30420: Fix up "sage -p"

archive/issues_030420.json:
```json
{
    "body": "CC:  @jhpalmieri @orlitzky\n\n\n```\n$ ./sage -p sagetex\nFound local metadata for sagetex-3.5\nUsing cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz\nmkdir: : No such file or directory\n************************************************************************\nError creating directory \n************************************************************************\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30657\n\n",
    "created_at": "2020-09-24T21:51:59Z",
    "labels": [
        "build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fix up \"sage -p\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30420",
    "user": "@mkoeppe"
}
```
CC:  @jhpalmieri @orlitzky


```
$ ./sage -p sagetex
Found local metadata for sagetex-3.5
Using cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz
mkdir: : No such file or directory
************************************************************************
Error creating directory 
************************************************************************
```



Issue created by migration from https://trac.sagemath.org/ticket/30657





---

archive/issue_comments_433937.json:
```json
{
    "body": "Branch is on top of #29500 because it touches the same code\n----\nLast 10 new commits:",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433937",
    "user": "@mkoeppe"
}
```

Branch is on top of #29500 because it touches the same code
----
Last 10 new commits:



---

archive/issue_comments_433938.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433938",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433939.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433939",
    "user": "@orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433940.json:
```json
{
    "body": "Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them \"up\" out of `build/make/install` where they are not used directly.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433940",
    "user": "@orlitzky"
}
```

Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them "up" out of `build/make/install` where they are not used directly.



---

archive/issue_comments_433941.json:
```json
{
    "body": "Thanks.",
    "created_at": "2020-09-25T14:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433941",
    "user": "@mkoeppe"
}
```

Thanks.



---

archive/issue_comments_433942.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433942",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_433943.json:
```json
{
    "body": "Fails while building `sage_conf-none` for me... do incremental builds work?",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433943",
    "user": "@vbraun"
}
```

Fails while building `sage_conf-none` for me... do incremental builds work?



---

archive/issue_comments_433944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-02T02:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433944",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433945.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-10-02T02:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433945",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_433946.json:
```json
{
    "body": "The new commit is reverted on the #29386 branch, but looks good for now.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433946",
    "user": "@orlitzky"
}
```

The new commit is reverted on the #29386 branch, but looks good for now.



---

archive/issue_comments_433947.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433947",
    "user": "@orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433948.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-10-02T18:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433948",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_433949.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-05T20:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433949",
    "user": "@vbraun"
}
```

Resolution: fixed
