# Issue 30420: Fix up "sage -p"

Issue created by migration from https://trac.sagemath.org/ticket/30657

Original creator: mkoeppe

Original creation time: 2020-09-24 21:51:59

CC:  jhpalmieri mjo


```
$ ./sage -p sagetex
Found local metadata for sagetex-3.5
Using cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz
mkdir: : No such file or directory
************************************************************************
Error creating directory 
************************************************************************
```




---

Comment by mkoeppe created at 2020-09-24 22:05:36

Branch is on top of #29500 because it touches the same code
----
Last 10 new commits:


---

Comment by mkoeppe created at 2020-09-24 22:05:36

Changing status from new to needs_review.


---

Comment by mjo created at 2020-09-25 13:40:51

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2020-09-25 13:40:51

Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them "up" out of `build/make/install` where they are not used directly.


---

Comment by mkoeppe created at 2020-09-25 14:39:21

Thanks.


---

Comment by vbraun created at 2020-10-01 23:16:13

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2020-10-01 23:16:13

Fails while building `sage_conf-none` for me... do incremental builds work?


---

Comment by git created at 2020-10-02 02:05:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-10-02 02:06:15

Changing status from needs_work to needs_review.


---

Comment by mjo created at 2020-10-02 13:11:07

The new commit is reverted on the #29386 branch, but looks good for now.


---

Comment by mjo created at 2020-10-02 13:11:07

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-10-02 18:08:20

Thanks!


---

Comment by vbraun created at 2020-10-05 20:13:29

Resolution: fixed
