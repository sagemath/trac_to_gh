# Issue 30420: Fix up "sage -p"

archive/issues_030420.json:
```json
{
    "body": "CC:  @jhpalmieri @orlitzky\n\n\n```\n$ ./sage -p sagetex\nFound local metadata for sagetex-3.5\nUsing cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz\nmkdir: : No such file or directory\n************************************************************************\nError creating directory \n************************************************************************\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30657\n\n",
    "created_at": "2020-09-24T21:51:59Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fix up \"sage -p\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30420",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jhpalmieri @orlitzky


```
$ ./sage -p sagetex
Found local metadata for sagetex-3.5
Using cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz
mkdir: : No such file or directory
************************************************************************
Error creating directory 
************************************************************************
```



Issue created by migration from https://trac.sagemath.org/ticket/30657





---

archive/issue_comments_433444.json:
```json
{
    "body": "Branch is on top of #29500 because it touches the same code\n----\nLast 10 new commits:",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433444",
    "user": "https://github.com/mkoeppe"
}
```

Branch is on top of #29500 because it touches the same code
----
Last 10 new commits:



---

archive/issue_comments_433445.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433445",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433446.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433446",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433447.json:
```json
{
    "body": "Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them \"up\" out of `build/make/install` where they are not used directly.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433447",
    "user": "https://github.com/orlitzky"
}
```

Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them "up" out of `build/make/install` where they are not used directly.



---

archive/issue_comments_433448.json:
```json
{
    "body": "Thanks.",
    "created_at": "2020-09-25T14:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433448",
    "user": "https://github.com/mkoeppe"
}
```

Thanks.



---

archive/issue_comments_433449.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433449",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_433450.json:
```json
{
    "body": "Fails while building `sage_conf-none` for me... do incremental builds work?",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433450",
    "user": "https://github.com/vbraun"
}
```

Fails while building `sage_conf-none` for me... do incremental builds work?



---

archive/issue_comments_433451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-02T02:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433452.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-10-02T02:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433452",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_433453.json:
```json
{
    "body": "The new commit is reverted on the #29386 branch, but looks good for now.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433453",
    "user": "https://github.com/orlitzky"
}
```

The new commit is reverted on the #29386 branch, but looks good for now.



---

archive/issue_comments_433454.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433454",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433455.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-10-02T18:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433455",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_433456.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-05T20:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30420#issuecomment-433456",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
