# Issue 19470: Use proper ./configure option for choosing MPIR/GMP

Issue created by migration from https://trac.sagemath.org/ticket/19707

Original creator: jdemeyer

Original creation time: 2015-12-15 08:59:16

CC:  jpflori mmezzarobba

Setting `SAGE_MP_LIBRARY` is broken.

But really, we should not use environment variables and certainly not magic files (`local/share/mp_config`) for this.


---

Comment by jdemeyer created at 2016-01-29 21:52:12

`@`jpflori: are you sure that we want to support installing both GMP and MPIR at the same time? I am referring to this comment:

```sh
# Don't install GMP compat headers and symlinks if MPIR is not the default MP
# library.
if [ `cat "$SAGE_LOCAL/share/mp_config"` = "MPIR" ]; then
    MPIR_CONFIGURE="--enable-gmpcompat $MPIR_CONFIGURE"
fi
```


In my opinion, it is too difficult to get right, so I wouldn't want to support this.


---

Comment by git created at 2016-01-29 22:01:26

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-01-29 22:03:09

Changing status from new to needs_review.


---

Comment by jpflori created at 2016-02-02 10:24:54

I agree with jeroen, let's not support MPIR/GMP at the same time.


---

Comment by vbraun created at 2016-02-22 20:31:19

It would be nice if `--with-mp=host` would use the host gmp/mpir installation. On a separate ticket, of course.


---

Comment by vbraun created at 2016-02-22 20:31:19

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2016-02-22 20:34:16

Replying to [comment:7 vbraun]:
> It would be nice if `--with-mp=host` would use the host gmp/mpir installation. On a separate ticket, of course.

That's a nice goal, but the recent versions of GMP are not 100% supported in Sage at the moment.


---

Comment by vbraun created at 2016-02-22 22:08:19

Even if it doesn't work it would be useful to test other versions of gmp...


---

Comment by vbraun created at 2016-02-23 08:26:15

Resolution: fixed
