# Issue 32184: spkg-configure for symengine

Issue created by migration from https://trac.sagemath.org/ticket/32421

Original creator: dimpase

Original creation time: 2021-08-25 18:04:05

CC:  mjo mkoeppe isuruf slelievre

symengine does not seem to have pkg-configure interface, so we need to test something


---

Comment by mkoeppe created at 2021-08-27 23:22:58

Note that the Python wrapper `symengine.py` uses CMake to find the library (via the CMake metadata installed in `local/lib/cmake/symengine`) - so that's what `spkg-configure.m4` should use too. Of course, this assumes that system `cmake` is available; but I think it's fine to only use system `symengine` when also system `cmake` is present.


---

Comment by dimpase created at 2021-08-29 09:05:08

Replying to [comment:3 mkoeppe]:
> Note that the Python wrapper `symengine.py` uses CMake to find the library (via the CMake metadata installed in `local/lib/cmake/symengine`) - so that's what `spkg-configure.m4` should use too. 


This requires writing cmake config script, i.e. `CMakeLists.txt`, as far as I can see.
Integrating this into `spkg-configure.m4` is above my pay grade...


---

Comment by isuruf created at 2021-08-29 18:05:33

See https://github.com/symengine/symengine/wiki/Using-SymEngine-from-a-Cpp-project#non-cmake-projects


---

Comment by dimpase created at 2021-08-29 19:25:07

Replying to [comment:5 isuruf]:
> See https://github.com/symengine/symengine/wiki/Using-SymEngine-from-a-Cpp-project#non-cmake-projects

and how about asking for the version?


---

Comment by mjo created at 2021-08-29 20:20:55

If we need a specific feature in newer versions of symengine, we can test for that feature instead of the version. And if nobody knows what features we need... then as a last resort, we can accept any version of symengine, and any consequent bug reports will tell us what we should have checked for.


---

Comment by isuruf created at 2021-08-29 20:29:45

There's a `symengine_version()` C function that you can call to get it.
Or you can use the following program to see if it compiles,

```
#include <symengine/symengine_config.h>
#if (SYMENGINE_MAJOR_VERSION*10000 + SYMENGINE_MINOR_VERSION*100 + SYMENGINE_PATCH_VERSION < 00700)
# error "SymEngine 0.7.0 or newer is required"
error
#endif
```



---

Comment by mkoeppe created at 2021-08-29 20:34:02

Replying to [comment:4 dimpase]:
> Replying to [comment:3 mkoeppe]:
> > Note that the Python wrapper `symengine.py` uses CMake to find the library (via the CMake metadata installed in `local/lib/cmake/symengine`) - so that's what `spkg-configure.m4` should use too. 
> 
> 
> This requires writing cmake config script, i.e. `CMakeLists.txt`, as far as I can see.
> Integrating this into `spkg-configure.m4` is above my pay grade...
> 

Just create a directory `conftest.dir` and generate the file in there
