# Issue 11007: Graphics Array needs suboptions to show

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2011-04-08 19:16:01

Assignee: jason, was

CC:  jason jsrn jhonrubia6 chapoton


```
p1=plot(x^2, (x, -pi, pi), color='blue',legend_label="f") 
G=graphics_array(((p1,p1),(p1,p1))) 
G.show(figsize=[8,8]) 
Traceback (click to the left of this block for traceback) 
... 
KeyError: 'pop(): dictionary is empty' 
```


This is reported at [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/3bcc16c312bc0561/0cf76194c424c4e3?show_docid=0cf76194c424c4e3).

I think the fix should be the same as at #10244, but for the GraphicsArray class.


---

Comment by kcrisman created at 2011-04-08 19:19:24

Hmm, but that doesn't work...  but it must be a similar issue, anyway.


---

Comment by kcrisman created at 2011-04-08 19:22:51

Adding the suboptions we usually send to save to the normal !Graphics class matplotlib removes the error, but does the following - see attached graphic.  I don't have time to do any more with this now, though.


---

Comment by kcrisman created at 2011-04-08 19:23:20

Note the second graph has two legends for the same function!


---

Attachment

Replying to [comment:2 kcrisman]:
> Adding the suboptions we usually send to save to the normal !Graphics class matplotlib removes the error, but does the following - see attached graphic.  I don't have time to do any more with this now, though.

I should add that my code was slightly simpler:

```
sage: p = plot(x,legend_label='f')
sage: G = graphics_array((p,p))
sage: G
```



---

Comment by jsrn created at 2011-04-28 13:40:39

This is a bug which might be related:


```
sage: g = Graphics()
sage: g += plot(x,legend_label='f')
sage: g.set_legend_options(title="Nice")
sage: G = graphics_array((g,g))
sage: G.show()
...
KeyError: 'font_family'
```


It seems that this part of the problem might be completely solved by adding the suboptions usually added when show()'ing a graphics object.


---

Comment by egourgoulhon created at 2019-05-24 12:43:02

The issue described here is fixed in #27865.


---

Comment by egourgoulhon created at 2019-07-08 20:39:30

Since #27865 has been merged in Sage 8.9.beta0, we could close this ticket as duplicate.


---

Comment by egourgoulhon created at 2019-07-08 20:39:30

Changing status from new to needs_review.


---

Comment by jsrn created at 2019-07-08 20:49:00

All the examples listed here work fine in the newest develop, at least.


---

Comment by egourgoulhon created at 2019-07-09 13:10:38

Replying to [comment:11 jsrn]:
> All the examples listed here work fine in the newest develop, at least.
Then maybe you could set this ticket to positive review, given its status is "sage-duplicate/invalid/wontfix" (the positive review is necessary to close it).


---

Comment by kcrisman created at 2019-08-15 15:25:18

Any doctests necessary or are they all included in #27865 as I suspect?


---

Comment by egourgoulhon created at 2019-08-15 20:38:12

Replying to [comment:13 kcrisman]:
> Any doctests necessary or are they all included in #27865 as I suspect?
Yes the doctests relevant to this ticket are included in #27865; in Sage 8.9.beta6, you can find them in lines 3481 - 3499 of `src/sage/plot/plot.py`:

```
        sage: L = [plot(sin(k*x), (x,-pi,pi)) for k in [1..3]]
        sage: ga = graphics_array(L)
        sage: ga.show(figsize=[5,3])  # smallish and compact

        sage: ga.show(figsize=[5,7])  # tall and thin; long time

        sage: ga.show(figsize=4)  # width=4 inches, height fixed from default aspect ratio
```

as well as in lines 555-613 of `src/sage/plot/multigraphics.py`:

```
        sage: g1 = plot(sin(x^2), (x, 0, 6), axes_labels=['$x$', '$y$'],
        ....:           axes=False, frame=True, gridlines='minor')
        sage: y = var('y')
        sage: g2 = streamline_plot((sin(x), cos(y)), (x,-3,3), (y,-3,3),
        ....:                      aspect_ratio=1)
        sage: g3 = graphs.DodecahedralGraph().plot()
        sage: g4 = polar_plot(sin(5*x)^2, (x, 0, 2*pi), color='green',
        ....:                 fontsize=8) \
        ....:      + circle((0,0), 0.5, rgbcolor='red', fill=True, alpha=0.1,
        ....:               legend_label='pink')
        sage: g4.set_legend_options(loc='upper right')

        sage: G = graphics_array([g1, g2, g3, g4])

        sage: G.show(figsize=[8, 3])
```



---

Comment by kcrisman created at 2019-08-15 21:41:05

I only asked because maybe that is why someone hasn't hit positive review.  So I guess jsrn should :-) or actually you could as well, I think.


---

Comment by egourgoulhon created at 2019-08-17 09:16:24

Similarly #10466 and #10657 are set to "duplicate" and are waiting for a positive review to be closed...


---

Comment by chapoton created at 2019-08-24 08:39:02

Resolution: duplicate
