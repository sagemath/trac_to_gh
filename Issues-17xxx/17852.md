# Issue 17852: Cleanup in rings.arith and rings.integer

archive/issues_017615.json:
```json
{
    "assignees": [],
    "body": "In this ticket, we:\n- implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`\n- simplify the import logic in `rings.arith`\n- replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`\n- remove some useless comments in arith\n- deprecate `powermodm_ui`\n- remove 1 from the output of `prime_powers()` (consistent with #16878)\n- remove the method `lcm` from `Rational`\n\nDepends on #16878\n\nBranch/Commit: **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17852_\n\n",
    "closed_at": "2015-04-15T13:58:20Z",
    "created_at": "2015-02-25T13:38:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cleanup in rings.arith and rings.integer",
    "type": "issue",
    "updated_at": "2015-04-15T13:58:20Z",
    "url": "https://github.com/sagemath/sage/issues/17852",
    "user": "https://github.com/videlec"
}
```
In this ticket, we:
- implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`
- simplify the import logic in `rings.arith`
- replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`
- remove some useless comments in arith
- deprecate `powermodm_ui`
- remove 1 from the output of `prime_powers()` (consistent with #16878)
- remove the method `lcm` from `Rational`

Depends on #16878

Branch/Commit: **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**

Reviewer: **Jeroen Demeyer**

Author: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/17852_





---

archive/issue_events_227866.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T13:38:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227866"
}
```



---

archive/issue_events_227867.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T13:38:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227867"
}
```



---

archive/issue_events_227868.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T13:38:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227868"
}
```



---

archive/issue_comments_244096.json:
```json
{
    "body": "Commit: **[613ae23](https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15)**",
    "created_at": "2015-02-25T13:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244096",
    "user": "https://github.com/videlec"
}
```

Commit: **[613ae23](https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15)**



---

archive/issue_events_227869.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T13:39:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227869"
}
```



---

archive/issue_comments_244097.json:
```json
{
    "body": "Branch: **[u/vdelecroix/17852](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17852)**",
    "created_at": "2015-02-25T13:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244097",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/17852](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17852)**



---

archive/issue_comments_244098.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15\">613ae23</a></td><td><code>trac #17852: cleanup arith.py and integer.pyx</code></td></tr></table>\n",
    "created_at": "2015-02-25T13:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244098",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15">613ae23</a></td><td><code>trac #17852: cleanup arith.py and integer.pyx</code></td></tr></table>




---

archive/issue_comments_244099.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nConflicts with #17819",
    "created_at": "2015-02-25T13:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244099",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
Conflicts with #17819



---

archive/issue_comments_244100.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI suggest you revert all changes to `Integer.divisors`",
    "created_at": "2015-02-25T13:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244100",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>Comment 3:</a>
I suggest you revert all changes to `Integer.divisors`



---

archive/issue_comments_244101.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@jdemeyer](#comment%3A3):\n> I suggest you revert all changes to `Integer.divisors`\n\nthere is none...\n\nEDIT: there are... I messed up my develop branch!",
    "created_at": "2015-02-25T13:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244101",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@jdemeyer](#comment%3A3):
> I suggest you revert all changes to `Integer.divisors`

there is none...

EDIT: there are... I messed up my develop branch!



---

archive/issue_comments_244102.json:
```json
{
    "body": "Changed commit from **[613ae23](https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15)** to **[7dcce3a](https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945)**",
    "created_at": "2015-02-25T13:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244102",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[613ae23](https://github.com/sagemath/sagetrac-mirror/commit/613ae23a399c16a03032e78e5483eaf90c42af15)** to **[7dcce3a](https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945)**



---

archive/issue_comments_244103.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945\">7dcce3a</a></td><td><code>trac #17852: cleanup in arith.py and integer.pyx</code></td></tr></table>\n",
    "created_at": "2015-02-25T13:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244103",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945">7dcce3a</a></td><td><code>trac #17852: cleanup in arith.py and integer.pyx</code></td></tr></table>




---

archive/issue_comments_244104.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNo conflicts anymore...",
    "created_at": "2015-02-25T13:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244104",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'>Comment 6:</a>
No conflicts anymore...



---

archive/issue_events_227870.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-25T15:00:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227870"
}
```



---

archive/issue_events_227871.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-25T15:48:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227871"
}
```



---

archive/issue_events_227872.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-25T15:48:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227872"
}
```



---

archive/issue_comments_244105.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI don't like this:\n\n```\ncdef mpz_t g = <mpz_t> mm.value\n```\n\nJust use `mm.value` instead of `g`.",
    "created_at": "2015-02-25T15:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244105",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>Comment 8:</a>
I don't like this:

```
cdef mpz_t g = <mpz_t> mm.value
```

Just use `mm.value` instead of `g`.



---

archive/issue_comments_244106.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\n`isinstance(z, (Rational))` -> `isinstance(z, Rational)`",
    "created_at": "2015-02-25T15:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244106",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
`isinstance(z, (Rational))` -> `isinstance(z, Rational)`



---

archive/issue_comments_244107.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nWhat's the point of `eratosthenes()`, shouldn't that be a `deprecated_function_alias` of `prime_range`?",
    "created_at": "2015-02-25T15:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244107",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
What's the point of `eratosthenes()`, shouldn't that be a `deprecated_function_alias` of `prime_range`?



---

archive/issue_comments_244108.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nRemove this:\n\n```\n    TESTS::\n\n        sage:\n```",
    "created_at": "2015-02-25T15:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244108",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
Remove this:

```
    TESTS::

        sage:
```



---

archive/issue_comments_244109.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nFor `is_squarefree`, add an example where the `.is_squarefree()` method is not used, for example `ZZ[sqrt(-1)]`.",
    "created_at": "2015-02-25T15:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244109",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
For `is_squarefree`, add an example where the `.is_squarefree()` method is not used, for example `ZZ[sqrt(-1)]`.



---

archive/issue_comments_244110.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\n\n```\nif isinstance(x, Integer):\n    return x.binomial(m, **kwds)\n```\nshould be `try`/`except AttributeError`",
    "created_at": "2015-02-25T15:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244110",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>

```
if isinstance(x, Integer):
    return x.binomial(m, **kwds)
```
should be `try`/`except AttributeError`



---

archive/issue_comments_244111.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplace\n\n```\ntry:\n    P = x.parent()\nexcept AttributeError:\n    P = type(x)\nif m < 0:\n    return P(0)\n```\nby\n\n```\nif m < 0:\n    return parent(x)(0)\n```",
    "created_at": "2015-02-25T16:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244111",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Replace

```
try:
    P = x.parent()
except AttributeError:
    P = type(x)
if m < 0:
    return P(0)
```
by

```
if m < 0:
    return parent(x)(0)
```



---

archive/issue_comments_244112.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAnd `powermodm_ui` should be a deprecated alias for `powermod`: what's the point of an optimized path for `unsigned long` in a **Python function**?\n\nThen you can also remove\n\n```\nMAX_UNSIGNED_LONG = 2 * sys.maxsize\n```\n(which is wrong anyway!)",
    "created_at": "2015-02-25T16:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244112",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
And `powermodm_ui` should be a deprecated alias for `powermod`: what's the point of an optimized path for `unsigned long` in a **Python function**?

Then you can also remove

```
MAX_UNSIGNED_LONG = 2 * sys.maxsize
```
(which is wrong anyway!)



---

archive/issue_comments_244113.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\n\n```\nif not self:\n    raise ValueError(\"self must be nonzero\")\n```\nshould be `ArithmeticError` instead.",
    "created_at": "2015-02-25T16:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244113",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>

```
if not self:
    raise ValueError("self must be nonzero")
```
should be `ArithmeticError` instead.



---

archive/issue_comments_244114.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\n\n```\nThe argument ``m`` or (``self-m``) must fits into unsigned long::\n```\n`fits` -> `fit`",
    "created_at": "2015-02-25T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244114",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>

```
The argument ``m`` or (``self-m``) must fits into unsigned long::
```
`fits` -> `fit`



---

archive/issue_comments_244115.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI'm done for now :-)",
    "created_at": "2015-02-25T16:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244115",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
I'm done for now :-)



---

archive/issue_comments_244116.json:
```json
{
    "body": "Changed commit from **[7dcce3a](https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945)** to **[975c2a0](https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548)**",
    "created_at": "2015-02-25T17:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244116",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7dcce3a](https://github.com/sagemath/sagetrac-mirror/commit/7dcce3a9040cbb609bbc00432386c1d1dcbed945)** to **[975c2a0](https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548)**



---

archive/issue_comments_244117.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548\">975c2a0</a></td><td><code>trac #17852: reviewer comments</code></td></tr></table>\n",
    "created_at": "2015-02-25T17:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244117",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548">975c2a0</a></td><td><code>trac #17852: reviewer comments</code></td></tr></table>




---

archive/issue_comments_244118.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@jdemeyer](#comment%3A10):\n> What's the point of `eratosthenes()`, shouldn't that be a `deprecated_function_alias` of `prime_range`?\n\nIt is excplicitely written \"for educational purpose\"... I do not want to deprecate it so roughly.\n\nI agreed with all of the other suggestions and implemented them.\n\nVincent",
    "created_at": "2015-02-25T17:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244118",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@jdemeyer](#comment%3A10):
> What's the point of `eratosthenes()`, shouldn't that be a `deprecated_function_alias` of `prime_range`?

It is excplicitely written "for educational purpose"... I do not want to deprecate it so roughly.

I agreed with all of the other suggestions and implemented them.

Vincent



---

archive/issue_comments_244119.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n - simplify the import logic in `rings.arith`\n - replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`\n - remove some useless comments in arith\n+- deprecate `powermodm_ui`\n``````\n",
    "created_at": "2015-02-25T17:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244119",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 - simplify the import logic in `rings.arith`
 - replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`
 - remove some useless comments in arith
+- deprecate `powermodm_ui`
``````




---

archive/issue_events_227873.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T17:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227873"
}
```



---

archive/issue_events_227874.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-25T17:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227874"
}
```



---

archive/issue_comments_244120.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba\">ad7d25a</a></td><td><code>trac #17852: extra doctest in is_squarefree</code></td></tr></table>\n",
    "created_at": "2015-02-25T18:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244120",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba">ad7d25a</a></td><td><code>trac #17852: extra doctest in is_squarefree</code></td></tr></table>




---

archive/issue_comments_244121.json:
```json
{
    "body": "Changed commit from **[975c2a0](https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548)** to **[ad7d25a](https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba)**",
    "created_at": "2015-02-25T18:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[975c2a0](https://github.com/sagemath/sagetrac-mirror/commit/975c2a0a6563538377eca78590fd16ddf0342548)** to **[ad7d25a](https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba)**



---

archive/issue_events_227875.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-25T20:55:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227875"
}
```



---

archive/issue_events_227876.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-25T20:55:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227876"
}
```



---

archive/issue_comments_244122.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\njust testing... didn't have a problem changing the status.",
    "created_at": "2015-02-25T20:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244122",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'>Comment 23:</a>
just testing... didn't have a problem changing the status.



---

archive/issue_events_227877.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-25T20:56:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227877"
}
```



---

archive/issue_events_227878.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-25T20:56:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227878"
}
```



---

archive/issue_events_227879.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-26T22:01:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227879"
}
```



---

archive/issue_events_227880.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-26T22:01:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227880"
}
```



---

archive/issue_comments_244123.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nNeeds to be rebased on #16878.",
    "created_at": "2015-02-26T22:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244123",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'>Comment 24:</a>
Needs to be rebased on #16878.



---

archive/issue_comments_244124.json:
```json
{
    "body": "Dependencies: **#16878**",
    "created_at": "2015-02-26T22:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244124",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#16878**



---

archive/issue_comments_244125.json:
```json
{
    "body": "Changed commit from **[ad7d25a](https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba)** to **[c7916a7](https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9)**",
    "created_at": "2015-02-28T21:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ad7d25a](https://github.com/sagemath/sagetrac-mirror/commit/ad7d25a752db23ee3cae1a7d7b9fb2bbc7569bba)** to **[c7916a7](https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9)**



---

archive/issue_comments_244126.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ade4f7521ad77c03e9791bc3768d9a9e3a2daca4\">ade4f75</a></td><td><code>Upgrade PARI to git master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9751ee8ccf4887970ed5cea1e6f52447b633e2c3\">9751ee8</a></td><td><code>Trac #16878: faster is_prime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f1f5037d18eb3b2e4c8e0e2a9c7a5cdac0d643\">96f1f50</a></td><td><code>Trac #16878: further fixes to is_prime() and friends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f8abd999dcf4935f92b2d83aad01684397e62d1\">1f8abd9</a></td><td><code>Doctest fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9\">c7916a7</a></td><td><code>trac #17852: clean-up</code></td></tr></table>\n",
    "created_at": "2015-02-28T21:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244126",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ade4f7521ad77c03e9791bc3768d9a9e3a2daca4">ade4f75</a></td><td><code>Upgrade PARI to git master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9751ee8ccf4887970ed5cea1e6f52447b633e2c3">9751ee8</a></td><td><code>Trac #16878: faster is_prime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f1f5037d18eb3b2e4c8e0e2a9c7a5cdac0d643">96f1f50</a></td><td><code>Trac #16878: further fixes to is_prime() and friends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f8abd999dcf4935f92b2d83aad01684397e62d1">1f8abd9</a></td><td><code>Doctest fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9">c7916a7</a></td><td><code>trac #17852: clean-up</code></td></tr></table>




---

archive/issue_comments_244127.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nRebased over #16878",
    "created_at": "2015-02-28T21:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244127",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>Comment 26:</a>
Rebased over #16878



---

archive/issue_events_227881.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-28T21:29:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227881"
}
```



---

archive/issue_events_227882.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-28T21:29:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227882"
}
```



---

archive/issue_comments_244128.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThis looks dubious to me:\n\n```\n-    R = parent(n)\n-    if R in [int, long]:\n+    if isinstance(int, long):\n```",
    "created_at": "2015-03-05T09:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244128",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'>Comment 27:</a>
This looks dubious to me:

```
-    R = parent(n)
-    if R in [int, long]:
+    if isinstance(int, long):
```



---

archive/issue_events_227883.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-05T09:57:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227883"
}
```



---

archive/issue_events_227884.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-05T09:57:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227884"
}
```



---

archive/issue_events_227885.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-06T01:05:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227885"
}
```



---

archive/issue_events_227886.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-06T01:05:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227886"
}
```



---

archive/issue_comments_244129.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@fchapoton](#comment%3A27):\n> This looks dubious to me:\n> \n> ```\n> -    R = parent(n)\n> -    if R in [int, long]:\n> +    if isinstance(int, long):\n> ```\n\nEDIT: you are definitely right... see the commit below!\n\nIf an object `n` is not a Sage Element `parent(n)` returns the type of `n`.\n\n```\nsage: parent(3r)\n<type 'int'>\nsage: parent(Graph())\n<class 'sage.graphs.graph.Graph'>\n```\nThe code `parent(n) in [int,long]` is (roughly) equivalent to `type(n) in [int,long]`. I find much cleaner to use `isinstance`. If you do have a use case for which there is a difference, then please tell me.\n\nVincent",
    "created_at": "2015-03-06T01:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244129",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@fchapoton](#comment%3A27):
> This looks dubious to me:
> 
> ```
> -    R = parent(n)
> -    if R in [int, long]:
> +    if isinstance(int, long):
> ```

EDIT: you are definitely right... see the commit below!

If an object `n` is not a Sage Element `parent(n)` returns the type of `n`.

```
sage: parent(3r)
<type 'int'>
sage: parent(Graph())
<class 'sage.graphs.graph.Graph'>
```
The code `parent(n) in [int,long]` is (roughly) equivalent to `type(n) in [int,long]`. I find much cleaner to use `isinstance`. If you do have a use case for which there is a difference, then please tell me.

Vincent



---

archive/issue_comments_244130.json:
```json
{
    "body": "Changed commit from **[c7916a7](https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9)** to **[03d78d3](https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8)**",
    "created_at": "2015-03-06T07:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244130",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c7916a7](https://github.com/sagemath/sagetrac-mirror/commit/c7916a76b70e698c278fa1780da16e7d96df2fe9)** to **[03d78d3](https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8)**



---

archive/issue_comments_244131.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b1293a7ba5b4945389382ff536c398a76682721\">1b1293a</a></td><td><code>trac #17852: clean-up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8\">03d78d3</a></td><td><code>trac #17852: fix an isinstance</code></td></tr></table>\n",
    "created_at": "2015-03-06T07:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244131",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>Comment 30:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b1293a7ba5b4945389382ff536c398a76682721">1b1293a</a></td><td><code>trac #17852: clean-up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8">03d78d3</a></td><td><code>trac #17852: fix an isinstance</code></td></tr></table>




---

archive/issue_comments_244132.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nI get a doc builder error (but I closed my session, so I cannot copy the error message now)",
    "created_at": "2015-03-06T16:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244132",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'>Comment 31:</a>
I get a doc builder error (but I closed my session, so I cannot copy the error message now)



---

archive/issue_events_227887.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-06T16:30:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227887"
}
```



---

archive/issue_events_227888.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-06T16:30:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227888"
}
```



---

archive/issue_comments_244133.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nplease replace the first :: by : in\n\n```\n TESTS::\n+ Check that output are always Sage integers (:trac:`922`)::\n```",
    "created_at": "2015-03-06T16:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244133",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'>Comment 32:</a>
please replace the first :: by : in

```
 TESTS::
+ Check that output are always Sage integers (:trac:`922`)::
```



---

archive/issue_comments_244134.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71\">101f5a0</a></td><td><code>trac #17852: documentation</code></td></tr></table>\n",
    "created_at": "2015-03-07T16:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244134",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>Comment 33:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71">101f5a0</a></td><td><code>trac #17852: documentation</code></td></tr></table>




---

archive/issue_comments_244135.json:
```json
{
    "body": "Changed commit from **[03d78d3](https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8)** to **[101f5a0](https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71)**",
    "created_at": "2015-03-07T16:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244135",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[03d78d3](https://github.com/sagemath/sagetrac-mirror/commit/03d78d330b2693223c8cff3975206b38752174e8)** to **[101f5a0](https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71)**



---

archive/issue_events_227889.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-07T16:50:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227889"
}
```



---

archive/issue_events_227890.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-07T16:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227890"
}
```



---

archive/issue_comments_244136.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-In this ticket:\n-- we implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`\n+In this ticket, we:\n+- implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`\n - simplify the import logic in `rings.arith`\n - replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`\n - remove some useless comments in arith\n - deprecate `powermodm_ui`\n+- remove 1 from the output of `prime_powers()` (consistent with #16878)\n``````\n",
    "created_at": "2015-03-09T10:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244136",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-In this ticket:
-- we implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`
+In this ticket, we:
+- implement the two functions `prime_part_m` and `binomial` directly as methods of Sage integers and get rid of the `late_import` in `sage.rings.integer`
 - simplify the import logic in `rings.arith`
 - replace in arith `prod([x for x in hum])` by `prod(x for x in hum)`
 - remove some useless comments in arith
 - deprecate `powermodm_ui`
+- remove 1 from the output of `prime_powers()` (consistent with #16878)
``````




---

archive/issue_comments_244137.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nWhy did you remove many doctests of `prime_powers()`? In particular this test:\n\n```\nprime_powers(95,1234)\n```",
    "created_at": "2015-03-09T10:11:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244137",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'>Comment 36:</a>
Why did you remove many doctests of `prime_powers()`? In particular this test:

```
prime_powers(95,1234)
```



---

archive/issue_comments_244138.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nIn `prime_powers`, why do you only allow `Integer`, `int` and `long`? Why not\n\n```\nif not isinstance(start, Integer):\n    start = Integer(start)\n```\nThen you don't need to `raise TypeError` explicitly, as `Integer(start)` will do that if needed.",
    "created_at": "2015-03-09T10:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244138",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'>Comment 37:</a>
In `prime_powers`, why do you only allow `Integer`, `int` and `long`? Why not

```
if not isinstance(start, Integer):
    start = Integer(start)
```
Then you don't need to `raise TypeError` explicitly, as `Integer(start)` will do that if needed.



---

archive/issue_events_227891.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T10:18:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227891"
}
```



---

archive/issue_events_227892.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T10:18:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227892"
}
```



---

archive/issue_comments_244139.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplace\n\n```\nif isinstance(x, (float, complex, RealNumber, RealLiteral, ComplexNumber))\n```\nby\n\n```\nif isinstance(x, (float, complex, RealNumber, ComplexNumber))\n```",
    "created_at": "2015-03-09T10:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244139",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>Comment 38:</a>
Replace

```
if isinstance(x, (float, complex, RealNumber, RealLiteral, ComplexNumber))
```
by

```
if isinstance(x, (float, complex, RealNumber, ComplexNumber))
```



---

archive/issue_comments_244140.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nWhy\n\n```\nP(1) * x.binomial(m, **kwds)\n```\nand not\n\n```\nx.binomial(m, **kwds)\n```\nor\n\n```\nP(x.binomial(m, **kwds))\n```",
    "created_at": "2015-03-09T10:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244140",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'>Comment 39:</a>
Why

```
P(1) * x.binomial(m, **kwds)
```
and not

```
x.binomial(m, **kwds)
```
or

```
P(x.binomial(m, **kwds))
```



---

archive/issue_comments_244141.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nFor the binomial function: the documentation mentions\n\n```\nEither ``m`` or ``x-m`` must be an integer.\n```\nbut the code doesn't reflect this.\n\nI think therefore you need\n\n```\ntry:\n    m = Integer(m)\nexcept TypeError:\n    m = Integer(x - m)\n```\nAlso, a doctest should be added for this case.",
    "created_at": "2015-03-09T10:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244141",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>Comment 40:</a>
For the binomial function: the documentation mentions

```
Either ``m`` or ``x-m`` must be an integer.
```
but the code doesn't reflect this.

I think therefore you need

```
try:
    m = Integer(m)
except TypeError:
    m = Integer(x - m)
```
Also, a doctest should be added for this case.



---

archive/issue_comments_244142.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nAnd the conversion of `x` to `ZZ` should be added after the PARI branch.",
    "created_at": "2015-03-09T10:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244142",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'>Comment 41:</a>
And the conversion of `x` to `ZZ` should be added after the PARI branch.



---

archive/issue_comments_244143.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\n\n```\nsage -t --long src/sage/rings/integer.pyx\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 6118, in sage.rings.integer.Integer.binomial\nFailed example:\n    alarm(0.1); (2**100).binomial(2**30, algorithm='pari')\nExpected:\n    Traceback (most recent call last):\n    ...\n    AlarmInterrupt\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 492, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 854, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.integer.Integer.binomial[12]>\", line 1, in <module>\n        alarm(RealNumber('0.1')); (Integer(2)**Integer(100)).binomial(Integer(2)**Integer(30), algorithm='pari')\n      File \"sage/rings/integer.pyx\", line 6154, in sage.rings.integer.Integer.binomial (build/cythonized/sage/rings/integer.c:36402)\n        return the_integer_ring(self._pari_().binomial(mm))\n      File \"sage/libs/pari/gen.pyx\", line 5379, in sage.libs.pari.gen.gen.binomial (build/cythonized/sage/libs/pari/gen.c:25503)\n        pari_catch_sig_on()\n      File \"sage/libs/pari/handle_error.pyx\", line 163, in sage.libs.pari.handle_error._pari_err_handle (build/cythonized/sage/libs/pari/handle_error.c:2656)\n        pari_instance.allocatemem(silent=True)\n      File \"sage/libs/pari/pari_instance.pyx\", line 1122, in sage.libs.pari.pari_instance.PariInstance.allocatemem (build/cythonized/sage/libs/pari/pari_instance.c:7709)\n        init_stack(s)\n      File \"sage/libs/pari/pari_instance.pyx\", line 1657, in sage.libs.pari.pari_instance.init_stack (build/cythonized/sage/libs/pari/pari_instance.c:11894)\n        raise MemoryError(\"Unable to allocate %s bytes for the PARI stack (instead, allocated %s bytes)\"%(failed_size, new_size))\n    MemoryError: Unable to allocate 6400000000 bytes for the PARI stack (instead, allocated 5120000000 bytes)\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.rings.integer.Integer.binomial\n    [1031 tests, 1 failure, 10.74 s]\nsage -t --long src/doc/en/developer/coding_basics.rst\n**********************************************************************\nFile \"src/doc/en/developer/coding_basics.rst\", line 845, in doc.en.developer.coding_basics\nFailed example:\n    z.powermodm_ui(2^32-1, 14)\nExpected:\n    8                                                               \nGot:\n    doctest:1: DeprecationWarning: powermodm_ui is deprecated. Please use powermod instead.\n    See http://trac.sagemath.org/17852 for details.\n    8\n**********************************************************************\n```",
    "created_at": "2015-03-09T10:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244143",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'>Comment 42:</a>

```
sage -t --long src/sage/rings/integer.pyx
**********************************************************************
File "src/sage/rings/integer.pyx", line 6118, in sage.rings.integer.Integer.binomial
Failed example:
    alarm(0.1); (2**100).binomial(2**30, algorithm='pari')
Expected:
    Traceback (most recent call last):
    ...
    AlarmInterrupt
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 492, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 854, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.integer.Integer.binomial[12]>", line 1, in <module>
        alarm(RealNumber('0.1')); (Integer(2)**Integer(100)).binomial(Integer(2)**Integer(30), algorithm='pari')
      File "sage/rings/integer.pyx", line 6154, in sage.rings.integer.Integer.binomial (build/cythonized/sage/rings/integer.c:36402)
        return the_integer_ring(self._pari_().binomial(mm))
      File "sage/libs/pari/gen.pyx", line 5379, in sage.libs.pari.gen.gen.binomial (build/cythonized/sage/libs/pari/gen.c:25503)
        pari_catch_sig_on()
      File "sage/libs/pari/handle_error.pyx", line 163, in sage.libs.pari.handle_error._pari_err_handle (build/cythonized/sage/libs/pari/handle_error.c:2656)
        pari_instance.allocatemem(silent=True)
      File "sage/libs/pari/pari_instance.pyx", line 1122, in sage.libs.pari.pari_instance.PariInstance.allocatemem (build/cythonized/sage/libs/pari/pari_instance.c:7709)
        init_stack(s)
      File "sage/libs/pari/pari_instance.pyx", line 1657, in sage.libs.pari.pari_instance.init_stack (build/cythonized/sage/libs/pari/pari_instance.c:11894)
        raise MemoryError("Unable to allocate %s bytes for the PARI stack (instead, allocated %s bytes)"%(failed_size, new_size))
    MemoryError: Unable to allocate 6400000000 bytes for the PARI stack (instead, allocated 5120000000 bytes)
**********************************************************************
1 item had failures:
   1 of  14 in sage.rings.integer.Integer.binomial
    [1031 tests, 1 failure, 10.74 s]
sage -t --long src/doc/en/developer/coding_basics.rst
**********************************************************************
File "src/doc/en/developer/coding_basics.rst", line 845, in doc.en.developer.coding_basics
Failed example:
    z.powermodm_ui(2^32-1, 14)
Expected:
    8                                                               
Got:
    doctest:1: DeprecationWarning: powermodm_ui is deprecated. Please use powermod instead.
    See http://trac.sagemath.org/17852 for details.
    8
**********************************************************************
```



---

archive/issue_comments_244144.json:
```json
{
    "body": "Changed commit from **[101f5a0](https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71)** to **[cbbb06f](https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3)**",
    "created_at": "2015-03-13T21:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[101f5a0](https://github.com/sagemath/sagetrac-mirror/commit/101f5a0feaf66f5f5e3a7cb0e4d706220ee3ff71)** to **[cbbb06f](https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3)**



---

archive/issue_comments_244145.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebddce8ceb4ba32140012479a5dc1382737ce750\">ebddce8</a></td><td><code>trac #17852: review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/782b13909c1b94183277cd99eda5760312a7dc9e\">782b139</a></td><td><code>trac #17852: fix alarm interrupt for binomial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b365b9ed18aec68ce34fe2e8c01e30031df8792f\">b365b9e</a></td><td><code>trac #17852: fix binomial(n,0) for negative n</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faed0c082f75a312072cd89b9c68ee3c28ed2d9c\">faed0c0</a></td><td><code>trac #17852: remove lcm on rationals (category takes care)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3\">cbbb06f</a></td><td><code>trac #17852: make a reference to the symbolic binomial</code></td></tr></table>\n",
    "created_at": "2015-03-13T21:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244145",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>Comment 43:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebddce8ceb4ba32140012479a5dc1382737ce750">ebddce8</a></td><td><code>trac #17852: review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/782b13909c1b94183277cd99eda5760312a7dc9e">782b139</a></td><td><code>trac #17852: fix alarm interrupt for binomial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b365b9ed18aec68ce34fe2e8c01e30031df8792f">b365b9e</a></td><td><code>trac #17852: fix binomial(n,0) for negative n</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faed0c082f75a312072cd89b9c68ee3c28ed2d9c">faed0c0</a></td><td><code>trac #17852: remove lcm on rationals (category takes care)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3">cbbb06f</a></td><td><code>trac #17852: make a reference to the symbolic binomial</code></td></tr></table>




---

archive/issue_events_227893.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-13T21:55:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227893"
}
```



---

archive/issue_events_227894.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-13T21:55:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227894"
}
```



---

archive/issue_comments_244146.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nReplying to [@jdemeyer](#comment%3A41):\n> And the conversion of `x` to `ZZ` should be added after the PARI branch.\n\nWhy?",
    "created_at": "2015-03-13T21:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244146",
    "user": "https://github.com/videlec"
}
```

<a id='comment:45'>Comment 45:</a>
Replying to [@jdemeyer](#comment%3A41):
> And the conversion of `x` to `ZZ` should be added after the PARI branch.

Why?



---

archive/issue_comments_244147.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nReplying to [@jdemeyer](#comment%3A39):\n> Why\n> \n> ```\n> P(1) * x.binomial(m, **kwds)\n> ```\n> and not\n> \n> ```\n> x.binomial(m, **kwds)\n> ```\n\nDone",
    "created_at": "2015-03-13T21:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244147",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'>Comment 46:</a>
Replying to [@jdemeyer](#comment%3A39):
> Why
> 
> ```
> P(1) * x.binomial(m, **kwds)
> ```
> and not
> 
> ```
> x.binomial(m, **kwds)
> ```

Done



---

archive/issue_comments_244148.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nReplying to [@jdemeyer](#comment%3A42):\n> \n> ```\n> sage -t --long src/sage/rings/integer.pyx\n> **********************************************************************\n> File \"src/sage/rings/integer.pyx\", line 6118, in sage.rings.integer.Integer.binomial\n> Failed example:\n>     alarm(0.1); (2**100).binomial(2**30, algorithm='pari')\n> ...\n> ```\n\nFor the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?",
    "created_at": "2015-03-13T21:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244148",
    "user": "https://github.com/videlec"
}
```

<a id='comment:47'>Comment 47:</a>
Replying to [@jdemeyer](#comment%3A42):
> 
> ```
> sage -t --long src/sage/rings/integer.pyx
> **********************************************************************
> File "src/sage/rings/integer.pyx", line 6118, in sage.rings.integer.Integer.binomial
> Failed example:
>     alarm(0.1); (2**100).binomial(2**30, algorithm='pari')
> ...
> ```

For the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?



---

archive/issue_comments_244149.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nI'm not sure that I like this:\n\n```\nsage: a = binomial(float(1001), float(1)); a\n1001.0\nsage: type(a)\n<type 'sage.rings.real_double.RealDoubleElement'>\n```\n\nShouldn't `float` input also give `float` output?",
    "created_at": "2015-03-13T22:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244149",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'>Comment 48:</a>
I'm not sure that I like this:

```
sage: a = binomial(float(1001), float(1)); a
1001.0
sage: type(a)
<type 'sage.rings.real_double.RealDoubleElement'>
```

Shouldn't `float` input also give `float` output?



---

archive/issue_comments_244150.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nReplying to [@videlec](#comment%3A47):\n> For the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?\n\nThe problem wasn't time, the problem was memory. We should find input for which the call needs at most 2GB of memory.",
    "created_at": "2015-03-13T22:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244150",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'>Comment 49:</a>
Replying to [@videlec](#comment%3A47):
> For the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?

The problem wasn't time, the problem was memory. We should find input for which the call needs at most 2GB of memory.



---

archive/issue_comments_244151.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nReplying to [@jdemeyer](#comment%3A49):\n> Replying to [@videlec](#comment%3A47):\n> > For the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?\n\n> \n> The problem wasn't time, the problem was memory. We should find input for which the call needs at most 2GB of memory.\n\nI also changed the values to `(2**100).binomial(2**19)` (it is a number with 43223705 bits). At least on my computer, the RAM used stays below 2G.",
    "created_at": "2015-03-14T07:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244151",
    "user": "https://github.com/videlec"
}
```

<a id='comment:50'>Comment 50:</a>
Replying to [@jdemeyer](#comment%3A49):
> Replying to [@videlec](#comment%3A47):
> > For the doctest I put more reasonable values for which the call took 2 sec on my computer. I also decrease the alarm time to `0.01`. Does this look better?

> 
> The problem wasn't time, the problem was memory. We should find input for which the call needs at most 2GB of memory.

I also changed the values to `(2**100).binomial(2**19)` (it is a number with 43223705 bits). At least on my computer, the RAM used stays below 2G.



---

archive/issue_comments_244152.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nThere is a test in `doc/en/developer/coding_basics.rst` that uses `Integer.powermod_ui` as an example for difference behavior for 32 bits and 64 bits. Do you have an other example in mind?\n\nReplying to [@jdemeyer](#comment%3A48):\n> I'm not sure that I like this:\n> \n> ```\n> sage: a = binomial(float(1001), float(1)); a\n> 1001.0\n> sage: type(a)\n> <type 'sage.rings.real_double.RealDoubleElement'>\n> ```\n> \n> Shouldn't `float` input also give `float` output?\n\nRight. On the previous version we had\n\n```\nsage: type(binomial(5r,2r))\n<type 'int'>\nsage: type(binomial(5r,2))\n<type 'sage.rings.integer.Integer'>\nsage: type(binomial(5,2r))\n<type 'sage.rings.integer.Integer'>\n```\nI will change that.",
    "created_at": "2015-03-14T08:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244152",
    "user": "https://github.com/videlec"
}
```

<a id='comment:51'>Comment 51:</a>
There is a test in `doc/en/developer/coding_basics.rst` that uses `Integer.powermod_ui` as an example for difference behavior for 32 bits and 64 bits. Do you have an other example in mind?

Replying to [@jdemeyer](#comment%3A48):
> I'm not sure that I like this:
> 
> ```
> sage: a = binomial(float(1001), float(1)); a
> 1001.0
> sage: type(a)
> <type 'sage.rings.real_double.RealDoubleElement'>
> ```
> 
> Shouldn't `float` input also give `float` output?

Right. On the previous version we had

```
sage: type(binomial(5r,2r))
<type 'int'>
sage: type(binomial(5r,2))
<type 'sage.rings.integer.Integer'>
sage: type(binomial(5,2r))
<type 'sage.rings.integer.Integer'>
```
I will change that.



---

archive/issue_events_227895.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-14T08:07:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227895"
}
```



---

archive/issue_events_227896.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-14T08:07:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227896"
}
```



---

archive/issue_comments_244153.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nThere was also no care of the output type for rational input\n\n```\nsage: type(binomial(5/1,3/1))\n<type 'sage.rings.integer.Integer'>\n```\n(in sage-6.5)",
    "created_at": "2015-03-14T08:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244153",
    "user": "https://github.com/videlec"
}
```

<a id='comment:52'>Comment 52:</a>
There was also no care of the output type for rational input

```
sage: type(binomial(5/1,3/1))
<type 'sage.rings.integer.Integer'>
```
(in sage-6.5)



---

archive/issue_comments_244154.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\n\n```\n            sage: hash(-920390823904823094890238490238484)\n            -873977844            # 32-bit\n            6874330978542788722   # 64-bit\n```",
    "created_at": "2015-03-14T08:11:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244154",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'>Comment 53:</a>

```
            sage: hash(-920390823904823094890238490238484)
            -873977844            # 32-bit
            6874330978542788722   # 64-bit
```



---

archive/issue_comments_244155.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@jdemeyer](#comment%3A53):\n> \n> ```\n>             sage: hash(-920390823904823094890238490238484)\n>             -873977844            # 32-bit\n>             6874330978542788722   # 64-bit\n> ```\n\nThanks!\n\nI also noticed that on large input `pari` is faster than `mpir`:\n\n```\nsage: %timeit a = (2**50).binomial(2**10, algorithm='mpir')\n1000 loops, best of 3: 462 \u00b5s per loop\nsage: %timeit a = (2**50).binomial(2**10, algorithm='pari')\n1000 loops, best of 3: 221 \u00b5s per loop\n```\nand the difference is even more significant with larger numbers... I will had a note related to that.\n\nFinally, I have troubles with the modification of the output type in `arith.binomial` ([comment:48](#comment%3A48), [comment:51](#comment%3A51) and [comment:52](#comment%3A52)). It is responsible for some doctest failure in `rings/polynomial/multi_polynomial_ideal.py` (the random generation stuff). I was not able to track down the issue.",
    "created_at": "2015-03-14T08:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244155",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@jdemeyer](#comment%3A53):
> 
> ```
>             sage: hash(-920390823904823094890238490238484)
>             -873977844            # 32-bit
>             6874330978542788722   # 64-bit
> ```

Thanks!

I also noticed that on large input `pari` is faster than `mpir`:

```
sage: %timeit a = (2**50).binomial(2**10, algorithm='mpir')
1000 loops, best of 3: 462 s per loop
sage: %timeit a = (2**50).binomial(2**10, algorithm='pari')
1000 loops, best of 3: 221 s per loop
```
and the difference is even more significant with larger numbers... I will had a note related to that.

Finally, I have troubles with the modification of the output type in `arith.binomial` ([comment:48](#comment%3A48), [comment:51](#comment%3A51) and [comment:52](#comment%3A52)). It is responsible for some doctest failure in `rings/polynomial/multi_polynomial_ideal.py` (the random generation stuff). I was not able to track down the issue.



---

archive/issue_comments_244156.json:
```json
{
    "body": "Changed commit from **[cbbb06f](https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3)** to **[d401269](https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0)**",
    "created_at": "2015-03-14T14:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244156",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cbbb06f](https://github.com/sagemath/sagetrac-mirror/commit/cbbb06fa27b0b9178ad3f9d0de3dc3235c5ec1c3)** to **[d401269](https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0)**



---

archive/issue_comments_244157.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1655367faec5cdca8cc7b580f7c7f7e22905858c\">1655367</a></td><td><code>trac #17852: replace powermod_ui by hash in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0\">d401269</a></td><td><code>trac #17852: fix output type of arith.binomial</code></td></tr></table>\n",
    "created_at": "2015-03-14T14:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244157",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>Comment 55:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1655367faec5cdca8cc7b580f7c7f7e22905858c">1655367</a></td><td><code>trac #17852: replace powermod_ui by hash in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0">d401269</a></td><td><code>trac #17852: fix output type of arith.binomial</code></td></tr></table>




---

archive/issue_comments_244158.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nBefore doing coercion, what matters is the `parent()`, not the `type()` which should be equal.",
    "created_at": "2015-03-14T14:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244158",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'>Comment 56:</a>
Before doing coercion, what matters is the `parent()`, not the `type()` which should be equal.



---

archive/issue_comments_244159.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103\">8fc6b3d</a></td><td><code>trac #17852: type -> parent</code></td></tr></table>\n",
    "created_at": "2015-03-14T14:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244159",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:57'>Comment 57:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103">8fc6b3d</a></td><td><code>trac #17852: type -> parent</code></td></tr></table>




---

archive/issue_comments_244160.json:
```json
{
    "body": "Changed commit from **[d401269](https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0)** to **[8fc6b3d](https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103)**",
    "created_at": "2015-03-14T14:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d401269](https://github.com/sagemath/sagetrac-mirror/commit/d40126995abbc7dcb7e484b3d628a5196ea026d0)** to **[8fc6b3d](https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103)**



---

archive/issue_comments_244161.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,4 @@\n - remove some useless comments in arith\n - deprecate `powermodm_ui`\n - remove 1 from the output of `prime_powers()` (consistent with #16878)\n+- remove the method `lcm` from `Rational`\n``````\n",
    "created_at": "2015-03-14T14:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244161",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,4 @@
 - remove some useless comments in arith
 - deprecate `powermodm_ui`
 - remove 1 from the output of `prime_powers()` (consistent with #16878)
+- remove the method `lcm` from `Rational`
``````




---

archive/issue_comments_244162.json:
```json
{
    "body": "Changed commit from **[8fc6b3d](https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103)** to **[61b94c2](https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869)**",
    "created_at": "2015-03-14T21:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244162",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8fc6b3d](https://github.com/sagemath/sagetrac-mirror/commit/8fc6b3da7c26d5ff4695991c26d67e38b3c1f103)** to **[61b94c2](https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869)**



---

archive/issue_comments_244163.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869\">61b94c2</a></td><td><code>trac #17852: fix curious failing doctest in  multi_polynomial_ideal</code></td></tr></table>\n",
    "created_at": "2015-03-14T21:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244163",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>Comment 59:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869">61b94c2</a></td><td><code>trac #17852: fix curious failing doctest in  multi_polynomial_ideal</code></td></tr></table>




---

archive/issue_comments_244164.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nFor the strange doctest failure responsible for commit \u200b61b94c2 see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/kYovnNz7NmM).",
    "created_at": "2015-03-14T21:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244164",
    "user": "https://github.com/videlec"
}
```

<a id='comment:60'>Comment 60:</a>
For the strange doctest failure responsible for commit 61b94c2 see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/kYovnNz7NmM).



---

archive/issue_events_227897.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-14T21:24:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227897"
}
```



---

archive/issue_events_227898.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-14T21:24:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227898"
}
```



---

archive/issue_comments_244165.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nI'm not sure if `rings/arith.py:binomial` should do more than numerics because the console user will first see `functions/other.py:binomial` and use that. The programmer OTOH probably won't need other than numerics. So, your efforts in `rings/arith.py:binomial` regarding other rings looks wasted to me.\n\nThere is already #17489 removing function duplicity for `factorial` so this is something to think of.",
    "created_at": "2015-03-15T10:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244165",
    "user": "https://github.com/rwst"
}
```

<a id='comment:61'>Comment 61:</a>
I'm not sure if `rings/arith.py:binomial` should do more than numerics because the console user will first see `functions/other.py:binomial` and use that. The programmer OTOH probably won't need other than numerics. So, your efforts in `rings/arith.py:binomial` regarding other rings looks wasted to me.

There is already #17489 removing function duplicity for `factorial` so this is something to think of.



---

archive/issue_comments_244166.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nReplying to [@rwst](#comment%3A61):\n> I'm not sure if `rings/arith.py:binomial` should do more than numerics because the console user will first see `functions/other.py:binomial` and use that. The programmer OTOH probably won't need other than numerics. So, your efforts in `rings/arith.py:binomial` regarding other rings looks wasted to me.\n\nIn the new version, `arith.binomial` do less than before regarding other rings (especially the symbolic one). What do you mean by numerics: integers? rationals? reals? complex? algebraic numbers?\n\n> There is already #17489 removing function duplicity for `factorial` so this is something to think of.\n\nRemoving `binomial` from arith is not an option. On top of #17852 we have\n\n```\nsage: from sage.rings.arith import binomial as arith_binomial\nsage: %timeit arith_binomial(10,4)\n100000 loops, best of 3: 1.87 \u00b5s per loop\nsage: %timeit binomial(10,4)\n10000 loops, best of 3: 47.3 \u00b5s per loop\n```\nThe slowdown is less dramatic for factorial but still visible\n\n```\nsage: from sage.rings.arith import factorial as arith_factorial\nsage: %timeit arith_factorial(10)\n1000000 loops, best of 3: 474 ns per loop\nsage: %timeit factorial(10)\n1000000 loops, best of 3: 1.02 \u00b5s per loop\n```",
    "created_at": "2015-03-15T10:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244166",
    "user": "https://github.com/videlec"
}
```

<a id='comment:62'>Comment 62:</a>
Replying to [@rwst](#comment%3A61):
> I'm not sure if `rings/arith.py:binomial` should do more than numerics because the console user will first see `functions/other.py:binomial` and use that. The programmer OTOH probably won't need other than numerics. So, your efforts in `rings/arith.py:binomial` regarding other rings looks wasted to me.

In the new version, `arith.binomial` do less than before regarding other rings (especially the symbolic one). What do you mean by numerics: integers? rationals? reals? complex? algebraic numbers?

> There is already #17489 removing function duplicity for `factorial` so this is something to think of.

Removing `binomial` from arith is not an option. On top of #17852 we have

```
sage: from sage.rings.arith import binomial as arith_binomial
sage: %timeit arith_binomial(10,4)
100000 loops, best of 3: 1.87 s per loop
sage: %timeit binomial(10,4)
10000 loops, best of 3: 47.3 s per loop
```
The slowdown is less dramatic for factorial but still visible

```
sage: from sage.rings.arith import factorial as arith_factorial
sage: %timeit arith_factorial(10)
1000000 loops, best of 3: 474 ns per loop
sage: %timeit factorial(10)
1000000 loops, best of 3: 1.02 s per loop
```



---

archive/issue_comments_244167.json:
```json
{
    "body": "Changed commit from **[61b94c2](https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869)** to **[6697e68](https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa)**",
    "created_at": "2015-03-15T13:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244167",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[61b94c2](https://github.com/sagemath/sagetrac-mirror/commit/61b94c202141bf164d87bae24912c687553b7869)** to **[6697e68](https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa)**



---

archive/issue_comments_244168.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa\">6697e68</a></td><td><code>trac #17852: be nicer on non-integral domains</code></td></tr></table>\n",
    "created_at": "2015-03-15T13:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244168",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:63'>Comment 63:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa">6697e68</a></td><td><code>trac #17852: be nicer on non-integral domains</code></td></tr></table>




---

archive/issue_comments_244169.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nAn additional commit to take care of #12179.",
    "created_at": "2015-03-15T13:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244169",
    "user": "https://github.com/videlec"
}
```

<a id='comment:64'>Comment 64:</a>
An additional commit to take care of #12179.



---

archive/issue_comments_244170.json:
```json
{
    "body": "Changed commit from **[6697e68](https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa)** to **[2260680](https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50)**",
    "created_at": "2015-03-20T09:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244170",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6697e68](https://github.com/sagemath/sagetrac-mirror/commit/6697e686ab123c65b147e03c8df1b3969ea548fa)** to **[2260680](https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50)**



---

archive/issue_comments_244171.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50\">2260680</a></td><td><code>trac #17852: merge beta-6.6</code></td></tr></table>\n",
    "created_at": "2015-03-20T09:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244171",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:65'>Comment 65:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50">2260680</a></td><td><code>trac #17852: merge beta-6.6</code></td></tr></table>




---

archive/issue_comments_244172.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nAll test pass on 6.6-beta6!\n\nVincent",
    "created_at": "2015-03-20T11:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244172",
    "user": "https://github.com/videlec"
}
```

<a id='comment:66'>Comment 66:</a>
All test pass on 6.6-beta6!

Vincent



---

archive/issue_comments_244173.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nComment [comment:36] hasn't been addressed.",
    "created_at": "2015-03-21T13:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244173",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:67'>Comment 67:</a>
Comment [comment:36] hasn't been addressed.



---

archive/issue_events_227899.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-21T13:34:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227899"
}
```



---

archive/issue_events_227900.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-21T13:34:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227900"
}
```



---

archive/issue_comments_244174.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db\">7f9847f</a></td><td><code>trac #17852: documentation of prime_powers</code></td></tr></table>\n",
    "created_at": "2015-03-21T13:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244174",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:68'>Comment 68:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db">7f9847f</a></td><td><code>trac #17852: documentation of prime_powers</code></td></tr></table>




---

archive/issue_comments_244175.json:
```json
{
    "body": "Changed commit from **[2260680](https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50)** to **[7f9847f](https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db)**",
    "created_at": "2015-03-21T13:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244175",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2260680](https://github.com/sagemath/sagetrac-mirror/commit/2260680a81f19b47202401109a7ec10f59e32d50)** to **[7f9847f](https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db)**



---

archive/issue_events_227901.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T13:48:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227901"
}
```



---

archive/issue_events_227902.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T13:48:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227902"
}
```



---

archive/issue_comments_244176.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nNow this test is duplicated:\n\n```\nsage: len(prime_powers(1000))\n```",
    "created_at": "2015-03-21T18:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244176",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:70'>Comment 70:</a>
Now this test is duplicated:

```
sage: len(prime_powers(1000))
```



---

archive/issue_comments_244177.json:
```json
{
    "body": "Changed commit from **[7f9847f](https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db)** to **[faf2068](https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07)**",
    "created_at": "2015-03-21T18:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244177",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f9847f](https://github.com/sagemath/sagetrac-mirror/commit/7f9847fb45b5fe5601a909155371c5ee024d19db)** to **[faf2068](https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07)**



---

archive/issue_comments_244178.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07\">faf2068</a></td><td><code>trac #17852: removed duplicate doctest</code></td></tr></table>\n",
    "created_at": "2015-03-21T18:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244178",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:71'>Comment 71:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07">faf2068</a></td><td><code>trac #17852: removed duplicate doctest</code></td></tr></table>




---

archive/issue_comments_244179.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nSorry but I still don't like the `binomial` code.\n\nIn particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.\n\nAlso, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.\n\nI will continue my review of the rest of this branch, please do not change anything except `binomial`.",
    "created_at": "2015-03-21T21:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244179",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'>Comment 72:</a>
Sorry but I still don't like the `binomial` code.

In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.

Also, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.

I will continue my review of the rest of this branch, please do not change anything except `binomial`.



---

archive/issue_events_227903.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-21T21:37:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227903"
}
```



---

archive/issue_events_227904.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-21T21:37:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227904"
}
```



---

archive/issue_comments_244180.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nNot your fault, but should be fixed anyway: the error message of `integer_ceil` has\n\n```\nraise NotImplementedError(\"computation of floor of %s not implemented\"%repr(x))\n```",
    "created_at": "2015-03-21T21:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244180",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'>Comment 74:</a>
Not your fault, but should be fixed anyway: the error message of `integer_ceil` has

```
raise NotImplementedError("computation of floor of %s not implemented"%repr(x))
```



---

archive/issue_comments_244181.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nReplace\n\n```\nsage: alarm(0.01); (2**100).binomial(2**19, algorithm='pari')\n```\nby\n\n```\nsage: alarm(0.5); (2^100).binomial(2^22, algorithm='pari')\n```\n(analogously for `mpir`)\n\nWith this value, the memory use is reasonable and the computation takes long enough (48s on my machine) that it will not answer in <0.5s in the near future.",
    "created_at": "2015-03-21T21:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244181",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:75'>Comment 75:</a>
Replace

```
sage: alarm(0.01); (2**100).binomial(2**19, algorithm='pari')
```
by

```
sage: alarm(0.5); (2^100).binomial(2^22, algorithm='pari')
```
(analogously for `mpir`)

With this value, the memory use is reasonable and the computation takes long enough (48s on my machine) that it will not answer in <0.5s in the near future.



---

archive/issue_comments_244182.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nNo further comments: if you fix the above without introducing new bugs :-) then it will finally be positive_review.",
    "created_at": "2015-03-21T21:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244182",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:76'>Comment 76:</a>
No further comments: if you fix the above without introducing new bugs :-) then it will finally be positive_review.



---

archive/issue_comments_244183.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2015-03-21T21:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244183",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_244184.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nReplying to [@jdemeyer](#comment%3A72):\n> Sorry but I still don't like the `binomial` code.\n> \n> In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.\n\nI am not sure I understand. You don't want the case 2 that tries to convert `x` to an integer? It is much faster that way for real or rational input that are actually integers.\n\n> Also, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.\n\nI am not sure that what I did in the branch is the best, but there is definitely something that needs to be specified (see #12179). Would you be satisfied with\n\n```\nsage: factorial(Zmod(12)(10), 4)\n3\n```",
    "created_at": "2015-03-21T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244184",
    "user": "https://github.com/videlec"
}
```

<a id='comment:78'>Comment 78:</a>
Replying to [@jdemeyer](#comment%3A72):
> Sorry but I still don't like the `binomial` code.
> 
> In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.

I am not sure I understand. You don't want the case 2 that tries to convert `x` to an integer? It is much faster that way for real or rational input that are actually integers.

> Also, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.

I am not sure that what I did in the branch is the best, but there is definitely something that needs to be specified (see #12179). Would you be satisfied with

```
sage: factorial(Zmod(12)(10), 4)
3
```



---

archive/issue_comments_244185.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nReplying to [@videlec](#comment%3A78):\n> Replying to [@jdemeyer](#comment%3A72):\n> > Sorry but I still don't like the `binomial` code.\n> > \n> > In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.\n\n> \n> I am not sure I understand. You don't want the case 2 that tries to convert `x` to an integer? It is much faster that way for real or rational input that are actually integers.\n> \n> > Also, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.\n\n> \n> I am not sure that what I did in the branch is the best, but there is definitely something that needs to be specified (see #12179). Would you be satisfied with\n> \n> ```\n> sage: factorial(Zmod(12)(10), 4)\n> 3\n> ```\n\nActually, it does matter. When an operation on a given quotient ring is implemented from the initial ring, you expect it to not depend on the representative you used... but\n\n```\nsage: R = Integers(6)\nsage: R(binomial(5,2))\n4\nsage: R(binomial(5+6,2))\n1\n```\nNote that it would have been fine on quotients in which `2!` is invertible.",
    "created_at": "2015-03-21T22:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244185",
    "user": "https://github.com/videlec"
}
```

<a id='comment:79'>Comment 79:</a>
Replying to [@videlec](#comment%3A78):
> Replying to [@jdemeyer](#comment%3A72):
> > Sorry but I still don't like the `binomial` code.
> > 
> > In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.

> 
> I am not sure I understand. You don't want the case 2 that tries to convert `x` to an integer? It is much faster that way for real or rational input that are actually integers.
> 
> > Also, the check that `factorial(m)` is invertible has no mathematical meaning and should just be removed.

> 
> I am not sure that what I did in the branch is the best, but there is definitely something that needs to be specified (see #12179). Would you be satisfied with
> 
> ```
> sage: factorial(Zmod(12)(10), 4)
> 3
> ```

Actually, it does matter. When an operation on a given quotient ring is implemented from the initial ring, you expect it to not depend on the representative you used... but

```
sage: R = Integers(6)
sage: R(binomial(5,2))
4
sage: R(binomial(5+6,2))
1
```
Note that it would have been fine on quotients in which `2!` is invertible.



---

archive/issue_comments_244186.json:
```json
{
    "body": "<a id='comment:80'>Comment 80:</a>\nReplying to [@videlec](#comment%3A78):\n> Replying to [@jdemeyer](#comment%3A72):\n> > Sorry but I still don't like the `binomial` code.\n> > \n> > In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.\n\n> \n> I am not sure I understand.\n\nI mean this:\n\n```\n    if parent(m) is not P:\n        from sage.structure.element import get_coercion_model\n        cm = get_coercion_model()\n        x,m = cm.canonical_coercion(x,m)\n        P = parent(x)\n```",
    "created_at": "2015-03-21T22:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244186",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'>Comment 80:</a>
Replying to [@videlec](#comment%3A78):
> Replying to [@jdemeyer](#comment%3A72):
> > Sorry but I still don't like the `binomial` code.
> > 
> > In particular, do we really need the coercion there? The arguments `x` and `m` play a very different role, note that `m` is immediately converted to an integer anyway.

> 
> I am not sure I understand.

I mean this:

```
    if parent(m) is not P:
        from sage.structure.element import get_coercion_model
        cm = get_coercion_model()
        x,m = cm.canonical_coercion(x,m)
        P = parent(x)
```



---

archive/issue_comments_244187.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\nReplying to [@videlec](#comment%3A79):\n> Actually, it does matter. When an operation on a given quotient ring is implemented from the initial ring, you expect it to not depend on the representative you used... but\n> \n> ```\n> sage: R = Integers(6)\n> sage: R(binomial(5,2))\n> 4\n> sage: R(binomial(5+6,2))\n> 1\n> ```\n> Note that it would have been fine on quotients in which `2!` is invertible.\n\nOf course, you are right. Never mind what I said about this.",
    "created_at": "2015-03-21T22:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244187",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'>Comment 81:</a>
Replying to [@videlec](#comment%3A79):
> Actually, it does matter. When an operation on a given quotient ring is implemented from the initial ring, you expect it to not depend on the representative you used... but
> 
> ```
> sage: R = Integers(6)
> sage: R(binomial(5,2))
> 4
> sage: R(binomial(5+6,2))
> 1
> ```
> Note that it would have been fine on quotients in which `2!` is invertible.

Of course, you are right. Never mind what I said about this.



---

archive/issue_comments_244188.json:
```json
{
    "body": "Changed commit from **[faf2068](https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07)** to **[d70e2e8](https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0)**",
    "created_at": "2015-03-21T22:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244188",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[faf2068](https://github.com/sagemath/sagetrac-mirror/commit/faf206825e26344ae20fbe41363b00ba4e301c07)** to **[d70e2e8](https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0)**



---

archive/issue_comments_244189.json:
```json
{
    "body": "<a id='comment:82'>Comment 82:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0\">d70e2e8</a></td><td><code>Trac 17852: reviewer comments</code></td></tr></table>\n",
    "created_at": "2015-03-21T22:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244189",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:82'>Comment 82:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0">d70e2e8</a></td><td><code>Trac 17852: reviewer comments</code></td></tr></table>




---

archive/issue_events_227905.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T22:46:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227905"
}
```



---

archive/issue_events_227906.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T22:46:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227906"
}
```



---

archive/issue_comments_244190.json:
```json
{
    "body": "Changed commit from **[d70e2e8](https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0)** to **[4f0ca87](https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55)**",
    "created_at": "2015-03-21T23:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244190",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d70e2e8](https://github.com/sagemath/sagetrac-mirror/commit/d70e2e8254b0da61792f6ddc4db8d430e4684bf0)** to **[4f0ca87](https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55)**



---

archive/issue_comments_244191.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55\">4f0ca87</a></td><td><code>Trac 17852: fix an error in combinat/subword.py</code></td></tr></table>\n",
    "created_at": "2015-03-21T23:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244191",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:84'>Comment 84:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55">4f0ca87</a></td><td><code>Trac 17852: fix an error in combinat/subword.py</code></td></tr></table>




---

archive/issue_events_227907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-23T14:08:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227907"
}
```



---

archive/issue_events_227908.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-23T14:08:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227908"
}
```



---

archive/issue_comments_244192.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nI thought a bit more about the invertibility check: in fact it has nothing to do with integral domains, but with the *characteristic* of the ring.\n\nThis is also not well-defined, despite `R` being a field:\n\n```\nsage: R = Zmod(7)\nsage: binomial(R(10), 7)\n1\nsage: R(binomial(17, 7))\n2\n```\n\nThe correct condition is that `factorial(m)` should be coprime to the characteristic of the ring. So the code should be something like\n\n```\ntry:\n    c = P.characteristic()\nexcept AttributeError:\n    # Assume that P has characteristic zero\n    pass\nelse:\n    if c > 0 and any(c.gcd(k) > 1 for k in range(2, m+1)):\n        raise ...\n```\n(you don't need `Q` for this)\n\nThe example with `Zmod(7)` should be added as doctest.",
    "created_at": "2015-03-23T14:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244192",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:85'>Comment 85:</a>
I thought a bit more about the invertibility check: in fact it has nothing to do with integral domains, but with the *characteristic* of the ring.

This is also not well-defined, despite `R` being a field:

```
sage: R = Zmod(7)
sage: binomial(R(10), 7)
1
sage: R(binomial(17, 7))
2
```

The correct condition is that `factorial(m)` should be coprime to the characteristic of the ring. So the code should be something like

```
try:
    c = P.characteristic()
except AttributeError:
    # Assume that P has characteristic zero
    pass
else:
    if c > 0 and any(c.gcd(k) > 1 for k in range(2, m+1)):
        raise ...
```
(you don't need `Q` for this)

The example with `Zmod(7)` should be added as doctest.



---

archive/issue_comments_244193.json:
```json
{
    "body": "<a id='comment:86'>Comment 86:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1\">e24a437</a></td><td><code>Trac 17852: binomial, hadling finite characteristic</code></td></tr></table>\n",
    "created_at": "2015-03-23T21:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244193",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:86'>Comment 86:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1">e24a437</a></td><td><code>Trac 17852: binomial, hadling finite characteristic</code></td></tr></table>




---

archive/issue_comments_244194.json:
```json
{
    "body": "Changed commit from **[4f0ca87](https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55)** to **[e24a437](https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1)**",
    "created_at": "2015-03-23T21:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244194",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4f0ca87](https://github.com/sagemath/sagetrac-mirror/commit/4f0ca87b9f64858a22f3fcd23b63526ba7622f55)** to **[e24a437](https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1)**



---

archive/issue_events_227909.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-23T21:45:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227909"
}
```



---

archive/issue_events_227910.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-23T21:45:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227910"
}
```



---

archive/issue_events_227911.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-24T14:37:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "title_is": "Cleanup in rings.arith and rings.integer",
    "title_was": "Small cleanup in rings.arith and rings.integer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227911"
}
```



---

archive/issue_events_227912.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-24T14:37:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227912"
}
```



---

archive/issue_events_227913.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-24T14:37:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227913"
}
```



---

archive/issue_comments_244195.json:
```json
{
    "body": "<a id='comment:89'>Comment 89:</a>\nIndeed, it is not small anymore... thanks!\n\nVincent",
    "created_at": "2015-03-24T19:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244195",
    "user": "https://github.com/videlec"
}
```

<a id='comment:89'>Comment 89:</a>
Indeed, it is not small anymore... thanks!

Vincent



---

archive/issue_events_227914.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-11T08:35:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227914"
}
```



---

archive/issue_events_227915.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-11T08:35:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227915"
}
```



---

archive/issue_comments_244196.json:
```json
{
    "body": "<a id='comment:90'>Comment 90:</a>\nOn 32-bit:\n\n```\nsage -t --long src/sage/combinat/baxter_permutations.py\n**********************************************************************\nFile \"src/sage/combinat/baxter_permutations.py\", line 232, in sage.combinat.baxter_permutations.BaxterPermutations_size.cardinality\nFailed example:\n    [BaxterPermutations(n).cardinality() for n in xrange(13)]\nExpected:\n    [1, 1, 2, 6, 22, 92, 422, 2074, 10754, 58202, 326240, 1882960, 11140560]\nGot:\n    [1, 1, 2, 6, 22, 92, 422, 2074, 10754, 58202, 326240, 1882960, 11140560L]\n**********************************************************************\n1 item had failures:\n   1 of   2 in sage.combinat.baxter_permutations.BaxterPermutations_size.cardinality\n    [31 tests, 1 failure, 1.41 s]\n```\nReally, cardinality should always return Sage integers.",
    "created_at": "2015-04-11T08:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244196",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:90'>Comment 90:</a>
On 32-bit:

```
sage -t --long src/sage/combinat/baxter_permutations.py
**********************************************************************
File "src/sage/combinat/baxter_permutations.py", line 232, in sage.combinat.baxter_permutations.BaxterPermutations_size.cardinality
Failed example:
    [BaxterPermutations(n).cardinality() for n in xrange(13)]
Expected:
    [1, 1, 2, 6, 22, 92, 422, 2074, 10754, 58202, 326240, 1882960, 11140560]
Got:
    [1, 1, 2, 6, 22, 92, 422, 2074, 10754, 58202, 326240, 1882960, 11140560L]
**********************************************************************
1 item had failures:
   1 of   2 in sage.combinat.baxter_permutations.BaxterPermutations_size.cardinality
    [31 tests, 1 failure, 1.41 s]
```
Really, cardinality should always return Sage integers.



---

archive/issue_comments_244197.json:
```json
{
    "body": "Changed commit from **[e24a437](https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1)** to **[4f4cdad](https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377)**",
    "created_at": "2015-04-11T08:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244197",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e24a437](https://github.com/sagemath/sagetrac-mirror/commit/e24a437155ef6a95b6e413fd5717985fc05a48a1)** to **[4f4cdad](https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377)**



---

archive/issue_comments_244198.json:
```json
{
    "body": "<a id='comment:91'>Comment 91:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377\">4f4cdad</a></td><td><code>Trac 17852: fix BaxterPermutations cardinality</code></td></tr></table>\n",
    "created_at": "2015-04-11T08:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244198",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:91'>Comment 91:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377">4f4cdad</a></td><td><code>Trac 17852: fix BaxterPermutations cardinality</code></td></tr></table>




---

archive/issue_comments_244199.json:
```json
{
    "body": "<a id='comment:92'>Comment 92:</a>\nReplying to [@vbraun](#comment%3A90):\n> On 32-bit:\n> \n> ```\n> ...\n> ```\n\nFixed.\n\n> Really, cardinality should always return Sage integers.\n\nThen we are not to blame here ;-)\n\n```\nsage: parent(BaxterPermutations(3).cardinality())\nRational Field\n```\n\nVincent",
    "created_at": "2015-04-11T08:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244199",
    "user": "https://github.com/videlec"
}
```

<a id='comment:92'>Comment 92:</a>
Replying to [@vbraun](#comment%3A90):
> On 32-bit:
> 
> ```
> ...
> ```

Fixed.

> Really, cardinality should always return Sage integers.

Then we are not to blame here ;-)

```
sage: parent(BaxterPermutations(3).cardinality())
Rational Field
```

Vincent



---

archive/issue_events_227916.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-11T08:55:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227916"
}
```



---

archive/issue_events_227917.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-11T08:55:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227917"
}
```



---

archive/issue_comments_244200.json:
```json
{
    "body": "<a id='comment:94'>Comment 94:</a>\nReplying to [@vbraun](#comment%3A90):\n> Really, cardinality should always return Sage integers.\n\nSee #18159\n\nVincent",
    "created_at": "2015-04-11T19:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244200",
    "user": "https://github.com/videlec"
}
```

<a id='comment:94'>Comment 94:</a>
Replying to [@vbraun](#comment%3A90):
> Really, cardinality should always return Sage integers.

See #18159

Vincent



---

archive/issue_events_227918.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T09:16:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227918"
}
```



---

archive/issue_events_227919.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T09:16:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227919"
}
```



---

archive/issue_comments_244201.json:
```json
{
    "body": "<a id='comment:95'>Comment 95:</a>\n\n```\nsage -t --long --warn-long 48.0 src/sage/rings/arith.py\n**********************************************************************\nFile \"src/sage/rings/arith.py\", line 2608, in sage.rings.arith.is_squarefree\nFailed example:\n    is_squarefree(a - 3)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Non-principal ideal in factorization\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.arith.is_squarefree[13]>\", line 1, in <module>\n        is_squarefree(a - Integer(3))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/arith.py\", line 2623, in is_squarefree\n        return all(r[1] == 1 for r in factor(n))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/arith.py\", line 2391, in factor\n        return n.factor(**kwds)\n      File \"sage/rings/number_field/number_field_element.pyx\", line 1485, in sage.rings.number_field.number_field_element.NumberFieldElement.factor (build/cythonized/sage/rings/number_field/number_field_element.cpp:15877)\n        raise ArithmeticError(\"non-principal ideal in factorization\")\n    ArithmeticError: non-principal ideal in factorization\n```",
    "created_at": "2015-04-12T09:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244201",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:95'>Comment 95:</a>

```
sage -t --long --warn-long 48.0 src/sage/rings/arith.py
**********************************************************************
File "src/sage/rings/arith.py", line 2608, in sage.rings.arith.is_squarefree
Failed example:
    is_squarefree(a - 3)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Non-principal ideal in factorization
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.arith.is_squarefree[13]>", line 1, in <module>
        is_squarefree(a - Integer(3))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/arith.py", line 2623, in is_squarefree
        return all(r[1] == 1 for r in factor(n))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/arith.py", line 2391, in factor
        return n.factor(**kwds)
      File "sage/rings/number_field/number_field_element.pyx", line 1485, in sage.rings.number_field.number_field_element.NumberFieldElement.factor (build/cythonized/sage/rings/number_field/number_field_element.cpp:15877)
        raise ArithmeticError("non-principal ideal in factorization")
    ArithmeticError: non-principal ideal in factorization
```



---

archive/issue_comments_244202.json:
```json
{
    "body": "<a id='comment:96'>Comment 96:</a>\nVolker, I do not get this error. Did you test on top of 6.6.rc2 or 6.6.rc3?\n\nVincent",
    "created_at": "2015-04-12T09:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244202",
    "user": "https://github.com/videlec"
}
```

<a id='comment:96'>Comment 96:</a>
Volker, I do not get this error. Did you test on top of 6.6.rc2 or 6.6.rc3?

Vincent



---

archive/issue_comments_244203.json:
```json
{
    "body": "<a id='comment:97'>Comment 97:</a>\nThis comes from #17294, not from this ticket!!",
    "created_at": "2015-04-12T09:27:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244203",
    "user": "https://github.com/videlec"
}
```

<a id='comment:97'>Comment 97:</a>
This comes from #17294, not from this ticket!!



---

archive/issue_comments_244204.json:
```json
{
    "body": "<a id='comment:98'>Comment 98:</a>\nWell life is tough :-P",
    "created_at": "2015-04-12T09:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244204",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:98'>Comment 98:</a>
Well life is tough :-P



---

archive/issue_comments_244205.json:
```json
{
    "body": "<a id='comment:99'>Comment 99:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33a802411bfc291010e2ed49a56373f925d170e8\">33a8024</a></td><td><code>Trac 17852: merge 6.7.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c\">d7e1e37</a></td><td><code>Trac 17852: fix a failing doctest</code></td></tr></table>\n",
    "created_at": "2015-04-15T08:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244205",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:99'>Comment 99:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33a802411bfc291010e2ed49a56373f925d170e8">33a8024</a></td><td><code>Trac 17852: merge 6.7.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c">d7e1e37</a></td><td><code>Trac 17852: fix a failing doctest</code></td></tr></table>




---

archive/issue_comments_244206.json:
```json
{
    "body": "Changed commit from **[4f4cdad](https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377)** to **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**",
    "created_at": "2015-04-15T08:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244206",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4f4cdad](https://github.com/sagemath/sagetrac-mirror/commit/4f4cdad1ae7953971c1e21993f26ece509034377)** to **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**



---

archive/issue_comments_244207.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nAll test pass.",
    "created_at": "2015-04-15T09:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244207",
    "user": "https://github.com/videlec"
}
```

<a id='comment:0'>Comment 0:</a>
All test pass.



---

archive/issue_events_227920.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T09:47:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227920"
}
```



---

archive/issue_events_227921.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T09:47:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227921"
}
```



---

archive/issue_comments_244208.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/17852](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17852)** to **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**",
    "created_at": "2015-04-15T13:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17852#issuecomment-244208",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/17852](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17852)** to **[d7e1e37](https://github.com/sagemath/sagetrac-mirror/commit/d7e1e37f954184aa281d22c25ef9485e8b8f453c)**



---

archive/issue_events_227922.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T13:58:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227922"
}
```



---

archive/issue_events_227923.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8445a7a9310ced6bf72239e502518684373ad05f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-04-15T13:58:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17852#event-227923"
}
```
