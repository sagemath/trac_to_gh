# Issue 17804: Cleanup of sage.graphs.pq_trees

archive/issues_017567.json:
```json
{
    "body": "While fixing the bug reported at #17787, I noticed several things in `sage.graphs.pq_trees` that should be cleaned. Some misnamed functions, hard-to-read documentation, and also a couple of simple but useful missing features that can be very helpful when debugging code.\n\nThis branch consists of several commits which do the following:\n\n- Rename `.cardinality` to `.number_of_children`: the `PQ`-trees encode a set of permutations, and the 'cardinality' function should represent that, instead of what it represents now.\n\n- Add a real `.cardinality` function, which can be used to compute the number of different representations of an interval graph\n\n- Add a `.orderings` function, which lists all possibles representations of an interval graph\n\n- remove `.is_P` and `.is_Q`. These functions were barely used in the code itself, and can be replaced with `isinstance(x,P)` and `isinstance(x,Q)`.\n\n- Move the documentation of class PQ-tree, which actually explains how the main algorithm works, into the module's doc. It is also rewritten, and hopefully easier to understand.\n\n- Some one-line changes that improve readability or add links.\n\nNathann\n\nCC:  @dcoudert @dimpase\n\nBranch/Commit: 07ca59dfb8deb9553c4ed9e1ea79a6a394026334\n\nReviewer: David Coudert\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17804\n\n",
    "closed_at": "2015-02-21T12:40:33Z",
    "created_at": "2015-02-18T17:33:36Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Cleanup of sage.graphs.pq_trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17804",
    "user": "https://github.com/nathanncohen"
}
```
While fixing the bug reported at #17787, I noticed several things in `sage.graphs.pq_trees` that should be cleaned. Some misnamed functions, hard-to-read documentation, and also a couple of simple but useful missing features that can be very helpful when debugging code.

This branch consists of several commits which do the following:

- Rename `.cardinality` to `.number_of_children`: the `PQ`-trees encode a set of permutations, and the 'cardinality' function should represent that, instead of what it represents now.

- Add a real `.cardinality` function, which can be used to compute the number of different representations of an interval graph

- Add a `.orderings` function, which lists all possibles representations of an interval graph

- remove `.is_P` and `.is_Q`. These functions were barely used in the code itself, and can be replaced with `isinstance(x,P)` and `isinstance(x,Q)`.

- Move the documentation of class PQ-tree, which actually explains how the main algorithm works, into the module's doc. It is also rewritten, and hopefully easier to understand.

- Some one-line changes that improve readability or add links.

Nathann

CC:  @dcoudert @dimpase

Branch/Commit: 07ca59dfb8deb9553c4ed9e1ea79a6a394026334

Reviewer: David Coudert

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17804





---

archive/issue_comments_249470.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-18T17:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249470",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249471.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-18T17:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249472.json:
```json
{
    "body": "<a id='comment:4'></a>Hello,\n\nthe patch is good (install, docbuild html and pdf, tests).\n\nBefore the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).\n\nAlso, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)\n\nDavid.",
    "created_at": "2015-02-19T14:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249472",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>Hello,

the patch is good (install, docbuild html and pdf, tests).

Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).

Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)

David.



---

archive/issue_comments_249473.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-19T14:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249473",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249474.json:
```json
{
    "body": "<a id='comment:5'></a>Hellooooooooooooooo,\n\n> Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).\n\n\nI do not know either. That is because Sphinx does not like it when a list ends with a sublist. I met this bug several times but I do not know any clean workaround `:-/`\n\n> Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)\n\n\nI did try, but decided against it because all the pictures I was able to produce took the whole screen vertically, and really 'broke the flow' of the explanations. So I decided against it. This is the kind of options of \"plot\" that we will need very soon `:-P`\n\nNathann",
    "created_at": "2015-02-20T10:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249474",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Hellooooooooooooooo,

> Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).


I do not know either. That is because Sphinx does not like it when a list ends with a sublist. I met this bug several times but I do not know any clean workaround `:-/`

> Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)


I did try, but decided against it because all the pictures I was able to produce took the whole screen vertically, and really 'broke the flow' of the explanations. So I decided against it. This is the kind of options of "plot" that we will need very soon `:-P`

Nathann



---

archive/issue_comments_249475.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-20T10:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249475",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249476.json:
```json
{
    "body": "<a id='comment:7'></a>So let the text as it is.\nDavid.",
    "created_at": "2015-02-20T10:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249476",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>So let the text as it is.
David.



---

archive/issue_comments_249477.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-20T10:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249477",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249478.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks !",
    "created_at": "2015-02-20T10:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249478",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>Thanks !



---

archive/issue_comments_249479.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-21T12:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-249479",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050841.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-21T12:40:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17804#event-50841"
}
```
