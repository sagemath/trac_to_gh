# Issue 17804: Cleanup of sage.graphs.pq_trees

archive/issues_017567.json:
```json
{
    "body": "While fixing the bug reported at #17787, I noticed several things in `sage.graphs.pq_trees` that should be cleaned. Some misnamed functions, hard-to-read documentation, and also a couple of simple but useful missing features that can be very helpful when debugging code.\n\nThis branch consists of several commits which do the following:\n\n- Rename `.cardinality` to `.number_of_children`: the `PQ`-trees encode a set of permutations, and the 'cardinality' function should represent that, instead of what it represents now.\n\n- Add a real `.cardinality` function, which can be used to compute the number of different representations of an interval graph\n\n- Add a `.orderings` function, which lists all possibles representations of an interval graph\n\n- remove `.is_P` and `.is_Q`. These functions were barely used in the code itself, and can be replaced with `isinstance(x,P)` and `isinstance(x,Q)`.\n\n- Move the documentation of class PQ-tree, which actually explains how the main algorithm works, into the module's doc. It is also rewritten, and hopefully easier to understand.\n\n- Some one-line changes that improve readability or add links.\n\nNathann\n\nCC:  @dcoudert @dimpase\n\nBranch/Commit: [07ca59dfb8deb9553c4ed9e1ea79a6a394026334](https://github.com/sagemath/sagetrac-mirror/commit/07ca59dfb8deb9553c4ed9e1ea79a6a394026334)\n\nReviewer: David Coudert\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17804\n\n",
    "closed_at": "2015-02-21T12:40:33Z",
    "created_at": "2015-02-18T17:33:36Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Cleanup of sage.graphs.pq_trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17804",
    "user": "https://github.com/nathanncohen"
}
```
While fixing the bug reported at #17787, I noticed several things in `sage.graphs.pq_trees` that should be cleaned. Some misnamed functions, hard-to-read documentation, and also a couple of simple but useful missing features that can be very helpful when debugging code.

This branch consists of several commits which do the following:

- Rename `.cardinality` to `.number_of_children`: the `PQ`-trees encode a set of permutations, and the 'cardinality' function should represent that, instead of what it represents now.

- Add a real `.cardinality` function, which can be used to compute the number of different representations of an interval graph

- Add a `.orderings` function, which lists all possibles representations of an interval graph

- remove `.is_P` and `.is_Q`. These functions were barely used in the code itself, and can be replaced with `isinstance(x,P)` and `isinstance(x,Q)`.

- Move the documentation of class PQ-tree, which actually explains how the main algorithm works, into the module's doc. It is also rewritten, and hopefully easier to understand.

- Some one-line changes that improve readability or add links.

Nathann

CC:  @dcoudert @dimpase

Branch/Commit: [07ca59dfb8deb9553c4ed9e1ea79a6a394026334](https://github.com/sagemath/sagetrac-mirror/commit/07ca59dfb8deb9553c4ed9e1ea79a6a394026334)

Reviewer: David Coudert

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17804





---

archive/issue_comments_308917.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/17804\"",
    "created_at": "2015-02-18T17:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308917",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/17804"



---

archive/issue_comments_308918.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-18T17:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308918",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_308919.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[707124c](https://github.com/sagemath/sagetrac-mirror/commit/707124c5fe5cef2d651f8ab3c9f1bf2efbbea084)|`trac #17804: Rename .cardinality to .number_of_children`|\n|[6a1b563](https://github.com/sagemath/sagetrac-mirror/commit/6a1b563eefe36fdaba96c6d419442cd469692530)|`trac #17804: Add cardinality function to know the number of orderings`|\n|[7fa50a0](https://github.com/sagemath/sagetrac-mirror/commit/7fa50a0214e2d912e24e79239f9024b50b5ef74c)|`trac #17804: Add orderings() to list all orderings`|\n|[7f73cea](https://github.com/sagemath/sagetrac-mirror/commit/7f73cea17c7d0f3ddc4b1d9209b9f23e55299289)|`trac #17804: Remove .is_P and .is_Q`|\n|[ff247ce](https://github.com/sagemath/sagetrac-mirror/commit/ff247ce60ef9551ddda0a52d29cd512f4fd0f72f)|`trac #17804: Move and rephrase the PQ-trees documentation at module's level`|\n|[07ca59d](https://github.com/sagemath/sagetrac-mirror/commit/07ca59dfb8deb9553c4ed9e1ea79a6a394026334)|`trac #17804: Typos and one-line changes`|",
    "created_at": "2015-02-18T17:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[707124c](https://github.com/sagemath/sagetrac-mirror/commit/707124c5fe5cef2d651f8ab3c9f1bf2efbbea084)|`trac #17804: Rename .cardinality to .number_of_children`|
|[6a1b563](https://github.com/sagemath/sagetrac-mirror/commit/6a1b563eefe36fdaba96c6d419442cd469692530)|`trac #17804: Add cardinality function to know the number of orderings`|
|[7fa50a0](https://github.com/sagemath/sagetrac-mirror/commit/7fa50a0214e2d912e24e79239f9024b50b5ef74c)|`trac #17804: Add orderings() to list all orderings`|
|[7f73cea](https://github.com/sagemath/sagetrac-mirror/commit/7f73cea17c7d0f3ddc4b1d9209b9f23e55299289)|`trac #17804: Remove .is_P and .is_Q`|
|[ff247ce](https://github.com/sagemath/sagetrac-mirror/commit/ff247ce60ef9551ddda0a52d29cd512f4fd0f72f)|`trac #17804: Move and rephrase the PQ-trees documentation at module's level`|
|[07ca59d](https://github.com/sagemath/sagetrac-mirror/commit/07ca59dfb8deb9553c4ed9e1ea79a6a394026334)|`trac #17804: Typos and one-line changes`|



---

archive/issue_comments_308920.json:
```json
{
    "body": "Changing commit from \"\" to \"07ca59dfb8deb9553c4ed9e1ea79a6a394026334\"",
    "created_at": "2015-02-18T17:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "07ca59dfb8deb9553c4ed9e1ea79a6a394026334"



---

archive/issue_comments_308921.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello,\n\nthe patch is good (install, docbuild html and pdf, tests).\n\nBefore the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).\n\nAlso, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)\n\nDavid.",
    "created_at": "2015-02-19T14:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308921",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
Hello,

the patch is good (install, docbuild html and pdf, tests).

Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).

Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)

David.



---

archive/issue_comments_308922.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-19T14:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308922",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_308923.json:
```json
{
    "body": "<a id='comment:5'></a>\nHellooooooooooooooo,\n\n> Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).\n\n\nI do not know either. That is because Sphinx does not like it when a list ends with a sublist. I met this bug several times but I do not know any clean workaround `:-/`\n\n> Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)\n\n\nI did try, but decided against it because all the pictures I was able to produce took the whole screen vertically, and really 'broke the flow' of the explanations. So I decided against it. This is the kind of options of \"plot\" that we will need very soon `:-P`\n\nNathann",
    "created_at": "2015-02-20T10:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308923",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Hellooooooooooooooo,

> Before the 4th item (One at a time, we update the data structure...), it would be nice to have some space. I don't know how to force it (I tried).


I do not know either. That is because Sphinx does not like it when a list ends with a sublist. I met this bug several times but I do not know any clean workaround `:-/`

> Also, if you want to play more with your new PLOT command, you could add an example of PQ-tree ;)


I did try, but decided against it because all the pictures I was able to produce took the whole screen vertically, and really 'broke the flow' of the explanations. So I decided against it. This is the kind of options of "plot" that we will need very soon `:-P`

Nathann



---

archive/issue_comments_308924.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-20T10:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308924",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_308925.json:
```json
{
    "body": "<a id='comment:7'></a>\nSo let the text as it is.\nDavid.",
    "created_at": "2015-02-20T10:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308925",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
So let the text as it is.
David.



---

archive/issue_comments_308926.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-20T10:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308926",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_308927.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2015-02-20T10:23:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308927",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_308928.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks !",
    "created_at": "2015-02-20T10:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308928",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Thanks !



---

archive/issue_comments_308929.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-21T12:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308929",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057812.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-21T12:40:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17804#event-57812"
}
```



---

archive/issue_comments_308930.json:
```json
{
    "body": "Changing branch from \"u/ncohen/17804\" to \"07ca59dfb8deb9553c4ed9e1ea79a6a394026334\"",
    "created_at": "2015-02-21T12:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17804#issuecomment-308930",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/ncohen/17804" to "07ca59dfb8deb9553c4ed9e1ea79a6a394026334"
