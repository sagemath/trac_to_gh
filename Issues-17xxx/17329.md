# Issue 17329: Handle errors in PARI -> CDF conversion

archive/issues_017092.json:
```json
{
    "body": "```\nsage: CDF(pari(1e1000))\nsig_error() without sig_on()\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134:  7790 Aborted                 \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n```\n\nCC:  @pjbruin\n\nReviewer: Peter Bruin\n\nAuthor: Jeroen Demeyer\n\nBranch: ff6ddb1feb1d8760ef246ec6e20043911800d402\n\nCommit: ff6ddb1feb1d8760ef246ec6e20043911800d402\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17329\n\n",
    "closed_at": "2014-11-15T16:22:42Z",
    "created_at": "2014-11-12T21:53:44Z",
    "labels": [
        "component: basic arithmetic",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Handle errors in PARI -> CDF conversion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17329",
    "user": "https://github.com/williamstein"
}
```
```
sage: CDF(pari(1e1000))
sig_error() without sig_on()
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134:  7790 Aborted                 "$SAGE_ROOT/src/bin/sage" "$@"
```

CC:  @pjbruin

Reviewer: Peter Bruin

Author: Jeroen Demeyer

Branch: ff6ddb1feb1d8760ef246ec6e20043911800d402

Commit: ff6ddb1feb1d8760ef246ec6e20043911800d402

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17329





---

archive/issue_comments_227019.json:
```json
{
    "body": "<a id='comment:1'></a>This was found by Austin Tran, who reported\n\n```\nf(z)=zeta(z^2)\ncomplex_plot(f,(-10,10),(-10,10),axes=False,figsize=[10,10],plot_points=1000)\n```\nwhich workes fine, but the same expression with zeta(z^3) instead returned the given error.  In particular,\n\n```\nf(z)=zeta(z^3)\ncomplex_plot(f,(-10,10),(-10,10),axes=False,figsize=[10,10],plot_points=1000)\n```\n\ngives an error.   I tried doing this:\n\n```\n\nm=0\ndef f(z):\n    global m\n    m = z\n    return zeta(z^3)\n\ncomplex_plot(f,(-10,10),(-10,10),axes=False,figsize=[3,3],plot_points=100)\n```\n\nand found that the problem was caused when z = 0.505050505051 - 10.0*I.   I then tried explicitly computing zeta(z^3) and got the core dump.\n\nWorksheet: https://cloud.sagemath.com/projects/4a5f0542-5873-4eed-a85c-a18c706e8bcd/files/support/2014-11-12-complex-plot.sagews",
    "created_at": "2014-11-12T21:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227019",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>This was found by Austin Tran, who reported

```
f(z)=zeta(z^2)
complex_plot(f,(-10,10),(-10,10),axes=False,figsize=[10,10],plot_points=1000)
```
which workes fine, but the same expression with zeta(z^3) instead returned the given error.  In particular,

```
f(z)=zeta(z^3)
complex_plot(f,(-10,10),(-10,10),axes=False,figsize=[10,10],plot_points=1000)
```

gives an error.   I tried doing this:

```

m=0
def f(z):
    global m
    m = z
    return zeta(z^3)

complex_plot(f,(-10,10),(-10,10),axes=False,figsize=[3,3],plot_points=100)
```

and found that the problem was caused when z = 0.505050505051 - 10.0*I.   I then tried explicitly computing zeta(z^3) and got the core dump.

Worksheet: https://cloud.sagemath.com/projects/4a5f0542-5873-4eed-a85c-a18c706e8bcd/files/support/2014-11-12-complex-plot.sagews



---

archive/issue_comments_227020.json:
```json
{
    "body": "<a id='comment:2'></a>Workaround:\n\n```\ndef f(z):\n    return zeta(CC(z)^3)\n\ncomplex_plot(f,(-10,10),(-10,10),axes=False,figsize=[3,3],plot_points=100)\n```",
    "created_at": "2014-11-12T22:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227020",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>Workaround:

```
def f(z):
    return zeta(CC(z)^3)

complex_plot(f,(-10,10),(-10,10),axes=False,figsize=[3,3],plot_points=100)
```



---

archive/issue_comments_227021.json:
```json
{
    "body": "Changing component from number theory to basic arithmetic.",
    "created_at": "2014-11-13T17:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227021",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from number theory to basic arithmetic.



---

archive/issue_comments_227022.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-13T17:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227022",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_227023.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2014-11-13T17:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227023",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_227024.json:
```json
{
    "body": "<a id='comment:8'></a>Looks like the right solution to me and passes doctests.",
    "created_at": "2014-11-14T19:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227024",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:8'></a>Looks like the right solution to me and passes doctests.



---

archive/issue_comments_227025.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-14T19:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227025",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227026.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-15T16:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17329#issuecomment-227026",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-15T16:22:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17329",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17329#event-50031"
}
```
