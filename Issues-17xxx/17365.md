# Issue 17365: ATLAS does not build shared lib on Cygwin64

archive/issues_017128.json:
```json
{
    "body": "It tries to use some MSVCRT thread functions instead of Cygwin's ones and fails at link time because of undefined references.\n(And later on numpy fails to build because of the same undefined references.)\n\nSee:\n* https://cygwin.com/ml/cygwin/2005-01/msg00883.html\n* http://msdn.microsoft.com/fr-fr/library/kdzttdcb.aspx\n\n**CC:**  @tscrim @vbraun gouezel\n\n**Branch:** [0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)\n\n**Upstream:** Reported upstream. No feedback yet.\n\n**Reviewer:** Volker Braun, Sebastien Gouezel\n\n**Author:** Jean-Pierre Flori\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17365\n\n",
    "closed_at": "2015-01-23T23:40:47Z",
    "created_at": "2014-11-18T15:32:39Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "ATLAS does not build shared lib on Cygwin64",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17365",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
It tries to use some MSVCRT thread functions instead of Cygwin's ones and fails at link time because of undefined references.
(And later on numpy fails to build because of the same undefined references.)

See:
* https://cygwin.com/ml/cygwin/2005-01/msg00883.html
* http://msdn.microsoft.com/fr-fr/library/kdzttdcb.aspx

**CC:**  @tscrim @vbraun gouezel

**Branch:** [0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)

**Upstream:** Reported upstream. No feedback yet.

**Reviewer:** Volker Braun, Sebastien Gouezel

**Author:** Jean-Pierre Flori

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/17365





---

archive/issue_comments_298691.json:
```json
{
    "body": "Attachment [cygwin_threads.patch](tarball://root/attachments/some-uuid/ticket17365/cygwin_threads.patch) by jpflori created at 2014-11-18 15:33:12",
    "created_at": "2014-11-18T15:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298691",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [cygwin_threads.patch](tarball://root/attachments/some-uuid/ticket17365/cygwin_threads.patch) by jpflori created at 2014-11-18 15:33:12



---

archive/issue_comments_298692.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttached patch should treat Cygwin and Cygwin64 as Cygwin used to be treated already.",
    "created_at": "2014-11-18T15:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298692",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
Attached patch should treat Cygwin and Cygwin64 as Cygwin used to be treated already.



---

archive/issue_comments_298693.json:
```json
{
    "body": "<a id='comment:2'></a>\n(Not tested yet, I want to reproduce a failed build first as I did not have access to the first failed build log and it takes ages...)",
    "created_at": "2014-11-18T15:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298693",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:2'></a>
(Not tested yet, I want to reproduce a failed build first as I did not have access to the first failed build log and it takes ages...)



---

archive/issue_comments_298694.json:
```json
{
    "body": "<a id='comment:3'></a>\nTested now and works ok.\nOr rather ATLAS now builds correctly, I don't promise it is functional at this point.",
    "created_at": "2014-11-20T09:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298694",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
Tested now and works ok.
Or rather ATLAS now builds correctly, I don't promise it is functional at this point.



---

archive/issue_comments_298695.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-11-20T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298695",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_298696.json:
```json
{
    "body": "**Commit:** [f3402576d2a6cecf79856d5821a324c28cfa8d45](https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45)",
    "created_at": "2014-11-20T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298696",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Commit:** [f3402576d2a6cecf79856d5821a324c28cfa8d45](https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45)



---

archive/issue_comments_298697.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2014-11-20T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298697",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_comments_298698.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45\">f340257</a></td><td><code>Let ATLAS use Cygwin thread functions on Cygwin64.</code></td></tr></table>\n",
    "created_at": "2014-11-20T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298698",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45">f340257</a></td><td><code>Let ATLAS use Cygwin thread functions on Cygwin64.</code></td></tr></table>




---

archive/issue_comments_298699.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/17365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17365)",
    "created_at": "2014-11-20T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298699",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Branch:** [u/jpflori/ticket/17365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17365)



---

archive/issue_comments_298700.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5\">0b0f078</a></td><td><code>Let ATLAS use Cygwin thread functions on Cygwin64.</code></td></tr></table>\n",
    "created_at": "2014-11-20T11:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5">0b0f078</a></td><td><code>Let ATLAS use Cygwin thread functions on Cygwin64.</code></td></tr></table>




---

archive/issue_comments_298701.json:
```json
{
    "body": "**Changing commit** from \"[f3402576d2a6cecf79856d5821a324c28cfa8d45](https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45)\" to \"[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)\".",
    "created_at": "2014-11-20T11:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f3402576d2a6cecf79856d5821a324c28cfa8d45](https://github.com/sagemath/sagetrac-mirror/commit/f3402576d2a6cecf79856d5821a324c28cfa8d45)" to "[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)".



---

archive/issue_comments_298702.json:
```json
{
    "body": "<a id='comment:7'></a>\nI will try to get to this today or tomorrow.",
    "created_at": "2014-11-25T16:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298702",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
I will try to get to this today or tomorrow.



---

archive/issue_comments_298703.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks good, did you send your patch upstream?",
    "created_at": "2014-12-29T11:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298703",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
Looks good, did you send your patch upstream?



---

archive/issue_comments_298704.json:
```json
{
    "body": "<a id='comment:9'></a>\nNope, I wanted to have a look at the devel version of ATLAS first (as it would also be a good thing to use it in Sage if working and more or less stabilized, the version we ship right now is very suboptimal or broken on some platforms), but found no time yet...",
    "created_at": "2014-12-29T12:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298704",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Nope, I wanted to have a look at the devel version of ATLAS first (as it would also be a good thing to use it in Sage if working and more or less stabilized, the version we ship right now is very suboptimal or broken on some platforms), but found no time yet...



---

archive/issue_comments_298705.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2014-12-29T12:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298705",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_298706.json:
```json
{
    "body": "<a id='comment:10'></a>\nReported upstream:\nhttps://sourceforge.net/p/math-atlas/support-requests/975/",
    "created_at": "2014-12-29T12:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298706",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
Reported upstream:
https://sourceforge.net/p/math-atlas/support-requests/975/



---

archive/issue_comments_298707.json:
```json
{
    "body": "Attachment [atlas-3.10.2.log](tarball://root/attachments/some-uuid/ticket17365/atlas-3.10.2.log) by @tscrim created at 2015-01-01 05:48:47",
    "created_at": "2015-01-01T05:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298707",
    "user": "https://github.com/tscrim"
}
```

Attachment [atlas-3.10.2.log](tarball://root/attachments/some-uuid/ticket17365/atlas-3.10.2.log) by @tscrim created at 2015-01-01 05:48:47



---

archive/issue_comments_298708.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm unable to build ATLAS with this branch on the latest `develop` + #15015 (after running a `make distclean`). I've attached the build log and I was compiling on a single thread with Win 8 on a Intel quad-core. I also ran a rebase and still got the same error - it stems from a permission denied error in part of ATLAS's source code. Is this an issue with my setup?",
    "created_at": "2015-01-01T05:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298708",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
I'm unable to build ATLAS with this branch on the latest `develop` + #15015 (after running a `make distclean`). I've attached the build log and I was compiling on a single thread with Win 8 on a Intel quad-core. I also ran a rebase and still got the same error - it stems from a permission denied error in part of ATLAS's source code. Is this an issue with my setup?



---

archive/issue_comments_298709.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'd say it comes from your setup.\n\nI'll have a closer look right now.",
    "created_at": "2015-01-06T16:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298709",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
I'd say it comes from your setup.

I'll have a closer look right now.



---

archive/issue_comments_298710.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe problematic files have suspicious timestamps:\n\n```\n...atlconf_misc.c: Timestamp out of range; substituting 2514-05-29 18:53:03.999999999\n...atlconf_misc.c' has modification time 15759751875 s in the future\n```\nand end up with permission errors:\n\n```\n...atlconf_misc.c: Permission denied\n```\nCan you have a closer look at these files in the build directory?\n\nBut this has nothing to do with the patch here.\nMaybe with our repackaged ATLAS tarball, but that was not changed here.",
    "created_at": "2015-01-06T16:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298710",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
The problematic files have suspicious timestamps:

```
...atlconf_misc.c: Timestamp out of range; substituting 2514-05-29 18:53:03.999999999
...atlconf_misc.c' has modification time 15759751875 s in the future
```
and end up with permission errors:

```
...atlconf_misc.c: Permission denied
```
Can you have a closer look at these files in the build directory?

But this has nothing to do with the patch here.
Maybe with our repackaged ATLAS tarball, but that was not changed here.



---

archive/issue_comments_298711.json:
```json
{
    "body": "<a id='comment:14'></a>\nHere's some info on the file\n\n```\n$ stat atlconf_misc.c\n  File: \u2018atlconf_misc.c\u2019\n  Size: 25087           Blocks: 28         IO Block: 65536  regular file\nDevice: f458da8eh/4099463822d   Inode: 19140298416521874  Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1001/  Travis)   Gid: (  513/    None)\nAccess: 2015-01-01 05:44:33.963182200 -0800\nModify: 2014-07-10 09:22:02.000000000 -0700\nChange: 2015-01-01 05:44:33.963182200 -0800\n Birth: 2015-01-01 05:44:33.963182200 -0800\n```\nThis is consistent with other files that I randomly `stat`'ed, including the file permissions. However I'm not quite sure what I should be looking for...",
    "created_at": "2015-01-08T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298711",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Here's some info on the file

```
$ stat atlconf_misc.c
  File: ‘atlconf_misc.c’
  Size: 25087           Blocks: 28         IO Block: 65536  regular file
Device: f458da8eh/4099463822d   Inode: 19140298416521874  Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1001/  Travis)   Gid: (  513/    None)
Access: 2015-01-01 05:44:33.963182200 -0800
Modify: 2014-07-10 09:22:02.000000000 -0700
Change: 2015-01-01 05:44:33.963182200 -0800
 Birth: 2015-01-01 05:44:33.963182200 -0800
```
This is consistent with other files that I randomly `stat`'ed, including the file permissions. However I'm not quite sure what I should be looking for...



---

archive/issue_comments_298712.json:
```json
{
    "body": "<a id='comment:15'></a>\n`@`S\u00e9bastien: any report on this one?\n\n`@`Travis: I don't have any clue yet for your problem...",
    "created_at": "2015-01-12T16:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298712",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>
`@`Sébastien: any report on this one?

`@`Travis: I don't have any clue yet for your problem...



---

archive/issue_comments_298713.json:
```json
{
    "body": "<a id='comment:16'></a>\nWith the patch (and SAGE_ATLAS_ARCH=base, so maybe some part of the configuration process was skipped), ATLAS compiles fine for me (Win 7, 4 cores, compiling on a single thread).",
    "created_at": "2015-01-12T16:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298713",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:16'></a>
With the patch (and SAGE_ATLAS_ARCH=base, so maybe some part of the configuration process was skipped), ATLAS compiles fine for me (Win 7, 4 cores, compiling on a single thread).



---

archive/issue_comments_298714.json:
```json
{
    "body": "<a id='comment:17'></a>\nWe would need to make sure that it works for a multi threaded build (e.g. with autotuning or maybe with SAGE_ATLAS_ARCH=fast if that works on Cygwin), otherwise the problematic code in ATLAS is not used IIRC.\nIn particular I used to build on Cygwin64 with SAGE_ATLAS_ARCH=base as well and did not have this problem until I stopped using SAGE_ATLAS_ARCH=base and that triggered a completely autotuned build.",
    "created_at": "2015-01-12T16:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298714",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:17'></a>
We would need to make sure that it works for a multi threaded build (e.g. with autotuning or maybe with SAGE_ATLAS_ARCH=fast if that works on Cygwin), otherwise the problematic code in ATLAS is not used IIRC.
In particular I used to build on Cygwin64 with SAGE_ATLAS_ARCH=base as well and did not have this problem until I stopped using SAGE_ATLAS_ARCH=base and that triggered a completely autotuned build.



---

archive/issue_comments_298715.json:
```json
{
    "body": "<a id='comment:18'></a>\nSeems to work fine for me once again...\nThe compilation did not finish yet so I can not ensure that the thread fix is working once again, but I don't get Travis' problem.\n\nMy stat output looks similar, I'll quickly attach the (start of the) log of the ongoing build.\n\n```\n$ stat atlconf_misc.c\n  Fichier\u00a0: \u00ab\u00a0atlconf_misc.c\u00a0\u00bb\n   Taille\u00a0: 25087       Blocs\u00a0: 28         Blocs d'E/S\u00a0: 65536  fichier\nP\u00e9riph\u00e9rique\u00a0: 784a2af6h/2018126582d    In\u0153ud\u00a0: 16044073672726054  Liens\u00a0: 1\nAcc\u00e8s\u00a0: (0644/-rw-r--r--)  UID\u00a0: ( 1001/      jp)   GID\u00a0: (  513/    None)\n Acc\u00e8s\u00a0: 2015-01-13 06:46:54.816090400 +0100\nModif.\u00a0: 2014-07-10 18:22:02.000000000 +0200\nChangt\u00a0: 2015-01-13 06:46:54.819090600 +0100\n  Cr\u00e9\u00e9\u00a0: 2015-01-13 06:46:54.816090400 +0100\n```",
    "created_at": "2015-01-13T08:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298715",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
Seems to work fine for me once again...
The compilation did not finish yet so I can not ensure that the thread fix is working once again, but I don't get Travis' problem.

My stat output looks similar, I'll quickly attach the (start of the) log of the ongoing build.

```
$ stat atlconf_misc.c
  Fichier : « atlconf_misc.c »
   Taille : 25087       Blocs : 28         Blocs d'E/S : 65536  fichier
Périphérique : 784a2af6h/2018126582d    Inœud : 16044073672726054  Liens : 1
Accès : (0644/-rw-r--r--)  UID : ( 1001/      jp)   GID : (  513/    None)
 Accès : 2015-01-13 06:46:54.816090400 +0100
Modif. : 2014-07-10 18:22:02.000000000 +0200
Changt : 2015-01-13 06:46:54.819090600 +0100
  Créé : 2015-01-13 06:46:54.816090400 +0100
```



---

archive/issue_comments_298716.json:
```json
{
    "body": "Attachment [atlas-jp.log](tarball://root/attachments/some-uuid/ticket17365/atlas-jp.log) by jpflori created at 2015-01-13 08:05:56",
    "created_at": "2015-01-13T08:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298716",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [atlas-jp.log](tarball://root/attachments/some-uuid/ticket17365/atlas-jp.log) by jpflori created at 2015-01-13 08:05:56



---

archive/issue_comments_298717.json:
```json
{
    "body": "<a id='comment:19'></a>\nNote that I don't have timestamps issues.",
    "created_at": "2015-01-13T08:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298717",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
Note that I don't have timestamps issues.



---

archive/issue_comments_298718.json:
```json
{
    "body": "<a id='comment:20'></a>\nMy Win8 laptop tends to make things behave like their multithreaded...at least they seem to jump from processor to processor...so maybe that's the issue? I'll try it with `SAGE_ATLAS_ARCH=base` and/or `SAGE_ATLAS_ARCH=fast` to see if that works, and perhaps with a variety of other build flags.",
    "created_at": "2015-01-13T14:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298718",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
My Win8 laptop tends to make things behave like their multithreaded...at least they seem to jump from processor to processor...so maybe that's the issue? I'll try it with `SAGE_ATLAS_ARCH=base` and/or `SAGE_ATLAS_ARCH=fast` to see if that works, and perhaps with a variety of other build flags.



---

archive/issue_comments_298719.json:
```json
{
    "body": "<a id='comment:21'></a>\nNote that `SAGE_ATLAS_ARCH=base` explicitely disable threads so that won't actually test that the patch here is working...\nThe `fast` setting should use threads (if your CPU has more than one logical core).\n\nWhatsoever, your compilation fails very early and it really looks like it is a filesystem issue.\nDid you test installing ATLAS without this branch as well?",
    "created_at": "2015-01-13T14:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298719",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
Note that `SAGE_ATLAS_ARCH=base` explicitely disable threads so that won't actually test that the patch here is working...
The `fast` setting should use threads (if your CPU has more than one logical core).

Whatsoever, your compilation fails very early and it really looks like it is a filesystem issue.
Did you test installing ATLAS without this branch as well?



---

archive/issue_comments_298720.json:
```json
{
    "body": "<a id='comment:22'></a>\nI am confused: I compiled with SAGE_ATLAS_ARCH=fast, and it compiles fine with and without the patch. Build time multiplied by 10 compared to SAGE_ATLAS_ARCH=base, so the flag is taken into account, but it seems from CPU use that the build was using only one core (on a CPU with 4 cores). The build was started with ./sage -f atlas, what else should I do to build it multithreaded and trigger the bug?",
    "created_at": "2015-01-13T15:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298720",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:22'></a>
I am confused: I compiled with SAGE_ATLAS_ARCH=fast, and it compiles fine with and without the patch. Build time multiplied by 10 compared to SAGE_ATLAS_ARCH=base, so the flag is taken into account, but it seems from CPU use that the build was using only one core (on a CPU with 4 cores). The build was started with ./sage -f atlas, what else should I do to build it multithreaded and trigger the bug?



---

archive/issue_comments_298721.json:
```json
{
    "body": "<a id='comment:23'></a>\nI don't remember exactly fit worked or not, but I know it didn't fail at this point. I will try it without this branch when I get back from the JMM tomorrow.",
    "created_at": "2015-01-13T15:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298721",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
I don't remember exactly fit worked or not, but I know it didn't fail at this point. I will try it without this branch when I get back from the JMM tomorrow.



---

archive/issue_comments_298722.json:
```json
{
    "body": "<a id='comment:24'></a>\nJust look in the log and see at the end if it built a shared lib or not.\nTo detect if not, you can look for \"undefined ref\".\nOr just post your logs here and I'll tell!",
    "created_at": "2015-01-13T16:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298722",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>
Just look in the log and see at the end if it built a shared lib or not.
To detect if not, you can look for "undefined ref".
Or just post your logs here and I'll tell!



---

archive/issue_comments_298723.json:
```json
{
    "body": "<a id='comment:25'></a>\nI looked at the proper place in my logs. Compilation with SAGE_ATLAS_ARCH=fast\n- with the patch, the library is correctly built\n- without the patch, it is not built\n\nSo, the patch works for me. No problem such as Travis'.",
    "created_at": "2015-01-13T16:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298723",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:25'></a>
I looked at the proper place in my logs. Compilation with SAGE_ATLAS_ARCH=fast
- with the patch, the library is correctly built
- without the patch, it is not built

So, the patch works for me. No problem such as Travis'.



---

archive/issue_comments_298724.json:
```json
{
    "body": "<a id='comment:26'></a>\nBy the way, the atlas/cblas linking situation is very broken on cygwin anyway.\nSee #17630.",
    "created_at": "2015-01-13T18:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298724",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>
By the way, the atlas/cblas linking situation is very broken on cygwin anyway.
See #17630.



---

archive/issue_comments_298725.json:
```json
{
    "body": "<a id='comment:27'></a>\nI get the same error now based on develop, so it must be something specific to my Win8 machine (which is also a dual boot with Ubuntu). So don't let me hold this up.",
    "created_at": "2015-01-17T18:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298725",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
I get the same error now based on develop, so it must be something specific to my Win8 machine (which is also a dual boot with Ubuntu). So don't let me hold this up.



---

archive/issue_comments_298726.json:
```json
{
    "body": "**Reviewer:** Volker Braun, S\u00e9bastien Gouezel",
    "created_at": "2015-01-17T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298726",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Volker Braun, Sébastien Gouezel



---

archive/issue_comments_298727.json:
```json
{
    "body": "<a id='comment:28'></a>\nSo I guess that S\u00e9bastien and Volker reviews are enough.",
    "created_at": "2015-01-17T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298727",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>
So I guess that Sébastien and Volker reviews are enough.



---

archive/issue_comments_298728.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-01-17T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298728",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_298729.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-01-23T23:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298729",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_056948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-23T23:40:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17365#event-56948"
}
```



---

archive/issue_comments_298730.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/17365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17365)\" to \"[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)\".",
    "created_at": "2015-01-23T23:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298730",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jpflori/ticket/17365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17365)" to "[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)".



---

archive/issue_comments_298731.json:
```json
{
    "body": "**Changing reviewer** from \"Volker Braun, S\u00e9bastien Gouezel\" to \"Volker Braun, Sebastien Gouezel\".",
    "created_at": "2015-02-23T13:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298731",
    "user": "https://github.com/kcrisman"
}
```

**Changing reviewer** from "Volker Braun, Sébastien Gouezel" to "Volker Braun, Sebastien Gouezel".



---

archive/issue_comments_298732.json:
```json
{
    "body": "**Changing commit** from \"[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)\" to \"\".",
    "created_at": "2015-02-23T13:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298732",
    "user": "https://github.com/kcrisman"
}
```

**Changing commit** from "[0b0f0785e23437afa504bd537fb69df974a7c8c5](https://github.com/sagemath/sagetrac-mirror/commit/0b0f0785e23437afa504bd537fb69df974a7c8c5)" to "".



---

archive/issue_comments_298733.json:
```json
{
    "body": "<a id='comment:30'></a>\n(I'm making the change in name, but also it would be okay to change all previous instances to the one with the accent aigu.)",
    "created_at": "2015-02-23T13:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17365#issuecomment-298733",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'></a>
(I'm making the change in name, but also it would be okay to change all previous instances to the one with the accent aigu.)
