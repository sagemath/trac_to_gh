# Issue 17135: Compute diameter using 2sweep, 4sweep and iFUB

archive/issues_016898.json:
```json
{
    "assignees": [],
    "body": "This patch implements:\n- 2sweep and 4sweep lower bounds on the diameter of a graph\n- iFUB, an exact and fast algorithm for computing the diameter of a graph\n\n```\nsage: G = graphs.RandomBarabasiAlbert(1000,2)\nsage: %time G.diameter('standard')\nCPU times: user 44 ms, sys: 0 ns, total: 44 ms\nWall time: 42.7 ms\n7\nsage: %time G.diameter('iFUB')\nCPU times: user 24 ms, sys: 1 ms, total: 25 ms\nWall time: 23.6 ms\n7\n\nsage: G = graphs.RandomBarabasiAlbert(10000,2)\nsage: %time G.diameter('standard')\nCPU times: user 3.49 s, sys: 1 ms, total: 3.49 s\nWall time: 3.49 s\n9\nsage: %time G.diameter('iFUB')\nCPU times: user 336 ms, sys: 2 ms, total: 338 ms\nWall time: 333 ms\n9\n```\n\nThe running time of the iFUB method depends on many parameters but is in general faster than previous methods.\n\n```\nsage: G = graphs.Grid2dGraph(50,50)\nsage: %time G.diameter('standard')\nCPU times: user 138 ms, sys: 2 ms, total: 140 ms\nWall time: 139 ms\n98\nsage: %time G.diameter('iFUB')\nCPU times: user 80 ms, sys: 2 ms, total: 82 ms\nWall time: 80.5 ms\n98\nsage: V = G.vertices()\nsage: shuffle(V)\nsage: G.relabel(inplace=True, perm=V)\nsage: %time G.diameter('iFUB')\nCPU times: user 35 ms, sys: 1 ms, total: 36 ms\nWall time: 33.4 ms\n98\nsage: shuffle(V)\nsage: G.relabel(inplace=True, perm=V)\nsage: %time G.diameter('iFUB')\nCPU times: user 35 ms, sys: 1 ms, total: 36 ms\nWall time: 34.2 ms\n98\n```\n\n\nCC:  @nathanncohen\n\nBranch/Commit: **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17135_\n\n",
    "closed_at": "2014-11-15T16:18:55Z",
    "created_at": "2014-10-11T15:17:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Compute diameter using 2sweep, 4sweep and iFUB",
    "type": "issue",
    "updated_at": "2014-11-15T16:18:55Z",
    "url": "https://github.com/sagemath/sage/issues/17135",
    "user": "https://github.com/dcoudert"
}
```
This patch implements:
- 2sweep and 4sweep lower bounds on the diameter of a graph
- iFUB, an exact and fast algorithm for computing the diameter of a graph

```
sage: G = graphs.RandomBarabasiAlbert(1000,2)
sage: %time G.diameter('standard')
CPU times: user 44 ms, sys: 0 ns, total: 44 ms
Wall time: 42.7 ms
7
sage: %time G.diameter('iFUB')
CPU times: user 24 ms, sys: 1 ms, total: 25 ms
Wall time: 23.6 ms
7

sage: G = graphs.RandomBarabasiAlbert(10000,2)
sage: %time G.diameter('standard')
CPU times: user 3.49 s, sys: 1 ms, total: 3.49 s
Wall time: 3.49 s
9
sage: %time G.diameter('iFUB')
CPU times: user 336 ms, sys: 2 ms, total: 338 ms
Wall time: 333 ms
9
```

The running time of the iFUB method depends on many parameters but is in general faster than previous methods.

```
sage: G = graphs.Grid2dGraph(50,50)
sage: %time G.diameter('standard')
CPU times: user 138 ms, sys: 2 ms, total: 140 ms
Wall time: 139 ms
98
sage: %time G.diameter('iFUB')
CPU times: user 80 ms, sys: 2 ms, total: 82 ms
Wall time: 80.5 ms
98
sage: V = G.vertices()
sage: shuffle(V)
sage: G.relabel(inplace=True, perm=V)
sage: %time G.diameter('iFUB')
CPU times: user 35 ms, sys: 1 ms, total: 36 ms
Wall time: 33.4 ms
98
sage: shuffle(V)
sage: G.relabel(inplace=True, perm=V)
sage: %time G.diameter('iFUB')
CPU times: user 35 ms, sys: 1 ms, total: 36 ms
Wall time: 34.2 ms
98
```


CC:  @nathanncohen

Branch/Commit: **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**

Reviewer: **Nathann Cohen**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/17135_





---

archive/issue_events_242459.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:17:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242459"
}
```



---

archive/issue_events_242460.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:17:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242460"
}
```



---

archive/issue_comments_227257.json:
```json
{
    "body": "Author: **David Coudert**",
    "created_at": "2014-10-11T15:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227257",
    "user": "https://github.com/dcoudert"
}
```

Author: **David Coudert**



---

archive/issue_events_242461.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:21:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242461"
}
```



---

archive/issue_events_242462.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:21:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "title_is": "Compute diameter using 2sweep, 4sweep and iFUB",
    "title_was": "help",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242462"
}
```



---

archive/issue_events_242463.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:21:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242463"
}
```



---

archive/issue_events_242464.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:21:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242464"
}
```



---

archive/issue_comments_227258.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+This patch implements:\n+- 2sweep and 4sweep lower bounds on the diameter of a graph\n+- iFUB, an exact and fast algorithm for computing the diameter of a graph\n``````\n",
    "created_at": "2014-10-11T15:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227258",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+This patch implements:
+- 2sweep and 4sweep lower bounds on the diameter of a graph
+- iFUB, an exact and fast algorithm for computing the diameter of a graph
``````




---

archive/issue_events_242465.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T15:21:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242465"
}
```



---

archive/issue_comments_227259.json:
```json
{
    "body": "Branch: **[u/dcoudert/help](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/help)**",
    "created_at": "2014-10-11T16:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227259",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[u/dcoudert/help](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/help)**



---

archive/issue_comments_227260.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,53 @@\n This patch implements:\n - 2sweep and 4sweep lower bounds on the diameter of a graph\n - iFUB, an exact and fast algorithm for computing the diameter of a graph\n+\n+```\n+sage: G = graphs.RandomBarabasiAlbert(1000,2)\n+sage: %time G.diameter('standard')\n+CPU times: user 44 ms, sys: 0 ns, total: 44 ms\n+Wall time: 42.7 ms\n+7\n+sage: %time G.diameter('iFUB')\n+CPU times: user 24 ms, sys: 1 ms, total: 25 ms\n+Wall time: 23.6 ms\n+7\n+\n+sage: G = graphs.RandomBarabasiAlbert(10000,2)\n+sage: %time G.diameter('standard')\n+CPU times: user 3.49 s, sys: 1 ms, total: 3.49 s\n+Wall time: 3.49 s\n+9\n+sage: %time G.diameter('iFUB')\n+CPU times: user 336 ms, sys: 2 ms, total: 338 ms\n+Wall time: 333 ms\n+9\n+```\n+\n+The running time of the iFUB method depends on many parameters but is in general faster than previous methods.\n+\n+```\n+sage: G = graphs.Grid2dGraph(50,50)\n+sage: %time G.diameter('standard')\n+CPU times: user 138 ms, sys: 2 ms, total: 140 ms\n+Wall time: 139 ms\n+98\n+sage: %time G.diameter('iFUB')\n+CPU times: user 80 ms, sys: 2 ms, total: 82 ms\n+Wall time: 80.5 ms\n+98\n+sage: V = G.vertices()\n+sage: shuffle(V)\n+sage: G.relabel(inplace=True, perm=V)\n+sage: %time G.diameter('iFUB')\n+CPU times: user 35 ms, sys: 1 ms, total: 36 ms\n+Wall time: 33.4 ms\n+98\n+sage: shuffle(V)\n+sage: G.relabel(inplace=True, perm=V)\n+sage: %time G.diameter('iFUB')\n+CPU times: user 35 ms, sys: 1 ms, total: 36 ms\n+Wall time: 34.2 ms\n+98\n+```\n+\n``````\n",
    "created_at": "2014-10-11T16:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227260",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,53 @@
 This patch implements:
 - 2sweep and 4sweep lower bounds on the diameter of a graph
 - iFUB, an exact and fast algorithm for computing the diameter of a graph
+
+```
+sage: G = graphs.RandomBarabasiAlbert(1000,2)
+sage: %time G.diameter('standard')
+CPU times: user 44 ms, sys: 0 ns, total: 44 ms
+Wall time: 42.7 ms
+7
+sage: %time G.diameter('iFUB')
+CPU times: user 24 ms, sys: 1 ms, total: 25 ms
+Wall time: 23.6 ms
+7
+
+sage: G = graphs.RandomBarabasiAlbert(10000,2)
+sage: %time G.diameter('standard')
+CPU times: user 3.49 s, sys: 1 ms, total: 3.49 s
+Wall time: 3.49 s
+9
+sage: %time G.diameter('iFUB')
+CPU times: user 336 ms, sys: 2 ms, total: 338 ms
+Wall time: 333 ms
+9
+```
+
+The running time of the iFUB method depends on many parameters but is in general faster than previous methods.
+
+```
+sage: G = graphs.Grid2dGraph(50,50)
+sage: %time G.diameter('standard')
+CPU times: user 138 ms, sys: 2 ms, total: 140 ms
+Wall time: 139 ms
+98
+sage: %time G.diameter('iFUB')
+CPU times: user 80 ms, sys: 2 ms, total: 82 ms
+Wall time: 80.5 ms
+98
+sage: V = G.vertices()
+sage: shuffle(V)
+sage: G.relabel(inplace=True, perm=V)
+sage: %time G.diameter('iFUB')
+CPU times: user 35 ms, sys: 1 ms, total: 36 ms
+Wall time: 33.4 ms
+98
+sage: shuffle(V)
+sage: G.relabel(inplace=True, perm=V)
+sage: %time G.diameter('iFUB')
+CPU times: user 35 ms, sys: 1 ms, total: 36 ms
+Wall time: 34.2 ms
+98
+```
+
``````




---

archive/issue_events_242466.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-11T16:50:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242466"
}
```



---

archive/issue_comments_227261.json:
```json
{
    "body": "Commit: **[`b449129`](https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682)**",
    "created_at": "2014-10-11T16:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227261",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`b449129`](https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682)**



---

archive/issue_comments_227262.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dd69119192bdc8124ffe14670daa49440dcc3a0\"><code>3dd6911</code></a></td><td><code>add references</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0826873ce4109c726b371cca88d0e918dcb857e\"><code>d082687</code></a></td><td><code>add 2sweep, 4sweep, iFUB</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c788dca3b712b28e181aed66fa560ea84a37160\"><code>6c788dc</code></a></td><td><code>fixed bug with Infinity</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb27cf786a63620a76854e64caae3b40b0326bfc\"><code>fb27cf7</code></a></td><td><code>fixed bug with DiGraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3458a0af3adb65c8cdd2f999eaac8937ce663210\"><code>3458a0a</code></a></td><td><code>fixed bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682\"><code>b449129</code></a></td><td><code>fixed bugs</code></td></tr></table>\n",
    "created_at": "2014-10-11T16:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227262",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dd69119192bdc8124ffe14670daa49440dcc3a0"><code>3dd6911</code></a></td><td><code>add references</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0826873ce4109c726b371cca88d0e918dcb857e"><code>d082687</code></a></td><td><code>add 2sweep, 4sweep, iFUB</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c788dca3b712b28e181aed66fa560ea84a37160"><code>6c788dc</code></a></td><td><code>fixed bug with Infinity</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb27cf786a63620a76854e64caae3b40b0326bfc"><code>fb27cf7</code></a></td><td><code>fixed bug with DiGraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3458a0af3adb65c8cdd2f999eaac8937ce663210"><code>3458a0a</code></a></td><td><code>fixed bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682"><code>b449129</code></a></td><td><code>fixed bugs</code></td></tr></table>




---

archive/issue_comments_227263.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de15170c965be6882fc677eebec8fd8052f0d15b\"><code>de15170</code></a></td><td><code>improve documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10\"><code>c1a7c95</code></a></td><td><code>improve documentation</code></td></tr></table>\n",
    "created_at": "2014-10-16T22:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227263",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de15170c965be6882fc677eebec8fd8052f0d15b"><code>de15170</code></a></td><td><code>improve documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10"><code>c1a7c95</code></a></td><td><code>improve documentation</code></td></tr></table>




---

archive/issue_comments_227264.json:
```json
{
    "body": "Changed commit from **[`b449129`](https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682)** to **[`c1a7c95`](https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10)**",
    "created_at": "2014-10-16T22:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227264",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b449129`](https://github.com/sagemath/sagetrac-mirror/commit/b4491296b1a0b4c0590b0678d7391f78fe503682)** to **[`c1a7c95`](https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10)**



---

archive/issue_comments_227265.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYo !!\n\nA second pass on this code. With this I guess that the 'technical review' is done, but I haven't checked the correction yet, i.e. looked at the papers and what they prove. I don't really like to make a non-obvious algorithm the default one when we have a much simpler way to compute the same value, but well, if it is faster ...\n\n- About `seen`. \"It must be initialized, but there is no need to initialize it\".\n\n```\n+    - ``seen`` -- bitset of size ``n`` that must be initialized before calling\n+      this method. owever, there is no nead to initialize it.\n```\n\n- `this method check is all` --> checkS iF all\n\n- `this helps saving` --> save\n\n- `when we already known` --> know\n\n- About your check for connected graphs: I find your `if test_is_connected and len(seen)<n: return big_number` a bit weird given that you just ran a BFS which is supposed to return the eccentricity of a vertex (which, in particular, tests if the graph is connected}}}. And actually, while you say that the ` simple_BFS` function returns the eccentricity of `source`, it only does so when the graph is connected. If it is not, it returns the (finite) eccentricity of `source` in its connected component. Is there any reason why you should not do that `simple_BFS` ?\n\n```diff\n-return distances[waiting_list[waiting_end]]\n+return distances[waiting_list[waiting_end]] if waiting_end == waiting_list+n-1 else UINT32_MAX\n```\n\n  It would make the `simple_BFS` function more correct, and it also means that you do not need to define this `is_connected` parameter as ... checking this is totally free !\n\n- `This method search for` -> searches\n\n- `diameter_lower_bound_4sweep_select_dichotomy`: really the dichotomy should be done through bsearch (http://www.cplusplus.com/reference/cstdlib/bsearch/) but I don't exactly know how to provide `distances` as an argument. Too bad `:-/`\n\n  By the way, do you really need the if `i==j-1` block ? Or would it be sufficient to just replace `i=k` with `i=k+1` ?\n\n- In `lower_bound_4sweep`: you do not need a `improved` variable. Use a `break` with a `while True`. And you can even have a `while tmp>LB` and no `break` if you compute `tmp` at the end of the loop `:-P`\n\n- Is it only me or is the `4sweep` function doing much more that 4 sweeps ?\n\n- `diameter_iFUB` frees memory that it did not allocate itself. This feels wrong `O_o`\n\n- I do not think that the comments about the data structure in `diameter()` are necessary. All that this function does is call others.\n\n- There are useless variables in this function\n\nNathann",
    "created_at": "2014-10-19T14:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227265",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yo !!

A second pass on this code. With this I guess that the 'technical review' is done, but I haven't checked the correction yet, i.e. looked at the papers and what they prove. I don't really like to make a non-obvious algorithm the default one when we have a much simpler way to compute the same value, but well, if it is faster ...

- About `seen`. "It must be initialized, but there is no need to initialize it".

```
+    - ``seen`` -- bitset of size ``n`` that must be initialized before calling
+      this method. owever, there is no nead to initialize it.
```

- `this method check is all` --> checkS iF all

- `this helps saving` --> save

- `when we already known` --> know

- About your check for connected graphs: I find your `if test_is_connected and len(seen)<n: return big_number` a bit weird given that you just ran a BFS which is supposed to return the eccentricity of a vertex (which, in particular, tests if the graph is connected}}}. And actually, while you say that the ` simple_BFS` function returns the eccentricity of `source`, it only does so when the graph is connected. If it is not, it returns the (finite) eccentricity of `source` in its connected component. Is there any reason why you should not do that `simple_BFS` ?

```diff
-return distances[waiting_list[waiting_end]]
+return distances[waiting_list[waiting_end]] if waiting_end == waiting_list+n-1 else UINT32_MAX
```

  It would make the `simple_BFS` function more correct, and it also means that you do not need to define this `is_connected` parameter as ... checking this is totally free !

- `This method search for` -> searches

- `diameter_lower_bound_4sweep_select_dichotomy`: really the dichotomy should be done through bsearch (http://www.cplusplus.com/reference/cstdlib/bsearch/) but I don't exactly know how to provide `distances` as an argument. Too bad `:-/`

  By the way, do you really need the if `i==j-1` block ? Or would it be sufficient to just replace `i=k` with `i=k+1` ?

- In `lower_bound_4sweep`: you do not need a `improved` variable. Use a `break` with a `while True`. And you can even have a `while tmp>LB` and no `break` if you compute `tmp` at the end of the loop `:-P`

- Is it only me or is the `4sweep` function doing much more that 4 sweeps ?

- `diameter_iFUB` frees memory that it did not allocate itself. This feels wrong `O_o`

- I do not think that the comments about the data structure in `diameter()` are necessary. All that this function does is call others.

- There are useless variables in this function

Nathann



---

archive/issue_events_242467.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-19T14:30:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242467"
}
```



---

archive/issue_events_242468.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-19T14:30:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242468"
}
```



---

archive/issue_comments_227266.json:
```json
{
    "body": "Changed commit from **[`c1a7c95`](https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10)** to **[`6eb88ea`](https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f)**",
    "created_at": "2014-10-25T10:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227266",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c1a7c95`](https://github.com/sagemath/sagetrac-mirror/commit/c1a7c956bf54c962332303b4411e774b16c4ec10)** to **[`6eb88ea`](https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f)**



---

archive/issue_comments_227267.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f\"><code>6eb88ea</code></a></td><td><code>multiple corrections and simplifications</code></td></tr></table>\n",
    "created_at": "2014-10-25T10:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227267",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f"><code>6eb88ea</code></a></td><td><code>multiple corrections and simplifications</code></td></tr></table>




---

archive/issue_events_242469.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-25T10:02:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242469"
}
```



---

archive/issue_events_242470.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-25T10:02:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242470"
}
```



---

archive/issue_comments_227268.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nathanncohen](#comment:5):\n> Yo !!\n> \n> A second pass on this code. With this I guess that the 'technical review' is done, but I haven't checked the correction yet, i.e. looked at the papers and what they prove. I don't really like to make a non-obvious algorithm the default one when we have a much simpler way to compute the same value, but well, if it is faster ...\n> \n> - About `seen`. \"It must be initialized, but there is no need to initialize it\".\n> \n> ```\n> +    - ``seen`` -- bitset of size ``n`` that must be initialized before calling\n> +      this method. owever, there is no nead to initialize it.\n> ```\n\nI have revised the text as follows:\n\n```\n+    - ``seen`` -- bitset of size ``n`` that must be initialized before calling \n       this method (i.e., bitset_init(seen, n)). However, there is no need to \n       clear it. \n```\n \n\n> - `this method check is all` --> checkS iF all\n> \n> - `this helps saving` --> save\n> \n> - `when we already known` --> know\n> \n> - About your check for connected graphs: I find your `if test_is_connected and len(seen)<n: return big_number` a bit weird given that you just ran a BFS which is supposed to return the eccentricity of a vertex (which, in particular, tests if the graph is connected}}}. And actually, while you say that the ` simple_BFS` function returns the eccentricity of `source`, it only does so when the graph is connected. If it is not, it returns the (finite) eccentricity of `source` in its connected component. Is there any reason why you should not do that `simple_BFS` ?\n> \n> ```diff\n> -return distances[waiting_list[waiting_end]]\n> +return distances[waiting_list[waiting_end]] if waiting_end == waiting_list+n-1 else UINT32_MAX\n> ```\n> \n>   It would make the `simple_BFS` function more correct, and it also means that you do not need to define this `is_connected` parameter as ... checking this is totally free !\n\nYou are perfectly right! I have changed the code. I have removed the useless parameter and now return the eccentricity of the source in the graph:\n\n```\nreturn distances[waiting_list[waiting_end]] if waiting_end==n-1 else UINT32_MAX \n```\n \n\n> - `This method search for` -> searches\n\nok\n \n> - `diameter_lower_bound_4sweep_select_dichotomy`: really the dichotomy should be done through bsearch (http://www.cplusplus.com/reference/cstdlib/bsearch/) but I don't exactly know how to provide `distances` as an argument. Too bad `:-/`\n> \n>   By the way, do you really need the if `i==j-1` block ? Or would it be sufficient to just replace `i=k` with `i=k+1` ?\n\n>\n>  - In `lower_bound_4sweep`: you do not need a `improved` variable. Use a `break` with a `while True`. And you can even have a `while tmp>LB` and no `break` if you compute `tmp` at the end of the loop `:-P`\n\nI agree that calling `bsearch` would be better, but I don't know how to do it without introducing extra data structure (e.g., array of pairs (vertex, distance)). I have simplified the code and removed the `diameter_lower_bound_4sweep_select_dichotomy` method.\n \n\n> - Is it only me or is the `4sweep` function doing much more that 4 sweeps ?\n\nYou are right. I don't know why they call it `4sweep` instead of `multisweep`. I can change the name if you think it is more natural.\n \n\n> - `diameter_iFUB` frees memory that it did not allocate itself. This feels wrong `O_o`\n\nI have removed these instructions.\n \n\n> - I do not think that the comments about the data structure in `diameter()` are necessary. All that this function does is call others.\n> \n> - There are useless variables in this function\n\nI have shortened the comments and remove useless variables. It should be cleaner now.\n \n\n> Nathann\n\nThanks a lot for all the comments.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f\"><code>6eb88ea</code></a></td><td><code>multiple corrections and simplifications</code></td></tr></table>\n",
    "created_at": "2014-10-25T10:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227268",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nathanncohen](#comment:5):
> Yo !!
> 
> A second pass on this code. With this I guess that the 'technical review' is done, but I haven't checked the correction yet, i.e. looked at the papers and what they prove. I don't really like to make a non-obvious algorithm the default one when we have a much simpler way to compute the same value, but well, if it is faster ...
> 
> - About `seen`. "It must be initialized, but there is no need to initialize it".
> 
> ```
> +    - ``seen`` -- bitset of size ``n`` that must be initialized before calling
> +      this method. owever, there is no nead to initialize it.
> ```

I have revised the text as follows:

```
+    - ``seen`` -- bitset of size ``n`` that must be initialized before calling 
       this method (i.e., bitset_init(seen, n)). However, there is no need to 
       clear it. 
```
 

> - `this method check is all` --> checkS iF all
> 
> - `this helps saving` --> save
> 
> - `when we already known` --> know
> 
> - About your check for connected graphs: I find your `if test_is_connected and len(seen)<n: return big_number` a bit weird given that you just ran a BFS which is supposed to return the eccentricity of a vertex (which, in particular, tests if the graph is connected}}}. And actually, while you say that the ` simple_BFS` function returns the eccentricity of `source`, it only does so when the graph is connected. If it is not, it returns the (finite) eccentricity of `source` in its connected component. Is there any reason why you should not do that `simple_BFS` ?
> 
> ```diff
> -return distances[waiting_list[waiting_end]]
> +return distances[waiting_list[waiting_end]] if waiting_end == waiting_list+n-1 else UINT32_MAX
> ```
> 
>   It would make the `simple_BFS` function more correct, and it also means that you do not need to define this `is_connected` parameter as ... checking this is totally free !

You are perfectly right! I have changed the code. I have removed the useless parameter and now return the eccentricity of the source in the graph:

```
return distances[waiting_list[waiting_end]] if waiting_end==n-1 else UINT32_MAX 
```
 

> - `This method search for` -> searches

ok
 
> - `diameter_lower_bound_4sweep_select_dichotomy`: really the dichotomy should be done through bsearch (http://www.cplusplus.com/reference/cstdlib/bsearch/) but I don't exactly know how to provide `distances` as an argument. Too bad `:-/`
> 
>   By the way, do you really need the if `i==j-1` block ? Or would it be sufficient to just replace `i=k` with `i=k+1` ?

>
>  - In `lower_bound_4sweep`: you do not need a `improved` variable. Use a `break` with a `while True`. And you can even have a `while tmp>LB` and no `break` if you compute `tmp` at the end of the loop `:-P`

I agree that calling `bsearch` would be better, but I don't know how to do it without introducing extra data structure (e.g., array of pairs (vertex, distance)). I have simplified the code and removed the `diameter_lower_bound_4sweep_select_dichotomy` method.
 

> - Is it only me or is the `4sweep` function doing much more that 4 sweeps ?

You are right. I don't know why they call it `4sweep` instead of `multisweep`. I can change the name if you think it is more natural.
 

> - `diameter_iFUB` frees memory that it did not allocate itself. This feels wrong `O_o`

I have removed these instructions.
 

> - I do not think that the comments about the data structure in `diameter()` are necessary. All that this function does is call others.
> 
> - There are useless variables in this function

I have shortened the comments and remove useless variables. It should be cleaner now.
 

> Nathann

Thanks a lot for all the comments.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f"><code>6eb88ea</code></a></td><td><code>multiple corrections and simplifications</code></td></tr></table>




---

archive/issue_events_242471.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-27T13:42:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242471"
}
```



---

archive/issue_events_242472.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-27T13:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242472"
}
```



---

archive/issue_comments_227269.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYou say in the documentation of the 4sweep method that the vertex `w` should be at the same distance from `u` and `v`, but your dichotomy search does not do that. You only check that the vertex you take is at distance LB/2 from `u`, but you do not know anything about `v`. For all you know `w` may be a leaf.\n\nNathann",
    "created_at": "2014-10-27T13:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227269",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

You say in the documentation of the 4sweep method that the vertex `w` should be at the same distance from `u` and `v`, but your dichotomy search does not do that. You only check that the vertex you take is at distance LB/2 from `u`, but you do not know anything about `v`. For all you know `w` may be a leaf.

Nathann



---

archive/issue_comments_227270.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66\"><code>7b6bfd2</code></a></td><td><code>#17135: use correct method for choosing vertex m in 4sweep</code></td></tr></table>\n",
    "created_at": "2014-10-27T17:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227270",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66"><code>7b6bfd2</code></a></td><td><code>#17135: use correct method for choosing vertex m in 4sweep</code></td></tr></table>




---

archive/issue_comments_227271.json:
```json
{
    "body": "Changed commit from **[`6eb88ea`](https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f)** to **[`7b6bfd2`](https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66)**",
    "created_at": "2014-10-27T17:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6eb88ea`](https://github.com/sagemath/sagetrac-mirror/commit/6eb88ead909981bc89fea507cc1ea354fa0d175f)** to **[`7b6bfd2`](https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66)**



---

archive/issue_events_242473.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-27T17:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242473"
}
```



---

archive/issue_events_242474.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2014-10-27T17:30:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242474"
}
```



---

archive/issue_comments_227272.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYou are perfectly right.\n\nI found no other way than storing the predecessors and then following the path from a destination to the source to find that vertex. Let me know if you have a smarter approach.\n\nThanks.",
    "created_at": "2014-10-27T17:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227272",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

You are perfectly right.

I found no other way than storing the predecessors and then following the path from a destination to the source to find that vertex. Let me know if you have a smarter approach.

Thanks.



---

archive/issue_comments_227273.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYo !\n\n> I found no other way than storing the predecessors and then following the path from a destination to the source to find that vertex. Let me know if you have a smarter approach.\n\nNo I don't see anything better `:-/`\n\nToo bad for the fast search.\n\nNathann",
    "created_at": "2014-10-28T12:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227273",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Yo !

> I found no other way than storing the predecessors and then following the path from a destination to the source to find that vertex. Let me know if you have a smarter approach.

No I don't see anything better `:-/`

Too bad for the fast search.

Nathann



---

archive/issue_comments_227274.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSince most of the computation time is in iFUB, this is not so bad.",
    "created_at": "2014-10-28T12:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227274",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">comment:12</div>

Since most of the computation time is in iFUB, this is not so bad.



---

archive/issue_comments_227275.json:
```json
{
    "body": "Changed commit from **[`7b6bfd2`](https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66)** to **[`299c323`](https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef)**",
    "created_at": "2014-10-28T15:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b6bfd2`](https://github.com/sagemath/sagetrac-mirror/commit/7b6bfd2d0dba681240357ed36f675ecb526b8c66)** to **[`299c323`](https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef)**



---

archive/issue_comments_227276.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef\"><code>299c323</code></a></td><td><code>rename 4sweep into multi_sweep</code></td></tr></table>\n",
    "created_at": "2014-10-28T15:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef"><code>299c323</code></a></td><td><code>rename 4sweep into multi_sweep</code></td></tr></table>




---

archive/issue_comments_227277.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHello again !\n\nOkay, I finally understood how this thing works and it is quite simple and clear. Cool !\n\nAaaaaand so I added a paragraph of doc that explains how the algorithm works.\n\nI also replace a couple of 4sweeps->multisweep, and remove the references from `GenericGraph.diameter` as Sphinx complained of having them twice as they are in `distances_all_pairs` too.\n\nNow, while I updated the doc of `distances_all_pairs.diameter` I did not update the doc of `GenericGraph.diameter` because I have a question: why on earth do we define `GenericGraph.diameter` instead of just importing into `GenericGraph` the function from `distances_all_pairs` ? All the documentation is mostly a copy/paste !?\n\nAlso in multi-sweep/diameter_iFUB: the documentation says that the `int *` store the result of a BFS from `source`, while actually not much can be claimed about their content when the function returns. Just say that it is memory space used by the function while it runs unless you can say something more ?..\n\nI added a commit with my changes at public/17135, tell me what you think !\n\nNathann",
    "created_at": "2014-10-29T10:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227277",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Hello again !

Okay, I finally understood how this thing works and it is quite simple and clear. Cool !

Aaaaaand so I added a paragraph of doc that explains how the algorithm works.

I also replace a couple of 4sweeps->multisweep, and remove the references from `GenericGraph.diameter` as Sphinx complained of having them twice as they are in `distances_all_pairs` too.

Now, while I updated the doc of `distances_all_pairs.diameter` I did not update the doc of `GenericGraph.diameter` because I have a question: why on earth do we define `GenericGraph.diameter` instead of just importing into `GenericGraph` the function from `distances_all_pairs` ? All the documentation is mostly a copy/paste !?

Also in multi-sweep/diameter_iFUB: the documentation says that the `int *` store the result of a BFS from `source`, while actually not much can be claimed about their content when the function returns. Just say that it is memory space used by the function while it runs unless you can say something more ?..

I added a commit with my changes at public/17135, tell me what you think !

Nathann



---

archive/issue_comments_227278.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b83f30627e26b6cc2b7c25b2ba3638e33a6758d4\"><code>b83f306</code></a></td><td><code>trac #17135: Merged with beta6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb0e4c9ce606e3c4a67dbe55d90f05cabdc9315d\"><code>eb0e4c9</code></a></td><td><code>trac #17135: Doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e58f6e790da98642209e38b41b9e06b4e2e415b\"><code>2e58f6e</code></a></td><td><code>17135: remove useless parameters of some methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0\"><code>69cb552</code></a></td><td><code>17135: import directly diameter method into GenericGraph</code></td></tr></table>\n",
    "created_at": "2014-11-01T10:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227278",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b83f30627e26b6cc2b7c25b2ba3638e33a6758d4"><code>b83f306</code></a></td><td><code>trac #17135: Merged with beta6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb0e4c9ce606e3c4a67dbe55d90f05cabdc9315d"><code>eb0e4c9</code></a></td><td><code>trac #17135: Doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e58f6e790da98642209e38b41b9e06b4e2e415b"><code>2e58f6e</code></a></td><td><code>17135: remove useless parameters of some methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0"><code>69cb552</code></a></td><td><code>17135: import directly diameter method into GenericGraph</code></td></tr></table>




---

archive/issue_comments_227279.json:
```json
{
    "body": "Changed commit from **[`299c323`](https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef)** to **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**",
    "created_at": "2014-11-01T10:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`299c323`](https://github.com/sagemath/sagetrac-mirror/commit/299c32364d6c928e4db9ee43ce17211f744b86ef)** to **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**



---

archive/issue_comments_227280.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHello,\n\nthanks for the improvements. It is much better now.\n\nFollowing your comments, I'm now importing the new method as `GenericGraph.diameter`.\nI have also removed some `int *` parameters from iFUB and multi-sweep. It avoids confusion. Also, since we only need to allocate tables (no need to initialize them), the extra cost of allocating some tables in 2 different methods is negligible.\n\nDavid.\n\nPS: git is powerful but not intuitive/easy for non experts.",
    "created_at": "2014-11-01T10:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227280",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

Hello,

thanks for the improvements. It is much better now.

Following your comments, I'm now importing the new method as `GenericGraph.diameter`.
I have also removed some `int *` parameters from iFUB and multi-sweep. It avoids confusion. Also, since we only need to allocate tables (no need to initialize them), the extra cost of allocating some tables in 2 different methods is negligible.

David.

PS: git is powerful but not intuitive/easy for non experts.



---

archive/issue_comments_227281.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHello !\n\n> Following your comments, I'm now importing the new method as `GenericGraph.diameter`.\n> I have also removed some `int *` parameters from iFUB and multi-sweep. It avoids confusion. Also, since we only need to allocate tables (no need to initialize them), the extra cost of allocating some tables in 2 different methods is negligible.\n\nWell.\n\n1) Looks ready to go\n2) Good job\n3) Thanks for this patch !\n\n> PS: git is powerful but not intuitive/easy for non experts.\n\nYep. Contributing to Sage is really hard at first `:-/`\n\nNathann",
    "created_at": "2014-11-02T22:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227281",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Hello !

> Following your comments, I'm now importing the new method as `GenericGraph.diameter`.
> I have also removed some `int *` parameters from iFUB and multi-sweep. It avoids confusion. Also, since we only need to allocate tables (no need to initialize them), the extra cost of allocating some tables in 2 different methods is negligible.

Well.

1) Looks ready to go
2) Good job
3) Thanks for this patch !

> PS: git is powerful but not intuitive/easy for non experts.

Yep. Contributing to Sage is really hard at first `:-/`

Nathann



---

archive/issue_comments_227282.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-11-02T22:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227282",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_242475.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-02T22:33:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242475"
}
```



---

archive/issue_events_242476.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-02T22:33:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242476"
}
```



---

archive/issue_comments_227283.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThank you Nathann.",
    "created_at": "2014-11-02T22:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227283",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:19" align="right">comment:19</div>

Thank you Nathann.



---

archive/issue_events_242477.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-15T16:18:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242477"
}
```



---

archive/issue_events_242478.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "08331b6bd9df597cbbe427a6d5803394b2ceb036",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-11-15T16:18:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17135#event-242478"
}
```



---

archive/issue_comments_227284.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/help](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/help)** to **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**",
    "created_at": "2014-11-15T16:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17135#issuecomment-227284",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/help](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/help)** to **[`69cb552`](https://github.com/sagemath/sagetrac-mirror/commit/69cb552df487c204e8590a9421e44c044983f8c0)**
