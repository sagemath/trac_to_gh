# Issue 17361: Poset: Add ordinal_product

archive/issues_017124.json:
```json
{
    "body": "Add the ordinal product (Enumerative combinatorics, p. 284) function of posets. In ordinal product of `P` and `Q` we have `(p,q) <= (p',q')` if either `p <= p'` or `p == p'` and `q <= q'`. This is easy one, just needs docstring etc. Direct example code:\n\n```\ndef ordinal_product(P, Q):\n    # Note: P*Q is not isomorphic to Q*P\n    elms=[(s,t) for s in P for t in Q]\n    rels_a=[((s,t),(s, t_)) for s in P for t in Q for t_ in Q if Q.lt(t, t_)]\n    rels_b=[((s,t),(s_, t_)) for s in P for t in Q for s_ in P for t_ in Q if P.lt(s, s_)]\n    return Poset((elms, rels_a+rels_b))\n```\n\n\n**CC:**  @nathanncohen\n\n**Keywords:** poset\n\n**Branch/Commit:** [5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)\n\n**Reviewer:** Nathann Cohen, Jori M\u00e4ntysalo\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/17361\n\n",
    "closed_at": "2014-11-28T17:51:58Z",
    "created_at": "2014-11-18T09:37:09Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Poset: Add ordinal_product",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17361",
    "user": "https://github.com/jm58660"
}
```
Add the ordinal product (Enumerative combinatorics, p. 284) function of posets. In ordinal product of `P` and `Q` we have `(p,q) <= (p',q')` if either `p <= p'` or `p == p'` and `q <= q'`. This is easy one, just needs docstring etc. Direct example code:

```
def ordinal_product(P, Q):
    # Note: P*Q is not isomorphic to Q*P
    elms=[(s,t) for s in P for t in Q]
    rels_a=[((s,t),(s, t_)) for s in P for t in Q for t_ in Q if Q.lt(t, t_)]
    rels_b=[((s,t),(s_, t_)) for s in P for t in Q for s_ in P for t_ in Q if P.lt(s, s_)]
    return Poset((elms, rels_a+rels_b))
```


**CC:**  @nathanncohen

**Keywords:** poset

**Branch/Commit:** [5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)

**Reviewer:** Nathann Cohen, Jori Mäntysalo

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/17361





---

archive/issue_comments_236067.json:
```json
{
    "body": "<a id='comment:1'></a>\nCould you please recall the definition here ?",
    "created_at": "2014-11-23T07:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236067",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
Could you please recall the definition here ?



---

archive/issue_comments_236068.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"poset\".",
    "created_at": "2014-11-23T07:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236068",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "poset".



---

archive/issue_comments_236069.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,11 @@\n-Add the ordinal product function of posets. See Enumerative combinatorics, p. 284.\n+Add the ordinal product (Enumerative combinatorics, p. 284) function of posets. In ordinal product of `P` and `Q` we have `(p,q) <= (p',q')` if either `p <= p'` or `p == p'` and `q <= q'`. This is easy one, just needs docstring etc. Direct example code:\n \n+```\n+def ordinal_product(P, Q):\n+    # Note: P*Q is not isomorphic to Q*P\n+    elms=[(s,t) for s in P for t in Q]\n+    rels_a=[((s,t),(s, t_)) for s in P for t in Q for t_ in Q if Q.lt(t, t_)]\n+    rels_b=[((s,t),(s_, t_)) for s in P for t in Q for s_ in P for t_ in Q if P.lt(s, s_)]\n+    return Poset((elms, rels_a+rels_b))\n+```\n+\n``````\n",
    "created_at": "2014-11-24T08:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236069",
    "user": "https://github.com/jm58660"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,11 @@
-Add the ordinal product function of posets. See Enumerative combinatorics, p. 284.
+Add the ordinal product (Enumerative combinatorics, p. 284) function of posets. In ordinal product of `P` and `Q` we have `(p,q) <= (p',q')` if either `p <= p'` or `p == p'` and `q <= q'`. This is easy one, just needs docstring etc. Direct example code:
 
+```
+def ordinal_product(P, Q):
+    # Note: P*Q is not isomorphic to Q*P
+    elms=[(s,t) for s in P for t in Q]
+    rels_a=[((s,t),(s, t_)) for s in P for t in Q for t_ in Q if Q.lt(t, t_)]
+    rels_b=[((s,t),(s_, t_)) for s in P for t in Q for s_ in P for t_ in Q if P.lt(s, s_)]
+    return Poset((elms, rels_a+rels_b))
+```
+
``````




---

archive/issue_comments_236070.json:
```json
{
    "body": "<a id='comment:3'></a>\nHere is a first proposal, that still needs some polishing.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843\">950d901</a></td><td><code>trac #17361 first tentative to implement ordinal_product of posets</code></td></tr></table>\n",
    "created_at": "2014-11-24T15:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236070",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Here is a first proposal, that still needs some polishing.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843">950d901</a></td><td><code>trac #17361 first tentative to implement ordinal_product of posets</code></td></tr></table>




---

archive/issue_comments_236071.json:
```json
{
    "body": "**Commit:** [950d9017287acc28bb240eea2679c97dbccf5843](https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843)",
    "created_at": "2014-11-24T15:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236071",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [950d9017287acc28bb240eea2679c97dbccf5843](https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843)



---

archive/issue_comments_236072.json:
```json
{
    "body": "**Branch:** [u/chapoton/17361](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17361)",
    "created_at": "2014-11-24T15:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236072",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/17361](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17361)



---

archive/issue_comments_236073.json:
```json
{
    "body": "**Author:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2014-11-24T15:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236073",
    "user": "https://github.com/fchapoton"
}
```

**Author:** Frédéric Chapoton



---

archive/issue_comments_236074.json:
```json
{
    "body": "**Changing commit** from \"[950d9017287acc28bb240eea2679c97dbccf5843](https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843)\" to \"[8b9b41de365d628074b17687490a7a510bb7a317](https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317)\".",
    "created_at": "2014-11-24T15:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[950d9017287acc28bb240eea2679c97dbccf5843](https://github.com/sagemath/sagetrac-mirror/commit/950d9017287acc28bb240eea2679c97dbccf5843)" to "[8b9b41de365d628074b17687490a7a510bb7a317](https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317)".



---

archive/issue_comments_236075.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317\">8b9b41d</a></td><td><code>trac #17361 fixup commit</code></td></tr></table>\n",
    "created_at": "2014-11-24T15:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317">8b9b41d</a></td><td><code>trac #17361 fixup commit</code></td></tr></table>




---

archive/issue_comments_236076.json:
```json
{
    "body": "<a id='comment:5'></a>\nOn #17129 I was told that strings for `ValueError` should be incomplete sentences.\n\nAfter #17053 it seems logical to have `pairs` as a default value, not `integers`.\n\nIf I am not mistaken, ordinal product of lattices is a lattice; compare to for example #17142.\n\nI have been told that all input should be documented, i.e. also `other`.",
    "created_at": "2014-11-24T17:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236076",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
On #17129 I was told that strings for `ValueError` should be incomplete sentences.

After #17053 it seems logical to have `pairs` as a default value, not `integers`.

If I am not mistaken, ordinal product of lattices is a lattice; compare to for example #17142.

I have been told that all input should be documented, i.e. also `other`.



---

archive/issue_comments_236077.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b\">2ab2d62</a></td><td><code>trac #17361 changes according to some of the reviewer's comments</code></td></tr></table>\n",
    "created_at": "2014-11-24T19:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b">2ab2d62</a></td><td><code>trac #17361 changes according to some of the reviewer's comments</code></td></tr></table>




---

archive/issue_comments_236078.json:
```json
{
    "body": "**Changing commit** from \"[8b9b41de365d628074b17687490a7a510bb7a317](https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317)\" to \"[2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b](https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b)\".",
    "created_at": "2014-11-24T19:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8b9b41de365d628074b17687490a7a510bb7a317](https://github.com/sagemath/sagetrac-mirror/commit/8b9b41de365d628074b17687490a7a510bb7a317)" to "[2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b](https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b)".



---

archive/issue_comments_236079.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhen making `SEEALSO`-part it is good to also add reference of new function to old ones. I guess that most seealso-references should be bidirectional.\n\nSorry for forgotting to say this in first message.",
    "created_at": "2014-11-24T19:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236079",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>
When making `SEEALSO`-part it is good to also add reference of new function to old ones. I guess that most seealso-references should be bidirectional.

Sorry for forgotting to say this in first message.



---

archive/issue_comments_236080.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f\">abeef07</a></td><td><code>trac #17361 cross-references</code></td></tr></table>\n",
    "created_at": "2014-11-24T20:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236080",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f">abeef07</a></td><td><code>trac #17361 cross-references</code></td></tr></table>




---

archive/issue_comments_236081.json:
```json
{
    "body": "**Changing commit** from \"[2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b](https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b)\" to \"[abeef07ddd88246d8564692ff57ff17f62c5eb3f](https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f)\".",
    "created_at": "2014-11-24T20:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236081",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b](https://github.com/sagemath/sagetrac-mirror/commit/2ab2d62b69f9ee7a115c4db2bbbab8a8af1e637b)" to "[abeef07ddd88246d8564692ff57ff17f62c5eb3f](https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f)".



---

archive/issue_comments_236082.json:
```json
{
    "body": "<a id='comment:9'></a>\nAarghs, we already have the function! It is `lexicographic_product` on graphs, and I guess it must just be mapped to function of poset. (Like `minimal_elements` on poset is actually `sources` on digraphs.)",
    "created_at": "2014-11-25T07:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236082",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>
Aarghs, we already have the function! It is `lexicographic_product` on graphs, and I guess it must just be mapped to function of poset. (Like `minimal_elements` on poset is actually `sources` on digraphs.)



---

archive/issue_comments_236083.json:
```json
{
    "body": "<a id='comment:10'></a>\nI cc Nathann to this, because he knows digraphs. I tested with product of `BooleanLattice(5)` with itself. It took 14 seconds with code of this ticket, whereas `lexicographic_product` took 18 seconds. This is interesting. Nathann has just corrected a slowdown on generating digraph from dict, maybe this is related?",
    "created_at": "2014-11-25T07:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236083",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>
I cc Nathann to this, because he knows digraphs. I tested with product of `BooleanLattice(5)` with itself. It took 14 seconds with code of this ticket, whereas `lexicographic_product` took 18 seconds. This is interesting. Nathann has just corrected a slowdown on generating digraph from dict, maybe this is related?



---

archive/issue_comments_236084.json:
```json
{
    "body": "<a id='comment:11'></a>\nHello !\n\nWell, first for the poset thing you can be MUCH more efficient. In `Poset.ordinal_sum` you add only edges between the top elements of one and the bottom elements of the other. Why don't you do that here too ?\n\n(please, cache the top/bottom elements of each poset).\n\nAlso, `for s in self for s2 in self.lower_covers(s)` should probably be `for s,s in cover_relations_iterator`.\n\nFor the graph code, it could be improved by replacing the calls to `add_edge` by one call to `add_edges`. The difference is that `add_edge` supports many kind of inputs (a pair, or two points, or three points) and that `add_edge` checks it at every call (while `add_edges` does it once).\n\nNathann",
    "created_at": "2014-11-25T08:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236084",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
Hello !

Well, first for the poset thing you can be MUCH more efficient. In `Poset.ordinal_sum` you add only edges between the top elements of one and the bottom elements of the other. Why don't you do that here too ?

(please, cache the top/bottom elements of each poset).

Also, `for s in self for s2 in self.lower_covers(s)` should probably be `for s,s in cover_relations_iterator`.

For the graph code, it could be improved by replacing the calls to `add_edge` by one call to `add_edges`. The difference is that `add_edge` supports many kind of inputs (a pair, or two points, or three points) and that `add_edge` checks it at every call (while `add_edges` does it once).

Nathann



---

archive/issue_comments_236085.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac\">c7122b2</a></td><td><code>trac #17361 using cover iterator</code></td></tr></table>\n",
    "created_at": "2014-11-25T20:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac">c7122b2</a></td><td><code>trac #17361 using cover iterator</code></td></tr></table>




---

archive/issue_comments_236086.json:
```json
{
    "body": "**Changing commit** from \"[abeef07ddd88246d8564692ff57ff17f62c5eb3f](https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f)\" to \"[c7122b214135bbd7c77d840841753c94a05a9dac](https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac)\".",
    "created_at": "2014-11-25T20:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[abeef07ddd88246d8564692ff57ff17f62c5eb3f](https://github.com/sagemath/sagetrac-mirror/commit/abeef07ddd88246d8564692ff57ff17f62c5eb3f)" to "[c7122b214135bbd7c77d840841753c94a05a9dac](https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac)".



---

archive/issue_comments_236087.json:
```json
{
    "body": "**Changing commit** from \"[c7122b214135bbd7c77d840841753c94a05a9dac](https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac)\" to \"[5686cc39d5e8ac58223b40f560de0d8812b623cb](https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb)\".",
    "created_at": "2014-11-25T21:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c7122b214135bbd7c77d840841753c94a05a9dac](https://github.com/sagemath/sagetrac-mirror/commit/c7122b214135bbd7c77d840841753c94a05a9dac)" to "[5686cc39d5e8ac58223b40f560de0d8812b623cb](https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb)".



---

archive/issue_comments_236088.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb\">5686cc3</a></td><td><code>trac #17361 correct the failing doctest</code></td></tr></table>\n",
    "created_at": "2014-11-25T21:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb">5686cc3</a></td><td><code>trac #17361 correct the failing doctest</code></td></tr></table>




---

archive/issue_comments_236089.json:
```json
{
    "body": "<a id='comment:14'></a>\n(you can also use the min_elements/max_elements trick on the add_edge call which contains `for t in other for t2 in other`. That is where it will save the most)",
    "created_at": "2014-11-26T02:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236089",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
(you can also use the min_elements/max_elements trick on the add_edge call which contains `for t in other for t2 in other`. That is where it will save the most)



---

archive/issue_comments_236090.json:
```json
{
    "body": "**Changing commit** from \"[5686cc39d5e8ac58223b40f560de0d8812b623cb](https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb)\" to \"[c59047103bc9cf22d2526c7ae146492fec92b698](https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698)\".",
    "created_at": "2014-11-26T16:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5686cc39d5e8ac58223b40f560de0d8812b623cb](https://github.com/sagemath/sagetrac-mirror/commit/5686cc39d5e8ac58223b40f560de0d8812b623cb)" to "[c59047103bc9cf22d2526c7ae146492fec92b698](https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698)".



---

archive/issue_comments_236091.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698\">c590471</a></td><td><code>trac #17361 using max and min elements for a better algorithm</code></td></tr></table>\n",
    "created_at": "2014-11-26T16:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698">c590471</a></td><td><code>trac #17361 using max and min elements for a better algorithm</code></td></tr></table>




---

archive/issue_comments_236092.json:
```json
{
    "body": "<a id='comment:16'></a>\nHello !\n\nWell, this patch looks good to me, and all tests pass. Jory: I tested the product of two `BooleanLattice(5)` and it takes 2.5 seconds. It is still a lot, but better than 17s `:-/`\n\n```\nsage: %timeit p.ordinal_product(p)\n1 loops, best of 3: 2.46 s per loop\n```\n\nI do not understand much what the profiling says, though. It seems that 1.3s is used by the 'has_edge' function (Why ???? `O_o`)\n\nThe code of `transitive_reduction` can be rewritten more efficiently, though. Actually, this is a very important point since this function is called every time a poset is created, to build its hasse diagram.\n\nSorry guys, but I have to give up for tonight. 1am, and I will need my brain tomorrow again. Good night, and thanks for the patch !\n\nNathann",
    "created_at": "2014-11-26T19:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236092",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Hello !

Well, this patch looks good to me, and all tests pass. Jory: I tested the product of two `BooleanLattice(5)` and it takes 2.5 seconds. It is still a lot, but better than 17s `:-/`

```
sage: %timeit p.ordinal_product(p)
1 loops, best of 3: 2.46 s per loop
```

I do not understand much what the profiling says, though. It seems that 1.3s is used by the 'has_edge' function (Why ???? `O_o`)

The code of `transitive_reduction` can be rewritten more efficiently, though. Actually, this is a very important point since this function is called every time a poset is created, to build its hasse diagram.

Sorry guys, but I have to give up for tonight. 1am, and I will need my brain tomorrow again. Good night, and thanks for the patch !

Nathann



---

archive/issue_comments_236093.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-11-26T19:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236093",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_158902.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-26T19:36:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158902"
}
```



---

archive/issue_events_158903.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-26T19:36:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158903"
}
```



---

archive/issue_events_158904.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-26T19:36:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158904"
}
```



---

archive/issue_comments_236094.json:
```json
{
    "body": "<a id='comment:19'></a>\nCode seems to be clear. Just to clarify to Nathann: I reported this one, but have not written any of the code. So thanks goes to Fr\u00e9d\u00e9ric!\n\nI think that there is no need to have `sorted` on examples. They are kind of automatically sorted, when are all same type. But this is of course a minor thing.",
    "created_at": "2014-11-26T19:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236094",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'></a>
Code seems to be clear. Just to clarify to Nathann: I reported this one, but have not written any of the code. So thanks goes to Frédéric!

I think that there is no need to have `sorted` on examples. They are kind of automatically sorted, when are all same type. But this is of course a minor thing.



---

archive/issue_comments_236095.json:
```json
{
    "body": "<a id='comment:20'></a>\nYooooooo !\n\n> Code seems to be clear. Just to clarify to Nathann: I reported this one, but have not written any of the code. So thanks goes to Fr\u00e9d\u00e9ric!\n\n\nRight right, all the commits are his !\n\nBy the way, Jakob Kr\u00f6ker just sent me an email about Posets and I told him that you had a half-plan of adding some doc there.\n\nGod, I should be sleeping `T_T` \n\n> I think that there is no need to have `sorted` on examples. They are kind of automatically sorted, when are all same type. But this is of course a minor thing.\n\n\nI don't know. Graphs+vertex labels mean dictionary somewhere, so I do not trust anything `^^;`\n\nNathann",
    "created_at": "2014-11-26T20:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236095",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
Yooooooo !

> Code seems to be clear. Just to clarify to Nathann: I reported this one, but have not written any of the code. So thanks goes to Frédéric!


Right right, all the commits are his !

By the way, Jakob Kröker just sent me an email about Posets and I told him that you had a half-plan of adding some doc there.

God, I should be sleeping `T_T` 

> I think that there is no need to have `sorted` on examples. They are kind of automatically sorted, when are all same type. But this is of course a minor thing.


I don't know. Graphs+vertex labels mean dictionary somewhere, so I do not trust anything `^^;`

Nathann



---

archive/issue_events_158905.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T06:44:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158905"
}
```



---

archive/issue_events_158906.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T06:44:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158906"
}
```



---

archive/issue_events_158907.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T06:44:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158907"
}
```



---

archive/issue_comments_236096.json:
```json
{
    "body": "<a id='comment:21'></a>\nStill one thing: Could this return a lattice instead of only poset when both `this` and `other` are lattices?\n\nIf not, that is OK: in that case, just mark this back to positive_review again.",
    "created_at": "2014-11-27T06:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236096",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'></a>
Still one thing: Could this return a lattice instead of only poset when both `this` and `other` are lattices?

If not, that is OK: in that case, just mark this back to positive_review again.



---

archive/issue_comments_236097.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7\">56246c8</a></td><td><code>trac #17361 ordinal_product of lattices as lattice</code></td></tr></table>\n",
    "created_at": "2014-11-27T19:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7">56246c8</a></td><td><code>trac #17361 ordinal_product of lattices as lattice</code></td></tr></table>




---

archive/issue_comments_236098.json:
```json
{
    "body": "**Changing commit** from \"[c59047103bc9cf22d2526c7ae146492fec92b698](https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698)\" to \"[56246c8f3abb1e66a2df1452f6016d8b288f37d7](https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7)\".",
    "created_at": "2014-11-27T19:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c59047103bc9cf22d2526c7ae146492fec92b698](https://github.com/sagemath/sagetrac-mirror/commit/c59047103bc9cf22d2526c7ae146492fec92b698)" to "[56246c8f3abb1e66a2df1452f6016d8b288f37d7](https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7)".



---

archive/issue_events_158908.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-27T19:21:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158908"
}
```



---

archive/issue_events_158909.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-27T19:21:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158909"
}
```



---

archive/issue_comments_236099.json:
```json
{
    "body": "<a id='comment:24'></a>\n`Poset({0:[1,2]})` is a meet semilattice, but it's ordinal product with itself is not a meet semilattice. (resp. for join semilattice). Hence we have only two options: both arguments are lattices and so is return type also lattice, or else return type is \"only\" poset.",
    "created_at": "2014-11-27T19:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236099",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>
`Poset({0:[1,2]})` is a meet semilattice, but it's ordinal product with itself is not a meet semilattice. (resp. for join semilattice). Hence we have only two options: both arguments are lattices and so is return type also lattice, or else return type is "only" poset.



---

archive/issue_events_158910.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T19:48:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158910"
}
```



---

archive/issue_events_158911.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T19:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158911"
}
```



---

archive/issue_comments_236100.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91\">5aced5a</a></td><td><code>trac #17361 not for semilattices, only for lattices</code></td></tr></table>\n",
    "created_at": "2014-11-27T19:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91">5aced5a</a></td><td><code>trac #17361 not for semilattices, only for lattices</code></td></tr></table>




---

archive/issue_comments_236101.json:
```json
{
    "body": "**Changing commit** from \"[56246c8f3abb1e66a2df1452f6016d8b288f37d7](https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7)\" to \"[5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)\".",
    "created_at": "2014-11-27T19:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[56246c8f3abb1e66a2df1452f6016d8b288f37d7](https://github.com/sagemath/sagetrac-mirror/commit/56246c8f3abb1e66a2df1452f6016d8b288f37d7)" to "[5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)".



---

archive/issue_events_158912.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-27T21:13:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158912"
}
```



---

archive/issue_events_158913.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-27T21:13:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158913"
}
```



---

archive/issue_events_158914.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T21:19:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158914"
}
```



---

archive/issue_events_158915.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-27T21:19:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158915"
}
```



---

archive/issue_comments_236102.json:
```json
{
    "body": "**Changing reviewer** from \"Nathann Cohen\" to \"Nathann Cohen, Jori M\u00e4ntysalo\".",
    "created_at": "2014-11-27T21:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236102",
    "user": "https://github.com/jm58660"
}
```

**Changing reviewer** from "Nathann Cohen" to "Nathann Cohen, Jori Mäntysalo".



---

archive/issue_comments_236103.json:
```json
{
    "body": "<a id='comment:27'></a>\nLooks good. I tested for example empty poset, one-element poset and products of chain and antichain.",
    "created_at": "2014-11-27T21:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236103",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:27'></a>
Looks good. I tested for example empty poset, one-element poset and products of chain and antichain.



---

archive/issue_comments_236104.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/17361](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17361)\" to \"[5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)\".",
    "created_at": "2014-11-28T17:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17361#issuecomment-236104",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/17361](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17361)" to "[5aced5adce233e4506799920dcd9c751b326bd91](https://github.com/sagemath/sagetrac-mirror/commit/5aced5adce233e4506799920dcd9c751b326bd91)".



---

archive/issue_events_158916.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-28T17:51:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158916"
}
```



---

archive/issue_events_158917.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-28T17:51:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17361",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17361#event-158917"
}
```
