# Issue 17790: convert not coerce padics symbolic function arguments

archive/issues_017553.json:
```json
{
    "assignees": [],
    "body": "This affects authors of function code but shows also in:\n\n```\nsage: binomial(Qp(5)(8),3)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-43da6d5c56db> in <module>()\n----> 1 binomial(Qp(Integer(5))(Integer(8)),Integer(3))\n\n/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9048)()\n    842             (0, Integer Ring)\n    843         \"\"\"\n--> 844         res = super(GinacFunction, self).__call__(*args, **kwds)\n    845 \n    846         # Convert to Integer if the output was of type \"int\" and any of\n\n/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:10572)()\n    991             res = self._evalf_try_(*args)\n    992             if res is None:\n--> 993                 res = super(BuiltinFunction, self).__call__(\n    994                         *args, coerce=coerce, hold=hold)\n    995 \n\n/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6301)()\n    485                             nargs[i] = SR.coerce(carg)\n    486                         except Exception:\n--> 487                             raise TypeError, \"cannot coerce arguments: %s\"%(err)\n    488                 args = nargs\n    489         else: # coerce == False\n\nTypeError: cannot coerce arguments: no canonical coercion from 5-adic Field with capped relative precision 20 to Symbolic Ring\n``` \n\ntest.\n\nCC:  @jdemeyer\n\nBranch/Commit: **[u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code) @ [`e4a30b6`](https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a)**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17790_\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2015-02-17T06:45:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "convert not coerce padics symbolic function arguments",
    "type": "issue",
    "updated_at": "2017-12-12T08:23:33Z",
    "url": "https://github.com/sagemath/sage/issues/17790",
    "user": "https://github.com/rwst"
}
```
This affects authors of function code but shows also in:

```
sage: binomial(Qp(5)(8),3)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-43da6d5c56db> in <module>()
----> 1 binomial(Qp(Integer(5))(Integer(8)),Integer(3))

/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9048)()
    842             (0, Integer Ring)
    843         """
--> 844         res = super(GinacFunction, self).__call__(*args, **kwds)
    845 
    846         # Convert to Integer if the output was of type "int" and any of

/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:10572)()
    991             res = self._evalf_try_(*args)
    992             if res is None:
--> 993                 res = super(BuiltinFunction, self).__call__(
    994                         *args, coerce=coerce, hold=hold)
    995 

/home/ralf/sage/src/sage/symbolic/function.pyx in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6301)()
    485                             nargs[i] = SR.coerce(carg)
    486                         except Exception:
--> 487                             raise TypeError, "cannot coerce arguments: %s"%(err)
    488                 args = nargs
    489         else: # coerce == False

TypeError: cannot coerce arguments: no canonical coercion from 5-adic Field with capped relative precision 20 to Symbolic Ring
``` 

test.

CC:  @jdemeyer

Branch/Commit: **[u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code) @ [`e4a30b6`](https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a)**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/17790_





---

archive/issue_events_253300.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-17T06:45:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253300"
}
```



---

archive/issue_events_253301.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-17T06:45:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253301"
}
```



---

archive/issue_events_253302.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-17T06:45:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253302"
}
```



---

archive/issue_events_253303.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-17T06:45:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253303"
}
```



---

archive/issue_comments_240297.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSo, either it's a problem of p-adics not being coercible into `SR` (which they should be?), or there should not be coercion but conversion in `function.pyx`.",
    "created_at": "2015-03-05T09:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240297",
    "user": "https://github.com/rwst"
}
```

<div id="comment:1" align="right">comment:1</div>

So, either it's a problem of p-adics not being coercible into `SR` (which they should be?), or there should not be coercion but conversion in `function.pyx`.



---

archive/issue_events_253304.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T09:23:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253304"
}
```



---

archive/issue_events_253305.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T09:23:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253305"
}
```



---

archive/issue_comments_240298.json:
```json
{
    "body": "Branch: **[u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code)**",
    "created_at": "2015-03-05T15:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240298",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code)**



---

archive/issue_comments_240299.json:
```json
{
    "body": "Commit: **[`f6e2113`](https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f)**",
    "created_at": "2015-03-05T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240299",
    "user": "https://github.com/rwst"
}
```

Commit: **[`f6e2113`](https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f)**



---

archive/issue_comments_240300.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-03-05T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240300",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_240301.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt was the latter alternative, as there is no coercion. Please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f\"><code>f6e2113</code></a></td><td><code>17790: add padics to the conversion workaround for symbolic function arguments</code></td></tr></table>\n",
    "created_at": "2015-03-05T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240301",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

It was the latter alternative, as there is no coercion. Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f"><code>f6e2113</code></a></td><td><code>17790: add padics to the conversion workaround for symbolic function arguments</code></td></tr></table>




---

archive/issue_events_253306.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T15:26:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "title_is": "convert not coerce padics symbolic function arguments",
    "title_was": "BuiltinFunction doesn't pass non-SR-coercible arguments to function code",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253306"
}
```



---

archive/issue_events_253307.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T15:26:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253307"
}
```



---

archive/issue_comments_240302.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe recent #17852 makes `binomial(Qp(2)(9),5)` fail in this branch with `TypeError: function did not return a symbolic expression or an element that can be coerced into a symbolic expression`. Reason: `rings.arith.binomial` now returns (correctly) `1 + 5 + 2*5^2 + O(5^20)` instead of `56`.\n\nSo what should `Function` do when `self.eval` returns something not coercible?",
    "created_at": "2015-04-21T06:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240302",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

The recent #17852 makes `binomial(Qp(2)(9),5)` fail in this branch with `TypeError: function did not return a symbolic expression or an element that can be coerced into a symbolic expression`. Reason: `rings.arith.binomial` now returns (correctly) `1 + 5 + 2*5^2 + O(5^20)` instead of `56`.

So what should `Function` do when `self.eval` returns something not coercible?



---

archive/issue_events_253308.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-21T06:45:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253308"
}
```



---

archive/issue_events_253309.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-21T06:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253309"
}
```



---

archive/issue_events_253310.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-21T06:45:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253310"
}
```



---

archive/issue_events_253311.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-21T06:45:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253311"
}
```



---

archive/issue_comments_240303.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n@jdemeyer, what reason is there in the respective snippet of `Function::__call__` l.478-491 not to do the following:\n\n```\n                nargs = [None]*len(args)\n                for i in range(len(args)):\n                    carg = args[i]\n                    try:\n                        nargs[i] = SR.coerce(carg)\n                    except Exception:\n                        nargs[i] = SR(carg)\n```\ni.e. not throwing at all. I keep needing exceptions like the `Qp` of this ticket.\n\nDo we have a fundamental problem here? Why can `rings.arith...` handle this differently?",
    "created_at": "2015-07-01T06:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240303",
    "user": "https://github.com/rwst"
}
```

<div id="comment:5" align="right">comment:5</div>

@jdemeyer, what reason is there in the respective snippet of `Function::__call__` l.478-491 not to do the following:

```
                nargs = [None]*len(args)
                for i in range(len(args)):
                    carg = args[i]
                    try:
                        nargs[i] = SR.coerce(carg)
                    except Exception:
                        nargs[i] = SR(carg)
```
i.e. not throwing at all. I keep needing exceptions like the `Qp` of this ticket.

Do we have a fundamental problem here? Why can `rings.arith...` handle this differently?



---

archive/issue_comments_240304.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89f5b2df20d69486416527a935760c6b078ff2d9\"><code>89f5b2d</code></a></td><td><code>Merge branch 'develop' into t/17790/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294\"><code>9a29cd1</code></a></td><td><code>17790: try coercion then conversion</code></td></tr></table>\n",
    "created_at": "2016-06-17T13:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240304",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89f5b2df20d69486416527a935760c6b078ff2d9"><code>89f5b2d</code></a></td><td><code>Merge branch 'develop' into t/17790/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294"><code>9a29cd1</code></a></td><td><code>17790: try coercion then conversion</code></td></tr></table>




---

archive/issue_comments_240305.json:
```json
{
    "body": "Changed commit from **[`f6e2113`](https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f)** to **[`9a29cd1`](https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294)**",
    "created_at": "2016-06-17T13:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6e2113`](https://github.com/sagemath/sagetrac-mirror/commit/f6e21137f97771b916ceae7f16a59805af78291f)** to **[`9a29cd1`](https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294)**



---

archive/issue_comments_240306.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -31,3 +31,4 @@\n TypeError: cannot coerce arguments: no canonical coercion from 5-adic Field with capped relative precision 20 to Symbolic Ring\n ``` \n \n+test.\n``````\n",
    "created_at": "2016-06-17T15:30:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240306",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -31,3 +31,4 @@
 TypeError: cannot coerce arguments: no canonical coercion from 5-adic Field with capped relative precision 20 to Symbolic Ring
 ``` 
 
+test.
``````




---

archive/issue_events_253312.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-21T06:31:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253312"
}
```



---

archive/issue_events_253313.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-21T06:31:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253313"
}
```



---

archive/issue_events_253314.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-21T06:31:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253314"
}
```



---

archive/issue_events_253315.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-21T06:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253315"
}
```



---

archive/issue_comments_240307.json:
```json
{
    "body": "Changed commit from **[`9a29cd1`](https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294)** to **[`e4a30b6`](https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a)**",
    "created_at": "2016-08-05T08:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a29cd1`](https://github.com/sagemath/sagetrac-mirror/commit/9a29cd1da4d4a7f974ba34c5d981a43802781294)** to **[`e4a30b6`](https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a)**



---

archive/issue_comments_240308.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a\"><code>e4a30b6</code></a></td><td><code>Merge branch 'develop' into t/17790/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code</code></td></tr></table>\n",
    "created_at": "2016-08-05T08:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4a30b68bd6d81deb579806d50d5d8f7630a558a"><code>e4a30b6</code></a></td><td><code>Merge branch 'develop' into t/17790/builtinfunction_doesn_t_pass_non_sr_coercible_arguments_to_function_code</code></td></tr></table>




---

archive/issue_comments_240309.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\none failing doctest see patchbot report",
    "created_at": "2016-08-18T16:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240309",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

one failing doctest see patchbot report



---

archive/issue_events_253316.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-19T06:40:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253316"
}
```



---

archive/issue_events_253317.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-19T06:40:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253317"
}
```



---

archive/issue_events_253318.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-09T08:45:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253318"
}
```



---

archive/issue_events_253319.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-09T08:45:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253319"
}
```



---

archive/issue_events_253320.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-09T08:45:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253320"
}
```



---

archive/issue_comments_240310.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think this ticket is wontfix because a better solution would be to write a global Python function accepting everything (as in rings.arith...) and dispatch to the symbolic function for symbolic arguments.\n\nIn the ticket case just do\n\n```\nsage: from sage.arith.misc import binomial\nsage: binomial(Qp(5)(8),3)\n1 + 5 + 2*5^2 + O(5^20)\n```",
    "created_at": "2017-11-09T08:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17790#issuecomment-240310",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

I think this ticket is wontfix because a better solution would be to write a global Python function accepting everything (as in rings.arith...) and dispatch to the symbolic function for symbolic arguments.

In the ticket case just do

```
sage: from sage.arith.misc import binomial
sage: binomial(Qp(5)(8),3)
1 + 5 + 2*5^2 + O(5^20)
```



---

archive/issue_events_253321.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-09T08:45:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253321"
}
```



---

archive/issue_events_253322.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-09T08:45:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253322"
}
```



---

archive/issue_events_253323.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253323"
}
```



---

archive/issue_events_253324.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253324"
}
```



---

archive/issue_events_253325.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17790",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17790#event-253325"
}
```
