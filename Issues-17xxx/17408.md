# Issue 17408: Faster transitive_reduction (=> faster Poset creation)

archive/issues_017171.json:
```json
{
    "body": "As reported on #17361, the call to `transitive_reduction` represents a non-negligible part of Poset creation.\n\nThis branch re-implements it for acyclic graphs.\n\n```\nsage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\nsage: %timeit g.transitive_reduction()\n1 loops, best of 3: 1.02 s per loop\nsage: %timeit g.transitive_reduction(acyclic=True)\n10 loops, best of 3: 28.9 ms per loop\n```\n\nNow the critical part in the creation of a `Poset` is triggered by `UniqueRepresentation`. As soon as you create a `Poset` it is being compared with those that already exists... That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it).\n\nNathann\n\nCC:  @fchapoton @jm58660\n\nKeywords: poset\n\nBranch/Commit: [ade98aa90d2954a59a6fad342b92d23f01803308](https://github.com/sagemath/sagetrac-mirror/commit/ade98aa90d2954a59a6fad342b92d23f01803308)\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17408\n\n",
    "closed_at": "2014-12-16T13:57:13Z",
    "created_at": "2014-11-27T14:14:09Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Faster transitive_reduction (=> faster Poset creation)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17408",
    "user": "https://github.com/nathanncohen"
}
```
As reported on #17361, the call to `transitive_reduction` represents a non-negligible part of Poset creation.

This branch re-implements it for acyclic graphs.

```
sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
sage: %timeit g.transitive_reduction()
1 loops, best of 3: 1.02 s per loop
sage: %timeit g.transitive_reduction(acyclic=True)
10 loops, best of 3: 28.9 ms per loop
```

Now the critical part in the creation of a `Poset` is triggered by `UniqueRepresentation`. As soon as you create a `Poset` it is being compared with those that already exists... That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it).

Nathann

CC:  @fchapoton @jm58660

Keywords: poset

Branch/Commit: [ade98aa90d2954a59a6fad342b92d23f01803308](https://github.com/sagemath/sagetrac-mirror/commit/ade98aa90d2954a59a6fad342b92d23f01803308)

Reviewer: Frédéric Chapoton

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17408





---

archive/issue_comments_299602.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-27T14:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299602",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299603.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,24 @@\n \n This branch re-implements it for acyclic graphs.\n \n+Before\n+\n+```\n+sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\n+sage: %time Poset(g)\n+CPU times: user 1.3 s, sys: 8 ms, total: 1.3 s\n+Wall time: 1.29 s\n+Finite poset containing 1024 elements\n+```\n+\n+After\n+\n+```\n+sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\n+sage: %time Poset(g)\n+CPU times: user 292 ms, sys: 12 ms, total: 304 ms\n+Wall time: 265 ms\n+Finite poset containing 1024 elements\n+```\n+\n+Note that a LOT of time is lost on calls to `__eq__`. If I make no mistake it is because `Posets` are `UniqueRepresentation`. I would personally be very very glad if we could get rid of that.\n``````\n",
    "created_at": "2014-11-27T14:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299603",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,24 @@
 
 This branch re-implements it for acyclic graphs.
 
+Before
+
+```
+sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
+sage: %time Poset(g)
+CPU times: user 1.3 s, sys: 8 ms, total: 1.3 s
+Wall time: 1.29 s
+Finite poset containing 1024 elements
+```
+
+After
+
+```
+sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
+sage: %time Poset(g)
+CPU times: user 292 ms, sys: 12 ms, total: 304 ms
+Wall time: 265 ms
+Finite poset containing 1024 elements
+```
+
+Note that a LOT of time is lost on calls to `__eq__`. If I make no mistake it is because `Posets` are `UniqueRepresentation`. I would personally be very very glad if we could get rid of that.
``````




---

archive/issue_comments_299604.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/17408\"",
    "created_at": "2014-11-27T14:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299604",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/17408"



---

archive/issue_comments_299605.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|\n|[ce577a9](https://github.com/sagemath/sagetrac-mirror/commit/ce577a909e3ac2835f975cc9515b54459174e8ca)|`trac #17408: Faster transitive_reduction (=> faster Poset creation)`|",
    "created_at": "2014-11-27T14:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299605",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
|[ce577a9](https://github.com/sagemath/sagetrac-mirror/commit/ce577a909e3ac2835f975cc9515b54459174e8ca)|`trac #17408: Faster transitive_reduction (=> faster Poset creation)`|



---

archive/issue_comments_299606.json:
```json
{
    "body": "Changing commit from \"\" to \"ce577a909e3ac2835f975cc9515b54459174e8ca\"",
    "created_at": "2014-11-27T14:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "ce577a909e3ac2835f975cc9515b54459174e8ca"



---

archive/issue_comments_299607.json:
```json
{
    "body": "Changing keywords from \"\" to \"poset\".",
    "created_at": "2014-11-27T21:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299607",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "poset".



---

archive/issue_comments_299608.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,24 +2,14 @@\n \n This branch re-implements it for acyclic graphs.\n \n-Before\n-\n ```\n sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\n-sage: %time Poset(g)\n-CPU times: user 1.3 s, sys: 8 ms, total: 1.3 s\n-Wall time: 1.29 s\n-Finite poset containing 1024 elements\n+sage: %timeit g.transitive_reduction()\n+1 loops, best of 3: 1.02 s per loop\n+sage: %timeit g.transitive_reduction(acyclic=True)\n+10 loops, best of 3: 28.9 ms per loop\n ```\n \n-After\n+Now the critical part in the creation of a `Poset` is triggered by `UniqueRepresentation`. As soon as you create a `Poset` it is being compared with those that already exists... That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it).\n \n-```\n-sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\n-sage: %time Poset(g)\n-CPU times: user 292 ms, sys: 12 ms, total: 304 ms\n-Wall time: 265 ms\n-Finite poset containing 1024 elements\n-```\n-\n-Note that a LOT of time is lost on calls to `__eq__`. If I make no mistake it is because `Posets` are `UniqueRepresentation`. I would personally be very very glad if we could get rid of that.\n+Nathann\n``````\n",
    "created_at": "2014-11-28T06:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299608",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,24 +2,14 @@
 
 This branch re-implements it for acyclic graphs.
 
-Before
-
 ```
 sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
-sage: %time Poset(g)
-CPU times: user 1.3 s, sys: 8 ms, total: 1.3 s
-Wall time: 1.29 s
-Finite poset containing 1024 elements
+sage: %timeit g.transitive_reduction()
+1 loops, best of 3: 1.02 s per loop
+sage: %timeit g.transitive_reduction(acyclic=True)
+10 loops, best of 3: 28.9 ms per loop
 ```
 
-After
+Now the critical part in the creation of a `Poset` is triggered by `UniqueRepresentation`. As soon as you create a `Poset` it is being compared with those that already exists... That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it).
 
-```
-sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
-sage: %time Poset(g)
-CPU times: user 292 ms, sys: 12 ms, total: 304 ms
-Wall time: 265 ms
-Finite poset containing 1024 elements
-```
-
-Note that a LOT of time is lost on calls to `__eq__`. If I make no mistake it is because `Posets` are `UniqueRepresentation`. I would personally be very very glad if we could get rid of that.
+Nathann
``````




---

archive/issue_comments_299609.json:
```json
{
    "body": "<a id='comment:6'></a>\n\"That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it).\"\n\nWhat happens with key= -parameter? If you put a different one in every poset, I think it should not try to compare to posets with different key.",
    "created_at": "2014-11-28T06:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299609",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>
"That is actually pre-computing the equality relationships between all existing posets even if you never asked for it, and I personally see it as wasted time (especially since I cannot disable it)."

What happens with key= -parameter? If you put a different one in every poset, I think it should not try to compare to posets with different key.



---

archive/issue_comments_299610.json:
```json
{
    "body": "<a id='comment:7'></a>\nIndeed, but then the poset equality is broken. And I have no control the posets built by subfunctions like the poset constructors, the products, etc ...",
    "created_at": "2014-11-28T06:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299610",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Indeed, but then the poset equality is broken. And I have no control the posets built by subfunctions like the poset constructors, the products, etc ...



---

archive/issue_comments_299611.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [ncohen](#comment%3A7):\n> Indeed, but then the poset equality is broken. And I have no control the posets built by subfunctions like the poset constructors, the products, etc ...\n\n\nTrue. Should there be a global setting for it? Or an option in every poset function for this?",
    "created_at": "2014-11-28T07:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299611",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>
Replying to [ncohen](#comment%3A7):
> Indeed, but then the poset equality is broken. And I have no control the posets built by subfunctions like the poset constructors, the products, etc ...


True. Should there be a global setting for it? Or an option in every poset function for this?



---

archive/issue_comments_299612.json:
```json
{
    "body": "<a id='comment:9'></a>\n> True. Should there be a global setting for it? Or an option in every poset function for this?\n\n\nTruth is that I do not know. This feature is a class inheritance from `UniqueRepresentation`, so you cannot really \"flag\" that.\n\nYep. Complicated. Don't know how to make both work easily `-_-`\n\nNathann",
    "created_at": "2014-11-28T07:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299612",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
> True. Should there be a global setting for it? Or an option in every poset function for this?


Truth is that I do not know. This feature is a class inheritance from `UniqueRepresentation`, so you cannot really "flag" that.

Yep. Complicated. Don't know how to make both work easily `-_-`

Nathann



---

archive/issue_comments_299613.json:
```json
{
    "body": "<a id='comment:10'></a>\nObjects produced in an inner loop should not be `UniqueRepresentation`. Parent are *designed* to be heavy objects. You should be creating them at least one or two orders less frequently than your most frequently created objects (unless your computations aren't bound by creation of objects). If you're finding that you're creating posets frequently, then you should make a \"lightweight\" version of poset that's not carrying around all the parent baggage.\n\nIf you're finding that those \"lightweight\" posets need to be turned into full-fledged parents every now and again, then consider making it possible to create a full-scale poset from a lightweight one.\n\nSee [http://trac.sagemath.org/ticket/14356#comment:6](http://trac.sagemath.org/ticket/14356#comment:6)",
    "created_at": "2014-11-28T08:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299613",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:10'></a>
Objects produced in an inner loop should not be `UniqueRepresentation`. Parent are *designed* to be heavy objects. You should be creating them at least one or two orders less frequently than your most frequently created objects (unless your computations aren't bound by creation of objects). If you're finding that you're creating posets frequently, then you should make a "lightweight" version of poset that's not carrying around all the parent baggage.

If you're finding that those "lightweight" posets need to be turned into full-fledged parents every now and again, then consider making it possible to create a full-scale poset from a lightweight one.

See [http://trac.sagemath.org/ticket/14356#comment:6](http://trac.sagemath.org/ticket/14356#comment:6)



---

archive/issue_comments_299614.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [nbruin](#comment%3A10):\n\n> If you're finding that you're creating posets frequently, then you should make a \"lightweight\" version of poset that's not carrying around all the parent baggage.\n\n\nMaybe we already have this: it is called Hasse diagram?\n\nI mean, can we have a code generating only hasse diagrams and using functions from `hasse_diagram.py`? I have been computing quite many calculations of format \"Generate posets of size `n`. Remove those that have property `p`. For remaining compute `f(P)` and then find smallest/biggest value among results.\"",
    "created_at": "2014-11-28T08:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299614",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>
Replying to [nbruin](#comment%3A10):

> If you're finding that you're creating posets frequently, then you should make a "lightweight" version of poset that's not carrying around all the parent baggage.


Maybe we already have this: it is called Hasse diagram?

I mean, can we have a code generating only hasse diagrams and using functions from `hasse_diagram.py`? I have been computing quite many calculations of format "Generate posets of size `n`. Remove those that have property `p`. For remaining compute `f(P)` and then find smallest/biggest value among results."



---

archive/issue_comments_299615.json:
```json
{
    "body": "<a id='comment:12'></a>\n> If you're finding that you're creating posets frequently, then you should make a \"lightweight\" version of poset that's not carrying around all the parent baggage.\n\n\nWell, Jori wants to implement a way to enumerate all posets of a given size, so in this case we will have to pay a high tribute to parents. But how do you think that it should be implemented ? Jori is right that Hasse Diagrams have a lot of features already, but that is only... Well, a Hasse Diagram. No comparisons of elements, none of the products defined in the posets directly, well.\n\nWhat we would need as you say is a class exactly like Poset without the parent infrastructure, but how could we implement that with the smallest amount of copy/paste ?\n\nNathann",
    "created_at": "2014-11-28T09:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299615",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> If you're finding that you're creating posets frequently, then you should make a "lightweight" version of poset that's not carrying around all the parent baggage.


Well, Jori wants to implement a way to enumerate all posets of a given size, so in this case we will have to pay a high tribute to parents. But how do you think that it should be implemented ? Jori is right that Hasse Diagrams have a lot of features already, but that is only... Well, a Hasse Diagram. No comparisons of elements, none of the products defined in the posets directly, well.

What we would need as you say is a class exactly like Poset without the parent infrastructure, but how could we implement that with the smallest amount of copy/paste ?

Nathann



---

archive/issue_comments_299616.json:
```json
{
    "body": "<a id='comment:13'></a>\n\n```\nsage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)\nsage: %time Poset(g)\nCPU times: user 284 ms, sys: 32 ms, total: 316 ms\nWall time: 278 ms\nFinite poset containing 1024 elements\nsage: %time Poset(g)\nCPU times: user 1.63 s, sys: 44 ms, total: 1.68 s\nWall time: 1.61 s\nFinite poset containing 1024 elements\n```",
    "created_at": "2014-11-28T09:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299616",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>

```
sage: g = posets.BooleanLattice(5).hasse_diagram().transitive_closure(); g = g.cartesian_product(g)
sage: %time Poset(g)
CPU times: user 284 ms, sys: 32 ms, total: 316 ms
Wall time: 278 ms
Finite poset containing 1024 elements
sage: %time Poset(g)
CPU times: user 1.63 s, sys: 44 ms, total: 1.68 s
Wall time: 1.61 s
Finite poset containing 1024 elements
```



---

archive/issue_comments_299617.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [ncohen](#comment%3A12):\n\n> What we would need as you say is a class exactly like Poset without the parent infrastructure, but how could we implement that with the smallest amount of copy/paste ?\n\n\nIt would require some thought and some major refactoring. The natural structure to me would seem to have a base class that does not inherit from UniqueRepresentation that implements all the basic stuff and then (hopefully) use multiple inheritance to equip this with the requisite parent stuff for the \"full Parent POSet\". If there are things that are incompatible between a usable \"fast POSet\" and a \"full parent POSet\" then the useful thing should probably inherit separately from the common base class.\n\nThe \"full parent poset\" __init__ would probably require some trickery to allow instantiation of a full parent from a fast poset (if that's required). Quite possibly, you'd be better off with a UniqueFactory there, so that you have better control over what the construction is keyed under.",
    "created_at": "2014-11-28T17:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299617",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:14'></a>
Replying to [ncohen](#comment%3A12):

> What we would need as you say is a class exactly like Poset without the parent infrastructure, but how could we implement that with the smallest amount of copy/paste ?


It would require some thought and some major refactoring. The natural structure to me would seem to have a base class that does not inherit from UniqueRepresentation that implements all the basic stuff and then (hopefully) use multiple inheritance to equip this with the requisite parent stuff for the "full Parent POSet". If there are things that are incompatible between a usable "fast POSet" and a "full parent POSet" then the useful thing should probably inherit separately from the common base class.

The "full parent poset" __init__ would probably require some trickery to allow instantiation of a full parent from a fast poset (if that's required). Quite possibly, you'd be better off with a UniqueFactory there, so that you have better control over what the construction is keyed under.



---

archive/issue_comments_299618.json:
```json
{
    "body": "<a id='comment:15'></a>\nWhat is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.\n\nI understand the logic for, say, finite ring, but not for posets.",
    "created_at": "2014-12-01T07:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299618",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'></a>
What is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.

I understand the logic for, say, finite ring, but not for posets.



---

archive/issue_comments_299619.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jmantysalo](#comment%3A15):\n> What is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.\n\n\nI suspect it was done out of dogma: \"Parents are supposed to be unique\" in sage. That statement by itself is not correct: not all parents need to be unique. However, equal-but-non-identical parents can cause some minor problems in the coercion framework.\n\nThe real catch is if you're building a parent that can serve as base for other parents that ARE unique representation. Because cache keys there are looked up by equality and not identity, you can really confuse the coercion framework to the point of getting buggy behaviour. See [http://trac.sagemath.org/ticket/15248#comment:2](http://trac.sagemath.org/ticket/15248#comment:2) for an explanation of a classic example.\n\nThere is always a solution to this: do not inherit from UniqueRepresentation or UniqueFactory but do inherit from WithEqualityById (or implement that by yourself). It gives you a very cheap but mathematically not terribly useful equality test. However, there's something to say for it: The two posets `A={1,2,3}` and `B={1,2,3}` with trivial relation (ie. x<=y iff x==y) are isomorphic, but not uniquely so. So unless we're explicitly saying by what isomorphism `A,B` are to be identified, perhaps we should treat them as not equal. After all, `C={a,b,c}` (with empty relation) is also isomorphic to `A` and `B` and there no-one would be tempted to say C is equal to A and B.\n\nHowever, such strict equality might be too hard to swallow for people who want their computer algebra system to cater a little more to intuitive, human reasoning. In that case you can just make your parent non-unique, but still define equality to be by some looser equivalence relation. You should just document that your class is not appropriate for use as a base for another `UniqueRepesentation` parent.",
    "created_at": "2014-12-01T17:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299619",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:16'></a>
Replying to [jmantysalo](#comment%3A15):
> What is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.


I suspect it was done out of dogma: "Parents are supposed to be unique" in sage. That statement by itself is not correct: not all parents need to be unique. However, equal-but-non-identical parents can cause some minor problems in the coercion framework.

The real catch is if you're building a parent that can serve as base for other parents that ARE unique representation. Because cache keys there are looked up by equality and not identity, you can really confuse the coercion framework to the point of getting buggy behaviour. See [http://trac.sagemath.org/ticket/15248#comment:2](http://trac.sagemath.org/ticket/15248#comment:2) for an explanation of a classic example.

There is always a solution to this: do not inherit from UniqueRepresentation or UniqueFactory but do inherit from WithEqualityById (or implement that by yourself). It gives you a very cheap but mathematically not terribly useful equality test. However, there's something to say for it: The two posets `A={1,2,3}` and `B={1,2,3}` with trivial relation (ie. x<=y iff x==y) are isomorphic, but not uniquely so. So unless we're explicitly saying by what isomorphism `A,B` are to be identified, perhaps we should treat them as not equal. After all, `C={a,b,c}` (with empty relation) is also isomorphic to `A` and `B` and there no-one would be tempted to say C is equal to A and B.

However, such strict equality might be too hard to swallow for people who want their computer algebra system to cater a little more to intuitive, human reasoning. In that case you can just make your parent non-unique, but still define equality to be by some looser equivalence relation. You should just document that your class is not appropriate for use as a base for another `UniqueRepesentation` parent.



---

archive/issue_comments_299620.json:
```json
{
    "body": "<a id='comment:17'></a>\nYooooo !\n\n> I suspect it was done out of dogma: \"Parents are supposed to be unique\" in sage.\n\n\nHMmmm... I am afraid that if I follow the mains lines of what you say, I have no clue how it is to be implemented in practice. I believe that the combinat guys use posets as exponents of polynomials, and that this is why they need a fast equality test. It would be cool if we could remove this `UniqueRepresentation` dependency from Posets, while letting them have a way to add it afterwards if they need it in their computations.\n\nWe just can't give up enumerating posets up to isomorphism because of this cached equality test. And lose seconds like in the ticket's description.\n\nNathann\n\nP.S. : What this ticket does is totally orthogonal to that, though, and still in `needs_review`  `:-P`",
    "created_at": "2014-12-01T17:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299620",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
Yooooo !

> I suspect it was done out of dogma: "Parents are supposed to be unique" in sage.


HMmmm... I am afraid that if I follow the mains lines of what you say, I have no clue how it is to be implemented in practice. I believe that the combinat guys use posets as exponents of polynomials, and that this is why they need a fast equality test. It would be cool if we could remove this `UniqueRepresentation` dependency from Posets, while letting them have a way to add it afterwards if they need it in their computations.

We just can't give up enumerating posets up to isomorphism because of this cached equality test. And lose seconds like in the ticket's description.

Nathann

P.S. : What this ticket does is totally orthogonal to that, though, and still in `needs_review`  `:-P`



---

archive/issue_comments_299621.json:
```json
{
    "body": "<a id='comment:18'></a>\nBy the way I wonder if I should add a \"if self.is_directed_acyclic()\" in th function. I am not sure that those who use this `transitive_reduction` thing will think of looking at the doc, and `is_directed_acyclic` is rather cheap. What would you think of running it when `acyclic=False`, just in case ?\n\nNathann",
    "created_at": "2014-12-01T17:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299621",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
By the way I wonder if I should add a "if self.is_directed_acyclic()" in th function. I am not sure that those who use this `transitive_reduction` thing will think of looking at the doc, and `is_directed_acyclic` is rather cheap. What would you think of running it when `acyclic=False`, just in case ?

Nathann



---

archive/issue_comments_299622.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [ncohen](#comment%3A17):\n\n> HMmmm... I am afraid that if I follow the mains lines of what you say, I have no clue how it is to be implemented in practice. I believe that the combinat guys use posets as exponents of polynomials, and that this is why they need a fast equality test. It would be cool if we could remove this `UniqueRepresentation` dependency from Posets, while letting them have a way to add it afterwards if they need it in their computations.\n\n\nFor one thing, that use wouldn't require posets to be *parents* then.\n\n[possibly off-topic example]\nThis happens in number theory too: fractional ideals are Z-submodules of a number field, so they have elements. That would qualify them to be \"parents\", but nobody in their right mind would implement them like that if you're going to do ideal arithmetic: then they're just represented as matrices or tuples of generating elements. Equality is taken care of by putting generators in normal form, which can be fairly expensive the first time around, but equality testing afterwards is pretty quick.\n\nIf you want to make POsets faster you should seriously consider splitting POsets-as-parents and POsets-as-objects. Both usage scenarios you describe seem to fall in the latter scenario, by the way, so perhaps POsets-as-parents aren't really needed beyond checking a box for which parents are available in sage.",
    "created_at": "2014-12-01T17:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299622",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:19'></a>
Replying to [ncohen](#comment%3A17):

> HMmmm... I am afraid that if I follow the mains lines of what you say, I have no clue how it is to be implemented in practice. I believe that the combinat guys use posets as exponents of polynomials, and that this is why they need a fast equality test. It would be cool if we could remove this `UniqueRepresentation` dependency from Posets, while letting them have a way to add it afterwards if they need it in their computations.


For one thing, that use wouldn't require posets to be *parents* then.

[possibly off-topic example]
This happens in number theory too: fractional ideals are Z-submodules of a number field, so they have elements. That would qualify them to be "parents", but nobody in their right mind would implement them like that if you're going to do ideal arithmetic: then they're just represented as matrices or tuples of generating elements. Equality is taken care of by putting generators in normal form, which can be fairly expensive the first time around, but equality testing afterwards is pretty quick.

If you want to make POsets faster you should seriously consider splitting POsets-as-parents and POsets-as-objects. Both usage scenarios you describe seem to fall in the latter scenario, by the way, so perhaps POsets-as-parents aren't really needed beyond checking a box for which parents are available in sage.



---

archive/issue_comments_299623.json:
```json
{
    "body": "<a id='comment:20'></a>\n> If you want to make POsets faster you should seriously consider splitting POsets-as-parents and POsets-as-objects. Both usage scenarios you describe seem to fall in the latter scenario, by the way, so perhaps POsets-as-parents aren't really needed beyond checking a box for which parents are available in sage.\n\n\nWell, perhaps we could return \"Poset-as-parents\" when the user asks for a non-facade poset, and non-parent posets otherwise.\n\nSigh. I'll write to the sage-devel and the combinat guys...\n\nNathann",
    "created_at": "2014-12-01T17:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299623",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
> If you want to make POsets faster you should seriously consider splitting POsets-as-parents and POsets-as-objects. Both usage scenarios you describe seem to fall in the latter scenario, by the way, so perhaps POsets-as-parents aren't really needed beyond checking a box for which parents are available in sage.


Well, perhaps we could return "Poset-as-parents" when the user asks for a non-facade poset, and non-parent posets otherwise.

Sigh. I'll write to the sage-devel and the combinat guys...

Nathann



---

archive/issue_comments_299624.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [nbruin](#comment%3A16):\n\n> > What is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.\n\n\n> However, there's something to say for it: The two posets `A={1,2,3}` and `B={1,2,3}` with trivial relation (ie. x<=y iff x==y) are isomorphic, but not uniquely so. So unless we're explicitly saying by what isomorphism `A,B` are to be identified, perhaps we should treat them as not equal. After all, `C={a,b,c}` (with empty relation) is also isomorphic to `A` and `B` and there no-one would be tempted to say C is equal to A and B.\n\n\nThank you for very good explanation!\n\nGenerating all posets of size 7 up to isomorphism takes 18,5 second --- this is not a bottle neck then. But with #14110 the time drops to 2,5 seconds. And when generating just Hasse diagrams instead of posets it took 0,3 second. In the code I was asked to write this is the turning point: now slowest part is doing something with posets, not generating them.\n\nMaybe this is so specialized case that we should let posets to be like they are now. A user might then optimize by directly playing with Hasse diagrams.\n\nThis optimization does not mean that you can do things with posets of size `2n` --- it means that that you can use posets of size `n+2`.",
    "created_at": "2014-12-02T07:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299624",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'></a>
Replying to [nbruin](#comment%3A16):

> > What is the rationale behind current implementation? I mean, there must be some example where `UniqueRepresentation` makes things faster.


> However, there's something to say for it: The two posets `A={1,2,3}` and `B={1,2,3}` with trivial relation (ie. x<=y iff x==y) are isomorphic, but not uniquely so. So unless we're explicitly saying by what isomorphism `A,B` are to be identified, perhaps we should treat them as not equal. After all, `C={a,b,c}` (with empty relation) is also isomorphic to `A` and `B` and there no-one would be tempted to say C is equal to A and B.


Thank you for very good explanation!

Generating all posets of size 7 up to isomorphism takes 18,5 second --- this is not a bottle neck then. But with #14110 the time drops to 2,5 seconds. And when generating just Hasse diagrams instead of posets it took 0,3 second. In the code I was asked to write this is the turning point: now slowest part is doing something with posets, not generating them.

Maybe this is so specialized case that we should let posets to be like they are now. A user might then optimize by directly playing with Hasse diagrams.

This optimization does not mean that you can do things with posets of size `2n` --- it means that that you can use posets of size `n+2`.



---

archive/issue_comments_299625.json:
```json
{
    "body": "<a id='comment:22'></a>\n(beyond the poset discussion, this ticket is still needing a review) `:-P`",
    "created_at": "2014-12-05T06:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299625",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
(beyond the poset discussion, this ticket is still needing a review) `:-P`



---

archive/issue_comments_299626.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|\n|[253fc21](https://github.com/sagemath/sagetrac-mirror/commit/253fc21867d070748a2c6391fbddd960e98c1aaa)|`trac #17408: Faster transitive_reduction (=> faster Poset creation)`|",
    "created_at": "2014-12-05T07:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
|[253fc21](https://github.com/sagemath/sagetrac-mirror/commit/253fc21867d070748a2c6391fbddd960e98c1aaa)|`trac #17408: Faster transitive_reduction (=> faster Poset creation)`|



---

archive/issue_comments_299627.json:
```json
{
    "body": "Changing commit from \"ce577a909e3ac2835f975cc9515b54459174e8ca\" to \"253fc21867d070748a2c6391fbddd960e98c1aaa\"",
    "created_at": "2014-12-05T07:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ce577a909e3ac2835f975cc9515b54459174e8ca" to "253fc21867d070748a2c6391fbddd960e98c1aaa"



---

archive/issue_comments_299628.json:
```json
{
    "body": "<a id='comment:24'></a>\nI removed the \"acyclic\" flag that nobody would have seen and added an automatic detection of acyclic graphs. This has a small cost, but as I believe that nobody ever calls this function except on acyclic graphs I would say that it is a win (really, nobody would have seen the optional flag).\n\nNathann",
    "created_at": "2014-12-05T13:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299628",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
I removed the "acyclic" flag that nobody would have seen and added an automatic detection of acyclic graphs. This has a small cost, but as I believe that nobody ever calls this function except on acyclic graphs I would say that it is a win (really, nobody would have seen the optional flag).

Nathann



---

archive/issue_comments_299629.json:
```json
{
    "body": "Changing branch from \"u/ncohen/17408\" to \"public/ticket/17408\"",
    "created_at": "2014-12-06T20:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299629",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/ncohen/17408" to "public/ticket/17408"



---

archive/issue_comments_299630.json:
```json
{
    "body": "Changing commit from \"253fc21867d070748a2c6391fbddd960e98c1aaa\" to \"858d7a9197144ee878bbe1c5b9687c4b12662143\"",
    "created_at": "2014-12-06T20:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299630",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "253fc21867d070748a2c6391fbddd960e98c1aaa" to "858d7a9197144ee878bbe1c5b9687c4b12662143"



---

archive/issue_comments_299631.json:
```json
{
    "body": "<a id='comment:25'></a>\nThere was a failing doctest, because undirected graphs do not have a is_directed_acyclic method.\n\nI have also made a few pep8 changes.\n\nLooks good to me. You can set a positive review if you agree with my changes.\n\n---\nNew commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[858d7a9](https://github.com/sagemath/sagetrac-mirror/commit/858d7a9197144ee878bbe1c5b9687c4b12662143)|`trac #17408 reviewer commit, pep8 and other details`|",
    "created_at": "2014-12-06T20:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299631",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
There was a failing doctest, because undirected graphs do not have a is_directed_acyclic method.

I have also made a few pep8 changes.

Looks good to me. You can set a positive review if you agree with my changes.

---
New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[858d7a9](https://github.com/sagemath/sagetrac-mirror/commit/858d7a9197144ee878bbe1c5b9687c4b12662143)|`trac #17408 reviewer commit, pep8 and other details`|



---

archive/issue_comments_299632.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2014-12-08T06:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299632",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_299633.json:
```json
{
    "body": "<a id='comment:26'></a>\nHelloooooo !\n\n> There was a failing doctest, because undirected graphs do not have a is_directed_acyclic method.\n\n\nOh, I see. Thanks ! `;-)`\n\n> I have also made a few pep8 changes.\n\n\nYou should see a doctor about that `:-P`\n\n> Looks good to me. You can set a positive review if you agree with my changes.\n\n\nThanks again ! `:-)`\n\nNathann",
    "created_at": "2014-12-08T06:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299633",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>
Helloooooo !

> There was a failing doctest, because undirected graphs do not have a is_directed_acyclic method.


Oh, I see. Thanks ! `;-)`

> I have also made a few pep8 changes.


You should see a doctor about that `:-P`

> Looks good to me. You can set a positive review if you agree with my changes.


Thanks again ! `:-)`

Nathann



---

archive/issue_comments_299634.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-08T06:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299634",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299635.json:
```json
{
    "body": "<a id='comment:27'></a>\ndoctests fail",
    "created_at": "2014-12-12T13:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299635",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>
doctests fail



---

archive/issue_comments_299636.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-12-12T13:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299636",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_299637.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[ade98aa](https://github.com/sagemath/sagetrac-mirror/commit/ade98aa90d2954a59a6fad342b92d23f01803308)|`trac #17408: Broken doctests`|",
    "created_at": "2014-12-12T18:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[ade98aa](https://github.com/sagemath/sagetrac-mirror/commit/ade98aa90d2954a59a6fad342b92d23f01803308)|`trac #17408: Broken doctests`|



---

archive/issue_comments_299638.json:
```json
{
    "body": "Changing commit from \"858d7a9197144ee878bbe1c5b9687c4b12662143\" to \"ade98aa90d2954a59a6fad342b92d23f01803308\"",
    "created_at": "2014-12-12T18:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "858d7a9197144ee878bbe1c5b9687c4b12662143" to "ade98aa90d2954a59a6fad342b92d23f01803308"



---

archive/issue_comments_299639.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-12-13T03:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299639",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_299640.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-16T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299640",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_299641.json:
```json
{
    "body": "Changing branch from \"public/ticket/17408\" to \"ade98aa90d2954a59a6fad342b92d23f01803308\"",
    "created_at": "2014-12-16T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17408#issuecomment-299641",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/ticket/17408" to "ade98aa90d2954a59a6fad342b92d23f01803308"



---

archive/issue_events_057017.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-16T13:57:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17408",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17408#event-57017"
}
```
