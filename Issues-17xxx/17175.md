# Issue 17175: Replace some __cmp__() by rich comparison

archive/issues_016938.json:
```json
{
    "assignees": [],
    "body": "This is part of #16537.\n\nKeywords: **python3**\n\nBranch/Commit: **[u/aapitzsch/ticket/17175](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/17175) @ [d419515](https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544)**\n\nWork Issues: **merge conflicts**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Andr\u00e9 Apitzsch**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17175_\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2014-10-18T12:39:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Replace some __cmp__() by rich comparison",
    "type": "issue",
    "updated_at": "2017-12-12T08:23:33Z",
    "url": "https://github.com/sagemath/sage/issues/17175",
    "user": "https://github.com/a-andre"
}
```
This is part of #16537.

Keywords: **python3**

Branch/Commit: **[u/aapitzsch/ticket/17175](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/17175) @ [d419515](https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544)**

Work Issues: **merge conflicts**

Reviewer: **Frédéric Chapoton**

Author: **André Apitzsch**

_Issue created by migration from https://trac.sagemath.org/ticket/17175_





---

archive/issue_events_227579.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-18T12:39:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227579"
}
```



---

archive/issue_events_227580.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-18T12:39:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227580"
}
```



---

archive/issue_events_227581.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-18T12:39:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227581"
}
```



---

archive/issue_comments_230569.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d\">8e6a489</a></td><td><code>replace `__cmp__` by rich comparisons</code></td></tr></table>\n",
    "created_at": "2014-10-18T12:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230569",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d">8e6a489</a></td><td><code>replace `__cmp__` by rich comparisons</code></td></tr></table>




---

archive/issue_events_227582.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-18T12:41:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227582"
}
```



---

archive/issue_comments_230570.json:
```json
{
    "body": "Branch: **[u/aapitzsch/ticket/17175](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/17175)**",
    "created_at": "2014-10-18T12:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230570",
    "user": "https://github.com/a-andre"
}
```

Branch: **[u/aapitzsch/ticket/17175](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/17175)**



---

archive/issue_comments_230571.json:
```json
{
    "body": "Commit: **[8e6a489](https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d)**",
    "created_at": "2014-10-18T12:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230571",
    "user": "https://github.com/a-andre"
}
```

Commit: **[8e6a489](https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d)**



---

archive/issue_events_227583.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2014-10-18T20:08:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227583"
}
```



---

archive/issue_events_227584.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2014-10-18T20:08:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227584"
}
```



---

archive/issue_comments_230572.json:
```json
{
    "body": "Reviewer: **R. Andrew Ohana**",
    "created_at": "2014-10-18T20:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230572",
    "user": "https://github.com/ohanar"
}
```

Reviewer: **R. Andrew Ohana**



---

archive/issue_comments_230573.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThanks for working on this. I haven't looked through everything thoroughly yet, but here are some initial comments/questions:\n\n* In `sage.combinat.e_one_star` (and in general), why do you change the expression in `__eq__` method to use backslashes instead of parens? According to PEP8, wrapping long lines should be done with parens, brackets, and braces rather than with backslashes.\n\n* In `sage.combinat.root_system.branching_rules`, `sage.doctest.*`, and `sage.rings.finit_rings.residue_field`, using `not isinstance(other, type(self))` is not equivalent to the previous line of reasoning (i.e. `type(self)` might be a super class of `type(other)`). Instead use something like `other.__class__ is not self.__class__` (using `__class__` is better than `type` for duck typing purposes).\n\n* In `sage.combinat.root_system.type_irreducible`, it seems to me that the added `__ne__` method is unecessary.\n\n* In `sage.dynamics.flat_surfaces.strata`, you seemed to have removed the less than and greater than functionality (that wasn't being tested by the doctests).",
    "created_at": "2014-10-18T20:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230573",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:2" align="right">Comment 2</div>

Thanks for working on this. I haven't looked through everything thoroughly yet, but here are some initial comments/questions:

* In `sage.combinat.e_one_star` (and in general), why do you change the expression in `__eq__` method to use backslashes instead of parens? According to PEP8, wrapping long lines should be done with parens, brackets, and braces rather than with backslashes.

* In `sage.combinat.root_system.branching_rules`, `sage.doctest.*`, and `sage.rings.finit_rings.residue_field`, using `not isinstance(other, type(self))` is not equivalent to the previous line of reasoning (i.e. `type(self)` might be a super class of `type(other)`). Instead use something like `other.__class__ is not self.__class__` (using `__class__` is better than `type` for duck typing purposes).

* In `sage.combinat.root_system.type_irreducible`, it seems to me that the added `__ne__` method is unecessary.

* In `sage.dynamics.flat_surfaces.strata`, you seemed to have removed the less than and greater than functionality (that wasn't being tested by the doctests).



---

archive/issue_comments_230574.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nRemoving `__ne__` from `sage.combinat.root_system.type_reducible` raises doctest errors like\n\n```\nsage -t src/sage/combinat/root_system/branching_rules.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/branching_rules.py\", line 667, in sage.combinat.root_system.branching_rules.branch_weyl_character\nFailed example:\n    F4(0,0,1,0).branch(G2xA1,rule=\"miscellaneous\")\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 851, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.branching_rules.branch_weyl_character[130]>\", line 1, in <module>\n        F4(Integer(0),Integer(0),Integer(1),Integer(0)).branch(G2xA1,rule=\"miscellaneous\")\n      File \"/opt/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/weyl_characters.py\", line 1103, in branch\n        return sage.combinat.root_system.branching_rules.branch_weyl_character(self, self.parent(), S, rule=rule)\n      File \"/opt/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/branching_rules.py\", line 985, in branch_weyl_character\n        raise ValueError(\"rule has wrong target Cartan type\")\n    ValueError: rule has wrong target Cartan type\n```\n\nWe should keep it for now and check again when all `__cmp__()` have been removed.",
    "created_at": "2014-10-18T21:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230574",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:3" align="right">Comment 3</div>

Removing `__ne__` from `sage.combinat.root_system.type_reducible` raises doctest errors like

```
sage -t src/sage/combinat/root_system/branching_rules.py
**********************************************************************
File "src/sage/combinat/root_system/branching_rules.py", line 667, in sage.combinat.root_system.branching_rules.branch_weyl_character
Failed example:
    F4(0,0,1,0).branch(G2xA1,rule="miscellaneous")
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 851, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.branching_rules.branch_weyl_character[130]>", line 1, in <module>
        F4(Integer(0),Integer(0),Integer(1),Integer(0)).branch(G2xA1,rule="miscellaneous")
      File "/opt/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/weyl_characters.py", line 1103, in branch
        return sage.combinat.root_system.branching_rules.branch_weyl_character(self, self.parent(), S, rule=rule)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/branching_rules.py", line 985, in branch_weyl_character
        raise ValueError("rule has wrong target Cartan type")
    ValueError: rule has wrong target Cartan type
```

We should keep it for now and check again when all `__cmp__()` have been removed.



---

archive/issue_comments_230575.json:
```json
{
    "body": "Changed commit from **[8e6a489](https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d)** to **[caf728d](https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050)**",
    "created_at": "2014-10-18T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230575",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8e6a489](https://github.com/sagemath/sagetrac-mirror/commit/8e6a4890f80a9cbab620a777495dd7ac27d81d5d)** to **[caf728d](https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050)**



---

archive/issue_comments_230576.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b65bc8271bb643d40255705b990d380e8a851dd\">2b65bc8</a></td><td><code>use parentheses to wrap lines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050\">caf728d</a></td><td><code>use other.__class__ is not self.__class__</code></td></tr></table>\n",
    "created_at": "2014-10-18T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230576",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b65bc8271bb643d40255705b990d380e8a851dd">2b65bc8</a></td><td><code>use parentheses to wrap lines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050">caf728d</a></td><td><code>use other.__class__ is not self.__class__</code></td></tr></table>




---

archive/issue_comments_230577.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d1dabf54977ac44aadcb15d19ee24961ebb983e\">1d1dabf</a></td><td><code>fix last commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544\">d419515</a></td><td><code>add missing comparisons</code></td></tr></table>\n",
    "created_at": "2014-10-19T08:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230577",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d1dabf54977ac44aadcb15d19ee24961ebb983e">1d1dabf</a></td><td><code>fix last commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544">d419515</a></td><td><code>add missing comparisons</code></td></tr></table>




---

archive/issue_comments_230578.json:
```json
{
    "body": "Changed commit from **[caf728d](https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050)** to **[d419515](https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544)**",
    "created_at": "2014-10-19T08:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[caf728d](https://github.com/sagemath/sagetrac-mirror/commit/caf728dcd3eb43b67d9da6332992a3139a62b050)** to **[d419515](https://github.com/sagemath/sagetrac-mirror/commit/d419515eab7cade4ef3983159d87dd3b10998544)**



---

archive/issue_comments_230579.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@ohanar](#comment%3A2):\n> * In `sage.combinat.e_one_star` (and in general), why do you change the expression in `__eq__` method to use backslashes instead of parens? According to PEP8, wrapping long lines should be done with parens, brackets, and braces rather than with backslashes.\n\nDidn't know about it. Fixed now.\n\n> * In `sage.combinat.root_system.branching_rules`, `sage.doctest.*`, and `sage.rings.finit_rings.residue_field`, using `not isinstance(other, type(self))` is not equivalent to the previous line of reasoning (i.e. `type(self)` might be a super class of `type(other)`). Instead use something like `other.__class__ is not self.__class__` (using `__class__` is better than `type` for duck typing purposes).\n> \n\nFixed this.\n\n> * In `sage.dynamics.flat_surfaces.strata`, you seemed to have removed the less than and greater than functionality (that wasn't being tested by the doctests).\n\nAdded functions and tests.",
    "created_at": "2014-10-19T08:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230579",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@ohanar](#comment%3A2):
> * In `sage.combinat.e_one_star` (and in general), why do you change the expression in `__eq__` method to use backslashes instead of parens? According to PEP8, wrapping long lines should be done with parens, brackets, and braces rather than with backslashes.

Didn't know about it. Fixed now.

> * In `sage.combinat.root_system.branching_rules`, `sage.doctest.*`, and `sage.rings.finit_rings.residue_field`, using `not isinstance(other, type(self))` is not equivalent to the previous line of reasoning (i.e. `type(self)` might be a super class of `type(other)`). Instead use something like `other.__class__ is not self.__class__` (using `__class__` is better than `type` for duck typing purposes).
> 

Fixed this.

> * In `sage.dynamics.flat_surfaces.strata`, you seemed to have removed the less than and greater than functionality (that wasn't being tested by the doctests).

Added functions and tests.



---

archive/issue_events_227585.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-19T08:52:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227585"
}
```



---

archive/issue_events_227586.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-10-19T08:52:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227586"
}
```



---

archive/issue_comments_230580.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHi Andr\u00e9, how did you select the modules from the *mountain* of affected modules from ticket:16537? Is there a common theme? Just curious! \n\nBy the way, after seeing the size of the *cmp*-problem in ticket:16537 I was so shocked that I stopped working on Sage and Python 3! So this gives me some fresh motivation ...\n\nWhat is the reason for explicitly defining all 4 comparisons in `src/sage/dynamics/flat_surfaces/strata.py` instead of defining one (e.g. `__gt__`) and using the class decorator `functools.total_ordering`?",
    "created_at": "2014-11-18T18:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230580",
    "user": "https://github.com/wluebbe"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hi André, how did you select the modules from the *mountain* of affected modules from ticket:16537? Is there a common theme? Just curious! 

By the way, after seeing the size of the *cmp*-problem in ticket:16537 I was so shocked that I stopped working on Sage and Python 3! So this gives me some fresh motivation ...

What is the reason for explicitly defining all 4 comparisons in `src/sage/dynamics/flat_surfaces/strata.py` instead of defining one (e.g. `__gt__`) and using the class decorator `functools.total_ordering`?



---

archive/issue_comments_230581.json:
```json
{
    "body": "Changed keywords from none to **python3**",
    "created_at": "2014-11-18T18:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230581",
    "user": "https://github.com/wluebbe"
}
```

Changed keywords from none to **python3**



---

archive/issue_comments_230582.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@wluebbe](#comment%3A7):\n> Hi Andr\u00e9, how did you select the modules from the *mountain* of affected modules from ticket:16537? Is there a common theme? Just curious!\n\nUp to some exceptions I chose the `__cmp__()` functions which only checked for equality, where I hadn't to implement `__gt__()` etc.\n \n> By the way, after seeing the size of the *cmp*-problem in ticket:16537 I was so shocked that I stopped working on Sage and Python 3! So this gives me some fresh motivation ...\n\nThe main \"problem\" of replacing `__cmp__()` is pointed out in http://www.mail-archive.com/sage-devel@googlegroups.com/msg73051.html. Until we find a reasonable solution for it, we should continue with the easier tickets, like #16529.\n\n> What is the reason for explicitly defining all 4 comparisons in `src/sage/dynamics/flat_surfaces/strata.py` instead of defining one (e.g. `__gt__`) and using the class decorator `functools.total_ordering`?\n\nAll comparisons need `self._marked_separatrix == other._marked_separatrix` and I think this leads to problems with the class decorator.",
    "created_at": "2014-11-18T19:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230582",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@wluebbe](#comment%3A7):
> Hi André, how did you select the modules from the *mountain* of affected modules from ticket:16537? Is there a common theme? Just curious!

Up to some exceptions I chose the `__cmp__()` functions which only checked for equality, where I hadn't to implement `__gt__()` etc.
 
> By the way, after seeing the size of the *cmp*-problem in ticket:16537 I was so shocked that I stopped working on Sage and Python 3! So this gives me some fresh motivation ...

The main "problem" of replacing `__cmp__()` is pointed out in http://www.mail-archive.com/sage-devel@googlegroups.com/msg73051.html. Until we find a reasonable solution for it, we should continue with the easier tickets, like #16529.

> What is the reason for explicitly defining all 4 comparisons in `src/sage/dynamics/flat_surfaces/strata.py` instead of defining one (e.g. `__gt__`) and using the class decorator `functools.total_ordering`?

All comparisons need `self._marked_separatrix == other._marked_separatrix` and I think this leads to problems with the class decorator.



---

archive/issue_comments_230583.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI do not think that it is *always* the right approach to solve the easier problems before the hard ones.\n\nWe have done this with good reason for stage 1 (#15980). But the completion of stage 1 has to precede the completion of stage 2. And now we have the hard problems that remain in stage 1!\n\nI think that stage 2 (#16052) could use a tool like https://github.com/PythonCharmers/python-future to good effect. \nClearly this does not prevent us from solving some of the problems (added originally to stage 2) in a stage 1 style (as was possible for `filter` and `reduce`, and I think it is also possible for `map` #16073!).\n\nBut we should try to complete stage 1 as soon as possible: if we cannot solve those remaining hard problems then Sage will not available under Python 3.\n\nAnyway I will have a look at #16529 ;-)\nAnd I will try to grok the *rich comparison* stuff - it is difficult and but it is also necessary!",
    "created_at": "2014-11-19T10:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230583",
    "user": "https://github.com/wluebbe"
}
```

<div id="comment:9" align="right">Comment 9</div>

I do not think that it is *always* the right approach to solve the easier problems before the hard ones.

We have done this with good reason for stage 1 (#15980). But the completion of stage 1 has to precede the completion of stage 2. And now we have the hard problems that remain in stage 1!

I think that stage 2 (#16052) could use a tool like https://github.com/PythonCharmers/python-future to good effect. 
Clearly this does not prevent us from solving some of the problems (added originally to stage 2) in a stage 1 style (as was possible for `filter` and `reduce`, and I think it is also possible for `map` #16073!).

But we should try to complete stage 1 as soon as possible: if we cannot solve those remaining hard problems then Sage will not available under Python 3.

Anyway I will have a look at #16529 ;-)
And I will try to grok the *rich comparison* stuff - it is difficult and but it is also necessary!



---

archive/issue_events_227587.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-05T13:39:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227587"
}
```



---

archive/issue_events_227588.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-05T13:39:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227588"
}
```



---

archive/issue_comments_230584.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2015-02-05T13:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230584",
    "user": "https://github.com/mezzarobba"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_230585.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nSame question as in #16537: Can the work be reduced by including the code in http://www.voidspace.org.uk/python/articles/comparison.shtml into the `SageObject` class? Please reply there.",
    "created_at": "2015-02-17T17:15:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230585",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">Comment 11</div>

Same question as in #16537: Can the work be reduced by including the code in http://www.voidspace.org.uk/python/articles/comparison.shtml into the `SageObject` class? Please reply there.



---

archive/issue_events_227589.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-12T15:02:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227589"
}
```



---

archive/issue_events_227590.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-12T15:02:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227590"
}
```



---

archive/issue_comments_230586.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nWith the new arguments in #16537 I think this is at least needs_info, if not wontfix.",
    "created_at": "2015-04-12T15:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230586",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">Comment 12</div>

With the new arguments in #16537 I think this is at least needs_info, if not wontfix.



---

archive/issue_events_227591.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T13:33:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227591"
}
```



---

archive/issue_events_227592.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-11T19:38:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227592"
}
```



---

archive/issue_events_227593.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-11T19:38:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227593"
}
```



---

archive/issue_events_227594.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-01T08:29:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227594"
}
```



---

archive/issue_events_227595.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-01T08:29:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227595"
}
```



---

archive/issue_events_227596.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-01T08:29:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227596"
}
```



---

archive/issue_comments_230587.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nThis is way outdated. Let it be closed as invalid.",
    "created_at": "2017-08-26T15:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230587",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">Comment 16</div>

This is way outdated. Let it be closed as invalid.



---

archive/issue_comments_230588.json:
```json
{
    "body": "Changed reviewer from **R. Andrew Ohana** to **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-08-26T15:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17175#issuecomment-230588",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **R. Andrew Ohana** to **Frédéric Chapoton**



---

archive/issue_events_227597.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-26T15:50:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227597"
}
```



---

archive/issue_events_227598.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-26T15:50:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227598"
}
```



---

archive/issue_events_227599.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227599"
}
```



---

archive/issue_events_227600.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227600"
}
```



---

archive/issue_events_227601.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17175",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17175#event-227601"
}
```
