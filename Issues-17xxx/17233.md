# Issue 17233: Uniform  random generation  of StandardTableau of a given size

archive/issues_016996.json:
```json
{
    "body": "I am overwritting the default random_element method of the StandardTableaux_size class to implement an efficient way to compute a random standard tableau.\n\nAs explained in the documentation, we use the fact that standard tableau are in bijection with involution.\n\nAssignee: gchatel\n\nCC:  vivianepons @tscrim @darijgr sage-combinat @nthiery\n\nKeywords: StandardTableaux, random, combinat\n\nReviewer: Darij Grinberg\n\nAuthor: Gr\u00e9gory Ch\u00e2tel\n\nBranch: 3247ee5accbcd22ebb640c95c3bf37bdf41fb0dd\n\nCommit: 3247ee5accbcd22ebb640c95c3bf37bdf41fb0dd\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17233\n\n",
    "closed_at": "2014-10-29T22:13:21Z",
    "created_at": "2014-10-27T14:06:43Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Uniform  random generation  of StandardTableau of a given size",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17233",
    "user": "https://github.com/rodgzilla"
}
```
I am overwritting the default random_element method of the StandardTableaux_size class to implement an efficient way to compute a random standard tableau.

As explained in the documentation, we use the fact that standard tableau are in bijection with involution.

Assignee: gchatel

CC:  vivianepons @tscrim @darijgr sage-combinat @nthiery

Keywords: StandardTableaux, random, combinat

Reviewer: Darij Grinberg

Author: Grégory Châtel

Branch: 3247ee5accbcd22ebb640c95c3bf37bdf41fb0dd

Commit: 3247ee5accbcd22ebb640c95c3bf37bdf41fb0dd

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17233





---

archive/issue_comments_225119.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2014-10-27T14:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225119",
    "user": "https://github.com/rodgzilla"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_225120.json:
```json
{
    "body": "<a id='comment:2'></a>This code is finished and seems to be working. How can I add doctest and examples although the output is random. For this reason, I didn't put a \"need review\" yet but anyone is welcome to start.",
    "created_at": "2014-10-27T14:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225120",
    "user": "https://github.com/rodgzilla"
}
```

<a id='comment:2'></a>This code is finished and seems to be working. How can I add doctest and examples although the output is random. For this reason, I didn't put a "need review" yet but anyone is welcome to start.



---

archive/issue_comments_225121.json:
```json
{
    "body": "<a id='comment:3'></a>You mark it as `# random`.",
    "created_at": "2014-10-27T17:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225121",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>You mark it as `# random`.



---

archive/issue_comments_225122.json:
```json
{
    "body": "<a id='comment:4'></a>Just a few comments:\n\n- The doc should start with a brief description of what the code does, not what theorems it uses. If your algorithm gives a uniform random permutation, then it should say so explicitly.\n\n- Do not use generic catch-all constructors such as `Permutation(...)`. These ducktype the input to guess which form you are giving the permutation in. This is great for interactive use, but in your code you know what form you are giving already -- it is the cycle form. So you can save some time and remove a source of possible bugs by replacing `Permutation(...)` by `sage.combinat.permutation.from_cycles(...)`.\n\n- Is this:\n\n```\nPerfectMatchings(set(range(1, self.size + 1)) - set(fixed_point_positions)).random_element()\n```\nactually efficient? I am asking because I don't see a random method in perfect_matchings.py, but I might not be looking in the right place.",
    "created_at": "2014-10-27T18:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225122",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>Just a few comments:

- The doc should start with a brief description of what the code does, not what theorems it uses. If your algorithm gives a uniform random permutation, then it should say so explicitly.

- Do not use generic catch-all constructors such as `Permutation(...)`. These ducktype the input to guess which form you are giving the permutation in. This is great for interactive use, but in your code you know what form you are giving already -- it is the cycle form. So you can save some time and remove a source of possible bugs by replacing `Permutation(...)` by `sage.combinat.permutation.from_cycles(...)`.

- Is this:

```
PerfectMatchings(set(range(1, self.size + 1)) - set(fixed_point_positions)).random_element()
```
actually efficient? I am asking because I don't see a random method in perfect_matchings.py, but I might not be looking in the right place.



---

archive/issue_comments_225123.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 darij]:\n> - Is this:\n> \n> ```\n> PerfectMatchings(set(range(1, self.size + 1)) - set(fixed_point_positions)).random_element()\n> ```\n>   actually efficient? I am asking because I don't see a random method in perfect_matchings.py, but I might not be looking in the right place.\n\n\nThere is a `random_element` in `perfect_matchings.py`; although it calls `Permutations(n).random_element()` which looks like it's fast.",
    "created_at": "2014-10-27T18:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225123",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>Replying to [comment:4 darij]:
> - Is this:
> 
> ```
> PerfectMatchings(set(range(1, self.size + 1)) - set(fixed_point_positions)).random_element()
> ```
>   actually efficient? I am asking because I don't see a random method in perfect_matchings.py, but I might not be looking in the right place.


There is a `random_element` in `perfect_matchings.py`; although it calls `Permutations(n).random_element()` which looks like it's fast.



---

archive/issue_comments_225124.json:
```json
{
    "body": "<a id='comment:6'></a>Oops, I think I was looking at some outdated version of the file on the internet.",
    "created_at": "2014-10-27T18:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225124",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>Oops, I think I was looking at some outdated version of the file on the internet.



---

archive/issue_comments_225125.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2014-10-27T18:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225125",
    "user": "https://github.com/tscrim"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_225126.json:
```json
{
    "body": "<a id='comment:8'></a>More minor comments:\n\n- \"couple\" should be \"pair\" in mathematical usage.\n\n- You are using `Permutations(self.size).random_element()[:fixed_point_number]` to generate a random `k`-element subset of `{1, 2, ..., n}` (if I understand you correctly -- otherwise, please correct me!). I think you can just as well do `sage.misc.prandom.sample(range(1, n+1), k)`, which is the method that is internally used when you call `Permutations(self.size).random_element()`.",
    "created_at": "2014-10-27T19:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225126",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>More minor comments:

- "couple" should be "pair" in mathematical usage.

- You are using `Permutations(self.size).random_element()[:fixed_point_number]` to generate a random `k`-element subset of `{1, 2, ..., n}` (if I understand you correctly -- otherwise, please correct me!). I think you can just as well do `sage.misc.prandom.sample(range(1, n+1), k)`, which is the method that is internally used when you call `Permutations(self.size).random_element()`.



---

archive/issue_comments_225127.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T10:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225128.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T10:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225129.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-28T11:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225129",
    "user": "https://github.com/rodgzilla"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_225130.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T13:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225131.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T15:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225132.json:
```json
{
    "body": "<a id='comment:15'></a>Here's my review patch. If you are fine with it, please set this to positive_review.\n\n`binomial` should be imported from `sage.rings.arith` rather than from `sage.functions.other` when you just want to compute binomial coefficients of integers. Check this:\n\n```\nsage: %timeit binomial(13, 5) # This is the one from sage.functions.other\n10000 loops, best of 3: 61.1 \u00b5s per loop\nsage: %timeit sage.rings.arith.binomial(13, 5)\n100000 loops, best of 3: 5.6 \u00b5s per loop\nsage: %timeit binomial(54, 23)\n10000 loops, best of 3: 61.7 \u00b5s per loop\nsage: %timeit sage.rings.arith.binomial(54, 23)\n100000 loops, best of 3: 6.16 \u00b5s per loop\n```",
    "created_at": "2014-10-28T15:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225132",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>Here's my review patch. If you are fine with it, please set this to positive_review.

`binomial` should be imported from `sage.rings.arith` rather than from `sage.functions.other` when you just want to compute binomial coefficients of integers. Check this:

```
sage: %timeit binomial(13, 5) # This is the one from sage.functions.other
10000 loops, best of 3: 61.1 µs per loop
sage: %timeit sage.rings.arith.binomial(13, 5)
100000 loops, best of 3: 5.6 µs per loop
sage: %timeit binomial(54, 23)
10000 loops, best of 3: 61.7 µs per loop
sage: %timeit sage.rings.arith.binomial(54, 23)
100000 loops, best of 3: 6.16 µs per loop
```



---

archive/issue_comments_225133.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T18:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225134.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-28T18:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225134",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_225135.json:
```json
{
    "body": "<a id='comment:18'></a>PDF docs don't bulid (lfoor -> lfloor)",
    "created_at": "2014-10-28T21:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225135",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>PDF docs don't bulid (lfoor -> lfloor)



---

archive/issue_comments_225136.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-10-28T21:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225136",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_225137.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T22:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225138.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-10-28T22:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225138",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_225139.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-29T22:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17233#issuecomment-225139",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-29T22:13:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17233",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17233#event-49883"
}
```
