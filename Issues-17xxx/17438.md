# Issue 17438: coefficients of symbolic expressions revamp

archive/issues_017201.json:
```json
{
    "assignees": [],
    "body": "The ticket asks for\n* adding a `sparse` parameter to `Expression.coefficients()`, default `True`\n* removing/deprecating the `coeff` and `coeffs` aliases\n* implement `Expression.list()`, simply calling `coefficients(sparse=False)`\n\nThis appears to be consensus for polynomials in the thread https://groups.google.com/forum/?hl=en#!topic/sage-devel/IHirUHTWnuA \n\n\nKeywords: **list, polynomial, coeff**\n\nBranch/Commit: **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**\n\nReviewer: **John Perry**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17438_\n\n",
    "closed_at": "2014-12-21T21:45:18Z",
    "created_at": "2014-12-03T09:27:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "coefficients of symbolic expressions revamp",
    "type": "issue",
    "updated_at": "2014-12-21T21:45:18Z",
    "url": "https://github.com/sagemath/sage/issues/17438",
    "user": "https://github.com/rwst"
}
```
The ticket asks for
* adding a `sparse` parameter to `Expression.coefficients()`, default `True`
* removing/deprecating the `coeff` and `coeffs` aliases
* implement `Expression.list()`, simply calling `coefficients(sparse=False)`

This appears to be consensus for polynomials in the thread https://groups.google.com/forum/?hl=en#!topic/sage-devel/IHirUHTWnuA 


Keywords: **list, polynomial, coeff**

Branch/Commit: **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**

Reviewer: **John Perry**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/17438_





---

archive/issue_events_248598.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-03T09:27:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248598"
}
```



---

archive/issue_events_248599.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-03T09:27:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248599"
}
```



---

archive/issue_events_248600.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-03T09:27:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248600"
}
```



---

archive/issue_events_248601.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-03T09:27:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248601"
}
```



---

archive/issue_comments_233423.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOK, noninteger exponents will throw an exception with `sparse=False`. Any better idea?",
    "created_at": "2014-12-03T10:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233423",
    "user": "https://github.com/rwst"
}
```

<div id="comment:1" align="right">comment:1</div>

OK, noninteger exponents will throw an exception with `sparse=False`. Any better idea?



---

archive/issue_comments_233424.json:
```json
{
    "body": "Branch: **[u/rws/coefficients_of_symbolic_expressions_revamp](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/coefficients_of_symbolic_expressions_revamp)**",
    "created_at": "2014-12-03T15:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233424",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/coefficients_of_symbolic_expressions_revamp](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/coefficients_of_symbolic_expressions_revamp)**



---

archive/issue_comments_233425.json:
```json
{
    "body": "Commit: **[`9452fa9`](https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13)**",
    "created_at": "2014-12-04T09:31:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233425",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`9452fa9`](https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13)**



---

archive/issue_comments_233426.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13\"><code>9452fa9</code></a></td><td><code>17438: deprecate ex.coeff/coeffs()</code></td></tr></table>\n",
    "created_at": "2014-12-04T09:31:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13"><code>9452fa9</code></a></td><td><code>17438: deprecate ex.coeff/coeffs()</code></td></tr></table>




---

archive/issue_comments_233427.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742\"><code>0fec129</code></a></td><td><code>17438: implement ex.list()</code></td></tr></table>\n",
    "created_at": "2014-12-04T09:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233427",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742"><code>0fec129</code></a></td><td><code>17438: implement ex.list()</code></td></tr></table>




---

archive/issue_comments_233428.json:
```json
{
    "body": "Changed commit from **[`9452fa9`](https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13)** to **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**",
    "created_at": "2014-12-04T09:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233428",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9452fa9`](https://github.com/sagemath/sagetrac-mirror/commit/9452fa934b8064657743e4ba32869430304fdb13)** to **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**



---

archive/issue_events_248602.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-12-04T09:49:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248602"
}
```



---

archive/issue_comments_233429.json:
```json
{
    "body": "Changed keywords from none to **list, polynomial, coeff**",
    "created_at": "2014-12-04T09:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233429",
    "user": "https://github.com/rwst"
}
```

Changed keywords from none to **list, polynomial, coeff**



---

archive/issue_comments_233430.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2014-12-04T09:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233430",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_233431.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'm looking at this now. I'm sorry for the delay; I only finished traveling this past weekend.\n\nUnfortunately, it looks like the delay will take even longer, because after checking out your branch, Sage wants to recompile every blessed Cython file... as usual... and it just failed on 'sage/algebras/quatalg/quaternion_algebra_cython.pyx'. Great.\n\nAny ideas?",
    "created_at": "2014-12-16T13:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233431",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:7" align="right">comment:7</div>

I'm looking at this now. I'm sorry for the delay; I only finished traveling this past weekend.

Unfortunately, it looks like the delay will take even longer, because after checking out your branch, Sage wants to recompile every blessed Cython file... as usual... and it just failed on 'sage/algebras/quatalg/quaternion_algebra_cython.pyx'. Great.

Any ideas?



---

archive/issue_comments_233432.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI've left that temporary branch, deleted it, & am first rebuilding the develop branch. I'll try again when Sage quits compiling all the Cython files. The good news is that it made it past `sage/algebras/quatalg/quaternion_algebra_cython.pyx`. :-)",
    "created_at": "2014-12-16T14:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233432",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:8" align="right">comment:8</div>

I've left that temporary branch, deleted it, & am first rebuilding the develop branch. I'll try again when Sage quits compiling all the Cython files. The good news is that it made it past `sage/algebras/quatalg/quaternion_algebra_cython.pyx`. :-)



---

archive/issue_comments_233433.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nImporting fails, again. Failure occurs in the same place, but the first message that looks like an error is this:\n\n```\nmissing cimport in module 'cpython.slice': ./sage/rings/number_field/number_field_element.pxd\n```\nDunno how to proceed from here. FWIW I'm trying to build from my Sage-6.3 develop branch. Do I have to download Sage-6.4, or even a recent beta of Sage-6.5?",
    "created_at": "2014-12-16T15:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233433",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:9" align="right">comment:9</div>

Importing fails, again. Failure occurs in the same place, but the first message that looks like an error is this:

```
missing cimport in module 'cpython.slice': ./sage/rings/number_field/number_field_element.pxd
```
Dunno how to proceed from here. FWIW I'm trying to build from my Sage-6.3 develop branch. Do I have to download Sage-6.4, or even a recent beta of Sage-6.5?



---

archive/issue_comments_233434.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe branch is based on 6.5beta1 and the newest develop is beta2. Do you want me to merge beta2 into the branch?",
    "created_at": "2014-12-16T15:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233434",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

The branch is based on 6.5beta1 and the newest develop is beta2. Do you want me to merge beta2 into the branch?



---

archive/issue_comments_233435.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@rwst](#comment:10):\n> The branch is based on 6.5beta1 and the newest develop is beta2. Do you want me to merge beta2 into the branch?\n\nI have no idea. Let me try downloading & building 6.5beta1 first, then applying your patch. (I imagine I can find 6.5beta1 online.) That will take a few hours, so I'll know what to ask at that point, which (for me) may be tomorrow. Sorry again for the delay.\n\n*Edit:* Yup! I found 6.5beta1 online without too much work.",
    "created_at": "2014-12-16T16:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233435",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@rwst](#comment:10):
> The branch is based on 6.5beta1 and the newest develop is beta2. Do you want me to merge beta2 into the branch?

I have no idea. Let me try downloading & building 6.5beta1 first, then applying your patch. (I imagine I can find 6.5beta1 online.) That will take a few hours, so I'll know what to ask at that point, which (for me) may be tomorrow. Sorry again for the delay.

*Edit:* Yup! I found 6.5beta1 online without too much work.



---

archive/issue_comments_233436.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nYou really should use git so you don't need to download tarballs. How would you apply this branch or upload trac without git, anyway?",
    "created_at": "2014-12-16T16:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233436",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

You really should use git so you don't need to download tarballs. How would you apply this branch or upload trac without git, anyway?



---

archive/issue_comments_233437.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n\n```diff\n+ val = l[0][1]\n+ if val < 0:\n+ raise ValueError(\"Cannot return dense coefficient list with negative valuation.\")\n```\n\nI can understand the rationale behind this `ValueError`. Yet, couldn't this be useful in some cases to have a dense list of coefficients, even if the first one is not the constant coefficient? In some sense, since the user has to specify `sparse=dense`, she knows what she is doing. I feel like it is better not to raise exceptions when a meaningful (and not too misleading) answer exists.\n\nYet, I just checked the situation for Laurent polynomials and it appears that only the list of nonzero coefficients can be computed. That is the implementation you propose is consistent with the case of Laurent polynomials.",
    "created_at": "2014-12-16T16:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233437",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:13" align="right">comment:13</div>


```diff
+ val = l[0][1]
+ if val < 0:
+ raise ValueError("Cannot return dense coefficient list with negative valuation.")
```

I can understand the rationale behind this `ValueError`. Yet, couldn't this be useful in some cases to have a dense list of coefficients, even if the first one is not the constant coefficient? In some sense, since the user has to specify `sparse=dense`, she knows what she is doing. I feel like it is better not to raise exceptions when a meaningful (and not too misleading) answer exists.

Yet, I just checked the situation for Laurent polynomials and it appears that only the list of nonzero coefficients can be computed. That is the implementation you propose is consistent with the case of Laurent polynomials.



---

archive/issue_comments_233438.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@rwst](#comment:12):\n> You really should use git so you don't need to download tarballs. How would you apply this branch or upload trac without git, anyway?\n\nI **am** using git, and following the sage developer manual, to boot. How would I upgrade source from 6.3 to 6.5 without downloading the latest tar ball? even if I did, how would I avoid recompiling source when there are so many changes between branches?",
    "created_at": "2014-12-16T16:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233438",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@rwst](#comment:12):
> You really should use git so you don't need to download tarballs. How would you apply this branch or upload trac without git, anyway?

I **am** using git, and following the sage developer manual, to boot. How would I upgrade source from 6.3 to 6.5 without downloading the latest tar ball? even if I did, how would I avoid recompiling source when there are so many changes between branches?



---

archive/issue_comments_233439.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nGiven you have cloned `github.com/sagemath/sage` twice (master, develop) you checkout develop and say `git pull`. Whatever version you had, now you have 6.5beta2. Whenever you `git trac checkout 17438` you will have the version that I was using on upload, i.e., 6.5beta1.\n\nThe best strategy for you with an old clone would be to pull HEAD (=6.5beta2), `make clean; make` then `git trac checkout 17438`, and now NOT `make` but `sage -b`. Also, installing ccache is very very recommended.",
    "created_at": "2014-12-16T16:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233439",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

Given you have cloned `github.com/sagemath/sage` twice (master, develop) you checkout develop and say `git pull`. Whatever version you had, now you have 6.5beta2. Whenever you `git trac checkout 17438` you will have the version that I was using on upload, i.e., 6.5beta1.

The best strategy for you with an old clone would be to pull HEAD (=6.5beta2), `make clean; make` then `git trac checkout 17438`, and now NOT `make` but `sage -b`. Also, installing ccache is very very recommended.



---

archive/issue_comments_233440.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI forgot: Did I say that without `git-trac` development is tedious? Highly recommended.",
    "created_at": "2014-12-16T16:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233440",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16" align="right">comment:16</div>

I forgot: Did I say that without `git-trac` development is tedious? Highly recommended.



---

archive/issue_comments_233441.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@rwst](#comment:15):\n> Given you have cloned `github.com/sagemath/sage` twice (master, develop) you checkout develop and say `git pull`. Whatever version you had, now you have 6.5beta2. Whenever you `git trac checkout 17438` you will have the version that I was using on upload, i.e., 6.5beta1.\n\nOK, yes, I have a master; I have a develop; I had switched to develop (`checkout develop`) & recompiled. But I did not do a `git pull`, because the developer's manual says nothing* about that, aside from pulling, say, a particular branch (which is what I did: I pulled your branch, and compilation failed). Also, the Sage Developer's Guide says to create a new branch for a ticket (`git checkout` **`-b`** `my_branch FETCH_HEAD`) so that's what I did. Was that wrong, too?\n\n> The best strategy for you with an old clone would be to pull HEAD (=6.5beta2), `make clean; make` then `git trac checkout 17438`, and now NOT `make` but `sage -b`. Also, installing ccache is very very recommended.\n\nI could try that, though right now I have 6.5beta1 compiling, so I might as well stick with that for the time being.\n\n> Did I say that without `git-trac` development is tedious? Highly recommended.\n\nLots of people recommend it, but the Developer's Guide doesn't (\"you'll have to learn git eventually, anyway, so why not start now?\") and I'm actually working with other projects that use git (though not very much yet, & not very in-depth... just commit & push mostly).\n\n*I now see that it says nothing about that *in the section on checking out tickets.* In the section on *getting changes* it tells the reader, `git pull trac u/user/description`. Not sure if this is a contradiction, or something to be done sequentially, but I didn't infer that it was to be done sequentially, if so. So that could explain something.",
    "created_at": "2014-12-16T17:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233441",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@rwst](#comment:15):
> Given you have cloned `github.com/sagemath/sage` twice (master, develop) you checkout develop and say `git pull`. Whatever version you had, now you have 6.5beta2. Whenever you `git trac checkout 17438` you will have the version that I was using on upload, i.e., 6.5beta1.

OK, yes, I have a master; I have a develop; I had switched to develop (`checkout develop`) & recompiled. But I did not do a `git pull`, because the developer's manual says nothing* about that, aside from pulling, say, a particular branch (which is what I did: I pulled your branch, and compilation failed). Also, the Sage Developer's Guide says to create a new branch for a ticket (`git checkout` **`-b`** `my_branch FETCH_HEAD`) so that's what I did. Was that wrong, too?

> The best strategy for you with an old clone would be to pull HEAD (=6.5beta2), `make clean; make` then `git trac checkout 17438`, and now NOT `make` but `sage -b`. Also, installing ccache is very very recommended.

I could try that, though right now I have 6.5beta1 compiling, so I might as well stick with that for the time being.

> Did I say that without `git-trac` development is tedious? Highly recommended.

Lots of people recommend it, but the Developer's Guide doesn't ("you'll have to learn git eventually, anyway, so why not start now?") and I'm actually working with other projects that use git (though not very much yet, & not very in-depth... just commit & push mostly).

*I now see that it says nothing about that *in the section on checking out tickets.* In the section on *getting changes* it tells the reader, `git pull trac u/user/description`. Not sure if this is a contradiction, or something to be done sequentially, but I didn't infer that it was to be done sequentially, if so. So that could explain something.



---

archive/issue_comments_233442.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@rwst](#comment:15):\n> ... then `git trac checkout 17438`, and now NOT `make` but `sage -b`.\n\nAlso, I typically use `sage -b`, and invoke `make` only when first building sage. There was a discussion a while back on sage-devel about the fact that `sage -b` unnecessarily forces recompilation sometimes when only a couple of Python files have changed, and that was the first I recall reading that one is supposed to `make` Sage even during development at times.",
    "created_at": "2014-12-16T17:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233442",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@rwst](#comment:15):
> ... then `git trac checkout 17438`, and now NOT `make` but `sage -b`.

Also, I typically use `sage -b`, and invoke `make` only when first building sage. There was a discussion a while back on sage-devel about the fact that `sage -b` unnecessarily forces recompilation sometimes when only a couple of Python files have changed, and that was the first I recall reading that one is supposed to `make` Sage even during development at times.



---

archive/issue_comments_233443.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@johnperry-math](#comment:17):\n> ... Also, the Sage Developer's Guide says to create a new branch for a ticket (`git checkout` **`-b`** `my_branch FETCH_HEAD`) so that's what I did. Was that wrong, too?\n\nNo, there are several ways to skin a cat.\n> `git pull trac u/user/description`. Not sure if this is a contradiction...\n\nThat is actually not `git-trac` but using git with the argument `trac` (which is set in your `.git/config`.\n\nIt may well be that you will only appreciate the `git-trac` tool when you're more familiar with git and Sage. For why `git pull` is done: as developer you always want to work in your own projects with the newest code---this does a sync with the repo.",
    "created_at": "2014-12-16T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233443",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@johnperry-math](#comment:17):
> ... Also, the Sage Developer's Guide says to create a new branch for a ticket (`git checkout` **`-b`** `my_branch FETCH_HEAD`) so that's what I did. Was that wrong, too?

No, there are several ways to skin a cat.
> `git pull trac u/user/description`. Not sure if this is a contradiction...

That is actually not `git-trac` but using git with the argument `trac` (which is set in your `.git/config`.

It may well be that you will only appreciate the `git-trac` tool when you're more familiar with git and Sage. For why `git pull` is done: as developer you always want to work in your own projects with the newest code---this does a sync with the repo.



---

archive/issue_comments_233444.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@rwst](#comment:19):\n> For why `git pull` is done: as developer you always want to work in your own projects with the newest code---this does a sync with the repo.\n\nEither way, I still seem stuck with a two-hour recompilation, except that at the moment I'm getting it from *both* the tarball *and* the git pull. :-)",
    "created_at": "2014-12-16T17:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233444",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@rwst](#comment:19):
> For why `git pull` is done: as developer you always want to work in your own projects with the newest code---this does a sync with the repo.

Either way, I still seem stuck with a two-hour recompilation, except that at the moment I'm getting it from *both* the tarball *and* the git pull. :-)



---

archive/issue_comments_233445.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAfter updating my `develop` branch per your instructions, importing your branch still prompts Sage to recompile Cython code, with near-immediate failure at `sage/algebras/quatalg/quaternion_algebra_cython.pyx`. (I appreciate the near-immediate failure. Failure 30 minutes into recompilation Cython would be mildly annoying.)\n\nI'll try anew when the fresh compile of 6.5 finishes. That could take a while; right now it's working on ppl.",
    "created_at": "2014-12-16T19:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233445",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:21" align="right">comment:21</div>

After updating my `develop` branch per your instructions, importing your branch still prompts Sage to recompile Cython code, with near-immediate failure at `sage/algebras/quatalg/quaternion_algebra_cython.pyx`. (I appreciate the near-immediate failure. Failure 30 minutes into recompilation Cython would be mildly annoying.)

I'll try anew when the fresh compile of 6.5 finishes. That could take a while; right now it's working on ppl.



---

archive/issue_comments_233446.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI was able to merge it into the fresh build of 6.5. Compiled with no problems; now running doctests.\n\nI'm going to open a new ticket \"soon\" for my version. Would you advise opening a new branch on top of this ticket, or opening a new branch from my develop branch & going from there?",
    "created_at": "2014-12-17T03:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233446",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:22" align="right">comment:22</div>

I was able to merge it into the fresh build of 6.5. Compiled with no problems; now running doctests.

I'm going to open a new ticket "soon" for my version. Would you advise opening a new branch on top of this ticket, or opening a new branch from my develop branch & going from there?



---

archive/issue_comments_233447.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nRan `sage -tp 2 -a` to ensure all doctests were run, since this has potentially wide ramifications. Did not run long doctests, since I don't see how they'd reveal anything different, but I can upon request. Doctests pass, reference documentation builds, code review makes sense, new doctests included to cover deprecation &c. Positive review.",
    "created_at": "2014-12-17T06:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233447",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:23" align="right">comment:23</div>

Ran `sage -tp 2 -a` to ensure all doctests were run, since this has potentially wide ramifications. Did not run long doctests, since I don't see how they'd reveal anything different, but I can upon request. Doctests pass, reference documentation builds, code review makes sense, new doctests included to cover deprecation &c. Positive review.



---

archive/issue_events_248603.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-17T06:20:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248603"
}
```



---

archive/issue_events_248604.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-17T06:20:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248604"
}
```



---

archive/issue_comments_233448.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks fo the review!\n\nReplying to [@johnperry-math](#comment:22):\n> Would you advise opening a new branch on top of this ticket, or opening a new branch from my develop branch & going from there?\n\nI rechecked that all changed code in this ticket concerns symbolic expressions. Merging would only be necessary in case of merge conflict or a dependency on that code. But the `rings/` code is completely independent of the `symbolics/` code, as far as I know (and it should be).",
    "created_at": "2014-12-17T08:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233448",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks fo the review!

Replying to [@johnperry-math](#comment:22):
> Would you advise opening a new branch on top of this ticket, or opening a new branch from my develop branch & going from there?

I rechecked that all changed code in this ticket concerns symbolic expressions. Merging would only be necessary in case of merge conflict or a dependency on that code. But the `rings/` code is completely independent of the `symbolics/` code, as far as I know (and it should be).



---

archive/issue_events_248605.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-17T23:21:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248605"
}
```



---

archive/issue_events_248606.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-17T23:21:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248606"
}
```



---

archive/issue_comments_233449.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nreviewer name",
    "created_at": "2014-12-17T23:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233449",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

reviewer name



---

archive/issue_events_248607.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-17T23:27:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248607"
}
```



---

archive/issue_events_248608.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-17T23:27:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248608"
}
```



---

archive/issue_comments_233450.json:
```json
{
    "body": "Reviewer: **john_perry**",
    "created_at": "2014-12-17T23:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233450",
    "user": "https://github.com/johnperry-math"
}
```

Reviewer: **john_perry**



---

archive/issue_comments_233451.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSorry about that.",
    "created_at": "2014-12-17T23:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233451",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:26" align="right">comment:26</div>

Sorry about that.



---

archive/issue_comments_233452.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe reviewer name is supposed to be your real name, not the trac account name.",
    "created_at": "2014-12-17T23:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233452",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

The reviewer name is supposed to be your real name, not the trac account name.



---

archive/issue_events_248609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-18T07:37:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248609"
}
```



---

archive/issue_events_248610.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-18T07:37:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248610"
}
```



---

archive/issue_comments_233453.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n\"`john_perry`\" changed to \"John Perry\". Let me know if it needs more changes.",
    "created_at": "2014-12-18T07:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233453",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:29" align="right">comment:29</div>

"`john_perry`" changed to "John Perry". Let me know if it needs more changes.



---

archive/issue_comments_233454.json:
```json
{
    "body": "Changed reviewer from **john_perry** to **John Perry**",
    "created_at": "2014-12-18T07:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233454",
    "user": "https://github.com/johnperry-math"
}
```

Changed reviewer from **john_perry** to **John Perry**



---

archive/issue_events_248611.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-18T07:47:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248611"
}
```



---

archive/issue_events_248612.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2014-12-18T07:47:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248612"
}
```



---

archive/issue_comments_233455.json:
```json
{
    "body": "Changed branch from **[u/rws/coefficients_of_symbolic_expressions_revamp](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/coefficients_of_symbolic_expressions_revamp)** to **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**",
    "created_at": "2014-12-21T21:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17438#issuecomment-233455",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/coefficients_of_symbolic_expressions_revamp](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/coefficients_of_symbolic_expressions_revamp)** to **[`0fec129`](https://github.com/sagemath/sagetrac-mirror/commit/0fec129b1055535de50cf4e5c663662e0d877742)**



---

archive/issue_events_248613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-21T21:45:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248613"
}
```



---

archive/issue_events_248614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b82e5e8e2d261b4082bfd1aa6d7b65ce23e99378",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-12-21T21:45:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17438",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17438#event-248614"
}
```
