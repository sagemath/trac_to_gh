# Issue 17841: --only-bad and --summary arguments for sage-coverage

archive/issues_017604.json:
```json
{
    "body": "Add two arguments for sage-coverage\n\n- `--only-bad` to print only informations about bad files\n- `--summary` to print only a summary\n\nWe also introduce the usage of the `argparse` python module. Because of that we automatically win an extra option `-h` and a nice display of the help.\n\nCC:  tmonteil @nathanncohen\n\nBranch/Commit: f7f147a1c509ae71f6e68a5d8ae2128394a2f42d\n\nReviewer: Nathann Cohen\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17841\n\n",
    "closed_at": "2015-02-24T00:39:13Z",
    "created_at": "2015-02-23T14:45:09Z",
    "labels": [
        "component: scripts"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "--only-bad and --summary arguments for sage-coverage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17841",
    "user": "https://github.com/videlec"
}
```
Add two arguments for sage-coverage

- `--only-bad` to print only informations about bad files
- `--summary` to print only a summary

We also introduce the usage of the `argparse` python module. Because of that we automatically win an extra option `-h` and a nice display of the help.

CC:  tmonteil @nathanncohen

Branch/Commit: f7f147a1c509ae71f6e68a5d8ae2128394a2f42d

Reviewer: Nathann Cohen

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17841





---

archive/issue_comments_305879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-23T14:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305879",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_305880.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/17841\"",
    "created_at": "2015-02-23T14:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305880",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/17841"



---

archive/issue_comments_305881.json:
```json
{
    "body": "Changing commit from \"\" to \"6c5572a1fa16fc529594784d5fcea86df8c66fd8\"",
    "created_at": "2015-02-23T14:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305881",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "6c5572a1fa16fc529594784d5fcea86df8c66fd8"



---

archive/issue_comments_305882.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - `--only-bad` to print only informations about bad files\n - `--summary` to print only a summary\n \n-We also introduce the usage of the `argparse` python module.\n+We also introduce the usage of the `argparse` python module. Because of that we automatically win an extra option `-h` and a nice display of the help.\n``````\n",
    "created_at": "2015-02-23T14:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305882",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - `--only-bad` to print only informations about bad files
 - `--summary` to print only a summary
 
-We also introduce the usage of the `argparse` python module.
+We also introduce the usage of the `argparse` python module. Because of that we automatically win an extra option `-h` and a nice display of the help.
``````




---

archive/issue_comments_305883.json:
```json
{
    "body": "Changing commit from \"6c5572a1fa16fc529594784d5fcea86df8c66fd8\" to \"c1359b2a3fc5336735af6815c16a200e658af0f1\"",
    "created_at": "2015-02-23T14:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6c5572a1fa16fc529594784d5fcea86df8c66fd8" to "c1359b2a3fc5336735af6815c16a200e658af0f1"



---

archive/issue_comments_305884.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[c1359b2](http://git.sagemath.org/sage.git/commit/?id=c1359b2a3fc5336735af6815c16a200e658af0f1)|`trac #17841: enhanced sage-coverage`|",
    "created_at": "2015-02-23T14:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[c1359b2](http://git.sagemath.org/sage.git/commit/?id=c1359b2a3fc5336735af6815c16a200e658af0f1)|`trac #17841: enhanced sage-coverage`|



---

archive/issue_comments_305885.json:
```json
{
    "body": "Changing commit from \"c1359b2a3fc5336735af6815c16a200e658af0f1\" to \"b9a2562f2b646c49d439cbb4d40d45f1555eabc4\"",
    "created_at": "2015-02-23T16:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305885",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c1359b2a3fc5336735af6815c16a200e658af0f1" to "b9a2562f2b646c49d439cbb4d40d45f1555eabc4"



---

archive/issue_comments_305886.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[b9a2562](http://git.sagemath.org/sage.git/commit/?id=b9a2562f2b646c49d439cbb4d40d45f1555eabc4)|`trac #17841: remove the '-' in the summary`|",
    "created_at": "2015-02-23T16:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[b9a2562](http://git.sagemath.org/sage.git/commit/?id=b9a2562f2b646c49d439cbb4d40d45f1555eabc4)|`trac #17841: remove the '-' in the summary`|



---

archive/issue_comments_305887.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[caf841a](http://git.sagemath.org/sage.git/commit/?id=caf841a9cb818cc54d1949a4b63a7fecb41ff780)|`trac #17841: nb of files with bad doc in the summary`|",
    "created_at": "2015-02-23T16:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[caf841a](http://git.sagemath.org/sage.git/commit/?id=caf841a9cb818cc54d1949a4b63a7fecb41ff780)|`trac #17841: nb of files with bad doc in the summary`|



---

archive/issue_comments_305888.json:
```json
{
    "body": "Changing commit from \"b9a2562f2b646c49d439cbb4d40d45f1555eabc4\" to \"caf841a9cb818cc54d1949a4b63a7fecb41ff780\"",
    "created_at": "2015-02-23T16:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b9a2562f2b646c49d439cbb4d40d45f1555eabc4" to "caf841a9cb818cc54d1949a4b63a7fecb41ff780"



---

archive/issue_comments_305889.json:
```json
{
    "body": "output of sage-coverage --summary .",
    "created_at": "2015-02-23T16:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305889",
    "user": "https://github.com/videlec"
}
```

output of sage-coverage --summary .



---

archive/issue_comments_305890.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [bad_files.txt](tarball://root/attachments/some-uuid/ticket17841/bad_files.txt) by @videlec created at 2015-02-23 16:21:40\n\nIn [This is the Trac macro *attachment:bad_files.txt* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:bad_files.txt-macro) (= output of `sage-coverage --summary $SAGE_ROOT/src/sage`) one can see that we have\n- 401 files with wrong documentation\n- 1514 functions with no doc\n- 563 functions with no test\n- 310 doctest are potentially wrong",
    "created_at": "2015-02-23T16:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305890",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Attachment [bad_files.txt](tarball://root/attachments/some-uuid/ticket17841/bad_files.txt) by @videlec created at 2015-02-23 16:21:40

In [This is the Trac macro *attachment:bad_files.txt* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:bad_files.txt-macro) (= output of `sage-coverage --summary $SAGE_ROOT/src/sage`) one can see that we have
- 401 files with wrong documentation
- 1514 functions with no doc
- 563 functions with no test
- 310 doctest are potentially wrong



---

archive/issue_comments_305891.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[854f13d](http://git.sagemath.org/sage.git/commit/?id=854f13d0940e24afa2dc04565d20a35ea8687516)|`trac #17841: show the global score in the summary`|",
    "created_at": "2015-02-23T16:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[854f13d](http://git.sagemath.org/sage.git/commit/?id=854f13d0940e24afa2dc04565d20a35ea8687516)|`trac #17841: show the global score in the summary`|



---

archive/issue_comments_305892.json:
```json
{
    "body": "Changing commit from \"caf841a9cb818cc54d1949a4b63a7fecb41ff780\" to \"854f13d0940e24afa2dc04565d20a35ea8687516\"",
    "created_at": "2015-02-23T16:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "caf841a9cb818cc54d1949a4b63a7fecb41ff780" to "854f13d0940e24afa2dc04565d20a35ea8687516"



---

archive/issue_comments_305893.json:
```json
{
    "body": "<a id='comment:8'></a>\nI added a commit at public/17841. If that's fine for you, then I guess it can go.\n\nNathann",
    "created_at": "2015-02-23T16:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305893",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
I added a commit at public/17841. If that's fine for you, then I guess it can go.

Nathann



---

archive/issue_comments_305894.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2015-02-23T16:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305894",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_305895.json:
```json
{
    "body": "Changing commit from \"854f13d0940e24afa2dc04565d20a35ea8687516\" to \"f7f147a1c509ae71f6e68a5d8ae2128394a2f42d\"",
    "created_at": "2015-02-23T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305895",
    "user": "https://github.com/videlec"
}
```

Changing commit from "854f13d0940e24afa2dc04565d20a35ea8687516" to "f7f147a1c509ae71f6e68a5d8ae2128394a2f42d"



---

archive/issue_comments_305896.json:
```json
{
    "body": "<a id='comment:9'></a>\nYour version did not work because of the variable `first` not being available.\n\n---\nNew commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[ad4cfd2](http://git.sagemath.org/sage.git/commit/?id=ad4cfd2a8426ea1ae8655503c7b86ca62cf233a0)|`trac #17841: Review`|\n|[f7f147a](http://git.sagemath.org/sage.git/commit/?id=f7f147a1c509ae71f6e68a5d8ae2128394a2f42d)|`trac #17841: missing \"global first\"`|",
    "created_at": "2015-02-23T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305896",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Your version did not work because of the variable `first` not being available.

---
New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[ad4cfd2](http://git.sagemath.org/sage.git/commit/?id=ad4cfd2a8426ea1ae8655503c7b86ca62cf233a0)|`trac #17841: Review`|
|[f7f147a](http://git.sagemath.org/sage.git/commit/?id=f7f147a1c509ae71f6e68a5d8ae2128394a2f42d)|`trac #17841: missing "global first"`|



---

archive/issue_comments_305897.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/17841\" to \"public/17841\"",
    "created_at": "2015-02-23T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305897",
    "user": "https://github.com/videlec"
}
```

Changing branch from "u/vdelecroix/17841" to "public/17841"



---

archive/issue_comments_305898.json:
```json
{
    "body": "<a id='comment:10'></a>\n`O_o`\n\nWeird.. I thought that I had run that script to test that `^^;;;`\n\nNathann",
    "created_at": "2015-02-23T17:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305898",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
`O_o`

Weird.. I thought that I had run that script to test that `^^;;;`

Nathann



---

archive/issue_comments_305899.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-23T17:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305899",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_305900.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks!\n\n(possibly you did not run it without any of the long option)",
    "created_at": "2015-02-23T17:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305900",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Thanks!

(possibly you did not run it without any of the long option)



---

archive/issue_comments_305901.json:
```json
{
    "body": "Changing branch from \"public/17841\" to \"f7f147a1c509ae71f6e68a5d8ae2128394a2f42d\"",
    "created_at": "2015-02-24T00:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305901",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/17841" to "f7f147a1c509ae71f6e68a5d8ae2128394a2f42d"



---

archive/issue_events_050894.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-24T00:39:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17841#event-50894"
}
```



---

archive/issue_comments_305902.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-24T00:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17841#issuecomment-305902",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
