# Issue 17205: update ore_algebra package

archive/issues_016968.json:
```json
{
    "body": "After installing the ore_algebra-0.1 in Sage 6.3, the import as suggested in the [documentation](http://www.risc.jku.at/research/combinat/software/ore_algebra/) fails.\n\n```\nsage: from ore_algebra import *\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-1-27ab6e1c2b69> in <module>()\n----> 1 from ore_algebra import *\n\n/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/__init__.py in <module>()\n     12 \n     13 from ore_algebra import OreAlgebra\n---> 14 from guessing import guess, guess_raw\n     15 \n     16 \"\"\"\n\n/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/guessing.py in <module>()\n     30 from sage.rings.integer_ring import ZZ\n     31 from sage.rings.rational_field import QQ\n---> 32 from sage.rings.finite_rings.all import GF, is_FiniteField\n     33 from sage.matrix.constructor import Matrix, matrix\n     34 from sage.rings.arith import xgcd\n\nImportError: cannot import name is_FiniteField\n```\n\nSimilarly on SageMathCloud running Sage 6.3.\n\n```\nfrom ore_algebra import *\nError in lines 1-1\nTraceback (most recent call last):\n  File \"/projects/9700d68d-67c2-4a91-a689-c1d5b8b3f15e/.sagemathcloud/sage_server.py\", line 841, in execute\n    exec compile(block+'\\n', '', 'single') in namespace, locals\n  File \"\", line 1, in <module>\n  File \"/usr/local/sage/sage-6.3.beta6/local/lib/python2.7/site-packages/ore_algebra/__init__.py\", line 14, in <module>\n    from guessing import guess, guess_raw\n  File \"/usr/local/sage/sage-6.3.beta6/local/lib/python2.7/site-packages/ore_algebra/guessing.py\", line 32, in <module>\n    from sage.rings.finite_rings.all import GF, is_FiniteField\nImportError: cannot import name is_FiniteField\n```\n\n---\n\nNew spkg: http://www.risc.jku.at/research/combinat/software/ore_algebra/ore_algebra-0.2.spkg\n\nThis should be copied to the mirrors. Since it is an old-style spkg, no modifications to Sage are needed.\n\nCC:  @fredrik-johansson @mkauers @haraldschilly\n\nKeywords: ImportError\n\nUpstream: Fixed upstream, in a later stable release.\n\nReviewer: Karl-Dieter Crisman, John Palmieri, Konstantin Ziegler\n\nAuthor: Manuel Kauers\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17205\n\n",
    "closed_at": "2014-11-19T11:44:51Z",
    "created_at": "2014-10-23T16:09:28Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "update ore_algebra package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17205",
    "user": "https://github.com/zieglerk"
}
```
After installing the ore_algebra-0.1 in Sage 6.3, the import as suggested in the [documentation](http://www.risc.jku.at/research/combinat/software/ore_algebra/) fails.

```
sage: from ore_algebra import *
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-27ab6e1c2b69> in <module>()
----> 1 from ore_algebra import *

/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/__init__.py in <module>()
     12 
     13 from ore_algebra import OreAlgebra
---> 14 from guessing import guess, guess_raw
     15 
     16 """

/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/guessing.py in <module>()
     30 from sage.rings.integer_ring import ZZ
     31 from sage.rings.rational_field import QQ
---> 32 from sage.rings.finite_rings.all import GF, is_FiniteField
     33 from sage.matrix.constructor import Matrix, matrix
     34 from sage.rings.arith import xgcd

ImportError: cannot import name is_FiniteField
```

Similarly on SageMathCloud running Sage 6.3.

```
from ore_algebra import *
Error in lines 1-1
Traceback (most recent call last):
  File "/projects/9700d68d-67c2-4a91-a689-c1d5b8b3f15e/.sagemathcloud/sage_server.py", line 841, in execute
    exec compile(block+'\n', '', 'single') in namespace, locals
  File "", line 1, in <module>
  File "/usr/local/sage/sage-6.3.beta6/local/lib/python2.7/site-packages/ore_algebra/__init__.py", line 14, in <module>
    from guessing import guess, guess_raw
  File "/usr/local/sage/sage-6.3.beta6/local/lib/python2.7/site-packages/ore_algebra/guessing.py", line 32, in <module>
    from sage.rings.finite_rings.all import GF, is_FiniteField
ImportError: cannot import name is_FiniteField
```

---

New spkg: http://www.risc.jku.at/research/combinat/software/ore_algebra/ore_algebra-0.2.spkg

This should be copied to the mirrors. Since it is an old-style spkg, no modifications to Sage are needed.

CC:  @fredrik-johansson @mkauers @haraldschilly

Keywords: ImportError

Upstream: Fixed upstream, in a later stable release.

Reviewer: Karl-Dieter Crisman, John Palmieri, Konstantin Ziegler

Author: Manuel Kauers

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17205





---

archive/issue_comments_286469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,6 +20,8 @@\n ---> 32 from sage.rings.finite_rings.all import GF, is_FiniteField\n      33 from sage.matrix.constructor import Matrix, matrix\n      34 from sage.rings.arith import xgcd\n+\n+ImportError: cannot import name is_FiniteField\n ```\n \n Similarly on SageMathCloud running Sage 6.3.\n``````\n",
    "created_at": "2014-10-23T16:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286469",
    "user": "https://github.com/zieglerk"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,6 +20,8 @@
 ---> 32 from sage.rings.finite_rings.all import GF, is_FiniteField
      33 from sage.matrix.constructor import Matrix, matrix
      34 from sage.rings.arith import xgcd
+
+ImportError: cannot import name is_FiniteField
 ```
 
 Similarly on SageMathCloud running Sage 6.3.
``````




---

archive/issue_comments_286470.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt looks like the ore_algebra package needs to be changed: `is_FiniteField` is no longer available as an import from `sage.rings.finite_rings.all`. This change happened between version 6.2 and 6.3. (The function `is_FiniteField` has been deprecated for some time, so this change should not have been a surprise.)\n\nYou should be able to fix this by changing the line\n\n```\nfrom sage.rings.finite_rings.all import GF, is_FiniteField\n```\nin the file `/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/guessing.py` to\n\n```\nfrom sage.rings.finite_rings.all import GF\n```",
    "created_at": "2014-10-23T17:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286470",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
It looks like the ore_algebra package needs to be changed: `is_FiniteField` is no longer available as an import from `sage.rings.finite_rings.all`. This change happened between version 6.2 and 6.3. (The function `is_FiniteField` has been deprecated for some time, so this change should not have been a surprise.)

You should be able to fix this by changing the line

```
from sage.rings.finite_rings.all import GF, is_FiniteField
```
in the file `/home/zieglerk/local/share/sage/local/lib/python2.7/site-packages/ore_algebra/guessing.py` to

```
from sage.rings.finite_rings.all import GF
```



---

archive/issue_comments_286471.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2014-11-17T18:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286471",
    "user": "https://github.com/kcrisman"
}
```

Changing upstream from "N/A" to "Fixed upstream, in a later stable release."



---

archive/issue_events_064436.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "rename": {
        "from": "ore_algebra fails to import",
        "to": "update ore_algebra package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17205#event-64436"
}
```



---

archive/issue_comments_286472.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks like upstream is ahead of us and just didn't bother to mention it!  [This says it's at 0.2, for Sage 6.3](http://www.risc.jku.at/research/combinat/software/ore_algebra/).",
    "created_at": "2014-11-17T18:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286472",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
Looks like upstream is ahead of us and just didn't bother to mention it!  [This says it's at 0.2, for Sage 6.3](http://www.risc.jku.at/research/combinat/software/ore_algebra/).



---

archive/issue_comments_286473.json:
```json
{
    "body": "Changing author from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2014-11-17T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286473",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "" to "Karl-Dieter Crisman"



---

archive/issue_comments_286474.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2014-11-17T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286474",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_286475.json:
```json
{
    "body": "<a id='comment:4'></a>\nSo we should be able to solve this by upgrading to version 0.2. I took a look at 0.2, and it imports without breaking. Not everything works, though, and I wish it had functioning doctests or a functioning test suite, or both. A quick example, taken from the file `nullspace.py`:\n\n```\nsage: from ore_algebra.nullspace import *\nsage: my_solver = cra(kronecker(gauss()))\nsage: A = MatrixSpace(ZZ['x', 'y'], 4, 5).random_element()\nsage: V = my_solver(A)\n```\nproduces a `TypeError` for me (with Sage 6.5.beta0):\n\n```\nTypeError: x must be one of the generators of the parent.\n```\nOh well. Let's upgrade on this ticket. Later on, we might consider changing this to a new-style spkg, but that can wait.\n\nShall I give this a positive review?",
    "created_at": "2014-11-17T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286475",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
So we should be able to solve this by upgrading to version 0.2. I took a look at 0.2, and it imports without breaking. Not everything works, though, and I wish it had functioning doctests or a functioning test suite, or both. A quick example, taken from the file `nullspace.py`:

```
sage: from ore_algebra.nullspace import *
sage: my_solver = cra(kronecker(gauss()))
sage: A = MatrixSpace(ZZ['x', 'y'], 4, 5).random_element()
sage: V = my_solver(A)
```
produces a `TypeError` for me (with Sage 6.5.beta0):

```
TypeError: x must be one of the generators of the parent.
```
Oh well. Let's upgrade on this ticket. Later on, we might consider changing this to a new-style spkg, but that can wait.

Shall I give this a positive review?



---

archive/issue_comments_286476.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,3 +39,9 @@\n     from sage.rings.finite_rings.all import GF, is_FiniteField\n ImportError: cannot import name is_FiniteField\n ```\n+\n+---\n+\n+New spkg: http://www.risc.jku.at/research/combinat/software/ore_algebra/ore_algebra-0.2.spkg\n+\n+This should be copied to the mirrors. Since it is an old-style spkg, no modifications to Sage are needed.\n``````\n",
    "created_at": "2014-11-17T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286476",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,3 +39,9 @@
     from sage.rings.finite_rings.all import GF, is_FiniteField
 ImportError: cannot import name is_FiniteField
 ```
+
+---
+
+New spkg: http://www.risc.jku.at/research/combinat/software/ore_algebra/ore_algebra-0.2.spkg
+
+This should be copied to the mirrors. Since it is an old-style spkg, no modifications to Sage are needed.
``````




---

archive/issue_comments_286477.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-17T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286477",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_286478.json:
```json
{
    "body": "<a id='comment:5'></a>\n(I don't really know who should be the \"author\" for this ticket. kcrisman found the new version, so I've listed him.)",
    "created_at": "2014-11-17T21:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286478",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
(I don't really know who should be the "author" for this ticket. kcrisman found the new version, so I've listed him.)



---

archive/issue_comments_286479.json:
```json
{
    "body": "<a id='comment:6'></a>\nI haven't really thought about this, but if it doesn't even work properly, maybe this should become an experimental package?",
    "created_at": "2014-11-17T21:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286479",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
I haven't really thought about this, but if it doesn't even work properly, maybe this should become an experimental package?



---

archive/issue_comments_286480.json:
```json
{
    "body": "<a id='comment:7'></a>\nI thought about that option, too.",
    "created_at": "2014-11-17T23:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286480",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
I thought about that option, too.



---

archive/issue_comments_286481.json:
```json
{
    "body": "<a id='comment:8'></a>\nI just installed [version 2.0](http://www.kauers.de/software/ore_algebra/ore_algebra-0.2.spkg) of the ore_algebra package in the latest development version of Sage (6.5.beta0). It loads without errors, but naturally I can't doctest without the sources. For what it's worth, the initial examples of the [documentation](http://arxiv.org/abs/1306.4263) work as described.",
    "created_at": "2014-11-17T23:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286481",
    "user": "https://github.com/zieglerk"
}
```

<a id='comment:8'></a>
I just installed [version 2.0](http://www.kauers.de/software/ore_algebra/ore_algebra-0.2.spkg) of the ore_algebra package in the latest development version of Sage (6.5.beta0). It loads without errors, but naturally I can't doctest without the sources. For what it's worth, the initial examples of the [documentation](http://arxiv.org/abs/1306.4263) work as described.



---

archive/issue_comments_286482.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe sources are present in `SAGE_ROOT/local/lib/python/site-libraries/ore_algebra`. Just running doctests on the files there doesn't work, though, I think because they're not part of the official Sage library. At least it didn't work for me. You can cut-and-paste examples from the source code into a Sage session to test it; that's what I did with `nullspace.py` (although you will need to add some import statements here and there).",
    "created_at": "2014-11-18T00:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286482",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
The sources are present in `SAGE_ROOT/local/lib/python/site-libraries/ore_algebra`. Just running doctests on the files there doesn't work, though, I think because they're not part of the official Sage library. At least it didn't work for me. You can cut-and-paste examples from the source code into a Sage session to test it; that's what I did with `nullspace.py` (although you will need to add some import statements here and there).



---

archive/issue_comments_286483.json:
```json
{
    "body": "Changing reviewer from \"John Palmieri\" to \"John Palmieri, Konstantin Ziegler\"",
    "created_at": "2014-11-18T02:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286483",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "John Palmieri" to "John Palmieri, Konstantin Ziegler"



---

archive/issue_comments_286484.json:
```json
{
    "body": "<a id='comment:10'></a>\nI guess enough of them work that we can use it, but it would be \"really nice\" (hint hint) if the people responsible for it would let us know why some stuff isn't working...",
    "created_at": "2014-11-18T02:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286484",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
I guess enough of them work that we can use it, but it would be "really nice" (hint hint) if the people responsible for it would let us know why some stuff isn't working...



---

archive/issue_comments_286485.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jhpalmieri](#comment%3A9):\n> The sources are present in `SAGE_ROOT/local/lib/python/site-libraries/ore_algebra`. Just running doctests on the files there doesn't work, though, I think because they're not part of the official Sage library. \n\n\nThanks for the clarification. I saw those files, but interpreted the instructions about [Doctesting](http://www.sagemath.org/doc/developer/doctesting.html) (paragraph \"but not\") as request to look exclusively into SAGE_ROOT/src/...",
    "created_at": "2014-11-18T05:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286485",
    "user": "https://github.com/zieglerk"
}
```

<a id='comment:11'></a>
Replying to [jhpalmieri](#comment%3A9):
> The sources are present in `SAGE_ROOT/local/lib/python/site-libraries/ore_algebra`. Just running doctests on the files there doesn't work, though, I think because they're not part of the official Sage library. 


Thanks for the clarification. I saw those files, but interpreted the instructions about [Doctesting](http://www.sagemath.org/doc/developer/doctesting.html) (paragraph "but not") as request to look exclusively into SAGE_ROOT/src/...



---

archive/issue_comments_286486.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [kcrisman](#comment%3A10):\n> I guess enough of them work that we can use it, but it would be \"really nice\" (hint hint) if the people responsible for it would let us know why some stuff isn't working...\n\n\nHi there! \n\nI have been using Sage 6.1.1 until a few weeks ago, and version 0.1 of the package works properly in this version, at least for me. For Sage 6.3, as far as I see the only necessary change was the new location of is_FiniteField. With this being fixed in version 0.2, I am not aware of other problems for 6.3. If you know of any, I'd be happy to hear about them so that I can fix them too. Naturally, without having access to 6.5.beta0, I can't easily see what causes the TypeError in the nullspace module. \n\nIn general, I must admit that the general workflow is not really clear to me. Is it explained somewhere what would be the right steps for me to take if I want to propagate updates I do to the ore_algebra package regularly to the version which is included in Sage? I also don't know what \"new-style\" packages are. \n\nThanks & Greetings,\nManuel",
    "created_at": "2014-11-18T09:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286486",
    "user": "https://github.com/mkauers"
}
```

<a id='comment:12'></a>
Replying to [kcrisman](#comment%3A10):
> I guess enough of them work that we can use it, but it would be "really nice" (hint hint) if the people responsible for it would let us know why some stuff isn't working...


Hi there! 

I have been using Sage 6.1.1 until a few weeks ago, and version 0.1 of the package works properly in this version, at least for me. For Sage 6.3, as far as I see the only necessary change was the new location of is_FiniteField. With this being fixed in version 0.2, I am not aware of other problems for 6.3. If you know of any, I'd be happy to hear about them so that I can fix them too. Naturally, without having access to 6.5.beta0, I can't easily see what causes the TypeError in the nullspace module. 

In general, I must admit that the general workflow is not really clear to me. Is it explained somewhere what would be the right steps for me to take if I want to propagate updates I do to the ore_algebra package regularly to the version which is included in Sage? I also don't know what "new-style" packages are. 

Thanks & Greetings,
Manuel



---

archive/issue_comments_286487.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi, Manuel!  I think that whether you (as upstream) want to continue providing 'old-style' spkgs or not, that is fine.  But reading [the relevant section in the developer guide](http://www.sagemath.org/doc/developer/index.html#packaging-third-party-code) hopefully should answer any questions you have about either type of spkg.  The short version is that when you have a new version, you can just open a ticket on Trac to update the version, and since it is an optional spkg all we would have to do is make sure it doesn't break.  Having a test suite we could run would help a lot with that - maybe it's already possible to do, and we just don't know how to run it properly?  But hopefully it can actually be relatively painless, especially since you are just providing pure Python, right, not something that depends on compilers?  Let us know if this answers any questions you have.",
    "created_at": "2014-11-18T13:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286487",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
Hi, Manuel!  I think that whether you (as upstream) want to continue providing 'old-style' spkgs or not, that is fine.  But reading [the relevant section in the developer guide](http://www.sagemath.org/doc/developer/index.html#packaging-third-party-code) hopefully should answer any questions you have about either type of spkg.  The short version is that when you have a new version, you can just open a ticket on Trac to update the version, and since it is an optional spkg all we would have to do is make sure it doesn't break.  Having a test suite we could run would help a lot with that - maybe it's already possible to do, and we just don't know how to run it properly?  But hopefully it can actually be relatively painless, especially since you are just providing pure Python, right, not something that depends on compilers?  Let us know if this answers any questions you have.



---

archive/issue_comments_286488.json:
```json
{
    "body": "<a id='comment:14'></a>\nFor what it's worth, I see the same error in Sage 6.1 and Sage 6.2, using version 0.1 of the spkg and the lines from [comment:4]:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.1, Release Date: 2014-01-30                         \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nsage: from ore_algebra.nullspace import *\nsage: my_solver = cra(kronecker(gauss()))\nsage: A = MatrixSpace(ZZ['x', 'y'], 4, 5).random_element()\nsage: V = my_solver(A)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-4-268cdfff10da> in <module>()\n----> 1 V = my_solver(A)\n\n/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in cra_solver(mat, degrees, infolevel)\n   1275     def cra_solver(mat, degrees=[], infolevel=0) :\n   1276         \"\"\"See docstring of cra() for further information.\"\"\"\n-> 1277         return _cra(subsolver, max_modulus, proof, ncpus, mat, degrees, infolevel)\n   1278     return cra_solver\n   1279 \n\n/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in _cra(subsolver, max_modulus, proof, ncpus, mat, degrees, infolevel)\n   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]\n   1342         else:\n-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]\n   1344 \n   1345         if len(degrees) != len(x):\n\n/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in <genexpr>((v,))\n   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]\n   1342         else:\n-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]\n   1344 \n   1345         if len(degrees) != len(x):\n\n/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in <genexpr>((e,))\n   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]\n   1342         else:\n-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]\n   1344 \n   1345         if len(degrees) != len(x):\n\n/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_element.pyc in degree(self, x)\n    502             return self.element().degree(None)\n    503         if not (isinstance(x, MPolynomial) and x.parent() is self.parent() and x.is_generator()):\n--> 504             raise TypeError, \"x must be one of the generators of the parent.\"\n    505         return self.element().degree(x.element())\n    506 \n\nTypeError: x must be one of the generators of the parent.\n```\nSo either I'm doing something wrong (in which case the example in `nullspace.py` is wrong, or at least unclear) or there is a bug.",
    "created_at": "2014-11-18T16:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286488",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>
For what it's worth, I see the same error in Sage 6.1 and Sage 6.2, using version 0.1 of the spkg and the lines from [comment:4]:

```
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 6.1, Release Date: 2014-01-30                         │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
sage: from ore_algebra.nullspace import *
sage: my_solver = cra(kronecker(gauss()))
sage: A = MatrixSpace(ZZ['x', 'y'], 4, 5).random_element()
sage: V = my_solver(A)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-4-268cdfff10da> in <module>()
----> 1 V = my_solver(A)

/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in cra_solver(mat, degrees, infolevel)
   1275     def cra_solver(mat, degrees=[], infolevel=0) :
   1276         """See docstring of cra() for further information."""
-> 1277         return _cra(subsolver, max_modulus, proof, ncpus, mat, degrees, infolevel)
   1278     return cra_solver
   1279 

/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in _cra(subsolver, max_modulus, proof, ncpus, mat, degrees, infolevel)
   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]
   1342         else:
-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]
   1344 
   1345         if len(degrees) != len(x):

/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in <genexpr>((v,))
   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]
   1342         else:
-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]
   1344 
   1345         if len(degrees) != len(x):

/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/ore_algebra/nullspace.py in <genexpr>((e,))
   1341             true_degrees = [max(max(e.degree() for e in v) for v in Vp)]
   1342         else:
-> 1343             true_degrees = [max(max(e.degree(x0) for e in v) for v in Vp) for x0 in x]
   1344 
   1345         if len(degrees) != len(x):

/Users/palmieri/Desktop/sage-6.1/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_element.pyc in degree(self, x)
    502             return self.element().degree(None)
    503         if not (isinstance(x, MPolynomial) and x.parent() is self.parent() and x.is_generator()):
--> 504             raise TypeError, "x must be one of the generators of the parent."
    505         return self.element().degree(x.element())
    506 

TypeError: x must be one of the generators of the parent.
```
So either I'm doing something wrong (in which case the example in `nullspace.py` is wrong, or at least unclear) or there is a bug.



---

archive/issue_comments_286489.json:
```json
{
    "body": "Changing reviewer from \"John Palmieri, Konstantin Ziegler\" to \"Karl-Dieter Crisman, John Palmieri, Konstantin Ziegler\"",
    "created_at": "2014-11-18T16:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286489",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "John Palmieri, Konstantin Ziegler" to "Karl-Dieter Crisman, John Palmieri, Konstantin Ziegler"



---

archive/issue_comments_286490.json:
```json
{
    "body": "<a id='comment:15'></a>\n> So either I'm doing something wrong (in which case the example in nullspace.py is wrong, or at least unclear) or there is a bug.\n\n\nAnd one that existed before, which would be a different ticket than this.  Good to go?",
    "created_at": "2014-11-18T16:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286490",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
> So either I'm doing something wrong (in which case the example in nullspace.py is wrong, or at least unclear) or there is a bug.


And one that existed before, which would be a different ticket than this.  Good to go?



---

archive/issue_comments_286491.json:
```json
{
    "body": "Changing author from \"Karl-Dieter Crisman\" to \"Manuel Kauers\"",
    "created_at": "2014-11-18T16:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286491",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "Karl-Dieter Crisman" to "Manuel Kauers"



---

archive/issue_comments_286492.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jhpalmieri](#comment%3A14):\n> For what it's worth, I see the same error in Sage 6.1 and Sage 6.2, using version 0.1 of the spkg and the lines from [comment:4]:\n> So either I'm doing something wrong (in which case the example in `nullspace.py` is wrong, or at least unclear) or there is a bug.\n\n\nThanks for insisting. Now I can reproduce it. When I tried it yesterday, something must have been different so that it went through without problem. The problem seems to be that the value of sage.ext.multi_modular.MAX_MODULUS has increased a few versions ago (perhaps between 5.9 and 6?), in combination with the following inconsistency:\n\n  sage: x, y = ZZ['x','y'].gens()\n  sage: GF(1091)['x','y'].random_element().degree(x) ### works\n  sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails\n\nPerhaps this should be fixed in the code of multivariate polynomial rings rather than by a workaround in nullspace.py?\n\n`@`kcrisman: thanks for the pointer to the documentation. I will include self-testing routines in future versions.",
    "created_at": "2014-11-18T17:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286492",
    "user": "https://github.com/mkauers"
}
```

<a id='comment:16'></a>
Replying to [jhpalmieri](#comment%3A14):
> For what it's worth, I see the same error in Sage 6.1 and Sage 6.2, using version 0.1 of the spkg and the lines from [comment:4]:
> So either I'm doing something wrong (in which case the example in `nullspace.py` is wrong, or at least unclear) or there is a bug.


Thanks for insisting. Now I can reproduce it. When I tried it yesterday, something must have been different so that it went through without problem. The problem seems to be that the value of sage.ext.multi_modular.MAX_MODULUS has increased a few versions ago (perhaps between 5.9 and 6?), in combination with the following inconsistency:

  sage: x, y = ZZ['x','y'].gens()
  sage: GF(1091)['x','y'].random_element().degree(x) ### works
  sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails

Perhaps this should be fixed in the code of multivariate polynomial rings rather than by a workaround in nullspace.py?

`@`kcrisman: thanks for the pointer to the documentation. I will include self-testing routines in future versions.



---

archive/issue_comments_286493.json:
```json
{
    "body": "<a id='comment:17'></a>\nOkay, I think we can merge this. A test suite of some sort should be possible, and I'm glad you're going to work on it for a future release.\n\n> the following inconsistency:\n\n{{{\n    sage: x, y = ZZ['x','y'].gens()\n    sage: GF(1091)['x','y'].random_element().degree(x) ### works\n    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails\n}}}\nThis is certainly inconsistent, but I'm not sure whether both should work or both should fail. Should x automatically be coerced to an element of the polynomial ring over GF(p)? I've posted a question on sage-devel, and eventually we should open a ticket about it.",
    "created_at": "2014-11-18T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286493",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>
Okay, I think we can merge this. A test suite of some sort should be possible, and I'm glad you're going to work on it for a future release.

> the following inconsistency:

{{{
    sage: x, y = ZZ['x','y'].gens()
    sage: GF(1091)['x','y'].random_element().degree(x) ### works
    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails
}}}
This is certainly inconsistent, but I'm not sure whether both should work or both should fail. Should x automatically be coerced to an element of the polynomial ring over GF(p)? I've posted a question on sage-devel, and eventually we should open a ticket about it.



---

archive/issue_comments_286494.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-18T20:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286494",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_286495.json:
```json
{
    "body": "<a id='comment:19'></a>\nSee #17366 for the multivariate polynomial ring issue.",
    "created_at": "2014-11-18T21:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286495",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>
See #17366 for the multivariate polynomial ring issue.



---

archive/issue_comments_286496.json:
```json
{
    "body": "<a id='comment:20'></a>\nHarald: I copied the spkg but I have no idea how to generate the txt metadata file, `mirror-index.py` doesn't do it.",
    "created_at": "2014-11-19T10:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286496",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
Harald: I copied the spkg but I have no idea how to generate the txt metadata file, `mirror-index.py` doesn't do it.



---

archive/issue_comments_286497.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'll take care of this, and this script has nothing to do with the packages.",
    "created_at": "2014-11-19T11:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286497",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:22'></a>
I'll take care of this, and this script has nothing to do with the packages.



---

archive/issue_events_064437.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-19T11:44:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17205#event-64437"
}
```



---

archive/issue_comments_286498.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-19T11:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17205#issuecomment-286498",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
