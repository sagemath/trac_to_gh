# Issue 17312: Rephrase the 'doctest flags' section of the developer's manual

archive/issues_017312.json:
```json
{
    "body": "CC:  @kcrisman @videlec tmonteil\n\nAs with previous patches, this branch is meant to make this section easier to read/browse through.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17549\n\n",
    "closed_at": "2015-01-02T15:46:00Z",
    "created_at": "2014-12-26T04:31:13Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Rephrase the 'doctest flags' section of the developer's manual",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17312",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @kcrisman @videlec tmonteil

As with previous patches, this branch is meant to make this section easier to read/browse through.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17549





---

archive/issue_comments_230266.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-26T04:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230266",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230267.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-26T04:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230268.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-26T04:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230269.json:
```json
{
    "body": "The tolerance checks do not \"work with complex numbers\". The example only works because a complex number is seen as `<real number><real number>*I`.",
    "created_at": "2014-12-26T09:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230269",
    "user": "https://github.com/jdemeyer"
}
```

The tolerance checks do not "work with complex numbers". The example only works because a complex number is seen as `<real number><real number>*I`.



---

archive/issue_comments_230270.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-26T09:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230270",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230271.json:
```json
{
    "body": "> The tolerance checks do not \"work with complex numbers\". The example only works because a complex number is seen as `<real number><real number>*I`.\n\n\nSo does it work with complex number in general, or not ? Could you tell me how you would like me to rephrase that ? Or could you add a commit ? I do not see exactly how I should say it.\n\nNathann",
    "created_at": "2014-12-26T09:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230271",
    "user": "https://github.com/nathanncohen"
}
```

> The tolerance checks do not "work with complex numbers". The example only works because a complex number is seen as `<real number><real number>*I`.


So does it work with complex number in general, or not ? Could you tell me how you would like me to rephrase that ? Or could you add a commit ? I do not see exactly how I should say it.

Nathann



---

archive/issue_comments_230272.json:
```json
{
    "body": "Perhaps add something along the lines of\n\n```\nIf a doctest with tolerance contains several numbers, each of them is checked individually::\n\n    sage: print \"The sum of 1 and 1 equals 5\"  # abs tol 1\n    The sum of 2 and 2 equals 4\n\nAs a consequence of this, tests involving complex numbers, matrices or polynomials usually work as expected::\n\n    sage: <complex number example here>\n    sage: M = Matrix(RR, 3, 3, [-13, 1, 1, -3, 0, -2, -4, -2, 0])\n    sage: M^-1 * M   # actual result\n    [     1.00000000000000  6.93889390390723e-18 -6.24500451351651e-17]\n    [ 4.44089209850063e-16      1.00000000000000  1.11022302462516e-16]\n    [-1.94289029309402e-16 -1.38777878078145e-17      1.00000000000000]\n    sage: M^-1 * M   # tol 2e-16\n    [ 1.00000000000000 0.000000000000000 0.000000000000000]\n    [0.000000000000000  1.00000000000000 0.000000000000000]\n    [0.000000000000000 0.000000000000000  1.00000000000000]\n\nNote that, in the last example, the zeros are checked with **absolute** tolerance, while the non-zero entries are checked with **relative** tolerance.\n```",
    "created_at": "2014-12-26T09:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230272",
    "user": "https://github.com/jdemeyer"
}
```

Perhaps add something along the lines of

```
If a doctest with tolerance contains several numbers, each of them is checked individually::

    sage: print "The sum of 1 and 1 equals 5"  # abs tol 1
    The sum of 2 and 2 equals 4

As a consequence of this, tests involving complex numbers, matrices or polynomials usually work as expected::

    sage: <complex number example here>
    sage: M = Matrix(RR, 3, 3, [-13, 1, 1, -3, 0, -2, -4, -2, 0])
    sage: M^-1 * M   # actual result
    [     1.00000000000000  6.93889390390723e-18 -6.24500451351651e-17]
    [ 4.44089209850063e-16      1.00000000000000  1.11022302462516e-16]
    [-1.94289029309402e-16 -1.38777878078145e-17      1.00000000000000]
    sage: M^-1 * M   # tol 2e-16
    [ 1.00000000000000 0.000000000000000 0.000000000000000]
    [0.000000000000000  1.00000000000000 0.000000000000000]
    [0.000000000000000 0.000000000000000  1.00000000000000]

Note that, in the last example, the zeros are checked with **absolute** tolerance, while the non-zero entries are checked with **relative** tolerance.
```



---

archive/issue_comments_230273.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-26T10:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230274.json:
```json
{
    "body": "What do you think of that ? I rather like the result, I find it clearer and more complete. I simplified your example a bit, if you do not mind.\n\nNathann",
    "created_at": "2014-12-26T10:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230274",
    "user": "https://github.com/nathanncohen"
}
```

What do you think of that ? I rather like the result, I find it clearer and more complete. I simplified your example a bit, if you do not mind.

Nathann



---

archive/issue_comments_230275.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-26T10:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230275",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230276.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-26T17:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230276",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230277.json:
```json
{
    "body": "This is wrong:\n\n```\n**Zero** values are always tested relative error.\n```",
    "created_at": "2014-12-26T17:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230277",
    "user": "https://github.com/jdemeyer"
}
```

This is wrong:

```
**Zero** values are always tested relative error.
```



---

archive/issue_comments_230278.json:
```json
{
    "body": "> This is wrong:\n> \n> ```\n> **Zero** values are always tested relative error.\n> ```\n\n\nWhy is it wrong ? I thought that it is what was written in the manual already.\n\nNathann",
    "created_at": "2014-12-26T17:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230278",
    "user": "https://github.com/nathanncohen"
}
```

> This is wrong:
> 
> ```
> **Zero** values are always tested relative error.
> ```


Why is it wrong ? I thought that it is what was written in the manual already.

Nathann



---

archive/issue_comments_230279.json:
```json
{
    "body": "Oh. Sorry. Absolute. And the sentence is not even correct. Will be fixed in a second.\n\nNathann",
    "created_at": "2014-12-26T17:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230279",
    "user": "https://github.com/nathanncohen"
}
```

Oh. Sorry. Absolute. And the sentence is not even correct. Will be fixed in a second.

Nathann



---

archive/issue_comments_230280.json:
```json
{
    "body": "What was written:\n\n```\nthis defaults to relative error except\nwhen the expected value is exactly zero::\n```",
    "created_at": "2014-12-26T17:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230280",
    "user": "https://github.com/jdemeyer"
}
```

What was written:

```
this defaults to relative error except
when the expected value is exactly zero::
```



---

archive/issue_comments_230281.json:
```json
{
    "body": "There is a difference between \"X is always true\" and \"X is the default\".",
    "created_at": "2014-12-26T17:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230281",
    "user": "https://github.com/jdemeyer"
}
```

There is a difference between "X is always true" and "X is the default".



---

archive/issue_comments_230282.json:
```json
{
    "body": "> There is a difference between \"X is always true\" and \"X is the default\".\n\n\nYes, but wasn't it written somewhere that when you had multiple output and one of them was a zero then the absolute was also used ?\n\nNathann",
    "created_at": "2014-12-26T17:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230282",
    "user": "https://github.com/nathanncohen"
}
```

> There is a difference between "X is always true" and "X is the default".


Yes, but wasn't it written somewhere that when you had multiple output and one of them was a zero then the absolute was also used ?

Nathann



---

archive/issue_comments_230283.json:
```json
{
    "body": "So is the rule like that ?\n\n- Single output: absolute is the default for 0 output\n\n- Multiple output: zeroes are always tested with absolute ?\n\nNathann",
    "created_at": "2014-12-26T17:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230283",
    "user": "https://github.com/nathanncohen"
}
```

So is the rule like that ?

- Single output: absolute is the default for 0 output

- Multiple output: zeroes are always tested with absolute ?

Nathann



---

archive/issue_comments_230284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-26T17:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230285.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-26T17:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230285",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230286.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-27T08:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230286",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230287.json:
```json
{
    "body": "Replying to [comment:15 ncohen]:\n> So is the rule like that ?\n> \n> - Single output: absolute is the default for 0 output\n> \n> - Multiple output: zeroes are always tested with absolute ?\n \nNo!\n\nThe rule is:\n\n- zero values: tested with absolute tolerance by default\n\n- non-zero values: tested with relative tolerance by default\n\nBut `abs` or `rel` can override the default for both cases.",
    "created_at": "2014-12-27T08:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230287",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 ncohen]:
> So is the rule like that ?
> 
> - Single output: absolute is the default for 0 output
> 
> - Multiple output: zeroes are always tested with absolute ?
 
No!

The rule is:

- zero values: tested with absolute tolerance by default

- non-zero values: tested with relative tolerance by default

But `abs` or `rel` can override the default for both cases.



---

archive/issue_comments_230288.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> Yes, but wasn't it written somewhere that when you had multiple output\n\nEvery value is tested independently, every value has its own default.",
    "created_at": "2014-12-27T08:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230288",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 ncohen]:
> Yes, but wasn't it written somewhere that when you had multiple output

Every value is tested independently, every value has its own default.



---

archive/issue_comments_230289.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-27T09:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_230290.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-27T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230290",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230291.json:
```json
{
    "body": "> Every value is tested independently, every value has its own default.\n\n\nWhat about this last (updated) commit ?\n\nNathann",
    "created_at": "2014-12-27T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230291",
    "user": "https://github.com/nathanncohen"
}
```

> Every value is tested independently, every value has its own default.


What about this last (updated) commit ?

Nathann



---

archive/issue_comments_230292.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-27T09:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_230293.json:
```json
{
    "body": "`sage -t --optional=internet` only runs the internet tests, and not any of the tests that are run by default. You almost always want `sage -t --optional=sage,internet`, and similar for other optional packages. IMHO this should be spelled out in more detail as it is a frequent cause for confusion.",
    "created_at": "2014-12-27T13:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230293",
    "user": "https://github.com/vbraun"
}
```

`sage -t --optional=internet` only runs the internet tests, and not any of the tests that are run by default. You almost always want `sage -t --optional=sage,internet`, and similar for other optional packages. IMHO this should be spelled out in more detail as it is a frequent cause for confusion.



---

archive/issue_comments_230294.json:
```json
{
    "body": "Yo !\n\n> `sage -t --optional=internet` only runs the internet tests, and not any of the tests that are run by default. You almost always want `sage -t --optional=sage,internet`, and similar for other optional packages.\n\n\nTrue. Actually, I never ran --optional without having 'sage' inside. Should we change that instead ? I can't think of any good reason for this kind of behaviour, as it does create confusion.\n\nNathann",
    "created_at": "2014-12-27T13:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230294",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> `sage -t --optional=internet` only runs the internet tests, and not any of the tests that are run by default. You almost always want `sage -t --optional=sage,internet`, and similar for other optional packages.


True. Actually, I never ran --optional without having 'sage' inside. Should we change that instead ? I can't think of any good reason for this kind of behaviour, as it does create confusion.

Nathann



---

archive/issue_comments_230295.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-28T20:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230295",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230296.json:
```json
{
    "body": "`The numerical values returned by the line is` -> last word should be `are`",
    "created_at": "2014-12-28T20:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230296",
    "user": "https://github.com/jdemeyer"
}
```

`The numerical values returned by the line is` -> last word should be `are`



---

archive/issue_comments_230297.json:
```json
{
    "body": "I think the remark `(rounding error/floating point arithmetic)` is important enough that it should be clarified and expanded further: what about `(due to system-dependent floating point arithmetic or math libraries or non-deterministic algorithms)`.",
    "created_at": "2014-12-28T20:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230297",
    "user": "https://github.com/jdemeyer"
}
```

I think the remark `(rounding error/floating point arithmetic)` is important enough that it should be clarified and expanded further: what about `(due to system-dependent floating point arithmetic or math libraries or non-deterministic algorithms)`.



---

archive/issue_comments_230298.json:
```json
{
    "body": "`the representation of complex numbers, matrices, or polynomials involve` -> change last word to `usually involves`",
    "created_at": "2014-12-28T20:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230298",
    "user": "https://github.com/jdemeyer"
}
```

`the representation of complex numbers, matrices, or polynomials involve` -> change last word to `usually involves`



---

archive/issue_comments_230299.json:
```json
{
    "body": "The sentence `Neither of this applies to files or directories which are explicitly given as command line arguments: those are always tested.` should be outside the list, since it refers both to files and directories. It should not be just in the \"directory\" item.",
    "created_at": "2014-12-28T20:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230299",
    "user": "https://github.com/jdemeyer"
}
```

The sentence `Neither of this applies to files or directories which are explicitly given as command line arguments: those are always tested.` should be outside the list, since it refers both to files and directories. It should not be just in the "directory" item.



---

archive/issue_comments_230300.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-29T03:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230301.json:
```json
{
    "body": "Yo !\n\nI implemented all changes that you asked. I only omitted \"math libraries\" from \n`(due to system-dependent floating point arithmetic or math libraries or non-deterministic algorithms)`\n\nBecause in my understanding, most of what Sage contains is a math library. Fortunately what causes problems in the third-party math librarires that we use is precisely floating-point airethmetic or non-deterministic algorithms, so that's fine.\n\nNathann",
    "created_at": "2014-12-29T03:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230301",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

I implemented all changes that you asked. I only omitted "math libraries" from 
`(due to system-dependent floating point arithmetic or math libraries or non-deterministic algorithms)`

Because in my understanding, most of what Sage contains is a math library. Fortunately what causes problems in the third-party math librarires that we use is precisely floating-point airethmetic or non-deterministic algorithms, so that's fine.

Nathann



---

archive/issue_comments_230302.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-29T03:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230302",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230303.json:
```json
{
    "body": "I actually meant\n\n```\nsystem-dependent (floating point arithmetic or math libraries) or non-deterministic algorithms\n```\ni.e. system-dependent math libraries, not Sage math libraries.\n\n> Fortunately what causes problems in the third-party math librarires that we use is precisely floating-point airethmetic or non-deterministic algorithms, so that's fine.\n\nThat's not actually true. You could have exactly the same hardware with different deterministic results for `log()` because the system uses a different library to compute `log()`. That's what I meant.",
    "created_at": "2014-12-29T10:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230303",
    "user": "https://github.com/jdemeyer"
}
```

I actually meant

```
system-dependent (floating point arithmetic or math libraries) or non-deterministic algorithms
```
i.e. system-dependent math libraries, not Sage math libraries.

> Fortunately what causes problems in the third-party math librarires that we use is precisely floating-point airethmetic or non-deterministic algorithms, so that's fine.

That's not actually true. You could have exactly the same hardware with different deterministic results for `log()` because the system uses a different library to compute `log()`. That's what I meant.



---

archive/issue_comments_230304.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-29T10:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230305.json:
```json
{
    "body": "> That's what I meant.\n\n\nDone.\n\nNathann",
    "created_at": "2014-12-29T10:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230305",
    "user": "https://github.com/nathanncohen"
}
```

> That's what I meant.


Done.

Nathann



---

archive/issue_comments_230306.json:
```json
{
    "body": "Is there anything else Jeroen ?",
    "created_at": "2014-12-30T13:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230306",
    "user": "https://github.com/nathanncohen"
}
```

Is there anything else Jeroen ?



---

archive/issue_comments_230307.json:
```json
{
    "body": "What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.\n\nMaybe Karl-Dieter wants to give it a read since he's the only native English speaker...",
    "created_at": "2014-12-30T17:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230307",
    "user": "https://github.com/vbraun"
}
```

What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.

Maybe Karl-Dieter wants to give it a read since he's the only native English speaker...



---

archive/issue_comments_230308.json:
```json
{
    "body": "`A line flagged with ``optional - keyword``, it is not tested`: remove \"`, it`\"",
    "created_at": "2014-12-30T20:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230308",
    "user": "https://github.com/jdemeyer"
}
```

`A line flagged with ``optional - keyword``, it is not tested`: remove "`, it`"



---

archive/issue_comments_230309.json:
```json
{
    "body": "In the sentence `the representation of complex numbers, matrices, or polynomials usually involve ...`, I really think that it should be `involves` since \"representation\" is singular.",
    "created_at": "2014-12-30T20:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230309",
    "user": "https://github.com/jdemeyer"
}
```

In the sentence `the representation of complex numbers, matrices, or polynomials usually involve ...`, I really think that it should be `involves` since "representation" is singular.



---

archive/issue_comments_230310.json:
```json
{
    "body": "Replying to [comment:37 vbraun]:\n> What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.\n\nI wouldn't change the behavior now, but I agree that it should be documented.",
    "created_at": "2014-12-30T20:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230310",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:37 vbraun]:
> What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.

I wouldn't change the behavior now, but I agree that it should be documented.



---

archive/issue_comments_230311.json:
```json
{
    "body": "Replying to [comment:37 vbraun]:\n> What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.\n\n\nI agree that this should be documented.\n\n> Maybe Karl-Dieter wants to give it a read since he's the only native English speaker...\n\n\nThe English looks okay to me.\n\nTwo more suggestions: we should define relative and absolute tolerance, or at least give a link to a definition. Also, maybe we should emphasize that the \"32-bit\" and \"64-bit\" flags go on the **output** lines, not the input lines the way the other flags do. (Either before or after the example: \"`Note that unlike the other flags, these keywords go on the *output* lines, not the input lines.`)",
    "created_at": "2014-12-30T21:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230311",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:37 vbraun]:
> What about the `--optional=sage,keyword`? The rationale was that you might be able to speed up testing by only running the optional tests, but in practice that pretty much never works (since some intermediate steps tend to not have the `#optional` tag) and I've never used it. IMHO: Either document it clearly or change the behavior.


I agree that this should be documented.

> Maybe Karl-Dieter wants to give it a read since he's the only native English speaker...


The English looks okay to me.

Two more suggestions: we should define relative and absolute tolerance, or at least give a link to a definition. Also, maybe we should emphasize that the "32-bit" and "64-bit" flags go on the **output** lines, not the input lines the way the other flags do. (Either before or after the example: "`Note that unlike the other flags, these keywords go on the *output* lines, not the input lines.`)



---

archive/issue_comments_230312.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-31T03:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230313.json:
```json
{
    "body": "Hello guys !\n\n> What about the --optional=sage,keyword?\n\n\nIt is already documented in the chapter (that this patch renames to) \"Running the doctests\". The section about the 'optional' flag begins with a link toward that page\n\nhttp://www.sagemath.org/doc/developer/doctesting.html#run-optional-tests\n\nI think that it is sufficient for the moment, especially since we all seem to agree that this behaviour should be changed so that 'sage' is always included in `--optional=<a list>`.\n\n> `A line flagged with ``optional - keyword```, it is not tested: remove `\", it\"`\n\nDone.\n\n> I really think that it should be involves since \"representation\" is singular.\n\nDone.\n\n> Also, maybe we should emphasize that the \"32-bit\" and \"64-bit\" flags go on the output lines.\n\nDone\n\nFrom the look of your comments I have no idea if you consider that this ticket can be switched to `positive_review` yet, but I would really appreciate it if you could make all your comments at once, next time. I have already pushed 6 different review commits here, and that is much more work than implementing at once all of the reviewer's comments.\n\nThanks,\n\nNathann",
    "created_at": "2014-12-31T03:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230313",
    "user": "https://github.com/nathanncohen"
}
```

Hello guys !

> What about the --optional=sage,keyword?


It is already documented in the chapter (that this patch renames to) "Running the doctests". The section about the 'optional' flag begins with a link toward that page

http://www.sagemath.org/doc/developer/doctesting.html#run-optional-tests

I think that it is sufficient for the moment, especially since we all seem to agree that this behaviour should be changed so that 'sage' is always included in `--optional=<a list>`.

> `A line flagged with ``optional - keyword```, it is not tested: remove `", it"`

Done.

> I really think that it should be involves since "representation" is singular.

Done.

> Also, maybe we should emphasize that the "32-bit" and "64-bit" flags go on the output lines.

Done

From the look of your comments I have no idea if you consider that this ticket can be switched to `positive_review` yet, but I would really appreciate it if you could make all your comments at once, next time. I have already pushed 6 different review commits here, and that is much more work than implementing at once all of the reviewer's comments.

Thanks,

Nathann



---

archive/issue_comments_230314.json:
```json
{
    "body": "Replying to [comment:43 ncohen]:\n> I would really appreciate it if you could make all your comments at once, next time. I have already pushed 6 different review commits here, and that is much more work than implementing at once all of the reviewer's comments.\n\n\nDon't forget that there was a lot of confusion about the tolerance stuff... I think that's mainly what caused the many commits. Also, it's not also always to give all reviewer comments at once: when there are major mistakes, I find it harder to concentrate on spelling errors. Also, sometimes I have comments about the review commits...\n\nI was also busy doing other things these days, so I didn't have the time to make those review commits myself like I would usually do.",
    "created_at": "2014-12-31T09:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230314",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:43 ncohen]:
> I would really appreciate it if you could make all your comments at once, next time. I have already pushed 6 different review commits here, and that is much more work than implementing at once all of the reviewer's comments.


Don't forget that there was a lot of confusion about the tolerance stuff... I think that's mainly what caused the many commits. Also, it's not also always to give all reviewer comments at once: when there are major mistakes, I find it harder to concentrate on spelling errors. Also, sometimes I have comments about the review commits...

I was also busy doing other things these days, so I didn't have the time to make those review commits myself like I would usually do.



---

archive/issue_comments_230315.json:
```json
{
    "body": "> Don't forget that there was a lot of confusion about the tolerance stuff...\n\n\nYeah that's true.\n\nWell. Hopefully it is all good now `:-P`\n\nNathann",
    "created_at": "2014-12-31T09:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230315",
    "user": "https://github.com/nathanncohen"
}
```

> Don't forget that there was a lot of confusion about the tolerance stuff...


Yeah that's true.

Well. Hopefully it is all good now `:-P`

Nathann



---

archive/issue_comments_230316.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-31T09:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230316",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_230317.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-31T09:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230317",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230318.json:
```json
{
    "body": "I fixed one more typo which was not your fault :-)",
    "created_at": "2014-12-31T09:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230318",
    "user": "https://github.com/jdemeyer"
}
```

I fixed one more typo which was not your fault :-)



---

archive/issue_comments_230319.json:
```json
{
    "body": "> I fixed one more typo which was not your fault :-)\n\n\nOh, right.... `O_o`\n\nThanks for the review !\n\nNathann",
    "created_at": "2014-12-31T09:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230319",
    "user": "https://github.com/nathanncohen"
}
```

> I fixed one more typo which was not your fault :-)


Oh, right.... `O_o`

Thanks for the review !

Nathann



---

archive/issue_comments_230320.json:
```json
{
    "body": "I won't object to the positive review, but I still think that we should explain what relative vs. absolute tolerance is.",
    "created_at": "2014-12-31T15:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230320",
    "user": "https://github.com/jhpalmieri"
}
```

I won't object to the positive review, but I still think that we should explain what relative vs. absolute tolerance is.



---

archive/issue_comments_230321.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-01-01T05:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230321",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_230322.json:
```json
{
    "body": "> I won't object to the positive review, but I still think that we should explain what relative vs. absolute tolerance is. \n\n\nCan you review this new commit ?\n\nNathann\n\n---\nNew commits:",
    "created_at": "2015-01-01T05:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230322",
    "user": "https://github.com/nathanncohen"
}
```

> I won't object to the positive review, but I still think that we should explain what relative vs. absolute tolerance is. 


Can you review this new commit ?

Nathann

---
New commits:



---

archive/issue_comments_230323.json:
```json
{
    "body": "Great, thanks!",
    "created_at": "2015-01-01T15:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230323",
    "user": "https://github.com/jhpalmieri"
}
```

Great, thanks!



---

archive/issue_comments_230324.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-01T15:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230324",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_050400.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:46:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17312#event-50400"
}
```



---

archive/issue_comments_230325.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-02T15:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17312#issuecomment-230325",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
