# Issue 17400: simplify_full returns odd result from symbolic series input

archive/issues_017163.json:
```json
{
    "body": "`SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in all `simplify*` functions.\n\n```\nsage: x=var('x')\nsage: s=(1/(1-x)).series(x,6)\nsage: s.coeffs()\n[[x^5 + x^4 + x^3 + x^2 + x + Order(x^6) + 1, 0]]\nsage: s.simplify_full().coeffs()\n[[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]\n```\nSee also the related #17399.\n\nOriginally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/\n\nAlso, `series` should simplify its terms on a per-term basis:\n\n```\nsage: var('x,y')\n(x, y)\nsage: ex=1/(1-x*y-x^2)\nsage: ex.series(x,5)\n1 + (y)*x + (y^2 + 1)*x^2 + ((y^2 + 1)*y + y)*x^3 + (((y^2 + 1)*y + y)*y + y^2 + 1)*x^4 + Order(x^5)\n```\nCompare with e.g. Pari:\n\n```\n? 1/(1-x*y-x^2) + O(x^5)\n%1 = 1 + y*x + (y^2 + 1)*x^2 + (y^3 + 2*y)*x^3 + (y^4 + 3*y^2 + 1)*x^4 + O(x^5)\n```\nBoth issues can be fixed by writing series simplification methods.\n\n**Branch:** [u/rws/17400-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400-1)\n\n**Commit:** [22c947a8ee6d435db6d103246e88674d50e12286](https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286)\n\n**Author:** Ralf Stephan\n\n**Status:** needs_work\n\n**Dependencies:** #17399, #17659\n\nIssue created by migration from https://trac.sagemath.org/ticket/17400\n\n",
    "created_at": "2014-11-26T10:08:06Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "simplify_full returns odd result from symbolic series input",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17400",
    "user": "https://github.com/rwst"
}
```
`SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in all `simplify*` functions.

```
sage: x=var('x')
sage: s=(1/(1-x)).series(x,6)
sage: s.coeffs()
[[x^5 + x^4 + x^3 + x^2 + x + Order(x^6) + 1, 0]]
sage: s.simplify_full().coeffs()
[[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]
```
See also the related #17399.

Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/

Also, `series` should simplify its terms on a per-term basis:

```
sage: var('x,y')
(x, y)
sage: ex=1/(1-x*y-x^2)
sage: ex.series(x,5)
1 + (y)*x + (y^2 + 1)*x^2 + ((y^2 + 1)*y + y)*x^3 + (((y^2 + 1)*y + y)*y + y^2 + 1)*x^4 + Order(x^5)
```
Compare with e.g. Pari:

```
? 1/(1-x*y-x^2) + O(x^5)
%1 = 1 + y*x + (y^2 + 1)*x^2 + (y^3 + 2*y)*x^3 + (y^4 + 3*y^2 + 1)*x^4 + O(x^5)
```
Both issues can be fixed by writing series simplification methods.

**Branch:** [u/rws/17400-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400-1)

**Commit:** [22c947a8ee6d435db6d103246e88674d50e12286](https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286)

**Author:** Ralf Stephan

**Status:** needs_work

**Dependencies:** #17399, #17659

Issue created by migration from https://trac.sagemath.org/ticket/17400





---

archive/issue_comments_283441.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,3 +8,5 @@\n [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]\n ```\n See also the related #17399.\n+\n+Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/\n``````\n",
    "created_at": "2014-11-26T10:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283441",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,3 +8,5 @@
 [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]
 ```
 See also the related #17399.
+
+Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/
``````




---

archive/issue_comments_283442.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,6 +7,6 @@\n sage: s.simplify_full().coeffs()\n [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]\n ```\n-See also the related #17399.\n+See also the related #13655 and #17399.\n \n Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/\n``````\n",
    "created_at": "2014-11-29T14:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283442",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,6 +7,6 @@
 sage: s.simplify_full().coeffs()
 [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]
 ```
-See also the related #17399.
+See also the related #13655 and #17399.
 
 Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/
``````




---

archive/issue_comments_283443.json:
```json
{
    "body": "<a id='comment:3'></a>\nProbably with symbolic series, only coefficients should be simplified in the `simplify*` functions.",
    "created_at": "2014-12-04T14:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283443",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Probably with symbolic series, only coefficients should be simplified in the `simplify*` functions.



---

archive/issue_comments_283444.json:
```json
{
    "body": "<a id='comment:4'></a>\nThere are no power series objects in Maxima, just conversion to infinite sums, i.e. formal power series:\n\n```\nsage: maxima.powerseries(x^2+1/(1-x),x,0)\n'sum(_SAGE_VAR_x^i2,i2,0,inf)+_SAGE_VAR_x^2\nsage: maxima.powerseries(x^2+1/(1-x),x,0).sage()\nx^2 + sum(x^i3, i3, 0, +Infinity)\n```\nThe Taylor series objects have an order parameter on creation, but this does not get output or translated to Sage:\n\n```\nsage: maxima.taylor(1+x+x^2+x^3,x,0,3)\n1+_SAGE_VAR_x+_SAGE_VAR_x^2+_SAGE_VAR_x^3\nsage: maxima.taylor(1+x+x^2+x^3,x,0,3).sage()\nx^3 + x^2 + x + 1\n```\nso there is no way around it that `SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in or called from all `simplify*` functions.",
    "created_at": "2015-01-13T16:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283444",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
There are no power series objects in Maxima, just conversion to infinite sums, i.e. formal power series:

```
sage: maxima.powerseries(x^2+1/(1-x),x,0)
'sum(_SAGE_VAR_x^i2,i2,0,inf)+_SAGE_VAR_x^2
sage: maxima.powerseries(x^2+1/(1-x),x,0).sage()
x^2 + sum(x^i3, i3, 0, +Infinity)
```
The Taylor series objects have an order parameter on creation, but this does not get output or translated to Sage:

```
sage: maxima.taylor(1+x+x^2+x^3,x,0,3)
1+_SAGE_VAR_x+_SAGE_VAR_x^2+_SAGE_VAR_x^3
sage: maxima.taylor(1+x+x^2+x^3,x,0,3).sage()
x^3 + x^2 + x + 1
```
so there is no way around it that `SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in or called from all `simplify*` functions.



---

archive/issue_comments_283445.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n+`SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in all `simplify*` functions.\n \n ```\n sage: x=var('x')\n@@ -7,6 +8,6 @@\n sage: s.simplify_full().coeffs()\n [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]\n ```\n-See also the related #13655 and #17399.\n+See also the related #17399.\n \n Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/\n``````\n",
    "created_at": "2015-01-13T16:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283445",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
+`SR`.series will lose the order term when passed to Maxima. Thus only the coefficients may be simplified, and this must be done in all `simplify*` functions.
 
 ```
 sage: x=var('x')
@@ -7,6 +8,6 @@
 sage: s.simplify_full().coeffs()
 [[Order(x^6) + 1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5]]
 ```
-See also the related #13655 and #17399.
+See also the related #17399.
 
 Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/
``````




---

archive/issue_comments_283446.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe following functions call Maxima, have a meaning /wrt series, and therefore need to be modified:\n`simplify`, `simplify_trig`, `simplify_rectform`, `simplify_rational`, `simplify_log`, `expand_log`, `expand_trig`.",
    "created_at": "2015-01-13T17:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283446",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
The following functions call Maxima, have a meaning /wrt series, and therefore need to be modified:
`simplify`, `simplify_trig`, `simplify_rectform`, `simplify_rational`, `simplify_log`, `expand_log`, `expand_trig`.



---

archive/issue_comments_283447.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,3 +11,20 @@\n See also the related #17399.\n \n Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/\n+\n+Also, `series` should simplify its terms on a per-term basis:\n+\n+```\n+sage: var('x,y')\n+(x, y)\n+sage: ex=1/(1-x*y-x^2)\n+sage: ex.series(x,5)\n+1 + (y)*x + (y^2 + 1)*x^2 + ((y^2 + 1)*y + y)*x^3 + (((y^2 + 1)*y + y)*y + y^2 + 1)*x^4 + Order(x^5)\n+```\n+Compare with e.g. Pari:\n+\n+```\n+? 1/(1-x*y-x^2) + O(x^5)\n+%1 = 1 + y*x + (y^2 + 1)*x^2 + (y^3 + 2*y)*x^3 + (y^4 + 3*y^2 + 1)*x^4 + O(x^5)\n+```\n+Both issues can be fixed by writing series simplification methods.\n``````\n",
    "created_at": "2015-01-22T15:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283447",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,3 +11,20 @@
 See also the related #17399.
 
 Originally found in http://ask.sagemath.org/question/24968/coefficients-in-polynomial-ring-over-symbolic-ring/
+
+Also, `series` should simplify its terms on a per-term basis:
+
+```
+sage: var('x,y')
+(x, y)
+sage: ex=1/(1-x*y-x^2)
+sage: ex.series(x,5)
+1 + (y)*x + (y^2 + 1)*x^2 + ((y^2 + 1)*y + y)*x^3 + (((y^2 + 1)*y + y)*y + y^2 + 1)*x^4 + Order(x^5)
+```
+Compare with e.g. Pari:
+
+```
+? 1/(1-x*y-x^2) + O(x^5)
+%1 = 1 + y*x + (y^2 + 1)*x^2 + (y^3 + 2*y)*x^3 + (y^4 + 3*y^2 + 1)*x^4 + O(x^5)
+```
+Both issues can be fixed by writing series simplification methods.
``````




---

archive/issue_comments_283448.json:
```json
{
    "body": "**Branch:** [u/rws/simplify_full_returns_odd_result_from_symbolic_series_input](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/simplify_full_returns_odd_result_from_symbolic_series_input)",
    "created_at": "2015-01-23T17:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283448",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/simplify_full_returns_odd_result_from_symbolic_series_input](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/simplify_full_returns_odd_result_from_symbolic_series_input)



---

archive/issue_comments_283449.json:
```json
{
    "body": "<a id='comment:8'></a>\nProof of concept.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251\">a4d2084</a></td><td><code>17659: make symbolic series subclass of Expression</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a\">ed003f0</a></td><td><code>16203: make imports more specific to prevent import loops</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32ae67c2fe24800943b883fe7f591bea784e5789\">32ae67c</a></td><td><code>17399: do not let maxima handle ex.series coefficients</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99820cfcc289efa8fd54468b296051c9cc13891a\">99820cf</a></td><td><code>17399: roll back previous commit to allow merge of 17428</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/168b6598ec99369bfecb2069e40b6c7d9e8afc8c\">168b659</a></td><td><code>Merge branch 'u/rws/coefficients_of_symbolic_expressions_revamp' of trac.sagemath.org:sage into t/17399/fix_coefficients_for_symbolic_series</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cd5286d987cf944621fb7666f1756b7785bcd0b\">6cd5286</a></td><td><code>17399: handle series in ex.coefficients()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b9914f8b6cd4cb0f885f0550bfd375d80495a71\">0b9914f</a></td><td><code>17399: remove whitespace changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e749114709d57860e86aca950f1a446b1a305a3\">2e74911</a></td><td><code>Merge commit '0b9914f8b6cd4cb0f885f0550bfd375d80495a71' of trac.sagemath.org:sage into t/17400/simplify_full_returns_odd_result_from_symbolic_series_input</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b\">2660235</a></td><td><code>17400: implement series.simplify_full()</code></td></tr></table>\n",
    "created_at": "2015-01-23T17:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283449",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>
Proof of concept.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251">a4d2084</a></td><td><code>17659: make symbolic series subclass of Expression</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a">ed003f0</a></td><td><code>16203: make imports more specific to prevent import loops</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32ae67c2fe24800943b883fe7f591bea784e5789">32ae67c</a></td><td><code>17399: do not let maxima handle ex.series coefficients</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99820cfcc289efa8fd54468b296051c9cc13891a">99820cf</a></td><td><code>17399: roll back previous commit to allow merge of 17428</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/168b6598ec99369bfecb2069e40b6c7d9e8afc8c">168b659</a></td><td><code>Merge branch 'u/rws/coefficients_of_symbolic_expressions_revamp' of trac.sagemath.org:sage into t/17399/fix_coefficients_for_symbolic_series</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cd5286d987cf944621fb7666f1756b7785bcd0b">6cd5286</a></td><td><code>17399: handle series in ex.coefficients()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b9914f8b6cd4cb0f885f0550bfd375d80495a71">0b9914f</a></td><td><code>17399: remove whitespace changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e749114709d57860e86aca950f1a446b1a305a3">2e74911</a></td><td><code>Merge commit '0b9914f8b6cd4cb0f885f0550bfd375d80495a71' of trac.sagemath.org:sage into t/17400/simplify_full_returns_odd_result_from_symbolic_series_input</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b">2660235</a></td><td><code>17400: implement series.simplify_full()</code></td></tr></table>




---

archive/issue_comments_283450.json:
```json
{
    "body": "**Dependencies:** #17399, #17659",
    "created_at": "2015-01-23T17:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283450",
    "user": "https://github.com/rwst"
}
```

**Dependencies:** #17399, #17659



---

archive/issue_comments_283451.json:
```json
{
    "body": "**Commit:** [266023507133808606f076ff2f51aa7add64ed0b](https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b)",
    "created_at": "2015-01-23T17:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283451",
    "user": "https://github.com/rwst"
}
```

**Commit:** [266023507133808606f076ff2f51aa7add64ed0b](https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b)



---

archive/issue_comments_283452.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/simplify_full_returns_odd_result_from_symbolic_series_input](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/simplify_full_returns_odd_result_from_symbolic_series_input)\" to \"[public/17400](https://github.com/sagemath/sagetrac-mirror/tree/public/17400)\".",
    "created_at": "2015-01-25T15:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283452",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/simplify_full_returns_odd_result_from_symbolic_series_input](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/simplify_full_returns_odd_result_from_symbolic_series_input)" to "[public/17400](https://github.com/sagemath/sagetrac-mirror/tree/public/17400)".



---

archive/issue_comments_283453.json:
```json
{
    "body": "**Changing commit** from \"[266023507133808606f076ff2f51aa7add64ed0b](https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b)\" to \"[26435537dc959224ea2fb700f216f4090af70ac1](https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1)\".",
    "created_at": "2015-01-25T15:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283453",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[266023507133808606f076ff2f51aa7add64ed0b](https://github.com/sagemath/sagetrac-mirror/commit/266023507133808606f076ff2f51aa7add64ed0b)" to "[26435537dc959224ea2fb700f216f4090af70ac1](https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1)".



---

archive/issue_comments_283454.json:
```json
{
    "body": "<a id='comment:10'></a>\nSquashed it all into one commit.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1\">2643553</a></td><td><code>17400: merge 17659, add simplify/expand methods for SymbolicSeries</code></td></tr></table>\n",
    "created_at": "2015-01-25T15:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283454",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>
Squashed it all into one commit.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1">2643553</a></td><td><code>17400: merge 17659, add simplify/expand methods for SymbolicSeries</code></td></tr></table>




---

archive/issue_comments_283455.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2015-01-25T15:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283455",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_283456.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-01-25T15:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283456",
    "user": "https://github.com/rwst"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_283457.json:
```json
{
    "body": "**Changing branch** from \"[public/17400](https://github.com/sagemath/sagetrac-mirror/tree/public/17400)\" to \"[u/rws/17400](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400)\".",
    "created_at": "2015-03-05T14:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283457",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[public/17400](https://github.com/sagemath/sagetrac-mirror/tree/public/17400)" to "[u/rws/17400](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400)".



---

archive/issue_comments_283458.json:
```json
{
    "body": "<a id='comment:12'></a>\nSquashed it all into one commit.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361\">73cd5bf</a></td><td><code>17400: symbolic series simplification methods</code></td></tr></table>\n",
    "created_at": "2015-03-05T14:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283458",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>
Squashed it all into one commit.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361">73cd5bf</a></td><td><code>17400: symbolic series simplification methods</code></td></tr></table>




---

archive/issue_events_056584.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T14:24:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56584"
}
```



---

archive/issue_comments_283459.json:
```json
{
    "body": "**Changing commit** from \"[26435537dc959224ea2fb700f216f4090af70ac1](https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1)\" to \"[73cd5bf461c4f301239a39489889ff28f17df361](https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361)\".",
    "created_at": "2015-03-05T14:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283459",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[26435537dc959224ea2fb700f216f4090af70ac1](https://github.com/sagemath/sagetrac-mirror/commit/26435537dc959224ea2fb700f216f4090af70ac1)" to "[73cd5bf461c4f301239a39489889ff28f17df361](https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361)".



---

archive/issue_comments_283460.json:
```json
{
    "body": "<a id='comment:13'></a>\nPending because #17659 is pending.",
    "created_at": "2015-04-20T15:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283460",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>
Pending because #17659 is pending.



---

archive/issue_events_056585.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:50:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56585"
}
```



---

archive/issue_events_056586.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:50:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56586"
}
```



---

archive/issue_comments_283461.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/17400](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400)\" to \"[u/rws/17400-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400-1)\".",
    "created_at": "2016-02-05T07:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283461",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/17400](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400)" to "[u/rws/17400-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17400-1)".



---

archive/issue_comments_283462.json:
```json
{
    "body": "**Changing commit** from \"[73cd5bf461c4f301239a39489889ff28f17df361](https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361)\" to \"[611f93b9a10863247293ae330c8f9432fb6a22b0](https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0)\".",
    "created_at": "2016-02-23T22:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283462",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[73cd5bf461c4f301239a39489889ff28f17df361](https://github.com/sagemath/sagetrac-mirror/commit/73cd5bf461c4f301239a39489889ff28f17df361)" to "[611f93b9a10863247293ae330c8f9432fb6a22b0](https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0)".



---

archive/issue_comments_283463.json:
```json
{
    "body": "<a id='comment:15'></a>\nStill pending?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0\">611f93b</a></td><td><code>Merge branch 'u/rws/17400' of trac.sagemath.org:sage into tmp05</code></td></tr></table>\n",
    "created_at": "2016-02-23T22:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283463",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
Still pending?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0">611f93b</a></td><td><code>Merge branch 'u/rws/17400' of trac.sagemath.org:sage into tmp05</code></td></tr></table>




---

archive/issue_comments_283464.json:
```json
{
    "body": "<a id='comment:16'></a>\nNo, you're right. Maybe there are conflicts with #17402.",
    "created_at": "2016-02-24T06:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283464",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>
No, you're right. Maybe there are conflicts with #17402.



---

archive/issue_events_056587.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-02-24T06:17:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56587"
}
```



---

archive/issue_events_056588.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-02-24T06:17:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56588"
}
```



---

archive/issue_comments_283465.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-03-05T22:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283465",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_283466.json:
```json
{
    "body": "<a id='comment:17'></a>\nMerge conflict, possibly with #20088",
    "created_at": "2016-03-05T22:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283466",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Merge conflict, possibly with #20088



---

archive/issue_comments_283467.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [rws](#comment%3A4):\n> There are no power series objects in Maxima,\n> [...]\n> The Taylor series objects have an order parameter on creation, but this does not get output or translated to Sage\n\nSo there *are* power series-type object in maxima. We could just access those then and use them to translate back-and-forth. It's a bit of a question how much functionality maxima has for it and whether maxima itself works with them faithfully.\n\nThe internal representation seems to be a bit complicated:\n\n```\nsage: P=maxima_calculus.taylor(exp(x),x,0,5)\nsage: P\n1+_SAGE_VAR_x+_SAGE_VAR_x^2/2+_SAGE_VAR_x^3/6+_SAGE_VAR_x^4/24+_SAGE_VAR_x^5/120\nsage: P.ecl()\n<ECL: ((MRAT SIMP (((MEXPT SIMP) $%E |$_SAGE_VAR_x|) |$_SAGE_VAR_x|)\n  (#:|%e^_SAGE_VAR_x2396| #:|_SAGE_VAR_x2397|)\n  ((|$_SAGE_VAR_x| ((5 . 1)) 0 NIL #:|_SAGE_VAR_x2397| . 2)) TRUNC)\n PS (#:|_SAGE_VAR_x2397| . 2) ((5 . 1)) ((0 . 1) 1 . 1) ((1 . 1) 1 . 1)\n ((2 . 1) 1 . 2) ((3 . 1) 1 . 6) ((4 . 1) 1 . 24) ((5 . 1) 1 . 120))>\n```\nbut fundamentally everything is there to create/peel apart these objects.\n\n(note that it would be a bit harder to work with these objects via the expect-interface to maxima)\n\nA basic explanation of the MRAT format is here: [http://def.fe.up.pt/pipermail/maxima-discuss/2005/010416.html](http://def.fe.up.pt/pipermail/maxima-discuss/2005/010416.html)\n\n**EDIT:** never mind, this isn't suitable for power series. This whole \"TRUNC\" property is very fickle (and it doesn't carry proper order information). It disappears with very trivial arithmetic already.",
    "created_at": "2016-03-06T05:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283467",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:18'></a>
Replying to [rws](#comment%3A4):
> There are no power series objects in Maxima,
> [...]
> The Taylor series objects have an order parameter on creation, but this does not get output or translated to Sage

So there *are* power series-type object in maxima. We could just access those then and use them to translate back-and-forth. It's a bit of a question how much functionality maxima has for it and whether maxima itself works with them faithfully.

The internal representation seems to be a bit complicated:

```
sage: P=maxima_calculus.taylor(exp(x),x,0,5)
sage: P
1+_SAGE_VAR_x+_SAGE_VAR_x^2/2+_SAGE_VAR_x^3/6+_SAGE_VAR_x^4/24+_SAGE_VAR_x^5/120
sage: P.ecl()
<ECL: ((MRAT SIMP (((MEXPT SIMP) $%E |$_SAGE_VAR_x|) |$_SAGE_VAR_x|)
  (#:|%e^_SAGE_VAR_x2396| #:|_SAGE_VAR_x2397|)
  ((|$_SAGE_VAR_x| ((5 . 1)) 0 NIL #:|_SAGE_VAR_x2397| . 2)) TRUNC)
 PS (#:|_SAGE_VAR_x2397| . 2) ((5 . 1)) ((0 . 1) 1 . 1) ((1 . 1) 1 . 1)
 ((2 . 1) 1 . 2) ((3 . 1) 1 . 6) ((4 . 1) 1 . 24) ((5 . 1) 1 . 120))>
```
but fundamentally everything is there to create/peel apart these objects.

(note that it would be a bit harder to work with these objects via the expect-interface to maxima)

A basic explanation of the MRAT format is here: [http://def.fe.up.pt/pipermail/maxima-discuss/2005/010416.html](http://def.fe.up.pt/pipermail/maxima-discuss/2005/010416.html)

**EDIT:** never mind, this isn't suitable for power series. This whole "TRUNC" property is very fickle (and it doesn't carry proper order information). It disappears with very trivial arithmetic already.



---

archive/issue_comments_283468.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768\">e3907ec</a></td><td><code>Merge branch 'develop' into t/17400/17400-1</code></td></tr></table>\n",
    "created_at": "2016-08-03T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768">e3907ec</a></td><td><code>Merge branch 'develop' into t/17400/17400-1</code></td></tr></table>




---

archive/issue_comments_283469.json:
```json
{
    "body": "**Changing commit** from \"[611f93b9a10863247293ae330c8f9432fb6a22b0](https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0)\" to \"[e3907ec38750e1be59d10490dc1d511e5307b768](https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768)\".",
    "created_at": "2016-08-03T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[611f93b9a10863247293ae330c8f9432fb6a22b0](https://github.com/sagemath/sagetrac-mirror/commit/611f93b9a10863247293ae330c8f9432fb6a22b0)" to "[e3907ec38750e1be59d10490dc1d511e5307b768](https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768)".



---

archive/issue_events_056589.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-03T13:16:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56589"
}
```



---

archive/issue_events_056590.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-03T13:16:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17400#event-56590"
}
```



---

archive/issue_comments_283470.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-08-03T13:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283470",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_283471.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/895d900cfd8172cf989f372089e0c39c57a8e9bc\">895d900</a></td><td><code>Merge branch 'develop' into t/17400/17400-1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286\">22c947a</a></td><td><code>17400: adapt doctest to changed simplify behaviour</code></td></tr></table>\n",
    "created_at": "2016-09-22T07:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/895d900cfd8172cf989f372089e0c39c57a8e9bc">895d900</a></td><td><code>Merge branch 'develop' into t/17400/17400-1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286">22c947a</a></td><td><code>17400: adapt doctest to changed simplify behaviour</code></td></tr></table>




---

archive/issue_comments_283472.json:
```json
{
    "body": "**Changing commit** from \"[e3907ec38750e1be59d10490dc1d511e5307b768](https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768)\" to \"[22c947a8ee6d435db6d103246e88674d50e12286](https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286)\".",
    "created_at": "2016-09-22T07:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e3907ec38750e1be59d10490dc1d511e5307b768](https://github.com/sagemath/sagetrac-mirror/commit/e3907ec38750e1be59d10490dc1d511e5307b768)" to "[22c947a8ee6d435db6d103246e88674d50e12286](https://github.com/sagemath/sagetrac-mirror/commit/22c947a8ee6d435db6d103246e88674d50e12286)".



---

archive/issue_comments_283473.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2017-11-28T07:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283473",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_283474.json:
```json
{
    "body": "<a id='comment:22'></a>\nTwo doctests failing, see patchbot.",
    "created_at": "2017-11-28T07:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17400#issuecomment-283474",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'></a>
Two doctests failing, see patchbot.
