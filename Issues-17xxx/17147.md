# Issue 17147: Overriding checks to generate poset and lattice faster

archive/issues_016910.json:
```json
{
    "body": "This ticket was originally about overriding checks to make poset creation faster. But this is actually already available: instead of `Poset(...)` one can use `FinitePoset(D, ..., category=FinitePosets, ...)`. For some lattices the time saving is huge, as there is no need to compute meet- or join-matrix; think about `BooleanLattice` used as an example of a poset, not as an example of lattice. (This could be documented somehow, \"Advanced [SageMath](SageMath) Hacking\" or something like that.)\n\nHowever, currently for example `Posets.ChainPoset(500)` may takes 10 seconds. That is so because the constructors for common posets and lattices do not use this faster construction. Hence the new aim of the ticket is to change thst.\n\n\nCC:  @tscrim\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nBranch: b0e568636be5546969483c0a3eb6a6b81a9a3dae\n\nCommit: b0e568636be5546969483c0a3eb6a6b81a9a3dae\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17147\n\n",
    "closed_at": "2016-11-27T16:46:02Z",
    "created_at": "2014-10-14T10:06:04Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Overriding checks to generate poset and lattice faster",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17147",
    "user": "https://github.com/jm58660"
}
```
This ticket was originally about overriding checks to make poset creation faster. But this is actually already available: instead of `Poset(...)` one can use `FinitePoset(D, ..., category=FinitePosets, ...)`. For some lattices the time saving is huge, as there is no need to compute meet- or join-matrix; think about `BooleanLattice` used as an example of a poset, not as an example of lattice. (This could be documented somehow, "Advanced [SageMath](SageMath) Hacking" or something like that.)

However, currently for example `Posets.ChainPoset(500)` may takes 10 seconds. That is so because the constructors for common posets and lattices do not use this faster construction. Hence the new aim of the ticket is to change thst.


CC:  @tscrim

Reviewer: Travis Scrimshaw

Author: Jori Mäntysalo

Branch: b0e568636be5546969483c0a3eb6a6b81a9a3dae

Commit: b0e568636be5546969483c0a3eb6a6b81a9a3dae

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17147





---

archive/issue_events_049750.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-26T11:19:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49750"
}
```



---

archive/issue_comments_223683.json:
```json
{
    "body": "<a id='comment:2'></a>Travis, I guess we should close this one. But to be sure:\n\nFirst, if I just say `n = 500; L1 = LatticePoset((range(n), [[x,x+1] for x in range(n-1)]))` it takes about two seconds. But if I say\n\n```\nn = 500\nD = DiGraph([range(n), [[x,x+1] for x in range(n-1)]], format='vertices_and_edges')\nfrom sage.combinat.posets.lattices import FiniteLatticePoset\nL2 = FiniteLatticePoset(D, range(n), FiniteLatticePosets(), True)\n```\n\nit takes only 10 or 20 millisecods. Can you confirm that this works, and so there is a way to override check \"is this poset really a poset (i.e. acyclic transitive reduction of graph)\"?\n\nSecond, another possibility is that the code could directly compute le-matrix, M\u00f6bius function matrix etc, and those would be very easy for a chain, diamond and so one. But that is a place for another ticket.\n\nThird, it is unnecessary to re-compute meet- or join-matrix. But that is a duplicate of #20434 or #18776.",
    "created_at": "2016-09-26T11:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223683",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>Travis, I guess we should close this one. But to be sure:

First, if I just say `n = 500; L1 = LatticePoset((range(n), [[x,x+1] for x in range(n-1)]))` it takes about two seconds. But if I say

```
n = 500
D = DiGraph([range(n), [[x,x+1] for x in range(n-1)]], format='vertices_and_edges')
from sage.combinat.posets.lattices import FiniteLatticePoset
L2 = FiniteLatticePoset(D, range(n), FiniteLatticePosets(), True)
```

it takes only 10 or 20 millisecods. Can you confirm that this works, and so there is a way to override check "is this poset really a poset (i.e. acyclic transitive reduction of graph)"?

Second, another possibility is that the code could directly compute le-matrix, Möbius function matrix etc, and those would be very easy for a chain, diamond and so one. But that is a place for another ticket.

Third, it is unnecessary to re-compute meet- or join-matrix. But that is a duplicate of #20434 or #18776.



---

archive/issue_comments_223684.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-26T11:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223684",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_events_049751.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-26T13:59:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49751"
}
```



---

archive/issue_events_049752.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-26T13:59:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49752"
}
```



---

archive/issue_comments_223685.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-26T13:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223685",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_223686.json:
```json
{
    "body": "<a id='comment:3'></a>I am opting for changing the relevant constructors to avoid the checks, which is a separate from #20434 and #18776.",
    "created_at": "2016-09-26T13:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223686",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>I am opting for changing the relevant constructors to avoid the checks, which is a separate from #20434 and #18776.



---

archive/issue_comments_223687.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 tscrim]:\n> I am opting for changing the relevant constructors to avoid the checks, which is a separate from #20434 and #18776.\n\n\nDo you mean only mandatory checks, i.e. `is_poset` and having a join matrix and a bottom element (or meet matrix and top), or more precomputation?",
    "created_at": "2016-09-26T14:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223687",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>Replying to [comment:3 tscrim]:
> I am opting for changing the relevant constructors to avoid the checks, which is a separate from #20434 and #18776.


Do you mean only mandatory checks, i.e. `is_poset` and having a join matrix and a bottom element (or meet matrix and top), or more precomputation?



---

archive/issue_comments_223688.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2016-09-26T14:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223688",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_223689.json:
```json
{
    "body": "<a id='comment:5'></a>I mean replace `LatticePoset` with `FiniteLatticePoset` as in comment:2 to avoid the input validation checks",
    "created_at": "2016-09-26T14:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223689",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>I mean replace `LatticePoset` with `FiniteLatticePoset` as in comment:2 to avoid the input validation checks



---

archive/issue_comments_223690.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 tscrim]:\n> I mean replace `LatticePoset` with `FiniteLatticePoset` as in comment:2 to avoid the input validation checks\n\n\nIn specific functions at `lattice_examples.py` that creates, say, `DivisorLattice`?",
    "created_at": "2016-09-26T15:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223690",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Replying to [comment:5 tscrim]:
> I mean replace `LatticePoset` with `FiniteLatticePoset` as in comment:2 to avoid the input validation checks


In specific functions at `lattice_examples.py` that creates, say, `DivisorLattice`?



---

archive/issue_comments_223691.json:
```json
{
    "body": "<a id='comment:7'></a>Yes, that's correct.",
    "created_at": "2016-09-26T15:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223691",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Yes, that's correct.



---

archive/issue_comments_223692.json:
```json
{
    "body": "<a id='comment:9'></a>Like this?\n\nDoes everything work? I.e. meets, joins, listing elements, linear extension is OK and so on? How about unique representation?\n\n---\nNew commits:",
    "created_at": "2016-09-26T15:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223692",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>Like this?

Does everything work? I.e. meets, joins, listing elements, linear extension is OK and so on? How about unique representation?

---
New commits:



---

archive/issue_comments_223693.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 jmantysalo]:\n> Like this?\n\n\nYes.\n\n> Does everything work? I.e. meets, joins, listing elements, linear extension is OK and so on? How about unique representation?\n\n\nAFAIK, yes, but I don't have time immediately to test it. Unique representation is handled by the `FinitePoset` class and our input is basically the result from going through `Poset`. IIRC, the default for fixed linear extensions is to not have one. The others look like they are naturally the same from going through `Poset` as well.",
    "created_at": "2016-09-26T16:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223693",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Replying to [comment:9 jmantysalo]:
> Like this?


Yes.

> Does everything work? I.e. meets, joins, listing elements, linear extension is OK and so on? How about unique representation?


AFAIK, yes, but I don't have time immediately to test it. Unique representation is handled by the `FinitePoset` class and our input is basically the result from going through `Poset`. IIRC, the default for fixed linear extensions is to not have one. The others look like they are naturally the same from going through `Poset` as well.



---

archive/issue_comments_223694.json:
```json
{
    "body": "<a id='comment:11'></a>OK. Then how to create `DivisorLattice` or whatever poset whose elements are not integers `0..n-1`?",
    "created_at": "2016-09-26T16:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223694",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>OK. Then how to create `DivisorLattice` or whatever poset whose elements are not integers `0..n-1`?



---

archive/issue_comments_223695.json:
```json
{
    "body": "<a id='comment:12'></a>Ah, the \"hasse diagram\" -parameter is not Hasse diagram in a sense that `hasse_diagram.py` defines... I.e. it is just a DiGraph with some properties as an unlabeled graph. So something like this could work:\n\n```\nfrom sage.combinat.posets.lattices import FiniteLatticePoset\nfrom sage.categories.finite_lattice_posets import FiniteLatticePosets\nn = 10^12\nDiv_n = divisors(n)\nD = DiGraph([Div_n, lambda a, b: b%a==0 and is_prime(b//a)])\nL = FiniteLatticePoset(D, elements=Div_n, category=FiniteLatticePosets())\n```\n\nThis is faster than current implementation, but could be made even faster with some thinking. Having a natural linear extension would even make some small examples better; currently `Posets.DivisorLattice(12).join_irreducibles()` will give `[2, 4, 3]`.",
    "created_at": "2016-09-27T04:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223695",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>Ah, the "hasse diagram" -parameter is not Hasse diagram in a sense that `hasse_diagram.py` defines... I.e. it is just a DiGraph with some properties as an unlabeled graph. So something like this could work:

```
from sage.combinat.posets.lattices import FiniteLatticePoset
from sage.categories.finite_lattice_posets import FiniteLatticePosets
n = 10^12
Div_n = divisors(n)
D = DiGraph([Div_n, lambda a, b: b%a==0 and is_prime(b//a)])
L = FiniteLatticePoset(D, elements=Div_n, category=FiniteLatticePosets())
```

This is faster than current implementation, but could be made even faster with some thinking. Having a natural linear extension would even make some small examples better; currently `Posets.DivisorLattice(12).join_irreducibles()` will give `[2, 4, 3]`.



---

archive/issue_comments_223696.json:
```json
{
    "body": "<a id='comment:13'></a>Is there something against using distinguished linear extension in general? Slower, eats more memory, something?\n\nI think that `DivisorLattice()` is a good example for some functions like `join_irreducibles()`. But it is more natural if linear extension is ascending. That is, `Posets.DivisorLattice(12).join_irreducibles()` could return `[2, 3, 4]` and not `[2, 4, 3]` like it now does.",
    "created_at": "2016-10-07T12:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223696",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'></a>Is there something against using distinguished linear extension in general? Slower, eats more memory, something?

I think that `DivisorLattice()` is a good example for some functions like `join_irreducibles()`. But it is more natural if linear extension is ascending. That is, `Posets.DivisorLattice(12).join_irreducibles()` could return `[2, 3, 4]` and not `[2, 4, 3]` like it now does.



---

archive/issue_comments_223697.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 jmantysalo]:\n> Is there something against using distinguished linear extension in general? Slower, eats more memory, something?\n\n\nNot that I am aware.\n\n> I think that `DivisorLattice()` is a good example for some functions like `join_irreducibles()`. But it is more natural if linear extension is ascending. That is, `Posets.DivisorLattice(12).join_irreducibles()` could return `[2, 3, 4]` and not `[2, 4, 3]` like it now does.\n\n\nIt is natural in a way, but I don't have any opinion on this.",
    "created_at": "2016-10-07T14:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223697",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Replying to [comment:13 jmantysalo]:
> Is there something against using distinguished linear extension in general? Slower, eats more memory, something?


Not that I am aware.

> I think that `DivisorLattice()` is a good example for some functions like `join_irreducibles()`. But it is more natural if linear extension is ascending. That is, `Posets.DivisorLattice(12).join_irreducibles()` could return `[2, 3, 4]` and not `[2, 4, 3]` like it now does.


It is natural in a way, but I don't have any opinion on this.



---

archive/issue_comments_223698.json:
```json
{
    "body": "<a id='comment:15'></a>I did #21666 as a first part for this.",
    "created_at": "2016-10-08T08:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223698",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'></a>I did #21666 as a first part for this.



---

archive/issue_events_049753.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-10T07:00:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49753"
}
```



---

archive/issue_events_049754.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-10T07:00:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49754"
}
```



---

archive/issue_comments_223699.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-10-10T07:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223699",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_223700.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-14T20:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_223701.json:
```json
{
    "body": "<a id='comment:18'></a>Done for most basic structures. I guess this one can be closed; more complicated structures take more time to create as a digraph, so proportional time change is not that much.",
    "created_at": "2016-11-14T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223701",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'></a>Done for most basic structures. I guess this one can be closed; more complicated structures take more time to create as a digraph, so proportional time change is not that much.



---

archive/issue_comments_223702.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-14T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223702",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_223703.json:
```json
{
    "body": "<a id='comment:19'></a>I agree that we can do things incrementally as there is a need. However, I don't agree with this change:\n\n```diff\n-        p.hasse_diagram()._pos = {0:[2,0],1:[0,2],2:[3,1],3:[3,3],4:[2,4]}\n-        return p\n```\nas this is used to make the printing of the poset is \"nice\".",
    "created_at": "2016-11-14T21:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223703",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>I agree that we can do things incrementally as there is a need. However, I don't agree with this change:

```diff
-        p.hasse_diagram()._pos = {0:[2,0],1:[0,2],2:[3,1],3:[3,3],4:[2,4]}
-        return p
```
as this is used to make the printing of the poset is "nice".



---

archive/issue_comments_223704.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 tscrim]:\n> I don't agree with this change:\n> \n> ```diff\n> -        p.hasse_diagram()._pos = {0:[2,0],1:[0,2],2:[3,1],3:[3,3],4:[2,4]}\n> -        return p\n> ```\n> as this is used to make the printing of the poset is \"nice\".\n\n\nPosets are plotted wih `layout='acyclic'`, so that will be overrided in any case.",
    "created_at": "2016-11-15T05:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223704",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'></a>Replying to [comment:19 tscrim]:
> I don't agree with this change:
> 
> ```diff
> -        p.hasse_diagram()._pos = {0:[2,0],1:[0,2],2:[3,1],3:[3,3],4:[2,4]}
> -        return p
> ```
> as this is used to make the printing of the poset is "nice".


Posets are plotted wih `layout='acyclic'`, so that will be overrided in any case.



---

archive/issue_comments_223705.json:
```json
{
    "body": "<a id='comment:21'></a>Just pinging. As you can see from\n\n```\ng = DiGraph({0: [1]})\ng._pos={0: [0,0], 1: [1,1]}\ng.show(layout='acyclic')\n```\n\nthe `...pos=...` line does nothing.",
    "created_at": "2016-11-21T07:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223705",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'></a>Just pinging. As you can see from

```
g = DiGraph({0: [1]})
g._pos={0: [0,0], 1: [1,1]}
g.show(layout='acyclic')
```

the `...pos=...` line does nothing.



---

archive/issue_comments_223706.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-22T22:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223706",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_223707.json:
```json
{
    "body": "<a id='comment:22'></a>Looking at the code more, the original didn't actually set the `_pos` because it was doing it to a copy of the Hasse diagram. So it is okay I guess...it does have some effect on the `HasseDiagram` when done correctly, but like I said, it wasn't actually doing it correctly anyways.",
    "created_at": "2016-11-22T22:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223707",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>Looking at the code more, the original didn't actually set the `_pos` because it was doing it to a copy of the Hasse diagram. So it is okay I guess...it does have some effect on the `HasseDiagram` when done correctly, but like I said, it wasn't actually doing it correctly anyways.



---

archive/issue_comments_223708.json:
```json
{
    "body": "<a id='comment:23'></a>OK, thanks. I'll continue on sage-devel about `_pos`.",
    "created_at": "2016-11-23T04:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223708",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:23'></a>OK, thanks. I'll continue on sage-devel about `_pos`.



---

archive/issue_events_049755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-27T16:46:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17147#event-49755"
}
```



---

archive/issue_comments_223709.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-27T16:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17147#issuecomment-223709",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
