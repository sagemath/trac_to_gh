# Issue 17242: Uniform random generation  of Composition of a given size

archive/issues_017005.json:
```json
{
    "body": "Assignee: gchatel\n\nCC:  vivianepons @tscrim @darijgr sage-combinat @nthiery @fchapoton\n\nKeywords: composition,  combinatorics, random\n\nI am overwritting the default random_element method of the Composition_n class to implement an efficient way to compute a random composition.\n\nAs explained in the documentation, I use the fact that composition of size n are in bijection with binary words of size n starting with a 1.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17242\n\n",
    "closed_at": "2014-10-30T09:45:10Z",
    "created_at": "2014-10-28T14:12:50Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Uniform random generation  of Composition of a given size",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17242",
    "user": "https://github.com/rodgzilla"
}
```
Assignee: gchatel

CC:  vivianepons @tscrim @darijgr sage-combinat @nthiery @fchapoton

Keywords: composition,  combinatorics, random

I am overwritting the default random_element method of the Composition_n class to implement an efficient way to compute a random composition.

As explained in the documentation, I use the fact that composition of size n are in bijection with binary words of size n starting with a 1.

Issue created by migration from https://trac.sagemath.org/ticket/17242





---

archive/issue_comments_225290.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-28T14:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225290",
    "user": "https://github.com/rodgzilla"
}
```

New commits:



---

archive/issue_comments_225291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T14:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225292.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-28T14:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225292",
    "user": "https://github.com/rodgzilla"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_225293.json:
```json
{
    "body": "You have deleted one line in some other place in the file. (to see where, click on the green link in the branch field on top of this page). Please put it back.\n\nAlso, please gather the imports at the begininng of the code. Otherwise, seems ok.",
    "created_at": "2014-10-28T14:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225293",
    "user": "https://github.com/fchapoton"
}
```

You have deleted one line in some other place in the file. (to see where, click on the green link in the branch field on top of this page). Please put it back.

Also, please gather the imports at the begininng of the code. Otherwise, seems ok.



---

archive/issue_comments_225294.json:
```json
{
    "body": "I have not done any benchmarks, but I bet that\n`[sage.misc.prandom.choice([0,1]) for _ in range(self.n - 1)]` is faster than `FiniteWords_length_k_over_OrderedAlphabet(A, length = self.n - 1).random_element()` (and, besides, works for n = 0 as well).",
    "created_at": "2014-10-28T15:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225294",
    "user": "https://github.com/darijgr"
}
```

I have not done any benchmarks, but I bet that
`[sage.misc.prandom.choice([0,1]) for _ in range(self.n - 1)]` is faster than `FiniteWords_length_k_over_OrderedAlphabet(A, length = self.n - 1).random_element()` (and, besides, works for n = 0 as well).



---

archive/issue_comments_225295.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T18:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225296.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-28T18:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225296",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_225297.json:
```json
{
    "body": "Welldone; it's positive_review then.",
    "created_at": "2014-10-28T18:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225297",
    "user": "https://github.com/darijgr"
}
```

Welldone; it's positive_review then.



---

archive/issue_comments_225298.json:
```json
{
    "body": "Reviewer name",
    "created_at": "2014-10-28T20:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225298",
    "user": "https://github.com/vbraun"
}
```

Reviewer name



---

archive/issue_comments_225299.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-10-28T20:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225299",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_225300.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-10-28T20:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225300",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_225301.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-10-29T16:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225301",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_225302.json:
```json
{
    "body": "Doctests failure in src/sage/combinat/composition_signed.py",
    "created_at": "2014-10-29T16:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225302",
    "user": "https://github.com/vbraun"
}
```

Doctests failure in src/sage/combinat/composition_signed.py



---

archive/issue_comments_225303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-29T18:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_225304.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-10-29T18:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225304",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_225305.json:
```json
{
    "body": "Good point; that file had a random doctest not marked as random. I am wondering if we can have a script that automatically warns of such things?",
    "created_at": "2014-10-29T18:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225305",
    "user": "https://github.com/darijgr"
}
```

Good point; that file had a random doctest not marked as random. I am wondering if we can have a script that automatically warns of such things?



---

archive/issue_comments_225306.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-30T09:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17242#issuecomment-225306",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049890.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-30T09:45:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17242",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17242#event-49890"
}
```
