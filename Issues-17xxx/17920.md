# Issue 17920: Reimplement IntegerLists using Polyhedron.integral_points()

archive/issues_017683.json:
```json
{
    "assignees": [],
    "body": "This fixes #17548.\n\nIt also adds new features to `IntegerLists`:\n\n1. Negative integers are allowed (but the default still is `min_part=0`).\n\n2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.\n\nNote that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.\n\nDepends on #17937\n\nDepends on #18087\n\n**CC:**  @nathanncohen @anneschilling @tscrim @nthiery\n\n**Branch:** [u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)\n\n**Commit:** [621d467827d8d0c6a0cb1113cb4b861cca936f41](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/17920\n\n",
    "closed_at": "2015-03-09T20:56:34Z",
    "created_at": "2015-03-09T17:52:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Reimplement IntegerLists using Polyhedron.integral_points()",
    "type": "issue",
    "updated_at": "2015-04-13T11:38:40Z",
    "url": "https://github.com/sagemath/sage/issues/17920",
    "user": "https://github.com/jdemeyer"
}
```
This fixes #17548.

It also adds new features to `IntegerLists`:

1. Negative integers are allowed (but the default still is `min_part=0`).

2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.

Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.

Depends on #17937

Depends on #18087

**CC:**  @nathanncohen @anneschilling @tscrim @nthiery

**Branch:** [u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)

**Commit:** [621d467827d8d0c6a0cb1113cb4b861cca936f41](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/17920





---

archive/issue_events_219041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219041"
}
```



---

archive/issue_events_219042.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219042"
}
```



---

archive/issue_events_219043.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219043"
}
```



---

archive/issue_comments_245198.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nThe Sage MILP solvers cannot enumerate all solutions => closing as invalid.",
    "created_at": "2015-03-09T20:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245198",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>**Comment 2:**</a>
The Sage MILP solvers cannot enumerate all solutions => closing as invalid.



---

archive/issue_events_219044.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219044"
}
```



---

archive/issue_events_219045.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219045"
}
```



---

archive/issue_events_219046.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219046"
}
```



---

archive/issue_events_219047.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "rename": {
        "from": "Reimplement IntegerLists using MILP",
        "to": "Reimplement IntegerLists using Polyhedron.integral_points()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219047"
}
```



---

archive/issue_events_219048.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219048"
}
```



---

archive/issue_events_219049.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219049"
}
```



---

archive/issue_comments_245199.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)",
    "created_at": "2015-03-11T21:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245199",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)



---

archive/issue_comments_245200.json:
```json
{
    "body": "**Commit:** [492696fb8bbca610dd8b5415b44910196e9d9222](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)",
    "created_at": "2015-03-12T07:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245200",
    "user": "https://github.com/nathanncohen"
}
```

**Commit:** [492696fb8bbca610dd8b5415b44910196e9d9222](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)



---

archive/issue_comments_245201.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nI do not understand what this is... Did you copy/paste the original file? It seems that you copy/pasted the original files and made some modifications to it `O_o`\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222\">492696f</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-12T07:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245201",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'>**Comment 5:**</a>
I do not understand what this is... Did you copy/paste the original file? It seems that you copy/pasted the original files and made some modifications to it `O_o`

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222">492696f</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245202.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nYes, that's what I did. Anyway, this is still very much work in progress...",
    "created_at": "2015-03-12T10:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245202",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>**Comment 6:**</a>
Yes, that's what I did. Anyway, this is still very much work in progress...



---

archive/issue_comments_245203.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n> Yes, that's what I did. Anyway, this is still very much work in progress...\n\nOh, okay!\n\nNathann",
    "created_at": "2015-03-12T10:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245203",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'>**Comment 7:**</a>
> Yes, that's what I did. Anyway, this is still very much work in progress...

Oh, okay!

Nathann



---

archive/issue_comments_245204.json:
```json
{
    "body": "**Dependencies:** #17937",
    "created_at": "2015-03-12T15:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245204",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #17937



---

archive/issue_comments_245205.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb6ba858894c3c3f77b2278115198bfe9076adf0\">eb6ba85</a></td><td><code>Fix integral_points() for polyhedra in 0 dimensions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b\">5896b11</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-12T16:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245205",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb6ba858894c3c3f77b2278115198bfe9076adf0">eb6ba85</a></td><td><code>Fix integral_points() for polyhedra in 0 dimensions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b">5896b11</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245206.json:
```json
{
    "body": "**Changing commit** from \"[492696fb8bbca610dd8b5415b44910196e9d9222](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)\" to \"[5896b1160e7dd123abfc03325583ffe805d0912b](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)\".",
    "created_at": "2015-03-12T16:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245206",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[492696fb8bbca610dd8b5415b44910196e9d9222](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)" to "[5896b1160e7dd123abfc03325583ffe805d0912b](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)".



---

archive/issue_comments_245207.json:
```json
{
    "body": "**Changing commit** from \"[5896b1160e7dd123abfc03325583ffe805d0912b](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)\" to \"[c835117a1e14e84d3f823b4111a092a80b4c3ef4](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)\".",
    "created_at": "2015-03-13T10:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245207",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5896b1160e7dd123abfc03325583ffe805d0912b](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)" to "[c835117a1e14e84d3f823b4111a092a80b4c3ef4](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)".



---

archive/issue_comments_245208.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4\">c835117</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-13T10:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245208",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>**Comment 10:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4">c835117</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245209.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d\">755b67a</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T14:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245209",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>**Comment 11:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d">755b67a</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245210.json:
```json
{
    "body": "**Changing commit** from \"[c835117a1e14e84d3f823b4111a092a80b4c3ef4](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)\" to \"[755b67a1c9516bcd44f59aab6a8b6032d257591d](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)\".",
    "created_at": "2015-03-14T14:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245210",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c835117a1e14e84d3f823b4111a092a80b4c3ef4](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)" to "[755b67a1c9516bcd44f59aab6a8b6032d257591d](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)".



---

archive/issue_comments_245211.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nThis now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.\n\nDue to the polyhedra overhead, it is generally (a lot) slower than the existing code.",
    "created_at": "2015-03-14T14:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245211",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>**Comment 12:**</a>
This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.

Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.



---

archive/issue_comments_245212.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nReplying to [@jdemeyer](#comment%3A12):\n> This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.\n> \n> Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.\n\nIs it worth changing this branch so that it changes the existing code instead of adding a new file ? As you said: let's be correct first, *then* fast.\n\nNathann",
    "created_at": "2015-03-14T16:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245212",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>**Comment 13:**</a>
Replying to [@jdemeyer](#comment%3A12):
> This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.
> 
> Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.

Is it worth changing this branch so that it changes the existing code instead of adding a new file ? As you said: let's be correct first, *then* fast.

Nathann



---

archive/issue_comments_245213.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nMy code does not yet support all (undocumented!) features of the old `IntegerListsLex`, so we cannot yet replace `IntegerListsLex`.",
    "created_at": "2015-03-14T16:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245213",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>**Comment 14:**</a>
My code does not yet support all (undocumented!) features of the old `IntegerListsLex`, so we cannot yet replace `IntegerListsLex`.



---

archive/issue_comments_245214.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da\">674a518</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T18:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245214",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>**Comment 15:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da">674a518</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245215.json:
```json
{
    "body": "**Changing commit** from \"[755b67a1c9516bcd44f59aab6a8b6032d257591d](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)\" to \"[674a518d20e6b220f668d88ec748376217b243da](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)\".",
    "created_at": "2015-03-14T18:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245215",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[755b67a1c9516bcd44f59aab6a8b6032d257591d](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)" to "[674a518d20e6b220f668d88ec748376217b243da](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)".



---

archive/issue_comments_245216.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da\">4e5dbae</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245216",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da">4e5dbae</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245217.json:
```json
{
    "body": "**Changing commit** from \"[674a518d20e6b220f668d88ec748376217b243da](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)\" to \"[4e5dbaec98f2d779a6c73a69d5b71581be7fb5da](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)\".",
    "created_at": "2015-03-14T22:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245217",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[674a518d20e6b220f668d88ec748376217b243da](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)" to "[4e5dbaec98f2d779a6c73a69d5b71581be7fb5da](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)".



---

archive/issue_comments_245218.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nThis now implements `Compositions` using my new `IntegerListsLex` (is the lex ordering really important? I guess not, it's for sure nowhere documented). However, doing the same for `Partitions` leads to all kinds of breakage and I don't understand why.",
    "created_at": "2015-03-14T22:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245218",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>**Comment 17:**</a>
This now implements `Compositions` using my new `IntegerListsLex` (is the lex ordering really important? I guess not, it's for sure nowhere documented). However, doing the same for `Partitions` leads to all kinds of breakage and I don't understand why.



---

archive/issue_comments_245219.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262\">c0772f8</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245219",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262">c0772f8</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245220.json:
```json
{
    "body": "**Changing commit** from \"[4e5dbaec98f2d779a6c73a69d5b71581be7fb5da](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)\" to \"[c0772f8981d3856bdf85cb3eb07094944aa73262](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)\".",
    "created_at": "2015-03-14T22:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245220",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4e5dbaec98f2d779a6c73a69d5b71581be7fb5da](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)" to "[c0772f8981d3856bdf85cb3eb07094944aa73262](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)".



---

archive/issue_comments_245221.json:
```json
{
    "body": "**Changing commit** from \"[c0772f8981d3856bdf85cb3eb07094944aa73262](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)\" to \"[631c47652412b518bb4bcd8cb4465a4fbfe16a83](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)\".",
    "created_at": "2015-03-14T22:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245221",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c0772f8981d3856bdf85cb3eb07094944aa73262](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)" to "[631c47652412b518bb4bcd8cb4465a4fbfe16a83](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)".



---

archive/issue_comments_245222.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83\">631c476</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245222",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83">631c476</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245223.json:
```json
{
    "body": "**Changing commit** from \"[631c47652412b518bb4bcd8cb4465a4fbfe16a83](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)\" to \"[3b7f4cd93be25051cc9ecf08d573b2aacdc02010](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)\".",
    "created_at": "2015-03-15T11:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245223",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[631c47652412b518bb4bcd8cb4465a4fbfe16a83](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)" to "[3b7f4cd93be25051cc9ecf08d573b2aacdc02010](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)".



---

archive/issue_comments_245224.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010\">3b7f4cd</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T11:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245224",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>**Comment 20:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010">3b7f4cd</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245225.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab\">936a2c7</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T11:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245225",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>**Comment 21:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab">936a2c7</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245226.json:
```json
{
    "body": "**Changing commit** from \"[3b7f4cd93be25051cc9ecf08d573b2aacdc02010](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)\" to \"[936a2c73d3612c76cf115d1b5dd690417e6ce4ab](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)\".",
    "created_at": "2015-03-15T11:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245226",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3b7f4cd93be25051cc9ecf08d573b2aacdc02010](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)" to "[936a2c73d3612c76cf115d1b5dd690417e6ce4ab](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)".



---

archive/issue_comments_245227.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nNote that this changes 3 tests (just reordering the output) in `src/sage/tests/book_schilling_zabrocki_kschur_primer.py`",
    "created_at": "2015-03-15T11:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>**Comment 22:**</a>
Note that this changes 3 tests (just reordering the output) in `src/sage/tests/book_schilling_zabrocki_kschur_primer.py`



---

archive/issue_comments_245228.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nThe code on this ticket is essentially complete, I just need to add more doctests to comply with the \"coverage\" policy.",
    "created_at": "2015-03-15T11:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245228",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>**Comment 23:**</a>
The code on this ticket is essentially complete, I just need to add more doctests to comply with the "coverage" policy.



---

archive/issue_comments_245229.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3\">c9fa1c4</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T12:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245229",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3">c9fa1c4</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245230.json:
```json
{
    "body": "**Changing commit** from \"[936a2c73d3612c76cf115d1b5dd690417e6ce4ab](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)\" to \"[c9fa1c403feb7efb7b0c272b36e9062b3f0988d3](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)\".",
    "created_at": "2015-03-15T12:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245230",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[936a2c73d3612c76cf115d1b5dd690417e6ce4ab](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)" to "[c9fa1c403feb7efb7b0c272b36e9062b3f0988d3](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)".



---

archive/issue_comments_245231.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b\">b0a04aa</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T15:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245231",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>**Comment 25:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b">b0a04aa</a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_245232.json:
```json
{
    "body": "**Changing commit** from \"[c9fa1c403feb7efb7b0c272b36e9062b3f0988d3](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)\" to \"[b0a04aa5a4454766ed9802d8e99abcd7fb3e105b](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)\".",
    "created_at": "2015-03-15T15:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245232",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c9fa1c403feb7efb7b0c272b36e9062b3f0988d3](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)" to "[b0a04aa5a4454766ed9802d8e99abcd7fb3e105b](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)".



---

archive/issue_events_219050.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-15T15:08:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219050"
}
```



---

archive/issue_comments_245233.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nDo you have some timings?\n\nAlso, both of these are wrong:\n\n```\nsage: Compositions(3, max_length=2, inner=[1,1,1]).list()\n[]\nsage: Compositions(10, outer=[4], inner=[1,1]).list()\n[]\n```\nThe first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths. For the second, the inner composition is extendedby the minimum part, so there are many such compositions, such as `[4,6]`, `[2,8]`, etc.",
    "created_at": "2015-03-15T15:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245233",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'>**Comment 27:**</a>
Do you have some timings?

Also, both of these are wrong:

```
sage: Compositions(3, max_length=2, inner=[1,1,1]).list()
[]
sage: Compositions(10, outer=[4], inner=[1,1]).list()
[]
```
The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths. For the second, the inner composition is extendedby the minimum part, so there are many such compositions, such as `[4,6]`, `[2,8]`, etc.



---

archive/issue_comments_245234.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nReplying to [@tscrim](#comment%3A27):\n> Do you have some timings?\n\nSlow is better than wrong, isn't it? ;-)",
    "created_at": "2015-03-15T15:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245234",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>**Comment 28:**</a>
Replying to [@tscrim](#comment%3A27):
> Do you have some timings?

Slow is better than wrong, isn't it? ;-)



---

archive/issue_comments_245235.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nReplying to [@tscrim](#comment%3A27):\n> Do you have some timings?\n\nMy code is much slower.\n\n> Also, both of these are wrong:\n> \n> ```\n> sage: Compositions(3, max_length=2, inner=[1,1,1]).list()\n> []\n> sage: Compositions(10, outer=[4], inner=[1,1]).list()\n> []\n> ```\n> The first should be `[[2, 1], [1, 2]]`\n\nI don't think so. The `Compositions` code explicitly adds the length of the `inner` argument as minimal length. I didn't change this.",
    "created_at": "2015-03-15T15:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245235",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>**Comment 29:**</a>
Replying to [@tscrim](#comment%3A27):
> Do you have some timings?

My code is much slower.

> Also, both of these are wrong:
> 
> ```
> sage: Compositions(3, max_length=2, inner=[1,1,1]).list()
> []
> sage: Compositions(10, outer=[4], inner=[1,1]).list()
> []
> ```
> The first should be `[[2, 1], [1, 2]]`

I don't think so. The `Compositions` code explicitly adds the length of the `inner` argument as minimal length. I didn't change this.



---

archive/issue_events_219051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-15T15:31:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/blocker",
    "label_color": "ff0000",
    "label_name": "blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219051"
}
```



---

archive/issue_comments_245236.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nSetting to blocker status since either #17920 or #17956 should be fixed.",
    "created_at": "2015-03-15T15:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245236",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'>**Comment 30:**</a>
Setting to blocker status since either #17920 or #17956 should be fixed.



---

archive/issue_comments_245237.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This fixes #17548.\n``````\n",
    "created_at": "2015-03-15T15:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245237",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This fixes #17548.
``````




---

archive/issue_comments_245238.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nReplying to [@tscrim](#comment%3A27):\n> The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths.\n\nTo clarify: you might be confusing with the `floor` and `ceiling` arguments of `IntegerListsLex`. Those do not have any effect on the length, but `inner`/`outer` *do* add lower/upper bounds to the length. With both the existing code as well as with my code, we have for example\n\n```\nsage: Compositions(3, inner=[1,1,1]).list()\n[[1, 1, 1]]\n```",
    "created_at": "2015-03-15T15:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245238",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>**Comment 32:**</a>
Replying to [@tscrim](#comment%3A27):
> The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths.

To clarify: you might be confusing with the `floor` and `ceiling` arguments of `IntegerListsLex`. Those do not have any effect on the length, but `inner`/`outer` *do* add lower/upper bounds to the length. With both the existing code as well as with my code, we have for example

```
sage: Compositions(3, inner=[1,1,1]).list()
[[1, 1, 1]]
```



---

archive/issue_comments_245239.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nOn the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.\n\n`Compositions` also does a similar thing with the max length and `outer`, so I agree that those should be empty. However IMO these tests should be in `Compositions`.\n\n@videlec It's mostly correct and there is a lot of code which depends on this being fast. Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.",
    "created_at": "2015-03-15T15:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245239",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'>**Comment 33:**</a>
On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.

`Compositions` also does a similar thing with the max length and `outer`, so I agree that those should be empty. However IMO these tests should be in `Compositions`.

@videlec It's mostly correct and there is a lot of code which depends on this being fast. Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.



---

archive/issue_comments_245240.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\n> On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.\n\nWe can sort it before returning it I guess.\n\n> @videlec It's mostly correct\n\nJeroen compiled many related bugs in the description of #17548.\n\n> Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.\n\nSignificant slowdown can be a problem, that's for sure. If they turn out to be our only way to have a code which does not return wrong results, however, we will learn to live with them.\n\nNathann",
    "created_at": "2015-03-15T15:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245240",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:34'>**Comment 34:**</a>
> On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.

We can sort it before returning it I guess.

> @videlec It's mostly correct

Jeroen compiled many related bugs in the description of #17548.

> Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.

Significant slowdown can be a problem, that's for sure. If they turn out to be our only way to have a code which does not return wrong results, however, we will learn to live with them.

Nathann



---

archive/issue_comments_245241.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nI think it is great that Jeroen implemented this to get the correct results! Of course we do want fast code at the end.\n\nAs I mentioned on sage-devel, the order of lists of tableaux does not matter very much.\n\nAs Travis mentioned, there might be some subtle places where the order matters. One example that comes to mind is that the representations of S_n and characters are returned as matrices with rows and columns indexed by integers instead of partitions. So if the order of partitions changes, the interpretation of the results might change!",
    "created_at": "2015-03-15T15:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245241",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:35'>**Comment 35:**</a>
I think it is great that Jeroen implemented this to get the correct results! Of course we do want fast code at the end.

As I mentioned on sage-devel, the order of lists of tableaux does not matter very much.

As Travis mentioned, there might be some subtle places where the order matters. One example that comes to mind is that the representations of S_n and characters are returned as matrices with rows and columns indexed by integers instead of partitions. So if the order of partitions changes, the interpretation of the results might change!



---

archive/issue_comments_245242.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nReplying to [@tscrim](#comment%3A33):\n> On the ordering, from the title of the class, the output should be in lexicographical order.\n\nThe name is now `IntegerLists` and I do provide `IntegerListsLex` for \"backwards compatibility\" which does sort.\n\nSince the documentation of neither `Partitions` nor `Compositions` says anything about the order, I think it's allowed to change the order.",
    "created_at": "2015-03-15T15:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245242",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'>**Comment 36:**</a>
Replying to [@tscrim](#comment%3A33):
> On the ordering, from the title of the class, the output should be in lexicographical order.

The name is now `IntegerLists` and I do provide `IntegerListsLex` for "backwards compatibility" which does sort.

Since the documentation of neither `Partitions` nor `Compositions` says anything about the order, I think it's allowed to change the order.



---

archive/issue_comments_245243.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nAbout the speed: if you manage to fix all existing bugs in the `IntegerListsLex` code, you can again use that implementation for `Compositions` and `Partitions`. It's probably good to have two indepdendent implementations anyway.\n\nEven better would of course be that somebody speeds up `Polyhedron().integral_points()` which would benefit everybody using polyhedra.",
    "created_at": "2015-03-15T15:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245243",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'>**Comment 37:**</a>
About the speed: if you manage to fix all existing bugs in the `IntegerListsLex` code, you can again use that implementation for `Compositions` and `Partitions`. It's probably good to have two indepdendent implementations anyway.

Even better would of course be that somebody speeds up `Polyhedron().integral_points()` which would benefit everybody using polyhedra.



---

archive/issue_comments_245244.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n This fixes #17548.\n+\n+It also adds new features to `IntegerLists`:\n+\n+1. Negative integers are allowed (but the default still is `min_part=0`).\n+\n+2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.\n+\n+Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.\n``````\n",
    "created_at": "2015-03-15T16:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245244",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 This fixes #17548.
+
+It also adds new features to `IntegerLists`:
+
+1. Negative integers are allowed (but the default still is `min_part=0`).
+
+2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.
+
+Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.
``````




---

archive/issue_comments_245245.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nDear Jeroen,\n\nThanks a lot for taking action! It's definitely a good thing to have a\ngood connection between ``IntegerListLex`` and ``Polyhedron``, as\nthere is some non trivial overlap. The main differences is that\n``IntegerListLex`` was specifically designed for allowing for\n(essentially) Constant Amortized Time lexicographic Iteration in\nalmost constant memory, which is an important feature.\n\nSo I can see a work path along the following lines:\n\n- Get this ticket in to have a robust implementation of list\n\n- Completely rewrite the current ``IntegerListLex`` iterator to be\n  robust (it's definitely possible); keep the Polyhedron\n  implementation for testing purposes as well as for counting, ...\n\n- Optimize the iterator (Cythonization, using ClonableIntArray, ...).\n\nPlease do not change the enumeration order, at least as default: quite\nsome code depends on it (I agree, this should be made explicit in the\ndocumentation). The proposed generalizations (n in a range, negative\nentries) are fine since the iterator could be made to handle them.\n\nCheers,\n                       Nicolas",
    "created_at": "2015-03-16T05:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245245",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:39'>**Comment 39:**</a>
Dear Jeroen,

Thanks a lot for taking action! It's definitely a good thing to have a
good connection between ``IntegerListLex`` and ``Polyhedron``, as
there is some non trivial overlap. The main differences is that
``IntegerListLex`` was specifically designed for allowing for
(essentially) Constant Amortized Time lexicographic Iteration in
almost constant memory, which is an important feature.

So I can see a work path along the following lines:

- Get this ticket in to have a robust implementation of list

- Completely rewrite the current ``IntegerListLex`` iterator to be
  robust (it's definitely possible); keep the Polyhedron
  implementation for testing purposes as well as for counting, ...

- Optimize the iterator (Cythonization, using ClonableIntArray, ...).

Please do not change the enumeration order, at least as default: quite
some code depends on it (I agree, this should be made explicit in the
documentation). The proposed generalizations (n in a range, negative
entries) are fine since the iterator could be made to handle them.

Cheers,
                       Nicolas



---

archive/issue_comments_245246.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nReplying to [@nthiery](#comment%3A39):\n> Please do not change the enumeration order, at least as default\n\nI disagree with this: the default should be \"do not sort, return stuff in the fastest possible way\". Sorting an iterator is very expensive and should only be done if really needed.\n\n> quite some code depends on it\n\nIs that really true? The only doctest failures that I saw where \"obvious\" failures where some list order changed, I didn't see anything subtle.",
    "created_at": "2015-03-16T07:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245246",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>**Comment 40:**</a>
Replying to [@nthiery](#comment%3A39):
> Please do not change the enumeration order, at least as default

I disagree with this: the default should be "do not sort, return stuff in the fastest possible way". Sorting an iterator is very expensive and should only be done if really needed.

> quite some code depends on it

Is that really true? The only doctest failures that I saw where "obvious" failures where some list order changed, I didn't see anything subtle.



---

archive/issue_comments_245247.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nReplying to [@nthiery](#comment%3A39):\n> keep the Polyhedron implementation for testing purposes as well as for counting, ...\n\nI'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code. Profiling shows that a lot of time is spent in just *constructing* the polyhedra (if there are not so many points, enumerating them takes a lot less time than constructing the polyhedron in the first place).",
    "created_at": "2015-03-16T08:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245247",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'>**Comment 41:**</a>
Replying to [@nthiery](#comment%3A39):
> keep the Polyhedron implementation for testing purposes as well as for counting, ...

I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code. Profiling shows that a lot of time is spent in just *constructing* the polyhedra (if there are not so many points, enumerating them takes a lot less time than constructing the polyhedron in the first place).



---

archive/issue_comments_245248.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nHello,\n\n> I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code.\n\nTrue. This being said, your polyhedron code may very well be 'all we can do' to implement this feature while handling all possible combinations of parameters.\n\n> Profiling shows that a lot of time is spent in just *constructing* the polyhedra\n\nTrue. Do you have any idea where that comes from ? I had similar troubles with the Poset constructor (related to memory usage).\n\nNathann",
    "created_at": "2015-03-16T09:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245248",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:42'>**Comment 42:**</a>
Hello,

> I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code.

True. This being said, your polyhedron code may very well be 'all we can do' to implement this feature while handling all possible combinations of parameters.

> Profiling shows that a lot of time is spent in just *constructing* the polyhedra

True. Do you have any idea where that comes from ? I had similar troubles with the Poset constructor (related to memory usage).

Nathann



---

archive/issue_comments_245249.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\nReplying to [@nathanncohen](#comment%3A42):\n> > Profiling shows that a lot of time is spent in just *constructing* the polyhedra\n\n> \n> True. Do you have any idea where that comes from ?\n\nIt's just PPL.\n\nInterestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.",
    "created_at": "2015-03-16T09:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245249",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'>**Comment 43:**</a>
Replying to [@nathanncohen](#comment%3A42):
> > Profiling shows that a lot of time is spent in just *constructing* the polyhedra

> 
> True. Do you have any idea where that comes from ?

It's just PPL.

Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.



---

archive/issue_comments_245250.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\n> Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\nAahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity. It is *MUCH* faster.\n\nAt some point he got some crazy somewhere by adding 'from math import sqrt' in a module to overwrite Sage's sqrt function.\n\nNathann",
    "created_at": "2015-03-16T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245250",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:44'>**Comment 44:**</a>
> Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity. It is *MUCH* faster.

At some point he got some crazy somewhere by adding 'from math import sqrt' in a module to overwrite Sage's sqrt function.

Nathann



---

archive/issue_comments_245251.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nReplying to [@nathanncohen](#comment%3A44):\n> > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\n> \n> Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity.\n\nIn general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".",
    "created_at": "2015-03-16T09:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245251",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'>**Comment 45:**</a>
Replying to [@nathanncohen](#comment%3A44):
> > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

> 
> Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity.

In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".



---

archive/issue_comments_245252.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nReplying to [@jdemeyer](#comment%3A45):\n> > > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\n> > \n> > Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity.\n\n> \n> In general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".\n\nOn a tangential note: if someone makes major changes to the infinity rings, please consider adding a `NaN` element to them.",
    "created_at": "2015-03-16T10:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245252",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:46'>**Comment 46:**</a>
Replying to [@jdemeyer](#comment%3A45):
> > > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

> > 
> > Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity.

> 
> In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".

On a tangential note: if someone makes major changes to the infinity rings, please consider adding a `NaN` element to them.



---

archive/issue_comments_245253.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\n> In general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".\n\nWell, for the sqrt problem we were only computing on floats, and sqrt(5) in Sage is not a float. Having this symbolic value in the code we compared it with floats and this had a cost we had no reason to pay, so `from math import sqrt` made total sense, and there was nothing in Sage's sqrt that we could have wanted to change.\n\nAs per Sage's Infinity... Well, it also seems to have been designed with a different aim in mind. I usually want speed, and I do not want to pay for pointless abstraction. In infinity.py you will find parents, elements, rings and generators, while the feature I need is already provided by the constant LONG_MAX.\n\nThis Sage object is called 'infinity', but it turns out that one definition of \"infinity\" cannot cover all uses that we have for infinity on a computer. And I don't think that we could beat a single CPU instruction while dealing with parents and elements in a .py file.\n\nNathann",
    "created_at": "2015-03-16T10:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245253",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:47'>**Comment 47:**</a>
> In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".

Well, for the sqrt problem we were only computing on floats, and sqrt(5) in Sage is not a float. Having this symbolic value in the code we compared it with floats and this had a cost we had no reason to pay, so `from math import sqrt` made total sense, and there was nothing in Sage's sqrt that we could have wanted to change.

As per Sage's Infinity... Well, it also seems to have been designed with a different aim in mind. I usually want speed, and I do not want to pay for pointless abstraction. In infinity.py you will find parents, elements, rings and generators, while the feature I need is already provided by the constant LONG_MAX.

This Sage object is called 'infinity', but it turns out that one definition of "infinity" cannot cover all uses that we have for infinity on a computer. And I don't think that we could beat a single CPU instruction while dealing with parents and elements in a .py file.

Nathann



---

archive/issue_comments_245254.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\nReplying to [@nathanncohen](#comment%3A47):\n> while the feature I need is already provided by the constant LONG_MAX.\n\nIn this case, we shouldn't aritificially restrict to `long`s:\n\n```\nsage: IntegerLists(10^100, max_length=1).list()\n[[10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]\n```\n\n> This Sage object is called 'infinity', but it turns out that one definition of \"infinity\" cannot cover all uses that we have for infinity on a computer.\n\nI think we can have one definition which covers all uses *within Sage*. There is nothing fundamentally wrong with `Infinity`, it's just slow.",
    "created_at": "2015-03-16T11:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245254",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'>**Comment 48:**</a>
Replying to [@nathanncohen](#comment%3A47):
> while the feature I need is already provided by the constant LONG_MAX.

In this case, we shouldn't aritificially restrict to `long`s:

```
sage: IntegerLists(10^100, max_length=1).list()
[[10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]
```

> This Sage object is called 'infinity', but it turns out that one definition of "infinity" cannot cover all uses that we have for infinity on a computer.

I think we can have one definition which covers all uses *within Sage*. There is nothing fundamentally wrong with `Infinity`, it's just slow.



---

archive/issue_comments_245255.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\nNote the difference of a factor 20 between the following:\n\n```\nsage: b = ZZ(1); a = Infinity; timeit('a < b', repeat=20, number=10^4)\n10000 loops, best of 20: 11.7 \u00b5s per loop\nsage: b = ZZ(1); a = QQ(2); timeit('a < b', repeat=20, number=10^4)\n10000 loops, best of 20: 681 ns per loop\n```\nA proper Cython implementation of `Infinity` should match the speed for `QQ`.",
    "created_at": "2015-03-16T11:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245255",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'>**Comment 49:**</a>
Note the difference of a factor 20 between the following:

```
sage: b = ZZ(1); a = Infinity; timeit('a < b', repeat=20, number=10^4)
10000 loops, best of 20: 11.7 µs per loop
sage: b = ZZ(1); a = QQ(2); timeit('a < b', repeat=20, number=10^4)
10000 loops, best of 20: 681 ns per loop
```
A proper Cython implementation of `Infinity` should match the speed for `QQ`.



---

archive/issue_comments_245256.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1\">5f81a0a</a></td><td><code>Move doctests</code></td></tr></table>\n",
    "created_at": "2015-03-16T13:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245256",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'>**Comment 50:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1">5f81a0a</a></td><td><code>Move doctests</code></td></tr></table>




---

archive/issue_comments_245257.json:
```json
{
    "body": "**Changing commit** from \"[b0a04aa5a4454766ed9802d8e99abcd7fb3e105b](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)\" to \"[5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)\".",
    "created_at": "2015-03-16T13:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245257",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b0a04aa5a4454766ed9802d8e99abcd7fb3e105b](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)" to "[5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)".



---

archive/issue_comments_245258.json:
```json
{
    "body": "<a id='comment:51'>**Comment 51:**</a>\nReplying to [@tscrim](#comment%3A33):\n> However IMO these tests should be in `Compositions`.\n\nDone",
    "created_at": "2015-03-16T13:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245258",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'>**Comment 51:**</a>
Replying to [@tscrim](#comment%3A33):
> However IMO these tests should be in `Compositions`.

Done



---

archive/issue_comments_245259.json:
```json
{
    "body": "<a id='comment:53'>**Comment 53:**</a>\nReplying to [@jdemeyer](#comment%3A40):\n> Replying to [@nthiery](#comment%3A39):\n> > Please do not change the enumeration order, at least as default\n\n> I disagree with this: the default should be \"do not sort, return stuff in the fastest possible way\". Sorting an iterator is very expensive and should only be done if really needed.\n\nFor IntegerList itself, any default is fine, and sorting is certainly\nvery bad. But for Partitions, Compositions, ... users are really\nexpecting lexicographic order. Besides, this is only a temporary\nsolution, and we will switch back to lexicographic once we have a\nproper implementation of IntegerListLex.\n\n> Is that really true? The only doctest failures that I saw where\n> \"obvious\" failures where some list order changed, I didn't see\n> anything subtle.\n\nThat's a point indeed; my feeling is that we have been lucky, although\nit could be that some changes w.r.t. MuPAD-Combinat makes the code\nless dependent on that feature.  I am worried by user's personal code\nout there. Well, if you are willing to help those guys ...\n\nCheers,\n                                    Nicolas",
    "created_at": "2015-03-16T14:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245259",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:53'>**Comment 53:**</a>
Replying to [@jdemeyer](#comment%3A40):
> Replying to [@nthiery](#comment%3A39):
> > Please do not change the enumeration order, at least as default

> I disagree with this: the default should be "do not sort, return stuff in the fastest possible way". Sorting an iterator is very expensive and should only be done if really needed.

For IntegerList itself, any default is fine, and sorting is certainly
very bad. But for Partitions, Compositions, ... users are really
expecting lexicographic order. Besides, this is only a temporary
solution, and we will switch back to lexicographic once we have a
proper implementation of IntegerListLex.

> Is that really true? The only doctest failures that I saw where
> "obvious" failures where some list order changed, I didn't see
> anything subtle.

That's a point indeed; my feeling is that we have been lucky, although
it could be that some changes w.r.t. MuPAD-Combinat makes the code
less dependent on that feature.  I am worried by user's personal code
out there. Well, if you are willing to help those guys ...

Cheers,
                                    Nicolas



---

archive/issue_comments_245260.json:
```json
{
    "body": "<a id='comment:54'>**Comment 54:**</a>\nReplying to [@jdemeyer](#comment%3A41):\n> I'm not sure about the counting... I guess a well-written Cython\n> implementation of `IntegerListsLex` will usually be faster than the\n> current polyhedra code. Profiling shows that a lot of time is spent in\n> just *constructing* the polyhedra (if there are not so many points,\n> enumerating them takes a lot less time than constructing the\n> polyhedron in the first place).\n\nAgreed, especially if we further go parallel: counting through\npolyhedral methods only becomes relevant for relatively large\npolyhedron. But this would be a very useful feature. So count\nwould eventually have some threshold to choose between the\ntwo methods. \n\nBy the way: we don't yet use Barvinok-like algorithms for counting\n(e.g. through LattE), or do we? This could make a difference too.\n\nCheers,\n                               Nicolas",
    "created_at": "2015-03-16T14:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245260",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:54'>**Comment 54:**</a>
Replying to [@jdemeyer](#comment%3A41):
> I'm not sure about the counting... I guess a well-written Cython
> implementation of `IntegerListsLex` will usually be faster than the
> current polyhedra code. Profiling shows that a lot of time is spent in
> just *constructing* the polyhedra (if there are not so many points,
> enumerating them takes a lot less time than constructing the
> polyhedron in the first place).

Agreed, especially if we further go parallel: counting through
polyhedral methods only becomes relevant for relatively large
polyhedron. But this would be a very useful feature. So count
would eventually have some threshold to choose between the
two methods. 

By the way: we don't yet use Barvinok-like algorithms for counting
(e.g. through LattE), or do we? This could make a difference too.

Cheers,
                               Nicolas



---

archive/issue_comments_245261.json:
```json
{
    "body": "<a id='comment:55'>**Comment 55:**</a>\nReplying to [@nthiery](#comment%3A54):\n> By the way: we don't yet use Barvinok-like algorithms for counting\n> (e.g. through LattE), or do we? This could make a difference too.\n\nI just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\n```\n1.1    What is LattE?\n\nThe name \u201cLattE\u201d is an abbreviation for \u201cLattice point Enumeration.\u201d LattE\nwas developed in 2001 to count lattice points contained in convex polyhedra\ndefined by linear equations and inequalities with integer coefficients. The poly-\nhedra can be of any (reasonably small) dimension.\n```",
    "created_at": "2015-03-16T14:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245261",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'>**Comment 55:**</a>
Replying to [@nthiery](#comment%3A54):
> By the way: we don't yet use Barvinok-like algorithms for counting
> (e.g. through LattE), or do we? This could make a difference too.

I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

```
1.1    What is LattE?

The name “LattE” is an abbreviation for “Lattice point Enumeration.” LattE
was developed in 2001 to count lattice points contained in convex polyhedra
defined by linear equations and inequalities with integer coefficients. The poly-
hedra can be of any (reasonably small) dimension.
```



---

archive/issue_comments_245262.json:
```json
{
    "body": "<a id='comment:56'>**Comment 56:**</a>\nReplying to [@nthiery](#comment%3A53):\n> But for Partitions, Compositions, ... users are really expecting lexicographic order.\n\nWell, certainly for `Compositions`, the current order is not defined:\n\n```\nsage: Compositions(2).list()\n[[1, 1], [2]]\nsage: Compositions(2, max_slope=0).list()\n[[2], [1, 1]]\n```",
    "created_at": "2015-03-16T14:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245262",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'>**Comment 56:**</a>
Replying to [@nthiery](#comment%3A53):
> But for Partitions, Compositions, ... users are really expecting lexicographic order.

Well, certainly for `Compositions`, the current order is not defined:

```
sage: Compositions(2).list()
[[1, 1], [2]]
sage: Compositions(2, max_slope=0).list()
[[2], [1, 1]]
```



---

archive/issue_comments_245263.json:
```json
{
    "body": "<a id='comment:57'>**Comment 57:**</a>\n[#17529 comment:11](https://github.com/sagemath/sage/issues/17529#comment:11) (we already have a LattE package)",
    "created_at": "2015-03-16T14:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245263",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:57'>**Comment 57:**</a>
[#17529 comment:11](https://github.com/sagemath/sage/issues/17529#comment:11) (we already have a LattE package)



---

archive/issue_comments_245264.json:
```json
{
    "body": "<a id='comment:58'>**Comment 58:**</a>\nReplying to [@jdemeyer](#comment%3A55):\n> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\nYes indeed! See also #15180.\n\nBtw: in case this could be useful, the developers are in Davis where I\ncurrently am for the upcoming Sage Days 64.\n\nCheers,\n                             Nicolas",
    "created_at": "2015-03-16T14:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245264",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:58'>**Comment 58:**</a>
Replying to [@jdemeyer](#comment%3A55):
> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

Yes indeed! See also #15180.

Btw: in case this could be useful, the developers are in Davis where I
currently am for the upcoming Sage Days 64.

Cheers,
                             Nicolas



---

archive/issue_comments_245265.json:
```json
{
    "body": "**Changing commit** from \"[5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)\" to \"[6f3164941f2565627afc1128ace01973c788f767](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)\".",
    "created_at": "2015-03-16T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245265",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)" to "[6f3164941f2565627afc1128ace01973c788f767](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)".



---

archive/issue_comments_245266.json:
```json
{
    "body": "<a id='comment:59'>**Comment 59:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767\">6f31649</a></td><td><code>Add two extra tests</code></td></tr></table>\n",
    "created_at": "2015-03-16T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245266",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>**Comment 59:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767">6f31649</a></td><td><code>Add two extra tests</code></td></tr></table>




---

archive/issue_comments_245267.json:
```json
{
    "body": "<a id='comment:60'>**Comment 60:**</a>\nFYI - `float('inf')` works quite well as a good and fast substitute for `Infinity` (which is why it is used in the current `IntegerListsLex`).",
    "created_at": "2015-03-16T15:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245267",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'>**Comment 60:**</a>
FYI - `float('inf')` works quite well as a good and fast substitute for `Infinity` (which is why it is used in the current `IntegerListsLex`).



---

archive/issue_comments_245268.json:
```json
{
    "body": "<a id='comment:61'>**Comment 61:**</a>\nReplying to [@nthiery](#comment%3A53):\n> But for Partitions users are really expecting lexicographic order.\n\nFor which applications does this really matter?\n\nI know that's how partitions are traditionally written down and how things are done in Sage historically. But I don't think that's enough reason to not change it, especially given the fact that the documentation doesn't say anything about the order. Any order of the list of partitions is a good answer mathematically.",
    "created_at": "2015-03-16T15:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245268",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'>**Comment 61:**</a>
Replying to [@nthiery](#comment%3A53):
> But for Partitions users are really expecting lexicographic order.

For which applications does this really matter?

I know that's how partitions are traditionally written down and how things are done in Sage historically. But I don't think that's enough reason to not change it, especially given the fact that the documentation doesn't say anything about the order. Any order of the list of partitions is a good answer mathematically.



---

archive/issue_comments_245269.json:
```json
{
    "body": "<a id='comment:62'>**Comment 62:**</a>\nI'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.",
    "created_at": "2015-03-16T15:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245269",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:62'>**Comment 62:**</a>
I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.



---

archive/issue_comments_245270.json:
```json
{
    "body": "<a id='comment:63'>**Comment 63:**</a>\nReplying to [@tscrim](#comment%3A62):\n> I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.\n\nTo be honest, I don't know what you mean mathematically. But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.\n\nAnd in the cases where the order really matters, I think those places should simply explicitly sort or use `IntegerListsLex`. Slowing down all of `Paritions()` just because one or two applications require it seems stupid.",
    "created_at": "2015-03-16T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245270",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'>**Comment 63:**</a>
Replying to [@tscrim](#comment%3A62):
> I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.

To be honest, I don't know what you mean mathematically. But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.

And in the cases where the order really matters, I think those places should simply explicitly sort or use `IntegerListsLex`. Slowing down all of `Paritions()` just because one or two applications require it seems stupid.



---

archive/issue_comments_245271.json:
```json
{
    "body": "<a id='comment:64'>**Comment 64:**</a>\n> But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.\n\nThis might be an issue though\n\n```\nsage: S=SymmetricGroup(3)\nsage: S.character_table()\n[ 1 -1  1]\n[ 2  0 -1]\n[ 1  1  1]\nsage: type(S.character_table())\n<type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>\n```\nThe character table should really be indexed by partitions (or conjugacy classes of S_n).\nSo the meaning of the matrix changes if the order of the list of partitions changes.",
    "created_at": "2015-03-16T19:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245271",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:64'>**Comment 64:**</a>
> But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.

This might be an issue though

```
sage: S=SymmetricGroup(3)
sage: S.character_table()
[ 1 -1  1]
[ 2  0 -1]
[ 1  1  1]
sage: type(S.character_table())
<type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>
```
The character table should really be indexed by partitions (or conjugacy classes of S_n).
So the meaning of the matrix changes if the order of the list of partitions changes.



---

archive/issue_comments_245272.json:
```json
{
    "body": "<a id='comment:65'>**Comment 65:**</a>\nReplying to [@anneschilling](#comment%3A64):\n> This might be an issue though\n> \n> ```\n> sage: S=SymmetricGroup(3)\n> sage: S.character_table()\n> [ 1 -1  1]\n> [ 2  0 -1]\n> [ 1  1  1]\n> sage: type(S.character_table())\n> <type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>\n> ```\n> The character table should really be indexed by partitions (or conjugacy classes of S_n).\n> So the meaning of the matrix changes if the order of the list of partitions changes.\n\nOkay, so the meaning of the matrix changes. There is nothing wrong with output *changing* as long as things stay mathematically correct and internally consistent.",
    "created_at": "2015-03-16T19:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245272",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'>**Comment 65:**</a>
Replying to [@anneschilling](#comment%3A64):
> This might be an issue though
> 
> ```
> sage: S=SymmetricGroup(3)
> sage: S.character_table()
> [ 1 -1  1]
> [ 2  0 -1]
> [ 1  1  1]
> sage: type(S.character_table())
> <type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>
> ```
> The character table should really be indexed by partitions (or conjugacy classes of S_n).
> So the meaning of the matrix changes if the order of the list of partitions changes.

Okay, so the meaning of the matrix changes. There is nothing wrong with output *changing* as long as things stay mathematically correct and internally consistent.



---

archive/issue_comments_245273.json:
```json
{
    "body": "<a id='comment:66'>**Comment 66:**</a>\nReplying to [@jdemeyer](#comment%3A55):\n> Replying to [@nthiery](#comment%3A54):\n> > By the way: we don't yet use Barvinok-like algorithms for counting\n> > (e.g. through LattE), or do we? This could make a difference too.\n\n> \n> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\nMoreover, counting the points is faster than enumerating the points; there could be exponentially many points to count, but still the number of them is only polynomial in the input size, for fixed dimension, and LattE provides a truly polynomial-time procedure for this counting.",
    "created_at": "2015-03-18T10:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245273",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:66'>**Comment 66:**</a>
Replying to [@jdemeyer](#comment%3A55):
> Replying to [@nthiery](#comment%3A54):
> > By the way: we don't yet use Barvinok-like algorithms for counting
> > (e.g. through LattE), or do we? This could make a difference too.

> 
> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

Moreover, counting the points is faster than enumerating the points; there could be exponentially many points to count, but still the number of them is only polynomial in the input size, for fixed dimension, and LattE provides a truly polynomial-time procedure for this counting.



---

archive/issue_events_219052.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-25T20:01:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219052"
}
```



---

archive/issue_events_219053.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-25T20:01:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219053"
}
```



---

archive/issue_comments_245274.json:
```json
{
    "body": "<a id='comment:67'>**Comment 67:**</a>\na badly formated doc in composition.py\n\n```\n     TESTS::\n \n+    Check that :trac:`17548` is fixed::\n```",
    "created_at": "2015-03-25T20:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245274",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:67'>**Comment 67:**</a>
a badly formated doc in composition.py

```
     TESTS::
 
+    Check that :trac:`17548` is fixed::
```



---

archive/issue_comments_245275.json:
```json
{
    "body": "**Changing commit** from \"[6f3164941f2565627afc1128ace01973c788f767](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)\" to \"[62b56ba0e0fa855ab89d832755d0219bd9f6b5f5](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)\".",
    "created_at": "2015-03-25T22:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245275",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6f3164941f2565627afc1128ace01973c788f767](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)" to "[62b56ba0e0fa855ab89d832755d0219bd9f6b5f5](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)".



---

archive/issue_comments_245276.json:
```json
{
    "body": "<a id='comment:68'>**Comment 68:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5\">62b56ba</a></td><td><code>Improve IntegerLists_polyhedron; sort Partitions by default</code></td></tr></table>\n",
    "created_at": "2015-03-25T22:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245276",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:68'>**Comment 68:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5">62b56ba</a></td><td><code>Improve IntegerLists_polyhedron; sort Partitions by default</code></td></tr></table>




---

archive/issue_comments_245277.json:
```json
{
    "body": "<a id='comment:69'>**Comment 69:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020\">5096e5f</a></td><td><code>Fix documentation</code></td></tr></table>\n",
    "created_at": "2015-03-25T22:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245277",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:69'>**Comment 69:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020">5096e5f</a></td><td><code>Fix documentation</code></td></tr></table>




---

archive/issue_comments_245278.json:
```json
{
    "body": "**Changing commit** from \"[62b56ba0e0fa855ab89d832755d0219bd9f6b5f5](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)\" to \"[5096e5f0fb03432307efea20493216bf713eb020](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)\".",
    "created_at": "2015-03-25T22:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245278",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[62b56ba0e0fa855ab89d832755d0219bd9f6b5f5](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)" to "[5096e5f0fb03432307efea20493216bf713eb020](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)".



---

archive/issue_events_219054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T22:37:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219054"
}
```



---

archive/issue_events_219055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T22:37:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219055"
}
```



---

archive/issue_comments_245279.json:
```json
{
    "body": "**Changing dependencies** from \"#17937\" to \"#17937, #18087\".",
    "created_at": "2015-04-05T07:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245279",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#17937" to "#17937, #18087".



---

archive/issue_comments_245280.json:
```json
{
    "body": "**Changing commit** from \"[5096e5f0fb03432307efea20493216bf713eb020](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)\" to \"[621d467827d8d0c6a0cb1113cb4b861cca936f41](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)\".",
    "created_at": "2015-04-05T07:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245280",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5096e5f0fb03432307efea20493216bf713eb020](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)" to "[621d467827d8d0c6a0cb1113cb4b861cca936f41](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)".



---

archive/issue_comments_245281.json:
```json
{
    "body": "<a id='comment:72'>**Comment 72:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9dce18385fd59755cbcced5f1804bf60b19df07\">c9dce18</a></td><td><code>Remove sig_on() from __dealloc__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41\">621d467</a></td><td><code>Merge commit 'c9dce18385fd59755cbcced5f1804bf60b19df07' into t/17920/ticket/17920</code></td></tr></table>\n",
    "created_at": "2015-04-05T07:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245281",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:72'>**Comment 72:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9dce18385fd59755cbcced5f1804bf60b19df07">c9dce18</a></td><td><code>Remove sig_on() from __dealloc__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41">621d467</a></td><td><code>Merge commit 'c9dce18385fd59755cbcced5f1804bf60b19df07' into t/17920/ticket/17920</code></td></tr></table>




---

archive/issue_comments_245282.json:
```json
{
    "body": "<a id='comment:73'>**Comment 73:**</a>\nWhats your plan with the code here? It might be useful to check. Thoughts?",
    "created_at": "2015-04-12T11:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245282",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:73'>**Comment 73:**</a>
Whats your plan with the code here? It might be useful to check. Thoughts?



---

archive/issue_events_219056.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/blocker",
    "label_color": "ff0000",
    "label_name": "blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219056"
}
```



---

archive/issue_events_219057.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219057"
}
```



---

archive/issue_events_219058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219058"
}
```



---

archive/issue_comments_245283.json:
```json
{
    "body": "<a id='comment:74'>**Comment 74:**</a>\nThis code is useful as it works in more general context than the new `IntegerListsLex` as it allows entries in `ZZ` (instead of just `NN`) and when lex ordering doesn't hit every element in finite time. Plus I like alternative algorithms for testing, and this is faster in certain cases currently as well. I just need to find some time to review this.",
    "created_at": "2015-04-12T11:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245283",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:74'>**Comment 74:**</a>
This code is useful as it works in more general context than the new `IntegerListsLex` as it allows entries in `ZZ` (instead of just `NN`) and when lex ordering doesn't hit every element in finite time. Plus I like alternative algorithms for testing, and this is faster in certain cases currently as well. I just need to find some time to review this.



---

archive/issue_events_219059.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-04-12T11:47:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219059"
}
```



---

archive/issue_events_219060.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-04-12T11:47:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219060"
}
```



---

archive/issue_comments_245284.json:
```json
{
    "body": "<a id='comment:75'>**Comment 75:**</a>\nIndeed, we want this code in Sage! I promised Jeroen I would rebase his code, and work on the review. This could be a good sprint for Sage Days 67. But yes this certainly is not a blocker anymore for 6.6.",
    "created_at": "2015-04-12T14:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245284",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:75'>**Comment 75:**</a>
Indeed, we want this code in Sage! I promised Jeroen I would rebase his code, and work on the review. This could be a good sprint for Sage Days 67. But yes this certainly is not a blocker anymore for 6.6.



---

archive/issue_comments_245285.json:
```json
{
    "body": "<a id='comment:76'>**Comment 76:**</a>\nNeeds to be rebased in any case. I might also try to make it work in *all* cases of infinite iterator (currently, I still require that there are only finitely many lists of every given length).",
    "created_at": "2015-04-13T07:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245285",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:76'>**Comment 76:**</a>
Needs to be rebased in any case. I might also try to make it work in *all* cases of infinite iterator (currently, I still require that there are only finitely many lists of every given length).



---

archive/issue_events_219061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T07:09:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219061"
}
```



---

archive/issue_events_219062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T07:09:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-219062"
}
```



---

archive/issue_comments_245286.json:
```json
{
    "body": "<a id='comment:77'>**Comment 77:**</a>\nI would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.",
    "created_at": "2015-04-13T07:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245286",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'>**Comment 77:**</a>
I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.



---

archive/issue_comments_245287.json:
```json
{
    "body": "<a id='comment:78'>**Comment 78:**</a>\nReplying to [@jdemeyer](#comment%3A77):\n> I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n+1\n\nwhy not several iterators on the same class? (with a reasonable one by default in `__iter__`).",
    "created_at": "2015-04-13T08:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245287",
    "user": "https://github.com/videlec"
}
```

<a id='comment:78'>**Comment 78:**</a>
Replying to [@jdemeyer](#comment%3A77):
> I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

+1

why not several iterators on the same class? (with a reasonable one by default in `__iter__`).



---

archive/issue_comments_245288.json:
```json
{
    "body": "<a id='comment:79'>**Comment 79:**</a>\nReplying to [@videlec](#comment%3A78):\n> Replying to [@jdemeyer](#comment%3A77):\n> > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n> \n> +1\n> \n> why not several iterators on the same class? (with a reasonable one by default in `__iter__`).\n\nWell, it will be something along those lines. But I haven't thought too much about the actual design.",
    "created_at": "2015-04-13T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245288",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:79'>**Comment 79:**</a>
Replying to [@videlec](#comment%3A78):
> Replying to [@jdemeyer](#comment%3A77):
> > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

> 
> +1
> 
> why not several iterators on the same class? (with a reasonable one by default in `__iter__`).

Well, it will be something along those lines. But I haven't thought too much about the actual design.



---

archive/issue_comments_245289.json:
```json
{
    "body": "<a id='comment:80'>**Comment 80:**</a>\nReplying to [@nthiery](#comment%3A75):\n> I promised Jeroen I would rebase his code\n\nThanks for the offer, but that will not be needed (in any case, it's just merging with `-X theirs` essentially)",
    "created_at": "2015-04-13T08:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245289",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'>**Comment 80:**</a>
Replying to [@nthiery](#comment%3A75):
> I promised Jeroen I would rebase his code

Thanks for the offer, but that will not be needed (in any case, it's just merging with `-X theirs` essentially)



---

archive/issue_comments_245290.json:
```json
{
    "body": "<a id='comment:81'>**Comment 81:**</a>\nReplying to [@jdemeyer](#comment%3A79):\n> Replying to [@videlec](#comment%3A78):\n> > Replying to [@jdemeyer](#comment%3A77):\n> > > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n> > \n> > +1\n> > \n> > why not several iterators on the same class? (with a reasonable one by default in `__iter__`).\n\n> Well, it will be something along those lines. But I haven't thought too much about the actual design.\n\n+1 to sharing code between the classes; in fact I had put a mental\nnote on doing this when I offered to do the merge :-)\n\nHaving a class that can handle any set of constraints, even if it does\nonly containment check, would be useful. We would need this in\nparticular to properly refactor integer vectors.\n\nI am not sure whether we want a single class, or two classes:\n\n```\nclass IntegerLists:\n    __iter__ -> __iter__ on the polyhedron\n\nclass IntegerListsLex(IntegerLists):\n```\n\nWith the second one having the additional specification that the\nenumeration shall be lexicographic.\n\nThoughts?\n\nCheers,\n                              Nicolas",
    "created_at": "2015-04-13T11:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-245290",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:81'>**Comment 81:**</a>
Replying to [@jdemeyer](#comment%3A79):
> Replying to [@videlec](#comment%3A78):
> > Replying to [@jdemeyer](#comment%3A77):
> > > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

> > 
> > +1
> > 
> > why not several iterators on the same class? (with a reasonable one by default in `__iter__`).

> Well, it will be something along those lines. But I haven't thought too much about the actual design.

+1 to sharing code between the classes; in fact I had put a mental
note on doing this when I offered to do the merge :-)

Having a class that can handle any set of constraints, even if it does
only containment check, would be useful. We would need this in
particular to properly refactor integer vectors.

I am not sure whether we want a single class, or two classes:

```
class IntegerLists:
    __iter__ -> __iter__ on the polyhedron

class IntegerListsLex(IntegerLists):
```

With the second one having the additional specification that the
enumeration shall be lexicographic.

Thoughts?

Cheers,
                              Nicolas
